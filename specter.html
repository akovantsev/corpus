<!DOCTYPE html>
<head><title>specter</title><meta charset="UTF-8" /><style type="text/css">body {
    font-family: Monaco, Menlo, Consolas, "Courier New", sans-serif;
    font-size: 12px;
    margin: 15px;
}
pre,
code {
    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
    color: #333;
}
code {
    /*line-height: 1.2;*/
    white-space: normal;
    color: #c25;
    background-color: #f7f7f9;
    border: 1px solid #e1e1e8;
}
pre {
    margin: .5rem 0 .2rem;
    font-size: .75rem;
    /*line-height: 1.15rem;*/
    background: #fbfaf8;
    padding: .5rem;
    word-break: normal;
    display: block;
    border: 1px solid rgba(0, 0, 0, .15);
    white-space: pre-wrap;
    word-wrap: break-word;
    border-radius: 4px;
}
span {
    white-space: pre-wrap;
}
span.u {
    margin-top: 3px;
    /*margin-left: 10px;*/
    margin-right: 10px;
    background-color: lavender;
}
span.t:hover {
    text-decoration: underline;
    color: blue;
    cursor: pointer
}
div:target > span.u {
    background-color: aquamarine
}

#filters-container {
    position: fixed;
    right: 50px;
    z-index: 1;
}
#filters-container > input {
    /*column:*/
    display: block;
}

div > a:first-child {
    text-decoration: none;
    color: blue;
    position: absolute;
    left: 3px;
}

div > a:first-child:hover {
    text-decoration: underline;
    color: aquamarine;
}


</style></head><body><style id="css-text-filter"></style><style id="css-date-filter"></style><style id="css-filter-override"></style><h3>#specter, last update time: 2020-11-17 17:42:30</h3><h3>up until: <a href="https://clojurians-log.clojureverse.org/specter/2020-10-27">https://clojurians-log.clojureverse.org/specter/2020-10-27</a></h3><pre>pro tips:
* Double click on text to filter by it. (doubleclick + cmd-f for extra points).
* Click on date to keep day visible regardless of filter.
* Click on time to keep hour visible regardless of filter.</pre><p id="filters-container"><input id="date-filter" onkeyup="debdatefilter(this.value)" placeholder="filter day/hour" type="string" /><input id="text-filter" onkeyup="debtextfilter(this.value)" placeholder="filter text" type="string" /></p><script>const textFilterInput = document.getElementById("text-filter");
const dateFilterInput = document.getElementById("date-filter");
const filterTextStyle = document.getElementById("css-text-filter");
const filterDateStyle = document.getElementById("css-date-filter");
const filterStyleOverride = document.getElementById("css-filter-override");

function textFilter(text) {
    var style = '';
    if (text.trim() !== '') {
        text.split(' ').forEach(function (t) {
            if (t !== '') {
                style = style + "div:not([t*='" + t + "' i]) {display: none; opacity: 0.6}";
            }
        });
    }
    filterTextStyle.innerHTML = style;
}


function filterSelection (e) {
    let sel = document.getSelection();
    let txt = sel.toString();
    textFilterInput.value = (txt || "");
    textFilter(txt);
}
function debounce1(callback, delay) {
    let timeout;
    return function(arg) {
        clearTimeout(timeout);
        timeout = setTimeout(callback, delay, arg);
    }
}

function keyUp (e) {
    if (e.code === "KeyF" && e.ctrlKey) {
        let txt = document.getSelection().toString();
        if (txt.length > 0) {
            textFilterInput.value = (txt || "");
            textFilter(txt);
        }
    }
}


function showDateTimes (datestr) {
    dateFilterInput.value = datestr;
    var ids = [];
    var els = document.querySelectorAll("div[t^='" + datestr + "']");
    var first = els[0];
    var last = els[els.length - 1];
    if (first && first.previousElementSibling) {
        ids.push(first.previousElementSibling.id);
    }
    els.forEach(function (el){
        ids.push(el.id);
    })
    if (last && last.nextElementSibling) {
        ids.push(last.nextElementSibling.id);
    }


    var style1 = '';
    var style2 = '';
    ids.forEach(function (id) {
        if (id) {
            style1 = style1 + ", #" + id;
            style2 = style2 + ", #" + id + " span.t:nth-child(2):after";
        }
    })
    if (style1) {
        style1 = style1.substring(1) + " {display: block !important}";
    }
    if (style2) {
        style2 = style2.substring(1) + " {content: \"*\"; position: absolute}"
    }
    filterDateStyle.innerHTML = style1 + "\n" + style2;
}

function filterDay (el) {
    showDateTimes(el.textContent);
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function filterHours (el) {
    showDateTimes(el.previousElementSibling.textContent + " " + el.textContent.substring(0, 2));
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function forceShowSelected (el) {
    var id = el.parentElement.id
    if (id) {
        filterStyleOverride.innerHTML = ""
            + "#" + id
            + " {display: block !important;}"
            + "#" + id + " span.t:nth-child(2):after"
            + " {content: \"*\"; position: absolute}"

    } else {
        filterStyleOverride.innerHTML = "";
    }
}


const D = filterDay;
const H = filterHours;
const S = forceShowSelected;
const debtextfilter = debounce1(textFilter, 200);
const debdatefilter = debounce1(showDateTimes, 200);

function doubleClick (e) {
    if (e.target.tagName !== "INPUT") {
        filterSelection();
        e.target.scrollIntoView({behavior: "auto", block: "center", inline: "start"});
    }
}

document.ondblclick = doubleClick;
document.onkeyup = keyUp;
textFilterInput.focus();
</script><div id="t1449315226000007" t="2015-12-05 11:33:46 sveri That logbot follows everywhere I go  😄"><a href="#t1449315226000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-05</span> <span class="t" onclick="H(this)">11:33:46</span>                sveri </span><span>That logbot follows everywhere I go </span><b>😄</b></div><div id="t1449843506000012" t="2015-12-11 14:18:26 exupero Is there a way with specter to transform the first element matching a predicate?"><a href="#t1449843506000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:18:26</span>              exupero </span><span>Is there a way with specter to transform the first element matching a predicate?</span></div><div id="t1449843777000013" t="2015-12-11 14:22:57 sveri @exupero: I had this working for me:"><a href="#t1449843777000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:22:57</span>                sveri </span><span>@exupero: I had this working for me:</span></div><div id="t1449843791000014" t="2015-12-11 14:23:11 sveri  (spec/transform [:new-entity :columns spec/ALL #(= (:id %) id)]
                                      #(assoc % key val)
                                      @state)``"><a href="#t1449843791000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:23:11</span>                sveri </span><code></code><span>(spec/transform [:new-entity :columns spec/ALL #(= (:id %) id)]
                                      #(assoc % key val)
                                      @state)``</span></div><div id="t1449843815000015" t="2015-12-11 14:23:35 sveri I guess if you switch ALL by FIRST it will only transform the first met one"><a href="#t1449843815000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:23:35</span>                sveri </span><span>I guess if you switch ALL by FIRST it will only transform the first met one</span></div><div id="t1449844200000016" t="2015-12-11 14:30:00 exupero Using  FIRST pred  seems to get the first item in the sequence, then filter it on whether it satisfies the predicate."><a href="#t1449844200000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:30:00</span>              exupero </span><span>Using </span><code>FIRST pred</code><span> seems to get the first item in the sequence, then filter it on whether it satisfies the predicate.</span></div><div id="t1449844216000017" t="2015-12-11 14:30:16 exupero Essentially I want  ALL pred FIRST ."><a href="#t1449844216000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:30:16</span>              exupero </span><span>Essentially I want </span><code>ALL pred FIRST</code><span>.</span></div><div id="t1449844244000018" t="2015-12-11 14:30:44 exupero But that gives the error  Vector’s key for assoc must be a number."><a href="#t1449844244000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-12-11</span> <span class="t" onclick="H(this)">14:30:44</span>              exupero </span><span>But that gives the error </span><code>Vector’s key for assoc must be a number.</code></div><div id="t1451629574000020" t="2016-01-01 06:26:14 onetom Is it just me, or neither the intro article, nor the README on github mentions what namespace specter is using?"><a href="#t1451629574000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-01</span> <span class="t" onclick="H(this)">06:26:14</span>               onetom </span><span>Is it just me, or neither the intro article, nor the README on github mentions what namespace specter is using?</span></div><div id="t1451630336000021" t="2016-01-01 06:38:56 onetom Is it a convention if the namespace is not mentioned, then it&apos;s the same as the group/artifact-id?"><a href="#t1451630336000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-01</span> <span class="t" onclick="H(this)">06:38:56</span>               onetom </span><span>Is it a convention if the namespace is not mentioned, then it&apos;s the same as the group/artifact-id?</span></div><div id="t1451702307000022" t="2016-01-02 02:38:27 escherize That threw me off too."><a href="#t1451702307000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-02</span> <span class="t" onclick="H(this)">02:38:27</span>            escherize </span><span>That threw me off too.</span></div><div id="t1451747138000024" t="2016-01-02 15:05:38 drusellers i just assumed it followed the java conventions."><a href="#t1451747138000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-02</span> <span class="t" onclick="H(this)">15:05:38</span>           drusellers </span><span>i just assumed it followed the java conventions.</span></div><div id="t1451747156000025" t="2016-01-02 15:05:56 drusellers i’m trying to use Spector in CLJS with React and getting an odd error"><a href="#t1451747156000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-02</span> <span class="t" onclick="H(this)">15:05:56</span>           drusellers </span><span>i’m trying to use Spector in CLJS with React and getting an odd error</span></div><div id="t1451747163000026" t="2016-01-02 15:06:03 drusellers No protocol method IReduce.-reduce defined for type om.core/IndexedCursor"><a href="#t1451747163000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-02</span> <span class="t" onclick="H(this)">15:06:03</span>           drusellers </span><code>No protocol method IReduce.-reduce defined for type om.core/IndexedCursor</code></div><div id="t1451747169000027" t="2016-01-02 15:06:09 drusellers when i try to query out a collection."><a href="#t1451747169000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-02</span> <span class="t" onclick="H(this)">15:06:09</span>           drusellers </span><span>when i try to query out a collection.</span></div><div id="t1451919412000028" t="2016-01-04 14:56:52 sveri @drusellers: Looks like you reduce on a different type than specter expects. Maybe try to turn it into a seq or vec before working on it with specter?"><a href="#t1451919412000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-04</span> <span class="t" onclick="H(this)">14:56:52</span>                sveri </span><span>@drusellers: Looks like you reduce on a different type than specter expects. Maybe try to turn it into a seq or vec before working on it with specter?</span></div><div id="t1451919459000029" t="2016-01-04 14:57:39 sveri Basically the message says that om.core/IndexedCursor does not implement the IReduce protocol and therefore cannot reduce on it"><a href="#t1451919459000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-04</span> <span class="t" onclick="H(this)">14:57:39</span>                sveri </span><span>Basically the message says that om.core/IndexedCursor does not implement the IReduce protocol and therefore cannot reduce on it</span></div><div id="t1451947782000030" t="2016-01-04 22:49:42 drusellers @sveri: fyi -  https://github.com/nathanmarz/specter/issues/46"><a href="#t1451947782000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-04</span> <span class="t" onclick="H(this)">22:49:42</span>           drusellers </span><span>@sveri: fyi - </span><a href="https://github.com/nathanmarz/specter/issues/46" target="_blank">https://github.com/nathanmarz/specter/issues/46</a></div><div id="t1452588284000034" t="2016-01-12 08:44:44 meow boo  👻   :specter:"><a href="#t1452588284000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">08:44:44</span>                 meow </span><span>boo </span><b>👻</b><span> </span><b>:specter:</b></div><div id="t1456953344000005" t="2016-03-02 21:15:44 pdlug Is there a way to provide a default value when doing a  transform ? I have a vector of maps and I’m looking to either modify the map found by a key or insert it if not found"><a href="#t1456953344000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-02</span> <span class="t" onclick="H(this)">21:15:44</span>                pdlug </span><span>Is there a way to provide a default value when doing a </span><code>transform</code><span>? I have a vector of maps and I’m looking to either modify the map found by a key or insert it if not found</span></div><div id="t1457375755000007" t="2016-03-07 18:35:55 hugobessaa Hey, hi!"><a href="#t1457375755000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">18:35:55</span>           hugobessaa </span><span>Hey, hi!</span></div><div id="t1457375771000009" t="2016-03-07 18:36:11 hugobessaa I&apos;m using specter to filter a nested list"><a href="#t1457375771000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">18:36:11</span>           hugobessaa </span><span>I&apos;m using specter to filter a nested list</span></div><div id="t1457375784000010" t="2016-03-07 18:36:24 hugobessaa Any way this could be better written?"><a href="#t1457375784000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">18:36:24</span>           hugobessaa </span><span>Any way this could be better written?</span></div><div id="t1457375849000013" t="2016-03-07 18:37:29 hugobessaa (specter/transform [:profile-edit :navigation specter/ALL :anchors]
                     (partial filter anchor-on-page?)
                     db)
"><a href="#t1457375849000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">18:37:29</span>           hugobessaa </span><pre>(specter/transform [:profile-edit :navigation specter/ALL :anchors]
                     (partial filter anchor-on-page?)
                     db)
</pre></div><div id="t1457379378000014" t="2016-03-07 19:36:18 wei @hugobessaa: that’s how I would do it"><a href="#t1457379378000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">19:36:18</span>                  wei </span><span>@hugobessaa: that’s how I would do it</span></div><div id="t1457379383000015" t="2016-03-07 19:36:23 wei there might be a better way but I’m not sure"><a href="#t1457379383000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">19:36:23</span>                  wei </span><span>there might be a better way but I’m not sure</span></div><div id="t1457380018000016" t="2016-03-07 19:46:58 hugobessaa it would be nice if I could use a transducer with  transform"><a href="#t1457380018000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-07</span> <span class="t" onclick="H(this)">19:46:58</span>           hugobessaa </span><span>it would be nice if I could use a transducer with </span><code>transform</code></div><div id="t1458078819000003" t="2016-03-15 21:53:39 alexisgallagher I have a basic specter question. I think I&apos;m just not understanding its fundamental concepts."><a href="#t1458078819000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:53:39</span>      alexisgallagher </span><span>I have a basic specter question. I think I&apos;m just not understanding its fundamental concepts.</span></div><div id="t1458078824000004" t="2016-03-15 21:53:44 alexisgallagher Say I have a vector  mymaps  like so:"><a href="#t1458078824000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:53:44</span>      alexisgallagher </span><span>Say I have a vector </span><code>mymaps</code><span> like so:</span></div><div id="t1458078842000005" t="2016-03-15 21:54:02 alexisgallagher (def mymaps [{:a 1 :b 2 :c {:d true}}
               {:a 2 :b 2 :c {:d false}}
               {:a 3 :b 2 :c {:d true}}])"><a href="#t1458078842000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:54:02</span>      alexisgallagher </span><pre>(def mymaps [{:a 1 :b 2 :c {:d true}}
               {:a 2 :b 2 :c {:d false}}
               {:a 3 :b 2 :c {:d true}}])</pre></div><div id="t1458078887000008" t="2016-03-15 21:54:47 alexisgallagher And I want to select all the items where the nested map&apos;s :d&apos;s value is true. If I was using  filter  and  get-in , I&apos;d just do it like so:"><a href="#t1458078887000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:54:47</span>      alexisgallagher </span><span>And I want to select all the items where the nested map&apos;s :d&apos;s value is true. If I was using </span><code>filter</code><span> and </span><code>get-in</code><span>, I&apos;d just do it like so:</span></div><div id="t1458078898000009" t="2016-03-15 21:54:58 alexisgallagher (filter #(get-in % [:c :d]) mymaps)"><a href="#t1458078898000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:54:58</span>      alexisgallagher </span><pre>(filter #(get-in % [:c :d]) mymaps)</pre></div><div id="t1458078915000011" t="2016-03-15 21:55:15 alexisgallagher How would I do this with specter?"><a href="#t1458078915000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:55:15</span>      alexisgallagher </span><span>How would I do this with specter?</span></div><div id="t1458078948000012" t="2016-03-15 21:55:48 alexisgallagher I&apos;m supposing I should use the  select  operator, since I don&apos;t want to transform components of the original structure in place. I only want to select certain components within it."><a href="#t1458078948000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:55:48</span>      alexisgallagher </span><span>I&apos;m supposing I should use the </span><code>select</code><span> operator, since I don&apos;t want to transform components of the original structure in place. I only want to select certain components within it.</span></div><div id="t1458078984000013" t="2016-03-15 21:56:24 alexisgallagher So, trivially, I could use select to pull out all the boolean values I want to test, by doing:"><a href="#t1458078984000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:56:24</span>      alexisgallagher </span><span>So, trivially, I could use select to pull out all the boolean values I want to test, by doing:</span></div><div id="t1458078988000014" t="2016-03-15 21:56:28 alexisgallagher (select [ALL :c :d] mymaps)"><a href="#t1458078988000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:56:28</span>      alexisgallagher </span><pre>(select [ALL :c :d] mymaps)</pre></div><div id="t1458078996000015" t="2016-03-15 21:56:36 alexisgallagher But this just gives me an array of booleans."><a href="#t1458078996000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:56:36</span>      alexisgallagher </span><span>But this just gives me an array of booleans.</span></div><div id="t1458079016000016" t="2016-03-15 21:56:56 alexisgallagher If I want to use those values as a predicate to select the maps themselves, then ... ?"><a href="#t1458079016000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-15</span> <span class="t" onclick="H(this)">21:56:56</span>      alexisgallagher </span><span>If I want to use those values as a predicate to select the maps themselves, then ... ?</span></div><div id="t1458245594000017" t="2016-03-17 20:13:14 alexisgallagher Well, I see there&apos;s a talk on specter at the Conj. Maybe I&apos;ll fly to Seattle and figure out how to select with an embedded filtering condition there.  😜"><a href="#t1458245594000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-17</span> <span class="t" onclick="H(this)">20:13:14</span>      alexisgallagher </span><span>Well, I see there&apos;s a talk on specter at the Conj. Maybe I&apos;ll fly to Seattle and figure out how to select with an embedded filtering condition there. </span><b>😜</b></div><div id="t1458302432000018" t="2016-03-18 12:00:32 hugobessaa @alexisgallagher: I tried to do this myself last week. I ended up doing this:"><a href="#t1458302432000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">12:00:32</span>           hugobessaa </span><span>@alexisgallagher: I tried to do this myself last week. I ended up doing this:</span></div><div id="t1458302436000019" t="2016-03-18 12:00:36 hugobessaa (specter/transform [:profile-edit :navigation specter/ALL :anchors]
                     (partial filter anchor-on-page?)
                     db)
"><a href="#t1458302436000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">12:00:36</span>           hugobessaa </span><pre>(specter/transform [:profile-edit :navigation specter/ALL :anchors]
                     (partial filter anchor-on-page?)
                     db)
</pre></div><div id="t1458302485000020" t="2016-03-18 12:01:25 hugobessaa anchor-on-page?  is my predicate that test some nested data"><a href="#t1458302485000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">12:01:25</span>           hugobessaa </span><code>anchor-on-page?</code><span> is my predicate that test some nested data</span></div><div id="t1458302642000021" t="2016-03-18 12:04:02 hugobessaa revisiting the docs, I think I found what you and I were looking for:"><a href="#t1458302642000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">12:04:02</span>           hugobessaa </span><span>revisiting the docs, I think I found what you and I were looking for:</span></div><div id="t1458302647000022" t="2016-03-18 12:04:07 hugobessaa (transform [ALL (if-path [:a even?] [:c ALL] :d)]
              inc
              [{:a 2 :c [1 2] :d 4} {:a 4 :c [0 10 -1]} {:a -1 :c [1 1 1] :d 1}])
"><a href="#t1458302647000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">12:04:07</span>           hugobessaa </span><pre>(transform [ALL (if-path [:a even?] [:c ALL] :d)]
              inc
              [{:a 2 :c [1 2] :d 4} {:a 4 :c [0 10 -1]} {:a -1 :c [1 1 1] :d 1}])
</pre></div><div id="t1458342544000023" t="2016-03-18 23:09:04 wei I would stick with  filter /`get-in` in this case."><a href="#t1458342544000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-18</span> <span class="t" onclick="H(this)">23:09:04</span>                  wei </span><span>I would stick with </span><code>filter</code><span>/`get-in` in this case.</span></div><div id="t1458780570000024" t="2016-03-24 00:49:30 alexisgallagher @hugobessaa: Interesting. I see my original question has been archived out of existence alas."><a href="#t1458780570000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-03-24</span> <span class="t" onclick="H(this)">00:49:30</span>      alexisgallagher </span><span>@hugobessaa: Interesting. I see my original question has been archived out of existence alas.</span></div><div id="t1461447614000006" t="2016-04-23 21:40:14 thomasdeutsch what is the specter equivalent of this?  (map (fn [a b] ...) a-coll b-coll)    (mapping over two seqs)"><a href="#t1461447614000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-23</span> <span class="t" onclick="H(this)">21:40:14</span>        thomasdeutsch </span><span>what is the specter equivalent of this? </span><pre>(map (fn [a b] ...) a-coll b-coll) </pre><span>  (mapping over two seqs)</span></div><div id="t1461601114000008" t="2016-04-25 16:18:34 tcoupland (select [:workflow ALL LAST keyword? #(= :inc %)]
          {:workflow [[:in :inc]
                      [:inc :dbl]
                      [:dbl :div]
                      [:div [enough? :out :inc]]]}) =&gt; [:inc]
"><a href="#t1461601114000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-25</span> <span class="t" onclick="H(this)">16:18:34</span>            tcoupland </span><pre>(select [:workflow ALL LAST keyword? #(= :inc %)]
          {:workflow [[:in :inc]
                      [:inc :dbl]
                      [:dbl :div]
                      [:div [enough? :out :inc]]]}) =&gt; [:inc]
</pre></div><div id="t1461601143000009" t="2016-04-25 16:19:03 tcoupland to my mind i shouldn&apos;t have to wrap the last element in the selector with a function, i should be able to just use &apos;:inc&apos;"><a href="#t1461601143000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-25</span> <span class="t" onclick="H(this)">16:19:03</span>            tcoupland </span><span>to my mind i shouldn&apos;t have to wrap the last element in the selector with a function, i should be able to just use &apos;:inc&apos;</span></div><div id="t1461601162000011" t="2016-04-25 16:19:22 tcoupland but if i do that i just be nil&apos;s"><a href="#t1461601162000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-25</span> <span class="t" onclick="H(this)">16:19:22</span>            tcoupland </span><span>but if i do that i just be nil&apos;s</span></div><div id="t1461601170000012" t="2016-04-25 16:19:30 tcoupland wld be interested to know why!  simple_smile"><a href="#t1461601170000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-25</span> <span class="t" onclick="H(this)">16:19:30</span>            tcoupland </span><span>wld be interested to know why! </span><b>simple_smile</b></div><div id="t1461707641000013" t="2016-04-26 21:54:01 aengelberg @tcoupland: Specter doesn&apos;t know you mean to compare an element with  :inc , it thinks you want to navigate to  (:inc ...)  which is nil for anything that isn&apos;t a map"><a href="#t1461707641000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-26</span> <span class="t" onclick="H(this)">21:54:01</span>           aengelberg </span><span>@tcoupland: Specter doesn&apos;t know you mean to compare an element with </span><code>:inc</code><span>, it thinks you want to navigate to </span><code>(:inc ...)</code><span> which is nil for anything that isn&apos;t a map</span></div><div id="t1461707699000014" t="2016-04-26 21:54:59 aengelberg (select [:a-keyword] ...)  is syntactic sugar for  (select [(keypath :a-keyword)] ...)  in Specter"><a href="#t1461707699000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-26</span> <span class="t" onclick="H(this)">21:54:59</span>           aengelberg </span><code>(select [:a-keyword] ...)</code><span> is syntactic sugar for </span><code>(select [(keypath :a-keyword)] ...)</code><span> in Specter</span></div><div id="t1461707736000015" t="2016-04-26 21:55:36 tcoupland Aye, it feels very map centric sometimes"><a href="#t1461707736000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-26</span> <span class="t" onclick="H(this)">21:55:36</span>            tcoupland </span><span>Aye, it feels very map centric sometimes</span></div><div id="t1461707814000016" t="2016-04-26 21:56:54 tcoupland I made a little value-path path fn that does the trick nicely, works with parametrised comp-path"><a href="#t1461707814000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-26</span> <span class="t" onclick="H(this)">21:56:54</span>            tcoupland </span><span>I made a little value-path path fn that does the trick nicely, works with parametrised comp-path</span></div><div id="t1463416589000022" t="2016-05-16 16:36:29 mac Is it bad form to ask a question here which is a duplicate of an issue submitted to github?"><a href="#t1463416589000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">16:36:29</span>                  mac </span><span>Is it bad form to ask a question here which is a duplicate of an issue submitted to github?</span></div><div id="t1463420703000023" t="2016-05-16 17:45:03 nathanmarz @mac: just answered it on github"><a href="#t1463420703000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">17:45:03</span>           nathanmarz </span><span>@mac: just answered it on github</span></div><div id="t1463421247000024" t="2016-05-16 17:54:07 mac @nathanmarz:  Thanks a lot."><a href="#t1463421247000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">17:54:07</span>                  mac </span><span>@nathanmarz:  Thanks a lot.</span></div><div id="t1463421269000025" t="2016-05-16 17:54:29 mac Took the liberty of posting a followup  🙂"><a href="#t1463421269000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">17:54:29</span>                  mac </span><span>Took the liberty of posting a followup </span><b>🙂</b></div><div id="t1463421933000026" t="2016-05-16 18:05:33 mac @nathanmarz: I must be slow today - or in general. Why will (walker keyword?) pickup every keyword while (walker :c) only returns the top level map if :c occurs in it, even if the top level map contains children maps with :c as key?"><a href="#t1463421933000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:05:33</span>                  mac </span><span>@nathanmarz: I must be slow today - or in general. Why will (walker keyword?) pickup every keyword while (walker :c) only returns the top level map if :c occurs in it, even if the top level map contains children maps with :c as key?</span></div><div id="t1463422214000027" t="2016-05-16 18:10:14 nathanmarz The argument to walker is a predicate function"><a href="#t1463422214000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:10:14</span>           nathanmarz </span><span>The argument to walker is a predicate function</span></div><div id="t1463422229000028" t="2016-05-16 18:10:29 nathanmarz So since the top-level map returns truthy when &quot;:c&quot; is run on it"><a href="#t1463422229000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:10:29</span>           nathanmarz </span><span>So since the top-level map returns truthy when &quot;:c&quot; is run on it</span></div><div id="t1463422231000029" t="2016-05-16 18:10:31 nathanmarz It stops there"><a href="#t1463422231000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:10:31</span>           nathanmarz </span><span>It stops there</span></div><div id="t1463422303000030" t="2016-05-16 18:11:43 nathanmarz walker walks the entire structure, and stops on any path once its predicate function matches"><a href="#t1463422303000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:11:43</span>           nathanmarz </span><span>walker walks the entire structure, and stops on any path once its predicate function matches</span></div><div id="t1463422455000031" t="2016-05-16 18:14:15 mac @nathanmarz: &gt;Trying to wrap my head around this"><a href="#t1463422455000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:14:15</span>                  mac </span><span>@nathanmarz: &gt;Trying to wrap my head around this</span></div><div id="t1463423717000032" t="2016-05-16 18:35:17 mac @nathanmarz: Got it. Had to mess a bit with some different predicates, but it sunk in now  🙂"><a href="#t1463423717000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:35:17</span>                  mac </span><span>@nathanmarz: Got it. Had to mess a bit with some different predicates, but it sunk in now </span><b>🙂</b></div><div id="t1463424760000033" t="2016-05-16 18:52:40 nathanmarz great"><a href="#t1463424760000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-16</span> <span class="t" onclick="H(this)">18:52:40</span>           nathanmarz </span><span>great</span></div><div id="t1463604863000036" t="2016-05-18 20:54:23 benzap so i&apos;ve been looking at specter, do you think it can also be applied to matrices?"><a href="#t1463604863000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:54:23</span>               benzap </span><span>so i&apos;ve been looking at specter, do you think it can also be applied to matrices?</span></div><div id="t1463604915000037" t="2016-05-18 20:55:15 benzap been trying basic things like accessing elements in a matrix, and i&apos;ve been having a hard time getting it working. Very new to your library, but I love it nonetheless since seeing your talk"><a href="#t1463604915000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:55:15</span>               benzap </span><span>been trying basic things like accessing elements in a matrix, and i&apos;ve been having a hard time getting it working. Very new to your library, but I love it nonetheless since seeing your talk</span></div><div id="t1463605100000038" t="2016-05-18 20:58:20 benzap for example

(use &apos;com.rpl.specter)
(def x [[1 2 3] [4 5 6]])
(select [1 1] x)
;; failed"><a href="#t1463605100000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:58:20</span>               benzap </span><span>for example

(use &apos;com.rpl.specter)
(def x [[1 2 3] [4 5 6]])
(select [1 1] x)
;; failed</span></div><div id="t1463605102000039" t="2016-05-18 20:58:22 benzap (select [FIRST FIRST] x)"><a href="#t1463605102000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:58:22</span>               benzap </span><span>(select [FIRST FIRST] x)</span></div><div id="t1463605108000040" t="2016-05-18 20:58:28 benzap (select [FIRST FIRST] x)"><a href="#t1463605108000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:58:28</span>               benzap </span><span>(select [FIRST FIRST] x)</span></div><div id="t1463605112000041" t="2016-05-18 20:58:32 benzap [1]*"><a href="#t1463605112000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:58:32</span>               benzap </span><span>[1]*</span></div><div id="t1463605144000042" t="2016-05-18 20:59:04 benzap is there a navigator that lets you select a specific value in a matrix"><a href="#t1463605144000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:59:04</span>               benzap </span><span>is there a navigator that lets you select a specific value in a matrix</span></div><div id="t1463605168000043" t="2016-05-18 20:59:28 benzap I should probably do more reading before I ask this question, sorry in advance"><a href="#t1463605168000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">20:59:28</span>               benzap </span><span>I should probably do more reading before I ask this question, sorry in advance</span></div><div id="t1463605867000044" t="2016-05-18 21:11:07 nathanmarz benzap: You can use keypath"><a href="#t1463605867000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">21:11:07</span>           nathanmarz </span><span>benzap: You can use keypath</span></div><div id="t1463605885000045" t="2016-05-18 21:11:25 nathanmarz (select [(keypath 1) (keypath 1)] x)"><a href="#t1463605885000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-18</span> <span class="t" onclick="H(this)">21:11:25</span>           nathanmarz </span><code>(select [(keypath 1) (keypath 1)] x)</code></div><div id="t1463709576000047" t="2016-05-20 01:59:36 seantempesta hey everyone.  Just started using specter and I’m clearly missing something.  Why does this return nil?

 (s/select [:groups s/ALL (s/keypath 15)] {:groups {:present {15 &quot;hi&quot;}}})
"><a href="#t1463709576000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-20</span> <span class="t" onclick="H(this)">01:59:36</span>         seantempesta </span><span>hey everyone.  Just started using specter and I’m clearly missing something.  Why does this return nil?

</span><pre>(s/select [:groups s/ALL (s/keypath 15)] {:groups {:present {15 &quot;hi&quot;}}})
</pre></div><div id="t1463727883000048" t="2016-05-20 07:04:43 wei how would you write this in specter- given a range of numbers, increment the even numbers and remove the odd numbers? i.e.  (transform [..] (fn [n] ..) (range 10)) =&gt; (1 3 5 7 9)  this is a contrived example, but basically I’m transforming the value in one case and removing from the list in another case"><a href="#t1463727883000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-20</span> <span class="t" onclick="H(this)">07:04:43</span>                  wei </span><span>how would you write this in specter- given a range of numbers, increment the even numbers and remove the odd numbers? i.e. </span><code>(transform [..] (fn [n] ..) (range 10)) =&gt; (1 3 5 7 9)</code><span> this is a contrived example, but basically I’m transforming the value in one case and removing from the list in another case</span></div><div id="t1463740121000051" t="2016-05-20 10:28:41 tcoupland @seantempesta: s/ALL creates a sequence of everything refered to by :groups, [[:present {15 &quot;hi&quot;}]] here, so you need to decend another level of the structure. Either with :present or s/LAST would do the trick"><a href="#t1463740121000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-20</span> <span class="t" onclick="H(this)">10:28:41</span>            tcoupland </span><span>@seantempesta: s/ALL creates a sequence of everything refered to by :groups, [[:present {15 &quot;hi&quot;}]] here, so you need to decend another level of the structure. Either with :present or s/LAST would do the trick</span></div><div id="t1463754523000052" t="2016-05-20 14:28:43 nathanmarz @wei You can do it with a navigator like this:
 (defpath ALL-ELEM-SEQ []
  (select* [this structure next-fn]
    (mapcat (fn [e] (next-fn [e])) structure)
    )
  (transform* [this structure next-fn]
    (mapcat (fn [e] (next-fn [e])) structure)    
    ))
"><a href="#t1463754523000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-20</span> <span class="t" onclick="H(this)">14:28:43</span>           nathanmarz </span><span>@wei You can do it with a navigator like this:
</span><pre>(defpath ALL-ELEM-SEQ []
  (select* [this structure next-fn]
    (mapcat (fn [e] (next-fn [e])) structure)
    )
  (transform* [this structure next-fn]
    (mapcat (fn [e] (next-fn [e])) structure)    
    ))
</pre></div><div id="t1463754561000053" t="2016-05-20 14:29:21 nathanmarz (transform [... ALL-ELEM-SEQ] (fn [[v]] (if (even? v) [(inc v)])))"><a href="#t1463754561000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-20</span> <span class="t" onclick="H(this)">14:29:21</span>           nathanmarz </span><pre>(transform [... ALL-ELEM-SEQ] (fn [[v]] (if (even? v) [(inc v)])))</pre></div><div id="t1463790543000054" t="2016-05-21 00:29:03 wei thanks @nathanmarz. just curious why you called it  ALL-ELEM-SEQ ?"><a href="#t1463790543000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-21</span> <span class="t" onclick="H(this)">00:29:03</span>                  wei </span><span>thanks @nathanmarz. just curious why you called it </span><code>ALL-ELEM-SEQ</code><span>?</span></div><div id="t1464194875000064" t="2016-05-25 16:47:55 wei is there an idiomatic way to handle group-by operations? e.g. group-by :x,  [{:id 1 :x 1} {:id 2 :x 1} {:id 3 :x 2}] =&gt; [{:x 1 :ids [1 2]} {:x 2 :ids [3]}]  wondering if the implementation is shorter in specter"><a href="#t1464194875000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-25</span> <span class="t" onclick="H(this)">16:47:55</span>                  wei </span><span>is there an idiomatic way to handle group-by operations? e.g. group-by :x, </span><code>[{:id 1 :x 1} {:id 2 :x 1} {:id 3 :x 2}] =&gt; [{:x 1 :ids [1 2]} {:x 2 :ids [3]}]</code><span> wondering if the implementation is shorter in specter</span></div><div id="t1464239299000068" t="2016-05-26 05:08:19 nathanmarz @wei not that I can think of"><a href="#t1464239299000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-26</span> <span class="t" onclick="H(this)">05:08:19</span>           nathanmarz </span><span>@wei not that I can think of</span></div><div id="t1464460619000073" t="2016-05-28 18:36:59 adambros out of curiosity, how was the name (specter) chosen?"><a href="#t1464460619000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:36:59</span>             adambros </span><span>out of curiosity, how was the name (specter) chosen?</span></div><div id="t1464460678000075" t="2016-05-28 18:37:58 nathanmarz inspect, introspect"><a href="#t1464460678000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:37:58</span>           nathanmarz </span><span>inspect, introspect</span></div><div id="t1464460822000076" t="2016-05-28 18:40:22 adambros So at work we use om.next, and I saw under the readme’s future work you mention graphs
I’ve not had the time to fully think this out, but I was wondering if you had spent any brain power on graphs, om.next &amp; specter"><a href="#t1464460822000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:40:22</span>             adambros </span><span>So at work we use om.next, and I saw under the readme’s future work you mention graphs
I’ve not had the time to fully think this out, but I was wondering if you had spent any brain power on graphs, om.next &amp; specter</span></div><div id="t1464460844000077" t="2016-05-28 18:40:44 adambros i can elaborate on what an om.next graph is if you aren’t aware"><a href="#t1464460844000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:40:44</span>             adambros </span><span>i can elaborate on what an om.next graph is if you aren’t aware</span></div><div id="t1464460874000078" t="2016-05-28 18:41:14 nathanmarz well I have my own internal specter graph navigators (on top of loom)"><a href="#t1464460874000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:41:14</span>           nathanmarz </span><span>well I have my own internal specter graph navigators (on top of loom)</span></div><div id="t1464460896000079" t="2016-05-28 18:41:36 nathanmarz trying to get someone from the community to contribute an open-source version"><a href="#t1464460896000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:41:36</span>           nathanmarz </span><span>trying to get someone from the community to contribute an open-source version</span></div><div id="t1464460914000080" t="2016-05-28 18:41:54 nathanmarz there was someone at clojure west who was really interested but I haven&apos;t heard from him since"><a href="#t1464460914000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:41:54</span>           nathanmarz </span><span>there was someone at clojure west who was really interested but I haven&apos;t heard from him since</span></div><div id="t1464460927000081" t="2016-05-28 18:42:07 nathanmarz short summary of om.next graphs?"><a href="#t1464460927000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:42:07</span>           nathanmarz </span><span>short summary of om.next graphs?</span></div><div id="t1464460942000082" t="2016-05-28 18:42:22 nathanmarz i only have a vague familiarity"><a href="#t1464460942000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:42:22</span>           nathanmarz </span><span>i only have a vague familiarity</span></div><div id="t1464460974000083" t="2016-05-28 18:42:54 adambros let me grab a snapshot from my app, probably be easier with some real data"><a href="#t1464460974000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:42:54</span>             adambros </span><span>let me grab a snapshot from my app, probably be easier with some real data</span></div><div id="t1464461025000084" t="2016-05-28 18:43:45 nathanmarz ok"><a href="#t1464461025000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:43:45</span>           nathanmarz </span><span>ok</span></div><div id="t1464461047000085" t="2016-05-28 18:44:07 nathanmarz btw I gave an example of my specter graph stuff during my clojure west talk:  https://youtu.be/VTCy_DkAJGk?t=39m"><a href="#t1464461047000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:44:07</span>           nathanmarz </span><span>btw I gave an example of my specter graph stuff during my clojure west talk: </span><a href="https://youtu.be/VTCy_DkAJGk?t=39m" target="_blank">https://youtu.be/VTCy_DkAJGk?t=39m</a></div><div id="t1464461290000089" t="2016-05-28 18:48:10 adambros {:todos [[:todo/by-id 111] [:todo/by-id 222]]
 :todo/by-id {111 {:db/id 111 :todo/title [:string/by-id 112]}
              222 {:db/id 222 :todo/title [:string/by-id 223]}}
"><a href="#t1464461290000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:48:10</span>             adambros </span><pre>{:todos [[:todo/by-id 111] [:todo/by-id 222]]
 :todo/by-id {111 {:db/id 111 :todo/title [:string/by-id 112]}
              222 {:db/id 222 :todo/title [:string/by-id 223]}}
</pre></div><div id="t1464461306000090" t="2016-05-28 18:48:26 adambros so edges are called idents and take the form  [:table-name id]"><a href="#t1464461306000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:48:26</span>             adambros </span><span>so edges are called idents and take the form </span><code>[:table-name id]</code></div><div id="t1464461340000091" t="2016-05-28 18:49:00 adambros and we usually want to perform operations like adding/removing a todo to both the  :todos  list and to the table  :todo/by-id"><a href="#t1464461340000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:49:00</span>             adambros </span><span>and we usually want to perform operations like adding/removing a todo to both the </span><code>:todos</code><span> list and to the table </span><code>:todo/by-id</code></div><div id="t1464461363000092" t="2016-05-28 18:49:23 adambros and editing them in the table, which could itself be an operation that involves modifying a todo’s title which is an ident"><a href="#t1464461363000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:49:23</span>             adambros </span><span>and editing them in the table, which could itself be an operation that involves modifying a todo’s title which is an ident</span></div><div id="t1464461434000094" t="2016-05-28 18:50:34 adambros anyway i dont know what im looking for as its very new to me, but we end up writing a lot of boilerplate to update this graph"><a href="#t1464461434000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:50:34</span>             adambros </span><span>anyway i dont know what im looking for as its very new to me, but we end up writing a lot of boilerplate to update this graph</span></div><div id="t1464461485000096" t="2016-05-28 18:51:25 nathanmarz yea, well it&apos;s kind of like manipulating a vector if you had to deal with the internal tree structure directly"><a href="#t1464461485000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:51:25</span>           nathanmarz </span><span>yea, well it&apos;s kind of like manipulating a vector if you had to deal with the internal tree structure directly</span></div><div id="t1464461503000097" t="2016-05-28 18:51:43 nathanmarz I think loom internally implements graphs with maps but has a proper graph api that you can use"><a href="#t1464461503000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:51:43</span>           nathanmarz </span><span>I think loom internally implements graphs with maps but has a proper graph api that you can use</span></div><div id="t1464461516000098" t="2016-05-28 18:51:56 adambros so take a look at loom then?"><a href="#t1464461516000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:51:56</span>             adambros </span><span>so take a look at loom then?</span></div><div id="t1464461544000099" t="2016-05-28 18:52:24 nathanmarz I would start there, yea"><a href="#t1464461544000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:52:24</span>           nathanmarz </span><span>I would start there, yea</span></div><div id="t1464461555000100" t="2016-05-28 18:52:35 adambros ok thanks, hadn’t heard of it before"><a href="#t1464461555000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:52:35</span>             adambros </span><span>ok thanks, hadn’t heard of it before</span></div><div id="t1464461567000101" t="2016-05-28 18:52:47 nathanmarz or some sort of API where you do the basic manipulations / queries with a graph-oriented API"><a href="#t1464461567000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:52:47</span>           nathanmarz </span><span>or some sort of API where you do the basic manipulations / queries with a graph-oriented API</span></div><div id="t1464461569000102" t="2016-05-28 18:52:49 adambros be nice to not reinvent the graph"><a href="#t1464461569000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:52:49</span>             adambros </span><span>be nice to not reinvent the graph</span></div><div id="t1464461572000103" t="2016-05-28 18:52:52 nathanmarz get-node, children, parents, etc."><a href="#t1464461572000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:52:52</span>           nathanmarz </span><span>get-node, children, parents, etc.</span></div><div id="t1464461655000105" t="2016-05-28 18:54:15 nathanmarz then when you want to do more sophisticated stuff, you can do something similar like I&apos;ve done with specter graph navigators"><a href="#t1464461655000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-28</span> <span class="t" onclick="H(this)">18:54:15</span>           nathanmarz </span><span>then when you want to do more sophisticated stuff, you can do something similar like I&apos;ve done with specter graph navigators</span></div><div id="t1464523863000115" t="2016-05-29 12:11:03 luxbock how can I select a subset of keys on a map?"><a href="#t1464523863000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:11:03</span>              luxbock </span><span>how can I select a subset of keys on a map?</span></div><div id="t1464523896000116" t="2016-05-29 12:11:36 luxbock I thought I could use sets with the keys I&apos;m interested in as the selector but this didn&apos;t work, eventhough I see that they implement the protocol"><a href="#t1464523896000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:11:36</span>              luxbock </span><span>I thought I could use sets with the keys I&apos;m interested in as the selector but this didn&apos;t work, eventhough I see that they implement the protocol</span></div><div id="t1464524128000117" t="2016-05-29 12:15:28 luxbock i.e.  (select [#{:foo}] {:foo 1 :bar 2})  returns  nil"><a href="#t1464524128000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:15:28</span>              luxbock </span><span>i.e. </span><code>(select [#{:foo}] {:foo 1 :bar 2})</code><span> returns </span><code>nil</code></div><div id="t1464525085000118" t="2016-05-29 12:31:25 luxbock what I&apos;m trying to achieve is  {:foo 1 :bar 2 :baz 3}  =&gt;  {:foo &quot;1&quot; :bar &quot;2&quot; :baz 3}"><a href="#t1464525085000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:31:25</span>              luxbock </span><span>what I&apos;m trying to achieve is </span><code>{:foo 1 :bar 2 :baz 3}</code><span> =&gt; </span><code>{:foo &quot;1&quot; :bar &quot;2&quot; :baz 3}</code></div><div id="t1464525950000119" t="2016-05-29 12:45:50 nathanmarz @luxbock: You can use either  submap  or  multi-path"><a href="#t1464525950000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:45:50</span>           nathanmarz </span><span>@luxbock: You can use either </span><code>submap</code><span> or </span><code>multi-path</code></div><div id="t1464526029000120" t="2016-05-29 12:47:09 nathanmarz (transform (multi-path :foo :bar) str {:foo 1 :bar 2 :baz 3})"><a href="#t1464526029000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:47:09</span>           nathanmarz </span><code>(transform (multi-path :foo :bar) str {:foo 1 :bar 2 :baz 3})</code></div><div id="t1464526064000121" t="2016-05-29 12:47:44 nathanmarz (transform [(submap [:foo :bar]) ALL LAST] str {:foo 1 :bar 2 :baz 3})"><a href="#t1464526064000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">12:47:44</span>           nathanmarz </span><code>(transform [(submap [:foo :bar]) ALL LAST] str {:foo 1 :bar 2 :baz 3})</code></div><div id="t1464533407000122" t="2016-05-29 14:50:07 luxbock @nathanmarz: cheers"><a href="#t1464533407000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">14:50:07</span>              luxbock </span><span>@nathanmarz: cheers</span></div><div id="t1464533426000123" t="2016-05-29 14:50:26 luxbock do sets serve some other purpose as selectors?"><a href="#t1464533426000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">14:50:26</span>              luxbock </span><span>do sets serve some other purpose as selectors?</span></div><div id="t1464536065000124" t="2016-05-29 15:34:25 nathanmarz they act as filter predicates"><a href="#t1464536065000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">15:34:25</span>           nathanmarz </span><span>they act as filter predicates</span></div><div id="t1464536130000125" t="2016-05-29 15:35:30 nathanmarz (select [ALL #{1 2}] [1 2 3 4 1 7])  -&gt;  [1 2 1]"><a href="#t1464536130000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">15:35:30</span>           nathanmarz </span><code>(select [ALL #{1 2}] [1 2 3 4 1 7])</code><span> -&gt; </span><code>[1 2 1]</code></div><div id="t1464536209000126" t="2016-05-29 15:36:49 luxbock ah I see, yeah makes sense"><a href="#t1464536209000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-29</span> <span class="t" onclick="H(this)">15:36:49</span>              luxbock </span><span>ah I see, yeah makes sense</span></div><div id="t1464656714000129" t="2016-05-31 01:05:14 diba pardon my noobness, but i’m just starting out w/ specter, and i’m guessing there’s a better way to do the following that achieves better performance, and would love any guidance:"><a href="#t1464656714000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">01:05:14</span>                 diba </span><span>pardon my noobness, but i’m just starting out w/ specter, and i’m guessing there’s a better way to do the following that achieves better performance, and would love any guidance:</span></div><div id="t1464657321000131" t="2016-05-31 01:15:21 diba actually, here’s a simpler example where i’m still seeing my (likely non-optimal) specter code taking twice as long:"><a href="#t1464657321000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">01:15:21</span>                 diba </span><span>actually, here’s a simpler example where i’m still seeing my (likely non-optimal) specter code taking twice as long:</span></div><div id="t1464658306000133" t="2016-05-31 01:31:46 diba and &quot;f3 #(reduce-kv (fn [m k v] (assoc m k (dec v))) {} %)” seems to be twice as fast as f1"><a href="#t1464658306000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">01:31:46</span>                 diba </span><span>and &quot;f3 #(reduce-kv (fn [m k v] (assoc m k (dec v))) {} %)” seems to be twice as fast as f1</span></div><div id="t1464671856000134" t="2016-05-31 05:17:36 luxbock ALL FIRST  and  ALL LAST  seem like really common selectors, @nathanmarz what do you think about including these as  KEYS  and  VALS ?"><a href="#t1464671856000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">05:17:36</span>              luxbock </span><code>ALL FIRST</code><span> and </span><code>ALL LAST</code><span> seem like really common selectors, @nathanmarz what do you think about including these as </span><code>KEYS</code><span> and </span><code>VALS</code><span>?</span></div><div id="t1464677960000135" t="2016-05-31 06:59:20 luxbock or perhaps you could have another namespace that contains functions named after the ones in  clojure.core  but which work as selectors"><a href="#t1464677960000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">06:59:20</span>              luxbock </span><span>or perhaps you could have another namespace that contains functions named after the ones in </span><code>clojure.core</code><span> but which work as selectors</span></div><div id="t1464700420000136" t="2016-05-31 13:13:40 nathanmarz @diba @luxbock Yea the slowdown is caused by it just using generic functions to access the map as a sequence"><a href="#t1464700420000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">13:13:40</span>           nathanmarz </span><span>@diba @luxbock Yea the slowdown is caused by it just using generic functions to access the map as a sequence</span></div><div id="t1464700469000137" t="2016-05-31 13:14:29 nathanmarz and coercing the MapEntry&apos;s to vectors probably wasn&apos;t the right thing to do in retrospect,  KEY  and  VAL  selectors would be faster than coercing and using  FIRST  and  LAST"><a href="#t1464700469000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">13:14:29</span>           nathanmarz </span><span>and coercing the MapEntry&apos;s to vectors probably wasn&apos;t the right thing to do in retrospect, </span><code>KEY</code><span> and </span><code>VAL</code><span> selectors would be faster than coercing and using </span><code>FIRST</code><span> and </span><code>LAST</code></div><div id="t1464700526000138" t="2016-05-31 13:15:26 nathanmarz I&apos;ll look into using  reduce-kv  for the map case of  ALL , but otherwise you can make specialized navigators to make it faster"><a href="#t1464700526000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">13:15:26</span>           nathanmarz </span><span>I&apos;ll look into using </span><code>reduce-kv</code><span> for the map case of </span><code>ALL</code><span>, but otherwise you can make specialized navigators to make it faster</span></div><div id="t1464700616000139" t="2016-05-31 13:16:56 nathanmarz as for having KEYS and VALS as common navigators, maybe"><a href="#t1464700616000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">13:16:56</span>           nathanmarz </span><span>as for having KEYS and VALS as common navigators, maybe</span></div><div id="t1464700647000140" t="2016-05-31 13:17:27 nathanmarz so far I&apos;ve been hesitant to include compound navigators in the core library (since there&apos;s infinite of them possible), but I can see the argument in this case"><a href="#t1464700647000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">13:17:27</span>           nathanmarz </span><span>so far I&apos;ve been hesitant to include compound navigators in the core library (since there&apos;s infinite of them possible), but I can see the argument in this case</span></div><div id="t1464706369000141" t="2016-05-31 14:52:49 nathanmarz Big release for Specter today with the new inline factoring and caching feature"><a href="#t1464706369000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">14:52:49</span>           nathanmarz </span><span>Big release for Specter today with the new inline factoring and caching feature</span></div><div id="t1464706384000142" t="2016-05-31 14:53:04 nathanmarz No need to do manual precompilation anymore to get high performance"><a href="#t1464706384000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">14:53:04</span>           nathanmarz </span><span>No need to do manual precompilation anymore to get high performance</span></div><div id="t1464706415000143" t="2016-05-31 14:53:35 nathanmarz Also wrote up a guide to the internals of how Specter achieves high performance, recommended reading for all users:  https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs"><a href="#t1464706415000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">14:53:35</span>           nathanmarz </span><span>Also wrote up a guide to the internals of how Specter achieves high performance, recommended reading for all users: </span><a href="https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs</a></div><div id="t1464708820000145" t="2016-05-31 15:33:40 luxbock awesome"><a href="#t1464708820000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:33:40</span>              luxbock </span><span>awesome</span></div><div id="t1464709794000147" t="2016-05-31 15:49:54 luxbock @nathanmarz:   transform  seems to have disappeared from  com.rpl.specter  in the new version"><a href="#t1464709794000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:49:54</span>              luxbock </span><span>@nathanmarz:  </span><code>transform</code><span> seems to have disappeared from </span><code>com.rpl.specter</code><span> in the new version</span></div><div id="t1464709806000148" t="2016-05-31 15:50:06 luxbock as well as  select"><a href="#t1464709806000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:50:06</span>              luxbock </span><span>as well as </span><code>select</code></div><div id="t1464710015000149" t="2016-05-31 15:53:35 nathanmarz it&apos;s in the macros namespace"><a href="#t1464710015000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:53:35</span>           nathanmarz </span><span>it&apos;s in the macros namespace</span></div><div id="t1464710032000150" t="2016-05-31 15:53:52 luxbock ah I see"><a href="#t1464710032000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:53:52</span>              luxbock </span><span>ah I see</span></div><div id="t1464710055000151" t="2016-05-31 15:54:15 nathanmarz I recommend reading the changelog for the release as there were a few other backwards incompatible changes"><a href="#t1464710055000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">15:54:15</span>           nathanmarz </span><span>I recommend reading the changelog for the release as there were a few other backwards incompatible changes</span></div><div id="t1464711785000153" t="2016-05-31 16:23:05 tony.kay I&apos;m wanting to walk a recursive data structure composed of maps and vectors. When inside of a map I&apos;d like to remove k-v pairs where the value matches a predicate. Can I do that with specter?

 { :a 1 :b [{:x 4 :y 3}] }  ---remove where v == 4 --&gt; {:a 1 :b [{:y 3}]}"><a href="#t1464711785000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:23:05</span>             tony.kay </span><span>I&apos;m wanting to walk a recursive data structure composed of maps and vectors. When inside of a map I&apos;d like to remove k-v pairs where the value matches a predicate. Can I do that with specter?

</span><code>{ :a 1 :b [{:x 4 :y 3}] }  ---remove where v == 4 --&gt; {:a 1 :b [{:y 3}]}</code></div><div id="t1464711863000154" t="2016-05-31 16:24:23 tony.kay I can easily nullify the value..seems like collect...sort-of: on the k-v pair instead of the value"><a href="#t1464711863000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:24:23</span>             tony.kay </span><span>I can easily nullify the value..seems like collect...sort-of: on the k-v pair instead of the value</span></div><div id="t1464711943000155" t="2016-05-31 16:25:43 nathanmarz @tony.kay: in that example do you mean remove x when x==4?"><a href="#t1464711943000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:25:43</span>           nathanmarz </span><span>@tony.kay: in that example do you mean remove x when x==4?</span></div><div id="t1464711972000156" t="2016-05-31 16:26:12 tony.kay remove the :x 4 key-value pair when the value is 4, independent of the key"><a href="#t1464711972000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:26:12</span>             tony.kay </span><span>remove the :x 4 key-value pair when the value is 4, independent of the key</span></div><div id="t1464711995000157" t="2016-05-31 16:26:35 tony.kay by v I meant the value of a key-value pair"><a href="#t1464711995000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:26:35</span>             tony.kay </span><span>by v I meant the value of a key-value pair</span></div><div id="t1464712014000158" t="2016-05-31 16:26:54 nathanmarz Oh I see remove all key/value pairs where the value matches some predicate"><a href="#t1464712014000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:26:54</span>           nathanmarz </span><span>Oh I see remove all key/value pairs where the value matches some predicate</span></div><div id="t1464712021000159" t="2016-05-31 16:27:01 tony.kay right"><a href="#t1464712021000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:27:01</span>             tony.kay </span><span>right</span></div><div id="t1464712118000160" t="2016-05-31 16:28:38 tony.kay perhaps a walker on  map?"><a href="#t1464712118000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:28:38</span>             tony.kay </span><span>perhaps a walker on </span><code>map?</code></div><div id="t1464712166000162" t="2016-05-31 16:29:26 tony.kay with a nested transform"><a href="#t1464712166000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:29:26</span>             tony.kay </span><span>with a nested transform</span></div><div id="t1464712190000164" t="2016-05-31 16:29:50 nathanmarz there&apos;s a couple ways to do it"><a href="#t1464712190000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:29:50</span>           nathanmarz </span><span>there&apos;s a couple ways to do it</span></div><div id="t1464712262000165" t="2016-05-31 16:31:02 nathanmarz one way is to do something like  (transform [:b (collect ALL (selected? LAST #(= % 4)) FIRST)] (fn [keys m] (apply dissoc m keys)))"><a href="#t1464712262000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:31:02</span>           nathanmarz </span><span>one way is to do something like </span><code>(transform [:b (collect ALL (selected? LAST #(= % 4)) FIRST)] (fn [keys m] (apply dissoc m keys)))</code></div><div id="t1464712322000166" t="2016-05-31 16:32:02 nathanmarz oh you want it to be recursive as well"><a href="#t1464712322000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:32:02</span>           nathanmarz </span><span>oh you want it to be recursive as well</span></div><div id="t1464712326000167" t="2016-05-31 16:32:06 tony.kay yeah"><a href="#t1464712326000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:32:06</span>             tony.kay </span><span>yeah</span></div><div id="t1464712429000168" t="2016-05-31 16:33:49 nathanmarz one sec, I&apos;ll show you"><a href="#t1464712429000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:33:49</span>           nathanmarz </span><span>one sec, I&apos;ll show you</span></div><div id="t1464712434000169" t="2016-05-31 16:33:54 tony.kay thx"><a href="#t1464712434000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:33:54</span>             tony.kay </span><span>thx</span></div><div id="t1464712559000170" t="2016-05-31 16:35:59 nathanmarz (declarepath RecursiveMaps)

(providepath RecursiveMaps
  [(walker map?)
   (continue-then-stay
     ALL
     LAST
     RecursiveMaps
     )])

(transform
  [RecursiveMaps
   (collect ALL (selected? LAST #(= % 4)) FIRST)
   ]
   (fn [keys m] (apply dissoc m keys))
   {:a 4 :z 11 :b [{:x 4 :y 3} {:a 1}]}
  )
;; =&gt; {:z 11, :b [{:y 3} {:a 1}]}
"><a href="#t1464712559000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:35:59</span>           nathanmarz </span><pre>(declarepath RecursiveMaps)

(providepath RecursiveMaps
  [(walker map?)
   (continue-then-stay
     ALL
     LAST
     RecursiveMaps
     )])

(transform
  [RecursiveMaps
   (collect ALL (selected? LAST #(= % 4)) FIRST)
   ]
   (fn [keys m] (apply dissoc m keys))
   {:a 4 :z 11 :b [{:x 4 :y 3} {:a 1}]}
  )
;; =&gt; {:z 11, :b [{:y 3} {:a 1}]}
</pre></div><div id="t1464712580000172" t="2016-05-31 16:36:20 tony.kay oh boy...would not have gotten that  🙂"><a href="#t1464712580000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:36:20</span>             tony.kay </span><span>oh boy...would not have gotten that </span><b>🙂</b></div><div id="t1464712626000173" t="2016-05-31 16:37:06 tony.kay but cool nonetheless!"><a href="#t1464712626000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:37:06</span>             tony.kay </span><span>but cool nonetheless!</span></div><div id="t1464712701000174" t="2016-05-31 16:38:21 nathanmarz this is more advanced Specter usage, for sure"><a href="#t1464712701000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:38:21</span>           nathanmarz </span><span>this is more advanced Specter usage, for sure</span></div><div id="t1464712711000175" t="2016-05-31 16:38:31 nathanmarz but built on the same principles"><a href="#t1464712711000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:38:31</span>           nathanmarz </span><span>but built on the same principles</span></div><div id="t1464712726000176" t="2016-05-31 16:38:46 tony.kay Yeah, I understand it...just not able to write it yet"><a href="#t1464712726000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:38:46</span>             tony.kay </span><span>Yeah, I understand it...just not able to write it yet</span></div><div id="t1464712771000177" t="2016-05-31 16:39:31 nathanmarz yea, my first few recursive navigations took me awhile even though I came up with this technique"><a href="#t1464712771000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:39:31</span>           nathanmarz </span><span>yea, my first few recursive navigations took me awhile even though I came up with this technique</span></div><div id="t1464712786000178" t="2016-05-31 16:39:46 nathanmarz now I don&apos;t even think about it"><a href="#t1464712786000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:39:46</span>           nathanmarz </span><span>now I don&apos;t even think about it</span></div><div id="t1464712887000179" t="2016-05-31 16:41:27 tony.kay I appreciate the help. I&apos;ll read through these functions and maybe play on paper a bit"><a href="#t1464712887000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:41:27</span>             tony.kay </span><span>I appreciate the help. I&apos;ll read through these functions and maybe play on paper a bit</span></div><div id="t1464712916000180" t="2016-05-31 16:41:56 nathanmarz sure thing"><a href="#t1464712916000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">16:41:56</span>           nathanmarz </span><span>sure thing</span></div><div id="t1464714574000181" t="2016-05-31 17:09:34 tony.kay I see select-first, and it mentions it is not more efficient....is there a way of detecting the presence of a value in a nested data structure without continuing a recursive walk?"><a href="#t1464714574000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:09:34</span>             tony.kay </span><span>I see select-first, and it mentions it is not more efficient....is there a way of detecting the presence of a value in a nested data structure without continuing a recursive walk?</span></div><div id="t1464715049000182" t="2016-05-31 17:17:29 nathanmarz like do a recursive search for a value matching a predicate and stop once it&apos;s reached?"><a href="#t1464715049000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:17:29</span>           nathanmarz </span><span>like do a recursive search for a value matching a predicate and stop once it&apos;s reached?</span></div><div id="t1464715396000183" t="2016-05-31 17:23:16 tony.kay yes"><a href="#t1464715396000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:23:16</span>             tony.kay </span><span>yes</span></div><div id="t1464715445000184" t="2016-05-31 17:24:05 nathanmarz you can do that for a lot of cases with com.rpl.specter.zipper"><a href="#t1464715445000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:24:05</span>           nathanmarz </span><span>you can do that for a lot of cases with com.rpl.specter.zipper</span></div><div id="t1464715459000185" t="2016-05-31 17:24:19 nathanmarz user=&gt; (transform [z/VECTOR-ZIP (z/find-first #(and (number? %) (even? %))) z/NODE] inc [1 3 5 [2 4]])
[1 3 5 [3 4]]
"><a href="#t1464715459000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:24:19</span>           nathanmarz </span><pre>user=&gt; (transform [z/VECTOR-ZIP (z/find-first #(and (number? %) (even? %))) z/NODE] inc [1 3 5 [2 4]])
[1 3 5 [3 4]]
</pre></div><div id="t1464715509000186" t="2016-05-31 17:25:09 nathanmarz the definition of find-first is pretty simple:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljx#L119"><a href="#t1464715509000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:09</span>           nathanmarz </span><span>the definition of find-first is pretty simple: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljx#L119" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljx#L119</a></div><div id="t1464715511000188" t="2016-05-31 17:25:11 tony.kay and you&apos;re just using  inc  because you need something"><a href="#t1464715511000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:11</span>             tony.kay </span><span>and you&apos;re just using </span><code>inc</code><span> because you need something</span></div><div id="t1464715531000189" t="2016-05-31 17:25:31 tony.kay oh...nvm, I see"><a href="#t1464715531000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:31</span>             tony.kay </span><span>oh...nvm, I see</span></div><div id="t1464715533000190" t="2016-05-31 17:25:33 nathanmarz oh I was just showing it for the transform case"><a href="#t1464715533000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:33</span>           nathanmarz </span><span>oh I was just showing it for the transform case</span></div><div id="t1464715549000191" t="2016-05-31 17:25:49 nathanmarz works as you&apos;d expect for select"><a href="#t1464715549000191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:49</span>           nathanmarz </span><span>works as you&apos;d expect for select</span></div><div id="t1464715556000192" t="2016-05-31 17:25:56 tony.kay yep, I see"><a href="#t1464715556000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span> <span class="t" onclick="H(this)">17:25:56</span>             tony.kay </span><span>yep, I see</span></div><div id="t1464842090000193" t="2016-06-02 04:34:50 luxbock how would I write the following using Specter:
  `"><a href="#t1464842090000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:34:50</span>              luxbock </span><span>how would I write the following using Specter:
</span><code></code><span>`</span></div><div id="t1464842129000194" t="2016-06-02 04:35:29 luxbock (into {} (for [[k v] fff] [k (mapv :foo v)]))"><a href="#t1464842129000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:35:29</span>              luxbock </span><code>(into {} (for [[k v] fff] [k (mapv :foo v)]))</code></div><div id="t1464842157000195" t="2016-06-02 04:35:57 luxbock where  fff  is  {:x [{:foo &quot;hello&quot; :bar [2 4]} {:foo &quot;there&quot;}] :y [{:foo &quot;moo&quot;   :bar [2 4]} {:foo &quot;world&quot;}]}"><a href="#t1464842157000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:35:57</span>              luxbock </span><span>where </span><code>fff</code><span> is </span><code>{:x [{:foo &quot;hello&quot; :bar [2 4]} {:foo &quot;there&quot;}] :y [{:foo &quot;moo&quot;   :bar [2 4]} {:foo &quot;world&quot;}]}</code></div><div id="t1464842169000196" t="2016-06-02 04:36:09 luxbock and the desired output is  {:x [&quot;hello&quot; &quot;there&quot;], :y [&quot;moo&quot; &quot;world&quot;]}"><a href="#t1464842169000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:36:09</span>              luxbock </span><span>and the desired output is </span><code>{:x [&quot;hello&quot; &quot;there&quot;], :y [&quot;moo&quot; &quot;world&quot;]}</code></div><div id="t1464842205000197" t="2016-06-02 04:36:45 luxbock my problem is that all of my attempts at selecting the key  :foo  throw away the surrounding context of the vector"><a href="#t1464842205000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:36:45</span>              luxbock </span><span>my problem is that all of my attempts at selecting the key </span><code>:foo</code><span> throw away the surrounding context of the vector</span></div><div id="t1464842566000198" t="2016-06-02 04:42:46 nathanmarz @luxbock:  (transform [ALL LAST ALL] :foo fff)"><a href="#t1464842566000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:42:46</span>           nathanmarz </span><span>@luxbock: </span><code>(transform [ALL LAST ALL] :foo fff)</code></div><div id="t1464842653000199" t="2016-06-02 04:44:13 luxbock @nathanmarz: thanks, I finally got it but my way was using  select-one  which I guess I don&apos;t need"><a href="#t1464842653000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:44:13</span>              luxbock </span><span>@nathanmarz: thanks, I finally got it but my way was using </span><code>select-one</code><span> which I guess I don&apos;t need</span></div><div id="t1464842787000200" t="2016-06-02 04:46:27 nathanmarz what did your select-one solution look like?"><a href="#t1464842787000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:46:27</span>           nathanmarz </span><span>what did your select-one solution look like?</span></div><div id="t1464842841000202" t="2016-06-02 04:47:21 luxbock (transform [VALS ALL (collect-one :foo)] (fn [x y] x) fff) , where  VALS  is  ALL LAST"><a href="#t1464842841000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:47:21</span>              luxbock </span><code>(transform [VALS ALL (collect-one :foo)] (fn [x y] x) fff)</code><span>, where </span><code>VALS</code><span> is </span><code>ALL LAST</code></div><div id="t1464842864000203" t="2016-06-02 04:47:44 luxbock oh yeah, I meant to say  collect-one"><a href="#t1464842864000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:47:44</span>              luxbock </span><span>oh yeah, I meant to say </span><code>collect-one</code></div><div id="t1464843025000204" t="2016-06-02 04:50:25 luxbock how about if I want to return  [[&quot;hello&quot; &quot;there&quot;] [&quot;moo&quot; &quot;world&quot;]] ?"><a href="#t1464843025000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:50:25</span>              luxbock </span><span>how about if I want to return </span><code>[[&quot;hello&quot; &quot;there&quot;] [&quot;moo&quot; &quot;world&quot;]]</code><span>?</span></div><div id="t1464843028000205" t="2016-06-02 04:50:28 nathanmarz yea, besides being more concise my version will be much faster"><a href="#t1464843028000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:50:28</span>           nathanmarz </span><span>yea, besides being more concise my version will be much faster</span></div><div id="t1464843109000206" t="2016-06-02 04:51:49 nathanmarz  (select [ALL LAST (subselect ALL :foo)] fff)"><a href="#t1464843109000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:51:49</span>           nathanmarz </span><code> (select [ALL LAST (subselect ALL :foo)] fff)</code></div><div id="t1464843238000207" t="2016-06-02 04:53:58 luxbock ah great, thanks again"><a href="#t1464843238000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:53:58</span>              luxbock </span><span>ah great, thanks again</span></div><div id="t1464843313000208" t="2016-06-02 04:55:13 luxbock yeah  subselect  is mentioned at the very bottom of the README so I didn&apos;t spot it as something I should&apos;ve looked into"><a href="#t1464843313000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:55:13</span>              luxbock </span><span>yeah </span><code>subselect</code><span> is mentioned at the very bottom of the README so I didn&apos;t spot it as something I should&apos;ve looked into</span></div><div id="t1464843329000209" t="2016-06-02 04:55:29 luxbock there are currently no API docs for specter right?"><a href="#t1464843329000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:55:29</span>              luxbock </span><span>there are currently no API docs for specter right?</span></div><div id="t1464843346000210" t="2016-06-02 04:55:46 nathanmarz well the files themselves are documented"><a href="#t1464843346000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:55:46</span>           nathanmarz </span><span>well the files themselves are documented</span></div><div id="t1464843355000211" t="2016-06-02 04:55:55 nathanmarz I suppose I should generate some html"><a href="#t1464843355000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:55:55</span>           nathanmarz </span><span>I suppose I should generate some html</span></div><div id="t1464843454000212" t="2016-06-02 04:57:34 luxbock I also noticed that many of the core functions lack doc strings"><a href="#t1464843454000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:57:34</span>              luxbock </span><span>I also noticed that many of the core functions lack doc strings</span></div><div id="t1464843506000213" t="2016-06-02 04:58:26 nathanmarz specter.cljx mostly has docstrings"><a href="#t1464843506000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:58:26</span>           nathanmarz </span><span>specter.cljx mostly has docstrings</span></div><div id="t1464843527000214" t="2016-06-02 04:58:47 nathanmarz but yea I agree the docs could use substantial work"><a href="#t1464843527000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">04:58:47</span>           nathanmarz </span><span>but yea I agree the docs could use substantial work</span></div><div id="t1464843935000215" t="2016-06-02 05:05:35 nathanmarz @luxbock: Any suggestions for documentation improvements would be appreciated  https://github.com/nathanmarz/specter/issues/56"><a href="#t1464843935000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">05:05:35</span>           nathanmarz </span><span>@luxbock: Any suggestions for documentation improvements would be appreciated </span><a href="https://github.com/nathanmarz/specter/issues/56" target="_blank">https://github.com/nathanmarz/specter/issues/56</a></div><div id="t1464844016000217" t="2016-06-02 05:06:56 luxbock sure"><a href="#t1464844016000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">05:06:56</span>              luxbock </span><span>sure</span></div><div id="t1464848551000222" t="2016-06-02 06:22:31 luxbock it appears that  collect  and  collect-one  are identical"><a href="#t1464848551000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">06:22:31</span>              luxbock </span><span>it appears that </span><code>collect</code><span> and </span><code>collect-one</code><span> are identical</span></div><div id="t1464849580000223" t="2016-06-02 06:39:40 nathanmarz @luxbock: they&apos;re not"><a href="#t1464849580000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">06:39:40</span>           nathanmarz </span><span>@luxbock: they&apos;re not</span></div><div id="t1464849589000224" t="2016-06-02 06:39:49 nathanmarz same difference as between  select  and  select-one"><a href="#t1464849589000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">06:39:49</span>           nathanmarz </span><span>same difference as between </span><code>select</code><span> and </span><code>select-one</code></div><div id="t1464850195000225" t="2016-06-02 06:49:55 luxbock ah, yeah you are right, I misread the source. need more coffee"><a href="#t1464850195000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">06:49:55</span>              luxbock </span><span>ah, yeah you are right, I misread the source. need more coffee</span></div><div id="t1464883684000227" t="2016-06-02 16:08:04 nathanmarz finally generated api docs  https://nathanmarz.github.io/specter/"><a href="#t1464883684000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">16:08:04</span>           nathanmarz </span><span>finally generated api docs </span><a href="https://nathanmarz.github.io/specter/" target="_blank">https://nathanmarz.github.io/specter/</a></div><div id="t1464958735000230" t="2016-06-03 12:58:55 darwin hi, is recursive navigation supported under cljs in 0.11, I have troubles calling  extend-protocolpath"><a href="#t1464958735000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">12:58:55</span>               darwin </span><span>hi, is recursive navigation supported under cljs in 0.11, I have troubles calling </span><code>extend-protocolpath</code></div><div id="t1464958759000231" t="2016-06-03 12:59:19 darwin it complains  Use of undeclared Var com.rpl.specter.impl/extend-protocolpath*"><a href="#t1464958759000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">12:59:19</span>               darwin </span><span>it complains </span><code>Use of undeclared Var com.rpl.specter.impl/extend-protocolpath*</code></div><div id="t1464958808000232" t="2016-06-03 13:00:08 darwin and indeed it looks there is only #+clj implementation:
 https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1085"><a href="#t1464958808000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:08</span>               darwin </span><span>and indeed it looks there is only #+clj implementation:
</span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1085" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1085</a></div><div id="t1464958810000234" t="2016-06-03 13:00:10 nathanmarz protocol paths don&apos;t work in clojurescript version"><a href="#t1464958810000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:10</span>           nathanmarz </span><span>protocol paths don&apos;t work in clojurescript version</span></div><div id="t1464958819000235" t="2016-06-03 13:00:19 nathanmarz you can still do recursive navigation without protocol paths"><a href="#t1464958819000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:19</span>           nathanmarz </span><span>you can still do recursive navigation without protocol paths</span></div><div id="t1464958839000236" t="2016-06-03 13:00:39 darwin thanks, any pointer to some example? I’m pretty new to specter"><a href="#t1464958839000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:39</span>               darwin </span><span>thanks, any pointer to some example? I’m pretty new to specter</span></div><div id="t1464958846000237" t="2016-06-03 13:00:46 nathanmarz the last example on the README"><a href="#t1464958846000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:46</span>           nathanmarz </span><span>the last example on the README</span></div><div id="t1464958857000238" t="2016-06-03 13:00:57 nathanmarz (declarepath TreeValues)

(providepath TreeValues
  (if-path vector?
    [ALL TreeValues]
    STAY
    ))
"><a href="#t1464958857000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:00:57</span>           nathanmarz </span><pre>(declarepath TreeValues)

(providepath TreeValues
  (if-path vector?
    [ALL TreeValues]
    STAY
    ))
</pre></div><div id="t1464958879000239" t="2016-06-03 13:01:19 darwin it looks like insanely powerful tool when mastered btw. thanks a bunch!"><a href="#t1464958879000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:01:19</span>               darwin </span><span>it looks like insanely powerful tool when mastered btw. thanks a bunch!</span></div><div id="t1464958924000240" t="2016-06-03 13:02:04 nathanmarz (transform [TreeValues even?] - [[1 2] [[3] 4] [6 [8 9 10]]])
;; =&gt; [[1 -2] [[3] -4] [-6 [-8 9 -10]]]
"><a href="#t1464958924000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:02:04</span>           nathanmarz </span><pre>(transform [TreeValues even?] - [[1 2] [[3] 4] [6 [8 9 10]]])
;; =&gt; [[1 -2] [[3] -4] [-6 [-8 9 -10]]]
</pre></div><div id="t1464958938000241" t="2016-06-03 13:02:18 darwin got it, going to take that route"><a href="#t1464958938000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:02:18</span>               darwin </span><span>got it, going to take that route</span></div><div id="t1464959012000242" t="2016-06-03 13:03:32 nathanmarz also look at  continue-then-stay  and  stay-then-continue  for doing post-order or pre-order traversals"><a href="#t1464959012000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:03:32</span>           nathanmarz </span><span>also look at </span><code>continue-then-stay</code><span> and </span><code>stay-then-continue</code><span> for doing post-order or pre-order traversals</span></div><div id="t1464960180000243" t="2016-06-03 13:23:00 darwin I’m probably missing something, here is my current code, cannot make it work,  want?  predicate is never called according to that log statement, I call filter-rep and then pprint it to string, so possible laziness should NOT prevent those calls,  https://gist.github.com/darwin/9a2673fdb2448132c6d1908195df0932"><a href="#t1464960180000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:23:00</span>               darwin </span><span>I’m probably missing something, here is my current code, cannot make it work, </span><code>want?</code><span> predicate is never called according to that log statement, I call filter-rep and then pprint it to string, so possible laziness should NOT prevent those calls, </span><a href="https://gist.github.com/darwin/9a2673fdb2448132c6d1908195df0932" target="_blank">https://gist.github.com/darwin/9a2673fdb2448132c6d1908195df0932</a></div><div id="t1464960240000245" t="2016-06-03 13:24:00 darwin I’d like to use specter as filter for filtering scraped DOM structure for my tests"><a href="#t1464960240000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:24:00</span>               darwin </span><span>I’d like to use specter as filter for filtering scraped DOM structure for my tests</span></div><div id="t1464960360000246" t="2016-06-03 13:26:00 nathanmarz yea, your path is incorrect"><a href="#t1464960360000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:26:00</span>           nathanmarz </span><span>yea, your path is incorrect</span></div><div id="t1464960376000247" t="2016-06-03 13:26:16 nathanmarz it only navigates you to elements of :children sequences that aren&apos;t maps"><a href="#t1464960376000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:26:16</span>           nathanmarz </span><span>it only navigates you to elements of :children sequences that aren&apos;t maps</span></div><div id="t1464960383000248" t="2016-06-03 13:26:23 nathanmarz try this path:"><a href="#t1464960383000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:26:23</span>           nathanmarz </span><span>try this path:</span></div><div id="t1464960428000250" t="2016-06-03 13:27:08 nathanmarz (declarepath MyWalker)
(providepath MyWalker
  (continue-then-stay
    :children
    ALL
    MyWalker
    ))
"><a href="#t1464960428000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:27:08</span>           nathanmarz </span><pre>(declarepath MyWalker)
(providepath MyWalker
  (continue-then-stay
    :children
    ALL
    MyWalker
    ))
</pre></div><div id="t1464960452000251" t="2016-06-03 13:27:32 nathanmarz that navigates you to every map"><a href="#t1464960452000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:27:32</span>           nathanmarz </span><span>that navigates you to every map</span></div><div id="t1464960644000252" t="2016-06-03 13:30:44 darwin thanks, that works"><a href="#t1464960644000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:30:44</span>               darwin </span><span>thanks, that works</span></div><div id="t1464960707000253" t="2016-06-03 13:31:47 darwin what if I need to traverse down both into  :children  and/or  :children2  if present"><a href="#t1464960707000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:31:47</span>               darwin </span><span>what if I need to traverse down both into </span><code>:children</code><span> and/or </span><code>:children2</code><span> if present</span></div><div id="t1464960777000254" t="2016-06-03 13:32:57 nathanmarz use  multi-path  +  must"><a href="#t1464960777000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:32:57</span>           nathanmarz </span><span>use </span><code>multi-path</code><span> + </span><code>must</code></div><div id="t1464960788000255" t="2016-06-03 13:33:08 nathanmarz (declarepath MyWalker)
(providepath MyWalker
  (continue-then-stay
    (multi-path (must :children) (must :children2))
    ALL
    MyWalker
    ))
"><a href="#t1464960788000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:33:08</span>           nathanmarz </span><pre>(declarepath MyWalker)
(providepath MyWalker
  (continue-then-stay
    (multi-path (must :children) (must :children2))
    ALL
    MyWalker
    ))
</pre></div><div id="t1464960803000258" t="2016-06-03 13:33:23 darwin looks good, thanks a lot"><a href="#t1464960803000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:33:23</span>               darwin </span><span>looks good, thanks a lot</span></div><div id="t1464960817000259" t="2016-06-03 13:33:37 nathanmarz no problem"><a href="#t1464960817000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:33:37</span>           nathanmarz </span><span>no problem</span></div><div id="t1464961105000261" t="2016-06-03 13:38:25 nathanmarz nice!"><a href="#t1464961105000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:38:25</span>           nathanmarz </span><span>nice!</span></div><div id="t1464961138000262" t="2016-06-03 13:38:58 nathanmarz you can make it a little more concise like this:
 (providepath MyWalker
  (continue-then-stay
    (multi-path
      [(must :children) ALL]
      (must :shadowRoot))
    MyWalker))
"><a href="#t1464961138000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:38:58</span>           nathanmarz </span><span>you can make it a little more concise like this:
</span><pre>(providepath MyWalker
  (continue-then-stay
    (multi-path
      [(must :children) ALL]
      (must :shadowRoot))
    MyWalker))
</pre></div><div id="t1464961186000263" t="2016-06-03 13:39:46 darwin cool! I have a feeling this will be a “jquery” on steroids  🙂"><a href="#t1464961186000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:39:46</span>               darwin </span><span>cool! I have a feeling this will be a “jquery” on steroids </span><b>🙂</b></div><div id="t1464961208000264" t="2016-06-03 13:40:08 nathanmarz 🙂"><a href="#t1464961208000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">13:40:08</span>           nathanmarz </span><b>🙂</b></div><div id="t1464968121000265" t="2016-06-03 15:35:21 darwin getting some warnings when compiling specter’s impl namespace:
 https://gist.github.com/darwin/90bcb9a87d7f1b492cd6d6400bcd103c#file-impl-cljs-L3"><a href="#t1464968121000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">15:35:21</span>               darwin </span><span>getting some warnings when compiling specter’s impl namespace:
</span><a href="https://gist.github.com/darwin/90bcb9a87d7f1b492cd6d6400bcd103c#file-impl-cljs-L3" target="_blank">https://gist.github.com/darwin/90bcb9a87d7f1b492cd6d6400bcd103c#file-impl-cljs-L3</a></div><div id="t1464968190000268" t="2016-06-03 15:36:30 darwin not sure about bootstrap, but cljs.js should be cljs.core in my case, I’m not in bootstrapped environment"><a href="#t1464968190000268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">15:36:30</span>               darwin </span><span>not sure about bootstrap, but cljs.js should be cljs.core in my case, I’m not in bootstrapped environment</span></div><div id="t1464968252000269" t="2016-06-03 15:37:32 nathanmarz You can ignore the warnings, and they&apos;re fixed for the next version:  https://github.com/nathanmarz/specter/issues/97"><a href="#t1464968252000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">15:37:32</span>           nathanmarz </span><span>You can ignore the warnings, and they&apos;re fixed for the next version: </span><a href="https://github.com/nathanmarz/specter/issues/97" target="_blank">https://github.com/nathanmarz/specter/issues/97</a></div><div id="t1464968273000271" t="2016-06-03 15:37:53 nathanmarz They have to do with code that&apos;s specifically for bootstrap cljs"><a href="#t1464968273000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">15:37:53</span>           nathanmarz </span><span>They have to do with code that&apos;s specifically for bootstrap cljs</span></div><div id="t1464968317000272" t="2016-06-03 15:38:37 darwin ok, np, btw. I was searching open issues first and didn’t find anything related"><a href="#t1464968317000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">15:38:37</span>               darwin </span><span>ok, np, btw. I was searching open issues first and didn’t find anything related</span></div><div id="t1465045318000017" t="2016-06-04 13:01:58 luxbock is there anything in specter that would allow me to do the following without resorting to the core functions I&apos;m currently using:
 (reduce + (map count (select [VALS] {:a [1 2 3] :b [5 6]}))) , or
 (reduce + (vals (transform [VALS] count {:a [1 2 3] :b [5 6]})))  ?"><a href="#t1465045318000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:01:58</span>              luxbock </span><span>is there anything in specter that would allow me to do the following without resorting to the core functions I&apos;m currently using:
</span><code>(reduce + (map count (select [VALS] {:a [1 2 3] :b [5 6]})))</code><span>, or
</span><code>(reduce + (vals (transform [VALS] count {:a [1 2 3] :b [5 6]})))</code><span> ?</span></div><div id="t1465045563000018" t="2016-06-04 13:06:03 nathanmarz is this what you want?  (select-one [(subselect ALL LAST ALL) (view count)] DATA)"><a href="#t1465045563000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:06:03</span>           nathanmarz </span><span>is this what you want? </span><code>(select-one [(subselect ALL LAST ALL) (view count)] DATA)</code></div><div id="t1465045638000019" t="2016-06-04 13:07:18 nathanmarz you could also do  (count (select [ALL LAST ALL] DATA))"><a href="#t1465045638000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:07:18</span>           nathanmarz </span><span>you could also do </span><code>(count (select [ALL LAST ALL] DATA))</code></div><div id="t1465045757000020" t="2016-06-04 13:09:17 luxbock yeah both of those work, thanks"><a href="#t1465045757000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:09:17</span>              luxbock </span><span>yeah both of those work, thanks</span></div><div id="t1465045887000021" t="2016-06-04 13:11:27 luxbock I&apos;m in a phase where I&apos;m trying to figure out where the line between using specter to do things, and having to break out of it to use the core functions is"><a href="#t1465045887000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:11:27</span>              luxbock </span><span>I&apos;m in a phase where I&apos;m trying to figure out where the line between using specter to do things, and having to break out of it to use the core functions is</span></div><div id="t1465045917000022" t="2016-06-04 13:11:57 luxbock that line is probably quite high once you get familiar with all the features packed in  🙂"><a href="#t1465045917000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:11:57</span>              luxbock </span><span>that line is probably quite high once you get familiar with all the features packed in </span><b>🙂</b></div><div id="t1465045923000023" t="2016-06-04 13:12:03 nathanmarz I&apos;m still in that phase  🙂"><a href="#t1465045923000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:12:03</span>           nathanmarz </span><span>I&apos;m still in that phase </span><b>🙂</b></div><div id="t1465045962000024" t="2016-06-04 13:12:42 nathanmarz the line has gotten higher and higher over time as I&apos;ve realized how many things can be expressed elegantly in terms of navigation"><a href="#t1465045962000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:12:42</span>           nathanmarz </span><span>the line has gotten higher and higher over time as I&apos;ve realized how many things can be expressed elegantly in terms of navigation</span></div><div id="t1465045976000025" t="2016-06-04 13:12:56 luxbock it feels a bit like when I first got comfortable with thinking about all Clojure problems as just transforming data back and fourth beetween the core data types and functions, it feels great!"><a href="#t1465045976000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:12:56</span>              luxbock </span><span>it feels a bit like when I first got comfortable with thinking about all Clojure problems as just transforming data back and fourth beetween the core data types and functions, it feels great!</span></div><div id="t1465046069000026" t="2016-06-04 13:14:29 nathanmarz assuming your learning trajectory is similar to what mine was, prepare for a very rewarding ride"><a href="#t1465046069000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:14:29</span>           nathanmarz </span><span>assuming your learning trajectory is similar to what mine was, prepare for a very rewarding ride</span></div><div id="t1465046129000027" t="2016-06-04 13:15:29 nathanmarz a big moment for me was figuring out the &quot;sub{x}&quot; navigators"><a href="#t1465046129000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:15:29</span>           nathanmarz </span><span>a big moment for me was figuring out the &quot;sub{x}&quot; navigators</span></div><div id="t1465046145000028" t="2016-06-04 13:15:45 nathanmarz subset and then subgraph"><a href="#t1465046145000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">13:15:45</span>           nathanmarz </span><span>subset and then subgraph</span></div><div id="t1465080901000059" t="2016-06-04 22:55:01 benzap If I have a row-major matrix, would this be the best way to retrieve a sub-matrix?

  `"><a href="#t1465080901000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">22:55:01</span>               benzap </span><span>If I have a row-major matrix, would this be the best way to retrieve a sub-matrix?

</span><code></code><span>`</span></div><div id="t1465080912000060" t="2016-06-04 22:55:12 benzap (defn NAV-SUBMAT [i j rows cols]
  [specter/ALL (specter/srange i (+ i cols)) [(specter/srange j (+ j rows)) specter/ALL]])"><a href="#t1465080912000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">22:55:12</span>               benzap </span><span>(defn NAV-SUBMAT [i j rows cols]
  [specter/ALL (specter/srange i (+ i cols)) [(specter/srange j (+ j rows)) specter/ALL]])</span></div><div id="t1465081148000061" t="2016-06-04 22:59:08 benzap oh woops, that doesn&apos;t work"><a href="#t1465081148000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">22:59:08</span>               benzap </span><span>oh woops, that doesn&apos;t work</span></div><div id="t1465081187000062" t="2016-06-04 22:59:47 benzap This is what I was doing before, but I feel like it can be better
`(-&gt;&gt; content
             (specter/select [specter/ALL (specter/srange col-offset (+ cols col-offset))])
             (specter/select [(specter/srange row-offset (+ rows row-offset)) specter/ALL]))`"><a href="#t1465081187000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">22:59:47</span>               benzap </span><span>This is what I was doing before, but I feel like it can be better
`(-&gt;&gt; content
             (specter/select [specter/ALL (specter/srange col-offset (+ cols col-offset))])
             (specter/select [(specter/srange row-offset (+ rows row-offset)) specter/ALL]))`</span></div><div id="t1465081517000063" t="2016-06-04 23:05:17 benzap it was backwards, this seems to work: 

(defn NAV-SUBMAT [i j rows cols]
  [[(specter/srange j (+ j rows)) specter/ALL] (specter/srange i (+ i cols))])"><a href="#t1465081517000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-04</span> <span class="t" onclick="H(this)">23:05:17</span>               benzap </span><span>it was backwards, this seems to work: 

(defn NAV-SUBMAT [i j rows cols]
  [[(specter/srange j (+ j rows)) specter/ALL] (specter/srange i (+ i cols))])</span></div><div id="t1465185169000152" t="2016-06-06 03:52:49 roberto is there a way to chain transformations?"><a href="#t1465185169000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-06</span> <span class="t" onclick="H(this)">03:52:49</span>              roberto </span><span>is there a way to chain transformations?</span></div><div id="t1465185296000153" t="2016-06-06 03:54:56 roberto nvm"><a href="#t1465185296000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-06</span> <span class="t" onclick="H(this)">03:54:56</span>              roberto </span><span>nvm</span></div><div id="t1465305714000254" t="2016-06-07 13:21:54 rodeorockstar this might be a silly question, but is specter/collect intended to be used in conjunction with specter/select, or is it strictly for transformations?"><a href="#t1465305714000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:21:54</span>        rodeorockstar </span><span>this might be a silly question, but is specter/collect intended to be used in conjunction with specter/select, or is it strictly for transformations?</span></div><div id="t1465306265000256" t="2016-06-07 13:31:05 nathanmarz @rodeorockstar I use it sometimes with  select"><a href="#t1465306265000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:31:05</span>           nathanmarz </span><span>@rodeorockstar I use it sometimes with </span><code>select</code></div><div id="t1465306308000257" t="2016-06-07 13:31:48 nathanmarz It just lets you get more information about the context of each value"><a href="#t1465306308000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:31:48</span>           nathanmarz </span><span>It just lets you get more information about the context of each value</span></div><div id="t1465306352000258" t="2016-06-07 13:32:32 rodeorockstar yeah, definitely useful when i&apos;ve needed it in the past, but i&apos;ve only used it for transformations where the collected data is passed to the transformation function"><a href="#t1465306352000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:32:32</span>        rodeorockstar </span><span>yeah, definitely useful when i&apos;ve needed it in the past, but i&apos;ve only used it for transformations where the collected data is passed to the transformation function</span></div><div id="t1465306383000259" t="2016-06-07 13:33:03 rodeorockstar when used with select are collected keys just merged into the result of the select?"><a href="#t1465306383000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:33:03</span>        rodeorockstar </span><span>when used with select are collected keys just merged into the result of the select?</span></div><div id="t1465306595000260" t="2016-06-07 13:36:35 nathanmarz yea, each result becomes a vector with the final navigated to value as the final element in the vector"><a href="#t1465306595000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:36:35</span>           nathanmarz </span><span>yea, each result becomes a vector with the final navigated to value as the final element in the vector</span></div><div id="t1465306620000261" t="2016-06-07 13:37:00 rodeorockstar ah, that makes a lot more sense now"><a href="#t1465306620000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:37:00</span>        rodeorockstar </span><span>ah, that makes a lot more sense now</span></div><div id="t1465306643000262" t="2016-06-07 13:37:23 nathanmarz (select VAL 1)  -&gt;  [[1 1]]"><a href="#t1465306643000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:37:23</span>           nathanmarz </span><code>(select VAL 1)</code><span> -&gt; </span><code>[[1 1]]</code></div><div id="t1465306860000263" t="2016-06-07 13:41:00 rodeorockstar thanks for the help  🙂"><a href="#t1465306860000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:41:00</span>        rodeorockstar </span><span>thanks for the help </span><b>🙂</b></div><div id="t1465306927000264" t="2016-06-07 13:42:07 nathanmarz no problem"><a href="#t1465306927000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-07</span> <span class="t" onclick="H(this)">13:42:07</span>           nathanmarz </span><span>no problem</span></div><div id="t1465390896000339" t="2016-06-08 13:01:36 quantisan I&apos;m trying to replace my  group-by /`merge-with` logic, any suggestion on how to transform:

 {:1000 {:a {:sends 1}}
 :2000 {:a {:clicks 1 :opens 1 :sends 1}}
 :3000 {:b {:sends 1 :opens 1}}}
 

into

 {:a {:sends 2 :opens 1 :clicks 1}
 :b {:sends 1 :opens 1}}
"><a href="#t1465390896000339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:01:36</span>            quantisan </span><span>I&apos;m trying to replace my </span><code>group-by</code><span>/`merge-with` logic, any suggestion on how to transform:

</span><pre>{:1000 {:a {:sends 1}}
 :2000 {:a {:clicks 1 :opens 1 :sends 1}}
 :3000 {:b {:sends 1 :opens 1}}}
</pre><span>

into

</span><pre>{:a {:sends 2 :opens 1 :clicks 1}
 :b {:sends 1 :opens 1}}
</pre></div><div id="t1465391715000340" t="2016-06-08 13:15:15 nathanmarz I don&apos;t see a way to express that in terms of navigation"><a href="#t1465391715000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:15:15</span>           nathanmarz </span><span>I don&apos;t see a way to express that in terms of navigation</span></div><div id="t1465391833000341" t="2016-06-08 13:17:13 quantisan here&apos;s my current ugly solution:

 (-&gt;&gt; {:1000 {:a {:sends 1}}
      :2000 {:a {:clicks 1 :opens 1 :sends 1}}
      :3000 {:b {:sends 1 :opens 1}}}
     (select [ALL LAST])
     (group-by (comp first keys))
     (transform [ALL LAST]
                #(select [ALL LAST LAST] %))
     (transform [ALL LAST]
                (partial apply merge-with +)))
"><a href="#t1465391833000341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:17:13</span>            quantisan </span><span>here&apos;s my current ugly solution:

</span><pre>(-&gt;&gt; {:1000 {:a {:sends 1}}
      :2000 {:a {:clicks 1 :opens 1 :sends 1}}
      :3000 {:b {:sends 1 :opens 1}}}
     (select [ALL LAST])
     (group-by (comp first keys))
     (transform [ALL LAST]
                #(select [ALL LAST LAST] %))
     (transform [ALL LAST]
                (partial apply merge-with +)))
</pre></div><div id="t1465392097000342" t="2016-06-08 13:21:37 nathanmarz hmm"><a href="#t1465392097000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:21:37</span>           nathanmarz </span><span>hmm</span></div><div id="t1465392112000343" t="2016-06-08 13:21:52 nathanmarz (defn merge-with* [f maps]
  (apply merge-with f maps)
  )

(merge-with* (fn [&amp; maps] (merge-with* + maps)) (vals data))
"><a href="#t1465392112000343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:21:52</span>           nathanmarz </span><pre>(defn merge-with* [f maps]
  (apply merge-with f maps)
  )

(merge-with* (fn [&amp; maps] (merge-with* + maps)) (vals data))
</pre></div><div id="t1465392133000344" t="2016-06-08 13:22:13 nathanmarz maybe you could define a merge-with navigator somehow"><a href="#t1465392133000344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:22:13</span>           nathanmarz </span><span>maybe you could define a merge-with navigator somehow</span></div><div id="t1465392219000345" t="2016-06-08 13:23:39 nathanmarz like from a sequence of maps you navigate to a sequence of values for any given key"><a href="#t1465392219000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:23:39</span>           nathanmarz </span><span>like from a sequence of maps you navigate to a sequence of values for any given key</span></div><div id="t1465392307000346" t="2016-06-08 13:25:07 nathanmarz so then you could do  (transform [MERGED-MAPS MERGED-MAPS] sum (vals data))"><a href="#t1465392307000346" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:25:07</span>           nathanmarz </span><span>so then you could do </span><pre>(transform [MERGED-MAPS MERGED-MAPS] sum (vals data))</pre></div><div id="t1465392422000347" t="2016-06-08 13:27:02 nathanmarz yea it works"><a href="#t1465392422000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:27:02</span>           nathanmarz </span><span>yea it works</span></div><div id="t1465392484000348" t="2016-06-08 13:28:04 nathanmarz (defnav MERGED-MAPS []
  (select* [this structure next-fn]
    ;;TODO: fill this in
    )
  (transform* [this structure next-fn]
    (apply merge-with (fn [&amp; vals] (next-fn vals)) structure)
    ))


(defn sum [vals] (reduce + vals))



(def data
 {:1000 {:a {:sends 1}}
  :2000 {:a {:clicks 1 :opens 1 :sends 1}}
  :3000 {:b {:sends 1 :opens 1}}})

(transform [MERGED-MAPS MERGED-MAPS] sum (vals data))
"><a href="#t1465392484000348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:28:04</span>           nathanmarz </span><pre>(defnav MERGED-MAPS []
  (select* [this structure next-fn]
    ;;TODO: fill this in
    )
  (transform* [this structure next-fn]
    (apply merge-with (fn [&amp; vals] (next-fn vals)) structure)
    ))


(defn sum [vals] (reduce + vals))



(def data
 {:1000 {:a {:sends 1}}
  :2000 {:a {:clicks 1 :opens 1 :sends 1}}
  :3000 {:b {:sends 1 :opens 1}}})

(transform [MERGED-MAPS MERGED-MAPS] sum (vals data))
</pre></div><div id="t1465392538000349" t="2016-06-08 13:28:58 quantisan @nathanmarz: magic  😉"><a href="#t1465392538000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:28:58</span>            quantisan </span><span>@nathanmarz: magic </span><b>😉</b></div><div id="t1465392637000350" t="2016-06-08 13:30:37 nathanmarz I do what I can"><a href="#t1465392637000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:30:37</span>           nathanmarz </span><span>I do what I can</span></div><div id="t1465393168000353" t="2016-06-08 13:39:28 nathanmarz oops, had  sum  written incorrectly there"><a href="#t1465393168000353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:39:28</span>           nathanmarz </span><span>oops, had </span><code>sum</code><span> written incorrectly there</span></div><div id="t1465393175000354" t="2016-06-08 13:39:35 nathanmarz now it&apos;s fixed"><a href="#t1465393175000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">13:39:35</span>           nathanmarz </span><span>now it&apos;s fixed</span></div><div id="t1465413780000379" t="2016-06-08 19:23:00 aengelberg @nathanmarz I agree with your point about  OMIT . My main reasoning for proposing it was that it allows you to control which layer of the path you want to pass  NONE  to. For example:
 (transform [ALL (if-path ... STAY OMIT) ALL (if-path ... STAY OMIT) :a (if-path ... STAY OMIT) ...] ...)
 
Is there a more idiomatic way to do this without coupling the navigation and the transformation as tightly?"><a href="#t1465413780000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">19:23:00</span>           aengelberg </span><span>@nathanmarz I agree with your point about </span><code>OMIT</code><span>. My main reasoning for proposing it was that it allows you to control which layer of the path you want to pass </span><code>NONE</code><span> to. For example:
</span><pre>(transform [ALL (if-path ... STAY OMIT) ALL (if-path ... STAY OMIT) :a (if-path ... STAY OMIT) ...] ...)
</pre><span>
Is there a more idiomatic way to do this without coupling the navigation and the transformation as tightly?</span></div><div id="t1465416708000384" t="2016-06-08 20:11:48 nathanmarz well I think what you want is a single operation that can do multiple transforms"><a href="#t1465416708000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:11:48</span>           nathanmarz </span><span>well I think what you want is a single operation that can do multiple transforms</span></div><div id="t1465416735000385" t="2016-06-08 20:12:15 nathanmarz @aengelberg as it stands now  transform  does a single transform to all navigated elements"><a href="#t1465416735000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:12:15</span>           nathanmarz </span><span>@aengelberg as it stands now </span><code>transform</code><span> does a single transform to all navigated elements</span></div><div id="t1465416771000386" t="2016-06-08 20:12:51 nathanmarz I&apos;ve thought a bit about this, and basically you could imagine a different transform API that does not take in a transform-fn at the top-level"><a href="#t1465416771000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:12:51</span>           nathanmarz </span><span>I&apos;ve thought a bit about this, and basically you could imagine a different transform API that does not take in a transform-fn at the top-level</span></div><div id="t1465416815000387" t="2016-06-08 20:13:35 nathanmarz (multi-transform [ALL (if-path even? (setval-transform 2) (setval-transform NONE))] data)"><a href="#t1465416815000387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:13:35</span>           nathanmarz </span><span>(multi-transform [ALL (if-path even? (setval-transform 2) (setval-transform NONE))] data)</span></div><div id="t1465416917000388" t="2016-06-08 20:15:17 aengelberg The question being whether it&apos;s worth an exception being made for the &quot;specter abstracts the path from the transformation&quot; idea"><a href="#t1465416917000388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:15:17</span>           aengelberg </span><span>The question being whether it&apos;s worth an exception being made for the &quot;specter abstracts the path from the transformation&quot; idea</span></div><div id="t1465416945000389" t="2016-06-08 20:15:45 nathanmarz yea"><a href="#t1465416945000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:15:45</span>           nathanmarz </span><span>yea</span></div><div id="t1465416956000390" t="2016-06-08 20:15:56 nathanmarz that&apos;s basically why I&apos;ve held off on this"><a href="#t1465416956000390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:15:56</span>           nathanmarz </span><span>that&apos;s basically why I&apos;ve held off on this</span></div><div id="t1465416995000391" t="2016-06-08 20:16:35 nathanmarz and also I&apos;ve gotten by just chaining multiple transformations"><a href="#t1465416995000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:16:35</span>           nathanmarz </span><span>and also I&apos;ve gotten by just chaining multiple transformations</span></div><div id="t1465417008000392" t="2016-06-08 20:16:48 nathanmarz (-&gt;&gt; data (transform ...) (transform ...))"><a href="#t1465417008000392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:16:48</span>           nathanmarz </span><code>(-&gt;&gt; data (transform ...) (transform ...))</code></div><div id="t1465417069000393" t="2016-06-08 20:17:49 aengelberg But that&apos;s less efficient right?"><a href="#t1465417069000393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:17:49</span>           aengelberg </span><span>But that&apos;s less efficient right?</span></div><div id="t1465417080000394" t="2016-06-08 20:18:00 nathanmarz yea, which is why I keep thinking about this  🙂"><a href="#t1465417080000394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:18:00</span>           nathanmarz </span><span>yea, which is why I keep thinking about this </span><b>🙂</b></div><div id="t1465417096000395" t="2016-06-08 20:18:16 aengelberg heh"><a href="#t1465417096000395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:18:16</span>           aengelberg </span><span>heh</span></div><div id="t1465417111000396" t="2016-06-08 20:18:31 nathanmarz that said, I don&apos;t think places where I do that are bottlenecks for me"><a href="#t1465417111000396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:18:31</span>           nathanmarz </span><span>that said, I don&apos;t think places where I do that are bottlenecks for me</span></div><div id="t1465417121000397" t="2016-06-08 20:18:41 aengelberg Btw I&apos;ve been thinking about the new select semantics, there may be an opportunity to introduce transducers"><a href="#t1465417121000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:18:41</span>           aengelberg </span><span>Btw I&apos;ve been thinking about the new select semantics, there may be an opportunity to introduce transducers</span></div><div id="t1465417139000398" t="2016-06-08 20:18:59 aengelberg Since the continuation is basically a &quot;reducer&quot;"><a href="#t1465417139000398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:18:59</span>           aengelberg </span><span>Since the continuation is basically a &quot;reducer&quot;</span></div><div id="t1465417195000399" t="2016-06-08 20:19:55 nathanmarz mm"><a href="#t1465417195000399" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:19:55</span>           nathanmarz </span><span>mm</span></div><div id="t1465417196000400" t="2016-06-08 20:19:56 nathanmarz hmm"><a href="#t1465417196000400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:19:56</span>           nathanmarz </span><span>hmm</span></div><div id="t1465417199000401" t="2016-06-08 20:19:59 nathanmarz got an example?"><a href="#t1465417199000401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:19:59</span>           nathanmarz </span><span>got an example?</span></div><div id="t1465417237000402" t="2016-06-08 20:20:37 aengelberg (select [ALL] (map inc) [1 2 3])
=&gt;
[2 3 4]
"><a href="#t1465417237000402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:20:37</span>           aengelberg </span><pre>(select [ALL] (map inc) [1 2 3])
=&gt;
[2 3 4]
</pre></div><div id="t1465417278000403" t="2016-06-08 20:21:18 aengelberg (select-reduce conj [] [ALL] [1 2 3])
"><a href="#t1465417278000403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:21:18</span>           aengelberg </span><pre>(select-reduce conj [] [ALL] [1 2 3])
</pre></div><div id="t1465417346000404" t="2016-06-08 20:22:26 aengelberg just some ideas. the latter would be achieved by storing the reduced value in a cell and repeatedly updating it"><a href="#t1465417346000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:22:26</span>           aengelberg </span><span>just some ideas. the latter would be achieved by storing the reduced value in a cell and repeatedly updating it</span></div><div id="t1465417362000405" t="2016-06-08 20:22:42 nathanmarz that last one would output [1 2 3]?"><a href="#t1465417362000405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:22:42</span>           nathanmarz </span><span>that last one would output [1 2 3]?</span></div><div id="t1465417368000406" t="2016-06-08 20:22:48 aengelberg yes"><a href="#t1465417368000406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:22:48</span>           aengelberg </span><span>yes</span></div><div id="t1465417382000407" t="2016-06-08 20:23:02 nathanmarz I&apos;m not following"><a href="#t1465417382000407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:23:02</span>           nathanmarz </span><span>I&apos;m not following</span></div><div id="t1465417431000408" t="2016-06-08 20:23:51 aengelberg If I understand the new select semantics properly, the continuation (or &quot;final next-fn&quot;) is currently &quot;dump into a vector&quot;. I&apos;m proposing letting the user specify an alternative for that continuation"><a href="#t1465417431000408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:23:51</span>           aengelberg </span><span>If I understand the new select semantics properly, the continuation (or &quot;final next-fn&quot;) is currently &quot;dump into a vector&quot;. I&apos;m proposing letting the user specify an alternative for that continuation</span></div><div id="t1465417444000409" t="2016-06-08 20:24:04 nathanmarz oh I see"><a href="#t1465417444000409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:24:04</span>           nathanmarz </span><span>oh I see</span></div><div id="t1465417452000410" t="2016-06-08 20:24:12 nathanmarz well there are different continuations for the different selects"><a href="#t1465417452000410" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:24:12</span>           nathanmarz </span><span>well there are different continuations for the different selects</span></div><div id="t1465417476000411" t="2016-06-08 20:24:36 nathanmarz you basically want &quot;traverse&quot; exposed"><a href="#t1465417476000411" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:24:36</span>           nathanmarz </span><span>you basically want &quot;traverse&quot; exposed</span></div><div id="t1465417560000412" t="2016-06-08 20:26:00 aengelberg I just looked up  traverse , didn&apos;t realize that was generalizing the continuation internally. Yeah, that&apos;s basically what I&apos;m saying"><a href="#t1465417560000412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:26:00</span>           aengelberg </span><span>I just looked up </span><code>traverse</code><span>, didn&apos;t realize that was generalizing the continuation internally. Yeah, that&apos;s basically what I&apos;m saying</span></div><div id="t1465417729000413" t="2016-06-08 20:28:49 nathanmarz I haven&apos;t completely internalized transducers yet"><a href="#t1465417729000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:28:49</span>           nathanmarz </span><span>I haven&apos;t completely internalized transducers yet</span></div><div id="t1465417749000414" t="2016-06-08 20:29:09 aengelberg transducer: reducer -&gt; reducer"><a href="#t1465417749000414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:29:09</span>           aengelberg </span><span>transducer: reducer -&gt; reducer</span></div><div id="t1465417756000415" t="2016-06-08 20:29:16 nathanmarz yea"><a href="#t1465417756000415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:29:16</span>           nathanmarz </span><span>yea</span></div><div id="t1465417770000416" t="2016-06-08 20:29:30 nathanmarz but basically it&apos;s like an aggregator that looks at its input one value at a time"><a href="#t1465417770000416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:29:30</span>           nathanmarz </span><span>but basically it&apos;s like an aggregator that looks at its input one value at a time</span></div><div id="t1465417787000417" t="2016-06-08 20:29:47 nathanmarz and specter traverse looks at values one at a time"><a href="#t1465417787000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:29:47</span>           nathanmarz </span><span>and specter traverse looks at values one at a time</span></div><div id="t1465417836000418" t="2016-06-08 20:30:36 aengelberg exposing  traverse  isn&apos;t necessarily related at all to transducers"><a href="#t1465417836000418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:30:36</span>           aengelberg </span><span>exposing </span><code>traverse</code><span> isn&apos;t necessarily related at all to transducers</span></div><div id="t1465417865000419" t="2016-06-08 20:31:05 nathanmarz but you&apos;re saying you could just plug in a transducer for that continuation fn"><a href="#t1465417865000419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:31:05</span>           nathanmarz </span><span>but you&apos;re saying you could just plug in a transducer for that continuation fn</span></div><div id="t1465417888000420" t="2016-06-08 20:31:28 aengelberg err, my posting two examples above probably made things confusing."><a href="#t1465417888000420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:31:28</span>           aengelberg </span><span>err, my posting two examples above probably made things confusing.</span></div><div id="t1465417919000421" t="2016-06-08 20:31:59 aengelberg My first example (providing  (map inc) ) was supplying a transducer to modify the hardcoded reducer"><a href="#t1465417919000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:31:59</span>           aengelberg </span><span>My first example (providing </span><code>(map inc)</code><span>) was supplying a transducer to modify the hardcoded reducer</span></div><div id="t1465417925000422" t="2016-06-08 20:32:05 aengelberg The second example (providing  conj ) was replacing the reducer"><a href="#t1465417925000422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:32:05</span>           aengelberg </span><span>The second example (providing </span><code>conj</code><span>) was replacing the reducer</span></div><div id="t1465417935000423" t="2016-06-08 20:32:15 aengelberg You could potentially combine both"><a href="#t1465417935000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:32:15</span>           aengelberg </span><span>You could potentially combine both</span></div><div id="t1465417963000425" t="2016-06-08 20:32:43 aengelberg Except there isn&apos;t much advantage of providing both since the user can just call  (my-transducer my-reducer)  and get a reducer to pass in"><a href="#t1465417963000425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:32:43</span>           aengelberg </span><span>Except there isn&apos;t much advantage of providing both since the user can just call </span><code>(my-transducer my-reducer)</code><span> and get a reducer to pass in</span></div><div id="t1465418348000426" t="2016-06-08 20:39:08 nathanmarz what if specter could just integrate into the normal transducer api?"><a href="#t1465418348000426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:39:08</span>           nathanmarz </span><span>what if specter could just integrate into the normal transducer api?</span></div><div id="t1465418374000428" t="2016-06-08 20:39:34 nathanmarz (eduction xf (traverse [ALL :a even?] data))"><a href="#t1465418374000428" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:39:34</span>           nathanmarz </span><code>(eduction xf (traverse [ALL :a even?] data))</code></div><div id="t1465418395000429" t="2016-06-08 20:39:55 nathanmarz or even  (eduction xf (traverse [ALL :a even?]) data)"><a href="#t1465418395000429" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:39:55</span>           nathanmarz </span><span>or even </span><code>(eduction xf (traverse [ALL :a even?]) data)</code></div><div id="t1465418418000430" t="2016-06-08 20:40:18 nathanmarz actually the former probably makes more sense"><a href="#t1465418418000430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:40:18</span>           nathanmarz </span><span>actually the former probably makes more sense</span></div><div id="t1465418591000431" t="2016-06-08 20:43:11 aengelberg the latter I think would actually be  (sequence (traverse [ALL :a even?]) data)"><a href="#t1465418591000431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:43:11</span>           aengelberg </span><span>the latter I think would actually be </span><code>(sequence (traverse [ALL :a even?]) data)</code></div><div id="t1465418622000433" t="2016-06-08 20:43:42 aengelberg or  (sequence (comp xf (traverse [ALL :a even?])) data)"><a href="#t1465418622000433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:43:42</span>           aengelberg </span><span>or </span><code>(sequence (comp xf (traverse [ALL :a even?])) data)</code></div><div id="t1465418701000435" t="2016-06-08 20:45:01 aengelberg Would  traverse  apply the transformation to each input form?"><a href="#t1465418701000435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:01</span>           aengelberg </span><span>Would </span><code>traverse</code><span> apply the transformation to each input form?</span></div><div id="t1465418720000436" t="2016-06-08 20:45:20 aengelberg err select, not transformation"><a href="#t1465418720000436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:20</span>           aengelberg </span><span>err select, not transformation</span></div><div id="t1465418722000437" t="2016-06-08 20:45:22 nathanmarz here I&apos;m thinking traverse would return an object that can be reduced"><a href="#t1465418722000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:22</span>           nathanmarz </span><span>here I&apos;m thinking traverse would return an object that can be reduced</span></div><div id="t1465418735000438" t="2016-06-08 20:45:35 aengelberg that makes more sense"><a href="#t1465418735000438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:35</span>           aengelberg </span><span>that makes more sense</span></div><div id="t1465418743000439" t="2016-06-08 20:45:43 aengelberg i.e. implements  IReduce"><a href="#t1465418743000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:43</span>           aengelberg </span><span>i.e. implements </span><code>IReduce</code></div><div id="t1465418748000440" t="2016-06-08 20:45:48 nathanmarz yea"><a href="#t1465418748000440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:48</span>           nathanmarz </span><span>yea</span></div><div id="t1465418750000441" t="2016-06-08 20:45:50 aengelberg :+1:"><a href="#t1465418750000441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:45:50</span>           aengelberg </span><b>:+1:</b></div><div id="t1465418768000442" t="2016-06-08 20:46:08 aengelberg and we wouldn&apos;t have to worry about clojure 1.6 compatibility I don&apos;t think"><a href="#t1465418768000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:46:08</span>           aengelberg </span><span>and we wouldn&apos;t have to worry about clojure 1.6 compatibility I don&apos;t think</span></div><div id="t1465418786000443" t="2016-06-08 20:46:26 nathanmarz yea"><a href="#t1465418786000443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:46:26</span>           nathanmarz </span><span>yea</span></div><div id="t1465418796000444" t="2016-06-08 20:46:36 nathanmarz although I think I might drop that soon anyway"><a href="#t1465418796000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:46:36</span>           nathanmarz </span><span>although I think I might drop that soon anyway</span></div><div id="t1465418820000445" t="2016-06-08 20:47:00 nathanmarz 1.9 is coming out and I&apos;m sick of cljx  😉"><a href="#t1465418820000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:47:00</span>           nathanmarz </span><span>1.9 is coming out and I&apos;m sick of cljx </span><b>😉</b></div><div id="t1465418872000446" t="2016-06-08 20:47:52 aengelberg I was working on a project last year but got stuck on leiningen issues. the idea was a plugin that would take cljc files and output clj / cljs similar to cljx"><a href="#t1465418872000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:47:52</span>           aengelberg </span><span>I was working on a project last year but got stuck on leiningen issues. the idea was a plugin that would take cljc files and output clj / cljs similar to cljx</span></div><div id="t1465418892000447" t="2016-06-08 20:48:12 nathanmarz that would have helped a lot"><a href="#t1465418892000447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:48:12</span>           nathanmarz </span><span>that would have helped a lot</span></div><div id="t1465418934000448" t="2016-06-08 20:48:54 aengelberg the main motivation actually was for instaparse; we don&apos;t really want to pull in  instaparse-cljs  until a non-deprecated cross-compile solution exists"><a href="#t1465418934000448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:48:54</span>           aengelberg </span><span>the main motivation actually was for instaparse; we don&apos;t really want to pull in </span><code>instaparse-cljs</code><span> until a non-deprecated cross-compile solution exists</span></div><div id="t1465418993000449" t="2016-06-08 20:49:53 aengelberg (that also works with &lt;1.7)"><a href="#t1465418993000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:49:53</span>           aengelberg </span><span>(that also works with &lt;1.7)</span></div><div id="t1465419039000450" t="2016-06-08 20:50:39 aengelberg maybe i&apos;ll pick it back up soon, the main blocking issue was leiningen&apos;s built-in tools.reader was too old (no longer an issue probably)"><a href="#t1465419039000450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:50:39</span>           aengelberg </span><span>maybe i&apos;ll pick it back up soon, the main blocking issue was leiningen&apos;s built-in tools.reader was too old (no longer an issue probably)</span></div><div id="t1465419062000452" t="2016-06-08 20:51:02 nathanmarz any idea how many people are still on 1.6?"><a href="#t1465419062000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:51:02</span>           nathanmarz </span><span>any idea how many people are still on 1.6?</span></div><div id="t1465419068000453" t="2016-06-08 20:51:08 nathanmarz or below"><a href="#t1465419068000453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:51:08</span>           nathanmarz </span><span>or below</span></div><div id="t1465419175000454" t="2016-06-08 20:52:55 aengelberg my previous job was still on 1.6 well into the lifetime of 1.8"><a href="#t1465419175000454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:52:55</span>           aengelberg </span><span>my previous job was still on 1.6 well into the lifetime of 1.8</span></div><div id="t1465419220000456" t="2016-06-08 20:53:40 aengelberg just one data point, not sure how realistic it is to continue support for 1.6 especially with cider now on &gt;1.7"><a href="#t1465419220000456" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span> <span class="t" onclick="H(this)">20:53:40</span>           aengelberg </span><span>just one data point, not sure how realistic it is to continue support for 1.6 especially with cider now on &gt;1.7</span></div><div id="t1465431663000468" t="2016-06-09 00:21:03 aengelberg @nathanmarz shall I create a github issue for the reducible  traverse  idea?"><a href="#t1465431663000468" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">00:21:03</span>           aengelberg </span><span>@nathanmarz shall I create a github issue for the reducible </span><code>traverse</code><span> idea?</span></div><div id="t1465432103000469" t="2016-06-09 00:28:23 nathanmarz @aengelberg yea"><a href="#t1465432103000469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">00:28:23</span>           nathanmarz </span><span>@aengelberg yea</span></div><div id="t1465432427000471" t="2016-06-09 00:33:47 aengelberg done"><a href="#t1465432427000471" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">00:33:47</span>           aengelberg </span><span>done</span></div><div id="t1465471886000507" t="2016-06-09 11:31:26 mac Do I have to do something special use specter from cljs? I have [com.rpl/specter &quot;0.11.1&quot;] in my build.boot (set-env! :dependencies), but my :require [com.rpl.specter :refer [select]] fails with  &quot;Referred var com.rpl.specter/select does not exist&quot;"><a href="#t1465471886000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:31:26</span>                  mac </span><span>Do I have to do something special use specter from cljs? I have [com.rpl/specter &quot;0.11.1&quot;] in my build.boot (set-env! :dependencies), but my :require [com.rpl.specter :refer [select]] fails with  &quot;Referred var com.rpl.specter/select does not exist&quot;</span></div><div id="t1465471937000508" t="2016-06-09 11:32:17 nathanmarz @mac the core select/transform/etc. operations are macros now in com.rpl.specter.macros namespace"><a href="#t1465471937000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:32:17</span>           nathanmarz </span><span>@mac the core select/transform/etc. operations are macros now in com.rpl.specter.macros namespace</span></div><div id="t1465471960000509" t="2016-06-09 11:32:40 nathanmarz that was a change in 0.11.0"><a href="#t1465471960000509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:32:40</span>           nathanmarz </span><span>that was a change in 0.11.0</span></div><div id="t1465471963000510" t="2016-06-09 11:32:43 mac Ah, got it."><a href="#t1465471963000510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:32:43</span>                  mac </span><span>Ah, got it.</span></div><div id="t1465472723000514" t="2016-06-09 11:45:23 mac I get a ton of warnings about &quot;Use of undeclared Var com.rpl.specter.impl/compiled-select*&quot; just from using select."><a href="#t1465472723000514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:45:23</span>                  mac </span><span>I get a ton of warnings about &quot;Use of undeclared Var com.rpl.specter.impl/compiled-select*&quot; just from using select.</span></div><div id="t1465472814000515" t="2016-06-09 11:46:54 mac @nathanmarz: I just added (:require-macros
          [com.rpl.specter.macros :as sp]) to my namespace."><a href="#t1465472814000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:46:54</span>                  mac </span><span>@nathanmarz: I just added (:require-macros
          [com.rpl.specter.macros :as sp]) to my namespace.</span></div><div id="t1465472934000516" t="2016-06-09 11:48:54 nathanmarz are you also requiring com.rpl.specter namespace?"><a href="#t1465472934000516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:48:54</span>           nathanmarz </span><span>are you also requiring com.rpl.specter namespace?</span></div><div id="t1465473017000517" t="2016-06-09 11:50:17 mac nathanmarz: no, is that the issue?"><a href="#t1465473017000517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:50:17</span>                  mac </span><span>nathanmarz: no, is that the issue?</span></div><div id="t1465473026000518" t="2016-06-09 11:50:26 nathanmarz could be"><a href="#t1465473026000518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:50:26</span>           nathanmarz </span><span>could be</span></div><div id="t1465473054000519" t="2016-06-09 11:50:54 mac nathanmarz: that fixed it  🙂"><a href="#t1465473054000519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:50:54</span>                  mac </span><span>nathanmarz: that fixed it </span><b>🙂</b></div><div id="t1465473058000520" t="2016-06-09 11:50:58 nathanmarz cool"><a href="#t1465473058000520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:50:58</span>           nathanmarz </span><span>cool</span></div><div id="t1465473173000521" t="2016-06-09 11:52:53 mac nathanmarz: thanks, specter is a fantastic piece of kit."><a href="#t1465473173000521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:52:53</span>                  mac </span><span>nathanmarz: thanks, specter is a fantastic piece of kit.</span></div><div id="t1465473194000522" t="2016-06-09 11:53:14 nathanmarz thanks"><a href="#t1465473194000522" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">11:53:14</span>           nathanmarz </span><span>thanks</span></div><div id="t1465487485000537" t="2016-06-09 15:51:25 conaw @nathanmarz: when would you use continue-then-stay, vs stay-then-continue."><a href="#t1465487485000537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:51:25</span>                conaw </span><span>@nathanmarz: when would you use continue-then-stay, vs stay-then-continue.</span></div><div id="t1465487527000538" t="2016-06-09 15:52:07 nathanmarz the first is pre-order traversal, the 2nd is post-order"><a href="#t1465487527000538" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:52:07</span>           nathanmarz </span><span>the first is pre-order traversal, the 2nd is post-order</span></div><div id="t1465487537000539" t="2016-06-09 15:52:17 nathanmarz in that tree example continue-then-stay would visit the leaves first"><a href="#t1465487537000539" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:52:17</span>           nathanmarz </span><span>in that tree example continue-then-stay would visit the leaves first</span></div><div id="t1465487572000540" t="2016-06-09 15:52:52 conaw I’m just trying to think of an example problem, and how that might affect composition"><a href="#t1465487572000540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:52:52</span>                conaw </span><span>I’m just trying to think of an example problem, and how that might affect composition</span></div><div id="t1465487612000541" t="2016-06-09 15:53:32 nathanmarz if you&apos;re changing the structure of the tree itself it can change the result"><a href="#t1465487612000541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:53:32</span>           nathanmarz </span><span>if you&apos;re changing the structure of the tree itself it can change the result</span></div><div id="t1465487640000542" t="2016-06-09 15:54:00 nathanmarz post-order that adds children  will not visit the children in the same navigation, pre-order will"><a href="#t1465487640000542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">15:54:00</span>           nathanmarz </span><span>post-order that adds children  will not visit the children in the same navigation, pre-order will</span></div><div id="t1465488216000543" t="2016-06-09 16:03:36 conaw Inside a recursive navigation path that was visiting every element in a tree this is irrelevant though"><a href="#t1465488216000543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:03:36</span>                conaw </span><span>Inside a recursive navigation path that was visiting every element in a tree this is irrelevant though</span></div><div id="t1465488292000544" t="2016-06-09 16:04:52 conaw I’m just trying to imagine step by step what specter is returning.  Is it possible with a continue-then-stay to collect-one from all the leaves of a tree"><a href="#t1465488292000544" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:04:52</span>                conaw </span><span>I’m just trying to imagine step by step what specter is returning.  Is it possible with a continue-then-stay to collect-one from all the leaves of a tree</span></div><div id="t1465488319000545" t="2016-06-09 16:05:19 conaw sort of, get the path from each leaf to the root node?"><a href="#t1465488319000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:05:19</span>                conaw </span><span>sort of, get the path from each leaf to the root node?</span></div><div id="t1465488832000546" t="2016-06-09 16:13:52 conaw got it"><a href="#t1465488832000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:13:52</span>                conaw </span><span>got it</span></div><div id="t1465489262000547" t="2016-06-09 16:21:02 nathanmarz @conaw you figured out how to do it?"><a href="#t1465489262000547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:21:02</span>           nathanmarz </span><span>@conaw you figured out how to do it?</span></div><div id="t1465489315000548" t="2016-06-09 16:21:55 conaw well, figured out when I might use pre-order and post-order in a select  I’m not totally sure how to do the transform though"><a href="#t1465489315000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:21:55</span>                conaw </span><span>well, figured out when I might use pre-order and post-order in a select  I’m not totally sure how to do the transform though</span></div><div id="t1465489353000549" t="2016-06-09 16:22:33 conaw Is there a way to use setval and just set the val of a particular submap to the values collected"><a href="#t1465489353000549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:22:33</span>                conaw </span><span>Is there a way to use setval and just set the val of a particular submap to the values collected</span></div><div id="t1465489370000550" t="2016-06-09 16:22:50 nathanmarz you need to use transform for that"><a href="#t1465489370000550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:22:50</span>           nathanmarz </span><span>you need to use transform for that</span></div><div id="t1465489402000551" t="2016-06-09 16:23:22 nathanmarz setval ignores value collection"><a href="#t1465489402000551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:23:22</span>           nathanmarz </span><span>setval ignores value collection</span></div><div id="t1465489560000552" t="2016-06-09 16:26:00 conaw gotcha, is it possible to use VAL or collect-one inside of continue-then-stay"><a href="#t1465489560000552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:26:00</span>                conaw </span><span>gotcha, is it possible to use VAL or collect-one inside of continue-then-stay</span></div><div id="t1465489673000553" t="2016-06-09 16:27:53 conaw I keep getting an arity error or nil values"><a href="#t1465489673000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:27:53</span>                conaw </span><span>I keep getting an arity error or nil values</span></div><div id="t1465489762000554" t="2016-06-09 16:29:22 nathanmarz show me the code"><a href="#t1465489762000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:29:22</span>           nathanmarz </span><span>show me the code</span></div><div id="t1465489796000555" t="2016-06-09 16:29:56 conaw (transform [ALL (sp/continue-then-stay :children ALL (collect-one :node)) :parents] 
         (fn [&amp; xs] (vector xs))   samplemap)"><a href="#t1465489796000555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:29:56</span>                conaw </span><pre>(transform [ALL (sp/continue-then-stay :children ALL (collect-one :node)) :parents] 
         (fn [&amp; xs] (vector xs))   samplemap)</pre></div><div id="t1465489810000556" t="2016-06-09 16:30:10 conaw multiple arities passed to next-fn"><a href="#t1465489810000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:30:10</span>                conaw </span><span>multiple arities passed to next-fn</span></div><div id="t1465489856000557" t="2016-06-09 16:30:56 conaw or rather, wrong number of args(2) passed"><a href="#t1465489856000557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:30:56</span>                conaw </span><span>or rather, wrong number of args(2) passed</span></div><div id="t1465489945000558" t="2016-06-09 16:32:25 nathanmarz oh"><a href="#t1465489945000558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:32:25</span>           nathanmarz </span><span>oh</span></div><div id="t1465489951000559" t="2016-06-09 16:32:31 nathanmarz that&apos;s the only known bug in specter"><a href="#t1465489951000559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:32:31</span>           nathanmarz </span><span>that&apos;s the only known bug in specter</span></div><div id="t1465489956000560" t="2016-06-09 16:32:36 nathanmarz https://github.com/nathanmarz/specter/issues/64"><a href="#t1465489956000560" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:32:36</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/64" target="_blank">https://github.com/nathanmarz/specter/issues/64</a></div><div id="t1465489961000562" t="2016-06-09 16:32:41 conaw lol"><a href="#t1465489961000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:32:41</span>                conaw </span><span>lol</span></div><div id="t1465489986000564" t="2016-06-09 16:33:06 conaw continue-then-stay is a wrapper on multi-path then"><a href="#t1465489986000564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:33:06</span>                conaw </span><span>continue-then-stay is a wrapper on multi-path then</span></div><div id="t1465490003000565" t="2016-06-09 16:33:23 nathanmarz yea"><a href="#t1465490003000565" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:33:23</span>           nathanmarz </span><span>yea</span></div><div id="t1465490019000566" t="2016-06-09 16:33:39 nathanmarz same is true for any of the higher order navigators"><a href="#t1465490019000566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:33:39</span>           nathanmarz </span><span>same is true for any of the higher order navigators</span></div><div id="t1465490021000567" t="2016-06-09 16:33:41 nathanmarz like if-path"><a href="#t1465490021000567" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:33:41</span>           nathanmarz </span><span>like if-path</span></div><div id="t1465490054000568" t="2016-06-09 16:34:14 conaw cool"><a href="#t1465490054000568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:34:14</span>                conaw </span><span>cool</span></div><div id="t1465490413000569" t="2016-06-09 16:40:13 conaw Also, you mentioned at Clojure/West a few exercises that you thought were good for figuring out how to write navigators or paths well.   I think you said something about nested vectors of maps.  I’m trying to put together a sort of 4clojurey set of challenges for someone learning specter, if you (or anyone else in this room) have any sample problems I’d love them"><a href="#t1465490413000569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:40:13</span>                conaw </span><span>Also, you mentioned at Clojure/West a few exercises that you thought were good for figuring out how to write navigators or paths well.   I think you said something about nested vectors of maps.  I’m trying to put together a sort of 4clojurey set of challenges for someone learning specter, if you (or anyone else in this room) have any sample problems I’d love them</span></div><div id="t1465491339000572" t="2016-06-09 16:55:39 aengelberg my favorite exercise (spoiler alert, it can only be elegantly solved with  subselect ) is:
 ;; given a vector of vectors, reverse all numbers without changing the length of any vector
in:  [[1 2 3] [4 5] [6] [7] [8 9 10]]
out: [[10 9 8] [7 6] [5] [4] [3 2 1]]
"><a href="#t1465491339000572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:55:39</span>           aengelberg </span><span>my favorite exercise (spoiler alert, it can only be elegantly solved with </span><code>subselect</code><span>) is:
</span><pre>;; given a vector of vectors, reverse all numbers without changing the length of any vector
in:  [[1 2 3] [4 5] [6] [7] [8 9 10]]
out: [[10 9 8] [7 6] [5] [4] [3 2 1]]
</pre></div><div id="t1465491413000573" t="2016-06-09 16:56:53 conaw love it"><a href="#t1465491413000573" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:56:53</span>                conaw </span><span>love it</span></div><div id="t1465491599000574" t="2016-06-09 16:59:59 conaw hey that is quite elegant"><a href="#t1465491599000574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">16:59:59</span>                conaw </span><span>hey that is quite elegant</span></div><div id="t1465491603000575" t="2016-06-09 17:00:03 aengelberg 🙂"><a href="#t1465491603000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:00:03</span>           aengelberg </span><b>🙂</b></div><div id="t1465491631000576" t="2016-06-09 17:00:31 nathanmarz here&apos;s another one: concatenate all continuous sequences of strings together"><a href="#t1465491631000576" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:00:31</span>           nathanmarz </span><span>here&apos;s another one: concatenate all continuous sequences of strings together</span></div><div id="t1465491646000577" t="2016-06-09 17:00:46 nathanmarz [&quot;hello&quot; &quot; &quot; &quot;word&quot; 1 2 &quot;a&quot; &quot;b&quot; 3]  -&gt;  [&quot;hello word&quot; 1 2 &quot;ab&quot; 3]"><a href="#t1465491646000577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:00:46</span>           nathanmarz </span><code>[&quot;hello&quot; &quot; &quot; &quot;word&quot; 1 2 &quot;a&quot; &quot;b&quot; 3]</code><span> -&gt; </span><code>[&quot;hello word&quot; 1 2 &quot;ab&quot; 3]</code></div><div id="t1465491709000579" t="2016-06-09 17:01:49 conaw srange-dynamic?"><a href="#t1465491709000579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:01:49</span>                conaw </span><span>srange-dynamic?</span></div><div id="t1465491727000580" t="2016-06-09 17:02:07 nathanmarz continuous-subseqs"><a href="#t1465491727000580" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:02:07</span>           nathanmarz </span><span>continuous-subseqs</span></div><div id="t1465491729000581" t="2016-06-09 17:02:09 conaw filterer"><a href="#t1465491729000581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:02:09</span>                conaw </span><span>filterer</span></div><div id="t1465491815000582" t="2016-06-09 17:03:35 nathanmarz adding an element to a nested set (or creating the set if it doesn&apos;t exist) without defining any new functions (anonymous or not)"><a href="#t1465491815000582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:03:35</span>           nathanmarz </span><span>adding an element to a nested set (or creating the set if it doesn&apos;t exist) without defining any new functions (anonymous or not)</span></div><div id="t1465491843000583" t="2016-06-09 17:04:03 nathanmarz {:a #{1}}  -&gt;  {:a #{1 2}}"><a href="#t1465491843000583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:04:03</span>           nathanmarz </span><code>{:a #{1}}</code><span> -&gt; </span><code>{:a #{1 2}}</code></div><div id="t1465491948000584" t="2016-06-09 17:05:48 nathanmarz in a sequence of maps, set the  :b  key to true if the value for  :a  exists and is greater than 10"><a href="#t1465491948000584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:05:48</span>           nathanmarz </span><span>in a sequence of maps, set the </span><code>:b</code><span> key to true if the value for </span><code>:a</code><span> exists and is greater than 10</span></div><div id="t1465492020000587" t="2016-06-09 17:07:00 nathanmarz [{:a 1} {:a 11 :c 1} {:d 4}]  -&gt;  [{:a 1} {:a 11 :b true :c 1} {:d 4}]"><a href="#t1465492020000587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:07:00</span>           nathanmarz </span><code>[{:a 1} {:a 11 :c 1} {:d 4}]</code><span> -&gt; </span><code>[{:a 1} {:a 11 :b true :c 1} {:d 4}]</code></div><div id="t1465492654000588" t="2016-06-09 17:17:34 conaw gotta admit I’m a little stumped by what I got back from the continuous subsequence stuff"><a href="#t1465492654000588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:17:34</span>                conaw </span><span>gotta admit I’m a little stumped by what I got back from the continuous subsequence stuff</span></div><div id="t1465492701000589" t="2016-06-09 17:18:21 conaw its navigating to each character?"><a href="#t1465492701000589" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:18:21</span>                conaw </span><span>its navigating to each character?</span></div><div id="t1465492735000590" t="2016-06-09 17:18:55 conaw (transform [(sp/continuous-subseqs string?)] str
            [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot; ])

[\[ \&quot; \h \e \l \l \o \space \&quot; \space \&quot; \a \space \&quot; \space \&quot; \w \&quot; \] 1 2 3 \[ \&quot; \a \space \&quot; \space \&quot; \b \&quot; \]]"><a href="#t1465492735000590" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:18:55</span>                conaw </span><span>(transform [(sp/continuous-subseqs string?)] str
            [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot; ])

[\[ \&quot; \h \e \l \l \o \space \&quot; \space \&quot; \a \space \&quot; \space \&quot; \w \&quot; \] 1 2 3 \[ \&quot; \a \space \&quot; \space \&quot; \b \&quot; \]]</span></div><div id="t1465492770000591" t="2016-06-09 17:19:30 nathanmarz the transform fn gets sequence in and expects sequence out"><a href="#t1465492770000591" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:19:30</span>           nathanmarz </span><span>the transform fn gets sequence in and expects sequence out</span></div><div id="t1465492792000592" t="2016-06-09 17:19:52 conaw so the challenge isn’t in the path, but in the fn you pass to transform"><a href="#t1465492792000592" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:19:52</span>                conaw </span><span>so the challenge isn’t in the path, but in the fn you pass to transform</span></div><div id="t1465492796000593" t="2016-06-09 17:19:56 nathanmarz you&apos;re turning a vector of strings into a big string, which is then spliced back in as a sequence"><a href="#t1465492796000593" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:19:56</span>           nathanmarz </span><span>you&apos;re turning a vector of strings into a big string, which is then spliced back in as a sequence</span></div><div id="t1465492835000594" t="2016-06-09 17:20:35 nathanmarz yea, it&apos;s just understanding how the navigation works"><a href="#t1465492835000594" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:20:35</span>           nathanmarz </span><span>yea, it&apos;s just understanding how the navigation works</span></div><div id="t1465492863000595" t="2016-06-09 17:21:03 conaw gotcha, to do this well you’d really have to do something after the transform fn"><a href="#t1465492863000595" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:21:03</span>                conaw </span><span>gotcha, to do this well you’d really have to do something after the transform fn</span></div><div id="t1465492901000596" t="2016-06-09 17:21:41 nathanmarz your path is right and the rest of it is making a different transform-fn"><a href="#t1465492901000596" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:21:41</span>           nathanmarz </span><span>your path is right and the rest of it is making a different transform-fn</span></div><div id="t1465492971000597" t="2016-06-09 17:22:51 nathanmarz your transform-fn will be called twice, once with [&quot;hello &quot; &quot;a &quot; &quot;w&quot;] and once with [&quot;a &quot; &quot;b&quot;]"><a href="#t1465492971000597" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:22:51</span>           nathanmarz </span><span>your transform-fn will be called twice, once with [&quot;hello &quot; &quot;a &quot; &quot;w&quot;] and once with [&quot;a &quot; &quot;b&quot;]</span></div><div id="t1465494026000599" t="2016-06-09 17:40:26 conaw Yeah, this is a good one, because I’m definitely failing to understand something about specter"><a href="#t1465494026000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:40:26</span>                conaw </span><span>Yeah, this is a good one, because I’m definitely failing to understand something about specter</span></div><div id="t1465494035000600" t="2016-06-09 17:40:35 conaw (s/def ::stringvec (s/+ (s/spec (s/+  string?))))



(defn joinup [stringvec]
  (map (partial str/join &quot;&quot;) stringvec))


(s/fdef joinup :args ::stringvec
        :ret string?)

(s/instrument &apos;joinup)

(transform [(sp/continuous-subseqs string?)] joinup
            [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot; ])
"><a href="#t1465494035000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:40:35</span>                conaw </span><pre>(s/def ::stringvec (s/+ (s/spec (s/+  string?))))



(defn joinup [stringvec]
  (map (partial str/join &quot;&quot;) stringvec))


(s/fdef joinup :args ::stringvec
        :ret string?)

(s/instrument &apos;joinup)

(transform [(sp/continuous-subseqs string?)] joinup
            [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot; ])
</pre></div><div id="t1465494065000601" t="2016-06-09 17:41:05 conaw still getting back this [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot;]"><a href="#t1465494065000601" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:41:05</span>                conaw </span><span>still getting back this [&quot;hello &quot; &quot;a &quot; &quot;w&quot; 1 2 3 &quot;a &quot; &quot;b&quot;]</span></div><div id="t1465494086000602" t="2016-06-09 17:41:26 conaw yet the spec says I’m returning a string"><a href="#t1465494086000602" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:41:26</span>                conaw </span><span>yet the spec says I’m returning a string</span></div><div id="t1465494096000603" t="2016-06-09 17:41:36 nathanmarz here i&apos;ll show you"><a href="#t1465494096000603" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:41:36</span>           nathanmarz </span><span>here i&apos;ll show you</span></div><div id="t1465494112000604" t="2016-06-09 17:41:52 nathanmarz (fn [strseq] [(apply str strseq)])"><a href="#t1465494112000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:41:52</span>           nathanmarz </span><code>(fn [strseq] [(apply str strseq)])</code></div><div id="t1465494135000605" t="2016-06-09 17:42:15 conaw so, because I’m not putting it in a vector at the end"><a href="#t1465494135000605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:42:15</span>                conaw </span><span>so, because I’m not putting it in a vector at the end</span></div><div id="t1465494138000606" t="2016-06-09 17:42:18 conaw what’s happening"><a href="#t1465494138000606" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:42:18</span>                conaw </span><span>what’s happening</span></div><div id="t1465494139000607" t="2016-06-09 17:42:19 conaw ?"><a href="#t1465494139000607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:42:19</span>                conaw </span><span>?</span></div><div id="t1465494156000608" t="2016-06-09 17:42:36 nathanmarz continuous-subseqs works just like srange"><a href="#t1465494156000608" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:42:36</span>           nathanmarz </span><span>continuous-subseqs works just like srange</span></div><div id="t1465494173000609" t="2016-06-09 17:42:53 nathanmarz the sequence returned back replaces the subsequence navigated to"><a href="#t1465494173000609" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:42:53</span>           nathanmarz </span><span>the sequence returned back replaces the subsequence navigated to</span></div><div id="t1465494191000610" t="2016-06-09 17:43:11 nathanmarz so if you just return a string back, that gets interpreted as a sequence and the individual characters get spliced in"><a href="#t1465494191000610" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:43:11</span>           nathanmarz </span><span>so if you just return a string back, that gets interpreted as a sequence and the individual characters get spliced in</span></div><div id="t1465494218000611" t="2016-06-09 17:43:38 conaw gotchaaa"><a href="#t1465494218000611" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:43:38</span>                conaw </span><span>gotchaaa</span></div><div id="t1465494231000612" t="2016-06-09 17:43:51 conaw yeah, that’s totally obvious when you think about it"><a href="#t1465494231000612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:43:51</span>                conaw </span><span>yeah, that’s totally obvious when you think about it</span></div><div id="t1465494260000613" t="2016-06-09 17:44:20 nathanmarz yea, you just need to visualize it"><a href="#t1465494260000613" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:44:20</span>           nathanmarz </span><span>yea, you just need to visualize it</span></div><div id="t1465495073000616" t="2016-06-09 17:57:53 conaw truth, any challenges that involve navigating to a non-empty subset"><a href="#t1465495073000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">17:57:53</span>                conaw </span><span>truth, any challenges that involve navigating to a non-empty subset</span></div><div id="t1465495438000617" t="2016-06-09 18:03:58 nathanmarz I could imagine minecraft style ones"><a href="#t1465495438000617" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">18:03:58</span>           nathanmarz </span><span>I could imagine minecraft style ones</span></div><div id="t1465495465000618" t="2016-06-09 18:04:25 nathanmarz for sequence of players, if :inventory contains :flint and :stick, replace with :torch"><a href="#t1465495465000618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span> <span class="t" onclick="H(this)">18:04:25</span>           nathanmarz </span><span>for sequence of players, if :inventory contains :flint and :stick, replace with :torch</span></div><div id="t1465563298000681" t="2016-06-10 12:54:58 conaw Alright, here’s another challenge.  Let me know if this is just taking the idea of everything as a navigation too far though.  Given this

 [[1 2] [1 3] [3 4] [4 5] [5 6]]"><a href="#t1465563298000681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:54:58</span>                conaw </span><span>Alright, here’s another challenge.  Let me know if this is just taking the idea of everything as a navigation too far though.  Given this

 [[1 2] [1 3] [3 4] [4 5] [5 6]]</span></div><div id="t1465563315000682" t="2016-06-10 12:55:15 conaw Could you express this"><a href="#t1465563315000682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:55:15</span>                conaw </span><span>Could you express this</span></div><div id="t1465563317000683" t="2016-06-10 12:55:17 conaw (for [[k v] e]
              {k #{v}})
              (apply merge-with clojure.set/union))"><a href="#t1465563317000683" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:55:17</span>                conaw </span><span>(for [[k v] e]
              {k #{v}})
              (apply merge-with clojure.set/union))</span></div><div id="t1465563325000684" t="2016-06-10 12:55:25 conaw as a transformation"><a href="#t1465563325000684" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:55:25</span>                conaw </span><span>as a transformation</span></div><div id="t1465563340000685" t="2016-06-10 12:55:40 conaw or rather as a navigation"><a href="#t1465563340000685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:55:40</span>                conaw </span><span>or rather as a navigation</span></div><div id="t1465563386000686" t="2016-06-10 12:56:26 conaw especially if you’re planning on going back to tuples"><a href="#t1465563386000686" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:56:26</span>                conaw </span><span>especially if you’re planning on going back to tuples</span></div><div id="t1465563393000687" t="2016-06-10 12:56:33 conaw copy paste was off as well"><a href="#t1465563393000687" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:56:33</span>                conaw </span><span>copy paste was off as well</span></div><div id="t1465563394000688" t="2016-06-10 12:56:34 conaw (-&gt;&gt; (for [[k v] e]
              {k #{v}})
              (apply merge-with clojure.set/union))"><a href="#t1465563394000688" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">12:56:34</span>                conaw </span><span>(-&gt;&gt; (for [[k v] e]
              {k #{v}})
              (apply merge-with clojure.set/union))</span></div><div id="t1465563793000689" t="2016-06-10 13:03:13 nathanmarz I mean, you can"><a href="#t1465563793000689" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">13:03:13</span>           nathanmarz </span><span>I mean, you can</span></div><div id="t1465563833000690" t="2016-06-10 13:03:53 nathanmarz but it&apos;s not particularly better than the manual code since everything in the structure is used"><a href="#t1465563833000690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">13:03:53</span>           nathanmarz </span><span>but it&apos;s not particularly better than the manual code since everything in the structure is used</span></div><div id="t1465563995000691" t="2016-06-10 13:06:35 nathanmarz (require &apos;[clojure.set :as set])

(defnav MERGED-MAPS []
  (select* [this structure next-fn]
    ;;TODO: fill this in
    )
  (transform* [this structure next-fn]
    (apply merge-with (fn [&amp; vals] (next-fn vals)) structure)
    ))


(transform
  [(parser #(transform ALL (fn [[k v]] {k #{v}}) %) #(vec %))
   MERGED-MAPS]
  #(apply set/union %)
  [[1 2] [1 3] [3 4] [4 5] [5 6]])
"><a href="#t1465563995000691" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">13:06:35</span>           nathanmarz </span><pre>(require &apos;[clojure.set :as set])

(defnav MERGED-MAPS []
  (select* [this structure next-fn]
    ;;TODO: fill this in
    )
  (transform* [this structure next-fn]
    (apply merge-with (fn [&amp; vals] (next-fn vals)) structure)
    ))


(transform
  [(parser #(transform ALL (fn [[k v]] {k #{v}}) %) #(vec %))
   MERGED-MAPS]
  #(apply set/union %)
  [[1 2] [1 3] [3 4] [4 5] [5 6]])
</pre></div><div id="t1465564015000692" t="2016-06-10 13:06:55 nathanmarz that outputs  [[1 #{3 2}] [3 #{4}] [4 #{5}] [5 #{6}]]"><a href="#t1465564015000692" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">13:06:55</span>           nathanmarz </span><span>that outputs </span><code>[[1 #{3 2}] [3 #{4}] [4 #{5}] [5 #{6}]]</code></div><div id="t1465568227000696" t="2016-06-10 14:17:07 conaw cool, just trying to get a sense of where the edge is"><a href="#t1465568227000696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">14:17:07</span>                conaw </span><span>cool, just trying to get a sense of where the edge is</span></div><div id="t1465568289000697" t="2016-06-10 14:18:09 conaw are there other examples of when you’d use parser?"><a href="#t1465568289000697" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">14:18:09</span>                conaw </span><span>are there other examples of when you’d use parser?</span></div><div id="t1465568298000698" t="2016-06-10 14:18:18 conaw didn’t see that mentioned in any doc?"><a href="#t1465568298000698" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">14:18:18</span>                conaw </span><span>didn’t see that mentioned in any doc?</span></div><div id="t1465572392000701" t="2016-06-10 15:26:32 nathanmarz @conaw It&apos;s most commonly used for something like this:
 (def LONG-PARSER (parser #(Long/parseLong %) str))

(transform [ALL LONG-PARSER] inc [&quot;10&quot; &quot;1&quot; &quot;0&quot;])
;; =&gt; [&quot;11&quot; &quot;2&quot; &quot;1&quot;]
"><a href="#t1465572392000701" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:26:32</span>           nathanmarz </span><span>@conaw It&apos;s most commonly used for something like this:
</span><pre>(def LONG-PARSER (parser #(Long/parseLong %) str))

(transform [ALL LONG-PARSER] inc [&quot;10&quot; &quot;1&quot; &quot;0&quot;])
;; =&gt; [&quot;11&quot; &quot;2&quot; &quot;1&quot;]
</pre></div><div id="t1465572407000702" t="2016-06-10 15:26:47 nathanmarz the docs are very incomplete, though most of the public API has docstrings"><a href="#t1465572407000702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:26:47</span>           nathanmarz </span><span>the docs are very incomplete, though most of the public API has docstrings</span></div><div id="t1465572445000703" t="2016-06-10 15:27:25 conaw cool"><a href="#t1465572445000703" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:27:25</span>                conaw </span><span>cool</span></div><div id="t1465572998000704" t="2016-06-10 15:36:38 conaw ok, here’s a question.  Is there a way I could do a transform that would be akin to map-indexed.  
(transform [TOPSORT :position-id (subset #{})] 
(fn [x]  something that gives me an unique value in the range of zero to the number of items I’m doing the select on)
tree)"><a href="#t1465572998000704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:36:38</span>                conaw </span><span>ok, here’s a question.  Is there a way I could do a transform that would be akin to map-indexed.  
(transform [TOPSORT :position-id (subset #{})] 
(fn [x]  something that gives me an unique value in the range of zero to the number of items I’m doing the select on)
tree)</span></div><div id="t1465573045000705" t="2016-06-10 15:37:25 conaw the function for transform is only getting access to one selected value at a time right"><a href="#t1465573045000705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:37:25</span>                conaw </span><span>the function for transform is only getting access to one selected value at a time right</span></div><div id="t1465573101000706" t="2016-06-10 15:38:21 conaw so you’d have to do something like, pass the whole subsequence of values you want as a sequence, and then put them all back in in the right place"><a href="#t1465573101000706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">15:38:21</span>                conaw </span><span>so you’d have to do something like, pass the whole subsequence of values you want as a sequence, and then put them all back in in the right place</span></div><div id="t1465575138000709" t="2016-06-10 16:12:18 nathanmarz I think you&apos;re looking for subselect"><a href="#t1465575138000709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:12:18</span>           nathanmarz </span><span>I think you&apos;re looking for subselect</span></div><div id="t1465575186000710" t="2016-06-10 16:13:06 conaw right"><a href="#t1465575186000710" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:13:06</span>                conaw </span><span>right</span></div><div id="t1465575197000711" t="2016-06-10 16:13:17 nathanmarz (transform (subselect ALL even?) reverse [1 2 3 4 5 6 7])  -&gt;  [1 6 3 4 5 2 7]"><a href="#t1465575197000711" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:13:17</span>           nathanmarz </span><code>(transform (subselect ALL even?) reverse [1 2 3 4 5 6 7])</code><span> -&gt; </span><code>[1 6 3 4 5 2 7]</code></div><div id="t1465576215000712" t="2016-06-10 16:30:15 conaw (transform [(sp/subselect ALL map? :position)] 
           (partial map-indexed (fn [i x] i)) 
           [{:a 1  😛  1}[:not :me 1]{:b 2}])"><a href="#t1465576215000712" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:30:15</span>                conaw </span><span>(transform [(sp/subselect ALL map? :position)] 
           (partial map-indexed (fn [i x] i)) 
           [{:a 1 </span><b>😛</b><span> 1}[:not :me 1]{:b 2}])</span></div><div id="t1465576221000713" t="2016-06-10 16:30:21 conaw (transform [(sp/subselect ALL map? :position)] 
           (partial map-indexed (fn [i x] i)) 
           [{:a 1 :b 1}[:not :me 1]{:b 2}])
"><a href="#t1465576221000713" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:30:21</span>                conaw </span><pre>(transform [(sp/subselect ALL map? :position)] 
           (partial map-indexed (fn [i x] i)) 
           [{:a 1 :b 1}[:not :me 1]{:b 2}])
</pre></div><div id="t1465576241000714" t="2016-06-10 16:30:41 conaw [{:a 1,  😛  1, :position 0} [:not :me 1] {:b 2, :position 1}]"><a href="#t1465576241000714" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:30:41</span>                conaw </span><span>[{:a 1, </span><b>😛</b><span> 1, :position 0} [:not :me 1] {:b 2, :position 1}]</span></div><div id="t1465576253000715" t="2016-06-10 16:30:53 conaw returns  [{:a 1, :b 1, :position 0} [:not :me 1] {:b 2, :position 1}]"><a href="#t1465576253000715" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:30:53</span>                conaw </span><span>returns </span><pre>[{:a 1, :b 1, :position 0} [:not :me 1] {:b 2, :position 1}]</pre></div><div id="t1465576265000716" t="2016-06-10 16:31:05 conaw much appreciated"><a href="#t1465576265000716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:31:05</span>                conaw </span><span>much appreciated</span></div><div id="t1465576304000717" t="2016-06-10 16:31:44 conaw this is really beautiful the more I’m exploring it"><a href="#t1465576304000717" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:31:44</span>                conaw </span><span>this is really beautiful the more I’m exploring it</span></div><div id="t1465576313000718" t="2016-06-10 16:31:53 conaw thanks so much for the help"><a href="#t1465576313000718" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:31:53</span>                conaw </span><span>thanks so much for the help</span></div><div id="t1465576511000719" t="2016-06-10 16:35:11 nathanmarz no problem"><a href="#t1465576511000719" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:35:11</span>           nathanmarz </span><span>no problem</span></div><div id="t1465576558000720" t="2016-06-10 16:35:58 nathanmarz I think you can do that last one with this transform-fn:  (fn [aseq] (range (count aseq)))"><a href="#t1465576558000720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:35:58</span>           nathanmarz </span><span>I think you can do that last one with this transform-fn: </span><code>(fn [aseq] (range (count aseq)))</code></div><div id="t1465576566000721" t="2016-06-10 16:36:06 nathanmarz a little cleaner in my opinion"><a href="#t1465576566000721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:36:06</span>           nathanmarz </span><span>a little cleaner in my opinion</span></div><div id="t1465576657000722" t="2016-06-10 16:37:37 nathanmarz @conaw: or even better:
 (transform [(subselect ALL map? :position) (view count)] 
           range
           [{:a 1 :b 1} [:not :me 1] {:b 2}])
"><a href="#t1465576657000722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:37:37</span>           nathanmarz </span><span>@conaw: or even better:
</span><pre>(transform [(subselect ALL map? :position) (view count)] 
           range
           [{:a 1 :b 1} [:not :me 1] {:b 2}])
</pre></div><div id="t1465576683000723" t="2016-06-10 16:38:03 conaw very cool"><a href="#t1465576683000723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:38:03</span>                conaw </span><span>very cool</span></div><div id="t1465576825000724" t="2016-06-10 16:40:25 conaw if you’d like, happy to take a stab at writing up some examples for the wiki."><a href="#t1465576825000724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:40:25</span>                conaw </span><span>if you’d like, happy to take a stab at writing up some examples for the wiki.</span></div><div id="t1465576842000725" t="2016-06-10 16:40:42 nathanmarz that would be awesome"><a href="#t1465576842000725" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:40:42</span>           nathanmarz </span><span>that would be awesome</span></div><div id="t1465577000000726" t="2016-06-10 16:43:20 conaw will give it a stab"><a href="#t1465577000000726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:43:20</span>                conaw </span><span>will give it a stab</span></div><div id="t1465577018000727" t="2016-06-10 16:43:38 conaw taking the subselect example into recursion"><a href="#t1465577018000727" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:43:38</span>                conaw </span><span>taking the subselect example into recursion</span></div><div id="t1465577062000728" t="2016-06-10 16:44:22 conaw nevermind, actually works just as expected"><a href="#t1465577062000728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:44:22</span>                conaw </span><span>nevermind, actually works just as expected</span></div><div id="t1465577067000729" t="2016-06-10 16:44:27 conaw this is very cool"><a href="#t1465577067000729" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:44:27</span>                conaw </span><span>this is very cool</span></div><div id="t1465577091000730" t="2016-06-10 16:44:51 nathanmarz yea subselect is pretty magical"><a href="#t1465577091000730" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:44:51</span>           nathanmarz </span><span>yea subselect is pretty magical</span></div><div id="t1465577098000731" t="2016-06-10 16:44:58 nathanmarz contributed by @aengelberg"><a href="#t1465577098000731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:44:58</span>           nathanmarz </span><span>contributed by @aengelberg</span></div><div id="t1465577109000732" t="2016-06-10 16:45:09 aengelberg 👋"><a href="#t1465577109000732" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:45:09</span>           aengelberg </span><b>👋</b></div><div id="t1465577147000733" t="2016-06-10 16:45:47 aengelberg its end result almost outweighs the mutable hackiness I used to achieve it  🙂"><a href="#t1465577147000733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:45:47</span>           aengelberg </span><span>its end result almost outweighs the mutable hackiness I used to achieve it </span><b>🙂</b></div><div id="t1465577272000734" t="2016-06-10 16:47:52 conaw lol, I was trying to figure out how I would even achieve this before @nathanmarz mentioned subselect, only thing I could think of was to create an atom"><a href="#t1465577272000734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:47:52</span>                conaw </span><span>lol, I was trying to figure out how I would even achieve this before @nathanmarz mentioned subselect, only thing I could think of was to create an atom</span></div><div id="t1465577303000735" t="2016-06-10 16:48:23 conaw glad you went into the swamp for us!"><a href="#t1465577303000735" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:48:23</span>                conaw </span><span>glad you went into the swamp for us!</span></div><div id="t1465577334000736" t="2016-06-10 16:48:54 aengelberg I like this quote from  http://clojure.org/transients :
 If a tree falls in the woods, does it make a sound?
If a pure function mutates some local data in order to produce an immutable return value, is that ok?
"><a href="#t1465577334000736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:48:54</span>           aengelberg </span><span>I like this quote from </span><a href="http://clojure.org/transients" target="_blank">http://clojure.org/transients</a><span>:
</span><pre>If a tree falls in the woods, does it make a sound?
If a pure function mutates some local data in order to produce an immutable return value, is that ok?
</pre></div><div id="t1465577361000737" t="2016-06-10 16:49:21 conaw so much beauty in this channel"><a href="#t1465577361000737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:49:21</span>                conaw </span><span>so much beauty in this channel</span></div><div id="t1465577414000738" t="2016-06-10 16:50:14 nathanmarz that&apos;s a good one"><a href="#t1465577414000738" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:50:14</span>           nathanmarz </span><span>that&apos;s a good one</span></div><div id="t1465577427000739" t="2016-06-10 16:50:27 nathanmarz been digging into clojure&apos;s transducers and they use a lot of mutability"><a href="#t1465577427000739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:50:27</span>           nathanmarz </span><span>been digging into clojure&apos;s transducers and they use a lot of mutability</span></div><div id="t1465577510000740" t="2016-06-10 16:51:50 aengelberg Subselect gets awkward when working with sets:
 (subselect [ALL ALL] reverse [#{1 2 3} [4 5 6]])
=&gt;
[#{6 5 4} [???]]
"><a href="#t1465577510000740" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:51:50</span>           aengelberg </span><span>Subselect gets awkward when working with sets:
</span><pre>(subselect [ALL ALL] reverse [#{1 2 3} [4 5 6]])
=&gt;
[#{6 5 4} [???]]
</pre></div><div id="t1465577704000741" t="2016-06-10 16:55:04 nathanmarz looks reasonable to me"><a href="#t1465577704000741" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:55:04</span>           nathanmarz </span><span>looks reasonable to me</span></div><div id="t1465577792000742" t="2016-06-10 16:56:32 aengelberg often I get overly paranoid about confusing beginners"><a href="#t1465577792000742" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:56:32</span>           aengelberg </span><span>often I get overly paranoid about confusing beginners</span></div><div id="t1465577873000743" t="2016-06-10 16:57:53 nathanmarz I know what you mean"><a href="#t1465577873000743" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:57:53</span>           nathanmarz </span><span>I know what you mean</span></div><div id="t1465577894000744" t="2016-06-10 16:58:14 nathanmarz but I like the clojure philosophy of keep it simple and well defined"><a href="#t1465577894000744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:58:14</span>           nathanmarz </span><span>but I like the clojure philosophy of keep it simple and well defined</span></div><div id="t1465577900000745" t="2016-06-10 16:58:20 nathanmarz even if it requires a learning curve"><a href="#t1465577900000745" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">16:58:20</span>           nathanmarz </span><span>even if it requires a learning curve</span></div><div id="t1465578398000746" t="2016-06-10 17:06:38 nathanmarz @aengelberg: curious to hear your thoughts on  https://github.com/nathanmarz/specter/issues/121"><a href="#t1465578398000746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:06:38</span>           nathanmarz </span><span>@aengelberg: curious to hear your thoughts on </span><a href="https://github.com/nathanmarz/specter/issues/121" target="_blank">https://github.com/nathanmarz/specter/issues/121</a></div><div id="t1465578413000748" t="2016-06-10 17:06:53 nathanmarz a lot of overlap with transducers"><a href="#t1465578413000748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:06:53</span>           nathanmarz </span><span>a lot of overlap with transducers</span></div><div id="t1465578520000749" t="2016-06-10 17:08:40 aengelberg yeah, just saw that. Seems like it could be even more useful if  takenav  could reset at a later level, e.g.  (select [ALL ALL (takenav 3)] [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[1 2 3] [6 7 8]]"><a href="#t1465578520000749" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:08:40</span>           aengelberg </span><span>yeah, just saw that. Seems like it could be even more useful if </span><code>takenav</code><span> could reset at a later level, e.g. </span><code>(select [ALL ALL (takenav 3)] [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[1 2 3] [6 7 8]]</code></div><div id="t1465578545000750" t="2016-06-10 17:09:05 aengelberg essentially the volatile would need to get reset in between the two  ALL s"><a href="#t1465578545000750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:09:05</span>           aengelberg </span><span>essentially the volatile would need to get reset in between the two </span><code>ALL</code><span>s</span></div><div id="t1465578576000751" t="2016-06-10 17:09:36 nathanmarz i think the result you would expect there is  [1 2 3 6 7 8]"><a href="#t1465578576000751" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:09:36</span>           nathanmarz </span><span>i think the result you would expect there is </span><code>[1 2 3 6 7 8]</code></div><div id="t1465578587000752" t="2016-06-10 17:09:47 nathanmarz you might want both behaviors"><a href="#t1465578587000752" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:09:47</span>           nathanmarz </span><span>you might want both behaviors</span></div><div id="t1465578591000753" t="2016-06-10 17:09:51 aengelberg correct, sorry"><a href="#t1465578591000753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:09:51</span>           aengelberg </span><span>correct, sorry</span></div><div id="t1465578613000754" t="2016-06-10 17:10:13 aengelberg thus proving that it&apos;s unreasonable to expect that behavior arbitrarily  🙂"><a href="#t1465578613000754" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:10:13</span>           aengelberg </span><span>thus proving that it&apos;s unreasonable to expect that behavior arbitrarily </span><b>🙂</b></div><div id="t1465578619000755" t="2016-06-10 17:10:19 nathanmarz so resetting would be an explicit choice"><a href="#t1465578619000755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:10:19</span>           nathanmarz </span><span>so resetting would be an explicit choice</span></div><div id="t1465578625000756" t="2016-06-10 17:10:25 aengelberg yeah"><a href="#t1465578625000756" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:10:25</span>           aengelberg </span><span>yeah</span></div><div id="t1465578639000757" t="2016-06-10 17:10:39 aengelberg have you considered simply introducing  (ALL-transduce (take 3))"><a href="#t1465578639000757" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:10:39</span>           aengelberg </span><span>have you considered simply introducing </span><code>(ALL-transduce (take 3))</code></div><div id="t1465578678000758" t="2016-06-10 17:11:18 nathanmarz that would be one way to do it"><a href="#t1465578678000758" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:11:18</span>           nathanmarz </span><span>that would be one way to do it</span></div><div id="t1465578690000759" t="2016-06-10 17:11:30 nathanmarz then takenav would be a completely different implementation to that"><a href="#t1465578690000759" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:11:30</span>           nathanmarz </span><span>then takenav would be a completely different implementation to that</span></div><div id="t1465578695000760" t="2016-06-10 17:11:35 aengelberg yeah"><a href="#t1465578695000760" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:11:35</span>           aengelberg </span><span>yeah</span></div><div id="t1465578705000761" t="2016-06-10 17:11:45 nathanmarz seems like they should unify more cleanly"><a href="#t1465578705000761" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:11:45</span>           nathanmarz </span><span>seems like they should unify more cleanly</span></div><div id="t1465578717000762" t="2016-06-10 17:11:57 nathanmarz the degree of overlap is very suspicious"><a href="#t1465578717000762" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:11:57</span>           nathanmarz </span><span>the degree of overlap is very suspicious</span></div><div id="t1465578837000763" t="2016-06-10 17:13:57 aengelberg or maybe a &quot;take view&quot;"><a href="#t1465578837000763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:13:57</span>           aengelberg </span><span>or maybe a &quot;take view&quot;</span></div><div id="t1465578839000764" t="2016-06-10 17:13:59 nathanmarz could be something like  (select [ALL ALL (traversed (takenav 3)] ... )"><a href="#t1465578839000764" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:13:59</span>           nathanmarz </span><span>could be something like </span><code>(select [ALL ALL (traversed (takenav 3)] ... )</code></div><div id="t1465578986000765" t="2016-06-10 17:16:26 aengelberg (transform [ALL (subselect (taken 3))] [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[1 2 3] [6 7 8]]"><a href="#t1465578986000765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:16:26</span>           aengelberg </span><code>(transform [ALL (subselect (taken 3))] [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[1 2 3] [6 7 8]]</code></div><div id="t1465578994000766" t="2016-06-10 17:16:34 aengelberg uhhhh ignore that"><a href="#t1465578994000766" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:16:34</span>           aengelberg </span><span>uhhhh ignore that</span></div><div id="t1465579016000767" t="2016-06-10 17:16:56 aengelberg (transform [ALL (subselect (taken 3))] inc [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[2 3 4 4 5] [7 8 9 9 10]]"><a href="#t1465579016000767" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:16:56</span>           aengelberg </span><span>(transform [ALL (subselect (taken 3))] inc [[1 2 3 4 5] [6 7 8 9 10]]) =&gt; [[2 3 4 4 5] [7 8 9 9 10]]</span></div><div id="t1465579103000768" t="2016-06-10 17:18:23 nathanmarz with the idea there that subselect re-parameterizes its path on every invocation?"><a href="#t1465579103000768" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:18:23</span>           nathanmarz </span><span>with the idea there that subselect re-parameterizes its path on every invocation?</span></div><div id="t1465579111000769" t="2016-06-10 17:18:31 nathanmarz that&apos;s what I was thinking with  traversed"><a href="#t1465579111000769" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:18:31</span>           nathanmarz </span><span>that&apos;s what I was thinking with </span><code>traversed</code></div><div id="t1465579259000772" t="2016-06-10 17:20:59 nathanmarz either way the semantics are pretty subtle"><a href="#t1465579259000772" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:20:59</span>           nathanmarz </span><span>either way the semantics are pretty subtle</span></div><div id="t1465579264000773" t="2016-06-10 17:21:04 nathanmarz maybe too subtle"><a href="#t1465579264000773" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:21:04</span>           nathanmarz </span><span>maybe too subtle</span></div><div id="t1465579427000774" t="2016-06-10 17:23:47 conaw hey @nathanmarz @aengelberg total aside, but don’t suppose either of you guys know of any great lecturers or youtube channels/videos relating to graph theory."><a href="#t1465579427000774" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:23:47</span>                conaw </span><span>hey @nathanmarz @aengelberg total aside, but don’t suppose either of you guys know of any great lecturers or youtube channels/videos relating to graph theory.</span></div><div id="t1465579518000775" t="2016-06-10 17:25:18 nathanmarz looks like tim roughgarden has a bunch of videos on graph algorithms on youtube"><a href="#t1465579518000775" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:25:18</span>           nathanmarz </span><span>looks like tim roughgarden has a bunch of videos on graph algorithms on youtube</span></div><div id="t1465579520000776" t="2016-06-10 17:25:20 nathanmarz https://www.youtube.com/results?search_query=tim+roughgarden+graph+algorithms"><a href="#t1465579520000776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:25:20</span>           nathanmarz </span><a href="https://www.youtube.com/results?search_query=tim+roughgarden+graph+algorithms" target="_blank">https://www.youtube.com/results?search_query=tim+roughgarden+graph+algorithms</a></div><div id="t1465579528000778" t="2016-06-10 17:25:28 nathanmarz he&apos;s the best teacher I ever had"><a href="#t1465579528000778" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:25:28</span>           nathanmarz </span><span>he&apos;s the best teacher I ever had</span></div><div id="t1465579715000779" t="2016-06-10 17:28:35 conaw win"><a href="#t1465579715000779" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:28:35</span>                conaw </span><span>win</span></div><div id="t1465581561000781" t="2016-06-10 17:59:21 aengelberg I was suggesting  taken  would be just a regular (not stateful) navigator that only selects or transforms the first N elements"><a href="#t1465581561000781" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:59:21</span>           aengelberg </span><span>I was suggesting </span><code>taken</code><span> would be just a regular (not stateful) navigator that only selects or transforms the first N elements</span></div><div id="t1465581570000782" t="2016-06-10 17:59:30 aengelberg less performant though to do a subselect"><a href="#t1465581570000782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">17:59:30</span>           aengelberg </span><span>less performant though to do a subselect</span></div><div id="t1465582802000783" t="2016-06-10 18:20:02 nathanmarz @aengelberg: ah, yea I&apos;m thinking more cases like  [ALL ALL ALL (takenav 3)]"><a href="#t1465582802000783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">18:20:02</span>           nathanmarz </span><span>@aengelberg: ah, yea I&apos;m thinking more cases like </span><code>[ALL ALL ALL (takenav 3)]</code></div><div id="t1465582816000785" t="2016-06-10 18:20:16 aengelberg too many  ALL s  🙂"><a href="#t1465582816000785" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">18:20:16</span>           aengelberg </span><span>too many </span><code>ALL</code><span>s </span><b>🙂</b></div><div id="t1465582837000786" t="2016-06-10 18:20:37 nathanmarz (select [ALL (freshpath ALL (take-nav 2)) (take-nav 4)]
  [[1] [2 3 4] [5 6 7]])
;; =&gt; [1 2 3 5]
"><a href="#t1465582837000786" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">18:20:37</span>           nathanmarz </span><pre>(select [ALL (freshpath ALL (take-nav 2)) (take-nav 4)]
  [[1] [2 3 4] [5 6 7]])
;; =&gt; [1 2 3 5]
</pre></div><div id="t1465582851000787" t="2016-06-10 18:20:51 nathanmarz &quot;freshpath&quot; would mean to treat that path from scratch"><a href="#t1465582851000787" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">18:20:51</span>           nathanmarz </span><span>&quot;freshpath&quot; would mean to treat that path from scratch</span></div><div id="t1465582886000788" t="2016-06-10 18:21:26 nathanmarz the only impact that would have would be to initialize the states and collected vals every time it enters that part of the path"><a href="#t1465582886000788" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-10</span> <span class="t" onclick="H(this)">18:21:26</span>           nathanmarz </span><span>the only impact that would have would be to initialize the states and collected vals every time it enters that part of the path</span></div><div id="t1465641990000006" t="2016-06-11 10:46:30 luxbock I already forgot how to do this:  https://gist.github.com/luxbock/3403337442fb3782321209edaa7fffc0"><a href="#t1465641990000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">10:46:30</span>              luxbock </span><span>I already forgot how to do this: </span><a href="https://gist.github.com/luxbock/3403337442fb3782321209edaa7fffc0" target="_blank">https://gist.github.com/luxbock/3403337442fb3782321209edaa7fffc0</a></div><div id="t1465642007000007" t="2016-06-11 10:46:47 luxbock how can I move lift the filter-part from the function into the selector?"><a href="#t1465642007000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">10:46:47</span>              luxbock </span><span>how can I move lift the filter-part from the function into the selector?</span></div><div id="t1465642028000008" t="2016-06-11 10:47:08 conaw filterer?"><a href="#t1465642028000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">10:47:08</span>                conaw </span><span>filterer?</span></div><div id="t1465642086000009" t="2016-06-11 10:48:06 luxbock @conaw: I think that counts the  :bar  keys as well"><a href="#t1465642086000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">10:48:06</span>              luxbock </span><span>@conaw: I think that counts the </span><code>:bar</code><span> keys as well</span></div><div id="t1465642212000014" t="2016-06-11 10:50:12 luxbock the return value I want is  {:a 2, :b 3}"><a href="#t1465642212000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">10:50:12</span>              luxbock </span><span>the return value I want is </span><code>{:a 2, :b 3}</code></div><div id="t1465644947000017" t="2016-06-11 11:35:47 codonnell @luxbock: not sure if this is optimal, but it works"><a href="#t1465644947000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">11:35:47</span>            codonnell </span><span>@luxbock: not sure if this is optimal, but it works</span></div><div id="t1465644951000018" t="2016-06-11 11:35:51 codonnell (transform [MAP-VALS (collect-one (filterer (fn [m] (contains? m :foo))))] (fn [ms _] (count ms)) data)"><a href="#t1465644951000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">11:35:51</span>            codonnell </span><code>(transform [MAP-VALS (collect-one (filterer (fn [m] (contains? m :foo))))] (fn [ms _] (count ms)) data)</code></div><div id="t1465645406000019" t="2016-06-11 11:43:26 nathanmarz @luxbock: I would do it like this:
 (transform [MAP-VALS (collect ALL (pred :foo))]
  (fn [a _] (count a))
  {:a [{:foo 1} {:bar 3} {:foo 4}]
   :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]}
  )
"><a href="#t1465645406000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">11:43:26</span>           nathanmarz </span><span>@luxbock: I would do it like this:
</span><pre>(transform [MAP-VALS (collect ALL (pred :foo))]
  (fn [a _] (count a))
  {:a [{:foo 1} {:bar 3} {:foo 4}]
   :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]}
  )
</pre></div><div id="t1465645449000020" t="2016-06-11 11:44:09 nathanmarz can also use  must  instead of  pred  for  contains?  semantics"><a href="#t1465645449000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">11:44:09</span>           nathanmarz </span><span>can also use </span><code>must</code><span> instead of </span><code>pred</code><span> for </span><code>contains?</code><span> semantics</span></div><div id="t1465649078000022" t="2016-06-11 12:44:38 codonnell I&apos;m trying to understand how late binding works for filterer. It seems to work fine if I pass it a late binding navigator, like must or pred. However, if I try to pass a predicate function directly, I get an exception. Is that just how filterer works or am I missing something?"><a href="#t1465649078000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:44:38</span>            codonnell </span><span>I&apos;m trying to understand how late binding works for filterer. It seems to work fine if I pass it a late binding navigator, like must or pred. However, if I try to pass a predicate function directly, I get an exception. Is that just how filterer works or am I missing something?</span></div><div id="t1465649152000023" t="2016-06-11 12:45:52 nathanmarz @codonnell:  filterer  isn&apos;t a navigator"><a href="#t1465649152000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:45:52</span>           nathanmarz </span><span>@codonnell: </span><code>filterer</code><span> isn&apos;t a navigator</span></div><div id="t1465649160000024" t="2016-06-11 12:46:00 nathanmarz it&apos;s a function that returns a navigator"><a href="#t1465649160000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:46:00</span>           nathanmarz </span><span>it&apos;s a function that returns a navigator</span></div><div id="t1465649188000025" t="2016-06-11 12:46:28 nathanmarz so when you use it in  comp-path  it gets interpreted like all functions do – as a filter function"><a href="#t1465649188000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:46:28</span>           nathanmarz </span><span>so when you use it in </span><code>comp-path</code><span> it gets interpreted like all functions do – as a filter function</span></div><div id="t1465649231000026" t="2016-06-11 12:47:11 nathanmarz filterer  can be invoked with a path that requires more parameters to then create a navigator that requires those parameters"><a href="#t1465649231000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:47:11</span>           nathanmarz </span><code>filterer</code><span> can be invoked with a path that requires more parameters to then create a navigator that requires those parameters</span></div><div id="t1465649257000027" t="2016-06-11 12:47:37 nathanmarz btw, it&apos;s very rare that you need to explicitly precompile anymore"><a href="#t1465649257000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:47:37</span>           nathanmarz </span><span>btw, it&apos;s very rare that you need to explicitly precompile anymore</span></div><div id="t1465649299000028" t="2016-06-11 12:48:19 nathanmarz (select-one (filterer even?) (range 10))  in 0.11.2 should be within 2-3% of the precompiled code"><a href="#t1465649299000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:48:19</span>           nathanmarz </span><code>(select-one (filterer even?) (range 10))</code><span> in 0.11.2 should be within 2-3% of the precompiled code</span></div><div id="t1465649452000029" t="2016-06-11 12:50:52 codonnell Alright, that makes sense. Thanks for the response. I&apos;m aware that compiling paths is generally unnecessary in 0.11.2. I&apos;m writing up some notes for myself and got confused about filterer behavior, so I wanted to clarify for my notes."><a href="#t1465649452000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:50:52</span>            codonnell </span><span>Alright, that makes sense. Thanks for the response. I&apos;m aware that compiling paths is generally unnecessary in 0.11.2. I&apos;m writing up some notes for myself and got confused about filterer behavior, so I wanted to clarify for my notes.</span></div><div id="t1465649468000030" t="2016-06-11 12:51:08 nathanmarz cool"><a href="#t1465649468000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:51:08</span>           nathanmarz </span><span>cool</span></div><div id="t1465649473000031" t="2016-06-11 12:51:13 nathanmarz I opened up  https://github.com/nathanmarz/specter/issues/122"><a href="#t1465649473000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:51:13</span>           nathanmarz </span><span>I opened up </span><a href="https://github.com/nathanmarz/specter/issues/122" target="_blank">https://github.com/nathanmarz/specter/issues/122</a></div><div id="t1465649487000033" t="2016-06-11 12:51:27 nathanmarz Specter should detect that mistake and throw an error"><a href="#t1465649487000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:51:27</span>           nathanmarz </span><span>Specter should detect that mistake and throw an error</span></div><div id="t1465649518000034" t="2016-06-11 12:51:58 codonnell I appreciate that. Informative error messages make a huge difference."><a href="#t1465649518000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:51:58</span>            codonnell </span><span>I appreciate that. Informative error messages make a huge difference.</span></div><div id="t1465649650000035" t="2016-06-11 12:54:10 conaw is there a reason why MAP-VALS might not work in cljs"><a href="#t1465649650000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:54:10</span>                conaw </span><span>is there a reason why MAP-VALS might not work in cljs</span></div><div id="t1465649668000036" t="2016-06-11 12:54:28 conaw Use of undeclared Var com.rpl.specter/MAP-VALS at line 1"><a href="#t1465649668000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:54:28</span>                conaw </span><span>Use of undeclared Var com.rpl.specter/MAP-VALS at line 1</span></div><div id="t1465649728000037" t="2016-06-11 12:55:28 conaw easy enough to define oneself, but surprised by that error"><a href="#t1465649728000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:55:28</span>                conaw </span><span>easy enough to define oneself, but surprised by that error</span></div><div id="t1465649810000038" t="2016-06-11 12:56:50 nathanmarz Are you using 0.11.1 or later?"><a href="#t1465649810000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:56:50</span>           nathanmarz </span><span>Are you using 0.11.1 or later?</span></div><div id="t1465649835000039" t="2016-06-11 12:57:15 conaw 11.0"><a href="#t1465649835000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:57:15</span>                conaw </span><span>11.0</span></div><div id="t1465649836000040" t="2016-06-11 12:57:16 nathanmarz you should use the built-in one as its about twice as fast at  [ALL LAST]"><a href="#t1465649836000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:57:16</span>           nathanmarz </span><span>you should use the built-in one as its about twice as fast at </span><code>[ALL LAST]</code></div><div id="t1465649845000041" t="2016-06-11 12:57:25 nathanmarz it was added in 0.11.1"><a href="#t1465649845000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:57:25</span>           nathanmarz </span><span>it was added in 0.11.1</span></div><div id="t1465649858000042" t="2016-06-11 12:57:38 nathanmarz Highly recommend upgrading to 0.11.2"><a href="#t1465649858000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">12:57:38</span>           nathanmarz </span><span>Highly recommend upgrading to 0.11.2</span></div><div id="t1465650135000043" t="2016-06-11 13:02:15 conaw done"><a href="#t1465650135000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:02:15</span>                conaw </span><span>done</span></div><div id="t1465651057000044" t="2016-06-11 13:17:37 conaw @nathanmarz: regarding @luxbock’s example, when I do 
 (transform [ALL LAST (sp/collect ALL (sp/pred :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :c [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})

;;=&gt;  {:a 2 c: 3}

(transform [MAP-VALS (sp/collect ALL (sp/pred :foo))]
           (fn [e _] (count e))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :c [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; 0"><a href="#t1465651057000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:17:37</span>                conaw </span><span>@nathanmarz: regarding @luxbock’s example, when I do 
</span><pre>(transform [ALL LAST (sp/collect ALL (sp/pred :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :c [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})

;;=&gt;  {:a 2 c: 3}

(transform [MAP-VALS (sp/collect ALL (sp/pred :foo))]
           (fn [e _] (count e))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :c [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; 0</pre></div><div id="t1465651167000046" t="2016-06-11 13:19:27 conaw (transform [MAP-VALS (sp/collect ALL (sp/pred :foo))]
           count
           {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; 0"><a href="#t1465651167000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:19:27</span>                conaw </span><pre>(transform [MAP-VALS (sp/collect ALL (sp/pred :foo))]
           count
           {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; 0</pre></div><div id="t1465651356000047" t="2016-06-11 13:22:36 codonnell (transform [MAP-VALS (collect ALL (must :foo))] (fn [c _] (count c)) data)
{:a 2, :b 3}"><a href="#t1465651356000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:22:36</span>            codonnell </span><pre>(transform [MAP-VALS (collect ALL (must :foo))] (fn [c _] (count c)) data)
{:a 2, :b 3}</pre></div><div id="t1465651393000048" t="2016-06-11 13:23:13 conaw I’m just pointing out that ALL LAST and MAP-VALS aren’t equivalent in this case"><a href="#t1465651393000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:23:13</span>                conaw </span><span>I’m just pointing out that ALL LAST and MAP-VALS aren’t equivalent in this case</span></div><div id="t1465651400000049" t="2016-06-11 13:23:20 codonnell ah, interesting"><a href="#t1465651400000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:23:20</span>            codonnell </span><span>ah, interesting</span></div><div id="t1465651427000050" t="2016-06-11 13:23:47 conaw pred and must are equivelent"><a href="#t1465651427000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:23:47</span>                conaw </span><span>pred and must are equivelent</span></div><div id="t1465651458000051" t="2016-06-11 13:24:18 conaw (transform [ALL LAST (sp/collect ALL (sp/must :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; {:a 2 :b 3}"><a href="#t1465651458000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:24:18</span>                conaw </span><pre>(transform [ALL LAST (sp/collect ALL (sp/must :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
;;=&gt; {:a 2 :b 3}</pre></div><div id="t1465651491000052" t="2016-06-11 13:24:51 conaw in this example at least"><a href="#t1465651491000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:24:51</span>                conaw </span><span>in this example at least</span></div><div id="t1465651671000053" t="2016-06-11 13:27:51 nathanmarz @conaw: not reproducing your [ALL LAST] vs. MAP-VALS"><a href="#t1465651671000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:27:51</span>           nathanmarz </span><span>@conaw: not reproducing your [ALL LAST] vs. MAP-VALS</span></div><div id="t1465651702000054" t="2016-06-11 13:28:22 codonnell I&apos;m not sure how those are working with plain count. Shouldn&apos;t the transforming function get passed two values?"><a href="#t1465651702000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:28:22</span>            codonnell </span><span>I&apos;m not sure how those are working with plain count. Shouldn&apos;t the transforming function get passed two values?</span></div><div id="t1465651719000055" t="2016-06-11 13:28:39 codonnell I get an exception that count is passed two values."><a href="#t1465651719000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:28:39</span>            codonnell </span><span>I get an exception that count is passed two values.</span></div><div id="t1465651740000056" t="2016-06-11 13:29:00 nathanmarz it shouldn&apos;t be working but it looks like clojurescript doesn&apos;t throw an arity exception"><a href="#t1465651740000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:29:00</span>           nathanmarz </span><span>it shouldn&apos;t be working but it looks like clojurescript doesn&apos;t throw an arity exception</span></div><div id="t1465651748000057" t="2016-06-11 13:29:08 nathanmarz it just ignores args beyond the first"><a href="#t1465651748000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:29:08</span>           nathanmarz </span><span>it just ignores args beyond the first</span></div><div id="t1465652144000060" t="2016-06-11 13:35:44 conaw either way, why would I be getting 0 back from the map vals transform"><a href="#t1465652144000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:35:44</span>                conaw </span><span>either way, why would I be getting 0 back from the map vals transform</span></div><div id="t1465652162000061" t="2016-06-11 13:36:02 conaw this is the exact code I’m running  (transform [ALL LAST (collect ALL (must :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})


(transform [MAP-VALS (sp/collect ALL (pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
"><a href="#t1465652162000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:36:02</span>                conaw </span><span>this is the exact code I’m running </span><pre>(transform [ALL LAST (collect ALL (must :foo))]
        count
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})


(transform [MAP-VALS (sp/collect ALL (pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
</pre></div><div id="t1465652172000062" t="2016-06-11 13:36:12 conaw using specter 0.11.2"><a href="#t1465652172000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:36:12</span>                conaw </span><span>using specter 0.11.2</span></div><div id="t1465652217000063" t="2016-06-11 13:36:57 conaw (transform [ALL LAST (collect ALL (must :foo))]
        (fn [a _] (count a))
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
"><a href="#t1465652217000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:36:57</span>                conaw </span><pre>(transform [ALL LAST (collect ALL (must :foo))]
        (fn [a _] (count a))
    {:a [{:foo 1} {:bar 3} {:foo 4}]
     :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
</pre></div><div id="t1465652223000064" t="2016-06-11 13:37:03 conaw this also returns expected value"><a href="#t1465652223000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:37:03</span>                conaw </span><span>this also returns expected value</span></div><div id="t1465652231000065" t="2016-06-11 13:37:11 conaw just MAP-VALS that doesn&apos;t"><a href="#t1465652231000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:37:11</span>                conaw </span><span>just MAP-VALS that doesn&apos;t</span></div><div id="t1465652241000066" t="2016-06-11 13:37:21 nathanmarz cljs.user=&gt; 
(transform [s/MAP-VALS (s/collect s/ALL (s/pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
{:a 2, :b 3}
"><a href="#t1465652241000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:37:21</span>           nathanmarz </span><pre>cljs.user=&gt; 
(transform [s/MAP-VALS (s/collect s/ALL (s/pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
{:a 2, :b 3}
</pre></div><div id="t1465652264000067" t="2016-06-11 13:37:44 nathanmarz cljs.user=&gt; 
(transform [s/MAP-VALS (s/collect s/ALL (s/must :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
{:a 2, :b 3}
"><a href="#t1465652264000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:37:44</span>           nathanmarz </span><pre>cljs.user=&gt; 
(transform [s/MAP-VALS (s/collect s/ALL (s/must :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
{:a 2, :b 3}
</pre></div><div id="t1465652307000068" t="2016-06-11 13:38:27 conaw yeah, that’s what I’m running"><a href="#t1465652307000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:38:27</span>                conaw </span><span>yeah, that’s what I’m running</span></div><div id="t1465652309000069" t="2016-06-11 13:38:29 conaw getting 0"><a href="#t1465652309000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:38:29</span>                conaw </span><span>getting 0</span></div><div id="t1465652313000070" t="2016-06-11 13:38:33 conaw weird"><a href="#t1465652313000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:38:33</span>                conaw </span><span>weird</span></div><div id="t1465652317000071" t="2016-06-11 13:38:37 nathanmarz are you redefining MAP-VALS?"><a href="#t1465652317000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:38:37</span>           nathanmarz </span><span>are you redefining MAP-VALS?</span></div><div id="t1465652321000072" t="2016-06-11 13:38:41 conaw nope"><a href="#t1465652321000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:38:41</span>                conaw </span><span>nope</span></div><div id="t1465652343000073" t="2016-06-11 13:39:03 nathanmarz are you doing it from a fresh repl?"><a href="#t1465652343000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:39:03</span>           nathanmarz </span><span>are you doing it from a fresh repl?</span></div><div id="t1465652350000074" t="2016-06-11 13:39:10 conaw just did a lein clean"><a href="#t1465652350000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:39:10</span>                conaw </span><span>just did a lein clean</span></div><div id="t1465652354000075" t="2016-06-11 13:39:14 conaw and started repl fresh"><a href="#t1465652354000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:39:14</span>                conaw </span><span>and started repl fresh</span></div><div id="t1465652384000077" t="2016-06-11 13:39:44 nathanmarz (require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform]])

(transform [s/MAP-VALS (s/collect s/ALL (s/pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
"><a href="#t1465652384000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:39:44</span>           nathanmarz </span><pre>(require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform]])

(transform [s/MAP-VALS (s/collect s/ALL (s/pred :foo))]
           (fn [a _] (count a))
           {:a [{:foo 1} {:bar 3} {:foo 4}]
            :b [{:foo 1} {:bar 3 :foo 4} {:foo 4}]})
</pre></div><div id="t1465652390000078" t="2016-06-11 13:39:50 nathanmarz and that exact code returns 0?"><a href="#t1465652390000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:39:50</span>           nathanmarz </span><span>and that exact code returns 0?</span></div><div id="t1465652400000080" t="2016-06-11 13:40:00 conaw indeed"><a href="#t1465652400000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:40:00</span>                conaw </span><span>indeed</span></div><div id="t1465652456000081" t="2016-06-11 13:40:56 nathanmarz doesn&apos;t make any sense"><a href="#t1465652456000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:40:56</span>           nathanmarz </span><span>doesn&apos;t make any sense</span></div><div id="t1465652469000082" t="2016-06-11 13:41:09 nathanmarz you&apos;ll need to put up a repo and instructions to reproduce it"><a href="#t1465652469000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:41:09</span>           nathanmarz </span><span>you&apos;ll need to put up a repo and instructions to reproduce it</span></div><div id="t1465652506000083" t="2016-06-11 13:41:46 nathanmarz oh one more idea"><a href="#t1465652506000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:41:46</span>           nathanmarz </span><span>oh one more idea</span></div><div id="t1465652509000084" t="2016-06-11 13:41:49 nathanmarz what version of cljs?"><a href="#t1465652509000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:41:49</span>           nathanmarz </span><span>what version of cljs?</span></div><div id="t1465652539000085" t="2016-06-11 13:42:19 conaw 1.9.14"><a href="#t1465652539000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:42:19</span>                conaw </span><span>1.9.14</span></div><div id="t1465652589000086" t="2016-06-11 13:43:09 conaw I’ve been using specter and spec together"><a href="#t1465652589000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:43:09</span>                conaw </span><span>I’ve been using specter and spec together</span></div><div id="t1465652644000087" t="2016-06-11 13:44:04 nathanmarz what version of clojure are you pairing that with?"><a href="#t1465652644000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:44:04</span>           nathanmarz </span><span>what version of clojure are you pairing that with?</span></div><div id="t1465652649000088" t="2016-06-11 13:44:09 nathanmarz 1.9.0-alpha4?"><a href="#t1465652649000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:44:09</span>           nathanmarz </span><span>1.9.0-alpha4?</span></div><div id="t1465652653000089" t="2016-06-11 13:44:13 conaw alpha3"><a href="#t1465652653000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:44:13</span>                conaw </span><span>alpha3</span></div><div id="t1465652669000090" t="2016-06-11 13:44:29 conaw are you on more recent?"><a href="#t1465652669000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:44:29</span>                conaw </span><span>are you on more recent?</span></div><div id="t1465652788000091" t="2016-06-11 13:46:28 nathanmarz i just tried on those exact versions and it works fine"><a href="#t1465652788000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:46:28</span>           nathanmarz </span><span>i just tried on those exact versions and it works fine</span></div><div id="t1465652795000092" t="2016-06-11 13:46:35 nathanmarz so yea, need a repo to see what&apos;s going on"><a href="#t1465652795000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">13:46:35</span>           nathanmarz </span><span>so yea, need a repo to see what&apos;s going on</span></div><div id="t1465653691000093" t="2016-06-11 14:01:31 luxbock thanks @nathanmarz"><a href="#t1465653691000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:01:31</span>              luxbock </span><span>thanks @nathanmarz</span></div><div id="t1465653710000094" t="2016-06-11 14:01:50 conaw @luxbock: map-vals works fine for you right?"><a href="#t1465653710000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:01:50</span>                conaw </span><span>@luxbock: map-vals works fine for you right?</span></div><div id="t1465653760000095" t="2016-06-11 14:02:40 luxbock @conaw, I need to upgrade to check"><a href="#t1465653760000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:02:40</span>              luxbock </span><span>@conaw, I need to upgrade to check</span></div><div id="t1465654202000096" t="2016-06-11 14:10:02 conaw @nathanmarz: must be something on my end, created a new clean project and got it working fine"><a href="#t1465654202000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:10:02</span>                conaw </span><span>@nathanmarz: must be something on my end, created a new clean project and got it working fine</span></div><div id="t1465655281000097" t="2016-06-11 14:28:01 conaw this is what I get back from (transform MAP-VALS inc {:a 1 :b 2})

&quot;{:a 1, :b 2}1”"><a href="#t1465655281000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:28:01</span>                conaw </span><pre>this is what I get back from (transform MAP-VALS inc {:a 1 :b 2})

&quot;{:a 1, :b 2}1”</pre></div><div id="t1465655326000098" t="2016-06-11 14:28:46 conaw I’m getting that in a file where the ONLY thing I’m loading in is specter"><a href="#t1465655326000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:28:46</span>                conaw </span><span>I’m getting that in a file where the ONLY thing I’m loading in is specter</span></div><div id="t1465655335000099" t="2016-06-11 14:28:55 conaw and the only function is that"><a href="#t1465655335000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:28:55</span>                conaw </span><span>and the only function is that</span></div><div id="t1465655395000100" t="2016-06-11 14:29:55 conaw also strange that this is the only part of specter that’s giving me weird results"><a href="#t1465655395000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">14:29:55</span>                conaw </span><span>also strange that this is the only part of specter that’s giving me weird results</span></div><div id="t1465659723000101" t="2016-06-11 15:42:03 luxbock ah yeah works fine for me"><a href="#t1465659723000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">15:42:03</span>              luxbock </span><span>ah yeah works fine for me</span></div><div id="t1465684311000108" t="2016-06-11 22:31:51 codonnell Does anyone know how subselect is meant to be used?"><a href="#t1465684311000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">22:31:51</span>            codonnell </span><span>Does anyone know how subselect is meant to be used?</span></div><div id="t1465684702000110" t="2016-06-11 22:38:22 eraserhd I’ve just published a library that has specter paths for working with formatted EDN and clojure code:  https://github.com/maitria/specter-edn"><a href="#t1465684702000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">22:38:22</span>             eraserhd </span><span>I’ve just published a library that has specter paths for working with formatted EDN and clojure code: </span><a href="https://github.com/maitria/specter-edn" target="_blank">https://github.com/maitria/specter-edn</a></div><div id="t1465684734000112" t="2016-06-11 22:38:54 eraserhd It navigates to parsed S-expressions, but re-inserts whitespace and comments."><a href="#t1465684734000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">22:38:54</span>             eraserhd </span><span>It navigates to parsed S-expressions, but re-inserts whitespace and comments.</span></div><div id="t1465688822000113" t="2016-06-11 23:47:02 nathanmarz @codonnell:  subselect  navigates you to the elements in the given path and lets you manipulate them as a sequence, but transformations will be applied back at the original locations"><a href="#t1465688822000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">23:47:02</span>           nathanmarz </span><span>@codonnell: </span><code>subselect</code><span> navigates you to the elements in the given path and lets you manipulate them as a sequence, but transformations will be applied back at the original locations</span></div><div id="t1465688846000114" t="2016-06-11 23:47:26 nathanmarz (transform (subselect (walker number?) even?)
  reverse
  [1 [[[2]] 3] 5 [6 [7 8]] 10])
;; =&gt; [1 [[[10]] 3] 5 [8 [7 6]] 2]
"><a href="#t1465688846000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">23:47:26</span>           nathanmarz </span><pre>(transform (subselect (walker number?) even?)
  reverse
  [1 [[[2]] 3] 5 [6 [7 8]] 10])
;; =&gt; [1 [[[10]] 3] 5 [8 [7 6]] 2]
</pre></div><div id="t1465689009000115" t="2016-06-11 23:50:09 nathanmarz @eraserhd: very cool!"><a href="#t1465689009000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-11</span> <span class="t" onclick="H(this)">23:50:09</span>           nathanmarz </span><span>@eraserhd: very cool!</span></div><div id="t1465689838000116" t="2016-06-12 00:03:58 codonnell @nathanmarz: ok, so it&apos;s a more general version of pathed functions like srange and filterer"><a href="#t1465689838000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">00:03:58</span>            codonnell </span><span>@nathanmarz: ok, so it&apos;s a more general version of pathed functions like srange and filterer</span></div><div id="t1465689843000117" t="2016-06-12 00:04:03 codonnell thanks for the response"><a href="#t1465689843000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">00:04:03</span>            codonnell </span><span>thanks for the response</span></div><div id="t1465689847000118" t="2016-06-12 00:04:07 codonnell the example was very helpful"><a href="#t1465689847000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">00:04:07</span>            codonnell </span><span>the example was very helpful</span></div><div id="t1465698309000122" t="2016-06-12 02:25:09 nathanmarz @codonnell: It&apos;s a generalization of filterer but not of srange"><a href="#t1465698309000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:25:09</span>           nathanmarz </span><span>@codonnell: It&apos;s a generalization of filterer but not of srange</span></div><div id="t1465698339000123" t="2016-06-12 02:25:39 nathanmarz filterer is defined as (subselect ALL (selected? path))"><a href="#t1465698339000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:25:39</span>           nathanmarz </span><span>filterer is defined as (subselect ALL (selected? path))</span></div><div id="t1465698385000124" t="2016-06-12 02:26:25 nathanmarz the expected transformed sequence for subselect is expected to remain the same size, with each index referring to a particular location in the original structure"><a href="#t1465698385000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:26:25</span>           nathanmarz </span><span>the expected transformed sequence for subselect is expected to remain the same size, with each index referring to a particular location in the original structure</span></div><div id="t1465698408000125" t="2016-06-12 02:26:48 nathanmarz the transformed sequence for srange can be of any size and will splice back into the original sequence to replace the original subsequence"><a href="#t1465698408000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:26:48</span>           nathanmarz </span><span>the transformed sequence for srange can be of any size and will splice back into the original sequence to replace the original subsequence</span></div><div id="t1465699169000126" t="2016-06-12 02:39:29 codonnell @nathanmarz: that makes sense."><a href="#t1465699169000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:39:29</span>            codonnell </span><span>@nathanmarz: that makes sense.</span></div><div id="t1465699443000127" t="2016-06-12 02:44:03 codonnell @nathanmarz: I put up my notes and examples as a github wiki page at  https://github.com/codonnell/specter/wiki/List-of-Navigators . It could serve as a starting point for navigator reference documentation; you&apos;re welcome to copy any of it that you&apos;d like."><a href="#t1465699443000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">02:44:03</span>            codonnell </span><span>@nathanmarz: I put up my notes and examples as a github wiki page at </span><a href="https://github.com/codonnell/specter/wiki/List-of-Navigators" target="_blank">https://github.com/codonnell/specter/wiki/List-of-Navigators</a><span>. It could serve as a starting point for navigator reference documentation; you&apos;re welcome to copy any of it that you&apos;d like.</span></div><div id="t1465708892000129" t="2016-06-12 05:21:32 aengelberg I like your wiki page because every navigator has a few examples. I&apos;m hoping Specter&apos;s official docs will be like that eventually."><a href="#t1465708892000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">05:21:32</span>           aengelberg </span><span>I like your wiki page because every navigator has a few examples. I&apos;m hoping Specter&apos;s official docs will be like that eventually.</span></div><div id="t1465737836000138" t="2016-06-12 13:23:56 nathanmarz @codonnell: That&apos;s great, I&apos;d like to get that merged into the official docs at some point"><a href="#t1465737836000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:23:56</span>           nathanmarz </span><span>@codonnell: That&apos;s great, I&apos;d like to get that merged into the official docs at some point</span></div><div id="t1465737865000139" t="2016-06-12 13:24:25 nathanmarz I made some modifications for things that were implementation details and not promised to have that exact behavior in future versions"><a href="#t1465737865000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:24:25</span>           nathanmarz </span><span>I made some modifications for things that were implementation details and not promised to have that exact behavior in future versions</span></div><div id="t1465737903000140" t="2016-06-12 13:25:03 nathanmarz For example, in many parts it said &quot;returns a lazy sequence when used in a select&quot;, and that behavior is already completely different in 0.12.0"><a href="#t1465737903000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:25:03</span>           nathanmarz </span><span>For example, in many parts it said &quot;returns a lazy sequence when used in a select&quot;, and that behavior is already completely different in 0.12.0</span></div><div id="t1465737944000141" t="2016-06-12 13:25:44 nathanmarz As for  params-reset , that&apos;s used to make a recursive path that requires parameters"><a href="#t1465737944000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:25:44</span>           nathanmarz </span><span>As for </span><code>params-reset</code><span>, that&apos;s used to make a recursive path that requires parameters</span></div><div id="t1465737972000142" t="2016-06-12 13:26:12 nathanmarz by wrapping the recursive call in  params-reset , it tells the recursive navigation to use the same parameters"><a href="#t1465737972000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:26:12</span>           nathanmarz </span><span>by wrapping the recursive call in </span><code>params-reset</code><span>, it tells the recursive navigation to use the same parameters</span></div><div id="t1465738016000143" t="2016-06-12 13:26:56 nathanmarz e.g.
 (declarepath MyWalker [k])
(providepath MyWalker
  (stay-then-continue must (params-reset MyWalker)))

(select (MyWalker :a) {:a {:a {:b 2}}})
;; =&gt; [{:a {:a {:b 2}}} {:a {:b 2}} {:b 2}]
"><a href="#t1465738016000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:26:56</span>           nathanmarz </span><span>e.g.
</span><pre>(declarepath MyWalker [k])
(providepath MyWalker
  (stay-then-continue must (params-reset MyWalker)))

(select (MyWalker :a) {:a {:a {:b 2}}})
;; =&gt; [{:a {:a {:b 2}}} {:a {:b 2}} {:b 2}]
</pre></div><div id="t1465739272000147" t="2016-06-12 13:47:52 nathanmarz I merged it into the Specter wiki:  https://github.com/nathanmarz/specter/wiki/List-of-Navigators"><a href="#t1465739272000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">13:47:52</span>           nathanmarz </span><span>I merged it into the Specter wiki: </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a></div><div id="t1465743032000150" t="2016-06-12 14:50:32 luxbock https://github.com/nathanmarz/specter/issues/123"><a href="#t1465743032000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">14:50:32</span>              luxbock </span><a href="https://github.com/nathanmarz/specter/issues/123" target="_blank">https://github.com/nathanmarz/specter/issues/123</a></div><div id="t1465743540000154" t="2016-06-12 14:59:00 rauh I like it, but PLEASE don&apos;t introduce anymore breaking changes"><a href="#t1465743540000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">14:59:00</span>                 rauh </span><span>I like it, but PLEASE don&apos;t introduce anymore breaking changes</span></div><div id="t1465743569000155" t="2016-06-12 14:59:29 rauh It&apos;s such a pain, I can&apos;t currently upgrade and I&apos;m stuck with an older version since the breaking macros changes."><a href="#t1465743569000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">14:59:29</span>                 rauh </span><span>It&apos;s such a pain, I can&apos;t currently upgrade and I&apos;m stuck with an older version since the breaking macros changes.</span></div><div id="t1465744496000156" t="2016-06-12 15:14:56 nathanmarz @rauh breaking changes are only done when they are necessary to enable very significant improvements"><a href="#t1465744496000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:14:56</span>           nathanmarz </span><span>@rauh breaking changes are only done when they are necessary to enable very significant improvements</span></div><div id="t1465744547000157" t="2016-06-12 15:15:47 nathanmarz what&apos;s preventing you from upgrading and making the appropriate updates?"><a href="#t1465744547000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:15:47</span>           nathanmarz </span><span>what&apos;s preventing you from upgrading and making the appropriate updates?</span></div><div id="t1465745176000159" t="2016-06-12 15:26:16 rauh @nathanmarz: I can&apos;t upgrade since midje pulls in an older specter"><a href="#t1465745176000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:26:16</span>                 rauh </span><span>@nathanmarz: I can&apos;t upgrade since midje pulls in an older specter</span></div><div id="t1465745396000160" t="2016-06-12 15:29:56 nathanmarz @rauh yea, that&apos;s unfortunate"><a href="#t1465745396000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:29:56</span>           nathanmarz </span><span>@rauh yea, that&apos;s unfortunate</span></div><div id="t1465745448000161" t="2016-06-12 15:30:48 rauh Not the end of the world, but specter is getting to the point (1100 gh stars, 57k clojar pulls) that it should be careful if the breaking changes are needed."><a href="#t1465745448000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:30:48</span>                 rauh </span><span>Not the end of the world, but specter is getting to the point (1100 gh stars, 57k clojar pulls) that it should be careful if the breaking changes are needed.</span></div><div id="t1465745484000163" t="2016-06-12 15:31:24 nathanmarz like I said, I only make breaking changes when the benefits are very significant"><a href="#t1465745484000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:31:24</span>           nathanmarz </span><span>like I said, I only make breaking changes when the benefits are very significant</span></div><div id="t1465745485000164" t="2016-06-12 15:31:25 rauh I agree that the macros was a change that was worth it."><a href="#t1465745485000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:31:25</span>                 rauh </span><span>I agree that the macros was a change that was worth it.</span></div><div id="t1465745504000165" t="2016-06-12 15:31:44 nathanmarz 0.12.0 will have another breaking change, but it only affects projects that define their own navigators"><a href="#t1465745504000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:31:44</span>           nathanmarz </span><span>0.12.0 will have another breaking change, but it only affects projects that define their own navigators</span></div><div id="t1465745562000166" t="2016-06-12 15:32:42 rauh Well I blame  suchwow  (used by midje) more for that since they use specter twice! (Two simple  transform )"><a href="#t1465745562000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:32:42</span>                 rauh </span><span>Well I blame </span><code>suchwow</code><span> (used by midje) more for that since they use specter twice! (Two simple </span><code>transform</code><span>)</span></div><div id="t1465745598000167" t="2016-06-12 15:33:18 nathanmarz Ah, well the 0.12.0 change only affects the select path"><a href="#t1465745598000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:33:18</span>           nathanmarz </span><span>Ah, well the 0.12.0 change only affects the select path</span></div><div id="t1465746189000170" t="2016-06-12 15:43:09 luxbock is there a better way to write the following:  https://gist.github.com/luxbock/93d61ccd38b340a99dfd3a93682b5f6c"><a href="#t1465746189000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:43:09</span>              luxbock </span><span>is there a better way to write the following: </span><a href="https://gist.github.com/luxbock/93d61ccd38b340a99dfd3a93682b5f6c" target="_blank">https://gist.github.com/luxbock/93d61ccd38b340a99dfd3a93682b5f6c</a></div><div id="t1465746206000171" t="2016-06-12 15:43:26 luxbock my actual use case is slightly more complicated"><a href="#t1465746206000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:43:26</span>              luxbock </span><span>my actual use case is slightly more complicated</span></div><div id="t1465746560000172" t="2016-06-12 15:49:20 nathanmarz (let [foo-map {:foo #{1 2 3} :bar #{5 6}}]
  (transform [ALL
              (collect-one FIRST (view #(get foo-map %)))
              LAST
              ALL
              ]
    (fn [aset v]
      (if (aset v)
        (str v)
        (inc v)
        ))
    {:foo [1 2 4 5]
     :bar [2 3 5 6]}
    ))
"><a href="#t1465746560000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:49:20</span>           nathanmarz </span><pre>(let [foo-map {:foo #{1 2 3} :bar #{5 6}}]
  (transform [ALL
              (collect-one FIRST (view #(get foo-map %)))
              LAST
              ALL
              ]
    (fn [aset v]
      (if (aset v)
        (str v)
        (inc v)
        ))
    {:foo [1 2 4 5]
     :bar [2 3 5 6]}
    ))
</pre></div><div id="t1465746705000173" t="2016-06-12 15:51:45 luxbock @nathanmarz: nice, I&apos;ll have to get familiar with  view `"><a href="#t1465746705000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">15:51:45</span>              luxbock </span><span>@nathanmarz: nice, I&apos;ll have to get familiar with </span><code>view</code><span>`</span></div><div id="t1465747739000174" t="2016-06-12 16:08:59 codonnell @nathanmarz: I added a description and examples for  params-reset  at  https://github.com/codonnell/specter/wiki/List-of-Navigators#params-reset"><a href="#t1465747739000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:08:59</span>            codonnell </span><span>@nathanmarz: I added a description and examples for </span><code>params-reset</code><span> at </span><a href="https://github.com/codonnell/specter/wiki/List-of-Navigators#params-reset" target="_blank">https://github.com/codonnell/specter/wiki/List-of-Navigators#params-reset</a></div><div id="t1465747784000176" t="2016-06-12 16:09:44 codonnell Thanks for removing the implementation detail."><a href="#t1465747784000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:09:44</span>            codonnell </span><span>Thanks for removing the implementation detail.</span></div><div id="t1465748172000177" t="2016-06-12 16:16:12 codonnell Is there a reason  params-reset  takes a single path argument rather than a varargs like most of the other pathed functions?"><a href="#t1465748172000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:16:12</span>            codonnell </span><span>Is there a reason </span><code>params-reset</code><span> takes a single path argument rather than a varargs like most of the other pathed functions?</span></div><div id="t1465748350000178" t="2016-06-12 16:19:10 nathanmarz @codonnell: It&apos;s only intended for the particular use case of recursive parameterized navigators"><a href="#t1465748350000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:19:10</span>           nathanmarz </span><span>@codonnell: It&apos;s only intended for the particular use case of recursive parameterized navigators</span></div><div id="t1465748393000179" t="2016-06-12 16:19:53 nathanmarz your description for params-reset is a little inaccurate – it actually decrements position in params array by the number of parameters that navigator requires"><a href="#t1465748393000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:19:53</span>           nathanmarz </span><span>your description for params-reset is a little inaccurate – it actually decrements position in params array by the number of parameters that navigator requires</span></div><div id="t1465748407000180" t="2016-06-12 16:20:07 nathanmarz where that&apos;s important is a path like  [must MyWalker]"><a href="#t1465748407000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:20:07</span>           nathanmarz </span><span>where that&apos;s important is a path like </span><code>[must MyWalker]</code></div><div id="t1465748423000181" t="2016-06-12 16:20:23 nathanmarz will merge in and fix description"><a href="#t1465748423000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:20:23</span>           nathanmarz </span><span>will merge in and fix description</span></div><div id="t1465748578000182" t="2016-06-12 16:22:58 nathanmarz https://github.com/nathanmarz/specter/wiki/List-of-Navigators#params-reset"><a href="#t1465748578000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:22:58</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#params-reset" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#params-reset</a></div><div id="t1465748794000184" t="2016-06-12 16:26:34 codonnell The new description makes perfect sense."><a href="#t1465748794000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:26:34</span>            codonnell </span><span>The new description makes perfect sense.</span></div><div id="t1465748849000185" t="2016-06-12 16:27:29 nathanmarz By the way, really appreciate the documentation contribution – that&apos;s Specter&apos;s biggest problem at the moment"><a href="#t1465748849000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:27:29</span>           nathanmarz </span><span>By the way, really appreciate the documentation contribution – that&apos;s Specter&apos;s biggest problem at the moment</span></div><div id="t1465748919000186" t="2016-06-12 16:28:39 codonnell You&apos;re most welcome."><a href="#t1465748919000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:28:39</span>            codonnell </span><span>You&apos;re most welcome.</span></div><div id="t1465749321000187" t="2016-06-12 16:35:21 conaw @codonnell:  👏"><a href="#t1465749321000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:35:21</span>                conaw </span><span>@codonnell: </span><b>👏</b></div><div id="t1465749518000188" t="2016-06-12 16:38:38 codonnell @nathanmarz: I just realized every all-caps link and link with a  &gt;  in it was broken. It&apos;s fixed on my wiki. (Oops)"><a href="#t1465749518000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:38:38</span>            codonnell </span><span>@nathanmarz: I just realized every all-caps link and link with a </span><code>&gt;</code><span> in it was broken. It&apos;s fixed on my wiki. (Oops)</span></div><div id="t1465749629000189" t="2016-06-12 16:40:29 conaw Also, discovered the map-vals bug earlier wasn’t a bug, just my own insufficient cleaning of compiled javascript when updating specter versions."><a href="#t1465749629000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:40:29</span>                conaw </span><span>Also, discovered the map-vals bug earlier wasn’t a bug, just my own insufficient cleaning of compiled javascript when updating specter versions.</span></div><div id="t1465749711000190" t="2016-06-12 16:41:51 nathanmarz @codonnell: merged, thanks"><a href="#t1465749711000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:41:51</span>           nathanmarz </span><span>@codonnell: merged, thanks</span></div><div id="t1465749722000191" t="2016-06-12 16:42:02 nathanmarz @conaw: cool, good to know"><a href="#t1465749722000191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-12</span> <span class="t" onclick="H(this)">16:42:02</span>           nathanmarz </span><span>@conaw: cool, good to know</span></div><div id="t1465846749000211" t="2016-06-13 19:39:09 nathanmarz @mfikes: do you think it&apos;s possible to redo your  macroexpand&apos;  implementation in terms of  cljs.analyzer/macroexpand-1 ?"><a href="#t1465846749000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:39:09</span>           nathanmarz </span><span>@mfikes: do you think it&apos;s possible to redo your </span><code>macroexpand&apos;</code><span> implementation in terms of </span><code>cljs.analyzer/macroexpand-1</code><span>?</span></div><div id="t1465846770000212" t="2016-06-13 19:39:30 mfikes Sure… I think one just calls the other recursively or somesuch"><a href="#t1465846770000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:39:30</span>               mfikes </span><span>Sure… I think one just calls the other recursively or somesuch</span></div><div id="t1465846808000213" t="2016-06-13 19:40:08 nathanmarz does it still need to do the eval stuff?"><a href="#t1465846808000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:40:08</span>           nathanmarz </span><span>does it still need to do the eval stuff?</span></div><div id="t1465846880000214" t="2016-06-13 19:41:20 nathanmarz basically I need a macroexpand-all implementation for non-bootstrap clojurescript that&apos;s distinct from the clojure version of macroexpand-all, and I want to see if the bootstrap and non-bootstrap impls can be the same"><a href="#t1465846880000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:41:20</span>           nathanmarz </span><span>basically I need a macroexpand-all implementation for non-bootstrap clojurescript that&apos;s distinct from the clojure version of macroexpand-all, and I want to see if the bootstrap and non-bootstrap impls can be the same</span></div><div id="t1465846906000215" t="2016-06-13 19:41:46 mfikes Hmm… I think the need to eval was simply to cope with not having the form being directly passed to macroexpand. (looking at my post  http://blog.fikesfarm.com/posts/2015-09-05-runtime-macroexpand.html )"><a href="#t1465846906000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:41:46</span>               mfikes </span><span>Hmm… I think the need to eval was simply to cope with not having the form being directly passed to macroexpand. (looking at my post </span><a href="http://blog.fikesfarm.com/posts/2015-09-05-runtime-macroexpand.html" target="_blank">http://blog.fikesfarm.com/posts/2015-09-05-runtime-macroexpand.html</a><span>)</span></div><div id="t1465847036000216" t="2016-06-13 19:43:56 mfikes If there is a use case that you’d like it to work for, I wouldn’t mind taking a look perhaps later on tonight to see if it can be made to work in bootstrap."><a href="#t1465847036000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:43:56</span>               mfikes </span><span>If there is a use case that you’d like it to work for, I wouldn’t mind taking a look perhaps later on tonight to see if it can be made to work in bootstrap.</span></div><div id="t1465847102000217" t="2016-06-13 19:45:02 nathanmarz i&apos;ll get it working for non-boostrap cljs, and then I&apos;ll ping you to see if the new impl works for bootstrap"><a href="#t1465847102000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:45:02</span>           nathanmarz </span><span>i&apos;ll get it working for non-boostrap cljs, and then I&apos;ll ping you to see if the new impl works for bootstrap</span></div><div id="t1465847121000218" t="2016-06-13 19:45:21 nathanmarz otherwise specter will just use a different macroexpand-all for each of the 3 cases"><a href="#t1465847121000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:45:21</span>           nathanmarz </span><span>otherwise specter will just use a different macroexpand-all for each of the 3 cases</span></div><div id="t1465847157000219" t="2016-06-13 19:45:57 mfikes OK… yeah, and I just saw the thread in #C03S1L9DN  🙂"><a href="#t1465847157000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:45:57</span>               mfikes </span><span>OK… yeah, and I just saw the thread in #C03S1L9DN </span><b>🙂</b></div><div id="t1465847226000220" t="2016-06-13 19:47:06 mfikes By the way, Specter is the only major lib I’m aware of that is straddling all 3 targets. It feels like it ain’t easy to do, but it can be done.  🙂"><a href="#t1465847226000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:47:06</span>               mfikes </span><span>By the way, Specter is the only major lib I’m aware of that is straddling all 3 targets. It feels like it ain’t easy to do, but it can be done. </span><b>🙂</b></div><div id="t1465847234000221" t="2016-06-13 19:47:14 nathanmarz indeed"><a href="#t1465847234000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:47:14</span>           nathanmarz </span><span>indeed</span></div><div id="t1465847286000222" t="2016-06-13 19:48:06 nathanmarz sometimes I yell out the occasional profanity, but it&apos;s doable"><a href="#t1465847286000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:48:06</span>           nathanmarz </span><span>sometimes I yell out the occasional profanity, but it&apos;s doable</span></div><div id="t1465847319000223" t="2016-06-13 19:48:39 mfikes Hah. As you said, profanity leads to code these days."><a href="#t1465847319000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">19:48:39</span>               mfikes </span><span>Hah. As you said, profanity leads to code these days.</span></div><div id="t1465853075000227" t="2016-06-13 21:24:35 nathanmarz @mfikes: alright, finally got it working with this commit  https://github.com/nathanmarz/specter/commit/8c128816f58d8e2188a8a19b7d336dc5a128f7d3"><a href="#t1465853075000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">21:24:35</span>           nathanmarz </span><span>@mfikes: alright, finally got it working with this commit </span><a href="https://github.com/nathanmarz/specter/commit/8c128816f58d8e2188a8a19b7d336dc5a128f7d3" target="_blank">https://github.com/nathanmarz/specter/commit/8c128816f58d8e2188a8a19b7d336dc5a128f7d3</a></div><div id="t1465853083000229" t="2016-06-13 21:24:43 nathanmarz let me know if it&apos;s still bootstrap-compatible"><a href="#t1465853083000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">21:24:43</span>           nathanmarz </span><span>let me know if it&apos;s still bootstrap-compatible</span></div><div id="t1465854801000230" t="2016-06-13 21:53:21 mfikes @nathanmarz: will do"><a href="#t1465854801000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">21:53:21</span>               mfikes </span><span>@nathanmarz: will do</span></div><div id="t1465855969000231" t="2016-06-13 22:12:49 mfikes @nathanmarz: Gotta run but was at least able to see a problem with  riddley.walk :
 $ planck -c target/specter-0.12.0-SNAPSHOT.jar:/Users/mfikes/.m2/repository/riddley/riddley/0.1.12/riddley-0.1.12.jar
Planck 1.14
ClojureScript 1.9.14
    Docs: (doc function-name-here)
          (find-doc &quot;part-of-name-here&quot;)
  Source: (source function-name-here)
    Exit: Control+D or :cljs/quit or exit or quit
 Results: Stored in vars *1, *2, *3, an exception in *e

cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
No such namespace: riddley.walk, could not locate riddley/walk.cljs, riddley/walk.cljc, or Closure namespace &quot;riddley.walk&quot;
nil
"><a href="#t1465855969000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">22:12:49</span>               mfikes </span><span>@nathanmarz: Gotta run but was at least able to see a problem with </span><code>riddley.walk</code><span>:
</span><pre>$ planck -c target/specter-0.12.0-SNAPSHOT.jar:/Users/mfikes/.m2/repository/riddley/riddley/0.1.12/riddley-0.1.12.jar
Planck 1.14
ClojureScript 1.9.14
    Docs: (doc function-name-here)
          (find-doc &quot;part-of-name-here&quot;)
  Source: (source function-name-here)
    Exit: Control+D or :cljs/quit or exit or quit
 Results: Stored in vars *1, *2, *3, an exception in *e

cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
No such namespace: riddley.walk, could not locate riddley/walk.cljs, riddley/walk.cljc, or Closure namespace &quot;riddley.walk&quot;
nil
</pre></div><div id="t1465861813000232" t="2016-06-13 23:50:13 nathanmarz @mfikes: ok, changed master so that shouldn&apos;t happen anymore with bootstrap"><a href="#t1465861813000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-13</span> <span class="t" onclick="H(this)">23:50:13</span>           nathanmarz </span><span>@mfikes: ok, changed master so that shouldn&apos;t happen anymore with bootstrap</span></div><div id="t1465866211000236" t="2016-06-14 01:03:31 mfikes @nathanmarz: With master, the  transform  operation I typically try works. But, when loading  com.rpl.specter.macros  it complains about the use of  require  and  eval  on lines 448 and 452. I’m wondering, though, is a  transform  call sufficient to cover the new macroexpand code? (I suspect not, given  require  and  eval  being in the code paths that you probably want tested.)"><a href="#t1465866211000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">01:03:31</span>               mfikes </span><span>@nathanmarz: With master, the </span><code>transform</code><span> operation I typically try works. But, when loading </span><code>com.rpl.specter.macros</code><span> it complains about the use of </span><code>require</code><span> and </span><code>eval</code><span> on lines 448 and 452. I’m wondering, though, is a </span><code>transform</code><span> call sufficient to cover the new macroexpand code? (I suspect not, given </span><code>require</code><span> and </span><code>eval</code><span> being in the code paths that you probably want tested.)</span></div><div id="t1465866548000238" t="2016-06-14 01:09:08 mfikes @nathanmarz: Ahh… I found a call that will make it fail in bootstrap:
 cljs.user=&gt; (transform [(filterer odd?) LAST]
       #_=&gt;               inc
       #_=&gt;               [2 1 3 6 9 4 8])
             ⬆
undefined is not an object (evaluating &apos;com.rpl.specter.macros$macros.require.call&apos;) at line 1
"><a href="#t1465866548000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">01:09:08</span>               mfikes </span><span>@nathanmarz: Ahh… I found a call that will make it fail in bootstrap:
</span><pre>cljs.user=&gt; (transform [(filterer odd?) LAST]
       #_=&gt;               inc
       #_=&gt;               [2 1 3 6 9 4 8])
             ⬆
undefined is not an object (evaluating &apos;com.rpl.specter.macros$macros.require.call&apos;) at line 1
</pre></div><div id="t1465866593000239" t="2016-06-14 01:09:53 mfikes (I hear the profanity from here.)"><a href="#t1465866593000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">01:09:53</span>               mfikes </span><span>(I hear the profanity from here.)</span></div><div id="t1465867638000240" t="2016-06-14 01:27:18 mfikes @nathanmarz: It can be made to work in bootstrap by eliminating the  require  and the eval. Perhaps  macros.clj  would need to be converted to  macros.cljx  or somesuch to pull it off. This bit of code worked:
 (defn cljs-macroexpand [env form]
  #_(require &apos;cljs.analyzer)
  ;; need to get the expansion function like this so that 
  ;; this code compiles in a clojure environment where cljs.analyzer
  ;; namespace does not exist
  (let [expand-fn cljs.analyzer/macroexpand-1
        mform (expand-fn env form)]
    (cond (identical? form mform) mform
          (and (seq? mform) (#{&apos;js*} (first mform))) form
          :else (cljs-macroexpand env mform))))
 
and here it is working with those changes: 
 cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
nil
cljs.user=&gt; (require &apos;[com.rpl.specter :refer [filterer LAST]])
nil
cljs.user=&gt; (transform [(filterer odd?) LAST]
       #_=&gt;  inc
       #_=&gt;  [2 1 3 6 9 4 8])
[2 1 3 6 10 4 8]
"><a href="#t1465867638000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">01:27:18</span>               mfikes </span><span>@nathanmarz: It can be made to work in bootstrap by eliminating the </span><code>require</code><span> and the eval. Perhaps </span><code>macros.clj</code><span> would need to be converted to </span><code>macros.cljx</code><span> or somesuch to pull it off. This bit of code worked:
</span><pre>(defn cljs-macroexpand [env form]
  #_(require &apos;cljs.analyzer)
  ;; need to get the expansion function like this so that 
  ;; this code compiles in a clojure environment where cljs.analyzer
  ;; namespace does not exist
  (let [expand-fn cljs.analyzer/macroexpand-1
        mform (expand-fn env form)]
    (cond (identical? form mform) mform
          (and (seq? mform) (#{&apos;js*} (first mform))) form
          :else (cljs-macroexpand env mform))))
</pre><span>
and here it is working with those changes: 
</span><pre>cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
nil
cljs.user=&gt; (require &apos;[com.rpl.specter :refer [filterer LAST]])
nil
cljs.user=&gt; (transform [(filterer odd?) LAST]
       #_=&gt;  inc
       #_=&gt;  [2 1 3 6 9 4 8])
[2 1 3 6 10 4 8]
</pre></div><div id="t1465900100000250" t="2016-06-14 10:28:20 conaw Challenge 
 For all the keys in a map of maps, return a vector that has the key and all of the values of its value,   
so 
 {:keep0 {:ignore :keep1, :ignore1 :keep2}}
-&gt;
[[:keep0 :keep1 :keep2]]

closest I’ve got is

(select [ALL (sp/collect-one sp/FIRST) LAST (sp/subselect MAP-VALS)] nested-map)

which gives me 

[[:keep0 (:keep1 :keep2)]]
"><a href="#t1465900100000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">10:28:20</span>                conaw </span><span>Challenge 
</span><pre>For all the keys in a map of maps, return a vector that has the key and all of the values of its value,   
so 
 {:keep0 {:ignore :keep1, :ignore1 :keep2}}
-&gt;
[[:keep0 :keep1 :keep2]]

closest I’ve got is

(select [ALL (sp/collect-one sp/FIRST) LAST (sp/subselect MAP-VALS)] nested-map)

which gives me 

[[:keep0 (:keep1 :keep2)]]
</pre></div><div id="t1465907463000253" t="2016-06-14 12:31:03 nathanmarz @conaw:  (select [ALL (subselect (multi-path FIRST [LAST MAP-VALS]))] {:keep0 {:ignore :keep1, :ignore1 :keep2}})"><a href="#t1465907463000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:31:03</span>           nathanmarz </span><span>@conaw: </span><code>(select [ALL (subselect (multi-path FIRST [LAST MAP-VALS]))] {:keep0 {:ignore :keep1, :ignore1 :keep2}})</code></div><div id="t1465907550000254" t="2016-06-14 12:32:30 nathanmarz @mfikes: with those changes does this code work?
 (require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform traverse collected?]])

(select [s/VAL (collected? [v] (= v 1)) s/DISPENSE] 1)
"><a href="#t1465907550000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:32:30</span>           nathanmarz </span><span>@mfikes: with those changes does this code work?
</span><pre>(require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform traverse collected?]])

(select [s/VAL (collected? [v] (= v 1)) s/DISPENSE] 1)
</pre></div><div id="t1465907577000255" t="2016-06-14 12:32:57 nathanmarz should return  [1]"><a href="#t1465907577000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:32:57</span>           nathanmarz </span><span>should return </span><code>[1]</code></div><div id="t1465907736000256" t="2016-06-14 12:35:36 mfikes @nathanmarz: Yes, I get  [1]  in Planck, with no warnings with those proposed changes"><a href="#t1465907736000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:35:36</span>               mfikes </span><span>@nathanmarz: Yes, I get </span><code>[1]</code><span> in Planck, with no warnings with those proposed changes</span></div><div id="t1465907808000257" t="2016-06-14 12:36:48 nathanmarz great"><a href="#t1465907808000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:36:48</span>           nathanmarz </span><span>great</span></div><div id="t1465907821000258" t="2016-06-14 12:37:01 nathanmarz should be able to fiddle with the code to get it working on all three platforms"><a href="#t1465907821000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:37:01</span>           nathanmarz </span><span>should be able to fiddle with the code to get it working on all three platforms</span></div><div id="t1465908329000265" t="2016-06-14 12:45:29 nathanmarz @mfikes: ok, made the changes. let me know how it goes"><a href="#t1465908329000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:45:29</span>           nathanmarz </span><span>@mfikes: ok, made the changes. let me know how it goes</span></div><div id="t1465908527000266" t="2016-06-14 12:48:47 mfikes @nathanmarz: Pulled down master of Specter and it’s a go for bootstrap with respect to trying out the  select  above."><a href="#t1465908527000266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:48:47</span>               mfikes </span><span>@nathanmarz: Pulled down master of Specter and it’s a go for bootstrap with respect to trying out the </span><code>select</code><span> above.</span></div><div id="t1465908544000267" t="2016-06-14 12:49:04 nathanmarz awesome"><a href="#t1465908544000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">12:49:04</span>           nathanmarz </span><span>awesome</span></div><div id="t1465938414000277" t="2016-06-14 21:06:54 codonnell @nathanmarz: Continuing my efforts to understand; I wrote up some docs on the  macros  namespace at  https://github.com/codonnell/specter/wiki/List-of-Macros . I don&apos;t have all the macros in there yet and I&apos;m not as confident in the accuracy of my descriptions. Again, it could be a starting point for documentation."><a href="#t1465938414000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:06:54</span>            codonnell </span><span>@nathanmarz: Continuing my efforts to understand; I wrote up some docs on the </span><code>macros</code><span> namespace at </span><a href="https://github.com/codonnell/specter/wiki/List-of-Macros" target="_blank">https://github.com/codonnell/specter/wiki/List-of-Macros</a><span>. I don&apos;t have all the macros in there yet and I&apos;m not as confident in the accuracy of my descriptions. Again, it could be a starting point for documentation.</span></div><div id="t1465940287000279" t="2016-06-14 21:38:07 nathanmarz @codonnell: actually very accurate"><a href="#t1465940287000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:38:07</span>           nathanmarz </span><span>@codonnell: actually very accurate</span></div><div id="t1465940296000280" t="2016-06-14 21:38:16 nathanmarz the only thing I&apos;d change is the example for  defpathedfn"><a href="#t1465940296000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:38:16</span>           nathanmarz </span><span>the only thing I&apos;d change is the example for </span><code>defpathedfn</code></div><div id="t1465940318000281" t="2016-06-14 21:38:38 nathanmarz defpathedfn  is only meant for higher order navigators that take in paths as input"><a href="#t1465940318000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:38:38</span>           nathanmarz </span><code>defpathedfn</code><span> is only meant for higher order navigators that take in paths as input</span></div><div id="t1465940339000282" t="2016-06-14 21:38:59 nathanmarz the  ^:notpath  thing is if they also require a non-path param, for which  transformed  is the only case of that"><a href="#t1465940339000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:38:59</span>           nathanmarz </span><span>the </span><code>^:notpath</code><span> thing is if they also require a non-path param, for which </span><code>transformed</code><span> is the only case of that</span></div><div id="t1465940372000283" t="2016-06-14 21:39:32 nathanmarz making a constructor function for a navigator which converts the constructor params to the navigator params is what  defnavconstructor  is for"><a href="#t1465940372000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:39:32</span>           nathanmarz </span><span>making a constructor function for a navigator which converts the constructor params to the navigator params is what </span><code>defnavconstructor</code><span> is for</span></div><div id="t1465940534000284" t="2016-06-14 21:42:14 nathanmarz I would do that  walk-pred  example like this:
 (defnavconstructor walk-pred
  [p walker]
  [apred]
  (p #(and (integer? %) (apred %))))
"><a href="#t1465940534000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:42:14</span>           nathanmarz </span><span>I would do that </span><code>walk-pred</code><span> example like this:
</span><pre>(defnavconstructor walk-pred
  [p walker]
  [apred]
  (p #(and (integer? %) (apred %))))
</pre></div><div id="t1465940592000285" t="2016-06-14 21:43:12 nathanmarz the difference between this definition and one using defpathedfn is the parameter to navconstructor walk-pred can be completely dynamic, and the path can still be factored/cached"><a href="#t1465940592000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:43:12</span>           nathanmarz </span><span>the difference between this definition and one using defpathedfn is the parameter to navconstructor walk-pred can be completely dynamic, and the path can still be factored/cached</span></div><div id="t1465940933000286" t="2016-06-14 21:48:53 codonnell @nathanmarz: &quot;that itself takes in one or more paths as input&quot; is even in my description (taken from Codox) of  defpathedfn . I&apos;ll remove that example and add your modified version in the to-be written  defnavconstructor . I wasn&apos;t sure of the purpose of  defnavconstructor , but your example makes it clearer."><a href="#t1465940933000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:48:53</span>            codonnell </span><span>@nathanmarz: &quot;that itself takes in one or more paths as input&quot; is even in my description (taken from Codox) of </span><code>defpathedfn</code><span>. I&apos;ll remove that example and add your modified version in the to-be written </span><code>defnavconstructor</code><span>. I wasn&apos;t sure of the purpose of </span><code>defnavconstructor</code><span>, but your example makes it clearer.</span></div><div id="t1465940945000287" t="2016-06-14 21:49:05 codonnell Why is  transformed  not implemented using  defnavconstructor ?"><a href="#t1465940945000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:49:05</span>            codonnell </span><span>Why is </span><code>transformed</code><span> not implemented using </span><code>defnavconstructor</code><span>?</span></div><div id="t1465941021000288" t="2016-06-14 21:50:21 nathanmarz because it takes in a path"><a href="#t1465941021000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:50:21</span>           nathanmarz </span><span>because it takes in a path</span></div><div id="t1465941063000289" t="2016-06-14 21:51:03 nathanmarz navconstructor can only parameterize an existing navigator (either defined via  defnav  or  comp-paths ), it can&apos;t handle threading params into a nested path"><a href="#t1465941063000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:51:03</span>           nathanmarz </span><span>navconstructor can only parameterize an existing navigator (either defined via </span><code>defnav</code><span> or </span><code>comp-paths</code><span>), it can&apos;t handle threading params into a nested path</span></div><div id="t1465941258000290" t="2016-06-14 21:54:18 nathanmarz have you read this post?  https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs"><a href="#t1465941258000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:54:18</span>           nathanmarz </span><span>have you read this post? </span><a href="https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs</a></div><div id="t1465941404000292" t="2016-06-14 21:56:44 codonnell I did, but I should definitely take a second look now that I have a better understanding of how specter operates."><a href="#t1465941404000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:56:44</span>            codonnell </span><span>I did, but I should definitely take a second look now that I have a better understanding of how specter operates.</span></div><div id="t1465941431000293" t="2016-06-14 21:57:11 nathanmarz yea, understanding the mechanics of factoring is the key to understanding these different macros"><a href="#t1465941431000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:57:11</span>           nathanmarz </span><span>yea, understanding the mechanics of factoring is the key to understanding these different macros</span></div><div id="t1465941461000294" t="2016-06-14 21:57:41 nathanmarz it all comes down to the fact that to precompile something you need a completely static path"><a href="#t1465941461000294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:57:41</span>           nathanmarz </span><span>it all comes down to the fact that to precompile something you need a completely static path</span></div><div id="t1465941490000295" t="2016-06-14 21:58:10 nathanmarz specter&apos;s trick of threading parameters later using an array leads to all these different mechanisms for parameterization"><a href="#t1465941490000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:58:10</span>           nathanmarz </span><span>specter&apos;s trick of threading parameters later using an array leads to all these different mechanisms for parameterization</span></div><div id="t1465941591000296" t="2016-06-14 21:59:51 codonnell Thanks for the suggestion. I&apos;ll read through it more carefully before proceeding further with the macro stuff."><a href="#t1465941591000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">21:59:51</span>            codonnell </span><span>Thanks for the suggestion. I&apos;ll read through it more carefully before proceeding further with the macro stuff.</span></div><div id="t1465941609000297" t="2016-06-14 22:00:09 nathanmarz sure thing, happy to answer more questions as they arise"><a href="#t1465941609000297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:00:09</span>           nathanmarz </span><span>sure thing, happy to answer more questions as they arise</span></div><div id="t1465941648000298" t="2016-06-14 22:00:48 codonnell appreciate that"><a href="#t1465941648000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:00:48</span>            codonnell </span><span>appreciate that</span></div><div id="t1465941721000299" t="2016-06-14 22:02:01 nathanmarz the actual code that does the factoring may be helpful as well:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1385"><a href="#t1465941721000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:02:01</span>           nathanmarz </span><span>the actual code that does the factoring may be helpful as well: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1385" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L1385</a></div><div id="t1465941785000301" t="2016-06-14 22:03:05 codonnell &quot;magic-precompilation&quot; lol"><a href="#t1465941785000301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:03:05</span>            codonnell </span><span>&quot;magic-precompilation&quot; lol</span></div><div id="t1465941986000302" t="2016-06-14 22:06:26 codonnell Yeah, this post makes a lot more sense now I&apos;m more familiar."><a href="#t1465941986000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:06:26</span>            codonnell </span><span>Yeah, this post makes a lot more sense now I&apos;m more familiar.</span></div><div id="t1465941987000303" t="2016-06-14 22:06:27 nathanmarz a reflection of my surprise when I first wrote this that this was actually possible  🙂"><a href="#t1465941987000303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:06:27</span>           nathanmarz </span><span>a reflection of my surprise when I first wrote this that this was actually possible </span><b>🙂</b></div><div id="t1465943319000304" t="2016-06-14 22:28:39 codonnell @nathanmarz: Just to confirm.  magic-precompilation  returns the pair of precompiled path and function which sets the late-bound params mentioned in your post, right?"><a href="#t1465943319000304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:28:39</span>            codonnell </span><span>@nathanmarz: Just to confirm. </span><code>magic-precompilation</code><span> returns the pair of precompiled path and function which sets the late-bound params mentioned in your post, right?</span></div><div id="t1465943745000305" t="2016-06-14 22:35:45 nathanmarz @codonnell: yes, though to be completely precise the function returns an array of late-bound params"><a href="#t1465943745000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">22:35:45</span>           nathanmarz </span><span>@codonnell: yes, though to be completely precise the function returns an array of late-bound params</span></div><div id="t1465947017000306" t="2016-06-14 23:30:17 mac Is there a way of passing a vector of paths to multi-path?"><a href="#t1465947017000306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:30:17</span>                  mac </span><span>Is there a way of passing a vector of paths to multi-path?</span></div><div id="t1465947213000307" t="2016-06-14 23:33:33 mac Or an alternative way of  atomically transforming several paths using transform or setval?"><a href="#t1465947213000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:33:33</span>                  mac </span><span>Or an alternative way of  atomically transforming several paths using transform or setval?</span></div><div id="t1465947251000308" t="2016-06-14 23:34:11 nathanmarz you can call  (apply multi-path my-paths)"><a href="#t1465947251000308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:34:11</span>           nathanmarz </span><span>you can call </span><code>(apply multi-path my-paths)</code></div><div id="t1465947268000309" t="2016-06-14 23:34:28 nathanmarz though if you want that to inline factor you should wrap it in this:
 (defpathedfn multi-path* [paths]
  (apply multi-path paths))
"><a href="#t1465947268000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:34:28</span>           nathanmarz </span><span>though if you want that to inline factor you should wrap it in this:
</span><pre>(defpathedfn multi-path* [paths]
  (apply multi-path paths))
</pre></div><div id="t1465947293000310" t="2016-06-14 23:34:53 mac Oh, I thought multi-path was a macro?"><a href="#t1465947293000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:34:53</span>                  mac </span><span>Oh, I thought multi-path was a macro?</span></div><div id="t1465947297000311" t="2016-06-14 23:34:57 nathanmarz actually nvm, it won&apos;t be possible to inline factor that anyway"><a href="#t1465947297000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:34:57</span>           nathanmarz </span><span>actually nvm, it won&apos;t be possible to inline factor that anyway</span></div><div id="t1465947308000312" t="2016-06-14 23:35:08 nathanmarz no it&apos;s a regular function"><a href="#t1465947308000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:35:08</span>           nathanmarz </span><span>no it&apos;s a regular function</span></div><div id="t1465947326000313" t="2016-06-14 23:35:26 nathanmarz hence the  fn  in  defpathedfn"><a href="#t1465947326000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:35:26</span>           nathanmarz </span><span>hence the </span><code>fn</code><span> in </span><code>defpathedfn</code></div><div id="t1465947341000314" t="2016-06-14 23:35:41 mac Ah silly me, it is just defined by a macor"><a href="#t1465947341000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:35:41</span>                  mac </span><span>Ah silly me, it is just defined by a macor</span></div><div id="t1465947343000315" t="2016-06-14 23:35:43 mac macro"><a href="#t1465947343000315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">23:35:43</span>                  mac </span><span>macro</span></div><div id="t1465956282000319" t="2016-06-15 02:04:42 conaw Putting up another puzzle, this one relating to filters or conditionals

 Given a vector of maps
If the values of a key in the map is

a)    A map that has a key of tempid

return just the tempid

if the value of a key is a set, list, or vector  that contains maps with key of tempid
then replace each of those maps with their temp id

example 

[{:a &quot;foo&quot;,
  :b &quot;bar&quot;,
  :c
  [{:this &quot;other thing&quot;,
    :that
    {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2},
    :tempid -3}],
  :tempid -4}
 {:this &quot;other thing&quot;,
  :that {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2},
  :tempid -3}
 {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2}
 {:in :we-go, :tempid -1}]


would become
[{:a “foo” :b “bar” :c [-3] :tempid -4}
  {:this “other thing” :that -2 :tempid -3} 
  {:nested :map :deeper #{-1} :tempid -2}
  {:in :we-go :tempid -1}]
"><a href="#t1465956282000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:04:42</span>                conaw </span><span>Putting up another puzzle, this one relating to filters or conditionals

</span><pre>Given a vector of maps
If the values of a key in the map is

a)    A map that has a key of tempid

return just the tempid

if the value of a key is a set, list, or vector  that contains maps with key of tempid
then replace each of those maps with their temp id

example 

[{:a &quot;foo&quot;,
  :b &quot;bar&quot;,
  :c
  [{:this &quot;other thing&quot;,
    :that
    {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2},
    :tempid -3}],
  :tempid -4}
 {:this &quot;other thing&quot;,
  :that {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2},
  :tempid -3}
 {:nested :map, :deeper #{{:in :we-go, :tempid -1}}, :tempid -2}
 {:in :we-go, :tempid -1}]


would become
[{:a “foo” :b “bar” :c [-3] :tempid -4}
  {:this “other thing” :that -2 :tempid -3} 
  {:nested :map :deeper #{-1} :tempid -2}
  {:in :we-go :tempid -1}]
</pre></div><div id="t1465956631000322" t="2016-06-15 02:10:31 conaw right now I have this, for the simpler case of just nested maps  (transform [ALL MAP-VALS (sp/pred :tempid) (collect-one :tempid)]
          (fn [v _] v)) "><a href="#t1465956631000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:10:31</span>                conaw </span><span>right now I have this, for the simpler case of just nested maps </span><pre>(transform [ALL MAP-VALS (sp/pred :tempid) (collect-one :tempid)]
          (fn [v _] v)) </pre></div><div id="t1465956661000323" t="2016-06-15 02:11:01 nathanmarz what would that transform to?"><a href="#t1465956661000323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:11:01</span>           nathanmarz </span><span>what would that transform to?</span></div><div id="t1465956872000325" t="2016-06-15 02:14:32 conaw the transform I have works fine, but doesn’t handle the case when I have a map inside a seq"><a href="#t1465956872000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:14:32</span>                conaw </span><span>the transform I have works fine, but doesn’t handle the case when I have a map inside a seq</span></div><div id="t1465956946000326" t="2016-06-15 02:15:46 conaw basically I want to find a way to conditionally insert and ALL between MAP-VALS and (pred :tempid)"><a href="#t1465956946000326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:15:46</span>                conaw </span><span>basically I want to find a way to conditionally insert and ALL between MAP-VALS and (pred :tempid)</span></div><div id="t1465957394000328" t="2016-06-15 02:23:14 nathanmarz i don&apos;t understand"><a href="#t1465957394000328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:23:14</span>           nathanmarz </span><span>i don&apos;t understand</span></div><div id="t1465957404000329" t="2016-06-15 02:23:24 nathanmarz you said when a map has a :tempid to replace it with the :tempid value"><a href="#t1465957404000329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:23:24</span>           nathanmarz </span><span>you said when a map has a :tempid to replace it with the :tempid value</span></div><div id="t1465957413000330" t="2016-06-15 02:23:33 nathanmarz that would make that example transform to [-4 -3 -2 -1]"><a href="#t1465957413000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:23:33</span>           nathanmarz </span><span>that would make that example transform to [-4 -3 -2 -1]</span></div><div id="t1465957524000331" t="2016-06-15 02:25:24 nathanmarz @conaw: or does that only happen after the first level of maps?"><a href="#t1465957524000331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:25:24</span>           nathanmarz </span><span>@conaw: or does that only happen after the first level of maps?</span></div><div id="t1465957609000332" t="2016-06-15 02:26:49 conaw only happens after first level"><a href="#t1465957609000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:26:49</span>                conaw </span><span>only happens after first level</span></div><div id="t1465957627000333" t="2016-06-15 02:27:07 conaw yeah, that’s why its ALL MAP-VALS"><a href="#t1465957627000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:07</span>                conaw </span><span>yeah, that’s why its ALL MAP-VALS</span></div><div id="t1465957636000334" t="2016-06-15 02:27:16 nathanmarz ah"><a href="#t1465957636000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:16</span>           nathanmarz </span><span>ah</span></div><div id="t1465957637000335" t="2016-06-15 02:27:17 conaw (transform [ALL MAP-VALS]  
           #((if (and (map? %) #(:tempid %)))
             (:tempid %)
             (if (seq %)
               (keep :tempid %)
               %))
           sampmap2)"><a href="#t1465957637000335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:17</span>                conaw </span><span>(transform [ALL MAP-VALS]  
           #((if (and (map? %) #(:tempid %)))
             (:tempid %)
             (if (seq %)
               (keep :tempid %)
               %))
           sampmap2)</span></div><div id="t1465957639000336" t="2016-06-15 02:27:19 nathanmarz got it"><a href="#t1465957639000336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:19</span>           nathanmarz </span><span>got it</span></div><div id="t1465957660000337" t="2016-06-15 02:27:40 nathanmarz easy enough"><a href="#t1465957660000337" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:40</span>           nathanmarz </span><span>easy enough</span></div><div id="t1465957665000338" t="2016-06-15 02:27:45 nathanmarz (transform [ALL MAP-VALS ConawWalker (pred :tempid)] :tempid data)"><a href="#t1465957665000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:45</span>           nathanmarz </span><code>(transform [ALL MAP-VALS ConawWalker (pred :tempid)] :tempid data)</code></div><div id="t1465957675000339" t="2016-06-15 02:27:55 nathanmarz I&apos;ll let you figure out  ConawWalker"><a href="#t1465957675000339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:55</span>           nathanmarz </span><span>I&apos;ll let you figure out </span><code>ConawWalker</code></div><div id="t1465957678000340" t="2016-06-15 02:27:58 conaw lol"><a href="#t1465957678000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:27:58</span>                conaw </span><span>lol</span></div><div id="t1465957681000341" t="2016-06-15 02:28:01 conaw love it"><a href="#t1465957681000341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:28:01</span>                conaw </span><span>love it</span></div><div id="t1465957719000342" t="2016-06-15 02:28:39 conaw the question is, inside ConawWalker, am I using filterer or just a normal checking"><a href="#t1465957719000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:28:39</span>                conaw </span><span>the question is, inside ConawWalker, am I using filterer or just a normal checking</span></div><div id="t1465957754000343" t="2016-06-15 02:29:14 nathanmarz the solution I have uses  cond-path"><a href="#t1465957754000343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:29:14</span>           nathanmarz </span><span>the solution I have uses </span><code>cond-path</code></div><div id="t1465957778000344" t="2016-06-15 02:29:38 nathanmarz and it&apos;s recursive obviously"><a href="#t1465957778000344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:29:38</span>           nathanmarz </span><span>and it&apos;s recursive obviously</span></div><div id="t1465957791000345" t="2016-06-15 02:29:51 conaw hm, in this case I don’t actually need recursion"><a href="#t1465957791000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:29:51</span>                conaw </span><span>hm, in this case I don’t actually need recursion</span></div><div id="t1465957803000346" t="2016-06-15 02:30:03 conaw well, maybe I do"><a href="#t1465957803000346" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:30:03</span>                conaw </span><span>well, maybe I do</span></div><div id="t1465957830000347" t="2016-06-15 02:30:30 nathanmarz yea you do"><a href="#t1465957830000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:30:30</span>           nathanmarz </span><span>yea you do</span></div><div id="t1465957831000348" t="2016-06-15 02:30:31 conaw but I’ve already flattened the tree out so that I only want to do my replacing at one level of depth in"><a href="#t1465957831000348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:30:31</span>                conaw </span><span>but I’ve already flattened the tree out so that I only want to do my replacing at one level of depth in</span></div><div id="t1465957846000349" t="2016-06-15 02:30:46 nathanmarz not in that example"><a href="#t1465957846000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:30:46</span>           nathanmarz </span><span>not in that example</span></div><div id="t1465957865000350" t="2016-06-15 02:31:05 nathanmarz :tempid all over the place"><a href="#t1465957865000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:31:05</span>           nathanmarz </span><span>:tempid all over the place</span></div><div id="t1465957948000351" t="2016-06-15 02:32:28 conaw the example came about this way  (def sampmap2
  [{:a &quot;foo&quot;
    :b &quot;bar&quot;
    :c [{:this &quot;other thing&quot;
         :that {:nested :map
                :deeper [{:in :we-go}]}}]}])

(declarepath TOPSORT3)
(providepath TOPSORT3
             (sp/cond-path
              map?
               (stay-then-continue
                [MAP-VALS TOPSORT3])
              vector?
                [ALL TOPSORT3]))


(select TOPSORT3 sampmap2)


(defn nested-&gt;ds [mapvec]
 (-&gt;&gt; mapvec
  (transform [(subselect TOPSORT3 :tempid) (sp/view count)]
           #(range (- %) 0))
  (select TOPSORT3)
  (transform [ALL MAP-VALS (sp/pred :tempid) (collect-one :tempid)]
          (fn [v _] v))))
"><a href="#t1465957948000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:32:28</span>                conaw </span><span>the example came about this way </span><pre>(def sampmap2
  [{:a &quot;foo&quot;
    :b &quot;bar&quot;
    :c [{:this &quot;other thing&quot;
         :that {:nested :map
                :deeper [{:in :we-go}]}}]}])

(declarepath TOPSORT3)
(providepath TOPSORT3
             (sp/cond-path
              map?
               (stay-then-continue
                [MAP-VALS TOPSORT3])
              vector?
                [ALL TOPSORT3]))


(select TOPSORT3 sampmap2)


(defn nested-&gt;ds [mapvec]
 (-&gt;&gt; mapvec
  (transform [(subselect TOPSORT3 :tempid) (sp/view count)]
           #(range (- %) 0))
  (select TOPSORT3)
  (transform [ALL MAP-VALS (sp/pred :tempid) (collect-one :tempid)]
          (fn [v _] v))))
</pre></div><div id="t1465958012000352" t="2016-06-15 02:33:32 conaw so, I’ve got each of my nodes already pulled out and selected using a recursive cond-path"><a href="#t1465958012000352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:33:32</span>                conaw </span><span>so, I’ve got each of my nodes already pulled out and selected using a recursive cond-path</span></div><div id="t1465958089000353" t="2016-06-15 02:34:49 conaw nvm, let me think on this, I think I mostly have ConawWalker with TOP-SORT3"><a href="#t1465958089000353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:34:49</span>                conaw </span><span>nvm, let me think on this, I think I mostly have ConawWalker with TOP-SORT3</span></div><div id="t1465958107000354" t="2016-06-15 02:35:07 nathanmarz yea it&apos;s close"><a href="#t1465958107000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:35:07</span>           nathanmarz </span><span>yea it&apos;s close</span></div><div id="t1465958236000355" t="2016-06-15 02:37:16 nathanmarz by the way you can write TOPSORT3 more concisely"><a href="#t1465958236000355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:37:16</span>           nathanmarz </span><span>by the way you can write TOPSORT3 more concisely</span></div><div id="t1465958270000356" t="2016-06-15 02:37:50 conaw yeah?"><a href="#t1465958270000356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:37:50</span>                conaw </span><span>yeah?</span></div><div id="t1465958332000357" t="2016-06-15 02:38:52 nathanmarz this should be equivalent
 (declarepath TOPSORT3)
(providepath TOPSORT3
   [(cond-path
     map? (stay-then-continue MAP-VALS)
     vector? ALL)
    TOPSORT3])
"><a href="#t1465958332000357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:38:52</span>           nathanmarz </span><span>this should be equivalent
</span><pre>(declarepath TOPSORT3)
(providepath TOPSORT3
   [(cond-path
     map? (stay-then-continue MAP-VALS)
     vector? ALL)
    TOPSORT3])
</pre></div><div id="t1465958348000359" t="2016-06-15 02:39:08 conaw aha"><a href="#t1465958348000359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:39:08</span>                conaw </span><span>aha</span></div><div id="t1465958609000360" t="2016-06-15 02:43:29 nathanmarz oh nvm, those are not equivalent"><a href="#t1465958609000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:43:29</span>           nathanmarz </span><span>oh nvm, those are not equivalent</span></div><div id="t1465958640000361" t="2016-06-15 02:44:00 nathanmarz that would stack overflow"><a href="#t1465958640000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:44:00</span>           nathanmarz </span><span>that would stack overflow</span></div><div id="t1465958708000362" t="2016-06-15 02:45:08 conaw Why is that?"><a href="#t1465958708000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:45:08</span>                conaw </span><span>Why is that?</span></div><div id="t1465958724000363" t="2016-06-15 02:45:24 conaw would cease to be tail recursive?"><a href="#t1465958724000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:45:24</span>                conaw </span><span>would cease to be tail recursive?</span></div><div id="t1465958766000364" t="2016-06-15 02:46:06 nathanmarz when it&apos;s on a map, it will first stay"><a href="#t1465958766000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:46:06</span>           nathanmarz </span><span>when it&apos;s on a map, it will first stay</span></div><div id="t1465958770000365" t="2016-06-15 02:46:10 nathanmarz then execute TOPSORT3 again"><a href="#t1465958770000365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:46:10</span>           nathanmarz </span><span>then execute TOPSORT3 again</span></div><div id="t1465958780000366" t="2016-06-15 02:46:20 nathanmarz then stay, then TOPSORT3, etc."><a href="#t1465958780000366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:46:20</span>           nathanmarz </span><span>then stay, then TOPSORT3, etc.</span></div><div id="t1465958806000367" t="2016-06-15 02:46:46 nathanmarz with yours it stays, does whatever is after TOPSORT3, then continues recursing on the map vals"><a href="#t1465958806000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:46:46</span>           nathanmarz </span><span>with yours it stays, does whatever is after TOPSORT3, then continues recursing on the map vals</span></div><div id="t1465958869000368" t="2016-06-15 02:47:49 nathanmarz anyway, i gotta run"><a href="#t1465958869000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:47:49</span>           nathanmarz </span><span>anyway, i gotta run</span></div><div id="t1465958882000369" t="2016-06-15 02:48:02 conaw cool, thanks for help"><a href="#t1465958882000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:02</span>                conaw </span><span>cool, thanks for help</span></div><div id="t1465958892000370" t="2016-06-15 02:48:12 conaw last q"><a href="#t1465958892000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:12</span>                conaw </span><span>last q</span></div><div id="t1465958902000371" t="2016-06-15 02:48:22 conaw #(:a %)"><a href="#t1465958902000371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:22</span>                conaw </span><span>#(:a %)</span></div><div id="t1465958904000372" t="2016-06-15 02:48:24 nathanmarz here&apos;s a gist with the solution if you can&apos;t figure it out  https://gist.github.com/nathanmarz/16481b3b4578ed446453bd828335eedb"><a href="#t1465958904000372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:24</span>           nathanmarz </span><span>here&apos;s a gist with the solution if you can&apos;t figure it out </span><a href="https://gist.github.com/nathanmarz/16481b3b4578ed446453bd828335eedb" target="_blank">https://gist.github.com/nathanmarz/16481b3b4578ed446453bd828335eedb</a></div><div id="t1465958924000373" t="2016-06-15 02:48:44 conaw best way to only navigate to maps with key of a without traversing into a?"><a href="#t1465958924000373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:44</span>                conaw </span><span>best way to only navigate to maps with key of a without traversing into a?</span></div><div id="t1465958930000374" t="2016-06-15 02:48:50 conaw is that"><a href="#t1465958930000374" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:50</span>                conaw </span><span>is that</span></div><div id="t1465958932000375" t="2016-06-15 02:48:52 conaw right?"><a href="#t1465958932000375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:48:52</span>                conaw </span><span>right?</span></div><div id="t1465958961000376" t="2016-06-15 02:49:21 conaw and best way of doing all except would be #(not (:a %))"><a href="#t1465958961000376" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:49:21</span>                conaw </span><span>and best way of doing all except would be #(not (:a %))</span></div><div id="t1465958964000377" t="2016-06-15 02:49:24 nathanmarz that&apos;s the same as saying (pred :a)"><a href="#t1465958964000377" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:49:24</span>           nathanmarz </span><span>that&apos;s the same as saying (pred :a)</span></div><div id="t1465958979000378" t="2016-06-15 02:49:39 nathanmarz but that doesn&apos;t account for key existing with nil or false value"><a href="#t1465958979000378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:49:39</span>           nathanmarz </span><span>but that doesn&apos;t account for key existing with nil or false value</span></div><div id="t1465958994000379" t="2016-06-15 02:49:54 conaw pred does?"><a href="#t1465958994000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:49:54</span>                conaw </span><span>pred does?</span></div><div id="t1465959006000380" t="2016-06-15 02:50:06 nathanmarz if you want to truly do it based on key existing, use  (selected? (must :a))  or  (not-selected? (must :a))"><a href="#t1465959006000380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:50:06</span>           nathanmarz </span><span>if you want to truly do it based on key existing, use </span><code>(selected? (must :a))</code><span> or </span><code>(not-selected? (must :a))</code></div><div id="t1465959019000381" t="2016-06-15 02:50:19 conaw great"><a href="#t1465959019000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:50:19</span>                conaw </span><span>great</span></div><div id="t1465959023000382" t="2016-06-15 02:50:23 conaw much appreciated"><a href="#t1465959023000382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:50:23</span>                conaw </span><span>much appreciated</span></div><div id="t1465959032000383" t="2016-06-15 02:50:32 nathanmarz #(:a %)  is equivalent to  (pred :a)"><a href="#t1465959032000383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:50:32</span>           nathanmarz </span><code>#(:a %)</code><span> is equivalent to </span><code>(pred :a)</code></div><div id="t1465959039000384" t="2016-06-15 02:50:39 conaw cool"><a href="#t1465959039000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">02:50:39</span>                conaw </span><span>cool</span></div><div id="t1465999015000391" t="2016-06-15 13:56:55 codonnell @nathanmarz: Made a few updates to  https://github.com/codonnell/specter/wiki/List-of-Macros  after rereading your post and looking through  magic-precompilation  and  magic-precompilation* . I&apos;m just missing examples for  path , and I&apos;m not clear yet on the difference between  comp-paths  and  path . Can  path  not return a  ParamsNeededPath ?"><a href="#t1465999015000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">13:56:55</span>            codonnell </span><span>@nathanmarz: Made a few updates to </span><a href="https://github.com/codonnell/specter/wiki/List-of-Macros" target="_blank">https://github.com/codonnell/specter/wiki/List-of-Macros</a><span> after rereading your post and looking through </span><code>magic-precompilation</code><span> and </span><code>magic-precompilation*</code><span>. I&apos;m just missing examples for </span><code>path</code><span>, and I&apos;m not clear yet on the difference between </span><code>comp-paths</code><span> and </span><code>path</code><span>. Can </span><code>path</code><span> not return a </span><code>ParamsNeededPath</code><span>?</span></div><div id="t1465999053000393" t="2016-06-15 13:57:33 codonnell On a side note, there&apos;s a typo at  https://github.com/nathanmarz/specter/blob/0.11.2/src/clj/com/rpl/specter/impl.cljx#L1150  (s/consructor/constructor)"><a href="#t1465999053000393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">13:57:33</span>            codonnell </span><span>On a side note, there&apos;s a typo at </span><a href="https://github.com/nathanmarz/specter/blob/0.11.2/src/clj/com/rpl/specter/impl.cljx#L1150" target="_blank">https://github.com/nathanmarz/specter/blob/0.11.2/src/clj/com/rpl/specter/impl.cljx#L1150</a><span> (s/consructor/constructor)</span></div><div id="t1466001342000395" t="2016-06-15 14:35:42 nathanmarz @codonnell:  path  is basically  comp-paths  plus inline factoring and caching"><a href="#t1466001342000395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:35:42</span>           nathanmarz </span><span>@codonnell: </span><code>path</code><span> is basically </span><code>comp-paths</code><span> plus inline factoring and caching</span></div><div id="t1466001487000396" t="2016-06-15 14:38:07 nathanmarz You could use  path  on its own like this:
 (defn user-path [u]
  (path ALL (selected? :id #(= u %))))
"><a href="#t1466001487000396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:38:07</span>           nathanmarz </span><span>You could use </span><code>path</code><span> on its own like this:
</span><pre>(defn user-path [u]
  (path ALL (selected? :id #(= u %))))
</pre></div><div id="t1466001527000397" t="2016-06-15 14:38:47 nathanmarz user-path  will use inline caching + factoring and efficiently return a path to that particular user"><a href="#t1466001527000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:38:47</span>           nathanmarz </span><code>user-path</code><span> will use inline caching + factoring and efficiently return a path to that particular user</span></div><div id="t1466001558000398" t="2016-06-15 14:39:18 nathanmarz select ,  transform , etc. all use  path"><a href="#t1466001558000398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:39:18</span>           nathanmarz </span><code>select</code><span>, </span><code>transform</code><span>, etc. all use </span><code>path</code></div><div id="t1466002400000402" t="2016-06-15 14:53:20 nathanmarz @codonnell: merged the new wiki page in"><a href="#t1466002400000402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:53:20</span>           nathanmarz </span><span>@codonnell: merged the new wiki page in</span></div><div id="t1466002489000403" t="2016-06-15 14:54:49 nathanmarz fyi, there will be a new core operation in 0.12.0 called  traverse"><a href="#t1466002489000403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">14:54:49</span>           nathanmarz </span><span>fyi, there will be a new core operation in 0.12.0 called </span><code>traverse</code></div><div id="t1466007438000404" t="2016-06-15 16:17:18 aengelberg @nathanmarz re: transducers. I agree that the mapcat behavior is the most useful but the name  traverse  doesn&apos;t seem to imply that behavior."><a href="#t1466007438000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:17:18</span>           aengelberg </span><span>@nathanmarz re: transducers. I agree that the mapcat behavior is the most useful but the name </span><code>traverse</code><span> doesn&apos;t seem to imply that behavior.</span></div><div id="t1466007528000405" t="2016-06-15 16:18:48 aengelberg What&apos;s really happening is you are traversing some path on ALL structures coming on some stream (or collection, etc) then getting all those results. Maybe  traverse-all  is a more appropriate name?"><a href="#t1466007528000405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:18:48</span>           aengelberg </span><span>What&apos;s really happening is you are traversing some path on ALL structures coming on some stream (or collection, etc) then getting all those results. Maybe </span><code>traverse-all</code><span> is a more appropriate name?</span></div><div id="t1466008756000406" t="2016-06-15 16:39:16 nathanmarz @aengelberg: yea, that&apos;s a better name"><a href="#t1466008756000406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:39:16</span>           nathanmarz </span><span>@aengelberg: yea, that&apos;s a better name</span></div><div id="t1466008821000407" t="2016-06-15 16:40:21 aengelberg or go for the pun and call it  transverse"><a href="#t1466008821000407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:40:21</span>           aengelberg </span><span>or go for the pun and call it </span><code>transverse</code></div><div id="t1466008845000408" t="2016-06-15 16:40:45 aengelberg 👏   🎉  i&apos;m here all week"><a href="#t1466008845000408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:40:45</span>           aengelberg </span><b>👏</b><span> </span><b>🎉</b><span> i&apos;m here all week</span></div><div id="t1466008871000409" t="2016-06-15 16:41:11 nathanmarz lol"><a href="#t1466008871000409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">16:41:11</span>           nathanmarz </span><span>lol</span></div><div id="t1466012833000410" t="2016-06-15 17:47:13 codonnell @nathanmarz: after creating your  user-path  function above, I get an error while trying to use it:
 (select (user-path &quot;chris&quot;) [{:id &quot;nick&quot;} {:id &quot;foo&quot;} {:id &quot;chris&quot;}])
Failed to cache path: Var user-path must be either a parameterized navigator, a higher order pathed constructor function, or a nav consructor
"><a href="#t1466012833000410" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:47:13</span>            codonnell </span><span>@nathanmarz: after creating your </span><code>user-path</code><span> function above, I get an error while trying to use it:
</span><pre>(select (user-path &quot;chris&quot;) [{:id &quot;nick&quot;} {:id &quot;foo&quot;} {:id &quot;chris&quot;}])
Failed to cache path: Var user-path must be either a parameterized navigator, a higher order pathed constructor function, or a nav consructor
</pre></div><div id="t1466012875000411" t="2016-06-15 17:47:55 nathanmarz @codonnell: use  compiled-select"><a href="#t1466012875000411" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:47:55</span>           nathanmarz </span><span>@codonnell: use </span><code>compiled-select</code></div><div id="t1466012934000412" t="2016-06-15 17:48:54 codonnell alright, that works"><a href="#t1466012934000412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:48:54</span>            codonnell </span><span>alright, that works</span></div><div id="t1466012968000413" t="2016-06-15 17:49:28 nathanmarz yea, I only gave that as an example of using  path  on its own"><a href="#t1466012968000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:49:28</span>           nathanmarz </span><span>yea, I only gave that as an example of using </span><code>path</code><span> on its own</span></div><div id="t1466012996000414" t="2016-06-15 17:49:56 nathanmarz but in general, to make a parameterized navigator it&apos;s much better to use comp-paths"><a href="#t1466012996000414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:49:56</span>           nathanmarz </span><span>but in general, to make a parameterized navigator it&apos;s much better to use comp-paths</span></div><div id="t1466013053000415" t="2016-06-15 17:50:53 codonnell and I should use  compiled-select  with a path I have already compiled with  comp-paths ?"><a href="#t1466013053000415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:50:53</span>            codonnell </span><span>and I should use </span><code>compiled-select</code><span> with a path I have already compiled with </span><code>comp-paths</code><span>?</span></div><div id="t1466013154000416" t="2016-06-15 17:52:34 nathanmarz if you know it&apos;s already compiled then that will be the most efficient"><a href="#t1466013154000416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:52:34</span>           nathanmarz </span><span>if you know it&apos;s already compiled then that will be the most efficient</span></div><div id="t1466013188000417" t="2016-06-15 17:53:08 codonnell Also, if I&apos;m understanding  path  correctly, it doesn&apos;t take late binding parameters because it needs to cache the code which creates the parameters at compile time. Is that right?"><a href="#t1466013188000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:53:08</span>            codonnell </span><span>Also, if I&apos;m understanding </span><code>path</code><span> correctly, it doesn&apos;t take late binding parameters because it needs to cache the code which creates the parameters at compile time. Is that right?</span></div><div id="t1466013190000418" t="2016-06-15 17:53:10 nathanmarz select* is like compiled-select except it will compile the input path if it&apos;s not already compiled"><a href="#t1466013190000418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:53:10</span>           nathanmarz </span><span>select* is like compiled-select except it will compile the input path if it&apos;s not already compiled</span></div><div id="t1466013219000419" t="2016-06-15 17:53:39 nathanmarz yea  path  is meant for a fully parameterized path"><a href="#t1466013219000419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:53:39</span>           nathanmarz </span><span>yea </span><code>path</code><span> is meant for a fully parameterized path</span></div><div id="t1466013269000420" t="2016-06-15 17:54:29 codonnell So is there any reason to use  select  over  select* ?"><a href="#t1466013269000420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:54:29</span>            codonnell </span><span>So is there any reason to use </span><code>select</code><span> over </span><code>select*</code><span>?</span></div><div id="t1466013317000421" t="2016-06-15 17:55:17 nathanmarz select* doesn&apos;t do inline caching"><a href="#t1466013317000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:55:17</span>           nathanmarz </span><span>select* doesn&apos;t do inline caching</span></div><div id="t1466013341000422" t="2016-06-15 17:55:41 codonnell Right, because it&apos;s a function rather than a macro."><a href="#t1466013341000422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:55:41</span>            codonnell </span><span>Right, because it&apos;s a function rather than a macro.</span></div><div id="t1466013356000423" t="2016-06-15 17:55:56 nathanmarz 99.9% of usage should be through the core  select ,  transform , etc. operations"><a href="#t1466013356000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:55:56</span>           nathanmarz </span><span>99.9% of usage should be through the core </span><code>select</code><span>, </span><code>transform</code><span>, etc. operations</span></div><div id="t1466013419000424" t="2016-06-15 17:56:59 codonnell Alright, thanks for answering my questions.  👍"><a href="#t1466013419000424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:56:59</span>            codonnell </span><span>Alright, thanks for answering my questions. </span><b>👍</b></div><div id="t1466013448000425" t="2016-06-15 17:57:28 nathanmarz in my own usage I use select/transform/replace-in over 400 times, comp-paths 15 times, and compiled-select/compiled-transform only twice"><a href="#t1466013448000425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">17:57:28</span>           nathanmarz </span><span>in my own usage I use select/transform/replace-in over 400 times, comp-paths 15 times, and compiled-select/compiled-transform only twice</span></div><div id="t1466016909000427" t="2016-06-15 18:55:09 codonnell @nathanmarz: I added some examples and a longer description for the  path  macro, as well as some minor formatting changes and a fix for broken links in the list of navigators. Can you think of a situation where it would be prefer able to use  path  over  comp-paths ?"><a href="#t1466016909000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">18:55:09</span>            codonnell </span><span>@nathanmarz: I added some examples and a longer description for the </span><code>path</code><span> macro, as well as some minor formatting changes and a fix for broken links in the list of navigators. Can you think of a situation where it would be prefer able to use </span><code>path</code><span> over </span><code>comp-paths</code><span>?</span></div><div id="t1466017478000431" t="2016-06-15 19:04:38 thomasdeutsch Hi everyone. I am stuck with a specter problem i can not get a solution for.     I have a simple tree structure as a map and the leaves can be at any level (they are a map with a :template key).  

 I can use a walker to simply find the leaves, but for every leaf, i need the path to that leaf.   Is there something like collect-one i can use for this?   

 (def mytree {&quot;e1&quot; {&quot;e2&quot; {&quot;e1&quot; {:template 1}
                        &quot;e2&quot; {:template 2}}}})

(select [(walker #(contains? % :template))] mytree)"><a href="#t1466017478000431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:04:38</span>        thomasdeutsch </span><span>Hi everyone. I am stuck with a specter problem i can not get a solution for.     I have a simple tree structure as a map and the leaves can be at any level (they are a map with a :template key).  

 I can use a walker to simply find the leaves, but for every leaf, i need the path to that leaf.   Is there something like collect-one i can use for this?   

</span><pre>(def mytree {&quot;e1&quot; {&quot;e2&quot; {&quot;e1&quot; {:template 1}
                        &quot;e2&quot; {:template 2}}}})

(select [(walker #(contains? % :template))] mytree)</pre></div><div id="t1466017761000432" t="2016-06-15 19:09:21 codonnell @thomasdeutsch: what would you like to be returned for that data structure?"><a href="#t1466017761000432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:09:21</span>            codonnell </span><span>@thomasdeutsch: what would you like to be returned for that data structure?</span></div><div id="t1466017859000433" t="2016-06-15 19:10:59 thomasdeutsch i would like to return a vector of maps. The maps have templates + a path to that template.  Like     [{:template 1 :path [&quot;e1 &quot;e2&quot; &quot;e1]} {:template 2 :path [&quot;e1&quot; &quot;e2&quot; &quot;e2]}]"><a href="#t1466017859000433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:10:59</span>        thomasdeutsch </span><span>i would like to return a vector of maps. The maps have templates + a path to that template.  Like    </span><code>[{:template 1 :path [&quot;e1 &quot;e2&quot; &quot;e1]} {:template 2 :path [&quot;e1&quot; &quot;e2&quot; &quot;e2]}]</code></div><div id="t1466017907000434" t="2016-06-15 19:11:47 thomasdeutsch i think i need a transform with a filterer and a second one that will transform a path into the structure?"><a href="#t1466017907000434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:11:47</span>        thomasdeutsch </span><span>i think i need a transform with a filterer and a second one that will transform a path into the structure?</span></div><div id="t1466018135000437" t="2016-06-15 19:15:35 codonnell I think you want a recursive navigator that collects the keys as you go."><a href="#t1466018135000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:15:35</span>            codonnell </span><span>I think you want a recursive navigator that collects the keys as you go.</span></div><div id="t1466019037000438" t="2016-06-15 19:30:37 codonnell @thomasdeutsch: This is close:
 (declarepath KeyAccumWalker [k])
(providepath KeyAccumWalker (if-path must STAY [ALL (collect-one FIRST) LAST (params-reset KeyAccumWalker)]))
(select (KeyAccumWalker :template) mytree)
"><a href="#t1466019037000438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:30:37</span>            codonnell </span><span>@thomasdeutsch: This is close:
</span><pre>(declarepath KeyAccumWalker [k])
(providepath KeyAccumWalker (if-path must STAY [ALL (collect-one FIRST) LAST (params-reset KeyAccumWalker)]))
(select (KeyAccumWalker :template) mytree)
</pre></div><div id="t1466019194000439" t="2016-06-15 19:33:14 thomasdeutsch i have to say, i do not understand if-path must STAY ...   but this is a great place to start from...."><a href="#t1466019194000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:33:14</span>        thomasdeutsch </span><span>i have to say, i do not understand if-path must STAY ...   but this is a great place to start from....</span></div><div id="t1466019205000440" t="2016-06-15 19:33:25 thomasdeutsch Thank you"><a href="#t1466019205000440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:33:25</span>        thomasdeutsch </span><span>Thank you</span></div><div id="t1466019226000441" t="2016-06-15 19:33:46 codonnell @thomasdeutsch:  must  has an implicit late-bound parameter, which is the key :template"><a href="#t1466019226000441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:33:46</span>            codonnell </span><span>@thomasdeutsch: </span><code>must</code><span> has an implicit late-bound parameter, which is the key :template</span></div><div id="t1466019234000442" t="2016-06-15 19:33:54 mfikes @nathanmarz: Do you develop on Linux? (If so, wanted to let you know that we now have an alpha of Planck that runs on Linux. It can successfully load Specter from its JAR and evaluate things. Figure that might help if you ever want to check some behavior related to bootstrap ClojureScript.)"><a href="#t1466019234000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:33:54</span>               mfikes </span><span>@nathanmarz: Do you develop on Linux? (If so, wanted to let you know that we now have an alpha of Planck that runs on Linux. It can successfully load Specter from its JAR and evaluate things. Figure that might help if you ever want to check some behavior related to bootstrap ClojureScript.)</span></div><div id="t1466019249000443" t="2016-06-15 19:34:09 codonnell so what&apos;s really going on there is more like  (if-path (must :template) STAY ...)"><a href="#t1466019249000443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:34:09</span>            codonnell </span><span>so what&apos;s really going on there is more like </span><code>(if-path (must :template) STAY ...)</code></div><div id="t1466019271000444" t="2016-06-15 19:34:31 thomasdeutsch aaahhhh, ok! got it."><a href="#t1466019271000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:34:31</span>        thomasdeutsch </span><span>aaahhhh, ok! got it.</span></div><div id="t1466019311000445" t="2016-06-15 19:35:11 codonnell The problem is that as we recursively call  KeyAccumWalker  the collected values are getting nested instead of concatenated."><a href="#t1466019311000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:35:11</span>            codonnell </span><span>The problem is that as we recursively call </span><code>KeyAccumWalker</code><span> the collected values are getting nested instead of concatenated.</span></div><div id="t1466020123000446" t="2016-06-15 19:48:43 nathanmarz @codonnell @thomasdeutsch value collection + recursion doesn&apos;t work so well in specter at the moment"><a href="#t1466020123000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:48:43</span>           nathanmarz </span><span>@codonnell @thomasdeutsch value collection + recursion doesn&apos;t work so well in specter at the moment</span></div><div id="t1466020139000447" t="2016-06-15 19:48:59 nathanmarz also  https://github.com/nathanmarz/specter/issues/64"><a href="#t1466020139000447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:48:59</span>           nathanmarz </span><span>also </span><a href="https://github.com/nathanmarz/specter/issues/64" target="_blank">https://github.com/nathanmarz/specter/issues/64</a></div><div id="t1466020159000449" t="2016-06-15 19:49:19 thomasdeutsch thanks for the heads up"><a href="#t1466020159000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:49:19</span>        thomasdeutsch </span><span>thanks for the heads up</span></div><div id="t1466020430000450" t="2016-06-15 19:53:50 nathanmarz @mfikes: I develop on OSX, does it work there as well?"><a href="#t1466020430000450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:53:50</span>           nathanmarz </span><span>@mfikes: I develop on OSX, does it work there as well?</span></div><div id="t1466020456000451" t="2016-06-15 19:54:16 mfikes Oh… definitely. Planck has worked on OS X all along :)  brew install planck  and you are good to go"><a href="#t1466020456000451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:54:16</span>               mfikes </span><span>Oh… definitely. Planck has worked on OS X all along :) </span><code>brew install planck</code><span> and you are good to go</span></div><div id="t1466020735000452" t="2016-06-15 19:58:55 mfikes @nathanmarz: If you ever want to point Planck at your JAR, here’s how:
 $ planck -qKc target/specter-0.12.0-SNAPSHOT.jar
cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
nil
cljs.user=&gt; (require &apos;[com.rpl.specter :refer [ALL]])
nil
cljs.user=&gt; (transform [ALL :a even?] inc [{:a 1} {:a 2} {:a 4} {:a 3}])
[{:a 1} {:a 3} {:a 5} {:a 3}]
 
That’s all there is to it.
(Note that  -K  will cause a  .planck_cache  directory to be written for faster subsequent startups. You can also use  -k  to write to a specific path, or just leave it off and live with slower  require  processing.)"><a href="#t1466020735000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:58:55</span>               mfikes </span><span>@nathanmarz: If you ever want to point Planck at your JAR, here’s how:
</span><pre>$ planck -qKc target/specter-0.12.0-SNAPSHOT.jar
cljs.user=&gt; (require-macros &apos;[com.rpl.specter.macros :refer [transform]])
nil
cljs.user=&gt; (require &apos;[com.rpl.specter :refer [ALL]])
nil
cljs.user=&gt; (transform [ALL :a even?] inc [{:a 1} {:a 2} {:a 4} {:a 3}])
[{:a 1} {:a 3} {:a 5} {:a 3}]
</pre><span>
That’s all there is to it.
(Note that </span><code>-K</code><span> will cause a </span><code>.planck_cache</code><span> directory to be written for faster subsequent startups. You can also use </span><code>-k</code><span> to write to a specific path, or just leave it off and live with slower </span><code>require</code><span> processing.)</span></div><div id="t1466020761000453" t="2016-06-15 19:59:21 nathanmarz ok cool, I&apos;ll note this down"><a href="#t1466020761000453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">19:59:21</span>           nathanmarz </span><span>ok cool, I&apos;ll note this down</span></div><div id="t1466020815000454" t="2016-06-15 20:00:15 mfikes Cool. Of course, happy to continue to sort out bootstrap issues if they arise. Just thought you might want to be able to try things yourself if you ever wanted to.  🙂"><a href="#t1466020815000454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:00:15</span>               mfikes </span><span>Cool. Of course, happy to continue to sort out bootstrap issues if they arise. Just thought you might want to be able to try things yourself if you ever wanted to. </span><b>🙂</b></div><div id="t1466020834000455" t="2016-06-15 20:00:34 nathanmarz any leiningen plugin available to be able to do something like &quot;lein planck&quot;?"><a href="#t1466020834000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:00:34</span>           nathanmarz </span><span>any leiningen plugin available to be able to do something like &quot;lein planck&quot;?</span></div><div id="t1466020855000456" t="2016-06-15 20:00:55 nathanmarz and get a planck repl with the project code + dependencies available"><a href="#t1466020855000456" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:00:55</span>           nathanmarz </span><span>and get a planck repl with the project code + dependencies available</span></div><div id="t1466020887000457" t="2016-06-15 20:01:27 mfikes Well, you can essentially do the opposite: 
 planck -c `lein classpath`
"><a href="#t1466020887000457" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:01:27</span>               mfikes </span><span>Well, you can essentially do the opposite: 
</span><pre>planck -c `lein classpath`
</pre></div><div id="t1466020905000458" t="2016-06-15 20:01:45 nathanmarz ah nice, just as good"><a href="#t1466020905000458" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:01:45</span>           nathanmarz </span><span>ah nice, just as good</span></div><div id="t1466020948000459" t="2016-06-15 20:02:28 mfikes There’s also fairly decent docs covering this stuff (that’s covered in the Dependencies section).  http://planck-repl.org/guide.html"><a href="#t1466020948000459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-15</span> <span class="t" onclick="H(this)">20:02:28</span>               mfikes </span><span>There’s also fairly decent docs covering this stuff (that’s covered in the Dependencies section). </span><a href="http://planck-repl.org/guide.html" target="_blank">http://planck-repl.org/guide.html</a></div><div id="t1466085631000472" t="2016-06-16 14:00:31 nathanmarz @codonnell @thomasdeutsch that bug you guys ran into yesterday is now fixed in master"><a href="#t1466085631000472" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:00:31</span>           nathanmarz </span><span>@codonnell @thomasdeutsch that bug you guys ran into yesterday is now fixed in master</span></div><div id="t1466085700000473" t="2016-06-16 14:01:40 nathanmarz also deployed 0.12.0-SNAPSHOT to clojars if you want to use it"><a href="#t1466085700000473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:01:40</span>           nathanmarz </span><span>also deployed 0.12.0-SNAPSHOT to clojars if you want to use it</span></div><div id="t1466087207000474" t="2016-06-16 14:26:47 aengelberg @nathanmarz I&apos;m curious why  select*  really needs each navigator to return one of its navigated values as the return value. If you really want  select-any , you could traverse with the final continuation being to deliver to a promise (where only the first value matters)."><a href="#t1466087207000474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:26:47</span>           aengelberg </span><span>@nathanmarz I&apos;m curious why </span><code>select*</code><span> really needs each navigator to return one of its navigated values as the return value. If you really want </span><code>select-any</code><span>, you could traverse with the final continuation being to deliver to a promise (where only the first value matters).</span></div><div id="t1466087723000475" t="2016-06-16 14:35:23 nathanmarz it&apos;s the most efficient way"><a href="#t1466087723000475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:35:23</span>           nathanmarz </span><span>it&apos;s the most efficient way</span></div><div id="t1466087743000476" t="2016-06-16 14:35:43 nathanmarz don&apos;t need to create any anonymous function, don&apos;t need to write anywhere"><a href="#t1466087743000476" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:35:43</span>           nathanmarz </span><span>don&apos;t need to create any anonymous function, don&apos;t need to write anywhere</span></div><div id="t1466087799000477" t="2016-06-16 14:36:39 nathanmarz an anonymous function that closes over local environment requires object creation and field setting"><a href="#t1466087799000477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:36:39</span>           nathanmarz </span><span>an anonymous function that closes over local environment requires object creation and field setting</span></div><div id="t1466087829000478" t="2016-06-16 14:37:09 nathanmarz for cases like  (select-any [:a :b :c] {:a {:b {:c 1}}})  these things make a noticeable difference"><a href="#t1466087829000478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">14:37:09</span>           nathanmarz </span><span>for cases like </span><code>(select-any [:a :b :c] {:a {:b {:c 1}}})</code><span> these things make a noticeable difference</span></div><div id="t1466106634000482" t="2016-06-16 19:50:34 codonnell @nathanmarz:  (reduce afn init (traverse apath structure))  should always return the same thing as  (reduce afn init (select apath structure)) , right? But it is more memory efficient because it only store the reduction value, rather than instantiating the entire seq?"><a href="#t1466106634000482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">19:50:34</span>            codonnell </span><span>@nathanmarz: </span><code>(reduce afn init (traverse apath structure))</code><span> should always return the same thing as </span><code>(reduce afn init (select apath structure))</code><span>, right? But it is more memory efficient because it only store the reduction value, rather than instantiating the entire seq?</span></div><div id="t1466106829000483" t="2016-06-16 19:53:49 nathanmarz @codonnell: that&apos;s exactly right"><a href="#t1466106829000483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">19:53:49</span>           nathanmarz </span><span>@codonnell: that&apos;s exactly right</span></div><div id="t1466106889000485" t="2016-06-16 19:54:49 nathanmarz not just memory efficient but also faster"><a href="#t1466106889000485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">19:54:49</span>           nathanmarz </span><span>not just memory efficient but also faster</span></div><div id="t1466107001000486" t="2016-06-16 19:56:41 nathanmarz also useful if you want something like a set of results back, e.g.  (into #{} (traverse ...))"><a href="#t1466107001000486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">19:56:41</span>           nathanmarz </span><span>also useful if you want something like a set of results back, e.g. </span><code>(into #{} (traverse ...))</code></div><div id="t1466107084000487" t="2016-06-16 19:58:04 codonnell ok great"><a href="#t1466107084000487" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">19:58:04</span>            codonnell </span><span>ok great</span></div><div id="t1466107832000488" t="2016-06-16 20:10:32 codonnell Is  collected?  the same as  pred , but it takes the collected values as input rather than the structure?"><a href="#t1466107832000488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">20:10:32</span>            codonnell </span><span>Is </span><code>collected?</code><span> the same as </span><code>pred</code><span>, but it takes the collected values as input rather than the structure?</span></div><div id="t1466107934000489" t="2016-06-16 20:12:14 nathanmarz yes"><a href="#t1466107934000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">20:12:14</span>           nathanmarz </span><span>yes</span></div><div id="t1466107975000490" t="2016-06-16 20:12:55 codonnell alright, these new operations should be pretty easy to write up"><a href="#t1466107975000490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">20:12:55</span>            codonnell </span><span>alright, these new operations should be pretty easy to write up</span></div><div id="t1466112666000494" t="2016-06-16 21:31:06 codonnell I pushed the 0.12.0 macros and navigators up to  https://github.com/codonnell/specter/wiki/List-of-Macros . Pretty sure they are accurate."><a href="#t1466112666000494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">21:31:06</span>            codonnell </span><span>I pushed the 0.12.0 macros and navigators up to </span><a href="https://github.com/codonnell/specter/wiki/List-of-Macros" target="_blank">https://github.com/codonnell/specter/wiki/List-of-Macros</a><span>. Pretty sure they are accurate.</span></div><div id="t1466112957000496" t="2016-06-16 21:35:57 codonnell perhaps jumping the gun, but it&apos;s there on my wiki if needed"><a href="#t1466112957000496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">21:35:57</span>            codonnell </span><span>perhaps jumping the gun, but it&apos;s there on my wiki if needed</span></div><div id="t1466113517000497" t="2016-06-16 21:45:17 nathanmarz great"><a href="#t1466113517000497" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">21:45:17</span>           nathanmarz </span><span>great</span></div><div id="t1466113522000498" t="2016-06-16 21:45:22 nathanmarz added another traverse example and merged in"><a href="#t1466113522000498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">21:45:22</span>           nathanmarz </span><span>added another traverse example and merged in</span></div><div id="t1466120035000499" t="2016-06-16 23:33:55 luxbock how would I implement  REST ? i.e.  (select-one REST [1 2 3])  =&gt;  [2 3] ?"><a href="#t1466120035000499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:33:55</span>              luxbock </span><span>how would I implement </span><code>REST</code><span>? i.e. </span><code>(select-one REST [1 2 3])</code><span> =&gt; </span><code>[2 3]</code><span>?</span></div><div id="t1466120482000501" t="2016-06-16 23:41:22 luxbock I can use  srange  but then I need to know the length of the collection in the selector"><a href="#t1466120482000501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:41:22</span>              luxbock </span><span>I can use </span><code>srange</code><span> but then I need to know the length of the collection in the selector</span></div><div id="t1466120516000502" t="2016-06-16 23:41:56 luxbock I was trying to figure out how to do it by looking at  ALL  and  FIRST  but the code looks so optimized that I can&apos;t really figure out how to write it"><a href="#t1466120516000502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:41:56</span>              luxbock </span><span>I was trying to figure out how to do it by looking at </span><code>ALL</code><span> and </span><code>FIRST</code><span> but the code looks so optimized that I can&apos;t really figure out how to write it</span></div><div id="t1466120660000503" t="2016-06-16 23:44:20 codonnell @luxbock: you should be able to do it with  defnav  (see  https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav  for a similar example)"><a href="#t1466120660000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:44:20</span>            codonnell </span><span>@luxbock: you should be able to do it with </span><code>defnav</code><span> (see </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav</a><span> for a similar example)</span></div><div id="t1466120680000505" t="2016-06-16 23:44:40 codonnell I&apos;m not sure if there&apos;s a better way to do it"><a href="#t1466120680000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:44:40</span>            codonnell </span><span>I&apos;m not sure if there&apos;s a better way to do it</span></div><div id="t1466120749000506" t="2016-06-16 23:45:49 luxbock @codonnell: thanks"><a href="#t1466120749000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:45:49</span>              luxbock </span><span>@codonnell: thanks</span></div><div id="t1466120788000507" t="2016-06-16 23:46:28 codonnell no problem"><a href="#t1466120788000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:46:28</span>            codonnell </span><span>no problem</span></div><div id="t1466121010000508" t="2016-06-16 23:50:10 codonnell ooh"><a href="#t1466121010000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:50:10</span>            codonnell </span><span>ooh</span></div><div id="t1466121068000509" t="2016-06-16 23:51:08 codonnell @luxbock: (select (transformed STAY rest) (range 10))"><a href="#t1466121068000509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:51:08</span>            codonnell </span><span>@luxbock: (select (transformed STAY rest) (range 10))</span></div><div id="t1466121085000510" t="2016-06-16 23:51:25 codonnell no,  (select (view rest) (range 10))"><a href="#t1466121085000510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:51:25</span>            codonnell </span><span>no, </span><code>(select (view rest) (range 10))</code></div><div id="t1466121100000511" t="2016-06-16 23:51:40 codonnell pretty sure  (view rest)  is optimal"><a href="#t1466121100000511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-16</span> <span class="t" onclick="H(this)">23:51:40</span>            codonnell </span><span>pretty sure </span><code>(view rest)</code><span> is optimal</span></div><div id="t1466121608000512" t="2016-06-17 00:00:08 codonnell Note that if you&apos;re doing a transform, you&apos;ll lose the first element
 (transform [(view rest) ALL] inc (range 5))
(2 3 4 5)
"><a href="#t1466121608000512" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:00:08</span>            codonnell </span><span>Note that if you&apos;re doing a transform, you&apos;ll lose the first element
</span><pre>(transform [(view rest) ALL] inc (range 5))
(2 3 4 5)
</pre></div><div id="t1466121754000513" t="2016-06-17 00:02:34 luxbock yeah I need the first element to stay intact"><a href="#t1466121754000513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:02:34</span>              luxbock </span><span>yeah I need the first element to stay intact</span></div><div id="t1466121757000514" t="2016-06-17 00:02:37 luxbock https://gist.github.com/luxbock/55ea567166081af107fd7a22582bf8c2"><a href="#t1466121757000514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:02:37</span>              luxbock </span><a href="https://gist.github.com/luxbock/55ea567166081af107fd7a22582bf8c2" target="_blank">https://gist.github.com/luxbock/55ea567166081af107fd7a22582bf8c2</a></div><div id="t1466121763000515" t="2016-06-17 00:02:43 luxbock that was my first try but it doesn&apos;t quite work"><a href="#t1466121763000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:02:43</span>              luxbock </span><span>that was my first try but it doesn&apos;t quite work</span></div><div id="t1466121855000516" t="2016-06-17 00:04:15 codonnell you don&apos;t need to call  nextfn  twice in your select"><a href="#t1466121855000516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:04:15</span>            codonnell </span><span>you don&apos;t need to call </span><code>nextfn</code><span> twice in your select</span></div><div id="t1466121871000517" t="2016-06-17 00:04:31 luxbock ah whops"><a href="#t1466121871000517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:04:31</span>              luxbock </span><span>ah whops</span></div><div id="t1466121882000518" t="2016-06-17 00:04:42 codonnell you do need it in your transform*, though"><a href="#t1466121882000518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:04:42</span>            codonnell </span><span>you do need it in your transform*, though</span></div><div id="t1466121919000519" t="2016-06-17 00:05:19 luxbock hmm?"><a href="#t1466121919000519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:05:19</span>              luxbock </span><span>hmm?</span></div><div id="t1466121953000520" t="2016-06-17 00:05:53 codonnell transform* also needs to perform  nextfn  on the passed in structure, and then reconstruct the original structure, replacing what you navigate to with the results of  nextfn"><a href="#t1466121953000520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:05:53</span>            codonnell </span><span>transform* also needs to perform </span><code>nextfn</code><span> on the passed in structure, and then reconstruct the original structure, replacing what you navigate to with the results of </span><code>nextfn</code></div><div id="t1466122000000521" t="2016-06-17 00:06:40 codonnell for example, the wiki example stores the result of  (nextfn (nth structure n))  and then replaces the nth element of  structure  with it"><a href="#t1466122000000521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:06:40</span>            codonnell </span><span>for example, the wiki example stores the result of </span><code>(nextfn (nth structure n))</code><span> and then replaces the nth element of </span><code>structure</code><span> with it</span></div><div id="t1466122064000522" t="2016-06-17 00:07:44 luxbock isn&apos;t that what I was doing though?"><a href="#t1466122064000522" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:07:44</span>              luxbock </span><span>isn&apos;t that what I was doing though?</span></div><div id="t1466122118000523" t="2016-06-17 00:08:38 codonnell oops"><a href="#t1466122118000523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:08:38</span>            codonnell </span><span>oops</span></div><div id="t1466122122000524" t="2016-06-17 00:08:42 codonnell yep, you&apos;re right"><a href="#t1466122122000524" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:08:42</span>            codonnell </span><span>yep, you&apos;re right</span></div><div id="t1466122138000525" t="2016-06-17 00:08:58 luxbock ah, I needed to map  next-fn  over the  (rest coll)"><a href="#t1466122138000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:08:58</span>              luxbock </span><span>ah, I needed to map </span><code>next-fn</code><span> over the </span><code>(rest coll)</code></div><div id="t1466122157000526" t="2016-06-17 00:09:17 luxbock great, now it works"><a href="#t1466122157000526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:09:17</span>              luxbock </span><span>great, now it works</span></div><div id="t1466122229000527" t="2016-06-17 00:10:29 codonnell no, that&apos;s not right"><a href="#t1466122229000527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:10:29</span>            codonnell </span><span>no, that&apos;s not right</span></div><div id="t1466122244000528" t="2016-06-17 00:10:44 codonnell I mean, you could do that if you want, but that&apos;s like doing  [REST ALL]"><a href="#t1466122244000528" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:10:44</span>            codonnell </span><span>I mean, you could do that if you want, but that&apos;s like doing </span><code>[REST ALL]</code></div><div id="t1466122267000529" t="2016-06-17 00:11:07 luxbock oh right"><a href="#t1466122267000529" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:11:07</span>              luxbock </span><span>oh right</span></div><div id="t1466122359000530" t="2016-06-17 00:12:39 luxbock yeah it was correct the firs time, but my own example useage was wrong"><a href="#t1466122359000530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:12:39</span>              luxbock </span><span>yeah it was correct the firs time, but my own example useage was wrong</span></div><div id="t1466122635000531" t="2016-06-17 00:17:15 luxbock I updated the gist so that it now works on sets  and maps as well, although obviously you probably wouldn&apos;t want to use it on thsoe"><a href="#t1466122635000531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:17:15</span>              luxbock </span><span>I updated the gist so that it now works on sets  and maps as well, although obviously you probably wouldn&apos;t want to use it on thsoe</span></div><div id="t1466122726000532" t="2016-06-17 00:18:46 luxbock I think it&apos;d be nice to have more selectors that mimic the bahavior of  clojure.core  functions (`TAKE`,  DROP  etc.)"><a href="#t1466122726000532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:18:46</span>              luxbock </span><span>I think it&apos;d be nice to have more selectors that mimic the bahavior of </span><code>clojure.core</code><span> functions (`TAKE`, </span><code>DROP</code><span> etc.)</span></div><div id="t1466122834000534" t="2016-06-17 00:20:34 codonnell I did not know about  empty"><a href="#t1466122834000534" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:20:34</span>            codonnell </span><span>I did not know about </span><code>empty</code></div><div id="t1466122835000535" t="2016-06-17 00:20:35 codonnell neat"><a href="#t1466122835000535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:20:35</span>            codonnell </span><span>neat</span></div><div id="t1466123084000536" t="2016-06-17 00:24:44 codonnell some of those functions are in the works, I think ( https://github.com/nathanmarz/specter/issues/121 )"><a href="#t1466123084000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">00:24:44</span>            codonnell </span><span>some of those functions are in the works, I think (</span><a href="https://github.com/nathanmarz/specter/issues/121" target="_blank">https://github.com/nathanmarz/specter/issues/121</a><span>)</span></div><div id="t1466125285000541" t="2016-06-17 01:01:25 luxbock https://gist.github.com/luxbock/4eb81767e6bb1f6169b4fb12ec8b9356"><a href="#t1466125285000541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:01:25</span>              luxbock </span><a href="https://gist.github.com/luxbock/4eb81767e6bb1f6169b4fb12ec8b9356" target="_blank">https://gist.github.com/luxbock/4eb81767e6bb1f6169b4fb12ec8b9356</a></div><div id="t1466125298000542" t="2016-06-17 01:01:38 luxbock this returns what I want, but I wonder if there&apos;s a way to write it using just one  transform"><a href="#t1466125298000542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:01:38</span>              luxbock </span><span>this returns what I want, but I wonder if there&apos;s a way to write it using just one </span><code>transform</code></div><div id="t1466125332000543" t="2016-06-17 01:02:12 luxbock the task is to read  :foo  and add it to each number of the  REST  of  :bar"><a href="#t1466125332000543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:02:12</span>              luxbock </span><span>the task is to read </span><code>:foo</code><span> and add it to each number of the </span><code>REST</code><span> of </span><code>:bar</code></div><div id="t1466125372000544" t="2016-06-17 01:02:52 luxbock and then to lift the modified  :bar  to be the returned value from the outer  transform"><a href="#t1466125372000544" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:02:52</span>              luxbock </span><span>and then to lift the modified </span><code>:bar</code><span> to be the returned value from the outer </span><code>transform</code></div><div id="t1466125855000545" t="2016-06-17 01:10:55 luxbock I think my vanilla Clojure version might be easier to read"><a href="#t1466125855000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:10:55</span>              luxbock </span><span>I think my vanilla Clojure version might be easier to read</span></div><div id="t1466126077000546" t="2016-06-17 01:14:37 codonnell (transform [ALL (collect-one :foo) :bar REST ALL ALL] + data)"><a href="#t1466126077000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:14:37</span>            codonnell </span><code>(transform [ALL (collect-one :foo) :bar REST ALL ALL] + data)</code></div><div id="t1466126093000547" t="2016-06-17 01:14:53 codonnell @luxbock: ^"><a href="#t1466126093000547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:14:53</span>            codonnell </span><span>@luxbock: ^</span></div><div id="t1466126181000548" t="2016-06-17 01:16:21 luxbock @codonnell: yeah that works except for it doesn&apos;t lift  :bar  up"><a href="#t1466126181000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:16:21</span>              luxbock </span><span>@codonnell: yeah that works except for it doesn&apos;t lift </span><code>:bar</code><span> up</span></div><div id="t1466126224000549" t="2016-06-17 01:17:04 luxbock but maybe  (mapv :bar (transform [ALL (collect-one :foo) :bar REST ALL ALL] + data))  is the most readable"><a href="#t1466126224000549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:17:04</span>              luxbock </span><span>but maybe </span><code>(mapv :bar (transform [ALL (collect-one :foo) :bar REST ALL ALL] + data))</code><span> is the most readable</span></div><div id="t1466126225000550" t="2016-06-17 01:17:05 codonnell alright, I&apos;ll take a closer look in a bit"><a href="#t1466126225000550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:17:05</span>            codonnell </span><span>alright, I&apos;ll take a closer look in a bit</span></div><div id="t1466126381000551" t="2016-06-17 01:19:41 luxbock I think that using  collect-one  with  transform  for the purpose of lifting an inner structure upwards is a bit verbose and doesn&apos;t feel so easily composable"><a href="#t1466126381000551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:19:41</span>              luxbock </span><span>I think that using </span><code>collect-one</code><span> with </span><code>transform</code><span> for the purpose of lifting an inner structure upwards is a bit verbose and doesn&apos;t feel so easily composable</span></div><div id="t1466126398000552" t="2016-06-17 01:19:58 codonnell (transform [ALL (collect-one :foo) (view :bar) REST ALL ALL] + data)"><a href="#t1466126398000552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:19:58</span>            codonnell </span><code>(transform [ALL (collect-one :foo) (view :bar) REST ALL ALL] + data)</code></div><div id="t1466126418000553" t="2016-06-17 01:20:18 codonnell that does it, I think"><a href="#t1466126418000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:20:18</span>            codonnell </span><span>that does it, I think</span></div><div id="t1466126441000554" t="2016-06-17 01:20:41 codonnell as for which is more readable, I&apos;d say that&apos;s a matter of opinion"><a href="#t1466126441000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:20:41</span>            codonnell </span><span>as for which is more readable, I&apos;d say that&apos;s a matter of opinion</span></div><div id="t1466126441000555" t="2016-06-17 01:20:41 luxbock yep! nice"><a href="#t1466126441000555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:20:41</span>              luxbock </span><span>yep! nice</span></div><div id="t1466126449000556" t="2016-06-17 01:20:49 codonnell probably has a lot to do with how familiar the reader is with specter"><a href="#t1466126449000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:20:49</span>            codonnell </span><span>probably has a lot to do with how familiar the reader is with specter</span></div><div id="t1466126458000557" t="2016-06-17 01:20:58 luxbock I did learn about  view  the other day so I should have been able to get that"><a href="#t1466126458000557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:20:58</span>              luxbock </span><span>I did learn about </span><code>view</code><span> the other day so I should have been able to get that</span></div><div id="t1466126636000558" t="2016-06-17 01:23:56 codonnell the fact that it&apos;s even possible to accomplish that transformation in one line of code is pretty absurd IMO"><a href="#t1466126636000558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:23:56</span>            codonnell </span><span>the fact that it&apos;s even possible to accomplish that transformation in one line of code is pretty absurd IMO</span></div><div id="t1466126648000559" t="2016-06-17 01:24:08 luxbock yeah definitely"><a href="#t1466126648000559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:24:08</span>              luxbock </span><span>yeah definitely</span></div><div id="t1466126695000560" t="2016-06-17 01:24:55 luxbock if only I could think at the speed at which I can type that  😛"><a href="#t1466126695000560" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:24:55</span>              luxbock </span><span>if only I could think at the speed at which I can type that </span><b>😛</b></div><div id="t1466127065000562" t="2016-06-17 01:31:05 luxbock and adding one more level of complexity takes only a small tweak:  https://gist.github.com/luxbock/c499f34ffe07c00404da7b2615295057"><a href="#t1466127065000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:31:05</span>              luxbock </span><span>and adding one more level of complexity takes only a small tweak: </span><a href="https://gist.github.com/luxbock/c499f34ffe07c00404da7b2615295057" target="_blank">https://gist.github.com/luxbock/c499f34ffe07c00404da7b2615295057</a></div><div id="t1466127889000563" t="2016-06-17 01:44:49 codonnell yep, very nice"><a href="#t1466127889000563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">01:44:49</span>            codonnell </span><span>yep, very nice</span></div><div id="t1466178413000578" t="2016-06-17 15:46:53 rauh @severed-infinity: Def. a Cursive problem, not specter"><a href="#t1466178413000578" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:46:53</span>                 rauh </span><span>@severed-infinity: Def. a Cursive problem, not specter</span></div><div id="t1466178424000579" t="2016-06-17 15:47:04 rauh You can get rid of almost all warning with the latest EAP version though"><a href="#t1466178424000579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:47:04</span>                 rauh </span><span>You can get rid of almost all warning with the latest EAP version though</span></div><div id="t1466178449000580" t="2016-06-17 15:47:29 rauh There you can tell Cursive that a macro is like a  def , thus defining the symbols"><a href="#t1466178449000580" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:47:29</span>                 rauh </span><span>There you can tell Cursive that a macro is like a </span><code>def</code><span>, thus defining the symbols</span></div><div id="t1466178465000581" t="2016-06-17 15:47:45 rauh And voila, you&apos;ll have full autocomplete for specter"><a href="#t1466178465000581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:47:45</span>                 rauh </span><span>And voila, you&apos;ll have full autocomplete for specter</span></div><div id="t1466178527000582" t="2016-06-17 15:48:47 rauh Simply go into the specter (and macros) source file, hover over a (eg.  devnav ) usage and choose  Resolve as ... def"><a href="#t1466178527000582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:48:47</span>                 rauh </span><span>Simply go into the specter (and macros) source file, hover over a (eg. </span><code>devnav</code><span>) usage and choose </span><code>Resolve as ... def</code></div><div id="t1466178549000583" t="2016-06-17 15:49:09 severed-infinity @rauh Ah I am using the latest EAP but did not know about this"><a href="#t1466178549000583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:49:09</span>     severed-infinity </span><span>@rauh Ah I am using the latest EAP but did not know about this</span></div><div id="t1466179082000585" t="2016-06-17 15:58:02 rauh You have to go into the specter source"><a href="#t1466179082000585" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:58:02</span>                 rauh </span><span>You have to go into the specter source</span></div><div id="t1466179090000586" t="2016-06-17 15:58:10 rauh F12 for me,  goto source  or someting like that"><a href="#t1466179090000586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:58:10</span>                 rauh </span><span>F12 for me, </span><code>goto source</code><span> or someting like that</span></div><div id="t1466179115000587" t="2016-06-17 15:58:35 rauh Well, you can&apos;t do that on an unresolved symbol (yet)  🙂"><a href="#t1466179115000587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:58:35</span>                 rauh </span><span>Well, you can&apos;t do that on an unresolved symbol (yet) </span><b>🙂</b></div><div id="t1466179138000588" t="2016-06-17 15:58:58 rauh so jump into specter source from maybe your  (:require ...)"><a href="#t1466179138000588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-17</span> <span class="t" onclick="H(this)">15:58:58</span>                 rauh </span><span>so jump into specter source from maybe your </span><code>(:require ...)</code></div><div id="t1466258449000604" t="2016-06-18 14:00:49 luxbock how would I write a selector that stops further navigation if the value it points to matches a predicate?"><a href="#t1466258449000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:00:49</span>              luxbock </span><span>how would I write a selector that stops further navigation if the value it points to matches a predicate?</span></div><div id="t1466258624000605" t="2016-06-18 14:03:44 luxbock probably something with  if-path , let&apos;s see"><a href="#t1466258624000605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:03:44</span>              luxbock </span><span>probably something with </span><code>if-path</code><span>, let&apos;s see</span></div><div id="t1466260340000609" t="2016-06-18 14:32:20 nathanmarz @luxbock: try  not-selected?"><a href="#t1466260340000609" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:32:20</span>           nathanmarz </span><span>@luxbock: try </span><code>not-selected?</code></div><div id="t1466260826000610" t="2016-06-18 14:40:26 luxbock @nathanmarz: thanks, yeah I think that would have solved my toy example, but I ended up writing a custom function for what I&apos;m attempting to do"><a href="#t1466260826000610" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:40:26</span>              luxbock </span><span>@nathanmarz: thanks, yeah I think that would have solved my toy example, but I ended up writing a custom function for what I&apos;m attempting to do</span></div><div id="t1466260857000611" t="2016-06-18 14:40:57 luxbock https://gist.github.com/luxbock/fda8f2ee4e642903d532d1b34db902e5"><a href="#t1466260857000611" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:40:57</span>              luxbock </span><a href="https://gist.github.com/luxbock/fda8f2ee4e642903d532d1b34db902e5" target="_blank">https://gist.github.com/luxbock/fda8f2ee4e642903d532d1b34db902e5</a></div><div id="t1466260868000612" t="2016-06-18 14:41:08 luxbock maybe it&apos;s possible to do it with specter as well"><a href="#t1466260868000612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-18</span> <span class="t" onclick="H(this)">14:41:08</span>              luxbock </span><span>maybe it&apos;s possible to do it with specter as well</span></div><div id="t1466327031000627" t="2016-06-19 09:03:51 thomasdeutsch what would be the specter version of this:    (map #(+ %1 %2) [1 2 3] [2 3 4])  ?"><a href="#t1466327031000627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-19</span> <span class="t" onclick="H(this)">09:03:51</span>        thomasdeutsch </span><span>what would be the specter version of this:   </span><code>(map #(+ %1 %2) [1 2 3] [2 3 4])</code><span> ?</span></div><div id="t1466330122000629" t="2016-06-19 09:55:22 nathanmarz @thomasdeutsch there isn&apos;t"><a href="#t1466330122000629" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-19</span> <span class="t" onclick="H(this)">09:55:22</span>           nathanmarz </span><span>@thomasdeutsch there isn&apos;t</span></div><div id="t1466546028000674" t="2016-06-21 21:53:48 josh.freckleton @nathanmarz: Thanks for inviting me to  specter , I think it&apos;s brilliant to have this sort of DSL for navigation, and I&apos;m excited for this lib to transform my workflow!

In our conversation yesterday (on #C03S1KBA2) I was talking about needing to post-order traverse a tree. I think I can see how I&apos;d piece that together using  specter , but I see talk toward the end of the  readme  about navigating graphs. What is the best practice if I wanted to post-order traverse a tree?"><a href="#t1466546028000674" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">21:53:48</span>      josh.freckleton </span><span>@nathanmarz: Thanks for inviting me to </span><code>specter</code><span>, I think it&apos;s brilliant to have this sort of DSL for navigation, and I&apos;m excited for this lib to transform my workflow!

In our conversation yesterday (on #C03S1KBA2) I was talking about needing to post-order traverse a tree. I think I can see how I&apos;d piece that together using </span><code>specter</code><span>, but I see talk toward the end of the </span><code>readme</code><span> about navigating graphs. What is the best practice if I wanted to post-order traverse a tree?</span></div><div id="t1466546048000675" t="2016-06-21 21:54:08 lellis Hello guys! I made a sort using sorted-map-by then i use into these specter:
 (transform (walker (fn [v] (and (keyword? v)))) #(keyword (clojure.string/replace (subs (str %) 1) &quot;/&quot; &quot;_&quot;)) sorted-map) 

But because inner specter use walker and walker says &quot;Note: &quot;walk&quot; supports all Clojure data structures EXCEPT maps
created with sorted-map-by.  There is no (obvious) way to retrieve
the sorting function.&quot; Is there another way to do that with specter?"><a href="#t1466546048000675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">21:54:08</span>               lellis </span><span>Hello guys! I made a sort using sorted-map-by then i use into these specter:
</span><pre>(transform (walker (fn [v] (and (keyword? v)))) #(keyword (clojure.string/replace (subs (str %) 1) &quot;/&quot; &quot;_&quot;)) sorted-map)</pre><span>

But because inner specter use walker and walker says &quot;Note: &quot;walk&quot; supports all Clojure data structures EXCEPT maps
created with sorted-map-by.  There is no (obvious) way to retrieve
the sorting function.&quot; Is there another way to do that with specter?</span></div><div id="t1466546247000676" t="2016-06-21 21:57:27 lellis Or is better  make my sort without sorted-map-by?"><a href="#t1466546247000676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">21:57:27</span>               lellis </span><span>Or is better  make my sort without sorted-map-by?</span></div><div id="t1466546971000677" t="2016-06-21 22:09:31 nathanmarz @josh.freckleton: do you mean best practice if you wanted to post-order traverse a graph?"><a href="#t1466546971000677" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:09:31</span>           nathanmarz </span><span>@josh.freckleton: do you mean best practice if you wanted to post-order traverse a graph?</span></div><div id="t1466547006000678" t="2016-06-21 22:10:06 josh.freckleton @nathanmarz: yes, that would be awesome! I don&apos;t quite get recursion, or ordering yet in  specter"><a href="#t1466547006000678" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:10:06</span>      josh.freckleton </span><span>@nathanmarz: yes, that would be awesome! I don&apos;t quite get recursion, or ordering yet in </span><code>specter</code></div><div id="t1466547034000679" t="2016-06-21 22:10:34 nathanmarz so internally I have a bunch of navigators built on top of loom"><a href="#t1466547034000679" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:10:34</span>           nathanmarz </span><span>so internally I have a bunch of navigators built on top of loom</span></div><div id="t1466547045000680" t="2016-06-21 22:10:45 nathanmarz https://github.com/aysylu/loom"><a href="#t1466547045000680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:10:45</span>           nathanmarz </span><a href="https://github.com/aysylu/loom" target="_blank">https://github.com/aysylu/loom</a></div><div id="t1466547109000682" t="2016-06-21 22:11:49 nathanmarz so I can do things like  (transform [REVERSE-TOPSORT ...] ...)"><a href="#t1466547109000682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:11:49</span>           nathanmarz </span><span>so I can do things like </span><code>(transform [REVERSE-TOPSORT ...] ...)</code></div><div id="t1466547125000683" t="2016-06-21 22:12:05 nathanmarz where reverse-topsort navigates to pairs of  [graph, node-id]  in reverse topological order"><a href="#t1466547125000683" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:12:05</span>           nathanmarz </span><span>where reverse-topsort navigates to pairs of </span><code>[graph, node-id]</code><span> in reverse topological order</span></div><div id="t1466547169000684" t="2016-06-21 22:12:49 nathanmarz at the end of my clojure/west talk I showed a complete example of my specter/loom integration"><a href="#t1466547169000684" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:12:49</span>           nathanmarz </span><span>at the end of my clojure/west talk I showed a complete example of my specter/loom integration</span></div><div id="t1466547188000685" t="2016-06-21 22:13:08 nathanmarz trying to encourage someone from the community to build an open-source version"><a href="#t1466547188000685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:13:08</span>           nathanmarz </span><span>trying to encourage someone from the community to build an open-source version</span></div><div id="t1466547278000686" t="2016-06-21 22:14:38 aengelberg That&apos;s odd that  clojure.walk/walk  claims to not work with  sorted-map-by . I just tried it in the REPL and it seems to work fine."><a href="#t1466547278000686" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:14:38</span>           aengelberg </span><span>That&apos;s odd that </span><code>clojure.walk/walk</code><span> claims to not work with </span><code>sorted-map-by</code><span>. I just tried it in the REPL and it seems to work fine.</span></div><div id="t1466547510000687" t="2016-06-21 22:18:30 nathanmarz hmm, didn&apos;t even know about  sorted-map-by"><a href="#t1466547510000687" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:18:30</span>           nathanmarz </span><span>hmm, didn&apos;t even know about </span><code>sorted-map-by</code></div><div id="t1466547524000688" t="2016-06-21 22:18:44 nathanmarz looks like  ALL  and  MAP-VALS  are broken with that, but  walker  does seem to work"><a href="#t1466547524000688" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:18:44</span>           nathanmarz </span><span>looks like </span><code>ALL</code><span> and </span><code>MAP-VALS</code><span> are broken with that, but </span><code>walker</code><span> does seem to work</span></div><div id="t1466548712000689" t="2016-06-21 22:38:32 nathanmarz that bug is fixed for next release  https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f"><a href="#t1466548712000689" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:38:32</span>           nathanmarz </span><span>that bug is fixed for next release </span><a href="https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f" target="_blank">https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f</a></div><div id="t1466549207000690" t="2016-06-21 22:46:47 josh.freckleton @nathanmarz: ah, it wasn&apos;t clear you were using  loom  at the end of that talk. Fantastic talk though! Would you by chance have a  gist  I could study?"><a href="#t1466549207000690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:46:47</span>      josh.freckleton </span><span>@nathanmarz: ah, it wasn&apos;t clear you were using </span><code>loom</code><span> at the end of that talk. Fantastic talk though! Would you by chance have a </span><code>gist</code><span> I could study?</span></div><div id="t1466549702000691" t="2016-06-21 22:55:02 aengelberg Do priority maps work with  ALL ?"><a href="#t1466549702000691" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">22:55:02</span>           aengelberg </span><span>Do priority maps work with </span><code>ALL</code><span>?</span></div><div id="t1466552228000692" t="2016-06-21 23:37:08 lellis I make some code for example: 
 (def demo-map {:a &quot;baa&quot; :b &quot;aab&quot;})

(def demo-map-sorted-by-value (into (sorted-map-by (fn [key1 key2]
                                                     (compare
                                                       [(get demo-map key1) key1]
                                                       [(get demo-map key2) key2]))) demo-map))

(def result (transform (walker (fn [v] (and (keyword? v)))) #(keyword (clojure.string/replace (subs (str %) 1) &quot;a&quot; &quot;c&quot;)) demo-map-sorted-by-value))

demo-map =&gt; {:a &quot;baa&quot;, :b &quot;aab&quot;}
demo-map-sorted-by-value =&gt; {:b &quot;aab&quot;, :a &quot;baa&quot;}
result =&gt; {:c &quot;baa&quot;, :b &quot;aab”}

 
The question is: Why i lost my sort by value?"><a href="#t1466552228000692" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">23:37:08</span>               lellis </span><span>I make some code for example: 
</span><pre>(def demo-map {:a &quot;baa&quot; :b &quot;aab&quot;})

(def demo-map-sorted-by-value (into (sorted-map-by (fn [key1 key2]
                                                     (compare
                                                       [(get demo-map key1) key1]
                                                       [(get demo-map key2) key2]))) demo-map))

(def result (transform (walker (fn [v] (and (keyword? v)))) #(keyword (clojure.string/replace (subs (str %) 1) &quot;a&quot; &quot;c&quot;)) demo-map-sorted-by-value))

demo-map =&gt; {:a &quot;baa&quot;, :b &quot;aab&quot;}
demo-map-sorted-by-value =&gt; {:b &quot;aab&quot;, :a &quot;baa&quot;}
result =&gt; {:c &quot;baa&quot;, :b &quot;aab”}

</pre><span>
The question is: Why i lost my sort by value?</span></div><div id="t1466552450000693" t="2016-06-21 23:40:50 codonnell @lellis: that should be fixed in master with  https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f"><a href="#t1466552450000693" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-21</span> <span class="t" onclick="H(this)">23:40:50</span>            codonnell </span><span>@lellis: that should be fixed in master with </span><a href="https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f" target="_blank">https://github.com/nathanmarz/specter/commit/9ff9ef6650d3faab5421dd6452a716421a81554f</a></div><div id="t1466557309000697" t="2016-06-22 01:01:49 nathanmarz @lellis: Your compare function compares with the values inside  demo-map"><a href="#t1466557309000697" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:01:49</span>           nathanmarz </span><span>@lellis: Your compare function compares with the values inside </span><code>demo-map</code></div><div id="t1466557324000698" t="2016-06-22 01:02:04 nathanmarz so you&apos;re comparing [nil :c] vs.  [&quot;aab&quot; :b]"><a href="#t1466557324000698" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:02:04</span>           nathanmarz </span><span>so you&apos;re comparing [nil :c] vs.  [&quot;aab&quot; :b]</span></div><div id="t1466557333000699" t="2016-06-22 01:02:13 nathanmarz the maps themselves have the correct comparison function"><a href="#t1466557333000699" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:02:13</span>           nathanmarz </span><span>the maps themselves have the correct comparison function</span></div><div id="t1466557352000700" t="2016-06-22 01:02:32 nathanmarz user=&gt; (identical? (.comparator result) (.comparator demo-map-sorted-by-value))
true
"><a href="#t1466557352000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:02:32</span>           nathanmarz </span><pre>user=&gt; (identical? (.comparator result) (.comparator demo-map-sorted-by-value))
true
</pre></div><div id="t1466557476000701" t="2016-06-22 01:04:36 nathanmarz @aengelberg: which priority map?"><a href="#t1466557476000701" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:04:36</span>           nathanmarz </span><span>@aengelberg: which priority map?</span></div><div id="t1466557541000702" t="2016-06-22 01:05:41 nathanmarz maps other than clojure&apos;s persistent types will run the  Object  case of  all-transform  protocol (which is the former implementation of  ALL )"><a href="#t1466557541000702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:05:41</span>           nathanmarz </span><span>maps other than clojure&apos;s persistent types will run the </span><code>Object</code><span> case of </span><code>all-transform</code><span> protocol (which is the former implementation of </span><code>ALL</code><span>)</span></div><div id="t1466557600000703" t="2016-06-22 01:06:40 nathanmarz @josh.freckleton: Nothing besides what I showed in that talk:  https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L466"><a href="#t1466557600000703" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:06:40</span>           nathanmarz </span><span>@josh.freckleton: Nothing besides what I showed in that talk: </span><a href="https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L466" target="_blank">https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L466</a></div><div id="t1466557644000705" t="2016-06-22 01:07:24 nathanmarz I work with DAGs so my operators are specific to those"><a href="#t1466557644000705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:07:24</span>           nathanmarz </span><span>I work with DAGs so my operators are specific to those</span></div><div id="t1466557675000706" t="2016-06-22 01:07:55 aengelberg External library. clojure.data.priority-map"><a href="#t1466557675000706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:07:55</span>           aengelberg </span><span>External library. clojure.data.priority-map</span></div><div id="t1466557758000707" t="2016-06-22 01:09:18 nathanmarz PARENTS ,  CHILDREN ,  TOPSORT ,  NODE , and then a bunch of different ways to navigate to &quot;subgraphs&quot;"><a href="#t1466557758000707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:09:18</span>           nathanmarz </span><code>PARENTS</code><span>, </span><code>CHILDREN</code><span>, </span><code>TOPSORT</code><span>, </span><code>NODE</code><span>, and then a bunch of different ways to navigate to &quot;subgraphs&quot;</span></div><div id="t1466557816000708" t="2016-06-22 01:10:16 nathanmarz subgraph navigators are similar in concept to  subset  and  submap , and metadata on the transformed subgraph indicates how to re-attach the edges that were formerly to the prior subgraph"><a href="#t1466557816000708" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:10:16</span>           nathanmarz </span><span>subgraph navigators are similar in concept to </span><code>subset</code><span> and </span><code>submap</code><span>, and metadata on the transformed subgraph indicates how to re-attach the edges that were formerly to the prior subgraph</span></div><div id="t1466557830000709" t="2016-06-22 01:10:30 nathanmarz @aengelberg: if it correctly implements  empty  I imagine it should work"><a href="#t1466557830000709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:10:30</span>           nathanmarz </span><span>@aengelberg: if it correctly implements </span><code>empty</code><span> I imagine it should work</span></div><div id="t1466557881000710" t="2016-06-22 01:11:21 nathanmarz and  IKVReduce"><a href="#t1466557881000710" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:11:21</span>           nathanmarz </span><span>and </span><code>IKVReduce</code></div><div id="t1466557900000711" t="2016-06-22 01:11:40 nathanmarz wouldn&apos;t be as fast as the other ones though since the default handler does a bunch of other checks beforehand"><a href="#t1466557900000711" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">01:11:40</span>           nathanmarz </span><span>wouldn&apos;t be as fast as the other ones though since the default handler does a bunch of other checks beforehand</span></div><div id="t1466592840000719" t="2016-06-22 10:54:00 odinodin Is is possible to remove nodes from a tree structure with specter? I can only manage to replace nodes with nil"><a href="#t1466592840000719" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">10:54:00</span>             odinodin </span><span>Is is possible to remove nodes from a tree structure with specter? I can only manage to replace nodes with nil</span></div><div id="t1466594142000720" t="2016-06-22 11:15:42 nathanmarz @odinodin: how are you representing your tree?"><a href="#t1466594142000720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:15:42</span>           nathanmarz </span><span>@odinodin: how are you representing your tree?</span></div><div id="t1466594521000721" t="2016-06-22 11:22:01 odinodin (def all-pages
  {:pages {:page-id &quot;home&quot;,
           :options &apos;({:page-id &quot;other_inq&quot;}
                      {:page-id &quot;other_inq&quot;,
                       :access #{&quot;employee&quot;}})}})

(defn only-authorized [pages access]
  (-&gt;&gt; pages
       (transform*
         [(walker #(and (map? %) (contains? % :access)))]
         (fn [page] (when (-&gt; page :access (some access)) page)))))
"><a href="#t1466594521000721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:22:01</span>             odinodin </span><pre>(def all-pages
  {:pages {:page-id &quot;home&quot;,
           :options &apos;({:page-id &quot;other_inq&quot;}
                      {:page-id &quot;other_inq&quot;,
                       :access #{&quot;employee&quot;}})}})

(defn only-authorized [pages access]
  (-&gt;&gt; pages
       (transform*
         [(walker #(and (map? %) (contains? % :access)))]
         (fn [page] (when (-&gt; page :access (some access)) page)))))
</pre></div><div id="t1466594546000722" t="2016-06-22 11:22:26 odinodin only-authorized returns
  {:pages {:page-id &quot;home&quot;, :options ({:page-id &quot;other_inq&quot;} nil)}} "><a href="#t1466594546000722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:22:26</span>             odinodin </span><span>only-authorized returns
 </span><pre>{:pages {:page-id &quot;home&quot;, :options ({:page-id &quot;other_inq&quot;} nil)}} </pre></div><div id="t1466594587000723" t="2016-06-22 11:23:07 odinodin my current fix for removing the nil is : 
 (defn only-authorized [pages access]
  (-&gt;&gt; pages
       (transform*
         [(walker #(and (map? %) (contains? % :access)))]
         (fn [page] (when (-&gt; page :access (some access)) page)))
       (transform*
           [(walker #(and (map? %) (contains? % :options)))]
           (fn [x] (update x :options (partial remove nil?))))))
"><a href="#t1466594587000723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:23:07</span>             odinodin </span><span>my current fix for removing the nil is : 
</span><pre>(defn only-authorized [pages access]
  (-&gt;&gt; pages
       (transform*
         [(walker #(and (map? %) (contains? % :access)))]
         (fn [page] (when (-&gt; page :access (some access)) page)))
       (transform*
           [(walker #(and (map? %) (contains? % :options)))]
           (fn [x] (update x :options (partial remove nil?))))))
</pre></div><div id="t1466594729000724" t="2016-06-22 11:25:29 nathanmarz well you definitely can&apos;t do it with  walker"><a href="#t1466594729000724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:25:29</span>           nathanmarz </span><span>well you definitely can&apos;t do it with </span><code>walker</code></div><div id="t1466594780000725" t="2016-06-22 11:26:20 nathanmarz if you make your own recursive path there&apos;s a variety of ways of doing it"><a href="#t1466594780000725" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:26:20</span>           nathanmarz </span><span>if you make your own recursive path there&apos;s a variety of ways of doing it</span></div><div id="t1466594949000726" t="2016-06-22 11:29:09 odinodin I saw the next version of specter has a NONE value, what if I could return NONE instead of nil in the transform-function?"><a href="#t1466594949000726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:29:09</span>             odinodin </span><span>I saw the next version of specter has a NONE value, what if I could return NONE instead of nil in the transform-function?</span></div><div id="t1466595119000727" t="2016-06-22 11:31:59 nathanmarz @odinodin: I&apos;ll show you how to do it"><a href="#t1466595119000727" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:31:59</span>           nathanmarz </span><span>@odinodin: I&apos;ll show you how to do it</span></div><div id="t1466595130000728" t="2016-06-22 11:32:10 nathanmarz @odinodin: not yet decided whether that feature idea will become reality"><a href="#t1466595130000728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:32:10</span>           nathanmarz </span><span>@odinodin: not yet decided whether that feature idea will become reality</span></div><div id="t1466595145000729" t="2016-06-22 11:32:25 nathanmarz your data structure also isn&apos;t recursive"><a href="#t1466595145000729" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:32:25</span>           nathanmarz </span><span>your data structure also isn&apos;t recursive</span></div><div id="t1466595162000730" t="2016-06-22 11:32:42 odinodin it is, just simplified the example"><a href="#t1466595162000730" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:32:42</span>             odinodin </span><span>it is, just simplified the example</span></div><div id="t1466595176000731" t="2016-06-22 11:32:56 nathanmarz this example isn&apos;t recursive so it&apos;s hard to show you what to do"><a href="#t1466595176000731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:32:56</span>           nathanmarz </span><span>this example isn&apos;t recursive so it&apos;s hard to show you what to do</span></div><div id="t1466595223000732" t="2016-06-22 11:33:43 nathanmarz i think if you change :options to :pages its recursive"><a href="#t1466595223000732" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:33:43</span>           nathanmarz </span><span>i think if you change :options to :pages its recursive</span></div><div id="t1466595281000733" t="2016-06-22 11:34:41 odinodin (def all-pages
  {:pages {:page-id &quot;home&quot;,
           :options &apos;({:page-id &quot;a&quot; :options ({:page-id &quot;c&quot;, :access #{&quot;external&quot;}})}
                       {:page-id &quot;b&quot;, :access #{&quot;employee&quot;}})}})
"><a href="#t1466595281000733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:34:41</span>             odinodin </span><pre>(def all-pages
  {:pages {:page-id &quot;home&quot;,
           :options &apos;({:page-id &quot;a&quot; :options ({:page-id &quot;c&quot;, :access #{&quot;external&quot;}})}
                       {:page-id &quot;b&quot;, :access #{&quot;employee&quot;}})}})
</pre></div><div id="t1466595484000734" t="2016-06-22 11:38:04 nathanmarz @odinodin: 
 (def all-pages
  {:page-id &quot;root&quot;
   :pages [{:page-id &quot;other-page&quot;,
            :pages &apos;({:page-id &quot;other_inq&quot;}
                     {:page-id &quot;other_inq&quot;,
                      :access #{&quot;employee&quot;}})}]
          })

(declarepath NODES)

(providepath NODES
  (stay-then-continue
    (must :pages) ALL NODES
    ))


(setval
  [NODES
   (must :pages)
   (continuous-subseqs :access)
   ]
  []
  all-pages
  )
"><a href="#t1466595484000734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:38:04</span>           nathanmarz </span><span>@odinodin: 
</span><pre>(def all-pages
  {:page-id &quot;root&quot;
   :pages [{:page-id &quot;other-page&quot;,
            :pages &apos;({:page-id &quot;other_inq&quot;}
                     {:page-id &quot;other_inq&quot;,
                      :access #{&quot;employee&quot;}})}]
          })

(declarepath NODES)

(providepath NODES
  (stay-then-continue
    (must :pages) ALL NODES
    ))


(setval
  [NODES
   (must :pages)
   (continuous-subseqs :access)
   ]
  []
  all-pages
  )
</pre></div><div id="t1466595489000735" t="2016-06-22 11:38:09 nathanmarz that&apos;s one way to do it"><a href="#t1466595489000735" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:38:09</span>           nathanmarz </span><span>that&apos;s one way to do it</span></div><div id="t1466595510000736" t="2016-06-22 11:38:30 odinodin sweet, thanks  🙂"><a href="#t1466595510000736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:38:30</span>             odinodin </span><span>sweet, thanks </span><b>🙂</b></div><div id="t1466595522000737" t="2016-06-22 11:38:42 nathanmarz modified the example data to be recursive in structure"><a href="#t1466595522000737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:38:42</span>           nathanmarz </span><span>modified the example data to be recursive in structure</span></div><div id="t1466595569000738" t="2016-06-22 11:39:29 odinodin specter is really awesome, thanks for making it  🙂"><a href="#t1466595569000738" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:39:29</span>             odinodin </span><span>specter is really awesome, thanks for making it </span><b>🙂</b></div><div id="t1466595711000739" t="2016-06-22 11:41:51 nathanmarz enjoy  🙂"><a href="#t1466595711000739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">11:41:51</span>           nathanmarz </span><span>enjoy </span><b>🙂</b></div><div id="t1466611438000744" t="2016-06-22 16:03:58 luxbock (transform [(collect MAP-VALS) MAP-VALS] (fn [vs n] (/ n (apply + vs))) (frequencies [1 1 2 2 2 3 4 4 4]))"><a href="#t1466611438000744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:03:58</span>              luxbock </span><code>(transform [(collect MAP-VALS) MAP-VALS] (fn [vs n] (/ n (apply + vs))) (frequencies [1 1 2 2 2 3 4 4 4]))</code></div><div id="t1466611490000745" t="2016-06-22 16:04:50 luxbock is there any way to avoid calculating the sum of the values for every individual value as I&apos;m doing there?"><a href="#t1466611490000745" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:04:50</span>              luxbock </span><span>is there any way to avoid calculating the sum of the values for every individual value as I&apos;m doing there?</span></div><div id="t1466611523000746" t="2016-06-22 16:05:23 luxbock a specter way of doing that I mean"><a href="#t1466611523000746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:05:23</span>              luxbock </span><span>a specter way of doing that I mean</span></div><div id="t1466611935000747" t="2016-06-22 16:12:15 nathanmarz @luxbock: like this?
 (transform [(collect-one (view count)) (view frequencies) MAP-VALS]
  (fn [s n] (/ n s))
  [1 1 2 2 2 3 4 4 4]
  )
"><a href="#t1466611935000747" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:12:15</span>           nathanmarz </span><span>@luxbock: like this?
</span><pre>(transform [(collect-one (view count)) (view frequencies) MAP-VALS]
  (fn [s n] (/ n s))
  [1 1 2 2 2 3 4 4 4]
  )
</pre></div><div id="t1466612089000748" t="2016-06-22 16:14:49 luxbock ah very nice"><a href="#t1466612089000748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:14:49</span>              luxbock </span><span>ah very nice</span></div><div id="t1466613458000749" t="2016-06-22 16:37:38 luxbock (transform [ALL (view :foo) #(&gt; % 2)]
  str
  [{:foo 1} {:foo 2} {:foo 3} {:foo 4}])
;; =&gt; [1 2 &quot;3&quot; &quot;4&quot;]
"><a href="#t1466613458000749" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:37:38</span>              luxbock </span><pre>(transform [ALL (view :foo) #(&gt; % 2)]
  str
  [{:foo 1} {:foo 2} {:foo 3} {:foo 4}])
;; =&gt; [1 2 &quot;3&quot; &quot;4&quot;]
</pre></div><div id="t1466613477000750" t="2016-06-22 16:37:57 luxbock how would I do this but only get  [&quot;3&quot; &quot;4&quot;]  back?"><a href="#t1466613477000750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:37:57</span>              luxbock </span><span>how would I do this but only get </span><code>[&quot;3&quot; &quot;4&quot;]</code><span> back?</span></div><div id="t1466614425000751" t="2016-06-22 16:53:45 nathanmarz @luxbock:  (select [ALL :foo #(&gt; % 2) (view str)] [{:foo 1} {:foo 2} {:foo 3} {:foo 4}])"><a href="#t1466614425000751" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">16:53:45</span>           nathanmarz </span><span>@luxbock: </span><code>(select [ALL :foo #(&gt; % 2) (view str)] [{:foo 1} {:foo 2} {:foo 3} {:foo 4}])</code></div><div id="t1466614998000752" t="2016-06-22 17:03:18 luxbock @nathanmarz:  in my case  :foo  is actually a function that retrieves the value from deeper in the map, which is why I used  view  with it"><a href="#t1466614998000752" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">17:03:18</span>              luxbock </span><span>@nathanmarz:  in my case </span><code>:foo</code><span> is actually a function that retrieves the value from deeper in the map, which is why I used </span><code>view</code><span> with it</span></div><div id="t1466615072000753" t="2016-06-22 17:04:32 luxbock ah, but it looks like it actually works if I just wrap it in  view  and then use  select"><a href="#t1466615072000753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">17:04:32</span>              luxbock </span><span>ah, but it looks like it actually works if I just wrap it in </span><code>view</code><span> and then use </span><code>select</code></div><div id="t1466615073000754" t="2016-06-22 17:04:33 luxbock great"><a href="#t1466615073000754" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-22</span> <span class="t" onclick="H(this)">17:04:33</span>              luxbock </span><span>great</span></div><div id="t1466642141000764" t="2016-06-23 00:35:41 aengelberg @nathanmarz just saw your post about  multi-transform , looks interesting. Have you considered adding a  terminal-val  which sets the value instead of transforms it (like  setval  is to  transform )?"><a href="#t1466642141000764" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">00:35:41</span>           aengelberg </span><span>@nathanmarz just saw your post about </span><code>multi-transform</code><span>, looks interesting. Have you considered adding a </span><code>terminal-val</code><span> which sets the value instead of transforms it (like </span><code>setval</code><span> is to </span><code>transform</code><span>)?</span></div><div id="t1466643224000765" t="2016-06-23 00:53:44 nathanmarz @aengelberg: good idea, i&apos;ll add that to the branch"><a href="#t1466643224000765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">00:53:44</span>           nathanmarz </span><span>@aengelberg: good idea, i&apos;ll add that to the branch</span></div><div id="t1466643661000766" t="2016-06-23 01:01:01 nathanmarz @aengelberg:  https://github.com/nathanmarz/specter/commit/50d2aa48f57df75b8395950ac0511f63849da400"><a href="#t1466643661000766" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:01:01</span>           nathanmarz </span><span>@aengelberg: </span><a href="https://github.com/nathanmarz/specter/commit/50d2aa48f57df75b8395950ac0511f63849da400" target="_blank">https://github.com/nathanmarz/specter/commit/50d2aa48f57df75b8395950ac0511f63849da400</a></div><div id="t1466643785000767" t="2016-06-23 01:03:05 aengelberg just realized that setval does not work with collect... is this a bug?
 boot.user=&gt; (setval [:a (collect STAY)] 2 {:a 1})

clojure.lang.ArityException: Wrong number of args (2) passed to: impl/compiled-setval*/fn--2959
"><a href="#t1466643785000767" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:03:05</span>           aengelberg </span><span>just realized that setval does not work with collect... is this a bug?
</span><pre>boot.user=&gt; (setval [:a (collect STAY)] 2 {:a 1})

clojure.lang.ArityException: Wrong number of args (2) passed to: impl/compiled-setval*/fn--2959
</pre></div><div id="t1466643816000768" t="2016-06-23 01:03:36 aengelberg I was about to say, why not switch  constantly  to  (fn [_] val)  like setval uses, for efficiency..."><a href="#t1466643816000768" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:03:36</span>           aengelberg </span><span>I was about to say, why not switch </span><code>constantly</code><span> to </span><code>(fn [_] val)</code><span> like setval uses, for efficiency...</span></div><div id="t1466643883000770" t="2016-06-23 01:04:43 nathanmarz ah, just looked at the implementation of  constantly"><a href="#t1466643883000770" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:04:43</span>           nathanmarz </span><span>ah, just looked at the implementation of </span><code>constantly</code></div><div id="t1466643896000771" t="2016-06-23 01:04:56 nathanmarz but yea that&apos;s a bug"><a href="#t1466643896000771" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:04:56</span>           nathanmarz </span><span>but yea that&apos;s a bug</span></div><div id="t1466643919000772" t="2016-06-23 01:05:19 nathanmarz though it&apos;s a weird bug to hit"><a href="#t1466643919000772" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:05:19</span>           nathanmarz </span><span>though it&apos;s a weird bug to hit</span></div><div id="t1466644231000773" t="2016-06-23 01:10:31 aengelberg user&gt; (let [f (constantly 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 178.060125 msecs&quot;
&quot;Elapsed time: 164.164117 msecs&quot;
&quot;Elapsed time: 170.549443 msecs&quot;
&quot;Elapsed time: 165.947481 msecs&quot;
&quot;Elapsed time: 163.606619 msecs&quot;
nil
user&gt; (let [f (fn [_] 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 55.36876 msecs&quot;
&quot;Elapsed time: 47.140944 msecs&quot;
&quot;Elapsed time: 46.974314 msecs&quot;
&quot;Elapsed time: 46.51298 msecs&quot;
&quot;Elapsed time: 44.286403 msecs&quot;
nil
user&gt; (let [f (fn [_ &amp; _] 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 86.562498 msecs&quot;
&quot;Elapsed time: 89.103274 msecs&quot;
&quot;Elapsed time: 86.074677 msecs&quot;
&quot;Elapsed time: 87.669437 msecs&quot;
&quot;Elapsed time: 89.690679 msecs&quot;
nil
 
(edited with more accurate benchmark)"><a href="#t1466644231000773" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:10:31</span>           aengelberg </span><pre>user&gt; (let [f (constantly 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 178.060125 msecs&quot;
&quot;Elapsed time: 164.164117 msecs&quot;
&quot;Elapsed time: 170.549443 msecs&quot;
&quot;Elapsed time: 165.947481 msecs&quot;
&quot;Elapsed time: 163.606619 msecs&quot;
nil
user&gt; (let [f (fn [_] 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 55.36876 msecs&quot;
&quot;Elapsed time: 47.140944 msecs&quot;
&quot;Elapsed time: 46.974314 msecs&quot;
&quot;Elapsed time: 46.51298 msecs&quot;
&quot;Elapsed time: 44.286403 msecs&quot;
nil
user&gt; (let [f (fn [_ &amp; _] 1)] (dotimes [i 5] (time (dotimes [i 10000000] (f 2)))))
&quot;Elapsed time: 86.562498 msecs&quot;
&quot;Elapsed time: 89.103274 msecs&quot;
&quot;Elapsed time: 86.074677 msecs&quot;
&quot;Elapsed time: 87.669437 msecs&quot;
&quot;Elapsed time: 89.690679 msecs&quot;
nil
</pre><span>
(edited with more accurate benchmark)</span></div><div id="t1466644318000774" t="2016-06-23 01:11:58 aengelberg There&apos;s a spectrum"><a href="#t1466644318000774" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:11:58</span>           aengelberg </span><span>There&apos;s a spectrum</span></div><div id="t1466644977000776" t="2016-06-23 01:22:57 nathanmarz hand-rolled a  fast-constantly  and also fixed that bug"><a href="#t1466644977000776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">01:22:57</span>           nathanmarz </span><span>hand-rolled a </span><code>fast-constantly</code><span> and also fixed that bug</span></div><div id="t1466670469000783" t="2016-06-23 08:27:49 luxbock are  (transform [&lt;selector&gt; (view f)] identity coll)  and  (transform &lt;selector&gt; f coll)  interchangeable? is the latter going to be faster?"><a href="#t1466670469000783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">08:27:49</span>              luxbock </span><span>are </span><code>(transform [&lt;selector&gt; (view f)] identity coll)</code><span> and </span><code>(transform &lt;selector&gt; f coll)</code><span> interchangeable? is the latter going to be faster?</span></div><div id="t1466670688000784" t="2016-06-23 08:31:28 luxbock using  specter  feels a bit like concatenative programming to me"><a href="#t1466670688000784" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">08:31:28</span>              luxbock </span><span>using </span><code>specter</code><span> feels a bit like concatenative programming to me</span></div><div id="t1466670705000785" t="2016-06-23 08:31:45 luxbock I wonder if there are some ideas there that could be applicable"><a href="#t1466670705000785" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">08:31:45</span>              luxbock </span><span>I wonder if there are some ideas there that could be applicable</span></div><div id="t1466670858000786" t="2016-06-23 08:34:18 luxbock you could think of  VAL  as an analog of  dup  and the discussed  OMIT  as being  drop"><a href="#t1466670858000786" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">08:34:18</span>              luxbock </span><span>you could think of </span><code>VAL</code><span> as an analog of </span><code>dup</code><span> and the discussed </span><code>OMIT</code><span> as being </span><code>drop</code></div><div id="t1466670934000787" t="2016-06-23 08:35:34 luxbock concatenative languages can be extremely expressive and allow for easy meta-programming"><a href="#t1466670934000787" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">08:35:34</span>              luxbock </span><span>concatenative languages can be extremely expressive and allow for easy meta-programming</span></div><div id="t1466673131000788" t="2016-06-23 09:12:11 luxbock I played around with combining this idea with destructuring:  https://gist.github.com/luxbock/f93529b82792ef35db12fcf5e5a78fdb"><a href="#t1466673131000788" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">09:12:11</span>              luxbock </span><span>I played around with combining this idea with destructuring: </span><a href="https://gist.github.com/luxbock/f93529b82792ef35db12fcf5e5a78fdb" target="_blank">https://gist.github.com/luxbock/f93529b82792ef35db12fcf5e5a78fdb</a></div><div id="t1466689955000792" t="2016-06-23 13:52:35 nathanmarz @luxbock: they are not interchangeable as  f  in the latter form will receive collected values while  f  in the former will not"><a href="#t1466689955000792" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">13:52:35</span>           nathanmarz </span><span>@luxbock: they are not interchangeable as </span><code>f</code><span> in the latter form will receive collected values while </span><code>f</code><span> in the former will not</span></div><div id="t1466689960000793" t="2016-06-23 13:52:40 nathanmarz the latter will also be faster"><a href="#t1466689960000793" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">13:52:40</span>           nathanmarz </span><span>the latter will also be faster</span></div><div id="t1466690431000794" t="2016-06-23 14:00:31 nathanmarz @luxbock: interesting ideas, but can&apos;t the starting example be written as this?
 (transform
  [MAP-VALS
   (view frequencies)
   (collect-one (subselect MAP-VALS) (view #(apply max %)))
   MAP-VALS]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
"><a href="#t1466690431000794" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">14:00:31</span>           nathanmarz </span><span>@luxbock: interesting ideas, but can&apos;t the starting example be written as this?
</span><pre>(transform
  [MAP-VALS
   (view frequencies)
   (collect-one (subselect MAP-VALS) (view #(apply max %)))
   MAP-VALS]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
</pre></div><div id="t1466691168000795" t="2016-06-23 14:12:48 luxbock yes you are correct, my specter-fu is still far from perfect  🙂"><a href="#t1466691168000795" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">14:12:48</span>              luxbock </span><span>yes you are correct, my specter-fu is still far from perfect </span><b>🙂</b></div><div id="t1466693161000799" t="2016-06-23 14:46:01 nathanmarz you&apos;ll get there  🙂"><a href="#t1466693161000799" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">14:46:01</span>           nathanmarz </span><span>you&apos;ll get there </span><b>🙂</b></div><div id="t1466693172000800" t="2016-06-23 14:46:12 nathanmarz just realized it can be made even more concise:
 (transform
  [MAP-VALS
   (view frequencies)
   (subselect MAP-VALS)
   (collect-one (view #(apply max %)))
   ALL]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
"><a href="#t1466693172000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">14:46:12</span>           nathanmarz </span><span>just realized it can be made even more concise:
</span><pre>(transform
  [MAP-VALS
   (view frequencies)
   (subselect MAP-VALS)
   (collect-one (view #(apply max %)))
   ALL]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
</pre></div><div id="t1466693206000801" t="2016-06-23 14:46:46 luxbock nice"><a href="#t1466693206000801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">14:46:46</span>              luxbock </span><span>nice</span></div><div id="t1466694011000802" t="2016-06-23 15:00:11 luxbock if I wanted to do the same thing, but wanted to  inc  all the numbers before using  frequencies  and the rest of the selectors, can I somehow fit that into the selector?"><a href="#t1466694011000802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:00:11</span>              luxbock </span><span>if I wanted to do the same thing, but wanted to </span><code>inc</code><span> all the numbers before using </span><code>frequencies</code><span> and the rest of the selectors, can I somehow fit that into the selector?</span></div><div id="t1466694043000803" t="2016-06-23 15:00:43 luxbock I have this type of situation where I had a nested  transform  like in my example, and I&apos;m now trying to re-write it using your approach"><a href="#t1466694043000803" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:00:43</span>              luxbock </span><span>I have this type of situation where I had a nested </span><code>transform</code><span> like in my example, and I&apos;m now trying to re-write it using your approach</span></div><div id="t1466694081000804" t="2016-06-23 15:01:21 luxbock but instead of numbers in a vector, I have a collection of maps where I need to fetch a nested value and then round those up before calling  frequencies"><a href="#t1466694081000804" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:01:21</span>              luxbock </span><span>but instead of numbers in a vector, I have a collection of maps where I need to fetch a nested value and then round those up before calling </span><code>frequencies</code></div><div id="t1466694176000805" t="2016-06-23 15:02:56 luxbock so I need to start with  MAP-VALS ,  ALL ,  (view inc) , but then I&apos;d need to go back up a level in the selection"><a href="#t1466694176000805" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:02:56</span>              luxbock </span><span>so I need to start with </span><code>MAP-VALS</code><span>, </span><code>ALL</code><span>, </span><code>(view inc)</code><span>, but then I&apos;d need to go back up a level in the selection</span></div><div id="t1466694810000806" t="2016-06-23 15:13:30 nathanmarz @luxbock: is  transformed  what you&apos;re looking for?
 (transform
  [MAP-VALS
   (transformed ALL inc)
   (view frequencies)
   (subselect MAP-VALS)
   (collect-one (view #(apply max %)))
   ALL]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
"><a href="#t1466694810000806" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:13:30</span>           nathanmarz </span><span>@luxbock: is </span><code>transformed</code><span> what you&apos;re looking for?
</span><pre>(transform
  [MAP-VALS
   (transformed ALL inc)
   (view frequencies)
   (subselect MAP-VALS)
   (collect-one (view #(apply max %)))
   ALL]
  (fn [mx e] (/ e mx))
  {:a [1 1 3 4] :b [1 1 2 2 2 3]})
</pre></div><div id="t1466695092000807" t="2016-06-23 15:18:12 luxbock @nathanmarz: yeah it works for my toy example, thanks"><a href="#t1466695092000807" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:18:12</span>              luxbock </span><span>@nathanmarz: yeah it works for my toy example, thanks</span></div><div id="t1466695107000808" t="2016-06-23 15:18:27 luxbock my actual use case is still a bit more complicated so I need to figure out a few more things"><a href="#t1466695107000808" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:18:27</span>              luxbock </span><span>my actual use case is still a bit more complicated so I need to figure out a few more things</span></div><div id="t1466695188000809" t="2016-06-23 15:19:48 luxbock does  view  only take one argument? it seems to accept many but I&apos;m not sure if they are doing anything"><a href="#t1466695188000809" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:19:48</span>              luxbock </span><span>does </span><code>view</code><span> only take one argument? it seems to accept many but I&apos;m not sure if they are doing anything</span></div><div id="t1466695269000810" t="2016-06-23 15:21:09 nathanmarz it only takes one argument"><a href="#t1466695269000810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:21:09</span>           nathanmarz </span><span>it only takes one argument</span></div><div id="t1466695278000811" t="2016-06-23 15:21:18 nathanmarz that it doesn&apos;t error with zero or more than one is an implementation artifact"><a href="#t1466695278000811" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:21:18</span>           nathanmarz </span><span>that it doesn&apos;t error with zero or more than one is an implementation artifact</span></div><div id="t1466695363000812" t="2016-06-23 15:22:43 luxbock what do you think if multiple arguments would use an implicit  comp ?"><a href="#t1466695363000812" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:22:43</span>              luxbock </span><span>what do you think if multiple arguments would use an implicit </span><code>comp</code><span>?</span></div><div id="t1466695442000813" t="2016-06-23 15:24:02 nathanmarz i think it&apos;s better to be explicit about that"><a href="#t1466695442000813" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:24:02</span>           nathanmarz </span><span>i think it&apos;s better to be explicit about that</span></div><div id="t1466695473000814" t="2016-06-23 15:24:33 nathanmarz comp  and  view  are completely orthogonal to each other"><a href="#t1466695473000814" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:24:33</span>           nathanmarz </span><code>comp</code><span> and </span><code>view</code><span> are completely orthogonal to each other</span></div><div id="t1466695532000815" t="2016-06-23 15:25:32 luxbock (view f) (view g) (view h)  is the same as  (view (comp f g h))  right? just making sure I understand how it works"><a href="#t1466695532000815" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:25:32</span>              luxbock </span><code>(view f) (view g) (view h)</code><span> is the same as </span><code>(view (comp f g h))</code><span> right? just making sure I understand how it works</span></div><div id="t1466695537000816" t="2016-06-23 15:25:37 luxbock EDIT"><a href="#t1466695537000816" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:25:37</span>              luxbock </span><span>EDIT</span></div><div id="t1466695570000819" t="2016-06-23 15:26:10 nathanmarz i think it would be  (comp h g f)"><a href="#t1466695570000819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:26:10</span>           nathanmarz </span><span>i think it would be </span><code>(comp h g f)</code></div><div id="t1466695576000820" t="2016-06-23 15:26:16 luxbock ah right"><a href="#t1466695576000820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">15:26:16</span>              luxbock </span><span>ah right</span></div><div id="t1466698833000821" t="2016-06-23 16:20:33 luxbock https://gist.github.com/luxbock/99645147579aee4812ac9870efa9bb4a"><a href="#t1466698833000821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:20:33</span>              luxbock </span><a href="https://gist.github.com/luxbock/99645147579aee4812ac9870efa9bb4a" target="_blank">https://gist.github.com/luxbock/99645147579aee4812ac9870efa9bb4a</a></div><div id="t1466698839000822" t="2016-06-23 16:20:39 luxbock are there any noticeable anti-patterns in here?"><a href="#t1466698839000822" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:20:39</span>              luxbock </span><span>are there any noticeable anti-patterns in here?</span></div><div id="t1466700581000823" t="2016-06-23 16:49:41 codonnell @luxbock: you could use  (.intValue (double 12.543))  instead of the string business if that&apos;s clojure"><a href="#t1466700581000823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:49:41</span>            codonnell </span><span>@luxbock: you could use </span><code>(.intValue (double 12.543))</code><span> instead of the string business if that&apos;s clojure</span></div><div id="t1466700670000824" t="2016-06-23 16:51:10 nathanmarz @luxbock: you should make the transform function argument for  transformed  static – otherwise it can&apos;t inline cache"><a href="#t1466700670000824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:51:10</span>           nathanmarz </span><span>@luxbock: you should make the transform function argument for </span><code>transformed</code><span> static – otherwise it can&apos;t inline cache</span></div><div id="t1466700687000825" t="2016-06-23 16:51:27 nathanmarz factor it into a  defn"><a href="#t1466700687000825" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:51:27</span>           nathanmarz </span><span>factor it into a </span><code>defn</code></div><div id="t1466700719000826" t="2016-06-23 16:51:59 luxbock @codonnell: yeah good point"><a href="#t1466700719000826" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:51:59</span>              luxbock </span><span>@codonnell: yeah good point</span></div><div id="t1466700740000827" t="2016-06-23 16:52:20 nathanmarz that&apos;s the only case in specter where  anonymous functions to a navigator won&apos;t factor automatically"><a href="#t1466700740000827" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:52:20</span>           nathanmarz </span><span>that&apos;s the only case in specter where  anonymous functions to a navigator won&apos;t factor automatically</span></div><div id="t1466700763000828" t="2016-06-23 16:52:43 luxbock @nathanmarz: ah, why is that?"><a href="#t1466700763000828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:52:43</span>              luxbock </span><span>@nathanmarz: ah, why is that?</span></div><div id="t1466700788000829" t="2016-06-23 16:53:08 luxbock that&apos;s a good thing to know"><a href="#t1466700788000829" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:53:08</span>              luxbock </span><span>that&apos;s a good thing to know</span></div><div id="t1466700822000830" t="2016-06-23 16:53:42 nathanmarz it would be possible to re-engineer transformed to do so, but that will be a lot of work"><a href="#t1466700822000830" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:53:42</span>           nathanmarz </span><span>it would be possible to re-engineer transformed to do so, but that will be a lot of work</span></div><div id="t1466700879000831" t="2016-06-23 16:54:39 luxbock is it generally true that I want to do as much of the work in the selector as possible?"><a href="#t1466700879000831" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:54:39</span>              luxbock </span><span>is it generally true that I want to do as much of the work in the selector as possible?</span></div><div id="t1466700897000832" t="2016-06-23 16:54:57 luxbock rather than nesting in another call to  transform"><a href="#t1466700897000832" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:54:57</span>              luxbock </span><span>rather than nesting in another call to </span><code>transform</code></div><div id="t1466701017000833" t="2016-06-23 16:56:57 nathanmarz I find that&apos;s generally more elegant"><a href="#t1466701017000833" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:56:57</span>           nathanmarz </span><span>I find that&apos;s generally more elegant</span></div><div id="t1466701162000834" t="2016-06-23 16:59:22 luxbock is there an easier way to do this:
 (transform [(collect-one :a :b :c) (view (comp :d :b :a))] + {:a {:b {:c 1 :d 2}}})  ?"><a href="#t1466701162000834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">16:59:22</span>              luxbock </span><span>is there an easier way to do this:
</span><code>(transform [(collect-one :a :b :c) (view (comp :d :b :a))] + {:a {:b {:c 1 :d 2}}})</code><span> ?</span></div><div id="t1466701280000835" t="2016-06-23 17:01:20 nathanmarz (reduce + (select [:a :b (multi-path :c :d)] {:a {:b {:c 1 :d 2}}})"><a href="#t1466701280000835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:01:20</span>           nathanmarz </span><code>(reduce + (select [:a :b (multi-path :c :d)] {:a {:b {:c 1 :d 2}}})</code></div><div id="t1466701306000836" t="2016-06-23 17:01:46 nathanmarz or in 0.12.0  (reduce + (traverse [:a :b (multi-path :c :d)] {:a {:b {:c 1 :d 2}}})"><a href="#t1466701306000836" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:01:46</span>           nathanmarz </span><span>or in 0.12.0 </span><code>(reduce + (traverse [:a :b (multi-path :c :d)] {:a {:b {:c 1 :d 2}}})</code></div><div id="t1466701311000837" t="2016-06-23 17:01:51 nathanmarz don&apos;t know if that&apos;s easier"><a href="#t1466701311000837" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:01:51</span>           nathanmarz </span><span>don&apos;t know if that&apos;s easier</span></div><div id="t1466701319000838" t="2016-06-23 17:01:59 codonnell I think it&apos;s clearer"><a href="#t1466701319000838" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:01:59</span>            codonnell </span><span>I think it&apos;s clearer</span></div><div id="t1466701339000839" t="2016-06-23 17:02:19 codonnell comp feels unnatural for accessing nested maps, because the keys have to be backwards"><a href="#t1466701339000839" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:02:19</span>            codonnell </span><span>comp feels unnatural for accessing nested maps, because the keys have to be backwards</span></div><div id="t1466701535000840" t="2016-06-23 17:05:35 luxbock yeah I like the  traverse  one"><a href="#t1466701535000840" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:05:35</span>              luxbock </span><span>yeah I like the </span><code>traverse</code><span> one</span></div><div id="t1466701570000841" t="2016-06-23 17:06:10 luxbock one problem that I run into with these large selectors is that they break the cider debugger"><a href="#t1466701570000841" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:06:10</span>              luxbock </span><span>one problem that I run into with these large selectors is that they break the cider debugger</span></div><div id="t1466701581000842" t="2016-06-23 17:06:21 luxbock &quot;Method code too large!&quot;"><a href="#t1466701581000842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:06:21</span>              luxbock </span><span>&quot;Method code too large!&quot;</span></div><div id="t1466701629000843" t="2016-06-23 17:07:09 luxbock running  macroexpand-all  on the  transform  I can see why"><a href="#t1466701629000843" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:07:09</span>              luxbock </span><span>running </span><code>macroexpand-all</code><span> on the </span><code>transform</code><span> I can see why</span></div><div id="t1466701753000844" t="2016-06-23 17:09:13 nathanmarz that&apos;s the inline caching implementation you&apos;re seeing"><a href="#t1466701753000844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:09:13</span>           nathanmarz </span><span>that&apos;s the inline caching implementation you&apos;re seeing</span></div><div id="t1466701770000845" t="2016-06-23 17:09:30 nathanmarz odd that cider would have a limit like that"><a href="#t1466701770000845" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">17:09:30</span>           nathanmarz </span><span>odd that cider would have a limit like that</span></div><div id="t1466705803000846" t="2016-06-23 18:16:43 luxbock I benchmarked my  specter  implementation of a function vs a transducer / vanillla core version of the same function"><a href="#t1466705803000846" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:16:43</span>              luxbock </span><span>I benchmarked my </span><code>specter</code><span> implementation of a function vs a transducer / vanillla core version of the same function</span></div><div id="t1466705805000847" t="2016-06-23 18:16:45 luxbock https://gist.github.com/luxbock/29092fd7357b3932eddfa7ee0df98d46"><a href="#t1466705805000847" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:16:45</span>              luxbock </span><a href="https://gist.github.com/luxbock/29092fd7357b3932eddfa7ee0df98d46" target="_blank">https://gist.github.com/luxbock/29092fd7357b3932eddfa7ee0df98d46</a></div><div id="t1466705881000848" t="2016-06-23 18:18:01 luxbock results are quite close speed wise but in this case I think I prefer the core version slightly for I think it&apos;s easier to go and modify to change its behavior"><a href="#t1466705881000848" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:18:01</span>              luxbock </span><span>results are quite close speed wise but in this case I think I prefer the core version slightly for I think it&apos;s easier to go and modify to change its behavior</span></div><div id="t1466706092000850" t="2016-06-23 18:21:32 luxbock for example I actually prefer to have the  (filter filter-fn)  happen between the two map-steps, and I can&apos;t think off the top of my head how I&apos;d need to modify the selector to accomplish this"><a href="#t1466706092000850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:21:32</span>              luxbock </span><span>for example I actually prefer to have the </span><code>(filter filter-fn)</code><span> happen between the two map-steps, and I can&apos;t think off the top of my head how I&apos;d need to modify the selector to accomplish this</span></div><div id="t1466706443000851" t="2016-06-23 18:27:23 nathanmarz you probably want a new pathed navigator"><a href="#t1466706443000851" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:27:23</span>           nathanmarz </span><span>you probably want a new pathed navigator</span></div><div id="t1466706446000852" t="2016-06-23 18:27:26 nathanmarz selectview"><a href="#t1466706446000852" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:27:26</span>           nathanmarz </span><code>selectview</code></div><div id="t1466706460000853" t="2016-06-23 18:27:40 nathanmarz then it would look like:
 (defn round-frequencies
  [iso-map find-size round-fn filter-fn]
  (transform [MAP-VALS
              (selectview [ALL (view find-size) (view round-fn) (pred filter-fn)])
              (view frequencies)
              (transformed
                [(subselect MAP-VALS)
                 (collect-one (view #(apply + %)))
                 ALL]
                revdiv)]
    #(into (sorted-map)
       (keep (fn [[k v]]
               (when (&gt; v 1/100)
                 [k (* 100 v)])))
       %)
    iso-map))
"><a href="#t1466706460000853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:27:40</span>           nathanmarz </span><span>then it would look like:
</span><pre>(defn round-frequencies
  [iso-map find-size round-fn filter-fn]
  (transform [MAP-VALS
              (selectview [ALL (view find-size) (view round-fn) (pred filter-fn)])
              (view frequencies)
              (transformed
                [(subselect MAP-VALS)
                 (collect-one (view #(apply + %)))
                 ALL]
                revdiv)]
    #(into (sorted-map)
       (keep (fn [[k v]]
               (when (&gt; v 1/100)
                 [k (* 100 v)])))
       %)
    iso-map))
</pre></div><div id="t1466706513000854" t="2016-06-23 18:28:33 luxbock thanks, yeah I hadn&apos;t seen  selectview  before"><a href="#t1466706513000854" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:28:33</span>              luxbock </span><span>thanks, yeah I hadn&apos;t seen </span><code>selectview</code><span> before</span></div><div id="t1466706518000855" t="2016-06-23 18:28:38 nathanmarz it doesn&apos;t exist"><a href="#t1466706518000855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:28:38</span>           nathanmarz </span><span>it doesn&apos;t exist</span></div><div id="t1466706524000856" t="2016-06-23 18:28:44 nathanmarz but it would be easy to make"><a href="#t1466706524000856" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:28:44</span>           nathanmarz </span><span>but it would be easy to make</span></div><div id="t1466706533000857" t="2016-06-23 18:28:53 luxbock oh"><a href="#t1466706533000857" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:28:53</span>              luxbock </span><span>oh</span></div><div id="t1466706712000858" t="2016-06-23 18:31:52 luxbock my third version which uses  (transform MAP-VALS ...)  instead of  (into {} ...)  is the fastest of them all"><a href="#t1466706712000858" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:31:52</span>              luxbock </span><span>my third version which uses </span><code>(transform MAP-VALS ...)</code><span> instead of </span><code>(into {} ...)</code><span> is the fastest of them all</span></div><div id="t1466706727000859" t="2016-06-23 18:32:07 luxbock also I realized I was doing some uneccessary extra work in the vanilla core version"><a href="#t1466706727000859" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:32:07</span>              luxbock </span><span>also I realized I was doing some uneccessary extra work in the vanilla core version</span></div><div id="t1466706931000860" t="2016-06-23 18:35:31 nathanmarz If #117 was implemented then it could be simplified further"><a href="#t1466706931000860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:35:31</span>           nathanmarz </span><span>If #117 was implemented then it could be simplified further</span></div><div id="t1466706933000861" t="2016-06-23 18:35:33 nathanmarz https://github.com/nathanmarz/specter/issues/117"><a href="#t1466706933000861" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:35:33</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a></div><div id="t1466707275000863" t="2016-06-23 18:41:15 luxbock yeah I think that&apos;d be a really useful feature"><a href="#t1466707275000863" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:41:15</span>              luxbock </span><span>yeah I think that&apos;d be a really useful feature</span></div><div id="t1466707317000864" t="2016-06-23 18:41:57 codonnell @luxbock: are you using  comp  so your maps and filters are composing as transducers rather than generating intermediate sequences?"><a href="#t1466707317000864" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:41:57</span>            codonnell </span><span>@luxbock: are you using </span><code>comp</code><span> so your maps and filters are composing as transducers rather than generating intermediate sequences?</span></div><div id="t1466707326000865" t="2016-06-23 18:42:06 codonnell rather than  -&gt;&gt;"><a href="#t1466707326000865" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:42:06</span>            codonnell </span><span>rather than </span><code>-&gt;&gt;</code></div><div id="t1466707334000866" t="2016-06-23 18:42:14 luxbock @codonnell: yep"><a href="#t1466707334000866" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:42:14</span>              luxbock </span><span>@codonnell: yep</span></div><div id="t1466707376000867" t="2016-06-23 18:42:56 codonnell have you checked how much of a performance impact that has?"><a href="#t1466707376000867" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:42:56</span>            codonnell </span><span>have you checked how much of a performance impact that has?</span></div><div id="t1466707446000868" t="2016-06-23 18:44:06 luxbock no, but I imagine it&apos;s a fair amount, as the bulk of the work is done there"><a href="#t1466707446000868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:44:06</span>              luxbock </span><span>no, but I imagine it&apos;s a fair amount, as the bulk of the work is done there</span></div><div id="t1466707463000869" t="2016-06-23 18:44:23 luxbock about to head to bed but I&apos;ll run that out of curiosity before I log off"><a href="#t1466707463000869" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:44:23</span>              luxbock </span><span>about to head to bed but I&apos;ll run that out of curiosity before I log off</span></div><div id="t1466707886000873" t="2016-06-23 18:51:26 codonnell I&apos;d love to hear the results; I&apos;m curious"><a href="#t1466707886000873" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">18:51:26</span>            codonnell </span><span>I&apos;d love to hear the results; I&apos;m curious</span></div><div id="t1466712681000874" t="2016-06-23 20:11:21 nathanmarz @codonnell: specter has a benchmark for that"><a href="#t1466712681000874" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:11:21</span>           nathanmarz </span><span>@codonnell: specter has a benchmark for that</span></div><div id="t1466712685000875" t="2016-06-23 20:11:25 nathanmarz Benchmark: even :a values from sequence of maps (500000 iterations)

Avg(ms)		vs best		Code
93.478 		 1.00 		 (into [] xf data)
113.85 		 1.22 		 (select [ALL :a even?] data)
156.08 		 1.67 		 (into [] (comp (map :a) (filter even?)) data)
253.74 		 2.71 		 (-&gt;&gt; data (mapv :a) (filter even?) doall)
"><a href="#t1466712685000875" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:11:25</span>           nathanmarz </span><pre>Benchmark: even :a values from sequence of maps (500000 iterations)

Avg(ms)		vs best		Code
93.478 		 1.00 		 (into [] xf data)
113.85 		 1.22 		 (select [ALL :a even?] data)
156.08 		 1.67 		 (into [] (comp (map :a) (filter even?)) data)
253.74 		 2.71 		 (-&gt;&gt; data (mapv :a) (filter even?) doall)
</pre></div><div id="t1466712860000876" t="2016-06-23 20:14:20 nathanmarz note that  comp  with more than two arguments will slow things down a lot"><a href="#t1466712860000876" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:14:20</span>           nathanmarz </span><span>note that </span><code>comp</code><span> with more than two arguments will slow things down a lot</span></div><div id="t1466712864000877" t="2016-06-23 20:14:24 nathanmarz Benchmark: even :a values from sequence of maps (500000 iterations)

Avg(ms)		vs best		Code
155.98 		 1.00 		 (into [] (comp (map :a) (filter even?)) data)
164.82 		 1.06 		 (into [] xf data)
203.00 		 1.30 		 (select [ALL :a even? even? even?] data)
331.59 		 2.13 		 (into [] (comp (map :a) (filter even?) (filter even?) (filter even?)) data)
525.34 		 3.37 		 (-&gt;&gt; data (mapv :a) (filter even?) (filter even?) (filter even?) doall)
"><a href="#t1466712864000877" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:14:24</span>           nathanmarz </span><pre>Benchmark: even :a values from sequence of maps (500000 iterations)

Avg(ms)		vs best		Code
155.98 		 1.00 		 (into [] (comp (map :a) (filter even?)) data)
164.82 		 1.06 		 (into [] xf data)
203.00 		 1.30 		 (select [ALL :a even? even? even?] data)
331.59 		 2.13 		 (into [] (comp (map :a) (filter even?) (filter even?) (filter even?)) data)
525.34 		 3.37 		 (-&gt;&gt; data (mapv :a) (filter even?) (filter even?) (filter even?) doall)
</pre></div><div id="t1466712884000878" t="2016-06-23 20:14:44 nathanmarz here  xf  is  (comp (map :a) (filter even?) (filter even?) (filter even?))"><a href="#t1466712884000878" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:14:44</span>           nathanmarz </span><span>here </span><code>xf</code><span> is </span><code>(comp (map :a) (filter even?) (filter even?) (filter even?))</code></div><div id="t1466713107000881" t="2016-06-23 20:18:27 codonnell wow, that&apos;s a huge slowdown"><a href="#t1466713107000881" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:18:27</span>            codonnell </span><span>wow, that&apos;s a huge slowdown</span></div><div id="t1466713171000883" t="2016-06-23 20:19:31 nathanmarz https://github.com/clojure/clojure/blob/clojure-1.7.0/src/clj/clojure/core.clj#L2426"><a href="#t1466713171000883" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:19:31</span>           nathanmarz </span><a href="https://github.com/clojure/clojure/blob/clojure-1.7.0/src/clj/clojure/core.clj#L2426" target="_blank">https://github.com/clojure/clojure/blob/clojure-1.7.0/src/clj/clojure/core.clj#L2426</a></div><div id="t1466713211000887" t="2016-06-23 20:20:11 nathanmarz it slows down because it does a reduce after more than two args"><a href="#t1466713211000887" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:20:11</span>           nathanmarz </span><span>it slows down because it does a reduce after more than two args</span></div><div id="t1466713235000888" t="2016-06-23 20:20:35 nathanmarz if the implementation of  comp  was unrolled up to 20 arguments it would work much better"><a href="#t1466713235000888" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:20:35</span>           nathanmarz </span><span>if the implementation of </span><code>comp</code><span> was unrolled up to 20 arguments it would work much better</span></div><div id="t1466713673000889" t="2016-06-23 20:27:53 codonnell interesting"><a href="#t1466713673000889" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:27:53</span>            codonnell </span><span>interesting</span></div><div id="t1466713692000890" t="2016-06-23 20:28:12 codonnell I wonder why it isn&apos;t unrolled like that; other functions in core certainly are."><a href="#t1466713692000890" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:28:12</span>            codonnell </span><span>I wonder why it isn&apos;t unrolled like that; other functions in core certainly are.</span></div><div id="t1466713727000891" t="2016-06-23 20:28:47 nathanmarz there&apos;s a bunch that aren&apos;t:  http://dev.clojure.org/jira/browse/CLJ-731"><a href="#t1466713727000891" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:28:47</span>           nathanmarz </span><span>there&apos;s a bunch that aren&apos;t: </span><a href="http://dev.clojure.org/jira/browse/CLJ-731" target="_blank">http://dev.clojure.org/jira/browse/CLJ-731</a></div><div id="t1466713729000892" t="2016-06-23 20:28:49 codonnell Perhaps they&apos;ve assumed that people aren&apos;t going to be calling  comp  over and over like in the benchmark."><a href="#t1466713729000892" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:28:49</span>            codonnell </span><span>Perhaps they&apos;ve assumed that people aren&apos;t going to be calling </span><code>comp</code><span> over and over like in the benchmark.</span></div><div id="t1466713768000893" t="2016-06-23 20:29:28 nathanmarz well it seems like with transducers it would be a common pattern to do it inline like that"><a href="#t1466713768000893" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:29:28</span>           nathanmarz </span><span>well it seems like with transducers it would be a common pattern to do it inline like that</span></div><div id="t1466713842000894" t="2016-06-23 20:30:42 codonnell that&apos;s true, though transducers weren&apos;t in existence when that patch was submitted"><a href="#t1466713842000894" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">20:30:42</span>            codonnell </span><span>that&apos;s true, though transducers weren&apos;t in existence when that patch was submitted</span></div><div id="t1466718152000895" t="2016-06-23 21:42:32 aengelberg @nathanmarz It seems like the  multi-transform  functionality of doing a variety of operations in a single transform is still &quot;doable&quot; with  transform , if you collect values along the way and use that to dispatch on some operation in the transform fn."><a href="#t1466718152000895" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">21:42:32</span>           aengelberg </span><span>@nathanmarz It seems like the </span><code>multi-transform</code><span> functionality of doing a variety of operations in a single transform is still &quot;doable&quot; with </span><code>transform</code><span>, if you collect values along the way and use that to dispatch on some operation in the transform fn.</span></div><div id="t1466718162000896" t="2016-06-23 21:42:42 aengelberg it&apos;s probably not as performant as multi-transform but might be fun to add to your benchmark."><a href="#t1466718162000896" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">21:42:42</span>           aengelberg </span><span>it&apos;s probably not as performant as multi-transform but might be fun to add to your benchmark.</span></div><div id="t1466719283000897" t="2016-06-23 22:01:23 nathanmarz @aengelberg: true but it&apos;s a bit convoluted and definitely would be less performant"><a href="#t1466719283000897" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">22:01:23</span>           nathanmarz </span><span>@aengelberg: true but it&apos;s a bit convoluted and definitely would be less performant</span></div><div id="t1466719316000898" t="2016-06-23 22:01:56 nathanmarz the cases I consider for the benchmarks are the fastest impls, the most concise impls, and the most idiomatic impls"><a href="#t1466719316000898" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-23</span> <span class="t" onclick="H(this)">22:01:56</span>           nathanmarz </span><span>the cases I consider for the benchmarks are the fastest impls, the most concise impls, and the most idiomatic impls</span></div><div id="t1466736296000902" t="2016-06-24 02:44:56 conaw If want to use specter to replace the nth value in deeply nested array, is there a better way to navigate to that value than using (srange x (inc x))"><a href="#t1466736296000902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">02:44:56</span>                conaw </span><span>If want to use specter to replace the nth value in deeply nested array, is there a better way to navigate to that value than using (srange x (inc x))</span></div><div id="t1466737638000904" t="2016-06-24 03:07:18 conaw Ideally I’d like to be able to transform the value there, or put in default if it doesn’t exist"><a href="#t1466737638000904" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:07:18</span>                conaw </span><span>Ideally I’d like to be able to transform the value there, or put in default if it doesn’t exist</span></div><div id="t1466737749000905" t="2016-06-24 03:09:09 codonnell @conaw: there&apos;s a custom  nth-elt  navigator in the wiki at  https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav"><a href="#t1466737749000905" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:09:09</span>            codonnell </span><span>@conaw: there&apos;s a custom </span><code>nth-elt</code><span> navigator in the wiki at </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav</a></div><div id="t1466737760000907" t="2016-06-24 03:09:20 codonnell I don&apos;t know of a better way to do it, personally"><a href="#t1466737760000907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:09:20</span>            codonnell </span><span>I don&apos;t know of a better way to do it, personally</span></div><div id="t1466737787000908" t="2016-06-24 03:09:47 conaw awesome"><a href="#t1466737787000908" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:09:47</span>                conaw </span><span>awesome</span></div><div id="t1466737804000909" t="2016-06-24 03:10:04 codonnell under the hood it does basically what you said"><a href="#t1466737804000909" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:10:04</span>            codonnell </span><span>under the hood it does basically what you said</span></div><div id="t1466737832000910" t="2016-06-24 03:10:32 codonnell if you want default element behavior, you could modify it to do that"><a href="#t1466737832000910" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:10:32</span>            codonnell </span><span>if you want default element behavior, you could modify it to do that</span></div><div id="t1466739363000911" t="2016-06-24 03:36:03 aengelberg @conaw by array do you mean vector? if so, I believe  (keypath 3)  works"><a href="#t1466739363000911" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:36:03</span>           aengelberg </span><span>@conaw by array do you mean vector? if so, I believe </span><code>(keypath 3)</code><span> works</span></div><div id="t1466739399000912" t="2016-06-24 03:36:39 conaw yeah, I’m actually working with a matrix, so words slipped"><a href="#t1466739399000912" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:36:39</span>                conaw </span><span>yeah, I’m actually working with a matrix, so words slipped</span></div><div id="t1466739429000913" t="2016-06-24 03:37:09 conaw thanks a bunch"><a href="#t1466739429000913" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:37:09</span>                conaw </span><span>thanks a bunch</span></div><div id="t1466739438000914" t="2016-06-24 03:37:18 aengelberg np"><a href="#t1466739438000914" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:37:18</span>           aengelberg </span><span>np</span></div><div id="t1466739582000915" t="2016-06-24 03:39:42 conaw So I can reasonably do a (if-path (keypath 4) LAST) right?"><a href="#t1466739582000915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:39:42</span>                conaw </span><span>So I can reasonably do a (if-path (keypath 4) LAST) right?</span></div><div id="t1466739640000916" t="2016-06-24 03:40:40 conaw or I would do (if-path (keypath 4) (keypath 4) LAST)"><a href="#t1466739640000916" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:40:40</span>                conaw </span><span>or I would do (if-path (keypath 4) (keypath 4) LAST)</span></div><div id="t1466739693000917" t="2016-06-24 03:41:33 conaw or rather END"><a href="#t1466739693000917" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:41:33</span>                conaw </span><span>or rather END</span></div><div id="t1466739854000918" t="2016-06-24 03:44:14 conaw nvm (if-path (must 3) (keypath 3) END)"><a href="#t1466739854000918" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">03:44:14</span>                conaw </span><span>nvm (if-path (must 3) (keypath 3) END)</span></div><div id="t1466740877000919" t="2016-06-24 04:01:17 conaw ok, here’s a question, it seems that I can substitute a value into a vector using setval , but if I want to use sp/END i have to have it wrapped in a seqable, so couldn’t insert it in in a flat way, is there a way I might get around that
 (setval [(sp/if-path (sp/must 3) (sp/keypath 3) sp/END)] :newd  [:a :b :c :dd])

=&gt;  [:a :b :c :newd]

"><a href="#t1466740877000919" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">04:01:17</span>                conaw </span><span>ok, here’s a question, it seems that I can substitute a value into a vector using setval , but if I want to use sp/END i have to have it wrapped in a seqable, so couldn’t insert it in in a flat way, is there a way I might get around that
</span><pre>(setval [(sp/if-path (sp/must 3) (sp/keypath 3) sp/END)] :newd  [:a :b :c :dd])

=&gt;  [:a :b :c :newd]

</pre></div><div id="t1466740910000920" t="2016-06-24 04:01:50 conaw (setval [(sp/if-path (sp/must 3) (sp/keypath 3) sp/END)] [:newd]  [:a :b :c])
=&gt; [:a :b :c :newd]"><a href="#t1466740910000920" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">04:01:50</span>                conaw </span><pre>(setval [(sp/if-path (sp/must 3) (sp/keypath 3) sp/END)] [:newd]  [:a :b :c])
=&gt; [:a :b :c :newd]</pre></div><div id="t1466741162000921" t="2016-06-24 04:06:02 conaw basically, in assoc, if I assoc to the size of a vector, I conj onto the end, I’m looking for a similar behavior here"><a href="#t1466741162000921" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">04:06:02</span>                conaw </span><span>basically, in assoc, if I assoc to the size of a vector, I conj onto the end, I’m looking for a similar behavior here</span></div><div id="t1466742796000922" t="2016-06-24 04:33:16 nathanmarz @conaw: I think you can do  [END (keypath 0)]"><a href="#t1466742796000922" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">04:33:16</span>           nathanmarz </span><span>@conaw: I think you can do </span><code>[END (keypath 0)]</code></div><div id="t1466754875000926" t="2016-06-24 07:54:35 luxbock @codonnell: sorry for disappearing last night, I ran the benchmark with  (sequence (comp ...) %)  substituted for  (-&gt;&gt; % ...)   and it actually came out faster, 97ms vs 110 ms"><a href="#t1466754875000926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">07:54:35</span>              luxbock </span><span>@codonnell: sorry for disappearing last night, I ran the benchmark with </span><code>(sequence (comp ...) %)</code><span> substituted for </span><code>(-&gt;&gt; % ...)</code><span>  and it actually came out faster, 97ms vs 110 ms</span></div><div id="t1466754895000927" t="2016-06-24 07:54:55 luxbock that&apos;s really surprising to me"><a href="#t1466754895000927" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">07:54:55</span>              luxbock </span><span>that&apos;s really surprising to me</span></div><div id="t1466787726000934" t="2016-06-24 17:02:06 aengelberg Does  (comp ...)  take some time to initially build up the transducer?"><a href="#t1466787726000934" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">17:02:06</span>           aengelberg </span><span>Does </span><code>(comp ...)</code><span> take some time to initially build up the transducer?</span></div><div id="t1466791304000936" t="2016-06-24 18:01:44 nathanmarz @aengelberg: yes, most noticeable when operating on relatively little data"><a href="#t1466791304000936" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">18:01:44</span>           nathanmarz </span><span>@aengelberg: yes, most noticeable when operating on relatively little data</span></div><div id="t1466791382000937" t="2016-06-24 18:03:02 nathanmarz @aengelberg: the benchmarks I pasted before show a large performance difference between &quot;precompiling&quot; the transducer and doing it inline"><a href="#t1466791382000937" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-24</span> <span class="t" onclick="H(this)">18:03:02</span>           nathanmarz </span><span>@aengelberg: the benchmarks I pasted before show a large performance difference between &quot;precompiling&quot; the transducer and doing it inline</span></div><div id="t1466868126000954" t="2016-06-25 15:22:06 luxbock I have a nested data-structure and I&apos;d like to collect all lists from it, and then return a map with the original data-structure as one value and a vector of all of the lists as another"><a href="#t1466868126000954" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-25</span> <span class="t" onclick="H(this)">15:22:06</span>              luxbock </span><span>I have a nested data-structure and I&apos;d like to collect all lists from it, and then return a map with the original data-structure as one value and a vector of all of the lists as another</span></div><div id="t1466868145000955" t="2016-06-25 15:22:25 luxbock am I right in assuming I can&apos;t use  walker  for this? since it just edits the matched values in-place"><a href="#t1466868145000955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-25</span> <span class="t" onclick="H(this)">15:22:25</span>              luxbock </span><span>am I right in assuming I can&apos;t use </span><code>walker</code><span> for this? since it just edits the matched values in-place</span></div><div id="t1466869277000956" t="2016-06-25 15:41:17 nathanmarz @luxbock:  walker  will not traverse into matched elements, so as long as you don&apos;t need that it sounds like it should work"><a href="#t1466869277000956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-25</span> <span class="t" onclick="H(this)">15:41:17</span>           nathanmarz </span><span>@luxbock: </span><code>walker</code><span> will not traverse into matched elements, so as long as you don&apos;t need that it sounds like it should work</span></div><div id="t1466875428000957" t="2016-06-25 17:23:48 luxbock @nathanmarz: yeah thanks, I got it working"><a href="#t1466875428000957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-25</span> <span class="t" onclick="H(this)">17:23:48</span>              luxbock </span><span>@nathanmarz: yeah thanks, I got it working</span></div><div id="t1466996625000984" t="2016-06-27 03:03:45 conaw Lets say I have a tree, and I want to select all of the nodes n levels away from the root following a particular path, is there a smart way to define a navigator that would repeat n times?"><a href="#t1466996625000984" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:03:45</span>                conaw </span><span>Lets say I have a tree, and I want to select all of the nodes n levels away from the root following a particular path, is there a smart way to define a navigator that would repeat n times?</span></div><div id="t1466996731000985" t="2016-06-27 03:05:31 conaw (select [(repeat-path [:children ALL] 4)] tree)"><a href="#t1466996731000985" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:05:31</span>                conaw </span><pre>(select [(repeat-path [:children ALL] 4)] tree)</pre></div><div id="t1466996862000986" t="2016-06-27 03:07:42 conaw I’ve noticed some talk of stateful navigators in here but wasn’t paying close attention, is this a case for that?"><a href="#t1466996862000986" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:07:42</span>                conaw </span><span>I’ve noticed some talk of stateful navigators in here but wasn’t paying close attention, is this a case for that?</span></div><div id="t1466997001000987" t="2016-06-27 03:10:01 conaw https://github.com/nathanmarz/specter/wiki/List-of-Macros#variable-pathed-nav"><a href="#t1466997001000987" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:10:01</span>                conaw </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#variable-pathed-nav" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#variable-pathed-nav</a></div><div id="t1466997002000989" t="2016-06-27 03:10:02 conaw ?"><a href="#t1466997002000989" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:10:02</span>                conaw </span><span>?</span></div><div id="t1466998450000990" t="2016-06-27 03:34:10 conaw (declarepath deeper [i])

(defpathedfn deeper [i]
  (if (= 0 i)
    (keypath i)
    (deeper (dec i))))


(select [(deeper 1)] [0 1 2 3])
"><a href="#t1466998450000990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:34:10</span>                conaw </span><pre>(declarepath deeper [i])

(defpathedfn deeper [i]
  (if (= 0 i)
    (keypath i)
    (deeper (dec i))))


(select [(deeper 1)] [0 1 2 3])
</pre></div><div id="t1466999247000991" t="2016-06-27 03:47:27 conaw ok, found an answer  (declarepath repeat-path [walk-path end-path i])

(defpathedfn repeat-path [walk-path end-path i]
  (if (= 0 i)
    end-path
    [walk-path (repeat-path walk-path end-path (dec i))]))


(select [(repeat-path [:node/_children ALL] :db/id 3)] ptest)
"><a href="#t1466999247000991" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">03:47:27</span>                conaw </span><span>ok, found an answer </span><pre>(declarepath repeat-path [walk-path end-path i])

(defpathedfn repeat-path [walk-path end-path i]
  (if (= 0 i)
    end-path
    [walk-path (repeat-path walk-path end-path (dec i))]))


(select [(repeat-path [:node/_children ALL] :db/id 3)] ptest)
</pre></div><div id="t1467001801000992" t="2016-06-27 04:30:01 conaw other question, Figwheel doesn’t seem to like that I am declaring a path and then redefining it this way,  Figwheel: Compile Warning - repeat-path at line 105 is being replaced at line 107   anything to be done about this?"><a href="#t1467001801000992" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">04:30:01</span>                conaw </span><span>other question, Figwheel doesn’t seem to like that I am declaring a path and then redefining it this way, </span><pre>Figwheel: Compile Warning - repeat-path at line 105 is being replaced at line 107 </pre><span> anything to be done about this?</span></div><div id="t1467021388000999" t="2016-06-27 09:56:28 nathanmarz @conaw: don&apos;t call  declarepath  there, that&apos;s only for usage with  providepath"><a href="#t1467021388000999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">09:56:28</span>           nathanmarz </span><span>@conaw: don&apos;t call </span><code>declarepath</code><span> there, that&apos;s only for usage with </span><code>providepath</code></div><div id="t1467021399001000" t="2016-06-27 09:56:39 nathanmarz @conaw: the  defpathedfn  call works fine without it"><a href="#t1467021399001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">09:56:39</span>           nathanmarz </span><span>@conaw: the </span><code>defpathedfn</code><span> call works fine without it</span></div><div id="t1467021426001001" t="2016-06-27 09:57:06 conaw yup, discovered that, my bad not updating"><a href="#t1467021426001001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">09:57:06</span>                conaw </span><span>yup, discovered that, my bad not updating</span></div><div id="t1467021501001002" t="2016-06-27 09:58:21 conaw This has made my life so much easier by the way.  Today was an absolute joy because of it.  Thank you."><a href="#t1467021501001002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">09:58:21</span>                conaw </span><span>This has made my life so much easier by the way.  Today was an absolute joy because of it.  Thank you.</span></div><div id="t1467021518001003" t="2016-06-27 09:58:38 nathanmarz good to hear"><a href="#t1467021518001003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">09:58:38</span>           nathanmarz </span><span>good to hear</span></div><div id="t1467046674001008" t="2016-06-27 16:57:54 jjcomer Has anyone had any issues using specter in an AOT’d uberjar? I’m using it to pull data out of my immutant request. It works fine when running with lein run, but when I run the uberjar, it errors when using the request with: java.lang.IllegalArgumentException: No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound"><a href="#t1467046674001008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">16:57:54</span>              jjcomer </span><span>Has anyone had any issues using specter in an AOT’d uberjar? I’m using it to pull data out of my immutant request. It works fine when running with lein run, but when I run the uberjar, it errors when using the request with: java.lang.IllegalArgumentException: No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound</span></div><div id="t1467047077001009" t="2016-06-27 17:04:37 nathanmarz a few people have reported similar issues, I haven&apos;t looked into it"><a href="#t1467047077001009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">17:04:37</span>           nathanmarz </span><span>a few people have reported similar issues, I haven&apos;t looked into it</span></div><div id="t1467047337001010" t="2016-06-27 17:08:57 jjcomer Immutant uses a immutant.web.internal.ring.LazyMap for its requests"><a href="#t1467047337001010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">17:08:57</span>              jjcomer </span><span>Immutant uses a immutant.web.internal.ring.LazyMap for its requests</span></div><div id="t1467047576001011" t="2016-06-27 17:12:56 nathanmarz I&apos;m not seeing the relevance of that"><a href="#t1467047576001011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">17:12:56</span>           nathanmarz </span><span>I&apos;m not seeing the relevance of that</span></div><div id="t1467048206001012" t="2016-06-27 17:23:26 jjcomer Nor I  🙂"><a href="#t1467048206001012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">17:23:26</span>              jjcomer </span><span>Nor I </span><b>🙂</b></div><div id="t1467060361001017" t="2016-06-27 20:46:01 adambros i can confirm that error, although it came up from something other than immutant"><a href="#t1467060361001017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:46:01</span>             adambros </span><span>i can confirm that error, although it came up from something other than immutant</span></div><div id="t1467060946001019" t="2016-06-27 20:55:46 nathanmarz @adambros @jjcomer with what versions of clojure/specter did you see those errors?"><a href="#t1467060946001019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:55:46</span>           nathanmarz </span><span>@adambros @jjcomer with what versions of clojure/specter did you see those errors?</span></div><div id="t1467060987001020" t="2016-06-27 20:56:27 adambros iirc clj 1.8 and specter 0.11.0"><a href="#t1467060987001020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:56:27</span>             adambros </span><span>iirc clj 1.8 and specter 0.11.0</span></div><div id="t1467061022001021" t="2016-06-27 20:57:02 adambros correction: specter 0.11.2"><a href="#t1467061022001021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:57:02</span>             adambros </span><span>correction: specter 0.11.2</span></div><div id="t1467061047001022" t="2016-06-27 20:57:27 nathanmarz cool, thanks"><a href="#t1467061047001022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:57:27</span>           nathanmarz </span><span>cool, thanks</span></div><div id="t1467061114001023" t="2016-06-27 20:58:34 adambros im pretty sure i didnt want unbound vars in my data, but it would fail on that if i typo’d a symbol"><a href="#t1467061114001023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">20:58:34</span>             adambros </span><span>im pretty sure i didnt want unbound vars in my data, but it would fail on that if i typo’d a symbol</span></div><div id="t1467061378001024" t="2016-06-27 21:02:58 nathanmarz oh I think I know what the problem might be"><a href="#t1467061378001024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:02:58</span>           nathanmarz </span><span>oh I think I know what the problem might be</span></div><div id="t1467061676001025" t="2016-06-27 21:07:56 nathanmarz https://github.com/nathanmarz/specter/issues/132"><a href="#t1467061676001025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:07:56</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/132" target="_blank">https://github.com/nathanmarz/specter/issues/132</a></div><div id="t1467061708001027" t="2016-06-27 21:08:28 nathanmarz @jjcomer @adambros do you get the error with specter 0.10.0?"><a href="#t1467061708001027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:08:28</span>           nathanmarz </span><span>@jjcomer @adambros do you get the error with specter 0.10.0?</span></div><div id="t1467061726001028" t="2016-06-27 21:08:46 adambros i dont, which is why i havent upgraded yet"><a href="#t1467061726001028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:08:46</span>             adambros </span><span>i dont, which is why i havent upgraded yet</span></div><div id="t1467061757001029" t="2016-06-27 21:09:17 nathanmarz ok, that supports my hypothesis"><a href="#t1467061757001029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:09:17</span>           nathanmarz </span><span>ok, that supports my hypothesis</span></div><div id="t1467063207001030" t="2016-06-27 21:33:27 nathanmarz @adambros @jjcomer I was able to reproduce it and fix it, give 0.12.0-SNAPSHOT a shot and let me know if it fixes it"><a href="#t1467063207001030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:33:27</span>           nathanmarz </span><span>@adambros @jjcomer I was able to reproduce it and fix it, give 0.12.0-SNAPSHOT a shot and let me know if it fixes it</span></div><div id="t1467063222001031" t="2016-06-27 21:33:42 nathanmarz just deployed 0.12.0-SNAPSHOT to clojars"><a href="#t1467063222001031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">21:33:42</span>           nathanmarz </span><span>just deployed 0.12.0-SNAPSHOT to clojars</span></div><div id="t1467065383001032" t="2016-06-27 22:09:43 angusiguess @nathanmarz: I built a small repro and just tried with 0.12.0-SNAPSHOT and it worked."><a href="#t1467065383001032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">22:09:43</span>          angusiguess </span><span>@nathanmarz: I built a small repro and just tried with 0.12.0-SNAPSHOT and it worked.</span></div><div id="t1467069865001036" t="2016-06-27 23:24:25 jjcomer @nathanmarz: awesome thanks!"><a href="#t1467069865001036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-27</span> <span class="t" onclick="H(this)">23:24:25</span>              jjcomer </span><span>@nathanmarz: awesome thanks!</span></div><div id="t1467098958001043" t="2016-06-28 07:29:18 thomasdeutsch is there a way in specter to delete nil keys from a map?    {nil 1, :b 2}  -&gt;  {:b 2}"><a href="#t1467098958001043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">07:29:18</span>        thomasdeutsch </span><span>is there a way in specter to delete nil keys from a map?   </span><code>{nil 1, :b 2}</code><span> -&gt; </span><code>{:b 2}</code></div><div id="t1467114445001049" t="2016-06-28 11:47:25 codonnell (transform ALL (fn [[k v]] (if (nil? k) nil [k v])) data)  I think. Can&apos;t check as I&apos;m on my phone. "><a href="#t1467114445001049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">11:47:25</span>            codonnell </span><code>(transform ALL (fn [[k v]] (if (nil? k) nil [k v])) data)</code><span> I think. Can&apos;t check as I&apos;m on my phone. </span></div><div id="t1467114475001050" t="2016-06-28 11:47:55 codonnell @thomasdeutsch: ^"><a href="#t1467114475001050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">11:47:55</span>            codonnell </span><span>@thomasdeutsch: ^</span></div><div id="t1467118946001051" t="2016-06-28 13:02:26 codonnell But why not just do  (dissoc m nil) ? "><a href="#t1467118946001051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">13:02:26</span>            codonnell </span><span>But why not just do </span><code>(dissoc m nil)</code><span>? </span></div><div id="t1467122151001053" t="2016-06-28 13:55:51 vikeri Hi, I want to select from a vector using srange. It works well until the index is out of bounds. Can I somehow prevent getting an error and instead return only the elements found? Or is this bad coding practice of some reason? As an example, if I have a vector with three elements and does (srange 0 4) it will throw an error, but instead I would like to get the only three elements found."><a href="#t1467122151001053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">13:55:51</span>               vikeri </span><span>Hi, I want to select from a vector using srange. It works well until the index is out of bounds. Can I somehow prevent getting an error and instead return only the elements found? Or is this bad coding practice of some reason? As an example, if I have a vector with three elements and does (srange 0 4) it will throw an error, but instead I would like to get the only three elements found.</span></div><div id="t1467123430001054" t="2016-06-28 14:17:10 nathanmarz @vikeri: you can use srange-dynamic for that"><a href="#t1467123430001054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">14:17:10</span>           nathanmarz </span><span>@vikeri: you can use srange-dynamic for that</span></div><div id="t1467123656001055" t="2016-06-28 14:20:56 nathanmarz @vikeri
 (defnavconstructor bounded-srange
  [p srange-dynamic]
  [s e]
  (p (fn [aseq]
      (if (&lt; s 0) 0 s))
     (fn [aseq]
      (let [c (count aseq)]
        (if (&gt;= e c) c e)
        ))))
"><a href="#t1467123656001055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">14:20:56</span>           nathanmarz </span><span>@vikeri
</span><pre>(defnavconstructor bounded-srange
  [p srange-dynamic]
  [s e]
  (p (fn [aseq]
      (if (&lt; s 0) 0 s))
     (fn [aseq]
      (let [c (count aseq)]
        (if (&gt;= e c) c e)
        ))))
</pre></div><div id="t1467125020001056" t="2016-06-28 14:43:40 vikeri @nathanmarz: Great! Looks a little like black magic to me since I started looking at specter today. But it worked so I’m happy  🙂"><a href="#t1467125020001056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">14:43:40</span>               vikeri </span><span>@nathanmarz: Great! Looks a little like black magic to me since I started looking at specter today. But it worked so I’m happy </span><b>🙂</b></div><div id="t1467125535001057" t="2016-06-28 14:52:15 vikeri Had to change it to this to fully accomodate my needs:
 (defnavconstructor bounded-srange
                   [p srange-dynamic]
                   [s e]
                   (p (fn [aseq]
                        (let [c (count aseq)]
                          (cond
                            (&lt; s 0) 0
                            (&gt;= s c) c
                            :else s)))
                      (fn [aseq]
                        (let [c (count aseq)]
                          (if (&gt;= e c) c e)
                          ))))
"><a href="#t1467125535001057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">14:52:15</span>               vikeri </span><span>Had to change it to this to fully accomodate my needs:
</span><pre>(defnavconstructor bounded-srange
                   [p srange-dynamic]
                   [s e]
                   (p (fn [aseq]
                        (let [c (count aseq)]
                          (cond
                            (&lt; s 0) 0
                            (&gt;= s c) c
                            :else s)))
                      (fn [aseq]
                        (let [c (count aseq)]
                          (if (&gt;= e c) c e)
                          ))))
</pre></div><div id="t1467128238001058" t="2016-06-28 15:37:18 nathanmarz @vikeri:  defnavconstructor  works like a normal function but also integrates with Specter&apos;s inline caching"><a href="#t1467128238001058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">15:37:18</span>           nathanmarz </span><span>@vikeri: </span><code>defnavconstructor</code><span> works like a normal function but also integrates with Specter&apos;s inline caching</span></div><div id="t1467129676001062" t="2016-06-28 16:01:16 vikeri Alright, I&apos;m sure it makes more sense if I read the docs  😛  . But it seems to be a nifty library, quite useful with a powerful query language for nested data structures."><a href="#t1467129676001062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-28</span> <span class="t" onclick="H(this)">16:01:16</span>               vikeri </span><span>Alright, I&apos;m sure it makes more sense if I read the docs </span><b>😛</b><span> . But it seems to be a nifty library, quite useful with a powerful query language for nested data structures.</span></div><div id="t1467987951001251" t="2016-07-08 14:25:51 richiardiandrea Started using specter as well ;)"><a href="#t1467987951001251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">14:25:51</span>      richiardiandrea </span><span>Started using specter as well ;)</span></div><div id="t1467990114001252" t="2016-07-08 15:01:54 nathanmarz cool"><a href="#t1467990114001252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">15:01:54</span>           nathanmarz </span><span>cool</span></div><div id="t1467996215001254" t="2016-07-08 16:43:35 richiardiandrea so first question  😄  let&apos;s say I have a map indexed by a long, but i don&apos;t care about that, I want to navigate to the value"><a href="#t1467996215001254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:43:35</span>      richiardiandrea </span><span>so first question </span><b>😄</b><span> let&apos;s say I have a map indexed by a long, but i don&apos;t care about that, I want to navigate to the value</span></div><div id="t1467996256001255" t="2016-07-08 16:44:16 richiardiandrea the  [sp/ALL sp/MAP-VALS ]  path navigates all the keys first, then values"><a href="#t1467996256001255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:44:16</span>      richiardiandrea </span><span>the </span><code>[sp/ALL sp/MAP-VALS ]</code><span> path navigates all the keys first, then values</span></div><div id="t1467996278001256" t="2016-07-08 16:44:38 richiardiandrea I&apos;d like to skip keys if possible..."><a href="#t1467996278001256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:44:38</span>      richiardiandrea </span><span>I&apos;d like to skip keys if possible...</span></div><div id="t1467996292001257" t="2016-07-08 16:44:52 nathanmarz easier to understand if you show the input/output you&apos;re looking for"><a href="#t1467996292001257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:44:52</span>           nathanmarz </span><span>easier to understand if you show the input/output you&apos;re looking for</span></div><div id="t1467996340001258" t="2016-07-08 16:45:40 richiardiandrea {:handles {&quot;booma&quot; {:business {:id 3, :name &quot;&quot;, :twitter-handle &quot;booma&quot;}, :sente-uids [&quot;e8a6a187-1e6b-41d1-aa93-d0912a290f49&quot; &quot;arsassa-1e6b-41d1-aa93-d0912a290f49&quot;]}
           &quot;my-handle&quot; {:business {:id 5, :name &quot;Business&quot;, :twitter-handle &quot;my-handle&quot;}, :sente-uids [&quot;artart27-1e6b-41d1-aa93-d091arsasr49&quot;]}}}
"><a href="#t1467996340001258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:45:40</span>      richiardiandrea </span><pre>{:handles {&quot;booma&quot; {:business {:id 3, :name &quot;&quot;, :twitter-handle &quot;booma&quot;}, :sente-uids [&quot;e8a6a187-1e6b-41d1-aa93-d0912a290f49&quot; &quot;arsassa-1e6b-41d1-aa93-d0912a290f49&quot;]}
           &quot;my-handle&quot; {:business {:id 5, :name &quot;Business&quot;, :twitter-handle &quot;my-handle&quot;}, :sente-uids [&quot;artart27-1e6b-41d1-aa93-d091arsasr49&quot;]}}}
</pre></div><div id="t1467996380001262" t="2016-07-08 16:46:20 richiardiandrea I&apos;d like to fetch the inner maps, skipping the string key"><a href="#t1467996380001262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:46:20</span>      richiardiandrea </span><span>I&apos;d like to fetch the inner maps, skipping the string key</span></div><div id="t1467996404001263" t="2016-07-08 16:46:44 nathanmarz there&apos;s a lot of inner maps"><a href="#t1467996404001263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:46:44</span>           nathanmarz </span><span>there&apos;s a lot of inner maps</span></div><div id="t1467996424001264" t="2016-07-08 16:47:04 nathanmarz so you want the maps that have :business key?"><a href="#t1467996424001264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:47:04</span>           nathanmarz </span><span>so you want the maps that have :business key?</span></div><div id="t1467996431001265" t="2016-07-08 16:47:11 richiardiandrea you are right, skip to  {:business .....}"><a href="#t1467996431001265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:47:11</span>      richiardiandrea </span><span>you are right, skip to </span><code>{:business .....}</code></div><div id="t1467996444001266" t="2016-07-08 16:47:24 richiardiandrea yes"><a href="#t1467996444001266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:47:24</span>      richiardiandrea </span><span>yes</span></div><div id="t1467996470001267" t="2016-07-08 16:47:50 nathanmarz (select [:handles MAP-VALS] data)"><a href="#t1467996470001267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:47:50</span>           nathanmarz </span><code>(select [:handles MAP-VALS] data)</code></div><div id="t1467996497001268" t="2016-07-08 16:48:17 nathanmarz can also do  (select [:handles ALL LAST] data)  but the former is more efficient"><a href="#t1467996497001268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:48:17</span>           nathanmarz </span><span>can also do </span><code>(select [:handles ALL LAST] data)</code><span> but the former is more efficient</span></div><div id="t1467996535001269" t="2016-07-08 16:48:55 richiardiandrea oh cool, yes it works, so I needed no  ALL  in my code above..."><a href="#t1467996535001269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:48:55</span>      richiardiandrea </span><span>oh cool, yes it works, so I needed no </span><code>ALL</code><span> in my code above...</span></div><div id="t1467996602001274" t="2016-07-08 16:50:02 richiardiandrea I so like the fact that you can transform in one go all the things you need to...thanks a lot for the help and the lib"><a href="#t1467996602001274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:50:02</span>      richiardiandrea </span><span>I so like the fact that you can transform in one go all the things you need to...thanks a lot for the help and the lib</span></div><div id="t1467996611001275" t="2016-07-08 16:50:11 nathanmarz sure thing"><a href="#t1467996611001275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:50:11</span>           nathanmarz </span><span>sure thing</span></div><div id="t1467996919001276" t="2016-07-08 16:55:19 richiardiandrea don&apos;t want to take too much of your time as I can check the samples, but I saw that you can collect data while you descend the data structure, in my case it would be really handy to carry the  {&quot;booma&quot; {...} &quot;my-handle&quot; {...}}  map in the  transform ...is it feasible with  collect ?"><a href="#t1467996919001276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:55:19</span>      richiardiandrea </span><span>don&apos;t want to take too much of your time as I can check the samples, but I saw that you can collect data while you descend the data structure, in my case it would be really handy to carry the </span><code>{&quot;booma&quot; {...} &quot;my-handle&quot; {...}}</code><span> map in the </span><code>transform</code><span>...is it feasible with </span><code>collect</code><span>?</span></div><div id="t1467996981001277" t="2016-07-08 16:56:21 nathanmarz yes"><a href="#t1467996981001277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:56:21</span>           nathanmarz </span><span>yes</span></div><div id="t1467996991001278" t="2016-07-08 16:56:31 richiardiandrea tnx"><a href="#t1467996991001278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:56:31</span>      richiardiandrea </span><span>tnx</span></div><div id="t1467997000001279" t="2016-07-08 16:56:40 nathanmarz (transform [:handles VAL MAP-VALS ] ..."><a href="#t1467997000001279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:56:40</span>           nathanmarz </span><code>(transform [:handles VAL MAP-VALS ] ...</code></div><div id="t1467997010001280" t="2016-07-08 16:56:50 richiardiandrea oh cool awesome"><a href="#t1467997010001280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:56:50</span>      richiardiandrea </span><span>oh cool awesome</span></div><div id="t1467997014001281" t="2016-07-08 16:56:54 nathanmarz VAL  is same as  (collect-one STAY)"><a href="#t1467997014001281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:56:54</span>           nathanmarz </span><code>VAL</code><span> is same as </span><code>(collect-one STAY)</code></div><div id="t1467997034001282" t="2016-07-08 16:57:14 richiardiandrea perfect that is exactly what I need  😉"><a href="#t1467997034001282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">16:57:14</span>      richiardiandrea </span><span>perfect that is exactly what I need </span><b>😉</b></div><div id="t1467998455001283" t="2016-07-08 17:20:55 richiardiandrea my first specter transformation  🙂 
 (defn deregister-uid [state uid]
  (-&gt;&gt; state
       (spm/transform (sp/multi-path :uids
                                     [:handles sp/MAP-VALS :sente-uids]
                                     [:businesses sp/MAP-VALS :sente-uids])
                      #(cond
                         (map? %) (dissoc % uid)
                         (vector? %) (vec (remove #{uid} %))
                         :else %))))
"><a href="#t1467998455001283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">17:20:55</span>      richiardiandrea </span><span>my first specter transformation </span><b>🙂</b><span>
</span><pre>(defn deregister-uid [state uid]
  (-&gt;&gt; state
       (spm/transform (sp/multi-path :uids
                                     [:handles sp/MAP-VALS :sente-uids]
                                     [:businesses sp/MAP-VALS :sente-uids])
                      #(cond
                         (map? %) (dissoc % uid)
                         (vector? %) (vec (remove #{uid} %))
                         :else %))))
</pre></div><div id="t1468510566001389" t="2016-07-14 15:36:06 peeja How would I select every other element in a vector (that is, every element whose index is even)?"><a href="#t1468510566001389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:36:06</span>                peeja </span><span>How would I select every other element in a vector (that is, every element whose index is even)?</span></div><div id="t1468510912001390" t="2016-07-14 15:41:52 nathanmarz I believe you would need to define a new navigator for that"><a href="#t1468510912001390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:41:52</span>           nathanmarz </span><span>I believe you would need to define a new navigator for that</span></div><div id="t1468510957001391" t="2016-07-14 15:42:37 nathanmarz one idea would be something like this:  (select [(all-partitioned 2) LAST] data)"><a href="#t1468510957001391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:42:37</span>           nathanmarz </span><span>one idea would be something like this: </span><code>(select [(all-partitioned 2) LAST] data)</code></div><div id="t1468511000001392" t="2016-07-14 15:43:20 nathanmarz where  all-partitioned  works like  partition  and navigates you to each pair"><a href="#t1468511000001392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:43:20</span>           nathanmarz </span><span>where </span><code>all-partitioned</code><span> works like </span><code>partition</code><span> and navigates you to each pair</span></div><div id="t1468511075001393" t="2016-07-14 15:44:35 nathanmarz or you could have an even more specific navigator called something like  every-nth"><a href="#t1468511075001393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:44:35</span>           nathanmarz </span><span>or you could have an even more specific navigator called something like </span><code>every-nth</code></div><div id="t1468511156001394" t="2016-07-14 15:45:56 peeja Cheers!"><a href="#t1468511156001394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">15:45:56</span>                peeja </span><span>Cheers!</span></div><div id="t1468536137001401" t="2016-07-14 22:42:17 spieden i’m getting a lot of mileage out of specter — thanks for releasing it  😃"><a href="#t1468536137001401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">22:42:17</span>              spieden </span><span>i’m getting a lot of mileage out of specter — thanks for releasing it </span><b>😃</b></div><div id="t1468537724001402" t="2016-07-14 23:08:44 nathanmarz @spieden: you&apos;re welcome"><a href="#t1468537724001402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-14</span> <span class="t" onclick="H(this)">23:08:44</span>           nathanmarz </span><span>@spieden: you&apos;re welcome</span></div><div id="t1468585252001413" t="2016-07-15 12:20:52 rui.yang Hi, wonder if specter could do the following:"><a href="#t1468585252001413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:20:52</span>             rui.yang </span><span>Hi, wonder if specter could do the following:</span></div><div id="t1468585295001414" t="2016-07-15 12:21:35 rui.yang combine the element in the following list based on item_id:  [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;]"><a href="#t1468585295001414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:21:35</span>             rui.yang </span><span>combine the element in the following list based on item_id:  [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;]</span></div><div id="t1468585318001415" t="2016-07-15 12:21:58 rui.yang it will be transform to [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity “5”}]"><a href="#t1468585318001415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:21:58</span>             rui.yang </span><span>it will be transform to [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity “5”}]</span></div><div id="t1468585344001416" t="2016-07-15 12:22:24 rui.yang or what is the best way of doing it in clojure?"><a href="#t1468585344001416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:22:24</span>             rui.yang </span><span>or what is the best way of doing it in clojure?</span></div><div id="t1468586249001417" t="2016-07-15 12:37:29 codonnell @rui.yang: I don&apos;t think this is something that you particularly need specter for. You should be able to accumulate your result using reduce."><a href="#t1468586249001417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:37:29</span>            codonnell </span><span>@rui.yang: I don&apos;t think this is something that you particularly need specter for. You should be able to accumulate your result using reduce.</span></div><div id="t1468586549001419" t="2016-07-15 12:42:29 rui.yang @codonnell: thanks for the tips"><a href="#t1468586549001419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:42:29</span>             rui.yang </span><span>@codonnell: thanks for the tips</span></div><div id="t1468586599001420" t="2016-07-15 12:43:19 rui.yang seems a good usage for reduce, I didn’t think of it  🙂"><a href="#t1468586599001420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:43:19</span>             rui.yang </span><span>seems a good usage for reduce, I didn’t think of it </span><b>🙂</b></div><div id="t1468586635001421" t="2016-07-15 12:43:55 codonnell If you want, you could omit the  vals  and leave the result as a map of items, keyed by  item_id"><a href="#t1468586635001421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:43:55</span>            codonnell </span><span>If you want, you could omit the </span><code>vals</code><span> and leave the result as a map of items, keyed by </span><code>item_id</code></div><div id="t1468586654001422" t="2016-07-15 12:44:14 codonnell This is a more natural way to store items, in my opinion."><a href="#t1468586654001422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:44:14</span>            codonnell </span><span>This is a more natural way to store items, in my opinion.</span></div><div id="t1468586924001424" t="2016-07-15 12:48:44 rui.yang yes, but I am using that to map to a list of in UI"><a href="#t1468586924001424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:48:44</span>             rui.yang </span><span>yes, but I am using that to map to a list of in UI</span></div><div id="t1468586944001425" t="2016-07-15 12:49:04 rui.yang the id of every row in UI is actually :id key"><a href="#t1468586944001425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:49:04</span>             rui.yang </span><span>the id of every row in UI is actually :id key</span></div><div id="t1468586959001426" t="2016-07-15 12:49:19 codonnell ah, I see"><a href="#t1468586959001426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:49:19</span>            codonnell </span><span>ah, I see</span></div><div id="t1468587020001427" t="2016-07-15 12:50:20 rui.yang (def items [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;}])"><a href="#t1468587020001427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:50:20</span>             rui.yang </span><span>(def items [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;} {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;}])</span></div><div id="t1468587046001428" t="2016-07-15 12:50:46 rui.yang (reduce (fn [m {:keys [item_id quantity] :as item}]
				(if (contains? m item_id)
					(update-in m [item_id :quantity] #(+ % quantity))
					(assoc m item_id item)))
			{}
			items)"><a href="#t1468587046001428" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:50:46</span>             rui.yang </span><span>(reduce (fn [m {:keys [item_id quantity] :as item}]
				(if (contains? m item_id)
					(update-in m [item_id :quantity] #(+ % quantity))
					(assoc m item_id item)))
			{}
			items)</span></div><div id="t1468587049001429" t="2016-07-15 12:50:49 rui.yang gives"><a href="#t1468587049001429" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:50:49</span>             rui.yang </span><span>gives</span></div><div id="t1468587089001430" t="2016-07-15 12:51:29 rui.yang {&quot;2&quot; {:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;}, &quot;1&quot; {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;}}"><a href="#t1468587089001430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:29</span>             rui.yang </span><span>{&quot;2&quot; {:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;}, &quot;1&quot; {:id -2, :item_id &quot;1&quot;, :quantity &quot;2”} {:id -3, :item_id “1”, :quantity “3&quot;}}</span></div><div id="t1468587090001431" t="2016-07-15 12:51:30 codonnell You need to parse the  :quantity  values to integers."><a href="#t1468587090001431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:30</span>            codonnell </span><span>You need to parse the </span><code>:quantity</code><span> values to integers.</span></div><div id="t1468587109001432" t="2016-07-15 12:51:49 rui.yang yes, I need to do that"><a href="#t1468587109001432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:49</span>             rui.yang </span><span>yes, I need to do that</span></div><div id="t1468587113001433" t="2016-07-15 12:51:53 rui.yang but look at that map"><a href="#t1468587113001433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:53</span>             rui.yang </span><span>but look at that map</span></div><div id="t1468587117001434" t="2016-07-15 12:51:57 codonnell yeah, I see"><a href="#t1468587117001434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:57</span>            codonnell </span><span>yeah, I see</span></div><div id="t1468587119001435" t="2016-07-15 12:51:59 codonnell that&apos;s odd"><a href="#t1468587119001435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:51:59</span>            codonnell </span><span>that&apos;s odd</span></div><div id="t1468587125001436" t="2016-07-15 12:52:05 rui.yang the value of “1” is odd"><a href="#t1468587125001436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:52:05</span>             rui.yang </span><span>the value of “1” is odd</span></div><div id="t1468587166001437" t="2016-07-15 12:52:46 rui.yang I tried in both clojure and clojurescript, same result"><a href="#t1468587166001437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:52:46</span>             rui.yang </span><span>I tried in both clojure and clojurescript, same result</span></div><div id="t1468587235001438" t="2016-07-15 12:53:55 codonnell You&apos;re using nonstandard quote characters around the quantity key in your second item, which is causing the problem, I think."><a href="#t1468587235001438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:53:55</span>            codonnell </span><span>You&apos;re using nonstandard quote characters around the quantity key in your second item, which is causing the problem, I think.</span></div><div id="t1468587277001439" t="2016-07-15 12:54:37 codonnell =&gt; (count items)
2"><a href="#t1468587277001439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:54:37</span>            codonnell </span><pre>=&gt; (count items)
2</pre></div><div id="t1468587301001441" t="2016-07-15 12:55:01 codonnell it thinks the value for  :quantity  in the second item is just a long string"><a href="#t1468587301001441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:55:01</span>            codonnell </span><span>it thinks the value for </span><code>:quantity</code><span> in the second item is just a long string</span></div><div id="t1468587331001442" t="2016-07-15 12:55:31 rui.yang aha"><a href="#t1468587331001442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:55:31</span>             rui.yang </span><span>aha</span></div><div id="t1468587334001443" t="2016-07-15 12:55:34 madstap Yeah, copy pasting into my emacs shows the problem in the syntax hinghlighter"><a href="#t1468587334001443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:55:34</span>              madstap </span><span>Yeah, copy pasting into my emacs shows the problem in the syntax hinghlighter</span></div><div id="t1468587347001444" t="2016-07-15 12:55:47 rui.yang yes, hard to spot"><a href="#t1468587347001444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:55:47</span>             rui.yang </span><span>yes, hard to spot</span></div><div id="t1468587362001445" t="2016-07-15 12:56:02 madstap If you fix it you&apos;ll get a class cast exception"><a href="#t1468587362001445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:56:02</span>              madstap </span><span>If you fix it you&apos;ll get a class cast exception</span></div><div id="t1468587370001446" t="2016-07-15 12:56:10 rui.yang a special quote character"><a href="#t1468587370001446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:56:10</span>             rui.yang </span><span>a special quote character</span></div><div id="t1468587500001447" t="2016-07-15 12:58:20 rui.yang thank you all, save me tons of pain @madstap @codonnell"><a href="#t1468587500001447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:58:20</span>             rui.yang </span><span>thank you all, save me tons of pain @madstap @codonnell</span></div><div id="t1468587564001448" t="2016-07-15 12:59:24 madstap I fixed it like this:
 (def items [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;}
            {:id -2, :item_id &quot;1&quot;, :quantity &quot;2&quot;}
            {:id -3, :item_id &quot;1&quot;, :quantity &quot;3&quot;}])

(defn str-&gt;int [s]
  (Integer/parseInt s))

(reduce (fn [m {:keys [item_id quantity] :as item}]
                (if (contains? m item_id)
                  (update-in m [item_id :quantity] #(+ % quantity))
                  (assoc m item_id item)))
            {}
            (map #(update % :quantity str-&gt;int) items))
"><a href="#t1468587564001448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">12:59:24</span>              madstap </span><span>I fixed it like this:
</span><pre>(def items [{:id -1, :item_id &quot;2&quot;, :quantity &quot;3&quot;}
            {:id -2, :item_id &quot;1&quot;, :quantity &quot;2&quot;}
            {:id -3, :item_id &quot;1&quot;, :quantity &quot;3&quot;}])

(defn str-&gt;int [s]
  (Integer/parseInt s))

(reduce (fn [m {:keys [item_id quantity] :as item}]
                (if (contains? m item_id)
                  (update-in m [item_id :quantity] #(+ % quantity))
                  (assoc m item_id item)))
            {}
            (map #(update % :quantity str-&gt;int) items))
</pre></div><div id="t1468587659001449" t="2016-07-15 13:00:59 rui.yang it shouldn’t be string, it should be integer. but when UI form update values, somehow it is setting String. I think I should fix it there instead of fixing it in the transformation of map."><a href="#t1468587659001449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">13:00:59</span>             rui.yang </span><span>it shouldn’t be string, it should be integer. but when UI form update values, somehow it is setting String. I think I should fix it there instead of fixing it in the transformation of map.</span></div><div id="t1468587669001450" t="2016-07-15 13:01:09 codonnell @rui.yang: On a side note, you could use specter to parse those  :quantity  keys into integers, though it&apos;s pretty easy to do in core, as well.
 =&gt; (transform [ALL :quantity] #(Integer. %) items)
[{:id -1, :item_id &quot;2&quot;, :quantity 3} {:id -2, :item_id &quot;1&quot;, :quantity 2} {:id -3, :item_id &quot;1&quot;, :quantity 3}]
"><a href="#t1468587669001450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">13:01:09</span>            codonnell </span><span>@rui.yang: On a side note, you could use specter to parse those </span><code>:quantity</code><span> keys into integers, though it&apos;s pretty easy to do in core, as well.
</span><pre>=&gt; (transform [ALL :quantity] #(Integer. %) items)
[{:id -1, :item_id &quot;2&quot;, :quantity 3} {:id -2, :item_id &quot;1&quot;, :quantity 2} {:id -3, :item_id &quot;1&quot;, :quantity 3}]
</pre></div><div id="t1468587730001451" t="2016-07-15 13:02:10 rui.yang @codonnell: thanks for the tip"><a href="#t1468587730001451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">13:02:10</span>             rui.yang </span><span>@codonnell: thanks for the tip</span></div><div id="t1468587749001452" t="2016-07-15 13:02:29 codonnell no problem"><a href="#t1468587749001452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-15</span> <span class="t" onclick="H(this)">13:02:29</span>            codonnell </span><span>no problem</span></div><div id="t1468804652000035" t="2016-07-18 01:17:32 richiardiandrea Hello specter folks, I get a weird error in prod and I don&apos;t know what I&apos;d causing it:
 Omar:
No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound
 

"><a href="#t1468804652000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:17:32</span>      richiardiandrea </span><span>Hello specter folks, I get a weird error in prod and I don&apos;t know what I&apos;d causing it:
</span><pre>Omar:
No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound
</pre><span>

</span></div><div id="t1468804659000036" t="2016-07-18 01:17:39 richiardiandrea What can be the cause?"><a href="#t1468804659000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:17:39</span>      richiardiandrea </span><span>What can be the cause?</span></div><div id="t1468804768000037" t="2016-07-18 01:19:28 codonnell @richiardiandrea: are you using 0.12.0? (see  https://github.com/nathanmarz/specter/issues/132 )"><a href="#t1468804768000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:19:28</span>            codonnell </span><span>@richiardiandrea: are you using 0.12.0? (see </span><a href="https://github.com/nathanmarz/specter/issues/132" target="_blank">https://github.com/nathanmarz/specter/issues/132</a><span>)</span></div><div id="t1468804842000039" t="2016-07-18 01:20:42 richiardiandrea Oh, it looks like my problem exactly ;)"><a href="#t1468804842000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:20:42</span>      richiardiandrea </span><span>Oh, it looks like my problem exactly ;)</span></div><div id="t1468805749000040" t="2016-07-18 01:35:49 richiardiandrea I confirm that  0.12  fixed it, thanks @codonnell "><a href="#t1468805749000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:35:49</span>      richiardiandrea </span><span>I confirm that </span><code>0.12</code><span> fixed it, thanks @codonnell </span></div><div id="t1468805774000041" t="2016-07-18 01:36:14 codonnell You&apos;re welcome."><a href="#t1468805774000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-18</span> <span class="t" onclick="H(this)">01:36:14</span>            codonnell </span><span>You&apos;re welcome.</span></div><div id="t1468950772000075" t="2016-07-19 17:52:52 arvind Hello"><a href="#t1468950772000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:52:52</span>               arvind </span><span>Hello</span></div><div id="t1468950780000076" t="2016-07-19 17:53:00 arvind I cloned the specter repo from github"><a href="#t1468950780000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:53:00</span>               arvind </span><span>I cloned the specter repo from github</span></div><div id="t1468950788000077" t="2016-07-19 17:53:08 arvind and ran &quot;lein repl&quot;"><a href="#t1468950788000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:53:08</span>               arvind </span><span>and ran &quot;lein repl&quot;</span></div><div id="t1468950819000078" t="2016-07-19 17:53:39 arvind I downloaded a lot stuff"><a href="#t1468950819000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:53:39</span>               arvind </span><span>I downloaded a lot stuff</span></div><div id="t1468950879000080" t="2016-07-19 17:54:39 arvind Can anyone explain what is happening? I am new to Clojure and Java."><a href="#t1468950879000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:54:39</span>               arvind </span><span>Can anyone explain what is happening? I am new to Clojure and Java.</span></div><div id="t1468950891000081" t="2016-07-19 17:54:51 arvind Does specter have so many dependecies?"><a href="#t1468950891000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">17:54:51</span>               arvind </span><span>Does specter have so many dependecies?</span></div><div id="t1468951283000082" t="2016-07-19 18:01:23 nathanmarz @arvind: those are all build/test dependencies"><a href="#t1468951283000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:01:23</span>           nathanmarz </span><span>@arvind: those are all build/test dependencies</span></div><div id="t1468951308000083" t="2016-07-19 18:01:48 nathanmarz except for riddley, which is actually used by specter&apos;s implementation"><a href="#t1468951308000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:01:48</span>           nathanmarz </span><span>except for riddley, which is actually used by specter&apos;s implementation</span></div><div id="t1468951388000084" t="2016-07-19 18:03:08 nathanmarz and riddley has no dependencies of its own"><a href="#t1468951388000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:03:08</span>           nathanmarz </span><span>and riddley has no dependencies of its own</span></div><div id="t1468951404000085" t="2016-07-19 18:03:24 nathanmarz so basically specter is very lean with respect to dependencies"><a href="#t1468951404000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:03:24</span>           nathanmarz </span><span>so basically specter is very lean with respect to dependencies</span></div><div id="t1468953303000087" t="2016-07-19 18:35:03 arvind @nathanmarz thanks"><a href="#t1468953303000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:35:03</span>               arvind </span><span>@nathanmarz thanks</span></div><div id="t1468953310000088" t="2016-07-19 18:35:10 arvind another question"><a href="#t1468953310000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:35:10</span>               arvind </span><span>another question</span></div><div id="t1468953392000091" t="2016-07-19 18:36:32 arvind When I run &quot;lein repl&quot; inside the specter directory and type
(require &apos;com.repl.specter)"><a href="#t1468953392000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:36:32</span>               arvind </span><span>When I run &quot;lein repl&quot; inside the specter directory and type
(require &apos;com.repl.specter)</span></div><div id="t1468953415000092" t="2016-07-19 18:36:55 arvind It says the file was not found on classpath"><a href="#t1468953415000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:36:55</span>               arvind </span><span>It says the file was not found on classpath</span></div><div id="t1468953434000093" t="2016-07-19 18:37:14 arvind but running &quot;lein classpath&quot; shows that the src directory is in the classpath."><a href="#t1468953434000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:37:14</span>               arvind </span><span>but running &quot;lein classpath&quot; shows that the src directory is in the classpath.</span></div><div id="t1468953471000094" t="2016-07-19 18:37:51 arvind I want to require &apos;com.repl.specter to play with the transform and select macros"><a href="#t1468953471000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:37:51</span>               arvind </span><span>I want to require &apos;com.repl.specter to play with the transform and select macros</span></div><div id="t1468953870000095" t="2016-07-19 18:44:30 codonnell @arvind: try  (require &apos;[com.rpl.specter]) . Also, the select and transform macros are in  com.rpl.specter.macros ."><a href="#t1468953870000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:44:30</span>            codonnell </span><span>@arvind: try </span><code>(require &apos;[com.rpl.specter])</code><span>. Also, the select and transform macros are in </span><code>com.rpl.specter.macros</code><span>.</span></div><div id="t1468953891000096" t="2016-07-19 18:44:51 codonnell actually, it should work not in a list"><a href="#t1468953891000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:44:51</span>            codonnell </span><span>actually, it should work not in a list</span></div><div id="t1468953926000097" t="2016-07-19 18:45:26 codonnell oh, you added an extra e"><a href="#t1468953926000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:45:26</span>            codonnell </span><span>oh, you added an extra e</span></div><div id="t1468953936000098" t="2016-07-19 18:45:36 codonnell com.rpl.specter , not  com.repl.specter"><a href="#t1468953936000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:45:36</span>            codonnell </span><code>com.rpl.specter</code><span>, not </span><code>com.repl.specter</code></div><div id="t1468954065000099" t="2016-07-19 18:47:45 arvind @codonnell: Please refer below:"><a href="#t1468954065000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:47:45</span>               arvind </span><span>@codonnell: Please refer below:</span></div><div id="t1468954068000100" t="2016-07-19 18:47:48 arvind user=&gt; (require &apos;com.rpl.specter)

FileNotFoundException Could not locate com/rpl/specter__init.class or com/rpl/specter.clj on classpath.  clojure.lang.RT.load (RT.java:449)"><a href="#t1468954068000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:47:48</span>               arvind </span><span>user=&gt; (require &apos;com.rpl.specter)

FileNotFoundException Could not locate com/rpl/specter__init.class or com/rpl/specter.clj on classpath.  clojure.lang.RT.load (RT.java:449)</span></div><div id="t1468954212000101" t="2016-07-19 18:50:12 arvind Also when I run  (all-ns)  in the repl I don&apos;t see com.rpl.specter in the list of namespaces"><a href="#t1468954212000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:50:12</span>               arvind </span><span>Also when I run </span><code>(all-ns)</code><span> in the repl I don&apos;t see com.rpl.specter in the list of namespaces</span></div><div id="t1468954409000103" t="2016-07-19 18:53:29 codonnell @arvind: if you&apos;ve cloned specter off github, you need to run  lein cljx  to compile the classes."><a href="#t1468954409000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:53:29</span>            codonnell </span><span>@arvind: if you&apos;ve cloned specter off github, you need to run </span><code>lein cljx</code><span> to compile the classes.</span></div><div id="t1468954498000104" t="2016-07-19 18:54:58 arvind @codonnell: I just ran  lein cljx"><a href="#t1468954498000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:54:58</span>               arvind </span><span>@codonnell: I just ran </span><code>lein cljx</code></div><div id="t1468954512000105" t="2016-07-19 18:55:12 arvind and then  lein repl"><a href="#t1468954512000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:55:12</span>               arvind </span><span>and then </span><code>lein repl</code></div><div id="t1468954541000106" t="2016-07-19 18:55:41 arvind and  (require &apos;com.rpl.specter.macros)  returned  nil"><a href="#t1468954541000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:55:41</span>               arvind </span><span>and </span><code>(require &apos;com.rpl.specter.macros)</code><span> returned </span><code>nil</code></div><div id="t1468954571000107" t="2016-07-19 18:56:11 arvind and I tried  (transform)  that gave the following error:
CompilerException java.lang.RuntimeException: Unable to resolve symbol: transform in this context, compiling:(/tmp/form-init2526821032412369112.clj:1:1)"><a href="#t1468954571000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:56:11</span>               arvind </span><span>and I tried </span><code>(transform)</code><span> that gave the following error:
CompilerException java.lang.RuntimeException: Unable to resolve symbol: transform in this context, compiling:(/tmp/form-init2526821032412369112.clj:1:1)</span></div><div id="t1468954624000108" t="2016-07-19 18:57:04 codonnell If you just do  (require &apos;com.rpl.specter.macros) , then  transform  is named  com.rpl.specter.macros.transform"><a href="#t1468954624000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:57:04</span>            codonnell </span><span>If you just do </span><code>(require &apos;com.rpl.specter.macros)</code><span>, then </span><code>transform</code><span> is named </span><code>com.rpl.specter.macros.transform</code></div><div id="t1468954639000109" t="2016-07-19 18:57:19 arvind ah"><a href="#t1468954639000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:57:19</span>               arvind </span><span>ah</span></div><div id="t1468954642000110" t="2016-07-19 18:57:22 codonnell If you want to just type  transform , you need to do  (require &apos;[com.rpl.specter.macros :refer [transform]])"><a href="#t1468954642000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:57:22</span>            codonnell </span><span>If you want to just type </span><code>transform</code><span>, you need to do </span><code>(require &apos;[com.rpl.specter.macros :refer [transform]])</code></div><div id="t1468954743000112" t="2016-07-19 18:59:03 codonnell there&apos;s a nice piece about namespaces at  http://www.braveclojure.com/organization/"><a href="#t1468954743000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:59:03</span>            codonnell </span><span>there&apos;s a nice piece about namespaces at </span><a href="http://www.braveclojure.com/organization/" target="_blank">http://www.braveclojure.com/organization/</a></div><div id="t1468954752000113" t="2016-07-19 18:59:12 arvind Yeah that worked. Thanks."><a href="#t1468954752000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:59:12</span>               arvind </span><span>Yeah that worked. Thanks.</span></div><div id="t1468954772000114" t="2016-07-19 18:59:32 codonnell If you&apos;re new to clojure, that&apos;s a great book to work through."><a href="#t1468954772000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">18:59:32</span>            codonnell </span><span>If you&apos;re new to clojure, that&apos;s a great book to work through.</span></div><div id="t1468954826000115" t="2016-07-19 19:00:26 arvind @codonnell: I bought that book recently. Have to read through it."><a href="#t1468954826000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:00:26</span>               arvind </span><span>@codonnell: I bought that book recently. Have to read through it.</span></div><div id="t1468954908000116" t="2016-07-19 19:01:48 hueyp this might be a question of me not understanding spectre … but say I’ve got a nested map that I want to transform multiple times … is it possible to save the lookup?  e.g. write a generic path, but for this exact instance of the map, its a very narrow this key, the next key, run the transform, etc?"><a href="#t1468954908000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:01:48</span>                hueyp </span><span>this might be a question of me not understanding spectre … but say I’ve got a nested map that I want to transform multiple times … is it possible to save the lookup?  e.g. write a generic path, but for this exact instance of the map, its a very narrow this key, the next key, run the transform, etc?</span></div><div id="t1468954961000117" t="2016-07-19 19:02:41 codonnell @hueyp: could you give an example of what you mean?"><a href="#t1468954961000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:02:41</span>            codonnell </span><span>@hueyp: could you give an example of what you mean?</span></div><div id="t1468955099000118" t="2016-07-19 19:04:59 hueyp sure …  {:foo {:a 1 :b 2 :c 3} :bar {:x 1 :y 2 :z 3}  … something like …  ALL LAST ALL LAST even?  (I might have that syntax wrong …) … it would transform  [:foo :b]  and  [:bar :y]  … like if I want to double those, or subtract 1, etc … that paths are the same, so I’d like to kind of save that knowledge"><a href="#t1468955099000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:04:59</span>                hueyp </span><span>sure … </span><code>{:foo {:a 1 :b 2 :c 3} :bar {:x 1 :y 2 :z 3}</code><span> … something like … </span><code>ALL LAST ALL LAST even?</code><span> (I might have that syntax wrong …) … it would transform </span><code>[:foo :b]</code><span> and </span><code>[:bar :y]</code><span> … like if I want to double those, or subtract 1, etc … that paths are the same, so I’d like to kind of save that knowledge</span></div><div id="t1468955110000119" t="2016-07-19 19:05:10 hueyp again … might be not something that actually matters re how spectre works  🙂"><a href="#t1468955110000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:05:10</span>                hueyp </span><span>again … might be not something that actually matters re how spectre works </span><b>🙂</b></div><div id="t1468955251000120" t="2016-07-19 19:07:31 codonnell Sure. If you know the whole path in advance (no parameters), you could save it with  (def my-map-path (comp-paths MAP-VALS MAP-VALS even?))"><a href="#t1468955251000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:07:31</span>            codonnell </span><span>Sure. If you know the whole path in advance (no parameters), you could save it with </span><code>(def my-map-path (comp-paths MAP-VALS MAP-VALS even?))</code></div><div id="t1468955273000121" t="2016-07-19 19:07:53 codonnell (`MAP-VALS` is the same as  [ALL LAST] , but more efficient"><a href="#t1468955273000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:07:53</span>            codonnell </span><span>(`MAP-VALS` is the same as </span><code>[ALL LAST]</code><span>, but more efficient</span></div><div id="t1468955288000122" t="2016-07-19 19:08:08 hueyp that would still require a full traversal of the map though to determine what matches?"><a href="#t1468955288000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:08:08</span>                hueyp </span><span>that would still require a full traversal of the map though to determine what matches?</span></div><div id="t1468955303000123" t="2016-07-19 19:08:23 hueyp basically I’d like to do that traversal one, and save more specific paths?"><a href="#t1468955303000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:08:23</span>                hueyp </span><span>basically I’d like to do that traversal one, and save more specific paths?</span></div><div id="t1468955353000124" t="2016-07-19 19:09:13 codonnell it would do a traversal each time, that&apos;s right"><a href="#t1468955353000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:09:13</span>            codonnell </span><span>it would do a traversal each time, that&apos;s right</span></div><div id="t1468955354000125" t="2016-07-19 19:09:14 hueyp this is more of a curiosity … the cost of traversing the maps I have is small … just curious if I could say turn  (comp-paths MAP-VALS MAP-VALS even?)  + an exact instance of a map into a more specific path"><a href="#t1468955354000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:09:14</span>                hueyp </span><span>this is more of a curiosity … the cost of traversing the maps I have is small … just curious if I could say turn </span><code>(comp-paths MAP-VALS MAP-VALS even?)</code><span> + an exact instance of a map into a more specific path</span></div><div id="t1468955386000126" t="2016-07-19 19:09:46 hueyp and then re-use that with multiple transforms"><a href="#t1468955386000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:09:46</span>                hueyp </span><span>and then re-use that with multiple transforms</span></div><div id="t1468955395000127" t="2016-07-19 19:09:55 hueyp all on the same starting map  😜"><a href="#t1468955395000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:09:55</span>                hueyp </span><span>all on the same starting map </span><b>😜</b></div><div id="t1468955478000128" t="2016-07-19 19:11:18 codonnell @hueyp: you could use  traverse  from 0.12.0, which returns an instance of  IReduceable  (or something like that; basically it&apos;s only useful when being called with  reduce  or  into )"><a href="#t1468955478000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:11:18</span>            codonnell </span><span>@hueyp: you could use </span><code>traverse</code><span> from 0.12.0, which returns an instance of </span><code>IReduceable</code><span> (or something like that; basically it&apos;s only useful when being called with </span><code>reduce</code><span> or </span><code>into</code><span>)</span></div><div id="t1468955512000129" t="2016-07-19 19:11:52 codonnell that will only do the traversal once, and you could call  reduce  on it multiple times over the same initial structure"><a href="#t1468955512000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:11:52</span>            codonnell </span><span>that will only do the traversal once, and you could call </span><code>reduce</code><span> on it multiple times over the same initial structure</span></div><div id="t1468955557000130" t="2016-07-19 19:12:37 hueyp @codonnell: interesting, I’ll take a look, thanks~"><a href="#t1468955557000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:12:37</span>                hueyp </span><span>@codonnell: interesting, I’ll take a look, thanks~</span></div><div id="t1468955570000131" t="2016-07-19 19:12:50 codonnell https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse"><a href="#t1468955570000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:12:50</span>            codonnell </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse</a></div><div id="t1468955611000133" t="2016-07-19 19:13:31 hueyp oh wow, wiki!"><a href="#t1468955611000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:13:31</span>                hueyp </span><span>oh wow, wiki!</span></div><div id="t1468955652000134" t="2016-07-19 19:14:12 nathanmarz @hueyp: I think you might be looking for a  locate  feature  https://github.com/nathanmarz/specter/issues/49"><a href="#t1468955652000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:14:12</span>           nathanmarz </span><span>@hueyp: I think you might be looking for a </span><code>locate</code><span> feature </span><a href="https://github.com/nathanmarz/specter/issues/49" target="_blank">https://github.com/nathanmarz/specter/issues/49</a></div><div id="t1468955787000136" t="2016-07-19 19:16:27 hueyp wow, yup!"><a href="#t1468955787000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-19</span> <span class="t" onclick="H(this)">19:16:27</span>                hueyp </span><span>wow, yup!</span></div><div id="t1469063239000156" t="2016-07-21 01:07:19 ghadi just had a thought… specter is vim navigation commands for datastructures"><a href="#t1469063239000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">01:07:19</span>                ghadi </span><span>just had a thought… specter is vim navigation commands for datastructures</span></div><div id="t1469110138000172" t="2016-07-21 14:08:58 nathanmarz @ghadi: don&apos;t know vim, care to elaborate?"><a href="#t1469110138000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:08:58</span>           nathanmarz </span><span>@ghadi: don&apos;t know vim, care to elaborate?</span></div><div id="t1469110196000173" t="2016-07-21 14:09:56 ghadi sure, mutation commands for text are usually preceded by giving a direction. ex:"><a href="#t1469110196000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:09:56</span>                ghadi </span><span>sure, mutation commands for text are usually preceded by giving a direction. ex:</span></div><div id="t1469110317000174" t="2016-07-21 14:11:57 ghadi or succeeded in this case:
 d$   means delete from current position to the end of the line
 dfi  means delete from current position to the first  i  character to the right
 d4k   means delete 4 lines upwards"><a href="#t1469110317000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:11:57</span>                ghadi </span><span>or succeeded in this case:
</span><code>d$</code><span>  means delete from current position to the end of the line
</span><code>dfi</code><span> means delete from current position to the first </span><code>i</code><span> character to the right
</span><code>d4k</code><span>  means delete 4 lines upwards</span></div><div id="t1469110334000175" t="2016-07-21 14:12:14 ghadi and then you have fancy stuff like this, which reminds me of transform ALL:"><a href="#t1469110334000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:12:14</span>                ghadi </span><span>and then you have fancy stuff like this, which reminds me of transform ALL:</span></div><div id="t1469110348000176" t="2016-07-21 14:12:28 ghadi http://vimgifs.com/"><a href="#t1469110348000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:12:28</span>                ghadi </span><a href="http://vimgifs.com/" target="_blank">http://vimgifs.com/</a></div><div id="t1469110376000177" t="2016-07-21 14:12:56 ghadi basically a functor"><a href="#t1469110376000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:12:56</span>                ghadi </span><span>basically a functor</span></div><div id="t1469110427000178" t="2016-07-21 14:13:47 nathanmarz oh wow, cool"><a href="#t1469110427000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:13:47</span>           nathanmarz </span><span>oh wow, cool</span></div><div id="t1469110435000179" t="2016-07-21 14:13:55 ghadi in text your navigation commands are 2D. in datastructures, your navigation is structural"><a href="#t1469110435000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:13:55</span>                ghadi </span><span>in text your navigation commands are 2D. in datastructures, your navigation is structural</span></div><div id="t1469110492000180" t="2016-07-21 14:14:52 ghadi there’s a parallel for sure"><a href="#t1469110492000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:14:52</span>                ghadi </span><span>there’s a parallel for sure</span></div><div id="t1469110534000181" t="2016-07-21 14:15:34 nathanmarz definitely"><a href="#t1469110534000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:15:34</span>           nathanmarz </span><span>definitely</span></div><div id="t1469110567000182" t="2016-07-21 14:16:07 nathanmarz the more tangible metaphors to explain specter the better  🙂"><a href="#t1469110567000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-21</span> <span class="t" onclick="H(this)">14:16:07</span>           nathanmarz </span><span>the more tangible metaphors to explain specter the better </span><b>🙂</b></div><div id="t1469211928000208" t="2016-07-22 18:25:28 arvind I want to learn about specter implementation."><a href="#t1469211928000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:25:28</span>               arvind </span><span>I want to learn about specter implementation.</span></div><div id="t1469211939000209" t="2016-07-22 18:25:39 arvind One approach"><a href="#t1469211939000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:25:39</span>               arvind </span><span>One approach</span></div><div id="t1469211970000210" t="2016-07-22 18:26:10 arvind is to build my own specter by studying its API"><a href="#t1469211970000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:26:10</span>               arvind </span><span>is to build my own specter by studying its API</span></div><div id="t1469212011000211" t="2016-07-22 18:26:51 arvind For this I created a new lein app like  lein new app build-specter"><a href="#t1469212011000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:26:51</span>               arvind </span><span>For this I created a new lein app like </span><code>lein new app build-specter</code></div><div id="t1469212073000212" t="2016-07-22 18:27:53 arvind then created a  checkouts  directory within  build-specter  and created a link  specter  within checkouts directory like below:"><a href="#t1469212073000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:27:53</span>               arvind </span><span>then created a </span><code>checkouts</code><span> directory within </span><code>build-specter</code><span> and created a link </span><code>specter</code><span> within checkouts directory like below:</span></div><div id="t1469212108000213" t="2016-07-22 18:28:28 arvind ln -s /home/user/clojure/specter specter"><a href="#t1469212108000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:28:28</span>               arvind </span><code>ln -s /home/user/clojure/specter specter</code></div><div id="t1469212144000214" t="2016-07-22 18:29:04 arvind Then I ran  lein repl  from build-specter directory"><a href="#t1469212144000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:29:04</span>               arvind </span><span>Then I ran </span><code>lein repl</code><span> from build-specter directory</span></div><div id="t1469212180000215" t="2016-07-22 18:29:40 arvind Then attempted to require specter:
 build-specter.core=&gt; (require &apos;com.rpl.specter)"><a href="#t1469212180000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:29:40</span>               arvind </span><span>Then attempted to require specter:
</span><code>build-specter.core=&gt; (require &apos;com.rpl.specter)</code></div><div id="t1469212195000216" t="2016-07-22 18:29:55 arvind But this gave the below error:
CompilerException java.io.FileNotFoundException: Could not locate riddley/walk__init.class or riddley/walk.clj on classpath., compiling:(com/rpl/specter/impl.clj:1:1)"><a href="#t1469212195000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:29:55</span>               arvind </span><span>But this gave the below error:
CompilerException java.io.FileNotFoundException: Could not locate riddley/walk__init.class or riddley/walk.clj on classpath., compiling:(com/rpl/specter/impl.clj:1:1)</span></div><div id="t1469212222000218" t="2016-07-22 18:30:22 arvind How do I include the checkouts dependencies"><a href="#t1469212222000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:30:22</span>               arvind </span><span>How do I include the checkouts dependencies</span></div><div id="t1469212728000219" t="2016-07-22 18:38:48 arvind Because specter depends on riddley"><a href="#t1469212728000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">18:38:48</span>               arvind </span><span>Because specter depends on riddley</span></div><div id="t1469214191000220" t="2016-07-22 19:03:11 arvind I figured it out. Ran  lein install  in the specter directory and added specter as a dependency in build-specter&apos;s project.clj"><a href="#t1469214191000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span> <span class="t" onclick="H(this)">19:03:11</span>               arvind </span><span>I figured it out. Ran </span><code>lein install</code><span> in the specter directory and added specter as a dependency in build-specter&apos;s project.clj</span></div><div id="t1469324268000242" t="2016-07-24 01:37:48 rui.yang hi, still new to specter, wonder if specter could do the following"><a href="#t1469324268000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">01:37:48</span>             rui.yang </span><span>hi, still new to specter, wonder if specter could do the following</span></div><div id="t1469324271000243" t="2016-07-24 01:37:51 rui.yang the map"><a href="#t1469324271000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">01:37:51</span>             rui.yang </span><span>the map</span></div><div id="t1469324273000244" t="2016-07-24 01:37:53 rui.yang {:model
 {:validaton
  {:name
   {:msg &quot;too long&quot;}}
  {:age
   {:msg &quot;too young&quot;}}}}"><a href="#t1469324273000244" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">01:37:53</span>             rui.yang </span><span>{:model
 {:validaton
  {:name
   {:msg &quot;too long&quot;}}
  {:age
   {:msg &quot;too young&quot;}}}}</span></div><div id="t1469324315000245" t="2016-07-24 01:38:35 rui.yang How could reset all :msg to nil? (elegantly with specter)"><a href="#t1469324315000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">01:38:35</span>             rui.yang </span><span>How could reset all :msg to nil? (elegantly with specter)</span></div><div id="t1469324336000246" t="2016-07-24 01:38:56 rui.yang 🙂"><a href="#t1469324336000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">01:38:56</span>             rui.yang </span><b>🙂</b></div><div id="t1469326867000248" t="2016-07-24 02:21:07 jjunior130 and I renamed  :validaton  to  :validation"><a href="#t1469326867000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">02:21:07</span>           jjunior130 </span><span>and I renamed </span><code>:validaton</code><span> to </span><code>:validation</code></div><div id="t1469326888000249" t="2016-07-24 02:21:28 jjunior130 I don&apos;t know about elegance but I tried"><a href="#t1469326888000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">02:21:28</span>           jjunior130 </span><span>I don&apos;t know about elegance but I tried</span></div><div id="t1469326966000250" t="2016-07-24 02:22:46 jjunior130 and I didn&apos;t evaluate it. So idk if it&apos;s good."><a href="#t1469326966000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">02:22:46</span>           jjunior130 </span><span>and I didn&apos;t evaluate it. So idk if it&apos;s good.</span></div><div id="t1469333880000251" t="2016-07-24 04:18:00 rui.yang @jjunior130: thanks for pointing me to MAP-VALS. I used (setval [:model :validation specter/MAP-VALS :msg] nil db) to set all :msg key based on old structure. and it worked. Thanks again  🙂"><a href="#t1469333880000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">04:18:00</span>             rui.yang </span><span>@jjunior130: thanks for pointing me to MAP-VALS. I used (setval [:model :validation specter/MAP-VALS :msg] nil db) to set all :msg key based on old structure. and it worked. Thanks again </span><b>🙂</b></div><div id="t1469337879000252" t="2016-07-24 05:24:39 jjunior130 @rui.yang: glad I was of help. 
Format your text for easy reading.  https://get.slack.help/hc/en-us/articles/202288908-Formatting-your-messages"><a href="#t1469337879000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span> <span class="t" onclick="H(this)">05:24:39</span>           jjunior130 </span><span>@rui.yang: glad I was of help. 
Format your text for easy reading. </span><a href="https://get.slack.help/hc/en-us/articles/202288908-Formatting-your-messages" target="_blank">https://get.slack.help/hc/en-us/articles/202288908-Formatting-your-messages</a></div><div id="t1469711939000330" t="2016-07-28 13:18:59 shader how do you do a recursive traversal? I want to create a transform for all of the handlers in a bidi routing structure. This requires getting all of the &apos;leaves&apos; of a nested table/vector structure, where &apos;leaf&apos; is basically a map-val that is a keyword"><a href="#t1469711939000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:18:59</span>               shader </span><span>how do you do a recursive traversal? I want to create a transform for all of the handlers in a bidi routing structure. This requires getting all of the &apos;leaves&apos; of a nested table/vector structure, where &apos;leaf&apos; is basically a map-val that is a keyword</span></div><div id="t1469711974000331" t="2016-07-28 13:19:34 shader the problem is that the leaves are at variable and unbounded depths in the tree"><a href="#t1469711974000331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:19:34</span>               shader </span><span>the problem is that the leaves are at variable and unbounded depths in the tree</span></div><div id="t1469712577000332" t="2016-07-28 13:29:37 codonnell @shader: The easiest way is to use  walker , though sometimes you need to define a custom navigator."><a href="#t1469712577000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:29:37</span>            codonnell </span><span>@shader: The easiest way is to use </span><code>walker</code><span>, though sometimes you need to define a custom navigator.</span></div><div id="t1469712670000333" t="2016-07-28 13:31:10 codonnell Another option would be to use the zipper navigators, though I haven&apos;t played with those personally."><a href="#t1469712670000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:31:10</span>            codonnell </span><span>Another option would be to use the zipper navigators, though I haven&apos;t played with those personally.</span></div><div id="t1469712735000334" t="2016-07-28 13:32:15 shader I&apos;ve tried walker, but I don&apos;t really know how to use it I guess"><a href="#t1469712735000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:32:15</span>               shader </span><span>I&apos;ve tried walker, but I don&apos;t really know how to use it I guess</span></div><div id="t1469712750000335" t="2016-07-28 13:32:30 shader I don&apos;t know how to select for &quot;only keywords that are values of maps&quot;"><a href="#t1469712750000335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:32:30</span>               shader </span><span>I don&apos;t know how to select for &quot;only keywords that are values of maps&quot;</span></div><div id="t1469712795000336" t="2016-07-28 13:33:15 codonnell Could you give an example of what you&apos;re trying to do? I&apos;m not familiar with bidi routing structures."><a href="#t1469712795000336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:33:15</span>            codonnell </span><span>Could you give an example of what you&apos;re trying to do? I&apos;m not familiar with bidi routing structures.</span></div><div id="t1469712934000338" t="2016-07-28 13:35:34 shader I&apos;d like to get all all of :trials-list, :trial-details, etc., without getting the :id keywords in the vectors (those define url parameters, not handlers)"><a href="#t1469712934000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:35:34</span>               shader </span><span>I&apos;d like to get all all of :trials-list, :trial-details, etc., without getting the :id keywords in the vectors (those define url parameters, not handlers)</span></div><div id="t1469713036000339" t="2016-07-28 13:37:16 codonnell So if you were traversing that data structure, you&apos;d want to get a vector  [:trials-list :trial-details :records-list :record-details :authorized-trials :revoke :messages :delete-message] ?"><a href="#t1469713036000339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:37:16</span>            codonnell </span><span>So if you were traversing that data structure, you&apos;d want to get a vector </span><code>[:trials-list :trial-details :records-list :record-details :authorized-trials :revoke :messages :delete-message]</code><span>?</span></div><div id="t1469713100000340" t="2016-07-28 13:38:20 shader yes"><a href="#t1469713100000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:38:20</span>               shader </span><span>yes</span></div><div id="t1469713129000341" t="2016-07-28 13:38:49 shader well, specifically a view I can pass to transform to replace them with an actual handler function"><a href="#t1469713129000341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:38:49</span>               shader </span><span>well, specifically a view I can pass to transform to replace them with an actual handler function</span></div><div id="t1469713866000342" t="2016-07-28 13:51:06 codonnell should be able to do it with  declarepath  and  providepath"><a href="#t1469713866000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:51:06</span>            codonnell </span><span>should be able to do it with </span><code>declarepath</code><span> and </span><code>providepath</code></div><div id="t1469713998000343" t="2016-07-28 13:53:18 codonnell there we go"><a href="#t1469713998000343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:53:18</span>            codonnell </span><span>there we go</span></div><div id="t1469714060000344" t="2016-07-28 13:54:20 codonnell =&gt; (declarepath DEEP-MAP-VALS)
=&gt; (providepath DEEP-MAP-VALS (sp/if-path map? [sp/MAP-VALS DEEP-MAP-VALS] sp/STAY))
=&gt; (select DEEP-MAP-VALS {:a {:b 2} :c {:d 3 :e {:f 4}} :g 5})
[2 3 4 5]
=&gt; (transform DEEP-MAP-VALS inc {:a {:b 2} :c {:d 3 :e {:f 4}} :g 5})
{:a {:b 3}, :c {:d 4, :e {:f 5}}, :g 6}
"><a href="#t1469714060000344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:54:20</span>            codonnell </span><pre>=&gt; (declarepath DEEP-MAP-VALS)
=&gt; (providepath DEEP-MAP-VALS (sp/if-path map? [sp/MAP-VALS DEEP-MAP-VALS] sp/STAY))
=&gt; (select DEEP-MAP-VALS {:a {:b 2} :c {:d 3 :e {:f 4}} :g 5})
[2 3 4 5]
=&gt; (transform DEEP-MAP-VALS inc {:a {:b 2} :c {:d 3 :e {:f 4}} :g 5})
{:a {:b 3}, :c {:d 4, :e {:f 5}}, :g 6}
</pre></div><div id="t1469714086000345" t="2016-07-28 13:54:46 shader interesting"><a href="#t1469714086000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:54:46</span>               shader </span><span>interesting</span></div><div id="t1469714108000347" t="2016-07-28 13:55:08 codonnell dammit, keep hitting enter instead of ctrl + enter"><a href="#t1469714108000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:55:08</span>            codonnell </span><span>dammit, keep hitting enter instead of ctrl + enter</span></div><div id="t1469714126000349" t="2016-07-28 13:55:26 codonnell there"><a href="#t1469714126000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">13:55:26</span>            codonnell </span><span>there</span></div><div id="t1469714576000350" t="2016-07-28 14:02:56 shader @codonnell: thanks, that helped a lot. My final implementation is:
 (providepath DEEP-MAP-VALS (cond-path map? [MAP-VALS DEEP-MAP-VALS] vector? [LAST DEEP-MAP-VALS] :default STAY))"><a href="#t1469714576000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">14:02:56</span>               shader </span><span>@codonnell: thanks, that helped a lot. My final implementation is:
</span><pre>(providepath DEEP-MAP-VALS (cond-path map? [MAP-VALS DEEP-MAP-VALS] vector? [LAST DEEP-MAP-VALS] :default STAY))</pre></div><div id="t1469714598000351" t="2016-07-28 14:03:18 codonnell nice"><a href="#t1469714598000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">14:03:18</span>            codonnell </span><span>nice</span></div><div id="t1469715258000352" t="2016-07-28 14:14:18 codonnell @nathanmarz: I added  DEEP-MAP-VALS  as an example to my copy of the wiki, since people ask about recursive navigators pretty often."><a href="#t1469715258000352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">14:14:18</span>            codonnell </span><span>@nathanmarz: I added </span><code>DEEP-MAP-VALS</code><span> as an example to my copy of the wiki, since people ask about recursive navigators pretty often.</span></div><div id="t1469732539000356" t="2016-07-28 19:02:19 nathanmarz @codonnell: good idea, merged it in"><a href="#t1469732539000356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">19:02:19</span>           nathanmarz </span><span>@codonnell: good idea, merged it in</span></div><div id="t1469735158000357" t="2016-07-28 19:45:58 kenny I&apos;m not sure I fully understand how to do a recursive transform. I want to change the value of the key  :changeme  to negative its current value. This should be done for every nested map inside the structure, including all maps inside a sequential collection. It seems like this would be super simple to do in specter but I am guessing I don&apos;t fully understand the way recursion works in specter. Here is what I wrote: 
 (rsm/declarepath MapWalker)
(rsm/providepath MapWalker
                 (rs/cond-path
                   vector?
                   [rs/ALL MapWalker]
                   map?
                   [rs/MAP-VALS coll? MapWalker]))

(rsm/transform [MapWalker :changeme]
               #(- %)
               {:changeme    1
                :ignore-this &quot;&quot;
                :foo2        {:changeme 2
                              :bar2     &quot;something&quot;}
                :foo3        [{:changeme 3}
                              {:changeme    3
                               :ignore-this &quot;&quot;}]})
 
Expected output:
 {:changeme    -1
 :ignore-this &quot;&quot;
 :foo2        {:changeme -2
               :bar2     &quot;something&quot;}
 :foo3        [{:changeme -3}
               {:changeme    -3
                :ignore-this &quot;&quot;}]}
 
Any help?"><a href="#t1469735158000357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">19:45:58</span>                kenny </span><span>I&apos;m not sure I fully understand how to do a recursive transform. I want to change the value of the key </span><code>:changeme</code><span> to negative its current value. This should be done for every nested map inside the structure, including all maps inside a sequential collection. It seems like this would be super simple to do in specter but I am guessing I don&apos;t fully understand the way recursion works in specter. Here is what I wrote: 
</span><pre>(rsm/declarepath MapWalker)
(rsm/providepath MapWalker
                 (rs/cond-path
                   vector?
                   [rs/ALL MapWalker]
                   map?
                   [rs/MAP-VALS coll? MapWalker]))

(rsm/transform [MapWalker :changeme]
               #(- %)
               {:changeme    1
                :ignore-this &quot;&quot;
                :foo2        {:changeme 2
                              :bar2     &quot;something&quot;}
                :foo3        [{:changeme 3}
                              {:changeme    3
                               :ignore-this &quot;&quot;}]})
</pre><span>
Expected output:
</span><pre>{:changeme    -1
 :ignore-this &quot;&quot;
 :foo2        {:changeme -2
               :bar2     &quot;something&quot;}
 :foo3        [{:changeme -3}
               {:changeme    -3
                :ignore-this &quot;&quot;}]}
</pre><span>
Any help?</span></div><div id="t1469736129000358" t="2016-07-28 20:02:09 nathanmarz @kenny: easiest is to use  walker"><a href="#t1469736129000358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:02:09</span>           nathanmarz </span><span>@kenny: easiest is to use </span><code>walker</code></div><div id="t1469736134000359" t="2016-07-28 20:02:14 nathanmarz (declarepath MapWalker)
(providepath MapWalker
  (stay-then-continue
    MAP-VALS
    (walker map?)
    MapWalker
    ))
"><a href="#t1469736134000359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:02:14</span>           nathanmarz </span><pre>(declarepath MapWalker)
(providepath MapWalker
  (stay-then-continue
    MAP-VALS
    (walker map?)
    MapWalker
    ))
</pre></div><div id="t1469736352000360" t="2016-07-28 20:05:52 kenny That works. Why does the code I sent not work? It reads like it should work  😛"><a href="#t1469736352000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:05:52</span>                kenny </span><span>That works. Why does the code I sent not work? It reads like it should work </span><b>😛</b></div><div id="t1469736413000361" t="2016-07-28 20:06:53 nathanmarz @kenny: you can modify it like this to make it work"><a href="#t1469736413000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:06:53</span>           nathanmarz </span><span>@kenny: you can modify it like this to make it work</span></div><div id="t1469736416000362" t="2016-07-28 20:06:56 nathanmarz (declarepath MapWalker)
(providepath MapWalker
   (cond-path
     vector?
     [ALL MapWalker]
     map?
     (stay-then-continue MAP-VALS MapWalker)))
"><a href="#t1469736416000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:06:56</span>           nathanmarz </span><pre>(declarepath MapWalker)
(providepath MapWalker
   (cond-path
     vector?
     [ALL MapWalker]
     map?
     (stay-then-continue MAP-VALS MapWalker)))
</pre></div><div id="t1469736473000363" t="2016-07-28 20:07:53 codonnell @kenny: I think the problem is you&apos;re not actually navigating to anything. You navigate deeper when you encounter a vector or a map, but you stop navigation when you encounter anything else, rather than staying there."><a href="#t1469736473000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:07:53</span>            codonnell </span><span>@kenny: I think the problem is you&apos;re not actually navigating to anything. You navigate deeper when you encounter a vector or a map, but you stop navigation when you encounter anything else, rather than staying there.</span></div><div id="t1469736508000364" t="2016-07-28 20:08:28 kenny Ah, and  stay-then-continue  solves that problem"><a href="#t1469736508000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:08:28</span>                kenny </span><span>Ah, and </span><code>stay-then-continue</code><span> solves that problem</span></div><div id="t1469736517000365" t="2016-07-28 20:08:37 codonnell Indeed"><a href="#t1469736517000365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:08:37</span>            codonnell </span><span>Indeed</span></div><div id="t1469736564000366" t="2016-07-28 20:09:24 codonnell Though as @nathanmarz neatly solved for your use case, you want to stay at each map, since you want to grab its value for  :changeme"><a href="#t1469736564000366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:09:24</span>            codonnell </span><span>Though as @nathanmarz neatly solved for your use case, you want to stay at each map, since you want to grab its value for </span><code>:changeme</code></div><div id="t1469736621000367" t="2016-07-28 20:10:21 kenny Agreed, I definitely like @nathanmarz solution much better."><a href="#t1469736621000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:10:21</span>                kenny </span><span>Agreed, I definitely like @nathanmarz solution much better.</span></div><div id="t1469736822000368" t="2016-07-28 20:13:42 kenny In this case I guess the equivalent Clojure code wouldn&apos;t be all that bad to maintain anyways as I could have just used clojure.walk."><a href="#t1469736822000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:13:42</span>                kenny </span><span>In this case I guess the equivalent Clojure code wouldn&apos;t be all that bad to maintain anyways as I could have just used clojure.walk.</span></div><div id="t1469737013000369" t="2016-07-28 20:16:53 nathanmarz another thing to note is the second solution is significantly faster than using  walker  or clojure.walk manually"><a href="#t1469737013000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:16:53</span>           nathanmarz </span><span>another thing to note is the second solution is significantly faster than using </span><code>walker</code><span> or clojure.walk manually</span></div><div id="t1469737210000370" t="2016-07-28 20:20:10 kenny Good to know  🙂"><a href="#t1469737210000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:20:10</span>                kenny </span><span>Good to know </span><b>🙂</b></div><div id="t1469737314000371" t="2016-07-28 20:21:54 kenny It is interesting that each approach you take in Clojure has an &quot;equivalent&quot; approach in specter -- clojure.walk is to walker as manually writing a recursive function is to cond-path."><a href="#t1469737314000371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:21:54</span>                kenny </span><span>It is interesting that each approach you take in Clojure has an &quot;equivalent&quot; approach in specter -- clojure.walk is to walker as manually writing a recursive function is to cond-path.</span></div><div id="t1469737382000372" t="2016-07-28 20:23:02 nathanmarz the nature of abstraction I think"><a href="#t1469737382000372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:23:02</span>           nathanmarz </span><span>the nature of abstraction I think</span></div><div id="t1469737395000373" t="2016-07-28 20:23:15 nathanmarz like how every clojure function could be written manually in bytecode"><a href="#t1469737395000373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:23:15</span>           nathanmarz </span><span>like how every clojure function could be written manually in bytecode</span></div><div id="t1469737640000374" t="2016-07-28 20:27:20 kenny Or rather.. 
&gt; the nature of a good abstraction"><a href="#t1469737640000374" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:27:20</span>                kenny </span><span>Or rather.. 
&gt; the nature of a good abstraction</span></div><div id="t1469739238000379" t="2016-07-28 20:53:58 richiardiandrea Oh I think this declarepath feature is what I was looking for as well for recursive navigation...I notice that in case of unexpected nil sometimes on the path I am navigating, an exception is thrown...still need to investigate so I will come up with a better test case to submit here"><a href="#t1469739238000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span> <span class="t" onclick="H(this)">20:53:58</span>      richiardiandrea </span><span>Oh I think this declarepath feature is what I was looking for as well for recursive navigation...I notice that in case of unexpected nil sometimes on the path I am navigating, an exception is thrown...still need to investigate so I will come up with a better test case to submit here</span></div><div id="t1469834891000399" t="2016-07-29 23:28:11 wei trying to walk a nested structure and add a sequential index to all the maps. would this be a good use case for specter? e.g.  [[{} {}] [{} {} [{}]]] =&gt; [[{:id 1} {:id 2}] [{:id 3} {:id 4} [{:id 5}]]]  (x-posted from #C03S1KBA2)"><a href="#t1469834891000399" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-29</span> <span class="t" onclick="H(this)">23:28:11</span>                  wei </span><span>trying to walk a nested structure and add a sequential index to all the maps. would this be a good use case for specter? e.g. </span><code>[[{} {}] [{} {} [{}]]] =&gt; [[{:id 1} {:id 2}] [{:id 3} {:id 4} [{:id 5}]]]</code><span> (x-posted from #C03S1KBA2)</span></div><div id="t1469845298000404" t="2016-07-30 02:21:38 wei I came up with this:
 (defn walk-with-index [m f]
  (let [counter (atom -1)]
    (com.rpl.specter.macros/transform [(com.rpl.specter/walker map?)]
                                      #(f (swap! counter inc) %) m)))"><a href="#t1469845298000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">02:21:38</span>                  wei </span><span>I came up with this:
</span><pre>(defn walk-with-index [m f]
  (let [counter (atom -1)]
    (com.rpl.specter.macros/transform [(com.rpl.specter/walker map?)]
                                      #(f (swap! counter inc) %) m)))</pre></div><div id="t1469845331000405" t="2016-07-30 02:22:11 wei there’s definitely a better way to do it, looking forward to any feedback  🙂"><a href="#t1469845331000405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">02:22:11</span>                  wei </span><span>there’s definitely a better way to do it, looking forward to any feedback </span><b>🙂</b></div><div id="t1469847731000407" t="2016-07-30 03:02:11 codonnell @wei: here&apos;s a stateless solution:
 (transform (subselect (walker map?)) (partial map #(assoc %2 :id %1) (range)) [[{} {}] {} {}])
[[{:id 0} {:id 1}] {:id 2} {:id 3}]"><a href="#t1469847731000407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">03:02:11</span>            codonnell </span><span>@wei: here&apos;s a stateless solution:
</span><pre>(transform (subselect (walker map?)) (partial map #(assoc %2 :id %1) (range)) [[{} {}] {} {}])
[[{:id 0} {:id 1}] {:id 2} {:id 3}]</pre></div><div id="t1469847814000408" t="2016-07-30 03:03:34 codonnell no idea how that compares to your atom solution in terms of efficiency, though"><a href="#t1469847814000408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">03:03:34</span>            codonnell </span><span>no idea how that compares to your atom solution in terms of efficiency, though</span></div><div id="t1469848133000409" t="2016-07-30 03:08:53 wei @codonnell: looks better though, thanks!"><a href="#t1469848133000409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">03:08:53</span>                  wei </span><span>@codonnell: looks better though, thanks!</span></div><div id="t1469848170000410" t="2016-07-30 03:09:30 codonnell no problem"><a href="#t1469848170000410" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">03:09:30</span>            codonnell </span><span>no problem</span></div><div id="t1469858969000414" t="2016-07-30 06:09:29 nathanmarz @wei @codonnell: this solution is even more concise:
 (setval (subselect (walker map?) :id)
  (range)
  [[{} {}] [{} {} [{}]]])
;; =&gt; [[{:id 0} {:id 1}] [{:id 2} {:id 3} [{:id 4}]]]
"><a href="#t1469858969000414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">06:09:29</span>           nathanmarz </span><span>@wei @codonnell: this solution is even more concise:
</span><pre>(setval (subselect (walker map?) :id)
  (range)
  [[{} {}] [{} {} [{}]]])
;; =&gt; [[{:id 0} {:id 1}] [{:id 2} {:id 3} [{:id 4}]]]
</pre></div><div id="t1469885875000418" t="2016-07-30 13:37:55 codonnell very nice"><a href="#t1469885875000418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">13:37:55</span>            codonnell </span><span>very nice</span></div><div id="t1469890516000422" t="2016-07-30 14:55:16 codonnell @nathanmarz: Just checked out multi-transform, terminal, and terminal-val and added them to the wiki."><a href="#t1469890516000422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-30</span> <span class="t" onclick="H(this)">14:55:16</span>            codonnell </span><span>@nathanmarz: Just checked out multi-transform, terminal, and terminal-val and added them to the wiki.</span></div><div id="t1469972895000439" t="2016-07-31 13:48:15 luxbock I&apos;d like to use  MAP-VALS  but ignore one specific key in the passed in map"><a href="#t1469972895000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">13:48:15</span>              luxbock </span><span>I&apos;d like to use </span><code>MAP-VALS</code><span> but ignore one specific key in the passed in map</span></div><div id="t1469972900000440" t="2016-07-31 13:48:20 luxbock how would I do this?"><a href="#t1469972900000440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">13:48:20</span>              luxbock </span><span>how would I do this?</span></div><div id="t1469973948000441" t="2016-07-31 14:05:48 codonnell @luxbock: If you don&apos;t need to rebuild, you could do  (view #(dissoc % :key))"><a href="#t1469973948000441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:05:48</span>            codonnell </span><span>@luxbock: If you don&apos;t need to rebuild, you could do </span><code>(view #(dissoc % :key))</code></div><div id="t1469973982000442" t="2016-07-31 14:06:22 codonnell You could also define your own navigator to do it, which shouldn&apos;t be too hard"><a href="#t1469973982000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:06:22</span>            codonnell </span><span>You could also define your own navigator to do it, which shouldn&apos;t be too hard</span></div><div id="t1469973999000443" t="2016-07-31 14:06:39 luxbock I do need the key present in the returned result "><a href="#t1469973999000443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:06:39</span>              luxbock </span><span>I do need the key present in the returned result </span></div><div id="t1469974024000444" t="2016-07-31 14:07:04 luxbock Yeah I was wondering if there had been an easy way to do it with the builtins "><a href="#t1469974024000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:07:04</span>              luxbock </span><span>Yeah I was wondering if there had been an easy way to do it with the builtins </span></div><div id="t1469974067000445" t="2016-07-31 14:07:47 luxbock I think rather than building a navigator for this specific use case I would rather just wrap the whole thing with dissoc and assoc "><a href="#t1469974067000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:07:47</span>              luxbock </span><span>I think rather than building a navigator for this specific use case I would rather just wrap the whole thing with dissoc and assoc </span></div><div id="t1469974289000446" t="2016-07-31 14:11:29 codonnell (transform [ALL #(not= :a (first %)) LAST] inc {:a 0 :b 1 :c 2})"><a href="#t1469974289000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:11:29</span>            codonnell </span><code>(transform [ALL #(not= :a (first %)) LAST] inc {:a 0 :b 1 :c 2})</code></div><div id="t1469974316000447" t="2016-07-31 14:11:56 codonnell @luxbock: definitely not as efficient as using  assoc  and  dissoc , but it does work"><a href="#t1469974316000447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">14:11:56</span>            codonnell </span><span>@luxbock: definitely not as efficient as using </span><code>assoc</code><span> and </span><code>dissoc</code><span>, but it does work</span></div><div id="t1469978145000448" t="2016-07-31 15:15:45 luxbock Yeah, thanks, I think I&apos;ll end up doing it manually because this function gets called a ton "><a href="#t1469978145000448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-31</span> <span class="t" onclick="H(this)">15:15:45</span>              luxbock </span><span>Yeah, thanks, I think I&apos;ll end up doing it manually because this function gets called a ton </span></div><div id="t1470150774000489" t="2016-08-02 15:12:54 borkdude Does anyone has an example of how I should require specter from clojurescript?"><a href="#t1470150774000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:12:54</span>             borkdude </span><span>Does anyone has an example of how I should require specter from clojurescript?</span></div><div id="t1470150780000490" t="2016-08-02 15:13:00 borkdude It&apos;s missing in the intro page (that uses  use )"><a href="#t1470150780000490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:13:00</span>             borkdude </span><span>It&apos;s missing in the intro page (that uses </span><code>use</code><span>)</span></div><div id="t1470150884000492" t="2016-08-02 15:14:44 nathanmarz @borkdude
 (require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform]])
"><a href="#t1470150884000492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:14:44</span>           nathanmarz </span><span>@borkdude
</span><pre>(require &apos;[com.rpl.specter :as s])
(require-macros &apos;[com.rpl.specter.macros :refer [select transform]])
</pre></div><div id="t1470150912000493" t="2016-08-02 15:15:12 borkdude @nathanmarz: cool, I was trying something with :refer :all, but that isn&apos;t going to work probably"><a href="#t1470150912000493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:15:12</span>             borkdude </span><span>@nathanmarz: cool, I was trying something with :refer :all, but that isn&apos;t going to work probably</span></div><div id="t1470150914000494" t="2016-08-02 15:15:14 nathanmarz macros namespace also has declarepath, providepath, and other operations for defining navigators"><a href="#t1470150914000494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:15:14</span>           nathanmarz </span><span>macros namespace also has declarepath, providepath, and other operations for defining navigators</span></div><div id="t1470150958000495" t="2016-08-02 15:15:58 nathanmarz yea I think you need to require macros individually"><a href="#t1470150958000495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:15:58</span>           nathanmarz </span><span>yea I think you need to require macros individually</span></div><div id="t1470151023000496" t="2016-08-02 15:17:03 nathanmarz not sure, don&apos;t really use cljs"><a href="#t1470151023000496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:17:03</span>           nathanmarz </span><span>not sure, don&apos;t really use cljs</span></div><div id="t1470151094000497" t="2016-08-02 15:18:14 borkdude where should I require  walker  from, is it a function or macro?"><a href="#t1470151094000497" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:18:14</span>             borkdude </span><span>where should I require </span><code>walker</code><span> from, is it a function or macro?</span></div><div id="t1470151314000498" t="2016-08-02 15:21:54 borkdude I&apos;m trying to get Specter going with Planck, but failing so far:  https://gist.github.com/borkdude/a7706bf096e1280b3d8a3fd0b33ec95e"><a href="#t1470151314000498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:21:54</span>             borkdude </span><span>I&apos;m trying to get Specter going with Planck, but failing so far: </span><a href="https://gist.github.com/borkdude/a7706bf096e1280b3d8a3fd0b33ec95e" target="_blank">https://gist.github.com/borkdude/a7706bf096e1280b3d8a3fd0b33ec95e</a></div><div id="t1470151451000500" t="2016-08-02 15:24:11 nathanmarz can you get a stack trace for that?"><a href="#t1470151451000500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:24:11</span>           nathanmarz </span><span>can you get a stack trace for that?</span></div><div id="t1470151953000502" t="2016-08-02 15:32:33 borkdude @nathanmarz: for transform?"><a href="#t1470151953000502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:32:33</span>             borkdude </span><span>@nathanmarz: for transform?</span></div><div id="t1470152155000503" t="2016-08-02 15:35:55 borkdude Don&apos;t know if this is helpful?  https://gist.github.com/borkdude/9287a872db1038160fd0444ec1cac443"><a href="#t1470152155000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:35:55</span>             borkdude </span><span>Don&apos;t know if this is helpful? </span><a href="https://gist.github.com/borkdude/9287a872db1038160fd0444ec1cac443" target="_blank">https://gist.github.com/borkdude/9287a872db1038160fd0444ec1cac443</a></div><div id="t1470153109000505" t="2016-08-02 15:51:49 mfikes FWIW, I quickly tried that expression with older versions of specter, back to 0.9.3 and it fails in Planck in the same way. So not a regression at least. Perhaps just a problematic expression."><a href="#t1470153109000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:51:49</span>               mfikes </span><span>FWIW, I quickly tried that expression with older versions of specter, back to 0.9.3 and it fails in Planck in the same way. So not a regression at least. Perhaps just a problematic expression.</span></div><div id="t1470153330000506" t="2016-08-02 15:55:30 nathanmarz @borkdude: can you open an issue on github for this?"><a href="#t1470153330000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:55:30</span>           nathanmarz </span><span>@borkdude: can you open an issue on github for this?</span></div><div id="t1470153349000507" t="2016-08-02 15:55:49 borkdude of course! I&apos;m cooking right now, but will do so after dinner"><a href="#t1470153349000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:55:49</span>             borkdude </span><span>of course! I&apos;m cooking right now, but will do so after dinner</span></div><div id="t1470153508000508" t="2016-08-02 15:58:28 nathanmarz @mfikes: master branch is on clojure 1.7.0 now, does that mean we should be able to integrate automated tests for specter+bootstrap ?"><a href="#t1470153508000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">15:58:28</span>           nathanmarz </span><span>@mfikes: master branch is on clojure 1.7.0 now, does that mean we should be able to integrate automated tests for specter+bootstrap ?</span></div><div id="t1470153993000509" t="2016-08-02 16:06:33 borkdude https://github.com/nathanmarz/specter/issues/136"><a href="#t1470153993000509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:06:33</span>             borkdude </span><a href="https://github.com/nathanmarz/specter/issues/136" target="_blank">https://github.com/nathanmarz/specter/issues/136</a></div><div id="t1470154356000511" t="2016-08-02 16:12:36 mfikes @nathanmarz: still need  http://dev.clojure.org/jira/browse/TCHECK-105"><a href="#t1470154356000511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:12:36</span>               mfikes </span><span>@nathanmarz: still need </span><a href="http://dev.clojure.org/jira/browse/TCHECK-105" target="_blank">http://dev.clojure.org/jira/browse/TCHECK-105</a></div><div id="t1470154773000512" t="2016-08-02 16:19:33 nathanmarz @mfikes: hmmm, timestamps there aren&apos;t so encouraging"><a href="#t1470154773000512" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:19:33</span>           nathanmarz </span><span>@mfikes: hmmm, timestamps there aren&apos;t so encouraging</span></div><div id="t1470154803000513" t="2016-08-02 16:20:03 nathanmarz would it be possible to fork test.check in the meantime with the appropriate changes? I&apos;d be perfectly happy using that"><a href="#t1470154803000513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:20:03</span>           nathanmarz </span><span>would it be possible to fork test.check in the meantime with the appropriate changes? I&apos;d be perfectly happy using that</span></div><div id="t1470156086000515" t="2016-08-02 16:41:26 mattsfrey few questions.. how would I make select* analogous to get-in, currently (select* [:bleh :blah] {:bleh {:blah 1}}) returns [1] instead of just 1"><a href="#t1470156086000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:41:26</span>            mattsfrey </span><span>few questions.. how would I make select* analogous to get-in, currently (select* [:bleh :blah] {:bleh {:blah 1}}) returns [1] instead of just 1</span></div><div id="t1470156104000516" t="2016-08-02 16:41:44 mattsfrey and why do the examples on the github use just &apos;select&apos; when the function is select* ?"><a href="#t1470156104000516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">16:41:44</span>            mattsfrey </span><span>and why do the examples on the github use just &apos;select&apos; when the function is select* ?</span></div><div id="t1470157498000520" t="2016-08-02 17:04:58 mfikes @nathanmarz: Yeah… let me check. There’s an issue related to Transit that might be holding it up, and if that’s the case perhaps I can address it. I agree, if no progress, I’ll pursue an interim fork."><a href="#t1470157498000520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:04:58</span>               mfikes </span><span>@nathanmarz: Yeah… let me check. There’s an issue related to Transit that might be holding it up, and if that’s the case perhaps I can address it. I agree, if no progress, I’ll pursue an interim fork.</span></div><div id="t1470158238000521" t="2016-08-02 17:17:18 codonnell @mattsfrey: There is a  select*  function, but it&apos;s preferred to use the  select  macro, as in the docs"><a href="#t1470158238000521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:17:18</span>            codonnell </span><span>@mattsfrey: There is a </span><code>select*</code><span> function, but it&apos;s preferred to use the </span><code>select</code><span> macro, as in the docs</span></div><div id="t1470158263000522" t="2016-08-02 17:17:43 codonnell and if you know you&apos;ll only be selecting one thing, you can use  select-one  or  select-any"><a href="#t1470158263000522" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:17:43</span>            codonnell </span><span>and if you know you&apos;ll only be selecting one thing, you can use </span><code>select-one</code><span> or </span><code>select-any</code></div><div id="t1470158291000523" t="2016-08-02 17:18:11 codonnell (`select` is in the  com.rpl.specter.macros  namespace)"><a href="#t1470158291000523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:18:11</span>            codonnell </span><span>(`select` is in the </span><code>com.rpl.specter.macros</code><span> namespace)</span></div><div id="t1470158487000524" t="2016-08-02 17:21:27 nathanmarz @mfikes: sounds good"><a href="#t1470158487000524" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:21:27</span>           nathanmarz </span><span>@mfikes: sounds good</span></div><div id="t1470158569000525" t="2016-08-02 17:22:49 nathanmarz @codonnell @mattsfrey  select*  is the navigator implementation function, which is distinct from  select"><a href="#t1470158569000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:22:49</span>           nathanmarz </span><span>@codonnell @mattsfrey </span><code>select*</code><span> is the navigator implementation function, which is distinct from </span><code>select</code></div><div id="t1470158591000526" t="2016-08-02 17:23:11 nathanmarz select-any  (introduced in 0.12.0) is the most efficient way to get one result back"><a href="#t1470158591000526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:23:11</span>           nathanmarz </span><code>select-any</code><span> (introduced in 0.12.0) is the most efficient way to get one result back</span></div><div id="t1470158647000527" t="2016-08-02 17:24:07 nathanmarz @codonnell @mattsfrey nevermind, just realized you were referring to the functional version of  select  macro"><a href="#t1470158647000527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:24:07</span>           nathanmarz </span><span>@codonnell @mattsfrey nevermind, just realized you were referring to the functional version of </span><code>select</code><span> macro</span></div><div id="t1470158688000528" t="2016-08-02 17:24:48 nathanmarz the reason to use the macro is because it does inline caching of the navigation path, so is very efficient"><a href="#t1470158688000528" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:24:48</span>           nathanmarz </span><span>the reason to use the macro is because it does inline caching of the navigation path, so is very efficient</span></div><div id="t1470158715000529" t="2016-08-02 17:25:15 nathanmarz see  https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs  for details on that"><a href="#t1470158715000529" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">17:25:15</span>           nathanmarz </span><span>see </span><a href="https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs</a><span> for details on that</span></div><div id="t1470164572000533" t="2016-08-02 19:02:52 hueyp noob question … how do I combine clauses? ;p  (spec/comp-paths THINGS spec/ALL (and (spec/selected? :category #{&quot;A&quot;})
                                      (spec/not-selected? :id #{1 2})))"><a href="#t1470164572000533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:02:52</span>                hueyp </span><span>noob question … how do I combine clauses? ;p </span><pre>(spec/comp-paths THINGS spec/ALL (and (spec/selected? :category #{&quot;A&quot;})
                                      (spec/not-selected? :id #{1 2})))</pre></div><div id="t1470165001000534" t="2016-08-02 19:10:01 nathanmarz @hueyp: just get rid of the  and"><a href="#t1470165001000534" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:10:01</span>           nathanmarz </span><span>@hueyp: just get rid of the </span><code>and</code></div><div id="t1470165009000535" t="2016-08-02 19:10:09 hueyp heh"><a href="#t1470165009000535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:10:09</span>                hueyp </span><span>heh</span></div><div id="t1470165026000536" t="2016-08-02 19:10:26 nathanmarz (spec/comp-paths THINGS spec/ALL (spec/selected? :category #{&quot;A&quot;}) (spec/not-selected? :id #{1 2}))"><a href="#t1470165026000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:10:26</span>           nathanmarz </span><code>(spec/comp-paths THINGS spec/ALL (spec/selected? :category #{&quot;A&quot;}) (spec/not-selected? :id #{1 2}))</code></div><div id="t1470165077000537" t="2016-08-02 19:11:17 hueyp perfect thanks  🙂"><a href="#t1470165077000537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:11:17</span>                hueyp </span><span>perfect thanks </span><b>🙂</b></div><div id="t1470166597000540" t="2016-08-02 19:36:37 puzzler If you know you are selecting one element, what are the pros and cons of choosing select-one or select-any vs select-first?"><a href="#t1470166597000540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:36:37</span>              puzzler </span><span>If you know you are selecting one element, what are the pros and cons of choosing select-one or select-any vs select-first?</span></div><div id="t1470166612000541" t="2016-08-02 19:36:52 mattsfrey @nathanmarz: ahh, ok it&apos;s a macro"><a href="#t1470166612000541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:36:52</span>            mattsfrey </span><span>@nathanmarz: ahh, ok it&apos;s a macro</span></div><div id="t1470166654000542" t="2016-08-02 19:37:34 nathanmarz @puzzler:  select-any  is the fastest"><a href="#t1470166654000542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:37:34</span>           nathanmarz </span><span>@puzzler: </span><code>select-any</code><span> is the fastest</span></div><div id="t1470166688000543" t="2016-08-02 19:38:08 nathanmarz not really any perf difference between  select-one  and  select-first  (for now), they just have different semantics in terms of what happens if there&apos;s multiple elements to select"><a href="#t1470166688000543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:38:08</span>           nathanmarz </span><span>not really any perf difference between </span><code>select-one</code><span> and </span><code>select-first</code><span> (for now), they just have different semantics in terms of what happens if there&apos;s multiple elements to select</span></div><div id="t1470166851000545" t="2016-08-02 19:40:51 codonnell @puzzler: Also,  select-one  will throw an exception if more than one result is found, while  select-first  and  select-any  will not (as you may infer from their names)"><a href="#t1470166851000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:40:51</span>            codonnell </span><span>@puzzler: Also, </span><code>select-one</code><span> will throw an exception if more than one result is found, while </span><code>select-first</code><span> and </span><code>select-any</code><span> will not (as you may infer from their names)</span></div><div id="t1470166979000546" t="2016-08-02 19:42:59 puzzler Is select-any in the latest stable version 0.11.2?  For some reason, although I&apos;m &quot;use&quot;ing the macros namespace, I&apos;m not seeing it."><a href="#t1470166979000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:42:59</span>              puzzler </span><span>Is select-any in the latest stable version 0.11.2?  For some reason, although I&apos;m &quot;use&quot;ing the macros namespace, I&apos;m not seeing it.</span></div><div id="t1470167024000547" t="2016-08-02 19:43:44 nathanmarz it&apos;s in 0.12.0"><a href="#t1470167024000547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:43:44</span>           nathanmarz </span><span>it&apos;s in 0.12.0</span></div><div id="t1470167042000548" t="2016-08-02 19:44:02 nathanmarz should probably get around to releasing it"><a href="#t1470167042000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:44:02</span>           nathanmarz </span><span>should probably get around to releasing it</span></div><div id="t1470167044000549" t="2016-08-02 19:44:04 puzzler ah, ok."><a href="#t1470167044000549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:44:04</span>              puzzler </span><span>ah, ok.</span></div><div id="t1470167611000550" t="2016-08-02 19:53:31 mattsfrey this question will probably sound dumb, but I can&apos;t for the the life of me figure out how to include the macros"><a href="#t1470167611000550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:53:31</span>            mattsfrey </span><span>this question will probably sound dumb, but I can&apos;t for the the life of me figure out how to include the macros</span></div><div id="t1470167802000552" t="2016-08-02 19:56:42 mattsfrey (:require-macros [com.rpl.specter.macros])"><a href="#t1470167802000552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:56:42</span>            mattsfrey </span><span>(:require-macros [com.rpl.specter.macros])</span></div><div id="t1470167804000553" t="2016-08-02 19:56:44 mattsfrey results in.."><a href="#t1470167804000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:56:44</span>            mattsfrey </span><span>results in..</span></div><div id="t1470167833000554" t="2016-08-02 19:57:13 mattsfrey #object[TypeError TypeError: undefined is not an object (evaluating &apos;bocl.account.data_test.select.call&apos;)]"><a href="#t1470167833000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:57:13</span>            mattsfrey </span><span>#object[TypeError TypeError: undefined is not an object (evaluating &apos;bocl.account.data_test.select.call&apos;)]</span></div><div id="t1470167837000555" t="2016-08-02 19:57:17 codonnell @mattsfrey: are you using clojure or clojurescript?"><a href="#t1470167837000555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:57:17</span>            codonnell </span><span>@mattsfrey: are you using clojure or clojurescript?</span></div><div id="t1470167842000556" t="2016-08-02 19:57:22 mattsfrey clojurescript"><a href="#t1470167842000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:57:22</span>            mattsfrey </span><span>clojurescript</span></div><div id="t1470167937000557" t="2016-08-02 19:58:57 codonnell I haven&apos;t done much clojurescript; you have the correct namespace. Did you do a lein clean?"><a href="#t1470167937000557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:58:57</span>            codonnell </span><span>I haven&apos;t done much clojurescript; you have the correct namespace. Did you do a lein clean?</span></div><div id="t1470167966000558" t="2016-08-02 19:59:26 mattsfrey yeah"><a href="#t1470167966000558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:59:26</span>            mattsfrey </span><span>yeah</span></div><div id="t1470167975000559" t="2016-08-02 19:59:35 mattsfrey i can pull in the normal lib, but not the macros"><a href="#t1470167975000559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:59:35</span>            mattsfrey </span><span>i can pull in the normal lib, but not the macros</span></div><div id="t1470167983000560" t="2016-08-02 19:59:43 mattsfrey &apos;select&apos; is always undefined"><a href="#t1470167983000560" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">19:59:43</span>            mattsfrey </span><span>&apos;select&apos; is always undefined</span></div><div id="t1470168075000561" t="2016-08-02 20:01:15 codonnell maybe you need it to be  (:require-macros [com.rpl.specter.macros :refer [select transform]]) ?"><a href="#t1470168075000561" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:01:15</span>            codonnell </span><span>maybe you need it to be </span><code>(:require-macros [com.rpl.specter.macros :refer [select transform]])</code><span>?</span></div><div id="t1470168081000562" t="2016-08-02 20:01:21 mattsfrey tried pretty much every permutation of :refer :all, :include-macros, etc etc and they all end up in error other than just (:require-macros [com.rpl.specter]), but that isn&apos;t actually incuding any macros"><a href="#t1470168081000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:01:21</span>            mattsfrey </span><span>tried pretty much every permutation of :refer :all, :include-macros, etc etc and they all end up in error other than just (:require-macros [com.rpl.specter]), but that isn&apos;t actually incuding any macros</span></div><div id="t1470168097000563" t="2016-08-02 20:01:37 codonnell hmm"><a href="#t1470168097000563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:01:37</span>            codonnell </span><span>hmm</span></div><div id="t1470168120000564" t="2016-08-02 20:02:00 mattsfrey lol"><a href="#t1470168120000564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:02:00</span>            mattsfrey </span><span>lol</span></div><div id="t1470168128000565" t="2016-08-02 20:02:08 mattsfrey including transform made it work"><a href="#t1470168128000565" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:02:08</span>            mattsfrey </span><span>including transform made it work</span></div><div id="t1470168183000566" t="2016-08-02 20:03:03 mattsfrey actually nvm"><a href="#t1470168183000566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:03:03</span>            mattsfrey </span><span>actually nvm</span></div><div id="t1470168184000567" t="2016-08-02 20:03:04 mattsfrey (:require-macros [com.rpl.specter.macros :refer [select]])"><a href="#t1470168184000567" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:03:04</span>            mattsfrey </span><span>(:require-macros [com.rpl.specter.macros :refer [select]])</span></div><div id="t1470168188000568" t="2016-08-02 20:03:08 mattsfrey does work"><a href="#t1470168188000568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:03:08</span>            mattsfrey </span><span>does work</span></div><div id="t1470168294000569" t="2016-08-02 20:04:54 codonnell ok, good"><a href="#t1470168294000569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:04:54</span>            codonnell </span><span>ok, good</span></div><div id="t1470168310000570" t="2016-08-02 20:05:10 mattsfrey definitely have to refer whichever ones you need though"><a href="#t1470168310000570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:05:10</span>            mattsfrey </span><span>definitely have to refer whichever ones you need though</span></div><div id="t1470168324000571" t="2016-08-02 20:05:24 mattsfrey :refer :all and :refer-all causes build errors"><a href="#t1470168324000571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:05:24</span>            mattsfrey </span><span>:refer :all and :refer-all causes build errors</span></div><div id="t1470168373000572" t="2016-08-02 20:06:13 codonnell that&apos;s good to know"><a href="#t1470168373000572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:06:13</span>            codonnell </span><span>that&apos;s good to know</span></div><div id="t1470170104000574" t="2016-08-02 20:35:04 mattsfrey anyone know how to get the ALL keyword?"><a href="#t1470170104000574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:35:04</span>            mattsfrey </span><span>anyone know how to get the ALL keyword?</span></div><div id="t1470170113000575" t="2016-08-02 20:35:13 mattsfrey doesn&apos;t seem to be part of macros or the core"><a href="#t1470170113000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:35:13</span>            mattsfrey </span><span>doesn&apos;t seem to be part of macros or the core</span></div><div id="t1470170226000576" t="2016-08-02 20:37:06 codonnell it should be in  com.rpl.specter"><a href="#t1470170226000576" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:37:06</span>            codonnell </span><span>it should be in </span><code>com.rpl.specter</code></div><div id="t1470170285000577" t="2016-08-02 20:38:05 nathanmarz @mattsfrey:  https://nathanmarz.github.io/specter/"><a href="#t1470170285000577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:38:05</span>           nathanmarz </span><span>@mattsfrey: </span><a href="https://nathanmarz.github.io/specter/" target="_blank">https://nathanmarz.github.io/specter/</a></div><div id="t1470170584000578" t="2016-08-02 20:43:04 hueyp is there clojure sugar around importing both ns&apos;s as the same alias? e.g.  (s/select [s/ALL] things)"><a href="#t1470170584000578" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:43:04</span>                hueyp </span><span>is there clojure sugar around importing both ns&apos;s as the same alias? e.g. </span><code>(s/select [s/ALL] things)</code></div><div id="t1470171083000579" t="2016-08-02 20:51:23 nathanmarz @hueyp: not that I know of"><a href="#t1470171083000579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:51:23</span>           nathanmarz </span><span>@hueyp: not that I know of</span></div><div id="t1470171115000580" t="2016-08-02 20:51:55 nathanmarz @hueyp: I use  https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj  to get everything into the same namespace"><a href="#t1470171115000580" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:51:55</span>           nathanmarz </span><span>@hueyp: I use </span><a href="https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj" target="_blank">https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj</a><span> to get everything into the same namespace</span></div><div id="t1470171445000583" t="2016-08-02 20:57:25 hueyp thanks~  upgrading 10 -&gt; 11 so was wondering if any tricks  🙂"><a href="#t1470171445000583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">20:57:25</span>                hueyp </span><span>thanks~  upgrading 10 -&gt; 11 so was wondering if any tricks </span><b>🙂</b></div><div id="t1470172301000587" t="2016-08-02 21:11:41 puzzler It appears that transform [ALL] on a lazy sequence does not produce a lazy sequence.  Is there a way to make it operate in a lazy fashion?"><a href="#t1470172301000587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">21:11:41</span>              puzzler </span><span>It appears that transform [ALL] on a lazy sequence does not produce a lazy sequence.  Is there a way to make it operate in a lazy fashion?</span></div><div id="t1470172519000588" t="2016-08-02 21:15:19 nathanmarz @puzzler: you would need to make a new navigator for that"><a href="#t1470172519000588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">21:15:19</span>           nathanmarz </span><span>@puzzler: you would need to make a new navigator for that</span></div><div id="t1470172598000589" t="2016-08-02 21:16:38 nathanmarz ALL  could have been implemented to work differently for lazy sequences, but I think it&apos;s better for lazy behavior to be explicit"><a href="#t1470172598000589" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">21:16:38</span>           nathanmarz </span><code>ALL</code><span> could have been implemented to work differently for lazy sequences, but I think it&apos;s better for lazy behavior to be explicit</span></div><div id="t1470179703000594" t="2016-08-02 23:15:03 hueyp not sure which construct in specter I’d want to use … I have this:  (defn Foo
  [foo-id]
  [(spec/selected? :type #{&quot;foo&quot;}) (spec/selected? :id #{foo-id})])

(select [THINGS (Foo &quot;bar&quot;)]
        things)
  … which works, but I feel is wrong  🙂 .  I can move it to  declarepath  /  providepath  but wondering if it should use something else"><a href="#t1470179703000594" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:15:03</span>                hueyp </span><span>not sure which construct in specter I’d want to use … I have this: </span><pre>(defn Foo
  [foo-id]
  [(spec/selected? :type #{&quot;foo&quot;}) (spec/selected? :id #{foo-id})])

(select [THINGS (Foo &quot;bar&quot;)]
        things)
</pre><span> … which works, but I feel is wrong </span><b>🙂</b><span>.  I can move it to </span><code>declarepath</code><span> / </span><code>providepath</code><span> but wondering if it should use something else</span></div><div id="t1470179839000595" t="2016-08-02 23:17:19 hueyp this example could also just be a predicate fn, but other examples include navigation~"><a href="#t1470179839000595" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:17:19</span>                hueyp </span><span>this example could also just be a predicate fn, but other examples include navigation~</span></div><div id="t1470179858000596" t="2016-08-02 23:17:38 hueyp attempt at  declarepath  /  provide  path is  (declarepath Foo [foo-id])
(providepath Foo
             [(spec/selected? :type #{&quot;foo&quot;})
              (spec/selected? :id (paramsfn [foo-id] [id] (= foo-id id)))])
"><a href="#t1470179858000596" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:17:38</span>                hueyp </span><span>attempt at </span><code>declarepath</code><span> / </span><code>provide</code><span> path is </span><pre>(declarepath Foo [foo-id])
(providepath Foo
             [(spec/selected? :type #{&quot;foo&quot;})
              (spec/selected? :id (paramsfn [foo-id] [id] (= foo-id id)))])
</pre></div><div id="t1470179890000597" t="2016-08-02 23:18:10 hueyp first time using  paramsfn  … I think it works?  😜"><a href="#t1470179890000597" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:18:10</span>                hueyp </span><span>first time using </span><code>paramsfn</code><span> … I think it works? </span><b>😜</b></div><div id="t1470179919000598" t="2016-08-02 23:18:39 nathanmarz @hueyp: use  comp-paths"><a href="#t1470179919000598" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:18:39</span>           nathanmarz </span><span>@hueyp: use </span><code>comp-paths</code></div><div id="t1470179923000599" t="2016-08-02 23:18:43 nathanmarz (def Foo
  (comp-paths
    (spec/selected? :type #{&quot;foo&quot;})
    (spec/selected? :id (paramsfn [foo-id] [id] (= foo-id id)))))
"><a href="#t1470179923000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:18:43</span>           nathanmarz </span><pre>(def Foo
  (comp-paths
    (spec/selected? :type #{&quot;foo&quot;})
    (spec/selected? :id (paramsfn [foo-id] [id] (= foo-id id)))))
</pre></div><div id="t1470179938000600" t="2016-08-02 23:18:58 hueyp ah yes"><a href="#t1470179938000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:18:58</span>                hueyp </span><span>ah yes</span></div><div id="t1470179944000601" t="2016-08-02 23:19:04 nathanmarz declarepath /`providepath` is for defining recursive navigators"><a href="#t1470179944000601" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:19:04</span>           nathanmarz </span><code>declarepath</code><span>/`providepath` is for defining recursive navigators</span></div><div id="t1470179965000602" t="2016-08-02 23:19:25 hueyp I saw the example with  comp-paths  in tests but it didn’t click"><a href="#t1470179965000602" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:19:25</span>                hueyp </span><span>I saw the example with </span><code>comp-paths</code><span> in tests but it didn’t click</span></div><div id="t1470179973000603" t="2016-08-02 23:19:33 hueyp yah, I felt like those were wrong"><a href="#t1470179973000603" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:19:33</span>                hueyp </span><span>yah, I felt like those were wrong</span></div><div id="t1470179976000604" t="2016-08-02 23:19:36 hueyp the declare stuff"><a href="#t1470179976000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:19:36</span>                hueyp </span><span>the declare stuff</span></div><div id="t1470180008000605" t="2016-08-02 23:20:08 nathanmarz comp-paths  result will be high performance and can be further composed with other navigators without its params"><a href="#t1470180008000605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:20:08</span>           nathanmarz </span><code>comp-paths</code><span> result will be high performance and can be further composed with other navigators without its params</span></div><div id="t1470180022000606" t="2016-08-02 23:20:22 hueyp thanks much  🙂"><a href="#t1470180022000606" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:20:22</span>                hueyp </span><span>thanks much </span><b>🙂</b></div><div id="t1470180037000607" t="2016-08-02 23:20:37 nathanmarz no problem"><a href="#t1470180037000607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span> <span class="t" onclick="H(this)">23:20:37</span>           nathanmarz </span><span>no problem</span></div><div id="t1470210181000631" t="2016-08-03 07:43:01 borkdude is it possible to transform the keys in a map on just one level with specter?"><a href="#t1470210181000631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">07:43:01</span>             borkdude </span><span>is it possible to transform the keys in a map on just one level with specter?</span></div><div id="t1470210202000632" t="2016-08-03 07:43:22 borkdude for example  {:a 1, :b {:c 2}} =&gt; {:aa 1, :bb {:c 2}}"><a href="#t1470210202000632" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">07:43:22</span>             borkdude </span><span>for example </span><code>{:a 1, :b {:c 2}} =&gt; {:aa 1, :bb {:c 2}}</code></div><div id="t1470221632000645" t="2016-08-03 10:53:52 borkdude so, this example:  https://clojurians.slack.com/archives/clojure/p1470213401002703"><a href="#t1470221632000645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:53:52</span>             borkdude </span><span>so, this example: </span><a href="https://clojurians.slack.com/archives/clojure/p1470213401002703" target="_blank">https://clojurians.slack.com/archives/clojure/p1470213401002703</a></div><div id="t1470221647000647" t="2016-08-03 10:54:07 borkdude (defnav KW-NS []
  (select* [this kw next-fn]
    (next-fn (namespace kw)))
  (transform* [this kw next-fn]
    (let [kw-name (name kw)
          new-ns (next-fn (namespace kw))]
      (keyword new-ns kw-name)
      )))

(setval [ALL FIRST KW-NS] &quot;user&quot; {:a 1 :b 2 :c 3})
;; =&gt; {:user/a 1, :user/b 2, :user/c 3}
"><a href="#t1470221647000647" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:54:07</span>             borkdude </span><pre>(defnav KW-NS []
  (select* [this kw next-fn]
    (next-fn (namespace kw)))
  (transform* [this kw next-fn]
    (let [kw-name (name kw)
          new-ns (next-fn (namespace kw))]
      (keyword new-ns kw-name)
      )))

(setval [ALL FIRST KW-NS] &quot;user&quot; {:a 1 :b 2 :c 3})
;; =&gt; {:user/a 1, :user/b 2, :user/c 3}
</pre></div><div id="t1470221653000648" t="2016-08-03 10:54:13 borkdude how does it work?"><a href="#t1470221653000648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:54:13</span>             borkdude </span><span>how does it work?</span></div><div id="t1470221671000649" t="2016-08-03 10:54:31 nathanmarz so KW-NS navigates to the namespace portion of a keyword"><a href="#t1470221671000649" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:54:31</span>           nathanmarz </span><span>so KW-NS navigates to the namespace portion of a keyword</span></div><div id="t1470221695000650" t="2016-08-03 10:54:55 nathanmarz is it the defnav portion that you&apos;re asking about in particular?"><a href="#t1470221695000650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:54:55</span>           nathanmarz </span><span>is it the defnav portion that you&apos;re asking about in particular?</span></div><div id="t1470221700000651" t="2016-08-03 10:55:00 borkdude yes"><a href="#t1470221700000651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:55:00</span>             borkdude </span><span>yes</span></div><div id="t1470221716000652" t="2016-08-03 10:55:16 nathanmarz there&apos;s two code paths, one for select and one for transform"><a href="#t1470221716000652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:55:16</span>           nathanmarz </span><span>there&apos;s two code paths, one for select and one for transform</span></div><div id="t1470221727000653" t="2016-08-03 10:55:27 nathanmarz select must call next-fn on the &quot;navigated to value(s)&quot;"><a href="#t1470221727000653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:55:27</span>           nathanmarz </span><span>select must call next-fn on the &quot;navigated to value(s)&quot;</span></div><div id="t1470221742000654" t="2016-08-03 10:55:42 nathanmarz in this case, it&apos;s just  (next-fn (namespace kw))"><a href="#t1470221742000654" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:55:42</span>           nathanmarz </span><span>in this case, it&apos;s just </span><code>(next-fn (namespace kw))</code></div><div id="t1470221752000655" t="2016-08-03 10:55:52 borkdude @nathanmarz: what is next-fn in the example with setval?"><a href="#t1470221752000655" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:55:52</span>             borkdude </span><span>@nathanmarz: what is next-fn in the example with setval?</span></div><div id="t1470221771000656" t="2016-08-03 10:56:11 nathanmarz it&apos;s the rest of the navigation + final transformation"><a href="#t1470221771000656" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:56:11</span>           nathanmarz </span><span>it&apos;s the rest of the navigation + final transformation</span></div><div id="t1470221785000657" t="2016-08-03 10:56:25 nathanmarz so in this case next-fn will be (fn [v] &quot;user&quot;)"><a href="#t1470221785000657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:56:25</span>           nathanmarz </span><span>so in this case next-fn will be (fn [v] &quot;user&quot;)</span></div><div id="t1470221807000658" t="2016-08-03 10:56:47 nathanmarz if there was more navigation after KW-NS, it would be the transform* code paths for the subsequent navigators"><a href="#t1470221807000658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:56:47</span>           nathanmarz </span><span>if there was more navigation after KW-NS, it would be the transform* code paths for the subsequent navigators</span></div><div id="t1470221814000659" t="2016-08-03 10:56:54 borkdude @nathanmarz: specter takes constants and interprets it as a function?"><a href="#t1470221814000659" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:56:54</span>             borkdude </span><span>@nathanmarz: specter takes constants and interprets it as a function?</span></div><div id="t1470221825000660" t="2016-08-03 10:57:05 nathanmarz setval is a thin wrapper around transform"><a href="#t1470221825000660" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:57:05</span>           nathanmarz </span><span>setval is a thin wrapper around transform</span></div><div id="t1470221863000661" t="2016-08-03 10:57:43 nathanmarz (setval [ALL FIRST KW-NS] &quot;user&quot; {:a 1 :b 2 :c 3})  ==  (transform [ALL FIRST KW-NS] (fn [_] &quot;user&quot;) {:a 1 :b 2 :c 3})"><a href="#t1470221863000661" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:57:43</span>           nathanmarz </span><code>(setval [ALL FIRST KW-NS] &quot;user&quot; {:a 1 :b 2 :c 3})</code><span> == </span><code>(transform [ALL FIRST KW-NS] (fn [_] &quot;user&quot;) {:a 1 :b 2 :c 3})</code></div><div id="t1470221876000662" t="2016-08-03 10:57:56 borkdude ok understood that part"><a href="#t1470221876000662" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:57:56</span>             borkdude </span><span>ok understood that part</span></div><div id="t1470221903000663" t="2016-08-03 10:58:23 borkdude I think I&apos;ll just have to read up on the defnav docs"><a href="#t1470221903000663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:58:23</span>             borkdude </span><span>I think I&apos;ll just have to read up on the defnav docs</span></div><div id="t1470221974000664" t="2016-08-03 10:59:34 nathanmarz here&apos;s how two navigators get composed into one navigator:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L345"><a href="#t1470221974000664" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:59:34</span>           nathanmarz </span><span>here&apos;s how two navigators get composed into one navigator: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L345" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljx#L345</a></div><div id="t1470221996000666" t="2016-08-03 10:59:56 nathanmarz that&apos;s the core of how specter works"><a href="#t1470221996000666" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">10:59:56</span>           nathanmarz </span><span>that&apos;s the core of how specter works</span></div><div id="t1470222020000667" t="2016-08-03 11:00:20 nathanmarz your linear path of navigators becomes a single nested function"><a href="#t1470222020000667" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:00:20</span>           nathanmarz </span><span>your linear path of navigators becomes a single nested function</span></div><div id="t1470222040000668" t="2016-08-03 11:00:40 borkdude I think I&apos;m getting it, but you could also have written:  (transform [ALL FIRST] (fn [kw] (keyword &quot;user&quot; (name kw))))  right? but your example is more abstract"><a href="#t1470222040000668" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:00:40</span>             borkdude </span><span>I think I&apos;m getting it, but you could also have written: </span><code>(transform [ALL FIRST] (fn [kw] (keyword &quot;user&quot; (name kw))))</code><span> right? but your example is more abstract</span></div><div id="t1470222055000669" t="2016-08-03 11:00:55 nathanmarz correct"><a href="#t1470222055000669" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:00:55</span>           nathanmarz </span><span>correct</span></div><div id="t1470222068000670" t="2016-08-03 11:01:08 nathanmarz much more reusable and composable"><a href="#t1470222068000670" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:01:08</span>           nathanmarz </span><span>much more reusable and composable</span></div><div id="t1470222078000671" t="2016-08-03 11:01:18 borkdude cool stuff  🙂"><a href="#t1470222078000671" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:01:18</span>             borkdude </span><span>cool stuff </span><b>🙂</b></div><div id="t1470222163000672" t="2016-08-03 11:02:43 borkdude any reason specter is still using cljx? compatibility with previous clj versions?"><a href="#t1470222163000672" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:02:43</span>             borkdude </span><span>any reason specter is still using cljx? compatibility with previous clj versions?</span></div><div id="t1470222213000673" t="2016-08-03 11:03:33 nathanmarz yea"><a href="#t1470222213000673" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:03:33</span>           nathanmarz </span><span>yea</span></div><div id="t1470222249000674" t="2016-08-03 11:04:09 nathanmarz though finally dropping support for 1.6 as of specter 0.12.0"><a href="#t1470222249000674" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:04:09</span>           nathanmarz </span><span>though finally dropping support for 1.6 as of specter 0.12.0</span></div><div id="t1470222260000675" t="2016-08-03 11:04:20 nathanmarz just need to do the work now of porting to cljc"><a href="#t1470222260000675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span> <span class="t" onclick="H(this)">11:04:20</span>           nathanmarz </span><span>just need to do the work now of porting to cljc</span></div><div id="t1470337817000772" t="2016-08-04 19:10:17 jjcomer @nathanmarz: Any chance you could release 0.12.0 in the near future? We are looking to cut a release of our service pretty soon and require the fixes in 0.12.0"><a href="#t1470337817000772" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span> <span class="t" onclick="H(this)">19:10:17</span>              jjcomer </span><span>@nathanmarz: Any chance you could release 0.12.0 in the near future? We are looking to cut a release of our service pretty soon and require the fixes in 0.12.0</span></div><div id="t1470344697000779" t="2016-08-04 21:04:57 hueyp master builds fine for us if you clone / build locally (we needed aot fix)"><a href="#t1470344697000779" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span> <span class="t" onclick="H(this)">21:04:57</span>                hueyp </span><span>master builds fine for us if you clone / build locally (we needed aot fix)</span></div><div id="t1470378630000808" t="2016-08-05 06:30:30 esirola hi, is it possible to implement something similar to a &quot;group-by&quot; operation with specter?"><a href="#t1470378630000808" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">06:30:30</span>              esirola </span><span>hi, is it possible to implement something similar to a &quot;group-by&quot; operation with specter?</span></div><div id="t1470378751000809" t="2016-08-05 06:32:31 esirola i&apos;d like to do something like  [{:a 1, :b 1} {:a 1, :b 2} {:a 2, :b 2}] -&gt; [{:a 1, :b [1 2]} {:a 2, :b [2]}]"><a href="#t1470378751000809" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">06:32:31</span>              esirola </span><span>i&apos;d like to do something like </span><pre>[{:a 1, :b 1} {:a 1, :b 2} {:a 2, :b 2}] -&gt; [{:a 1, :b [1 2]} {:a 2, :b [2]}]</pre></div><div id="t1470378822000811" t="2016-08-05 06:33:42 esirola ... and I&apos;m a bit puzzled"><a href="#t1470378822000811" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">06:33:42</span>              esirola </span><span>... and I&apos;m a bit puzzled</span></div><div id="t1470378960000812" t="2016-08-05 06:36:00 esirola you need to accumulate things while you traverse the collection somewhere, but I can&apos;t figure out how (if possible)"><a href="#t1470378960000812" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">06:36:00</span>              esirola </span><span>you need to accumulate things while you traverse the collection somewhere, but I can&apos;t figure out how (if possible)</span></div><div id="t1470390713000819" t="2016-08-05 09:51:53 nathanmarz @jjcomer: will do once clojars comes back up"><a href="#t1470390713000819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">09:51:53</span>           nathanmarz </span><span>@jjcomer: will do once clojars comes back up</span></div><div id="t1470390831000821" t="2016-08-05 09:53:51 nathanmarz @esirola: I&apos;m not sure how to express that with navigation"><a href="#t1470390831000821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">09:53:51</span>           nathanmarz </span><span>@esirola: I&apos;m not sure how to express that with navigation</span></div><div id="t1470391964000824" t="2016-08-05 10:12:44 nathanmarz released 0.12.0:  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1470391964000824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">10:12:44</span>           nathanmarz </span><span>released 0.12.0: </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1470392801000826" t="2016-08-05 10:26:41 esirola @nathanmarz: ok thanks a lot"><a href="#t1470392801000826" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">10:26:41</span>              esirola </span><span>@nathanmarz: ok thanks a lot</span></div><div id="t1470393140000828" t="2016-08-05 10:32:20 borkdude @esirola: I just implemented it as an exercise, not with Specter: 
 (let [data [{:a 1, :b 1} {:a 1, :b 2} {:a 2, :b 2}]]
       #_=&gt;   (reduce (fn [acc [k v]] (conj acc {:a k :b (mapv :b v)})) [] (group-by :a data)))
"><a href="#t1470393140000828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">10:32:20</span>             borkdude </span><span>@esirola: I just implemented it as an exercise, not with Specter: 
</span><pre>(let [data [{:a 1, :b 1} {:a 1, :b 2} {:a 2, :b 2}]]
       #_=&gt;   (reduce (fn [acc [k v]] (conj acc {:a k :b (mapv :b v)})) [] (group-by :a data)))
</pre></div><div id="t1470399708000838" t="2016-08-05 12:21:48 jjcomer @nathanmarz: Thanks!"><a href="#t1470399708000838" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">12:21:48</span>              jjcomer </span><span>@nathanmarz: Thanks!</span></div><div id="t1470410082000849" t="2016-08-05 15:14:42 borkdude What is the reason one path is called FIRST and another MAP-VALS, why not FIRST and SECOND?"><a href="#t1470410082000849" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:14:42</span>             borkdude </span><span>What is the reason one path is called FIRST and another MAP-VALS, why not FIRST and SECOND?</span></div><div id="t1470411242000850" t="2016-08-05 15:34:02 nathanmarz @borkdude: MAP-VALS navigates to each value of a map, has nothing to do with  second"><a href="#t1470411242000850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:34:02</span>           nathanmarz </span><span>@borkdude: MAP-VALS navigates to each value of a map, has nothing to do with </span><code>second</code></div><div id="t1470411656000851" t="2016-08-05 15:40:56 borkdude @nathanmarz: ah, I mean [ALL FIRST] vs [MAP-VALS] - why is there no MAP-KEYS?"><a href="#t1470411656000851" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:40:56</span>             borkdude </span><span>@nathanmarz: ah, I mean [ALL FIRST] vs [MAP-VALS] - why is there no MAP-KEYS?</span></div><div id="t1470411819000852" t="2016-08-05 15:43:39 borkdude because this case is rare, probably"><a href="#t1470411819000852" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:43:39</span>             borkdude </span><span>because this case is rare, probably</span></div><div id="t1470411827000853" t="2016-08-05 15:43:47 nathanmarz yea"><a href="#t1470411827000853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:43:47</span>           nathanmarz </span><span>yea</span></div><div id="t1470411846000854" t="2016-08-05 15:44:06 nathanmarz there could be a MAP-KEYS that&apos;s more efficient than ALL FIRST but I&apos;ve never needed that"><a href="#t1470411846000854" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:44:06</span>           nathanmarz </span><span>there could be a MAP-KEYS that&apos;s more efficient than ALL FIRST but I&apos;ve never needed that</span></div><div id="t1470411859000855" t="2016-08-05 15:44:19 nathanmarz whereas MAP-VALS comes up all the time, so having an optimized version provides a lot of value"><a href="#t1470411859000855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:44:19</span>           nathanmarz </span><span>whereas MAP-VALS comes up all the time, so having an optimized version provides a lot of value</span></div><div id="t1470411892000856" t="2016-08-05 15:44:52 nathanmarz you can do  (def MAP-KEYS (comp-paths ALL FIRST))  if you want something reusable"><a href="#t1470411892000856" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:44:52</span>           nathanmarz </span><span>you can do </span><code>(def MAP-KEYS (comp-paths ALL FIRST))</code><span> if you want something reusable</span></div><div id="t1470411942000857" t="2016-08-05 15:45:42 borkdude I was just wondering, didn&apos;t really need it"><a href="#t1470411942000857" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:45:42</span>             borkdude </span><span>I was just wondering, didn&apos;t really need it</span></div><div id="t1470411995000859" t="2016-08-05 15:46:35 nathanmarz pretty much everything in Specter grew out of real use cases"><a href="#t1470411995000859" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:46:35</span>           nathanmarz </span><span>pretty much everything in Specter grew out of real use cases</span></div><div id="t1470412010000860" t="2016-08-05 15:46:50 borkdude I needed it when I wanted to solve a stackoverflow question though, I had to transform the keys"><a href="#t1470412010000860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-05</span> <span class="t" onclick="H(this)">15:46:50</span>             borkdude </span><span>I needed it when I wanted to solve a stackoverflow question though, I had to transform the keys</span></div><div id="t1470629610001023" t="2016-08-08 04:13:30 jjunior130 I require both  com.rpl.specter  &amp;  com.rpl.specter.macros  namespaces in ClojureScript"><a href="#t1470629610001023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">04:13:30</span>           jjunior130 </span><span>I require both </span><code>com.rpl.specter</code><span> &amp; </span><code>com.rpl.specter.macros</code><span> namespaces in ClojureScript</span></div><div id="t1470629718001025" t="2016-08-08 04:15:18 jjunior130 all symbols from  com.rpl.specter  work but not  com.rpl.specter.macros"><a href="#t1470629718001025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">04:15:18</span>           jjunior130 </span><span>all symbols from </span><code>com.rpl.specter</code><span> work but not </span><code>com.rpl.specter.macros</code></div><div id="t1470629783001026" t="2016-08-08 04:16:23 jjunior130 when I try a symbol from  com.rpl.specter.macros  such as  transform  I get this error message:
 Uncaught TypeError: Cannot read property &apos;cljs$core$IFn$_invoke$arity$1&apos; of undefined
core.js [32556]	anonymous
core.js [19022]	anonymous
core.js [19023]	anonymous
core.js [19038]	cljs.core.PersistentVector.cljs$core$IReduce$_reduce$arity$3
core.js [7719]	cljs.core.reduce.cljs$core$IFn$_invoke$arity$3
core.js [32555]	cljs$core$group_by
views.js?zx=ibkddq5mtrqz [72]	anonymous
specter.js [975]	$rpl$specter$protocols$Navigator$transform_STAR_$arity$3
protocols.js [46]	com$rpl$specter$protocols$transform_STAR_
impl.js [2175]	com.rpl.specter.impl.structure_path_impl
impl.js [2202]	anonymous
impl.js [2371]	anonymous
core.js [16854]	anonymous
core.js [16855]	cljs.core.map.cljs$core$IFn$_invoke$arity$2
core.js [10895]	cljs.core.LazySeq.sval
core.js [11046]	cljs.core.LazySeq.cljs$core$ISeqable$_seq$arity$1
core.js [4117]	cljs$core$seq
core.js [30313]	cljs.core.dorun.cljs$core$IFn$_invoke$arity$1
core.js [30381]	cljs.core.doall.cljs$core$IFn$_invoke$arity$1
core.js [30367]	cljs$core$doall
impl.js [3239]	com.rpl.specter.impl.all_transform._
impl.js [3177]	com$rpl$specter$impl$all_transform
impl.js [3280]	$rpl$specter$protocols$Navigator$transform_STAR_$arity$3
protocols.js [46]	com$rpl$specter$protocols$transform_STAR_
impl.js [2175]	com.rpl.specter.impl.structure_path_impl
impl.js [2202]	anonymous
impl.js [2369]	com.rpl.specter.impl.combine_same_types.combiner
impl.js [284]	anonymous
impl.js [3112]	com$rpl$specter$impl$compiled_transform_STAR_
views.js?zx=ibkddq5mtrqz [54]	anonymous
"><a href="#t1470629783001026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">04:16:23</span>           jjunior130 </span><span>when I try a symbol from </span><code>com.rpl.specter.macros</code><span> such as </span><code>transform</code><span> I get this error message:
</span><pre>Uncaught TypeError: Cannot read property &apos;cljs$core$IFn$_invoke$arity$1&apos; of undefined
core.js [32556]	anonymous
core.js [19022]	anonymous
core.js [19023]	anonymous
core.js [19038]	cljs.core.PersistentVector.cljs$core$IReduce$_reduce$arity$3
core.js [7719]	cljs.core.reduce.cljs$core$IFn$_invoke$arity$3
core.js [32555]	cljs$core$group_by
views.js?zx=ibkddq5mtrqz [72]	anonymous
specter.js [975]	$rpl$specter$protocols$Navigator$transform_STAR_$arity$3
protocols.js [46]	com$rpl$specter$protocols$transform_STAR_
impl.js [2175]	com.rpl.specter.impl.structure_path_impl
impl.js [2202]	anonymous
impl.js [2371]	anonymous
core.js [16854]	anonymous
core.js [16855]	cljs.core.map.cljs$core$IFn$_invoke$arity$2
core.js [10895]	cljs.core.LazySeq.sval
core.js [11046]	cljs.core.LazySeq.cljs$core$ISeqable$_seq$arity$1
core.js [4117]	cljs$core$seq
core.js [30313]	cljs.core.dorun.cljs$core$IFn$_invoke$arity$1
core.js [30381]	cljs.core.doall.cljs$core$IFn$_invoke$arity$1
core.js [30367]	cljs$core$doall
impl.js [3239]	com.rpl.specter.impl.all_transform._
impl.js [3177]	com$rpl$specter$impl$all_transform
impl.js [3280]	$rpl$specter$protocols$Navigator$transform_STAR_$arity$3
protocols.js [46]	com$rpl$specter$protocols$transform_STAR_
impl.js [2175]	com.rpl.specter.impl.structure_path_impl
impl.js [2202]	anonymous
impl.js [2369]	com.rpl.specter.impl.combine_same_types.combiner
impl.js [284]	anonymous
impl.js [3112]	com$rpl$specter$impl$compiled_transform_STAR_
views.js?zx=ibkddq5mtrqz [54]	anonymous
</pre></div><div id="t1470630030001030" t="2016-08-08 04:20:30 jjunior130 I have ran  lein clean  and  lein cljsbuild once"><a href="#t1470630030001030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">04:20:30</span>           jjunior130 </span><span>I have ran </span><code>lein clean</code><span> and </span><code>lein cljsbuild once</code></div><div id="t1470640878001040" t="2016-08-08 07:21:18 esirola @borkdude: yes, I guess one can &quot;select&quot; with specter producing something like the maps you worked on and then use something like the code you posted to perform the aggregations"><a href="#t1470640878001040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">07:21:18</span>              esirola </span><span>@borkdude: yes, I guess one can &quot;select&quot; with specter producing something like the maps you worked on and then use something like the code you posted to perform the aggregations</span></div><div id="t1470649109001046" t="2016-08-08 09:38:29 yonatanel I want to get a deeply nested map value from a parsed SOAP response, so the value of key :contents when the :tag value is :second or any other I choose. I used walker but I wonder if there&apos;s a more elegant way:
 (select-one [(walker #(= :second (:tag %))) :content FIRST] parsed-soap)
=&gt;
&quot;123&quot; 

parsed-soap is
 {:tag :soap:Envelope,
 :attrs {:xmlns:xsi &quot;&quot;,
         :xmlns:xsd &quot;&quot;,
         :xmlns:soap &quot;&quot;},
 :content [{:tag :soap:Body,
            :attrs nil,
            :content [{:tag :aResponse
                       :attrs {:xmlns:a &quot;&quot;},
                       :content [{:tag :a:aResult,
                                  :attrs nil,
                                  :content [{:tag :first
                                             :attrs {:xsi:nil &quot;true&quot;, :xmlns &quot;&quot;},
                                             :content nil}
                                            {:tag :second
                                             :attrs {:xmlns &quot;&quot;},
                                             :content [&quot;123&quot;]}
                                            {:tag :third,
                                             :attrs {:xsi:nil &quot;true&quot;, :xmlns &quot;&quot;},
                                             :content nil}]}]}]}]}"><a href="#t1470649109001046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">09:38:29</span>            yonatanel </span><span>I want to get a deeply nested map value from a parsed SOAP response, so the value of key :contents when the :tag value is :second or any other I choose. I used walker but I wonder if there&apos;s a more elegant way:
</span><pre>(select-one [(walker #(= :second (:tag %))) :content FIRST] parsed-soap)
=&gt;
&quot;123&quot;</pre><span>

parsed-soap is
</span><pre>{:tag :soap:Envelope,
 :attrs {:xmlns:xsi &quot;&quot;,
         :xmlns:xsd &quot;&quot;,
         :xmlns:soap &quot;&quot;},
 :content [{:tag :soap:Body,
            :attrs nil,
            :content [{:tag :aResponse
                       :attrs {:xmlns:a &quot;&quot;},
                       :content [{:tag :a:aResult,
                                  :attrs nil,
                                  :content [{:tag :first
                                             :attrs {:xsi:nil &quot;true&quot;, :xmlns &quot;&quot;},
                                             :content nil}
                                            {:tag :second
                                             :attrs {:xmlns &quot;&quot;},
                                             :content [&quot;123&quot;]}
                                            {:tag :third,
                                             :attrs {:xsi:nil &quot;true&quot;, :xmlns &quot;&quot;},
                                             :content nil}]}]}]}]}</pre></div><div id="t1470650357001049" t="2016-08-08 09:59:17 nathanmarz @jjunior130: what version and what&apos;s the exact code you&apos;re running?"><a href="#t1470650357001049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">09:59:17</span>           nathanmarz </span><span>@jjunior130: what version and what&apos;s the exact code you&apos;re running?</span></div><div id="t1470650594001050" t="2016-08-08 10:03:14 nathanmarz @yonatanel: my only issue with that code is it relies on a strange property of clojure which is that you can do map lookups on non-map values without error"><a href="#t1470650594001050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:03:14</span>           nathanmarz </span><span>@yonatanel: my only issue with that code is it relies on a strange property of clojure which is that you can do map lookups on non-map values without error</span></div><div id="t1470650611001051" t="2016-08-08 10:03:31 nathanmarz since walker will run that function on everything it finds"><a href="#t1470650611001051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:03:31</span>           nathanmarz </span><span>since walker will run that function on everything it finds</span></div><div id="t1470650628001052" t="2016-08-08 10:03:48 nathanmarz that also makes that particular path less performant than ideal"><a href="#t1470650628001052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:03:48</span>           nathanmarz </span><span>that also makes that particular path less performant than ideal</span></div><div id="t1470650650001053" t="2016-08-08 10:04:10 nathanmarz the alternative is to explicitly make a recursive navigator that understands the particular structure of this data"><a href="#t1470650650001053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:04:10</span>           nathanmarz </span><span>the alternative is to explicitly make a recursive navigator that understands the particular structure of this data</span></div><div id="t1470651001001054" t="2016-08-08 10:10:01 nathanmarz @yonatanel: 
 (declarepath SoapPath)
(providepath SoapPath
  (continue-then-stay
    :content
    ALL
    SoapPath
    ))

(select-one [SoapPath #(= :second (:tag %)) :content FIRST] parsed-soap)
"><a href="#t1470651001001054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:10:01</span>           nathanmarz </span><span>@yonatanel: 
</span><pre>(declarepath SoapPath)
(providepath SoapPath
  (continue-then-stay
    :content
    ALL
    SoapPath
    ))

(select-one [SoapPath #(= :second (:tag %)) :content FIRST] parsed-soap)
</pre></div><div id="t1470651045001055" t="2016-08-08 10:10:45 yonatanel @nathanmarz: can one be compiled by running an example first? Could be nice to tell it to walk the structure and learn for next time."><a href="#t1470651045001055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:10:45</span>            yonatanel </span><span>@nathanmarz: can one be compiled by running an example first? Could be nice to tell it to walk the structure and learn for next time.</span></div><div id="t1470651092001056" t="2016-08-08 10:11:32 nathanmarz you mean use  walker  and then have it &quot;learn&quot; the path that I wrote?"><a href="#t1470651092001056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:11:32</span>           nathanmarz </span><span>you mean use </span><code>walker</code><span> and then have it &quot;learn&quot; the path that I wrote?</span></div><div id="t1470651231001057" t="2016-08-08 10:13:51 yonatanel yes, assuming it works. I don&apos;t entirely understand it yet."><a href="#t1470651231001057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:13:51</span>            yonatanel </span><span>yes, assuming it works. I don&apos;t entirely understand it yet.</span></div><div id="t1470651380001058" t="2016-08-08 10:16:20 nathanmarz it&apos;s an interesting idea but seems like it would be full of minefields"><a href="#t1470651380001058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:16:20</span>           nathanmarz </span><span>it&apos;s an interesting idea but seems like it would be full of minefields</span></div><div id="t1470651395001059" t="2016-08-08 10:16:35 nathanmarz there&apos;s no way for walker to know that the data structure is recursive, for one"><a href="#t1470651395001059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">10:16:35</span>           nathanmarz </span><span>there&apos;s no way for walker to know that the data structure is recursive, for one</span></div><div id="t1470663494001070" t="2016-08-08 13:38:14 shader any chance we could get anonymous recursive navigation? so you don&apos;t have to separately declare/provide the navigator? It seems to be a very common pattern"><a href="#t1470663494001070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">13:38:14</span>               shader </span><span>any chance we could get anonymous recursive navigation? so you don&apos;t have to separately declare/provide the navigator? It seems to be a very common pattern</span></div><div id="t1470664800001075" t="2016-08-08 14:00:00 nathanmarz @shader: you can open up an issue for it"><a href="#t1470664800001075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">14:00:00</span>           nathanmarz </span><span>@shader: you can open up an issue for it</span></div><div id="t1470691126001096" t="2016-08-08 21:18:46 jjunior130 @nathanmarz: nvm, it&apos;s working now. After I  lein clean  &amp;  lein cljsbuild once  yesterday, all I did between then and now was reboot my computer. Probably I didn&apos;t restart the repl I was in yesterday (I thought I did). I&apos;m good now. Namespace  com.rpl.specter.macros  is working now."><a href="#t1470691126001096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">21:18:46</span>           jjunior130 </span><span>@nathanmarz: nvm, it&apos;s working now. After I </span><code>lein clean</code><span> &amp; </span><code>lein cljsbuild once</code><span> yesterday, all I did between then and now was reboot my computer. Probably I didn&apos;t restart the repl I was in yesterday (I thought I did). I&apos;m good now. Namespace </span><code>com.rpl.specter.macros</code><span> is working now.</span></div><div id="t1470691185001097" t="2016-08-08 21:19:45 nathanmarz @jjunior130: good to hear"><a href="#t1470691185001097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-08</span> <span class="t" onclick="H(this)">21:19:45</span>           nathanmarz </span><span>@jjunior130: good to hear</span></div><div id="t1470727373001125" t="2016-08-09 07:22:53 yonatanel Any plans for a lookahead navigator, for example to select a map value if a sibling descendant matches a predicate?"><a href="#t1470727373001125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-09</span> <span class="t" onclick="H(this)">07:22:53</span>            yonatanel </span><span>Any plans for a lookahead navigator, for example to select a map value if a sibling descendant matches a predicate?</span></div><div id="t1470727491001126" t="2016-08-09 07:24:51 codonnell @yonatanel: you could do something like that with  selected?"><a href="#t1470727491001126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-09</span> <span class="t" onclick="H(this)">07:24:51</span>            codonnell </span><span>@yonatanel: you could do something like that with </span><code>selected?</code></div><div id="t1470727861001128" t="2016-08-09 07:31:01 yonatanel very nice. thanks"><a href="#t1470727861001128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-09</span> <span class="t" onclick="H(this)">07:31:01</span>            yonatanel </span><span>very nice. thanks</span></div><div id="t1470728030001129" t="2016-08-09 07:33:50 codonnell you&apos;re welcome"><a href="#t1470728030001129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-09</span> <span class="t" onclick="H(this)">07:33:50</span>            codonnell </span><span>you&apos;re welcome</span></div><div id="t1470832621001179" t="2016-08-10 12:37:01 achesnais @nathanmarz: I wonder, any best practices on aliasing specter? I find that having the split between  specter  and  specter.macros  prevents from efficiently aliasing everything under one ‘specter’ alias. I really like using ns aliases for any non-core library I use, to improve readability/non-ambiguity in my code. Is this split due to the treatment of macros in Clojurescript?"><a href="#t1470832621001179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">12:37:01</span>            achesnais </span><span>@nathanmarz: I wonder, any best practices on aliasing specter? I find that having the split between </span><code>specter</code><span> and </span><code>specter.macros</code><span> prevents from efficiently aliasing everything under one ‘specter’ alias. I really like using ns aliases for any non-core library I use, to improve readability/non-ambiguity in my code. Is this split due to the treatment of macros in Clojurescript?</span></div><div id="t1470833781001181" t="2016-08-10 12:56:21 nathanmarz @achesnais: yes, it was done for cljs"><a href="#t1470833781001181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">12:56:21</span>           nathanmarz </span><span>@achesnais: yes, it was done for cljs</span></div><div id="t1470833807001182" t="2016-08-10 12:56:47 nathanmarz @achesnais: I use  https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj  to get everything into a single namespace"><a href="#t1470833807001182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">12:56:47</span>           nathanmarz </span><span>@achesnais: I use </span><a href="https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj" target="_blank">https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj</a><span> to get everything into a single namespace</span></div><div id="t1470842219001186" t="2016-08-10 15:16:59 sebastianpoeplau is there a way to do something like &quot;insert or update&quot; on a vector? let&apos;s say I have a vector  [{:name &quot;Test&quot;} {:name &quot;Whatever&quot;}]  and I would like to run f on the element that satisfies  #(= &quot;Something&quot; (:name %))  (or create it, as in this case it doesn&apos;t exist)"><a href="#t1470842219001186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">15:16:59</span>     sebastianpoeplau </span><span>is there a way to do something like &quot;insert or update&quot; on a vector? let&apos;s say I have a vector </span><code>[{:name &quot;Test&quot;} {:name &quot;Whatever&quot;}]</code><span> and I would like to run f on the element that satisfies </span><code>#(= &quot;Something&quot; (:name %))</code><span> (or create it, as in this case it doesn&apos;t exist)</span></div><div id="t1470842274001187" t="2016-08-10 15:17:54 sebastianpoeplau I&apos;ve been playing with  nil-&gt;val  but when my predicate doesn&apos;t match on any element of the vector I get an empty vector and not  nil"><a href="#t1470842274001187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">15:17:54</span>     sebastianpoeplau </span><span>I&apos;ve been playing with </span><code>nil-&gt;val</code><span> but when my predicate doesn&apos;t match on any element of the vector I get an empty vector and not </span><code>nil</code></div><div id="t1470845270001189" t="2016-08-10 16:07:50 achesnais @nathanmarz: thanks  🙂"><a href="#t1470845270001189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">16:07:50</span>            achesnais </span><span>@nathanmarz: thanks </span><b>🙂</b></div><div id="t1470853564001199" t="2016-08-10 18:26:04 mattsfrey hello, wondering if anyone knows how to replicate  (update-in db [:contacts :show-modal?] assoc true)  using transform"><a href="#t1470853564001199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:26:04</span>            mattsfrey </span><span>hello, wondering if anyone knows how to replicate </span><pre>(update-in db [:contacts :show-modal?] assoc true)</pre><span> using transform</span></div><div id="t1470853615001200" t="2016-08-10 18:26:55 mattsfrey I tried  (transform [:contacts] #(assoc % :show-modal? true) db)  and it seems to be doing transformations to much of the db for some reason"><a href="#t1470853615001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:26:55</span>            mattsfrey </span><span>I tried </span><pre>(transform [:contacts] #(assoc % :show-modal? true) db)</pre><span> and it seems to be doing transformations to much of the db for some reason</span></div><div id="t1470854413001201" t="2016-08-10 18:40:13 mattsfrey nvm it is working, was another issue"><a href="#t1470854413001201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:40:13</span>            mattsfrey </span><span>nvm it is working, was another issue</span></div><div id="t1470854443001202" t="2016-08-10 18:40:43 mattsfrey but in the same vein, is there a more efficient or elegant way to  write that^^ ?"><a href="#t1470854443001202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:40:43</span>            mattsfrey </span><span>but in the same vein, is there a more efficient or elegant way to  write that^^ ?</span></div><div id="t1470854780001204" t="2016-08-10 18:46:20 nathanmarz @sebastianpoeplau: can you show an example of the input/output you&apos;re looking for?"><a href="#t1470854780001204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:46:20</span>           nathanmarz </span><span>@sebastianpoeplau: can you show an example of the input/output you&apos;re looking for?</span></div><div id="t1470854873001205" t="2016-08-10 18:47:53 nathanmarz @mattsfrey:  (setval [:contacts :show-modal?] true db)"><a href="#t1470854873001205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">18:47:53</span>           nathanmarz </span><span>@mattsfrey: </span><code>(setval [:contacts :show-modal?] true db)</code></div><div id="t1470855783001206" t="2016-08-10 19:03:03 mattsfrey ah that is nice, does it get the 6x performance of transform etc though?"><a href="#t1470855783001206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">19:03:03</span>            mattsfrey </span><span>ah that is nice, does it get the 6x performance of transform etc though?</span></div><div id="t1470855794001207" t="2016-08-10 19:03:14 mattsfrey or is that not a good example for comparison"><a href="#t1470855794001207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">19:03:14</span>            mattsfrey </span><span>or is that not a good example for comparison</span></div><div id="t1470856758001208" t="2016-08-10 19:19:18 nathanmarz @mattsfrey: yes, that will be much faster than update-in"><a href="#t1470856758001208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">19:19:18</span>           nathanmarz </span><span>@mattsfrey: yes, that will be much faster than update-in</span></div><div id="t1470856805001209" t="2016-08-10 19:20:05 nathanmarz the new update-in in 1.9 is much better but specter still outperforms it"><a href="#t1470856805001209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">19:20:05</span>           nathanmarz </span><span>the new update-in in 1.9 is much better but specter still outperforms it</span></div><div id="t1470856819001210" t="2016-08-10 19:20:19 mattsfrey oic, good to know, thanks!"><a href="#t1470856819001210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">19:20:19</span>            mattsfrey </span><span>oic, good to know, thanks!</span></div><div id="t1470864717001213" t="2016-08-10 21:31:57 sebastianpoeplau @nathanmarz: of course - say I have  (defn f [person] (assoc person :some &quot;value&quot;)) , then I would like the transformation to return  [{:name &quot;Test&quot; :some &quot;value&quot;} {:name &quot;Whatever&quot;}]  when called on input  [{:name &quot;Test&quot;} {:name &quot;Whatever&quot;}] , and it should return the same value when used on input  [{:name &quot;Whatever&quot;}] . that is, it should update the entry that has  :name &quot;Test&quot;  or insert it if it&apos;s not in the vector"><a href="#t1470864717001213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">21:31:57</span>     sebastianpoeplau </span><span>@nathanmarz: of course - say I have </span><code>(defn f [person] (assoc person :some &quot;value&quot;))</code><span>, then I would like the transformation to return </span><code>[{:name &quot;Test&quot; :some &quot;value&quot;} {:name &quot;Whatever&quot;}]</code><span> when called on input </span><code>[{:name &quot;Test&quot;} {:name &quot;Whatever&quot;}]</code><span>, and it should return the same value when used on input </span><code>[{:name &quot;Whatever&quot;}]</code><span>. that is, it should update the entry that has </span><code>:name &quot;Test&quot;</code><span> or insert it if it&apos;s not in the vector</span></div><div id="t1470864924001214" t="2016-08-10 21:35:24 sebastianpoeplau my best guess so far is the following:
 (setval [(not-selected? ALL #(= &quot;Test&quot; (:name %))) END] [{:name &quot;Test&quot;}]) ; insert if necessary
(transform [ALL #(= &quot;Test&quot; (:name %))] f my-vector) ; apply my function
"><a href="#t1470864924001214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">21:35:24</span>     sebastianpoeplau </span><span>my best guess so far is the following:
</span><pre>(setval [(not-selected? ALL #(= &quot;Test&quot; (:name %))) END] [{:name &quot;Test&quot;}]) ; insert if necessary
(transform [ALL #(= &quot;Test&quot; (:name %))] f my-vector) ; apply my function
</pre></div><div id="t1470865215001215" t="2016-08-10 21:40:15 sebastianpoeplau I&apos;m just realizing that I could change the lambda  #(= &quot;Test&quot; (:name %))  to  :name #(= &quot;Test&quot; %) , but the question is still whether I can accomplish both steps, insertion and transformation, in one go"><a href="#t1470865215001215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">21:40:15</span>     sebastianpoeplau </span><span>I&apos;m just realizing that I could change the lambda </span><code>#(= &quot;Test&quot; (:name %))</code><span> to </span><code>:name #(= &quot;Test&quot; %)</code><span>, but the question is still whether I can accomplish both steps, insertion and transformation, in one go</span></div><div id="t1470866219001216" t="2016-08-10 21:56:59 nathanmarz @sebastianpoeplau: I think doing it the way you&apos;re doing it is the cleanest approach"><a href="#t1470866219001216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">21:56:59</span>           nathanmarz </span><span>@sebastianpoeplau: I think doing it the way you&apos;re doing it is the cleanest approach</span></div><div id="t1470866283001217" t="2016-08-10 21:58:03 nathanmarz I would recommend factoring out [ALL #(= &quot;Test&quot; (:name %)))] into a composite navigator and re-using it in each call"><a href="#t1470866283001217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">21:58:03</span>           nathanmarz </span><span>I would recommend factoring out [ALL #(= &quot;Test&quot; (:name %)))] into a composite navigator and re-using it in each call</span></div><div id="t1470866498001218" t="2016-08-10 22:01:38 nathanmarz @sebastianpoeplau: 
 (def person-nav (comp-paths ALL (paramsfn [id] [p] (= id (:name p)))))

(setval [(not-selected? (person-nav &quot;Test&quot;)) END] [{:name &quot;Test&quot;}] my-vector)
(transform (person-nav &quot;Test&quot;) #(assoc % :some &quot;hi&quot;) my-vector)
"><a href="#t1470866498001218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-10</span> <span class="t" onclick="H(this)">22:01:38</span>           nathanmarz </span><span>@sebastianpoeplau: 
</span><pre>(def person-nav (comp-paths ALL (paramsfn [id] [p] (= id (:name p)))))

(setval [(not-selected? (person-nav &quot;Test&quot;)) END] [{:name &quot;Test&quot;}] my-vector)
(transform (person-nav &quot;Test&quot;) #(assoc % :some &quot;hi&quot;) my-vector)
</pre></div><div id="t1470900869001238" t="2016-08-11 07:34:29 sebastianpoeplau @nathanmarz: cool, thank you!"><a href="#t1470900869001238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">07:34:29</span>     sebastianpoeplau </span><span>@nathanmarz: cool, thank you!</span></div><div id="t1470912153001245" t="2016-08-11 10:42:33 borkdude nice challenge for specter:  https://stackoverflow.com/questions/38893968/how-to-select-keys-in-nested-maps-in-clojure"><a href="#t1470912153001245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">10:42:33</span>             borkdude </span><span>nice challenge for specter: </span><a href="https://stackoverflow.com/questions/38893968/how-to-select-keys-in-nested-maps-in-clojure" target="_blank">https://stackoverflow.com/questions/38893968/how-to-select-keys-in-nested-maps-in-clojure</a></div><div id="t1470912658001247" t="2016-08-11 10:50:58 borkdude It brings me to the question how you prune a map in specter"><a href="#t1470912658001247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">10:50:58</span>             borkdude </span><span>It brings me to the question how you prune a map in specter</span></div><div id="t1470912700001248" t="2016-08-11 10:51:40 borkdude like  {:a 1, :b 2, :c 3}  =&gt;  {:a 1} , it must be possible, but I haven&apos;t used this yet"><a href="#t1470912700001248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">10:51:40</span>             borkdude </span><span>like </span><code>{:a 1, :b 2, :c 3}</code><span> =&gt; </span><code>{:a 1}</code><span>, it must be possible, but I haven&apos;t used this yet</span></div><div id="t1470912716001249" t="2016-08-11 10:51:56 borkdude I was thinking something with  multi-path  and  filterer ?"><a href="#t1470912716001249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">10:51:56</span>             borkdude </span><span>I was thinking something with </span><code>multi-path</code><span> and </span><code>filterer</code><span>?</span></div><div id="t1470919917001251" t="2016-08-11 12:51:57 borkdude Ah, the question is even different than I understood it. I thought he wanted  {:a 1, :b 2, :c {:d 3}}  leaving the structure intact"><a href="#t1470919917001251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">12:51:57</span>             borkdude </span><span>Ah, the question is even different than I understood it. I thought he wanted </span><code>{:a 1, :b 2, :c {:d 3}}</code><span> leaving the structure intact</span></div><div id="t1470920554001252" t="2016-08-11 13:02:34 nathanmarz @borkdude:  submap  is the specter analogue to  select-keys"><a href="#t1470920554001252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:02:34</span>           nathanmarz </span><span>@borkdude: </span><code>submap</code><span> is the specter analogue to </span><code>select-keys</code></div><div id="t1470920568001253" t="2016-08-11 13:02:48 borkdude going to try it"><a href="#t1470920568001253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:02:48</span>             borkdude </span><span>going to try it</span></div><div id="t1470920579001254" t="2016-08-11 13:02:59 nathanmarz (into {} (traverse (multi-path (submap [:a :b]) [:c (submap [:d])]) {:a 1 :b 2 :c {:d 3}}))"><a href="#t1470920579001254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:02:59</span>           nathanmarz </span><code>(into {} (traverse (multi-path (submap [:a :b]) [:c (submap [:d])]) {:a 1 :b 2 :c {:d 3}}))</code></div><div id="t1470920687001255" t="2016-08-11 13:04:47 nathanmarz could make a function that converts  [:a :b [:c :d]]   to that path"><a href="#t1470920687001255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:04:47</span>           nathanmarz </span><span>could make a function that converts </span><code>[:a :b [:c :d]] </code><span> to that path</span></div><div id="t1470920723001256" t="2016-08-11 13:05:23 borkdude (prune m [:a :b [:c :d]])
"><a href="#t1470920723001256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:05:23</span>             borkdude </span><pre>(prune m [:a :b [:c :d]])
</pre></div><div id="t1470920755001259" t="2016-08-11 13:05:55 borkdude very clean"><a href="#t1470920755001259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:05:55</span>             borkdude </span><span>very clean</span></div><div id="t1470920813001262" t="2016-08-11 13:06:53 nathanmarz a better way is to capture the idea of &quot;nested submaps&quot; as a navigator"><a href="#t1470920813001262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:06:53</span>           nathanmarz </span><span>a better way is to capture the idea of &quot;nested submaps&quot; as a navigator</span></div><div id="t1470920839001263" t="2016-08-11 13:07:19 nathanmarz (into {} (traverse (nested-submaps :a :b [:c :d]) m))"><a href="#t1470920839001263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-11</span> <span class="t" onclick="H(this)">13:07:19</span>           nathanmarz </span><code>(into {} (traverse (nested-submaps :a :b [:c :d]) m))</code></div><div id="t1471245949001379" t="2016-08-15 07:25:49 yonatanel In the bank account example, is it possible to collect money from several accounts until a certain sum is reached or no more money is available? Is it then possible to get all the collections made (account+amount pairs) for event sourcing?"><a href="#t1471245949001379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-15</span> <span class="t" onclick="H(this)">07:25:49</span>            yonatanel </span><span>In the bank account example, is it possible to collect money from several accounts until a certain sum is reached or no more money is available? Is it then possible to get all the collections made (account+amount pairs) for event sourcing?</span></div><div id="t1471253506001380" t="2016-08-15 09:31:46 nathanmarz @yonatanel: you could do a subselect of all the accounts and then do an srange-dynamic to choose the first N accounts that sum up to what you&apos;re looking for"><a href="#t1471253506001380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-15</span> <span class="t" onclick="H(this)">09:31:46</span>           nathanmarz </span><span>@yonatanel: you could do a subselect of all the accounts and then do an srange-dynamic to choose the first N accounts that sum up to what you&apos;re looking for</span></div><div id="t1471256451001387" t="2016-08-15 10:20:51 yonatanel Thanks. I&apos;ll check it out."><a href="#t1471256451001387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-15</span> <span class="t" onclick="H(this)">10:20:51</span>            yonatanel </span><span>Thanks. I&apos;ll check it out.</span></div><div id="t1471276251001393" t="2016-08-15 15:50:51 cdine @nathanmarz:  Just stopping by, to say thanks for this wonderful library. Great showcase of what simple and powerful abstractions can do.."><a href="#t1471276251001393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-15</span> <span class="t" onclick="H(this)">15:50:51</span>                cdine </span><span>@nathanmarz:  Just stopping by, to say thanks for this wonderful library. Great showcase of what simple and powerful abstractions can do..</span></div><div id="t1471276348001394" t="2016-08-15 15:52:28 nathanmarz @cdine: thanks, glad you&apos;re enjoying it"><a href="#t1471276348001394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-15</span> <span class="t" onclick="H(this)">15:52:28</span>           nathanmarz </span><span>@cdine: thanks, glad you&apos;re enjoying it</span></div><div id="t1471329269001412" t="2016-08-16 06:34:29 conaw What’s the easiest way to dissoc-in, or to transform a value to not being there?"><a href="#t1471329269001412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">06:34:29</span>                conaw </span><span>What’s the easiest way to dissoc-in, or to transform a value to not being there?</span></div><div id="t1471329332001413" t="2016-08-16 06:35:32 conaw ideally, I’d like to be able to navigate to a value using walker, and then just setval to nothing, not nil, but nothing, is that possible?"><a href="#t1471329332001413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">06:35:32</span>                conaw </span><span>ideally, I’d like to be able to navigate to a value using walker, and then just setval to nothing, not nil, but nothing, is that possible?</span></div><div id="t1471330686001414" t="2016-08-16 06:58:06 yonatanel @conaw: Perhaps navigate one step behind using  selected?  and then transform with dissoc. Still not elegant though"><a href="#t1471330686001414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">06:58:06</span>            yonatanel </span><span>@conaw: Perhaps navigate one step behind using </span><code>selected?</code><span> and then transform with dissoc. Still not elegant though</span></div><div id="t1471330978001417" t="2016-08-16 07:02:58 conaw looks like this is the closest we’ve got right now to what I’m looking for"><a href="#t1471330978001417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">07:02:58</span>                conaw </span><span>looks like this is the closest we’ve got right now to what I’m looking for</span></div><div id="t1471330993001418" t="2016-08-16 07:03:13 conaw based on this  https://github.com/nathanmarz/specter/issues/83"><a href="#t1471330993001418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">07:03:13</span>                conaw </span><span>based on this </span><a href="https://github.com/nathanmarz/specter/issues/83" target="_blank">https://github.com/nathanmarz/specter/issues/83</a></div><div id="t1471335996001424" t="2016-08-16 08:26:36 conaw so, heres where I’m stuck. right now I’m able to filter out a given value from a vector that is nested one level deep, I’m trying to figure out how to do this recursively though so I could go as deep as needed.  

the following works

 (defpathedfn remove-x [x]
  (filterer #(not= x %)))


(defn t3 [v a]
  (select [
           (remove-x a)
           ALL
           (if-path vector?
                    (remove-x a)
                    STAY)] v))

(deftest test1
  (testing &quot;removal&quot;
    (is
     (= [1 2 3 [4]]
        (t3 [1 2 3 [4 5] 5] 5)))))
 

what I want is 
(= [1 2 3 [4 [6]]]
     (t3 [1 2 3 [4 [5 6] 5] 5] 5))"><a href="#t1471335996001424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">08:26:36</span>                conaw </span><span>so, heres where I’m stuck. right now I’m able to filter out a given value from a vector that is nested one level deep, I’m trying to figure out how to do this recursively though so I could go as deep as needed.  

the following works

</span><pre>(defpathedfn remove-x [x]
  (filterer #(not= x %)))


(defn t3 [v a]
  (select [
           (remove-x a)
           ALL
           (if-path vector?
                    (remove-x a)
                    STAY)] v))

(deftest test1
  (testing &quot;removal&quot;
    (is
     (= [1 2 3 [4]]
        (t3 [1 2 3 [4 5] 5] 5)))))
</pre><span>

what I want is 
(= [1 2 3 [4 [6]]]
     (t3 [1 2 3 [4 [5 6] 5] 5] 5))</span></div><div id="t1471346960001431" t="2016-08-16 11:29:20 nathanmarz @conaw: here&apos;s one way to do it"><a href="#t1471346960001431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">11:29:20</span>           nathanmarz </span><span>@conaw: here&apos;s one way to do it</span></div><div id="t1471346971001432" t="2016-08-16 11:29:31 nathanmarz (defn remove-x [x]
  (fn [v]
    (filterv #(not= x %) v)))

(declarepath AllVectors)
(providepath AllVectors
  (if-path vector?
    (stay-then-continue
      ALL
      AllVectors)))

(transform AllVectors (remove-x 5) [1 2 3 [4 [5 6] 5] 5])
"><a href="#t1471346971001432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">11:29:31</span>           nathanmarz </span><pre>(defn remove-x [x]
  (fn [v]
    (filterv #(not= x %) v)))

(declarepath AllVectors)
(providepath AllVectors
  (if-path vector?
    (stay-then-continue
      ALL
      AllVectors)))

(transform AllVectors (remove-x 5) [1 2 3 [4 [5 6] 5] 5])
</pre></div><div id="t1471347033001433" t="2016-08-16 11:30:33 nathanmarz you could also use  ALL-ELEM-SEQ  from that linked github issue in conjunction with  AllVectors"><a href="#t1471347033001433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">11:30:33</span>           nathanmarz </span><span>you could also use </span><code>ALL-ELEM-SEQ</code><span> from that linked github issue in conjunction with </span><code>AllVectors</code></div><div id="t1471347074001434" t="2016-08-16 11:31:14 nathanmarz which would look like:  (setval [AllVectors ALL-ELEM-SEQ #(= 5 (first %))] nil [1 2 3 [4 [5 6] 5] 5])"><a href="#t1471347074001434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">11:31:14</span>           nathanmarz </span><span>which would look like: </span><code>(setval [AllVectors ALL-ELEM-SEQ #(= 5 (first %))] nil [1 2 3 [4 [5 6] 5] 5])</code></div><div id="t1471349546001436" t="2016-08-16 12:12:26 joshkh I&apos;m attempting to &quot;shake&quot; a map of all top level keys where where a deeply nested key in each branch matches a predicate. Is that something I would tackle with transform? Or would I use select in combination with filterer?"><a href="#t1471349546001436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:12:26</span>               joshkh </span><span>I&apos;m attempting to &quot;shake&quot; a map of all top level keys where where a deeply nested key in each branch matches a predicate. Is that something I would tackle with transform? Or would I use select in combination with filterer?</span></div><div id="t1471349608001437" t="2016-08-16 12:13:28 nathanmarz what&apos;s an example of the input/output you&apos;re looking for?"><a href="#t1471349608001437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:13:28</span>           nathanmarz </span><span>what&apos;s an example of the input/output you&apos;re looking for?</span></div><div id="t1471349894001438" t="2016-08-16 12:18:14 joshkh In this map, I only want to keep top level branches where at least one of the maps in :where have an :op value of &quot;=&quot;

 {:k1 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;ignore&quot;
               :value &quot;X&quot;}]}
 :k2 {:where [{:op    &quot;&lt;&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;C&quot;}]}
 :k3 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;E&quot;}]}}

; result

{:k1 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;ignore&quot;
               :value &quot;X&quot;}]}
 :k3 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;E&quot;}]}}
"><a href="#t1471349894001438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:18:14</span>               joshkh </span><span>In this map, I only want to keep top level branches where at least one of the maps in :where have an :op value of &quot;=&quot;

</span><pre>{:k1 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;ignore&quot;
               :value &quot;X&quot;}]}
 :k2 {:where [{:op    &quot;&lt;&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;C&quot;}]}
 :k3 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;E&quot;}]}}

; result

{:k1 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;ignore&quot;
               :value &quot;X&quot;}]}
 :k3 {:where [{:op    &quot;=&quot;
               :value &quot;A&quot;}
              {:op    &quot;lookup&quot;
               :value &quot;E&quot;}]}}
</pre></div><div id="t1471349935001439" t="2016-08-16 12:18:55 joshkh (k2 doesn&apos;t make the cut)"><a href="#t1471349935001439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:18:55</span>               joshkh </span><span>(k2 doesn&apos;t make the cut)</span></div><div id="t1471350218001440" t="2016-08-16 12:23:38 joshkh I can build a path to :op no problem, but I lose all parent values when using  select .  I considered using  collect-one  at the root of the path while applying  filterer  at the :op level, but I got the impression I was misunderstanding something fundamental.  🙂"><a href="#t1471350218001440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:23:38</span>               joshkh </span><span>I can build a path to :op no problem, but I lose all parent values when using </span><code>select</code><span>.  I considered using </span><code>collect-one</code><span> at the root of the path while applying </span><code>filterer</code><span> at the :op level, but I got the impression I was misunderstanding something fundamental. </span><b>🙂</b></div><div id="t1471350248001441" t="2016-08-16 12:24:08 nathanmarz (into {} (traverse [ALL (selected? LAST :where ALL :op #(= &quot;=&quot; %))] data))"><a href="#t1471350248001441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:24:08</span>           nathanmarz </span><code>(into {} (traverse [ALL (selected? LAST :where ALL :op #(= &quot;=&quot; %))] data))</code></div><div id="t1471350318001442" t="2016-08-16 12:25:18 nathanmarz you can do it with  select  too but  traverse  is more efficient"><a href="#t1471350318001442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:25:18</span>           nathanmarz </span><span>you can do it with </span><code>select</code><span> too but </span><code>traverse</code><span> is more efficient</span></div><div id="t1471350345001443" t="2016-08-16 12:25:45 nathanmarz (doesn&apos;t create any intermediate sequence)"><a href="#t1471350345001443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:25:45</span>           nathanmarz </span><span>(doesn&apos;t create any intermediate sequence)</span></div><div id="t1471350351001444" t="2016-08-16 12:25:51 joshkh Ah, okay"><a href="#t1471350351001444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:25:51</span>               joshkh </span><span>Ah, okay</span></div><div id="t1471350391001445" t="2016-08-16 12:26:31 joshkh I think I overlooked  selected?  as well."><a href="#t1471350391001445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:26:31</span>               joshkh </span><span>I think I overlooked </span><code>selected?</code><span> as well.</span></div><div id="t1471350509001446" t="2016-08-16 12:28:29 joshkh In your code response, what&apos;s the difference between 1) using  filterer  , or 2) passing an anonymous function to the selection path, as you did?"><a href="#t1471350509001446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:28:29</span>               joshkh </span><span>In your code response, what&apos;s the difference between 1) using </span><code>filterer</code><span> , or 2) passing an anonymous function to the selection path, as you did?</span></div><div id="t1471350541001447" t="2016-08-16 12:29:01 nathanmarz filterer navigates you to a new sequence"><a href="#t1471350541001447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:29:01</span>           nathanmarz </span><span>filterer navigates you to a new sequence</span></div><div id="t1471350553001448" t="2016-08-16 12:29:13 nathanmarz a function acts as a predicate and stops navigation at that point if the predicate is false"><a href="#t1471350553001448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:29:13</span>           nathanmarz </span><span>a function acts as a predicate and stops navigation at that point if the predicate is false</span></div><div id="t1471350572001449" t="2016-08-16 12:29:32 nathanmarz for  selected? , it acts as a predicate where  &quot;true&quot; is when anything is selected"><a href="#t1471350572001449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:29:32</span>           nathanmarz </span><span>for </span><code>selected?</code><span>, it acts as a predicate where  &quot;true&quot; is when anything is selected</span></div><div id="t1471350591001450" t="2016-08-16 12:29:51 nathanmarz since filterer doesn&apos;t stop navigation, that wouldn&apos;t be relevant in this case"><a href="#t1471350591001450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:29:51</span>           nathanmarz </span><span>since filterer doesn&apos;t stop navigation, that wouldn&apos;t be relevant in this case</span></div><div id="t1471350661001451" t="2016-08-16 12:31:01 joshkh Okay, that helps a lot. Thanks for the explanation and for solving my use case."><a href="#t1471350661001451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:31:01</span>               joshkh </span><span>Okay, that helps a lot. Thanks for the explanation and for solving my use case.</span></div><div id="t1471350677001452" t="2016-08-16 12:31:17 nathanmarz no problem"><a href="#t1471350677001452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:31:17</span>           nathanmarz </span><span>no problem</span></div><div id="t1471350745001453" t="2016-08-16 12:32:25 nathanmarz this is worth reading through if you haven&apos;t already:  https://github.com/nathanmarz/specter/wiki/List-of-Navigators"><a href="#t1471350745001453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:32:25</span>           nathanmarz </span><span>this is worth reading through if you haven&apos;t already: </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a></div><div id="t1471351112001455" t="2016-08-16 12:38:32 joshkh Great!"><a href="#t1471351112001455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">12:38:32</span>               joshkh </span><span>Great!</span></div><div id="t1471356421001466" t="2016-08-16 14:07:01 darwin any hints how to rewrite this code to be specter 0.12 compatible?
 https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L43-L52"><a href="#t1471356421001466" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:07:01</span>               darwin </span><span>any hints how to rewrite this code to be specter 0.12 compatible?
</span><a href="https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L43-L52" target="_blank">https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L43-L52</a></div><div id="t1471356451001468" t="2016-08-16 14:07:31 darwin I’m getting &quot;Cannot read property &apos;0&apos; of null” somewhere deep in specter and I wasn’t able to figure out what is going wrong  😞"><a href="#t1471356451001468" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:07:31</span>               darwin </span><span>I’m getting &quot;Cannot read property &apos;0&apos; of null” somewhere deep in specter and I wasn’t able to figure out what is going wrong </span><b>😞</b></div><div id="t1471356500001469" t="2016-08-16 14:08:20 darwin the RepWalker is used in this function:
 https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L62-L63"><a href="#t1471356500001469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:08:20</span>               darwin </span><span>the RepWalker is used in this function:
</span><a href="https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L62-L63" target="_blank">https://github.com/binaryage/dirac/blob/417b81c3959e9b156f148f9448f2935f33631658/src/implant/dirac/implant/automation/reps.cljs#L62-L63</a></div><div id="t1471356887001471" t="2016-08-16 14:14:47 nathanmarz @darwin: need a reproducible test case"><a href="#t1471356887001471" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:14:47</span>           nathanmarz </span><span>@darwin: need a reproducible test case</span></div><div id="t1471358829001472" t="2016-08-16 14:47:09 joshkh Is it okay to nest  selected?  functions? Going back to your  (into {} (traverse [ALL (selected? LAST :where ALL :op #(= &quot;=&quot; %))] data))  response, what if I wanted to also restrict the selection to the :where vec having a count greater than one?"><a href="#t1471358829001472" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:47:09</span>               joshkh </span><span>Is it okay to nest </span><code>selected?</code><span> functions? Going back to your </span><code>(into {} (traverse [ALL (selected? LAST :where ALL :op #(= &quot;=&quot; %))] data))</code><span> response, what if I wanted to also restrict the selection to the :where vec having a count greater than one?</span></div><div id="t1471358905001473" t="2016-08-16 14:48:25 joshkh Oh wait, I&apos;d just use a function there as well."><a href="#t1471358905001473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:48:25</span>               joshkh </span><span>Oh wait, I&apos;d just use a function there as well.</span></div><div id="t1471358957001474" t="2016-08-16 14:49:17 joshkh Oh, double wait, I&apos;m not sure what I just said made sense."><a href="#t1471358957001474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:49:17</span>               joshkh </span><span>Oh, double wait, I&apos;m not sure what I just said made sense.</span></div><div id="t1471359506001475" t="2016-08-16 14:58:26 joshkh Okay, I think I got it? Two separate  selected?  expressions:
 (traverse [s/ALL
           (s/selected? s/LAST :where #(&lt; 1 (count %)))
           (s/selected? s/LAST :where s/ALL :op #(= &quot;=&quot; %))] data)
"><a href="#t1471359506001475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:58:26</span>               joshkh </span><span>Okay, I think I got it? Two separate </span><code>selected?</code><span> expressions:
</span><pre>(traverse [s/ALL
           (s/selected? s/LAST :where #(&lt; 1 (count %)))
           (s/selected? s/LAST :where s/ALL :op #(= &quot;=&quot; %))] data)
</pre></div><div id="t1471359594001477" t="2016-08-16 14:59:54 codonnell @joshkh: I think you could do it with  (traverse [ALL (selected? LAST :where #(&lt; 1 (count %)) ALL :op #(= &quot;=&quot; %))] data)"><a href="#t1471359594001477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">14:59:54</span>            codonnell </span><span>@joshkh: I think you could do it with </span><code>(traverse [ALL (selected? LAST :where #(&lt; 1 (count %)) ALL :op #(= &quot;=&quot; %))] data)</code></div><div id="t1471359657001478" t="2016-08-16 15:00:57 codonnell also, if you&apos;re traversing a map, you could use  MAP-VALS  instead of  LAST"><a href="#t1471359657001478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:00:57</span>            codonnell </span><span>also, if you&apos;re traversing a map, you could use </span><code>MAP-VALS</code><span> instead of </span><code>LAST</code></div><div id="t1471359723001479" t="2016-08-16 15:02:03 joshkh Ah, that&apos;s what how I was thinking about it originally, but I wasn&apos;t sure how ALL fit into the path after the function. I guess the obvious answer is that it fits in just fine.  🙂"><a href="#t1471359723001479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:02:03</span>               joshkh </span><span>Ah, that&apos;s what how I was thinking about it originally, but I wasn&apos;t sure how ALL fit into the path after the function. I guess the obvious answer is that it fits in just fine. </span><b>🙂</b></div><div id="t1471359766001480" t="2016-08-16 15:02:46 joshkh And thanks for the advice about MAP-VALS. It&apos;ll be easier to remember the data structure when I come back to this in the future."><a href="#t1471359766001480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:02:46</span>               joshkh </span><span>And thanks for the advice about MAP-VALS. It&apos;ll be easier to remember the data structure when I come back to this in the future.</span></div><div id="t1471359787001481" t="2016-08-16 15:03:07 codonnell for sure, and it should be a little more efficient, too!"><a href="#t1471359787001481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:03:07</span>            codonnell </span><span>for sure, and it should be a little more efficient, too!</span></div><div id="t1471360148001482" t="2016-08-16 15:09:08 nathanmarz ALL  is needed in this case since traverse must emit key/value pairs"><a href="#t1471360148001482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:09:08</span>           nathanmarz </span><code>ALL</code><span> is needed in this case since traverse must emit key/value pairs</span></div><div id="t1471360861001483" t="2016-08-16 15:21:01 codonnell good point @nathanmarz. I&apos;m not thinking very clearly today. @joshkh, you can&apos;t use  MAP-VALS , since  MAP-VALS  acts the same as  [ALL LAST] , but you need the  ALL  outside of  selected?  and  LAST  inside it."><a href="#t1471360861001483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:21:01</span>            codonnell </span><span>good point @nathanmarz. I&apos;m not thinking very clearly today. @joshkh, you can&apos;t use </span><code>MAP-VALS</code><span>, since </span><code>MAP-VALS</code><span> acts the same as </span><code>[ALL LAST]</code><span>, but you need the </span><code>ALL</code><span> outside of </span><code>selected?</code><span> and </span><code>LAST</code><span> inside it.</span></div><div id="t1471360913001484" t="2016-08-16 15:21:53 joshkh Got it!"><a href="#t1471360913001484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">15:21:53</span>               joshkh </span><span>Got it!</span></div><div id="t1471367848001490" t="2016-08-16 17:17:28 conaw @nathanmarz: much obliged"><a href="#t1471367848001490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">17:17:28</span>                conaw </span><span>@nathanmarz: much obliged</span></div><div id="t1471391075001491" t="2016-08-16 23:44:35 richiardiandrea I was having working at a big reduce today and I thought, maybe specter will be able to help me. Basically the atomic input is:

 [{:timestamp 14424
  :chat-id 2
  :payload &quot;bla&quot;}
 {:timestamp 14421
  :chat-id 1
  :payload &quot;asd&quot;}
  {:timestamp 14400
  :chat-id 1
  :payload &quot;test&quot;}]
 

I have a list of those that I want to convert to a map indexed by  chat-id  but keeping the oldest timestamp in the value, as:

 {1 {:timestamp 14000 :messages [the list]}
  2 {:timestamp 14424 :messages [the list]}}
 

Can you folks give me a hint (without full solution is fine) from where to start exploring a solution with specter?"><a href="#t1471391075001491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:44:35</span>      richiardiandrea </span><span>I was having working at a big reduce today and I thought, maybe specter will be able to help me. Basically the atomic input is:

</span><pre>[{:timestamp 14424
  :chat-id 2
  :payload &quot;bla&quot;}
 {:timestamp 14421
  :chat-id 1
  :payload &quot;asd&quot;}
  {:timestamp 14400
  :chat-id 1
  :payload &quot;test&quot;}]
</pre><span>

I have a list of those that I want to convert to a map indexed by </span><code>chat-id</code><span> but keeping the oldest timestamp in the value, as:

</span><pre>{1 {:timestamp 14000 :messages [the list]}
  2 {:timestamp 14424 :messages [the list]}}
</pre><span>

Can you folks give me a hint (without full solution is fine) from where to start exploring a solution with specter?</span></div><div id="t1471391589001494" t="2016-08-16 23:53:09 codonnell @richiardiandrea: could you give a small example of input/output?"><a href="#t1471391589001494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:53:09</span>            codonnell </span><span>@richiardiandrea: could you give a small example of input/output?</span></div><div id="t1471391698001495" t="2016-08-16 23:54:58 richiardiandrea @codonnell: thanks for answering, yes of course, is the above not enough? I am worried it can take too much space"><a href="#t1471391698001495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:54:58</span>      richiardiandrea </span><span>@codonnell: thanks for answering, yes of course, is the above not enough? I am worried it can take too much space</span></div><div id="t1471391862001502" t="2016-08-16 23:57:42 codonnell @richiardiandrea: Thanks, that clarifies it."><a href="#t1471391862001502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:57:42</span>            codonnell </span><span>@richiardiandrea: Thanks, that clarifies it.</span></div><div id="t1471391868001503" t="2016-08-16 23:57:48 richiardiandrea 😄"><a href="#t1471391868001503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:57:48</span>      richiardiandrea </span><b>😄</b></div><div id="t1471391887001504" t="2016-08-16 23:58:07 codonnell Would you list just be a list of the payloads for all messages with the given chat-id?"><a href="#t1471391887001504" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:58:07</span>            codonnell </span><span>Would you list just be a list of the payloads for all messages with the given chat-id?</span></div><div id="t1471391893001505" t="2016-08-16 23:58:13 richiardiandrea so I need to carry with me the  :timestamp"><a href="#t1471391893001505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:58:13</span>      richiardiandrea </span><span>so I need to carry with me the </span><code>:timestamp</code></div><div id="t1471391895001506" t="2016-08-16 23:58:15 richiardiandrea yes"><a href="#t1471391895001506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:58:15</span>      richiardiandrea </span><span>yes</span></div><div id="t1471391928001507" t="2016-08-16 23:58:48 richiardiandrea the calculation on the timestamp is a bit mysterious to me at the moment"><a href="#t1471391928001507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:58:48</span>      richiardiandrea </span><span>the calculation on the timestamp is a bit mysterious to me at the moment</span></div><div id="t1471391949001508" t="2016-08-16 23:59:09 codonnell Does the list of messages need to be in order of timestamp?"><a href="#t1471391949001508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:59:09</span>            codonnell </span><span>Does the list of messages need to be in order of timestamp?</span></div><div id="t1471391952001509" t="2016-08-16 23:59:12 richiardiandrea (specter newbie)"><a href="#t1471391952001509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:59:12</span>      richiardiandrea </span><span>(specter newbie)</span></div><div id="t1471391959001510" t="2016-08-16 23:59:19 richiardiandrea yes preferably yes"><a href="#t1471391959001510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span> <span class="t" onclick="H(this)">23:59:19</span>      richiardiandrea </span><span>yes preferably yes</span></div><div id="t1471392126001511" t="2016-08-17 00:02:06 codonnell In my opinion, the best solution just uses  reduce . Your accumulator would be a map keyed by chat-id with values being a  sorted-map  storing messages, keyed by timestamp."><a href="#t1471392126001511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:02:06</span>            codonnell </span><span>In my opinion, the best solution just uses </span><code>reduce</code><span>. Your accumulator would be a map keyed by chat-id with values being a </span><code>sorted-map</code><span> storing messages, keyed by timestamp.</span></div><div id="t1471392171001512" t="2016-08-17 00:02:51 richiardiandrea Ok yes that is what I am doing as well :)"><a href="#t1471392171001512" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:02:51</span>      richiardiandrea </span><span>Ok yes that is what I am doing as well :)</span></div><div id="t1471392318001513" t="2016-08-17 00:05:18 richiardiandrea It was just out of curiosity, is it because of the oldest timestamp? In general, just for learning, can I carry a counter while I navigate the data with specter?"><a href="#t1471392318001513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:05:18</span>      richiardiandrea </span><span>It was just out of curiosity, is it because of the oldest timestamp? In general, just for learning, can I carry a counter while I navigate the data with specter?</span></div><div id="t1471392618001515" t="2016-08-17 00:10:18 codonnell I can&apos;t think of a great way to do it using specter. I think specter is better for selecting from or transforming pieces of a nested data structure individually, while your task is aggregating all of your structure into something new. Maybe @nathanmarz  has more insight."><a href="#t1471392618001515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:10:18</span>            codonnell </span><span>I can&apos;t think of a great way to do it using specter. I think specter is better for selecting from or transforming pieces of a nested data structure individually, while your task is aggregating all of your structure into something new. Maybe @nathanmarz  has more insight.</span></div><div id="t1471392757001516" t="2016-08-17 00:12:37 richiardiandrea @codonnell: ok thanks a lot "><a href="#t1471392757001516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:12:37</span>      richiardiandrea </span><span>@codonnell: ok thanks a lot </span></div><div id="t1471392851001517" t="2016-08-17 00:14:11 codonnell you&apos;re welcome"><a href="#t1471392851001517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">00:14:11</span>            codonnell </span><span>you&apos;re welcome</span></div><div id="t1471473407001645" t="2016-08-17 22:36:47 darwin @nathanmarz: FYI this was needed for fixing my earlier issue (after upgrading to 0.12):
 https://github.com/binaryage/dirac/commit/45db785491751cd9e23440139f9b2554094c1759"><a href="#t1471473407001645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">22:36:47</span>               darwin </span><span>@nathanmarz: FYI this was needed for fixing my earlier issue (after upgrading to 0.12):
</span><a href="https://github.com/binaryage/dirac/commit/45db785491751cd9e23440139f9b2554094c1759" target="_blank">https://github.com/binaryage/dirac/commit/45db785491751cd9e23440139f9b2554094c1759</a></div><div id="t1471474634001650" t="2016-08-17 22:57:14 nathanmarz @darwin hmm, ok"><a href="#t1471474634001650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">22:57:14</span>           nathanmarz </span><span>@darwin hmm, ok</span></div><div id="t1471474648001651" t="2016-08-17 22:57:28 nathanmarz @darwin do you have a full stack trace from when the error was happening?"><a href="#t1471474648001651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span> <span class="t" onclick="H(this)">22:57:28</span>           nathanmarz </span><span>@darwin do you have a full stack trace from when the error was happening?</span></div><div id="t1471509671001662" t="2016-08-18 08:41:11 darwin @nathanmarz: unfortunately I was unable to make source-mapping work for some strange reason, so I can see only trace with compiled files"><a href="#t1471509671001662" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-18</span> <span class="t" onclick="H(this)">08:41:11</span>               darwin </span><span>@nathanmarz: unfortunately I was unable to make source-mapping work for some strange reason, so I can see only trace with compiled files</span></div><div id="t1471509688001663" t="2016-08-18 08:41:28 darwin the problem is somewhere in com.rpl.specter.must"><a href="#t1471509688001663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-18</span> <span class="t" onclick="H(this)">08:41:28</span>               darwin </span><span>the problem is somewhere in com.rpl.specter.must</span></div><div id="t1471509772001664" t="2016-08-18 08:42:52 darwin https://dl.dropboxusercontent.com/u/559047/specter-dirac-issue.png"><a href="#t1471509772001664" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-18</span> <span class="t" onclick="H(this)">08:42:52</span>               darwin </span><a href="https://dl.dropboxusercontent.com/u/559047/specter-dirac-issue.png" target="_blank">https://dl.dropboxusercontent.com/u/559047/specter-dirac-issue.png</a></div><div id="t1471524422001671" t="2016-08-18 12:47:02 nathanmarz @darwin ok thanks, that&apos;s helpful"><a href="#t1471524422001671" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-18</span> <span class="t" onclick="H(this)">12:47:02</span>           nathanmarz </span><span>@darwin ok thanks, that&apos;s helpful</span></div><div id="t1471596019001693" t="2016-08-19 08:40:19 rodeorockstar I have another newbie question regarding Specter. Is this something that I can easily do? I have nested vectors of strings representing a tree. If a vector directly follows a string then it is a subtree. I&apos;d like to update the tree in a similar fashion to update-in when dealing with maps. In this non working example I&apos;d want to append &quot;SUB-A-2-2-2&quot; to the &quot;SUB-A-2-2&quot; &quot;node.&quot;:

 (let [t [&quot;A&quot;
             [&quot;SUB-A-1&quot;
              &quot;SUB-A-2&quot;
              [&quot;SUB-A-2-1&quot;
               &quot;SUB-A-2-2&quot;
               [&quot;SUB-A-2-2-1&quot;]]]]]

      (s/transform [&quot;A&quot; &quot;SUB-A-2&quot; &quot;SUB-A-2-2&quot;]
                   (fn [node] (conj node &quot;SUB-A-2-2-2&quot;))
                   t)
      #_[&quot;A&quot;
         [&quot;SUB-A-1&quot;
          &quot;SUB-A-2&quot;
          [&quot;SUB-A-2-1&quot;
           &quot;SUB-A-2-2&quot;
           [&quot;SUB-A-2-2-1&quot;
            ; New:
            &quot;SUB-A-2-2-2&quot;]]]])"><a href="#t1471596019001693" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">08:40:19</span>        rodeorockstar </span><span>I have another newbie question regarding Specter. Is this something that I can easily do? I have nested vectors of strings representing a tree. If a vector directly follows a string then it is a subtree. I&apos;d like to update the tree in a similar fashion to update-in when dealing with maps. In this non working example I&apos;d want to append &quot;SUB-A-2-2-2&quot; to the &quot;SUB-A-2-2&quot; &quot;node.&quot;:

</span><pre>(let [t [&quot;A&quot;
             [&quot;SUB-A-1&quot;
              &quot;SUB-A-2&quot;
              [&quot;SUB-A-2-1&quot;
               &quot;SUB-A-2-2&quot;
               [&quot;SUB-A-2-2-1&quot;]]]]]

      (s/transform [&quot;A&quot; &quot;SUB-A-2&quot; &quot;SUB-A-2-2&quot;]
                   (fn [node] (conj node &quot;SUB-A-2-2-2&quot;))
                   t)
      #_[&quot;A&quot;
         [&quot;SUB-A-1&quot;
          &quot;SUB-A-2&quot;
          [&quot;SUB-A-2-1&quot;
           &quot;SUB-A-2-2&quot;
           [&quot;SUB-A-2-2-1&quot;
            ; New:
            &quot;SUB-A-2-2-2&quot;]]]])</pre></div><div id="t1471596318001695" t="2016-08-19 08:45:18 rodeorockstar I can&apos;t quite figure out how to work something like  #(.indexOf nested-vec %)  into the selection path, presumably recursively. Which makes me think I need a walker?"><a href="#t1471596318001695" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">08:45:18</span>        rodeorockstar </span><span>I can&apos;t quite figure out how to work something like </span><code>#(.indexOf nested-vec %)</code><span> into the selection path, presumably recursively. Which makes me think I need a walker?</span></div><div id="t1471609766001702" t="2016-08-19 12:29:26 nathanmarz @rodeorockstar: cleanest way is to define a new navigator that determines which index to navigate to dynamically"><a href="#t1471609766001702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:29:26</span>           nathanmarz </span><span>@rodeorockstar: cleanest way is to define a new navigator that determines which index to navigate to dynamically</span></div><div id="t1471609781001703" t="2016-08-19 12:29:41 nathanmarz (defnav dynamic-nth [afn]
  (select* [this structure next-fn]
    (next-fn (nth structure (afn structure))))
  (transform* [this structure next-fn]
    (let [i (afn structure)]
      (assoc structure i (next-fn (nth structure i))))))

(defnavconstructor subtree
  [p dynamic-nth]
  [v]
  (p (fn [avec] (inc (.indexOf avec v)))))
"><a href="#t1471609781001703" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:29:41</span>           nathanmarz </span><pre>(defnav dynamic-nth [afn]
  (select* [this structure next-fn]
    (next-fn (nth structure (afn structure))))
  (transform* [this structure next-fn]
    (let [i (afn structure)]
      (assoc structure i (next-fn (nth structure i))))))

(defnavconstructor subtree
  [p dynamic-nth]
  [v]
  (p (fn [avec] (inc (.indexOf avec v)))))
</pre></div><div id="t1471609845001704" t="2016-08-19 12:30:45 nathanmarz example:
 (transform
  [(subtree &quot;A&quot;)
   (subtree &quot;SUB-A-2&quot;)
   (subtree &quot;SUB-A-2-2&quot;)
   ALL]
   #(str % &quot;!&quot;)
   data)

;; =&gt; [&quot;A&quot; [&quot;SUB-A-1&quot; &quot;SUB-A-2&quot; [&quot;SUB-A-2-1&quot; &quot;SUB-A-2-2&quot; [&quot;SUB-A-2-2-1!&quot;]]]]
"><a href="#t1471609845001704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:30:45</span>           nathanmarz </span><span>example:
</span><pre>(transform
  [(subtree &quot;A&quot;)
   (subtree &quot;SUB-A-2&quot;)
   (subtree &quot;SUB-A-2-2&quot;)
   ALL]
   #(str % &quot;!&quot;)
   data)

;; =&gt; [&quot;A&quot; [&quot;SUB-A-1&quot; &quot;SUB-A-2&quot; [&quot;SUB-A-2-1&quot; &quot;SUB-A-2-2&quot; [&quot;SUB-A-2-2-1!&quot;]]]]
</pre></div><div id="t1471610045001705" t="2016-08-19 12:34:05 nathanmarz @rodeorockstar: that said, I would recommend storing your tree in a different format, as right now you&apos;re basically required to parse it as you traverse it"><a href="#t1471610045001705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:34:05</span>           nathanmarz </span><span>@rodeorockstar: that said, I would recommend storing your tree in a different format, as right now you&apos;re basically required to parse it as you traverse it</span></div><div id="t1471610181001706" t="2016-08-19 12:36:21 nathanmarz your particular example can be done like this:
 (setval [(subtree &quot;A&quot;) (subtree &quot;SUB-A-2&quot;) (subtree &quot;SUB-A-2-2&quot;) END]
  [&quot;SUB-A-2-2-2&quot;]
  data)
"><a href="#t1471610181001706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:36:21</span>           nathanmarz </span><span>your particular example can be done like this:
</span><pre>(setval [(subtree &quot;A&quot;) (subtree &quot;SUB-A-2&quot;) (subtree &quot;SUB-A-2-2&quot;) END]
  [&quot;SUB-A-2-2-2&quot;]
  data)
</pre></div><div id="t1471610417001707" t="2016-08-19 12:40:17 joshkh That is so cool... Thanks for the example, @nathanmarz . I&apos;ll comb over the  devnav   devnavconstructor  macros until they settle in my head. Agreed, the tree structure isn&apos;t ideal, and I changed it since asking the question. But I was still curious if something like that could be done with specter so it remained a useful exercise to me. I hadn&apos;t thought to use  defnav ."><a href="#t1471610417001707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:40:17</span>               joshkh </span><span>That is so cool... Thanks for the example, @nathanmarz . I&apos;ll comb over the </span><code>devnav</code><span> </span><code>devnavconstructor</code><span> macros until they settle in my head. Agreed, the tree structure isn&apos;t ideal, and I changed it since asking the question. But I was still curious if something like that could be done with specter so it remained a useful exercise to me. I hadn&apos;t thought to use </span><code>defnav</code><span>.</span></div><div id="t1471610434001708" t="2016-08-19 12:40:34 joshkh Thanks again for the continued help!"><a href="#t1471610434001708" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:40:34</span>               joshkh </span><span>Thanks again for the continued help!</span></div><div id="t1471610504001709" t="2016-08-19 12:41:44 nathanmarz yea, the real power of specter is in being able to define your own navigators and then benefit from the combinatorial ways in which everything can be combined"><a href="#t1471610504001709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:41:44</span>           nathanmarz </span><span>yea, the real power of specter is in being able to define your own navigators and then benefit from the combinatorial ways in which everything can be combined</span></div><div id="t1471610511001710" t="2016-08-19 12:41:51 nathanmarz no problem, happy to help"><a href="#t1471610511001710" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">12:41:51</span>           nathanmarz </span><span>no problem, happy to help</span></div><div id="t1471634843001721" t="2016-08-19 19:27:23 lellis Hi guys, reading codewalker documentation i found “When afn returns a truthy value, codewalker stops searching that branch of the tree and continues its search of the rest of the data structure” So how can i dont stop when afn return true? I just wanna collect when its true and searching that branch of the tree for more patterns to collect. Sorry if the questions isn&apos;t clear."><a href="#t1471634843001721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">19:27:23</span>               lellis </span><span>Hi guys, reading codewalker documentation i found “When afn returns a truthy value, codewalker stops searching that branch of the tree and continues its search of the rest of the data structure” So how can i dont stop when afn return true? I just wanna collect when its true and searching that branch of the tree for more patterns to collect. Sorry if the questions isn&apos;t clear.</span></div><div id="t1471635968001722" t="2016-08-19 19:46:08 nathanmarz @lellis you probably want something like this:
 (declarepath MyCodewalker)
(providepath MyCodewalker
 [(codewalker map?)
  (continue-then-stay
    MAP-VALS
    MyCodewalker)])
"><a href="#t1471635968001722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">19:46:08</span>           nathanmarz </span><span>@lellis you probably want something like this:
</span><pre>(declarepath MyCodewalker)
(providepath MyCodewalker
 [(codewalker map?)
  (continue-then-stay
    MAP-VALS
    MyCodewalker)])
</pre></div><div id="t1471639610001723" t="2016-08-19 20:46:50 mattsfrey wondering if anyone knows offhand the best way to transform a map where I want to select keys of a certain set and map their children into a final map of  {:keyname child}"><a href="#t1471639610001723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">20:46:50</span>            mattsfrey </span><span>wondering if anyone knows offhand the best way to transform a map where I want to select keys of a certain set and map their children into a final map of  {:keyname child}</span></div><div id="t1471639890001724" t="2016-08-19 20:51:30 nathanmarz @mattsfrey what&apos;s an example of input/output?"><a href="#t1471639890001724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">20:51:30</span>           nathanmarz </span><span>@mattsfrey what&apos;s an example of input/output?</span></div><div id="t1471640133001725" t="2016-08-19 20:55:33 lellis ty! @nathanmarz  Done!!"><a href="#t1471640133001725" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">20:55:33</span>               lellis </span><span>ty! @nathanmarz  Done!!</span></div><div id="t1471641291001726" t="2016-08-19 21:14:51 mattsfrey I actually had to re-think it but let me get an example"><a href="#t1471641291001726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:14:51</span>            mattsfrey </span><span>I actually had to re-think it but let me get an example</span></div><div id="t1471641878001727" t="2016-08-19 21:24:38 mattsfrey so this is what I&apos;m trying to achieve:"><a href="#t1471641878001727" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:24:38</span>            mattsfrey </span><span>so this is what I&apos;m trying to achieve:</span></div><div id="t1471641879001728" t="2016-08-19 21:24:39 mattsfrey https://pastebin.com/u3SNhevj"><a href="#t1471641879001728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:24:39</span>            mattsfrey </span><a href="https://pastebin.com/u3SNhevj" target="_blank">https://pastebin.com/u3SNhevj</a></div><div id="t1471641943001731" t="2016-08-19 21:25:43 mattsfrey Basically will have a map of &quot;info types&quot; that are an array of sub maps, I want to pull out the child sub maps and put them into a flat structure as such"><a href="#t1471641943001731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:25:43</span>            mattsfrey </span><span>Basically will have a map of &quot;info types&quot; that are an array of sub maps, I want to pull out the child sub maps and put them into a flat structure as such</span></div><div id="t1471642134001733" t="2016-08-19 21:28:54 mattsfrey (and disregard top level map values that aren&apos;t inside a certain set, i.e :bleh)"><a href="#t1471642134001733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:28:54</span>            mattsfrey </span><span>(and disregard top level map values that aren&apos;t inside a certain set, i.e :bleh)</span></div><div id="t1471642672001735" t="2016-08-19 21:37:52 nathanmarz here&apos;s how I would do it:
 (def data {:phone-numbers [{:type &quot;work&quot; :value &quot;720-1234&quot;}
                           {:type &quot;home&quot; :value &quot;720-1235&quot;}]
           :organizations [{:name &quot;Google&quot; :title &quot;Software Engineer&quot;}]
           :bleh &quot;blah...&quot;})

(-&gt;&gt; data
     (traverse [ALL
                (not-selected? FIRST #{:bleh})
                (collect-one FIRST)
                LAST
                ALL])
     (reduce (fn [v [type val]] (conj v {:type type :value val}))
             []))
"><a href="#t1471642672001735" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:37:52</span>           nathanmarz </span><span>here&apos;s how I would do it:
</span><pre>(def data {:phone-numbers [{:type &quot;work&quot; :value &quot;720-1234&quot;}
                           {:type &quot;home&quot; :value &quot;720-1235&quot;}]
           :organizations [{:name &quot;Google&quot; :title &quot;Software Engineer&quot;}]
           :bleh &quot;blah...&quot;})

(-&gt;&gt; data
     (traverse [ALL
                (not-selected? FIRST #{:bleh})
                (collect-one FIRST)
                LAST
                ALL])
     (reduce (fn [v [type val]] (conj v {:type type :value val}))
             []))
</pre></div><div id="t1471643124001737" t="2016-08-19 21:45:24 mattsfrey that seems to be explicitly ignoring bleh whereas I&apos;d rather explicitly include elements of a set and ignore everything else"><a href="#t1471643124001737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:45:24</span>            mattsfrey </span><span>that seems to be explicitly ignoring bleh whereas I&apos;d rather explicitly include elements of a set and ignore everything else</span></div><div id="t1471643177001739" t="2016-08-19 21:46:17 mattsfrey i.e. if in [:organizations :phone-numbers :addresses]"><a href="#t1471643177001739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:46:17</span>            mattsfrey </span><span>i.e. if in [:organizations :phone-numbers :addresses]</span></div><div id="t1471643889001740" t="2016-08-19 21:58:09 nathanmarz just change that line to   (selected? FIRST #{:organizations :phone-numbers :addresses})"><a href="#t1471643889001740" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">21:58:09</span>           nathanmarz </span><span>just change that line to  </span><code>(selected? FIRST #{:organizations :phone-numbers :addresses})</code></div><div id="t1471792381001798" t="2016-08-21 15:13:01 amacdougall I&apos;m working with a multidimensional array, and couldn&apos;t quite figure out how to drill into a single grid cell by index without an awkward  (srange n (inc n)) . I ended up using  (update-in y x &lt;cell-specific keys...&gt; &lt;fn&gt;) , but if I want to do anything more complex, that will break down. Am I missing an easy way to select something out of a vector by index?"><a href="#t1471792381001798" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-21</span> <span class="t" onclick="H(this)">15:13:01</span>          amacdougall </span><span>I&apos;m working with a multidimensional array, and couldn&apos;t quite figure out how to drill into a single grid cell by index without an awkward </span><code>(srange n (inc n))</code><span>. I ended up using </span><code>(update-in y x &lt;cell-specific keys...&gt; &lt;fn&gt;)</code><span>, but if I want to do anything more complex, that will break down. Am I missing an easy way to select something out of a vector by index?</span></div><div id="t1471792443001799" t="2016-08-21 15:14:03 nathanmarz @amacdougall use  keypath"><a href="#t1471792443001799" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-21</span> <span class="t" onclick="H(this)">15:14:03</span>           nathanmarz </span><span>@amacdougall use </span><code>keypath</code></div><div id="t1471792459001800" t="2016-08-21 15:14:19 nathanmarz (transform [(keypath 2) (keypath 4)] ...)"><a href="#t1471792459001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-21</span> <span class="t" onclick="H(this)">15:14:19</span>           nathanmarz </span><code>(transform [(keypath 2) (keypath 4)] ...)</code></div><div id="t1471792522001801" t="2016-08-21 15:15:22 amacdougall ...oh, that makes perfect sense. I saw &quot;key&quot; and my brain jumped to &quot;keyword&quot;."><a href="#t1471792522001801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-21</span> <span class="t" onclick="H(this)">15:15:22</span>          amacdougall </span><span>...oh, that makes perfect sense. I saw &quot;key&quot; and my brain jumped to &quot;keyword&quot;.</span></div><div id="t1471792639001802" t="2016-08-21 15:17:19 amacdougall Worked like a charm!"><a href="#t1471792639001802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-21</span> <span class="t" onclick="H(this)">15:17:19</span>          amacdougall </span><span>Worked like a charm!</span></div><div id="t1471847167001823" t="2016-08-22 06:26:07 yonatanel @nathanmarz: do you have any posts on what makes specter faster than drilling with built in functions, or should I just read the code?"><a href="#t1471847167001823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">06:26:07</span>            yonatanel </span><span>@nathanmarz: do you have any posts on what makes specter faster than drilling with built in functions, or should I just read the code?</span></div><div id="t1471848859001824" t="2016-08-22 06:54:19 aengelberg @yonatanel it may help to look at the source code of  get-in  /  update-in , or macroexpanding a call to  select  or  transform"><a href="#t1471848859001824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">06:54:19</span>           aengelberg </span><span>@yonatanel it may help to look at the source code of </span><code>get-in</code><span> / </span><code>update-in</code><span>, or macroexpanding a call to </span><code>select</code><span> or </span><code>transform</code></div><div id="t1471849284001825" t="2016-08-22 07:01:24 yonatanel Thanks, I will"><a href="#t1471849284001825" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">07:01:24</span>            yonatanel </span><span>Thanks, I will</span></div><div id="t1471863343001832" t="2016-08-22 10:55:43 nathanmarz @yonatanel take a look at this as well  https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs"><a href="#t1471863343001832" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">10:55:43</span>           nathanmarz </span><span>@yonatanel take a look at this as well </span><a href="https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter-0.11.0:-Performance-without-the-tradeoffs</a></div><div id="t1471880892001844" t="2016-08-22 15:48:12 mattsfrey @nathanmarz my one major complaint dealing with specter so far is it is very difficult to know where functions / macros are coming from, which are which etc. Reading an example I have to guess and check to figure out which is which. I still can&apos;t even find that function &quot;traverse&quot; in either macros or the main com.rpl.specter"><a href="#t1471880892001844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:48:12</span>            mattsfrey </span><span>@nathanmarz my one major complaint dealing with specter so far is it is very difficult to know where functions / macros are coming from, which are which etc. Reading an example I have to guess and check to figure out which is which. I still can&apos;t even find that function &quot;traverse&quot; in either macros or the main com.rpl.specter</span></div><div id="t1471880916001845" t="2016-08-22 15:48:36 mattsfrey Is there any definitive require statement(s) to just import everything specter related?"><a href="#t1471880916001845" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:48:36</span>            mattsfrey </span><span>Is there any definitive require statement(s) to just import everything specter related?</span></div><div id="t1471880961001846" t="2016-08-22 15:49:21 nathanmarz @mattsfrey traverse is in specter 0.12.0"><a href="#t1471880961001846" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:49:21</span>           nathanmarz </span><span>@mattsfrey traverse is in specter 0.12.0</span></div><div id="t1471880983001847" t="2016-08-22 15:49:43 nathanmarz I use this to get everything into a single namespace in my projects  https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj"><a href="#t1471880983001847" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:49:43</span>           nathanmarz </span><span>I use this to get everything into a single namespace in my projects </span><a href="https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj" target="_blank">https://github.com/ztellman/potemkin/blob/master/src/potemkin/namespaces.clj</a></div><div id="t1471880998001849" t="2016-08-22 15:49:58 mattsfrey oh no kidding so thats hot off the press then"><a href="#t1471880998001849" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:49:58</span>            mattsfrey </span><span>oh no kidding so thats hot off the press then</span></div><div id="t1471881045001850" t="2016-08-22 15:50:45 nathanmarz there&apos;s also  https://github.com/nathanmarz/specter/wiki/List-of-Macros  and  https://github.com/nathanmarz/specter/wiki/List-of-Navigators"><a href="#t1471881045001850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">15:50:45</span>           nathanmarz </span><span>there&apos;s also </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros</a><span> and </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a></div><div id="t1471881854001852" t="2016-08-22 16:04:14 mattsfrey the lists definitely help, thanks"><a href="#t1471881854001852" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">16:04:14</span>            mattsfrey </span><span>the lists definitely help, thanks</span></div><div id="t1471881870001853" t="2016-08-22 16:04:30 mattsfrey also that code from yesterday (now that i have traverse!) works splendidly"><a href="#t1471881870001853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">16:04:30</span>            mattsfrey </span><span>also that code from yesterday (now that i have traverse!) works splendidly</span></div><div id="t1471881872001854" t="2016-08-22 16:04:32 mattsfrey thanks!"><a href="#t1471881872001854" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">16:04:32</span>            mattsfrey </span><span>thanks!</span></div><div id="t1471885401001855" t="2016-08-22 17:03:21 nathanmarz @mattsfrey fyi, that code would work the same with  select , just less efficiently"><a href="#t1471885401001855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-22</span> <span class="t" onclick="H(this)">17:03:21</span>           nathanmarz </span><span>@mattsfrey fyi, that code would work the same with </span><code>select</code><span>, just less efficiently</span></div><div id="t1471967666001882" t="2016-08-23 15:54:26 zane Is there a more comprehensive guide to writing navigators? I feel like I&apos;m not getting the full picture from the API documentation."><a href="#t1471967666001882" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">15:54:26</span>                 zane </span><span>Is there a more comprehensive guide to writing navigators? I feel like I&apos;m not getting the full picture from the API documentation.</span></div><div id="t1471967736001883" t="2016-08-23 15:55:36 zane Also, it feels like there&apos;s significant overlap between  declarepath  /  providepath  recursive paths and navigators?"><a href="#t1471967736001883" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">15:55:36</span>                 zane </span><span>Also, it feels like there&apos;s significant overlap between </span><code>declarepath</code><span> / </span><code>providepath</code><span> recursive paths and navigators?</span></div><div id="t1471967743001884" t="2016-08-23 15:55:43 zane Am I reading this correctly?"><a href="#t1471967743001884" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">15:55:43</span>                 zane </span><span>Am I reading this correctly?</span></div><div id="t1471968921001885" t="2016-08-23 16:15:21 nathanmarz @zane there&apos;s also  https://github.com/nathanmarz/specter/wiki/List-of-Macros"><a href="#t1471968921001885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:15:21</span>           nathanmarz </span><span>@zane there&apos;s also </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros</a></div><div id="t1471968973001887" t="2016-08-23 16:16:13 nathanmarz not sure what you mean by overlap,  declarepath  /  providepath  is the main way to make a recursive navigator"><a href="#t1471968973001887" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:16:13</span>           nathanmarz </span><span>not sure what you mean by overlap, </span><code>declarepath</code><span> / </span><code>providepath</code><span> is the main way to make a recursive navigator</span></div><div id="t1471968978001888" t="2016-08-23 16:16:18 zane I saw that! Definitely helps."><a href="#t1471968978001888" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:16:18</span>                 zane </span><span>I saw that! Definitely helps.</span></div><div id="t1471968993001889" t="2016-08-23 16:16:33 nathanmarz I do agree the docs need work"><a href="#t1471968993001889" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:16:33</span>           nathanmarz </span><span>I do agree the docs need work</span></div><div id="t1471969015001890" t="2016-08-23 16:16:55 zane Ah, there&apos;s probably a hole in my understanding around the intended uses of navigators and paths."><a href="#t1471969015001890" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:16:55</span>                 zane </span><span>Ah, there&apos;s probably a hole in my understanding around the intended uses of navigators and paths.</span></div><div id="t1471969059001891" t="2016-08-23 16:17:39 nathanmarz studying the implementations of the core navigators will probably help"><a href="#t1471969059001891" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:17:39</span>           nathanmarz </span><span>studying the implementations of the core navigators will probably help</span></div><div id="t1471969073001892" t="2016-08-23 16:17:53 zane Ah, that&apos;s a good suggestion."><a href="#t1471969073001892" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:17:53</span>                 zane </span><span>Ah, that&apos;s a good suggestion.</span></div><div id="t1471969116001893" t="2016-08-23 16:18:36 zane Specter is awesome, by the way! Even with my flawed understanding of it it&apos;s already paying dividends."><a href="#t1471969116001893" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:18:36</span>                 zane </span><span>Specter is awesome, by the way! Even with my flawed understanding of it it&apos;s already paying dividends.</span></div><div id="t1471969138001894" t="2016-08-23 16:18:58 nathanmarz thanks"><a href="#t1471969138001894" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:18:58</span>           nathanmarz </span><span>thanks</span></div><div id="t1471969164001895" t="2016-08-23 16:19:24 nathanmarz though I will say the real power is unlocked when you understand how to write your own navigators"><a href="#t1471969164001895" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:19:24</span>           nathanmarz </span><span>though I will say the real power is unlocked when you understand how to write your own navigators</span></div><div id="t1471970039001896" t="2016-08-23 16:33:59 zane I&apos;m getting that sense!"><a href="#t1471970039001896" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">16:33:59</span>                 zane </span><span>I&apos;m getting that sense!</span></div><div id="t1471980093001902" t="2016-08-23 19:21:33 zane &gt; though I will say the real power is unlocked when you understand how to write your own navigators
I&apos;d love to hear more about this: What kind of custom navigators do you feel deliver the most value?"><a href="#t1471980093001902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:21:33</span>                 zane </span><span>&gt; though I will say the real power is unlocked when you understand how to write your own navigators
I&apos;d love to hear more about this: What kind of custom navigators do you feel deliver the most value?</span></div><div id="t1471980405001903" t="2016-08-23 19:26:45 nathanmarz @zane I have a whole suite of navigators for DAGs that I use privately"><a href="#t1471980405001903" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:26:45</span>           nathanmarz </span><span>@zane I have a whole suite of navigators for DAGs that I use privately</span></div><div id="t1471980432001904" t="2016-08-23 19:27:12 nathanmarz as an example"><a href="#t1471980432001904" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:27:12</span>           nathanmarz </span><span>as an example</span></div><div id="t1471980458001905" t="2016-08-23 19:27:38 nathanmarz I can do very sophisticated recursive DAG transformations with almost no effort at all, and it runs with near optimal performance"><a href="#t1471980458001905" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:27:38</span>           nathanmarz </span><span>I can do very sophisticated recursive DAG transformations with almost no effort at all, and it runs with near optimal performance</span></div><div id="t1471980469001906" t="2016-08-23 19:27:49 zane Ah, I think I remember you mentioning that in a video or blog post somewhere."><a href="#t1471980469001906" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:27:49</span>                 zane </span><span>Ah, I think I remember you mentioning that in a video or blog post somewhere.</span></div><div id="t1471980495001907" t="2016-08-23 19:28:15 nathanmarz the key is since that everything composes, you have a combinatoric explosion of ways in which you can apply Specter"><a href="#t1471980495001907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:28:15</span>           nathanmarz </span><span>the key is since that everything composes, you have a combinatoric explosion of ways in which you can apply Specter</span></div><div id="t1471980504001908" t="2016-08-23 19:28:24 zane Right!"><a href="#t1471980504001908" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:28:24</span>                 zane </span><span>Right!</span></div><div id="t1471980510001909" t="2016-08-23 19:28:30 zane For simple recursive descent through EDN I shouldn&apos;t have to reach for custom navigators though, right?"><a href="#t1471980510001909" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:28:30</span>                 zane </span><span>For simple recursive descent through EDN I shouldn&apos;t have to reach for custom navigators though, right?</span></div><div id="t1471980519001910" t="2016-08-23 19:28:39 zane It should just be a matter of defining paths?"><a href="#t1471980519001910" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:28:39</span>                 zane </span><span>It should just be a matter of defining paths?</span></div><div id="t1471980533001912" t="2016-08-23 19:28:53 nathanmarz most likely"><a href="#t1471980533001912" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:28:53</span>           nathanmarz </span><span>most likely</span></div><div id="t1471980540001913" t="2016-08-23 19:29:00 zane Okay, cool. That was my intuition."><a href="#t1471980540001913" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:29:00</span>                 zane </span><span>Okay, cool. That was my intuition.</span></div><div id="t1471980562001914" t="2016-08-23 19:29:22 nathanmarz you&apos;ll start off using Specter for getting in and out of nested data structures, and later you&apos;ll see how much more the concept of navigation generalizes"><a href="#t1471980562001914" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:29:22</span>           nathanmarz </span><span>you&apos;ll start off using Specter for getting in and out of nested data structures, and later you&apos;ll see how much more the concept of navigation generalizes</span></div><div id="t1471980610001915" t="2016-08-23 19:30:10 nathanmarz a big moment for me was realizing that adding to a set could be expressed as a navigator"><a href="#t1471980610001915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:30:10</span>           nathanmarz </span><span>a big moment for me was realizing that adding to a set could be expressed as a navigator</span></div><div id="t1471980632001916" t="2016-08-23 19:30:32 nathanmarz (setval [:a (subset #{})] #{:new-elem} data)"><a href="#t1471980632001916" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:30:32</span>           nathanmarz </span><code>(setval [:a (subset #{})] #{:new-elem} data)</code></div><div id="t1471980777001918" t="2016-08-23 19:32:57 zane Ah."><a href="#t1471980777001918" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:32:57</span>                 zane </span><span>Ah.</span></div><div id="t1471980778001919" t="2016-08-23 19:32:58 zane Yes."><a href="#t1471980778001919" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:32:58</span>                 zane </span><span>Yes.</span></div><div id="t1471980786001920" t="2016-08-23 19:33:06 zane Very monadic?"><a href="#t1471980786001920" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:33:06</span>                 zane </span><span>Very monadic?</span></div><div id="t1471980795001921" t="2016-08-23 19:33:15 zane Atom feels similar."><a href="#t1471980795001921" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:33:15</span>                 zane </span><span>Atom feels similar.</span></div><div id="t1471980838001922" t="2016-08-23 19:33:58 zane This was making me think about navigators that descended into  datomic  connections somehow, but that might be  🍌 s."><a href="#t1471980838001922" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:33:58</span>                 zane </span><span>This was making me think about navigators that descended into </span><b>datomic</b><span> connections somehow, but that might be </span><b>🍌</b><span>s.</span></div><div id="t1471980842001923" t="2016-08-23 19:34:02 nathanmarz select is semantically identical to the list monad, though specter&apos;s implementation is far more efficient"><a href="#t1471980842001923" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:34:02</span>           nathanmarz </span><span>select is semantically identical to the list monad, though specter&apos;s implementation is far more efficient</span></div><div id="t1471980855001924" t="2016-08-23 19:34:15 erichmond #shotsfired"><a href="#t1471980855001924" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:34:15</span>            erichmond </span><span>#shotsfired</span></div><div id="t1471980870001925" t="2016-08-23 19:34:30 nathanmarz I looked at how transform might be done as a monad some time ago but it wasn&apos;t obvious, and it wasn&apos;t really important to figure out"><a href="#t1471980870001925" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">19:34:30</span>           nathanmarz </span><span>I looked at how transform might be done as a monad some time ago but it wasn&apos;t obvious, and it wasn&apos;t really important to figure out</span></div><div id="t1471984290001926" t="2016-08-23 20:31:30 zane Are these available somewhere?"><a href="#t1471984290001926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">20:31:30</span>                 zane </span><span>Are these available somewhere?</span></div><div id="t1471985408001927" t="2016-08-23 20:50:08 zane Hmm. So  view  is a bit weird in that it doesn&apos;t allow for transformations inside the view. (Which I guess makes sense.)"><a href="#t1471985408001927" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">20:50:08</span>                 zane </span><span>Hmm. So </span><code>view</code><span> is a bit weird in that it doesn&apos;t allow for transformations inside the view. (Which I guess makes sense.)</span></div><div id="t1471985936001928" t="2016-08-23 20:58:56 zane I wonder if transforms should even be allowed on paths that have  view s in them…"><a href="#t1471985936001928" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">20:58:56</span>                 zane </span><span>I wonder if transforms should even be allowed on paths that have </span><code>view</code><span>s in them…</span></div><div id="t1471986163001929" t="2016-08-23 21:02:43 nathanmarz view  works just fine in  transform"><a href="#t1471986163001929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:02:43</span>           nathanmarz </span><code>view</code><span> works just fine in </span><code>transform</code></div><div id="t1471986208001930" t="2016-08-23 21:03:28 nathanmarz transformed  is similar to  view  except done with a path and transform function"><a href="#t1471986208001930" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:03:28</span>           nathanmarz </span><code>transformed</code><span> is similar to </span><code>view</code><span> except done with a path and transform function</span></div><div id="t1471986399001931" t="2016-08-23 21:06:39 nathanmarz @zane no, those navigators are not publicly available"><a href="#t1471986399001931" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:06:39</span>           nathanmarz </span><span>@zane no, those navigators are not publicly available</span></div><div id="t1471987480001932" t="2016-08-23 21:24:40 zane I guess what I mean is, this is not what I was expecting:
 (setval [(view namespace)]
        &quot;woo&quot;
        :hey/there)
"><a href="#t1471987480001932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:24:40</span>                 zane </span><span>I guess what I mean is, this is not what I was expecting:
</span><pre>(setval [(view namespace)]
        &quot;woo&quot;
        :hey/there)
</pre></div><div id="t1471987491001933" t="2016-08-23 21:24:51 zane &quot;woo&quot;
"><a href="#t1471987491001933" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:24:51</span>                 zane </span><pre>&quot;woo&quot;
</pre></div><div id="t1471987512001934" t="2016-08-23 21:25:12 zane So now I&apos;m trying to write  NAMESPACE :
 (defnav NAMESPACE
  []
  (select* [this structure next-fn]
           (next-fn (namespace structure)))
  (transform* [this structure next-fn]
              (keyword (next-fn (namespace structure))
                       (name structure))))
"><a href="#t1471987512001934" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:25:12</span>                 zane </span><span>So now I&apos;m trying to write </span><code>NAMESPACE</code><span>:
</span><pre>(defnav NAMESPACE
  []
  (select* [this structure next-fn]
           (next-fn (namespace structure)))
  (transform* [this structure next-fn]
              (keyword (next-fn (namespace structure))
                       (name structure))))
</pre></div><div id="t1471987694001941" t="2016-08-23 21:28:14 zane Holy crap, it works."><a href="#t1471987694001941" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:28:14</span>                 zane </span><span>Holy crap, it works.</span></div><div id="t1471987695001942" t="2016-08-23 21:28:15 zane Magic!"><a href="#t1471987695001942" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:28:15</span>                 zane </span><span>Magic!</span></div><div id="t1471988796001943" t="2016-08-23 21:46:36 nathanmarz nice one, I have a similar navigator"><a href="#t1471988796001943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:46:36</span>           nathanmarz </span><span>nice one, I have a similar navigator</span></div><div id="t1471988850001944" t="2016-08-23 21:47:30 nathanmarz you want to handle the no-namespace case as well (when  (next-fn (namespace structure))  returns nil)"><a href="#t1471988850001944" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span> <span class="t" onclick="H(this)">21:47:30</span>           nathanmarz </span><span>you want to handle the no-namespace case as well (when </span><code>(next-fn (namespace structure))</code><span> returns nil)</span></div><div id="t1472041595001962" t="2016-08-24 12:26:35 branch14 Hi, I&apos;m struggling to use specter (0.12.0) in cljs. I probably haven&apos;t set the ns up properly.
 =&gt; (select [:a :b] {:a {:b 42}})
#object[TypeError TypeError: Cannot read property &apos;specter&apos; of undefined]
 
My ns looks like this:
 (ns dummy
  (:require [com.rpl.specter :as s])
  (:require-macros [com.rpl.specter.macros :refer [select]]))
"><a href="#t1472041595001962" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-24</span> <span class="t" onclick="H(this)">12:26:35</span>             branch14 </span><span>Hi, I&apos;m struggling to use specter (0.12.0) in cljs. I probably haven&apos;t set the ns up properly.
</span><pre>=&gt; (select [:a :b] {:a {:b 42}})
#object[TypeError TypeError: Cannot read property &apos;specter&apos; of undefined]
</pre><span>
My ns looks like this:
</span><pre>(ns dummy
  (:require [com.rpl.specter :as s])
  (:require-macros [com.rpl.specter.macros :refer [select]]))
</pre></div><div id="t1472042108001963" t="2016-08-24 12:35:08 nathanmarz @branch14 works fine for me, don&apos;t know what&apos;s causing that"><a href="#t1472042108001963" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-24</span> <span class="t" onclick="H(this)">12:35:08</span>           nathanmarz </span><span>@branch14 works fine for me, don&apos;t know what&apos;s causing that</span></div><div id="t1472042506001964" t="2016-08-24 12:41:46 branch14 @nathanmarz Ha, it kind of works in the browser, but it doesn&apos;t on the REPL that figwheel gives me."><a href="#t1472042506001964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-24</span> <span class="t" onclick="H(this)">12:41:46</span>             branch14 </span><span>@nathanmarz Ha, it kind of works in the browser, but it doesn&apos;t on the REPL that figwheel gives me.</span></div><div id="t1472042701001965" t="2016-08-24 12:45:01 branch14 Ok, it works perfectly in the browser, but the REPL only yields the error above."><a href="#t1472042701001965" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-24</span> <span class="t" onclick="H(this)">12:45:01</span>             branch14 </span><span>Ok, it works perfectly in the browser, but the REPL only yields the error above.</span></div><div id="t1472240150002053" t="2016-08-26 19:35:50 sashton I’m trying to write a navigator that drops  n  items. Here’s what I’ve got:
 (spm/defnav nav-drop [n]
  (select* [this structure next-fn]
           (let [ret (next-fn (drop n structure))
                 empt (empty structure)]
             (if (= ret sp/NONE)
               ret
               (into empt ret))))
  (transform* [this structure next-fn]
              (let [ret (next-fn (drop n structure))]
                (-&gt;&gt; (concat (take n structure) ret)
                     (into (empty structure))))))
 

I found I had to check the return value of  next-fn  to check for  NONE . Is that the right approach? My original attempt was done assuming I’d just get back an empty list, but that didn’t work."><a href="#t1472240150002053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">19:35:50</span>              sashton </span><span>I’m trying to write a navigator that drops </span><code>n</code><span> items. Here’s what I’ve got:
</span><pre>(spm/defnav nav-drop [n]
  (select* [this structure next-fn]
           (let [ret (next-fn (drop n structure))
                 empt (empty structure)]
             (if (= ret sp/NONE)
               ret
               (into empt ret))))
  (transform* [this structure next-fn]
              (let [ret (next-fn (drop n structure))]
                (-&gt;&gt; (concat (take n structure) ret)
                     (into (empty structure))))))
</pre><span>

I found I had to check the return value of </span><code>next-fn</code><span> to check for </span><code>NONE</code><span>. Is that the right approach? My original attempt was done assuming I’d just get back an empty list, but that didn’t work.</span></div><div id="t1472244101002055" t="2016-08-26 20:41:41 nathanmarz @sashton the select* implementation should just be   (next-fn (drop n structure))"><a href="#t1472244101002055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:41:41</span>           nathanmarz </span><span>@sashton the select* implementation should just be </span><code> (next-fn (drop n structure))</code></div><div id="t1472244157002056" t="2016-08-26 20:42:37 nathanmarz you&apos;re on 0.12.0, right?"><a href="#t1472244157002056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:42:37</span>           nathanmarz </span><span>you&apos;re on 0.12.0, right?</span></div><div id="t1472244167002057" t="2016-08-26 20:42:47 sashton yes"><a href="#t1472244167002057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:42:47</span>              sashton </span><span>yes</span></div><div id="t1472244180002058" t="2016-08-26 20:43:00 sashton that changes the data type to a list, though, right?"><a href="#t1472244180002058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:43:00</span>              sashton </span><span>that changes the data type to a list, though, right?</span></div><div id="t1472244193002059" t="2016-08-26 20:43:13 sashton even if my input is a vector?"><a href="#t1472244193002059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:43:13</span>              sashton </span><span>even if my input is a vector?</span></div><div id="t1472244208002060" t="2016-08-26 20:43:28 sashton i was trying to preserve the collection type"><a href="#t1472244208002060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:43:28</span>              sashton </span><span>i was trying to preserve the collection type</span></div><div id="t1472244238002061" t="2016-08-26 20:43:58 nathanmarz the requirement of select* is to call next-fn on whatever subvalue should be passed to the next navigator"><a href="#t1472244238002061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:43:58</span>           nathanmarz </span><span>the requirement of select* is to call next-fn on whatever subvalue should be passed to the next navigator</span></div><div id="t1472244260002062" t="2016-08-26 20:44:20 nathanmarz so you should put the logic to maintain type before you call next-fn"><a href="#t1472244260002062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:44:20</span>           nathanmarz </span><span>so you should put the logic to maintain type before you call next-fn</span></div><div id="t1472244281002063" t="2016-08-26 20:44:41 nathanmarz probably  (next-fn (into (empty structure) (drop n structure)))"><a href="#t1472244281002063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:44:41</span>           nathanmarz </span><span>probably </span><code>(next-fn (into (empty structure) (drop n structure)))</code></div><div id="t1472244290002064" t="2016-08-26 20:44:50 sashton ah, i’ll give that a try"><a href="#t1472244290002064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:44:50</span>              sashton </span><span>ah, i’ll give that a try</span></div><div id="t1472244337002065" t="2016-08-26 20:45:37 nathanmarz you only need to deal with  NONE  when a navigator navigates to an indeterminate number of subvalues"><a href="#t1472244337002065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-26</span> <span class="t" onclick="H(this)">20:45:37</span>           nathanmarz </span><span>you only need to deal with </span><code>NONE</code><span> when a navigator navigates to an indeterminate number of subvalues</span></div><div id="t1472405488000017" t="2016-08-28 17:31:28 amacdougall Still playing with my maze thing—to implement the first algorithm in the book, I realized that I needed to consider each cell in turn, but during each iteration, I might need to operate on the entire grid. For instance, upon deciding that cell 0,0 should be linked east to cell 1,0, I need to get a grid with both cells changed.

I solved it by applying the Feynmann Algorithm, and used  traverse :
 (reduce
  (fn [grid cell]
    (let [open-directions (filter (partial move grid cell) [::s ::e])]
      (if (empty? open-directions)
        grid
        (link grid cell (rand-nth open-directions)))))
  g
  (sm/traverse [s/ALL s/ALL] g))
 
This totally works! Just curious if I&apos;m missing a simpler way to do the same thing.

(The book is in Ruby, so it has an easier time just navigating around the data structure and changing whatever it wants at any point in the loop.)"><a href="#t1472405488000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">17:31:28</span>          amacdougall </span><span>Still playing with my maze thing—to implement the first algorithm in the book, I realized that I needed to consider each cell in turn, but during each iteration, I might need to operate on the entire grid. For instance, upon deciding that cell 0,0 should be linked east to cell 1,0, I need to get a grid with both cells changed.

I solved it by applying the Feynmann Algorithm, and used </span><code>traverse</code><span>:
</span><pre>(reduce
  (fn [grid cell]
    (let [open-directions (filter (partial move grid cell) [::s ::e])]
      (if (empty? open-directions)
        grid
        (link grid cell (rand-nth open-directions)))))
  g
  (sm/traverse [s/ALL s/ALL] g))
</pre><span>
This totally works! Just curious if I&apos;m missing a simpler way to do the same thing.

(The book is in Ruby, so it has an easier time just navigating around the data structure and changing whatever it wants at any point in the loop.)</span></div><div id="t1472405695000018" t="2016-08-28 17:34:55 amacdougall ...looking at the docs and my code a bit harder, I realize that  traverse  is just there to have a more efficient implementation than  select  when used as a  reduce  argument. And the problem of &quot;make changes to a larger resultset while iterating over individual elements&quot; is exactly what  reduce  is for. So I guess that kind of answers my question.  :duck:"><a href="#t1472405695000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">17:34:55</span>          amacdougall </span><span>...looking at the docs and my code a bit harder, I realize that </span><code>traverse</code><span> is just there to have a more efficient implementation than </span><code>select</code><span> when used as a </span><code>reduce</code><span> argument. And the problem of &quot;make changes to a larger resultset while iterating over individual elements&quot; is exactly what </span><code>reduce</code><span> is for. So I guess that kind of answers my question. </span><b>:duck:</b></div><div id="t1472482918000046" t="2016-08-29 15:01:58 bill I can  (dissoc {:id 1} :id) .

Is there an idomatic way to dissoc in specter, or should I nav to the map of interest and call my own function that calls  dissoc ?"><a href="#t1472482918000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:01:58</span>                 bill </span><span>I can </span><code>(dissoc {:id 1} :id)</code><span>.

Is there an idomatic way to dissoc in specter, or should I nav to the map of interest and call my own function that calls </span><code>dissoc</code><span>?</span></div><div id="t1472482989000047" t="2016-08-29 15:03:09 bill (and yes, I searched the docs, bugs and source for “dissoc” first)"><a href="#t1472482989000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:03:09</span>                 bill </span><span>(and yes, I searched the docs, bugs and source for “dissoc” first)</span></div><div id="t1472483754000049" t="2016-08-29 15:15:54 codonnell @bill: you could do  (view #(dissoc % :k)) , but if you use that with  transform , the key will not be added back during reconstruction"><a href="#t1472483754000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:15:54</span>            codonnell </span><span>@bill: you could do </span><code>(view #(dissoc % :k))</code><span>, but if you use that with </span><code>transform</code><span>, the key will not be added back during reconstruction</span></div><div id="t1472483779000050" t="2016-08-29 15:16:19 codonnell you could also write your own navigator, which would be straightforward"><a href="#t1472483779000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:16:19</span>            codonnell </span><span>you could also write your own navigator, which would be straightforward</span></div><div id="t1472485132000051" t="2016-08-29 15:38:52 bill thanks @codonnell. I don’t understand your caveat “the key will not be added back during reconstruction”.

maybe I’m not being clear: I want the key (and value) removed from the hash."><a href="#t1472485132000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:38:52</span>                 bill </span><span>thanks @codonnell. I don’t understand your caveat “the key will not be added back during reconstruction”.

maybe I’m not being clear: I want the key (and value) removed from the hash.</span></div><div id="t1472485335000052" t="2016-08-29 15:42:15 codonnell @bill: For example,  (transform [(view #(dissoc % :a)) MAP-VALS] inc {:a 0 :b 0 :c 0})  gives  {:b 1, :c 1} , not  {:a 0, :b 1, :c 1}"><a href="#t1472485335000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:42:15</span>            codonnell </span><span>@bill: For example, </span><code>(transform [(view #(dissoc % :a)) MAP-VALS] inc {:a 0 :b 0 :c 0})</code><span> gives </span><code>{:b 1, :c 1}</code><span>, not </span><code>{:a 0, :b 1, :c 1}</code></div><div id="t1472485376000053" t="2016-08-29 15:42:56 codonnell If you wrote your own navigator, you could make it have the latter behavior."><a href="#t1472485376000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:42:56</span>            codonnell </span><span>If you wrote your own navigator, you could make it have the latter behavior.</span></div><div id="t1472485449000054" t="2016-08-29 15:44:09 bill ah I get 60% of that which is enough—I think that’ll work for me. thanks!"><a href="#t1472485449000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:44:09</span>                 bill </span><span>ah I get 60% of that which is enough—I think that’ll work for me. thanks!</span></div><div id="t1472485568000056" t="2016-08-29 15:46:08 codonnell @bill: There are lots of examples on the wiki, including an example of a custom navigator at  https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav"><a href="#t1472485568000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:46:08</span>            codonnell </span><span>@bill: There are lots of examples on the wiki, including an example of a custom navigator at </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#defnav</a></div><div id="t1472485605000058" t="2016-08-29 15:46:45 codonnell good luck!"><a href="#t1472485605000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:46:45</span>            codonnell </span><span>good luck!</span></div><div id="t1472485619000059" t="2016-08-29 15:46:59 bill thanks!"><a href="#t1472485619000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:46:59</span>                 bill </span><span>thanks!</span></div><div id="t1472485914000060" t="2016-08-29 15:51:54 bill so I here is me, removing the  :id s:

 (transform [:results ALL (view #(dissoc % :id)) MAP-VALS] identity {:foo 3 :results [{:id 0 :b 0 :c 0}]})
=&gt; {:foo 3, :results [{:b 0, :c 0}]}
 

It works, but it seems like calling  identity  is a sign of wrongness here."><a href="#t1472485914000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:51:54</span>                 bill </span><span>so I here is me, removing the </span><code>:id</code><span>s:

</span><pre>(transform [:results ALL (view #(dissoc % :id)) MAP-VALS] identity {:foo 3 :results [{:id 0 :b 0 :c 0}]})
=&gt; {:foo 3, :results [{:b 0, :c 0}]}
</pre><span>

It works, but it seems like calling </span><code>identity</code><span> is a sign of wrongness here.</span></div><div id="t1472486105000065" t="2016-08-29 15:55:05 codonnell @bill: I&apos;m not at a repl, but I think you could do  (transform [:results ALL] #(dissoc % :id) data)"><a href="#t1472486105000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:55:05</span>            codonnell </span><span>@bill: I&apos;m not at a repl, but I think you could do </span><code>(transform [:results ALL] #(dissoc % :id) data)</code></div><div id="t1472486227000066" t="2016-08-29 15:57:07 bill perfecto! (works)"><a href="#t1472486227000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">15:57:07</span>                 bill </span><span>perfecto! (works)</span></div><div id="t1472486594000067" t="2016-08-29 16:03:14 nathanmarz @bill I&apos;ve used a function like this in the past:
 (defn dissocer [k]
  (fn [m]
    (dissoc m k)))
"><a href="#t1472486594000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">16:03:14</span>           nathanmarz </span><span>@bill I&apos;ve used a function like this in the past:
</span><pre>(defn dissocer [k]
  (fn [m]
    (dissoc m k)))
</pre></div><div id="t1472486612000068" t="2016-08-29 16:03:32 nathanmarz then you can do  (transform [:results ALL] (dissocer :a) data)"><a href="#t1472486612000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">16:03:32</span>           nathanmarz </span><span>then you can do </span><code>(transform [:results ALL] (dissocer :a) data)</code></div><div id="t1472486656000069" t="2016-08-29 16:04:16 bill nice ‘un @nathanmarz"><a href="#t1472486656000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">16:04:16</span>                 bill </span><span>nice ‘un @nathanmarz</span></div><div id="t1472775315000177" t="2016-09-02 00:15:15 caio as we’re talking about  dissoc ing, I have a doubt as well  😆  
I need to dissoc a key from every map that has it in a nested structure, so if I want to dissoc  :a ,  {:a “le”, :c {:a “lu”, :b “la”}}  should become  {:c {:b “la”}} . I tried doing  (transform (walker coll?) #(dissoc % :a) ds) , but the walker stops on the first level and the transform returns  {:c {:a “lu”, :b “la”}} . is there an easy way to do this?"><a href="#t1472775315000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">00:15:15</span>                 caio </span><span>as we’re talking about </span><code>dissoc</code><span>ing, I have a doubt as well </span><b>😆</b><span> 
I need to dissoc a key from every map that has it in a nested structure, so if I want to dissoc </span><code>:a</code><span>, </span><code>{:a “le”, :c {:a “lu”, :b “la”}}</code><span> should become </span><code>{:c {:b “la”}}</code><span>. I tried doing </span><code>(transform (walker coll?) #(dissoc % :a) ds)</code><span>, but the walker stops on the first level and the transform returns </span><code>{:c {:a “lu”, :b “la”}}</code><span>. is there an easy way to do this?</span></div><div id="t1472775820000179" t="2016-09-02 00:23:40 caio oh, nvm. just saw  params-reset  for declaring recursive navigators"><a href="#t1472775820000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">00:23:40</span>                 caio </span><span>oh, nvm. just saw </span><code>params-reset</code><span> for declaring recursive navigators</span></div><div id="t1472776081000180" t="2016-09-02 00:28:01 codonnell @caio: I don&apos;t think you need  params-reset . Here&apos;s what I came up with, though I&apos;m trying to think of a better way.
  =&gt; (declarepath MapWalker)
=&gt; (providepath MapWalker (if-path map? (continue-then-stay MAP-VALS MapWalker)))
=&gt; (transform MapWalker #(dissoc % :a) {:a 0 :b {:a 1 :b 2}})
{:b {:b 2}}"><a href="#t1472776081000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">00:28:01</span>            codonnell </span><span>@caio: I don&apos;t think you need </span><code>params-reset</code><span>. Here&apos;s what I came up with, though I&apos;m trying to think of a better way.
 </span><pre>=&gt; (declarepath MapWalker)
=&gt; (providepath MapWalker (if-path map? (continue-then-stay MAP-VALS MapWalker)))
=&gt; (transform MapWalker #(dissoc % :a) {:a 0 :b {:a 1 :b 2}})
{:b {:b 2}}</pre></div><div id="t1472776229000182" t="2016-09-02 00:30:29 codonnell Yeah, here&apos;s a shorter implementation:  (providepath MapWalker (continue-then-stay MAP-VALS map? MapWalker))"><a href="#t1472776229000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">00:30:29</span>            codonnell </span><span>Yeah, here&apos;s a shorter implementation: </span><code>(providepath MapWalker (continue-then-stay MAP-VALS map? MapWalker))</code></div><div id="t1472777387000183" t="2016-09-02 00:49:47 caio Oh, nice. Didn&apos;t knew this  continue-then-stay . Thanks!"><a href="#t1472777387000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">00:49:47</span>                 caio </span><span>Oh, nice. Didn&apos;t knew this </span><code>continue-then-stay</code><span>. Thanks!</span></div><div id="t1472832875000199" t="2016-09-02 16:14:35 nathanmarz for those interested, I rewrote almost all of Specter&apos;s core  https://github.com/nathanmarz/specter/blob/rewrite/CHANGES.md"><a href="#t1472832875000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:14:35</span>           nathanmarz </span><span>for those interested, I rewrote almost all of Specter&apos;s core </span><a href="https://github.com/nathanmarz/specter/blob/rewrite/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/rewrite/CHANGES.md</a></div><div id="t1472832947000201" t="2016-09-02 16:15:47 nathanmarz 25% smaller codebase, better performance, and no more restrictions on what can be inline compiled/cached (locals, special forms, and dynamic vars in nav positions can now be inline compiled/cached)"><a href="#t1472832947000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:15:47</span>           nathanmarz </span><span>25% smaller codebase, better performance, and no more restrictions on what can be inline compiled/cached (locals, special forms, and dynamic vars in nav positions can now be inline compiled/cached)</span></div><div id="t1472835185000207" t="2016-09-02 16:53:05 caio @codonnell the code you sent me actually breaks when there are other nested structures other than maps (vectors for instance). for instance:
 =&gt; (transform MapWalker #(dissoc % :a) {:a 0 :b [{:a 1 :b 2}]})
{:b [{:a 1 :b 2}]}
 

. after some time, this is what I got:
 (declarepath map-walker)
(providepath map-walker [(walker map?)
                         (continue-then-stay MAP-VALS map-walker)])
 

now it’s working fine  🙂"><a href="#t1472835185000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:53:05</span>                 caio </span><span>@codonnell the code you sent me actually breaks when there are other nested structures other than maps (vectors for instance). for instance:
</span><pre>=&gt; (transform MapWalker #(dissoc % :a) {:a 0 :b [{:a 1 :b 2}]})
{:b [{:a 1 :b 2}]}
</pre><span>

. after some time, this is what I got:
</span><pre>(declarepath map-walker)
(providepath map-walker [(walker map?)
                         (continue-then-stay MAP-VALS map-walker)])
</pre><span>

now it’s working fine </span><b>🙂</b></div><div id="t1472835255000209" t="2016-09-02 16:54:15 codonnell @caio: nice!"><a href="#t1472835255000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:54:15</span>            codonnell </span><span>@caio: nice!</span></div><div id="t1472835300000210" t="2016-09-02 16:55:00 escherize Hello I&apos;m new to specter, and I&apos;m trying to move a keyword from one path to another. so far I have this working but I can&apos;t tell if it is the specter way, and I have a feeling i&apos;m doing it wrong:

 (defn remover [&amp; n]
  (fn [coll] (into (empty coll)
                   (remove (set n) coll))))

(-&gt;&gt; {:a [1 2 3] :b [4]}
     (transform [:a] (remover 2))
     (setval [:b BEGINNING] [2]))
"><a href="#t1472835300000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:55:00</span>            escherize </span><span>Hello I&apos;m new to specter, and I&apos;m trying to move a keyword from one path to another. so far I have this working but I can&apos;t tell if it is the specter way, and I have a feeling i&apos;m doing it wrong:

</span><pre>(defn remover [&amp; n]
  (fn [coll] (into (empty coll)
                   (remove (set n) coll))))

(-&gt;&gt; {:a [1 2 3] :b [4]}
     (transform [:a] (remover 2))
     (setval [:b BEGINNING] [2]))
</pre></div><div id="t1472835467000211" t="2016-09-02 16:57:47 escherize I&apos;d like to be able to reference the  2  in this example from inside the paths themselves.  is that a thing? I&apos;ve been reading the docs and having trouble finding something that addresses this"><a href="#t1472835467000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:57:47</span>            escherize </span><span>I&apos;d like to be able to reference the </span><code>2</code><span> in this example from inside the paths themselves.  is that a thing? I&apos;ve been reading the docs and having trouble finding something that addresses this</span></div><div id="t1472835576000212" t="2016-09-02 16:59:36 codonnell @escherize: To add onto the beginning of a sequence with specter, it&apos;s more idiomatic to do  (setval [:b BEGINNING] [0] [1 2 3])"><a href="#t1472835576000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">16:59:36</span>            codonnell </span><span>@escherize: To add onto the beginning of a sequence with specter, it&apos;s more idiomatic to do </span><code>(setval [:b BEGINNING] [0] [1 2 3])</code></div><div id="t1472835614000213" t="2016-09-02 17:00:14 escherize thanks, I thought conjer was a bit much. I&apos;ll update the example"><a href="#t1472835614000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:00:14</span>            escherize </span><span>thanks, I thought conjer was a bit much. I&apos;ll update the example</span></div><div id="t1472835667000214" t="2016-09-02 17:01:07 codonnell Other than that, your approach looks fine to me."><a href="#t1472835667000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:01:07</span>            codonnell </span><span>Other than that, your approach looks fine to me.</span></div><div id="t1472835765000216" t="2016-09-02 17:02:45 escherize That&apos;s good to hear, thanks @codonnell"><a href="#t1472835765000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:02:45</span>            escherize </span><span>That&apos;s good to hear, thanks @codonnell</span></div><div id="t1472836064000217" t="2016-09-02 17:07:44 escherize but is there a way to bake the  2  into the path itself?"><a href="#t1472836064000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:07:44</span>            escherize </span><span>but is there a way to bake the </span><code>2</code><span> into the path itself?</span></div><div id="t1472836139000218" t="2016-09-02 17:08:59 zane Oh wow."><a href="#t1472836139000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:08:59</span>                 zane </span><span>Oh wow.</span></div><div id="t1472836260000219" t="2016-09-02 17:11:00 codonnell Yes @escherize. Transform functions receive as their initial arguments any collected values."><a href="#t1472836260000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:11:00</span>            codonnell </span><span>Yes @escherize. Transform functions receive as their initial arguments any collected values.</span></div><div id="t1472836411000221" t="2016-09-02 17:13:31 codonnell =&gt; (transform [(putval #{2 3 5}) :a] remove {:a (range 10)})
{:a (0 1 4 6 7 8 9)}"><a href="#t1472836411000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:13:31</span>            codonnell </span><pre>=&gt; (transform [(putval #{2 3 5}) :a] remove {:a (range 10)})
{:a (0 1 4 6 7 8 9)}</pre></div><div id="t1472836515000222" t="2016-09-02 17:15:15 escherize ohhh. I see! that&apos;s fantasic, thanks @codonnell !"><a href="#t1472836515000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">17:15:15</span>            escherize </span><span>ohhh. I see! that&apos;s fantasic, thanks @codonnell !</span></div><div id="t1472842799000223" t="2016-09-02 18:59:59 codonnell @nathanmarz are you planning on a blog post/wiki page about the 0.13.0 changes similar to the post about 0.11.0&apos;s optimizations?"><a href="#t1472842799000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">18:59:59</span>            codonnell </span><span>@nathanmarz are you planning on a blog post/wiki page about the 0.13.0 changes similar to the post about 0.11.0&apos;s optimizations?</span></div><div id="t1472845080000224" t="2016-09-02 19:38:00 nathanmarz @codonnell if I have time"><a href="#t1472845080000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">19:38:00</span>           nathanmarz </span><span>@codonnell if I have time</span></div><div id="t1472845097000225" t="2016-09-02 19:38:17 nathanmarz @codonnell the inline caching implementation is completely different now"><a href="#t1472845097000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">19:38:17</span>           nathanmarz </span><span>@codonnell the inline caching implementation is completely different now</span></div><div id="t1472845137000226" t="2016-09-02 19:38:57 nathanmarz @codonnell I need  to get the new design working for cljs first"><a href="#t1472845137000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">19:38:57</span>           nathanmarz </span><span>@codonnell I need  to get the new design working for cljs first</span></div><div id="t1472845337000227" t="2016-09-02 19:42:17 codonnell :+1:"><a href="#t1472845337000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-02</span> <span class="t" onclick="H(this)">19:42:17</span>            codonnell </span><b>:+1:</b></div><div id="t1472988049000038" t="2016-09-04 11:20:49 markaddleman i&apos;m pretty new to specter.  i have a map with some nils in the values.  how would i create a submap of all non-nil values?  eg {:a  😛 , :c :d, :nil nil} =&gt; {:a  😛 , :c :d}"><a href="#t1472988049000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-04</span> <span class="t" onclick="H(this)">11:20:49</span>         markaddleman </span><span>i&apos;m pretty new to specter.  i have a map with some nils in the values.  how would i create a submap of all non-nil values?  eg {:a </span><b>😛</b><span>, :c :d, :nil nil} =&gt; {:a </span><b>😛</b><span>, :c :d}</span></div><div id="t1472993906000039" t="2016-09-04 12:58:26 nathanmarz @markaddleman at the moment with built-in navs:  (into {} (traverse [ALL (selected? LAST some?)] data))"><a href="#t1472993906000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-04</span> <span class="t" onclick="H(this)">12:58:26</span>           nathanmarz </span><span>@markaddleman at the moment with built-in navs: </span><code>(into {} (traverse [ALL (selected? LAST some?)] data))</code></div><div id="t1472993960000040" t="2016-09-04 12:59:20 nathanmarz though there&apos;s consideration over extending the built-in navs to support removal as well  https://github.com/nathanmarz/specter/issues/117"><a href="#t1472993960000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-04</span> <span class="t" onclick="H(this)">12:59:20</span>           nathanmarz </span><span>though there&apos;s consideration over extending the built-in navs to support removal as well </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a></div><div id="t1472993985000042" t="2016-09-04 12:59:45 nathanmarz in which case your use case would be  (setval [MAP-VALS nil?] NONE data)"><a href="#t1472993985000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-04</span> <span class="t" onclick="H(this)">12:59:45</span>           nathanmarz </span><span>in which case your use case would be </span><code>(setval [MAP-VALS nil?] NONE data)</code></div><div id="t1472996868000048" t="2016-09-04 13:47:48 markaddleman Thanks"><a href="#t1472996868000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-04</span> <span class="t" onclick="H(this)">13:47:48</span>         markaddleman </span><span>Thanks</span></div><div id="t1473146376000099" t="2016-09-06 07:19:36 escherize Anyone here have much experience with using re-frame + specter before?"><a href="#t1473146376000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">07:19:36</span>            escherize </span><span>Anyone here have much experience with using re-frame + specter before?</span></div><div id="t1473146392000100" t="2016-09-06 07:19:52 escherize There is a little bit of overlap (the re-frame path interceptor for example)."><a href="#t1473146392000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">07:19:52</span>            escherize </span><span>There is a little bit of overlap (the re-frame path interceptor for example).</span></div><div id="t1473146401000101" t="2016-09-06 07:20:01 escherize but I&apos;d be curious to here."><a href="#t1473146401000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">07:20:01</span>            escherize </span><span>but I&apos;d be curious to here.</span></div><div id="t1473171369000108" t="2016-09-06 14:16:09 nathanmarz Released Specter 0.13.0  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1473171369000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:16:09</span>           nathanmarz </span><span>Released Specter 0.13.0 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1473171390000110" t="2016-09-06 14:16:30 nathanmarz Here&apos;s a post about the new inline caching implementation  https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation"><a href="#t1473171390000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:16:30</span>           nathanmarz </span><span>Here&apos;s a post about the new inline caching implementation </span><a href="https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation</a></div><div id="t1473171409000112" t="2016-09-06 14:16:49 nathanmarz And a benchmark  https://gist.github.com/nathanmarz/b7c612b417647db80b9eaab618ff8d83"><a href="#t1473171409000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:16:49</span>           nathanmarz </span><span>And a benchmark </span><a href="https://gist.github.com/nathanmarz/b7c612b417647db80b9eaab618ff8d83" target="_blank">https://gist.github.com/nathanmarz/b7c612b417647db80b9eaab618ff8d83</a></div><div id="t1473171523000114" t="2016-09-06 14:18:43 martinklepsch @nathanmarz in changelog  with defnav or defnav"><a href="#t1473171523000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:18:43</span>        martinklepsch </span><span>@nathanmarz in changelog </span><code>with defnav or defnav</code></div><div id="t1473171533000115" t="2016-09-06 14:18:53 martinklepsch think that&apos;s a typo?"><a href="#t1473171533000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:18:53</span>        martinklepsch </span><span>think that&apos;s a typo?</span></div><div id="t1473171674000117" t="2016-09-06 14:21:14 nathanmarz @martinklepsch just poorly written, updated it to be clearer"><a href="#t1473171674000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:21:14</span>           nathanmarz </span><span>@martinklepsch just poorly written, updated it to be clearer</span></div><div id="t1473171743000118" t="2016-09-06 14:22:23 martinklepsch ahh, I get it now  😛  I thought there was an asterisk or something like that missing from the second  defnav , congrats on the release as well  :+1:"><a href="#t1473171743000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:22:23</span>        martinklepsch </span><span>ahh, I get it now </span><b>😛</b><span> I thought there was an asterisk or something like that missing from the second </span><code>defnav</code><span>, congrats on the release as well </span><b>:+1:</b></div><div id="t1473171758000119" t="2016-09-06 14:22:38 nathanmarz thanks!"><a href="#t1473171758000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:22:38</span>           nathanmarz </span><span>thanks!</span></div><div id="t1473172879000125" t="2016-09-06 14:41:19 caio I’m not being able to run the benchmark  😞   Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.rpl.specter.Util, compiling:(com/rpl/specter/impl.cljc:1:1)"><a href="#t1473172879000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:41:19</span>                 caio </span><span>I’m not being able to run the benchmark </span><b>😞</b><span> </span><code>Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.rpl.specter.Util, compiling:(com/rpl/specter/impl.cljc:1:1)</code></div><div id="t1473172914000126" t="2016-09-06 14:41:54 nathanmarz how are you running it?"><a href="#t1473172914000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:41:54</span>           nathanmarz </span><span>how are you running it?</span></div><div id="t1473172943000127" t="2016-09-06 14:42:23 caio scripts/run-benchmarks"><a href="#t1473172943000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:42:23</span>                 caio </span><code>scripts/run-benchmarks</code></div><div id="t1473172963000128" t="2016-09-06 14:42:43 nathanmarz ah, do  lein javac  first"><a href="#t1473172963000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:42:43</span>           nathanmarz </span><span>ah, do </span><code>lein javac</code><span> first</span></div><div id="t1473173033000129" t="2016-09-06 14:43:53 nathanmarz ah just realized the benchmark script needs a quick update"><a href="#t1473173033000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:43:53</span>           nathanmarz </span><span>ah just realized the benchmark script needs a quick update</span></div><div id="t1473173034000130" t="2016-09-06 14:43:54 nathanmarz one sec"><a href="#t1473173034000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:43:54</span>           nathanmarz </span><span>one sec</span></div><div id="t1473173094000131" t="2016-09-06 14:44:54 nathanmarz ok, just pushed a fix"><a href="#t1473173094000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:44:54</span>           nathanmarz </span><span>ok, just pushed a fix</span></div><div id="t1473173110000132" t="2016-09-06 14:45:10 nathanmarz it wasn&apos;t updated to the namespace change"><a href="#t1473173110000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:45:10</span>           nathanmarz </span><span>it wasn&apos;t updated to the namespace change</span></div><div id="t1473173278000133" t="2016-09-06 14:47:58 caio now it worked. thanks"><a href="#t1473173278000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-06</span> <span class="t" onclick="H(this)">14:47:58</span>                 caio </span><span>now it worked. thanks</span></div><div id="t1473211749000145" t="2016-09-07 01:29:09 amacdougall I&apos;m still getting up to speed on selectors. I&apos;m creating Hiccup-formatted SVG, and in this case, I&apos;m trying to get the attributes map of the first  rect  in a  g  (SVG&apos;s &quot;group&quot; tag). This works for me, but I suspect I&apos;m missing a better way:
 (sm/select-any
  [s/ALL vector? #(= :rect (first %)) s/ALL map?]
  [:g
   [:line {:x1 0 :y1 0 :x2 100 :y2 100}]
   [:rect {:x 1 :y 2 :width 100 :height 200}]])
"><a href="#t1473211749000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:29:09</span>          amacdougall </span><span>I&apos;m still getting up to speed on selectors. I&apos;m creating Hiccup-formatted SVG, and in this case, I&apos;m trying to get the attributes map of the first </span><code>rect</code><span> in a </span><code>g</code><span> (SVG&apos;s &quot;group&quot; tag). This works for me, but I suspect I&apos;m missing a better way:
</span><pre>(sm/select-any
  [s/ALL vector? #(= :rect (first %)) s/ALL map?]
  [:g
   [:line {:x1 0 :y1 0 :x2 100 :y2 100}]
   [:rect {:x 1 :y 2 :width 100 :height 200}]])
</pre></div><div id="t1473211967000146" t="2016-09-07 01:32:47 nathanmarz @amacdougall if the attributes map is always the last element of the vector you can end with  LAST  instead of  [ALL map?]"><a href="#t1473211967000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:32:47</span>           nathanmarz </span><span>@amacdougall if the attributes map is always the last element of the vector you can end with </span><code>LAST</code><span> instead of </span><code>[ALL map?]</code></div><div id="t1473212003000147" t="2016-09-07 01:33:23 amacdougall Ah, good point! In this case, I think it will be, because the rects are leaf nodes in the SVG tree. For other constructs, this may not hold true, but that&apos;s another story."><a href="#t1473212003000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:33:23</span>          amacdougall </span><span>Ah, good point! In this case, I think it will be, because the rects are leaf nodes in the SVG tree. For other constructs, this may not hold true, but that&apos;s another story.</span></div><div id="t1473212008000148" t="2016-09-07 01:33:28 amacdougall Thanks!"><a href="#t1473212008000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:33:28</span>          amacdougall </span><span>Thanks!</span></div><div id="t1473212031000149" t="2016-09-07 01:33:51 nathanmarz you can also use  keypath  to navigate by index into a vector"><a href="#t1473212031000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:33:51</span>           nathanmarz </span><span>you can also use </span><code>keypath</code><span> to navigate by index into a vector</span></div><div id="t1473212180000150" t="2016-09-07 01:36:20 amacdougall I suppose in this case, it&apos;s okay to assume a lot about the structure of the target. But one of my favorite things about Specter is that paths can be quite flexible. Just trying to develop good habits."><a href="#t1473212180000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:36:20</span>          amacdougall </span><span>I suppose in this case, it&apos;s okay to assume a lot about the structure of the target. But one of my favorite things about Specter is that paths can be quite flexible. Just trying to develop good habits.</span></div><div id="t1473212253000152" t="2016-09-07 01:37:33 nathanmarz yea just takes practice"><a href="#t1473212253000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">01:37:33</span>           nathanmarz </span><span>yea just takes practice</span></div><div id="t1473234267000164" t="2016-09-07 07:44:27 levitanong I’m getting  ERROR: contains? not supported on type: clojure.lang.PersistentList  when requiring specter. Am I doing anything wrong? The following is my require clause in  ns :  (:require [com.rpl.specter :refer [ALL FIRST]])"><a href="#t1473234267000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">07:44:27</span>           levitanong </span><span>I’m getting </span><code>ERROR: contains? not supported on type: clojure.lang.PersistentList</code><span> when requiring specter. Am I doing anything wrong? The following is my require clause in </span><code>ns</code><span>: </span><code>(:require [com.rpl.specter :refer [ALL FIRST]])</code></div><div id="t1473235090000167" t="2016-09-07 07:58:10 levitanong this is on specter 0.13.0. Specter 0.12.0 works just fine"><a href="#t1473235090000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">07:58:10</span>           levitanong </span><span>this is on specter 0.13.0. Specter 0.12.0 works just fine</span></div><div id="t1473246545000173" t="2016-09-07 11:09:05 nathanmarz @levitanong is this Clojure or ClojureScript? do you have a full stack trace?"><a href="#t1473246545000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:09:05</span>           nathanmarz </span><span>@levitanong is this Clojure or ClojureScript? do you have a full stack trace?</span></div><div id="t1473248613000174" t="2016-09-07 11:43:33 levitanong clojurescript"><a href="#t1473248613000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:43:33</span>           levitanong </span><span>clojurescript</span></div><div id="t1473248626000175" t="2016-09-07 11:43:46 levitanong hang on, will come up with the full stack trace"><a href="#t1473248626000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:43:46</span>           levitanong </span><span>hang on, will come up with the full stack trace</span></div><div id="t1473249157000177" t="2016-09-07 11:52:37 nathanmarz @levitanong what version of cljs?"><a href="#t1473249157000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:52:37</span>           nathanmarz </span><span>@levitanong what version of cljs?</span></div><div id="t1473249173000178" t="2016-09-07 11:52:53 levitanong 1.9.225"><a href="#t1473249173000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:52:53</span>           levitanong </span><span>1.9.225</span></div><div id="t1473249327000179" t="2016-09-07 11:55:27 nathanmarz I just pushed a build that renames that function, might fix it"><a href="#t1473249327000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:55:27</span>           nathanmarz </span><span>I just pushed a build that renames that function, might fix it</span></div><div id="t1473249331000180" t="2016-09-07 11:55:31 nathanmarz try 0.13.1-SNAPSHOT"><a href="#t1473249331000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">11:55:31</span>           nathanmarz </span><span>try 0.13.1-SNAPSHOT</span></div><div id="t1473271545000196" t="2016-09-07 18:05:45 levitanong @nathanmarz Works perfectly, thanks  🙂"><a href="#t1473271545000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">18:05:45</span>           levitanong </span><span>@nathanmarz Works perfectly, thanks </span><b>🙂</b></div><div id="t1473285564000203" t="2016-09-07 21:59:24 darwin just upgraded to 0.13.0, started getting  TypeError: this.$late1$.$select_STAR_$ is not a function , looks like I didn’t include something?"><a href="#t1473285564000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">21:59:24</span>               darwin </span><span>just upgraded to 0.13.0, started getting </span><code>TypeError: this.$late1$.$select_STAR_$ is not a function</code><span>, looks like I didn’t include something?</span></div><div id="t1473285701000207" t="2016-09-07 22:01:41 darwin relevant call-site:
 https://github.com/binaryage/dirac/blob/a95e9c3f42ca9cd202240509ecbc7196c3a19753/src/implant/dirac/implant/automation/reps.cljs#L63"><a href="#t1473285701000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:01:41</span>               darwin </span><span>relevant call-site:
</span><a href="https://github.com/binaryage/dirac/blob/a95e9c3f42ca9cd202240509ecbc7196c3a19753/src/implant/dirac/implant/automation/reps.cljs#L63" target="_blank">https://github.com/binaryage/dirac/blob/a95e9c3f42ca9cd202240509ecbc7196c3a19753/src/implant/dirac/implant/automation/reps.cljs#L63</a></div><div id="t1473285973000211" t="2016-09-07 22:06:13 darwin investigating it more, this looks like advanced-mode optimization problem"><a href="#t1473285973000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:06:13</span>               darwin </span><span>investigating it more, this looks like advanced-mode optimization problem</span></div><div id="t1473285988000212" t="2016-09-07 22:06:28 darwin I’m compiling my cljs code under :advanced with :pseudo-names true (running my tests against advanced mode build)"><a href="#t1473285988000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:06:28</span>               darwin </span><span>I’m compiling my cljs code under :advanced with :pseudo-names true (running my tests against advanced mode build)</span></div><div id="t1473286451000215" t="2016-09-07 22:14:11 nathanmarz @darwin so you don&apos;t get the error under a different optimization mode?"><a href="#t1473286451000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:14:11</span>           nathanmarz </span><span>@darwin so you don&apos;t get the error under a different optimization mode?</span></div><div id="t1473286511000216" t="2016-09-07 22:15:11 darwin trying to test that, but my project is pretty complex and I bumped into another issue with :none mode"><a href="#t1473286511000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:11</span>               darwin </span><span>trying to test that, but my project is pretty complex and I bumped into another issue with :none mode</span></div><div id="t1473286517000217" t="2016-09-07 22:15:17 darwin will get back to you ASAP"><a href="#t1473286517000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:17</span>               darwin </span><span>will get back to you ASAP</span></div><div id="t1473286520000218" t="2016-09-07 22:15:20 nathanmarz ok"><a href="#t1473286520000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:20</span>           nathanmarz </span><span>ok</span></div><div id="t1473286526000219" t="2016-09-07 22:15:26 nathanmarz also, you should try 0.13.1-SNAPSHOT"><a href="#t1473286526000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:26</span>           nathanmarz </span><span>also, you should try 0.13.1-SNAPSHOT</span></div><div id="t1473286541000220" t="2016-09-07 22:15:41 darwin ok, going to do that first"><a href="#t1473286541000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:41</span>               darwin </span><span>ok, going to do that first</span></div><div id="t1473286549000221" t="2016-09-07 22:15:49 nathanmarz what version of cljs are you using?"><a href="#t1473286549000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:15:49</span>           nathanmarz </span><span>what version of cljs are you using?</span></div><div id="t1473286596000222" t="2016-09-07 22:16:36 darwin 229"><a href="#t1473286596000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:16:36</span>               darwin </span><span>229</span></div><div id="t1473287123000223" t="2016-09-07 22:25:23 darwin so 0.13.1-SNAPSHOT behaves the same way for me under :advanced, now I’m going to make that :none mode work"><a href="#t1473287123000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:25:23</span>               darwin </span><span>so 0.13.1-SNAPSHOT behaves the same way for me under :advanced, now I’m going to make that :none mode work</span></div><div id="t1473287142000224" t="2016-09-07 22:25:42 darwin just need to mess with goog/base.js require which is missing for some reason"><a href="#t1473287142000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:25:42</span>               darwin </span><span>just need to mess with goog/base.js require which is missing for some reason</span></div><div id="t1473288567000225" t="2016-09-07 22:49:27 darwin this is fun, I’m depending on parinfer package from cljsjs and it has missing semicolon in a wrong place, advanced mode optimizer seems to “fix” it and in  [:attrs nil]  :simple / :whitespace mode browser throws, this will be hard to fix quickly..."><a href="#t1473288567000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:49:27</span>               darwin </span><span>this is fun, I’m depending on parinfer package from cljsjs and it has missing semicolon in a wrong place, advanced mode optimizer seems to “fix” it and in </span><del>:none</del><span> :simple / :whitespace mode browser throws, this will be hard to fix quickly...</span></div><div id="t1473288592000226" t="2016-09-07 22:49:52 darwin maybe I will just try to isolate my specter usage into a standalone project and demonstrate the issue there (if exists)"><a href="#t1473288592000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-07</span> <span class="t" onclick="H(this)">22:49:52</span>               darwin </span><span>maybe I will just try to isolate my specter usage into a standalone project and demonstrate the issue there (if exists)</span></div><div id="t1473370867000276" t="2016-09-08 21:41:07 gphilipp Hi, I’m trying to solve using Specter the clojure brave and true example of chapter 3 (the one with the hobbit symmetrical body, search &apos;Pulling It All Together&apos; on  http://www.braveclojure.com/do-things/ ), but I can’t find a way to do it. Can anybody enlighten me ?"><a href="#t1473370867000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">21:41:07</span>             gphilipp </span><span>Hi, I’m trying to solve using Specter the clojure brave and true example of chapter 3 (the one with the hobbit symmetrical body, search &apos;Pulling It All Together&apos; on </span><a href="http://www.braveclojure.com/do-things/" target="_blank">http://www.braveclojure.com/do-things/</a><span>), but I can’t find a way to do it. Can anybody enlighten me ?</span></div><div id="t1473370936000277" t="2016-09-08 21:42:16 gphilipp My best shot is to transform existing parts, but I didn’t add them to the whole collection :  (transform [ALL needs-matching-part?]
           make-matching-part
           asym-hobbit-body-parts)"><a href="#t1473370936000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">21:42:16</span>             gphilipp </span><span>My best shot is to transform existing parts, but I didn’t add them to the whole collection : </span><pre>(transform [ALL needs-matching-part?]
           make-matching-part
           asym-hobbit-body-parts)</pre></div><div id="t1473372421000281" t="2016-09-08 22:07:01 loganmhb @gphilipp one way to do that is with multi-transform, I think:
 (multi-transform [ALL needs-matching-part? (multi-path (terminal identity)
                                                       (terminal make-matching-part))]
                 asym-hobbit-body-parts)
"><a href="#t1473372421000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:07:01</span>             loganmhb </span><span>@gphilipp one way to do that is with multi-transform, I think:
</span><pre>(multi-transform [ALL needs-matching-part? (multi-path (terminal identity)
                                                       (terminal make-matching-part))]
                 asym-hobbit-body-parts)
</pre></div><div id="t1473372514000282" t="2016-09-08 22:08:34 loganmhb dunno if there’s a way to avoid the explicit  identity"><a href="#t1473372514000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:08:34</span>             loganmhb </span><span>dunno if there’s a way to avoid the explicit </span><code>identity</code></div><div id="t1473372564000283" t="2016-09-08 22:09:24 aengelberg I don&apos;t think that would work, it would overwrite the value with the second transformation in  multi-path"><a href="#t1473372564000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:09:24</span>           aengelberg </span><span>I don&apos;t think that would work, it would overwrite the value with the second transformation in </span><code>multi-path</code></div><div id="t1473372645000284" t="2016-09-08 22:10:45 loganmhb ah, I think you’re right"><a href="#t1473372645000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:10:45</span>             loganmhb </span><span>ah, I think you’re right</span></div><div id="t1473372664000285" t="2016-09-08 22:11:04 loganmhb was testing with  range  and misinterpreted the output  🙂"><a href="#t1473372664000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:11:04</span>             loganmhb </span><span>was testing with </span><code>range</code><span> and misinterpreted the output </span><b>🙂</b></div><div id="t1473372712000286" t="2016-09-08 22:11:52 aengelberg there might be a way with  com.rpl.specter.zipper"><a href="#t1473372712000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:11:52</span>           aengelberg </span><span>there might be a way with </span><code>com.rpl.specter.zipper</code></div><div id="t1473372771000287" t="2016-09-08 22:12:51 loganmhb here’s something:
 (select [ALL keyword? (continue-then-stay (transformed STAY str))] [:a :b :c])
[&quot;:a&quot; :a &quot;:b&quot; :b &quot;:c&quot; :c]
"><a href="#t1473372771000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:12:51</span>             loganmhb </span><span>here’s something:
</span><pre>(select [ALL keyword? (continue-then-stay (transformed STAY str))] [:a :b :c])
[&quot;:a&quot; :a &quot;:b&quot; :b &quot;:c&quot; :c]
</pre></div><div id="t1473372885000288" t="2016-09-08 22:14:45 gphilipp That looks ok. Not very readable though :-/"><a href="#t1473372885000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:14:45</span>             gphilipp </span><span>That looks ok. Not very readable though :-/</span></div><div id="t1473372929000289" t="2016-09-08 22:15:29 gphilipp Thanks anyway !"><a href="#t1473372929000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:15:29</span>             gphilipp </span><span>Thanks anyway !</span></div><div id="t1473373167000290" t="2016-09-08 22:19:27 aengelberg (transform [VECTOR-ZIP LEFTMOST (stay-then-continue RIGHT) NODE-SEQ (view set) (collect-one FIRST) (subset #{})] (fn [body-part _] #{(make-matching-part body-part)}) asym-hobbit-body-parts)
"><a href="#t1473373167000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:19:27</span>           aengelberg </span><pre>(transform [VECTOR-ZIP LEFTMOST (stay-then-continue RIGHT) NODE-SEQ (view set) (collect-one FIRST) (subset #{})] (fn [body-part _] #{(make-matching-part body-part)}) asym-hobbit-body-parts)
</pre></div><div id="t1473373212000292" t="2016-09-08 22:20:12 aengelberg #nailedit"><a href="#t1473373212000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:20:12</span>           aengelberg </span><span>#nailedit</span></div><div id="t1473373680000293" t="2016-09-08 22:28:00 caio so, I have this small path that I’m using in several places:  [map? ALL (sp/if-path #(-&gt; % first ks) LAST)] 
it’s basically a  select-key  (didn’t use  (view #(select-key …))  cause it doesn’t work on transforms :(). is this the right way of doing it? if it is, how can I transform it into a nav? my goal is to call  (key-selector ks)  inside a path"><a href="#t1473373680000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:28:00</span>                 caio </span><span>so, I have this small path that I’m using in several places: </span><code>[map? ALL (sp/if-path #(-&gt; % first ks) LAST)]</code><span>
it’s basically a </span><code>select-key</code><span> (didn’t use </span><code>(view #(select-key …))</code><span> cause it doesn’t work on transforms :(). is this the right way of doing it? if it is, how can I transform it into a nav? my goal is to call </span><code>(key-selector ks)</code><span> inside a path</span></div><div id="t1473373739000295" t="2016-09-08 22:28:59 caio I looked into  defnav , but couldn’t understand how to do it"><a href="#t1473373739000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:28:59</span>                 caio </span><span>I looked into </span><code>defnav</code><span>, but couldn’t understand how to do it</span></div><div id="t1473374239000298" t="2016-09-08 22:37:19 codonnell There might be a way to do it with  multi-path . "><a href="#t1473374239000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:37:19</span>            codonnell </span><span>There might be a way to do it with </span><code>multi-path</code><span>. </span></div><div id="t1473374314000299" t="2016-09-08 22:38:34 codonnell Or submap"><a href="#t1473374314000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:38:34</span>            codonnell </span><span>Or submap</span></div><div id="t1473374655000300" t="2016-09-08 22:44:15 codonnell @caio yeah that&apos;s exactly  submap  ( https://github.com/nathanmarz/specter/wiki/List-of-Navigators#submap )"><a href="#t1473374655000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:44:15</span>            codonnell </span><span>@caio yeah that&apos;s exactly </span><code>submap</code><span> (</span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#submap" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#submap</a><span>)</span></div><div id="t1473374710000302" t="2016-09-08 22:45:10 caio well, that was easy. thanks again @codonnell"><a href="#t1473374710000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-08</span> <span class="t" onclick="H(this)">22:45:10</span>                 caio </span><span>well, that was easy. thanks again @codonnell</span></div><div id="t1473382643000316" t="2016-09-09 00:57:23 codonnell @caio if you were confused about how to implement it using  defnav  you could check out the source code for  submap  at  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L703"><a href="#t1473382643000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-09</span> <span class="t" onclick="H(this)">00:57:23</span>            codonnell </span><span>@caio if you were confused about how to implement it using </span><code>defnav</code><span> you could check out the source code for </span><code>submap</code><span> at </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L703" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L703</a></div><div id="t1473779120000553" t="2016-09-13 15:05:20 zane Is it possible to attach docstrings via  defnav ?"><a href="#t1473779120000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:05:20</span>                 zane </span><span>Is it possible to attach docstrings via </span><code>defnav</code><span>?</span></div><div id="t1473779235000554" t="2016-09-13 15:07:15 codonnell @zane IIRC the semantics are the same as  clojure.core/defn"><a href="#t1473779235000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:07:15</span>            codonnell </span><span>@zane IIRC the semantics are the same as </span><code>clojure.core/defn</code></div><div id="t1473779453000555" t="2016-09-13 15:10:53 zane @codonnell: Don&apos;t think so. This doesn&apos;t compile, for example:
 (defnav EXAMPLE
  &quot;Docs!&quot;
  []
  (select* [this structure next-fn])
  (transform* [this structure next-fn])
 
Whereas, this does:
 (defn example
  &quot;Docs!&quot;
  []
  :ok)
"><a href="#t1473779453000555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:10:53</span>                 zane </span><span>@codonnell: Don&apos;t think so. This doesn&apos;t compile, for example:
</span><pre>(defnav EXAMPLE
  &quot;Docs!&quot;
  []
  (select* [this structure next-fn])
  (transform* [this structure next-fn])
</pre><span>
Whereas, this does:
</span><pre>(defn example
  &quot;Docs!&quot;
  []
  :ok)
</pre></div><div id="t1473779584000556" t="2016-09-13 15:13:04 codonnell @zane which specter version are you using?"><a href="#t1473779584000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:13:04</span>            codonnell </span><span>@zane which specter version are you using?</span></div><div id="t1473779616000557" t="2016-09-13 15:13:36 zane [com.rpl/specter &quot;0.12.0&quot;]"><a href="#t1473779616000557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:13:36</span>                 zane </span><code>[com.rpl/specter &quot;0.12.0&quot;]</code></div><div id="t1473779806000559" t="2016-09-13 15:16:46 codonnell @zane just took a look at the source; nope, no docstrings"><a href="#t1473779806000559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:16:46</span>            codonnell </span><span>@zane just took a look at the source; nope, no docstrings</span></div><div id="t1473779819000560" t="2016-09-13 15:16:59 zane Yeah. I looked at it too but wanted to confirm. Sad panda."><a href="#t1473779819000560" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">15:16:59</span>                 zane </span><span>Yeah. I looked at it too but wanted to confirm. Sad panda.</span></div><div id="t1473784031000562" t="2016-09-13 16:27:11 nathanmarz @zane you can use  ^{:doc ...}  syntax in front of the symbol, e.g.  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L593"><a href="#t1473784031000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">16:27:11</span>           nathanmarz </span><span>@zane you can use </span><code>^{:doc ...}</code><span> syntax in front of the symbol, e.g. </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L593" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L593</a></div><div id="t1473784126000564" t="2016-09-13 16:28:46 zane Thanks, Nathan!"><a href="#t1473784126000564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">16:28:46</span>                 zane </span><span>Thanks, Nathan!</span></div><div id="t1473801175000575" t="2016-09-13 21:12:55 mac This might be obvious and/or silly, but wouldn&apos;t specter be very well suited to query/update those application state atoms that all the web-frameworks use these days?"><a href="#t1473801175000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">21:12:55</span>                  mac </span><span>This might be obvious and/or silly, but wouldn&apos;t specter be very well suited to query/update those application state atoms that all the web-frameworks use these days?</span></div><div id="t1473803326000578" t="2016-09-13 21:48:46 nathanmarz @mac I think Specter is extremely useful for web programming in general, as a DOM is just a big nested data structure"><a href="#t1473803326000578" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">21:48:46</span>           nathanmarz </span><span>@mac I think Specter is extremely useful for web programming in general, as a DOM is just a big nested data structure</span></div><div id="t1473806409000580" t="2016-09-13 22:40:09 cjmurphy @mac Something that goes against that idea somewhat is to have the atom have its own internal organisation and way of querying updating, which is what Om Next does with its Idents. (Having said that I imagine Om Next would still benefit from using Specter)."><a href="#t1473806409000580" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-13</span> <span class="t" onclick="H(this)">22:40:09</span>             cjmurphy </span><span>@mac Something that goes against that idea somewhat is to have the atom have its own internal organisation and way of querying updating, which is what Om Next does with its Idents. (Having said that I imagine Om Next would still benefit from using Specter).</span></div><div id="t1473857591000615" t="2016-09-14 12:53:11 levitanong Is there any way to  transform  keys of hashmaps to booleans without filtering out  false s?"><a href="#t1473857591000615" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">12:53:11</span>           levitanong </span><span>Is there any way to </span><code>transform</code><span> keys of hashmaps to booleans without filtering out </span><code>false</code><span>s?</span></div><div id="t1473859093000616" t="2016-09-14 13:18:13 codonnell @levitanong Not sure exactly what behavior you want. Could you give an example?"><a href="#t1473859093000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">13:18:13</span>            codonnell </span><span>@levitanong Not sure exactly what behavior you want. Could you give an example?</span></div><div id="t1473869059000629" t="2016-09-14 16:04:19 levitanong @codonnell given the following dataset:
 (def data {1 {“false” 11 “true” 12} 2 {“false” 21 “true” 22}})
 

I want to turn the strings to proper booleans.
 (transform [ALL LAST ALL FIRST]
  boolean
  data)
 

However, instead of

 (def data {1 {false 11 true 12} 2 {false 21 true 22}})
 
I get
 (def data {1 {true 12} 2 {true 22}})
 
So I’m assuming  transform  automatically removes falsy values or keys."><a href="#t1473869059000629" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">16:04:19</span>           levitanong </span><span>@codonnell given the following dataset:
</span><pre>(def data {1 {“false” 11 “true” 12} 2 {“false” 21 “true” 22}})
</pre><span>

I want to turn the strings to proper booleans.
</span><pre>(transform [ALL LAST ALL FIRST]
  boolean
  data)
</pre><span>

However, instead of

</span><pre>(def data {1 {false 11 true 12} 2 {false 21 true 22}})
</pre><span>
I get
</span><pre>(def data {1 {true 12} 2 {true 22}})
</pre><span>
So I’m assuming </span><code>transform</code><span> automatically removes falsy values or keys.</span></div><div id="t1473869268000630" t="2016-09-14 16:07:48 nathanmarz @levitanong  (boolean &quot;false&quot;)  returns  true"><a href="#t1473869268000630" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">16:07:48</span>           nathanmarz </span><span>@levitanong </span><code>(boolean &quot;false&quot;)</code><span> returns </span><code>true</code></div><div id="t1473869278000631" t="2016-09-14 16:07:58 levitanong derp"><a href="#t1473869278000631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">16:07:58</span>           levitanong </span><span>derp</span></div><div id="t1473869280000632" t="2016-09-14 16:08:00 nathanmarz I think you want to make a  parse-boolean-string  function"><a href="#t1473869280000632" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">16:08:00</span>           nathanmarz </span><span>I think you want to make a </span><code>parse-boolean-string</code><span> function</span></div><div id="t1473869312000633" t="2016-09-14 16:08:32 levitanong My bad! Thanks @nathanmarz"><a href="#t1473869312000633" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-14</span> <span class="t" onclick="H(this)">16:08:32</span>           levitanong </span><span>My bad! Thanks @nathanmarz</span></div><div id="t1474147604000753" t="2016-09-17 21:26:44 karan hey guys, is there an idiomatic way to select a slice of a nested map given a predicate for some level? for example, using  even? ,  {:a {:b 1, :c 2}, :d {:e 3, :f 4}, :g {:h 5}}  -&gt;  {:a {:c 2} :d {:f 4}}"><a href="#t1474147604000753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:26:44</span>                karan </span><span>hey guys, is there an idiomatic way to select a slice of a nested map given a predicate for some level? for example, using </span><code>even?</code><span>, </span><code>{:a {:b 1, :c 2}, :d {:e 3, :f 4}, :g {:h 5}}</code><span> -&gt; </span><code>{:a {:c 2} :d {:f 4}}</code></div><div id="t1474147627000754" t="2016-09-17 21:27:07 karan so far I have something like this, which is pretty close: 
 (transform [MAP-VALS]
    #(into {} 
               (select-one (filterer LAST even?) %))
      ex)
"><a href="#t1474147627000754" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:27:07</span>                karan </span><span>so far I have something like this, which is pretty close: 
</span><pre>(transform [MAP-VALS]
    #(into {} 
               (select-one (filterer LAST even?) %))
      ex)
</pre></div><div id="t1474147720000757" t="2016-09-17 21:28:40 karan with  (def ex {:a {:b 1, :c 2}, :d {:e 3, :f 4}, :g {:h 5}})"><a href="#t1474147720000757" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:28:40</span>                karan </span><span>with </span><code>(def ex {:a {:b 1, :c 2}, :d {:e 3, :f 4}, :g {:h 5}})</code></div><div id="t1474148078000760" t="2016-09-17 21:34:38 karan the  (into {} … )  doesn’t seem like the best solution. maybe if there were a type-aware  select ? seems to be an issue from a while back here:  https://github.com/nathanmarz/specter/issues/127"><a href="#t1474148078000760" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:34:38</span>                karan </span><span>the </span><code>(into {} … )</code><span> doesn’t seem like the best solution. maybe if there were a type-aware </span><code>select</code><span>? seems to be an issue from a while back here: </span><a href="https://github.com/nathanmarz/specter/issues/127" target="_blank">https://github.com/nathanmarz/specter/issues/127</a></div><div id="t1474148430000762" t="2016-09-17 21:40:30 nathanmarz @karan sounds like that would be a variant on  submap  that takes in a path to evaluate the vals, e.g.  (filtered-submap even?)  or  (filtered-submap (filterer even?) (view count) #(&gt;= % 2))"><a href="#t1474148430000762" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:40:30</span>           nathanmarz </span><span>@karan sounds like that would be a variant on </span><code>submap</code><span> that takes in a path to evaluate the vals, e.g. </span><code>(filtered-submap even?)</code><span> or </span><code>(filtered-submap (filterer even?) (view count) #(&gt;= % 2))</code></div><div id="t1474148557000763" t="2016-09-17 21:42:37 nathanmarz see  selected?  implementation for an example of a navigator which uses a path"><a href="#t1474148557000763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:42:37</span>           nathanmarz </span><span>see </span><code>selected?</code><span> implementation for an example of a navigator which uses a path</span></div><div id="t1474148739000764" t="2016-09-17 21:45:39 karan @nathanmarz thanks, I’ll try that!"><a href="#t1474148739000764" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-17</span> <span class="t" onclick="H(this)">21:45:39</span>                karan </span><span>@nathanmarz thanks, I’ll try that!</span></div><div id="t1474173167000778" t="2016-09-18 04:32:47 fasiha I&apos;m super-hesitant to ask this—I feel I ought to go thru the wikis listing the navigators and macros and other examples a couple more times (and as I just did). Can I navigate to &quot;the space between the first and second element of a vec&quot; and  setval  it, so that  [:a :b :c]  becomes  [:a :NEW-VAL :b :c] ?"><a href="#t1474173167000778" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:32:47</span>               fasiha </span><span>I&apos;m super-hesitant to ask this—I feel I ought to go thru the wikis listing the navigators and macros and other examples a couple more times (and as I just did). Can I navigate to &quot;the space between the first and second element of a vec&quot; and </span><code>setval</code><span> it, so that </span><code>[:a :b :c]</code><span> becomes </span><code>[:a :NEW-VAL :b :c]</code><span>?</span></div><div id="t1474173764000779" t="2016-09-18 04:42:44 karan try this: 
 (def my-nav (n/PosNavigator (fn [v] (nth v 1)) (fn [v afn]
                                                                 (let [val (nth v 1)]
                                                                   (assoc v 1 (afn val))))))
"><a href="#t1474173764000779" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:42:44</span>                karan </span><span>try this: 
</span><pre>(def my-nav (n/PosNavigator (fn [v] (nth v 1)) (fn [v afn]
                                                                 (let [val (nth v 1)]
                                                                   (assoc v 1 (afn val))))))
</pre></div><div id="t1474173795000780" t="2016-09-18 04:43:15 karan that will need to polymorphic on the second function (the transformer), but it’s the idea"><a href="#t1474173795000780" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:43:15</span>                karan </span><span>that will need to polymorphic on the second function (the transformer), but it’s the idea</span></div><div id="t1474173833000781" t="2016-09-18 04:43:53 karan @fasiha"><a href="#t1474173833000781" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:43:53</span>                karan </span><span>@fasiha</span></div><div id="t1474174021000782" t="2016-09-18 04:47:01 karan oh never mind, that’s not what you asked  🙂 . sorry!"><a href="#t1474174021000782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:47:01</span>                karan </span><span>oh never mind, that’s not what you asked </span><b>🙂</b><span>. sorry!</span></div><div id="t1474174442000783" t="2016-09-18 04:54:02 karan (defnav POSONE []
                   (select* [this structure next-fn]
                            (next-fn []))
                   (transform* [this structure next-fn]
                               (let [new-val (next-fn [])]
                                 (vec (cons (first structure)
                                            (cons new-val (rest structure)))))))
  
@fasiha take two. similar caveats, but I think that’s the right direction."><a href="#t1474174442000783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">04:54:02</span>                karan </span><pre>(defnav POSONE []
                   (select* [this structure next-fn]
                            (next-fn []))
                   (transform* [this structure next-fn]
                               (let [new-val (next-fn [])]
                                 (vec (cons (first structure)
                                            (cons new-val (rest structure)))))))
</pre><span> 
@fasiha take two. similar caveats, but I think that’s the right direction.</span></div><div id="t1474197686000790" t="2016-09-18 11:21:26 nathanmarz @fasiha  (setval (srange 1 1) [:NEW-VAL] [:a :b :c])"><a href="#t1474197686000790" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-18</span> <span class="t" onclick="H(this)">11:21:26</span>           nathanmarz </span><span>@fasiha </span><code>(setval (srange 1 1) [:NEW-VAL] [:a :b :c])</code></div><div id="t1474260286000815" t="2016-09-19 04:44:46 aaelony what is the idiomatic way in Specter to do the following:  (mapv (fn [x] {:name x}) (-&gt;&gt; [[:a :b][:b :c][:c :d][:c :e]] flatten set vec ))
=&gt; [{:name :e} {:name :c} {:name :b} {:name :d} {:name :a}]"><a href="#t1474260286000815" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">04:44:46</span>              aaelony </span><span>what is the idiomatic way in Specter to do the following: </span><pre>(mapv (fn [x] {:name x}) (-&gt;&gt; [[:a :b][:b :c][:c :d][:c :e]] flatten set vec ))
=&gt; [{:name :e} {:name :c} {:name :b} {:name :d} {:name :a}]</pre></div><div id="t1474260351000816" t="2016-09-19 04:45:51 aaelony taking a vector and constructing a map with new keys and vals?"><a href="#t1474260351000816" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">04:45:51</span>              aaelony </span><span>taking a vector and constructing a map with new keys and vals?</span></div><div id="t1474280605000830" t="2016-09-19 10:23:25 dev-hartmann i am trying to add to a list inside a map of maps if the if the id matches. my code looks like that: (def same-id?
 (specter/comp-paths (specter/paramsfn [id-key id] [item] (= id (get item id-key)))))"><a href="#t1474280605000830" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:23:25</span>         dev-hartmann </span><span>i am trying to add to a list inside a map of maps if the if the id matches. my code looks like that: (def same-id?
 (specter/comp-paths (specter/paramsfn [id-key id] [item] (= id (get item id-key)))))</span></div><div id="t1474280620000831" t="2016-09-19 10:23:40 dev-hartmann (specter/select [specter/ALL same-id? (:entity-id entity) (:entity-val entity)] db)"><a href="#t1474280620000831" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:23:40</span>         dev-hartmann </span><span>(specter/select [specter/ALL same-id? (:entity-id entity) (:entity-val entity)] db)</span></div><div id="t1474280670000832" t="2016-09-19 10:24:30 dev-hartmann i know the actual transform is missing, but i have a feeling i missunderstood how to use specter"><a href="#t1474280670000832" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:24:30</span>         dev-hartmann </span><span>i know the actual transform is missing, but i have a feeling i missunderstood how to use specter</span></div><div id="t1474280786000833" t="2016-09-19 10:26:26 nathanmarz can you give an example of input/output?"><a href="#t1474280786000833" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:26:26</span>           nathanmarz </span><span>can you give an example of input/output?</span></div><div id="t1474280868000834" t="2016-09-19 10:27:48 nathanmarz @aaelony that&apos;s an aggregation producing a brand new data structure construction, so Specter won&apos;t be any better than transducers for that case"><a href="#t1474280868000834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:27:48</span>           nathanmarz </span><span>@aaelony that&apos;s an aggregation producing a brand new data structure construction, so Specter won&apos;t be any better than transducers for that case</span></div><div id="t1474281033000835" t="2016-09-19 10:30:33 nathanmarz @aaelony but this is an efficient way to do it:
 (-&gt;&gt; [[:a :b][:b :c][:c :d][:c :e]]
     (traverse [ALL ALL])
     (into #{})
     (into [] (map (fn [k] {:name k}))))
"><a href="#t1474281033000835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:30:33</span>           nathanmarz </span><span>@aaelony but this is an efficient way to do it:
</span><pre>(-&gt;&gt; [[:a :b][:b :c][:c :d][:c :e]]
     (traverse [ALL ALL])
     (into #{})
     (into [] (map (fn [k] {:name k}))))
</pre></div><div id="t1474282300000836" t="2016-09-19 10:51:40 dev-hartmann entity = {:entity-id :advisory-id :entity-val :&quot;2016-1425&quot;}
db = {:advisories {:list {:advisory-id &quot;2016-1623&quot; :cvss {:c 1 :d 2 :e 3} :tags ({:tag-key &quot;test-tag&quot; :tag-value nil} {:tag-key &quot;test-tag-2&quot; :tag-value 12})}}}"><a href="#t1474282300000836" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:51:40</span>         dev-hartmann </span><span>entity = {:entity-id :advisory-id :entity-val :&quot;2016-1425&quot;}
db = {:advisories {:list {:advisory-id &quot;2016-1623&quot; :cvss {:c 1 :d 2 :e 3} :tags ({:tag-key &quot;test-tag&quot; :tag-value nil} {:tag-key &quot;test-tag-2&quot; :tag-value 12})}}}</span></div><div id="t1474282331000837" t="2016-09-19 10:52:11 dev-hartmann at the moment i don&apos;t get any output because i cannot locate paramsfn"><a href="#t1474282331000837" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:52:11</span>         dev-hartmann </span><span>at the moment i don&apos;t get any output because i cannot locate paramsfn</span></div><div id="t1474282421000838" t="2016-09-19 10:53:41 dev-hartmann what i want to do is, append a tag to tags inside advisory inside the advisories list if the id matches"><a href="#t1474282421000838" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:53:41</span>         dev-hartmann </span><span>what i want to do is, append a tag to tags inside advisory inside the advisories list if the id matches</span></div><div id="t1474282424000839" t="2016-09-19 10:53:44 dev-hartmann entity id"><a href="#t1474282424000839" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">10:53:44</span>         dev-hartmann </span><span>entity id</span></div><div id="t1474282898000840" t="2016-09-19 11:01:38 nathanmarz @dev-hartmann looking for expected input/output"><a href="#t1474282898000840" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:01:38</span>           nathanmarz </span><span>@dev-hartmann looking for expected input/output</span></div><div id="t1474282929000841" t="2016-09-19 11:02:09 nathanmarz paramsfn  was removed in 0.13.0 because it&apos;s no longer necessary"><a href="#t1474282929000841" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:02:09</span>           nathanmarz </span><code>paramsfn</code><span> was removed in 0.13.0 because it&apos;s no longer necessary</span></div><div id="t1474283018000842" t="2016-09-19 11:03:38 dev-hartmann expected output is the updated db map"><a href="#t1474283018000842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:03:38</span>         dev-hartmann </span><span>expected output is the updated db map</span></div><div id="t1474283071000843" t="2016-09-19 11:04:31 dev-hartmann input is entity map like above and a tag {:tag-key &quot;something&quot; :tag-value &quot;optional&quot;}"><a href="#t1474283071000843" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:04:31</span>         dev-hartmann </span><span>input is entity map like above and a tag {:tag-key &quot;something&quot; :tag-value &quot;optional&quot;}</span></div><div id="t1474283277000844" t="2016-09-19 11:07:57 nathanmarz I don&apos;t know what you mean, so I need a specific minimal example of input/output in order to help you"><a href="#t1474283277000844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:07:57</span>           nathanmarz </span><span>I don&apos;t know what you mean, so I need a specific minimal example of input/output in order to help you</span></div><div id="t1474283694000845" t="2016-09-19 11:14:54 dev-hartmann (transform [(filterer #( = (:entity-val entity) (:entity-id %))) ALL] #(conj (:tags %) tag) db)]"><a href="#t1474283694000845" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:14:54</span>         dev-hartmann </span><span>(transform [(filterer #( = (:entity-val entity) (:entity-id %))) ALL] #(conj (:tags %) tag) db)]</span></div><div id="t1474283710000846" t="2016-09-19 11:15:10 dev-hartmann that&apos;s what i am trying at the moment, with the data from above"><a href="#t1474283710000846" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:15:10</span>         dev-hartmann </span><span>that&apos;s what i am trying at the moment, with the data from above</span></div><div id="t1474284064000847" t="2016-09-19 11:21:04 dev-hartmann as a result i get the unchanged map"><a href="#t1474284064000847" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:21:04</span>         dev-hartmann </span><span>as a result i get the unchanged map</span></div><div id="t1474284238000848" t="2016-09-19 11:23:58 nathanmarz @dev-hartmann a specific minimal example is something like  [1 2 3]  =&gt;  [2 3 4]"><a href="#t1474284238000848" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:23:58</span>           nathanmarz </span><span>@dev-hartmann a specific minimal example is something like </span><code>[1 2 3]</code><span> =&gt; </span><code>[2 3 4]</code></div><div id="t1474284300000849" t="2016-09-19 11:25:00 dev-hartmann ah ok, sry, did not understand -.-"><a href="#t1474284300000849" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:25:00</span>         dev-hartmann </span><span>ah ok, sry, did not understand -.-</span></div><div id="t1474284731000850" t="2016-09-19 11:32:11 dev-hartmann {:entity-id :item-id :entity-val 1}    {:tag-key &quot;test2&quot; :tag-value &quot;2&quot;}   {:items {:item-id 1 :sub-items ({:tag-key :tag &quot;value&quot;} {:tag-key &quot;tag2&quot; &quot;value2&quot;} {:tag-key &quot;tag3&quot; &quot;value1&quot;})}
        {:item-id 2 :sub-items ({:tag-key &quot;tag1&quot; &quot;value&quot;})}}   -&gt;  {:items {:item-id 1 :sub-items ({:tag-key :tag &quot;value&quot;} {:tag-key :tag2 &quot;value2&quot;} {:tag-key :tag3 &quot;value1&quot;})}
        {:item-id 2 :sub-items ({:tag-key &quot;tag-test&quot; &quot;value&quot;} {:tag-key &quot;test2&quot; :tag-value &quot;2&quot;})}} "><a href="#t1474284731000850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:32:11</span>         dev-hartmann </span><pre>{:entity-id :item-id :entity-val 1} </pre><span> </span><pre>{:tag-key &quot;test2&quot; :tag-value &quot;2&quot;}</pre><span> </span><pre>{:items {:item-id 1 :sub-items ({:tag-key :tag &quot;value&quot;} {:tag-key &quot;tag2&quot; &quot;value2&quot;} {:tag-key &quot;tag3&quot; &quot;value1&quot;})}
        {:item-id 2 :sub-items ({:tag-key &quot;tag1&quot; &quot;value&quot;})}} </pre><span> -&gt; </span><pre>{:items {:item-id 1 :sub-items ({:tag-key :tag &quot;value&quot;} {:tag-key :tag2 &quot;value2&quot;} {:tag-key :tag3 &quot;value1&quot;})}
        {:item-id 2 :sub-items ({:tag-key &quot;tag-test&quot; &quot;value&quot;} {:tag-key &quot;test2&quot; :tag-value &quot;2&quot;})}} </pre></div><div id="t1474284739000851" t="2016-09-19 11:32:19 dev-hartmann like that?"><a href="#t1474284739000851" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:32:19</span>         dev-hartmann </span><span>like that?</span></div><div id="t1474284838000853" t="2016-09-19 11:33:58 nathanmarz yes"><a href="#t1474284838000853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:33:58</span>           nathanmarz </span><span>yes</span></div><div id="t1474284850000854" t="2016-09-19 11:34:10 nathanmarz do you mean for value of :items to be in a list of some sort?"><a href="#t1474284850000854" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:34:10</span>           nathanmarz </span><span>do you mean for value of :items to be in a list of some sort?</span></div><div id="t1474284878000855" t="2016-09-19 11:34:38 dev-hartmann oh yes, sry"><a href="#t1474284878000855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:34:38</span>         dev-hartmann </span><span>oh yes, sry</span></div><div id="t1474284884000856" t="2016-09-19 11:34:44 dev-hartmann it&apos;s a list"><a href="#t1474284884000856" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:34:44</span>         dev-hartmann </span><span>it&apos;s a list</span></div><div id="t1474284906000857" t="2016-09-19 11:35:06 nathanmarz and here you have the append going to subitems of item id 2, but your input says entity-val 1"><a href="#t1474284906000857" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:35:06</span>           nathanmarz </span><span>and here you have the append going to subitems of item id 2, but your input says entity-val 1</span></div><div id="t1474284945000858" t="2016-09-19 11:35:45 dev-hartmann my brain is full on monday, sry again, entity-val should be 2"><a href="#t1474284945000858" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:35:45</span>         dev-hartmann </span><span>my brain is full on monday, sry again, entity-val should be 2</span></div><div id="t1474285054000859" t="2016-09-19 11:37:34 nathanmarz one way to do it:  (setval [:items ALL #(= (get % (:entity-id entity)) (:entity-val entity)) :sub-items END] [tag] db)"><a href="#t1474285054000859" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:37:34</span>           nathanmarz </span><span>one way to do it: </span><code>(setval [:items ALL #(= (get % (:entity-id entity)) (:entity-val entity)) :sub-items END] [tag] db)</code></div><div id="t1474285179000860" t="2016-09-19 11:39:39 dev-hartmann thank you very much, seeing your answer explains how i got the way the path is created all wrong. thanks again"><a href="#t1474285179000860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:39:39</span>         dev-hartmann </span><span>thank you very much, seeing your answer explains how i got the way the path is created all wrong. thanks again</span></div><div id="t1474285231000861" t="2016-09-19 11:40:31 nathanmarz I would also suggest using vectors instead of lists for sub-items, as appending to a vector is much more efficient"><a href="#t1474285231000861" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:40:31</span>           nathanmarz </span><span>I would also suggest using vectors instead of lists for sub-items, as appending to a vector is much more efficient</span></div><div id="t1474285647000862" t="2016-09-19 11:47:27 dev-hartmann that makes sense, thanks for the advice"><a href="#t1474285647000862" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">11:47:27</span>         dev-hartmann </span><span>that makes sense, thanks for the advice</span></div><div id="t1474301180000869" t="2016-09-19 16:06:20 aaelony thanks, @nathanmarz"><a href="#t1474301180000869" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-19</span> <span class="t" onclick="H(this)">16:06:20</span>              aaelony </span><span>thanks, @nathanmarz</span></div><div id="t1474405444000922" t="2016-09-20 21:04:04 puzzler Which is more idiomatic to conj something into a set inside some other stuff :  (setval [path1 path2 (subset #{})] #{:a} data)   or  (transform [path1 path2] #(conj % :a) data) ?"><a href="#t1474405444000922" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:04:04</span>              puzzler </span><span>Which is more idiomatic to conj something into a set inside some other stuff : </span><code>(setval [path1 path2 (subset #{})] #{:a} data)</code><span>  or </span><code>(transform [path1 path2] #(conj % :a) data)</code><span>?</span></div><div id="t1474405476000923" t="2016-09-20 21:04:36 puzzler And is there a meaningful perf difference between the two?"><a href="#t1474405476000923" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:04:36</span>              puzzler </span><span>And is there a meaningful perf difference between the two?</span></div><div id="t1474405823000924" t="2016-09-20 21:10:23 nathanmarz @puzzler the latter will be faster but the former works better with nil"><a href="#t1474405823000924" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:10:23</span>           nathanmarz </span><span>@puzzler the latter will be faster but the former works better with nil</span></div><div id="t1474405912000925" t="2016-09-20 21:11:52 nathanmarz I&apos;ve considered making navigators that go to &quot;void&quot; elements of specific type, like VOID-SET-ELEM"><a href="#t1474405912000925" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:11:52</span>           nathanmarz </span><span>I&apos;ve considered making navigators that go to &quot;void&quot; elements of specific type, like VOID-SET-ELEM</span></div><div id="t1474405931000926" t="2016-09-20 21:12:11 nathanmarz if the transform results in  NONE , it wouldn&apos;t conj, otherwise it would conj"><a href="#t1474405931000926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:12:11</span>           nathanmarz </span><span>if the transform results in </span><code>NONE</code><span>, it wouldn&apos;t conj, otherwise it would conj</span></div><div id="t1474405983000927" t="2016-09-20 21:13:03 nathanmarz https://github.com/nathanmarz/specter/issues/131"><a href="#t1474405983000927" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-20</span> <span class="t" onclick="H(this)">21:13:03</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/131" target="_blank">https://github.com/nathanmarz/specter/issues/131</a></div><div id="t1474422153000935" t="2016-09-21 01:42:33 puzzler @nathanmarz I can see the value, but as far as I can tell this wouldn&apos;t help with the precisely symmetric scenario of wanting to disj a single item from a set nested in a data structure ."><a href="#t1474422153000935" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">01:42:33</span>              puzzler </span><span>@nathanmarz I can see the value, but as far as I can tell this wouldn&apos;t help with the precisely symmetric scenario of wanting to disj a single item from a set nested in a data structure .</span></div><div id="t1474422253000936" t="2016-09-21 01:44:13 puzzler @nathanmarz In general, I&apos;ve been thinking about how assoc-in and setval automatically add levels to your data structure if needed, but I am not aware of a convenient way to make the path down to a leaf go away when the leaf becomes empty."><a href="#t1474422253000936" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">01:44:13</span>              puzzler </span><span>@nathanmarz In general, I&apos;ve been thinking about how assoc-in and setval automatically add levels to your data structure if needed, but I am not aware of a convenient way to make the path down to a leaf go away when the leaf becomes empty.</span></div><div id="t1474425584000941" t="2016-09-21 02:39:44 puzzler I&apos;m having trouble building up a good mental model of how the complex navigators work.  For example, I don&apos;t understand why these two navigators behave so differently with setval:"><a href="#t1474425584000941" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:39:44</span>              puzzler </span><span>I&apos;m having trouble building up a good mental model of how the complex navigators work.  For example, I don&apos;t understand why these two navigators behave so differently with setval:</span></div><div id="t1474425647000943" t="2016-09-21 02:40:47 puzzler Sorry, that wasn&apos;t quite the right example"><a href="#t1474425647000943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:40:47</span>              puzzler </span><span>Sorry, that wasn&apos;t quite the right example</span></div><div id="t1474425655000945" t="2016-09-21 02:40:55 puzzler =&gt; (setval [(filterer number?)] [:a :b :c] [:x 2 :y 4 :z 6])
[:x :a :y :b :z :c]
=&gt; (setval [(walker number?)] [:a :b :c] [:x 2 :y 4 :z 6])
[:x [:a :b :c] :y [:a :b :c] :z [:a :b :c]]"><a href="#t1474425655000945" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:40:55</span>              puzzler </span><pre>=&gt; (setval [(filterer number?)] [:a :b :c] [:x 2 :y 4 :z 6])
[:x :a :y :b :z :c]
=&gt; (setval [(walker number?)] [:a :b :c] [:x 2 :y 4 :z 6])
[:x [:a :b :c] :y [:a :b :c] :z [:a :b :c]]</pre></div><div id="t1474425660000946" t="2016-09-21 02:41:00 puzzler There we go."><a href="#t1474425660000946" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:41:00</span>              puzzler </span><span>There we go.</span></div><div id="t1474425686000949" t="2016-09-21 02:41:26 nathanmarz @puzzler I think things like removing from a sequence or a map are fairly easy with variants on  ALL  or  keypath   https://github.com/nathanmarz/specter/issues/117"><a href="#t1474425686000949" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:41:26</span>           nathanmarz </span><span>@puzzler I think things like removing from a sequence or a map are fairly easy with variants on </span><code>ALL</code><span> or </span><code>keypath</code><span> </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a></div><div id="t1474425718000951" t="2016-09-21 02:41:58 nathanmarz the trickier case is removing an entire path, such as specifying to remove a nested map when it becomes empty"><a href="#t1474425718000951" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:41:58</span>           nathanmarz </span><span>the trickier case is removing an entire path, such as specifying to remove a nested map when it becomes empty</span></div><div id="t1474425750000952" t="2016-09-21 02:42:30 nathanmarz I&apos;ve done things like making navigators such as  non-empty-keypath , but I&apos;m not sure having so many variants is the right approach"><a href="#t1474425750000952" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:42:30</span>           nathanmarz </span><span>I&apos;ve done things like making navigators such as </span><code>non-empty-keypath</code><span>, but I&apos;m not sure having so many variants is the right approach</span></div><div id="t1474425783000953" t="2016-09-21 02:43:03 nathanmarz filterer  navigates to a single value, while  walker  navigates to many values"><a href="#t1474425783000953" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:43:03</span>           nathanmarz </span><code>filterer</code><span> navigates to a single value, while </span><code>walker</code><span> navigates to many values</span></div><div id="t1474425820000954" t="2016-09-21 02:43:40 nathanmarz think of  filterer  as working just like  filter , sequence -&gt; single sequence, except it also propagates changes back"><a href="#t1474425820000954" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:43:40</span>           nathanmarz </span><span>think of </span><code>filterer</code><span> as working just like </span><code>filter</code><span>, sequence -&gt; single sequence, except it also propagates changes back</span></div><div id="t1474425833000955" t="2016-09-21 02:43:53 nathanmarz whereas  walker  is like  ALL"><a href="#t1474425833000955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:43:53</span>           nathanmarz </span><span>whereas </span><code>walker</code><span> is like </span><code>ALL</code></div><div id="t1474425891000956" t="2016-09-21 02:44:51 puzzler Is there a way to predict this single value vs. multi value behavior from the info on the doc page?"><a href="#t1474425891000956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:44:51</span>              puzzler </span><span>Is there a way to predict this single value vs. multi value behavior from the info on the doc page?</span></div><div id="t1474425918000957" t="2016-09-21 02:45:18 nathanmarz (setval (subselect (walker number?)) [:a :b :c] [:x 2 :y 4 :z 6]) 
;; =&gt;  [:x :a :y :b :z :c]"><a href="#t1474425918000957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:45:18</span>           nathanmarz </span><code>(setval (subselect (walker number?)) [:a :b :c] [:x 2 :y 4 :z 6])</code><span>
;; =&gt; </span><code>[:x :a :y :b :z :c]</code></div><div id="t1474425931000958" t="2016-09-21 02:45:31 puzzler Similarly, I was confused the first time I encountered that setval on END expected a sequence, not a single value."><a href="#t1474425931000958" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:45:31</span>              puzzler </span><span>Similarly, I was confused the first time I encountered that setval on END expected a sequence, not a single value.</span></div><div id="t1474425935000959" t="2016-09-21 02:45:35 nathanmarz filterer  uses  subselect  and  ALL"><a href="#t1474425935000959" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:45:35</span>           nathanmarz </span><code>filterer</code><span> uses </span><code>subselect</code><span> and </span><code>ALL</code></div><div id="t1474426013000960" t="2016-09-21 02:46:53 nathanmarz the doc for  filterer  could be clearer, but I think the doc for  END  is pretty clear"><a href="#t1474426013000960" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:46:53</span>           nathanmarz </span><span>the doc for </span><code>filterer</code><span> could be clearer, but I think the doc for </span><code>END</code><span> is pretty clear</span></div><div id="t1474426028000961" t="2016-09-21 02:47:08 nathanmarz &quot;Navigate to the empty subsequence after the last element of the collection.&quot;"><a href="#t1474426028000961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:47:08</span>           nathanmarz </span><span>&quot;Navigate to the empty subsequence after the last element of the collection.&quot;</span></div><div id="t1474426113000962" t="2016-09-21 02:48:33 puzzler Yes, END was clear once I looked it up.  Just didn&apos;t match my intuition, I guess.  If these things are just something you have to learn over time, I guess that&apos;s the nature of complex libs, but I&apos;m trying to figure out if there&apos;s some big-picture way of thinking about it that makes it clear without looking these details up.  Sort of like how, in Clojure, once you realize that &quot;sequence functions&quot; put the sequence as the last input, and &quot;collection functions&quot; put the collection as the first input, it&apos;s a lot easier to remember."><a href="#t1474426113000962" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:48:33</span>              puzzler </span><span>Yes, END was clear once I looked it up.  Just didn&apos;t match my intuition, I guess.  If these things are just something you have to learn over time, I guess that&apos;s the nature of complex libs, but I&apos;m trying to figure out if there&apos;s some big-picture way of thinking about it that makes it clear without looking these details up.  Sort of like how, in Clojure, once you realize that &quot;sequence functions&quot; put the sequence as the last input, and &quot;collection functions&quot; put the collection as the first input, it&apos;s a lot easier to remember.</span></div><div id="t1474426244000963" t="2016-09-21 02:50:44 nathanmarz the only way to do that would be with a naming convention, but that could get unwieldy"><a href="#t1474426244000963" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:50:44</span>           nathanmarz </span><span>the only way to do that would be with a naming convention, but that could get unwieldy</span></div><div id="t1474426299000964" t="2016-09-21 02:51:39 nathanmarz like you might want to include in the name whether it navigates to many values or a single value, to a substructure, subvalue, or view, etc"><a href="#t1474426299000964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:51:39</span>           nathanmarz </span><span>like you might want to include in the name whether it navigates to many values or a single value, to a substructure, subvalue, or view, etc</span></div><div id="t1474426504000965" t="2016-09-21 02:55:04 puzzler So that list you just typed is very interesting to me, because I realize I don&apos;t have a clear mental model of what kinds of things you can navigate to, when you talk about substructure, subvalue, view, etc. and what the different behavior of setval, transform, and select would be under those scenarios."><a href="#t1474426504000965" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:55:04</span>              puzzler </span><span>So that list you just typed is very interesting to me, because I realize I don&apos;t have a clear mental model of what kinds of things you can navigate to, when you talk about substructure, subvalue, view, etc. and what the different behavior of setval, transform, and select would be under those scenarios.</span></div><div id="t1474426553000966" t="2016-09-21 02:55:53 nathanmarz substructure is something like srange or subset, where it&apos;s the same structure as the parent but with a subset of the values"><a href="#t1474426553000966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:55:53</span>           nathanmarz </span><span>substructure is something like srange or subset, where it&apos;s the same structure as the parent but with a subset of the values</span></div><div id="t1474426560000967" t="2016-09-21 02:56:00 nathanmarz transforms on substructures transform the parent"><a href="#t1474426560000967" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:56:00</span>           nathanmarz </span><span>transforms on substructures transform the parent</span></div><div id="t1474426583000968" t="2016-09-21 02:56:23 nathanmarz subvalues are the common case where you literally navigate to that value inside the structure"><a href="#t1474426583000968" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:56:23</span>           nathanmarz </span><span>subvalues are the common case where you literally navigate to that value inside the structure</span></div><div id="t1474426617000969" t="2016-09-21 02:56:57 nathanmarz and views navigate you to something with no structural relation to the input"><a href="#t1474426617000969" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:56:57</span>           nathanmarz </span><span>and views navigate you to something with no structural relation to the input</span></div><div id="t1474426650000970" t="2016-09-21 02:57:30 nathanmarz something like  view  totally replaces it&apos;s input"><a href="#t1474426650000970" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:57:30</span>           nathanmarz </span><span>something like </span><code>view</code><span> totally replaces it&apos;s input</span></div><div id="t1474426652000971" t="2016-09-21 02:57:32 nathanmarz on transform"><a href="#t1474426652000971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:57:32</span>           nathanmarz </span><span>on transform</span></div><div id="t1474426719000972" t="2016-09-21 02:58:39 nathanmarz I don&apos;t think these are hard boundaries between navigators,  subselect  is like a combination of substructure and view"><a href="#t1474426719000972" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:58:39</span>           nathanmarz </span><span>I don&apos;t think these are hard boundaries between navigators, </span><code>subselect</code><span> is like a combination of substructure and view</span></div><div id="t1474426776000973" t="2016-09-21 02:59:36 puzzler Interesting.  That&apos;s helpful to know. Thanks."><a href="#t1474426776000973" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">02:59:36</span>              puzzler </span><span>Interesting.  That&apos;s helpful to know. Thanks.</span></div><div id="t1474426863000974" t="2016-09-21 03:01:03 nathanmarz learning to think in terms of substructure is probably one of the major milestones in using specter to its potential"><a href="#t1474426863000974" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:01:03</span>           nathanmarz </span><span>learning to think in terms of substructure is probably one of the major milestones in using specter to its potential</span></div><div id="t1474427220000975" t="2016-09-21 03:07:00 puzzler So the other topic I mentioned is something I encounter a fair amount in my programming.  Let&apos;s say I want to keep a map that bins words by first letter.  So I start out with  {} .  Now, I add the word apple  {\a #{&quot;apple&quot;}}  and then banana and ape  {\a #{&quot;apple&quot; &quot;ape&quot;} \b #{&quot;banana&quot;}} .  Now I remove apple.   {\a #{&quot;ape&quot;} \b #{&quot;banana&quot;}}  Now I remove ape and I want it to go to  {\b #{&quot;banana&quot;}} .  A similar scenario is a map of numeric counters.  If a counter doesn&apos;t yet exist in the map, I create it at 0 and increment it to 1 on demand.  When it decrements back to 0, I&apos;d like the counter to disappear from the map."><a href="#t1474427220000975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:07:00</span>              puzzler </span><span>So the other topic I mentioned is something I encounter a fair amount in my programming.  Let&apos;s say I want to keep a map that bins words by first letter.  So I start out with </span><code>{}</code><span>.  Now, I add the word apple </span><code>{\a #{&quot;apple&quot;}}</code><span> and then banana and ape </span><code>{\a #{&quot;apple&quot; &quot;ape&quot;} \b #{&quot;banana&quot;}}</code><span>.  Now I remove apple.  </span><code>{\a #{&quot;ape&quot;} \b #{&quot;banana&quot;}}</code><span> Now I remove ape and I want it to go to </span><code>{\b #{&quot;banana&quot;}}</code><span>.  A similar scenario is a map of numeric counters.  If a counter doesn&apos;t yet exist in the map, I create it at 0 and increment it to 1 on demand.  When it decrements back to 0, I&apos;d like the counter to disappear from the map.</span></div><div id="t1474427656000976" t="2016-09-21 03:14:16 nathanmarz I&apos;ve thought about that a bit, and I think ideally this kind of information would be encoded and handled within the data structure implementation"><a href="#t1474427656000976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:14:16</span>           nathanmarz </span><span>I&apos;ve thought about that a bit, and I think ideally this kind of information would be encoded and handled within the data structure implementation</span></div><div id="t1474427706000977" t="2016-09-21 03:15:06 nathanmarz you could do it with navigators like this:  (setval [(non-nil-keypath \a) (nil&lt;-&gt;val #{}) (subset #{&quot;apple&quot;})] #{} data) , but I think it would work better at the data structure impl level"><a href="#t1474427706000977" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:15:06</span>           nathanmarz </span><span>you could do it with navigators like this: </span><code>(setval [(non-nil-keypath \a) (nil&lt;-&gt;val #{}) (subset #{&quot;apple&quot;})] #{} data)</code><span>, but I think it would work better at the data structure impl level</span></div><div id="t1474427731000978" t="2016-09-21 03:15:31 nathanmarz so for example a map would understand what &quot;empty&quot; values look like, and would automatically remove them if they become empty"><a href="#t1474427731000978" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:15:31</span>           nathanmarz </span><span>so for example a map would understand what &quot;empty&quot; values look like, and would automatically remove them if they become empty</span></div><div id="t1474427751000979" t="2016-09-21 03:15:51 nathanmarz and it would know how to initialize a non-existent key to the empty value"><a href="#t1474427751000979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:15:51</span>           nathanmarz </span><span>and it would know how to initialize a non-existent key to the empty value</span></div><div id="t1474427811000980" t="2016-09-21 03:16:51 nathanmarz then you could do with specter:  (setval [(keypath \a) (subset #{&quot;apple&quot;})] #{} data)  and everything would work in a nice and elegant manner"><a href="#t1474427811000980" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:16:51</span>           nathanmarz </span><span>then you could do with specter: </span><code>(setval [(keypath \a) (subset #{&quot;apple&quot;})] #{} data)</code><span> and everything would work in a nice and elegant manner</span></div><div id="t1474427828000981" t="2016-09-21 03:17:08 nathanmarz and it composes nicely to arbitrarily complex data structure combinations"><a href="#t1474427828000981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:17:08</span>           nathanmarz </span><span>and it composes nicely to arbitrarily complex data structure combinations</span></div><div id="t1474427987000982" t="2016-09-21 03:19:47 nathanmarz constructing a data structure like that would be something like  (def my-map ((hash-map (hash-map (hash-set empty-nil))))"><a href="#t1474427987000982" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">03:19:47</span>           nathanmarz </span><span>constructing a data structure like that would be something like </span><code>(def my-map ((hash-map (hash-map (hash-set empty-nil))))</code></div><div id="t1474435427000988" t="2016-09-21 05:23:47 puzzler Are non-nil-keypath and nil&lt;-&gt;val new?  I don&apos;t see them in latest stable or in the github repo."><a href="#t1474435427000988" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">05:23:47</span>              puzzler </span><span>Are non-nil-keypath and nil&lt;-&gt;val new?  I don&apos;t see them in latest stable or in the github repo.</span></div><div id="t1474435681000989" t="2016-09-21 05:28:01 puzzler A bit of a testimonial:  Prior to now, I&apos;ve been aware of specter, but figured I&apos;d reach for it only if I really needed it -- get-in and update-in are usually sufficient for me.  Today, I decided to use specter for the &quot;trivial&quot; things I could do with get-in and update-in; once I had it at my disposal, within a few hours I started seeing several non-trivial uses for it as well which made my implementation a lot cleaner."><a href="#t1474435681000989" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">05:28:01</span>              puzzler </span><span>A bit of a testimonial:  Prior to now, I&apos;ve been aware of specter, but figured I&apos;d reach for it only if I really needed it -- get-in and update-in are usually sufficient for me.  Today, I decided to use specter for the &quot;trivial&quot; things I could do with get-in and update-in; once I had it at my disposal, within a few hours I started seeing several non-trivial uses for it as well which made my implementation a lot cleaner.</span></div><div id="t1474435988000990" t="2016-09-21 05:33:08 puzzler Was everything in specter motivated by actual use-cases?  There are several things I can&apos;t figure out what the utility would be, and I&apos;m wondering whether some of the things are there just because they were an experiment to see if something was doable, or whether each one actually solves some particular problem that comes up in practice."><a href="#t1474435988000990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">05:33:08</span>              puzzler </span><span>Was everything in specter motivated by actual use-cases?  There are several things I can&apos;t figure out what the utility would be, and I&apos;m wondering whether some of the things are there just because they were an experiment to see if something was doable, or whether each one actually solves some particular problem that comes up in practice.</span></div><div id="t1474456048001001" t="2016-09-21 11:07:28 nathanmarz @puzzler no those are hypothetical navigators... non-nil-keypath would remove the value if it becomes nil and nil&lt;-&gt;val would navigate to  val  if it&apos;s nil and transform to  nil  if it&apos;s  val . They would be trivial to implement"><a href="#t1474456048001001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">11:07:28</span>           nathanmarz </span><span>@puzzler no those are hypothetical navigators... non-nil-keypath would remove the value if it becomes nil and nil&lt;-&gt;val would navigate to </span><code>val</code><span> if it&apos;s nil and transform to </span><code>nil</code><span> if it&apos;s </span><code>val</code><span>. They would be trivial to implement</span></div><div id="t1474456091001002" t="2016-09-21 11:08:11 nathanmarz @puzzler yes, I use most of what comes with Specter, plus I have a whole lot of private navigators for dealing with DAGs"><a href="#t1474456091001002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">11:08:11</span>           nathanmarz </span><span>@puzzler yes, I use most of what comes with Specter, plus I have a whole lot of private navigators for dealing with DAGs</span></div><div id="t1474456207001003" t="2016-09-21 11:10:07 nathanmarz I think the only ones I don&apos;t use are  ATOM  and the zipper navigators"><a href="#t1474456207001003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">11:10:07</span>           nathanmarz </span><span>I think the only ones I don&apos;t use are </span><code>ATOM</code><span> and the zipper navigators</span></div><div id="t1474456265001004" t="2016-09-21 11:11:05 nathanmarz for which ones do you have trouble seeing the utility?"><a href="#t1474456265001004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">11:11:05</span>           nathanmarz </span><span>for which ones do you have trouble seeing the utility?</span></div><div id="t1474490862001022" t="2016-09-21 20:47:42 jvuillermet Is this how I&apos;m supposed to require specter macros ?"><a href="#t1474490862001022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">20:47:42</span>          jvuillermet </span><span>Is this how I&apos;m supposed to require specter macros ?</span></div><div id="t1474490866001023" t="2016-09-21 20:47:46 jvuillermet (:require-macros [com.rpl.specter.macros :refer [transform]]"><a href="#t1474490866001023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">20:47:46</span>          jvuillermet </span><span>(:require-macros [com.rpl.specter.macros :refer [transform]]</span></div><div id="t1474490870001024" t="2016-09-21 20:47:50 jvuillermet from clojurescript"><a href="#t1474490870001024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">20:47:50</span>          jvuillermet </span><span>from clojurescript</span></div><div id="t1474491058001025" t="2016-09-21 20:50:58 jvuillermet Ok just saw the changelog, no more macros namespace"><a href="#t1474491058001025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">20:50:58</span>          jvuillermet </span><span>Ok just saw the changelog, no more macros namespace</span></div><div id="t1474500896001029" t="2016-09-21 23:34:56 puzzler Haven&apos;t imagined a use yet for anything relating to value collection (DISPENSE, collect, collect-one, terminal, terminal-val).  Also don&apos;t see the point of the &quot;view functions&quot;, i.e., transformed and view.  I&apos;m also not sure whether STAY and STOP have any direct utility, or if they are only useful in building other navigators.  If you&apos;re using all these things, then there must be a whole level to specter that I haven&apos;t grokked yet, because I couldn&apos;t extrapolate from the toy examples on the wiki page to a real-world use case."><a href="#t1474500896001029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span> <span class="t" onclick="H(this)">23:34:56</span>              puzzler </span><span>Haven&apos;t imagined a use yet for anything relating to value collection (DISPENSE, collect, collect-one, terminal, terminal-val).  Also don&apos;t see the point of the &quot;view functions&quot;, i.e., transformed and view.  I&apos;m also not sure whether STAY and STOP have any direct utility, or if they are only useful in building other navigators.  If you&apos;re using all these things, then there must be a whole level to specter that I haven&apos;t grokked yet, because I couldn&apos;t extrapolate from the toy examples on the wiki page to a real-world use case.</span></div><div id="t1474502549001033" t="2016-09-22 00:02:29 nathanmarz @puzzler  STAY  is common with recursive navigators, the README has one for navigating a tree represented by nested vectors. Also  continue-then-stay  and  stay-then-continue  use it  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1061"><a href="#t1474502549001033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:02:29</span>           nathanmarz </span><span>@puzzler </span><code>STAY</code><span> is common with recursive navigators, the README has one for navigating a tree represented by nested vectors. Also </span><code>continue-then-stay</code><span> and </span><code>stay-then-continue</code><span> use it </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1061" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1061</a></div><div id="t1474502712001035" t="2016-09-22 00:05:12 nathanmarz as for value collection, it&apos;s something I use constantly, especially for more sophisticated transformations"><a href="#t1474502712001035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:05:12</span>           nathanmarz </span><span>as for value collection, it&apos;s something I use constantly, especially for more sophisticated transformations</span></div><div id="t1474502774001036" t="2016-09-22 00:06:14 nathanmarz this is pretty representative of the kinds of things I use it for:  https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L489"><a href="#t1474502774001036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:06:14</span>           nathanmarz </span><span>this is pretty representative of the kinds of things I use it for: </span><a href="https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L489" target="_blank">https://github.com/nathanmarz/specter-clojure-west/blob/master/src/specter_demo/examples.clj#L489</a></div><div id="t1474502818001038" t="2016-09-22 00:06:58 nathanmarz those graph navigators aren&apos;t public, but that takes an ancestry graph and adds a field to each node for the &quot;royal name&quot; which is &quot;{name} of {parent1}, {parent2}...&quot;"><a href="#t1474502818001038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:06:58</span>           nathanmarz </span><span>those graph navigators aren&apos;t public, but that takes an ancestry graph and adds a field to each node for the &quot;royal name&quot; which is &quot;{name} of {parent1}, {parent2}...&quot;</span></div><div id="t1474502855001039" t="2016-09-22 00:07:35 nathanmarz it navigates to each :royal-name field to create and along the way collects what it needs to compute that value – the parent names and the name for this node"><a href="#t1474502855001039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:07:35</span>           nathanmarz </span><span>it navigates to each :royal-name field to create and along the way collects what it needs to compute that value – the parent names and the name for this node</span></div><div id="t1474503056001040" t="2016-09-22 00:10:56 nathanmarz the only places I use  STOP  are in conjunction with protocol paths, essentially saying there&apos;s nothing to navigate to for that type"><a href="#t1474503056001040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">00:10:56</span>           nathanmarz </span><span>the only places I use </span><code>STOP</code><span> are in conjunction with protocol paths, essentially saying there&apos;s nothing to navigate to for that type</span></div><div id="t1474588073001080" t="2016-09-22 23:47:53 puzzler Is there a way to splice things into lists with specter?  For example, I want to find all the [:c :d] pairs and splice them like so:  [:a :b [:c :d] :e [:c :d]]  should yield  [:a :b :c :d :e :c :d] ."><a href="#t1474588073001080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">23:47:53</span>              puzzler </span><span>Is there a way to splice things into lists with specter?  For example, I want to find all the [:c :d] pairs and splice them like so: </span><code>[:a :b [:c :d] :e [:c :d]]</code><span> should yield </span><code>[:a :b :c :d :e :c :d]</code><span>.</span></div><div id="t1474588558001082" t="2016-09-22 23:55:58 puzzler NM. I figured out a way to do it using continuous-subseqs."><a href="#t1474588558001082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-22</span> <span class="t" onclick="H(this)">23:55:58</span>              puzzler </span><span>NM. I figured out a way to do it using continuous-subseqs.</span></div><div id="t1474688625001123" t="2016-09-24 03:43:45 caio @puzzler  (select (pred (complement seq?)) m) ? "><a href="#t1474688625001123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">03:43:45</span>                 caio </span><span>@puzzler </span><code>(select (pred (complement seq?)) m)</code><span>? </span></div><div id="t1474690056001126" t="2016-09-24 04:07:36 puzzler `=&gt; (select (pred (complement seq?)) [:a :b [:c :d] :e [:c :d]])
[[:a :b [:c :d] :e [:c :d]]]`"><a href="#t1474690056001126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">04:07:36</span>              puzzler </span><span>`=&gt; (select (pred (complement seq?)) [:a :b [:c :d] :e [:c :d]])
[[:a :b [:c :d] :e [:c :d]]]`</span></div><div id="t1474690225001127" t="2016-09-24 04:10:25 puzzler I did something like this:"><a href="#t1474690225001127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">04:10:25</span>              puzzler </span><span>I did something like this:</span></div><div id="t1474690230001128" t="2016-09-24 04:10:30 puzzler =&gt; (transform [(continuous-subseqs vector?)] #(first %) [:a :b [:c :d] :e [:c :d]])
[:a :b :c :d :e :c :d]"><a href="#t1474690230001128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">04:10:30</span>              puzzler </span><pre>=&gt; (transform [(continuous-subseqs vector?)] #(first %) [:a :b [:c :d] :e [:c :d]])
[:a :b :c :d :e :c :d]</pre></div><div id="t1474690256001129" t="2016-09-24 04:10:56 puzzler It feels a little hacky to me, but I don&apos;t see another way to do it."><a href="#t1474690256001129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">04:10:56</span>              puzzler </span><span>It feels a little hacky to me, but I don&apos;t see another way to do it.</span></div><div id="t1474694864001130" t="2016-09-24 05:27:44 puzzler Actually, that won&apos;t work if they are adjacent."><a href="#t1474694864001130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:27:44</span>              puzzler </span><span>Actually, that won&apos;t work if they are adjacent.</span></div><div id="t1474694872001131" t="2016-09-24 05:27:52 puzzler Hmmmm."><a href="#t1474694872001131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:27:52</span>              puzzler </span><span>Hmmmm.</span></div><div id="t1474694982001132" t="2016-09-24 05:29:42 puzzler Any other ideas?"><a href="#t1474694982001132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:29:42</span>              puzzler </span><span>Any other ideas?</span></div><div id="t1474695007001133" t="2016-09-24 05:30:07 puzzler =&gt; (transform [(continuous-subseqs vector?)] #(first %) [:a :b [:c :d] [:c :d]])
[:a :b :c :d]"><a href="#t1474695007001133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:30:07</span>              puzzler </span><pre>=&gt; (transform [(continuous-subseqs vector?)] #(first %) [:a :b [:c :d] [:c :d]])
[:a :b :c :d]</pre></div><div id="t1474695036001134" t="2016-09-24 05:30:36 puzzler @caio I don&apos;t see how yours would work, but mine doesn&apos;t work either."><a href="#t1474695036001134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:30:36</span>              puzzler </span><span>@caio I don&apos;t see how yours would work, but mine doesn&apos;t work either.</span></div><div id="t1474695128001135" t="2016-09-24 05:32:08 puzzler This works:"><a href="#t1474695128001135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:32:08</span>              puzzler </span><span>This works:</span></div><div id="t1474695138001137" t="2016-09-24 05:32:18 puzzler =&gt; (transform [(continuous-subseqs vector?)] #(apply concat %) [:a :b [:c :d] [:c :d]])
[:a :b :c :d :c :d]"><a href="#t1474695138001137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:32:18</span>              puzzler </span><pre>=&gt; (transform [(continuous-subseqs vector?)] #(apply concat %) [:a :b [:c :d] [:c :d]])
[:a :b :c :d :c :d]</pre></div><div id="t1474695867001139" t="2016-09-24 05:44:27 puzzler It&apos;s still hacky"><a href="#t1474695867001139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">05:44:27</span>              puzzler </span><span>It&apos;s still hacky</span></div><div id="t1474718844001150" t="2016-09-24 12:07:24 nathanmarz @puzzler you could make a new navigator which navigates to each element as a 1 element subsequence"><a href="#t1474718844001150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">12:07:24</span>           nathanmarz </span><span>@puzzler you could make a new navigator which navigates to each element as a 1 element subsequence</span></div><div id="t1474718907001151" t="2016-09-24 12:08:27 nathanmarz or a new version of  ALL  which does splicing if the transformed element has metadata indicating to do so"><a href="#t1474718907001151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">12:08:27</span>           nathanmarz </span><span>or a new version of </span><code>ALL</code><span> which does splicing if the transformed element has metadata indicating to do so</span></div><div id="t1474719010001152" t="2016-09-24 12:10:10 nathanmarz e.g.  (transform [MY-ALL vector?] (fn [v] (with-meta v {:all-splice true})) data)"><a href="#t1474719010001152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">12:10:10</span>           nathanmarz </span><span>e.g. </span><code>(transform [MY-ALL vector?] (fn [v] (with-meta v {:all-splice true})) data)</code></div><div id="t1474719460001153" t="2016-09-24 12:17:40 nathanmarz can also do this:
 (def SPLICED (comp-paths (continuous-subseqs vector?) (view #(apply concat %))))
(transform SPLICED identity [:a :b [:c :d] :e [:c :d]])
[:a :b :c :d :e :c :d]
"><a href="#t1474719460001153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-24</span> <span class="t" onclick="H(this)">12:17:40</span>           nathanmarz </span><span>can also do this:
</span><pre>(def SPLICED (comp-paths (continuous-subseqs vector?) (view #(apply concat %))))
(transform SPLICED identity [:a :b [:c :d] :e [:c :d]])
[:a :b :c :d :e :c :d]
</pre></div><div id="t1474788929001184" t="2016-09-25 07:35:29 puzzler Nifty!"><a href="#t1474788929001184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-25</span> <span class="t" onclick="H(this)">07:35:29</span>              puzzler </span><span>Nifty!</span></div><div id="t1474788965001185" t="2016-09-25 07:36:05 puzzler BTW, I&apos;m really enjoying the convenience of pulling in a single namespace.  Thanks for addressing that in the latest version."><a href="#t1474788965001185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-25</span> <span class="t" onclick="H(this)">07:36:05</span>              puzzler </span><span>BTW, I&apos;m really enjoying the convenience of pulling in a single namespace.  Thanks for addressing that in the latest version.</span></div><div id="t1474961361001258" t="2016-09-27 07:29:21 rnandan273 Trying to use specter with the following configuration [org.clojure/clojurescript &quot;1.9.225&quot; :scope &quot;provided&quot;]
                 [org.clojure/clojure &quot;1.8.0&quot;]"><a href="#t1474961361001258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:29:21</span>           rnandan273 </span><span>Trying to use specter with the following configuration [org.clojure/clojurescript &quot;1.9.225&quot; :scope &quot;provided&quot;]
                 [org.clojure/clojure &quot;1.8.0&quot;]</span></div><div id="t1474961391001259" t="2016-09-27 07:29:51 rnandan273 [com.rpl/specter &quot;0.13.0&quot;], but am getting errors such as any? already refers to: cljs.core/any? being replaced by: com.rpl.specter.impl/any?"><a href="#t1474961391001259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:29:51</span>           rnandan273 </span><span>[com.rpl/specter &quot;0.13.0&quot;], but am getting errors such as any? already refers to: cljs.core/any? being replaced by: com.rpl.specter.impl/any?</span></div><div id="t1474961401001260" t="2016-09-27 07:30:01 rnandan273 Any ideas on the resolution of this?"><a href="#t1474961401001260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:30:01</span>           rnandan273 </span><span>Any ideas on the resolution of this?</span></div><div id="t1474961746001261" t="2016-09-27 07:35:46 rnandan273 Used this option also [com.rpl/specter &quot;0.13.0&quot; :exclusions [org.clojure/clojure org.clojure/clojurescript]] but no luck"><a href="#t1474961746001261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:35:46</span>           rnandan273 </span><span>Used this option also [com.rpl/specter &quot;0.13.0&quot; :exclusions [org.clojure/clojure org.clojure/clojurescript]] but no luck</span></div><div id="t1474962191001262" t="2016-09-27 07:43:11 rnandan273 this configuration worked"><a href="#t1474962191001262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:43:11</span>           rnandan273 </span><span>this configuration worked</span></div><div id="t1474962192001263" t="2016-09-27 07:43:12 rnandan273 [com.rpl/specter &quot;0.11.2&quot; :exclusions [org.clojure/clojure org.clojure/clojurescript]]"><a href="#t1474962192001263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">07:43:12</span>           rnandan273 </span><span>[com.rpl/specter &quot;0.11.2&quot; :exclusions [org.clojure/clojure org.clojure/clojurescript]]</span></div><div id="t1474978593001271" t="2016-09-27 12:16:33 nathanmarz @rnandan273 try 0.13.1-SNAPSHOT"><a href="#t1474978593001271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">12:16:33</span>           nathanmarz </span><span>@rnandan273 try 0.13.1-SNAPSHOT</span></div><div id="t1474978995001272" t="2016-09-27 12:23:15 rnandan273 @nathanmarz  Could not compile with this version , the error is &quot;  Invalid :refer, macro com.rpl.specter.macros/select does not exist&quot;"><a href="#t1474978995001272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">12:23:15</span>           rnandan273 </span><span>@nathanmarz  Could not compile with this version , the error is &quot;  Invalid :refer, macro com.rpl.specter.macros/select does not exist&quot;</span></div><div id="t1474980390001273" t="2016-09-27 12:46:30 nathanmarz @rnandan273 0.13.0 moved all macros to com.rpl.specter namespace"><a href="#t1474980390001273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">12:46:30</span>           nathanmarz </span><span>@rnandan273 0.13.0 moved all macros to com.rpl.specter namespace</span></div><div id="t1474982959001280" t="2016-09-27 13:29:19 rnandan273 @nathanmarz  Removing the namespace worked, i should have checked about the changes before asking the question. thanks a lot for your timely response"><a href="#t1474982959001280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-27</span> <span class="t" onclick="H(this)">13:29:19</span>           rnandan273 </span><span>@nathanmarz  Removing the namespace worked, i should have checked about the changes before asking the question. thanks a lot for your timely response</span></div><div id="t1475073734001323" t="2016-09-28 14:42:14 vikeri What am I doing wrong here, I expect:
 (select [MAP-VALS (filterer [:id #(= 1 %)])] {:h {:id 1 :ad 2} :ho {:id 2 :ad 3}})
 
To return  [{:id 1 :ad 2}]  but instead it returns  [[] []]"><a href="#t1475073734001323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:42:14</span>               vikeri </span><span>What am I doing wrong here, I expect:
</span><pre>(select [MAP-VALS (filterer [:id #(= 1 %)])] {:h {:id 1 :ad 2} :ho {:id 2 :ad 3}})
</pre><span>
To return </span><code>[{:id 1 :ad 2}]</code><span> but instead it returns </span><code>[[] []]</code></div><div id="t1475073901001324" t="2016-09-28 14:45:01 nathanmarz @vikeri  filterer  treats input as a sequence"><a href="#t1475073901001324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:45:01</span>           nathanmarz </span><span>@vikeri </span><code>filterer</code><span> treats input as a sequence</span></div><div id="t1475073911001325" t="2016-09-28 14:45:11 nathanmarz if you change  filterer  to  selected?  it should work"><a href="#t1475073911001325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:45:11</span>           nathanmarz </span><span>if you change </span><code>filterer</code><span> to </span><code>selected?</code><span> it should work</span></div><div id="t1475073929001326" t="2016-09-28 14:45:29 nathanmarz and you don&apos;t need to wrap the subpath in  []"><a href="#t1475073929001326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:45:29</span>           nathanmarz </span><span>and you don&apos;t need to wrap the subpath in </span><code>[]</code></div><div id="t1475074020001327" t="2016-09-28 14:47:00 vikeri @nathanmarz Great! Thanks! Maybe worth collecting these simple examples somewhere?"><a href="#t1475074020001327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:47:00</span>               vikeri </span><span>@nathanmarz Great! Thanks! Maybe worth collecting these simple examples somewhere?</span></div><div id="t1475074771001328" t="2016-09-28 14:59:31 nathanmarz there&apos;s examples on the wiki and the readme"><a href="#t1475074771001328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:59:31</span>           nathanmarz </span><span>there&apos;s examples on the wiki and the readme</span></div><div id="t1475074787001329" t="2016-09-28 14:59:47 nathanmarz though I agree that the current docs are pretty sparse and disorganized"><a href="#t1475074787001329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">14:59:47</span>           nathanmarz </span><span>though I agree that the current docs are pretty sparse and disorganized</span></div><div id="t1475074867001330" t="2016-09-28 15:01:07 nathanmarz ideally there would be something like 4clojure but for specter, unfortunately I don&apos;t have the time to put that together"><a href="#t1475074867001330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">15:01:07</span>           nathanmarz </span><span>ideally there would be something like 4clojure but for specter, unfortunately I don&apos;t have the time to put that together</span></div><div id="t1475076320001331" t="2016-09-28 15:25:20 vikeri Yeah I skimmed through the ones on the readme and the wiki but couldn’t find my use case. Since it’s quite a powerful abstraction I think some people might need some more examples to grok it."><a href="#t1475076320001331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-28</span> <span class="t" onclick="H(this)">15:25:20</span>               vikeri </span><span>Yeah I skimmed through the ones on the readme and the wiki but couldn’t find my use case. Since it’s quite a powerful abstraction I think some people might need some more examples to grok it.</span></div><div id="t1475252348001405" t="2016-09-30 16:19:08 rodeorockstar I&apos;m pretty sure I&apos;ve asked this before but I can&apos;t seem to find the answer. Is  subselect  the right way to match conditions &quot;deeper&quot; into a tree yet transform higher up?"><a href="#t1475252348001405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span> <span class="t" onclick="H(this)">16:19:08</span>        rodeorockstar </span><span>I&apos;m pretty sure I&apos;ve asked this before but I can&apos;t seem to find the answer. Is </span><code>subselect</code><span> the right way to match conditions &quot;deeper&quot; into a tree yet transform higher up?</span></div><div id="t1475252465001406" t="2016-09-30 16:21:05 rodeorockstar I realize there&apos;s no matching function in this subselect, but still I would have expected  found  to be farther up the tree. Instead it&apos;s the just the :id which is the last part of the subselect
 (s/transform [:data s/ALL #(= &quot;interactor&quot; (:object %)) (s/subselect [:identifier :id])]
                 (fn [found] (println &quot;FOUND&quot; found))
                 (:data db))
"><a href="#t1475252465001406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span> <span class="t" onclick="H(this)">16:21:05</span>        rodeorockstar </span><span>I realize there&apos;s no matching function in this subselect, but still I would have expected </span><code>found</code><span> to be farther up the tree. Instead it&apos;s the just the :id which is the last part of the subselect
</span><pre>(s/transform [:data s/ALL #(= &quot;interactor&quot; (:object %)) (s/subselect [:identifier :id])]
                 (fn [found] (println &quot;FOUND&quot; found))
                 (:data db))
</pre></div><div id="t1475256260001407" t="2016-09-30 17:24:20 nathanmarz @rodeorockstar it sounds like you&apos;re looking for  selected?"><a href="#t1475256260001407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span> <span class="t" onclick="H(this)">17:24:20</span>           nathanmarz </span><span>@rodeorockstar it sounds like you&apos;re looking for </span><code>selected?</code></div><div id="t1475256319001408" t="2016-09-30 17:25:19 nathanmarz but  [:identifier :id]  will always match something, maybe you wanted to use  [(must :identifier) (must :id)] ?"><a href="#t1475256319001408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span> <span class="t" onclick="H(this)">17:25:19</span>           nathanmarz </span><span>but </span><code>[:identifier :id]</code><span> will always match something, maybe you wanted to use </span><code>[(must :identifier) (must :id)]</code><span>?</span></div><div id="t1475280898001421" t="2016-10-01 00:14:58 puzzler It seems like  pred  would also work in the last couple examples where you&apos;ve recommended  selected? .  What are some instances where they would behave differently?"><a href="#t1475280898001421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">00:14:58</span>              puzzler </span><span>It seems like </span><code>pred</code><span> would also work in the last couple examples where you&apos;ve recommended </span><code>selected?</code><span>.  What are some instances where they would behave differently?</span></div><div id="t1475329031001440" t="2016-10-01 13:37:11 nathanmarz well, for  pred  to work like  (selected? (must :a) (must :b))  you would have to write  #(and (contains? % :a) (contains? (:a %) :b))"><a href="#t1475329031001440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">13:37:11</span>           nathanmarz </span><span>well, for </span><code>pred</code><span> to work like </span><code>(selected? (must :a) (must :b))</code><span> you would have to write </span><code>#(and (contains? % :a) (contains? (:a %) :b))</code></div><div id="t1475329122001441" t="2016-10-01 13:38:42 nathanmarz @puzzler  selected?  is particularly good for things like  (selected? (filterer even?) (view count) #(&gt;= % 2)) , which stays navigated at current position if the sequence contains at least 2 even numbers"><a href="#t1475329122001441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">13:38:42</span>           nathanmarz </span><span>@puzzler </span><code>selected?</code><span> is particularly good for things like </span><code>(selected? (filterer even?) (view count) #(&gt;= % 2))</code><span>, which stays navigated at current position if the sequence contains at least 2 even numbers</span></div><div id="t1475329161001442" t="2016-10-01 13:39:21 nathanmarz or something like  (selected? ALL even?)  which stays navigated if at least one even number"><a href="#t1475329161001442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">13:39:21</span>           nathanmarz </span><span>or something like </span><code>(selected? ALL even?)</code><span> which stays navigated if at least one even number</span></div><div id="t1475329246001443" t="2016-10-01 13:40:46 puzzler It sounds like, basically, pred takes a Clojure predicate function and selected? takes a navigator path."><a href="#t1475329246001443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">13:40:46</span>              puzzler </span><span>It sounds like, basically, pred takes a Clojure predicate function and selected? takes a navigator path.</span></div><div id="t1475333998001444" t="2016-10-01 14:59:58 nathanmarz @puzzler yes, that&apos;s correct"><a href="#t1475333998001444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span> <span class="t" onclick="H(this)">14:59:58</span>           nathanmarz </span><span>@puzzler yes, that&apos;s correct</span></div><div id="t1475514146001518" t="2016-10-03 17:02:26 novakboskov If I have lazy seq made of vector I can do this  (transform ALL inc (lazy-seq [1 2])) , then how to do this  (transform MAP-VALS inc (lazy-seq {:a 1 :b 2})) ?"><a href="#t1475514146001518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-03</span> <span class="t" onclick="H(this)">17:02:26</span>          novakboskov </span><span>If I have lazy seq made of vector I can do this </span><code>(transform ALL inc (lazy-seq [1 2]))</code><span>, then how to do this </span><code>(transform MAP-VALS inc (lazy-seq {:a 1 :b 2}))</code><span>?</span></div><div id="t1475518515001519" t="2016-10-03 18:15:15 nathanmarz a seq isn&apos;t a map, so you can&apos;t use  MAP-VALS  with it"><a href="#t1475518515001519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-03</span> <span class="t" onclick="H(this)">18:15:15</span>           nathanmarz </span><span>a seq isn&apos;t a map, so you can&apos;t use </span><code>MAP-VALS</code><span> with it</span></div><div id="t1475518538001520" t="2016-10-03 18:15:38 nathanmarz you could use  [ALL LAST]  instead"><a href="#t1475518538001520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-03</span> <span class="t" onclick="H(this)">18:15:38</span>           nathanmarz </span><span>you could use </span><code>[ALL LAST]</code><span> instead</span></div><div id="t1475524107001521" t="2016-10-03 19:48:27 novakboskov @nathanmarz It makes sense. Thank you for your work!  🙂"><a href="#t1475524107001521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-03</span> <span class="t" onclick="H(this)">19:48:27</span>          novakboskov </span><span>@nathanmarz It makes sense. Thank you for your work! </span><b>🙂</b></div><div id="t1475697114001588" t="2016-10-05 19:51:54 nlessa In 0.13.0 version the macro namespace was deprecated, right? Must we require only com.rpl.specter and use select*, transform*? Bit confused with these last API changes..."><a href="#t1475697114001588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-05</span> <span class="t" onclick="H(this)">19:51:54</span>               nlessa </span><span>In 0.13.0 version the macro namespace was deprecated, right? Must we require only com.rpl.specter and use select*, transform*? Bit confused with these last API changes...</span></div><div id="t1475697266001589" t="2016-10-05 19:54:26 nathanmarz @nlessa use  select ,  transform , etc. as usual except get them from com.rpl.specter now"><a href="#t1475697266001589" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-05</span> <span class="t" onclick="H(this)">19:54:26</span>           nathanmarz </span><span>@nlessa use </span><code>select</code><span>, </span><code>transform</code><span>, etc. as usual except get them from com.rpl.specter now</span></div><div id="t1475699233001590" t="2016-10-05 20:27:13 nlessa Is there any known problem with midje (&quot;1.9.0-alpha5)  and 0.13.0? After upgrade to 0.13.0 I am running with a No such var: sm/transform..."><a href="#t1475699233001590" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-05</span> <span class="t" onclick="H(this)">20:27:13</span>               nlessa </span><span>Is there any known problem with midje (&quot;1.9.0-alpha5)  and 0.13.0? After upgrade to 0.13.0 I am running with a No such var: sm/transform...</span></div><div id="t1475702007001591" t="2016-10-05 21:13:27 nathanmarz @nlessa it&apos;s probably not updated to the namespace changes"><a href="#t1475702007001591" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-05</span> <span class="t" onclick="H(this)">21:13:27</span>           nathanmarz </span><span>@nlessa it&apos;s probably not updated to the namespace changes</span></div><div id="t1475737607001610" t="2016-10-06 07:06:47 yonatanel Is it possible to transform a map according to a transformation that already happened in a nested map?
I have nested objects that need to be marked if they have a certain ID, and if they contain a marked object they should also be marked. For example:
 [{:a 1 :bs [{:b 2} {:b 3}]}
 {:a 4 :bs [{:b 5} {:b 6}]}]

;; 1, 2 and 6 need to be marked, and also those that contain them:
[{:a 1 :mark true :bs [{:b 2 :mark true} {:b 3}]}
 {:a 4 :mark true :bs [{:b 5} {:b 6 :mark true}]}]
"><a href="#t1475737607001610" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">07:06:47</span>            yonatanel </span><span>Is it possible to transform a map according to a transformation that already happened in a nested map?
I have nested objects that need to be marked if they have a certain ID, and if they contain a marked object they should also be marked. For example:
</span><pre>[{:a 1 :bs [{:b 2} {:b 3}]}
 {:a 4 :bs [{:b 5} {:b 6}]}]

;; 1, 2 and 6 need to be marked, and also those that contain them:
[{:a 1 :mark true :bs [{:b 2 :mark true} {:b 3}]}
 {:a 4 :mark true :bs [{:b 5} {:b 6 :mark true}]}]
</pre></div><div id="t1475757550001619" t="2016-10-06 12:39:10 nathanmarz @yonatanel I don&apos;t understand your example"><a href="#t1475757550001619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:39:10</span>           nathanmarz </span><span>@yonatanel I don&apos;t understand your example</span></div><div id="t1475757568001620" t="2016-10-06 12:39:28 nathanmarz the ids are sometimes under  :a  and sometimes under  :b ?"><a href="#t1475757568001620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:39:28</span>           nathanmarz </span><span>the ids are sometimes under </span><code>:a</code><span> and sometimes under </span><code>:b</code><span>?</span></div><div id="t1475757594001621" t="2016-10-06 12:39:54 nathanmarz is this recursive or just 2 levels? why is the map with :a 4 getting marked in the example?"><a href="#t1475757594001621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:39:54</span>           nathanmarz </span><span>is this recursive or just 2 levels? why is the map with :a 4 getting marked in the example?</span></div><div id="t1475757828001623" t="2016-10-06 12:43:48 nathanmarz oh i see, you want to mark the parent if the child gets marked, still don&apos;t understand when to look at  :a  vs  :b"><a href="#t1475757828001623" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:43:48</span>           nathanmarz </span><span>oh i see, you want to mark the parent if the child gets marked, still don&apos;t understand when to look at </span><code>:a</code><span> vs </span><code>:b</code></div><div id="t1475757841001624" t="2016-10-06 12:44:01 yonatanel @nathanmarz The ids can have different keys. Only their value matters in this example."><a href="#t1475757841001624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:44:01</span>            yonatanel </span><span>@nathanmarz The ids can have different keys. Only their value matters in this example.</span></div><div id="t1475757875001625" t="2016-10-06 12:44:35 yonatanel Frankly it&apos;s not recursive, just up to 2 levels deeps, but a few hours ago I thought I might need it recursive. It might be only 1 level though."><a href="#t1475757875001625" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:44:35</span>            yonatanel </span><span>Frankly it&apos;s not recursive, just up to 2 levels deeps, but a few hours ago I thought I might need it recursive. It might be only 1 level though.</span></div><div id="t1475758100001627" t="2016-10-06 12:48:20 nathanmarz I would just do it as two separate transformations"><a href="#t1475758100001627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:48:20</span>           nathanmarz </span><span>I would just do it as two separate transformations</span></div><div id="t1475758104001628" t="2016-10-06 12:48:24 nathanmarz (def data
  [{:a 1 :bs [{:b 2} {:b 3}]}
   {:a 4 :bs [{:b 5} {:b 6}]}])
   
(-&gt;&gt; data
     (setval [ALL
              :bs
              ALL
              (selected? :b #{1 2 6})
              :mark]
       true)
     (setval [ALL
              (selected? :bs ALL (must :mark))
              :mark]
      true))
"><a href="#t1475758104001628" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:48:24</span>           nathanmarz </span><pre>(def data
  [{:a 1 :bs [{:b 2} {:b 3}]}
   {:a 4 :bs [{:b 5} {:b 6}]}])
   
(-&gt;&gt; data
     (setval [ALL
              :bs
              ALL
              (selected? :b #{1 2 6})
              :mark]
       true)
     (setval [ALL
              (selected? :bs ALL (must :mark))
              :mark]
      true))
</pre></div><div id="t1475758643001630" t="2016-10-06 12:57:23 yonatanel OK, nice!"><a href="#t1475758643001630" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">12:57:23</span>            yonatanel </span><span>OK, nice!</span></div><div id="t1475758869001631" t="2016-10-06 13:01:09 yonatanel It wouldn&apos;t work if I wanted to only mark id 4, but I&apos;ll figure it out."><a href="#t1475758869001631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">13:01:09</span>            yonatanel </span><span>It wouldn&apos;t work if I wanted to only mark id 4, but I&apos;ll figure it out.</span></div><div id="t1475759152001632" t="2016-10-06 13:05:52 nathanmarz couldn&apos;t tell from your example whether the id matching was just on nested maps or on the parent maps as well"><a href="#t1475759152001632" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">13:05:52</span>           nathanmarz </span><span>couldn&apos;t tell from your example whether the id matching was just on nested maps or on the parent maps as well</span></div><div id="t1475759159001633" t="2016-10-06 13:05:59 nathanmarz not hard to modify to check both"><a href="#t1475759159001633" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">13:05:59</span>           nathanmarz </span><span>not hard to modify to check both</span></div><div id="t1475789811001656" t="2016-10-06 21:36:51 nlessa Hi! Using 0.12.0 version what would be the elegant way to get in a hierarchical map like
 {:a 1 :b: 1  :c {:a 2 :b 2 :c {:a 3 :b 3 :c …}…} 
- undetermined levels of c - the most profound value of :a ?"><a href="#t1475789811001656" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-06</span> <span class="t" onclick="H(this)">21:36:51</span>               nlessa </span><span>Hi! Using 0.12.0 version what would be the elegant way to get in a hierarchical map like
</span><pre>{:a 1 :b: 1  :c {:a 2 :b 2 :c {:a 3 :b 3 :c …}…}</pre><span>
- undetermined levels of c - the most profound value of :a ?</span></div><div id="t1475800992001657" t="2016-10-07 00:43:12 nathanmarz @nlessa what do you mean by &quot;most profound&quot;?"><a href="#t1475800992001657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">00:43:12</span>           nathanmarz </span><span>@nlessa what do you mean by &quot;most profound&quot;?</span></div><div id="t1475849553001682" t="2016-10-07 14:12:33 nlessa hi @nathanmarz. 
I mean: navigating continuously in the hierarchy by the :c key, get the last :c you navigated and the get the value of :a

3 examples:
 {:a 1 :b: 1 :c {:a 2 :d 2 :c {:a 3 :b 3 :c  {:a 4 :h 4}}}} =&gt;   4

   {:a 1 :b 1 :c: {:a 2 :d 2 :f {:a 3 :b 3 :c  {:a 4 :h 4} }}}} =&gt;  2

   {:a 1 :b: 1 :j {:a 2 :d 2 :c {:a 3 :b 3 :c  {:a 4 :h 4}}}} =&gt;  1 

Is it clear?"><a href="#t1475849553001682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">14:12:33</span>               nlessa </span><span>hi @nathanmarz. 
I mean: navigating continuously in the hierarchy by the :c key, get the last :c you navigated and the get the value of :a

3 examples:
</span><pre>{:a 1 :b: 1 :c {:a 2 :d 2 :c {:a 3 :b 3 :c  {:a 4 :h 4}}}} =&gt;   4

   {:a 1 :b 1 :c: {:a 2 :d 2 :f {:a 3 :b 3 :c  {:a 4 :h 4} }}}} =&gt;  2

   {:a 1 :b: 1 :j {:a 2 :d 2 :c {:a 3 :b 3 :c  {:a 4 :h 4}}}} =&gt;  1</pre><span>

Is it clear?</span></div><div id="t1475850226001683" t="2016-10-07 14:23:46 nathanmarz @nlessa you can do something like this with 0.12.0
 (declarepath LastCMap)
(providepath LastCMap
  (if-path (must :c)
    [:c LastCMap]
    STAY
    ))

(select-any [LastCMap :a] data)
"><a href="#t1475850226001683" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">14:23:46</span>           nathanmarz </span><span>@nlessa you can do something like this with 0.12.0
</span><pre>(declarepath LastCMap)
(providepath LastCMap
  (if-path (must :c)
    [:c LastCMap]
    STAY
    ))

(select-any [LastCMap :a] data)
</pre></div><div id="t1475850240001684" t="2016-10-07 14:24:00 nathanmarz though I really recommend using 0.13.0, which is much better at things like this"><a href="#t1475850240001684" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">14:24:00</span>           nathanmarz </span><span>though I really recommend using 0.13.0, which is much better at things like this</span></div><div id="t1475850271001685" t="2016-10-07 14:24:31 nathanmarz in 0.13.0 you can do it like this:
 (def LastMap
  (recursive-path [k] p
    (if-path (must k)
      [(keypath k) p]
      STAY)))

(select-any [(LastMap :c) :a] data)
"><a href="#t1475850271001685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">14:24:31</span>           nathanmarz </span><span>in 0.13.0 you can do it like this:
</span><pre>(def LastMap
  (recursive-path [k] p
    (if-path (must k)
      [(keypath k) p]
      STAY)))

(select-any [(LastMap :c) :a] data)
</pre></div><div id="t1475854750001686" t="2016-10-07 15:39:10 nlessa Thank you very much, @nathanmarz. Specter is really great, very elegant! When we see the solution it seems obvious.  🙂  I am yet struggling to dominate all the navigators logic  and solve some problems in the specter-way."><a href="#t1475854750001686" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">15:39:10</span>               nlessa </span><span>Thank you very much, @nathanmarz. Specter is really great, very elegant! When we see the solution it seems obvious. </span><b>🙂</b><span> I am yet struggling to dominate all the navigators logic  and solve some problems in the specter-way.</span></div><div id="t1475854982001687" t="2016-10-07 15:43:02 nathanmarz you&apos;ll get there, it just takes practice"><a href="#t1475854982001687" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">15:43:02</span>           nathanmarz </span><span>you&apos;ll get there, it just takes practice</span></div><div id="t1475854996001688" t="2016-10-07 15:43:16 nathanmarz and a certain amount of retraining on how you think about data structures"><a href="#t1475854996001688" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">15:43:16</span>           nathanmarz </span><span>and a certain amount of retraining on how you think about data structures</span></div><div id="t1475864978001695" t="2016-10-07 18:29:38 aaelony is a transformation from  [[:a :b] [:a :c] [:b :d] [:c :d]]  to  {:a [:b :c], :b [:d], :c [:d]}  something that Specter is designed for?  Not sure if that should be a  transform  or a  setval  or something else..."><a href="#t1475864978001695" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">18:29:38</span>              aaelony </span><span>is a transformation from </span><code>[[:a :b] [:a :c] [:b :d] [:c :d]]</code><span> to </span><code>{:a [:b :c], :b [:d], :c [:d]}</code><span> something that Specter is designed for?  Not sure if that should be a </span><code>transform</code><span> or a </span><code>setval</code><span> or something else...</span></div><div id="t1475865121001696" t="2016-10-07 18:32:01 nathanmarz @aaelony the target object doesn&apos;t really share any structure with the source, so I would just do that with regular clojure functions"><a href="#t1475865121001696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">18:32:01</span>           nathanmarz </span><span>@aaelony the target object doesn&apos;t really share any structure with the source, so I would just do that with regular clojure functions</span></div><div id="t1475865165001697" t="2016-10-07 18:32:45 aaelony perfect, thanks @nathanmarz"><a href="#t1475865165001697" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-07</span> <span class="t" onclick="H(this)">18:32:45</span>              aaelony </span><span>perfect, thanks @nathanmarz</span></div><div id="t1475982721001740" t="2016-10-09 03:12:01 richiardiandrea Hello folks! A newbie question, if I have a vec of vecs and want to conj to only the first vec, how should I go about? Sample:
 [[1 2] [4 6] [42]] -&gt; [[1 2 3] [4 6] [42]]"><a href="#t1475982721001740" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">03:12:01</span>      richiardiandrea </span><span>Hello folks! A newbie question, if I have a vec of vecs and want to conj to only the first vec, how should I go about? Sample:
</span><code>[[1 2] [4 6] [42]] -&gt; [[1 2 3] [4 6] [42]]</code></div><div id="t1475982766001742" t="2016-10-09 03:12:46 richiardiandrea I tried FIRST but it navigates to the first element in each vector I believe (but I am trying again)"><a href="#t1475982766001742" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">03:12:46</span>      richiardiandrea </span><span>I tried FIRST but it navigates to the first element in each vector I believe (but I am trying again)</span></div><div id="t1475982855001743" t="2016-10-09 03:14:15 richiardiandrea I could stop here and do the conj in the transform function only to the first, but there might be a better way  😄"><a href="#t1475982855001743" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">03:14:15</span>      richiardiandrea </span><span>I could stop here and do the conj in the transform function only to the first, but there might be a better way </span><b>😄</b></div><div id="t1475982972001745" t="2016-10-09 03:16:12 richiardiandrea oh, found...it is  specter/VAL  what I am looking for"><a href="#t1475982972001745" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">03:16:12</span>      richiardiandrea </span><span>oh, found...it is </span><code>specter/VAL</code><span> what I am looking for</span></div><div id="t1475983127001746" t="2016-10-09 03:18:47 richiardiandrea uhm..no probably my original idea to do it in the transform function is good for now, but I am open for suggestions"><a href="#t1475983127001746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">03:18:47</span>      richiardiandrea </span><span>uhm..no probably my original idea to do it in the transform function is good for now, but I am open for suggestions</span></div><div id="t1476010069001757" t="2016-10-09 10:47:49 nathanmarz @richiardiandrea  (setval [FIRST END] [3] [[1 2] [4 6] [42]] )"><a href="#t1476010069001757" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">10:47:49</span>           nathanmarz </span><span>@richiardiandrea </span><code>(setval [FIRST END] [3] [[1 2] [4 6] [42]] )</code></div><div id="t1476031139001770" t="2016-10-09 16:38:59 richiardiandrea oh ok tnx !"><a href="#t1476031139001770" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-09</span> <span class="t" onclick="H(this)">16:38:59</span>      richiardiandrea </span><span>oh ok tnx !</span></div><div id="t1476221502001871" t="2016-10-11 21:31:42 spieden some specter golf for you all: how to select triples from a nested map where values are nil? e.g. {:foo {:bar nil :bom 1}} -&gt; [:foo :bar]"><a href="#t1476221502001871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">21:31:42</span>              spieden </span><span>some specter golf for you all: how to select triples from a nested map where values are nil? e.g. {:foo {:bar nil :bom 1}} -&gt; [:foo :bar]</span></div><div id="t1476221861001872" t="2016-10-11 21:37:41 spieden hmm maybe selected? + some subselects"><a href="#t1476221861001872" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">21:37:41</span>              spieden </span><span>hmm maybe selected? + some subselects</span></div><div id="t1476223246001873" t="2016-10-11 22:00:46 nathanmarz @spieden use value collection"><a href="#t1476223246001873" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:00:46</span>           nathanmarz </span><span>@spieden use value collection</span></div><div id="t1476223267001874" t="2016-10-11 22:01:07 spieden trying something with multi-path right now but not panning out"><a href="#t1476223267001874" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:01:07</span>              spieden </span><span>trying something with multi-path right now but not panning out</span></div><div id="t1476223288001875" t="2016-10-11 22:01:28 nathanmarz (select [ALL (collect-one FIRST) LAST ALL (selected? LAST nil?) FIRST] data)"><a href="#t1476223288001875" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:01:28</span>           nathanmarz </span><code>(select [ALL (collect-one FIRST) LAST ALL (selected? LAST nil?) FIRST] data)</code></div><div id="t1476223375001876" t="2016-10-11 22:02:55 spieden perfect, thanks!"><a href="#t1476223375001876" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:02:55</span>              spieden </span><span>perfect, thanks!</span></div><div id="t1476223382001877" t="2016-10-11 22:03:02 spieden (works and now i’ll try to understand it)"><a href="#t1476223382001877" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:03:02</span>              spieden </span><span>(works and now i’ll try to understand it)</span></div><div id="t1476223420001878" t="2016-10-11 22:03:40 nathanmarz can make it recursive too if you want to handle arbitrarily nested maps"><a href="#t1476223420001878" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:03:40</span>           nathanmarz </span><span>can make it recursive too if you want to handle arbitrarily nested maps</span></div><div id="t1476223544001879" t="2016-10-11 22:05:44 spieden i think i understand it — didn’t realize that selected? would propagate back like that"><a href="#t1476223544001879" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:05:44</span>              spieden </span><span>i think i understand it — didn’t realize that selected? would propagate back like that</span></div><div id="t1476223556001880" t="2016-10-11 22:05:56 spieden is this what distinguishes it from filterer?"><a href="#t1476223556001880" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:05:56</span>              spieden </span><span>is this what distinguishes it from filterer?</span></div><div id="t1476223569001881" t="2016-10-11 22:06:09 nathanmarz selected?  expresses a filter predicate in terms of a path"><a href="#t1476223569001881" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:06:09</span>           nathanmarz </span><code>selected?</code><span> expresses a filter predicate in terms of a path</span></div><div id="t1476223573001882" t="2016-10-11 22:06:13 spieden also was trying to use collect instead of collect-one"><a href="#t1476223573001882" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:06:13</span>              spieden </span><span>also was trying to use collect instead of collect-one</span></div><div id="t1476223623001883" t="2016-10-11 22:07:03 nathanmarz filterer  navigates to result of running  filter  using the path as a filter predicate"><a href="#t1476223623001883" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:07:03</span>           nathanmarz </span><code>filterer</code><span> navigates to result of running </span><code>filter</code><span> using the path as a filter predicate</span></div><div id="t1476223635001884" t="2016-10-11 22:07:15 nathanmarz (`filterer` uses  selected?  in its implementation)"><a href="#t1476223635001884" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:07:15</span>           nathanmarz </span><span>(`filterer` uses </span><code>selected?</code><span> in its implementation)</span></div><div id="t1476223679001885" t="2016-10-11 22:07:59 spieden ah ok"><a href="#t1476223679001885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:07:59</span>              spieden </span><span>ah ok</span></div><div id="t1476223679001886" t="2016-10-11 22:07:59 nathanmarz (defdynamicnav filterer
  [&amp; path]
  (subselect ALL (selected? path)))
"><a href="#t1476223679001886" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:07:59</span>           nathanmarz </span><pre>(defdynamicnav filterer
  [&amp; path]
  (subselect ALL (selected? path)))
</pre></div><div id="t1476223764001887" t="2016-10-11 22:09:24 nathanmarz (transform (filterer odd?) reverse [1 2 3 4 5 6 7])  =&gt;  [7 2 5 4 3 6 1]"><a href="#t1476223764001887" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:09:24</span>           nathanmarz </span><code>(transform (filterer odd?) reverse [1 2 3 4 5 6 7])</code><span> =&gt; </span><code>[7 2 5 4 3 6 1]</code></div><div id="t1476223870001889" t="2016-10-11 22:11:10 spieden wow  💡"><a href="#t1476223870001889" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-11</span> <span class="t" onclick="H(this)">22:11:10</span>              spieden </span><span>wow </span><b>💡</b></div><div id="t1476320467001921" t="2016-10-13 01:01:07 kenny Is there some sort of problem with specter + Datomic tempids? I get this very strange error: 
 (rs/declarepath MapWalker)
(rs/providepath MapWalker
                (rs/stay-then-continue
                  rs/MAP-VALS
                  (rs/walker map?)
                  MapWalker))

(rs/transform [MapWalker :db/id]
              (fn [id]
                (d/tempid :db.part/user))
              {:db/id 1
               :foo [{:db/id 2}]})
=&gt; java.lang.UnsupportedOperationException: Can&apos;t create empty: datomic.db.DbId
 
I suspect the error is a red herring.."><a href="#t1476320467001921" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:01:07</span>                kenny </span><span>Is there some sort of problem with specter + Datomic tempids? I get this very strange error: 
</span><pre>(rs/declarepath MapWalker)
(rs/providepath MapWalker
                (rs/stay-then-continue
                  rs/MAP-VALS
                  (rs/walker map?)
                  MapWalker))

(rs/transform [MapWalker :db/id]
              (fn [id]
                (d/tempid :db.part/user))
              {:db/id 1
               :foo [{:db/id 2}]})
=&gt; java.lang.UnsupportedOperationException: Can&apos;t create empty: datomic.db.DbId
</pre><span>
I suspect the error is a red herring..</span></div><div id="t1476320654001922" t="2016-10-13 01:04:14 kenny I can do this without an error: 
 (rs/transform [MapWalker :db/id]
              (fn [id]
                (d/tempid :db.part/user)
                id)
              {:db/id 1
               :foo [{:db/id 2}]})
=&gt; {:db/id 1, :foo [#:db{:id 2}]}
"><a href="#t1476320654001922" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:04:14</span>                kenny </span><span>I can do this without an error: 
</span><pre>(rs/transform [MapWalker :db/id]
              (fn [id]
                (d/tempid :db.part/user)
                id)
              {:db/id 1
               :foo [{:db/id 2}]})
=&gt; {:db/id 1, :foo [#:db{:id 2}]}
</pre></div><div id="t1476320680001923" t="2016-10-13 01:04:40 kenny It&apos;s just if the transform-fn returns a tempid that I get the error"><a href="#t1476320680001923" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:04:40</span>                kenny </span><span>It&apos;s just if the transform-fn returns a tempid that I get the error</span></div><div id="t1476320763001924" t="2016-10-13 01:06:03 kenny I am using specter v0.13.0"><a href="#t1476320763001924" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:06:03</span>                kenny </span><span>I am using specter v0.13.0</span></div><div id="t1476320997001925" t="2016-10-13 01:09:57 nathanmarz @kenny it probably has something to do with clojure.walk interacting with that datomic type"><a href="#t1476320997001925" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:09:57</span>           nathanmarz </span><span>@kenny it probably has something to do with clojure.walk interacting with that datomic type</span></div><div id="t1476321038001926" t="2016-10-13 01:10:38 nathanmarz i think you can avoid that situation by doing  continue-then-stay  instead of  stay-then-continue"><a href="#t1476321038001926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:10:38</span>           nathanmarz </span><span>i think you can avoid that situation by doing </span><code>continue-then-stay</code><span> instead of </span><code>stay-then-continue</code></div><div id="t1476321105001927" t="2016-10-13 01:11:45 kenny yes that did it"><a href="#t1476321105001927" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:11:45</span>                kenny </span><span>yes that did it</span></div><div id="t1476321128001928" t="2016-10-13 01:12:08 kenny Why did that make it work?"><a href="#t1476321128001928" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:12:08</span>                kenny </span><span>Why did that make it work?</span></div><div id="t1476321187001929" t="2016-10-13 01:13:07 nathanmarz when you do  stay-then-continue , it first updates :db/id on the top-level map. then it does the rest of the path (`MAP-VALS (walker ...) MapWalker`)"><a href="#t1476321187001929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:13:07</span>           nathanmarz </span><span>when you do </span><code>stay-then-continue</code><span>, it first updates :db/id on the top-level map. then it does the rest of the path (`MAP-VALS (walker ...) MapWalker`)</span></div><div id="t1476321223001930" t="2016-10-13 01:13:43 nathanmarz when you do  continue-then-stay , it does the walk of the submaps first, so at no point does the walk ever go over the datomic types that you produced"><a href="#t1476321223001930" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:13:43</span>           nathanmarz </span><span>when you do </span><code>continue-then-stay</code><span>, it does the walk of the submaps first, so at no point does the walk ever go over the datomic types that you produced</span></div><div id="t1476321265001931" t="2016-10-13 01:14:25 kenny Ah I see. Thank you for your explanation  🙂"><a href="#t1476321265001931" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:14:25</span>                kenny </span><span>Ah I see. Thank you for your explanation </span><b>🙂</b></div><div id="t1476321503001932" t="2016-10-13 01:18:23 nathanmarz no problem!"><a href="#t1476321503001932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">01:18:23</span>           nathanmarz </span><span>no problem!</span></div><div id="t1476386771001957" t="2016-10-13 19:26:11 jlutteringer noob question here: How do I select the values that come before elements that satisfy a given predicate. For example if I had  [1 &quot;a&quot; 22 3 5 2 &quot;b&quot; 10]  and wanted to select values that occur before strings to get  [1 2] . Is this something that is possible?"><a href="#t1476386771001957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:26:11</span>         jlutteringer </span><span>noob question here: How do I select the values that come before elements that satisfy a given predicate. For example if I had </span><code>[1 &quot;a&quot; 22 3 5 2 &quot;b&quot; 10]</code><span> and wanted to select values that occur before strings to get </span><code>[1 2]</code><span>. Is this something that is possible?</span></div><div id="t1476387151001958" t="2016-10-13 19:32:31 darwin gave 0.13 another shot, and still having the same issue like 5 weeks ago:
 https://gist.github.com/darwin/10e6748467e0a13a8f7573c1ae99e4a6 
it is calling this function, compiled under  :advanced  mode with  :pseudo-names  true
 https://github.com/binaryage/dirac/blob/6c0c2bc8348eb296174cc72331c031e096af1bda/src/implant/dirac/implant/automation/reps.cljs#L62"><a href="#t1476387151001958" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:32:31</span>               darwin </span><span>gave 0.13 another shot, and still having the same issue like 5 weeks ago:
</span><a href="https://gist.github.com/darwin/10e6748467e0a13a8f7573c1ae99e4a6" target="_blank">https://gist.github.com/darwin/10e6748467e0a13a8f7573c1ae99e4a6</a><span>
it is calling this function, compiled under </span><code>:advanced</code><span> mode with </span><code>:pseudo-names</code><span> true
</span><a href="https://github.com/binaryage/dirac/blob/6c0c2bc8348eb296174cc72331c031e096af1bda/src/implant/dirac/implant/automation/reps.cljs#L62" target="_blank">https://github.com/binaryage/dirac/blob/6c0c2bc8348eb296174cc72331c031e096af1bda/src/implant/dirac/implant/automation/reps.cljs#L62</a></div><div id="t1476387173001961" t="2016-10-13 19:32:53 darwin looking into it further, I’m going to solve this today, just posting FYI"><a href="#t1476387173001961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:32:53</span>               darwin </span><span>looking into it further, I’m going to solve this today, just posting FYI</span></div><div id="t1476387451001962" t="2016-10-13 19:37:31 darwin this.$late1$ seems to be ok, but it does not contain $select_STAR_$"><a href="#t1476387451001962" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:37:31</span>               darwin </span><span>this.$late1$ seems to be ok, but it does not contain $select_STAR_$</span></div><div id="t1476388752001963" t="2016-10-13 19:59:12 nathanmarz @jlutteringer you could do  [(continuous-subseqs (complement string?)) FIRST]"><a href="#t1476388752001963" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:59:12</span>           nathanmarz </span><span>@jlutteringer you could do </span><code>[(continuous-subseqs (complement string?)) FIRST]</code></div><div id="t1476388791001964" t="2016-10-13 19:59:51 nathanmarz @darwin can you remind me what was causing the issue before?"><a href="#t1476388791001964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">19:59:51</span>           nathanmarz </span><span>@darwin can you remind me what was causing the issue before?</span></div><div id="t1476388817001965" t="2016-10-13 20:00:17 nathanmarz also, does it still fail under 0.13.1-SNAPSHOT?"><a href="#t1476388817001965" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:00:17</span>           nathanmarz </span><span>also, does it still fail under 0.13.1-SNAPSHOT?</span></div><div id="t1476388853001966" t="2016-10-13 20:00:53 darwin we didn’t go deeper into it, I decided to wait if anyone else hits similar issue, downgraded to 0.12 again"><a href="#t1476388853001966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:00:53</span>               darwin </span><span>we didn’t go deeper into it, I decided to wait if anyone else hits similar issue, downgraded to 0.12 again</span></div><div id="t1476388862001967" t="2016-10-13 20:01:02 darwin I’m going to try the snapshot"><a href="#t1476388862001967" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:01:02</span>               darwin </span><span>I’m going to try the snapshot</span></div><div id="t1476388872001968" t="2016-10-13 20:01:12 nathanmarz does it work under non-advanced compilation?"><a href="#t1476388872001968" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:01:12</span>           nathanmarz </span><span>does it work under non-advanced compilation?</span></div><div id="t1476388925001969" t="2016-10-13 20:02:05 darwin that is next thing I want to test"><a href="#t1476388925001969" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:02:05</span>               darwin </span><span>that is next thing I want to test</span></div><div id="t1476389127001970" t="2016-10-13 20:05:27 nathanmarz can you also wrap that line in  (with-inline-debug ...) ?"><a href="#t1476389127001970" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:05:27</span>           nathanmarz </span><span>can you also wrap that line in </span><code>(with-inline-debug ...)</code><span>?</span></div><div id="t1476389149001971" t="2016-10-13 20:05:49 nathanmarz that will print some debugging info that might be useful"><a href="#t1476389149001971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:05:49</span>           nathanmarz </span><span>that will print some debugging info that might be useful</span></div><div id="t1476389673001972" t="2016-10-13 20:14:33 darwin 0.13.1-SNAPSHOT is broken for me as well, trying to compile it under :whitespace mode and with-inline-debug, unfortunately switching to :none mode would be much more work due to chrome extension packaging restrictions"><a href="#t1476389673001972" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:14:33</span>               darwin </span><span>0.13.1-SNAPSHOT is broken for me as well, trying to compile it under :whitespace mode and with-inline-debug, unfortunately switching to :none mode would be much more work due to chrome extension packaging restrictions</span></div><div id="t1476390217001973" t="2016-10-13 20:23:37 darwin ah, I’m going in the same footsteps, :whitespace mode is broken due to this parinfer issue:
 https://github.com/shaunlebron/parinfer/issues/120 
and I cannot upgrade because it wasn’t yet published on cljsjs"><a href="#t1476390217001973" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:23:37</span>               darwin </span><span>ah, I’m going in the same footsteps, :whitespace mode is broken due to this parinfer issue:
</span><a href="https://github.com/shaunlebron/parinfer/issues/120" target="_blank">https://github.com/shaunlebron/parinfer/issues/120</a><span>
and I cannot upgrade because it wasn’t yet published on cljsjs</span></div><div id="t1476390247001975" t="2016-10-13 20:24:07 darwin now I recall, that is why I gave up few weeks ago"><a href="#t1476390247001975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:24:07</span>               darwin </span><span>now I recall, that is why I gave up few weeks ago</span></div><div id="t1476390357001976" t="2016-10-13 20:25:57 nathanmarz ok"><a href="#t1476390357001976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:25:57</span>           nathanmarz </span><span>ok</span></div><div id="t1476390391001977" t="2016-10-13 20:26:31 darwin I’m going to use parinfer directly as foreign-lib, but it will take me some time until I figure it out"><a href="#t1476390391001977" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:26:31</span>               darwin </span><span>I’m going to use parinfer directly as foreign-lib, but it will take me some time until I figure it out</span></div><div id="t1476390401001978" t="2016-10-13 20:26:41 nathanmarz looking at the error more closely, the issue is happening inside of multi-path, so wrapping the providepath in with-inline-debug would be helpful as well"><a href="#t1476390401001978" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:26:41</span>           nathanmarz </span><span>looking at the error more closely, the issue is happening inside of multi-path, so wrapping the providepath in with-inline-debug would be helpful as well</span></div><div id="t1476390759001979" t="2016-10-13 20:32:39 darwin also that “undefined” thing in generated identifier names is suspicious"><a href="#t1476390759001979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:32:39</span>               darwin </span><span>also that “undefined” thing in generated identifier names is suspicious</span></div><div id="t1476390822001980" t="2016-10-13 20:33:42 nathanmarz @jlutteringer just realized you asked something completely different, for that use case I would recommend using zipper navigators or making a custom navigator"><a href="#t1476390822001980" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:33:42</span>           nathanmarz </span><span>@jlutteringer just realized you asked something completely different, for that use case I would recommend using zipper navigators or making a custom navigator</span></div><div id="t1476390859001981" t="2016-10-13 20:34:19 nathanmarz @darwin agree"><a href="#t1476390859001981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:34:19</span>           nathanmarz </span><span>@darwin agree</span></div><div id="t1476390914001982" t="2016-10-13 20:35:14 jlutteringer I was able to get very close tweaking your example  (specter/select [(specter/continuous-subseqs (complement string?)) specter/LAST] [1 &quot;a&quot; 22 3 5 2 &quot;b&quot; 10])  gives me  [1 2 10]  now I just need to figure out how to drop the last element"><a href="#t1476390914001982" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:35:14</span>         jlutteringer </span><span>I was able to get very close tweaking your example </span><code>(specter/select [(specter/continuous-subseqs (complement string?)) specter/LAST] [1 &quot;a&quot; 22 3 5 2 &quot;b&quot; 10])</code><span> gives me </span><code>[1 2 10]</code><span> now I just need to figure out how to drop the last element</span></div><div id="t1476391202001983" t="2016-10-13 20:40:02 nathanmarz well, if the last element of sequence is a string you wouldn&apos;t want to drop it"><a href="#t1476391202001983" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:40:02</span>           nathanmarz </span><span>well, if the last element of sequence is a string you wouldn&apos;t want to drop it</span></div><div id="t1476391326001984" t="2016-10-13 20:42:06 jlutteringer ah, right"><a href="#t1476391326001984" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:42:06</span>         jlutteringer </span><span>ah, right</span></div><div id="t1476391357001985" t="2016-10-13 20:42:37 jlutteringer kk, I’ll give zippers a shot, thanks so much for the help!"><a href="#t1476391357001985" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:42:37</span>         jlutteringer </span><span>kk, I’ll give zippers a shot, thanks so much for the help!</span></div><div id="t1476391395001986" t="2016-10-13 20:43:15 nathanmarz specter integrates zippers in specter/zipper.cljc"><a href="#t1476391395001986" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:43:15</span>           nathanmarz </span><span>specter integrates zippers in specter/zipper.cljc</span></div><div id="t1476391439001987" t="2016-10-13 20:43:59 nathanmarz https://nathanmarz.github.io/specter/com.rpl.specter.zipper.html"><a href="#t1476391439001987" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:43:59</span>           nathanmarz </span><a href="https://nathanmarz.github.io/specter/com.rpl.specter.zipper.html" target="_blank">https://nathanmarz.github.io/specter/com.rpl.specter.zipper.html</a></div><div id="t1476391651001988" t="2016-10-13 20:47:31 nathanmarz @jlutteringer
 (select
        [z/VECTOR-ZIP
         z/DOWN
         z/NEXT-WALK
         (selected? z/NODE string?)
         z/LEFT
         z/NODE]
        [1 2 &quot;a&quot; 3 &quot;b&quot; 4])
;; =&gt; [2 3]
"><a href="#t1476391651001988" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:47:31</span>           nathanmarz </span><span>@jlutteringer
</span><pre>(select
        [z/VECTOR-ZIP
         z/DOWN
         z/NEXT-WALK
         (selected? z/NODE string?)
         z/LEFT
         z/NODE]
        [1 2 &quot;a&quot; 3 &quot;b&quot; 4])
;; =&gt; [2 3]
</pre></div><div id="t1476391743001989" t="2016-10-13 20:49:03 jlutteringer you’re the man, thank you so much"><a href="#t1476391743001989" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">20:49:03</span>         jlutteringer </span><span>you’re the man, thank you so much</span></div><div id="t1476393514001990" t="2016-10-13 21:18:34 darwin getting close to get :whitespace working, now hitting
 http://dev.clojure.org/jira/browse/CLJS-1547"><a href="#t1476393514001990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">21:18:34</span>               darwin </span><span>getting close to get :whitespace working, now hitting
</span><a href="http://dev.clojure.org/jira/browse/CLJS-1547" target="_blank">http://dev.clojure.org/jira/browse/CLJS-1547</a></div><div id="t1476399668001997" t="2016-10-13 23:01:08 darwin @nathanmarz finally got a screenshot for you:
 https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace.png"><a href="#t1476399668001997" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">23:01:08</span>               darwin </span><span>@nathanmarz finally got a screenshot for you:
</span><a href="https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace.png" target="_blank">https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace.png</a></div><div id="t1476399784001999" t="2016-10-13 23:03:04 darwin https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace2.png"><a href="#t1476399784001999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">23:03:04</span>               darwin </span><a href="https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace2.png" target="_blank">https://dl.dropboxusercontent.com/u/559047/specter-dirac-whitespace2.png</a></div><div id="t1476401773002001" t="2016-10-13 23:36:13 darwin this is output I got from the inline-debug:  https://gist.github.com/darwin/1b2d5f75a9348ba2b9dcad241c1e2fb6"><a href="#t1476401773002001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-13</span> <span class="t" onclick="H(this)">23:36:13</span>               darwin </span><span>this is output I got from the inline-debug: </span><a href="https://gist.github.com/darwin/1b2d5f75a9348ba2b9dcad241c1e2fb6" target="_blank">https://gist.github.com/darwin/1b2d5f75a9348ba2b9dcad241c1e2fb6</a></div><div id="t1476406387002004" t="2016-10-14 00:53:07 darwin I was able to isolate the issue:  https://github.com/darwin/pesky-select-star"><a href="#t1476406387002004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">00:53:07</span>               darwin </span><span>I was able to isolate the issue: </span><a href="https://github.com/darwin/pesky-select-star" target="_blank">https://github.com/darwin/pesky-select-star</a></div><div id="t1476406457002006" t="2016-10-14 00:54:17 darwin it is failing even on code from specter’s own tests, I was playing with deps and downgrading clojurescript to 1.7.122 fixed it
 https://github.com/darwin/pesky-select-star/blob/master/project.clj#L9 

so does specter support newer clojurescript versions?"><a href="#t1476406457002006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">00:54:17</span>               darwin </span><span>it is failing even on code from specter’s own tests, I was playing with deps and downgrading clojurescript to 1.7.122 fixed it
</span><a href="https://github.com/darwin/pesky-select-star/blob/master/project.clj#L9" target="_blank">https://github.com/darwin/pesky-select-star/blob/master/project.clj#L9</a><span>

so does specter support newer clojurescript versions?</span></div><div id="t1476406540002008" t="2016-10-14 00:55:40 darwin that 1.7.122 I took from specter’s repo and I don’t see there any other clojurescript version"><a href="#t1476406540002008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">00:55:40</span>               darwin </span><span>that 1.7.122 I took from specter’s repo and I don’t see there any other clojurescript version</span></div><div id="t1476428374002026" t="2016-10-14 06:59:34 nathanmarz @darwin Thanks, this is all really helpful"><a href="#t1476428374002026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">06:59:34</span>           nathanmarz </span><span>@darwin Thanks, this is all really helpful</span></div><div id="t1476428537002027" t="2016-10-14 07:02:17 nathanmarz @darwin I opened an issue to track it  https://github.com/nathanmarz/specter/issues/152"><a href="#t1476428537002027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">07:02:17</span>           nathanmarz </span><span>@darwin I opened an issue to track it </span><a href="https://github.com/nathanmarz/specter/issues/152" target="_blank">https://github.com/nathanmarz/specter/issues/152</a></div><div id="t1476443745002043" t="2016-10-14 11:15:45 darwin thanks @nathanmarz, will downgrade to 0.12 and track the issue and do next attempt when you fix it, not a priority, good luck!"><a href="#t1476443745002043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">11:15:45</span>               darwin </span><span>thanks @nathanmarz, will downgrade to 0.12 and track the issue and do next attempt when you fix it, not a priority, good luck!</span></div><div id="t1476453331002056" t="2016-10-14 13:55:31 nathanmarz @darwin ok give the latest 0.13.1-SNAPSHOT a shot"><a href="#t1476453331002056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">13:55:31</span>           nathanmarz </span><span>@darwin ok give the latest 0.13.1-SNAPSHOT a shot</span></div><div id="t1476453334002057" t="2016-10-14 13:55:34 nathanmarz should be fixed"><a href="#t1476453334002057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">13:55:34</span>           nathanmarz </span><span>should be fixed</span></div><div id="t1476453423002058" t="2016-10-14 13:57:03 darwin @nathanmarz thanks a lot! going to test it now"><a href="#t1476453423002058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">13:57:03</span>               darwin </span><span>@nathanmarz thanks a lot! going to test it now</span></div><div id="t1476456802002061" t="2016-10-14 14:53:22 darwin @nathanmarz works for me, thanks for the quick fix!
 https://github.com/nathanmarz/specter/issues/152#issuecomment-253822990"><a href="#t1476456802002061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">14:53:22</span>               darwin </span><span>@nathanmarz works for me, thanks for the quick fix!
</span><a href="https://github.com/nathanmarz/specter/issues/152#issuecomment-253822990" target="_blank">https://github.com/nathanmarz/specter/issues/152#issuecomment-253822990</a></div><div id="t1476457016002063" t="2016-10-14 14:56:56 nathanmarz @darwin awesome, thanks for tracking it down"><a href="#t1476457016002063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-14</span> <span class="t" onclick="H(this)">14:56:56</span>           nathanmarz </span><span>@darwin awesome, thanks for tracking it down</span></div><div id="t1476738760002311" t="2016-10-17 21:12:40 nahuel is possible to use specter to dissoc? ej, transform  {:a {:b 1 :c 2}} to {:a {:c 2}} ?"><a href="#t1476738760002311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:12:40</span>               nahuel </span><span>is possible to use specter to dissoc? ej, transform  {:a {:b 1 :c 2}} to {:a {:c 2}} ?</span></div><div id="t1476739349002312" t="2016-10-17 21:22:29 nathanmarz @nahuel You can just do  (transform :a #(dissoc % :b) data)"><a href="#t1476739349002312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:22:29</span>           nathanmarz </span><span>@nahuel You can just do </span><code>(transform :a #(dissoc % :b) data)</code></div><div id="t1476739372002313" t="2016-10-17 21:22:52 nathanmarz I have a utility function to help with it:  (defn dissocer [k] (fn [m] (dissoc m k)))"><a href="#t1476739372002313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:22:52</span>           nathanmarz </span><span>I have a utility function to help with it: </span><code>(defn dissocer [k] (fn [m] (dissoc m k)))</code></div><div id="t1476739386002314" t="2016-10-17 21:23:06 nathanmarz so you can do  (transform :a (dissocer :b) data)"><a href="#t1476739386002314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:23:06</span>           nathanmarz </span><span>so you can do </span><code>(transform :a (dissocer :b) data)</code></div><div id="t1476739429002315" t="2016-10-17 21:23:49 nathanmarz there&apos;s also some thought about extending  ALL  and  keypath  to be able to remove elements on this issue  https://github.com/nathanmarz/specter/issues/117"><a href="#t1476739429002315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:23:49</span>           nathanmarz </span><span>there&apos;s also some thought about extending </span><code>ALL</code><span> and </span><code>keypath</code><span> to be able to remove elements on this issue </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a></div><div id="t1476739450002317" t="2016-10-17 21:24:10 nathanmarz but you could always just make your own navigator with that functionality"><a href="#t1476739450002317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:24:10</span>           nathanmarz </span><span>but you could always just make your own navigator with that functionality</span></div><div id="t1476740138002318" t="2016-10-17 21:35:38 nahuel nathanmarz: thanks"><a href="#t1476740138002318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:35:38</span>               nahuel </span><span>nathanmarz: thanks</span></div><div id="t1476740501002320" t="2016-10-17 21:41:41 nahuel why this doesnt work? (setval [:a #{1 2} ] :y {:a {1 :z 2 :z 3 :z }})  .. I expected {:a {1 :y, 2 :y, 3 :z}} but the map is unchanged (I&apos;m trying to use the set as a predicate)"><a href="#t1476740501002320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:41:41</span>               nahuel </span><span>why this doesnt work? (setval [:a #{1 2} ] :y {:a {1 :z 2 :z 3 :z }})  .. I expected {:a {1 :y, 2 :y, 3 :z}} but the map is unchanged (I&apos;m trying to use the set as a predicate)</span></div><div id="t1476740694002321" t="2016-10-17 21:44:54 nathanmarz sets are interpreted as filter predicates"><a href="#t1476740694002321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:44:54</span>           nathanmarz </span><span>sets are interpreted as filter predicates</span></div><div id="t1476740716002322" t="2016-10-17 21:45:16 nathanmarz (#{1 2} {1 :z 2 :z 3 :z })  is false, so it stops navigation at that point"><a href="#t1476740716002322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:45:16</span>           nathanmarz </span><code>(#{1 2} {1 :z 2 :z 3 :z })</code><span> is false, so it stops navigation at that point</span></div><div id="t1476740747002323" t="2016-10-17 21:45:47 nathanmarz @nahuel you should do this:  (setval [:a (multi-path (keypath 1) (keypath 2))] :y {:a {1 :z 2 :z 3 :z }}) "><a href="#t1476740747002323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:45:47</span>           nathanmarz </span><span>@nahuel you should do this: </span><code>(setval [:a (multi-path (keypath 1) (keypath 2))] :y {:a {1 :z 2 :z 3 :z }}) </code></div><div id="t1476740894002324" t="2016-10-17 21:48:14 nahuel but what if the keys are stored in a set? (it can be variable)"><a href="#t1476740894002324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">21:48:14</span>               nahuel </span><span>but what if the keys are stored in a set? (it can be variable)</span></div><div id="t1476742093002326" t="2016-10-17 22:08:13 nathanmarz probably the easiest is to do  (setval [:a (apply multi-path #{1 2})] ...)"><a href="#t1476742093002326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:08:13</span>           nathanmarz </span><span>probably the easiest is to do </span><code>(setval [:a (apply multi-path #{1 2})] ...)</code></div><div id="t1476742210002327" t="2016-10-17 22:10:10 nahuel mm, my set can be very big, I think there is some limitation for apply on the number of arguments"><a href="#t1476742210002327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:10:10</span>               nahuel </span><span>mm, my set can be very big, I think there is some limitation for apply on the number of arguments</span></div><div id="t1476742562002332" t="2016-10-17 22:16:02 nathanmarz there&apos;s not"><a href="#t1476742562002332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:16:02</span>           nathanmarz </span><span>there&apos;s not</span></div><div id="t1476742580002333" t="2016-10-17 22:16:20 nathanmarz (apply + (range 100000))  =&gt; 4999950000"><a href="#t1476742580002333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:16:20</span>           nathanmarz </span><code>(apply + (range 100000))</code><span> =&gt; 4999950000</span></div><div id="t1476742633002334" t="2016-10-17 22:17:13 nathanmarz actually the code I gave you isn&apos;t quite right, it should be  (setval [:a (apply multi-path (map keypath #{1 2}))] ...)"><a href="#t1476742633002334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:17:13</span>           nathanmarz </span><span>actually the code I gave you isn&apos;t quite right, it should be </span><code>(setval [:a (apply multi-path (map keypath #{1 2}))] ...)</code></div><div id="t1476742651002335" t="2016-10-17 22:17:31 nahuel oh, thanks"><a href="#t1476742651002335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-17</span> <span class="t" onclick="H(this)">22:17:31</span>               nahuel </span><span>oh, thanks</span></div><div id="t1476785466002368" t="2016-10-18 10:11:06 madstap You can actually apply a function to an infinite list"><a href="#t1476785466002368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-18</span> <span class="t" onclick="H(this)">10:11:06</span>              madstap </span><span>You can actually apply a function to an infinite list</span></div><div id="t1476976517002541" t="2016-10-20 15:15:17 joshkh howdy! just curious about a behaviour in the following example:
 (s/select [:a s/ALL (juxt :start :end)]
                  {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
 
yields  [{:start 1, :middle 9, :end 2} {:start 3, :middle 9, :end 4}] 
when i would have expected just :start and :end keys in the resulting maps."><a href="#t1476976517002541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:15:17</span>               joshkh </span><span>howdy! just curious about a behaviour in the following example:
</span><pre>(s/select [:a s/ALL (juxt :start :end)]
                  {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
</pre><span>
yields </span><code>[{:start 1, :middle 9, :end 2} {:start 3, :middle 9, :end 4}]</code><span>
when i would have expected just :start and :end keys in the resulting maps.</span></div><div id="t1476976615002542" t="2016-10-20 15:16:55 joshkh i thought multipath might allow me to collect the two values but this throws an exception in cljs:
 (s/select [:a s/ALL (s/multi-path :start :end)]
                  {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
"><a href="#t1476976615002542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:16:55</span>               joshkh </span><span>i thought multipath might allow me to collect the two values but this throws an exception in cljs:
</span><pre>(s/select [:a s/ALL (s/multi-path :start :end)]
                  {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
</pre></div><div id="t1476976663002543" t="2016-10-20 15:17:43 joshkh when i really just wanted  [[1 2] [3 4]"><a href="#t1476976663002543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:17:43</span>               joshkh </span><span>when i really just wanted </span><code>[[1 2] [3 4]</code></div><div id="t1476976811002544" t="2016-10-20 15:20:11 joshkh i could just throw an anonymous function in there, something like (vals (select-keys..."><a href="#t1476976811002544" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:20:11</span>               joshkh </span><span>i could just throw an anonymous function in there, something like (vals (select-keys...</span></div><div id="t1476976830002545" t="2016-10-20 15:20:30 exupero In the  juxt  example, I’m guessing the function is treated as a predicate, so it returns anything for which that predicate returns a truthy result, not the truthy result itself."><a href="#t1476976830002545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:20:30</span>              exupero </span><span>In the </span><code>juxt</code><span> example, I’m guessing the function is treated as a predicate, so it returns anything for which that predicate returns a truthy result, not the truthy result itself.</span></div><div id="t1476976856002546" t="2016-10-20 15:20:56 joshkh ah, that makes sense"><a href="#t1476976856002546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:20:56</span>               joshkh </span><span>ah, that makes sense</span></div><div id="t1476976898002547" t="2016-10-20 15:21:38 joshkh (and i lied about the anonymous function - like you said it&apos;s treated as a predicate)"><a href="#t1476976898002547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:21:38</span>               joshkh </span><span>(and i lied about the anonymous function - like you said it&apos;s treated as a predicate)</span></div><div id="t1476977239002548" t="2016-10-20 15:27:19 nathanmarz @joshkh what exception are you getting? that works fine for me in a cljs repl"><a href="#t1476977239002548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:27:19</span>           nathanmarz </span><span>@joshkh what exception are you getting? that works fine for me in a cljs repl</span></div><div id="t1476977377002549" t="2016-10-20 15:29:37 joshkh specter.cljc?rel=1476963781628:1049 Uncaught TypeError: G__36053.select_STAR_ is not a function"><a href="#t1476977377002549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:29:37</span>               joshkh </span><code>specter.cljc?rel=1476963781628:1049 Uncaught TypeError: G__36053.select_STAR_ is not a function</code></div><div id="t1476977419002550" t="2016-10-20 15:30:19 joshkh using  [com.rpl/specter &quot;0.13.0&quot;]"><a href="#t1476977419002550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:30:19</span>               joshkh </span><span>using </span><code>[com.rpl/specter &quot;0.13.0&quot;]</code></div><div id="t1476977441002551" t="2016-10-20 15:30:41 nathanmarz oh"><a href="#t1476977441002551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:30:41</span>           nathanmarz </span><span>oh</span></div><div id="t1476977453002552" t="2016-10-20 15:30:53 nathanmarz yea that bug is fixed in master"><a href="#t1476977453002552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:30:53</span>           nathanmarz </span><span>yea that bug is fixed in master</span></div><div id="t1476977457002553" t="2016-10-20 15:30:57 nathanmarz try 0.13.1-SNAPSHOT"><a href="#t1476977457002553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:30:57</span>           nathanmarz </span><span>try 0.13.1-SNAPSHOT</span></div><div id="t1476977556002554" t="2016-10-20 15:32:36 joshkh it worked! thanks  🙂"><a href="#t1476977556002554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:32:36</span>               joshkh </span><span>it worked! thanks </span><b>🙂</b></div><div id="t1476977558002555" t="2016-10-20 15:32:38 nathanmarz also if you want to get  [[1 2] [3 4]]  as the result do this:
  (select [:a s/ALL (s/collect-one :start) :end]
        {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
"><a href="#t1476977558002555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:32:38</span>           nathanmarz </span><span>also if you want to get </span><code>[[1 2] [3 4]]</code><span> as the result do this:
 </span><pre>(select [:a s/ALL (s/collect-one :start) :end]
        {:a [{:start 1 :middle 9 :end 2} {:start 3 :middle 9 :end 4}]})
</pre></div><div id="t1476977696002557" t="2016-10-20 15:34:56 joshkh oh right. i had tried calling  collect-one  for each respective key but couldn&apos;t figure out how to &quot;drop&quot; the rest from the selection resulting in  [1 3 {entire-node}]"><a href="#t1476977696002557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:34:56</span>               joshkh </span><span>oh right. i had tried calling </span><code>collect-one</code><span> for each respective key but couldn&apos;t figure out how to &quot;drop&quot; the rest from the selection resulting in </span><code>[1 3 {entire-node}]</code></div><div id="t1476977699002558" t="2016-10-20 15:34:59 joshkh as always, thanks for the help"><a href="#t1476977699002558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:34:59</span>               joshkh </span><span>as always, thanks for the help</span></div><div id="t1476977722002559" t="2016-10-20 15:35:22 nathanmarz no problem, glad I was helpful"><a href="#t1476977722002559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-20</span> <span class="t" onclick="H(this)">15:35:22</span>           nathanmarz </span><span>no problem, glad I was helpful</span></div><div id="t1477417588002768" t="2016-10-25 17:46:28 nlessa Hi,
How could I solve in specter this problem? Given a key (eg: :e) located in an undetermined nested level of a map return the map with only the keys that compose the path to reach it. 
 For example: 
{:a 1 :b {:c 2 :d {:e 3 :f 4} :g {:e 5 :h 8}}}

 --&gt; {:b {:d {:e 3} :g {:e 5}}}"><a href="#t1477417588002768" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-25</span> <span class="t" onclick="H(this)">17:46:28</span>               nlessa </span><span>Hi,
How could I solve in specter this problem? Given a key (eg: :e) located in an undetermined nested level of a map return the map with only the keys that compose the path to reach it. 
</span><pre>For example: 
{:a 1 :b {:c 2 :d {:e 3 :f 4} :g {:e 5 :h 8}}}

 --&gt; {:b {:d {:e 3} :g {:e 5}}}</pre></div><div id="t1477427296002789" t="2016-10-25 20:28:16 nathanmarz @nlessa two ways to go about it"><a href="#t1477427296002789" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-25</span> <span class="t" onclick="H(this)">20:28:16</span>           nathanmarz </span><span>@nlessa two ways to go about it</span></div><div id="t1477427326002790" t="2016-10-25 20:28:46 nathanmarz first is to use  select  with a recursive path + value collection to get the sequence of paths to your desired key/values. Then construct the nested map manually"><a href="#t1477427326002790" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-25</span> <span class="t" onclick="H(this)">20:28:46</span>           nathanmarz </span><span>first is to use </span><code>select</code><span> with a recursive path + value collection to get the sequence of paths to your desired key/values. Then construct the nested map manually</span></div><div id="t1477427413002791" t="2016-10-25 20:30:13 nathanmarz second is to make a new navigator like  ALL  that removes values when  NONE  is returned on transformation"><a href="#t1477427413002791" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-25</span> <span class="t" onclick="H(this)">20:30:13</span>           nathanmarz </span><span>second is to make a new navigator like </span><code>ALL</code><span> that removes values when </span><code>NONE</code><span> is returned on transformation</span></div><div id="t1477427427002792" t="2016-10-25 20:30:27 nathanmarz with that you could solve your use case with a single  transform  call"><a href="#t1477427427002792" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-25</span> <span class="t" onclick="H(this)">20:30:27</span>           nathanmarz </span><span>with that you could solve your use case with a single </span><code>transform</code><span> call</span></div><div id="t1477648268002891" t="2016-10-28 09:51:08 achesnais @nathanmarz don’t know if this is a silly question or not, but is there any remote chance or plan to have specter become part of clojure.core?"><a href="#t1477648268002891" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">09:51:08</span>            achesnais </span><span>@nathanmarz don’t know if this is a silly question or not, but is there any remote chance or plan to have specter become part of clojure.core?</span></div><div id="t1477648298002892" t="2016-10-28 09:51:38 achesnais And if not I’d be interested to know if there’s a specific reason why in terms of design philosophy etc."><a href="#t1477648298002892" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">09:51:38</span>            achesnais </span><span>And if not I’d be interested to know if there’s a specific reason why in terms of design philosophy etc.</span></div><div id="t1477648300002893" t="2016-10-28 09:51:40 achesnais 🙂"><a href="#t1477648300002893" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">09:51:40</span>            achesnais </span><b>🙂</b></div><div id="t1477651823002897" t="2016-10-28 10:50:23 darwin I’m afraid it works the other way around, there may be no specific reasons why something is not in core. To get something into the core there must be very compelling reasons for it. I mean really compelling. Being a popular/useful/well-maintained/general library is not enough of itself. One such compelling reason I could imagine with specter would be the core library using specter internally, so it would make sense to expose it as well. Similar to clojure.spec. Or another reason could be when specter could not be implemented as a library and would have to be implemented as part of core for some reason… just my $0.02 thoughts"><a href="#t1477651823002897" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">10:50:23</span>               darwin </span><span>I’m afraid it works the other way around, there may be no specific reasons why something is not in core. To get something into the core there must be very compelling reasons for it. I mean really compelling. Being a popular/useful/well-maintained/general library is not enough of itself. One such compelling reason I could imagine with specter would be the core library using specter internally, so it would make sense to expose it as well. Similar to clojure.spec. Or another reason could be when specter could not be implemented as a library and would have to be implemented as part of core for some reason… just my $0.02 thoughts</span></div><div id="t1477659628002901" t="2016-10-28 13:00:28 nathanmarz @achesnais @darwin I get that question a lot and I understand why"><a href="#t1477659628002901" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">13:00:28</span>           nathanmarz </span><span>@achesnais @darwin I get that question a lot and I understand why</span></div><div id="t1477659687002902" t="2016-10-28 13:01:27 nathanmarz Specter solves such a fundamental, universal problem that I do believe it makes Clojure much stronger, so in that sense it would make sense to be distributed with the language"><a href="#t1477659687002902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">13:01:27</span>           nathanmarz </span><span>Specter solves such a fundamental, universal problem that I do believe it makes Clojure much stronger, so in that sense it would make sense to be distributed with the language</span></div><div id="t1477659910002903" t="2016-10-28 13:05:10 nathanmarz ultimately though it&apos;s not up to me what goes into core"><a href="#t1477659910002903" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span> <span class="t" onclick="H(this)">13:05:10</span>           nathanmarz </span><span>ultimately though it&apos;s not up to me what goes into core</span></div><div id="t1477895149002999" t="2016-10-31 06:25:49 kzeidler Specter looks really cool, but I can&apos;t figure out how to import it. How do I actually use the library in a namespace?"><a href="#t1477895149002999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:25:49</span>             kzeidler </span><span>Specter looks really cool, but I can&apos;t figure out how to import it. How do I actually use the library in a namespace?</span></div><div id="t1477895176003000" t="2016-10-31 06:26:16 kzeidler Preferably without the prefix, as demonstrated in the examples"><a href="#t1477895176003000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:26:16</span>             kzeidler </span><span>Preferably without the prefix, as demonstrated in the examples</span></div><div id="t1477895335003001" t="2016-10-31 06:28:55 aengelberg @kzeidler:  (use &apos;com.rpl.specter) ?"><a href="#t1477895335003001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:28:55</span>           aengelberg </span><span>@kzeidler: </span><code>(use &apos;com.rpl.specter)</code><span>?</span></div><div id="t1477895474003002" t="2016-10-31 06:31:14 kzeidler I get: `Only :refer-clojure, :require, :require-macros, :use, :use-macros, and :import libspecs supported at line 1 src/succulent/core.cljs"><a href="#t1477895474003002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:31:14</span>             kzeidler </span><span>I get: `Only :refer-clojure, :require, :require-macros, :use, :use-macros, and :import libspecs supported at line 1 src/succulent/core.cljs</span></div><div id="t1477895560003003" t="2016-10-31 06:32:40 kzeidler aha, taking it out of the (ns ...) s-expr does work though"><a href="#t1477895560003003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:32:40</span>             kzeidler </span><span>aha, taking it out of the (ns ...) s-expr does work though</span></div><div id="t1477895613003004" t="2016-10-31 06:33:33 kzeidler What&apos;s the idiomatic way to put this in my code? Just place it after the ns definition?"><a href="#t1477895613003004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:33:33</span>             kzeidler </span><span>What&apos;s the idiomatic way to put this in my code? Just place it after the ns definition?</span></div><div id="t1477895907003005" t="2016-10-31 06:38:27 kzeidler Spoke too soon. It compiled with your suggestion, but isn&apos;t able to find a definition for any of its functions"><a href="#t1477895907003005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:38:27</span>             kzeidler </span><span>Spoke too soon. It compiled with your suggestion, but isn&apos;t able to find a definition for any of its functions</span></div><div id="t1477895921003006" t="2016-10-31 06:38:41 kzeidler And in the repl: (use &apos;com.rpl.specter)
clojure.lang.ExceptionInfo: Only [lib.ns :only (names)] and optionally  :rename {from to}  specs supported in :use / :use-macros; offending spec: [com.rpl.specter] at line 1 &lt;cljs repl&gt; {:file &quot;&lt;cljs repl&gt;&quot;, :line 1, :column 1, :root-source-info {:source-type :fragment, :source-form (ns succulent.core (:use [com.rpl.specter]))}, :tag :cljs/analysis-error}"><a href="#t1477895921003006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">06:38:41</span>             kzeidler </span><span>And in the repl: (use &apos;com.rpl.specter)
clojure.lang.ExceptionInfo: Only [lib.ns :only (names)] and optionally </span><code>:rename {from to}</code><span> specs supported in :use / :use-macros; offending spec: [com.rpl.specter] at line 1 &lt;cljs repl&gt; {:file &quot;&lt;cljs repl&gt;&quot;, :line 1, :column 1, :root-source-info {:source-type :fragment, :source-form (ns succulent.core (:use [com.rpl.specter]))}, :tag :cljs/analysis-error}</span></div><div id="t1477914399003019" t="2016-10-31 11:46:39 nathanmarz @kzeidler in clojurescript you can&apos;t do  use , you have to do  require"><a href="#t1477914399003019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">11:46:39</span>           nathanmarz </span><span>@kzeidler in clojurescript you can&apos;t do </span><code>use</code><span>, you have to do </span><code>require</code></div><div id="t1477914505003020" t="2016-10-31 11:48:25 nathanmarz if you don&apos;t want the prefix in cljs you have to enumerate every symbol you want to import, e.g.  (require &apos;[com.rpl.specter :refer [ALL srange keypath]])"><a href="#t1477914505003020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-31</span> <span class="t" onclick="H(this)">11:48:25</span>           nathanmarz </span><span>if you don&apos;t want the prefix in cljs you have to enumerate every symbol you want to import, e.g. </span><code>(require &apos;[com.rpl.specter :refer [ALL srange keypath]])</code></div><div id="t1478016055003066" t="2016-11-01 16:00:55 joshkh i noticed that adding specter to my clojurescript project increased the compiled file size from 550kb to 830kb after google closure advanced optimization. that&apos;s quite an increase, and i&apos;m only referencing  [select ALL] . does that seem normal?"><a href="#t1478016055003066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:00:55</span>               joshkh </span><span>i noticed that adding specter to my clojurescript project increased the compiled file size from 550kb to 830kb after google closure advanced optimization. that&apos;s quite an increase, and i&apos;m only referencing </span><code>[select ALL]</code><span>. does that seem normal?</span></div><div id="t1478017108003067" t="2016-11-01 16:18:28 nathanmarz @joshkh I&apos;m not familiar enough with cljs to understand those details"><a href="#t1478017108003067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:18:28</span>           nathanmarz </span><span>@joshkh I&apos;m not familiar enough with cljs to understand those details</span></div><div id="t1478017129003068" t="2016-11-01 16:18:49 nathanmarz any idea what the increase is? the compiled js for specter?"><a href="#t1478017129003068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:18:49</span>           nathanmarz </span><span>any idea what the increase is? the compiled js for specter?</span></div><div id="t1478017277003069" t="2016-11-01 16:21:17 joshkh i&apos;ll investigate. it&apos;s a bit hard to tell at first glance because advanced optimization munges everything into one garbled file."><a href="#t1478017277003069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:21:17</span>               joshkh </span><span>i&apos;ll investigate. it&apos;s a bit hard to tell at first glance because advanced optimization munges everything into one garbled file.</span></div><div id="t1478017299003070" t="2016-11-01 16:21:39 joshkh i&apos;ll try the same with simple optimization and see where it gets me  🙂"><a href="#t1478017299003070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:21:39</span>               joshkh </span><span>i&apos;ll try the same with simple optimization and see where it gets me </span><b>🙂</b></div><div id="t1478017305003071" t="2016-11-01 16:21:45 nathanmarz ok, thanks"><a href="#t1478017305003071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:21:45</span>           nathanmarz </span><span>ok, thanks</span></div><div id="t1478017313003072" t="2016-11-01 16:21:53 nathanmarz might be a good idea to open an issue on this to track it"><a href="#t1478017313003072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:21:53</span>           nathanmarz </span><span>might be a good idea to open an issue on this to track it</span></div><div id="t1478017379003073" t="2016-11-01 16:22:59 joshkh gotcha, will do"><a href="#t1478017379003073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:22:59</span>               joshkh </span><span>gotcha, will do</span></div><div id="t1478018239003074" t="2016-11-01 16:37:19 shooodooken Having some issues transforming map:
I expected the output to be  {:parent {:grandchild {}}} 

 (require &apos;[com.rpl.specter.macros :as spm])
(require &apos;[com.rpl.specter :as sp])

(spm/transform [:parent sp/ALL] #(get-in % [:child]) {:parent {:child {:grandchild {}}}})
=&gt; {:parent {nil nil}} 

Running this will get me close to the desired output:

 (spm/transform [:parent sp/ALL] #(get-in % [:child]) {:parent [{:child {:grandchild {}}}]})
=&gt; {:parent [{:grandchild {}}]}"><a href="#t1478018239003074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:37:19</span>          shooodooken </span><span>Having some issues transforming map:
I expected the output to be </span><code>{:parent {:grandchild {}}}</code><span>

</span><pre>(require &apos;[com.rpl.specter.macros :as spm])
(require &apos;[com.rpl.specter :as sp])

(spm/transform [:parent sp/ALL] #(get-in % [:child]) {:parent {:child {:grandchild {}}}})
=&gt; {:parent {nil nil}}</pre><span>

Running this will get me close to the desired output:

</span><pre>(spm/transform [:parent sp/ALL] #(get-in % [:child]) {:parent [{:child {:grandchild {}}}]})
=&gt; {:parent [{:grandchild {}}]}</pre></div><div id="t1478018270003075" t="2016-11-01 16:37:50 shooodooken how can i achieve the desired result without changing the datastructure?"><a href="#t1478018270003075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">16:37:50</span>          shooodooken </span><span>how can i achieve the desired result without changing the datastructure?</span></div><div id="t1478021099003077" t="2016-11-01 17:24:59 shooodooken reading the docs for ALL ({:doc &quot;Navigate to every element of the collection. For maps navigates to
          a vector of  [key value] .&quot;}) tells me I&apos;ll have to deconstruct &amp; reconstruct data structure manually."><a href="#t1478021099003077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">17:24:59</span>          shooodooken </span><span>reading the docs for ALL ({:doc &quot;Navigate to every element of the collection. For maps navigates to
          a vector of </span><code>[key value]</code><span>.&quot;}) tells me I&apos;ll have to deconstruct &amp; reconstruct data structure manually.</span></div><div id="t1478025552003081" t="2016-11-01 18:39:12 nathanmarz @shooodooken is this what you want?
 (transform :parent :child  {:parent {:child {:grandchild {}}}})
"><a href="#t1478025552003081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">18:39:12</span>           nathanmarz </span><span>@shooodooken is this what you want?
</span><pre>(transform :parent :child  {:parent {:child {:grandchild {}}}})
</pre></div><div id="t1478036029003088" t="2016-11-01 21:33:49 shooodooken yes sir, thank you. (the real code was bit more tricky but dropping the ALL was ultimately what I needed)"><a href="#t1478036029003088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-01</span> <span class="t" onclick="H(this)">21:33:49</span>          shooodooken </span><span>yes sir, thank you. (the real code was bit more tricky but dropping the ALL was ultimately what I needed)</span></div><div id="t1478506573003277" t="2016-11-07 08:16:13 tianshu Hi, I&apos;m new to specter, I&apos;m very exciting about specter. 
And I&apos;m trying to use it, does specter ship some features like threading macros? 
I want to use specter to do something following:
 (-&gt;&gt; {&quot;20161106020&quot; {:3010 {}
                       :3006 {:3 &quot;3.10&quot;
                              :1 &quot;3.55&quot;
                              :0 &quot;18.00&quot;}}
        &quot;20161106021&quot; {:3010 {:3 &quot;3.00&quot;}
                       :3006 {:3 &quot;2.00&quot;}}}

       (map (fn [kv]
              (-&gt;&gt; (peek kv)
                   (map (fn [kv1]
                         (count (peek kv1))))
                   (reduce +))))
       (reduce *))
 
what I want is simplify this piece of code with specter. wonder if someone could give me an example.
appreciate for any help, thanks!"><a href="#t1478506573003277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">08:16:13</span>              tianshu </span><span>Hi, I&apos;m new to specter, I&apos;m very exciting about specter. 
And I&apos;m trying to use it, does specter ship some features like threading macros? 
I want to use specter to do something following:
</span><pre>(-&gt;&gt; {&quot;20161106020&quot; {:3010 {}
                       :3006 {:3 &quot;3.10&quot;
                              :1 &quot;3.55&quot;
                              :0 &quot;18.00&quot;}}
        &quot;20161106021&quot; {:3010 {:3 &quot;3.00&quot;}
                       :3006 {:3 &quot;2.00&quot;}}}

       (map (fn [kv]
              (-&gt;&gt; (peek kv)
                   (map (fn [kv1]
                         (count (peek kv1))))
                   (reduce +))))
       (reduce *))
</pre><span>
what I want is simplify this piece of code with specter. wonder if someone could give me an example.
appreciate for any help, thanks!</span></div><div id="t1478522421003285" t="2016-11-07 12:40:21 nathanmarz @doglooksgood here&apos;s one way to do it with specter:
 (defn sum [args] (reduce + args))
(reduce * (traverse [MAP-VALS (subselect MAP-VALS (view count)) (view sum)] data))
"><a href="#t1478522421003285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">12:40:21</span>           nathanmarz </span><span>@doglooksgood here&apos;s one way to do it with specter:
</span><pre>(defn sum [args] (reduce + args))
(reduce * (traverse [MAP-VALS (subselect MAP-VALS (view count)) (view sum)] data))
</pre></div><div id="t1478522460003286" t="2016-11-07 12:41:00 nathanmarz if there were a  traversed  navigator builder along the lines of  transformed , you could do it like this:
 (reduce * (traverse [MAP-VALS (traversed [MAP-VALS (view count)] +)] data))
"><a href="#t1478522460003286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">12:41:00</span>           nathanmarz </span><span>if there were a </span><code>traversed</code><span> navigator builder along the lines of </span><code>transformed</code><span>, you could do it like this:
</span><pre>(reduce * (traverse [MAP-VALS (traversed [MAP-VALS (view count)] +)] data))
</pre></div><div id="t1478522507003287" t="2016-11-07 12:41:47 nathanmarz the former (which currently works) does materialize some intermediate subsequences, while the latter would not, so the latter would be close to optimal efficiency"><a href="#t1478522507003287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">12:41:47</span>           nathanmarz </span><span>the former (which currently works) does materialize some intermediate subsequences, while the latter would not, so the latter would be close to optimal efficiency</span></div><div id="t1478522775003288" t="2016-11-07 12:46:15 nathanmarz (defdynamicnav traversed
  &quot;Navigates to a view of the current value by transforming with a reduction over
   the specified traversal.&quot;
  [path reduce-fn]
  (late-bound-nav [late (late-path path)
                   late-fn reduce-fn]
    (select* [this structure next-fn]
      (next-fn (reduce late-fn (compiled-traverse late structure))))
    (transform* [this structure next-fn]
      (next-fn (reduce late-fn (compiled-traverse late structure)))
      )))
"><a href="#t1478522775003288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">12:46:15</span>           nathanmarz </span><pre>(defdynamicnav traversed
  &quot;Navigates to a view of the current value by transforming with a reduction over
   the specified traversal.&quot;
  [path reduce-fn]
  (late-bound-nav [late (late-path path)
                   late-fn reduce-fn]
    (select* [this structure next-fn]
      (next-fn (reduce late-fn (compiled-traverse late structure))))
    (transform* [this structure next-fn]
      (next-fn (reduce late-fn (compiled-traverse late structure)))
      )))
</pre></div><div id="t1478522782003289" t="2016-11-07 12:46:22 nathanmarz I&apos;ll add that to the next version"><a href="#t1478522782003289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">12:46:22</span>           nathanmarz </span><span>I&apos;ll add that to the next version</span></div><div id="t1478536097003297" t="2016-11-07 16:28:17 nathanmarz Released 0.13.1  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1478536097003297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">16:28:17</span>           nathanmarz </span><span>Released 0.13.1 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1478546683003300" t="2016-11-07 19:24:43 danielcompton @nathanmarz is this you?  http://rpl.com/"><a href="#t1478546683003300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">19:24:43</span>        danielcompton </span><span>@nathanmarz is this you? </span><a href="http://rpl.com/" target="_blank">http://rpl.com/</a></div><div id="t1478547117003301" t="2016-11-07 19:31:57 nathanmarz @danielcompton no lol"><a href="#t1478547117003301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">19:31:57</span>           nathanmarz </span><span>@danielcompton no lol</span></div><div id="t1478547125003302" t="2016-11-07 19:32:05 nathanmarz I haven&apos;t put up a website yet"><a href="#t1478547125003302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">19:32:05</span>           nathanmarz </span><span>I haven&apos;t put up a website yet</span></div><div id="t1478591782003321" t="2016-11-08 07:56:22 levitanong It would suck for renaissance partners, ltd. if they decided to make a clojure library, and found out they couldn’t use the  com.rpl  namespace  😛"><a href="#t1478591782003321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">07:56:22</span>           levitanong </span><span>It would suck for renaissance partners, ltd. if they decided to make a clojure library, and found out they couldn’t use the </span><code>com.rpl</code><span> namespace </span><b>😛</b></div><div id="t1478622908003334" t="2016-11-08 16:35:08 zane Can anyone think of what the root cause for intermittent  java.lang.ClassCastException: clojure.lang.Var$Unbound cannot be cast to com.rpl.specter.MutableCell  would be?"><a href="#t1478622908003334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">16:35:08</span>                 zane </span><span>Can anyone think of what the root cause for intermittent </span><code>java.lang.ClassCastException: clojure.lang.Var$Unbound cannot be cast to com.rpl.specter.MutableCell</code><span> would be?</span></div><div id="t1478623720003335" t="2016-11-08 16:48:40 nathanmarz @zane what version of Specter?"><a href="#t1478623720003335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">16:48:40</span>           nathanmarz </span><span>@zane what version of Specter?</span></div><div id="t1478623730003336" t="2016-11-08 16:48:50 nathanmarz and what&apos;s the full stack trace?"><a href="#t1478623730003336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">16:48:50</span>           nathanmarz </span><span>and what&apos;s the full stack trace?</span></div><div id="t1478625000003337" t="2016-11-08 17:10:00 zane @nathanmarz:  [com.rpl/specter &quot;0.12.0&quot;]"><a href="#t1478625000003337" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">17:10:00</span>                 zane </span><span>@nathanmarz: </span><code>[com.rpl/specter &quot;0.12.0&quot;]</code></div><div id="t1478625010003338" t="2016-11-08 17:10:10 zane I&apos;ll get you the stack trace. One moment."><a href="#t1478625010003338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">17:10:10</span>                 zane </span><span>I&apos;ll get you the stack trace. One moment.</span></div><div id="t1478625725003339" t="2016-11-08 17:22:05 zane @nathanmarz, the Specter part of the stack trace is just:
 com.rpl.specter.impl/get-cell                 impl.clj:  469
java.lang.ClassCastException: clojure.lang.Var$Unbound cannot be cast to com.rpl.specter.MutableCell
"><a href="#t1478625725003339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">17:22:05</span>                 zane </span><span>@nathanmarz, the Specter part of the stack trace is just:
</span><pre>com.rpl.specter.impl/get-cell                 impl.clj:  469
java.lang.ClassCastException: clojure.lang.Var$Unbound cannot be cast to com.rpl.specter.MutableCell
</pre></div><div id="t1478629677003347" t="2016-11-08 18:27:57 bfabry we get those all the time as well using specter in a distributed env. I suspect it&apos;s got something to do with caching paths"><a href="#t1478629677003347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">18:27:57</span>               bfabry </span><span>we get those all the time as well using specter in a distributed env. I suspect it&apos;s got something to do with caching paths</span></div><div id="t1478632902003348" t="2016-11-08 19:21:42 nathanmarz there was a bug in 0.11.2 with that exception related to aot compilation that was fixed in 0.12.0"><a href="#t1478632902003348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:21:42</span>           nathanmarz </span><span>there was a bug in 0.11.2 with that exception related to aot compilation that was fixed in 0.12.0</span></div><div id="t1478632916003349" t="2016-11-08 19:21:56 nathanmarz @zane @bfabry I&apos;ll need a reproducible test case"><a href="#t1478632916003349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:21:56</span>           nathanmarz </span><span>@zane @bfabry I&apos;ll need a reproducible test case</span></div><div id="t1478632950003350" t="2016-11-08 19:22:30 bfabry you won&apos;t be getting one from me  😛"><a href="#t1478632950003350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:22:30</span>               bfabry </span><span>you won&apos;t be getting one from me </span><b>😛</b></div><div id="t1478632958003351" t="2016-11-08 19:22:38 bfabry haha"><a href="#t1478632958003351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:22:38</span>               bfabry </span><span>haha</span></div><div id="t1478633019003352" t="2016-11-08 19:23:39 zane Yeah, I wish. It&apos;s very intermittent. I haven&apos;t found a way to reproduce it reliably yet."><a href="#t1478633019003352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:23:39</span>                 zane </span><span>Yeah, I wish. It&apos;s very intermittent. I haven&apos;t found a way to reproduce it reliably yet.</span></div><div id="t1478633049003353" t="2016-11-08 19:24:09 bfabry the error happens for us in an environment that&apos;s serializing classes and sending them over the wire, deserializing and executing. it&apos;s way through the looking glass as far as me actually expecting anyone to support it goes. fortunately by virtue of it being distributed it also retries, and then it starts working. so it&apos;s way down on my list of things to care about"><a href="#t1478633049003353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:24:09</span>               bfabry </span><span>the error happens for us in an environment that&apos;s serializing classes and sending them over the wire, deserializing and executing. it&apos;s way through the looking glass as far as me actually expecting anyone to support it goes. fortunately by virtue of it being distributed it also retries, and then it starts working. so it&apos;s way down on my list of things to care about</span></div><div id="t1478633066003354" t="2016-11-08 19:24:26 nathanmarz The section of the code where it was coming from in the old bug is here:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L233"><a href="#t1478633066003354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:24:26</span>           nathanmarz </span><span>The section of the code where it was coming from in the old bug is here: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L233" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L233</a></div><div id="t1478633082003356" t="2016-11-08 19:24:42 nathanmarz as you can see, it now catches ClassCastException there"><a href="#t1478633082003356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:24:42</span>           nathanmarz </span><span>as you can see, it now catches ClassCastException there</span></div><div id="t1478633150003357" t="2016-11-08 19:25:50 nathanmarz only possibility is  bound?  is returning true for  clojure.lang.Var$Unbound"><a href="#t1478633150003357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:25:50</span>           nathanmarz </span><span>only possibility is </span><code>bound?</code><span> is returning true for </span><code>clojure.lang.Var$Unbound</code></div><div id="t1478633167003358" t="2016-11-08 19:26:07 nathanmarz @zane is the context of these exceptions also a distributed env?"><a href="#t1478633167003358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:26:07</span>           nathanmarz </span><span>@zane is the context of these exceptions also a distributed env?</span></div><div id="t1478633383003359" t="2016-11-08 19:29:43 zane I might needs some help understanding what you mean by a &quot;distributed env&quot;. It&apos;s a web server with multiple threads?"><a href="#t1478633383003359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:29:43</span>                 zane </span><span>I might needs some help understanding what you mean by a &quot;distributed env&quot;. It&apos;s a web server with multiple threads?</span></div><div id="t1478633878003362" t="2016-11-08 19:37:58 nathanmarz ok, that&apos;s good to know"><a href="#t1478633878003362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:37:58</span>           nathanmarz </span><span>ok, that&apos;s good to know</span></div><div id="t1478633902003363" t="2016-11-08 19:38:22 nathanmarz by distributed env I mean something like Hadoop where you serialize/deserialize objects"><a href="#t1478633902003363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:38:22</span>           nathanmarz </span><span>by distributed env I mean something like Hadoop where you serialize/deserialize objects</span></div><div id="t1478634029003364" t="2016-11-08 19:40:29 zane Oh, no."><a href="#t1478634029003364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:40:29</span>                 zane </span><span>Oh, no.</span></div><div id="t1478634030003365" t="2016-11-08 19:40:30 zane Nothing like that."><a href="#t1478634030003365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span> <span class="t" onclick="H(this)">19:40:30</span>                 zane </span><span>Nothing like that.</span></div><div id="t1478700247003391" t="2016-11-09 14:04:07 nathanmarz @zane @bfabry found a race condition in that code that could cause the exception you were seeing, it&apos;s fixed in master"><a href="#t1478700247003391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span> <span class="t" onclick="H(this)">14:04:07</span>           nathanmarz </span><span>@zane @bfabry found a race condition in that code that could cause the exception you were seeing, it&apos;s fixed in master</span></div><div id="t1478704685003392" t="2016-11-09 15:18:05 zane Oh wow. Thanks, Nathan!"><a href="#t1478704685003392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span> <span class="t" onclick="H(this)">15:18:05</span>                 zane </span><span>Oh wow. Thanks, Nathan!</span></div><div id="t1478742077003415" t="2016-11-10 01:41:17 tianshu @nathanmarz Thanks for the help. It&apos;s very useful!"><a href="#t1478742077003415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">01:41:17</span>              tianshu </span><span>@nathanmarz Thanks for the help. It&apos;s very useful!</span></div><div id="t1478771459003423" t="2016-11-10 09:50:59 fredokun Hi there. Lately, I pretty much enjoy writing specter one-liners, neat!"><a href="#t1478771459003423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:50:59</span>             fredokun </span><span>Hi there. Lately, I pretty much enjoy writing specter one-liners, neat!</span></div><div id="t1478771622003430" t="2016-11-10 09:53:42 fredokun I have a probably numb question but is it possible in  (transform PATH f val)  to make 
the transformation somewhat depend on the application of val.

I give an example (on which I stumbled multiple times)...
Consider a map like this:

  `"><a href="#t1478771622003430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:53:42</span>             fredokun </span><span>I have a probably numb question but is it possible in </span><code>(transform PATH f val)</code><span> to make 
the transformation somewhat depend on the application of val.

I give an example (on which I stumbled multiple times)...
Consider a map like this:

</span><code></code><span>`</span></div><div id="t1478771745003431" t="2016-11-10 09:55:45 fredokun { :a 2 :b 1 :c 3}
 
And I would like to e.g. decrement all VALS and, at the same time, 
remove all the pairs whose value gets to 0, i.e. :

  `"><a href="#t1478771745003431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:55:45</span>             fredokun </span><pre>{ :a 2 :b 1 :c 3}
</pre><span>
And I would like to e.g. decrement all VALS and, at the same time, 
remove all the pairs whose value gets to 0, i.e. :

</span><code></code><span>`</span></div><div id="t1478771751003432" t="2016-11-10 09:55:51 fredokun "><a href="#t1478771751003432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:55:51</span>             fredokun </span><pre></pre></div><div id="t1478771855003433" t="2016-11-10 09:57:35 fredokun (sorry for the very bad slack edits, I&apos;m new here ;-)...

So I would like to obtain :

 { :a 1 :c 3}    and  :b  is no more ...

Thanks in advance (and sorry again for the awfully bad typing above)."><a href="#t1478771855003433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:57:35</span>             fredokun </span><span>(sorry for the very bad slack edits, I&apos;m new here ;-)...

So I would like to obtain :

</span><code>{ :a 1 :c 3}</code><span>   and </span><code>:b</code><span> is no more ...

Thanks in advance (and sorry again for the awfully bad typing above).</span></div><div id="t1478771915003434" t="2016-11-10 09:58:35 fredokun (plus I see that it&apos;s the middle of the night in the U.S. and no one&apos;s here ;-).  See you later then !"><a href="#t1478771915003434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">09:58:35</span>             fredokun </span><span>(plus I see that it&apos;s the middle of the night in the U.S. and no one&apos;s here ;-).  See you later then !</span></div><div id="t1478780612003435" t="2016-11-10 12:23:32 fredokun (oops)
To rephrase myself: is it possible in  (transform PATH f val)  to make
the transformation somewhat depend on the application of  f  ?"><a href="#t1478780612003435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">12:23:32</span>             fredokun </span><span>(oops)
To rephrase myself: is it possible in </span><code>(transform PATH f val)</code><span> to make
the transformation somewhat depend on the application of </span><code>f</code><span> ?</span></div><div id="t1478781321003436" t="2016-11-10 12:35:21 nathanmarz @fredokun there&apos;s discussion of a feature for that here:  https://github.com/nathanmarz/specter/issues/117"><a href="#t1478781321003436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">12:35:21</span>           nathanmarz </span><span>@fredokun there&apos;s discussion of a feature for that here: </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a></div><div id="t1478781328003438" t="2016-11-10 12:35:28 nathanmarz you could always make that navigator yourself"><a href="#t1478781328003438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">12:35:28</span>           nathanmarz </span><span>you could always make that navigator yourself</span></div><div id="t1478781360003439" t="2016-11-10 12:36:00 nathanmarz keypath ,  MAP-VALS , and  ALL  could have that functionality"><a href="#t1478781360003439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">12:36:00</span>           nathanmarz </span><code>keypath</code><span>, </span><code>MAP-VALS</code><span>, and </span><code>ALL</code><span> could have that functionality</span></div><div id="t1478798160003446" t="2016-11-10 17:16:00 fredokun thanks for the reply I will look at the issue and try to do something !"><a href="#t1478798160003446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">17:16:00</span>             fredokun </span><span>thanks for the reply I will look at the issue and try to do something !</span></div><div id="t1478801779003453" t="2016-11-10 18:16:19 zane I wish specs were … Specter-aware, if that makes sense."><a href="#t1478801779003453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">18:16:19</span>                 zane </span><span>I wish specs were … Specter-aware, if that makes sense.</span></div><div id="t1478801813003454" t="2016-11-10 18:16:53 zane Haven&apos;t completely thought this through."><a href="#t1478801813003454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">18:16:53</span>                 zane </span><span>Haven&apos;t completely thought this through.</span></div><div id="t1478801829003455" t="2016-11-10 18:17:09 zane But it would be nice to be able to use Specter selectors in specs rather than traditional keypaths."><a href="#t1478801829003455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-10</span> <span class="t" onclick="H(this)">18:17:09</span>                 zane </span><span>But it would be nice to be able to use Specter selectors in specs rather than traditional keypaths.</span></div><div id="t1478865307003480" t="2016-11-11 11:55:07 nathanmarz @zane I haven&apos;t dug that much into Spec yet, care to show an example of what you mean?"><a href="#t1478865307003480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">11:55:07</span>           nathanmarz </span><span>@zane I haven&apos;t dug that much into Spec yet, care to show an example of what you mean?</span></div><div id="t1478871436003482" t="2016-11-11 13:37:16 imre hi all"><a href="#t1478871436003482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:37:16</span>                 imre </span><span>hi all</span></div><div id="t1478871489003483" t="2016-11-11 13:38:09 imre I would be grateful if someone could give me advice on building paths dynamically using a navigator in 0.13.1"><a href="#t1478871489003483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:38:09</span>                 imre </span><span>I would be grateful if someone could give me advice on building paths dynamically using a navigator in 0.13.1</span></div><div id="t1478871507003484" t="2016-11-11 13:38:27 imre my navigator is like this"><a href="#t1478871507003484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:38:27</span>                 imre </span><span>my navigator is like this</span></div><div id="t1478871511003485" t="2016-11-11 13:38:31 imre (sp/defnav
  EID
  [eid]
  (select* [{:keys [eid]} structure next-fn] (eid-nav-select* eid structure next-fn))
  (transform* [{:keys [eid]} structure next-fn] (eid-nav-transform* eid structure next-fn)))"><a href="#t1478871511003485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:38:31</span>                 imre </span><pre>(sp/defnav
  EID
  [eid]
  (select* [{:keys [eid]} structure next-fn] (eid-nav-select* eid structure next-fn))
  (transform* [{:keys [eid]} structure next-fn] (eid-nav-transform* eid structure next-fn)))</pre></div><div id="t1478871580003486" t="2016-11-11 13:39:40 imre and this is how I try to build a path from a list of keys"><a href="#t1478871580003486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:39:40</span>                 imre </span><span>and this is how I try to build a path from a list of keys</span></div><div id="t1478871583003487" t="2016-11-11 13:39:43 imre (defn- specter-path [ks]
  (map #(if (u/uuid? %)
          (EID %)
          %)
       ks))"><a href="#t1478871583003487" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:39:43</span>                 imre </span><pre>(defn- specter-path [ks]
  (map #(if (u/uuid? %)
          (EID %)
          %)
       ks))</pre></div><div id="t1478871668003488" t="2016-11-11 13:41:08 imre and getting a  Cannot statically combine sequential when not in nav pos  error when invoking specter-path"><a href="#t1478871668003488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:41:08</span>                 imre </span><span>and getting a </span><code>Cannot statically combine sequential when not in nav pos</code><span> error when invoking specter-path</span></div><div id="t1478872140003489" t="2016-11-11 13:49:00 imre well actually the error comes when I try to use the path in a call to  setval"><a href="#t1478872140003489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">13:49:00</span>                 imre </span><span>well actually the error comes when I try to use the path in a call to </span><code>setval</code></div><div id="t1478872927003490" t="2016-11-11 14:02:07 imre well, I managed to fix it however I don&apos;t exactly know why it failed."><a href="#t1478872927003490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:02:07</span>                 imre </span><span>well, I managed to fix it however I don&apos;t exactly know why it failed.</span></div><div id="t1478872936003491" t="2016-11-11 14:02:16 imre so the calling code looked like this:"><a href="#t1478872936003491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:02:16</span>                 imre </span><span>so the calling code looked like this:</span></div><div id="t1478872956003492" t="2016-11-11 14:02:36 imre (-&gt; (concat [:_entity] ks)
          specter-path
          (sp/setval value stored-entity))
"><a href="#t1478872956003492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:02:36</span>                 imre </span><pre>(-&gt; (concat [:_entity] ks)
          specter-path
          (sp/setval value stored-entity))
</pre></div><div id="t1478873038003495" t="2016-11-11 14:03:58 imre but when I defined this function
 (defn- setval [apath aval structure]
  (sp/setval apath aval structure))
 
and replaced  sp/setval  with  setval  inside the threading macro, it worked"><a href="#t1478873038003495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:03:58</span>                 imre </span><span>but when I defined this function
</span><pre>(defn- setval [apath aval structure]
  (sp/setval apath aval structure))
</pre><span>
and replaced </span><code>sp/setval</code><span> with </span><code>setval</code><span> inside the threading macro, it worked</span></div><div id="t1478873538003496" t="2016-11-11 14:12:18 nathanmarz @imre that looks like a bug"><a href="#t1478873538003496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:12:18</span>           nathanmarz </span><span>@imre that looks like a bug</span></div><div id="t1478873550003497" t="2016-11-11 14:12:30 nathanmarz can you open an issue on github for it?"><a href="#t1478873550003497" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:12:30</span>           nathanmarz </span><span>can you open an issue on github for it?</span></div><div id="t1478873575003498" t="2016-11-11 14:12:55 nathanmarz you can workaround it by doing  (let [p (specter-path ...)] (setval p ...))"><a href="#t1478873575003498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:12:55</span>           nathanmarz </span><span>you can workaround it by doing </span><code>(let [p (specter-path ...)] (setval p ...))</code></div><div id="t1478873629003499" t="2016-11-11 14:13:49 imre thanks @nathanmarz I&apos;ll open one - is it okay if I just put this chatlog in there?"><a href="#t1478873629003499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:13:49</span>                 imre </span><span>thanks @nathanmarz I&apos;ll open one - is it okay if I just put this chatlog in there?</span></div><div id="t1478873745003500" t="2016-11-11 14:15:45 nathanmarz sure"><a href="#t1478873745003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:15:45</span>           nathanmarz </span><span>sure</span></div><div id="t1478873864003501" t="2016-11-11 14:17:44 imre https://github.com/nathanmarz/specter/issues/157  added, thanks again!"><a href="#t1478873864003501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:17:44</span>                 imre </span><a href="https://github.com/nathanmarz/specter/issues/157" target="_blank">https://github.com/nathanmarz/specter/issues/157</a><span> added, thanks again!</span></div><div id="t1478873876003503" t="2016-11-11 14:17:56 imre and btw specter absolutely rocks"><a href="#t1478873876003503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:17:56</span>                 imre </span><span>and btw specter absolutely rocks</span></div><div id="t1478875141003504" t="2016-11-11 14:39:01 nathanmarz thanks"><a href="#t1478875141003504" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span> <span class="t" onclick="H(this)">14:39:01</span>           nathanmarz </span><span>thanks</span></div><div id="t1479220428003650" t="2016-11-15 14:33:48 nathanmarz in a transform,  view  replaces whatever is at that point with the result of the view function before continuing the transform"><a href="#t1479220428003650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">14:33:48</span>           nathanmarz </span><span>in a transform, </span><code>view</code><span> replaces whatever is at that point with the result of the view function before continuing the transform</span></div><div id="t1479220618003651" t="2016-11-15 14:36:58 achesnais I got that – but here, shouldn’t  :value  and  (view :value)  be equivalent?"><a href="#t1479220618003651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">14:36:58</span>            achesnais </span><span>I got that – but here, shouldn’t </span><code>:value</code><span> and </span><code>(view :value)</code><span> be equivalent?</span></div><div id="t1479220654003652" t="2016-11-15 14:37:34 achesnais (your lib is so great by the way)"><a href="#t1479220654003652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">14:37:34</span>            achesnais </span><span>(your lib is so great by the way)</span></div><div id="t1479221174003653" t="2016-11-15 14:46:14 nathanmarz no,  :value  on its own navigates to the subvalue and continues the transform from there"><a href="#t1479221174003653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">14:46:14</span>           nathanmarz </span><span>no, </span><code>:value</code><span> on its own navigates to the subvalue and continues the transform from there</span></div><div id="t1479221221003654" t="2016-11-15 14:47:01 nathanmarz (transform :a afn data)  is the same as  (update data :a afn)"><a href="#t1479221221003654" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">14:47:01</span>           nathanmarz </span><code>(transform :a afn data)</code><span> is the same as </span><code>(update data :a afn)</code></div><div id="t1479228956003661" t="2016-11-15 16:55:56 achesnais Ohhh"><a href="#t1479228956003661" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">16:55:56</span>            achesnais </span><span>Ohhh</span></div><div id="t1479228957003662" t="2016-11-15 16:55:57 achesnais okay"><a href="#t1479228957003662" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">16:55:57</span>            achesnais </span><span>okay</span></div><div id="t1479228960003663" t="2016-11-15 16:56:00 achesnais I think I got it"><a href="#t1479228960003663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">16:56:00</span>            achesnais </span><span>I think I got it</span></div><div id="t1479228966003664" t="2016-11-15 16:56:06 achesnais Thank you!"><a href="#t1479228966003664" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span> <span class="t" onclick="H(this)">16:56:06</span>            achesnais </span><span>Thank you!</span></div><div id="t1479341629003707" t="2016-11-17 00:13:49 wei is there a way to get the next/previous element of an collection in a transformation?  [1 2 3]  =&gt;  [[1 0] [2 1] [3 2]]"><a href="#t1479341629003707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span> <span class="t" onclick="H(this)">00:13:49</span>                  wei </span><span>is there a way to get the next/previous element of an collection in a transformation? </span><code>[1 2 3]</code><span> =&gt; </span><code>[[1 0] [2 1] [3 2]]</code></div><div id="t1479342778003708" t="2016-11-17 00:32:58 wei use case + hacky solution:  ((fn [xs]
   (concat [(first xs)]
           (-&gt;&gt; (partition 2 1 xs)
                (map (fn [[prev cur]] (assoc cur :prev prev))))))
 [{:id 1} {:id 2} {:id 3} {:id 4}])
=&gt; ({:id 1} {:id 2, :prev {:id 1}} {:id 3, :prev {:id 2}} {:id 4, :prev {:id 3}})
"><a href="#t1479342778003708" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span> <span class="t" onclick="H(this)">00:32:58</span>                  wei </span><span>use case + hacky solution: </span><pre>((fn [xs]
   (concat [(first xs)]
           (-&gt;&gt; (partition 2 1 xs)
                (map (fn [[prev cur]] (assoc cur :prev prev))))))
 [{:id 1} {:id 2} {:id 3} {:id 4}])
=&gt; ({:id 1} {:id 2, :prev {:id 1}} {:id 3, :prev {:id 2}} {:id 4, :prev {:id 3}})
</pre></div><div id="t1479498105003777" t="2016-11-18 19:41:45 nathanmarz @wei you can use com.rpl.specter.zipper for that"><a href="#t1479498105003777" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-18</span> <span class="t" onclick="H(this)">19:41:45</span>           nathanmarz </span><span>@wei you can use com.rpl.specter.zipper for that</span></div><div id="t1479933356003944" t="2016-11-23 20:35:56 caio failing on the following  providepath :
 (sp/declarepath map-walker)
(sp/providepath map-walker
                 [(sp/walker map?)
                  (sp/continue-then-stay sp/MAP-VALS map-walker)])
"><a href="#t1479933356003944" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">20:35:56</span>                 caio </span><span>failing on the following </span><code>providepath</code><span>:
</span><pre>(sp/declarepath map-walker)
(sp/providepath map-walker
                 [(sp/walker map?)
                  (sp/continue-then-stay sp/MAP-VALS map-walker)])
</pre></div><div id="t1479934907003952" t="2016-11-23 21:01:47 nathanmarz @caio what version of specter?"><a href="#t1479934907003952" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:01:47</span>           nathanmarz </span><span>@caio what version of specter?</span></div><div id="t1479934919003953" t="2016-11-23 21:01:59 nathanmarz are you doing aot compilation?"><a href="#t1479934919003953" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:01:59</span>           nathanmarz </span><span>are you doing aot compilation?</span></div><div id="t1479936670003954" t="2016-11-23 21:31:10 caio [com.rpl/specter “0 .13.1”]`"><a href="#t1479936670003954" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:31:10</span>                 caio </span><code>[com.rpl/specter “0</code><span>.13.1”]`</span></div><div id="t1479936699003955" t="2016-11-23 21:31:39 caio yep, I’m doing aot compilation"><a href="#t1479936699003955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:31:39</span>                 caio </span><span>yep, I’m doing aot compilation</span></div><div id="t1479937900003956" t="2016-11-23 21:51:40 nathanmarz @caio ok"><a href="#t1479937900003956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:51:40</span>           nathanmarz </span><span>@caio ok</span></div><div id="t1479937908003957" t="2016-11-23 21:51:48 nathanmarz could you open an issue for this? don&apos;t have time to look at it now"><a href="#t1479937908003957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">21:51:48</span>           nathanmarz </span><span>could you open an issue for this? don&apos;t have time to look at it now</span></div><div id="t1479941807003959" t="2016-11-23 22:56:47 bfabry slightly gross:
 (sp/transform [:parent sp/ALL #(= :children (first %)) sp/LAST] identity {:parent {:something {}}})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL #(= :children (first %)) sp/LAST] identity {:parent {:something {} :children 1}})
=&gt; {:parent {:something {}, :children 1}}
"><a href="#t1479941807003959" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">22:56:47</span>               bfabry </span><span>slightly gross:
</span><pre>(sp/transform [:parent sp/ALL #(= :children (first %)) sp/LAST] identity {:parent {:something {}}})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL #(= :children (first %)) sp/LAST] identity {:parent {:something {} :children 1}})
=&gt; {:parent {:something {}, :children 1}}
</pre></div><div id="t1479942167003960" t="2016-11-23 23:02:47 shooodooken :+1:   gives me the correct result so not too gross. looks like i can drop the sp/LAST aswell.
 (sp/transform [:parent sp/ALL #(= :children (first %))] identity {:parent {:something {}}})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL #(= :children (first %))] identity {:parent {:something {} :children 1}})
=&gt; {:parent {:something {}, :children 1}}"><a href="#t1479942167003960" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:02:47</span>          shooodooken </span><b>:+1:</b><span>  gives me the correct result so not too gross. looks like i can drop the sp/LAST aswell.
</span><pre>(sp/transform [:parent sp/ALL #(= :children (first %))] identity {:parent {:something {}}})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL #(= :children (first %))] identity {:parent {:something {} :children 1}})
=&gt; {:parent {:something {}, :children 1}}</pre></div><div id="t1479942191003961" t="2016-11-23 23:03:11 shooodooken i&apos;m still thinking there must be a cleaner way out there"><a href="#t1479942191003961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:03:11</span>          shooodooken </span><span>i&apos;m still thinking there must be a cleaner way out there</span></div><div id="t1479942195003962" t="2016-11-23 23:03:15 bfabry yeah"><a href="#t1479942195003962" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:03:15</span>               bfabry </span><span>yeah</span></div><div id="t1479942204003963" t="2016-11-23 23:03:24 shooodooken must be a common enough scenario"><a href="#t1479942204003963" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:03:24</span>          shooodooken </span><span>must be a common enough scenario</span></div><div id="t1479942217003964" t="2016-11-23 23:03:37 bfabry I guess it defaults to this way because that&apos;s what update-in does"><a href="#t1479942217003964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:03:37</span>               bfabry </span><span>I guess it defaults to this way because that&apos;s what update-in does</span></div><div id="t1479942432003965" t="2016-11-23 23:07:12 shooodooken i could have sworn i already unsuccessfully tried what i&apos;m about to post..
 (sp/transform [:parent sp/ALL (sp/selected? :children)] identity {:parent {:something {} }})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL (sp/selected? :children)] identity {:parent {:something {},:children 1 }})
=&gt; {:parent {:something {}, :children 1}}"><a href="#t1479942432003965" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:07:12</span>          shooodooken </span><span>i could have sworn i already unsuccessfully tried what i&apos;m about to post..
</span><pre>(sp/transform [:parent sp/ALL (sp/selected? :children)] identity {:parent {:something {} }})
=&gt; {:parent {:something {}}}
(sp/transform [:parent sp/ALL (sp/selected? :children)] identity {:parent {:something {},:children 1 }})
=&gt; {:parent {:something {}, :children 1}}</pre></div><div id="t1479942463003966" t="2016-11-23 23:07:43 shooodooken but it works!"><a href="#t1479942463003966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:07:43</span>          shooodooken </span><span>but it works!</span></div><div id="t1479942508003967" t="2016-11-23 23:08:28 bfabry I think the difference is the sp/ALL bit"><a href="#t1479942508003967" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:08:28</span>               bfabry </span><span>I think the difference is the sp/ALL bit</span></div><div id="t1479942587003968" t="2016-11-23 23:09:47 shooodooken hmm."><a href="#t1479942587003968" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:09:47</span>          shooodooken </span><span>hmm.</span></div><div id="t1479942612003969" t="2016-11-23 23:10:12 shooodooken i&apos;m looking at transform now and thinking maybe i should be wrapping everything in sp/selected?

 (sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something {},:children 1 }})
=&gt; {:parent {:something {}, :children 1}}"><a href="#t1479942612003969" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:10:12</span>          shooodooken </span><span>i&apos;m looking at transform now and thinking maybe i should be wrapping everything in sp/selected?

</span><pre>(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something {},:children 1 }})
=&gt; {:parent {:something {}, :children 1}}</pre></div><div id="t1479942649003970" t="2016-11-23 23:10:49 shooodooken so if it doesn&apos;t exist, it&apos;s not created. not sure if that&apos;s sane or not?!"><a href="#t1479942649003970" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:10:49</span>          shooodooken </span><span>so if it doesn&apos;t exist, it&apos;s not created. not sure if that&apos;s sane or not?!</span></div><div id="t1479942672003971" t="2016-11-23 23:11:12 shooodooken (sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {})
=&gt; {}"><a href="#t1479942672003971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:11:12</span>          shooodooken </span><pre>(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {})
=&gt; {}</pre></div><div id="t1479942786003973" t="2016-11-23 23:13:06 bfabry not sure it&apos;s doing what you expect
 (sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {})
=&gt; {}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent nil})
=&gt; {:parent nil}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something nil}})
=&gt; {:parent {:something nil}}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something nil :children nil}})
=&gt; {:parent {:something nil, :children nil}}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] (constantly &apos;foo) {:parent {:something nil :children nil}})
=&gt; foo
"><a href="#t1479942786003973" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:13:06</span>               bfabry </span><span>not sure it&apos;s doing what you expect
</span><pre>(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {})
=&gt; {}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent nil})
=&gt; {:parent nil}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something nil}})
=&gt; {:parent {:something nil}}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] identity {:parent {:something nil :children nil}})
=&gt; {:parent {:something nil, :children nil}}
(sp/transform [(sp/selected? :parent) (sp/selected? :children)] (constantly &apos;foo) {:parent {:something nil :children nil}})
=&gt; foo
</pre></div><div id="t1479942903003974" t="2016-11-23 23:15:03 shooodooken you are correct...damn.!"><a href="#t1479942903003974" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:15:03</span>          shooodooken </span><span>you are correct...damn.!</span></div><div id="t1479943680003975" t="2016-11-23 23:28:00 bfabry found it"><a href="#t1479943680003975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:28:00</span>               bfabry </span><span>found it</span></div><div id="t1479943685003976" t="2016-11-23 23:28:05 bfabry undocumented function, sp/must"><a href="#t1479943685003976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:28:05</span>               bfabry </span><span>undocumented function, sp/must</span></div><div id="t1479943699003977" t="2016-11-23 23:28:19 bfabry (sp/transform [(sp/must :parent)] (constantly &apos;foo) {})
=&gt; {}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {}})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {:children {}}})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {:children {} :foo nil
                                                              }})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent) (sp/must :children)] (constantly &apos;foo) {:parent {:children {} :foo nil}})
=&gt; {:parent {:children foo, :foo nil}}
(sp/transform [(sp/must :parent) (sp/must :children)] (constantly &apos;foo) {:parent { :foo nil}})
=&gt; {:parent {:foo nil}}
"><a href="#t1479943699003977" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:28:19</span>               bfabry </span><pre>(sp/transform [(sp/must :parent)] (constantly &apos;foo) {})
=&gt; {}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {}})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {:children {}}})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent)] (constantly &apos;foo) {:parent {:children {} :foo nil
                                                              }})
=&gt; {:parent foo}
(sp/transform [(sp/must :parent) (sp/must :children)] (constantly &apos;foo) {:parent {:children {} :foo nil}})
=&gt; {:parent {:children foo, :foo nil}}
(sp/transform [(sp/must :parent) (sp/must :children)] (constantly &apos;foo) {:parent { :foo nil}})
=&gt; {:parent {:foo nil}}
</pre></div><div id="t1479943768003978" t="2016-11-23 23:29:28 bfabry actually that&apos;s not true, it has a docstring, just not visible from core"><a href="#t1479943768003978" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:29:28</span>               bfabry </span><span>actually that&apos;s not true, it has a docstring, just not visible from core</span></div><div id="t1479943775003979" t="2016-11-23 23:29:35 bfabry https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L421"><a href="#t1479943775003979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:29:35</span>               bfabry </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L421" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L421</a></div><div id="t1479943914003981" t="2016-11-23 23:31:54 shooodooken super. that&apos;s the one."><a href="#t1479943914003981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:31:54</span>          shooodooken </span><span>super. that&apos;s the one.</span></div><div id="t1479943918003982" t="2016-11-23 23:31:58 shooodooken thanks a lot"><a href="#t1479943918003982" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:31:58</span>          shooodooken </span><span>thanks a lot</span></div><div id="t1479943965003983" t="2016-11-23 23:32:45 bfabry np"><a href="#t1479943965003983" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-23</span> <span class="t" onclick="H(this)">23:32:45</span>               bfabry </span><span>np</span></div><div id="t1480008060004008" t="2016-11-24 17:21:00 caio @nathanmarz sorry for the delay. I’ve created the issue here, with a repo that reproduces the bug:  https://github.com/nathanmarz/specter/issues/160"><a href="#t1480008060004008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-24</span> <span class="t" onclick="H(this)">17:21:00</span>                 caio </span><span>@nathanmarz sorry for the delay. I’ve created the issue here, with a repo that reproduces the bug: </span><a href="https://github.com/nathanmarz/specter/issues/160" target="_blank">https://github.com/nathanmarz/specter/issues/160</a></div><div id="t1480047095004022" t="2016-11-25 04:11:35 nathanmarz @caio thanks"><a href="#t1480047095004022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-25</span> <span class="t" onclick="H(this)">04:11:35</span>           nathanmarz </span><span>@caio thanks</span></div><div id="t1480435132004176" t="2016-11-29 15:58:52 zane Out of curiosity, why is there no  MAP-KEYS ?"><a href="#t1480435132004176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">15:58:52</span>                 zane </span><span>Out of curiosity, why is there no </span><code>MAP-KEYS</code><span>?</span></div><div id="t1480435196004177" t="2016-11-29 15:59:56 nathanmarz @zane never had a need for it"><a href="#t1480435196004177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">15:59:56</span>           nathanmarz </span><span>@zane never had a need for it</span></div><div id="t1480435215004178" t="2016-11-29 16:00:15 nathanmarz you can make an inefficient one like this:  (def MAP-KEYS (comp-paths ALL FIRST))"><a href="#t1480435215004178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">16:00:15</span>           nathanmarz </span><span>you can make an inefficient one like this: </span><code>(def MAP-KEYS (comp-paths ALL FIRST))</code></div><div id="t1480440964004185" t="2016-11-29 17:36:04 zane Huh. I might be misunderstanding what&apos;s happening here, but  ALL  seems to behave strangely on records."><a href="#t1480440964004185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">17:36:04</span>                 zane </span><span>Huh. I might be misunderstanding what&apos;s happening here, but </span><code>ALL</code><span> seems to behave strangely on records.</span></div><div id="t1480451243004186" t="2016-11-29 20:27:23 zane Is this user error?
 (defrecord Test [])
(transform [specter/ALL] identity (-&gt;Test))
;; =&gt; UnsupportedOperationException Can&apos;t create empty: test-ns.Test 
"><a href="#t1480451243004186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">20:27:23</span>                 zane </span><span>Is this user error?
</span><pre>(defrecord Test [])
(transform [specter/ALL] identity (-&gt;Test))
;; =&gt; UnsupportedOperationException Can&apos;t create empty: test-ns.Test 
</pre></div><div id="t1480451472004187" t="2016-11-29 20:31:12 nathanmarz @zane yes"><a href="#t1480451472004187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">20:31:12</span>           nathanmarz </span><span>@zane yes</span></div><div id="t1480451512004188" t="2016-11-29 20:31:52 nathanmarz ALL  works on vectors, maps, lists, queues"><a href="#t1480451512004188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">20:31:52</span>           nathanmarz </span><code>ALL</code><span> works on vectors, maps, lists, queues</span></div><div id="t1480454989004201" t="2016-11-29 21:29:49 zane Okay. Thanks, Nathan."><a href="#t1480454989004201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span> <span class="t" onclick="H(this)">21:29:49</span>                 zane </span><span>Okay. Thanks, Nathan.</span></div><div id="t1480488545004239" t="2016-11-30 06:49:05 mac @nathanmarz Offtopic: When is you start-up coming out of stealth? There must be a good story related to specter there  🙂"><a href="#t1480488545004239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">06:49:05</span>                  mac </span><span>@nathanmarz Offtopic: When is you start-up coming out of stealth? There must be a good story related to specter there </span><b>🙂</b></div><div id="t1480512139004246" t="2016-11-30 13:22:19 nathanmarz @mac not anytime soon"><a href="#t1480512139004246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:22:19</span>           nathanmarz </span><span>@mac not anytime soon</span></div><div id="t1480512201004247" t="2016-11-30 13:23:21 nathanmarz but yes, I use Specter extremely heavily"><a href="#t1480512201004247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:23:21</span>           nathanmarz </span><span>but yes, I use Specter extremely heavily</span></div><div id="t1480512254004248" t="2016-11-30 13:24:14 nathanmarz in my clojure/west talk I talked a little bit about my usage of it, which involves a lot of graph manipulation"><a href="#t1480512254004248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:24:14</span>           nathanmarz </span><span>in my clojure/west talk I talked a little bit about my usage of it, which involves a lot of graph manipulation</span></div><div id="t1480512375004249" t="2016-11-30 13:26:15 mac @nathanmarz Ok, funny you mention that because I think I might try to use it for something similar in the near future. Have you seen it used for AST manipulation?"><a href="#t1480512375004249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:26:15</span>                  mac </span><span>@nathanmarz Ok, funny you mention that because I think I might try to use it for something similar in the near future. Have you seen it used for AST manipulation?</span></div><div id="t1480513891004250" t="2016-11-30 13:51:31 nathanmarz that would be really straightforward with the graph navigators I talked about"><a href="#t1480513891004250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:51:31</span>           nathanmarz </span><span>that would be really straightforward with the graph navigators I talked about</span></div><div id="t1480513917004251" t="2016-11-30 13:51:57 nathanmarz if you&apos;re interested in making an open source version of those navigators I&apos;m happy to talk you through it"><a href="#t1480513917004251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">13:51:57</span>           nathanmarz </span><span>if you&apos;re interested in making an open source version of those navigators I&apos;m happy to talk you through it</span></div><div id="t1480525592004258" t="2016-11-30 17:06:32 mac @nathanmarz Sounds interesting. Will get to it in a couple of weeks probably."><a href="#t1480525592004258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">17:06:32</span>                  mac </span><span>@nathanmarz Sounds interesting. Will get to it in a couple of weeks probably.</span></div><div id="t1480546910004266" t="2016-11-30 23:01:50 nathanmarz @josh.freckleton it&apos;s possible, but I don&apos;t know if it&apos;s a good idea"><a href="#t1480546910004266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">23:01:50</span>           nathanmarz </span><span>@josh.freckleton it&apos;s possible, but I don&apos;t know if it&apos;s a good idea</span></div><div id="t1480546923004267" t="2016-11-30 23:02:03 nathanmarz doesn&apos;t feel like navigation to me"><a href="#t1480546923004267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">23:02:03</span>           nathanmarz </span><span>doesn&apos;t feel like navigation to me</span></div><div id="t1480546939004268" t="2016-11-30 23:02:19 nathanmarz you could make a custom navigator that does that though"><a href="#t1480546939004268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">23:02:19</span>           nathanmarz </span><span>you could make a custom navigator that does that though</span></div><div id="t1480547105004269" t="2016-11-30 23:05:05 bfabry (apply merge-with into (sp/transform sp/MAP-VALS vector [...])) is pretty terse anyway"><a href="#t1480547105004269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-30</span> <span class="t" onclick="H(this)">23:05:05</span>               bfabry </span><span>(apply merge-with into (sp/transform sp/MAP-VALS vector [...])) is pretty terse anyway</span></div><div id="t1480565640004282" t="2016-12-01 04:14:00 josh.freckleton @nathanmarz @bfabry thanks!"><a href="#t1480565640004282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">04:14:00</span>      josh.freckleton </span><span>@nathanmarz @bfabry thanks!</span></div><div id="t1480631446004308" t="2016-12-01 22:30:46 caio @nathanmarz I tracked the issue 160 to this line:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L263"><a href="#t1480631446004308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">22:30:46</span>                 caio </span><span>@nathanmarz I tracked the issue 160 to this line: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L263" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L263</a></div><div id="t1480631449004310" t="2016-12-01 22:30:49 caio removing the type hint solves it. I have no idea what that means ¯\(ツ)/¯"><a href="#t1480631449004310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">22:30:49</span>                 caio </span><span>removing the type hint solves it. I have no idea what that means ¯\(ツ)/¯</span></div><div id="t1480631927004312" t="2016-12-01 22:38:47 caio and when I print the result of the sexp, I get this:  #com.rpl.specter.impl.CachedPathInfo{:dynamic? false, :precompiled #object[com.rpl.specter.impl$combine_two_navs$reify__446 0x468dda3e  , so it is a cachedpathinfo"><a href="#t1480631927004312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">22:38:47</span>                 caio </span><span>and when I print the result of the sexp, I get this: </span><code>#com.rpl.specter.impl.CachedPathInfo{:dynamic? false, :precompiled #object[com.rpl.specter.impl$combine_two_navs$reify__446 0x468dda3e </code><span>, so it is a cachedpathinfo</span></div><div id="t1480633476004313" t="2016-12-01 23:04:36 caio related:  http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions  wtf..."><a href="#t1480633476004313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">23:04:36</span>                 caio </span><span>related: </span><a href="http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions" target="_blank">http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions</a><span> wtf...</span></div><div id="t1480633697004315" t="2016-12-01 23:08:17 caio also, is there a benchmark test so I can test the options? I opened a PR without the typehint, but I’m trying to explore it a little bit"><a href="#t1480633697004315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-01</span> <span class="t" onclick="H(this)">23:08:17</span>                 caio </span><span>also, is there a benchmark test so I can test the options? I opened a PR without the typehint, but I’m trying to explore it a little bit</span></div><div id="t1480683168004334" t="2016-12-02 12:52:48 nathanmarz @caio I&apos;d really like to understand the underlying issue rather than try to work around it"><a href="#t1480683168004334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">12:52:48</span>           nathanmarz </span><span>@caio I&apos;d really like to understand the underlying issue rather than try to work around it</span></div><div id="t1480683183004335" t="2016-12-02 12:53:03 nathanmarz that type hint should be working fine"><a href="#t1480683183004335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">12:53:03</span>           nathanmarz </span><span>that type hint should be working fine</span></div><div id="t1480683216004336" t="2016-12-02 12:53:36 nathanmarz only want to resort to workaround if there&apos;s no other option"><a href="#t1480683216004336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">12:53:36</span>           nathanmarz </span><span>only want to resort to workaround if there&apos;s no other option</span></div><div id="t1480695179004350" t="2016-12-02 16:12:59 caio @nathanmarz I understand that, but I don’t know if it’s worth it. It’s an obscure bug (all I found was one discussion) and you’re only using a record there because it’s faster to get the resulting instance’s attributes using interop. If you’re going to choose a data structure with the sole purpose of optimizing code, why not choose one that solves it and doesn’t touch a nasty trick involving clojure’s compilation and class generation?  🙂"><a href="#t1480695179004350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">16:12:59</span>                 caio </span><span>@nathanmarz I understand that, but I don’t know if it’s worth it. It’s an obscure bug (all I found was one discussion) and you’re only using a record there because it’s faster to get the resulting instance’s attributes using interop. If you’re going to choose a data structure with the sole purpose of optimizing code, why not choose one that solves it and doesn’t touch a nasty trick involving clojure’s compilation and class generation? </span><b>🙂</b></div><div id="t1480695319004351" t="2016-12-02 16:15:19 caio I think keeping this bug on the latest specter version is horrible (even worse than the lack of clarity introduced by my PR, IMHO). afaik, this is breaking at least one other open source library (xsc/invariant) and breaks a really common and simple use case for specter: recursive paths on projects that must be AOT compiled."><a href="#t1480695319004351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">16:15:19</span>                 caio </span><span>I think keeping this bug on the latest specter version is horrible (even worse than the lack of clarity introduced by my PR, IMHO). afaik, this is breaking at least one other open source library (xsc/invariant) and breaks a really common and simple use case for specter: recursive paths on projects that must be AOT compiled.</span></div><div id="t1480695388004352" t="2016-12-02 16:16:28 caio I am curious about what one would do to solve this bug without removing the record, but I also think there’re more important things to do other than trying to fix something without removing an optimisation “workaround”."><a href="#t1480695388004352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">16:16:28</span>                 caio </span><span>I am curious about what one would do to solve this bug without removing the record, but I also think there’re more important things to do other than trying to fix something without removing an optimisation “workaround”.</span></div><div id="t1480696883004353" t="2016-12-02 16:41:23 caio about the bug: it looks like the compilation generates two identical classes with names  com.rpl.specter.impl.CachedPathInfo$reify__XX  (they have different suffixes). it looks like what’s being said here is true:  http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions#20141210sl7tnec6xz46p5zfwwnn47er2a 
I have no idea how to tell clojure compiler to not recompile that class/ns."><a href="#t1480696883004353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">16:41:23</span>                 caio </span><span>about the bug: it looks like the compilation generates two identical classes with names </span><code>com.rpl.specter.impl.CachedPathInfo$reify__XX</code><span> (they have different suffixes). it looks like what’s being said here is true: </span><a href="http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions#20141210sl7tnec6xz46p5zfwwnn47er2a" target="_blank">http://grokbase.com/t/gg/clojure/14c6sjq7hx/debugging-myclass-cannot-be-cast-to-myclass-exceptions#20141210sl7tnec6xz46p5zfwwnn47er2a</a><span>
I have no idea how to tell clojure compiler to not recompile that class/ns.</span></div><div id="t1480699714004355" t="2016-12-02 17:28:34 caio @nathanmarz my last attempt on doing this: I implemented a native class for CachedPathInfo so it improves the benchmarks. I doesn’t make it less readable and works both in java/javascript (it uses a record impl on JS). if you don’t want to use simpler DS as a workaround for solving this issue, then maybe a DS that actually (slightly) improves specter’s performance may convince you to forget about this bug  😄 

the patch:  https://github.com/nathanmarz/specter/compare/master …caioaao:native-impl?expand=1
benchmark logs:  https://gist.github.com/caioaao/7f9c44db050aed9a5326cfd28f9efca0 
you can compare it with the benchmark I did using the master branch on my pc:  https://gist.github.com/caioaao/95a0cd834a08a777a184f5edf6c9bf00"><a href="#t1480699714004355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-02</span> <span class="t" onclick="H(this)">17:28:34</span>                 caio </span><span>@nathanmarz my last attempt on doing this: I implemented a native class for CachedPathInfo so it improves the benchmarks. I doesn’t make it less readable and works both in java/javascript (it uses a record impl on JS). if you don’t want to use simpler DS as a workaround for solving this issue, then maybe a DS that actually (slightly) improves specter’s performance may convince you to forget about this bug </span><b>😄</b><span>

the patch: </span><a href="https://github.com/nathanmarz/specter/compare/master" target="_blank">https://github.com/nathanmarz/specter/compare/master</a><span>…caioaao:native-impl?expand=1
benchmark logs: </span><a href="https://gist.github.com/caioaao/7f9c44db050aed9a5326cfd28f9efca0" target="_blank">https://gist.github.com/caioaao/7f9c44db050aed9a5326cfd28f9efca0</a><span>
you can compare it with the benchmark I did using the master branch on my pc: </span><a href="https://gist.github.com/caioaao/95a0cd834a08a777a184f5edf6c9bf00" target="_blank">https://gist.github.com/caioaao/95a0cd834a08a777a184f5edf6c9bf00</a></div><div id="t1480781145000014" t="2016-12-03 16:05:45 nathanmarz @caio thanks for the help figuring this out, I committed a fix to master"><a href="#t1480781145000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-03</span> <span class="t" onclick="H(this)">16:05:45</span>           nathanmarz </span><span>@caio thanks for the help figuring this out, I committed a fix to master</span></div><div id="t1480796052000015" t="2016-12-03 20:14:12 caio @nathanmarz no problem, I&apos;m glad this is solved  🙂  about the patch I posted before: is it still useful for optimization purposes? if not, I&apos;ll delete the branch"><a href="#t1480796052000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-03</span> <span class="t" onclick="H(this)">20:14:12</span>                 caio </span><span>@nathanmarz no problem, I&apos;m glad this is solved </span><b>🙂</b><span> about the patch I posted before: is it still useful for optimization purposes? if not, I&apos;ll delete the branch</span></div><div id="t1480796771000022" t="2016-12-03 20:26:11 caio adds some complexity and is really ugly for a marginal gain  so idk if it&apos;s worth it"><a href="#t1480796771000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-03</span> <span class="t" onclick="H(this)">20:26:11</span>                 caio </span><span>adds some complexity and is really ugly for a marginal gain  so idk if it&apos;s worth it</span></div><div id="t1480798009000023" t="2016-12-03 20:46:49 nathanmarz @caio no it&apos;s not, the bytecode won&apos;t be any different"><a href="#t1480798009000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-03</span> <span class="t" onclick="H(this)">20:46:49</span>           nathanmarz </span><span>@caio no it&apos;s not, the bytecode won&apos;t be any different</span></div><div id="t1481271002000211" t="2016-12-09 08:10:02 mpenet is there a (recommended) way to compose transforms ? I mean other than just (-&gt;&gt; x (transform ...) (transform ...)) etc"><a href="#t1481271002000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:10:02</span>               mpenet </span><span>is there a (recommended) way to compose transforms ? I mean other than just (-&gt;&gt; x (transform ...) (transform ...)) etc</span></div><div id="t1481271066000213" t="2016-12-09 08:11:06 mpenet I suspect there might be something to do that to allow a single pass over data applying all transforms in a smart way (or not)"><a href="#t1481271066000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:11:06</span>               mpenet </span><span>I suspect there might be something to do that to allow a single pass over data applying all transforms in a smart way (or not)</span></div><div id="t1481273422000214" t="2016-12-09 08:50:22 mpenet Oh I see  multi-transform  and  compiled-multi-transform  could be it"><a href="#t1481273422000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:50:22</span>               mpenet </span><span>Oh I see </span><code>multi-transform</code><span> and </span><code>compiled-multi-transform</code><span> could be it</span></div><div id="t1481273490000215" t="2016-12-09 08:51:30 bfabry I reckon the dot point at the bottom of the readme under &quot;Future work&quot; &quot;any connection to transducers?&quot; might be the final end game there  😉"><a href="#t1481273490000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:51:30</span>               bfabry </span><span>I reckon the dot point at the bottom of the readme under &quot;Future work&quot; &quot;any connection to transducers?&quot; might be the final end game there </span><b>😉</b></div><div id="t1481273535000216" t="2016-12-09 08:52:15 bfabry but I don&apos;t see anything atm"><a href="#t1481273535000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:52:15</span>               bfabry </span><span>but I don&apos;t see anything atm</span></div><div id="t1481273622000217" t="2016-12-09 08:53:42 mpenet yeah, hard to map to transducers maybe. I was more thinking of some kind of navigation/transformation planner depending on some composition of both"><a href="#t1481273622000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:53:42</span>               mpenet </span><span>yeah, hard to map to transducers maybe. I was more thinking of some kind of navigation/transformation planner depending on some composition of both</span></div><div id="t1481273683000218" t="2016-12-09 08:54:43 mpenet but yeah, not an easy task"><a href="#t1481273683000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:54:43</span>               mpenet </span><span>but yeah, not an easy task</span></div><div id="t1481273687000219" t="2016-12-09 08:54:47 mpenet fun tho"><a href="#t1481273687000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">08:54:47</span>               mpenet </span><span>fun tho</span></div><div id="t1481287978000226" t="2016-12-09 12:52:58 nathanmarz @mpenet yea you want to use multi-transform"><a href="#t1481287978000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">12:52:58</span>           nathanmarz </span><span>@mpenet yea you want to use multi-transform</span></div><div id="t1481306982000233" t="2016-12-09 18:09:42 bfabry are there performance benefits to using multi-transform over intermediate collections?"><a href="#t1481306982000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">18:09:42</span>               bfabry </span><span>are there performance benefits to using multi-transform over intermediate collections?</span></div><div id="t1481309306000234" t="2016-12-09 18:48:26 nathanmarz @bfabry yes"><a href="#t1481309306000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">18:48:26</span>           nathanmarz </span><span>@bfabry yes</span></div><div id="t1481309350000235" t="2016-12-09 18:49:10 nathanmarz if you want to do two transforms in a row and they share part of the path, it will be more performant to do it as a multi-transform"><a href="#t1481309350000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">18:49:10</span>           nathanmarz </span><span>if you want to do two transforms in a row and they share part of the path, it will be more performant to do it as a multi-transform</span></div><div id="t1481309398000236" t="2016-12-09 18:49:58 nathanmarz there&apos;s some benchmarks for that:  https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L307"><a href="#t1481309398000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">18:49:58</span>           nathanmarz </span><span>there&apos;s some benchmarks for that: </span><a href="https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L307" target="_blank">https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L307</a></div><div id="t1481310332000238" t="2016-12-09 19:05:32 mpenet That s what I ended up using, thanks ;)"><a href="#t1481310332000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-09</span> <span class="t" onclick="H(this)">19:05:32</span>               mpenet </span><span>That s what I ended up using, thanks ;)</span></div><div id="t1481655907000385" t="2016-12-13 19:05:07 bcarrell Is there a better way of doing this?  I&apos;m a novice (to Specter) trying to figure out if it simplifies my use case: querying a nested data structure which might be in two slightly different shapes for the presence of a value.  Here&apos;s a gist which hopefully outlines it with a working solution:  https://gist.github.com/bcarrell/f9081a7a7a1c5834a09da576a463c9fb"><a href="#t1481655907000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:05:07</span>             bcarrell </span><span>Is there a better way of doing this?  I&apos;m a novice (to Specter) trying to figure out if it simplifies my use case: querying a nested data structure which might be in two slightly different shapes for the presence of a value.  Here&apos;s a gist which hopefully outlines it with a working solution: </span><a href="https://gist.github.com/bcarrell/f9081a7a7a1c5834a09da576a463c9fb" target="_blank">https://gist.github.com/bcarrell/f9081a7a7a1c5834a09da576a463c9fb</a></div><div id="t1481657525000387" t="2016-12-13 19:32:05 nathanmarz @bcarrell looks pretty good to me"><a href="#t1481657525000387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:32:05</span>           nathanmarz </span><span>@bcarrell looks pretty good to me</span></div><div id="t1481657562000388" t="2016-12-13 19:32:42 nathanmarz you could factor it into two paths if you want to make it more &quot;readable&quot;"><a href="#t1481657562000388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:32:42</span>           nathanmarz </span><span>you could factor it into two paths if you want to make it more &quot;readable&quot;</span></div><div id="t1481657613000389" t="2016-12-13 19:33:33 nathanmarz one to navigate to the  :foos  value you care about (distinguishing between the two &quot;types&quot;), and another using that to search for your target element"><a href="#t1481657613000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:33:33</span>           nathanmarz </span><span>one to navigate to the </span><code>:foos</code><span> value you care about (distinguishing between the two &quot;types&quot;), and another using that to search for your target element</span></div><div id="t1481657651000390" t="2016-12-13 19:34:11 bcarrell Cool, thanks!  I wanted to make sure it was approaching correctness"><a href="#t1481657651000390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:34:11</span>             bcarrell </span><span>Cool, thanks!  I wanted to make sure it was approaching correctness</span></div><div id="t1481657686000391" t="2016-12-13 19:34:46 nathanmarz you can also change the condition of your  if-path  to  [:foo #(= :bar %)]"><a href="#t1481657686000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-13</span> <span class="t" onclick="H(this)">19:34:46</span>           nathanmarz </span><span>you can also change the condition of your </span><code>if-path</code><span> to </span><code>[:foo #(= :bar %)]</code></div><div id="t1482157303000611" t="2016-12-19 14:21:43 souenzzo Hi,
 https://github.com/nathanmarz/specter/issues/117 
 (setval [ALL even?] NONE [1 2 3 4])
;; =&gt; [1 3]
 
Is there any way to do this in 0.12?"><a href="#t1482157303000611" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-19</span> <span class="t" onclick="H(this)">14:21:43</span>             souenzzo </span><span>Hi,
</span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a><span>
</span><pre>(setval [ALL even?] NONE [1 2 3 4])
;; =&gt; [1 3]
</pre><span>
Is there any way to do this in 0.12?</span></div><div id="t1482157685000614" t="2016-12-19 14:28:05 nathanmarz @souenzzo no, that issue isn&apos;t implemented"><a href="#t1482157685000614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-19</span> <span class="t" onclick="H(this)">14:28:05</span>           nathanmarz </span><span>@souenzzo no, that issue isn&apos;t implemented</span></div><div id="t1482157701000615" t="2016-12-19 14:28:21 nathanmarz you could always make your own version of ALL that has that functionality"><a href="#t1482157701000615" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-19</span> <span class="t" onclick="H(this)">14:28:21</span>           nathanmarz </span><span>you could always make your own version of ALL that has that functionality</span></div><div id="t1482347486000697" t="2016-12-21 19:11:26 nathanmarz Specter 0.13.2 released (bug fixes)  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1482347486000697" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span> <span class="t" onclick="H(this)">19:11:26</span>           nathanmarz </span><span>Specter 0.13.2 released (bug fixes) </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1482347495000699" t="2016-12-21 19:11:35 nathanmarz next release will probably be 1.0"><a href="#t1482347495000699" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span> <span class="t" onclick="H(this)">19:11:35</span>           nathanmarz </span><span>next release will probably be 1.0</span></div><div id="t1482865023000896" t="2016-12-27 18:57:03 stephenmhopper I&apos;m brand new to Specter, but I have a very simple task that I need to perform that I believe will be easy with Specter. I&apos;m just not sure how to do it. I have a Clojure map and a function. I want to apply that function to the value at a given key any time that key appears in the map or any of the child maps. Does that make sense? How would I do that?"><a href="#t1482865023000896" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">18:57:03</span>       stephenmhopper </span><span>I&apos;m brand new to Specter, but I have a very simple task that I need to perform that I believe will be easy with Specter. I&apos;m just not sure how to do it. I have a Clojure map and a function. I want to apply that function to the value at a given key any time that key appears in the map or any of the child maps. Does that make sense? How would I do that?</span></div><div id="t1482865076000897" t="2016-12-27 18:57:56 nathanmarz @stephenmhopper it&apos;s a recursive map?"><a href="#t1482865076000897" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">18:57:56</span>           nathanmarz </span><span>@stephenmhopper it&apos;s a recursive map?</span></div><div id="t1482865085000898" t="2016-12-27 18:58:05 stephenmhopper yep"><a href="#t1482865085000898" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">18:58:05</span>       stephenmhopper </span><span>yep</span></div><div id="t1482865349000899" t="2016-12-27 19:02:29 nathanmarz @stephenmhopper here&apos;s an example
 (let [all-maps (recursive-path [] p (continue-then-stay MAP-VALS map? p))]
  (transform [all-maps (must &quot;mykey&quot;)] inc {&quot;mykey&quot; 1 :b {:a 2 :c {&quot;mykey&quot; 2}}})
  )
"><a href="#t1482865349000899" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">19:02:29</span>           nathanmarz </span><span>@stephenmhopper here&apos;s an example
</span><pre>(let [all-maps (recursive-path [] p (continue-then-stay MAP-VALS map? p))]
  (transform [all-maps (must &quot;mykey&quot;)] inc {&quot;mykey&quot; 1 :b {:a 2 :c {&quot;mykey&quot; 2}}})
  )
</pre></div><div id="t1482865507000900" t="2016-12-27 19:05:07 stephenmhopper Cool. That works. Thank you! Now I&apos;m going to go read the docs (again) and I&apos;ll be back with questions"><a href="#t1482865507000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">19:05:07</span>       stephenmhopper </span><span>Cool. That works. Thank you! Now I&apos;m going to go read the docs (again) and I&apos;ll be back with questions</span></div><div id="t1482868236000902" t="2016-12-27 19:50:36 stephenmhopper Okay, I think I understand this.  (recursive-path [] p (continue-then-stay MAP-VALS map? p))  generates a navigator which steps through the parameter data structure, keeping only the values which are maps. It does this recursively and because order isn&apos;t really important here, we could use  stay-then-continue  interchangeably with  continue-then-stay .

This navigator is then combined with  (must &quot;mykey&quot;)  to (1) filter out maps which don&apos;t contain &quot;mykey&quot; and (2) expose the values associated with &quot;mykey&quot;.  inc  is then mapped across these values and the rest is easy.

Is that accurate?"><a href="#t1482868236000902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">19:50:36</span>       stephenmhopper </span><span>Okay, I think I understand this. </span><code>(recursive-path [] p (continue-then-stay MAP-VALS map? p))</code><span> generates a navigator which steps through the parameter data structure, keeping only the values which are maps. It does this recursively and because order isn&apos;t really important here, we could use </span><code>stay-then-continue</code><span> interchangeably with </span><code>continue-then-stay</code><span>.

This navigator is then combined with </span><code>(must &quot;mykey&quot;)</code><span> to (1) filter out maps which don&apos;t contain &quot;mykey&quot; and (2) expose the values associated with &quot;mykey&quot;. </span><code>inc</code><span> is then mapped across these values and the rest is easy.

Is that accurate?</span></div><div id="t1482871742000903" t="2016-12-27 20:49:02 stephenmhopper @nathanmarz Stage 2: How do I update the previous example to also handle maps which are nested inside of sequences?"><a href="#t1482871742000903" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">20:49:02</span>       stephenmhopper </span><span>@nathanmarz Stage 2: How do I update the previous example to also handle maps which are nested inside of sequences?</span></div><div id="t1482873366000904" t="2016-12-27 21:16:06 stephenmhopper nvmd on Stage 2. I figured it out"><a href="#t1482873366000904" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">21:16:06</span>       stephenmhopper </span><span>nvmd on Stage 2. I figured it out</span></div><div id="t1482873607000905" t="2016-12-27 21:20:07 nathanmarz @stephenmhopper yes, in this case  continue-then-stay  can be used interchangeably with  stay-then-continue"><a href="#t1482873607000905" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-27</span> <span class="t" onclick="H(this)">21:20:07</span>           nathanmarz </span><span>@stephenmhopper yes, in this case </span><code>continue-then-stay</code><span> can be used interchangeably with </span><code>stay-then-continue</code></div><div id="t1482976318000931" t="2016-12-29 01:51:58 narkisr Hey, looking for a way of selecting items from a Vector using Specter (like srange but for any index), couldn&apos;t find a way of doing: (select [ALL &lt;?&gt;]  [[1 2 3 4 5] [1 2 3  6 7]]) -&gt; [[2 5] [2 7]]"><a href="#t1482976318000931" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:51:58</span>              narkisr </span><span>Hey, looking for a way of selecting items from a Vector using Specter (like srange but for any index), couldn&apos;t find a way of doing: (select [ALL &lt;?&gt;]  [[1 2 3 4 5] [1 2 3  6 7]]) -&gt; [[2 5] [2 7]]</span></div><div id="t1482976322000932" t="2016-12-29 01:52:02 narkisr There is multi-path"><a href="#t1482976322000932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:52:02</span>              narkisr </span><span>There is multi-path</span></div><div id="t1482976332000933" t="2016-12-29 01:52:12 narkisr (select [ALL (multi-path (keypath 1) (keypath 4)) ] rs)"><a href="#t1482976332000933" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:52:12</span>              narkisr </span><span>(select [ALL (multi-path (keypath 1) (keypath 4)) ] rs)</span></div><div id="t1482976340000934" t="2016-12-29 01:52:20 narkisr but it flattens out the result"><a href="#t1482976340000934" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:52:20</span>              narkisr </span><span>but it flattens out the result</span></div><div id="t1482976347000935" t="2016-12-29 01:52:27 narkisr [2 5 2 7]

["><a href="#t1482976347000935" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:52:27</span>              narkisr </span><span>[2 5 2 7]

[</span></div><div id="t1482976354000936" t="2016-12-29 01:52:34 narkisr A possible solution might be to use: (transform [ALL (s/collect-one (keypath 0) ) (s/collect-one (keypath 1) )] (fn [a b c] [a b]) rs) which feels a bit akward (I would like to have the ability so select neste sub vectors)"><a href="#t1482976354000936" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:52:34</span>              narkisr </span><span>A possible solution might be to use: (transform [ALL (s/collect-one (keypath 0) ) (s/collect-one (keypath 1) )] (fn [a b c] [a b]) rs) which feels a bit akward (I would like to have the ability so select neste sub vectors)</span></div><div id="t1482976551000937" t="2016-12-29 01:55:51 nathanmarz @narkisr you can use  subselect"><a href="#t1482976551000937" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:55:51</span>           nathanmarz </span><span>@narkisr you can use </span><code>subselect</code></div><div id="t1482976594000938" t="2016-12-29 01:56:34 nathanmarz subselect  +  multi-path  should get you the behavior you want"><a href="#t1482976594000938" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:56:34</span>           nathanmarz </span><code>subselect</code><span> + </span><code>multi-path</code><span> should get you the behavior you want</span></div><div id="t1482976612000939" t="2016-12-29 01:56:52 narkisr Ok, thanks! ill try to use them"><a href="#t1482976612000939" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:56:52</span>              narkisr </span><span>Ok, thanks! ill try to use them</span></div><div id="t1482976703000940" t="2016-12-29 01:58:23 nathanmarz (select [ALL (subselect (multi-path (keypath 1) (keypath 4)))] [[1 2 3 4 5] [1 2 3 6 7]])"><a href="#t1482976703000940" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:58:23</span>           nathanmarz </span><code>(select [ALL (subselect (multi-path (keypath 1) (keypath 4)))] [[1 2 3 4 5] [1 2 3 6 7]])</code></div><div id="t1482976714000941" t="2016-12-29 01:58:34 narkisr Got it"><a href="#t1482976714000941" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">01:58:34</span>              narkisr </span><span>Got it</span></div><div id="t1482976838000942" t="2016-12-29 02:00:38 narkisr BTW is there any reason why indices are not treated like map keys? (since both access assosciative DS)"><a href="#t1482976838000942" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">02:00:38</span>              narkisr </span><span>BTW is there any reason why indices are not treated like map keys? (since both access assosciative DS)</span></div><div id="t1482976852000943" t="2016-12-29 02:00:52 narkisr You need to wrap them using keypath"><a href="#t1482976852000943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">02:00:52</span>              narkisr </span><span>You need to wrap them using keypath</span></div><div id="t1483021923000956" t="2016-12-29 14:32:03 nathanmarz I just stuck with implementing implicit behavior that&apos;s analogous to what clojure already treats as functions"><a href="#t1483021923000956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">14:32:03</span>           nathanmarz </span><span>I just stuck with implementing implicit behavior that&apos;s analogous to what clojure already treats as functions</span></div><div id="t1483021931000957" t="2016-12-29 14:32:11 nathanmarz @narkisr namely keywords and sets"><a href="#t1483021931000957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">14:32:11</span>           nathanmarz </span><span>@narkisr namely keywords and sets</span></div><div id="t1483021951000958" t="2016-12-29 14:32:31 nathanmarz you could always implement that yourself if you want it, see  ImplicitNav"><a href="#t1483021951000958" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">14:32:31</span>           nathanmarz </span><span>you could always implement that yourself if you want it, see </span><code>ImplicitNav</code></div><div id="t1483027903000966" t="2016-12-29 16:11:43 narkisr Got it, thanks"><a href="#t1483027903000966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">16:11:43</span>              narkisr </span><span>Got it, thanks</span></div><div id="t1483213143001005" t="2016-12-31 19:39:03 zmaril Hello! Happy New Year&apos;s! I have some instaparse output in enlive format (will paste example shortly). I&apos;m trying to walk the tree and transform all the maps to include their metadata explicitly. I&apos;ve tried a few things without success and am currently experimenting with recursive-path."><a href="#t1483213143001005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:39:03</span>               zmaril </span><span>Hello! Happy New Year&apos;s! I have some instaparse output in enlive format (will paste example shortly). I&apos;m trying to walk the tree and transform all the maps to include their metadata explicitly. I&apos;ve tried a few things without success and am currently experimenting with recursive-path.</span></div><div id="t1483217076001012" t="2016-12-31 20:44:36 nathanmarz @zmaril if you have some examples can help you through it"><a href="#t1483217076001012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:36</span>           nathanmarz </span><span>@zmaril if you have some examples can help you through it</span></div><div id="t1483219093001014" t="2016-12-31 21:18:13 nathanmarz @zmaril cool, seems pretty straightforward"><a href="#t1483219093001014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">21:18:13</span>           nathanmarz </span><span>@zmaril cool, seems pretty straightforward</span></div><div id="t1483219138001015" t="2016-12-31 21:18:58 zmaril yeah I guess I thought something like recursive-path or the TreeWalker stuff would come in handy"><a href="#t1483219138001015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">21:18:58</span>               zmaril </span><span>yeah I guess I thought something like recursive-path or the TreeWalker stuff would come in handy</span></div><div id="t1483221923001016" t="2016-12-31 22:05:23 nathanmarz @zmaril you could reframe it with recursive navigation"><a href="#t1483221923001016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:05:23</span>           nathanmarz </span><span>@zmaril you could reframe it with recursive navigation</span></div><div id="t1483221947001017" t="2016-12-31 22:05:47 nathanmarz probably in conjunction with  multi-transform  since you&apos;re doing a few different changes throughout the tree"><a href="#t1483221947001017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:05:47</span>           nathanmarz </span><span>probably in conjunction with </span><code>multi-transform</code><span> since you&apos;re doing a few different changes throughout the tree</span></div><div id="t1483223236001018" t="2016-12-31 22:27:16 zmaril Yeah I don&apos;t understand navigation quite yet, still eludes me. "><a href="#t1483223236001018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:27:16</span>               zmaril </span><span>Yeah I don&apos;t understand navigation quite yet, still eludes me. </span></div><div id="t1483545745001108" t="2017-01-04 16:02:25 gdeer81 when you have a bunch of maps and you want to make all of the maps agree on a unit of measure you have to convert the value for one key to another and remove the old key like,  [{:place &quot;here&quot; :degrees-celsius 32} {:place &quot;there&quot; :degrees-faren 100}]  you have to do something like  (dissoc (assoc mymap  :degrees-celsius (f-&gt;c (:degrees-faren mymap)) :degrees-faren))  you could split that out into a general function that takes a key and a conversion function and my implementation probably isn&apos;t very idiomatic, but I&apos;m sure there is a way to do this in specter I just can&apos;t seem to quite get it"><a href="#t1483545745001108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">16:02:25</span>              gdeer81 </span><span>when you have a bunch of maps and you want to make all of the maps agree on a unit of measure you have to convert the value for one key to another and remove the old key like, </span><code>[{:place &quot;here&quot; :degrees-celsius 32} {:place &quot;there&quot; :degrees-faren 100}]</code><span> you have to do something like </span><code>(dissoc (assoc mymap  :degrees-celsius (f-&gt;c (:degrees-faren mymap)) :degrees-faren))</code><span> you could split that out into a general function that takes a key and a conversion function and my implementation probably isn&apos;t very idiomatic, but I&apos;m sure there is a way to do this in specter I just can&apos;t seem to quite get it</span></div><div id="t1483545893001109" t="2017-01-04 16:04:53 gdeer81 it&apos;s such a common thing I&apos;m sure someone has a recipe for this kind of transform"><a href="#t1483545893001109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">16:04:53</span>              gdeer81 </span><span>it&apos;s such a common thing I&apos;m sure someone has a recipe for this kind of transform</span></div><div id="t1483549461001111" t="2017-01-04 17:04:21 schmee hello! I’m trying to figure out how to annotate the depth of a tree with specter"><a href="#t1483549461001111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:04:21</span>               schmee </span><span>hello! I’m trying to figure out how to annotate the depth of a tree with specter</span></div><div id="t1483549479001112" t="2017-01-04 17:04:39 schmee so something like
 (= (depth-counter [:a [:b [:d] [:e]] [:c [:f]]])
   [{:val :a :depth 0}
    [{:val :b :depth 1}
      [{:val :d :depth 2}]
      [{:val :e :depth 2}]]
    [{:val :c :depth 1}
      [{:val :c :depth 2}]]])
"><a href="#t1483549479001112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:04:39</span>               schmee </span><span>so something like
</span><pre>(= (depth-counter [:a [:b [:d] [:e]] [:c [:f]]])
   [{:val :a :depth 0}
    [{:val :b :depth 1}
      [{:val :d :depth 2}]
      [{:val :e :depth 2}]]
    [{:val :c :depth 1}
      [{:val :c :depth 2}]]])
</pre></div><div id="t1483549528001113" t="2017-01-04 17:05:28 schmee looking at the readme I don’t see any immediate way to carry state when navigating, but I’m sure I just haven’t figured out how yet  🙂"><a href="#t1483549528001113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:05:28</span>               schmee </span><span>looking at the readme I don’t see any immediate way to carry state when navigating, but I’m sure I just haven’t figured out how yet </span><b>🙂</b></div><div id="t1483549628001114" t="2017-01-04 17:07:08 schmee or wait,  collect  seems like something..."><a href="#t1483549628001114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:07:08</span>               schmee </span><span>or wait, </span><code>collect</code><span> seems like something...</span></div><div id="t1483549639001115" t="2017-01-04 17:07:19 nathanmarz @gdeer81 you could make a navigator that navigates to the k/v pair and replaces it with a new k/v pair"><a href="#t1483549639001115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:07:19</span>           nathanmarz </span><span>@gdeer81 you could make a navigator that navigates to the k/v pair and replaces it with a new k/v pair</span></div><div id="t1483549724001116" t="2017-01-04 17:08:44 nathanmarz so something like  (transform (kvpair :degrees-faren) (fn [[_ v]] [:degrees-celsius (k-&gt;c v)]))"><a href="#t1483549724001116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:08:44</span>           nathanmarz </span><span>so something like </span><code>(transform (kvpair :degrees-faren) (fn [[_ v]] [:degrees-celsius (k-&gt;c v)]))</code></div><div id="t1483549782001117" t="2017-01-04 17:09:42 nathanmarz @schmee yea you should be able to just collect nodes as you go, and then use the count of the collected values list to annotate the depth"><a href="#t1483549782001117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:09:42</span>           nathanmarz </span><span>@schmee yea you should be able to just collect nodes as you go, and then use the count of the collected values list to annotate the depth</span></div><div id="t1483550126001118" t="2017-01-04 17:15:26 nathanmarz @schmee 
 (def data [:a [:b [:d] [:e]] [:c [:f]]])

(def TreeWalker
  (recursive-path [] p
    (stay-then-continue
      VAL
      (if-path vector?
        [ALL p]))))
        
(transform [TreeWalker (complement vector?)]
  (fn [&amp; vals]
    {:depth (- (count vals) 2)
     :val (last vals)})
  data)
"><a href="#t1483550126001118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:15:26</span>           nathanmarz </span><span>@schmee 
</span><pre>(def data [:a [:b [:d] [:e]] [:c [:f]]])

(def TreeWalker
  (recursive-path [] p
    (stay-then-continue
      VAL
      (if-path vector?
        [ALL p]))))
        
(transform [TreeWalker (complement vector?)]
  (fn [&amp; vals]
    {:depth (- (count vals) 2)
     :val (last vals)})
  data)
</pre></div><div id="t1483550574001119" t="2017-01-04 17:22:54 gdeer81 so the naming convention is unparameterized navigators are in all caps else it follows regular function naming conventions?"><a href="#t1483550574001119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:22:54</span>              gdeer81 </span><span>so the naming convention is unparameterized navigators are in all caps else it follows regular function naming conventions?</span></div><div id="t1483550759001120" t="2017-01-04 17:25:59 nathanmarz yea"><a href="#t1483550759001120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:25:59</span>           nathanmarz </span><span>yea</span></div><div id="t1483551009001121" t="2017-01-04 17:30:09 schmee nathanmarz thank you so much for that example!"><a href="#t1483551009001121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:30:09</span>               schmee </span><span>nathanmarz thank you so much for that example!</span></div><div id="t1483551025001122" t="2017-01-04 17:30:25 schmee I’m just trying out Specter for the first time and this stuff is blowing my mind already!"><a href="#t1483551025001122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:30:25</span>               schmee </span><span>I’m just trying out Specter for the first time and this stuff is blowing my mind already!</span></div><div id="t1483551045001123" t="2017-01-04 17:30:45 schmee such a breath of fresh air after dealing with zippers  😛"><a href="#t1483551045001123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:30:45</span>               schmee </span><span>such a breath of fresh air after dealing with zippers </span><b>😛</b></div><div id="t1483551315001124" t="2017-01-04 17:35:15 nathanmarz thanks"><a href="#t1483551315001124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:35:15</span>           nathanmarz </span><span>thanks</span></div><div id="t1483551349001125" t="2017-01-04 17:35:49 nathanmarz zippers are still useful but not for the majority of use cases"><a href="#t1483551349001125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:35:49</span>           nathanmarz </span><span>zippers are still useful but not for the majority of use cases</span></div><div id="t1483551359001126" t="2017-01-04 17:35:59 nathanmarz (zippers are integrated with specter in com.rpl.specter.zipper)"><a href="#t1483551359001126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:35:59</span>           nathanmarz </span><span>(zippers are integrated with specter in com.rpl.specter.zipper)</span></div><div id="t1483551482001127" t="2017-01-04 17:38:02 schmee am I correct in thinking that  recursive-path  is just a shorthand for declarepath + providepath?"><a href="#t1483551482001127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:38:02</span>               schmee </span><span>am I correct in thinking that </span><code>recursive-path</code><span> is just a shorthand for declarepath + providepath?</span></div><div id="t1483551489001128" t="2017-01-04 17:38:09 schmee (there are no docs for that macro)"><a href="#t1483551489001128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:38:09</span>               schmee </span><span>(there are no docs for that macro)</span></div><div id="t1483551532001129" t="2017-01-04 17:38:52 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L80"><a href="#t1483551532001129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:38:52</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L80" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L80</a></div><div id="t1483551541001131" t="2017-01-04 17:39:01 nathanmarz local-declarepath  +  providepath"><a href="#t1483551541001131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:39:01</span>           nathanmarz </span><code>local-declarepath</code><span> + </span><code>providepath</code></div><div id="t1483551700001132" t="2017-01-04 17:41:40 schmee :+1:"><a href="#t1483551700001132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">17:41:40</span>               schmee </span><b>:+1:</b></div><div id="t1483553714001133" t="2017-01-04 18:15:14 gdeer81 @nathanmarz if I write this kvpair navigator do you think it would be useful to add to specter or is it too specific to this one use case? I remember you saying in your talk that most of the functionality that is in specter is from your specific needs so"><a href="#t1483553714001133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:15:14</span>              gdeer81 </span><span>@nathanmarz if I write this kvpair navigator do you think it would be useful to add to specter or is it too specific to this one use case? I remember you saying in your talk that most of the functionality that is in specter is from your specific needs so</span></div><div id="t1483553746001134" t="2017-01-04 18:15:46 nathanmarz @gdeer81 doesn&apos;t seem common enough to add to the core"><a href="#t1483553746001134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:15:46</span>           nathanmarz </span><span>@gdeer81 doesn&apos;t seem common enough to add to the core</span></div><div id="t1483553876001135" t="2017-01-04 18:17:56 gdeer81 okay then I guess it will just end up in a gist and if someone needs it, it will show up in their google results  😆"><a href="#t1483553876001135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:17:56</span>              gdeer81 </span><span>okay then I guess it will just end up in a gist and if someone needs it, it will show up in their google results </span><b>😆</b></div><div id="t1483555036001136" t="2017-01-04 18:37:16 gdeer81 Okay, so specter is good for ETL, but what about analytics? like  {:usa-census [{:state &quot;Texas&quot; :population 20000000} {:state &quot;California&quot; :population 40000000} ...}] :mexico-census  [{:state &quot;Coahuila&quot; :population 200000} {:state &quot;Mexico City&quot; :population 20000000} ...]}  transformed into  {:us-total-pop 3241118787 :mexico-total-pop 128632004 ...}"><a href="#t1483555036001136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:37:16</span>              gdeer81 </span><span>Okay, so specter is good for ETL, but what about analytics? like </span><code>{:usa-census [{:state &quot;Texas&quot; :population 20000000} {:state &quot;California&quot; :population 40000000} ...}] :mexico-census  [{:state &quot;Coahuila&quot; :population 200000} {:state &quot;Mexico City&quot; :population 20000000} ...]}</code><span> transformed into </span><code>{:us-total-pop 3241118787 :mexico-total-pop 128632004 ...}</code></div><div id="t1483555083001138" t="2017-01-04 18:38:03 gdeer81 basically a collection of maps and you aggregate on one of the keys"><a href="#t1483555083001138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:38:03</span>              gdeer81 </span><span>basically a collection of maps and you aggregate on one of the keys</span></div><div id="t1483555113001139" t="2017-01-04 18:38:33 gdeer81 The Clojure that I have for this looks really gnarly"><a href="#t1483555113001139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:38:33</span>              gdeer81 </span><span>The Clojure that I have for this looks really gnarly</span></div><div id="t1483555213001140" t="2017-01-04 18:40:13 nathanmarz that&apos;s outside the scope of specter"><a href="#t1483555213001140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:40:13</span>           nathanmarz </span><span>that&apos;s outside the scope of specter</span></div><div id="t1483555543001141" t="2017-01-04 18:45:43 gdeer81 I guess I could write a function that uses specter to collect the values for each key I&apos;m aggregating"><a href="#t1483555543001141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span> <span class="t" onclick="H(this)">18:45:43</span>              gdeer81 </span><span>I guess I could write a function that uses specter to collect the values for each key I&apos;m aggregating</span></div><div id="t1483600336001148" t="2017-01-05 07:12:16 schmee how can I transform every nth element of a collection?"><a href="#t1483600336001148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:12:16</span>               schmee </span><span>how can I transform every nth element of a collection?</span></div><div id="t1483600399001149" t="2017-01-05 07:13:19 schmee I’ve tried various combinations of  map-indexed  but then I’m back to the ‘reconstruct the right type’ problem"><a href="#t1483600399001149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:13:19</span>               schmee </span><span>I’ve tried various combinations of </span><code>map-indexed</code><span> but then I’m back to the ‘reconstruct the right type’ problem</span></div><div id="t1483600672001150" t="2017-01-05 07:17:52 schmee if I had a version of  collected?  that also gave you the current element, I guess something like this would work:
 (sr/transform [(sr/collect sr/ALL) sr/ALL (sr/collected-with-current? [collected current] (= 0 (mod (.indexOf collected current) n)))] f (range 10))"><a href="#t1483600672001150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:17:52</span>               schmee </span><span>if I had a version of </span><code>collected?</code><span> that also gave you the current element, I guess something like this would work:
</span><pre>(sr/transform [(sr/collect sr/ALL) sr/ALL (sr/collected-with-current? [collected current] (= 0 (mod (.indexOf collected current) n)))] f (range 10))</pre></div><div id="t1483602926001151" t="2017-01-05 07:55:26 nathanmarz @schmee you would either need zippers for that or a custom navigator"><a href="#t1483602926001151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:55:26</span>           nathanmarz </span><span>@schmee you would either need zippers for that or a custom navigator</span></div><div id="t1483602936001152" t="2017-01-05 07:55:36 nathanmarz zippers are integrated with specter in com.rpl.specter.zipper"><a href="#t1483602936001152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:55:36</span>           nathanmarz </span><span>zippers are integrated with specter in com.rpl.specter.zipper</span></div><div id="t1483603004001153" t="2017-01-05 07:56:44 nathanmarz something like  ALL-INDEXED  which navigates to pair of  [index value]  should do the trick"><a href="#t1483603004001153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">07:56:44</span>           nathanmarz </span><span>something like </span><code>ALL-INDEXED</code><span> which navigates to pair of </span><code>[index value]</code><span> should do the trick</span></div><div id="t1483606324001160" t="2017-01-05 08:52:04 schmee I’ll give the custom navigator a shot later today, thanks!"><a href="#t1483606324001160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-05</span> <span class="t" onclick="H(this)">08:52:04</span>               schmee </span><span>I’ll give the custom navigator a shot later today, thanks!</span></div><div id="t1483750819001186" t="2017-01-07 01:00:19 wei I’m confused with the result of  (sp/walker sequential?)   (sm/select (sp/walker sequential?) {:b [1 2 nil 3]}) =&gt; [[:b [1 2 nil 3]]]  I would have expected  [1 2 nil 3]"><a href="#t1483750819001186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:00:19</span>                  wei </span><span>I’m confused with the result of </span><code>(sp/walker sequential?)</code><span> </span><pre>(sm/select (sp/walker sequential?) {:b [1 2 nil 3]}) =&gt; [[:b [1 2 nil 3]]]</pre><span> I would have expected </span><code>[1 2 nil 3]</code></div><div id="t1483750884001187" t="2017-01-07 01:01:24 wei as a followup question, what would be the specter-y way to remove nils from sequences?"><a href="#t1483750884001187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:01:24</span>                  wei </span><span>as a followup question, what would be the specter-y way to remove nils from sequences?</span></div><div id="t1483753871001188" t="2017-01-07 01:51:11 nathanmarz @wei looks like clojure.walk navigates to the key/value pairs of maps, which it considers sequences"><a href="#t1483753871001188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:51:11</span>           nathanmarz </span><span>@wei looks like clojure.walk navigates to the key/value pairs of maps, which it considers sequences</span></div><div id="t1483753888001189" t="2017-01-07 01:51:28 nathanmarz for removing nils, use com.rpl.specter.zipper"><a href="#t1483753888001189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:51:28</span>           nathanmarz </span><span>for removing nils, use com.rpl.specter.zipper</span></div><div id="t1483753908001190" t="2017-01-07 01:51:48 nathanmarz or navigate to the sequence and use  filter"><a href="#t1483753908001190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:51:48</span>           nathanmarz </span><span>or navigate to the sequence and use </span><code>filter</code></div><div id="t1483753951001191" t="2017-01-07 01:52:31 nathanmarz if  https://github.com/nathanmarz/specter/issues/117  is implemented will be able to do  (setval [ALL nil?] NONE data)"><a href="#t1483753951001191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">01:52:31</span>           nathanmarz </span><span>if </span><a href="https://github.com/nathanmarz/specter/issues/117" target="_blank">https://github.com/nathanmarz/specter/issues/117</a><span> is implemented will be able to do </span><code>(setval [ALL nil?] NONE data)</code></div><div id="t1483825022001215" t="2017-01-07 21:37:02 wei @nathanmarz thanks for the tips. can zipper remove all nils an a nested structure? having some trouble putting it together"><a href="#t1483825022001215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">21:37:02</span>                  wei </span><span>@nathanmarz thanks for the tips. can zipper remove all nils an a nested structure? having some trouble putting it together</span></div><div id="t1483825775001216" t="2017-01-07 21:49:35 nathanmarz @wei like this:  (setval [z/VECTOR-ZIP z/DOWN z/RIGHT z/NODE-SEQ] [] [1 2 3 4])"><a href="#t1483825775001216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">21:49:35</span>           nathanmarz </span><span>@wei like this: </span><code>(setval [z/VECTOR-ZIP z/DOWN z/RIGHT z/NODE-SEQ] [] [1 2 3 4])</code></div><div id="t1483825924001217" t="2017-01-07 21:52:04 nathanmarz @wei removing nils:  (setval [z/VECTOR-ZIP z/DOWN z/NEXT-WALK (selected? z/NODE nil?) z/NODE-SEQ] [] [1 2 nil 3 nil])"><a href="#t1483825924001217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">21:52:04</span>           nathanmarz </span><span>@wei removing nils: </span><code>(setval [z/VECTOR-ZIP z/DOWN z/NEXT-WALK (selected? z/NODE nil?) z/NODE-SEQ] [] [1 2 nil 3 nil])</code></div><div id="t1483825984001218" t="2017-01-07 21:53:04 nathanmarz obviously the approach in #117 would be more elegant as well as more performant"><a href="#t1483825984001218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-07</span> <span class="t" onclick="H(this)">21:53:04</span>           nathanmarz </span><span>obviously the approach in #117 would be more elegant as well as more performant</span></div><div id="t1483926306001237" t="2017-01-09 01:45:06 nathanmarz added ability to remove values in 0.13.3-SNAPSHOT (on clojars)"><a href="#t1483926306001237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-09</span> <span class="t" onclick="H(this)">01:45:06</span>           nathanmarz </span><span>added ability to remove values in 0.13.3-SNAPSHOT (on clojars)</span></div><div id="t1483926328001238" t="2017-01-09 01:45:28 nathanmarz e.g.  (setval [ALL nil?] NONE [1 2 nil 3 nil])  =&gt;  [1 2 3]"><a href="#t1483926328001238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-09</span> <span class="t" onclick="H(this)">01:45:28</span>           nathanmarz </span><span>e.g. </span><code>(setval [ALL nil?] NONE [1 2 nil 3 nil])</code><span> =&gt; </span><code>[1 2 3]</code></div><div id="t1483926369001239" t="2017-01-09 01:46:09 nathanmarz and  (setval [:a :b] NONE {:a {:b 1 :c 2}})  =&gt;  {:a {:c 2}}"><a href="#t1483926369001239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-09</span> <span class="t" onclick="H(this)">01:46:09</span>           nathanmarz </span><span>and </span><code>(setval [:a :b] NONE {:a {:b 1 :c 2}})</code><span> =&gt; </span><code>{:a {:c 2}}</code></div><div id="t1484007433001258" t="2017-01-10 00:17:13 richiardiandrea maybe FAQ  🙂  is there a way in specter to stop to the first  MAP-VALS , without further going deep in a map for instance?"><a href="#t1484007433001258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:17:13</span>      richiardiandrea </span><span>maybe FAQ </span><b>🙂</b><span> is there a way in specter to stop to the first </span><code>MAP-VALS</code><span>, without further going deep in a map for instance?</span></div><div id="t1484007620001260" t="2017-01-10 00:20:20 qqq is there a way to avoid the all caps? On a kinesis advantage pro keyboard, typing all caps is quite annoying"><a href="#t1484007620001260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:20:20</span>                  qqq </span><span>is there a way to avoid the all caps? On a kinesis advantage pro keyboard, typing all caps is quite annoying</span></div><div id="t1484008314001261" t="2017-01-10 00:31:54 nathanmarz @qqq you can do  (def my-all ALL)  if you want"><a href="#t1484008314001261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:31:54</span>           nathanmarz </span><span>@qqq you can do </span><code>(def my-all ALL)</code><span> if you want</span></div><div id="t1484008335001262" t="2017-01-10 00:32:15 qqq yeah, I my have to"><a href="#t1484008335001262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:32:15</span>                  qqq </span><span>yeah, I my have to</span></div><div id="t1484008342001263" t="2017-01-10 00:32:22 qqq MAP_VALS is really awkward on the kinesis"><a href="#t1484008342001263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:32:22</span>                  qqq </span><span>MAP_VALS is really awkward on the kinesis</span></div><div id="t1484008355001264" t="2017-01-10 00:32:35 nathanmarz @richiardiandrea no, not at the moment"><a href="#t1484008355001264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:32:35</span>           nathanmarz </span><span>@richiardiandrea no, not at the moment</span></div><div id="t1484008366001265" t="2017-01-10 00:32:46 qqq I guess you can&apos;t use :all or :map-vals since you&apos;re using kws for kw selector functions"><a href="#t1484008366001265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:32:46</span>                  qqq </span><span>I guess you can&apos;t use :all or :map-vals since you&apos;re using kws for kw selector functions</span></div><div id="t1484008416001266" t="2017-01-10 00:33:36 nathanmarz keywords extend  ImplicitNav  in order to wrap themselves in  keypath"><a href="#t1484008416001266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:33:36</span>           nathanmarz </span><span>keywords extend </span><code>ImplicitNav</code><span> in order to wrap themselves in </span><code>keypath</code></div><div id="t1484008432001267" t="2017-01-10 00:33:52 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L896"><a href="#t1484008432001267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:33:52</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L896" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L896</a></div><div id="t1484008862001269" t="2017-01-10 00:41:02 nathanmarz @richiardiandrea fyi, there are some ideas about supporting that in the future though:  https://github.com/nathanmarz/specter/issues/125"><a href="#t1484008862001269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:41:02</span>           nathanmarz </span><span>@richiardiandrea fyi, there are some ideas about supporting that in the future though: </span><a href="https://github.com/nathanmarz/specter/issues/125" target="_blank">https://github.com/nathanmarz/specter/issues/125</a></div><div id="t1484008915001271" t="2017-01-10 00:41:55 richiardiandrea oh cool, for a moment I though I could use  STOP  for it"><a href="#t1484008915001271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:41:55</span>      richiardiandrea </span><span>oh cool, for a moment I though I could use </span><code>STOP</code><span> for it</span></div><div id="t1484008963001272" t="2017-01-10 00:42:43 richiardiandrea btw I tried  0.13.3-SNAPSHOT  and the  NONE  syntax works here, but because it navigates deeply in the data, it is still something different from what I was thinking"><a href="#t1484008963001272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:42:43</span>      richiardiandrea </span><span>btw I tried </span><code>0.13.3-SNAPSHOT</code><span> and the </span><code>NONE</code><span> syntax works here, but because it navigates deeply in the data, it is still something different from what I was thinking</span></div><div id="t1484008990001273" t="2017-01-10 00:43:10 nathanmarz what do you mean?"><a href="#t1484008990001273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:43:10</span>           nathanmarz </span><span>what do you mean?</span></div><div id="t1484008996001274" t="2017-01-10 00:43:16 nathanmarz example?"><a href="#t1484008996001274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:43:16</span>           nathanmarz </span><span>example?</span></div><div id="t1484009202001275" t="2017-01-10 00:46:42 richiardiandrea uhm...no ok I lost it, I tried another example but it works fine, give a couple of minutes  😄"><a href="#t1484009202001275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:46:42</span>      richiardiandrea </span><span>uhm...no ok I lost it, I tried another example but it works fine, give a couple of minutes </span><b>😄</b></div><div id="t1484009276001276" t="2017-01-10 00:47:56 richiardiandrea uhm (2), I tried again what I had in mind and it works fine..."><a href="#t1484009276001276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:47:56</span>      richiardiandrea </span><span>uhm (2), I tried again what I had in mind and it works fine...</span></div><div id="t1484009289001277" t="2017-01-10 00:48:09 richiardiandrea It was  (sp/setval [sp/MAP-VALS #(map? %)] sp/NONE {:a 3 :b 5 :c {:d 5}})"><a href="#t1484009289001277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:48:09</span>      richiardiandrea </span><span>It was </span><code>(sp/setval [sp/MAP-VALS #(map? %)] sp/NONE {:a 3 :b 5 :c {:d 5}})</code></div><div id="t1484009353001278" t="2017-01-10 00:49:13 richiardiandrea very convenient btw  :+1:"><a href="#t1484009353001278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">00:49:13</span>      richiardiandrea </span><span>very convenient btw </span><b>:+1:</b></div><div id="t1484010320001279" t="2017-01-10 01:05:20 richiardiandrea @nathanmarz every time I turn to Specter for data manipulation, I surprise myself with the simplicity of the result, thanks:
 (sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                                             :family
                                             (sp/submap [:resource :relationship])
                                             sp/MAP-VALS
                                             sp/ALL]
                                            (fn [family m]
                                              (assoc m :family family)) 
                                 (first families))
"><a href="#t1484010320001279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:05:20</span>      richiardiandrea </span><span>@nathanmarz every time I turn to Specter for data manipulation, I surprise myself with the simplicity of the result, thanks:
</span><pre>(sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                                             :family
                                             (sp/submap [:resource :relationship])
                                             sp/MAP-VALS
                                             sp/ALL]
                                            (fn [family m]
                                              (assoc m :family family)) 
                                 (first families))
</pre></div><div id="t1484010335001280" t="2017-01-10 01:05:35 richiardiandrea the collect feature is super neat"><a href="#t1484010335001280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:05:35</span>      richiardiandrea </span><span>the collect feature is super neat</span></div><div id="t1484010519001282" t="2017-01-10 01:08:39 nathanmarz yea I use that feature quite a bit"><a href="#t1484010519001282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:08:39</span>           nathanmarz </span><span>yea I use that feature quite a bit</span></div><div id="t1484010558001283" t="2017-01-10 01:09:18 richiardiandrea I wanted basically to avoid using a  submap  with keys there"><a href="#t1484010558001283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:09:18</span>      richiardiandrea </span><span>I wanted basically to avoid using a </span><code>submap</code><span> with keys there</span></div><div id="t1484010593001284" t="2017-01-10 01:09:53 richiardiandrea so that I can assoc to all the key-values where the value is a map"><a href="#t1484010593001284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:09:53</span>      richiardiandrea </span><span>so that I can assoc to all the key-values where the value is a map</span></div><div id="t1484010912001285" t="2017-01-10 01:15:12 richiardiandrea oh ok wow done  😉"><a href="#t1484010912001285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:15:12</span>      richiardiandrea </span><span>oh ok wow done </span><b>😉</b></div><div id="t1484010970001286" t="2017-01-10 01:16:10 richiardiandrea (defn propagate-family
  [family]
  (sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                 :family
                 sp/MAP-VALS
                 #(vector? %)
                 sp/ALL]
                (fn [family m]
                  (assoc m :family family))
                family))
"><a href="#t1484010970001286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">01:16:10</span>      richiardiandrea </span><pre>(defn propagate-family
  [family]
  (sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                 :family
                 sp/MAP-VALS
                 #(vector? %)
                 sp/ALL]
                (fn [family m]
                  (assoc m :family family))
                family))
</pre></div><div id="t1484017209001287" t="2017-01-10 03:00:09 bfabry omg people use like my only oss contribution ever, goosebumps  😄"><a href="#t1484017209001287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">03:00:09</span>               bfabry </span><span>omg people use like my only oss contribution ever, goosebumps </span><b>😄</b></div><div id="t1484018838001288" t="2017-01-10 03:27:18 qqq https://stackoverflow.com/questions/39123457/how-to-use-specter-in-clojurescript  &lt;-- is using specter in cljs in figwheel still a problem? (I&apos;m having problems using specter in cljs, but not in clj, and I can&apos;t figure out why)"><a href="#t1484018838001288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">03:27:18</span>                  qqq </span><a href="https://stackoverflow.com/questions/39123457/how-to-use-specter-in-clojurescript" target="_blank">https://stackoverflow.com/questions/39123457/how-to-use-specter-in-clojurescript</a><span> &lt;-- is using specter in cljs in figwheel still a problem? (I&apos;m having problems using specter in cljs, but not in clj, and I can&apos;t figure out why)</span></div><div id="t1484019288001290" t="2017-01-10 03:34:48 nathanmarz @qqq I&apos;ve only used it in Node myself"><a href="#t1484019288001290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">03:34:48</span>           nathanmarz </span><span>@qqq I&apos;ve only used it in Node myself</span></div><div id="t1484019333001291" t="2017-01-10 03:35:33 nathanmarz what specific problem are you having?"><a href="#t1484019333001291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">03:35:33</span>           nathanmarz </span><span>what specific problem are you having?</span></div><div id="t1484019483001292" t="2017-01-10 03:38:03 nathanmarz @richiardiandrea fyi you can write that in a simpler way like this:
 (defn propagate-family
  [family]
  (sp/transform [:family
                 (sp/collect-one (sp/submap [:name :description]))
                 sp/MAP-VALS
                 vector?
                 sp/ALL
                 :family]
                (fn [family _] family)
                family))
"><a href="#t1484019483001292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">03:38:03</span>           nathanmarz </span><span>@richiardiandrea fyi you can write that in a simpler way like this:
</span><pre>(defn propagate-family
  [family]
  (sp/transform [:family
                 (sp/collect-one (sp/submap [:name :description]))
                 sp/MAP-VALS
                 vector?
                 sp/ALL
                 :family]
                (fn [family _] family)
                family))
</pre></div><div id="t1484020819001293" t="2017-01-10 04:00:19 richiardiandrea Thanks @nathanmarz, is  transform  acting like  update  then?"><a href="#t1484020819001293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:00:19</span>      richiardiandrea </span><span>Thanks @nathanmarz, is </span><code>transform</code><span> acting like </span><code>update</code><span> then?</span></div><div id="t1484020856001295" t="2017-01-10 04:00:56 richiardiandrea Did not know that, even better  😄  "><a href="#t1484020856001295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:00:56</span>      richiardiandrea </span><span>Did not know that, even better </span><b>😄</b><span> </span></div><div id="t1484021087001296" t="2017-01-10 04:04:47 qqq @nathanmarz: let me create a minimal failure care"><a href="#t1484021087001296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:04:47</span>                  qqq </span><span>@nathanmarz: let me create a minimal failure care</span></div><div id="t1484021320001297" t="2017-01-10 04:08:40 qqq false alarm, I was requiring com.rpl/specter instead of com.rpl/specter"><a href="#t1484021320001297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:08:40</span>                  qqq </span><span>false alarm, I was requiring com.rpl/specter instead of com.rpl/specter</span></div><div id="t1484022014001304" t="2017-01-10 04:20:14 nathanmarz @richiardiandrea yea it&apos;s like  update  on steroids"><a href="#t1484022014001304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:20:14</span>           nathanmarz </span><span>@richiardiandrea yea it&apos;s like </span><code>update</code><span> on steroids</span></div><div id="t1484022173001305" t="2017-01-10 04:22:53 qqq @nathanmarz : from a newcomer perspective, it might help if at the very top of the README.md, there was a line to the effect of 

transform takes two functions, one to select items, one to update, and leaves everything else the samespe"><a href="#t1484022173001305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:22:53</span>                  qqq </span><span>@nathanmarz : from a newcomer perspective, it might help if at the very top of the README.md, there was a line to the effect of 

transform takes two functions, one to select items, one to update, and leaves everything else the samespe</span></div><div id="t1484022176001306" t="2017-01-10 04:22:56 richiardiandrea Super!"><a href="#t1484022176001306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:22:56</span>      richiardiandrea </span><span>Super!</span></div><div id="t1484022251001307" t="2017-01-10 04:24:11 nathanmarz yea the documentation could be a lot better"><a href="#t1484022251001307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:24:11</span>           nathanmarz </span><span>yea the documentation could be a lot better</span></div><div id="t1484022286001308" t="2017-01-10 04:24:46 nathanmarz a good beginner tutorial would be great, but I don&apos;t have time for that now"><a href="#t1484022286001308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:24:46</span>           nathanmarz </span><span>a good beginner tutorial would be great, but I don&apos;t have time for that now</span></div><div id="t1484022295001309" t="2017-01-10 04:24:55 nathanmarz would love documentation contributions"><a href="#t1484022295001309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:24:55</span>           nathanmarz </span><span>would love documentation contributions</span></div><div id="t1484022303001310" t="2017-01-10 04:25:03 qqq lol"><a href="#t1484022303001310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">04:25:03</span>                  qqq </span><span>lol</span></div><div id="t1484078939001317" t="2017-01-10 20:08:59 richiardiandrea @nathanmarz is there a more elegant way to do this:
 (defn normalize-family
  [family]
  (merge
   (sp/setval [sp/MAP-VALS string?] sp/NONE (:family family))
   (sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                  :family]
                 (fn [family _] family)
                 family)))
"><a href="#t1484078939001317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:08:59</span>      richiardiandrea </span><span>@nathanmarz is there a more elegant way to do this:
</span><pre>(defn normalize-family
  [family]
  (merge
   (sp/setval [sp/MAP-VALS string?] sp/NONE (:family family))
   (sp/transform [(sp/collect-one [:family (sp/submap [:name :description])])
                  :family]
                 (fn [family _] family)
                 family)))
</pre></div><div id="t1484078995001318" t="2017-01-10 20:09:55 richiardiandrea the initial shape is  {:family {:name &quot;art&quot; :desc &quot;sda&quot; :complex-map {....}}"><a href="#t1484078995001318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:09:55</span>      richiardiandrea </span><span>the initial shape is </span><code>{:family {:name &quot;art&quot; :desc &quot;sda&quot; :complex-map {....}}</code></div><div id="t1484079025001319" t="2017-01-10 20:10:25 richiardiandrea and I basically want to transform it into  {:family {:name &quot;art&quot; :desc &quot;sda&quot;} :complex-map {....}}"><a href="#t1484079025001319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:10:25</span>      richiardiandrea </span><span>and I basically want to transform it into </span><code>{:family {:name &quot;art&quot; :desc &quot;sda&quot;} :complex-map {....}}</code></div><div id="t1484079279001327" t="2017-01-10 20:14:39 nathanmarz you just want to move :complex-map keypair into parent map?"><a href="#t1484079279001327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:14:39</span>           nathanmarz </span><span>you just want to move :complex-map keypair into parent map?</span></div><div id="t1484079295001328" t="2017-01-10 20:14:55 richiardiandrea ah yes that&apos;s another way to see it  😄"><a href="#t1484079295001328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:14:55</span>      richiardiandrea </span><span>ah yes that&apos;s another way to see it </span><b>😄</b></div><div id="t1484079330001329" t="2017-01-10 20:15:30 richiardiandrea but all the  :complex-map s, so everything that has not a  string?  value should go up"><a href="#t1484079330001329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:15:30</span>      richiardiandrea </span><span>but all the </span><code>:complex-map</code><span>s, so everything that has not a </span><code>string?</code><span> value should go up</span></div><div id="t1484079619001330" t="2017-01-10 20:20:19 nathanmarz I think the way you&apos;re doing it is fine"><a href="#t1484079619001330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:20:19</span>           nathanmarz </span><span>I think the way you&apos;re doing it is fine</span></div><div id="t1484080045001331" t="2017-01-10 20:27:25 richiardiandrea @nathanmarz cool then thanks!"><a href="#t1484080045001331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:27:25</span>      richiardiandrea </span><span>@nathanmarz cool then thanks!</span></div><div id="t1484080943001333" t="2017-01-10 20:42:23 qqq in specter, is it possible for a update function to depend not only on the value, but also on the &quot;path&quot; down to the node ?"><a href="#t1484080943001333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:42:23</span>                  qqq </span><span>in specter, is it possible for a update function to depend not only on the value, but also on the &quot;path&quot; down to the node ?</span></div><div id="t1484081269001334" t="2017-01-10 20:47:49 richiardiandrea @qqq I think there is a  https://github.com/nathanmarz/specter/wiki/List-of-Navigators#if-path  but I guess depends a lot on what you have in mind"><a href="#t1484081269001334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:47:49</span>      richiardiandrea </span><span>@qqq I think there is a </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#if-path" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#if-path</a><span> but I guess depends a lot on what you have in mind</span></div><div id="t1484081731001337" t="2017-01-10 20:55:31 bfabry @qqq have you got a pseudo example?"><a href="#t1484081731001337" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:55:31</span>               bfabry </span><span>@qqq have you got a pseudo example?</span></div><div id="t1484081769001338" t="2017-01-10 20:56:09 richiardiandrea @qqq also  https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform"><a href="#t1484081769001338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:56:09</span>      richiardiandrea </span><span>@qqq also </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform</a></div><div id="t1484081888001340" t="2017-01-10 20:58:08 qqq {:a {:b [:apple :orange :pear]
     :c [:juice]}
 :e [:cat :dog]}

to

{:a {:b [[[:a :b 0] :apple]
         [[:a :b 1] :orange]
         [[:a :b 2] :pear]]
     :c [[[:a :c 0] :juice]]}
 :e [[[:e 0] :cat]
     [[:e 1] :dog]
     ]}
 
^^ can specter do the above transform ? I want to map over the leafs, and for each leaf, also store into it its &apos;path&apos;"><a href="#t1484081888001340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:58:08</span>                  qqq </span><pre>{:a {:b [:apple :orange :pear]
     :c [:juice]}
 :e [:cat :dog]}

to

{:a {:b [[[:a :b 0] :apple]
         [[:a :b 1] :orange]
         [[:a :b 2] :pear]]
     :c [[[:a :c 0] :juice]]}
 :e [[[:e 0] :cat]
     [[:e 1] :dog]
     ]}
</pre><span>
^^ can specter do the above transform ? I want to map over the leafs, and for each leaf, also store into it its &apos;path&apos;</span></div><div id="t1484081894001341" t="2017-01-10 20:58:14 qqq @bfabry : ^^^"><a href="#t1484081894001341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:58:14</span>                  qqq </span><span>@bfabry : ^^^</span></div><div id="t1484081998001342" t="2017-01-10 20:59:58 bfabry that&apos;s an interesting thought. what would you want to receive if it went through a navigator like a predicate? #(.startsWith % &quot;:or&quot;) or similar?"><a href="#t1484081998001342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">20:59:58</span>               bfabry </span><span>that&apos;s an interesting thought. what would you want to receive if it went through a navigator like a predicate? #(.startsWith % &quot;:or&quot;) or similar?</span></div><div id="t1484082019001343" t="2017-01-10 21:00:19 qqq I never considered that case."><a href="#t1484082019001343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:00:19</span>                  qqq </span><span>I never considered that case.</span></div><div id="t1484082037001344" t="2017-01-10 21:00:37 qqq Maybe this is not a right fit with specter, since specter is &quot;does more than indexing&quot;"><a href="#t1484082037001344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:00:37</span>                  qqq </span><span>Maybe this is not a right fit with specter, since specter is &quot;does more than indexing&quot;</span></div><div id="t1484082048001345" t="2017-01-10 21:00:48 qqq In haskell, this is trivial with a &quot;reader monad&quot;"><a href="#t1484082048001345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:00:48</span>                  qqq </span><span>In haskell, this is trivial with a &quot;reader monad&quot;</span></div><div id="t1484082055001346" t="2017-01-10 21:00:55 qqq not sure the right clojure solution"><a href="#t1484082055001346" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:00:55</span>                  qqq </span><span>not sure the right clojure solution</span></div><div id="t1484082278001347" t="2017-01-10 21:04:38 bfabry maybe zippers if your data is representable as a tree (which that is)"><a href="#t1484082278001347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:04:38</span>               bfabry </span><span>maybe zippers if your data is representable as a tree (which that is)</span></div><div id="t1484083633001348" t="2017-01-10 21:27:13 nathanmarz @qqq you can collect values as you go"><a href="#t1484083633001348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:27:13</span>           nathanmarz </span><span>@qqq you can collect values as you go</span></div><div id="t1484083730001349" t="2017-01-10 21:28:50 qqq nathanmarz: does this involve (1) making the &apos;update&apos; function impure&apos;, or (2) does specter support the reader monad?"><a href="#t1484083730001349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:28:50</span>                  qqq </span><span>nathanmarz: does this involve (1) making the &apos;update&apos; function impure&apos;, or (2) does specter support the reader monad?</span></div><div id="t1484084386001350" t="2017-01-10 21:39:46 nathanmarz @qqq like this:
 (defnav ALL-INDEXED []
  (select* [this structure next-fn]
    ;; fill this in
    )
  (transform* [this structure next-fn]
    (map-indexed
      (fn [i v]
        (second (next-fn [i v])))
      structure
      )))


(def MyPath
  (recursive-path [] p
    (cond-path map? [ALL (collect-one FIRST) LAST p]
               vector? [ALL-INDEXED (collect-one FIRST) LAST p]
               STAY STAY)))

(transform MyPath
  (fn [&amp; vals] vals)
  {:a {:b [:apple :orange :pear]
   :c [:juice]}
   :e [:cat :dog]})
"><a href="#t1484084386001350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:39:46</span>           nathanmarz </span><span>@qqq like this:
</span><pre>(defnav ALL-INDEXED []
  (select* [this structure next-fn]
    ;; fill this in
    )
  (transform* [this structure next-fn]
    (map-indexed
      (fn [i v]
        (second (next-fn [i v])))
      structure
      )))


(def MyPath
  (recursive-path [] p
    (cond-path map? [ALL (collect-one FIRST) LAST p]
               vector? [ALL-INDEXED (collect-one FIRST) LAST p]
               STAY STAY)))

(transform MyPath
  (fn [&amp; vals] vals)
  {:a {:b [:apple :orange :pear]
   :c [:juice]}
   :e [:cat :dog]})
</pre></div><div id="t1484084399001351" t="2017-01-10 21:39:59 nathanmarz it&apos;s pure"><a href="#t1484084399001351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:39:59</span>           nathanmarz </span><span>it&apos;s pure</span></div><div id="t1484084415001352" t="2017-01-10 21:40:15 nathanmarz more work is needed on  ALL-INDEXED  to make it preserve type (ala  ALL ), but that&apos;s the gist of it"><a href="#t1484084415001352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:40:15</span>           nathanmarz </span><span>more work is needed on </span><code>ALL-INDEXED</code><span> to make it preserve type (ala </span><code>ALL</code><span>), but that&apos;s the gist of it</span></div><div id="t1484085145001353" t="2017-01-10 21:52:25 schmee (removed redudant answer cause slack was out of sync)"><a href="#t1484085145001353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">21:52:25</span>               schmee </span><span>(removed redudant answer cause slack was out of sync)</span></div><div id="t1484087121001356" t="2017-01-10 22:25:21 schmee if I have a path like this, will it get cached automatically?"><a href="#t1484087121001356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:25:21</span>               schmee </span><span>if I have a path like this, will it get cached automatically?</span></div><div id="t1484087124001357" t="2017-01-10 22:25:24 schmee (defn every-nth [n] [ALL-INDEXED (collect-one FIRST) (fn [[i _]] (= 0 (mod i n))) LAST])"><a href="#t1484087124001357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:25:24</span>               schmee </span><code>(defn every-nth [n] [ALL-INDEXED (collect-one FIRST) (fn [[i _]] (= 0 (mod i n))) LAST])</code></div><div id="t1484087139001358" t="2017-01-10 22:25:39 schmee using your implementation of  ALL-INDEXED  above"><a href="#t1484087139001358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:25:39</span>               schmee </span><span>using your implementation of </span><code>ALL-INDEXED</code><span> above</span></div><div id="t1484087234001359" t="2017-01-10 22:27:14 nathanmarz no"><a href="#t1484087234001359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:27:14</span>           nathanmarz </span><span>no</span></div><div id="t1484087272001360" t="2017-01-10 22:27:52 nathanmarz just do this:
 (defn every-nth [n] (path ALL-INDEXED (collect-one FIRST) (fn [[i _]] (= 0 (mod i n))) LAST))
"><a href="#t1484087272001360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:27:52</span>           nathanmarz </span><span>just do this:
</span><pre>(defn every-nth [n] (path ALL-INDEXED (collect-one FIRST) (fn [[i _]] (= 0 (mod i n))) LAST))
</pre></div><div id="t1484087299001361" t="2017-01-10 22:28:19 schmee ahh, gotcha"><a href="#t1484087299001361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:28:19</span>               schmee </span><span>ahh, gotcha</span></div><div id="t1484087312001362" t="2017-01-10 22:28:32 nathanmarz path  implements all the inline caching stuff"><a href="#t1484087312001362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:28:32</span>           nathanmarz </span><code>path</code><span> implements all the inline caching stuff</span></div><div id="t1484087357001363" t="2017-01-10 22:29:17 schmee also, the macros wiki page mentioned a  must-cache-paths!  fn, but it seems like that function is gone?"><a href="#t1484087357001363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:29:17</span>               schmee </span><span>also, the macros wiki page mentioned a </span><code>must-cache-paths!</code><span> fn, but it seems like that function is gone?</span></div><div id="t1484087378001364" t="2017-01-10 22:29:38 nathanmarz yea that&apos;s gone as of 0.13.0"><a href="#t1484087378001364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:29:38</span>           nathanmarz </span><span>yea that&apos;s gone as of 0.13.0</span></div><div id="t1484087399001365" t="2017-01-10 22:29:59 nathanmarz every path can be inline cached now"><a href="#t1484087399001365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:29:59</span>           nathanmarz </span><span>every path can be inline cached now</span></div><div id="t1484087442001366" t="2017-01-10 22:30:42 schmee sweet  :+1:"><a href="#t1484087442001366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:30:42</span>               schmee </span><span>sweet </span><b>:+1:</b></div><div id="t1484087500001367" t="2017-01-10 22:31:40 schmee it’s really a whole new paradigm to use Specter, I feel kinda lost just like I did when I went from imperative to functional programming"><a href="#t1484087500001367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:31:40</span>               schmee </span><span>it’s really a whole new paradigm to use Specter, I feel kinda lost just like I did when I went from imperative to functional programming</span></div><div id="t1484087509001368" t="2017-01-10 22:31:49 schmee but I guess it will reveal itself in due time  🙂"><a href="#t1484087509001368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:31:49</span>               schmee </span><span>but I guess it will reveal itself in due time </span><b>🙂</b></div><div id="t1484087552001369" t="2017-01-10 22:32:32 nathanmarz you&apos;ll get there"><a href="#t1484087552001369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:32:32</span>           nathanmarz </span><span>you&apos;ll get there</span></div><div id="t1484087559001370" t="2017-01-10 22:32:39 nathanmarz eventually you&apos;ll wonder how you ever programmed without it"><a href="#t1484087559001370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span> <span class="t" onclick="H(this)">22:32:39</span>           nathanmarz </span><span>eventually you&apos;ll wonder how you ever programmed without it</span></div><div id="t1484096646001371" t="2017-01-11 01:04:06 qqq what&apos;s a good letter to bind com.rpl.specter to , given that I already have s -&gt; clojure.spec ?"><a href="#t1484096646001371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:04:06</span>                  qqq </span><span>what&apos;s a good letter to bind com.rpl.specter to , given that I already have s -&gt; clojure.spec ?</span></div><div id="t1484096925001372" t="2017-01-11 01:08:45 bfabry @qqq our convention is sp and I believe i&apos;ve seen it in other places"><a href="#t1484096925001372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:08:45</span>               bfabry </span><span>@qqq our convention is sp and I believe i&apos;ve seen it in other places</span></div><div id="t1484097005001373" t="2017-01-11 01:10:05 qqq @bfabry : I was going to use &quot;dt&quot; for &quot;data&quot;, but &quot;sp&quot; makes more sense"><a href="#t1484097005001373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:10:05</span>                  qqq </span><span>@bfabry : I was going to use &quot;dt&quot; for &quot;data&quot;, but &quot;sp&quot; makes more sense</span></div><div id="t1484097061001374" t="2017-01-11 01:11:01 bfabry quicker to type than dt on a qwerty keyboard  😛"><a href="#t1484097061001374" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:11:01</span>               bfabry </span><span>quicker to type than dt on a qwerty keyboard </span><b>😛</b></div><div id="t1484097105001375" t="2017-01-11 01:11:45 qqq it&apos;s unfortunate that spec / specter share such a long prefix"><a href="#t1484097105001375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:11:45</span>                  qqq </span><span>it&apos;s unfortunate that spec / specter share such a long prefix</span></div><div id="t1484097153001376" t="2017-01-11 01:12:33 bfabry I guess yeah, though spec is in core so I think it&apos;s fair to just assume it will always get the bare &apos;s&apos;"><a href="#t1484097153001376" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">01:12:33</span>               bfabry </span><span>I guess yeah, though spec is in core so I think it&apos;s fair to just assume it will always get the bare &apos;s&apos;</span></div><div id="t1484100098001377" t="2017-01-11 02:01:38 richiardiandrea I second  sp  :)"><a href="#t1484100098001377" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">02:01:38</span>      richiardiandrea </span><span>I second </span><code>sp</code><span> :)</span></div><div id="t1484105651001378" t="2017-01-11 03:34:11 qqq @nathanmarz : between cascalog, elephantdb, and specter; you have the tools for &quot;manipulating large scale datasets&quot; -- any plans on a database of some sort down the line?"><a href="#t1484105651001378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">03:34:11</span>                  qqq </span><span>@nathanmarz : between cascalog, elephantdb, and specter; you have the tools for &quot;manipulating large scale datasets&quot; -- any plans on a database of some sort down the line?</span></div><div id="t1484106183001379" t="2017-01-11 03:43:03 qqq https://github.com/nathanmarz/specter/search?utf8=%E2%9C%93&amp;amp;q=setval  &lt;-- where is setval defined?"><a href="#t1484106183001379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">03:43:03</span>                  qqq </span><a href="https://github.com/nathanmarz/specter/search?utf8=%E2%9C%93&amp;amp;q=setval" target="_blank">https://github.com/nathanmarz/specter/search?utf8=%E2%9C%93&amp;amp;q=setval</a><span> &lt;-- where is setval defined?</span></div><div id="t1484106285001382" t="2017-01-11 03:44:45 qqq (m/pp (com.rpl.specter/setval [:a com.rpl.specter/ALL nil?] com.rpl.specter/NONE {:a [1 2 nil 3 nil]}))
is outputting:
{:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}
 
what am I doing wrong?"><a href="#t1484106285001382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">03:44:45</span>                  qqq </span><pre>(m/pp (com.rpl.specter/setval [:a com.rpl.specter/ALL nil?] com.rpl.specter/NONE {:a [1 2 nil 3 nil]}))
is outputting:
{:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}
</pre><span>
what am I doing wrong?</span></div><div id="t1484108948001383" t="2017-01-11 04:29:08 qqq issue resolved -- I was on 0.12 instead of 0.13.3-snapshot"><a href="#t1484108948001383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">04:29:08</span>                  qqq </span><span>issue resolved -- I was on 0.12 instead of 0.13.3-snapshot</span></div><div id="t1484109409001384" t="2017-01-11 04:36:49 nathanmarz @qqq no comment ;)"><a href="#t1484109409001384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">04:36:49</span>           nathanmarz </span><span>@qqq no comment ;)</span></div><div id="t1484111060001385" t="2017-01-11 05:04:20 qqq @nathanmarz : what, if any, is the theoretical under pinning of specter?
in numpy, we can do something like:
a :: mxn float
b :: mxn bool
a [b] = ... 
// assigns to the portion of a where b is true
specter seems to be doing this on a &quot;multi level&quot; way, but I&apos;m wondering if there is some deeper theoretical underpinning"><a href="#t1484111060001385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">05:04:20</span>                  qqq </span><span>@nathanmarz : what, if any, is the theoretical under pinning of specter?
in numpy, we can do something like:
a :: mxn float
b :: mxn bool
a [b] = ... 
// assigns to the portion of a where b is true
specter seems to be doing this on a &quot;multi level&quot; way, but I&apos;m wondering if there is some deeper theoretical underpinning</span></div><div id="t1484117374001386" t="2017-01-11 06:49:34 qqq does (setval BEGINNING) always treat both args as seqs and output a seq?"><a href="#t1484117374001386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">06:49:34</span>                  qqq </span><span>does (setval BEGINNING) always treat both args as seqs and output a seq?</span></div><div id="t1484125320001393" t="2017-01-11 09:02:00 qqq Keeps the element only if it matches the supplied predicate. This is the late-bound parameterized version of using a function directly in a path.

^^ -- I don&apos; get it. Why do I need pred instead of just using the function?"><a href="#t1484125320001393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">09:02:00</span>                  qqq </span><span>Keeps the element only if it matches the supplied predicate. This is the late-bound parameterized version of using a function directly in a path.

^^ -- I don&apos; get it. Why do I need pred instead of just using the function?</span></div><div id="t1484125786001394" t="2017-01-11 09:09:46 qqq ;; not-selected?: stops navigation if something is found
(sp/select [sp/all (sp/not-selected? even?)] (range 10))
(sp/select [sp/all (sp/not-selected? [(sp/must :a) even?])] [{:a 0} {:a 1} {:a 2} {:a 3}])
(sp/select-one (sp/not-selected? [sp/all (sp/must :a) even?]) [{:a 0} {:a 1} {:a 2} {:a 3}])

;; not-selected?: stops navigation if fails to find path
(sp/select [sp/all (sp/selected? even?)] (range 10))
(sp/select [sp/all (sp/selected? [(sp/must :a) even?])] [{:a 0} {:a 1} {:a 2} {:a 3}])
(sp/select (sp/selected? [sp/all (sp/must :a) even?]) [{:a 0} {:a 1} {:a 2} {:a 3}])
 
selected? / not-selected? -- these examples I am not understanding"><a href="#t1484125786001394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">09:09:46</span>                  qqq </span><pre>;; not-selected?: stops navigation if something is found
(sp/select [sp/all (sp/not-selected? even?)] (range 10))
(sp/select [sp/all (sp/not-selected? [(sp/must :a) even?])] [{:a 0} {:a 1} {:a 2} {:a 3}])
(sp/select-one (sp/not-selected? [sp/all (sp/must :a) even?]) [{:a 0} {:a 1} {:a 2} {:a 3}])

;; not-selected?: stops navigation if fails to find path
(sp/select [sp/all (sp/selected? even?)] (range 10))
(sp/select [sp/all (sp/selected? [(sp/must :a) even?])] [{:a 0} {:a 1} {:a 2} {:a 3}])
(sp/select (sp/selected? [sp/all (sp/must :a) even?]) [{:a 0} {:a 1} {:a 2} {:a 3}])
</pre><span>
selected? / not-selected? -- these examples I am not understanding</span></div><div id="t1484141099001395" t="2017-01-11 13:24:59 nathanmarz @qqq  pred  is the navigator that functions implicitly use"><a href="#t1484141099001395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:24:59</span>           nathanmarz </span><span>@qqq </span><code>pred</code><span> is the navigator that functions implicitly use</span></div><div id="t1484141143001396" t="2017-01-11 13:25:43 nathanmarz You would use it in a situation like this:
 (defn foo [afn data]
  (select [ALL (pred afn)] data))
"><a href="#t1484141143001396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:25:43</span>           nathanmarz </span><span>You would use it in a situation like this:
</span><pre>(defn foo [afn data]
  (select [ALL (pred afn)] data))
</pre></div><div id="t1484141184001397" t="2017-01-11 13:26:24 nathanmarz if you were just to do  (select [ALL afn] data)  there&apos;s no way to know what the type of that local will be (or whether it will change on every invocation, so specter would have to figure that out on every single invocation"><a href="#t1484141184001397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:26:24</span>           nathanmarz </span><span>if you were just to do </span><code>(select [ALL afn] data)</code><span> there&apos;s no way to know what the type of that local will be (or whether it will change on every invocation, so specter would have to figure that out on every single invocation</span></div><div id="t1484141191001398" t="2017-01-11 13:26:31 nathanmarz which would hurt performance"><a href="#t1484141191001398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:26:31</span>           nathanmarz </span><span>which would hurt performance</span></div><div id="t1484141225001399" t="2017-01-11 13:27:05 nathanmarz by explicitly saying it&apos;s  pred , the inline compiler can bake it into the path and avoid that coercion at runtime"><a href="#t1484141225001399" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:27:05</span>           nathanmarz </span><span>by explicitly saying it&apos;s </span><code>pred</code><span>, the inline compiler can bake it into the path and avoid that coercion at runtime</span></div><div id="t1484141268001400" t="2017-01-11 13:27:48 nathanmarz a common use case of  selected?  is finding all values in a map where the key matches some criteria"><a href="#t1484141268001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:27:48</span>           nathanmarz </span><span>a common use case of </span><code>selected?</code><span> is finding all values in a map where the key matches some criteria</span></div><div id="t1484141291001401" t="2017-01-11 13:28:11 nathanmarz e.g.  (select [ALL (selected? FIRST some-predicate?) LAST] amap)"><a href="#t1484141291001401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:28:11</span>           nathanmarz </span><span>e.g. </span><code>(select [ALL (selected? FIRST some-predicate?) LAST] amap)</code></div><div id="t1484141302001402" t="2017-01-11 13:28:22 nathanmarz lot of other use cases of course"><a href="#t1484141302001402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:28:22</span>           nathanmarz </span><span>lot of other use cases of course</span></div><div id="t1484141323001403" t="2017-01-11 13:28:43 nathanmarz as for theoretical underpinnings... no"><a href="#t1484141323001403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:28:43</span>           nathanmarz </span><span>as for theoretical underpinnings... no</span></div><div id="t1484141359001404" t="2017-01-11 13:29:19 nathanmarz the specter API is the result of me unifying a ton of data manipulation use cases into the simplest possible abstractions"><a href="#t1484141359001404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:29:19</span>           nathanmarz </span><span>the specter API is the result of me unifying a ton of data manipulation use cases into the simplest possible abstractions</span></div><div id="t1484141403001405" t="2017-01-11 13:30:03 nathanmarz there&apos;s similarities to haskell lenses but also some key differences"><a href="#t1484141403001405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">13:30:03</span>           nathanmarz </span><span>there&apos;s similarities to haskell lenses but also some key differences</span></div><div id="t1484153812001412" t="2017-01-11 16:56:52 gdeer81 I&apos;m starting over and playing with examples to see if I can stub my toe and document beginner gotchas. here&apos;s an interesting example :  (setval [:peeps END] [:name &quot;Moe&quot;] {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]}) 
 (setval [:peeps END] {:name &quot;Moe&quot;} {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]}) 
 (setval [:peeps END] [{:name &quot;Moe&quot;}] {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]})"><a href="#t1484153812001412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">16:56:52</span>              gdeer81 </span><span>I&apos;m starting over and playing with examples to see if I can stub my toe and document beginner gotchas. here&apos;s an interesting example : </span><code>(setval [:peeps END] [:name &quot;Moe&quot;] {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]})</code><span>
</span><code>(setval [:peeps END] {:name &quot;Moe&quot;} {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]})</code><span>
</span><code>(setval [:peeps END] [{:name &quot;Moe&quot;}] {:peeps [{:name &quot;Larry&quot; } {:name &quot;Curly&quot;}]})</code></div><div id="t1484154079001414" t="2017-01-11 17:01:19 gdeer81 the first one adds the key and string to the vector, the second adds a vector with the keyword and string to the vector and the last does what I was looking for and adds the map for Moe to the vector of maps"><a href="#t1484154079001414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-11</span> <span class="t" onclick="H(this)">17:01:19</span>              gdeer81 </span><span>the first one adds the key and string to the vector, the second adds a vector with the keyword and string to the vector and the last does what I was looking for and adds the map for Moe to the vector of maps</span></div><div id="t1484198580001428" t="2017-01-12 05:23:00 gdeer81 Early access to Specter Koans:  https://github.com/gdeer81/specter-koans  currently only covers select and navigation and only takes about 10 minutes to complete but I&apos;m going to constantly be adding more"><a href="#t1484198580001428" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">05:23:00</span>              gdeer81 </span><span>Early access to Specter Koans: </span><a href="https://github.com/gdeer81/specter-koans" target="_blank">https://github.com/gdeer81/specter-koans</a><span> currently only covers select and navigation and only takes about 10 minutes to complete but I&apos;m going to constantly be adding more</span></div><div id="t1484211495001430" t="2017-01-12 08:58:15 schmee nice, I’ll check em out later today!"><a href="#t1484211495001430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">08:58:15</span>               schmee </span><span>nice, I’ll check em out later today!</span></div><div id="t1484215514001431" t="2017-01-12 10:05:14 james @gdeer81 Great initiative!"><a href="#t1484215514001431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">10:05:14</span>                james </span><span>@gdeer81 Great initiative!</span></div><div id="t1484215707001432" t="2017-01-12 10:08:27 james Is there a bug here?
 &quot;FIRST is obvious on collections except for on a map&quot;
 (= true (= [[0 :a]] (select FIRST (sorted-map 0 :a 1 :b))))

 &quot;You will also run into the same thing with LAST on a map&quot;
 (= false (= [1 :b] (select LAST (sorted-map 0 :a 1 :b))))
 
As you can’t guarantee order in a map, you can&apos;t know in advance if the result will be true or false. I guess this might be confusing for some people."><a href="#t1484215707001432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">10:08:27</span>                james </span><span>Is there a bug here?
</span><pre>&quot;FIRST is obvious on collections except for on a map&quot;
 (= true (= [[0 :a]] (select FIRST (sorted-map 0 :a 1 :b))))

 &quot;You will also run into the same thing with LAST on a map&quot;
 (= false (= [1 :b] (select LAST (sorted-map 0 :a 1 :b))))
</pre><span>
As you can’t guarantee order in a map, you can&apos;t know in advance if the result will be true or false. I guess this might be confusing for some people.</span></div><div id="t1484215997001433" t="2017-01-12 10:13:17 bfabry I think you&apos;re just missing a wrapping set of [] for the second assertion"><a href="#t1484215997001433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">10:13:17</span>               bfabry </span><span>I think you&apos;re just missing a wrapping set of [] for the second assertion</span></div><div id="t1484216072001434" t="2017-01-12 10:14:32 bfabry because (though this could just be lucky)
 (first (sorted-map 0 :a 1 :b))
=&gt; [0 :a]
(last (sorted-map 0 :a 1 :b))
=&gt; [1 :b]
(sp/select sp/FIRST (sorted-map 0 :a 1 :b))
=&gt; [[0 :a]]
(sp/select sp/LAST (sorted-map 0 :a 1 :b))
=&gt; [[1 :b]]
"><a href="#t1484216072001434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">10:14:32</span>               bfabry </span><span>because (though this could just be lucky)
</span><pre>(first (sorted-map 0 :a 1 :b))
=&gt; [0 :a]
(last (sorted-map 0 :a 1 :b))
=&gt; [1 :b]
(sp/select sp/FIRST (sorted-map 0 :a 1 :b))
=&gt; [[0 :a]]
(sp/select sp/LAST (sorted-map 0 :a 1 :b))
=&gt; [[1 :b]]
</pre></div><div id="t1484236612001441" t="2017-01-12 15:56:52 gdeer81 @james that one was actually pulled from the example  https://github.com/nathanmarz/specter/wiki/List-of-Navigators#first  but it looks like I used select instead of select-one"><a href="#t1484236612001441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">15:56:52</span>              gdeer81 </span><span>@james that one was actually pulled from the example </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#first" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#first</a><span> but it looks like I used select instead of select-one</span></div><div id="t1484239515001443" t="2017-01-12 16:45:15 gdeer81 @bfabry yeah this koan has taught me to pay attention to which select function I&apos;m using lol"><a href="#t1484239515001443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">16:45:15</span>              gdeer81 </span><span>@bfabry yeah this koan has taught me to pay attention to which select function I&apos;m using lol</span></div><div id="t1484240489001445" t="2017-01-12 17:01:29 devth checking out specter, looks great so far. one thing i&apos;m trying to figure out is, given a nested data structure and a leaf node (e.g.  :foo ), can specter compute the path to that node for me?"><a href="#t1484240489001445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:01:29</span>                devth </span><span>checking out specter, looks great so far. one thing i&apos;m trying to figure out is, given a nested data structure and a leaf node (e.g. </span><code>:foo</code><span>), can specter compute the path to that node for me?</span></div><div id="t1484240573001446" t="2017-01-12 17:02:53 nathanmarz @devth you&apos;re looking for this:  https://github.com/nathanmarz/specter/issues/49"><a href="#t1484240573001446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:02:53</span>           nathanmarz </span><span>@devth you&apos;re looking for this: </span><a href="https://github.com/nathanmarz/specter/issues/49" target="_blank">https://github.com/nathanmarz/specter/issues/49</a></div><div id="t1484240575001448" t="2017-01-12 17:02:55 nathanmarz not implemented"><a href="#t1484240575001448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:02:55</span>           nathanmarz </span><span>not implemented</span></div><div id="t1484240598001449" t="2017-01-12 17:03:18 nathanmarz you can do it manually for some cases using value collection (`collect` and  collect-one )"><a href="#t1484240598001449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:03:18</span>           nathanmarz </span><span>you can do it manually for some cases using value collection (`collect` and </span><code>collect-one</code><span>)</span></div><div id="t1484240670001450" t="2017-01-12 17:04:30 devth thanks. i&apos;ll play with it"><a href="#t1484240670001450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:04:30</span>                devth </span><span>thanks. i&apos;ll play with it</span></div><div id="t1484242359001451" t="2017-01-12 17:32:39 devth doesn&apos;t  collect  require that you know the path ahead of time? e.g. searching for  :qux  in a given structure –  [:foo/bar {:baz/a [:qux]}]  as an example"><a href="#t1484242359001451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">17:32:39</span>                devth </span><span>doesn&apos;t </span><code>collect</code><span> require that you know the path ahead of time? e.g. searching for </span><code>:qux</code><span> in a given structure – </span><code>[:foo/bar {:baz/a [:qux]}]</code><span> as an example</span></div><div id="t1484246078001452" t="2017-01-12 18:34:38 nathanmarz @devth there&apos;s an example above of what I mean"><a href="#t1484246078001452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">18:34:38</span>           nathanmarz </span><span>@devth there&apos;s an example above of what I mean</span></div><div id="t1484246086001453" t="2017-01-12 18:34:46 nathanmarz here:
 (defnav ALL-INDEXED []
  (select* [this structure next-fn]
    ;; fill this in
    )
  (transform* [this structure next-fn]
    (map-indexed
      (fn [i v]
        (second (next-fn [i v])))
      structure
      )))


(def MyPath
  (recursive-path [] p
    (cond-path map? [ALL (collect-one FIRST) LAST p]
               vector? [ALL-INDEXED (collect-one FIRST) LAST p]
               STAY STAY)))

(transform MyPath
  (fn [&amp; vals] vals)
  {:a {:b [:apple :orange :pear]
   :c [:juice]}
   :e [:cat :dog]})
"><a href="#t1484246086001453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">18:34:46</span>           nathanmarz </span><span>here:
</span><pre>(defnav ALL-INDEXED []
  (select* [this structure next-fn]
    ;; fill this in
    )
  (transform* [this structure next-fn]
    (map-indexed
      (fn [i v]
        (second (next-fn [i v])))
      structure
      )))


(def MyPath
  (recursive-path [] p
    (cond-path map? [ALL (collect-one FIRST) LAST p]
               vector? [ALL-INDEXED (collect-one FIRST) LAST p]
               STAY STAY)))

(transform MyPath
  (fn [&amp; vals] vals)
  {:a {:b [:apple :orange :pear]
   :c [:juice]}
   :e [:cat :dog]})
</pre></div><div id="t1484246103001454" t="2017-01-12 18:35:03 devth @nathanmarz awesome, thanks!"><a href="#t1484246103001454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">18:35:03</span>                devth </span><span>@nathanmarz awesome, thanks!</span></div><div id="t1484246211001455" t="2017-01-12 18:36:51 nathanmarz if you filled in  select*  for  ALL-INDEXED   then you could do  (select MyPath data)  to retrieve the paths to each leaf element"><a href="#t1484246211001455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-12</span> <span class="t" onclick="H(this)">18:36:51</span>           nathanmarz </span><span>if you filled in </span><code>select*</code><span> for </span><code>ALL-INDEXED</code><span>  then you could do </span><code>(select MyPath data)</code><span> to retrieve the paths to each leaf element</span></div><div id="t1484283177001462" t="2017-01-13 04:52:57 qqq I&apos;m looking for &quot;closest to leaf&quot; nodes that:
(1) have a :node filed, (2) have an empty :children field
how do I do this?"><a href="#t1484283177001462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">04:52:57</span>                  qqq </span><span>I&apos;m looking for &quot;closest to leaf&quot; nodes that:
(1) have a :node filed, (2) have an empty :children field
how do I do this?</span></div><div id="t1484283190001463" t="2017-01-13 04:53:10 qqq I think it&apos;s something dealing with walk, but I don&apos;t knowhow to &quot;force to the leafs&quot;"><a href="#t1484283190001463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">04:53:10</span>                  qqq </span><span>I think it&apos;s something dealing with walk, but I don&apos;t knowhow to &quot;force to the leafs&quot;</span></div><div id="t1484283231001464" t="2017-01-13 04:53:51 qqq {:node {:name &quot;tex&quot; :key :tex}
   :children
   [{:node {:name &quot;glyph&quot; :key :glpyh}}
    {:node {:name &quot;resize&quot; :key :resize}}
    {:node {:name &quot;frac&quot; :key :frac}}]}
 
^^ something like this, but it&apos;s a deep . / big tree, and I want the &apos;glph/resize/frac nodes"><a href="#t1484283231001464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">04:53:51</span>                  qqq </span><pre>{:node {:name &quot;tex&quot; :key :tex}
   :children
   [{:node {:name &quot;glyph&quot; :key :glpyh}}
    {:node {:name &quot;resize&quot; :key :resize}}
    {:node {:name &quot;frac&quot; :key :frac}}]}
</pre><span>
^^ something like this, but it&apos;s a deep . / big tree, and I want the &apos;glph/resize/frac nodes</span></div><div id="t1484284588001465" t="2017-01-13 05:16:28 qqq does specter allow &apos;recursive selectors&apos; without using walk?"><a href="#t1484284588001465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">05:16:28</span>                  qqq </span><span>does specter allow &apos;recursive selectors&apos; without using walk?</span></div><div id="t1484284599001466" t="2017-01-13 05:16:39 qqq I want something that says :stay -- and then process :children ALL, recursively"><a href="#t1484284599001466" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">05:16:39</span>                  qqq </span><span>I want something that says :stay -- and then process :children ALL, recursively</span></div><div id="t1484286933001473" t="2017-01-13 05:55:33 qqq specter&apos;s ALL is only &quot;process one level&quot;; is there a recursive-all which processes all subtrees?"><a href="#t1484286933001473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">05:55:33</span>                  qqq </span><span>specter&apos;s ALL is only &quot;process one level&quot;; is there a recursive-all which processes all subtrees?</span></div><div id="t1484305243001474" t="2017-01-13 11:00:43 qqq @nathanmarz : is there any version of specter that runs on java 7? I need to deploy on GAE and spcter appears to reqauire some jav a8 feature"><a href="#t1484305243001474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">11:00:43</span>                  qqq </span><span>@nathanmarz : is there any version of specter that runs on java 7? I need to deploy on GAE and spcter appears to reqauire some jav a8 feature</span></div><div id="t1484316913001475" t="2017-01-13 14:15:13 nathanmarz @qqq that&apos;s easy with  recursive-path"><a href="#t1484316913001475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">14:15:13</span>           nathanmarz </span><span>@qqq that&apos;s easy with </span><code>recursive-path</code></div><div id="t1484316928001476" t="2017-01-13 14:15:28 nathanmarz specter should work fine on java 7, are you running into an issue?"><a href="#t1484316928001476" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-13</span> <span class="t" onclick="H(this)">14:15:28</span>           nathanmarz </span><span>specter should work fine on java 7, are you running into an issue?</span></div><div id="t1484442253001513" t="2017-01-15 01:04:13 schmee qqq this seems to work:  (def DeepKeys
  (recursive-path [] p
    (if-path (must :children)
      [:children ALL p]
      [:node :key])))
"><a href="#t1484442253001513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">01:04:13</span>               schmee </span><span>qqq this seems to work: </span><pre>(def DeepKeys
  (recursive-path [] p
    (if-path (must :children)
      [:children ALL p]
      [:node :key])))
</pre></div><div id="t1484476783001527" t="2017-01-15 10:39:43 qqq is it possible to go a step further and say &quot;:children&quot; is not empty?"><a href="#t1484476783001527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">10:39:43</span>                  qqq </span><span>is it possible to go a step further and say &quot;:children&quot; is not empty?</span></div><div id="t1484476792001528" t="2017-01-15 10:39:52 qqq I wnat (must :children -- this part is not empty)"><a href="#t1484476792001528" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">10:39:52</span>                  qqq </span><span>I wnat (must :children -- this part is not empty)</span></div><div id="t1484478753001529" t="2017-01-15 11:12:33 nathanmarz @qqq you can replace  (must :children)  with  [:children FIRST]"><a href="#t1484478753001529" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:12:33</span>           nathanmarz </span><span>@qqq you can replace </span><code>(must :children)</code><span> with </span><code>[:children FIRST]</code></div><div id="t1484478799001530" t="2017-01-15 11:13:19 qqq @nathanmarz : I found that #(not-empty (:children %)) also worked"><a href="#t1484478799001530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:13:19</span>                  qqq </span><span>@nathanmarz : I found that #(not-empty (:children %)) also worked</span></div><div id="t1484478818001531" t="2017-01-15 11:13:38 qqq is the main disaadvantage t omy appraoch lack of optimizability since the funciton is &apos;opaque&apos; ?"><a href="#t1484478818001531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:13:38</span>                  qqq </span><span>is the main disaadvantage t omy appraoch lack of optimizability since the funciton is &apos;opaque&apos; ?</span></div><div id="t1484478952001532" t="2017-01-15 11:15:52 nathanmarz no"><a href="#t1484478952001532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:15:52</span>           nathanmarz </span><span>no</span></div><div id="t1484478966001533" t="2017-01-15 11:16:06 nathanmarz the function approach might be a little faster"><a href="#t1484478966001533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:16:06</span>           nathanmarz </span><span>the function approach might be a little faster</span></div><div id="t1484478979001534" t="2017-01-15 11:16:19 nathanmarz you&apos;d have to profile it"><a href="#t1484478979001534" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">11:16:19</span>           nathanmarz </span><span>you&apos;d have to profile it</span></div><div id="t1484505364001542" t="2017-01-15 18:36:04 richiardiandrea the recursive approach is very neat"><a href="#t1484505364001542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-15</span> <span class="t" onclick="H(this)">18:36:04</span>      richiardiandrea </span><span>the recursive approach is very neat</span></div><div id="t1484530920001543" t="2017-01-16 01:42:00 richiardiandrea so if i do something like:
 (sp/transform [:family
                 :relationship
                 sp/ALL]
                #(dadada)
                family)
 
The  :relationship  key is created even when it is missing. Is there a way to avoid it? Meaning I don&apos;t want to create it at all if it was not there in the first place?"><a href="#t1484530920001543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span> <span class="t" onclick="H(this)">01:42:00</span>      richiardiandrea </span><span>so if i do something like:
</span><pre>(sp/transform [:family
                 :relationship
                 sp/ALL]
                #(dadada)
                family)
</pre><span>
The </span><code>:relationship</code><span> key is created even when it is missing. Is there a way to avoid it? Meaning I don&apos;t want to create it at all if it was not there in the first place?</span></div><div id="t1484553878001550" t="2017-01-16 08:04:38 schmee richiardiandrea use  (must :relationship)"><a href="#t1484553878001550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span> <span class="t" onclick="H(this)">08:04:38</span>               schmee </span><span>richiardiandrea use </span><code>(must :relationship)</code></div><div id="t1484557528001557" t="2017-01-16 09:05:28 schmee https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must"><a href="#t1484557528001557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span> <span class="t" onclick="H(this)">09:05:28</span>               schmee </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must</a></div><div id="t1484557536001559" t="2017-01-16 09:05:36 schmee keypath  might also be of interest"><a href="#t1484557536001559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span> <span class="t" onclick="H(this)">09:05:36</span>               schmee </span><code>keypath</code><span> might also be of interest</span></div><div id="t1484580645001566" t="2017-01-16 15:30:45 richiardiandrea @schmee thanks! Will try soon"><a href="#t1484580645001566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span> <span class="t" onclick="H(this)">15:30:45</span>      richiardiandrea </span><span>@schmee thanks! Will try soon</span></div><div id="t1484777797001604" t="2017-01-18 22:16:37 zane Has anyone successfully used  core.match  inside of a recursive path definition?"><a href="#t1484777797001604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-18</span> <span class="t" onclick="H(this)">22:16:37</span>                 zane </span><span>Has anyone successfully used </span><code>core.match</code><span> inside of a recursive path definition?</span></div><div id="t1484856116001627" t="2017-01-19 20:01:56 zane @nathanmarz,  recursive-path  is fantastic. Thanks!"><a href="#t1484856116001627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-19</span> <span class="t" onclick="H(this)">20:01:56</span>                 zane </span><span>@nathanmarz, </span><code>recursive-path</code><span> is fantastic. Thanks!</span></div><div id="t1485221381001693" t="2017-01-24 01:29:41 narkisr Hey, I&apos;m looking for a way to replace a single nested value {:one #{:two}} with a splattered list of values {:one #{1 2 3 4}} using transform"><a href="#t1485221381001693" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">01:29:41</span>              narkisr </span><span>Hey, I&apos;m looking for a way to replace a single nested value {:one #{:two}} with a splattered list of values {:one #{1 2 3 4}} using transform</span></div><div id="t1485221405001694" t="2017-01-24 01:30:05 narkisr Not sure if thats possible"><a href="#t1485221405001694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">01:30:05</span>              narkisr </span><span>Not sure if thats possible</span></div><div id="t1485244018001702" t="2017-01-24 07:46:58 james @narkisr How about  setval ?"><a href="#t1485244018001702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">07:46:58</span>                james </span><span>@narkisr How about </span><code>setval</code><span>?</span></div><div id="t1485244034001703" t="2017-01-24 07:47:14 james (setval [:one] #{1 2 3 4} {:one #{:two}})
&gt; {:one #{1 4 3 2}}"><a href="#t1485244034001703" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">07:47:14</span>                james </span><pre>(setval [:one] #{1 2 3 4} {:one #{:two}})
&gt; {:one #{1 4 3 2}}</pre></div><div id="t1485248141001704" t="2017-01-24 08:55:41 narkisr Hey James, I need the to be a result of a function call (transformation) and not a static value like in setval"><a href="#t1485248141001704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">08:55:41</span>              narkisr </span><span>Hey James, I need the to be a result of a function call (transformation) and not a static value like in setval</span></div><div id="t1485248155001705" t="2017-01-24 08:55:55 narkisr the value"><a href="#t1485248155001705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">08:55:55</span>              narkisr </span><span>the value</span></div><div id="t1485251869001707" t="2017-01-24 09:57:49 james @narkisr  (transform [:one] (constantly #{1 2 3 4}) {:one #{:two}})"><a href="#t1485251869001707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">09:57:49</span>                james </span><span>@narkisr </span><pre>(transform [:one] (constantly #{1 2 3 4}) {:one #{:two}})</pre></div><div id="t1485251872001708" t="2017-01-24 09:57:52 james Does that help?"><a href="#t1485251872001708" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">09:57:52</span>                james </span><span>Does that help?</span></div><div id="t1485262373001715" t="2017-01-24 12:52:53 narkisr So In my case I&apos;m transforming the keys into a list of vectors for example (tranform [:one :two] (fn [_] [[1 2] [3 4]]) {:one #{:two}}) I would like to get {:one #{[1 2] [3 4]}}"><a href="#t1485262373001715" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">12:52:53</span>              narkisr </span><span>So In my case I&apos;m transforming the keys into a list of vectors for example (tranform [:one :two] (fn [_] [[1 2] [3 4]]) {:one #{:two}}) I would like to get {:one #{[1 2] [3 4]}}</span></div><div id="t1485262393001716" t="2017-01-24 12:53:13 narkisr And not  {:one #{[[1 2] [3 4]]}}"><a href="#t1485262393001716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">12:53:13</span>              narkisr </span><span>And not  {:one #{[[1 2] [3 4]]}}</span></div><div id="t1485262468001717" t="2017-01-24 12:54:28 narkisr Its looks like partial flatten but I didn&apos;t manage to come without any working example"><a href="#t1485262468001717" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">12:54:28</span>              narkisr </span><span>Its looks like partial flatten but I didn&apos;t manage to come without any working example</span></div><div id="t1485264420001718" t="2017-01-24 13:27:00 nathanmarz @narkisr I think you&apos;re looking for this:  (transform [:one (subset #{:two})] (fn [_] #{[1 2] [3 4]}) {:one #{two}})"><a href="#t1485264420001718" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">13:27:00</span>           nathanmarz </span><span>@narkisr I think you&apos;re looking for this: </span><code>(transform [:one (subset #{:two})] (fn [_] #{[1 2] [3 4]}) {:one #{two}})</code></div><div id="t1485264447001719" t="2017-01-24 13:27:27 james @narkisr Do you actually want the inner data structure to be a set? Because you’re trying to access it like a hashmap (with a keyword), and talking about “transforming keys&quot;."><a href="#t1485264447001719" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">13:27:27</span>                james </span><span>@narkisr Do you actually want the inner data structure to be a set? Because you’re trying to access it like a hashmap (with a keyword), and talking about “transforming keys&quot;.</span></div><div id="t1485267503001720" t="2017-01-24 14:18:23 narkisr The actual code contains a hash which values are days like :sunday which I want so substitute for all the Sundays within a month (so you get multiple values out from a single value)"><a href="#t1485267503001720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">14:18:23</span>              narkisr </span><span>The actual code contains a hash which values are days like :sunday which I want so substitute for all the Sundays within a month (so you get multiple values out from a single value)</span></div><div id="t1485267544001721" t="2017-01-24 14:19:04 narkisr A set matches this use since the values are always unique"><a href="#t1485267544001721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">14:19:04</span>              narkisr </span><span>A set matches this use since the values are always unique</span></div><div id="t1485267601001722" t="2017-01-24 14:20:01 narkisr Thanks Natan ill give it a go"><a href="#t1485267601001722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">14:20:01</span>              narkisr </span><span>Thanks Natan ill give it a go</span></div><div id="t1485267724001723" t="2017-01-24 14:22:04 narkisr for example {:foo #{:sunday}} =&gt; {:foo #{[1 1] [8 1] [15 1] [22 1]  [29 1]}"><a href="#t1485267724001723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">14:22:04</span>              narkisr </span><span>for example {:foo #{:sunday}} =&gt; {:foo #{[1 1] [8 1] [15 1] [22 1]  [29 1]}</span></div><div id="t1485267745001724" t="2017-01-24 14:22:25 narkisr all the Sundays in Jan 2017"><a href="#t1485267745001724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-24</span> <span class="t" onclick="H(this)">14:22:25</span>              narkisr </span><span>all the Sundays in Jan 2017</span></div><div id="t1485304198001732" t="2017-01-25 00:29:58 narkisr Hey Natan its seems that subset does not fit the bill in my case because the values that I&apos;m replace are based on a pred"><a href="#t1485304198001732" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">00:29:58</span>              narkisr </span><span>Hey Natan its seems that subset does not fit the bill in my case because the values that I&apos;m replace are based on a pred</span></div><div id="t1485304291001733" t="2017-01-25 00:31:31 narkisr (tranform [:one (pred keyword?)] (fn [_] [[1 2] [3 4]]) {:one #{:two}})"><a href="#t1485304291001733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">00:31:31</span>              narkisr </span><span>(tranform [:one (pred keyword?)] (fn [_] [[1 2] [3 4]]) {:one #{:two}})</span></div><div id="t1485305441001734" t="2017-01-25 00:50:41 narkisr Ok managed to solve it"><a href="#t1485305441001734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">00:50:41</span>              narkisr </span><span>Ok managed to solve it</span></div><div id="t1485305505001735" t="2017-01-25 00:51:45 narkisr Since my kewords are days its closed set (so subset works) but id be curious on how you can use pred to substitute values"><a href="#t1485305505001735" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">00:51:45</span>              narkisr </span><span>Since my kewords are days its closed set (so subset works) but id be curious on how you can use pred to substitute values</span></div><div id="t1485316384001736" t="2017-01-25 03:53:04 nathanmarz @narkisr you would need to iterate over all the values and check the predicate against each value"><a href="#t1485316384001736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">03:53:04</span>           nathanmarz </span><span>@narkisr you would need to iterate over all the values and check the predicate against each value</span></div><div id="t1485316441001737" t="2017-01-25 03:54:01 nathanmarz ALL  isn&apos;t currently implemented for sets though"><a href="#t1485316441001737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">03:54:01</span>           nathanmarz </span><code>ALL</code><span> isn&apos;t currently implemented for sets though</span></div><div id="t1485316466001738" t="2017-01-25 03:54:26 nathanmarz you could either use a vector there instead of a set or make an  ALL-SET-ELEMS  navigator"><a href="#t1485316466001738" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">03:54:26</span>           nathanmarz </span><span>you could either use a vector there instead of a set or make an </span><code>ALL-SET-ELEMS</code><span> navigator</span></div><div id="t1485316474001739" t="2017-01-25 03:54:34 nathanmarz (or open a pull request to extend  ALL  to sets)"><a href="#t1485316474001739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">03:54:34</span>           nathanmarz </span><span>(or open a pull request to extend </span><code>ALL</code><span> to sets)</span></div><div id="t1485348602001747" t="2017-01-25 12:50:02 narkisr Thank you Natan, ill take a look on what it takes to add support for that"><a href="#t1485348602001747" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">12:50:02</span>              narkisr </span><span>Thank you Natan, ill take a look on what it takes to add support for that</span></div><div id="t1485349212001748" t="2017-01-25 13:00:12 narkisr Nathan*"><a href="#t1485349212001748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">13:00:12</span>              narkisr </span><span>Nathan*</span></div><div id="t1485352469001749" t="2017-01-25 13:54:29 nathanmarz @narkisr need to extend  AllTransformProtocol  to  PersistentHashSet"><a href="#t1485352469001749" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">13:54:29</span>           nathanmarz </span><span>@narkisr need to extend </span><code>AllTransformProtocol</code><span> to </span><code>PersistentHashSet</code></div><div id="t1485352482001750" t="2017-01-25 13:54:42 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L87"><a href="#t1485352482001750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">13:54:42</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L87" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L87</a></div><div id="t1485352596001752" t="2017-01-25 13:56:36 nathanmarz @narkisr actually just realized that  ALL  already handles sets via the default case, it&apos;s just not optimized like the other data structures"><a href="#t1485352596001752" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-25</span> <span class="t" onclick="H(this)">13:56:36</span>           nathanmarz </span><span>@narkisr actually just realized that </span><code>ALL</code><span> already handles sets via the default case, it&apos;s just not optimized like the other data structures</span></div><div id="t1485530350001804" t="2017-01-27 15:19:10 rauh I&apos;m guessing  setval  is faster than  assoc-in ? Can&apos;t find  setval  at all in the performance gist."><a href="#t1485530350001804" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:19:10</span>                 rauh </span><span>I&apos;m guessing </span><code>setval</code><span> is faster than </span><code>assoc-in</code><span>? Can&apos;t find </span><code>setval</code><span> at all in the performance gist.</span></div><div id="t1485531332001805" t="2017-01-27 15:35:32 nathanmarz @rauh  setval  is just a thin wrapper over transform"><a href="#t1485531332001805" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:35:32</span>           nathanmarz </span><span>@rauh </span><code>setval</code><span> is just a thin wrapper over transform</span></div><div id="t1485531360001806" t="2017-01-27 15:36:00 nathanmarz haven&apos;t benchmarked  assoc-in  but I&apos;d guess  setval  is faster"><a href="#t1485531360001806" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:36:00</span>           nathanmarz </span><span>haven&apos;t benchmarked </span><code>assoc-in</code><span> but I&apos;d guess </span><code>setval</code><span> is faster</span></div><div id="t1485531362001807" t="2017-01-27 15:36:02 rauh I see, did a non-scientific  time  and it looks like it&apos;s slightly faster.  setval , that is"><a href="#t1485531362001807" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:36:02</span>                 rauh </span><span>I see, did a non-scientific </span><code>time</code><span> and it looks like it&apos;s slightly faster. </span><code>setval</code><span>, that is</span></div><div id="t1485531542001810" t="2017-01-27 15:39:02 nathanmarz it&apos;s over 3x faster"><a href="#t1485531542001810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:39:02</span>           nathanmarz </span><span>it&apos;s over 3x faster</span></div><div id="t1485531546001811" t="2017-01-27 15:39:06 nathanmarz ********************************

Benchmark: set value in nested map (2500000 iterations)

Avg(ms)		vs best		Code
370.15 		 1.00 		 (setval [:a :b :c] 1 data)
1240.9 		 3.35 		 (assoc-in data [:a :b :c] 1)
"><a href="#t1485531546001811" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-27</span> <span class="t" onclick="H(this)">15:39:06</span>           nathanmarz </span><pre>********************************

Benchmark: set value in nested map (2500000 iterations)

Avg(ms)		vs best		Code
370.15 		 1.00 		 (setval [:a :b :c] 1 data)
1240.9 		 3.35 		 (assoc-in data [:a :b :c] 1)
</pre></div><div id="t1486138371001943" t="2017-02-03 16:12:51 nha Is specter suited to transform clojure map keys?
 {:a {:b {:c 123}} :d 456}
{:a_b_c 123 :d 456}
 
Something like that, back and forth."><a href="#t1486138371001943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:12:51</span>                  nha </span><span>Is specter suited to transform clojure map keys?
</span><pre>{:a {:b {:c 123}} :d 456}
{:a_b_c 123 :d 456}
</pre><span>
Something like that, back and forth.</span></div><div id="t1486138709001945" t="2017-02-03 16:18:29 nathanmarz @nha you can do something like this:
 user=&gt; (def PATH-MAP-WALKER
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (if-path map?
  #_=&gt;       [ALL (collect-one FIRST) LAST p]
  #_=&gt;       STAY
  #_=&gt;       )))
#&apos;user/PATH-MAP-WALKER
user=&gt; 

user=&gt; 

user=&gt; (reduce
  #_=&gt;   (fn [m path]
  #_=&gt;     (assoc m (apply str (butlast path)) (last path)))
  #_=&gt;   {}
  #_=&gt;   (traverse PATH-MAP-WALKER {:a {:b {:c 1}} :d 2}))
{&quot;:a:b:c&quot; 1, &quot;:d&quot; 2}
"><a href="#t1486138709001945" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:18:29</span>           nathanmarz </span><span>@nha you can do something like this:
</span><pre>user=&gt; (def PATH-MAP-WALKER
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (if-path map?
  #_=&gt;       [ALL (collect-one FIRST) LAST p]
  #_=&gt;       STAY
  #_=&gt;       )))
#&apos;user/PATH-MAP-WALKER
user=&gt; 

user=&gt; 

user=&gt; (reduce
  #_=&gt;   (fn [m path]
  #_=&gt;     (assoc m (apply str (butlast path)) (last path)))
  #_=&gt;   {}
  #_=&gt;   (traverse PATH-MAP-WALKER {:a {:b {:c 1}} :d 2}))
{&quot;:a:b:c&quot; 1, &quot;:d&quot; 2}
</pre></div><div id="t1486140096001946" t="2017-02-03 16:41:36 nha Nice  🙂  I don’t really understand the traverse part: it returns a function? Can I view it as a collection?
(I am trying to make the reverse function now - but I am also just starting out with specter)"><a href="#t1486140096001946" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:41:36</span>                  nha </span><span>Nice </span><b>🙂</b><span> I don’t really understand the traverse part: it returns a function? Can I view it as a collection?
(I am trying to make the reverse function now - but I am also just starting out with specter)</span></div><div id="t1486140152001947" t="2017-02-03 16:42:32 nha Ah, get it  reducible object ."><a href="#t1486140152001947" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:42:32</span>                  nha </span><span>Ah, get it </span><code>reducible object</code><span>.</span></div><div id="t1486140886001948" t="2017-02-03 16:54:46 nathanmarz @nha  traverse  is very efficient, there&apos;s no materialization of intermediate data structures (similar to transducers)"><a href="#t1486140886001948" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:54:46</span>           nathanmarz </span><span>@nha </span><code>traverse</code><span> is very efficient, there&apos;s no materialization of intermediate data structures (similar to transducers)</span></div><div id="t1486140938001949" t="2017-02-03 16:55:38 nha Yes, starting to understand that  🙂 
Seems easy enough to modify even without understanding every fn in there. Thanks!"><a href="#t1486140938001949" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-03</span> <span class="t" onclick="H(this)">16:55:38</span>                  nha </span><span>Yes, starting to understand that </span><b>🙂</b><span>
Seems easy enough to modify even without understanding every fn in there. Thanks!</span></div><div id="t1486763442002078" t="2017-02-10 21:50:42 bradford Hi all! I&apos;m trying to get better at Specter. I&apos;m doing a lot of parsing HAR files for metadata. I&apos;m able to do what I want, but it feels...inefficient. like this:  (select [ALL #(or 
                   (re-find #&quot;css&quot; (get-in % [:response :content :mimeType]))
                   (and (re-find #&quot;html&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;tff|woff&quot; (get-in % [:request :url]))
                        )
                   (re-find #&quot;font&quot; (get-in % [:response :content :mimeType]))
                   (and (re-find #&quot;javascript&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;js&quot; (get-in % [:request :url]))
                        )
                   (and (re-find #&quot;image&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;jpg|png|gif|bmp|ico&quot; (get-in % [:request :url]))
                        )

                   )
         [:request :url]] f)"><a href="#t1486763442002078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">21:50:42</span>             bradford </span><span>Hi all! I&apos;m trying to get better at Specter. I&apos;m doing a lot of parsing HAR files for metadata. I&apos;m able to do what I want, but it feels...inefficient. like this: </span><pre>(select [ALL #(or 
                   (re-find #&quot;css&quot; (get-in % [:response :content :mimeType]))
                   (and (re-find #&quot;html&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;tff|woff&quot; (get-in % [:request :url]))
                        )
                   (re-find #&quot;font&quot; (get-in % [:response :content :mimeType]))
                   (and (re-find #&quot;javascript&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;js&quot; (get-in % [:request :url]))
                        )
                   (and (re-find #&quot;image&quot; (get-in % [:response :content :mimeType]))
                        (re-find #&quot;jpg|png|gif|bmp|ico&quot; (get-in % [:request :url]))
                        )

                   )
         [:request :url]] f)</pre></div><div id="t1486763450002079" t="2017-02-10 21:50:50 bradford Is there a cleaner way to do this?"><a href="#t1486763450002079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">21:50:50</span>             bradford </span><span>Is there a cleaner way to do this?</span></div><div id="t1486763480002080" t="2017-02-10 21:51:20 bradford (I&apos;m trying to extract URLs that match certain mimeTypes)"><a href="#t1486763480002080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">21:51:20</span>             bradford </span><span>(I&apos;m trying to extract URLs that match certain mimeTypes)</span></div><div id="t1486765270002081" t="2017-02-10 22:21:10 nathanmarz @bradford I think this is cleaner and it should be much more efficient as well:
 (defn ^:direct-nav my-matcher [exp1 exp2]
  (collected? [part1 part2]
    (and (or (not exp1)
             (re-find exp1 part1))
         (or (not exp2)
             (re-find exp2 part2)))
    ))

(select [ALL 
         (selected?
          (collect-one :response :content :mimeType)
          (collect-one :request :url)
          (multi-path
            (my-matcher #&quot;css&quot; nil)
            (my-matcher #&quot;font&quot; nil)
            (my-matcher #&quot;html&quot; #&quot;tff|woff&quot;)
            (my-matcher #&quot;javascript&quot; #&quot;js&quot;)
            (my-matcher #&quot;image&quot; #&quot;jpg|png|gif|bmp|ico&quot;)
            ))
         :request
         :url]
        f)
"><a href="#t1486765270002081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:21:10</span>           nathanmarz </span><span>@bradford I think this is cleaner and it should be much more efficient as well:
</span><pre>(defn ^:direct-nav my-matcher [exp1 exp2]
  (collected? [part1 part2]
    (and (or (not exp1)
             (re-find exp1 part1))
         (or (not exp2)
             (re-find exp2 part2)))
    ))

(select [ALL 
         (selected?
          (collect-one :response :content :mimeType)
          (collect-one :request :url)
          (multi-path
            (my-matcher #&quot;css&quot; nil)
            (my-matcher #&quot;font&quot; nil)
            (my-matcher #&quot;html&quot; #&quot;tff|woff&quot;)
            (my-matcher #&quot;javascript&quot; #&quot;js&quot;)
            (my-matcher #&quot;image&quot; #&quot;jpg|png|gif|bmp|ico&quot;)
            ))
         :request
         :url]
        f)
</pre></div><div id="t1486765611002082" t="2017-02-10 22:26:51 zane ^:direct-nav ?"><a href="#t1486765611002082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:26:51</span>                 zane </span><code>^:direct-nav</code><span>?</span></div><div id="t1486765634002083" t="2017-02-10 22:27:14 nathanmarz minor optimization, not necessary"><a href="#t1486765634002083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:27:14</span>           nathanmarz </span><span>minor optimization, not necessary</span></div><div id="t1486765645002084" t="2017-02-10 22:27:25 zane Hmm."><a href="#t1486765645002084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:27:25</span>                 zane </span><span>Hmm.</span></div><div id="t1486765659002085" t="2017-02-10 22:27:39 nathanmarz explained in  https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation"><a href="#t1486765659002085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:27:39</span>           nathanmarz </span><span>explained in </span><a href="https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation</a></div><div id="t1486765665002087" t="2017-02-10 22:27:45 zane Is it idiomatic to use  collect-one  in that way if you&apos;re trying to, uh, introduce a variable that will be used by a downstream navigator?"><a href="#t1486765665002087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:27:45</span>                 zane </span><span>Is it idiomatic to use </span><code>collect-one</code><span> in that way if you&apos;re trying to, uh, introduce a variable that will be used by a downstream navigator?</span></div><div id="t1486765712002088" t="2017-02-10 22:28:32 zane Let me see if I can rephrase that question to make it clearer…  🤔"><a href="#t1486765712002088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:28:32</span>                 zane </span><span>Let me see if I can rephrase that question to make it clearer… </span><b>🤔</b></div><div id="t1486765840002089" t="2017-02-10 22:30:40 zane I wand to use  cond-path , but each of the  cond-path  tests begins with the same  (view …) ."><a href="#t1486765840002089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:30:40</span>                 zane </span><span>I wand to use </span><code>cond-path</code><span>, but each of the </span><code>cond-path</code><span> tests begins with the same </span><code>(view …)</code><span>.</span></div><div id="t1486765873002090" t="2017-02-10 22:31:13 zane What is the right way to reuse the  (view …)  results?"><a href="#t1486765873002090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:31:13</span>                 zane </span><span>What is the right way to reuse the </span><code>(view …)</code><span> results?</span></div><div id="t1486765898002091" t="2017-02-10 22:31:38 nathanmarz yea  collect-one  +  collected?  should do what you need"><a href="#t1486765898002091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:31:38</span>           nathanmarz </span><span>yea </span><code>collect-one</code><span> + </span><code>collected?</code><span> should do what you need</span></div><div id="t1486765928002092" t="2017-02-10 22:32:08 nathanmarz you can use  DISPENSE  to drop collected values later in path (so they don&apos;t reach your transform-fn, for instance)"><a href="#t1486765928002092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:32:08</span>           nathanmarz </span><span>you can use </span><code>DISPENSE</code><span> to drop collected values later in path (so they don&apos;t reach your transform-fn, for instance)</span></div><div id="t1486766014002093" t="2017-02-10 22:33:34 zane Interesting. Let me give this a shot."><a href="#t1486766014002093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:33:34</span>                 zane </span><span>Interesting. Let me give this a shot.</span></div><div id="t1486766040002094" t="2017-02-10 22:34:00 nathanmarz you can also use  defrichnav  to do more custom manipulation of collected values"><a href="#t1486766040002094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:34:00</span>           nathanmarz </span><span>you can also use </span><code>defrichnav</code><span> to do more custom manipulation of collected values</span></div><div id="t1486766056002095" t="2017-02-10 22:34:16 nathanmarz look at definition of  DISPENSE  for an example"><a href="#t1486766056002095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:34:16</span>           nathanmarz </span><span>look at definition of </span><code>DISPENSE</code><span> for an example</span></div><div id="t1486766063002096" t="2017-02-10 22:34:23 zane ok"><a href="#t1486766063002096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:34:23</span>                 zane </span><span>ok</span></div><div id="t1486766352002097" t="2017-02-10 22:39:12 bradford @nathanmarz oh... very cool. very."><a href="#t1486766352002097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:39:12</span>             bradford </span><span>@nathanmarz oh... very cool. very.</span></div><div id="t1486766442002098" t="2017-02-10 22:40:42 zane Hmm."><a href="#t1486766442002098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:40:42</span>                 zane </span><span>Hmm.</span></div><div id="t1486766448002099" t="2017-02-10 22:40:48 zane Should I be thinking of the collected values as … a stack?"><a href="#t1486766448002099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:40:48</span>                 zane </span><span>Should I be thinking of the collected values as … a stack?</span></div><div id="t1486766462002100" t="2017-02-10 22:41:02 zane Like, what happens if some upstream navigator before me also collected a few things?"><a href="#t1486766462002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:41:02</span>                 zane </span><span>Like, what happens if some upstream navigator before me also collected a few things?</span></div><div id="t1486766588002101" t="2017-02-10 22:43:08 nathanmarz @zane they&apos;re a vector"><a href="#t1486766588002101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:43:08</span>           nathanmarz </span><span>@zane they&apos;re a vector</span></div><div id="t1486766596002102" t="2017-02-10 22:43:16 nathanmarz new collected values are conj&apos;d to the end"><a href="#t1486766596002102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:43:16</span>           nathanmarz </span><span>new collected values are conj&apos;d to the end</span></div><div id="t1486766665002103" t="2017-02-10 22:44:25 nathanmarz I&apos;m sure there&apos;s room for all sorts of new navigators to help with those sorts of issues"><a href="#t1486766665002103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:44:25</span>           nathanmarz </span><span>I&apos;m sure there&apos;s room for all sorts of new navigators to help with those sorts of issues</span></div><div id="t1486766710002104" t="2017-02-10 22:45:10 zane I see, okay."><a href="#t1486766710002104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:10</span>                 zane </span><span>I see, okay.</span></div><div id="t1486766713002105" t="2017-02-10 22:45:13 nathanmarz something like  (with-fresh-collected  (cond-path ...))"><a href="#t1486766713002105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:13</span>           nathanmarz </span><span>something like </span><code>(with-fresh-collected  (cond-path ...))</code></div><div id="t1486766718002106" t="2017-02-10 22:45:18 zane Yeah."><a href="#t1486766718002106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:18</span>                 zane </span><span>Yeah.</span></div><div id="t1486766722002107" t="2017-02-10 22:45:22 zane That&apos;s what I&apos;m itching for."><a href="#t1486766722002107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:22</span>                 zane </span><span>That&apos;s what I&apos;m itching for.</span></div><div id="t1486766725002108" t="2017-02-10 22:45:25 zane But this&apos;ll work."><a href="#t1486766725002108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:25</span>                 zane </span><span>But this&apos;ll work.</span></div><div id="t1486766747002109" t="2017-02-10 22:45:47 nathanmarz should be easy to do using  richnav  and  defdynamicnav"><a href="#t1486766747002109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:45:47</span>           nathanmarz </span><span>should be easy to do using </span><code>richnav</code><span> and </span><code>defdynamicnav</code></div><div id="t1486766764002110" t="2017-02-10 22:46:04 zane I haven&apos;t yet wrapped my mind around those, I think."><a href="#t1486766764002110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:46:04</span>                 zane </span><span>I haven&apos;t yet wrapped my mind around those, I think.</span></div><div id="t1486766767002111" t="2017-02-10 22:46:07 zane Baby steps."><a href="#t1486766767002111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:46:07</span>                 zane </span><span>Baby steps.</span></div><div id="t1486766889002112" t="2017-02-10 22:48:09 nathanmarz I opened an issue for it since it&apos;s actually a pretty good idea  https://github.com/nathanmarz/specter/issues/175"><a href="#t1486766889002112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:48:09</span>           nathanmarz </span><span>I opened an issue for it since it&apos;s actually a pretty good idea </span><a href="https://github.com/nathanmarz/specter/issues/175" target="_blank">https://github.com/nathanmarz/specter/issues/175</a></div><div id="t1486766937002114" t="2017-02-10 22:48:57 zane There&apos;s no  DISPENSE-ONE ?"><a href="#t1486766937002114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:48:57</span>                 zane </span><span>There&apos;s no </span><code>DISPENSE-ONE</code><span>?</span></div><div id="t1486766949002115" t="2017-02-10 22:49:09 nathanmarz no"><a href="#t1486766949002115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:49:09</span>           nathanmarz </span><span>no</span></div><div id="t1486767007002116" t="2017-02-10 22:50:07 nathanmarz I have a feeling the use cases for that would be better served by  with-fresh-collected"><a href="#t1486767007002116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:50:07</span>           nathanmarz </span><span>I have a feeling the use cases for that would be better served by </span><code>with-fresh-collected</code></div><div id="t1486767025002117" t="2017-02-10 22:50:25 nathanmarz not sure, this part of the design space is fairly unexplored"><a href="#t1486767025002117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:50:25</span>           nathanmarz </span><span>not sure, this part of the design space is fairly unexplored</span></div><div id="t1486767031002118" t="2017-02-10 22:50:31 nathanmarz would need to see more use cases"><a href="#t1486767031002118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:50:31</span>           nathanmarz </span><span>would need to see more use cases</span></div><div id="t1486767289002119" t="2017-02-10 22:54:49 zane defrichnav  isn&apos;t documented yet?"><a href="#t1486767289002119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:54:49</span>                 zane </span><code>defrichnav</code><span> isn&apos;t documented yet?</span></div><div id="t1486767335002120" t="2017-02-10 22:55:35 zane The only way it differs is that it takes  vals , which is the collected vals?"><a href="#t1486767335002120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:55:35</span>                 zane </span><span>The only way it differs is that it takes </span><code>vals</code><span>, which is the collected vals?</span></div><div id="t1486767393002121" t="2017-02-10 22:56:33 nathanmarz yea, that and  next-fn  expects to be passed in the new vals + the next value to navigate to"><a href="#t1486767393002121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:56:33</span>           nathanmarz </span><span>yea, that and </span><code>next-fn</code><span> expects to be passed in the new vals + the next value to navigate to</span></div><div id="t1486767413002122" t="2017-02-10 22:56:53 zane Got it."><a href="#t1486767413002122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:56:53</span>                 zane </span><span>Got it.</span></div><div id="t1486767415002123" t="2017-02-10 22:56:55 zane Cool!"><a href="#t1486767415002123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:56:55</span>                 zane </span><span>Cool!</span></div><div id="t1486767431002124" t="2017-02-10 22:57:11 nathanmarz defnav  is a thin wrapper around  defrichnav"><a href="#t1486767431002124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:57:11</span>           nathanmarz </span><code>defnav</code><span> is a thin wrapper around </span><code>defrichnav</code></div><div id="t1486767563002125" t="2017-02-10 22:59:23 zane Is  defnav  mainly there for backwards compat at this point?"><a href="#t1486767563002125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">22:59:23</span>                 zane </span><span>Is </span><code>defnav</code><span> mainly there for backwards compat at this point?</span></div><div id="t1486767993002126" t="2017-02-10 23:06:33 zane I&apos;m not going to need  late-bound-nav  here?"><a href="#t1486767993002126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">23:06:33</span>                 zane </span><span>I&apos;m not going to need </span><code>late-bound-nav</code><span> here?</span></div><div id="t1486768004002127" t="2017-02-10 23:06:44 zane Rather than  richnav ?"><a href="#t1486768004002127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">23:06:44</span>                 zane </span><span>Rather than </span><code>richnav</code><span>?</span></div><div id="t1486768936002128" t="2017-02-10 23:22:16 nathanmarz @zane oh yea, you&apos;ll need  late-bound-richnav"><a href="#t1486768936002128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">23:22:16</span>           nathanmarz </span><span>@zane oh yea, you&apos;ll need </span><code>late-bound-richnav</code></div><div id="t1486769439002131" t="2017-02-10 23:30:39 zane Maybe I should re-read the caching implementation doc."><a href="#t1486769439002131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-10</span> <span class="t" onclick="H(this)">23:30:39</span>                 zane </span><span>Maybe I should re-read the caching implementation doc.</span></div><div id="t1486776180002132" t="2017-02-11 01:23:00 nathanmarz @zane I assume you&apos;re talking about  with-fresh-collected ?"><a href="#t1486776180002132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">01:23:00</span>           nathanmarz </span><span>@zane I assume you&apos;re talking about </span><code>with-fresh-collected</code><span>?</span></div><div id="t1486776200002133" t="2017-02-11 01:23:20 nathanmarz it takes in a path as a parameter, which itself needs to be compiled"><a href="#t1486776200002133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">01:23:20</span>           nathanmarz </span><span>it takes in a path as a parameter, which itself needs to be compiled</span></div><div id="t1486776271002134" t="2017-02-11 01:24:31 nathanmarz you make sure the subpath is only compiled once by using  defdynamicnav , which is like a macro to Specter&apos;s inline compiler, and  late-bound-richnav  which lets you mark the subpath parameter using  late-path  to ensure it&apos;s compiled once and re-used for every invocation of the callsite"><a href="#t1486776271002134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">01:24:31</span>           nathanmarz </span><span>you make sure the subpath is only compiled once by using </span><code>defdynamicnav</code><span>, which is like a macro to Specter&apos;s inline compiler, and </span><code>late-bound-richnav</code><span> which lets you mark the subpath parameter using </span><code>late-path</code><span> to ensure it&apos;s compiled once and re-used for every invocation of the callsite</span></div><div id="t1486776388002135" t="2017-02-11 01:26:28 nathanmarz that wiki page I referenced explains the mechanics of what happens at each callsite which will help you understand what these things do"><a href="#t1486776388002135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">01:26:28</span>           nathanmarz </span><span>that wiki page I referenced explains the mechanics of what happens at each callsite which will help you understand what these things do</span></div><div id="t1486776543002136" t="2017-02-11 01:29:03 zane Awesome. I&apos;ll have a look. Thanks!"><a href="#t1486776543002136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">01:29:03</span>                 zane </span><span>Awesome. I&apos;ll have a look. Thanks!</span></div><div id="t1486829359002137" t="2017-02-11 16:09:19 zane Beat me to it."><a href="#t1486829359002137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">16:09:19</span>                 zane </span><span>Beat me to it.</span></div><div id="t1486851168002138" t="2017-02-11 22:12:48 bradford Hi fam. How do I remove a value from a vector using  setval ? I&apos;ve got the path correct, but when I set the value to NONE, I get com.rpl.specter/NONE in the vector. Which does make sense, but that&apos;s not what I want  😉   (defn remove-luminati-refs-and-save [f]
  (setval [ALL :response :headers [ALL #(re-find #&quot;luminati|hola&quot; (:name %) )]] NONE f)

  )
"><a href="#t1486851168002138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">22:12:48</span>             bradford </span><span>Hi fam. How do I remove a value from a vector using </span><code>setval</code><span>? I&apos;ve got the path correct, but when I set the value to NONE, I get com.rpl.specter/NONE in the vector. Which does make sense, but that&apos;s not what I want </span><b>😉</b><span> </span><pre>(defn remove-luminati-refs-and-save [f]
  (setval [ALL :response :headers [ALL #(re-find #&quot;luminati|hola&quot; (:name %) )]] NONE f)

  )
</pre></div><div id="t1486851176002139" t="2017-02-11 22:12:56 bradford also specter is super magic and cool"><a href="#t1486851176002139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">22:12:56</span>             bradford </span><span>also specter is super magic and cool</span></div><div id="t1486852714002140" t="2017-02-11 22:38:34 nathanmarz @bradford setting a value to  NONE  to remove it is implemented in master but not released yet"><a href="#t1486852714002140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">22:38:34</span>           nathanmarz </span><span>@bradford setting a value to </span><code>NONE</code><span> to remove it is implemented in master but not released yet</span></div><div id="t1486852732002141" t="2017-02-11 22:38:52 bradford Ah, rad. thanks!"><a href="#t1486852732002141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">22:38:52</span>             bradford </span><span>Ah, rad. thanks!</span></div><div id="t1486852744002142" t="2017-02-11 22:39:04 nathanmarz I think 0.13.3-SNAPSHOT on clojars has it though"><a href="#t1486852744002142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span> <span class="t" onclick="H(this)">22:39:04</span>           nathanmarz </span><span>I think 0.13.3-SNAPSHOT on clojars has it though</span></div><div id="t1486862881002143" t="2017-02-12 01:28:01 richiardiandrea Confirm I am using that feature successfully, very useful one ;)"><a href="#t1486862881002143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-12</span> <span class="t" onclick="H(this)">01:28:01</span>      richiardiandrea </span><span>Confirm I am using that feature successfully, very useful one ;)</span></div><div id="t1487007526002176" t="2017-02-13 17:38:46 zane @nathanmarz: Does this look like valid usage?
 (specter/select
 (specter/with-fresh-collected
   (specter/collect-one (specter/keypath 0))
   (specter/cond-path
    (specter/collected? [x] (even? x))
    (specter/keypath 1)
    (specter/collected? [n] (odd? n))
    (specter/keypath 2)))
 [1 &quot;even&quot; &quot;odd&quot;])
"><a href="#t1487007526002176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:38:46</span>                 zane </span><span>@nathanmarz: Does this look like valid usage?
</span><pre>(specter/select
 (specter/with-fresh-collected
   (specter/collect-one (specter/keypath 0))
   (specter/cond-path
    (specter/collected? [x] (even? x))
    (specter/keypath 1)
    (specter/collected? [n] (odd? n))
    (specter/keypath 2)))
 [1 &quot;even&quot; &quot;odd&quot;])
</pre></div><div id="t1487007578002179" t="2017-02-13 17:39:38 zane I&apos;m finding that  x  in the  collected?  call is  nil ."><a href="#t1487007578002179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:39:38</span>                 zane </span><span>I&apos;m finding that </span><code>x</code><span> in the </span><code>collected?</code><span> call is </span><code>nil</code><span>.</span></div><div id="t1487008361002180" t="2017-02-13 17:52:41 zane Hmm. I must be misunderstanding how collections work:"><a href="#t1487008361002180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:52:41</span>                 zane </span><span>Hmm. I must be misunderstanding how collections work:</span></div><div id="t1487008364002181" t="2017-02-13 17:52:44 zane (specter/select
 (specter/comp-paths (specter/collect-one :type)
                     (specter/collected? [type]
                                         (clojure.tools.trace/trace &quot;type&quot; type)
                                         true)
                     (specter/if-path
                      (specter/collected? [type]
                                          (clojure.tools.trace/trace &quot;type&quot; type)
                                          (= :a type))
                      :a
                      :b))
 {:type :a
  :a &quot;a&quot;
  :b &quot;b&quot;})
"><a href="#t1487008364002181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:52:44</span>                 zane </span><pre>(specter/select
 (specter/comp-paths (specter/collect-one :type)
                     (specter/collected? [type]
                                         (clojure.tools.trace/trace &quot;type&quot; type)
                                         true)
                     (specter/if-path
                      (specter/collected? [type]
                                          (clojure.tools.trace/trace &quot;type&quot; type)
                                          (= :a type))
                      :a
                      :b))
 {:type :a
  :a &quot;a&quot;
  :b &quot;b&quot;})
</pre></div><div id="t1487008380002182" t="2017-02-13 17:53:00 nathanmarz @zane yea looks like a bug"><a href="#t1487008380002182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:00</span>           nathanmarz </span><span>@zane yea looks like a bug</span></div><div id="t1487008387002183" t="2017-02-13 17:53:07 zane TRACE type: :a
TRACE type: nil
[[:a &quot;b&quot;]]
"><a href="#t1487008387002183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:07</span>                 zane </span><pre>TRACE type: :a
TRACE type: nil
[[:a &quot;b&quot;]]
</pre></div><div id="t1487008396002184" t="2017-02-13 17:53:16 zane Ah, okay."><a href="#t1487008396002184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:16</span>                 zane </span><span>Ah, okay.</span></div><div id="t1487008399002185" t="2017-02-13 17:53:19 zane Phew. I&apos;m not crazy."><a href="#t1487008399002185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:19</span>                 zane </span><span>Phew. I&apos;m not crazy.</span></div><div id="t1487008411002186" t="2017-02-13 17:53:31 nathanmarz vals aren&apos;t being passed to condition paths for  if-path /`cond-path`"><a href="#t1487008411002186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:31</span>           nathanmarz </span><span>vals aren&apos;t being passed to condition paths for </span><code>if-path</code><span>/`cond-path`</span></div><div id="t1487008415002187" t="2017-02-13 17:53:35 zane Want me to file an issue or something?"><a href="#t1487008415002187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:35</span>                 zane </span><span>Want me to file an issue or something?</span></div><div id="t1487008440002188" t="2017-02-13 17:54:00 nathanmarz yes, thanks"><a href="#t1487008440002188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:54:00</span>           nathanmarz </span><span>yes, thanks</span></div><div id="t1487009037002190" t="2017-02-13 18:03:57 zane https://github.com/nathanmarz/specter/issues/176"><a href="#t1487009037002190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">18:03:57</span>                 zane </span><a href="https://github.com/nathanmarz/specter/issues/176" target="_blank">https://github.com/nathanmarz/specter/issues/176</a></div><div id="t1487018789002198" t="2017-02-13 20:46:29 nathanmarz @zane btw you can handle your previous use case with:
 (if-path [(keypath 0) even?] (keypath 1) (keypath 2))
"><a href="#t1487018789002198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">20:46:29</span>           nathanmarz </span><span>@zane btw you can handle your previous use case with:
</span><pre>(if-path [(keypath 0) even?] (keypath 1) (keypath 2))
</pre></div><div id="t1487021904002199" t="2017-02-13 21:38:24 zane Yeah, my actual use case has more than two branches, @nathanmarz.  😞  "><a href="#t1487021904002199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">21:38:24</span>                 zane </span><span>Yeah, my actual use case has more than two branches, @nathanmarz. </span><b>😞</b><span> </span></div><div id="t1487021949002200" t="2017-02-13 21:39:09 zane I could repeat the computation of the dispatch value but that feels gross. "><a href="#t1487021949002200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">21:39:09</span>                 zane </span><span>I could repeat the computation of the dispatch value but that feels gross. </span></div><div id="t1487025722002201" t="2017-02-13 22:42:02 shader I&apos;m getting an error &quot;com.rpl.specter.impl.CachedPathInfo cannot be cast to com.rpl.specter.impl.CachedPathInfo&quot;"><a href="#t1487025722002201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">22:42:02</span>               shader </span><span>I&apos;m getting an error &quot;com.rpl.specter.impl.CachedPathInfo cannot be cast to com.rpl.specter.impl.CachedPathInfo&quot;</span></div><div id="t1487025730002202" t="2017-02-13 22:42:10 shader I presume this has been seen before; any ideas?"><a href="#t1487025730002202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">22:42:10</span>               shader </span><span>I presume this has been seen before; any ideas?</span></div><div id="t1487025750002203" t="2017-02-13 22:42:30 shader it may just be that I need to update to the latest version..."><a href="#t1487025750002203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">22:42:30</span>               shader </span><span>it may just be that I need to update to the latest version...</span></div><div id="t1487025860002204" t="2017-02-13 22:44:20 shader hmm... updating changed the error to &quot;No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound&quot;, which means the api has probably changed"><a href="#t1487025860002204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">22:44:20</span>               shader </span><span>hmm... updating changed the error to &quot;No implementation of method: :get_cell of protocol: #&apos;com.rpl.specter.impl/PMutableCell found for class: clojure.lang.Var$Unbound&quot;, which means the api has probably changed</span></div><div id="t1487037605002214" t="2017-02-14 02:00:05 nathanmarz @shader that first error was fixed in 0.13.2, as for second issue would need to see the code producing the error to help"><a href="#t1487037605002214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">02:00:05</span>           nathanmarz </span><span>@shader that first error was fixed in 0.13.2, as for second issue would need to see the code producing the error to help</span></div><div id="t1487098973002234" t="2017-02-14 19:02:53 zane @nathanmarz, I&apos;m finding  with-fresh-collected  to be incredibly useful."><a href="#t1487098973002234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">19:02:53</span>                 zane </span><span>@nathanmarz, I&apos;m finding </span><code>with-fresh-collected</code><span> to be incredibly useful.</span></div><div id="t1487098982002235" t="2017-02-14 19:03:02 zane Here are two navigators I&apos;ve used it for:"><a href="#t1487098982002235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">19:03:02</span>                 zane </span><span>Here are two navigators I&apos;ve used it for:</span></div><div id="t1487098996002236" t="2017-02-14 19:03:16 zane (s/def ::or-spec-path-args
  (s/cat :spec qualified-keyword?
         :branches (s/+ (s/alt :branch (s/cat :key simple-keyword? :body any?)
                               :invalid (s/cat :key #{:spec/invalid} :body any?)))))

(defmacro or-spec-path
  &quot;Navigates to one of several subpaths depending on which branch of a
  `clojure.spec/or` the structure conforms to.&quot;
  [&amp; args]
  (let [{:keys [spec branches] :as conformed} (s/conform ::or-spec-path-args args)
        spec-obj (s/get-spec spec)
        invalid (or (select-first (fn [[tag _]] (= :invalid tag))
                                  branches)
                    `(fn [val#] (throw (ex-info (s/explain-str ~spec val#)
                                                (s/explain-data ~spec val#)))))]
    (if-not spec-obj
      (throw (ex-info (str &quot;Spec not found: &quot; spec)
                      {:spec spec
                       :conformed conformed}))
      `(with-fresh-collected
         (collect-one (view (partial s/conform ~spec)))
         (cond-path
          (collected? [conformed#]
            (= ::s/invalid conformed#))
          ~invalid
          "><a href="#t1487098996002236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">19:03:16</span>                 zane </span><pre>(s/def ::or-spec-path-args
  (s/cat :spec qualified-keyword?
         :branches (s/+ (s/alt :branch (s/cat :key simple-keyword? :body any?)
                               :invalid (s/cat :key #{:spec/invalid} :body any?)))))

(defmacro or-spec-path
  &quot;Navigates to one of several subpaths depending on which branch of a
  `clojure.spec/or` the structure conforms to.&quot;
  [&amp; args]
  (let [{:keys [spec branches] :as conformed} (s/conform ::or-spec-path-args args)
        spec-obj (s/get-spec spec)
        invalid (or (select-first (fn [[tag _]] (= :invalid tag))
                                  branches)
                    `(fn [val#] (throw (ex-info (s/explain-str ~spec val#)
                                                (s/explain-data ~spec val#)))))]
    (if-not spec-obj
      (throw (ex-info (str &quot;Spec not found: &quot; spec)
                      {:spec spec
                       :conformed conformed}))
      `(with-fresh-collected
         (collect-one (view (partial s/conform ~spec)))
         (cond-path
          (collected? [conformed#]
            (= ::s/invalid conformed#))
          ~invalid
          </pre></div><div id="t1487099009002237" t="2017-02-14 19:03:29 zane (s/def ::case-path-args
  (s/cat :path any?
         :branches (s/+ (s/cat :value any? :body any?))
         :default (s/? any?)))

(defmacro case-path
  &quot;Navigates to one of several subpaths depending on the value selected by a the
  provided path.&quot;
  [&amp; args]
  (let [{:keys [path branches default] :as conformed} (s/conform ::case-path-args args)]
    `(with-fresh-collected
       (collect-one ~path)
       (cond-path
        "><a href="#t1487099009002237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">19:03:29</span>                 zane </span><pre>(s/def ::case-path-args
  (s/cat :path any?
         :branches (s/+ (s/cat :value any? :body any?))
         :default (s/? any?)))

(defmacro case-path
  &quot;Navigates to one of several subpaths depending on the value selected by a the
  provided path.&quot;
  [&amp; args]
  (let [{:keys [path branches default] :as conformed} (s/conform ::case-path-args args)]
    `(with-fresh-collected
       (collect-one ~path)
       (cond-path
        </pre></div><div id="t1487099716002238" t="2017-02-14 19:15:16 nathanmarz @zane cool, you should be able to do those as dynamic navs though"><a href="#t1487099716002238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">19:15:16</span>           nathanmarz </span><span>@zane cool, you should be able to do those as dynamic navs though</span></div><div id="t1487208958002265" t="2017-02-16 01:35:58 zane Hmm. Could I do the spec one as a dynamic nav? I want to have compile-time error reporting for that one."><a href="#t1487208958002265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-16</span> <span class="t" onclick="H(this)">01:35:58</span>                      zane </span><span>Hmm. Could I do the spec one as a dynamic nav? I want to have compile-time error reporting for that one.</span></div><div id="t1487218801002267" t="2017-02-16 04:20:01 nathanmarz I haven&apos;t dug into spec yet, so I don&apos;t understand every detail of your code. But if you did it as a dynamic nav it would throw the error the first time that callsite is run (when Specter&apos;s inline compiler expands dynamic navs)."><a href="#t1487218801002267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-16</span> <span class="t" onclick="H(this)">04:20:01</span>                nathanmarz </span><span>I haven&apos;t dug into spec yet, so I don&apos;t understand every detail of your code. But if you did it as a dynamic nav it would throw the error the first time that callsite is run (when Specter&apos;s inline compiler expands dynamic navs).</span></div><div id="t1487218851002269" t="2017-02-16 04:20:51 nathanmarz Another approach you could take is have a macro that does your validation and expands to a dynamic nav invocation which does the rest of the work."><a href="#t1487218851002269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-16</span> <span class="t" onclick="H(this)">04:20:51</span>                nathanmarz </span><span>Another approach you could take is have a macro that does your validation and expands to a dynamic nav invocation which does the rest of the work.</span></div><div id="t1487265511002284" t="2017-02-16 17:18:31 zane That last suggestion seems like the way to go. Thanks for the feedback!"><a href="#t1487265511002284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-16</span> <span class="t" onclick="H(this)">17:18:31</span>                      zane </span><span>That last suggestion seems like the way to go. Thanks for the feedback!</span></div><div id="t1487106311002239" t="2017-02-14 21:05:11 nathanmarz opened a thread on the mailing list about whether Specter should be part of Clojure core or not  https://groups.google.com/forum/#!topic/clojure/qN1UPMVQmaM"><a href="#t1487106311002239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">21:05:11</span>           nathanmarz </span><span>opened a thread on the mailing list about whether Specter should be part of Clojure core or not </span><a href="https://groups.google.com/forum/#!topic/clojure/qN1UPMVQmaM" target="_blank">https://groups.google.com/forum/#!topic/clojure/qN1UPMVQmaM</a></div><div id="t1487106977002240" t="2017-02-14 21:16:17 schmee I think it is better to have it as a lib since that way we can add and fix stuff faster and easier"><a href="#t1487106977002240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">21:16:17</span>               schmee </span><span>I think it is better to have it as a lib since that way we can add and fix stuff faster and easier</span></div><div id="t1487110032002241" t="2017-02-14 22:07:12 dm3 it should probably be on a list of “blessed” libs, if one existed for Clojure"><a href="#t1487110032002241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">22:07:12</span>                  dm3 </span><span>it should probably be on a list of “blessed” libs, if one existed for Clojure</span></div><div id="t1487110251002242" t="2017-02-14 22:10:51 dm3 I think it’s in the same category as “core.async” - indispensable when you have a good problem for it"><a href="#t1487110251002242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">22:10:51</span>                  dm3 </span><span>I think it’s in the same category as “core.async” - indispensable when you have a good problem for it</span></div><div id="t1487132491002249" t="2017-02-15 04:21:31 nathanmarz @schmee new navigators can easily be provided in external libraries"><a href="#t1487132491002249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-15</span> <span class="t" onclick="H(this)">04:21:31</span>           nathanmarz </span><span>@schmee new navigators can easily be provided in external libraries</span></div><div id="t1487132564002250" t="2017-02-15 04:22:44 nathanmarz I don&apos;t see the core of Specter (navigator composition and inline compilation/caching) changing since the performance is near-optimal"><a href="#t1487132564002250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-15</span> <span class="t" onclick="H(this)">04:22:44</span>           nathanmarz </span><span>I don&apos;t see the core of Specter (navigator composition and inline compilation/caching) changing since the performance is near-optimal</span></div><div id="t1487193033002257" t="2017-02-15 21:10:33 richiardiandrea Imho with some small retouch it could be transparently integrated in core, for instance  update-in  could accept a navigator. "><a href="#t1487193033002257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-15</span> <span class="t" onclick="H(this)">21:10:33</span>      richiardiandrea </span><span>Imho with some small retouch it could be transparently integrated in core, for instance </span><code>update-in</code><span> could accept a navigator. </span></div><div id="t1487625566002309" t="2017-02-20 21:19:26 souenzzo Hi!
There is some docs to  recursive-path ?
I&apos;m trying to do:  [:a {:b [:c]}]  -&gt;  [:a {:b [:c :x]} :x]  (position of  x  don&apos;t matter)
(append  x  to all  vector?  level&apos;s)"><a href="#t1487625566002309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-20</span> <span class="t" onclick="H(this)">21:19:26</span>             souenzzo </span><span>Hi!
There is some docs to </span><code>recursive-path</code><span>?
I&apos;m trying to do: </span><code>[:a {:b [:c]}]</code><span> -&gt; </span><code>[:a {:b [:c :x]} :x]</code><span> (position of </span><code>x</code><span> don&apos;t matter)
(append </span><code>x</code><span> to all </span><code>vector?</code><span> level&apos;s)</span></div><div id="t1487625782002311" t="2017-02-20 21:23:02 nathanmarz @souenzzo it&apos;s just  (recursive-path [] p ...)"><a href="#t1487625782002311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-20</span> <span class="t" onclick="H(this)">21:23:02</span>           nathanmarz </span><span>@souenzzo it&apos;s just </span><code>(recursive-path [] p ...)</code></div><div id="t1487625790002312" t="2017-02-20 21:23:10 nathanmarz where  p  refers to itself"><a href="#t1487625790002312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-20</span> <span class="t" onclick="H(this)">21:23:10</span>           nathanmarz </span><span>where </span><code>p</code><span> refers to itself</span></div><div id="t1487625894002313" t="2017-02-20 21:24:54 nathanmarz navigating to all levels of the vector can be done:  (recursive-path [] p (if-path vector? (continue-then-stay ALL p)))"><a href="#t1487625894002313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-20</span> <span class="t" onclick="H(this)">21:24:54</span>           nathanmarz </span><span>navigating to all levels of the vector can be done: </span><code>(recursive-path [] p (if-path vector? (continue-then-stay ALL p)))</code></div><div id="t1487625924002314" t="2017-02-20 21:25:24 nathanmarz with 0.13.3-SNAPSHOT can do:
 user=&gt; (def p (recursive-path [] p (if-path vector? (continue-then-stay ALL p))))
#&apos;user/p
user=&gt; (setval [p AFTER-ELEM] :x [1 [2 3] [[4]]])
[1 [2 3 :x] [[4 :x] :x] :x]
"><a href="#t1487625924002314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-20</span> <span class="t" onclick="H(this)">21:25:24</span>           nathanmarz </span><span>with 0.13.3-SNAPSHOT can do:
</span><pre>user=&gt; (def p (recursive-path [] p (if-path vector? (continue-then-stay ALL p))))
#&apos;user/p
user=&gt; (setval [p AFTER-ELEM] :x [1 [2 3] [[4]]])
[1 [2 3 :x] [[4 :x] :x] :x]
</pre></div><div id="t1487643065002315" t="2017-02-21 02:11:05 richiardiandrea Woah nice ^"><a href="#t1487643065002315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">02:11:05</span>      richiardiandrea </span><span>Woah nice ^</span></div><div id="t1487643140002316" t="2017-02-21 02:12:20 richiardiandrea We should take the history of this channel and apply a transformation  that generates wiki pages with these kind of examples. Every time I peek in here there is something nice and  🆒"><a href="#t1487643140002316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">02:12:20</span>      richiardiandrea </span><span>We should take the history of this channel and apply a transformation  that generates wiki pages with these kind of examples. Every time I peek in here there is something nice and </span><b>🆒</b></div><div id="t1487663437002318" t="2017-02-21 07:50:37 dm3 we need something like  https://regexr.com/ , but for Specter"><a href="#t1487663437002318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">07:50:37</span>                  dm3 </span><span>we need something like </span><a href="https://regexr.com/" target="_blank">https://regexr.com/</a><span>, but for Specter</span></div><div id="t1487682756002323" t="2017-02-21 13:12:36 nathanmarz @dm3 various people have said they would do something like that for specter (more along the lines of 4clojure), but no one has done it yet"><a href="#t1487682756002323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:12:36</span>           nathanmarz </span><span>@dm3 various people have said they would do something like that for specter (more along the lines of 4clojure), but no one has done it yet</span></div><div id="t1487682805002324" t="2017-02-21 13:13:25 dm3 not going to say I’ll do that  🙂"><a href="#t1487682805002324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:13:25</span>                  dm3 </span><span>not going to say I’ll do that </span><b>🙂</b></div><div id="t1487682872002325" t="2017-02-21 13:14:32 dm3 but this type of incremental visual path construction would be awesome"><a href="#t1487682872002325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:14:32</span>                  dm3 </span><span>but this type of incremental visual path construction would be awesome</span></div><div id="t1487682951002327" t="2017-02-21 13:15:51 dm3 instead of Text pane you have a tree editor with sequences, maps and primitives as building blocks"><a href="#t1487682951002327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:15:51</span>                  dm3 </span><span>instead of Text pane you have a tree editor with sequences, maps and primitives as building blocks</span></div><div id="t1487683055002328" t="2017-02-21 13:17:35 dm3 instead of Expression - an executable editor panel, because you might want to write new navigators. Or maybe a separate panel for the context NS and a separate path expression editor"><a href="#t1487683055002328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:17:35</span>                  dm3 </span><span>instead of Expression - an executable editor panel, because you might want to write new navigators. Or maybe a separate panel for the context NS and a separate path expression editor</span></div><div id="t1487683119002329" t="2017-02-21 13:18:39 dm3 does Specter work in bootstrapped cljs?"><a href="#t1487683119002329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:18:39</span>                  dm3 </span><span>does Specter work in bootstrapped cljs?</span></div><div id="t1487684752002330" t="2017-02-21 13:45:52 nathanmarz @dm3 not at the moment  https://github.com/nathanmarz/specter/issues/72"><a href="#t1487684752002330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:45:52</span>           nathanmarz </span><span>@dm3 not at the moment </span><a href="https://github.com/nathanmarz/specter/issues/72" target="_blank">https://github.com/nathanmarz/specter/issues/72</a></div><div id="t1487684785002332" t="2017-02-21 13:46:25 nathanmarz shouldn&apos;t be too much work to get it working again, but the main task that needs to be done to ensure support moving forward is getting the tests running under bootstrap cljs"><a href="#t1487684785002332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-21</span> <span class="t" onclick="H(this)">13:46:25</span>           nathanmarz </span><span>shouldn&apos;t be too much work to get it working again, but the main task that needs to be done to ensure support moving forward is getting the tests running under bootstrap cljs</span></div><div id="t1487780815002335" t="2017-02-22 16:26:55 chromalchemy I am trying to tranform some &quot;Hiccup-y&quot; style data that will be compiled by Garden into CSS. Ex:  [:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16px&quot;}] 
But it seem like the Specter functions expect maps. How can I get these vectors into something that Specter can see better?"><a href="#t1487780815002335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">16:26:55</span>         chromalchemy </span><span>I am trying to tranform some &quot;Hiccup-y&quot; style data that will be compiled by Garden into CSS. Ex: </span><code>[:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16px&quot;}]</code><span>
But it seem like the Specter functions expect maps. How can I get these vectors into something that Specter can see better?</span></div><div id="t1487780947002336" t="2017-02-22 16:29:07 chromalchemy ps. Thank you for Specter. I&apos;m coming from front end and dont know much about typical database interactions, But Specter + nested EDN just seems to make sense  😅  I&apos;m trying to use it in cljs client with persistance to Firebase JSON tree."><a href="#t1487780947002336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">16:29:07</span>         chromalchemy </span><span>ps. Thank you for Specter. I&apos;m coming from front end and dont know much about typical database interactions, But Specter + nested EDN just seems to make sense </span><b>😅</b><span> I&apos;m trying to use it in cljs client with persistance to Firebase JSON tree.</span></div><div id="t1487782046002339" t="2017-02-22 16:47:26 nathanmarz @chromalchemy specter works on all data structures"><a href="#t1487782046002339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">16:47:26</span>           nathanmarz </span><span>@chromalchemy specter works on all data structures</span></div><div id="t1487782120002340" t="2017-02-22 16:48:40 nathanmarz what are you trying to do?"><a href="#t1487782120002340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">16:48:40</span>           nathanmarz </span><span>what are you trying to do?</span></div><div id="t1487782702002341" t="2017-02-22 16:58:22 chromalchemy It might be a lark, but since CSS uses a form of navigators, and Garden follows suit to compile Hiccup style clojure data into CSS, I could take a super-structure of ready-to-compile Garden data, and transform or filter it as needed with Specter for more specific application of the style data. Kind of like querying a style database dynamically, instead of declaring static css rules/paths directly."><a href="#t1487782702002341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">16:58:22</span>         chromalchemy </span><span>It might be a lark, but since CSS uses a form of navigators, and Garden follows suit to compile Hiccup style clojure data into CSS, I could take a super-structure of ready-to-compile Garden data, and transform or filter it as needed with Specter for more specific application of the style data. Kind of like querying a style database dynamically, instead of declaring static css rules/paths directly.</span></div><div id="t1487782800002342" t="2017-02-22 17:00:00 chromalchemy Im not sure how to navigate the Garden vectors though. They arent exactly maps (though there are nested maps) I cant even get the first key-val out of a vector."><a href="#t1487782800002342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:00:00</span>         chromalchemy </span><span>Im not sure how to navigate the Garden vectors though. They arent exactly maps (though there are nested maps) I cant even get the first key-val out of a vector.</span></div><div id="t1487782857002343" t="2017-02-22 17:00:57 tolitius @chromalchemy 
 =&gt; (def html [[:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16px&quot;}]])

=&gt; (transform [(walker :font-size) :font-size] #(s/replace %  #&quot;px&quot; &quot;em&quot;) html)

[[:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16em&quot;}]]
 
your examples are just data structures: i.e. maps, vectors, sets, etc.. or not?"><a href="#t1487782857002343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:00:57</span>             tolitius </span><span>@chromalchemy 
</span><pre>=&gt; (def html [[:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16px&quot;}]])

=&gt; (transform [(walker :font-size) :font-size] #(s/replace %  #&quot;px&quot; &quot;em&quot;) html)

[[:h1 :h2 {:font-weight &quot;none&quot;}] [:body {:font-size &quot;16em&quot;}]]
</pre><span>
your examples are just data structures: i.e. maps, vectors, sets, etc.. or not?</span></div><div id="t1487783026002344" t="2017-02-22 17:03:46 tolitius would probably be better if you provided an example of a data structure (Garden, ..) + what you need to do with it"><a href="#t1487783026002344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:03:46</span>             tolitius </span><span>would probably be better if you provided an example of a data structure (Garden, ..) + what you need to do with it</span></div><div id="t1487783076002345" t="2017-02-22 17:04:36 chromalchemy Yes, just data. Primarily a list of vectors, each vector is a css rule.    I will try out walker. Not familiar with that one yet."><a href="#t1487783076002345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:04:36</span>         chromalchemy </span><span>Yes, just data. Primarily a list of vectors, each vector is a css rule.    I will try out walker. Not familiar with that one yet.</span></div><div id="t1487783171002346" t="2017-02-22 17:06:11 chromalchemy [:myclass {:color &quot;red}]
How can I get the map from the :myclass key?"><a href="#t1487783171002346" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:06:11</span>         chromalchemy </span><span>[:myclass {:color &quot;red}]
How can I get the map from the :myclass key?</span></div><div id="t1487783251002347" t="2017-02-22 17:07:31 nathanmarz you mean the element to the right of  :myclass  in the vector?"><a href="#t1487783251002347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:07:31</span>           nathanmarz </span><span>you mean the element to the right of </span><code>:myclass</code><span> in the vector?</span></div><div id="t1487783309002348" t="2017-02-22 17:08:29 chromalchemy Yes"><a href="#t1487783309002348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:08:29</span>         chromalchemy </span><span>Yes</span></div><div id="t1487783362002349" t="2017-02-22 17:09:22 nathanmarz you can do it with com.rpl.specter.zipper"><a href="#t1487783362002349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:09:22</span>           nathanmarz </span><span>you can do it with com.rpl.specter.zipper</span></div><div id="t1487783386002350" t="2017-02-22 17:09:46 nathanmarz navigate to the position of  :myclass , and then do  z/RIGHT"><a href="#t1487783386002350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:09:46</span>           nathanmarz </span><span>navigate to the position of </span><code>:myclass</code><span>, and then do </span><code>z/RIGHT</code></div><div id="t1487783405002351" t="2017-02-22 17:10:05 nathanmarz I would really question why you store data like that instead of just using a map"><a href="#t1487783405002351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:10:05</span>           nathanmarz </span><span>I would really question why you store data like that instead of just using a map</span></div><div id="t1487783498002352" t="2017-02-22 17:11:38 chromalchemy Ok, How do I navigate to position of :myclass?"><a href="#t1487783498002352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:11:38</span>         chromalchemy </span><span>Ok, How do I navigate to position of :myclass?</span></div><div id="t1487783598002353" t="2017-02-22 17:13:18 nathanmarz user=&gt; (setval [z/VECTOR-ZIP (z/find-first #(= :myclass %)) z/RIGHT z/NODE :color] &quot;blue&quot; [:myclass {:color &quot;red&quot;}])
[:myclass {:color &quot;blue&quot;}]
"><a href="#t1487783598002353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:13:18</span>           nathanmarz </span><pre>user=&gt; (setval [z/VECTOR-ZIP (z/find-first #(= :myclass %)) z/RIGHT z/NODE :color] &quot;blue&quot; [:myclass {:color &quot;red&quot;}])
[:myclass {:color &quot;blue&quot;}]
</pre></div><div id="t1487783671002354" t="2017-02-22 17:14:31 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljc#L120"><a href="#t1487783671002354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:14:31</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljc#L120" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/zipper.cljc#L120</a></div><div id="t1487783675002356" t="2017-02-22 17:14:35 chromalchemy Your probably right. The style data super-structure should probably just be maps. I was trying to keep it in the format that Garden wants so I dont have to do more syntax-oriented transformations to be able to compile the results to css"><a href="#t1487783675002356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:14:35</span>         chromalchemy </span><span>Your probably right. The style data super-structure should probably just be maps. I was trying to keep it in the format that Garden wants so I dont have to do more syntax-oriented transformations to be able to compile the results to css</span></div><div id="t1487783716002357" t="2017-02-22 17:15:16 chromalchemy Thanks for that!"><a href="#t1487783716002357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:15:16</span>         chromalchemy </span><span>Thanks for that!</span></div><div id="t1487783791002358" t="2017-02-22 17:16:31 chromalchemy [[:class1 {foo}] [:class2 {bar}]]
I assume I can use something similar to get to bar by filtering on :class2"><a href="#t1487783791002358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:16:31</span>         chromalchemy </span><span>[[:class1 {foo}] [:class2 {bar}]]
I assume I can use something similar to get to bar by filtering on :class2</span></div><div id="t1487783872002359" t="2017-02-22 17:17:52 nathanmarz find-first  will descend into nested vectors, so the code is pretty much exactly the same"><a href="#t1487783872002359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:17:52</span>           nathanmarz </span><code>find-first</code><span> will descend into nested vectors, so the code is pretty much exactly the same</span></div><div id="t1487783887002360" t="2017-02-22 17:18:07 chromalchemy or in [:class1 :class2 {foo}], getting from class1 to class2 to foo?"><a href="#t1487783887002360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:18:07</span>         chromalchemy </span><span>or in [:class1 :class2 {foo}], getting from class1 to class2 to foo?</span></div><div id="t1487783997002361" t="2017-02-22 17:19:57 chromalchemy Ok cool. I came to Specter after hearing about the challenges of using zippers. But glad that it&apos;s all included :)"><a href="#t1487783997002361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:19:57</span>         chromalchemy </span><span>Ok cool. I came to Specter after hearing about the challenges of using zippers. But glad that it&apos;s all included :)</span></div><div id="t1487784090002362" t="2017-02-22 17:21:30 nathanmarz zippers are just an advanced form of navigation"><a href="#t1487784090002362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:21:30</span>           nathanmarz </span><span>zippers are just an advanced form of navigation</span></div><div id="t1487784102002363" t="2017-02-22 17:21:42 nathanmarz this happens to be a case where it fits"><a href="#t1487784102002363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:21:42</span>           nathanmarz </span><span>this happens to be a case where it fits</span></div><div id="t1487784237002365" t="2017-02-22 17:23:57 chromalchemy Thanks for the help"><a href="#t1487784237002365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:23:57</span>         chromalchemy </span><span>Thanks for the help</span></div><div id="t1487784626002366" t="2017-02-22 17:30:26 chromalchemy On a side note, do you have any best practices on size of nested data in a cljs client. Like could i serialize a one-tree to-do datastructure, and transact on it in the client with atoms. Is this reasonable or am i asking for trouble? especially if there are thousands of items &amp; notes &amp; metadata (i have a lot to do lol) "><a href="#t1487784626002366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:30:26</span>         chromalchemy </span><span>On a side note, do you have any best practices on size of nested data in a cljs client. Like could i serialize a one-tree to-do datastructure, and transact on it in the client with atoms. Is this reasonable or am i asking for trouble? especially if there are thousands of items &amp; notes &amp; metadata (i have a lot to do lol) </span></div><div id="t1487784791002368" t="2017-02-22 17:33:11 nathanmarz no idea, I don&apos;t do much clojurescript"><a href="#t1487784791002368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:33:11</span>           nathanmarz </span><span>no idea, I don&apos;t do much clojurescript</span></div><div id="t1487784800002369" t="2017-02-22 17:33:20 nathanmarz better to ask in #clojurescript channel"><a href="#t1487784800002369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">17:33:20</span>           nathanmarz </span><span>better to ask in #clojurescript channel</span></div><div id="t1487787478002370" t="2017-02-22 18:17:58 mccraigmccraig @chromalchemy i have a largish cljs (re-frame) app with a single atom for all client state - there are commonly many thousands of items in the tree and it&apos;s fine"><a href="#t1487787478002370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">18:17:58</span>       mccraigmccraig </span><span>@chromalchemy i have a largish cljs (re-frame) app with a single atom for all client state - there are commonly many thousands of items in the tree and it&apos;s fine</span></div><div id="t1487788296002371" t="2017-02-22 18:31:36 chromalchemy Cool. good to know. Tree soup it is."><a href="#t1487788296002371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">18:31:36</span>         chromalchemy </span><span>Cool. good to know. Tree soup it is.</span></div><div id="t1487791836002373" t="2017-02-22 19:30:36 alexyakushev Hello folks! Can anyone help me implement a deep filter? I&apos;m looking for the following transformation:
 ;; Drop all maps from the vector in :stuff where :c key is present
{:fluff 42, :stuff [{:a 1, :b 2} {:a 1, :c 3} {:b 2, :c 3} {:b 2, :d 4}]}
=&gt;
{:fluff 42, :stuff [{:a 1, :b 2} {:b 2, :d 4}]}
"><a href="#t1487791836002373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:30:36</span>         alexyakushev </span><span>Hello folks! Can anyone help me implement a deep filter? I&apos;m looking for the following transformation:
</span><pre>;; Drop all maps from the vector in :stuff where :c key is present
{:fluff 42, :stuff [{:a 1, :b 2} {:a 1, :c 3} {:b 2, :c 3} {:b 2, :d 4}]}
=&gt;
{:fluff 42, :stuff [{:a 1, :b 2} {:b 2, :d 4}]}
</pre></div><div id="t1487792207002375" t="2017-02-22 19:36:47 alexyakushev I also discovered  NONE , but the example from Github doesn&apos;t work correctly for me (see the impl/NONE):
 (setval [:a ALL nil?] NONE {:a [1 2 nil 3 nil]})
=&gt;
{:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}
"><a href="#t1487792207002375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:36:47</span>         alexyakushev </span><span>I also discovered </span><code>NONE</code><span>, but the example from Github doesn&apos;t work correctly for me (see the impl/NONE):
</span><pre>(setval [:a ALL nil?] NONE {:a [1 2 nil 3 nil]})
=&gt;
{:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}
</pre></div><div id="t1487792619002377" t="2017-02-22 19:43:39 alexyakushev Worked with  0.13.0-SNAPSHOT :
 (setval [:stuff ALL (pred :c)] NONE {:fluff 42, :stuff [{:a 1, :b 2} {:a 1, :c 3} {:b 2, :c 3} {:b 2, :d 4}]})
=&gt;
{:fluff 42, :stuff [{:a 1, :b 2} {:b 2, :d 4}]}
 
Thanks for help!  😄"><a href="#t1487792619002377" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:43:39</span>         alexyakushev </span><span>Worked with </span><code>0.13.0-SNAPSHOT</code><span>:
</span><pre>(setval [:stuff ALL (pred :c)] NONE {:fluff 42, :stuff [{:a 1, :b 2} {:a 1, :c 3} {:b 2, :c 3} {:b 2, :d 4}]})
=&gt;
{:fluff 42, :stuff [{:a 1, :b 2} {:b 2, :d 4}]}
</pre><span>
Thanks for help! </span><b>😄</b></div><div id="t1487793040002378" t="2017-02-22 19:50:40 nathanmarz @alexyakushev more precise to do  (selected? (must :c))  rather than  (pred :c)"><a href="#t1487793040002378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:50:40</span>           nathanmarz </span><span>@alexyakushev more precise to do </span><code>(selected? (must :c))</code><span> rather than </span><code>(pred :c)</code></div><div id="t1487793104002379" t="2017-02-22 19:51:44 alexyakushev Thanks! What is the case when they will work differently?"><a href="#t1487793104002379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:51:44</span>         alexyakushev </span><span>Thanks! What is the case when they will work differently?</span></div><div id="t1487793105002380" t="2017-02-22 19:51:45 nathanmarz (pred :c)  will filter out maps with  :c  being false or nil"><a href="#t1487793105002380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:51:45</span>           nathanmarz </span><code>(pred :c)</code><span> will filter out maps with </span><code>:c</code><span> being false or nil</span></div><div id="t1487793130002381" t="2017-02-22 19:52:10 alexyakushev Oh, I see.  must  is like  contains? . I get it now, thanks!"><a href="#t1487793130002381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:52:10</span>         alexyakushev </span><span>Oh, I see. </span><code>must</code><span> is like </span><code>contains?</code><span>. I get it now, thanks!</span></div><div id="t1487793205002382" t="2017-02-22 19:53:25 nathanmarz must  is  keypath  that navigates only if the key is present"><a href="#t1487793205002382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-22</span> <span class="t" onclick="H(this)">19:53:25</span>           nathanmarz </span><code>must</code><span> is </span><code>keypath</code><span> that navigates only if the key is present</span></div><div id="t1487875491002383" t="2017-02-23 18:44:51 souenzzo There is something like  transform-one! ?
 (transform-one! (walker :a) f m) 
with:
Return  nil  if dosen&apos;t apply  f  in any element
Throws or don&apos;t apply  f  if find more then one &quot;match&quot;
Return transformed  m  case find only one &quot;match&quot;"><a href="#t1487875491002383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">18:44:51</span>             souenzzo </span><span>There is something like </span><code>transform-one!</code><span>?
</span><code>(transform-one! (walker :a) f m)</code><span>
with:
Return </span><code>nil</code><span> if dosen&apos;t apply </span><code>f</code><span> in any element
Throws or don&apos;t apply </span><code>f</code><span> if find more then one &quot;match&quot;
Return transformed </span><code>m</code><span> case find only one &quot;match&quot;</span></div><div id="t1487878228002384" t="2017-02-23 19:30:28 nathanmarz @souenzzo no, nothing like that"><a href="#t1487878228002384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">19:30:28</span>           nathanmarz </span><span>@souenzzo no, nothing like that</span></div><div id="t1487878242002385" t="2017-02-23 19:30:42 nathanmarz easy to implement yourself by wrapping the transform fn"><a href="#t1487878242002385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">19:30:42</span>           nathanmarz </span><span>easy to implement yourself by wrapping the transform fn</span></div><div id="t1487878756002386" t="2017-02-23 19:39:16 souenzzo I implemented with  select-one  before transform.
For now, that&apos;s enough.  😉"><a href="#t1487878756002386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">19:39:16</span>             souenzzo </span><span>I implemented with </span><code>select-one</code><span> before transform.
For now, that&apos;s enough. </span><b>😉</b></div><div id="t1487970354002388" t="2017-02-24 21:05:54 qqq Is there a simple way to rewrite the following without specter? (need to eliminate the dependency)
 (fn [x]
  (s/select (s/walker keyword?) x)
 
I want to rewrite the above using just clojure core"><a href="#t1487970354002388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">21:05:54</span>                  qqq </span><span>Is there a simple way to rewrite the following without specter? (need to eliminate the dependency)
</span><pre>(fn [x]
  (s/select (s/walker keyword?) x)
</pre><span>
I want to rewrite the above using just clojure core</span></div><div id="t1487972899002390" t="2017-02-24 21:48:19 nathanmarz @qqq you can use clojure.walk, which is what  walker  uses underneath the hood"><a href="#t1487972899002390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">21:48:19</span>           nathanmarz </span><span>@qqq you can use clojure.walk, which is what </span><code>walker</code><span> uses underneath the hood</span></div><div id="t1488211948002393" t="2017-02-27 16:12:28 mpenet @nathanmarz Could you make a release or are they pending things in master?"><a href="#t1488211948002393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-27</span> <span class="t" onclick="H(this)">16:12:28</span>               mpenet </span><span>@nathanmarz Could you make a release or are they pending things in master?</span></div><div id="t1488211979002394" t="2017-02-27 16:12:59 mpenet (I want to get rid of the reflection warnings from my logs :p)"><a href="#t1488211979002394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-27</span> <span class="t" onclick="H(this)">16:12:59</span>               mpenet </span><span>(I want to get rid of the reflection warnings from my logs :p)</span></div><div id="t1488212434002395" t="2017-02-27 16:20:34 nathanmarz @mpenet next release will be 1.0 and there&apos;s a few pending things"><a href="#t1488212434002395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-27</span> <span class="t" onclick="H(this)">16:20:34</span>           nathanmarz </span><span>@mpenet next release will be 1.0 and there&apos;s a few pending things</span></div><div id="t1488212446002396" t="2017-02-27 16:20:46 nathanmarz 0.13.3-SNAPSHOT is current with master though"><a href="#t1488212446002396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-27</span> <span class="t" onclick="H(this)">16:20:46</span>           nathanmarz </span><span>0.13.3-SNAPSHOT is current with master though</span></div><div id="t1488212685002397" t="2017-02-27 16:24:45 mpenet ok, thanks"><a href="#t1488212685002397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-27</span> <span class="t" onclick="H(this)">16:24:45</span>               mpenet </span><span>ok, thanks</span></div><div id="t1488313995002401" t="2017-02-28 20:33:15 ghadi is there a simple way to transform all values in a nested map recursively?"><a href="#t1488313995002401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">20:33:15</span>                ghadi </span><span>is there a simple way to transform all values in a nested map recursively?</span></div><div id="t1488314017002402" t="2017-02-28 20:33:37 ghadi I&apos;m trying to make a nicer printout of ElasticSearch mappings... here&apos;s a sample"><a href="#t1488314017002402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">20:33:37</span>                ghadi </span><span>I&apos;m trying to make a nicer printout of ElasticSearch mappings... here&apos;s a sample</span></div><div id="t1488314055002403" t="2017-02-28 20:34:15 ghadi {:properties {:foo {:type &quot;blah&quot; :properties {....}}"><a href="#t1488314055002403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">20:34:15</span>                ghadi </span><code>{:properties {:foo {:type &quot;blah&quot; :properties {....}}</code></div><div id="t1488314087002404" t="2017-02-28 20:34:47 ghadi I&apos;d like to collect all names along all paths... so that I end up with a list of [&quot;blah&quot; &quot;foo&quot;] [&quot;blah&quot; &quot;bar&quot;]"><a href="#t1488314087002404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">20:34:47</span>                ghadi </span><span>I&apos;d like to collect all names along all paths... so that I end up with a list of [&quot;blah&quot; &quot;foo&quot;] [&quot;blah&quot; &quot;bar&quot;]</span></div><div id="t1488315948002405" t="2017-02-28 21:05:48 nathanmarz @ghadi you can use value collection for that"><a href="#t1488315948002405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:05:48</span>           nathanmarz </span><span>@ghadi you can use value collection for that</span></div><div id="t1488315954002406" t="2017-02-28 21:05:54 nathanmarz (def data
  {:foo {:type &quot;blah&quot;
         :properties {:foo {:type &quot;bar&quot;}
   :foo2 {:type &quot;foo&quot;}}}})

(def MY-WALKER
  (recursive-path [] p
    (continue-then-stay
      MAP-VALS
      (collect-one :type)
      :properties
      p
      )))

(select MY-WALKER data)
;; =&gt; [[&quot;blah&quot; &quot;bar&quot; nil] [&quot;blah&quot; &quot;foo&quot; nil] [&quot;blah&quot; {:foo {:type &quot;bar&quot;}, :foo2 {:type &quot;foo&quot;}}] {:foo {:type &quot;blah&quot;, :properties {:foo {:type &quot;bar&quot;}, :foo2 {:type &quot;foo&quot;}}}}]
"><a href="#t1488315954002406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:05:54</span>           nathanmarz </span><pre>(def data
  {:foo {:type &quot;blah&quot;
         :properties {:foo {:type &quot;bar&quot;}
   :foo2 {:type &quot;foo&quot;}}}})

(def MY-WALKER
  (recursive-path [] p
    (continue-then-stay
      MAP-VALS
      (collect-one :type)
      :properties
      p
      )))

(select MY-WALKER data)
;; =&gt; [[&quot;blah&quot; &quot;bar&quot; nil] [&quot;blah&quot; &quot;foo&quot; nil] [&quot;blah&quot; {:foo {:type &quot;bar&quot;}, :foo2 {:type &quot;foo&quot;}}] {:foo {:type &quot;blah&quot;, :properties {:foo {:type &quot;bar&quot;}, :foo2 {:type &quot;foo&quot;}}}}]
</pre></div><div id="t1488315994002407" t="2017-02-28 21:06:34 nathanmarz for selection it returns each collected  :type  followed by the node value at that point"><a href="#t1488315994002407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:06:34</span>           nathanmarz </span><span>for selection it returns each collected </span><code>:type</code><span> followed by the node value at that point</span></div><div id="t1488316023002408" t="2017-02-28 21:07:03 ghadi interesting... what does that return?"><a href="#t1488316023002408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:07:03</span>                ghadi </span><span>interesting... what does that return?</span></div><div id="t1488316028002409" t="2017-02-28 21:07:08 nathanmarz for transformation, your transform-fn will receive same thing but as arguments"><a href="#t1488316028002409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:07:08</span>           nathanmarz </span><span>for transformation, your transform-fn will receive same thing but as arguments</span></div><div id="t1488316054002411" t="2017-02-28 21:07:34 nathanmarz edited it"><a href="#t1488316054002411" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:07:34</span>           nathanmarz </span><span>edited it</span></div><div id="t1488316109002412" t="2017-02-28 21:08:29 ghadi thanks! I&apos;m going to try to read the docs to understand that"><a href="#t1488316109002412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-28</span> <span class="t" onclick="H(this)">21:08:29</span>                ghadi </span><span>thanks! I&apos;m going to try to read the docs to understand that</span></div><div id="t1488390491002414" t="2017-03-01 17:48:11 nathanmarz Released Specter 1.0 and wrote a post about why I consider it Clojure&apos;s missing piece  http://nathanmarz.com/blog/clojures-missing-piece.html"><a href="#t1488390491002414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">17:48:11</span>           nathanmarz </span><span>Released Specter 1.0 and wrote a post about why I consider it Clojure&apos;s missing piece </span><a href="http://nathanmarz.com/blog/clojures-missing-piece.html" target="_blank">http://nathanmarz.com/blog/clojures-missing-piece.html</a></div><div id="t1488405814002417" t="2017-03-01 22:03:34 wei any tips simplifying this path?
 sp/ALL
(sp/collect-one sp/FIRST)
sp/LAST"><a href="#t1488405814002417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:03:34</span>                  wei </span><span>any tips simplifying this path?
</span><pre>sp/ALL
(sp/collect-one sp/FIRST)
sp/LAST</pre></div><div id="t1488405828002418" t="2017-03-01 22:03:48 wei basically MAP-VAL but capturing the key"><a href="#t1488405828002418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:03:48</span>                  wei </span><span>basically MAP-VAL but capturing the key</span></div><div id="t1488406679002419" t="2017-03-01 22:17:59 nathanmarz @wei you can factor it as  (def MY-MAP-VALS (comp-paths ALL (collect-one FIRST) LAST))"><a href="#t1488406679002419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:17:59</span>           nathanmarz </span><span>@wei you can factor it as </span><code>(def MY-MAP-VALS (comp-paths ALL (collect-one FIRST) LAST))</code></div><div id="t1488407918002421" t="2017-03-01 22:38:38 wei aha, thanks @nathanmarz"><a href="#t1488407918002421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:38:38</span>                  wei </span><span>aha, thanks @nathanmarz</span></div><div id="t1488407961002422" t="2017-03-01 22:39:21 wei also, if I wanted to run some formatting function on the captured value, how would I express that?"><a href="#t1488407961002422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:39:21</span>                  wei </span><span>also, if I wanted to run some formatting function on the captured value, how would I express that?</span></div><div id="t1488407979002423" t="2017-03-01 22:39:39 wei this doesn’t give me what I want:  sp/ALL
(sp/collect-one sp/FIRST some-format-fn)
sp/LAST"><a href="#t1488407979002423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:39:39</span>                  wei </span><span>this doesn’t give me what I want: </span><pre>sp/ALL
(sp/collect-one sp/FIRST some-format-fn)
sp/LAST</pre></div><div id="t1488408494002425" t="2017-03-01 22:48:14 nathanmarz @wei do  (view some-format-fn)"><a href="#t1488408494002425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span> <span class="t" onclick="H(this)">22:48:14</span>           nathanmarz </span><span>@wei do </span><code>(view some-format-fn)</code></div><div id="t1488414942002429" t="2017-03-02 00:35:42 richiardiandrea By the way great blog post"><a href="#t1488414942002429" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">00:35:42</span>      richiardiandrea </span><span>By the way great blog post</span></div><div id="t1488423500002430" t="2017-03-02 02:58:20 nathanmarz thanks"><a href="#t1488423500002430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">02:58:20</span>           nathanmarz </span><span>thanks</span></div><div id="t1488441204002434" t="2017-03-02 07:53:24 miikka Regarding Haskell lenses and Lens/Traversal distinction: if I recall correctly, for Lens you&apos;re guaranteed that you can read a single value. This is handy with Haskell&apos;s type system, but in a dynamic language like Clojure, it does not really matter or make sense."><a href="#t1488441204002434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">07:53:24</span>               miikka </span><span>Regarding Haskell lenses and Lens/Traversal distinction: if I recall correctly, for Lens you&apos;re guaranteed that you can read a single value. This is handy with Haskell&apos;s type system, but in a dynamic language like Clojure, it does not really matter or make sense.</span></div><div id="t1488441338002435" t="2017-03-02 07:55:38 miikka In general, if you try to port Haskell lenses directly to dynamic languages (like people sometimes do), you&apos;ll end up with a bunch of things that just do not do anything useful without the type system."><a href="#t1488441338002435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">07:55:38</span>               miikka </span><span>In general, if you try to port Haskell lenses directly to dynamic languages (like people sometimes do), you&apos;ll end up with a bunch of things that just do not do anything useful without the type system.</span></div><div id="t1488459483002438" t="2017-03-02 12:58:03 nathanmarz @miikka Thanks, interesting point. Makes sense that the distinction would have something to do with the type system."><a href="#t1488459483002438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">12:58:03</span>           nathanmarz </span><span>@miikka Thanks, interesting point. Makes sense that the distinction would have something to do with the type system.</span></div><div id="t1488463760002440" t="2017-03-02 14:09:20 mmer (NEWBIE QUESTION) - I have been using specter to work with a structure that was originally yaml. The basic selectors I have some grasp of.  What I need to do is find a set of map entries where the values are maps and that have a particular key - eg:"><a href="#t1488463760002440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">14:09:20</span>                 mmer </span><span>(NEWBIE QUESTION) - I have been using specter to work with a structure that was originally yaml. The basic selectors I have some grasp of.  What I need to do is find a set of map entries where the values are maps and that have a particular key - eg:</span></div><div id="t1488463867002442" t="2017-03-02 14:11:07 mmer I want to be able to return :field1 and its contents by finding it because it has the :require true set."><a href="#t1488463867002442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">14:11:07</span>                 mmer </span><span>I want to be able to return :field1 and its contents by finding it because it has the :require true set.</span></div><div id="t1488464960002443" t="2017-03-02 14:29:20 nathanmarz @mmer I think you&apos;re looking for  (select [MAP-VALS map? (pred :required)] data)"><a href="#t1488464960002443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">14:29:20</span>           nathanmarz </span><span>@mmer I think you&apos;re looking for </span><code>(select [MAP-VALS map? (pred :required)] data)</code></div><div id="t1488466104002444" t="2017-03-02 14:48:24 mmer Thanks Nathan,  how do I also get the key of the top level map returned i.e. :field1?"><a href="#t1488466104002444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">14:48:24</span>                 mmer </span><span>Thanks Nathan,  how do I also get the key of the top level map returned i.e. :field1?</span></div><div id="t1488466282002445" t="2017-03-02 14:51:22 nathanmarz @mmer you can do  (select [ALL (collect-one FIRST) LAST map? (pred :required)] data)"><a href="#t1488466282002445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">14:51:22</span>           nathanmarz </span><span>@mmer you can do </span><code>(select [ALL (collect-one FIRST) LAST map? (pred :required)] data)</code></div><div id="t1488467345002446" t="2017-03-02 15:09:05 mmer Thanks Nathan.  I guess I am struggling to understand how this ends up working - for example the (collect-one FIRST) Is it FIRST because you treat the map as a list?  The map? after the LAST is applied to what is returned by the LAST which is the end of the list created from the map?"><a href="#t1488467345002446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:09:05</span>                 mmer </span><span>Thanks Nathan.  I guess I am struggling to understand how this ends up working - for example the (collect-one FIRST) Is it FIRST because you treat the map as a list?  The map? after the LAST is applied to what is returned by the LAST which is the end of the list created from the map?</span></div><div id="t1488467874002447" t="2017-03-02 15:17:54 tolitius would this work:
 =&gt; (select [ALL (pred (comp :required val))] m)
[[:field1 {:type &quot;string&quot;, :required true}]] ?"><a href="#t1488467874002447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:17:54</span>             tolitius </span><span>would this work:
</span><pre>=&gt; (select [ALL (pred (comp :required val))] m)
[[:field1 {:type &quot;string&quot;, :required true}]]</pre><span>?</span></div><div id="t1488468584002448" t="2017-03-02 15:29:44 nathanmarz @mmer  ALL  on a map navigates you to each key/value pair as a 2-element vector"><a href="#t1488468584002448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:29:44</span>           nathanmarz </span><span>@mmer </span><code>ALL</code><span> on a map navigates you to each key/value pair as a 2-element vector</span></div><div id="t1488468625002449" t="2017-03-02 15:30:25 mmer Ok that really helps my understanding."><a href="#t1488468625002449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:30:25</span>                 mmer </span><span>Ok that really helps my understanding.</span></div><div id="t1488468642002450" t="2017-03-02 15:30:42 nathanmarz @tolitius yea, that works too"><a href="#t1488468642002450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:30:42</span>           nathanmarz </span><span>@tolitius yea, that works too</span></div><div id="t1488468715002451" t="2017-03-02 15:31:55 tolitius thanks, I am learning specter, just wanted to make sure I did not miss an edge case"><a href="#t1488468715002451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span> <span class="t" onclick="H(this)">15:31:55</span>             tolitius </span><span>thanks, I am learning specter, just wanted to make sure I did not miss an edge case</span></div><div id="t1488527196002456" t="2017-03-03 07:46:36 james @nathanmarz Congratulations on the 1.0 release! Specter is an amazing feat of software engineering, and an essential part of my Clojure toolbox. Thank you so much for turning my least favourite part of Clojure (manipulating nested data structures) from a frustrating slog into joyful productivity!"><a href="#t1488527196002456" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">07:46:36</span>                james </span><span>@nathanmarz Congratulations on the 1.0 release! Specter is an amazing feat of software engineering, and an essential part of my Clojure toolbox. Thank you so much for turning my least favourite part of Clojure (manipulating nested data structures) from a frustrating slog into joyful productivity!</span></div><div id="t1488547648002460" t="2017-03-03 13:27:28 bill_tozier I’ve been able to replicate all the examples involving trees, of course. The bigger picture for me, though, is to be able to select a random item from a tree and transform that. Working it out with a  zipper  is simple enough, but I was hoping to produce a clearer and more readable function that uses Specter.

I’m working through from the given examples “change every X in a tree to Y”, and I’ve got a working version in which one of the filters is a random function. So I can now change a random subset of the nodes in a tree to new values. But selecting only one of those is turning out to be problematic for me.

Maybe if I could find the source for the  FIRST  and  LAST  navigators? ¯\(ツ)/¯"><a href="#t1488547648002460" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:27:28</span>          bill_tozier </span><span>I’ve been able to replicate all the examples involving trees, of course. The bigger picture for me, though, is to be able to select a random item from a tree and transform that. Working it out with a </span><code>zipper</code><span> is simple enough, but I was hoping to produce a clearer and more readable function that uses Specter.

I’m working through from the given examples “change every X in a tree to Y”, and I’ve got a working version in which one of the filters is a random function. So I can now change a random subset of the nodes in a tree to new values. But selecting only one of those is turning out to be problematic for me.

Maybe if I could find the source for the </span><code>FIRST</code><span> and </span><code>LAST</code><span> navigators? ¯\(ツ)/¯</span></div><div id="t1488548755002462" t="2017-03-03 13:45:55 nathanmarz @bill_tozier  FIRST /`LAST` navigate you to the first or last element of a sequence"><a href="#t1488548755002462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:45:55</span>           nathanmarz </span><span>@bill_tozier </span><code>FIRST</code><span>/`LAST` navigate you to the first or last element of a sequence</span></div><div id="t1488548796002463" t="2017-03-03 13:46:36 bill_tozier That was my guess, yes."><a href="#t1488548796002463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:46:36</span>          bill_tozier </span><span>That was my guess, yes.</span></div><div id="t1488548808002464" t="2017-03-03 13:46:48 nathanmarz if you want to change a random element, you&apos;ll first need:
 (def TREE-VALUES
  (recursive-path [] p
    (if-path vector?
      [ALL p]
      STAY)))
"><a href="#t1488548808002464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:46:48</span>           nathanmarz </span><span>if you want to change a random element, you&apos;ll first need:
</span><pre>(def TREE-VALUES
  (recursive-path [] p
    (if-path vector?
      [ALL p]
      STAY)))
</pre></div><div id="t1488548868002465" t="2017-03-03 13:47:48 nathanmarz Then do  (transform (subselect TREE-VALUES) (fn [all-vals] ...) tree)"><a href="#t1488548868002465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:47:48</span>           nathanmarz </span><span>Then do </span><code>(transform (subselect TREE-VALUES) (fn [all-vals] ...) tree)</code></div><div id="t1488548893002467" t="2017-03-03 13:48:13 nathanmarz and inside your custom function change a random element of that sequence"><a href="#t1488548893002467" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:48:13</span>           nathanmarz </span><span>and inside your custom function change a random element of that sequence</span></div><div id="t1488548997002468" t="2017-03-03 13:49:57 nathanmarz you could also use define a custom navigator for it though it&apos;s tricky since it&apos;s better if navigators are deterministic (so they work with  subselect , for instance)"><a href="#t1488548997002468" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:49:57</span>           nathanmarz </span><span>you could also use define a custom navigator for it though it&apos;s tricky since it&apos;s better if navigators are deterministic (so they work with </span><code>subselect</code><span>, for instance)</span></div><div id="t1488549027002469" t="2017-03-03 13:50:27 nathanmarz your custom navigator would need to generate a random seed, and then always use that seed to navigate to the same random element"><a href="#t1488549027002469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:50:27</span>           nathanmarz </span><span>your custom navigator would need to generate a random seed, and then always use that seed to navigate to the same random element</span></div><div id="t1488549066002470" t="2017-03-03 13:51:06 nathanmarz so usage would probably be something like:  (setval [(subselect TREE-VALUES) (random-elem)] 1111 tree)"><a href="#t1488549066002470" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:51:06</span>           nathanmarz </span><span>so usage would probably be something like: </span><code>(setval [(subselect TREE-VALUES) (random-elem)] 1111 tree)</code></div><div id="t1488551994002492" t="2017-03-03 14:39:54 bill_tozier nathanmarz: Thanks! I had made the mistake of thinking a navigator accumulated a collection of paths to items. I realize that’s the un-lazy inefficient way, which is how I got sidetracked."><a href="#t1488551994002492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:39:54</span>               bill_tozier </span><span>nathanmarz: Thanks! I had made the mistake of thinking a navigator accumulated a collection of paths to items. I realize that’s the un-lazy inefficient way, which is how I got sidetracked.</span></div><div id="t1488549148002471" t="2017-03-03 13:52:28 nathanmarz @james Thanks!"><a href="#t1488549148002471" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:52:28</span>           nathanmarz </span><span>@james Thanks!</span></div><div id="t1488549344002473" t="2017-03-03 13:55:44 val_waeselynck I seem unable to use  setval NONE  to dissoc fro a map, any idea why ?"><a href="#t1488549344002473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:55:44</span>       val_waeselynck </span><span>I seem unable to use </span><code>setval NONE</code><span> to dissoc fro a map, any idea why ?</span></div><div id="t1488549346002474" t="2017-03-03 13:55:46 val_waeselynck (setval [:a :b :c] NONE {:a {:b {:c 1}}})
=&gt; {:a {:b {:c :com.rpl.specter.impl/NONE}}}
"><a href="#t1488549346002474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:55:46</span>       val_waeselynck </span><pre>(setval [:a :b :c] NONE {:a {:b {:c 1}}})
=&gt; {:a {:b {:c :com.rpl.specter.impl/NONE}}}
</pre></div><div id="t1488549444002477" t="2017-03-03 13:57:24 val_waeselynck This is weird as I&apos;m using specter 1.0.0"><a href="#t1488549444002477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">13:57:24</span>       val_waeselynck </span><span>This is weird as I&apos;m using specter 1.0.0</span></div><div id="t1488549858002478" t="2017-03-03 14:04:18 schmee val_waeselynck are you sure?"><a href="#t1488549858002478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:04:18</span>               schmee </span><span>val_waeselynck are you sure?</span></div><div id="t1488549874002479" t="2017-03-03 14:04:34 schmee I get this:  user=&gt; (setval [:a :b :c] NONE {:a {:b {:c 1}}})
{:a {:b {}}}"><a href="#t1488549874002479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:04:34</span>               schmee </span><span>I get this: </span><pre>user=&gt; (setval [:a :b :c] NONE {:a {:b {:c 1}}})
{:a {:b {}}}</pre></div><div id="t1488549879002480" t="2017-03-03 14:04:39 schmee in 1.0.0"><a href="#t1488549879002480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:04:39</span>               schmee </span><span>in 1.0.0</span></div><div id="t1488549903002481" t="2017-03-03 14:05:03 val_waeselynck maybe I have some classpath issue I don&apos;t understand, but I don&apos;t know how to find out..."><a href="#t1488549903002481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:05:03</span>       val_waeselynck </span><span>maybe I have some classpath issue I don&apos;t understand, but I don&apos;t know how to find out...</span></div><div id="t1488549915002482" t="2017-03-03 14:05:15 val_waeselynck $ lein deps :tree | grep specter  yields"><a href="#t1488549915002482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:05:15</span>       val_waeselynck </span><code>$ lein deps :tree | grep specter</code><span> yields</span></div><div id="t1488549919002483" t="2017-03-03 14:05:19 val_waeselynck  [com.rpl/specter &quot;1.0.0&quot;]"><a href="#t1488549919002483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:05:19</span>       val_waeselynck </span><code> [com.rpl/specter &quot;1.0.0&quot;]</code></div><div id="t1488549941002484" t="2017-03-03 14:05:41 schmee 🤔"><a href="#t1488549941002484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:05:41</span>               schmee </span><b>🤔</b></div><div id="t1488549964002485" t="2017-03-03 14:06:04 schmee have you tried restarting the repl?"><a href="#t1488549964002485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:06:04</span>               schmee </span><span>have you tried restarting the repl?</span></div><div id="t1488549974002486" t="2017-03-03 14:06:14 schmee the catch-all solution  😛"><a href="#t1488549974002486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:06:14</span>               schmee </span><span>the catch-all solution </span><b>😛</b></div><div id="t1488550004002487" t="2017-03-03 14:06:44 val_waeselynck yup"><a href="#t1488550004002487" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:06:44</span>       val_waeselynck </span><span>yup</span></div><div id="t1488550019002488" t="2017-03-03 14:06:59 val_waeselynck trying again after a  lein clean  ..."><a href="#t1488550019002488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:06:59</span>       val_waeselynck </span><span>trying again after a </span><code>lein clean</code><span> ...</span></div><div id="t1488550028002489" t="2017-03-03 14:07:08 val_waeselynck see you in 2 minutes ^^"><a href="#t1488550028002489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:07:08</span>       val_waeselynck </span><span>see you in 2 minutes ^^</span></div><div id="t1488550082002490" t="2017-03-03 14:08:02 val_waeselynck OK, it does work, awesome"><a href="#t1488550082002490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-03</span> <span class="t" onclick="H(this)">14:08:02</span>       val_waeselynck </span><span>OK, it does work, awesome</span></div><div id="t1488653327002498" t="2017-03-04 18:48:47 oskarkv Hi! New to specter. Is there any particular reason why the data is the last argument to, for example, transform, instead of the first like in update-in?"><a href="#t1488653327002498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">18:48:47</span>              oskarkv </span><span>Hi! New to specter. Is there any particular reason why the data is the last argument to, for example, transform, instead of the first like in update-in?</span></div><div id="t1488653967002499" t="2017-03-04 18:59:27 schmee I would guess that it is to match  map ,  filter ,  remove  et. al"><a href="#t1488653967002499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">18:59:27</span>               schmee </span><span>I would guess that it is to match </span><code>map</code><span>, </span><code>filter</code><span>, </span><code>remove</code><span> et. al</span></div><div id="t1488654258002500" t="2017-03-04 19:04:18 oskarkv Yeah, it matters mostly for -&gt; et al, I guess the question was not that important  🙂"><a href="#t1488654258002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">19:04:18</span>              oskarkv </span><span>Yeah, it matters mostly for -&gt; et al, I guess the question was not that important </span><b>🙂</b></div><div id="t1488654367002501" t="2017-03-04 19:06:07 schmee -&gt;&gt;  should do the trick then  🙂"><a href="#t1488654367002501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">19:06:07</span>               schmee </span><code>-&gt;&gt;</code><span> should do the trick then </span><b>🙂</b></div><div id="t1488654562002502" t="2017-03-04 19:09:22 oskarkv yeah but i mean when you have several functions in a -&gt; or -&gt;&gt;  😛"><a href="#t1488654562002502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">19:09:22</span>              oskarkv </span><span>yeah but i mean when you have several functions in a -&gt; or -&gt;&gt; </span><b>😛</b></div><div id="t1488654615002503" t="2017-03-04 19:10:15 schmee then you want  as-&gt;   🙂"><a href="#t1488654615002503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">19:10:15</span>               schmee </span><span>then you want </span><code>as-&gt;</code><span> </span><b>🙂</b></div><div id="t1488656215002504" t="2017-03-04 19:36:55 oskarkv I started reading about specter like 30 min ago. It&apos;s amazing  🙂"><a href="#t1488656215002504" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">19:36:55</span>              oskarkv </span><span>I started reading about specter like 30 min ago. It&apos;s amazing </span><b>🙂</b></div><div id="t1488666688002505" t="2017-03-04 22:31:28 oskarkv I saw that there is a function,  select* , that seems to do the same thing as the macro  select . What&apos;s the  difference?"><a href="#t1488666688002505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">22:31:28</span>              oskarkv </span><span>I saw that there is a function, </span><code>select*</code><span>, that seems to do the same thing as the macro </span><code>select</code><span>. What&apos;s the  difference?</span></div><div id="t1488666749002507" t="2017-03-04 22:32:29 oskarkv Oh, you need the precompiled path"><a href="#t1488666749002507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">22:32:29</span>              oskarkv </span><span>Oh, you need the precompiled path</span></div><div id="t1488667276002508" t="2017-03-04 22:41:16 oskarkv Or, now I&apos;m not sure anymore, looks like the  select*  function calls compile on the path."><a href="#t1488667276002508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-04</span> <span class="t" onclick="H(this)">22:41:16</span>              oskarkv </span><span>Or, now I&apos;m not sure anymore, looks like the </span><code>select*</code><span> function calls compile on the path.</span></div><div id="t1488698896002510" t="2017-03-05 07:28:16 puzzler @oskarkv Use the macro  select  whenever possible -- it does more optimization magic, I believe.   select*  may be useful in a situation where you absolutely need a function (for example, as an input to a higher-order function like  map ).    For the most part, it&apos;s best to think of  select*  as an underlying implementation function, not really an important part of the end-user API.  [I&apos;m jumping in because you haven&apos;t gotten a response yet, but if anyone provides a more definitive answer, feel free to ignore mine]."><a href="#t1488698896002510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-05</span> <span class="t" onclick="H(this)">07:28:16</span>              puzzler </span><span>@oskarkv Use the macro </span><code>select</code><span> whenever possible -- it does more optimization magic, I believe.  </span><code>select*</code><span> may be useful in a situation where you absolutely need a function (for example, as an input to a higher-order function like </span><code>map</code><span>).    For the most part, it&apos;s best to think of </span><code>select*</code><span> as an underlying implementation function, not really an important part of the end-user API.  [I&apos;m jumping in because you haven&apos;t gotten a response yet, but if anyone provides a more definitive answer, feel free to ignore mine].</span></div><div id="t1488722204002511" t="2017-03-05 13:56:44 nathanmarz gave a bit more detail answering the question on github  https://github.com/nathanmarz/specter/issues/186"><a href="#t1488722204002511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-05</span> <span class="t" onclick="H(this)">13:56:44</span>           nathanmarz </span><span>gave a bit more detail answering the question on github </span><a href="https://github.com/nathanmarz/specter/issues/186" target="_blank">https://github.com/nathanmarz/specter/issues/186</a></div><div id="t1488836274002513" t="2017-03-06 21:37:54 vikeri Is there a simple way to get all the keys of a nested map?"><a href="#t1488836274002513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">21:37:54</span>               vikeri </span><span>Is there a simple way to get all the keys of a nested map?</span></div><div id="t1488836292002514" t="2017-03-06 21:38:12 vikeri I suspect  walker  might be useful?"><a href="#t1488836292002514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">21:38:12</span>               vikeri </span><span>I suspect </span><code>walker</code><span> might be useful?</span></div><div id="t1488836389002515" t="2017-03-06 21:39:49 tolitius @vikeri  http://gitpod.com/talks/config-plus-love/#33"><a href="#t1488836389002515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">21:39:49</span>             tolitius </span><span>@vikeri </span><a href="http://gitpod.com/talks/config-plus-love/#33" target="_blank">http://gitpod.com/talks/config-plus-love/#33</a></div><div id="t1488836585002516" t="2017-03-06 21:43:05 vikeri @tolitius I actually just want the keywords
 (spfun {:hello {:hi “Hello” :kew :not-included} :included 123})
=&gt; (:hello :hi :kew :included)
"><a href="#t1488836585002516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">21:43:05</span>               vikeri </span><span>@tolitius I actually just want the keywords
</span><pre>(spfun {:hello {:hi “Hello” :kew :not-included} :included 123})
=&gt; (:hello :hi :kew :included)
</pre></div><div id="t1488838817002518" t="2017-03-06 22:20:17 nathanmarz @vikeri
 (defn spfun [m]
  (let [p (recursive-path [] p
            (if-path map?
              (continue-then-stay MAP-VALS p)))]
    (select [p MAP-KEYS] m)
    ))
"><a href="#t1488838817002518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:20:17</span>           nathanmarz </span><span>@vikeri
</span><pre>(defn spfun [m]
  (let [p (recursive-path [] p
            (if-path map?
              (continue-then-stay MAP-VALS p)))]
    (select [p MAP-KEYS] m)
    ))
</pre></div><div id="t1488838912002519" t="2017-03-06 22:21:52 ag do I need to do anything special to be able to use Specter in Clojurescript? 

when I try to require it like this: (require &apos;[com.rpl.specter :as sp])
I’m seeing bunch of errors"><a href="#t1488838912002519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:21:52</span>                   ag </span><span>do I need to do anything special to be able to use Specter in Clojurescript? 

when I try to require it like this: (require &apos;[com.rpl.specter :as sp])
I’m seeing bunch of errors</span></div><div id="t1488838935002520" t="2017-03-06 22:22:15 nathanmarz it should work fine"><a href="#t1488838935002520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:22:15</span>           nathanmarz </span><span>it should work fine</span></div><div id="t1488838938002521" t="2017-03-06 22:22:18 nathanmarz what errors are you seeing?"><a href="#t1488838938002521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:22:18</span>           nathanmarz </span><span>what errors are you seeing?</span></div><div id="t1488838990002523" t="2017-03-06 22:23:10 ag :optimizations    :none"><a href="#t1488838990002523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:23:10</span>                   ag </span><code>:optimizations    :none</code></div><div id="t1488839090002526" t="2017-03-06 22:24:50 nathanmarz is that a stack trace?"><a href="#t1488839090002526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:24:50</span>           nathanmarz </span><span>is that a stack trace?</span></div><div id="t1488839125002527" t="2017-03-06 22:25:25 ag that’s what I’m seeing in browser window (dev tools)"><a href="#t1488839125002527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:25:25</span>                   ag </span><span>that’s what I’m seeing in browser window (dev tools)</span></div><div id="t1488839140002528" t="2017-03-06 22:25:40 ag when I try to require specter"><a href="#t1488839140002528" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:25:40</span>                   ag </span><span>when I try to require specter</span></div><div id="t1488839146002529" t="2017-03-06 22:25:46 nathanmarz hmm, it doesn&apos;t say an error type or exception type?"><a href="#t1488839146002529" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:25:46</span>           nathanmarz </span><span>hmm, it doesn&apos;t say an error type or exception type?</span></div><div id="t1488839183002530" t="2017-03-06 22:26:23 nathanmarz oh is this being run with bootstrap?"><a href="#t1488839183002530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:26:23</span>           nathanmarz </span><span>oh is this being run with bootstrap?</span></div><div id="t1488839218002531" t="2017-03-06 22:26:58 ag no, it’s a boot-clj project. 
I’m using [org.clojure/clojurescript   “1.9.293”]"><a href="#t1488839218002531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:26:58</span>                   ag </span><span>no, it’s a boot-clj project. 
I’m using [org.clojure/clojurescript   “1.9.293”]</span></div><div id="t1488839270002532" t="2017-03-06 22:27:50 nathanmarz i&apos;m not sure how boot works"><a href="#t1488839270002532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:27:50</span>           nathanmarz </span><span>i&apos;m not sure how boot works</span></div><div id="t1488839273002533" t="2017-03-06 22:27:53 nathanmarz this may be relevant:  https://github.com/nathanmarz/specter/issues/136"><a href="#t1488839273002533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:27:53</span>           nathanmarz </span><span>this may be relevant: </span><a href="https://github.com/nathanmarz/specter/issues/136" target="_blank">https://github.com/nathanmarz/specter/issues/136</a></div><div id="t1488839294002534" t="2017-03-06 22:28:14 ag I’m gonna try to update to “1.9.494” of CLJS"><a href="#t1488839294002534" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:28:14</span>                   ag </span><span>I’m gonna try to update to “1.9.494” of CLJS</span></div><div id="t1488839382002536" t="2017-03-06 22:29:42 nathanmarz planck/bootstrap implement macros differently than normal clojurescript, and specter currently doesn&apos;t handle this"><a href="#t1488839382002536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:29:42</span>           nathanmarz </span><span>planck/bootstrap implement macros differently than normal clojurescript, and specter currently doesn&apos;t handle this</span></div><div id="t1488839418002537" t="2017-03-06 22:30:18 nathanmarz https://github.com/nathanmarz/specter/issues/72"><a href="#t1488839418002537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:30:18</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/72" target="_blank">https://github.com/nathanmarz/specter/issues/72</a></div><div id="t1488839625002538" t="2017-03-06 22:33:45 ag bumping clojurescript version didn’t help. still saying same error  😞"><a href="#t1488839625002538" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:33:45</span>                   ag </span><span>bumping clojurescript version didn’t help. still saying same error </span><b>😞</b></div><div id="t1488839650002539" t="2017-03-06 22:34:10 ag I’m gonna try to repro in a smaller repo and will report"><a href="#t1488839650002539" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:34:10</span>                   ag </span><span>I’m gonna try to repro in a smaller repo and will report</span></div><div id="t1488839850002540" t="2017-03-06 22:37:30 ag Ha, interesting - actually when required in a file it works."><a href="#t1488839850002540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:37:30</span>                   ag </span><span>Ha, interesting - actually when required in a file it works.</span></div><div id="t1488839861002541" t="2017-03-06 22:37:41 ag but when required in a repl - doesn&apos;t"><a href="#t1488839861002541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:37:41</span>                   ag </span><span>but when required in a repl - doesn&apos;t</span></div><div id="t1488839865002542" t="2017-03-06 22:37:45 ag ¯\(ツ)/¯"><a href="#t1488839865002542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:37:45</span>                   ag </span><span>¯\(ツ)/¯</span></div><div id="t1488840701002543" t="2017-03-06 22:51:41 nathanmarz @ag thanks, just open an issue on github"><a href="#t1488840701002543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span> <span class="t" onclick="H(this)">22:51:41</span>           nathanmarz </span><span>@ag thanks, just open an issue on github</span></div><div id="t1489007971002551" t="2017-03-08 21:19:31 schmee how do I remove all keys where the value is  ”_&quot;  from a hash like this?  {:dim1 &quot;slice1&quot;, :dim2 &quot;slice2&quot;, :dim3 “_”}"><a href="#t1489007971002551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:19:31</span>               schmee </span><span>how do I remove all keys where the value is </span><code>”_&quot;</code><span> from a hash like this? </span><pre>{:dim1 &quot;slice1&quot;, :dim2 &quot;slice2&quot;, :dim3 “_”}</pre></div><div id="t1489008039002552" t="2017-03-08 21:20:39 schmee I’ve tried various incantations of  selected? ,  subselect  and  filterer , and I can’t figure out what goes where"><a href="#t1489008039002552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:20:39</span>               schmee </span><span>I’ve tried various incantations of </span><code>selected?</code><span>, </span><code>subselect</code><span> and </span><code>filterer</code><span>, and I can’t figure out what goes where</span></div><div id="t1489008047002553" t="2017-03-08 21:20:47 schmee or if that is even the right approach"><a href="#t1489008047002553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:20:47</span>               schmee </span><span>or if that is even the right approach</span></div><div id="t1489008175002554" t="2017-03-08 21:22:55 tolitius @schmee:  boot.user=&gt; (setval [MAP-VALS #(= % &quot;_&quot;)] NONE data)
{:dim1 &quot;slice1&quot;, :dim2 &quot;slice2&quot;}"><a href="#t1489008175002554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:22:55</span>             tolitius </span><span>@schmee: </span><pre>boot.user=&gt; (setval [MAP-VALS #(= % &quot;_&quot;)] NONE data)
{:dim1 &quot;slice1&quot;, :dim2 &quot;slice2&quot;}</pre></div><div id="t1489008248002555" t="2017-03-08 21:24:08 schmee neat, thanks!"><a href="#t1489008248002555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:24:08</span>               schmee </span><span>neat, thanks!</span></div><div id="t1489008288002556" t="2017-03-08 21:24:48 schmee feel like cheating to use setval, I’m so used to immutability that anything involving “set” makes me nervous  😄"><a href="#t1489008288002556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:24:48</span>               schmee </span><span>feel like cheating to use setval, I’m so used to immutability that anything involving “set” makes me nervous </span><b>😄</b></div><div id="t1489008412002557" t="2017-03-08 21:26:52 schmee is there a way to do it with  select  though?"><a href="#t1489008412002557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:26:52</span>               schmee </span><span>is there a way to do it with </span><code>select</code><span> though?</span></div><div id="t1489008467002558" t="2017-03-08 21:27:47 schmee to reformulate, “select all keys that are not  ”_” &quot;"><a href="#t1489008467002558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:27:47</span>               schmee </span><span>to reformulate, “select all keys that are not </span><code>”_”</code><span>&quot;</span></div><div id="t1489008944002559" t="2017-03-08 21:35:44 tolitius boot.user=&gt; (select [ALL #(-&gt; % val (not= &quot;_&quot;))] data)
[[:dim1 &quot;slice1&quot;] [:dim2 &quot;slice2&quot;]] 
but this is not the right solution, since it does not return you a map + this would likely be better solved with creating a separate navigator.. which I did not wrap my head around yet"><a href="#t1489008944002559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:35:44</span>             tolitius </span><pre>boot.user=&gt; (select [ALL #(-&gt; % val (not= &quot;_&quot;))] data)
[[:dim1 &quot;slice1&quot;] [:dim2 &quot;slice2&quot;]]</pre><span>
but this is not the right solution, since it does not return you a map + this would likely be better solved with creating a separate navigator.. which I did not wrap my head around yet</span></div><div id="t1489008987002560" t="2017-03-08 21:36:27 schmee yeah, this is where I ended up as well"><a href="#t1489008987002560" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:36:27</span>               schmee </span><span>yeah, this is where I ended up as well</span></div><div id="t1489009005002562" t="2017-03-08 21:36:45 schmee it seems there is no way to keep the hash when using  select"><a href="#t1489009005002562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:36:45</span>               schmee </span><span>it seems there is no way to keep the hash when using </span><code>select</code></div><div id="t1489009080002564" t="2017-03-08 21:38:00 tolitius I don&apos;t think  setval  is wrong though"><a href="#t1489009080002564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:38:00</span>             tolitius </span><span>I don&apos;t think </span><code>setval</code><span> is wrong though</span></div><div id="t1489009108002565" t="2017-03-08 21:38:28 tolitius since you are removing / filtering the map entries"><a href="#t1489009108002565" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:38:28</span>             tolitius </span><span>since you are removing / filtering the map entries</span></div><div id="t1489009161002566" t="2017-03-08 21:39:21 schmee indeed, but sometimes you want  filter  and sometimes you want  remove , so I hope there is something equivalent in Specter  🙂"><a href="#t1489009161002566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:39:21</span>               schmee </span><span>indeed, but sometimes you want </span><code>filter</code><span> and sometimes you want </span><code>remove</code><span>, so I hope there is something equivalent in Specter </span><b>🙂</b></div><div id="t1489009205002568" t="2017-03-08 21:40:05 tolitius do  (source remove) , it is filter underneath"><a href="#t1489009205002568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:40:05</span>             tolitius </span><span>do </span><code>(source remove)</code><span>, it is filter underneath</span></div><div id="t1489009231002569" t="2017-03-08 21:40:31 tolitius i.e.  (filter (complement pred))"><a href="#t1489009231002569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:40:31</span>             tolitius </span><span>i.e. </span><code>(filter (complement pred))</code></div><div id="t1489009272002570" t="2017-03-08 21:41:12 tolitius i.e.  setval  does not mutate the original data structure"><a href="#t1489009272002570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:41:12</span>             tolitius </span><span>i.e. </span><code>setval</code><span> does not mutate the original data structure</span></div><div id="t1489009586002571" t="2017-03-08 21:46:26 schmee I know, and the  setval  approach works just fine, but aesthetically having both  filter  and  remove  can make the code read nicer"><a href="#t1489009586002571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:46:26</span>               schmee </span><span>I know, and the </span><code>setval</code><span> approach works just fine, but aesthetically having both </span><code>filter</code><span> and </span><code>remove</code><span> can make the code read nicer</span></div><div id="t1489009629002572" t="2017-03-08 21:47:09 schmee which is why I want to use specter at all in this case, otherwise I’d just do  (into {} (remove #(= &quot;_&quot; (val %)) data))"><a href="#t1489009629002572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:47:09</span>               schmee </span><span>which is why I want to use specter at all in this case, otherwise I’d just do </span><code>(into {} (remove #(= &quot;_&quot; (val %)) data))</code></div><div id="t1489009711002574" t="2017-03-08 21:48:31 schmee I’m hunting for use-cases in my own code where Specter makes sense, that’s why I’m trying to shoehorn it a bit in this case"><a href="#t1489009711002574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:48:31</span>               schmee </span><span>I’m hunting for use-cases in my own code where Specter makes sense, that’s why I’m trying to shoehorn it a bit in this case</span></div><div id="t1489009751002575" t="2017-03-08 21:49:11 tolitius makes sense. I think  select  will always return you a sequence though"><a href="#t1489009751002575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">21:49:11</span>             tolitius </span><span>makes sense. I think </span><code>select</code><span> will always return you a sequence though</span></div><div id="t1489010706002577" t="2017-03-08 22:05:06 nathanmarz @schmee keep in mind that the  setval  approach will maintain the type of map and also be significantly faster than the  (into {} ...)  approach"><a href="#t1489010706002577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">22:05:06</span>           nathanmarz </span><span>@schmee keep in mind that the </span><code>setval</code><span> approach will maintain the type of map and also be significantly faster than the </span><code>(into {} ...)</code><span> approach</span></div><div id="t1489100888651624" t="2017-03-09 23:08:08 chromalchemy I am trying to filter a map, but return a map, not just the filtered values. I can use setval, but how do I go one level deep?

 {:id1 {:a false} :id2 {:a true}}  -&gt; {:id2 {:a true}}  using something like  (setval [MAP-VALS :a true?] ....)"><a href="#t1489100888651624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:08:08</span>         chromalchemy </span><span>I am trying to filter a map, but return a map, not just the filtered values. I can use setval, but how do I go one level deep?

</span><code>{:id1 {:a false} :id2 {:a true}}  -&gt; {:id2 {:a true}}</code><span> using something like </span><code>(setval [MAP-VALS :a true?] ....)</code></div><div id="t1489101067678140" t="2017-03-09 23:11:07 nathanmarz @chromalchemy I think you&apos;re looking for:
 (setval [MAP-VALS (selected? :a (complement identity))] NONE data)
"><a href="#t1489101067678140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:11:07</span>           nathanmarz </span><span>@chromalchemy I think you&apos;re looking for:
</span><pre>(setval [MAP-VALS (selected? :a (complement identity))] NONE data)
</pre></div><div id="t1489102011808765" t="2017-03-09 23:26:51 chromalchemy Perfect Thanks!!! Trying to understand  (selected?) . What is the difference between  [ALL even?]  and  [ALL (selected? even?)] ?"><a href="#t1489102011808765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:26:51</span>         chromalchemy </span><span>Perfect Thanks!!! Trying to understand </span><code>(selected?)</code><span>. What is the difference between </span><code>[ALL even?]</code><span> and </span><code>[ALL (selected? even?)]</code><span>?</span></div><div id="t1489102059814831" t="2017-03-09 23:27:39 nathanmarz those particular examples are equivalent"><a href="#t1489102059814831" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:27:39</span>           nathanmarz </span><span>those particular examples are equivalent</span></div><div id="t1489102076817127" t="2017-03-09 23:27:56 nathanmarz selected?  in general is a filter on whether the path selects anything"><a href="#t1489102076817127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:27:56</span>           nathanmarz </span><code>selected?</code><span> in general is a filter on whether the path selects anything</span></div><div id="t1489102099819906" t="2017-03-09 23:28:19 nathanmarz if you only give it functions it&apos;s the same as just using those functions directly in the path"><a href="#t1489102099819906" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:28:19</span>           nathanmarz </span><span>if you only give it functions it&apos;s the same as just using those functions directly in the path</span></div><div id="t1489102191831970" t="2017-03-09 23:29:51 chromalchemy Ok so if the path does not &quot;select&quot; a thing, then it is effectively filtered out of the result."><a href="#t1489102191831970" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:29:51</span>         chromalchemy </span><span>Ok so if the path does not &quot;select&quot; a thing, then it is effectively filtered out of the result.</span></div><div id="t1489102439866079" t="2017-03-09 23:33:59 chromalchemy Thank you again for Specter and the recent push to 1.0!!! I was surprised to read the consternated feedback on reddit. As a relative noob, it is for me much more obvious and empowering than than the walls I regularly run into when trying to juggle basic clojure functions to screen and transform data for UI stuff in cljs."><a href="#t1489102439866079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:33:59</span>         chromalchemy </span><span>Thank you again for Specter and the recent push to 1.0!!! I was surprised to read the consternated feedback on reddit. As a relative noob, it is for me much more obvious and empowering than than the walls I regularly run into when trying to juggle basic clojure functions to screen and transform data for UI stuff in cljs.</span></div><div id="t1489103242971040" t="2017-03-09 23:47:22 chromalchemy Still a bit confused why  (setval
      [MAP-VALS (selected? :a true?)]
      NONE
      {:id1 {:a false} :id2 {:a true}})  returns  {:id1 {:a false}} 
But i&apos;m up an running nonetheless  simple_smile"><a href="#t1489103242971040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:47:22</span>         chromalchemy </span><span>Still a bit confused why </span><pre>(setval
      [MAP-VALS (selected? :a true?)]
      NONE
      {:id1 {:a false} :id2 {:a true}})</pre><span> returns </span><code>{:id1 {:a false}}</code><span>
But i&apos;m up an running nonetheless </span><b>simple_smile</b></div><div id="t1489103331981706" t="2017-03-09 23:48:51 chromalchemy I guess  NONE  gets rid of the maps that pass the  true?  test."><a href="#t1489103331981706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:48:51</span>         chromalchemy </span><span>I guess </span><code>NONE</code><span> gets rid of the maps that pass the </span><code>true?</code><span> test.</span></div><div id="t1489103367985681" t="2017-03-09 23:49:27 nathanmarz @chromalchemy yes, that&apos;s right"><a href="#t1489103367985681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:49:27</span>           nathanmarz </span><span>@chromalchemy yes, that&apos;s right</span></div><div id="t1489103396988932" t="2017-03-09 23:49:56 nathanmarz that code is selecting which values to remove (as opposed to which values to keep)"><a href="#t1489103396988932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:49:56</span>           nathanmarz </span><span>that code is selecting which values to remove (as opposed to which values to keep)</span></div><div id="t1489103462997182" t="2017-03-09 23:51:02 chromalchemy Ok , got it. Thx for the clarification."><a href="#t1489103462997182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">23:51:02</span>         chromalchemy </span><span>Ok , got it. Thx for the clarification.</span></div><div id="t1489114241091777" t="2017-03-10 02:50:41 tolitius @nathanmarz  (setval [MAP-VALS (comp not :a)] NONE data)  would also work, what would be the difference in it vs.  (setval [MAP-VALS (selected? :a (complement identity))] NONE data)"><a href="#t1489114241091777" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:50:41</span>             tolitius </span><span>@nathanmarz </span><pre>(setval [MAP-VALS (comp not :a)] NONE data)</pre><span> would also work, what would be the difference in it vs. </span><pre>(setval [MAP-VALS (selected? :a (complement identity))] NONE data)</pre></div><div id="t1489114372102721" t="2017-03-10 02:52:52 nathanmarz @tolitius same thing"><a href="#t1489114372102721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:52:52</span>           nathanmarz </span><span>@tolitius same thing</span></div><div id="t1489114389104098" t="2017-03-10 02:53:09 tolitius would  selected?  be more performant?"><a href="#t1489114389104098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:53:09</span>             tolitius </span><span>would </span><code>selected?</code><span> be more performant?</span></div><div id="t1489114398104853" t="2017-03-10 02:53:18 nathanmarz definitely not"><a href="#t1489114398104853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:53:18</span>           nathanmarz </span><span>definitely not</span></div><div id="t1489114408105624" t="2017-03-10 02:53:28 nathanmarz the comp approach might be slightly more performant"><a href="#t1489114408105624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:53:28</span>           nathanmarz </span><span>the comp approach might be slightly more performant</span></div><div id="t1489114433107726" t="2017-03-10 02:53:53 nathanmarz pretty minor though"><a href="#t1489114433107726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:53:53</span>           nathanmarz </span><span>pretty minor though</span></div><div id="t1489114525116298" t="2017-03-10 02:55:25 tolitius thanks. trying to reason when to use an  fn  vs. a navigator"><a href="#t1489114525116298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">02:55:25</span>             tolitius </span><span>thanks. trying to reason when to use an </span><code>fn</code><span> vs. a navigator</span></div><div id="t1489116182251730" t="2017-03-10 03:23:02 nathanmarz in this case it doesn&apos;t really matter"><a href="#t1489116182251730" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span> <span class="t" onclick="H(this)">03:23:02</span>           nathanmarz </span><span>in this case it doesn&apos;t really matter</span></div><div id="t1489260650712785" t="2017-03-11 19:30:50 firesofmay Hi,
I am interested in contributing to specter. Just for fun/learning. But I am not sure which issue I should pick. I don&apos;t know where to begin with the issues already opened. Can someone point me to a good starting bug?
Thanks"><a href="#t1489260650712785" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:30:50</span>           firesofmay </span><span>Hi,
I am interested in contributing to specter. Just for fun/learning. But I am not sure which issue I should pick. I don&apos;t know where to begin with the issues already opened. Can someone point me to a good starting bug?
Thanks</span></div><div id="t1489260700716022" t="2017-03-11 19:31:40 nathanmarz @firesofmay thanks for the contribution you already made"><a href="#t1489260700716022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:31:40</span>           nathanmarz </span><span>@firesofmay thanks for the contribution you already made</span></div><div id="t1489260747719467" t="2017-03-11 19:32:27 firesofmay @nathanmarz thanks for your contributions to so many projects  🙂"><a href="#t1489260747719467" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:32:27</span>           firesofmay </span><span>@nathanmarz thanks for your contributions to so many projects </span><b>🙂</b></div><div id="t1489260755719977" t="2017-03-11 19:32:35 nathanmarz there&apos;s not too much to be added to specter at the moment, I took care of most of the open issues for 1.0"><a href="#t1489260755719977" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:32:35</span>           nathanmarz </span><span>there&apos;s not too much to be added to specter at the moment, I took care of most of the open issues for 1.0</span></div><div id="t1489260764720480" t="2017-03-11 19:32:44 nathanmarz this is probably the most self-contained issue:  https://github.com/nathanmarz/specter/issues/183"><a href="#t1489260764720480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:32:44</span>           nathanmarz </span><span>this is probably the most self-contained issue: </span><a href="https://github.com/nathanmarz/specter/issues/183" target="_blank">https://github.com/nathanmarz/specter/issues/183</a></div><div id="t1489260804723113" t="2017-03-11 19:33:24 nathanmarz the most important improvement I&apos;m targeting for next version is  https://github.com/nathanmarz/specter/issues/72"><a href="#t1489260804723113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:33:24</span>           nathanmarz </span><span>the most important improvement I&apos;m targeting for next version is </span><a href="https://github.com/nathanmarz/specter/issues/72" target="_blank">https://github.com/nathanmarz/specter/issues/72</a></div><div id="t1489260842725525" t="2017-03-11 19:34:02 nathanmarz but that one is pretty difficult due to needing to have some understanding of what&apos;s going on in the inline compiler"><a href="#t1489260842725525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:34:02</span>           nathanmarz </span><span>but that one is pretty difficult due to needing to have some understanding of what&apos;s going on in the inline compiler</span></div><div id="t1489260852726157" t="2017-03-11 19:34:12 firesofmay Hmm"><a href="#t1489260852726157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:34:12</span>           firesofmay </span><span>Hmm</span></div><div id="t1489260859726740" t="2017-03-11 19:34:19 nathanmarz plus the complexity of targeting three platforms simultaneously"><a href="#t1489260859726740" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:34:19</span>           nathanmarz </span><span>plus the complexity of targeting three platforms simultaneously</span></div><div id="t1489260890728804" t="2017-03-11 19:34:50 nathanmarz this one would be nice too:  https://github.com/nathanmarz/specter/issues/149"><a href="#t1489260890728804" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:34:50</span>           nathanmarz </span><span>this one would be nice too: </span><a href="https://github.com/nathanmarz/specter/issues/149" target="_blank">https://github.com/nathanmarz/specter/issues/149</a></div><div id="t1489260904729705" t="2017-03-11 19:35:04 nathanmarz probably won&apos;t be very much code, but will require understanding some of the inline compiler"><a href="#t1489260904729705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:35:04</span>           nathanmarz </span><span>probably won&apos;t be very much code, but will require understanding some of the inline compiler</span></div><div id="t1489260935731558" t="2017-03-11 19:35:35 nathanmarz oh, and this one:  https://github.com/nathanmarz/specter/issues/39"><a href="#t1489260935731558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:35:35</span>           nathanmarz </span><span>oh, and this one: </span><a href="https://github.com/nathanmarz/specter/issues/39" target="_blank">https://github.com/nathanmarz/specter/issues/39</a></div><div id="t1489260949732567" t="2017-03-11 19:35:49 nathanmarz that one is much easier than the ones that deal with the inline compiler"><a href="#t1489260949732567" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:35:49</span>           nathanmarz </span><span>that one is much easier than the ones that deal with the inline compiler</span></div><div id="t1489260961733342" t="2017-03-11 19:36:01 nathanmarz just need to re-implement protocol paths in terms of primitives shared between cljs and clj"><a href="#t1489260961733342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:36:01</span>           nathanmarz </span><span>just need to re-implement protocol paths in terms of primitives shared between cljs and clj</span></div><div id="t1489260989735020" t="2017-03-11 19:36:29 firesofmay I haven&apos;t tried protocol for cljs. Any reference doc?"><a href="#t1489260989735020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:36:29</span>           firesofmay </span><span>I haven&apos;t tried protocol for cljs. Any reference doc?</span></div><div id="t1489261026737271" t="2017-03-11 19:37:06 nathanmarz https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure"><a href="#t1489261026737271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:37:06</span>           nathanmarz </span><a href="https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure" target="_blank">https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure</a></div><div id="t1489261031737506" t="2017-03-11 19:37:11 nathanmarz that lists the differences"><a href="#t1489261031737506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:37:11</span>           nathanmarz </span><span>that lists the differences</span></div><div id="t1489261033737651" t="2017-03-11 19:37:13 firesofmay Also in  Regex navigator  Can you share input output examples?"><a href="#t1489261033737651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:37:13</span>           firesofmay </span><span>Also in </span><code>Regex navigator</code><span> Can you share input output examples?</span></div><div id="t1489261048738679" t="2017-03-11 19:37:28 nathanmarz the main difference is lack of  extend  function, which is what Specter currently uses for protocol paths"><a href="#t1489261048738679" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:37:28</span>           nathanmarz </span><span>the main difference is lack of </span><code>extend</code><span> function, which is what Specter currently uses for protocol paths</span></div><div id="t1489261170746636" t="2017-03-11 19:39:30 nathanmarz (setval (regex-all #&quot;aa*&quot;) &quot;Q&quot; &quot;aaabcaad&quot;) ;; =&gt; &quot;QbcQd&quot;"><a href="#t1489261170746636" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:39:30</span>           nathanmarz </span><code>(setval (regex-all #&quot;aa*&quot;) &quot;Q&quot; &quot;aaabcaad&quot;) ;; =&gt; &quot;QbcQd&quot;</code></div><div id="t1489261212749164" t="2017-03-11 19:40:12 nathanmarz and this too:  (setval (regex-first #&quot;aa*&quot;) &quot;Q&quot; &quot;aaabcaad&quot;) ;; =&gt; &quot;Qbcaad&quot;"><a href="#t1489261212749164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:40:12</span>           nathanmarz </span><span>and this too: </span><code>(setval (regex-first #&quot;aa*&quot;) &quot;Q&quot; &quot;aaabcaad&quot;) ;; =&gt; &quot;Qbcaad&quot;</code></div><div id="t1489261297754544" t="2017-03-11 19:41:37 firesofmay This looks interesting. And a bit more easy to do I guess. So to implement this functionality where should I start looking at?  setval  fn?"><a href="#t1489261297754544" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:41:37</span>           firesofmay </span><span>This looks interesting. And a bit more easy to do I guess. So to implement this functionality where should I start looking at? </span><code>setval</code><span> fn?</span></div><div id="t1489261337756953" t="2017-03-11 19:42:17 nathanmarz it would just be a new navigator"><a href="#t1489261337756953" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:42:17</span>           nathanmarz </span><span>it would just be a new navigator</span></div><div id="t1489261342757288" t="2017-03-11 19:42:22 nathanmarz using  defnav"><a href="#t1489261342757288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:42:22</span>           nathanmarz </span><span>using </span><code>defnav</code></div><div id="t1489261353758002" t="2017-03-11 19:42:33 nathanmarz look at the implementation of existing navigators to see how it works"><a href="#t1489261353758002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:42:33</span>           nathanmarz </span><span>look at the implementation of existing navigators to see how it works</span></div><div id="t1489261370759017" t="2017-03-11 19:42:50 firesofmay Great. I&apos;ll check it out  🙂"><a href="#t1489261370759017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:42:50</span>           firesofmay </span><span>Great. I&apos;ll check it out </span><b>🙂</b></div><div id="t1489261381759768" t="2017-03-11 19:43:01 nathanmarz awesome"><a href="#t1489261381759768" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:43:01</span>           nathanmarz </span><span>awesome</span></div><div id="t1489261787784902" t="2017-03-11 19:49:47 firesofmay @nathanmarz Btw I had a question. I noticed in your  project.clj  file you have  (def VERSION (.trim (slurp &quot;VERSION&quot;)))  and  (defproject com.rpl/specter VERSION 
What benefit does this provide?"><a href="#t1489261787784902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:49:47</span>           firesofmay </span><span>@nathanmarz Btw I had a question. I noticed in your </span><code>project.clj</code><span> file you have </span><code>(def VERSION (.trim (slurp &quot;VERSION&quot;)))</code><span> and </span><code>(defproject com.rpl/specter VERSION</code><span>
What benefit does this provide?</span></div><div id="t1489262313817435" t="2017-03-11 19:58:33 nathanmarz @firesofmay if I have submodules in the project, that makes it easy to have them all share the same version"><a href="#t1489262313817435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:58:33</span>           nathanmarz </span><span>@firesofmay if I have submodules in the project, that makes it easy to have them all share the same version</span></div><div id="t1489262330818463" t="2017-03-11 19:58:50 nathanmarz like if there were a  specter-graph  module with navigators for working with graphs"><a href="#t1489262330818463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:58:50</span>           nathanmarz </span><span>like if there were a </span><code>specter-graph</code><span> module with navigators for working with graphs</span></div><div id="t1489262364820698" t="2017-03-11 19:59:24 firesofmay @nathanmarz Ah they all just point to the same file and you just have to bump one single file. Make sense"><a href="#t1489262364820698" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:59:24</span>           firesofmay </span><span>@nathanmarz Ah they all just point to the same file and you just have to bump one single file. Make sense</span></div><div id="t1489262372821248" t="2017-03-11 19:59:32 nathanmarz yea"><a href="#t1489262372821248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-11</span> <span class="t" onclick="H(this)">19:59:32</span>           nathanmarz </span><span>yea</span></div><div id="t1489502070870543" t="2017-03-14 14:34:30 oskarkv How is (keypath :a) different from just :a in paths?"><a href="#t1489502070870543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">14:34:30</span>              oskarkv </span><span>How is (keypath :a) different from just :a in paths?</span></div><div id="t1489502408015653" t="2017-03-14 14:40:08 nathanmarz @oskarkv it&apos;s the same thing"><a href="#t1489502408015653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">14:40:08</span>           nathanmarz </span><span>@oskarkv it&apos;s the same thing</span></div><div id="t1489502432025990" t="2017-03-14 14:40:32 nathanmarz keywords implicitly convert themselves to that  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L984"><a href="#t1489502432025990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">14:40:32</span>           nathanmarz </span><span>keywords implicitly convert themselves to that </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L984" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L984</a></div><div id="t1489502469041907" t="2017-03-14 14:41:09 nathanmarz likewise, functions implicitly convert themselves to  pred   https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L988"><a href="#t1489502469041907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">14:41:09</span>           nathanmarz </span><span>likewise, functions implicitly convert themselves to </span><code>pred</code><span> </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L988" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L988</a></div><div id="t1489502537071584" t="2017-03-14 14:42:17 oskarkv ok, thanks"><a href="#t1489502537071584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">14:42:17</span>              oskarkv </span><span>ok, thanks</span></div><div id="t1489547289428704" t="2017-03-15 03:08:09 mars0i I&apos;m confused about how  continue-then-stay  works, for example in  (continue-then-stay MAP-VALS p)  from a recent example in this channeel."><a href="#t1489547289428704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">03:08:09</span>               mars0i </span><span>I&apos;m confused about how </span><code>continue-then-stay</code><span> works, for example in </span><code>(continue-then-stay MAP-VALS p)</code><span> from a recent example in this channeel.</span></div><div id="t1489548384544617" t="2017-03-15 03:26:24 mars0i I&apos;m also a bit confused about  recursive-path , although I&apos;ve used it successfully by modifying an example in the &quot;missing piece&quot; blog post.  In  (recursive-path []  p (if-path vector? [ALL p] STAY)) , what is  p  bound to when it finds a vector, and why is  p  put after  ALL ?  (Also, what&apos;s the meaning of second argument  [] ?)   recursive-path  seems very useful, but I gather it&apos;s new since it doesn&apos;t have a docstring or other documentation yet that I&apos;ve found."><a href="#t1489548384544617" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">03:26:24</span>               mars0i </span><span>I&apos;m also a bit confused about </span><code>recursive-path</code><span>, although I&apos;ve used it successfully by modifying an example in the &quot;missing piece&quot; blog post.  In </span><code>(recursive-path []  p (if-path vector? [ALL p] STAY))</code><span>, what is </span><code>p</code><span> bound to when it finds a vector, and why is </span><code>p</code><span> put after </span><code>ALL</code><span>?  (Also, what&apos;s the meaning of second argument </span><code>[]</code><span>?)  </span><code>recursive-path</code><span> seems very useful, but I gather it&apos;s new since it doesn&apos;t have a docstring or other documentation yet that I&apos;ve found.</span></div><div id="t1489574111372605" t="2017-03-15 10:35:11 oskarkv Apparently I don&apos;t understand how  not-selected?  works.  (select [:a (not-selected? :c)] {:a 1 :b {:a 1 :b 2}})  I expected to return something since :c does not exist. &quot;Stops navigation if the path navigator finds a result. Otherwise continues with the current structure.&quot; It couldn&apos;t have found :c, so the current structure is 1, because that&apos;s what just :a gives?"><a href="#t1489574111372605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:35:11</span>              oskarkv </span><span>Apparently I don&apos;t understand how </span><code>not-selected?</code><span> works. </span><code>(select [:a (not-selected? :c)] {:a 1 :b {:a 1 :b 2}})</code><span> I expected to return something since :c does not exist. &quot;Stops navigation if the path navigator finds a result. Otherwise continues with the current structure.&quot; It couldn&apos;t have found :c, so the current structure is 1, because that&apos;s what just :a gives?</span></div><div id="t1489574815530260" t="2017-03-15 10:46:55 nathanmarz @oskarkv but  :c  always navigates to something"><a href="#t1489574815530260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:46:55</span>           nathanmarz </span><span>@oskarkv but </span><code>:c</code><span> always navigates to something</span></div><div id="t1489574819531123" t="2017-03-15 10:46:59 nathanmarz in this case to  nil"><a href="#t1489574819531123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:46:59</span>           nathanmarz </span><span>in this case to </span><code>nil</code></div><div id="t1489574835534330" t="2017-03-15 10:47:15 nathanmarz if you do  (must :c) , that only navigates if  :c  exists in the map"><a href="#t1489574835534330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:47:15</span>           nathanmarz </span><span>if you do </span><code>(must :c)</code><span>, that only navigates if </span><code>:c</code><span> exists in the map</span></div><div id="t1489574924554264" t="2017-03-15 10:48:44 nathanmarz @mars0i  continue-then-stay  does literally what it says"><a href="#t1489574924554264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:48:44</span>           nathanmarz </span><span>@mars0i </span><code>continue-then-stay</code><span> does literally what it says</span></div><div id="t1489574930555655" t="2017-03-15 10:48:50 nathanmarz first it navigates to the given path"><a href="#t1489574930555655" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:48:50</span>           nathanmarz </span><span>first it navigates to the given path</span></div><div id="t1489574937557252" t="2017-03-15 10:48:57 nathanmarz then it navigates to itself"><a href="#t1489574937557252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:48:57</span>           nathanmarz </span><span>then it navigates to itself</span></div><div id="t1489574996570439" t="2017-03-15 10:49:56 nathanmarz (transform (continue-then-stay STAY) inc 1)  will return  3 , because it navigates to itself, then navigates to itself again"><a href="#t1489574996570439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:49:56</span>           nathanmarz </span><code>(transform (continue-then-stay STAY) inc 1)</code><span> will return </span><code>3</code><span>, because it navigates to itself, then navigates to itself again</span></div><div id="t1489575048582391" t="2017-03-15 10:50:48 nathanmarz p  in that example is bound to itself (aka the entire path definition given )"><a href="#t1489575048582391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:50:48</span>           nathanmarz </span><code>p</code><span> in that example is bound to itself (aka the entire path definition given )</span></div><div id="t1489575084590294" t="2017-03-15 10:51:24 nathanmarz so for  TREE-VALUES , what it&apos;s saying is: if navigated at a vector, navigate to each element of the vector and recurse"><a href="#t1489575084590294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:51:24</span>           nathanmarz </span><span>so for </span><code>TREE-VALUES</code><span>, what it&apos;s saying is: if navigated at a vector, navigate to each element of the vector and recurse</span></div><div id="t1489575109595940" t="2017-03-15 10:51:49 nathanmarz otherwise (meaning not at a vector), just stay navigated at that point (finish recursing)"><a href="#t1489575109595940" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:51:49</span>           nathanmarz </span><span>otherwise (meaning not at a vector), just stay navigated at that point (finish recursing)</span></div><div id="t1489575204617313" t="2017-03-15 10:53:24 nathanmarz the  []  argument i used to specify arguments to the resulting path"><a href="#t1489575204617313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:53:24</span>           nathanmarz </span><span>the </span><code>[]</code><span> argument i used to specify arguments to the resulting path</span></div><div id="t1489575217620004" t="2017-03-15 10:53:37 nathanmarz basically the result of  recursive-path  will be a function if any arguments are provided"><a href="#t1489575217620004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:53:37</span>           nathanmarz </span><span>basically the result of </span><code>recursive-path</code><span> will be a function if any arguments are provided</span></div><div id="t1489575355651071" t="2017-03-15 10:55:55 oskarkv Oh, OK. Thanks!"><a href="#t1489575355651071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">10:55:55</span>              oskarkv </span><span>Oh, OK. Thanks!</span></div><div id="t1489578889383153" t="2017-03-15 11:54:49 nathanmarz @oskarkv oh just noticed you were navigating to  :a  first, don&apos;t think that path is what you want"><a href="#t1489578889383153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">11:54:49</span>           nathanmarz </span><span>@oskarkv oh just noticed you were navigating to </span><code>:a</code><span> first, don&apos;t think that path is what you want</span></div><div id="t1489580131653229" t="2017-03-15 12:15:31 oskarkv I was just playing around to learn  😛"><a href="#t1489580131653229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">12:15:31</span>              oskarkv </span><span>I was just playing around to learn </span><b>😛</b></div><div id="t1489588991506191" t="2017-03-15 14:43:11 mars0i Thanks @nathanmarz.  That&apos;s very helpful.  I&apos;m still trying to get my head wrapped around some things that aren&apos;t intuitive for me yet. I still don&apos;t understand what  p  is doing in  if-path  branches in  recursive-path .  Here&apos;s an example I&apos;ve been using:"><a href="#t1489588991506191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:43:11</span>               mars0i </span><span>Thanks @nathanmarz.  That&apos;s very helpful.  I&apos;m still trying to get my head wrapped around some things that aren&apos;t intuitive for me yet. I still don&apos;t understand what </span><code>p</code><span> is doing in </span><code>if-path</code><span> branches in </span><code>recursive-path</code><span>.  Here&apos;s an example I&apos;ve been using:</span></div><div id="t1489589034524259" t="2017-03-15 14:43:54 mars0i (def a {:a1 {:b1 {:c1 1, :c2 2}, :b2 {:c1 3, :c2 4}},
 :a2 {:b1 {:c1 5, :c2 6}, :b2 {:c1 7, :c2 8}}})"><a href="#t1489589034524259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:43:54</span>               mars0i </span><pre>(def a {:a1 {:b1 {:c1 1, :c2 2}, :b2 {:c1 3, :c2 4}},
 :a2 {:b1 {:c1 5, :c2 6}, :b2 {:c1 7, :c2 8}}})</pre></div><div id="t1489589311640429" t="2017-03-15 14:48:31 mars0i (select [(recursive-path [] p (if-path map? [MAP-VALS p] [STAY]))] a)  produces  [1 2 3 4 5 6 7 8] , i.e. the leaf node values.  Why do I follow  MAP-VALS  with  p ?  Leaving out  p   just produces the original map wrapped in a vector, so I know I need  p , to get the leaf nodes, but I don&apos;t understand why.  Normally, if I have a path operator like  MAP-VALS  in a vector, it&apos;s the first navigation operation, and then the next one is applied, and so on.  Here it feels as if  p  is an argument that&apos;s passed to  MAP-VALS , maybe.  Is that correct?  So that  [MAP-VALS p]  within  recursive-path   (or  if-path ?) is semantically different from, a sequence of navigators immediately after  select  or  transform ?"><a href="#t1489589311640429" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:48:31</span>               mars0i </span><code>(select [(recursive-path [] p (if-path map? [MAP-VALS p] [STAY]))] a)</code><span> produces </span><code>[1 2 3 4 5 6 7 8]</code><span>, i.e. the leaf node values.  Why do I follow </span><code>MAP-VALS</code><span> with </span><code>p</code><span>?  Leaving out </span><code>p</code><span>  just produces the original map wrapped in a vector, so I know I need </span><code>p</code><span>, to get the leaf nodes, but I don&apos;t understand why.  Normally, if I have a path operator like </span><code>MAP-VALS</code><span> in a vector, it&apos;s the first navigation operation, and then the next one is applied, and so on.  Here it feels as if </span><code>p</code><span> is an argument that&apos;s passed to </span><code>MAP-VALS</code><span>, maybe.  Is that correct?  So that </span><code>[MAP-VALS p]</code><span> within </span><code>recursive-path</code><span>  (or </span><code>if-path</code><span>?) is semantically different from, a sequence of navigators immediately after </span><code>select</code><span> or </span><code>transform</code><span>?</span></div><div id="t1489589340652575" t="2017-03-15 14:49:00 nathanmarz no,  p  is just the next navigation to do after  MAP-VALS"><a href="#t1489589340652575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:00</span>           nathanmarz </span><span>no, </span><code>p</code><span> is just the next navigation to do after </span><code>MAP-VALS</code></div><div id="t1489589358660248" t="2017-03-15 14:49:18 nathanmarz think of it just like regular recursion"><a href="#t1489589358660248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:18</span>           nathanmarz </span><span>think of it just like regular recursion</span></div><div id="t1489589361661270" t="2017-03-15 14:49:21 nathanmarz (defn foo [i]
  (if (= 0 i)
    1
    (* 2 (foo (dec i)))))
"><a href="#t1489589361661270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:21</span>           nathanmarz </span><pre>(defn foo [i]
  (if (= 0 i)
    1
    (* 2 (foo (dec i)))))
</pre></div><div id="t1489589363662081" t="2017-03-15 14:49:23 mars0i What is the value of  p ?"><a href="#t1489589363662081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:23</span>               mars0i </span><span>What is the value of </span><code>p</code><span>?</span></div><div id="t1489589377668331" t="2017-03-15 14:49:37 nathanmarz foo  refers to itself there, just like how  p  refers to the overall path"><a href="#t1489589377668331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:37</span>           nathanmarz </span><code>foo</code><span> refers to itself there, just like how </span><code>p</code><span> refers to the overall path</span></div><div id="t1489589388672869" t="2017-03-15 14:49:48 nathanmarz p  is  (if-path map? [MAP-VALS p] [STAY]))"><a href="#t1489589388672869" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:49:48</span>           nathanmarz </span><code>p</code><span> is </span><code>(if-path map? [MAP-VALS p] [STAY]))</code></div><div id="t1489589418685041" t="2017-03-15 14:50:18 nathanmarz the effect of using  p  there is to continue going to all map vals until a non-map is encountered"><a href="#t1489589418685041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:50:18</span>           nathanmarz </span><span>the effect of using </span><code>p</code><span> there is to continue going to all map vals until a non-map is encountered</span></div><div id="t1489589435692564" t="2017-03-15 14:50:35 mars0i I know I might seem dense.  I&apos;m just not in the mindset yet, but want to be."><a href="#t1489589435692564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:50:35</span>               mars0i </span><span>I know I might seem dense.  I&apos;m just not in the mindset yet, but want to be.</span></div><div id="t1489589447697702" t="2017-03-15 14:50:47 nathanmarz (btw you don&apos;t need the  []  if it&apos;s just a single navigator)"><a href="#t1489589447697702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:50:47</span>           nathanmarz </span><span>(btw you don&apos;t need the </span><code>[]</code><span> if it&apos;s just a single navigator)</span></div><div id="t1489589456701725" t="2017-03-15 14:50:56 nathanmarz the second branch of  if-path  can just be  STAY"><a href="#t1489589456701725" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:50:56</span>           nathanmarz </span><span>the second branch of </span><code>if-path</code><span> can just be </span><code>STAY</code></div><div id="t1489589504722370" t="2017-03-15 14:51:44 nathanmarz are you comfortable with recursion with functions?"><a href="#t1489589504722370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:51:44</span>           nathanmarz </span><span>are you comfortable with recursion with functions?</span></div><div id="t1489589532733929" t="2017-03-15 14:52:12 mars0i Ah, maybe I see.  So  recursive-path  doesn&apos;t in itself cause recursion to occur.  It just sets up a context in which it can occur.  The recursion is implemented by using the  p  that it binds, in  if-path ."><a href="#t1489589532733929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:52:12</span>               mars0i </span><span>Ah, maybe I see.  So </span><code>recursive-path</code><span> doesn&apos;t in itself cause recursion to occur.  It just sets up a context in which it can occur.  The recursion is implemented by using the </span><code>p</code><span> that it binds, in </span><code>if-path</code><span>.</span></div><div id="t1489589539737227" t="2017-03-15 14:52:19 nathanmarz that&apos;s right"><a href="#t1489589539737227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:52:19</span>           nathanmarz </span><span>that&apos;s right</span></div><div id="t1489589548741184" t="2017-03-15 14:52:28 mars0i Yes, no problem with recursion.  It&apos;s a reasonable question to ask."><a href="#t1489589548741184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:52:28</span>               mars0i </span><span>Yes, no problem with recursion.  It&apos;s a reasonable question to ask.</span></div><div id="t1489589557744989" t="2017-03-15 14:52:37 nathanmarz I see where you were confused now"><a href="#t1489589557744989" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:52:37</span>           nathanmarz </span><span>I see where you were confused now</span></div><div id="t1489589561746530" t="2017-03-15 14:52:41 mars0i The Little Lisper set me straight decades ago."><a href="#t1489589561746530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:52:41</span>               mars0i </span><span>The Little Lisper set me straight decades ago.</span></div><div id="t1489589590759052" t="2017-03-15 14:53:10 nathanmarz recursive-path  does absolutely nothing except provide you with an object that references itself"><a href="#t1489589590759052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:53:10</span>           nathanmarz </span><code>recursive-path</code><span> does absolutely nothing except provide you with an object that references itself</span></div><div id="t1489589611768295" t="2017-03-15 14:53:31 nathanmarz (recursive-path [] p [ALL even?])  is the same as  [ALL even?]"><a href="#t1489589611768295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:53:31</span>           nathanmarz </span><code>(recursive-path [] p [ALL even?])</code><span> is the same as </span><code>[ALL even?]</code></div><div id="t1489589679797948" t="2017-03-15 14:54:39 mars0i OK.  That helps a lot.  Thanks.  It&apos;s just like a special kind of  let ."><a href="#t1489589679797948" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:54:39</span>               mars0i </span><span>OK.  That helps a lot.  Thanks.  It&apos;s just like a special kind of </span><code>let</code><span>.</span></div><div id="t1489589691803400" t="2017-03-15 14:54:51 nathanmarz sort of"><a href="#t1489589691803400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:54:51</span>           nathanmarz </span><span>sort of</span></div><div id="t1489589708810822" t="2017-03-15 14:55:08 nathanmarz if you&apos;re curious, it&apos;s actually a wrapper around the lower level  local-declarepath  and  providepath"><a href="#t1489589708810822" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:55:08</span>           nathanmarz </span><span>if you&apos;re curious, it&apos;s actually a wrapper around the lower level </span><code>local-declarepath</code><span> and </span><code>providepath</code></div><div id="t1489589717814238" t="2017-03-15 14:55:17 nathanmarz those two can be used to make mutually recursive paths"><a href="#t1489589717814238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:55:17</span>           nathanmarz </span><span>those two can be used to make mutually recursive paths</span></div><div id="t1489589763834915" t="2017-03-15 14:56:03 mars0i &quot;sort of&quot; yeah that&apos;s why I wrote &quot;like&quot; and &quot;kind of&quot;  🙂   .  OK, I&apos;ll look at those at some point."><a href="#t1489589763834915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:56:03</span>               mars0i </span><span>&quot;sort of&quot; yeah that&apos;s why I wrote &quot;like&quot; and &quot;kind of&quot; </span><b>🙂</b><span>  .  OK, I&apos;ll look at those at some point.</span></div><div id="t1489589938912341" t="2017-03-15 14:58:58 mars0i I&apos;m not sure I understand  continue-then-stay  followed by  p  within  recursive-path , but I think I should think and experiment a bit and see if I can figure it out before asking further questions.  Thanks very mush."><a href="#t1489589938912341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:58:58</span>               mars0i </span><span>I&apos;m not sure I understand </span><code>continue-then-stay</code><span> followed by </span><code>p</code><span> within </span><code>recursive-path</code><span>, but I think I should think and experiment a bit and see if I can figure it out before asking further questions.  Thanks very mush.</span></div><div id="t1489589974928019" t="2017-03-15 14:59:34 nathanmarz no problem, happy to help"><a href="#t1489589974928019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:59:34</span>           nathanmarz </span><span>no problem, happy to help</span></div><div id="t1489589976929120" t="2017-03-15 14:59:36 mars0i much.  now that I understand  recursive-path  better."><a href="#t1489589976929120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">14:59:36</span>               mars0i </span><span>much.  now that I understand </span><code>recursive-path</code><span> better.</span></div><div id="t1489598019450179" t="2017-03-15 17:13:39 mars0i Based on an answer to vikeri a week ago:  b ;=&gt; {:b1 {:c1 1, :c2 2}, :b2 {:c1 3, :c2 4}}

(select [(recursive-path [] p
           (if-path map?
	         (continue-then-stay MAP-VALS p)))
         MAP-KEYS]
	b)
;=&gt; [:c1 :c2 :c1 :c2 :b1 :b2]
"><a href="#t1489598019450179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:13:39</span>               mars0i </span><span>Based on an answer to vikeri a week ago: </span><pre>b ;=&gt; {:b1 {:c1 1, :c2 2}, :b2 {:c1 3, :c2 4}}

(select [(recursive-path [] p
           (if-path map?
	         (continue-then-stay MAP-VALS p)))
         MAP-KEYS]
	b)
;=&gt; [:c1 :c2 :c1 :c2 :b1 :b2]
</pre></div><div id="t1489598042459533" t="2017-03-15 17:14:02 mars0i Just want to check my understanding of how this works."><a href="#t1489598042459533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:14:02</span>               mars0i </span><span>Just want to check my understanding of how this works.</span></div><div id="t1489598167511589" t="2017-03-15 17:16:07 mars0i If the current element is a map, then get its vals and continue with the path, p, but also, return the current element and pass it to MAP-KEYS.  So what keeps coming out of all that are the keys, and they are what are wrapped in vector.  Something like that?"><a href="#t1489598167511589" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:16:07</span>               mars0i </span><span>If the current element is a map, then get its vals and continue with the path, p, but also, return the current element and pass it to MAP-KEYS.  So what keeps coming out of all that are the keys, and they are what are wrapped in vector.  Something like that?</span></div><div id="t1489598339582763" t="2017-03-15 17:18:59 mars0i Or rather  MAP-VALS p  causes  p  into which we recurse to be bound to the outputs of  MAP-VALS .  But also the entire map element at that point is passed to  MAP-KEYS ."><a href="#t1489598339582763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:18:59</span>               mars0i </span><span>Or rather </span><code>MAP-VALS p</code><span> causes </span><code>p</code><span> into which we recurse to be bound to the outputs of </span><code>MAP-VALS</code><span>.  But also the entire map element at that point is passed to </span><code>MAP-KEYS</code><span>.</span></div><div id="t1489598481640999" t="2017-03-15 17:21:21 nathanmarz better to think of it one step at a time"><a href="#t1489598481640999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:21:21</span>           nathanmarz </span><span>better to think of it one step at a time</span></div><div id="t1489598505650851" t="2017-03-15 17:21:45 nathanmarz @mars0i the  recursive-path  part navigates to all maps reachable via navigations to map vals"><a href="#t1489598505650851" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:21:45</span>           nathanmarz </span><span>@mars0i the </span><code>recursive-path</code><span> part navigates to all maps reachable via navigations to map vals</span></div><div id="t1489598517655850" t="2017-03-15 17:21:57 nathanmarz then for each map navigated to, it navigates to the keys"><a href="#t1489598517655850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:21:57</span>           nathanmarz </span><span>then for each map navigated to, it navigates to the keys</span></div><div id="t1489598551669888" t="2017-03-15 17:22:31 nathanmarz because of the  continue-then-stay , transformations happen first on more descendant maps"><a href="#t1489598551669888" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:22:31</span>           nathanmarz </span><span>because of the </span><code>continue-then-stay</code><span>, transformations happen first on more descendant maps</span></div><div id="t1489598563674862" t="2017-03-15 17:22:43 nathanmarz whereas with  stay-then-continue  the opposite would be true"><a href="#t1489598563674862" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:22:43</span>           nathanmarz </span><span>whereas with </span><code>stay-then-continue</code><span> the opposite would be true</span></div><div id="t1489598619697929" t="2017-03-15 17:23:39 mars0i Ah, cool about  stay-then-continue .  I didn&apos;t want the keys in reverse order."><a href="#t1489598619697929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:23:39</span>               mars0i </span><span>Ah, cool about </span><code>stay-then-continue</code><span>.  I didn&apos;t want the keys in reverse order.</span></div><div id="t1489598651710835" t="2017-03-15 17:24:11 mars0i Maybe what I wrote applies better to it."><a href="#t1489598651710835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:24:11</span>               mars0i </span><span>Maybe what I wrote applies better to it.</span></div><div id="t1489598680723356" t="2017-03-15 17:24:40 mars0i Thanks again."><a href="#t1489598680723356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:24:40</span>               mars0i </span><span>Thanks again.</span></div><div id="t1489598682724303" t="2017-03-15 17:24:42 nathanmarz worth looking at their implementations  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1204"><a href="#t1489598682724303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:24:42</span>           nathanmarz </span><span>worth looking at their implementations </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1204" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1204</a></div><div id="t1489598688726679" t="2017-03-15 17:24:48 nathanmarz thin wrappers around  multi-path"><a href="#t1489598688726679" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:24:48</span>           nathanmarz </span><span>thin wrappers around </span><code>multi-path</code></div><div id="t1489598851795831" t="2017-03-15 17:27:31 mars0i OK, I see.   This is also helping me understand  multi-path ."><a href="#t1489598851795831" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:27:31</span>               mars0i </span><span>OK, I see.   This is also helping me understand </span><code>multi-path</code><span>.</span></div><div id="t1489649462239092" t="2017-03-16 07:31:02 narkisr Hey, looking for a way to dissoc all items that are not matched by a select"><a href="#t1489649462239092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">07:31:02</span>              narkisr </span><span>Hey, looking for a way to dissoc all items that are not matched by a select</span></div><div id="t1489649888298204" t="2017-03-16 07:38:08 rauh @narkisr Like this?  (sp/setval [sp/ALL (sp/not-selected? sp/LAST odd?)] sp/NONE {:a 0 :b 1})"><a href="#t1489649888298204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">07:38:08</span>                 rauh </span><span>@narkisr Like this? </span><code>(sp/setval [sp/ALL (sp/not-selected? sp/LAST odd?)] sp/NONE {:a 0 :b 1})</code></div><div id="t1489649936304753" t="2017-03-16 07:38:56 narkisr I think so but my path is based on srange (I want to remove all items except last n)"><a href="#t1489649936304753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">07:38:56</span>              narkisr </span><span>I think so but my path is based on srange (I want to remove all items except last n)</span></div><div id="t1489650056321594" t="2017-03-16 07:40:56 narkisr Ill give it a go and report back"><a href="#t1489650056321594" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">07:40:56</span>              narkisr </span><span>Ill give it a go and report back</span></div><div id="t1489650058321763" t="2017-03-16 07:40:58 narkisr thanks!"><a href="#t1489650058321763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">07:40:58</span>              narkisr </span><span>thanks!</span></div><div id="t1489663626203383" t="2017-03-16 11:27:06 nathanmarz @rauh you can do that more concisely and efficiently with:  (setval [MAP-VALS even?] NONE {:a 0 :b 1})"><a href="#t1489663626203383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">11:27:06</span>           nathanmarz </span><span>@rauh you can do that more concisely and efficiently with: </span><code>(setval [MAP-VALS even?] NONE {:a 0 :b 1})</code></div><div id="t1489663679214347" t="2017-03-16 11:27:59 nathanmarz @narkisr you can do that by transforming the srange to be a smaller sequence only containing the last n elements"><a href="#t1489663679214347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">11:27:59</span>           nathanmarz </span><span>@narkisr you can do that by transforming the srange to be a smaller sequence only containing the last n elements</span></div><div id="t1489663759230815" t="2017-03-16 11:29:19 nathanmarz e.g.  (transform (srange 1 5) #(subvec % 2 4) [1 2 3 4 5 6 7 8]) =&gt; [1 4 5 6 7 8]"><a href="#t1489663759230815" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">11:29:19</span>           nathanmarz </span><span>e.g. </span><code>(transform (srange 1 5) #(subvec % 2 4) [1 2 3 4 5 6 7 8]) =&gt; [1 4 5 6 7 8]</code></div><div id="t1489667570049163" t="2017-03-16 12:32:50 narkisr Hey Natan,  (transform [MAP-VALS (srange 1 4)] NONE  (into (sorted-map) {1 2 3 4 5 6 7 8 9 10})))"><a href="#t1489667570049163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:32:50</span>              narkisr </span><span>Hey Natan,  (transform [MAP-VALS (srange 1 4)] NONE  (into (sorted-map) {1 2 3 4 5 6 7 8 9 10})))</span></div><div id="t1489667580051661" t="2017-03-16 12:33:00 narkisr Seems to not keep the sorting order"><a href="#t1489667580051661" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:33:00</span>              narkisr </span><span>Seems to not keep the sorting order</span></div><div id="t1489667593054428" t="2017-03-16 12:33:13 narkisr ([1 2] [9 10])"><a href="#t1489667593054428" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:33:13</span>              narkisr </span><span>([1 2] [9 10])</span></div><div id="t1489667634063842" t="2017-03-16 12:33:54 narkisr Never mind"><a href="#t1489667634063842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:33:54</span>              narkisr </span><span>Never mind</span></div><div id="t1489667635064134" t="2017-03-16 12:33:55 narkisr my bad"><a href="#t1489667635064134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:33:55</span>              narkisr </span><span>my bad</span></div><div id="t1489667681074712" t="2017-03-16 12:34:41 narkisr Just realized iv should have used (srange 0 3)"><a href="#t1489667681074712" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:34:41</span>              narkisr </span><span>Just realized iv should have used (srange 0 3)</span></div><div id="t1489667736087385" t="2017-03-16 12:35:36 narkisr Also not sure how many you get feedback but specter is awesome, I can&apos;t imagine writing Clojure without it"><a href="#t1489667736087385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:35:36</span>              narkisr </span><span>Also not sure how many you get feedback but specter is awesome, I can&apos;t imagine writing Clojure without it</span></div><div id="t1489667747089877" t="2017-03-16 12:35:47 narkisr So big thank you"><a href="#t1489667747089877" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">12:35:47</span>              narkisr </span><span>So big thank you</span></div><div id="t1489669268473473" t="2017-03-16 13:01:08 nathanmarz @narkisr thanks, glad to hear it"><a href="#t1489669268473473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-16</span> <span class="t" onclick="H(this)">13:01:08</span>           nathanmarz </span><span>@narkisr thanks, glad to hear it</span></div><div id="t1489761059781490" t="2017-03-17 14:30:59 oskarkv What is  this  in  (defnav a [x] (select* [this structure next-fn] ...))  I tried to use it but &quot;Unable to resolve symbol this&quot;."><a href="#t1489761059781490" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">14:30:59</span>              oskarkv </span><span>What is </span><code>this</code><span> in </span><code>(defnav a [x] (select* [this structure next-fn] ...))</code><span> I tried to use it but &quot;Unable to resolve symbol this&quot;.</span></div><div id="t1489763206639415" t="2017-03-17 15:06:46 mars0i Looks like it&apos;s being used inside a  proxy  def @oskarkv "><a href="#t1489763206639415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">15:06:46</span>               mars0i </span><span>Looks like it&apos;s being used inside a </span><code>proxy</code><span> def @oskarkv </span></div><div id="t1489763340692129" t="2017-03-17 15:09:00 mars0i ie is that where that code originated?"><a href="#t1489763340692129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">15:09:00</span>               mars0i </span><span>ie is that where that code originated?</span></div><div id="t1489764043972582" t="2017-03-17 15:20:43 nathanmarz @oskarkv that&apos;s currently ignored"><a href="#t1489764043972582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">15:20:43</span>           nathanmarz </span><span>@oskarkv that&apos;s currently ignored</span></div><div id="t1489764119002674" t="2017-03-17 15:21:59 nathanmarz just there for consistency with how method definition works in clojure"><a href="#t1489764119002674" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">15:21:59</span>           nathanmarz </span><span>just there for consistency with how method definition works in clojure</span></div><div id="t1489764171023516" t="2017-03-17 15:22:51 nathanmarz if you use  defrichnav , then  this  refers to the navigator object"><a href="#t1489764171023516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">15:22:51</span>           nathanmarz </span><span>if you use </span><code>defrichnav</code><span>, then </span><code>this</code><span> refers to the navigator object</span></div><div id="t1489770875605169" t="2017-03-17 17:14:35 levitanong hi would  transformed  be able to receive a value from above its scope? Like:
 (transform
  [VAL
   (transformed
     [some-path]
     (fn [value-from-VAL path-from-transformed]
       (do-something)))]
  (fn [value-from-VAL value-from-transformed]
    (do-another-thing)))
"><a href="#t1489770875605169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:14:35</span>           levitanong </span><span>hi would </span><code>transformed</code><span> be able to receive a value from above its scope? Like:
</span><pre>(transform
  [VAL
   (transformed
     [some-path]
     (fn [value-from-VAL path-from-transformed]
       (do-something)))]
  (fn [value-from-VAL value-from-transformed]
    (do-another-thing)))
</pre></div><div id="t1489770996649263" t="2017-03-17 17:16:36 nathanmarz @levitanong no, I opted to design it so the values for  transformed  are reset"><a href="#t1489770996649263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:16:36</span>           nathanmarz </span><span>@levitanong no, I opted to design it so the values for </span><code>transformed</code><span> are reset</span></div><div id="t1489771051669590" t="2017-03-17 17:17:31 levitanong @nathanmarz So if within a  transform  I use a  transformed  followed by some navigator, the “cursor” that navigator will operate on will be the original shape of the data passed to  transform ?"><a href="#t1489771051669590" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:17:31</span>           levitanong </span><span>@nathanmarz So if within a </span><code>transform</code><span> I use a </span><code>transformed</code><span> followed by some navigator, the “cursor” that navigator will operate on will be the original shape of the data passed to </span><code>transform</code><span>?</span></div><div id="t1489771065674619" t="2017-03-17 17:17:45 levitanong i.e. as if i had used a collector"><a href="#t1489771065674619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:17:45</span>           levitanong </span><span>i.e. as if i had used a collector</span></div><div id="t1489771071676568" t="2017-03-17 17:17:51 levitanong without any collecting going on"><a href="#t1489771071676568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:17:51</span>           levitanong </span><span>without any collecting going on</span></div><div id="t1489771073677374" t="2017-03-17 17:17:53 nathanmarz no, it just ignores collected values"><a href="#t1489771073677374" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:17:53</span>           nathanmarz </span><span>no, it just ignores collected values</span></div><div id="t1489771149704859" t="2017-03-17 17:19:09 nathanmarz (transform [ALL (transformed STAY inc)] inc [1 2 3 4])  will emit  [3 4 5 6]"><a href="#t1489771149704859" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:19:09</span>           nathanmarz </span><code>(transform [ALL (transformed STAY inc)] inc [1 2 3 4])</code><span> will emit </span><code>[3 4 5 6]</code></div><div id="t1489771726918961" t="2017-03-17 17:28:46 levitanong hmmm."><a href="#t1489771726918961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:28:46</span>           levitanong </span><span>hmmm.</span></div><div id="t1489771732920801" t="2017-03-17 17:28:52 levitanong I think i have to parse this. lol"><a href="#t1489771732920801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:28:52</span>           levitanong </span><span>I think i have to parse this. lol</span></div><div id="t1489771738923105" t="2017-03-17 17:28:58 levitanong thanks for the replies, @nathanmarz"><a href="#t1489771738923105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:28:58</span>           levitanong </span><span>thanks for the replies, @nathanmarz</span></div><div id="t1489772094056821" t="2017-03-17 17:34:54 levitanong (transform [(transformed [VAL :key ALL] (fn [a b] (inc b)) VAL even?] 
  (fn [a b] (println a))
  {:key [1 2 3 4]})
 
In this above example, I expect a to be  [2 3 4 5] , but I seem to be getting  {:key [2 3 4 5]} 

At least, this is a simplified version of what I’m trying to do. Is this expected behavior?"><a href="#t1489772094056821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:34:54</span>           levitanong </span><pre>(transform [(transformed [VAL :key ALL] (fn [a b] (inc b)) VAL even?] 
  (fn [a b] (println a))
  {:key [1 2 3 4]})
</pre><span>
In this above example, I expect a to be </span><code>[2 3 4 5]</code><span>, but I seem to be getting </span><code>{:key [2 3 4 5]}</code><span>

At least, this is a simplified version of what I’m trying to do. Is this expected behavior?</span></div><div id="t1489774189820537" t="2017-03-17 18:09:49 nathanmarz @levitanong that code produces an error"><a href="#t1489774189820537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:09:49</span>           nathanmarz </span><span>@levitanong that code produces an error</span></div><div id="t1489774206826545" t="2017-03-17 18:10:06 nathanmarz since it&apos;s trying to incrementing a vector in the  transformed  clause"><a href="#t1489774206826545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:10:06</span>           nathanmarz </span><span>since it&apos;s trying to incrementing a vector in the </span><code>transformed</code><span> clause</span></div><div id="t1489775858398575" t="2017-03-17 18:37:38 levitanong @nathanmarz woops, fixed"><a href="#t1489775858398575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:37:38</span>           levitanong </span><span>@nathanmarz woops, fixed</span></div><div id="t1489776527623620" t="2017-03-17 18:48:47 nathanmarz @levitanong still erroring"><a href="#t1489776527623620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:48:47</span>           nathanmarz </span><span>@levitanong still erroring</span></div><div id="t1489776535626276" t="2017-03-17 18:48:55 nathanmarz now because it&apos;s calling  even?  on the map"><a href="#t1489776535626276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:48:55</span>           nathanmarz </span><span>now because it&apos;s calling </span><code>even?</code><span> on the map</span></div><div id="t1489776598648059" t="2017-03-17 18:49:58 nathanmarz but anyway, the navigator after the  transformed  clause will get  {:key [2 3 4 5]}  as input"><a href="#t1489776598648059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:49:58</span>           nathanmarz </span><span>but anyway, the navigator after the </span><code>transformed</code><span> clause will get </span><code>{:key [2 3 4 5]}</code><span> as input</span></div><div id="t1489776745698097" t="2017-03-17 18:52:25 levitanong @nathanmarz so it doesn’t actually navigate to the transformed values"><a href="#t1489776745698097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:52:25</span>           levitanong </span><span>@nathanmarz so it doesn’t actually navigate to the transformed values</span></div><div id="t1489776759702791" t="2017-03-17 18:52:39 nathanmarz correct"><a href="#t1489776759702791" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:52:39</span>           nathanmarz </span><span>correct</span></div><div id="t1489776762703739" t="2017-03-17 18:52:42 nathanmarz it works just like  view"><a href="#t1489776762703739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:52:42</span>           nathanmarz </span><span>it works just like </span><code>view</code></div><div id="t1489776802717488" t="2017-03-17 18:53:22 levitanong oh, must’ve misread the docs on transformed"><a href="#t1489776802717488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:53:22</span>           levitanong </span><span>oh, must’ve misread the docs on transformed</span></div><div id="t1489776825725305" t="2017-03-17 18:53:45 levitanong i was almost certain it said “navigates to the transformed values” or somesuch."><a href="#t1489776825725305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:53:45</span>           levitanong </span><span>i was almost certain it said “navigates to the transformed values” or somesuch.</span></div><div id="t1489776837729125" t="2017-03-17 18:53:57 levitanong Anyway, thanks! I am no longer confused  😄"><a href="#t1489776837729125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">18:53:57</span>           levitanong </span><span>Anyway, thanks! I am no longer confused </span><b>😄</b></div><div id="t1489779215484550" t="2017-03-17 19:33:35 mars0i I&apos;ve been trying to use Specter to return paths of keys from embedded maps.  e.g. amalloy&apos;s answer at  https://stackoverflow.com/questions/21768802/how-can-i-get-the-nested-keys-of-a-map-in-clojure  :"><a href="#t1489779215484550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:33:35</span>               mars0i </span><span>I&apos;ve been trying to use Specter to return paths of keys from embedded maps.  e.g. amalloy&apos;s answer at </span><a href="https://stackoverflow.com/questions/21768802/how-can-i-get-the-nested-keys-of-a-map-in-clojure" target="_blank">https://stackoverflow.com/questions/21768802/how-can-i-get-the-nested-keys-of-a-map-in-clojure</a><span> :</span></div><div id="t1489779260498338" t="2017-03-17 19:34:20 mars0i (defn keys-in [m]
  (if (or (not (map? m))
          (empty? m))
    &apos;(())
    (for [[k v] m
          subkey (keys-in v)]
      (cons k subkey))))"><a href="#t1489779260498338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:34:20</span>               mars0i </span><pre>(defn keys-in [m]
  (if (or (not (map? m))
          (empty? m))
    &apos;(())
    (for [[k v] m
          subkey (keys-in v)]
      (cons k subkey))))</pre></div><div id="t1489779387536950" t="2017-03-17 19:36:27 mars0i (keys-in {:a1 {:b1 {:c1 1, :c2 2}, :b2 {:c2 3}}, :a2 {:b2 {:c1 4, :c2 5}}})"><a href="#t1489779387536950" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:36:27</span>               mars0i </span><code>(keys-in {:a1 {:b1 {:c1 1, :c2 2}, :b2 {:c2 3}}, :a2 {:b2 {:c1 4, :c2 5}}})</code></div><div id="t1489779401540976" t="2017-03-17 19:36:41 mars0i ;=&gt; ((:a1 :b1 :c1) (:a1 :b1 :c2) (:a1 :b2 :c2) (:a2 :b2 :c1) (:a2 :b2 :c2))"><a href="#t1489779401540976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:36:41</span>               mars0i </span><code>;=&gt; ((:a1 :b1 :c1) (:a1 :b1 :c2) (:a1 :b2 :c2) (:a2 :b2 :c1) (:a2 :b2 :c2))</code></div><div id="t1489779448554559" t="2017-03-17 19:37:28 mars0i I have been trying everything, turning myself inside-out.  Probably used combinations of half of the items on the navigators page."><a href="#t1489779448554559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:37:28</span>               mars0i </span><span>I have been trying everything, turning myself inside-out.  Probably used combinations of half of the items on the navigators page.</span></div><div id="t1489779474562416" t="2017-03-17 19:37:54 mars0i Found out about  transformed  from above discussion, thought that was the key.  Argh."><a href="#t1489779474562416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:37:54</span>               mars0i </span><span>Found out about </span><code>transformed</code><span> from above discussion, thought that was the key.  Argh.</span></div><div id="t1489779517575203" t="2017-03-17 19:38:37 mars0i Is this possible in Specter?  Undoubtedly yes.  Is it possible more simply than without it, though?  I suspect so, but I don&apos;t yet have the insight to see how."><a href="#t1489779517575203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:38:37</span>               mars0i </span><span>Is this possible in Specter?  Undoubtedly yes.  Is it possible more simply than without it, though?  I suspect so, but I don&apos;t yet have the insight to see how.</span></div><div id="t1489779611603099" t="2017-03-17 19:40:11 mars0i Actually I don&apos;t need amalloy&apos;s  empty?  test.  Just testing for  map?  is enough."><a href="#t1489779611603099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:40:11</span>               mars0i </span><span>Actually I don&apos;t need amalloy&apos;s </span><code>empty?</code><span> test.  Just testing for </span><code>map?</code><span> is enough.</span></div><div id="t1489780202778715" t="2017-03-17 19:50:02 nathanmarz @mars0i you can do that with value collection"><a href="#t1489780202778715" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:50:02</span>           nathanmarz </span><span>@mars0i you can do that with value collection</span></div><div id="t1489780203779202" t="2017-03-17 19:50:03 nathanmarz one sec"><a href="#t1489780203779202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:50:03</span>           nathanmarz </span><span>one sec</span></div><div id="t1489780330817414" t="2017-03-17 19:52:10 mars0i I have experimented with  VAL ,  collect ,  collect-one , but haven&apos;t figured out the magic configuration."><a href="#t1489780330817414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:52:10</span>               mars0i </span><span>I have experimented with </span><code>VAL</code><span>, </span><code>collect</code><span>, </span><code>collect-one</code><span>, but haven&apos;t figured out the magic configuration.</span></div><div id="t1489780349823488" t="2017-03-17 19:52:29 nathanmarz (defn keys-in [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL (collect-one FIRST) LAST p]
              STAY
              ))]
    (map butlast (select p m))
    ))
"><a href="#t1489780349823488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:52:29</span>           nathanmarz </span><pre>(defn keys-in [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL (collect-one FIRST) LAST p]
              STAY
              ))]
    (map butlast (select p m))
    ))
</pre></div><div id="t1489780353824688" t="2017-03-17 19:52:33 nathanmarz that&apos;s one way"><a href="#t1489780353824688" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:52:33</span>           nathanmarz </span><span>that&apos;s one way</span></div><div id="t1489780422844968" t="2017-03-17 19:53:42 mars0i Beautiful.  Thanks.  I&apos;ll digest that now."><a href="#t1489780422844968" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:53:42</span>               mars0i </span><span>Beautiful.  Thanks.  I&apos;ll digest that now.</span></div><div id="t1489780484864023" t="2017-03-17 19:54:44 nathanmarz here&apos;s another way:
 (defn keys-in [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL
               (if-path [LAST map?]
                [(collect-one FIRST) LAST p]
                FIRST
                )]))]
    (select p m)
    ))
"><a href="#t1489780484864023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:54:44</span>           nathanmarz </span><span>here&apos;s another way:
</span><pre>(defn keys-in [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL
               (if-path [LAST map?]
                [(collect-one FIRST) LAST p]
                FIRST
                )]))]
    (select p m)
    ))
</pre></div><div id="t1489780489865737" t="2017-03-17 19:54:49 nathanmarz more efficient"><a href="#t1489780489865737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:54:49</span>           nathanmarz </span><span>more efficient</span></div><div id="t1489780493866843" t="2017-03-17 19:54:53 mars0i I&apos;d like to have this added to that StackOverflow question.  I&apos;ll do it and credit you, if you want, but if you play SO and have time, you could get the points."><a href="#t1489780493866843" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:54:53</span>               mars0i </span><span>I&apos;d like to have this added to that StackOverflow question.  I&apos;ll do it and credit you, if you want, but if you play SO and have time, you could get the points.</span></div><div id="t1489780559887043" t="2017-03-17 19:55:59 nathanmarz go for it"><a href="#t1489780559887043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:55:59</span>           nathanmarz </span><span>go for it</span></div><div id="t1489780560887431" t="2017-03-17 19:56:00 mars0i Great.   more to digest ..."><a href="#t1489780560887431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:56:00</span>               mars0i </span><span>Great.   more to digest ...</span></div><div id="t1489780605901296" t="2017-03-17 19:56:45 mars0i OK, thanks much.  I think there ought to be a Specter solution there.  I&apos;ll add both.  I saw a discussion elsewhere someone trying to do this with Specter and gave up."><a href="#t1489780605901296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">19:56:45</span>               mars0i </span><span>OK, thanks much.  I think there ought to be a Specter solution there.  I&apos;ll add both.  I saw a discussion elsewhere someone trying to do this with Specter and gave up.</span></div><div id="t1489780944009889" t="2017-03-17 20:02:24 nathanmarz once your brain adapts to thinking in terms of navigation this is easy stuff"><a href="#t1489780944009889" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">20:02:24</span>           nathanmarz </span><span>once your brain adapts to thinking in terms of navigation this is easy stuff</span></div><div id="t1489781012030901" t="2017-03-17 20:03:32 mars0i I believe that.  Still getting there."><a href="#t1489781012030901" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">20:03:32</span>               mars0i </span><span>I believe that.  Still getting there.</span></div><div id="t1489781505178620" t="2017-03-17 20:11:45 mars0i i.e. the discussion elsewhere someone else gave up.  So it&apos;s not just me who thought of using Specter for this kind of thing."><a href="#t1489781505178620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">20:11:45</span>               mars0i </span><span>i.e. the discussion elsewhere someone else gave up.  So it&apos;s not just me who thought of using Specter for this kind of thing.</span></div><div id="t1489782533485482" t="2017-03-17 20:28:53 nathanmarz @mars0i also worth noting that the specter solution should be significantly more efficient than all the solutions on that page"><a href="#t1489782533485482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">20:28:53</span>           nathanmarz </span><span>@mars0i also worth noting that the specter solution should be significantly more efficient than all the solutions on that page</span></div><div id="t1489782598504899" t="2017-03-17 20:29:58 nathanmarz except for the amalloy one which is probably comparable"><a href="#t1489782598504899" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">20:29:58</span>           nathanmarz </span><span>except for the amalloy one which is probably comparable</span></div><div id="t1489786466537053" t="2017-03-17 21:34:26 mars0i I was wondering about that.  I&apos;ll run the specter defs through Criterium later.  I&apos;m using very small structures, so differences might not show up."><a href="#t1489786466537053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">21:34:26</span>               mars0i </span><span>I was wondering about that.  I&apos;ll run the specter defs through Criterium later.  I&apos;m using very small structures, so differences might not show up.</span></div><div id="t1489786524549621" t="2017-03-17 21:35:24 mars0i At some point I might randomly generate some large embedded maps just to see how the algorithms perform, but I don&apos;t have a need for large ones."><a href="#t1489786524549621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">21:35:24</span>               mars0i </span><span>At some point I might randomly generate some large embedded maps just to see how the algorithms perform, but I don&apos;t have a need for large ones.</span></div><div id="t1489787882835681" t="2017-03-17 21:58:02 nathanmarz @mars0i you should see a substantial difference"><a href="#t1489787882835681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">21:58:02</span>           nathanmarz </span><span>@mars0i you should see a substantial difference</span></div><div id="t1489807229698504" t="2017-03-18 03:20:29 mars0i nathanmarz or anyone else, I&apos;d like check my understanding of those keys-in functions from earlier if someone is willing.  Here are very informal explanations of the functions&apos; operations as I understand them.  This would help me understand some basic ideas of specter.  Specter&apos;s already been useful for me, but once I went beyond very simple things I was getting confused.  No need if you&apos;re not interested, too busy, etc."><a href="#t1489807229698504" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:20:29</span>               mars0i </span><span>nathanmarz or anyone else, I&apos;d like check my understanding of those keys-in functions from earlier if someone is willing.  Here are very informal explanations of the functions&apos; operations as I understand them.  This would help me understand some basic ideas of specter.  Specter&apos;s already been useful for me, but once I went beyond very simple things I was getting confused.  No need if you&apos;re not interested, too busy, etc.</span></div><div id="t1489807256699829" t="2017-03-18 03:20:56 mars0i (defn simple-keybranches [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL (collect-one FIRST) LAST p]
              STAY))]
    (map butlast (select p m))))
;; Explanation:
;; I&apos;m given a map of maps of ... and 
;; (A) since it&apos;s a map
;; it&apos;s passed to the first collection of navigators, which begins with ALL, so
;; for each MapEntry in the map
;; add its first element (key) to:
;; passing its last element (val) to ... now recurse (which is what p does),
;; i.e. for each of those map vals continue at (A)
;; 
;; On each of these branches, we eventually get to a non-map;
;; return it and stop processing on that branch (STAY).
;;
;; However, this last thing returned is not one of the keys, it&apos;s
;; the terminal val.  So we end up with the leaf vals in each
;; sequence.  To strip them out, map butlast over the entire result.
"><a href="#t1489807256699829" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:20:56</span>               mars0i </span><pre>(defn simple-keybranches [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL (collect-one FIRST) LAST p]
              STAY))]
    (map butlast (select p m))))
;; Explanation:
;; I&apos;m given a map of maps of ... and 
;; (A) since it&apos;s a map
;; it&apos;s passed to the first collection of navigators, which begins with ALL, so
;; for each MapEntry in the map
;; add its first element (key) to:
;; passing its last element (val) to ... now recurse (which is what p does),
;; i.e. for each of those map vals continue at (A)
;; 
;; On each of these branches, we eventually get to a non-map;
;; return it and stop processing on that branch (STAY).
;;
;; However, this last thing returned is not one of the keys, it&apos;s
;; the terminal val.  So we end up with the leaf vals in each
;; sequence.  To strip them out, map butlast over the entire result.
</pre></div><div id="t1489807281701134" t="2017-03-18 03:21:21 mars0i (defn faster-keybranches [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL
               (if-path [LAST map?]
                [(collect-one FIRST) LAST p]
                FIRST)]))]
    (select p m)))
;; Explanation:
;; I&apos;m given a map of maps of ... and 
;; (A) since it&apos;s a map
;; it&apos;s passed to ALL, i.e.
;; for each MapEntry e in the map,
;;   if e&apos;s val is also a map
;;     add its first element (key) to:
;;     passing its last element (val) to ... now recurse (which is what p does),
;;     i.e. for each of those map vals continue at (A)
;;   or if e&apos;s val is not a map, then
;;     get its first element, i.e. its key
;; On each of these branches, we eventually get to a non-map,
;; in which case stop processing on that branch and return nothing."><a href="#t1489807281701134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:21:21</span>               mars0i </span><pre>(defn faster-keybranches [m]
  (let [p (recursive-path [] p
            (if-path map?
              [ALL
               (if-path [LAST map?]
                [(collect-one FIRST) LAST p]
                FIRST)]))]
    (select p m)))
;; Explanation:
;; I&apos;m given a map of maps of ... and 
;; (A) since it&apos;s a map
;; it&apos;s passed to ALL, i.e.
;; for each MapEntry e in the map,
;;   if e&apos;s val is also a map
;;     add its first element (key) to:
;;     passing its last element (val) to ... now recurse (which is what p does),
;;     i.e. for each of those map vals continue at (A)
;;   or if e&apos;s val is not a map, then
;;     get its first element, i.e. its key
;; On each of these branches, we eventually get to a non-map,
;; in which case stop processing on that branch and return nothing.</pre></div><div id="t1489807386706026" t="2017-03-18 03:23:06 mars0i A question: Is the main reason that the first one should be faster is because the  butlast  is required to strip off the leaf elements?"><a href="#t1489807386706026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:23:06</span>               mars0i </span><span>A question: Is the main reason that the first one should be faster is because the </span><code>butlast</code><span> is required to strip off the leaf elements?</span></div><div id="t1489807466710016" t="2017-03-18 03:24:26 mars0i I actually want those!  I was trying to figure out how to get the key paths, and then figured it would be easy to add the leaf elements, but that seemed like an additional step, so I didn&apos;t mention it.  So I can just leave out the  butlast  for my application."><a href="#t1489807466710016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:24:26</span>               mars0i </span><span>I actually want those!  I was trying to figure out how to get the key paths, and then figured it would be easy to add the leaf elements, but that seemed like an additional step, so I didn&apos;t mention it.  So I can just leave out the </span><code>butlast</code><span> for my application.</span></div><div id="t1489807553714386" t="2017-03-18 03:25:53 mars0i So far it looks like there&apos;s no speed difference between the two specter definitions and the others for my small embedded maps, but that&apos;s not surprising.   I&apos;m curious to try it with a larger structure, though."><a href="#t1489807553714386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">03:25:53</span>               mars0i </span><span>So far it looks like there&apos;s no speed difference between the two specter definitions and the others for my small embedded maps, but that&apos;s not surprising.   I&apos;m curious to try it with a larger structure, though.</span></div><div id="t1489840816090783" t="2017-03-18 12:40:16 nathanmarz correct, that&apos;s why the  butlast  is there"><a href="#t1489840816090783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">12:40:16</span>           nathanmarz </span><span>correct, that&apos;s why the </span><code>butlast</code><span> is there</span></div><div id="t1489840860092911" t="2017-03-18 12:41:00 nathanmarz I&apos;ve had issues profiling with criterium before, I did Specter&apos;s benchmarks manually:  https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj"><a href="#t1489840860092911" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">12:41:00</span>           nathanmarz </span><span>I&apos;ve had issues profiling with criterium before, I did Specter&apos;s benchmarks manually: </span><a href="https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj" target="_blank">https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj</a></div><div id="t1489840915095473" t="2017-03-18 12:41:55 nathanmarz the first run through the specter code it&apos;s doing inline compilation/caching, so unless you look at the aggregate of many runs that will skew the results"><a href="#t1489840915095473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">12:41:55</span>           nathanmarz </span><span>the first run through the specter code it&apos;s doing inline compilation/caching, so unless you look at the aggregate of many runs that will skew the results</span></div><div id="t1489840930096131" t="2017-03-18 12:42:10 nathanmarz not sure if criterium handles that"><a href="#t1489840930096131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">12:42:10</span>           nathanmarz </span><span>not sure if criterium handles that</span></div><div id="t1489854476937886" t="2017-03-18 16:27:56 mars0i Yes, that&apos;s the point of Criterium--to do that for you.  It&apos;s supposed to run the code a bunch of times before starting timing, and then it reports average times from many runs.  It&apos;s also supposed to put garbage collection in a fresh state beforehand.  However, something&apos;s wrong with my testing.  All of the functions are just as fast with huge embedded maps as with small ones.  One has to worry about setting up tests in such a way that Java or Clojure optimizes them away.  It looks like what worked to avoid that in the past isn&apos;t working for me.  I have to investigate."><a href="#t1489854476937886" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">16:27:56</span>               mars0i </span><span>Yes, that&apos;s the point of Criterium--to do that for you.  It&apos;s supposed to run the code a bunch of times before starting timing, and then it reports average times from many runs.  It&apos;s also supposed to put garbage collection in a fresh state beforehand.  However, something&apos;s wrong with my testing.  All of the functions are just as fast with huge embedded maps as with small ones.  One has to worry about setting up tests in such a way that Java or Clojure optimizes them away.  It looks like what worked to avoid that in the past isn&apos;t working for me.  I have to investigate.</span></div><div id="t1489856006048011" t="2017-03-18 16:53:26 mars0i Halfway systematic testing by hand suggests that both specter keybranch functions are much faster on a large embedded map (800K paths) than all of the other definitions, except for miner49r&apos;s  reduce-kv  version, which has comparable speed."><a href="#t1489856006048011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">16:53:26</span>               mars0i </span><span>Halfway systematic testing by hand suggests that both specter keybranch functions are much faster on a large embedded map (800K paths) than all of the other definitions, except for miner49r&apos;s </span><code>reduce-kv</code><span> version, which has comparable speed.</span></div><div id="t1489856487083790" t="2017-03-18 17:01:27 mars0i amalloy&apos;s definition might be fastest on small maps, but my testing so far isn&apos;t rigorous enough to be sure."><a href="#t1489856487083790" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">17:01:27</span>               mars0i </span><span>amalloy&apos;s definition might be fastest on small maps, but my testing so far isn&apos;t rigorous enough to be sure.</span></div><div id="t1489858559225856" t="2017-03-18 17:35:59 nathanmarz ah yea, the  reduce-kv  version should be very fast"><a href="#t1489858559225856" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">17:35:59</span>           nathanmarz </span><span>ah yea, the </span><code>reduce-kv</code><span> version should be very fast</span></div><div id="t1489858588227812" t="2017-03-18 17:36:28 nathanmarz the amalloy one uses  for  on the map which adds a lot of overhead"><a href="#t1489858588227812" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">17:36:28</span>           nathanmarz </span><span>the amalloy one uses </span><code>for</code><span> on the map which adds a lot of overhead</span></div><div id="t1489858678233665" t="2017-03-18 17:37:58 nathanmarz for the first specter version you should wrap the  (map butlast ...)  in a  doall  so that the laziness doesn&apos;t avoid measurement"><a href="#t1489858678233665" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">17:37:58</span>           nathanmarz </span><span>for the first specter version you should wrap the </span><code>(map butlast ...)</code><span> in a </span><code>doall</code><span> so that the laziness doesn&apos;t avoid measurement</span></div><div id="t1489863065528985" t="2017-03-18 18:51:05 mars0i I&apos;m putting all of the results through  doall .  As far as I can tell, none of them produce lazy sequences for the internal sequences."><a href="#t1489863065528985" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">18:51:05</span>               mars0i </span><span>I&apos;m putting all of the results through </span><code>doall</code><span>.  As far as I can tell, none of them produce lazy sequences for the internal sequences.</span></div><div id="t1489864191601325" t="2017-03-18 19:09:51 mars0i Problem with Criterium was not optimization.  Foolish mistake I was quoting the code passed to Criterium&apos;s macro.  It&apos;s not supposed to be quoted."><a href="#t1489864191601325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-18</span> <span class="t" onclick="H(this)">19:09:51</span>               mars0i </span><span>Problem with Criterium was not optimization.  Foolish mistake I was quoting the code passed to Criterium&apos;s macro.  It&apos;s not supposed to be quoted.</span></div><div id="t1489900417316379" t="2017-03-19 05:13:37 mars0i I tested seven functions that extract all paths through on 3-level, 3 keys per level and 6-level, 6 keys per level embedded map structures.  The second Specter version above and miner49r&apos;s  reduce-kv  version are about the same speed, 2X (for the 3x3 map) and 3.5X (for the 6x6 map)  faster than any other  version.  Another illustration of Specter producing code that&apos;s as fast or faster than handwritten code.   It&apos;s very impressive.  (The first Specter version is about the same speed if I take out  map butlast .)  Full details about my tests are available here:  https://github.com/mars0i/key-path-tests"><a href="#t1489900417316379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-19</span> <span class="t" onclick="H(this)">05:13:37</span>               mars0i </span><span>I tested seven functions that extract all paths through on 3-level, 3 keys per level and 6-level, 6 keys per level embedded map structures.  The second Specter version above and miner49r&apos;s </span><code>reduce-kv</code><span> version are about the same speed, 2X (for the 3x3 map) and 3.5X (for the 6x6 map)  faster than any other  version.  Another illustration of Specter producing code that&apos;s as fast or faster than handwritten code.   It&apos;s very impressive.  (The first Specter version is about the same speed if I take out </span><code>map butlast</code><span>.)  Full details about my tests are available here: </span><a href="https://github.com/mars0i/key-path-tests" target="_blank">https://github.com/mars0i/key-path-tests</a></div><div id="t1489929905430313" t="2017-03-19 13:25:05 nathanmarz @mars0i nice work, thanks for investigating it"><a href="#t1489929905430313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-19</span> <span class="t" onclick="H(this)">13:25:05</span>           nathanmarz </span><span>@mars0i nice work, thanks for investigating it</span></div><div id="t1489970550034623" t="2017-03-20 00:42:30 mars0i Follow up question about generating paths of keys from embedded maps.  My leaf values are sequences of numbers.  If I use the first solution you gave, and don&apos;t strip out the values using  butlast , I almost get what I want:"><a href="#t1489970550034623" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">00:42:30</span>               mars0i </span><span>Follow up question about generating paths of keys from embedded maps.  My leaf values are sequences of numbers.  If I use the first solution you gave, and don&apos;t strip out the values using </span><code>butlast</code><span>, I almost get what I want:</span></div><div id="t1489970585037139" t="2017-03-20 00:43:05 mars0i (select (recursive-path [] p
           (if-path map?
             [ALL (collect-one FIRST) LAST p]
             STAY))
        {:a1 {:b1 [1 2 3]
              :b2 [3 4 5]}
         :a2 {:b2 [6 7 8]}})
;=&gt; [[:a1 :b1 [1 2 3]] [:a1 :b2 [3 4 5]] [:a2 :b2 [6 7 8]]]"><a href="#t1489970585037139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">00:43:05</span>               mars0i </span><pre>(select (recursive-path [] p
           (if-path map?
             [ALL (collect-one FIRST) LAST p]
             STAY))
        {:a1 {:b1 [1 2 3]
              :b2 [3 4 5]}
         :a2 {:b2 [6 7 8]}})
;=&gt; [[:a1 :b1 [1 2 3]] [:a1 :b2 [3 4 5]] [:a2 :b2 [6 7 8]]]</pre></div><div id="t1489970729047584" t="2017-03-20 00:45:29 mars0i What I want is  [[:a1 :b1 1 2 3] [:a1 :b2 3 4 5] [:a2 :b2 6 7 8]] .  I&apos;ve been trying to figure out how to do this in specter.  Of course it&apos;s easy to fix in core Clojure afterwards.  If I replace  STAY  with  ALL , I get a separate path vector for each of the numbers in the leaf vectors.  Other things I&apos;ve tried either produce one of these two results, or error.  Thanks again for any help."><a href="#t1489970729047584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">00:45:29</span>               mars0i </span><span>What I want is </span><code>[[:a1 :b1 1 2 3] [:a1 :b2 3 4 5] [:a2 :b2 6 7 8]]</code><span>.  I&apos;ve been trying to figure out how to do this in specter.  Of course it&apos;s easy to fix in core Clojure afterwards.  If I replace </span><code>STAY</code><span> with </span><code>ALL</code><span>, I get a separate path vector for each of the numbers in the leaf vectors.  Other things I&apos;ve tried either produce one of these two results, or error.  Thanks again for any help.</span></div><div id="t1489975942446220" t="2017-03-20 02:12:22 nathanmarz @mars0i for that it&apos;s best to just fix it after the selection, with regular clojure or a  transform  call"><a href="#t1489975942446220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">02:12:22</span>           nathanmarz </span><span>@mars0i for that it&apos;s best to just fix it after the selection, with regular clojure or a </span><code>transform</code><span> call</span></div><div id="t1489976003451129" t="2017-03-20 02:13:23 nathanmarz it&apos;s possible to do it in one path with specter&apos;s zipper integration, but it won&apos;t be particularly elegant"><a href="#t1489976003451129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">02:13:23</span>           nathanmarz </span><span>it&apos;s possible to do it in one path with specter&apos;s zipper integration, but it won&apos;t be particularly elegant</span></div><div id="t1489982225953802" t="2017-03-20 03:57:05 mars0i OK, thanks very much.    Yeah, I&apos;d rather avoid zippers if I can."><a href="#t1489982225953802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">03:57:05</span>               mars0i </span><span>OK, thanks very much.    Yeah, I&apos;d rather avoid zippers if I can.</span></div><div id="t1490048133196018" t="2017-03-20 22:15:33 spieden thought i’d share a satisfying solution i was just able to rattle off for extracting some information using specter  (spr/select [:Resources spr/ALL (spr/collect spr/FIRST) spr/LAST :Properties :ContainerDefinitions spr/ALL :Environment spr/ALL (spr/selected? :Name #(= % &quot;REFERENCE_DATASET&quot;)) :Value] t)  (i’m on an old version still)"><a href="#t1490048133196018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-20</span> <span class="t" onclick="H(this)">22:15:33</span>              spieden </span><span>thought i’d share a satisfying solution i was just able to rattle off for extracting some information using specter </span><code>(spr/select [:Resources spr/ALL (spr/collect spr/FIRST) spr/LAST :Properties :ContainerDefinitions spr/ALL :Environment spr/ALL (spr/selected? :Name #(= % &quot;REFERENCE_DATASET&quot;)) :Value] t)</code><span> (i’m on an old version still)</span></div><div id="t1490105797325289" t="2017-03-21 14:16:37 luxbock what&apos;s wrong with my implementation of a  take-nth  navigator:  https://gist.github.com/luxbock/a6a1323497a02e36b09dec624c57b3ab  ?"><a href="#t1490105797325289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">14:16:37</span>              luxbock </span><span>what&apos;s wrong with my implementation of a </span><code>take-nth</code><span> navigator: </span><a href="https://gist.github.com/luxbock/a6a1323497a02e36b09dec624c57b3ab" target="_blank">https://gist.github.com/luxbock/a6a1323497a02e36b09dec624c57b3ab</a><span> ?</span></div><div id="t1490105842342799" t="2017-03-21 14:17:22 luxbock I am using  (:refer-clojure :exclude [take-nth])  so it&apos;s not colliding with the  clojure.core  version"><a href="#t1490105842342799" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">14:17:22</span>              luxbock </span><span>I am using </span><code>(:refer-clojure :exclude [take-nth])</code><span> so it&apos;s not colliding with the </span><code>clojure.core</code><span> version</span></div><div id="t1490105862350982" t="2017-03-21 14:17:42 luxbock using  transform  works fine"><a href="#t1490105862350982" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">14:17:42</span>              luxbock </span><span>using </span><code>transform</code><span> works fine</span></div><div id="t1490106431585123" t="2017-03-21 14:27:11 luxbock argh, I&apos;m an idiot, of course I&apos;m calling  take-nth  inside my  select*"><a href="#t1490106431585123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">14:27:11</span>              luxbock </span><span>argh, I&apos;m an idiot, of course I&apos;m calling </span><code>take-nth</code><span> inside my </span><code>select*</code></div><div id="t1490112189142917" t="2017-03-21 16:03:09 luxbock if I want my navigators to respect  NONE  do I need to implement that for every navigator?"><a href="#t1490112189142917" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:03:09</span>              luxbock </span><span>if I want my navigators to respect </span><code>NONE</code><span> do I need to implement that for every navigator?</span></div><div id="t1490112272180172" t="2017-03-21 16:04:32 nathanmarz @luxbock yes"><a href="#t1490112272180172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:04:32</span>           nathanmarz </span><span>@luxbock yes</span></div><div id="t1490112311197265" t="2017-03-21 16:05:11 luxbock is that something that could be done automatically for me, or am I missing something obvious?"><a href="#t1490112311197265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:05:11</span>              luxbock </span><span>is that something that could be done automatically for me, or am I missing something obvious?</span></div><div id="t1490112334207557" t="2017-03-21 16:05:34 nathanmarz how to handle transformations to  NONE  is completely navigator specific"><a href="#t1490112334207557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:05:34</span>           nathanmarz </span><span>how to handle transformations to </span><code>NONE</code><span> is completely navigator specific</span></div><div id="t1490112367221718" t="2017-03-21 16:06:07 nathanmarz for  keypath  it does a  dissoc , for  ALL  it filters it from reconstruction, for  nthpath  it removes from the sequence, etc."><a href="#t1490112367221718" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:06:07</span>           nathanmarz </span><span>for </span><code>keypath</code><span> it does a </span><code>dissoc</code><span>, for </span><code>ALL</code><span> it filters it from reconstruction, for </span><code>nthpath</code><span> it removes from the sequence, etc.</span></div><div id="t1490112402237202" t="2017-03-21 16:06:42 luxbock right, makes sense"><a href="#t1490112402237202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:06:42</span>              luxbock </span><span>right, makes sense</span></div><div id="t1490112499278543" t="2017-03-21 16:08:19 nathanmarz looking at how those navigators implement it would be instructive I think"><a href="#t1490112499278543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:08:19</span>           nathanmarz </span><span>looking at how those navigators implement it would be instructive I think</span></div><div id="t1490112588315781" t="2017-03-21 16:09:48 luxbock what is the extra argument  vals  that  defrichnav  uses for select and transform?"><a href="#t1490112588315781" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:09:48</span>              luxbock </span><span>what is the extra argument </span><code>vals</code><span> that </span><code>defrichnav</code><span> uses for select and transform?</span></div><div id="t1490112610325148" t="2017-03-21 16:10:10 nathanmarz those are the collected values"><a href="#t1490112610325148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:10:10</span>           nathanmarz </span><span>those are the collected values</span></div><div id="t1490112626330738" t="2017-03-21 16:10:26 nathanmarz like from  collect ,  collect-one"><a href="#t1490112626330738" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:10:26</span>           nathanmarz </span><span>like from </span><code>collect</code><span>, </span><code>collect-one</code></div><div id="t1490112677352987" t="2017-03-21 16:11:17 luxbock ah I see, thanks"><a href="#t1490112677352987" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:11:17</span>              luxbock </span><span>ah I see, thanks</span></div><div id="t1490112736377545" t="2017-03-21 16:12:16 nathanmarz navigators that need to be defined using  defrichnav  are special cases"><a href="#t1490112736377545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:12:16</span>           nathanmarz </span><span>navigators that need to be defined using </span><code>defrichnav</code><span> are special cases</span></div><div id="t1490112771393066" t="2017-03-21 16:12:51 nathanmarz keypath  does it as an optimization since Clojure/JVM aren&apos;t smart enough to inline this particular case"><a href="#t1490112771393066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:12:51</span>           nathanmarz </span><code>keypath</code><span> does it as an optimization since Clojure/JVM aren&apos;t smart enough to inline this particular case</span></div><div id="t1490113099530171" t="2017-03-21 16:18:19 luxbock I&apos;m trying to figure out how I could implement  every-nth  that respects  NONE  but it feels very difficult:  https://gist.github.com/luxbock/69b766830144e4bdb767923ba7fb2f9c"><a href="#t1490113099530171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:18:19</span>              luxbock </span><span>I&apos;m trying to figure out how I could implement </span><code>every-nth</code><span> that respects </span><code>NONE</code><span> but it feels very difficult: </span><a href="https://gist.github.com/luxbock/69b766830144e4bdb767923ba7fb2f9c" target="_blank">https://gist.github.com/luxbock/69b766830144e4bdb767923ba7fb2f9c</a></div><div id="t1490113193569947" t="2017-03-21 16:19:53 nathanmarz you&apos;ll need a totally different approach"><a href="#t1490113193569947" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:19:53</span>           nathanmarz </span><span>you&apos;ll need a totally different approach</span></div><div id="t1490113201573123" t="2017-03-21 16:20:01 nathanmarz better to construct a new vector from scratch"><a href="#t1490113201573123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:20:01</span>           nathanmarz </span><span>better to construct a new vector from scratch</span></div><div id="t1490113227584963" t="2017-03-21 16:20:27 nathanmarz elements that aren&apos;t at the nth indices go in unchanged, and for the others you apply next-fn and filter out ones that transform to  NONE"><a href="#t1490113227584963" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:20:27</span>           nathanmarz </span><span>elements that aren&apos;t at the nth indices go in unchanged, and for the others you apply next-fn and filter out ones that transform to </span><code>NONE</code></div><div id="t1490113235588499" t="2017-03-21 16:20:35 nathanmarz something similar for lists"><a href="#t1490113235588499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:20:35</span>           nathanmarz </span><span>something similar for lists</span></div><div id="t1490113244592385" t="2017-03-21 16:20:44 nathanmarz that&apos;s basically how  ALL  works"><a href="#t1490113244592385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:20:44</span>           nathanmarz </span><span>that&apos;s basically how </span><code>ALL</code><span> works</span></div><div id="t1490113280607715" t="2017-03-21 16:21:20 luxbock yeah, I&apos;m trying to learn from the specter native navigators but they are so heavily optimized that it&apos;s taking some time  🙂"><a href="#t1490113280607715" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:21:20</span>              luxbock </span><span>yeah, I&apos;m trying to learn from the specter native navigators but they are so heavily optimized that it&apos;s taking some time </span><b>🙂</b></div><div id="t1490113319623907" t="2017-03-21 16:21:59 nathanmarz ALL  on vectors is pretty simple  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L94"><a href="#t1490113319623907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:21:59</span>           nathanmarz </span><code>ALL</code><span> on vectors is pretty simple </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L94" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L94</a></div><div id="t1490113347635498" t="2017-03-21 16:22:27 nathanmarz you should be able to do something very similar"><a href="#t1490113347635498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:22:27</span>           nathanmarz </span><span>you should be able to do something very similar</span></div><div id="t1490113390653274" t="2017-03-21 16:23:10 luxbock yeah, I&apos;ll keep trying, seems like an appropriately challenging example for me to level up on"><a href="#t1490113390653274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:23:10</span>              luxbock </span><span>yeah, I&apos;ll keep trying, seems like an appropriately challenging example for me to level up on</span></div><div id="t1490113413663268" t="2017-03-21 16:23:33 nathanmarz lists are a little trickier due to needing to maintain order  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L71"><a href="#t1490113413663268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:23:33</span>           nathanmarz </span><span>lists are a little trickier due to needing to maintain order </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L71" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/navs.cljc#L71</a></div><div id="t1490113450678613" t="2017-03-21 16:24:10 nathanmarz looks like you&apos;re understanding how navs work pretty well"><a href="#t1490113450678613" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:24:10</span>           nathanmarz </span><span>looks like you&apos;re understanding how navs work pretty well</span></div><div id="t1490113503700994" t="2017-03-21 16:25:03 luxbock do you see specter still adding more navigators (such as these) or would you rather people see publish them as utility libraries?"><a href="#t1490113503700994" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:25:03</span>              luxbock </span><span>do you see specter still adding more navigators (such as these) or would you rather people see publish them as utility libraries?</span></div><div id="t1490113633755552" t="2017-03-21 16:27:13 luxbock I think it&apos;s easy enough to write navigators that are very naive, but making them highly performant, versatile (in support for all possible datastructures) and respecting  NONE  is a lot of work, so I would definitely be happy to share the workload with others"><a href="#t1490113633755552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:27:13</span>              luxbock </span><span>I think it&apos;s easy enough to write navigators that are very naive, but making them highly performant, versatile (in support for all possible datastructures) and respecting </span><code>NONE</code><span> is a lot of work, so I would definitely be happy to share the workload with others</span></div><div id="t1490114090946690" t="2017-03-21 16:34:50 luxbock I remember a while back you mentioned that transducers that use  comp  are in some cases slower than just writing the same tranformation sequentially, because of the overhead of  comp , and you could improve the performance by pre-compiling the composed transducer"><a href="#t1490114090946690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:34:50</span>              luxbock </span><span>I remember a while back you mentioned that transducers that use </span><code>comp</code><span> are in some cases slower than just writing the same tranformation sequentially, because of the overhead of </span><code>comp</code><span>, and you could improve the performance by pre-compiling the composed transducer</span></div><div id="t1490114153972689" t="2017-03-21 16:35:53 luxbock how would one compile a transducer, if I already know what it should do and don&apos;t need to compose it further using other transducers?"><a href="#t1490114153972689" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:35:53</span>              luxbock </span><span>how would one compile a transducer, if I already know what it should do and don&apos;t need to compose it further using other transducers?</span></div><div id="t1490114394070371" t="2017-03-21 16:39:54 luxbock this seems to work and looks a lot better:  https://gist.github.com/luxbock/33fecd25fce1ea91412ff86fb4df1e83"><a href="#t1490114394070371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:39:54</span>              luxbock </span><span>this seems to work and looks a lot better: </span><a href="https://gist.github.com/luxbock/33fecd25fce1ea91412ff86fb4df1e83" target="_blank">https://gist.github.com/luxbock/33fecd25fce1ea91412ff86fb4df1e83</a></div><div id="t1490114631166509" t="2017-03-21 16:43:51 nathanmarz @luxbock these don&apos;t seem core enough to me to go into specter core"><a href="#t1490114631166509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:43:51</span>           nathanmarz </span><span>@luxbock these don&apos;t seem core enough to me to go into specter core</span></div><div id="t1490114669181813" t="2017-03-21 16:44:29 nathanmarz also some of these may be superseded by stateful navigators if that&apos;s ever implemented  https://github.com/nathanmarz/specter/issues/121"><a href="#t1490114669181813" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:44:29</span>           nathanmarz </span><span>also some of these may be superseded by stateful navigators if that&apos;s ever implemented </span><a href="https://github.com/nathanmarz/specter/issues/121" target="_blank">https://github.com/nathanmarz/specter/issues/121</a></div><div id="t1490114707197297" t="2017-03-21 16:45:07 nathanmarz not sure I understand your question about transducers"><a href="#t1490114707197297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:45:07</span>           nathanmarz </span><span>not sure I understand your question about transducers</span></div><div id="t1490114721202958" t="2017-03-21 16:45:21 nathanmarz you precompile by calling  comp  in a central spot"><a href="#t1490114721202958" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:45:21</span>           nathanmarz </span><span>you precompile by calling </span><code>comp</code><span> in a central spot</span></div><div id="t1490114751215555" t="2017-03-21 16:45:51 nathanmarz the problem is you can&apos;t precompile anything that requires the dynamic context (like local variables)"><a href="#t1490114751215555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:45:51</span>           nathanmarz </span><span>the problem is you can&apos;t precompile anything that requires the dynamic context (like local variables)</span></div><div id="t1490114771223823" t="2017-03-21 16:46:11 nathanmarz e.g.  (comp (map some-local-arg) (filter even?))"><a href="#t1490114771223823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:46:11</span>           nathanmarz </span><span>e.g. </span><code>(comp (map some-local-arg) (filter even?))</code></div><div id="t1490114836250299" t="2017-03-21 16:47:16 nathanmarz the best you can do is precompile sequences of static transducers for reuse"><a href="#t1490114836250299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:47:16</span>           nathanmarz </span><span>the best you can do is precompile sequences of static transducers for reuse</span></div><div id="t1490114866262780" t="2017-03-21 16:47:46 nathanmarz in theory, transducers could use a similar inline compilation/caching strategy as specter to make this automatic"><a href="#t1490114866262780" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:47:46</span>           nathanmarz </span><span>in theory, transducers could use a similar inline compilation/caching strategy as specter to make this automatic</span></div><div id="t1490114981309988" t="2017-03-21 16:49:41 luxbock I see, yeah stateful navigators look very interesting"><a href="#t1490114981309988" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-21</span> <span class="t" onclick="H(this)">16:49:41</span>              luxbock </span><span>I see, yeah stateful navigators look very interesting</span></div><div id="t1490205241353381" t="2017-03-22 17:54:01 conaw just had an idea that might be useful for some folks here… the new CSS Grid Module that just shipped in browsers has a feature called “grid-template-areas” which lets you build up an ascii-art style layout and then apply items to that layout according to names"><a href="#t1490205241353381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-22</span> <span class="t" onclick="H(this)">17:54:01</span>                conaw </span><span>just had an idea that might be useful for some folks here… the new CSS Grid Module that just shipped in browsers has a feature called “grid-template-areas” which lets you build up an ascii-art style layout and then apply items to that layout according to names</span></div><div id="t1490205304379129" t="2017-03-22 17:55:04 conaw so you’d have 
 ” ‘header header header’ 
‘sidebar content ads&apos;
&apos;footer footer footer’&quot;
"><a href="#t1490205304379129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-22</span> <span class="t" onclick="H(this)">17:55:04</span>                conaw </span><span>so you’d have 
</span><pre>” ‘header header header’ 
‘sidebar content ads&apos;
&apos;footer footer footer’&quot;
</pre></div><div id="t1490205364404396" t="2017-03-22 17:56:04 conaw I’ve been thinking about how I might dynamically generate certain named layouts based on content and user actions, realized specter could be used for doing things like inserting columns"><a href="#t1490205364404396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-22</span> <span class="t" onclick="H(this)">17:56:04</span>                conaw </span><span>I’ve been thinking about how I might dynamically generate certain named layouts based on content and user actions, realized specter could be used for doing things like inserting columns</span></div><div id="t1490207184135470" t="2017-03-22 18:26:24 conaw http://gridbyexample.com/video/grid-template-areas/"><a href="#t1490207184135470" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-22</span> <span class="t" onclick="H(this)">18:26:24</span>                conaw </span><a href="http://gridbyexample.com/video/grid-template-areas/" target="_blank">http://gridbyexample.com/video/grid-template-areas/</a></div><div id="t1490207204144013" t="2017-03-22 18:26:44 conaw (def a (for [x (range 6)]
         (for [y (range 6)]
           y
           )
         ))

(sp/setval [(sp/srange 0 3) ALL
            (sp/srange 4 5) ALL] :a
a
          )
"><a href="#t1490207204144013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-22</span> <span class="t" onclick="H(this)">18:26:44</span>                conaw </span><pre>(def a (for [x (range 6)]
         (for [y (range 6)]
           y
           )
         ))

(sp/setval [(sp/srange 0 3) ALL
            (sp/srange 4 5) ALL] :a
a
          )
</pre></div><div id="t1490302980008297" t="2017-03-23 21:03:00 mmer Hi I have an question about adding a entry to a map based on the existence of a string within a value of a particular entry in the map:"><a href="#t1490302980008297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:03:00</span>                 mmer </span><span>Hi I have an question about adding a entry to a map based on the existence of a string within a value of a particular entry in the map:</span></div><div id="t1490303262103774" t="2017-03-23 21:07:42 mmer I want to do a transform that removes the (read-only) from the desc fields
  and adds a map entry read-only: true to the map that contains the desc.
  
  I tried using the walker and predicate to find the entries with the (read-only) string
  the problem I have is that I can&apos;t find a way to create a transform that adds the entry.
  
  Removing the string is a bonus and I would be happy just to do the add."><a href="#t1490303262103774" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:07:42</span>                 mmer </span><span>I want to do a transform that removes the (read-only) from the desc fields
  and adds a map entry read-only: true to the map that contains the desc.
  
  I tried using the walker and predicate to find the entries with the (read-only) string
  the problem I have is that I can&apos;t find a way to create a transform that adds the entry.
  
  Removing the string is a bonus and I would be happy just to do the add.</span></div><div id="t1490304630537752" t="2017-03-23 21:30:30 nathanmarz @mmer not understanding your input"><a href="#t1490304630537752" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:30:30</span>           nathanmarz </span><span>@mmer not understanding your input</span></div><div id="t1490304640540612" t="2017-03-23 21:30:40 nathanmarz it&apos;s not a map, did you mean to have a vector of maps?"><a href="#t1490304640540612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:30:40</span>           nathanmarz </span><span>it&apos;s not a map, did you mean to have a vector of maps?</span></div><div id="t1490304651544159" t="2017-03-23 21:30:51 nathanmarz what&apos;s &quot;type&quot; and &quot;desc&quot;? strings?"><a href="#t1490304651544159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:30:51</span>           nathanmarz </span><span>what&apos;s &quot;type&quot; and &quot;desc&quot;? strings?</span></div><div id="t1490304655545219" t="2017-03-23 21:30:55 nathanmarz same with their values"><a href="#t1490304655545219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:30:55</span>           nathanmarz </span><span>same with their values</span></div><div id="t1490304736570240" t="2017-03-23 21:32:16 nathanmarz you want to convert maps containing a description containing  &quot;(read-only)&quot;  to one with key/value pair of  :read-only true  and with the  (&quot;read-only&quot;)  removed?"><a href="#t1490304736570240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">21:32:16</span>           nathanmarz </span><span>you want to convert maps containing a description containing </span><code>&quot;(read-only)&quot;</code><span> to one with key/value pair of </span><code>:read-only true</code><span> and with the </span><code>(&quot;read-only&quot;)</code><span> removed?</span></div><div id="t1490307520292845" t="2017-03-23 22:18:40 mmer Sorry I missed the key in the outside map  now edited as it is"><a href="#t1490307520292845" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:18:40</span>                 mmer </span><span>Sorry I missed the key in the outside map  now edited as it is</span></div><div id="t1490307617314133" t="2017-03-23 22:20:17 mmer target:"><a href="#t1490307617314133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:20:17</span>                 mmer </span><span>target:</span></div><div id="t1490307734340329" t="2017-03-23 22:22:14 nathanmarz ok, I&apos;ll just assume the keys are keywords and the value for properties is a sequence"><a href="#t1490307734340329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:22:14</span>           nathanmarz </span><span>ok, I&apos;ll just assume the keys are keywords and the value for properties is a sequence</span></div><div id="t1490307861368801" t="2017-03-23 22:24:21 nathanmarz it would look something like:
 (multi-transform [:properties 
                  ALL
                  (selected? :desc #(.contains % &quot;(read-only&quot;)))
                  (multi-path [:desc (terminal remove-read-only-str)]
                              [:read-only (terminal-val true)])] 
         data)
"><a href="#t1490307861368801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:24:21</span>           nathanmarz </span><span>it would look something like:
</span><pre>(multi-transform [:properties 
                  ALL
                  (selected? :desc #(.contains % &quot;(read-only&quot;)))
                  (multi-path [:desc (terminal remove-read-only-str)]
                              [:read-only (terminal-val true)])] 
         data)
</pre></div><div id="t1490308039408074" t="2017-03-23 22:27:19 nathanmarz with  https://github.com/nathanmarz/specter/issues/183  you could do this without any custom or anonymous functions"><a href="#t1490308039408074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:27:19</span>           nathanmarz </span><span>with </span><a href="https://github.com/nathanmarz/specter/issues/183" target="_blank">https://github.com/nathanmarz/specter/issues/183</a><span> you could do this without any custom or anonymous functions</span></div><div id="t1490308092419352" t="2017-03-23 22:28:12 nathanmarz by replacing the anonymous function with  (regex-all #&quot;(read-only)&quot;)  and replacing  remove-read-only-str  custom function with  (regex-all #&quot;(read-only)&quot;) (terminal-val &quot;&quot;)"><a href="#t1490308092419352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:28:12</span>           nathanmarz </span><span>by replacing the anonymous function with </span><code>(regex-all #&quot;(read-only)&quot;)</code><span> and replacing </span><code>remove-read-only-str</code><span> custom function with </span><code>(regex-all #&quot;(read-only)&quot;) (terminal-val &quot;&quot;)</code></div><div id="t1490308439494741" t="2017-03-23 22:33:59 mmer Thanks once again"><a href="#t1490308439494741" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:33:59</span>                 mmer </span><span>Thanks once again</span></div><div id="t1490308539515696" t="2017-03-23 22:35:39 mmer I am rather puzzled by the #anglican?  I presume that is slack getting in the way?"><a href="#t1490308539515696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:35:39</span>                 mmer </span><span>I am rather puzzled by the #anglican?  I presume that is slack getting in the way?</span></div><div id="t1490309014614706" t="2017-03-23 22:43:34 nathanmarz hmm not sure why it did that"><a href="#t1490309014614706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:43:34</span>           nathanmarz </span><span>hmm not sure why it did that</span></div><div id="t1490309016614979" t="2017-03-23 22:43:36 nathanmarz fixed it"><a href="#t1490309016614979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">22:43:36</span>           nathanmarz </span><span>fixed it</span></div><div id="t1490312668279557" t="2017-03-23 23:44:28 mmer Thanks I do have a followup question - if you change :properties with ALL I get a NullPointerException - in fact any changes to the :properties ALL seems to result in the same exception"><a href="#t1490312668279557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:44:28</span>                 mmer </span><span>Thanks I do have a followup question - if you change :properties with ALL I get a NullPointerException - in fact any changes to the :properties ALL seems to result in the same exception</span></div><div id="t1490312744291951" t="2017-03-23 23:45:44 nathanmarz well,  ALL  on a map navigates you to a vector of  [key value]"><a href="#t1490312744291951" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:45:44</span>           nathanmarz </span><span>well, </span><code>ALL</code><span> on a map navigates you to a vector of </span><code>[key value]</code></div><div id="t1490312759294255" t="2017-03-23 23:45:59 nathanmarz the next  ALL  navigates you to each  key  and  value"><a href="#t1490312759294255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:45:59</span>           nathanmarz </span><span>the next </span><code>ALL</code><span> navigates you to each </span><code>key</code><span> and </span><code>value</code></div><div id="t1490312781297755" t="2017-03-23 23:46:21 nathanmarz then the  selected?  line navigates to  :desc  for each of those values, which in some cases is nil"><a href="#t1490312781297755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:46:21</span>           nathanmarz </span><span>then the </span><code>selected?</code><span> line navigates to </span><code>:desc</code><span> for each of those values, which in some cases is nil</span></div><div id="t1490312793299675" t="2017-03-23 23:46:33 nathanmarz so doing  .contains  on nil will be a  NullPointedException"><a href="#t1490312793299675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:46:33</span>           nathanmarz </span><span>so doing </span><code>.contains</code><span> on nil will be a </span><code>NullPointedException</code></div><div id="t1490312918319716" t="2017-03-23 23:48:38 nathanmarz you probably wanted to replace  :properties  with  MAP-VALS , but I&apos;m not sure since your input data still isn&apos;t clear"><a href="#t1490312918319716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-23</span> <span class="t" onclick="H(this)">23:48:38</span>           nathanmarz </span><span>you probably wanted to replace </span><code>:properties</code><span> with </span><code>MAP-VALS</code><span>, but I&apos;m not sure since your input data still isn&apos;t clear</span></div><div id="t1490324291804096" t="2017-03-24 02:58:11 snacks hi:  If i have a nested map like this map1   {:a [{:b 1 c:3} {:b 2  c:0}] :b 0 }    I need to update  :b   key based on the  :c   from one of these nested maps under  :a  and I have a filter function fn1 to select it based on  :c  value . is this the right way to do it?
 (transform [(collect :a ALL (selected? [:c ?fn1]) :b) :b] (fn [new old] new) map1)"><a href="#t1490324291804096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">02:58:11</span>               snacks </span><span>hi:  If i have a nested map like this map1 </span><code> {:a [{:b 1 c:3} {:b 2  c:0}] :b 0 } </code><span>  I need to update </span><code>:b</code><span>  key based on the </span><code>:c</code><span>  from one of these nested maps under </span><code>:a</code><span> and I have a filter function fn1 to select it based on </span><code>:c</code><span> value . is this the right way to do it?
</span><pre>(transform [(collect :a ALL (selected? [:c ?fn1]) :b) :b] (fn [new old] new) map1)</pre></div><div id="t1490324433822261" t="2017-03-24 03:00:33 nathanmarz the code isn&apos;t matching up with your description"><a href="#t1490324433822261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:00:33</span>           nathanmarz </span><span>the code isn&apos;t matching up with your description</span></div><div id="t1490324458825580" t="2017-03-24 03:00:58 nathanmarz the code is collecting  :b  values, not  :c  values"><a href="#t1490324458825580" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:00:58</span>           nathanmarz </span><span>the code is collecting </span><code>:b</code><span> values, not </span><code>:c</code><span> values</span></div><div id="t1490324519832815" t="2017-03-24 03:01:59 nathanmarz you&apos;re also collecting a sequence of values, not &quot;one of&quot; the values"><a href="#t1490324519832815" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:01:59</span>           nathanmarz </span><span>you&apos;re also collecting a sequence of values, not &quot;one of&quot; the values</span></div><div id="t1490324771861180" t="2017-03-24 03:06:11 snacks yes it is collecting  :b  value, but using   :c  values to select which map to collect  :b  values from. so if fn1 is  ??even  it will return [1] while  ?odd  will return [2]."><a href="#t1490324771861180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:06:11</span>               snacks </span><span>yes it is collecting </span><code>:b</code><span> value, but using  </span><code>:c</code><span> values to select which map to collect </span><code>:b</code><span> values from. so if fn1 is </span><code>??even</code><span> it will return [1] while </span><code>?odd</code><span> will return [2].</span></div><div id="t1490324918877378" t="2017-03-24 03:08:38 nathanmarz I think you have that reversed"><a href="#t1490324918877378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:08:38</span>           nathanmarz </span><span>I think you have that reversed</span></div><div id="t1490324932878823" t="2017-03-24 03:08:52 nathanmarz if fn1 is  odd?  it will collect  [1]"><a href="#t1490324932878823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:08:52</span>           nathanmarz </span><span>if fn1 is </span><code>odd?</code><span> it will collect </span><code>[1]</code></div><div id="t1490324970882835" t="2017-03-24 03:09:30 nathanmarz but yea, the code looks correct as long as you&apos;re looking to set  :b  in the top-level map to a sequence"><a href="#t1490324970882835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:09:30</span>           nathanmarz </span><span>but yea, the code looks correct as long as you&apos;re looking to set </span><code>:b</code><span> in the top-level map to a sequence</span></div><div id="t1490324986884491" t="2017-03-24 03:09:46 nathanmarz also you don&apos;t need the  [...]  in  selected?"><a href="#t1490324986884491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:09:46</span>           nathanmarz </span><span>also you don&apos;t need the </span><code>[...]</code><span> in </span><code>selected?</code></div><div id="t1490324996885730" t="2017-03-24 03:09:56 nathanmarz (selected? :c fn1)"><a href="#t1490324996885730" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:09:56</span>           nathanmarz </span><code>(selected? :c fn1)</code></div><div id="t1490325001886304" t="2017-03-24 03:10:01 snacks ok thanks"><a href="#t1490325001886304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:10:01</span>               snacks </span><span>ok thanks</span></div><div id="t1490325011887492" t="2017-03-24 03:10:11 snacks you can use setval with collect?"><a href="#t1490325011887492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:10:11</span>               snacks </span><span>you can use setval with collect?</span></div><div id="t1490325018888381" t="2017-03-24 03:10:18 nathanmarz no"><a href="#t1490325018888381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:10:18</span>           nathanmarz </span><span>no</span></div><div id="t1490325023888929" t="2017-03-24 03:10:23 snacks ok"><a href="#t1490325023888929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:10:23</span>               snacks </span><span>ok</span></div><div id="t1490325054892287" t="2017-03-24 03:10:54 nathanmarz I mean, it will execute but collected values will be ignored"><a href="#t1490325054892287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">03:10:54</span>           nathanmarz </span><span>I mean, it will execute but collected values will be ignored</span></div><div id="t1490360861736252" t="2017-03-24 13:07:41 borkdude How do I prune a map in specter? select only selects the values, but I want something like a recursive  select-keys . I can’t find a good example of this on the wiki"><a href="#t1490360861736252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">13:07:41</span>             borkdude </span><span>How do I prune a map in specter? select only selects the values, but I want something like a recursive </span><code>select-keys</code><span>. I can’t find a good example of this on the wiki</span></div><div id="t1490361558936220" t="2017-03-24 13:19:18 nathanmarz @borkdude you can do something like this:
 (def data {:a {:a 1 :b 2 :c 3} :b {:a 1 :b 2 :c 3 :d 4} :c {:a 1}})

(def ALL-MAPS
  (recursive-path [] p
    (if-path map?
      (stay-then-continue
        MAP-VALS p)
      )))

(transform ALL-MAPS #(select-keys % [:a :b]) data)
;; =&gt; {:a {:a 1, :b 2}, :b {:a 1, :b 2}}
"><a href="#t1490361558936220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">13:19:18</span>           nathanmarz </span><span>@borkdude you can do something like this:
</span><pre>(def data {:a {:a 1 :b 2 :c 3} :b {:a 1 :b 2 :c 3 :d 4} :c {:a 1}})

(def ALL-MAPS
  (recursive-path [] p
    (if-path map?
      (stay-then-continue
        MAP-VALS p)
      )))

(transform ALL-MAPS #(select-keys % [:a :b]) data)
;; =&gt; {:a {:a 1, :b 2}, :b {:a 1, :b 2}}
</pre></div><div id="t1490361757995330" t="2017-03-24 13:22:37 borkdude Thanks"><a href="#t1490361757995330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-24</span> <span class="t" onclick="H(this)">13:22:37</span>             borkdude </span><span>Thanks</span></div><div id="t1491236723755634" t="2017-04-03 16:25:23 tothda Hi All, I&apos;m using specter 1.0.0 and trying this example from the readme: 
 (setval [:a ALL nil?] NONE {:a [1 2 nil 3 nil]})  
what I get is this: 
 {:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}  
instead of
 {:a [1 2 3]} 
Clojure version: 1.9.0-alpha14."><a href="#t1491236723755634" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">16:25:23</span>               tothda </span><span>Hi All, I&apos;m using specter 1.0.0 and trying this example from the readme: 
</span><code>(setval [:a ALL nil?] NONE {:a [1 2 nil 3 nil]})</code><span> 
what I get is this: 
</span><code>{:a [1 2 :com.rpl.specter.impl/NONE 3 :com.rpl.specter.impl/NONE]}</code><span> 
instead of
</span><code>{:a [1 2 3]}</code><span>
Clojure version: 1.9.0-alpha14.</span></div><div id="t1491237833161084" t="2017-04-03 16:43:53 nathanmarz @tothda that definitely works with 1.0.0"><a href="#t1491237833161084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">16:43:53</span>           nathanmarz </span><span>@tothda that definitely works with 1.0.0</span></div><div id="t1491237842164414" t="2017-04-03 16:44:02 nathanmarz if you&apos;re using lein what&apos;s the output of  lein deps :tree ?"><a href="#t1491237842164414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">16:44:02</span>           nathanmarz </span><span>if you&apos;re using lein what&apos;s the output of </span><code>lein deps :tree</code><span>?</span></div><div id="t1491239270691495" t="2017-04-03 17:07:50 tothda Ohh, I&apos;m sorry, it works. I started the REPL on a branch where specter version was 0.13.2 and then switched to an other branch with specter 1.0.0"><a href="#t1491239270691495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">17:07:50</span>               tothda </span><span>Ohh, I&apos;m sorry, it works. I started the REPL on a branch where specter version was 0.13.2 and then switched to an other branch with specter 1.0.0</span></div><div id="t1491239343717910" t="2017-04-03 17:09:03 tothda After restarting the REPL with 1.0.0 it works obviously  😳"><a href="#t1491239343717910" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">17:09:03</span>               tothda </span><span>After restarting the REPL with 1.0.0 it works obviously </span><b>😳</b></div><div id="t1491240959306423" t="2017-04-03 17:35:59 nathanmarz cool"><a href="#t1491240959306423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">17:35:59</span>           nathanmarz </span><span>cool</span></div><div id="t1491586121414782" t="2017-04-07 17:28:41 souenzzo recursive-path  shoud be used directly on &quot;path&quot;?
ex:  (transform [(walker ,,,) (recursive-path ,,,,) ,,,,] foo bar)"><a href="#t1491586121414782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">17:28:41</span>             souenzzo </span><code>recursive-path</code><span> shoud be used directly on &quot;path&quot;?
ex: </span><code>(transform [(walker ,,,) (recursive-path ,,,,) ,,,,] foo bar)</code></div><div id="t1491589939774424" t="2017-04-07 18:32:19 nathanmarz @souenzzo yes that should work fine"><a href="#t1491589939774424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">18:32:19</span>           nathanmarz </span><span>@souenzzo yes that should work fine</span></div><div id="t1491589960781812" t="2017-04-07 18:32:40 nathanmarz or you can use it to declare a top-level path or bind a symbol in  let"><a href="#t1491589960781812" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">18:32:40</span>           nathanmarz </span><span>or you can use it to declare a top-level path or bind a symbol in </span><code>let</code></div><div id="t1491590235878834" t="2017-04-07 18:37:15 souenzzo I usually declare at top-level. but in this case it contains a lot of parameters and (probably) will not be reuse.
I was unsure whether using in-line would lose optimization"><a href="#t1491590235878834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">18:37:15</span>             souenzzo </span><span>I usually declare at top-level. but in this case it contains a lot of parameters and (probably) will not be reuse.
I was unsure whether using in-line would lose optimization</span></div><div id="t1491590431946855" t="2017-04-07 18:40:31 nathanmarz nope"><a href="#t1491590431946855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">18:40:31</span>           nathanmarz </span><span>nope</span></div><div id="t1491590449953006" t="2017-04-07 18:40:49 nathanmarz you can see the produced code by wrapping it in  with-inline-debug  the first time the callsite is executed"><a href="#t1491590449953006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-07</span> <span class="t" onclick="H(this)">18:40:49</span>           nathanmarz </span><span>you can see the produced code by wrapping it in </span><code>with-inline-debug</code><span> the first time the callsite is executed</span></div><div id="t1491838032655058" t="2017-04-10 15:27:12 deplect I have a question, supose I want to delete all keys-values pairs in the :exposure map with spectre. How would I go about?"><a href="#t1491838032655058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">15:27:12</span>              deplect </span><span>I have a question, supose I want to delete all keys-values pairs in the :exposure map with spectre. How would I go about?</span></div><div id="t1491838034656090" t="2017-04-10 15:27:14 deplect {:mdc-artificial/random {5 {:exposure {1000 {[1.0 2.0] 200.0}}}
                                   10 {:exposure {2000 {[1.0 2.0] 400.0}}}}}"><a href="#t1491838034656090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">15:27:14</span>              deplect </span><span>{:mdc-artificial/random {5 {:exposure {1000 {[1.0 2.0] 200.0}}}
                                   10 {:exposure {2000 {[1.0 2.0] 400.0}}}}}</span></div><div id="t1491838085677360" t="2017-04-10 15:28:05 deplect where all key-values i want to delete must be smaller than 1500  🙂"><a href="#t1491838085677360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">15:28:05</span>              deplect </span><span>where all key-values i want to delete must be smaller than 1500 </span><b>🙂</b></div><div id="t1491841833158836" t="2017-04-10 16:30:33 nathanmarz @deplect you mean empty all exposure maps where the sum of the numbers within is &lt; 1500?"><a href="#t1491841833158836" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:30:33</span>           nathanmarz </span><span>@deplect you mean empty all exposure maps where the sum of the numbers within is &lt; 1500?</span></div><div id="t1491841840161318" t="2017-04-10 16:30:40 nathanmarz that would just be:
 (transform [:mdc-artificial/random MAP-VALS
            :exposure
            (selected? (traversed (walker number?) +) #(&lt; % 1500))]
  empty
  data)
"><a href="#t1491841840161318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:30:40</span>           nathanmarz </span><span>that would just be:
</span><pre>(transform [:mdc-artificial/random MAP-VALS
            :exposure
            (selected? (traversed (walker number?) +) #(&lt; % 1500))]
  empty
  data)
</pre></div><div id="t1491841862169651" t="2017-04-10 16:31:02 deplect hai Nathan, no I already figured it out …"><a href="#t1491841862169651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:31:02</span>              deplect </span><span>hai Nathan, no I already figured it out …</span></div><div id="t1491841885178240" t="2017-04-10 16:31:25 deplect i want exactly the 1000 key in the exposure map to be gone."><a href="#t1491841885178240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:31:25</span>              deplect </span><span>i want exactly the 1000 key in the exposure map to be gone.</span></div><div id="t1491841913188741" t="2017-04-10 16:31:53 deplect came down to: (sp/transform [MAP-VALS MAP-VALS MAP-VALS] #(remove-keys (partial &gt; expire-time) %) registry)"><a href="#t1491841913188741" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:31:53</span>              deplect </span><span>came down to: (sp/transform [MAP-VALS MAP-VALS MAP-VALS] #(remove-keys (partial &gt; expire-time) %) registry)</span></div><div id="t1491842313334174" t="2017-04-10 16:38:33 nathanmarz in that case I think you want something more along the lines of:
 (setval [:mdc-artificial/random
            MAP-VALS
            :exposure
            MAP-KEYS
            #(&lt; % 1500)]
  NONE
  data)
"><a href="#t1491842313334174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:38:33</span>           nathanmarz </span><span>in that case I think you want something more along the lines of:
</span><pre>(setval [:mdc-artificial/random
            MAP-VALS
            :exposure
            MAP-KEYS
            #(&lt; % 1500)]
  NONE
  data)
</pre></div><div id="t1491842371354458" t="2017-04-10 16:39:31 deplect yes buy :mdc-artificial/random can be any value. :exposure will always be called exporsure"><a href="#t1491842371354458" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:39:31</span>              deplect </span><span>yes buy :mdc-artificial/random can be any value. :exposure will always be called exporsure</span></div><div id="t1491842405366737" t="2017-04-10 16:40:05 nathanmarz ah"><a href="#t1491842405366737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:40:05</span>           nathanmarz </span><span>ah</span></div><div id="t1491842408368003" t="2017-04-10 16:40:08 nathanmarz easy to modify to handle that"><a href="#t1491842408368003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:40:08</span>           nathanmarz </span><span>easy to modify to handle that</span></div><div id="t1491842584430801" t="2017-04-10 16:43:04 deplect yes works like a charm, the transform version fails under certain circumstances, thx!"><a href="#t1491842584430801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-10</span> <span class="t" onclick="H(this)">16:43:04</span>              deplect </span><span>yes works like a charm, the transform version fails under certain circumstances, thx!</span></div><div id="t1492007252129993" t="2017-04-12 14:27:32 snacks hi Nathan i have a question"><a href="#t1492007252129993" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:27:32</span>               snacks </span><span>hi Nathan i have a question</span></div><div id="t1492007260132961" t="2017-04-12 14:27:40 snacks Is there anyway I can use selected? with a selector takes multiple values. for example  def data [{:a 1 :b 1 :c 1} {:a 2 :b 1 :c 1}]"><a href="#t1492007260132961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:27:40</span>               snacks </span><span>Is there anyway I can use selected? with a selector takes multiple values. for example </span><code>def data [{:a 1 :b 1 :c 1} {:a 2 :b 1 :c 1}]</code></div><div id="t1492007275139182" t="2017-04-12 14:27:55 snacks I only want to select sub maps where  :a  =  :b"><a href="#t1492007275139182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:27:55</span>               snacks </span><span>I only want to select sub maps where </span><code>:a</code><span> = </span><code>:b</code></div><div id="t1492007585269079" t="2017-04-12 14:33:05 nathanmarz @snacks for that I would just use an anonymous function"><a href="#t1492007585269079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:33:05</span>           nathanmarz </span><span>@snacks for that I would just use an anonymous function</span></div><div id="t1492007593272251" t="2017-04-12 14:33:13 nathanmarz #(= (:a %) (:b %))"><a href="#t1492007593272251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:33:13</span>           nathanmarz </span><code>#(= (:a %) (:b %))</code></div><div id="t1492007762341844" t="2017-04-12 14:36:02 nathanmarz (def data [{:a 1 :b 1 :c &quot;biubiu&quot;} {:a 1 :b 2 :c 3}])
(select [ALL #(= (:a %) (:b %)) :c] data)
;; =&gt; [&quot;biubiu&quot;]
"><a href="#t1492007762341844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:36:02</span>           nathanmarz </span><pre>(def data [{:a 1 :b 1 :c &quot;biubiu&quot;} {:a 1 :b 2 :c 3}])
(select [ALL #(= (:a %) (:b %)) :c] data)
;; =&gt; [&quot;biubiu&quot;]
</pre></div><div id="t1492008035454112" t="2017-04-12 14:40:35 snacks thanks!"><a href="#t1492008035454112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">14:40:35</span>               snacks </span><span>thanks!</span></div><div id="t1492027501922868" t="2017-04-12 20:05:01 snacks why is it called specter?"><a href="#t1492027501922868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">20:05:01</span>               snacks </span><span>why is it called specter?</span></div><div id="t1492028139139897" t="2017-04-12 20:15:39 nathanmarz @snacks from &quot;introspect&quot;"><a href="#t1492028139139897" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">20:15:39</span>           nathanmarz </span><span>@snacks from &quot;introspect&quot;</span></div><div id="t1492028199160245" t="2017-04-12 20:16:39 nathanmarz it was also released before clojure.spec was a thing, would choose a different name if I made it today"><a href="#t1492028199160245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">20:16:39</span>           nathanmarz </span><span>it was also released before clojure.spec was a thing, would choose a different name if I made it today</span></div><div id="t1492037543757552" t="2017-04-12 22:52:23 souenzzo And  com.rpl.specter  was related with   ?"><a href="#t1492037543757552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">22:52:23</span>             souenzzo </span><span>And </span><code>com.rpl.specter</code><span> was related with </span><code></code><span>?</span></div><div id="t1492040807325884" t="2017-04-12 23:46:47 nathanmarz @souenzzo no, my company is called Red Planet Labs"><a href="#t1492040807325884" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">23:46:47</span>           nathanmarz </span><span>@souenzzo no, my company is called Red Planet Labs</span></div><div id="t1492040820327784" t="2017-04-12 23:47:00 nathanmarz no website yet"><a href="#t1492040820327784" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-12</span> <span class="t" onclick="H(this)">23:47:00</span>           nathanmarz </span><span>no website yet</span></div><div id="t1492091561967154" t="2017-04-13 13:52:41 tankthinks anyone around?"><a href="#t1492091561967154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">13:52:41</span>           tankthinks </span><span>anyone around?</span></div><div id="t1492092357272229" t="2017-04-13 14:05:57 nathanmarz @tankthinks yes"><a href="#t1492092357272229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:05:57</span>           nathanmarz </span><span>@tankthinks yes</span></div><div id="t1492092367275584" t="2017-04-13 14:06:07 tankthinks hey @nathanmarz!"><a href="#t1492092367275584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:06:07</span>           tankthinks </span><span>hey @nathanmarz!</span></div><div id="t1492092377279224" t="2017-04-13 14:06:17 tankthinks first and foremost … specter is awesome"><a href="#t1492092377279224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:06:17</span>           tankthinks </span><span>first and foremost … specter is awesome</span></div><div id="t1492092386283108" t="2017-04-13 14:06:26 tankthinks now that I have that out of the way"><a href="#t1492092386283108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:06:26</span>           tankthinks </span><span>now that I have that out of the way</span></div><div id="t1492092423296969" t="2017-04-13 14:07:03 nathanmarz thanks"><a href="#t1492092423296969" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:07:03</span>           nathanmarz </span><span>thanks</span></div><div id="t1492092430299602" t="2017-04-13 14:07:10 tankthinks I need to transform this data structure (I’ve elided unnecessary bits for now):
 (def plans
  {:plans &apos;({:planId &quot;1&quot;
             :disbursements ({:history ({:amount &quot;1&quot; :disbursementDate &quot;2017-01-01&quot;}
                                        {:amount &quot;1&quot; :disbursementDate &quot;2017-01-01&quot;}
                                        {:amount &quot;2&quot; :disbursementDate &quot;2017-02-01&quot;}
                                        {:amount &quot;3&quot; :disbursementDate &quot;2017-03-01&quot;})})})})
"><a href="#t1492092430299602" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:07:10</span>           tankthinks </span><span>I need to transform this data structure (I’ve elided unnecessary bits for now):
</span><pre>(def plans
  {:plans &apos;({:planId &quot;1&quot;
             :disbursements ({:history ({:amount &quot;1&quot; :disbursementDate &quot;2017-01-01&quot;}
                                        {:amount &quot;1&quot; :disbursementDate &quot;2017-01-01&quot;}
                                        {:amount &quot;2&quot; :disbursementDate &quot;2017-02-01&quot;}
                                        {:amount &quot;3&quot; :disbursementDate &quot;2017-03-01&quot;})})})})
</pre></div><div id="t1492092459310447" t="2017-04-13 14:07:39 tankthinks by removing duplicate entries from the  :history  list"><a href="#t1492092459310447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:07:39</span>           tankthinks </span><span>by removing duplicate entries from the </span><code>:history</code><span> list</span></div><div id="t1492092472315366" t="2017-04-13 14:07:52 tankthinks this basically does what I want:
 (transform [:plans ALL #(= &quot;1&quot; (:planId %)) :disbursements ALL :history]
  dedupe
  plans)
"><a href="#t1492092472315366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:07:52</span>           tankthinks </span><span>this basically does what I want:
</span><pre>(transform [:plans ALL #(= &quot;1&quot; (:planId %)) :disbursements ALL :history]
  dedupe
  plans)
</pre></div><div id="t1492092510329928" t="2017-04-13 14:08:30 tankthinks but what if I want a predicate to ensure that I’m only  dedupe ing entries from January, i.e. “2017-01-01”"><a href="#t1492092510329928" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:08:30</span>           tankthinks </span><span>but what if I want a predicate to ensure that I’m only </span><code>dedupe</code><span>ing entries from January, i.e. “2017-01-01”</span></div><div id="t1492092552345470" t="2017-04-13 14:09:12 nathanmarz hmm"><a href="#t1492092552345470" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:09:12</span>           nathanmarz </span><span>hmm</span></div><div id="t1492092566350918" t="2017-04-13 14:09:26 nathanmarz gonna have to do it manually for now in your transform fn"><a href="#t1492092566350918" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:09:26</span>           nathanmarz </span><span>gonna have to do it manually for now in your transform fn</span></div><div id="t1492092586358240" t="2017-04-13 14:09:46 nathanmarz it&apos;s possible  subselect  could be extended to support that"><a href="#t1492092586358240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:09:46</span>           nathanmarz </span><span>it&apos;s possible </span><code>subselect</code><span> could be extended to support that</span></div><div id="t1492092628375039" t="2017-04-13 14:10:28 nathanmarz so you could do:
 (transform [:plans ALL #(= &quot;1&quot; (:planId %)) :disbursements ALL :history (filterer :disbursementDate #(= % “2017-01-01”))]
  dedupe
  plans)
"><a href="#t1492092628375039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:10:28</span>           nathanmarz </span><span>so you could do:
</span><pre>(transform [:plans ALL #(= &quot;1&quot; (:planId %)) :disbursements ALL :history (filterer :disbursementDate #(= % “2017-01-01”))]
  dedupe
  plans)
</pre></div><div id="t1492092652384326" t="2017-04-13 14:10:52 nathanmarz right now  subselect /`filterer` require the output sequence to be the same size as the input"><a href="#t1492092652384326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:10:52</span>           nathanmarz </span><span>right now </span><code>subselect</code><span>/`filterer` require the output sequence to be the same size as the input</span></div><div id="t1492092701402637" t="2017-04-13 14:11:41 nathanmarz the logic change would be to fill in removed entires with  NONE  to trigger removal"><a href="#t1492092701402637" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:11:41</span>           nathanmarz </span><span>the logic change would be to fill in removed entires with </span><code>NONE</code><span> to trigger removal</span></div><div id="t1492092726411802" t="2017-04-13 14:12:06 nathanmarz that would be a good issue to open on github"><a href="#t1492092726411802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:12:06</span>           nathanmarz </span><span>that would be a good issue to open on github</span></div><div id="t1492092914483094" t="2017-04-13 14:15:14 tankthinks ah … cool"><a href="#t1492092914483094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:15:14</span>           tankthinks </span><span>ah … cool</span></div><div id="t1492092981509123" t="2017-04-13 14:16:21 tankthinks Thank you for the quick response … I’ll play around a bit to make sure I completely understand, then I’ll submit an issue"><a href="#t1492092981509123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:16:21</span>           tankthinks </span><span>Thank you for the quick response … I’ll play around a bit to make sure I completely understand, then I’ll submit an issue</span></div><div id="t1492092989512359" t="2017-04-13 14:16:29 nathanmarz actually it&apos;s fine"><a href="#t1492092989512359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:16:29</span>           nathanmarz </span><span>actually it&apos;s fine</span></div><div id="t1492092993513971" t="2017-04-13 14:16:33 nathanmarz I was curious so I just implemented it"><a href="#t1492092993513971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:16:33</span>           nathanmarz </span><span>I was curious so I just implemented it</span></div><div id="t1492093001517146" t="2017-04-13 14:16:41 tankthinks haha"><a href="#t1492093001517146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:16:41</span>           tankthinks </span><span>haha</span></div><div id="t1492093245610841" t="2017-04-13 14:20:45 nathanmarz @tankthinks  https://github.com/nathanmarz/specter/commit/be30e46960c879d6177d8ab8c2d3f4450bab0095"><a href="#t1492093245610841" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:20:45</span>           nathanmarz </span><span>@tankthinks </span><a href="https://github.com/nathanmarz/specter/commit/be30e46960c879d6177d8ab8c2d3f4450bab0095" target="_blank">https://github.com/nathanmarz/specter/commit/be30e46960c879d6177d8ab8c2d3f4450bab0095</a></div><div id="t1492093317638324" t="2017-04-13 14:21:57 nathanmarz quite elegant I think"><a href="#t1492093317638324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:21:57</span>           nathanmarz </span><span>quite elegant I think</span></div><div id="t1492093333644268" t="2017-04-13 14:22:13 tankthinks so … uh … you’re welcome?"><a href="#t1492093333644268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:22:13</span>           tankthinks </span><span>so … uh … you’re welcome?</span></div><div id="t1492093349651078" t="2017-04-13 14:22:29 tankthinks 😃"><a href="#t1492093349651078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:22:29</span>           tankthinks </span><b>😃</b></div><div id="t1492093350651627" t="2017-04-13 14:22:30 nathanmarz 😉"><a href="#t1492093350651627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:22:30</span>           nathanmarz </span><b>😉</b></div><div id="t1492094781213928" t="2017-04-13 14:46:21 tankthinks thanks again @nathanmarz, not sure how I would have done that without specter … cheers!"><a href="#t1492094781213928" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-13</span> <span class="t" onclick="H(this)">14:46:21</span>           tankthinks </span><span>thanks again @nathanmarz, not sure how I would have done that without specter … cheers!</span></div><div id="t1492460622626018" t="2017-04-17 20:23:42 nathanmarz Released Specter 1.0.1 (bug fixes and minor enhancements)  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1492460622626018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-17</span> <span class="t" onclick="H(this)">20:23:42</span>           nathanmarz </span><span>Released Specter 1.0.1 (bug fixes and minor enhancements) </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1492533510759161" t="2017-04-18 16:38:30 mbjarland Hi Nathan. I&apos;m new to specter but this seems indeed like the bees knees"><a href="#t1492533510759161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:38:30</span>            mbjarland </span><span>Hi Nathan. I&apos;m new to specter but this seems indeed like the bees knees</span></div><div id="t1492533572785139" t="2017-04-18 16:39:32 mbjarland I have a question, a while back I posted the following s.o. question: 
 https://stackoverflow.com/questions/42551765/idiomatic-and-concise-way-of-working-with-nested-map-vector-structures-in-clojur 
and I have been playing for the past few hours with using spectre for this nested traversal problem. In essense I have some json data (maps and vectors) and I need to traverse to a certain depth, do a few operations, remember context, traverse a few more levels down, do a few operations etc"><a href="#t1492533572785139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:39:32</span>            mbjarland </span><span>I have a question, a while back I posted the following s.o. question: 
</span><a href="https://stackoverflow.com/questions/42551765/idiomatic-and-concise-way-of-working-with-nested-map-vector-structures-in-clojur" target="_blank">https://stackoverflow.com/questions/42551765/idiomatic-and-concise-way-of-working-with-nested-map-vector-structures-in-clojur</a><span>
and I have been playing for the past few hours with using spectre for this nested traversal problem. In essense I have some json data (maps and vectors) and I need to traverse to a certain depth, do a few operations, remember context, traverse a few more levels down, do a few operations etc</span></div><div id="t1492533728849717" t="2017-04-18 16:42:08 mbjarland I am not really interested in changing the traverse structure. I assume I should be using collectors then?"><a href="#t1492533728849717" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:42:08</span>            mbjarland </span><span>I am not really interested in changing the traverse structure. I assume I should be using collectors then?</span></div><div id="t1492533841897628" t="2017-04-18 16:44:01 nathanmarz @mbjarland so to clarify, you&apos;re not transforming the nested structure, you just want to perform some operations using values inside?"><a href="#t1492533841897628" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:44:01</span>           nathanmarz </span><span>@mbjarland so to clarify, you&apos;re not transforming the nested structure, you just want to perform some operations using values inside?</span></div><div id="t1492533863907075" t="2017-04-18 16:44:23 mbjarland this is the groovy equivalent of what I want to do: 
 json.issues.each { issue -&gt;
  issue.changelog.histories.each { history -&gt;
    def date = DateTime.parse(history.created)
    if (date &lt; fromDate || date &gt; toDate) return

    def timeItems = history.items.findAll { it.field == &apos;timespent&apos; }
    if (!timeItems) return

    def consultant = history.author.displayName
    timeItems.each { item -&gt;
      def from = (item.from ?: 0) as Integer
      def to   = (   ?: 0) as Integer

      timesheets[consultant].entries &lt;&lt; new TimeEntry(date: date, issueKey: issue.key, secondsSpent: to - from)
    }
  }
}
"><a href="#t1492533863907075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:44:23</span>            mbjarland </span><span>this is the groovy equivalent of what I want to do: 
</span><pre>json.issues.each { issue -&gt;
  issue.changelog.histories.each { history -&gt;
    def date = DateTime.parse(history.created)
    if (date &lt; fromDate || date &gt; toDate) return

    def timeItems = history.items.findAll { it.field == &apos;timespent&apos; }
    if (!timeItems) return

    def consultant = history.author.displayName
    timeItems.each { item -&gt;
      def from = (item.from ?: 0) as Integer
      def to   = (   ?: 0) as Integer

      timesheets[consultant].entries &lt;&lt; new TimeEntry(date: date, issueKey: issue.key, secondsSpent: to - from)
    }
  }
}
</pre></div><div id="t1492533893919111" t="2017-04-18 16:44:53 mbjarland and generate some resulting data  structure (map)"><a href="#t1492533893919111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:44:53</span>            mbjarland </span><span>and generate some resulting data  structure (map)</span></div><div id="t1492533925933166" t="2017-04-18 16:45:25 mbjarland it seems that the path traversals above  json.issues.each ,  issue.changelog.histories.each , etc are a perfect match for specter"><a href="#t1492533925933166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:45:25</span>            mbjarland </span><span>it seems that the path traversals above </span><code>json.issues.each</code><span>, </span><code>issue.changelog.histories.each</code><span>, etc are a perfect match for specter</span></div><div id="t1492533929934936" t="2017-04-18 16:45:29 nathanmarz it sounds like you want to do a  traverse  to get to the values you care about in the order you want"><a href="#t1492533929934936" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:45:29</span>           nathanmarz </span><span>it sounds like you want to do a </span><code>traverse</code><span> to get to the values you care about in the order you want</span></div><div id="t1492533942940216" t="2017-04-18 16:45:42 nathanmarz and then  reduce  over that to generate your result"><a href="#t1492533942940216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:45:42</span>           nathanmarz </span><span>and then </span><code>reduce</code><span> over that to generate your result</span></div><div id="t1492534020973985" t="2017-04-18 16:47:00 mbjarland and multiple nested traverses to get hold of the different levels (issue, history, item) above?"><a href="#t1492534020973985" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:47:00</span>            mbjarland </span><span>and multiple nested traverses to get hold of the different levels (issue, history, item) above?</span></div><div id="t1492534115013602" t="2017-04-18 16:48:35 nathanmarz use  collect  /  collect-one"><a href="#t1492534115013602" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:48:35</span>           nathanmarz </span><span>use </span><code>collect</code><span> / </span><code>collect-one</code></div><div id="t1492534218054837" t="2017-04-18 16:50:18 nathanmarz a simplified example:
 (reduce conj [] (traverse [ALL (collect-one :name) :age] [{:name &quot;Bob&quot; :age 21} {:name &quot;Alice&quot; :age 20}]))
"><a href="#t1492534218054837" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:50:18</span>           nathanmarz </span><span>a simplified example:
</span><pre>(reduce conj [] (traverse [ALL (collect-one :name) :age] [{:name &quot;Bob&quot; :age 21} {:name &quot;Alice&quot; :age 20}]))
</pre></div><div id="t1492534343105868" t="2017-04-18 16:52:23 mbjarland ok, that&apos;s probably enough to nudge me in the right direction"><a href="#t1492534343105868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:52:23</span>            mbjarland </span><span>ok, that&apos;s probably enough to nudge me in the right direction</span></div><div id="t1492534390124314" t="2017-04-18 16:53:10 mbjarland thank you! ...and clojure still makes me feel like an idiot at least once a day"><a href="#t1492534390124314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:53:10</span>            mbjarland </span><span>thank you! ...and clojure still makes me feel like an idiot at least once a day</span></div><div id="t1492534449148379" t="2017-04-18 16:54:09 mbjarland I&apos;ve been trying various methods of getting the groovy code above expressive and terse in clojure, I think specter might be the answer"><a href="#t1492534449148379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:54:09</span>            mbjarland </span><span>I&apos;ve been trying various methods of getting the groovy code above expressive and terse in clojure, I think specter might be the answer</span></div><div id="t1492534515175238" t="2017-04-18 16:55:15 nathanmarz your path would look something like:  [:issues ALL :changelog :histories ALL (selected? :date #(&gt; % fromDate) #(&lt; % toDate)) (collect-one :author :displayName) :items ALL #(= (:field %) &quot;timespent&quot;) (collect-one :from (nil-&gt;val 0)) :to (nil-&gt;val 0)]"><a href="#t1492534515175238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:55:15</span>           nathanmarz </span><span>your path would look something like: </span><code>[:issues ALL :changelog :histories ALL (selected? :date #(&gt; % fromDate) #(&lt; % toDate)) (collect-one :author :displayName) :items ALL #(= (:field %) &quot;timespent&quot;) (collect-one :from (nil-&gt;val 0)) :to (nil-&gt;val 0)]</code></div><div id="t1492534549189821" t="2017-04-18 16:55:49 mbjarland : )"><a href="#t1492534549189821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:55:49</span>            mbjarland </span><span>: )</span></div><div id="t1492534565196173" t="2017-04-18 16:56:05 nathanmarz or something like that"><a href="#t1492534565196173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:56:05</span>           nathanmarz </span><span>or something like that</span></div><div id="t1492534626221390" t="2017-04-18 16:57:06 mbjarland this is by the way the json returned from a jira instance and we use the results for invoicing so it is an actual real world example"><a href="#t1492534626221390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:57:06</span>            mbjarland </span><span>this is by the way the json returned from a jira instance and we use the results for invoicing so it is an actual real world example</span></div><div id="t1492534641227631" t="2017-04-18 16:57:21 mbjarland thank you, that helps a ton"><a href="#t1492534641227631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:57:21</span>            mbjarland </span><span>thank you, that helps a ton</span></div><div id="t1492534652232297" t="2017-04-18 16:57:32 nathanmarz cool"><a href="#t1492534652232297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:57:32</span>           nathanmarz </span><span>cool</span></div><div id="t1492534653232878" t="2017-04-18 16:57:33 nathanmarz no problem"><a href="#t1492534653232878" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:57:33</span>           nathanmarz </span><span>no problem</span></div><div id="t1492534707254662" t="2017-04-18 16:58:27 mbjarland one more question, in your path the date comparison assumes the date is parsed"><a href="#t1492534707254662" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:58:27</span>            mbjarland </span><span>one more question, in your path the date comparison assumes the date is parsed</span></div><div id="t1492534723261340" t="2017-04-18 16:58:43 mbjarland what if I need to do some computation at an intermediate level like parsing the date ?"><a href="#t1492534723261340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:58:43</span>            mbjarland </span><span>what if I need to do some computation at an intermediate level like parsing the date ?</span></div><div id="t1492534749271723" t="2017-04-18 16:59:09 mbjarland just an inline function in the path expression?"><a href="#t1492534749271723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">16:59:09</span>            mbjarland </span><span>just an inline function in the path expression?</span></div><div id="t1492534951358972" t="2017-04-18 17:02:31 mbjarland a privilege to be able to get answers directly from the author and I have to say I&apos;m impressed with the clojure community experience so far. Thanks again!"><a href="#t1492534951358972" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">17:02:31</span>            mbjarland </span><span>a privilege to be able to get answers directly from the author and I have to say I&apos;m impressed with the clojure community experience so far. Thanks again!</span></div><div id="t1492535347520290" t="2017-04-18 17:09:07 mbjarland : ) and the more I look at the above path expression....this is beautiful!"><a href="#t1492535347520290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">17:09:07</span>            mbjarland </span><span>: ) and the more I look at the above path expression....this is beautiful!</span></div><div id="t1492536856200604" t="2017-04-18 17:34:16 nathanmarz @mbjarland you can insert  (view parse-date)  to parse before comparing"><a href="#t1492536856200604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">17:34:16</span>           nathanmarz </span><span>@mbjarland you can insert </span><code>(view parse-date)</code><span> to parse before comparing</span></div><div id="t1492536897222113" t="2017-04-18 17:34:57 nathanmarz a function directly in a path is interpreted as a filter"><a href="#t1492536897222113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">17:34:57</span>           nathanmarz </span><span>a function directly in a path is interpreted as a filter</span></div><div id="t1492549435013281" t="2017-04-18 21:03:55 mbjarland ok got a last one, for context I have the following function: 
 (defn disect-json [json from-date to-date]
  (let [path [:issues ALL
              (collect-one :key)
              :changelog :histories ALL
              #(history-in-date-range? % from-date to-date)
              (selected? [:items ALL #(= (:field %) &quot;timespent&quot;)])
              (collect-one (view #(parse-history-date %)))
              (collect-one [:author :displayName])
              :items ALL
              (collect-one :from (nil-&gt;val &quot;0&quot;) (view #(read-string %)))
              (collect-one :to (nil-&gt;val &quot;0&quot;) (view #(read-string %)))]]
        (group-by #(nth % 2)
          (reduce conj [] (traverse path json)))))
 
looking at the path expression, how do I terminate the path without selecting the currently navigated node and only keeping the  collect-one  values?"><a href="#t1492549435013281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:03:55</span>            mbjarland </span><span>ok got a last one, for context I have the following function: 
</span><pre>(defn disect-json [json from-date to-date]
  (let [path [:issues ALL
              (collect-one :key)
              :changelog :histories ALL
              #(history-in-date-range? % from-date to-date)
              (selected? [:items ALL #(= (:field %) &quot;timespent&quot;)])
              (collect-one (view #(parse-history-date %)))
              (collect-one [:author :displayName])
              :items ALL
              (collect-one :from (nil-&gt;val &quot;0&quot;) (view #(read-string %)))
              (collect-one :to (nil-&gt;val &quot;0&quot;) (view #(read-string %)))]]
        (group-by #(nth % 2)
          (reduce conj [] (traverse path json)))))
</pre><span>
looking at the path expression, how do I terminate the path without selecting the currently navigated node and only keeping the </span><code>collect-one</code><span> values?</span></div><div id="t1492549689097514" t="2017-04-18 21:08:09 mbjarland oh and the above works, so I’m happy as a clam after looking for months for a clean solution for this in clojure."><a href="#t1492549689097514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:08:09</span>            mbjarland </span><span>oh and the above works, so I’m happy as a clam after looking for months for a clean solution for this in clojure.</span></div><div id="t1492551414618478" t="2017-04-18 21:36:54 nathanmarz @mbjarland instead of collecting the last element, just navigate to it"><a href="#t1492551414618478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:36:54</span>           nathanmarz </span><span>@mbjarland instead of collecting the last element, just navigate to it</span></div><div id="t1492551435623945" t="2017-04-18 21:37:15 nathanmarz terminate the path with  :to (nil-&gt;val &quot;0&quot;) (view #(read-string %)))  and drop the  collect-one"><a href="#t1492551435623945" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:37:15</span>           nathanmarz </span><span>terminate the path with </span><code>:to (nil-&gt;val &quot;0&quot;) (view #(read-string %)))</code><span> and drop the </span><code>collect-one</code></div><div id="t1492551491639696" t="2017-04-18 21:38:11 nathanmarz also you can do  (view parse-history-date)  to make it cleaner, same with usage of  read-string"><a href="#t1492551491639696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:38:11</span>           nathanmarz </span><span>also you can do </span><code>(view parse-history-date)</code><span> to make it cleaner, same with usage of </span><code>read-string</code></div><div id="t1492551541653532" t="2017-04-18 21:39:01 nathanmarz also if you just want a vector of results back, just do  select  instead of  (reduce ... (traverse ...))"><a href="#t1492551541653532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:39:01</span>           nathanmarz </span><span>also if you just want a vector of results back, just do </span><code>select</code><span> instead of </span><code>(reduce ... (traverse ...))</code></div><div id="t1492551567660827" t="2017-04-18 21:39:27 nathanmarz finally, you should specify the path inline with the  select  call so it can be properly optimized"><a href="#t1492551567660827" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:39:27</span>           nathanmarz </span><span>finally, you should specify the path inline with the </span><code>select</code><span> call so it can be properly optimized</span></div><div id="t1492551610672130" t="2017-04-18 21:40:10 nathanmarz or define the  path  local using specter&apos;s  path  macro"><a href="#t1492551610672130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:40:10</span>           nathanmarz </span><span>or define the </span><code>path</code><span> local using specter&apos;s </span><code>path</code><span> macro</span></div><div id="t1492551625676414" t="2017-04-18 21:40:25 nathanmarz (let [json-path (path :issues ALL ...) ..."><a href="#t1492551625676414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-18</span> <span class="t" onclick="H(this)">21:40:25</span>           nathanmarz </span><code>(let [json-path (path :issues ALL ...) ...</code></div><div id="t1492562911806583" t="2017-04-19 00:48:31 albaker is there a way to walk any arbitrary map/vector/map nested structure?"><a href="#t1492562911806583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">00:48:31</span>              albaker </span><span>is there a way to walk any arbitrary map/vector/map nested structure?</span></div><div id="t1492563184843982" t="2017-04-19 00:53:04 albaker trying to get success generations of something like  {:a &quot;blah&quot; :b :undefined}  -&gt;  {:a blah :b [{:a &quot;blah :b :undefined}] }"><a href="#t1492563184843982" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">00:53:04</span>              albaker </span><span>trying to get success generations of something like </span><code>{:a &quot;blah&quot; :b :undefined}</code><span> -&gt; </span><code>{:a blah :b [{:a &quot;blah :b :undefined}] }</code></div><div id="t1492570463794720" t="2017-04-19 02:54:23 nathanmarz @albaker yes, walker does that"><a href="#t1492570463794720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">02:54:23</span>           nathanmarz </span><span>@albaker yes, walker does that</span></div><div id="t1492570488797653" t="2017-04-19 02:54:48 nathanmarz or you can define a more precise navigator using  recursive-path"><a href="#t1492570488797653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">02:54:48</span>           nathanmarz </span><span>or you can define a more precise navigator using </span><code>recursive-path</code></div><div id="t1492570508799849" t="2017-04-19 02:55:08 nathanmarz not sure what you&apos;re going for with that transformation, need more examples or explanation"><a href="#t1492570508799849" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">02:55:08</span>           nathanmarz </span><span>not sure what you&apos;re going for with that transformation, need more examples or explanation</span></div><div id="t1492576828475620" t="2017-04-19 04:40:28 mbjarland @nathanmarz thank you. Got the select part right while tinkering last night, should have seen the view function pattern, guidance much appreciated."><a href="#t1492576828475620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">04:40:28</span>            mbjarland </span><span>@nathanmarz thank you. Got the select part right while tinkering last night, should have seen the view function pattern, guidance much appreciated.</span></div><div id="t1492593148291113" t="2017-04-19 09:12:28 mbjarland @nathanmarz is there any way to refer back to a  collect-one :ed value in a filter expression later in the path?"><a href="#t1492593148291113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">09:12:28</span>            mbjarland </span><span>@nathanmarz is there any way to refer back to a </span><code>collect-one</code><span>:ed value in a filter expression later in the path?</span></div><div id="t1492599873815863" t="2017-04-19 11:04:33 nathanmarz @mbjarland yes, use  collected?"><a href="#t1492599873815863" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">11:04:33</span>           nathanmarz </span><span>@mbjarland yes, use </span><code>collected?</code></div><div id="t1492599898820433" t="2017-04-19 11:04:58 nathanmarz also see  DISPENSE  and  with-fresh-collected"><a href="#t1492599898820433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">11:04:58</span>           nathanmarz </span><span>also see </span><code>DISPENSE</code><span> and </span><code>with-fresh-collected</code></div><div id="t1492601128066464" t="2017-04-19 11:25:28 mbjarland @nathanmarz fresh out the oven? these don&apos;t seem to be part of the online docs, will fire up a repl and take a look"><a href="#t1492601128066464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">11:25:28</span>            mbjarland </span><span>@nathanmarz fresh out the oven? these don&apos;t seem to be part of the online docs, will fire up a repl and take a look</span></div><div id="t1492602587365970" t="2017-04-19 11:49:47 nathanmarz @mbjarland not on the wiki but in the API docs  https://nathanmarz.github.io/specter/"><a href="#t1492602587365970" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">11:49:47</span>           nathanmarz </span><span>@mbjarland not on the wiki but in the API docs </span><a href="https://nathanmarz.github.io/specter/" target="_blank">https://nathanmarz.github.io/specter/</a></div><div id="t1492610322685976" t="2017-04-19 13:58:42 albaker @nathanmarz basically want to run something like  (transform walker expander-function)  that I can repeatedly call until some notion of completion"><a href="#t1492610322685976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">13:58:42</span>              albaker </span><span>@nathanmarz basically want to run something like </span><code>(transform walker expander-function)</code><span> that I can repeatedly call until some notion of completion</span></div><div id="t1492610360701683" t="2017-04-19 13:59:20 albaker where each transform has that  {:a &quot;blah&quot; :b :undefined}  -&gt;  {:a blah :b [{:a &quot;blah :b :undefined}] }  style replace a key in the map, or maybe nested map/vectors"><a href="#t1492610360701683" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">13:59:20</span>              albaker </span><span>where each transform has that </span><code>{:a &quot;blah&quot; :b :undefined}</code><span> -&gt; </span><code>{:a blah :b [{:a &quot;blah :b :undefined}] }</code><span> style replace a key in the map, or maybe nested map/vectors</span></div><div id="t1492610414725342" t="2017-04-19 14:00:14 nathanmarz @albaker you can use  stay-then-continue  to transform something and then continue recursing into the transformed value"><a href="#t1492610414725342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:00:14</span>           nathanmarz </span><span>@albaker you can use </span><code>stay-then-continue</code><span> to transform something and then continue recursing into the transformed value</span></div><div id="t1492610464747918" t="2017-04-19 14:01:04 nathanmarz e.g.  (recursive-path [] p [(walker vector?) (stay-then-continue ALL p)])"><a href="#t1492610464747918" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:01:04</span>           nathanmarz </span><span>e.g. </span><code>(recursive-path [] p [(walker vector?) (stay-then-continue ALL p)])</code></div><div id="t1492610502764405" t="2017-04-19 14:01:42 albaker but that&apos;ll walk vectors or also maps/vectors of maps, with vectors of maps, etc"><a href="#t1492610502764405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:01:42</span>              albaker </span><span>but that&apos;ll walk vectors or also maps/vectors of maps, with vectors of maps, etc</span></div><div id="t1492610526774943" t="2017-04-19 14:02:06 nathanmarz that will walk all clojure data structures until it reaches a vector, then it will do the transformation and continue walking"><a href="#t1492610526774943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:02:06</span>           nathanmarz </span><span>that will walk all clojure data structures until it reaches a vector, then it will do the transformation and continue walking</span></div><div id="t1492610541781317" t="2017-04-19 14:02:21 nathanmarz if you want different behavior then you can encode that into your recursive path definition"><a href="#t1492610541781317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:02:21</span>           nathanmarz </span><span>if you want different behavior then you can encode that into your recursive path definition</span></div><div id="t1492610588800027" t="2017-04-19 14:03:08 albaker so walker wants a predicate function that returns truthy for something you want to process"><a href="#t1492610588800027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:03:08</span>              albaker </span><span>so walker wants a predicate function that returns truthy for something you want to process</span></div><div id="t1492610594802587" t="2017-04-19 14:03:14 nathanmarz yea"><a href="#t1492610594802587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:03:14</span>           nathanmarz </span><span>yea</span></div><div id="t1492610600805506" t="2017-04-19 14:03:20 albaker ok cool, I&apos;ll give that a whirl"><a href="#t1492610600805506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:03:20</span>              albaker </span><span>ok cool, I&apos;ll give that a whirl</span></div><div id="t1492611189048848" t="2017-04-19 14:13:09 mbjarland @nathanmarz if I am on a node which is a map and want to do a calculation on the values for two keys on that map, i.e.
 (view #(- (read-string (:to %)) (read-string (:from %))))
 
it seems that  %  does not evaluate to the current node in the above expression?"><a href="#t1492611189048848" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:13:09</span>            mbjarland </span><span>@nathanmarz if I am on a node which is a map and want to do a calculation on the values for two keys on that map, i.e.
</span><pre>(view #(- (read-string (:to %)) (read-string (:from %))))
</pre><span>
it seems that </span><code>%</code><span> does not evaluate to the current node in the above expression?</span></div><div id="t1492612826747588" t="2017-04-19 14:40:26 mbjarland take that back, figured it out, my bad"><a href="#t1492612826747588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">14:40:26</span>            mbjarland </span><span>take that back, figured it out, my bad</span></div><div id="t1492615790053275" t="2017-04-19 15:29:50 albaker @nathanmarz so that works so well, I&apos;m stack overflowing as the descent into the tree (or madness?) goes..  in this case, making a graph query to find more children until no more children can be had.  Are there any gotchas (other then don&apos;t do that) to avoid in the transform?"><a href="#t1492615790053275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:29:50</span>              albaker </span><span>@nathanmarz so that works so well, I&apos;m stack overflowing as the descent into the tree (or madness?) goes..  in this case, making a graph query to find more children until no more children can be had.  Are there any gotchas (other then don&apos;t do that) to avoid in the transform?</span></div><div id="t1492615862085911" t="2017-04-19 15:31:02 albaker I guess I could move the query into a core.async channel, so transform is just pulling from channels"><a href="#t1492615862085911" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:31:02</span>              albaker </span><span>I guess I could move the query into a core.async channel, so transform is just pulling from channels</span></div><div id="t1492616089187228" t="2017-04-19 15:34:49 nathanmarz @albaker specter doesn&apos;t use any more stack than you would expect"><a href="#t1492616089187228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:34:49</span>           nathanmarz </span><span>@albaker specter doesn&apos;t use any more stack than you would expect</span></div><div id="t1492616110195915" t="2017-04-19 15:35:10 nathanmarz each level in data structure you go down during the transform will be another stack frame"><a href="#t1492616110195915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:35:10</span>           nathanmarz </span><span>each level in data structure you go down during the transform will be another stack frame</span></div><div id="t1492616136207648" t="2017-04-19 15:35:36 albaker yeah I suspect it&apos;s in the db client somewhere"><a href="#t1492616136207648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:35:36</span>              albaker </span><span>yeah I suspect it&apos;s in the db client somewhere</span></div><div id="t1492616162218969" t="2017-04-19 15:36:02 nathanmarz don&apos;t know enough about your use case to give any guidance beyond that"><a href="#t1492616162218969" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:36:02</span>           nathanmarz </span><span>don&apos;t know enough about your use case to give any guidance beyond that</span></div><div id="t1492616285271078" t="2017-04-19 15:38:05 albaker I&apos;ll move the db client behind a core.async queue and leaves the transforming function only doing a quick put a thing on, get a thing back transaction and lets the db query run separately"><a href="#t1492616285271078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:38:05</span>              albaker </span><span>I&apos;ll move the db client behind a core.async queue and leaves the transforming function only doing a quick put a thing on, get a thing back transaction and lets the db query run separately</span></div><div id="t1492616315283546" t="2017-04-19 15:38:35 albaker don&apos;t feel like playing the &quot;why I hate Apache HTTP commons today&quot; game on why it&apos;s stack overflowing  😄"><a href="#t1492616315283546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">15:38:35</span>              albaker </span><span>don&apos;t feel like playing the &quot;why I hate Apache HTTP commons today&quot; game on why it&apos;s stack overflowing </span><b>😄</b></div><div id="t1492639684778183" t="2017-04-19 22:08:04 lvh Does anyone have any suggestions for a faster clojure.data/diff? I don’t know if anyone’s e.g. tried specter for this (or if it’d even help). I imagine zippers might, at least. I currently have two mostly-similar nested trees (flattened about 2E5 entries) and clojure.data/diff just takes a very long time"><a href="#t1492639684778183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">22:08:04</span>                  lvh </span><span>Does anyone have any suggestions for a faster clojure.data/diff? I don’t know if anyone’s e.g. tried specter for this (or if it’d even help). I imagine zippers might, at least. I currently have two mostly-similar nested trees (flattened about 2E5 entries) and clojure.data/diff just takes a very long time</span></div><div id="t1492639726787825" t="2017-04-19 22:08:46 lvh I dunno if it matters, but the two data structures are very similar, deeply nested, and form a deep (as opposed to broad) tree"><a href="#t1492639726787825" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-19</span> <span class="t" onclick="H(this)">22:08:46</span>                  lvh </span><span>I dunno if it matters, but the two data structures are very similar, deeply nested, and form a deep (as opposed to broad) tree</span></div><div id="t1492647657250528" t="2017-04-20 00:20:57 nathanmarz @lvh I don&apos;t think specter will be very useful for that"><a href="#t1492647657250528" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">00:20:57</span>           nathanmarz </span><span>@lvh I don&apos;t think specter will be very useful for that</span></div><div id="t1492711140358053" t="2017-04-20 17:59:00 albaker @nathanmarz is there a recursive-path that will not recurse into the transformed value?   i.e.  (recursive-path [] p [(walker vector?) (stay-then-continue ALL p)])  will go for a while, but I&apos;m still finding something will stackoverflow... core.async, futures, apache client. I&apos;m thinking I need to just run transforms again and again, until it no longer transforms rather than in one big recursive blitz"><a href="#t1492711140358053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">17:59:00</span>              albaker </span><span>@nathanmarz is there a recursive-path that will not recurse into the transformed value?   i.e. </span><code>(recursive-path [] p [(walker vector?) (stay-then-continue ALL p)])</code><span> will go for a while, but I&apos;m still finding something will stackoverflow... core.async, futures, apache client. I&apos;m thinking I need to just run transforms again and again, until it no longer transforms rather than in one big recursive blitz</span></div><div id="t1492711276413393" t="2017-04-20 18:01:16 albaker in the stack overflow error, there&apos;s lots of repeating versions of this:"><a href="#t1492711276413393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:01:16</span>              albaker </span><span>in the stack overflow error, there&apos;s lots of repeating versions of this:</span></div><div id="t1492711378453984" t="2017-04-20 18:02:58 nathanmarz @albaker that path is defined so it will continue recursing"><a href="#t1492711378453984" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:02:58</span>           nathanmarz </span><span>@albaker that path is defined so it will continue recursing</span></div><div id="t1492711399462355" t="2017-04-20 18:03:19 nathanmarz recursive-path  itself doesn&apos;t do anything besides provide you the programmer the ability to have the path refer to itself"><a href="#t1492711399462355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:03:19</span>           nathanmarz </span><code>recursive-path</code><span> itself doesn&apos;t do anything besides provide you the programmer the ability to have the path refer to itself</span></div><div id="t1492711416469506" t="2017-04-20 18:03:36 nathanmarz if it&apos;s stack overflowing, then you&apos;re doing something wrong in your program"><a href="#t1492711416469506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:03:36</span>           nathanmarz </span><span>if it&apos;s stack overflowing, then you&apos;re doing something wrong in your program</span></div><div id="t1492711427473736" t="2017-04-20 18:03:47 albaker I&apos;m okay recursing, just not into the results, so I recurse down to the last known genration, apply and end"><a href="#t1492711427473736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:03:47</span>              albaker </span><span>I&apos;m okay recursing, just not into the results, so I recurse down to the last known genration, apply and end</span></div><div id="t1492711443480099" t="2017-04-20 18:04:03 nathanmarz I don&apos;t know what that means"><a href="#t1492711443480099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:04:03</span>           nathanmarz </span><span>I don&apos;t know what that means</span></div><div id="t1492711461487056" t="2017-04-20 18:04:21 nathanmarz whatever logic you want will need to be encoded in the path"><a href="#t1492711461487056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:04:21</span>           nathanmarz </span><span>whatever logic you want will need to be encoded in the path</span></div><div id="t1492711484496220" t="2017-04-20 18:04:44 nathanmarz you can use value collection to keep track of how many levels you&apos;ve recursed"><a href="#t1492711484496220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:04:44</span>           nathanmarz </span><span>you can use value collection to keep track of how many levels you&apos;ve recursed</span></div><div id="t1492711515507978" t="2017-04-20 18:05:15 nathanmarz and then check that using  collected?  to have the path decide whether or not to recurse"><a href="#t1492711515507978" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:05:15</span>           nathanmarz </span><span>and then check that using </span><code>collected?</code><span> to have the path decide whether or not to recurse</span></div><div id="t1492711541518355" t="2017-04-20 18:05:41 nathanmarz or you can encode in your data itself information to allow the path to decide whether to recurse"><a href="#t1492711541518355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:05:41</span>           nathanmarz </span><span>or you can encode in your data itself information to allow the path to decide whether to recurse</span></div><div id="t1492711543519437" t="2017-04-20 18:05:43 nathanmarz e.g. using metadata"><a href="#t1492711543519437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:05:43</span>           nathanmarz </span><span>e.g. using metadata</span></div><div id="t1492711560525733" t="2017-04-20 18:06:00 albaker yeah, something like that - right now I&apos;m keeping a counter ref going"><a href="#t1492711560525733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:06:00</span>              albaker </span><span>yeah, something like that - right now I&apos;m keeping a counter ref going</span></div><div id="t1492711620549579" t="2017-04-20 18:07:00 nathanmarz yea, that would work too"><a href="#t1492711620549579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:07:00</span>           nathanmarz </span><span>yea, that would work too</span></div><div id="t1492711641557895" t="2017-04-20 18:07:21 nathanmarz lots of options available to control termination"><a href="#t1492711641557895" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:07:21</span>           nathanmarz </span><span>lots of options available to control termination</span></div><div id="t1492711673569842" t="2017-04-20 18:07:53 albaker there is a potential for a loop, and I thought I had caught it - but perhaps not"><a href="#t1492711673569842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:07:53</span>              albaker </span><span>there is a potential for a loop, and I thought I had caught it - but perhaps not</span></div><div id="t1492711687575155" t="2017-04-20 18:08:07 albaker there a way to force the transform with recursive path to bail out?"><a href="#t1492711687575155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:08:07</span>              albaker </span><span>there a way to force the transform with recursive path to bail out?</span></div><div id="t1492711709583537" t="2017-04-20 18:08:29 nathanmarz you mean with an exception or something?"><a href="#t1492711709583537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:08:29</span>           nathanmarz </span><span>you mean with an exception or something?</span></div><div id="t1492711786613601" t="2017-04-20 18:09:46 albaker yeah, I guess just a regular exception and wrap the transform in a try/catch"><a href="#t1492711786613601" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:09:46</span>              albaker </span><span>yeah, I guess just a regular exception and wrap the transform in a try/catch</span></div><div id="t1492711815624612" t="2017-04-20 18:10:15 nathanmarz I guess you could make a navigator which does that"><a href="#t1492711815624612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:10:15</span>           nathanmarz </span><span>I guess you could make a navigator which does that</span></div><div id="t1492711833631852" t="2017-04-20 18:10:33 nathanmarz try catch over invoking next-fn, and when your special exception is thrown it returns the structure unchanged"><a href="#t1492711833631852" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:10:33</span>           nathanmarz </span><span>try catch over invoking next-fn, and when your special exception is thrown it returns the structure unchanged</span></div><div id="t1492711867645140" t="2017-04-20 18:11:07 albaker ok, I&apos;ll take a look at that - thanks!"><a href="#t1492711867645140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:11:07</span>              albaker </span><span>ok, I&apos;ll take a look at that - thanks!</span></div><div id="t1492711909661234" t="2017-04-20 18:11:49 nathanmarz imo that&apos;s a dirty way to solve this and you&apos;re better off more precisely specifying when you want recursion to stop"><a href="#t1492711909661234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:11:49</span>           nathanmarz </span><span>imo that&apos;s a dirty way to solve this and you&apos;re better off more precisely specifying when you want recursion to stop</span></div><div id="t1492711920665269" t="2017-04-20 18:12:00 nathanmarz it&apos;s using exceptions for flow control"><a href="#t1492711920665269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:12:00</span>           nathanmarz </span><span>it&apos;s using exceptions for flow control</span></div><div id="t1492711942673820" t="2017-04-20 18:12:22 albaker yeah"><a href="#t1492711942673820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:12:22</span>              albaker </span><span>yeah</span></div><div id="t1492712236786746" t="2017-04-20 18:17:16 albaker ah sweet, found the bug, took the exception out, and now have a near general purpose specter+stardog graph walker for recursively expanding graph data"><a href="#t1492712236786746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:17:16</span>              albaker </span><span>ah sweet, found the bug, took the exception out, and now have a near general purpose specter+stardog graph walker for recursively expanding graph data</span></div><div id="t1492712561911666" t="2017-04-20 18:22:41 albaker @nathanmarz thanks for all the help - this is really nice, with like 6 lines of specter, and a few lines of SPARQL, this thing walks and queries and walks again.  I&apos;ll give a shot out in the blog that&apos;ll fall out from this"><a href="#t1492712561911666" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:22:41</span>              albaker </span><span>@nathanmarz thanks for all the help - this is really nice, with like 6 lines of specter, and a few lines of SPARQL, this thing walks and queries and walks again.  I&apos;ll give a shot out in the blog that&apos;ll fall out from this</span></div><div id="t1492712620933934" t="2017-04-20 18:23:40 nathanmarz @albaker no problem, happy to help"><a href="#t1492712620933934" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:23:40</span>           nathanmarz </span><span>@albaker no problem, happy to help</span></div><div id="t1492712818011433" t="2017-04-20 18:26:58 jeremyraines I have a (maybe similar?) question.  Happy to post on StackOverflow if I can formulate it correctly.  I think the imaginary code I want may explain best:
 (def TreeValues
  (s/recursive-path [] p
    (s/if-path #(not (empty? (:children %)))
      (s/submap [:id :name {{ set :children to [:children s/ALL p] }}  ])
      (s/submap [:id :name :children]))))
"><a href="#t1492712818011433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:26:58</span>         jeremyraines </span><span>I have a (maybe similar?) question.  Happy to post on StackOverflow if I can formulate it correctly.  I think the imaginary code I want may explain best:
</span><pre>(def TreeValues
  (s/recursive-path [] p
    (s/if-path #(not (empty? (:children %)))
      (s/submap [:id :name {{ set :children to [:children s/ALL p] }}  ])
      (s/submap [:id :name :children]))))
</pre></div><div id="t1492712898042226" t="2017-04-20 18:28:18 jeremyraines is this possible without an inner  transform ?  Maybe with some use of  collect  that I haven’t hit on yet?"><a href="#t1492712898042226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:28:18</span>         jeremyraines </span><span>is this possible without an inner </span><code>transform</code><span>?  Maybe with some use of </span><code>collect</code><span> that I haven’t hit on yet?</span></div><div id="t1492713006086134" t="2017-04-20 18:30:06 jeremyraines essentially it’s operating on a vector of maps, where each map has a  :children  key with a vec of the same type of map"><a href="#t1492713006086134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:30:06</span>         jeremyraines </span><span>essentially it’s operating on a vector of maps, where each map has a </span><code>:children</code><span> key with a vec of the same type of map</span></div><div id="t1492713015089691" t="2017-04-20 18:30:15 jeremyraines I’m just trying to prune each level to the keys I want"><a href="#t1492713015089691" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:30:15</span>         jeremyraines </span><span>I’m just trying to prune each level to the keys I want</span></div><div id="t1492713048103032" t="2017-04-20 18:30:48 nathanmarz submap isn&apos;t going to prune keys"><a href="#t1492713048103032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:30:48</span>           nathanmarz </span><span>submap isn&apos;t going to prune keys</span></div><div id="t1492713078114827" t="2017-04-20 18:31:18 nathanmarz it lets you operate on a portion of the map with the result being merged back into the original map"><a href="#t1492713078114827" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:31:18</span>           nathanmarz </span><span>it lets you operate on a portion of the map with the result being merged back into the original map</span></div><div id="t1492713122132193" t="2017-04-20 18:32:02 nathanmarz I think you want to use  continue-then-stay"><a href="#t1492713122132193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:32:02</span>           nathanmarz </span><span>I think you want to use </span><code>continue-then-stay</code></div><div id="t1492713149142879" t="2017-04-20 18:32:29 jeremyraines hmm, OK thanks.  I got the notion of pruning because this is the closet I got, but it only returns the leaves"><a href="#t1492713149142879" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:32:29</span>         jeremyraines </span><span>hmm, OK thanks.  I got the notion of pruning because this is the closet I got, but it only returns the leaves</span></div><div id="t1492713155145367" t="2017-04-20 18:32:35 nathanmarz (recursive-path [] p (continue-then-stay :children ALL p))"><a href="#t1492713155145367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:32:35</span>           nathanmarz </span><code>(recursive-path [] p (continue-then-stay :children ALL p))</code></div><div id="t1492713182155817" t="2017-04-20 18:33:02 jeremyraines (def TreeValues
  (s/recursive-path [] p
    (s/if-path #(not (empty? (:children %)))
      [:children s/ALL p]
      (s/submap [:id :name :children]))))
"><a href="#t1492713182155817" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:33:02</span>         jeremyraines </span><pre>(def TreeValues
  (s/recursive-path [] p
    (s/if-path #(not (empty? (:children %)))
      [:children s/ALL p]
      (s/submap [:id :name :children]))))
</pre></div><div id="t1492713197161830" t="2017-04-20 18:33:17 nathanmarz then you could do:  (transform TreeNodes #(select-keys % [:id :name :children]) data)"><a href="#t1492713197161830" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:33:17</span>           nathanmarz </span><span>then you could do: </span><code>(transform TreeNodes #(select-keys % [:id :name :children]) data)</code></div><div id="t1492713222171645" t="2017-04-20 18:33:42 jeremyraines ok, thanks - reading up on  continue-then-stay  and trying it out"><a href="#t1492713222171645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:33:42</span>         jeremyraines </span><span>ok, thanks - reading up on </span><code>continue-then-stay</code><span> and trying it out</span></div><div id="t1492714119515691" t="2017-04-20 18:48:39 jeremyraines that works, thanks!"><a href="#t1492714119515691" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">18:48:39</span>         jeremyraines </span><span>that works, thanks!</span></div><div id="t1492715023863028" t="2017-04-20 19:03:43 jeremyraines I’m lacking some intuition though . . . I don’t understand why this works:
 (transform [ALL TreeNodes] #(select-keys % [:id :name :children]) data) 
but not this:
 (transform [FIRST TreeNodes] #(select-keys % [:id :name :children]) data)"><a href="#t1492715023863028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:03:43</span>         jeremyraines </span><span>I’m lacking some intuition though . . . I don’t understand why this works:
</span><pre>(transform [ALL TreeNodes] #(select-keys % [:id :name :children]) data)</pre><span>
but not this:
</span><pre>(transform [FIRST TreeNodes] #(select-keys % [:id :name :children]) data)</pre></div><div id="t1492715083884421" t="2017-04-20 19:04:43 nathanmarz what&apos;s not working?"><a href="#t1492715083884421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:04:43</span>           nathanmarz </span><span>what&apos;s not working?</span></div><div id="t1492715163913810" t="2017-04-20 19:06:03 jeremyraines the latter does something, I’m not sure what, on the whole data vec.  I thought it would be equivalent to:"><a href="#t1492715163913810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:06:03</span>         jeremyraines </span><span>the latter does something, I’m not sure what, on the whole data vec.  I thought it would be equivalent to:</span></div><div id="t1492715190923775" t="2017-04-20 19:06:30 jeremyraines (transform [ALL TreeNodes] #(select-keys % [:id :name :children]) (take 1 data))"><a href="#t1492715190923775" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:06:30</span>         jeremyraines </span><code>(transform [ALL TreeNodes] #(select-keys % [:id :name :children]) (take 1 data))</code></div><div id="t1492715219934313" t="2017-04-20 19:06:59 nathanmarz no, it will just do the transformation on the first element of the vector"><a href="#t1492715219934313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:06:59</span>           nathanmarz </span><span>no, it will just do the transformation on the first element of the vector</span></div><div id="t1492715231938269" t="2017-04-20 19:07:11 nathanmarz you&apos;ll still get the whole vector back, but everything beyond the first element will be untouched"><a href="#t1492715231938269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:07:11</span>           nathanmarz </span><span>you&apos;ll still get the whole vector back, but everything beyond the first element will be untouched</span></div><div id="t1492715242942362" t="2017-04-20 19:07:22 jeremyraines oh, got it"><a href="#t1492715242942362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:07:22</span>         jeremyraines </span><span>oh, got it</span></div><div id="t1492715286957585" t="2017-04-20 19:08:06 nathanmarz transform always operates on a select portion of the data structure, with the path specifying how to navigate to what needs to be operated on"><a href="#t1492715286957585" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:08:06</span>           nathanmarz </span><span>transform always operates on a select portion of the data structure, with the path specifying how to navigate to what needs to be operated on</span></div><div id="t1492715407000498" t="2017-04-20 19:10:07 jeremyraines makes sense, I think I understood that but just dropped the context of the basics when struggling with this problem.  Thanks"><a href="#t1492715407000498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-20</span> <span class="t" onclick="H(this)">19:10:07</span>         jeremyraines </span><span>makes sense, I think I understood that but just dropped the context of the basics when struggling with this problem.  Thanks</span></div><div id="t1492896459452066" t="2017-04-22 21:27:39 jeremyraines anyone have a way to get the ancestors of a node in a tree, with or without specter.zipper?"><a href="#t1492896459452066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:27:39</span>         jeremyraines </span><span>anyone have a way to get the ancestors of a node in a tree, with or without specter.zipper?</span></div><div id="t1492896642462358" t="2017-04-22 21:30:42 jeremyraines closest I can get is collecting the path with
 clojure
(def NodeAndParents
  (s/recursive-path [id] p
    (s/if-path #(= (:id %) id)
      s/STAY
      (s/if-path #(empty? (:children %))
        [s/DISPENSE s/STOP]
        [(s/collect-one :id) :children s/ALL p]))))
 
then using the collected ids to go through the tree again, selecting the nodes whose id is in that set"><a href="#t1492896642462358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:30:42</span>         jeremyraines </span><span>closest I can get is collecting the path with
</span><pre>clojure
(def NodeAndParents
  (s/recursive-path [id] p
    (s/if-path #(= (:id %) id)
      s/STAY
      (s/if-path #(empty? (:children %))
        [s/DISPENSE s/STOP]
        [(s/collect-one :id) :children s/ALL p]))))
</pre><span>
then using the collected ids to go through the tree again, selecting the nodes whose id is in that set</span></div><div id="t1492896704465847" t="2017-04-22 21:31:44 nathanmarz @jeremyraines yea that&apos;s pretty much how you do it with specter"><a href="#t1492896704465847" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:31:44</span>           nathanmarz </span><span>@jeremyraines yea that&apos;s pretty much how you do it with specter</span></div><div id="t1492896729467146" t="2017-04-22 21:32:09 jeremyraines ah ok, cool, thanks"><a href="#t1492896729467146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:32:09</span>         jeremyraines </span><span>ah ok, cool, thanks</span></div><div id="t1492896762469147" t="2017-04-22 21:32:42 nathanmarz you can change the last part to  (if-path [:children ALL] [(collect-one :id) :children ALL p])"><a href="#t1492896762469147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:32:42</span>           nathanmarz </span><span>you can change the last part to </span><code>(if-path [:children ALL] [(collect-one :id) :children ALL p])</code></div><div id="t1492896776469902" t="2017-04-22 21:32:56 jeremyraines nice"><a href="#t1492896776469902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:32:56</span>         jeremyraines </span><span>nice</span></div><div id="t1492896777469916" t="2017-04-22 21:32:57 nathanmarz calling  DISPENSE  before  STOP  doesn&apos;t do anything"><a href="#t1492896777469916" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:32:57</span>           nathanmarz </span><span>calling </span><code>DISPENSE</code><span> before </span><code>STOP</code><span> doesn&apos;t do anything</span></div><div id="t1492896812471803" t="2017-04-22 21:33:32 nathanmarz and  if-path  has default &quot;else&quot; branch of  STOP"><a href="#t1492896812471803" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-22</span> <span class="t" onclick="H(this)">21:33:32</span>           nathanmarz </span><span>and </span><code>if-path</code><span> has default &quot;else&quot; branch of </span><code>STOP</code></div><div id="t1492932623926661" t="2017-04-23 07:30:23 sophiago @nathanmarz after seeing your excellent presentation this past week at the NYC Clojure meetup, I think specter could likely greatly help me in working with the output of a library I have that produces deeply nested maps of vectors. Mainly my issue is that built-in functions don&apos;t seem to go deep-enough into the nesting and rolling my own with walking has proven two difficult with all the filtering necessary. I&apos;m using integer keys, which means I should probably switch to the int-map library for efficiency, but that doesn&apos;t seem like it would solve any of my major problems."><a href="#t1492932623926661" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-23</span> <span class="t" onclick="H(this)">07:30:23</span>             sophiago </span><span>@nathanmarz after seeing your excellent presentation this past week at the NYC Clojure meetup, I think specter could likely greatly help me in working with the output of a library I have that produces deeply nested maps of vectors. Mainly my issue is that built-in functions don&apos;t seem to go deep-enough into the nesting and rolling my own with walking has proven two difficult with all the filtering necessary. I&apos;m using integer keys, which means I should probably switch to the int-map library for efficiency, but that doesn&apos;t seem like it would solve any of my major problems.</span></div><div id="t1492932657927912" t="2017-04-23 07:30:57 sophiago I&apos;m currently mainly concerned with the following: 1. I&apos;d like to stick with generating the data into an unsorted map for speed, but when I use  (into (sorted-map) ...)  after the fact it oddly doesn&apos;t sort the deepest level of nesting. 2. Searching for values within the maps using  some  similarly always returns nil as it doesn&apos;t seem to be searching deep enough. 3. Same when it comes to using  filter  to eliminate empty vectors. 4. Same when trying to use  vals  to eliminate keys entirely."><a href="#t1492932657927912" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-23</span> <span class="t" onclick="H(this)">07:30:57</span>             sophiago </span><span>I&apos;m currently mainly concerned with the following: 1. I&apos;d like to stick with generating the data into an unsorted map for speed, but when I use </span><code>(into (sorted-map) ...)</code><span> after the fact it oddly doesn&apos;t sort the deepest level of nesting. 2. Searching for values within the maps using </span><code>some</code><span> similarly always returns nil as it doesn&apos;t seem to be searching deep enough. 3. Same when it comes to using </span><code>filter</code><span> to eliminate empty vectors. 4. Same when trying to use </span><code>vals</code><span> to eliminate keys entirely.</span></div><div id="t1492932729930513" t="2017-04-23 07:32:09 sophiago Although I can see how navigators like  MAP-VALS  and  NIL-&gt;VECTOR  would help with this, I&apos;m having trouble figuring out from the API docs how to compose them to achieve these results. I know this is quite a bit, but any pointers on which functions/macros to look at would be greatly appreciated. Thanks!"><a href="#t1492932729930513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-23</span> <span class="t" onclick="H(this)">07:32:09</span>             sophiago </span><span>Although I can see how navigators like </span><code>MAP-VALS</code><span> and </span><code>NIL-&gt;VECTOR</code><span> would help with this, I&apos;m having trouble figuring out from the API docs how to compose them to achieve these results. I know this is quite a bit, but any pointers on which functions/macros to look at would be greatly appreciated. Thanks!</span></div><div id="t1492950681670186" t="2017-04-23 12:31:21 nathanmarz @sophiago going to be easiest to help you by working through some specific examples"><a href="#t1492950681670186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-23</span> <span class="t" onclick="H(this)">12:31:21</span>           nathanmarz </span><span>@sophiago going to be easiest to help you by working through some specific examples</span></div><div id="t1492950791675355" t="2017-04-23 12:33:11 nathanmarz which navigators you need to compose for a use case depends entirely on the use case, a huge portion of specter&apos;s core navigators could be relevant for what you&apos;ve described so far"><a href="#t1492950791675355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-23</span> <span class="t" onclick="H(this)">12:33:11</span>           nathanmarz </span><span>which navigators you need to compose for a use case depends entirely on the use case, a huge portion of specter&apos;s core navigators could be relevant for what you&apos;ve described so far</span></div><div id="t1492993410316344" t="2017-04-24 00:23:30 sophiago @nathanmarz thanks for getting back to me so fast! This is the library I&apos;m working with:  https://github.com/Sophia-Gold/Madhava-v2 . It&apos;s still pretty rough in terms of functionality I need to build out, but the core of it is computing a large number of partial derivatives all at once and storing them in an atomic hash-map. Since the number of partials grows exponentially by order and are stored with keys that match them to the corresponding variables at each order this means the maps end up heavily nested. The Github README describes how to use it, but I&apos;ll paste a snippet of the function that creates the map (which is quite small) below and describe some operations on it I&apos;m having trouble getting done with core functions."><a href="#t1492993410316344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:23:30</span>             sophiago </span><span>@nathanmarz thanks for getting back to me so fast! This is the library I&apos;m working with: </span><a href="https://github.com/Sophia-Gold/Madhava-v2" target="_blank">https://github.com/Sophia-Gold/Madhava-v2</a><span>. It&apos;s still pretty rough in terms of functionality I need to build out, but the core of it is computing a large number of partial derivatives all at once and storing them in an atomic hash-map. Since the number of partials grows exponentially by order and are stored with keys that match them to the corresponding variables at each order this means the maps end up heavily nested. The Github README describes how to use it, but I&apos;ll paste a snippet of the function that creates the map (which is quite small) below and describe some operations on it I&apos;m having trouble getting done with core functions.</span></div><div id="t1492993595329467" t="2017-04-24 00:26:35 sophiago I should also mention I did try using  data.int-map  last night and the increase in speed was barely noticeable, presumably because when generating the map I&apos;m only  assoc ing data into it and not calling  update . Let me know if you think  int-map  makes more sense with some of the operations on it I&apos;m thinking of."><a href="#t1492993595329467" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:26:35</span>             sophiago </span><span>I should also mention I did try using </span><code>data.int-map</code><span> last night and the increase in speed was barely noticeable, presumably because when generating the map I&apos;m only </span><code>assoc</code><span>ing data into it and not calling </span><code>update</code><span>. Let me know if you think </span><code>int-map</code><span> makes more sense with some of the operations on it I&apos;m thinking of.</span></div><div id="t1492993934354053" t="2017-04-24 00:32:14 sophiago So for starters, the reason why I thought of this project with regards to specter is because I initially tried to implement some functions that would combine two maps by applying a given binary operation to all the values with matching keys (meaning all their keys matching down to the deepest level of nesting) and then either throw out the disjoint key-value pairs or merge them as is. I tried implementing that with  postwalk , but found it too messy to match for just the values (all vectors) since it returns everything in the map."><a href="#t1492993934354053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:32:14</span>             sophiago </span><span>So for starters, the reason why I thought of this project with regards to specter is because I initially tried to implement some functions that would combine two maps by applying a given binary operation to all the values with matching keys (meaning all their keys matching down to the deepest level of nesting) and then either throw out the disjoint key-value pairs or merge them as is. I tried implementing that with </span><code>postwalk</code><span>, but found it too messy to match for just the values (all vectors) since it returns everything in the map.</span></div><div id="t1492994142369170" t="2017-04-24 00:35:42 sophiago More realistically for calculating gradients I&apos;d need to use my  linear-transform  function in this library as the binary function yet instead of between two different maps, to values store in adjacent keys with some type of weighting scheme. I don&apos;t have that fully specified yet, so can set it aside, but I think specter could greatly help. I&apos;m thinking something like a zipper except instead of starting from the head, which would be ridiculously slow, I&apos;d want to go straight to the relevant key and then create the zipper right there."><a href="#t1492994142369170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:35:42</span>             sophiago </span><span>More realistically for calculating gradients I&apos;d need to use my </span><code>linear-transform</code><span> function in this library as the binary function yet instead of between two different maps, to values store in adjacent keys with some type of weighting scheme. I don&apos;t have that fully specified yet, so can set it aside, but I think specter could greatly help. I&apos;m thinking something like a zipper except instead of starting from the head, which would be ridiculously slow, I&apos;d want to go straight to the relevant key and then create the zipper right there.</span></div><div id="t1492994447390816" t="2017-04-24 00:40:47 sophiago That&apos;s a bit abstract, but a simpler example are the operations I referred to last night. I was trying to see if I could use partial differentiation to encode laws for cellular automata so started playing around with extremely large maps (often verging on too large to print) generated from one very high-dimensional term and going up to many orders like so:  (diff [[0 0 0 1 0 0 1 1 0 1 1 1 1 1]] diff-map 7) . That&apos;s the map I was trying to search inside of using  some  (to see if the initial term was repeated) and realized it failed searching for any values due to the level of nesting. Similarly, when using  (into (sorted-map) ...)  how it would sort to everything but the final level of nesting,  filter  to eliminate &gt;50% of it that consisted of empty vectors, and  vals  to try and visualize the entire thing with the keys stripped out entirely."><a href="#t1492994447390816" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:40:47</span>             sophiago </span><span>That&apos;s a bit abstract, but a simpler example are the operations I referred to last night. I was trying to see if I could use partial differentiation to encode laws for cellular automata so started playing around with extremely large maps (often verging on too large to print) generated from one very high-dimensional term and going up to many orders like so: </span><code>(diff [[0 0 0 1 0 0 1 1 0 1 1 1 1 1]] diff-map 7)</code><span>. That&apos;s the map I was trying to search inside of using </span><code>some</code><span> (to see if the initial term was repeated) and realized it failed searching for any values due to the level of nesting. Similarly, when using </span><code>(into (sorted-map) ...)</code><span> how it would sort to everything but the final level of nesting, </span><code>filter</code><span> to eliminate &gt;50% of it that consisted of empty vectors, and </span><code>vals</code><span> to try and visualize the entire thing with the keys stripped out entirely.</span></div><div id="t1492994526396676" t="2017-04-24 00:42:06 sophiago So that gives me five operations on nested hash-maps I couldn&apos;t achieve with core. I&apos;m not sure how involved they&apos;d be to do with specter, but seems like they could be a very good place to start as far as learning the library."><a href="#t1492994526396676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">00:42:06</span>             sophiago </span><span>So that gives me five operations on nested hash-maps I couldn&apos;t achieve with core. I&apos;m not sure how involved they&apos;d be to do with specter, but seems like they could be a very good place to start as far as learning the library.</span></div><div id="t1493007693585077" t="2017-04-24 04:21:33 nathanmarz @sophiago partial-diff can be written with specter like:
 (let [pidx (peek idx)]
  (select [ALL
           (selected? (keypath pidx) #(-&gt; % zero? not))
           (view
            (fn [expr]
              (-&gt; expr
                  (update 0 * (get expr pidx))
                  (update pidx dec))))]
    p
    ))
"><a href="#t1493007693585077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:21:33</span>           nathanmarz </span><span>@sophiago partial-diff can be written with specter like:
</span><pre>(let [pidx (peek idx)]
  (select [ALL
           (selected? (keypath pidx) #(-&gt; % zero? not))
           (view
            (fn [expr]
              (-&gt; expr
                  (update 0 * (get expr pidx))
                  (update pidx dec))))]
    p
    ))
</pre></div><div id="t1493007735588266" t="2017-04-24 04:22:15 nathanmarz maybe a little bit of an improvement"><a href="#t1493007735588266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:22:15</span>           nathanmarz </span><span>maybe a little bit of an improvement</span></div><div id="t1493007797593202" t="2017-04-24 04:23:17 nathanmarz this is a lot of code for me to parse, I can&apos;t really help with what are the optimal data structures / algorithms for this purpose"><a href="#t1493007797593202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:23:17</span>           nathanmarz </span><span>this is a lot of code for me to parse, I can&apos;t really help with what are the optimal data structures / algorithms for this purpose</span></div><div id="t1493007835596607" t="2017-04-24 04:23:55 nathanmarz if you show me subproblems you&apos;re dealing with, with inputs you have and outputs you want, I can show you how to use specter for it"><a href="#t1493007835596607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:23:55</span>           nathanmarz </span><span>if you show me subproblems you&apos;re dealing with, with inputs you have and outputs you want, I can show you how to use specter for it</span></div><div id="t1493007840596960" t="2017-04-24 04:24:00 sophiago Interesting. I&apos;m not sure how much of performance I can wring out of that tiny function, but it helps me to understand specter."><a href="#t1493007840596960" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:24:00</span>             sophiago </span><span>Interesting. I&apos;m not sure how much of performance I can wring out of that tiny function, but it helps me to understand specter.</span></div><div id="t1493007871599648" t="2017-04-24 04:24:31 nathanmarz specter&apos;s most useful when you want to change part of a data structure"><a href="#t1493007871599648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:24:31</span>           nathanmarz </span><span>specter&apos;s most useful when you want to change part of a data structure</span></div><div id="t1493007876600079" t="2017-04-24 04:24:36 nathanmarz (and leave the rest unchanged)"><a href="#t1493007876600079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:24:36</span>           nathanmarz </span><span>(and leave the rest unchanged)</span></div><div id="t1493007897601614" t="2017-04-24 04:24:57 nathanmarz when you want to combine everything into a new data structure, that&apos;s not what specter is for"><a href="#t1493007897601614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:24:57</span>           nathanmarz </span><span>when you want to combine everything into a new data structure, that&apos;s not what specter is for</span></div><div id="t1493007909602642" t="2017-04-24 04:25:09 nathanmarz though it can be helpful for pieces of it"><a href="#t1493007909602642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:25:09</span>           nathanmarz </span><span>though it can be helpful for pieces of it</span></div><div id="t1493007928604192" t="2017-04-24 04:25:28 nathanmarz (`traverse` is useful when you want to combine only parts of a data structure)"><a href="#t1493007928604192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:25:28</span>           nathanmarz </span><span>(`traverse` is useful when you want to combine only parts of a data structure)</span></div><div id="t1493007980608824" t="2017-04-24 04:26:20 sophiago Well, I mentioned a few tasks so I&apos;m trying to think where&apos;s the best to start. I did have trouble figuring out how to combine two nested maps by applying a function to all values with the same key signature, but you&apos;re saying specter isn&apos;t ideal for something like that?"><a href="#t1493007980608824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:26:20</span>             sophiago </span><span>Well, I mentioned a few tasks so I&apos;m trying to think where&apos;s the best to start. I did have trouble figuring out how to combine two nested maps by applying a function to all values with the same key signature, but you&apos;re saying specter isn&apos;t ideal for something like that?</span></div><div id="t1493008011611578" t="2017-04-24 04:26:51 nathanmarz it really depends on the problem"><a href="#t1493008011611578" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:26:51</span>           nathanmarz </span><span>it really depends on the problem</span></div><div id="t1493008031613271" t="2017-04-24 04:27:11 sophiago So far everything I&apos;ve mentioned is an operation on an entire map, either like above, or scrubbing the data in some way or other."><a href="#t1493008031613271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:27:11</span>             sophiago </span><span>So far everything I&apos;ve mentioned is an operation on an entire map, either like above, or scrubbing the data in some way or other.</span></div><div id="t1493008038613886" t="2017-04-24 04:27:18 nathanmarz if you just had two random maps that you wanted to combine, probably not"><a href="#t1493008038613886" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:27:18</span>           nathanmarz </span><span>if you just had two random maps that you wanted to combine, probably not</span></div><div id="t1493008058615486" t="2017-04-24 04:27:38 nathanmarz but if you wanted to do something like merge a map in one location in a data structure with another map at some other location, specter will be useful"><a href="#t1493008058615486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:27:38</span>           nathanmarz </span><span>but if you wanted to do something like merge a map in one location in a data structure with another map at some other location, specter will be useful</span></div><div id="t1493008110619501" t="2017-04-24 04:28:30 sophiago As mentioned, even just sorting and filtering deeply nested maps is not quite working out with core. How would you go about that?"><a href="#t1493008110619501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:28:30</span>             sophiago </span><span>As mentioned, even just sorting and filtering deeply nested maps is not quite working out with core. How would you go about that?</span></div><div id="t1493008125620621" t="2017-04-24 04:28:45 nathanmarz well"><a href="#t1493008125620621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:28:45</span>           nathanmarz </span><span>well</span></div><div id="t1493008126620734" t="2017-04-24 04:28:46 sophiago Or searching for a value inside one?"><a href="#t1493008126620734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:28:46</span>             sophiago </span><span>Or searching for a value inside one?</span></div><div id="t1493008133621192" t="2017-04-24 04:28:53 nathanmarz what&apos;s a specific example of what you want to do?"><a href="#t1493008133621192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:28:53</span>           nathanmarz </span><span>what&apos;s a specific example of what you want to do?</span></div><div id="t1493008135621371" t="2017-04-24 04:28:55 nathanmarz input and output"><a href="#t1493008135621371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:28:55</span>           nathanmarz </span><span>input and output</span></div><div id="t1493008168624049" t="2017-04-24 04:29:28 sophiago one second"><a href="#t1493008168624049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:29:28</span>             sophiago </span><span>one second</span></div><div id="t1493008488652750" t="2017-04-24 04:34:48 sophiago So, as one example,  (some #(= % [[120 3 3 0]]) @diff-map)  returns  nil  even though that value is in the map."><a href="#t1493008488652750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:34:48</span>             sophiago </span><span>So, as one example, </span><code>(some #(= % [[120 3 3 0]]) @diff-map)</code><span> returns </span><code>nil</code><span> even though that value is in the map.</span></div><div id="t1493008533656603" t="2017-04-24 04:35:33 nathanmarz ah"><a href="#t1493008533656603" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:35:33</span>           nathanmarz </span><span>ah</span></div><div id="t1493008545657669" t="2017-04-24 04:35:45 nathanmarz ok, for this specter can be very helpful"><a href="#t1493008545657669" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:35:45</span>           nathanmarz </span><span>ok, for this specter can be very helpful</span></div><div id="t1493008575660790" t="2017-04-24 04:36:15 nathanmarz you can define a recursive navigator to the &quot;leaves&quot; of the structure (values which are vectors)"><a href="#t1493008575660790" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:36:15</span>           nathanmarz </span><span>you can define a recursive navigator to the &quot;leaves&quot; of the structure (values which are vectors)</span></div><div id="t1493008577661032" t="2017-04-24 04:36:17 nathanmarz one sec"><a href="#t1493008577661032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:36:17</span>           nathanmarz </span><span>one sec</span></div><div id="t1493008630666214" t="2017-04-24 04:37:10 nathanmarz (def LEAVES
  (recursive-path [] p
    (if-path map?
      [MAP-VALS p]
      STAY
      )))
"><a href="#t1493008630666214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:37:10</span>           nathanmarz </span><pre>(def LEAVES
  (recursive-path [] p
    (if-path map?
      [MAP-VALS p]
      STAY
      )))
</pre></div><div id="t1493008668670378" t="2017-04-24 04:37:48 nathanmarz then you can do  (select-first [LEAVES #(= % [[120 3 3 0]])] @diff-map)"><a href="#t1493008668670378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:37:48</span>           nathanmarz </span><span>then you can do </span><code>(select-first [LEAVES #(= % [[120 3 3 0]])] @diff-map)</code></div><div id="t1493008684672139" t="2017-04-24 04:38:04 nathanmarz that will return either [[120 3 3 0]] or nil"><a href="#t1493008684672139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:38:04</span>           nathanmarz </span><span>that will return either [[120 3 3 0]] or nil</span></div><div id="t1493008693672986" t="2017-04-24 04:38:13 sophiago Oh wow, great."><a href="#t1493008693672986" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:38:13</span>             sophiago </span><span>Oh wow, great.</span></div><div id="t1493008698673639" t="2017-04-24 04:38:18 nathanmarz if you do  select , then you&apos;ll get a sequence of every match"><a href="#t1493008698673639" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:38:18</span>           nathanmarz </span><span>if you do </span><code>select</code><span>, then you&apos;ll get a sequence of every match</span></div><div id="t1493008717675791" t="2017-04-24 04:38:37 nathanmarz that&apos;s very performant too"><a href="#t1493008717675791" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:38:37</span>           nathanmarz </span><span>that&apos;s very performant too</span></div><div id="t1493008747678950" t="2017-04-24 04:39:07 nathanmarz you can continue navigation at each leaf as well"><a href="#t1493008747678950" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:39:07</span>           nathanmarz </span><span>you can continue navigation at each leaf as well</span></div><div id="t1493008767681047" t="2017-04-24 04:39:27 nathanmarz (select [LEAVES ALL ALL odd?] @diff-map)  gets you call the odd numbers in those vectors"><a href="#t1493008767681047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:39:27</span>           nathanmarz </span><code>(select [LEAVES ALL ALL odd?] @diff-map)</code><span> gets you call the odd numbers in those vectors</span></div><div id="t1493008808685622" t="2017-04-24 04:40:08 sophiago So I can also use  select  like how I want  vals  to work on a structure like this? To strip out keys?"><a href="#t1493008808685622" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:40:08</span>             sophiago </span><span>So I can also use </span><code>select</code><span> like how I want </span><code>vals</code><span> to work on a structure like this? To strip out keys?</span></div><div id="t1493008825687174" t="2017-04-24 04:40:25 nathanmarz don&apos;t think of it as &quot;stripping&quot;"><a href="#t1493008825687174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:40:25</span>           nathanmarz </span><span>don&apos;t think of it as &quot;stripping&quot;</span></div><div id="t1493008834688334" t="2017-04-24 04:40:34 sophiago (select [LEAVES ALL] @diff-map) ?"><a href="#t1493008834688334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:40:34</span>             sophiago </span><code>(select [LEAVES ALL] @diff-map)</code><span>?</span></div><div id="t1493008835688416" t="2017-04-24 04:40:35 nathanmarz it&apos;s just querying the data structure for a sequence of matches"><a href="#t1493008835688416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:40:35</span>           nathanmarz </span><span>it&apos;s just querying the data structure for a sequence of matches</span></div><div id="t1493008863691266" t="2017-04-24 04:41:03 nathanmarz but yea, that will get you all the vectors of numbers as a single sequence"><a href="#t1493008863691266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:41:03</span>           nathanmarz </span><span>but yea, that will get you all the vectors of numbers as a single sequence</span></div><div id="t1493008911696199" t="2017-04-24 04:41:51 sophiago Oh, as a sequence? I thought a big feature was returning the same kind of data structure. What if I want to perform operations on all the values and return a map with the same nesting? For example filtering?"><a href="#t1493008911696199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:41:51</span>             sophiago </span><span>Oh, as a sequence? I thought a big feature was returning the same kind of data structure. What if I want to perform operations on all the values and return a map with the same nesting? For example filtering?</span></div><div id="t1493008923697236" t="2017-04-24 04:42:03 nathanmarz use  transform  for that"><a href="#t1493008923697236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:42:03</span>           nathanmarz </span><span>use </span><code>transform</code><span> for that</span></div><div id="t1493008955700181" t="2017-04-24 04:42:35 nathanmarz (transform [LEAVES ALL ALL even?] inc @diff-map)"><a href="#t1493008955700181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:42:35</span>           nathanmarz </span><code>(transform [LEAVES ALL ALL even?] inc @diff-map)</code></div><div id="t1493008967701054" t="2017-04-24 04:42:47 nathanmarz that gives you a new map with all the even numbers incremented"><a href="#t1493008967701054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:42:47</span>           nathanmarz </span><span>that gives you a new map with all the even numbers incremented</span></div><div id="t1493008983702378" t="2017-04-24 04:43:03 sophiago Ah, this is quite easy once you wrote that LEAVES navigator  🙂"><a href="#t1493008983702378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:43:03</span>             sophiago </span><span>Ah, this is quite easy once you wrote that LEAVES navigator </span><b>🙂</b></div><div id="t1493008995703280" t="2017-04-24 04:43:15 nathanmarz (setval [LEAVES ALL AFTER-ELEM] 10)  appends the value 10 to each vector of numbers"><a href="#t1493008995703280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:43:15</span>           nathanmarz </span><code>(setval [LEAVES ALL AFTER-ELEM] 10)</code><span> appends the value 10 to each vector of numbers</span></div><div id="t1493009113713264" t="2017-04-24 04:45:13 sophiago For just filtering would you recommend calling  transform  with  identity  as the function?"><a href="#t1493009113713264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:45:13</span>             sophiago </span><span>For just filtering would you recommend calling </span><code>transform</code><span> with </span><code>identity</code><span> as the function?</span></div><div id="t1493009133715144" t="2017-04-24 04:45:33 nathanmarz what&apos;s an example of what you want to filter?"><a href="#t1493009133715144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:45:33</span>           nathanmarz </span><span>what&apos;s an example of what you want to filter?</span></div><div id="t1493009151716723" t="2017-04-24 04:45:51 nathanmarz most likely it will be something along the lines of  (setval [...] NONE @diff-map)"><a href="#t1493009151716723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:45:51</span>           nathanmarz </span><span>most likely it will be something along the lines of </span><code>(setval [...] NONE @diff-map)</code></div><div id="t1493009183719382" t="2017-04-24 04:46:23 nathanmarz (setval [LEAVES ALL (selected? ALL even?)] NONE @diff-map)  will remove any vector of nums that has an even number within"><a href="#t1493009183719382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:23</span>           nathanmarz </span><code>(setval [LEAVES ALL (selected? ALL even?)] NONE @diff-map)</code><span> will remove any vector of nums that has an even number within</span></div><div id="t1493009188719788" t="2017-04-24 04:46:28 sophiago I was thinking something like  (transform [LEAVES ALL ALL #(not= [])] identity @diff-map)"><a href="#t1493009188719788" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:28</span>             sophiago </span><span>I was thinking something like </span><code>(transform [LEAVES ALL ALL #(not= [])] identity @diff-map)</code></div><div id="t1493009197720578" t="2017-04-24 04:46:37 sophiago err wait...one less ALL"><a href="#t1493009197720578" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:37</span>             sophiago </span><span>err wait...one less ALL</span></div><div id="t1493009200720786" t="2017-04-24 04:46:40 sophiago I think?"><a href="#t1493009200720786" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:40</span>             sophiago </span><span>I think?</span></div><div id="t1493009208721556" t="2017-04-24 04:46:48 nathanmarz what you wrote will be a no-op"><a href="#t1493009208721556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:48</span>           nathanmarz </span><span>what you wrote will be a no-op</span></div><div id="t1493009212721885" t="2017-04-24 04:46:52 sophiago Ah ok"><a href="#t1493009212721885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:46:52</span>             sophiago </span><span>Ah ok</span></div><div id="t1493009220722519" t="2017-04-24 04:47:00 nathanmarz you want to remove empty vectors?"><a href="#t1493009220722519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:47:00</span>           nathanmarz </span><span>you want to remove empty vectors?</span></div><div id="t1493009285727894" t="2017-04-24 04:48:05 sophiago Yes. I&apos;m more interested in working with the vectors as a whole than values inside of them. So that&apos;s one example. I can see wanting to apply a function to a whole vector like you did about with  inc  as well, though."><a href="#t1493009285727894" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:48:05</span>             sophiago </span><span>Yes. I&apos;m more interested in working with the vectors as a whole than values inside of them. So that&apos;s one example. I can see wanting to apply a function to a whole vector like you did about with </span><code>inc</code><span> as well, though.</span></div><div id="t1493009295728751" t="2017-04-24 04:48:15 nathanmarz (setval [LEAVES ALL #(= [] %)] NONE @diff-map)  will remove empty vectors"><a href="#t1493009295728751" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:48:15</span>           nathanmarz </span><code>(setval [LEAVES ALL #(= [] %)] NONE @diff-map)</code><span> will remove empty vectors</span></div><div id="t1493009324731469" t="2017-04-24 04:48:44 nathanmarz (transform [LEAVES ALL] some-custom-fn @diff-map)  runs an arbitrary function on each vec of nums"><a href="#t1493009324731469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:48:44</span>           nathanmarz </span><code>(transform [LEAVES ALL] some-custom-fn @diff-map)</code><span> runs an arbitrary function on each vec of nums</span></div><div id="t1493009377736041" t="2017-04-24 04:49:37 nathanmarz the path in transform says what you want to change in the data structure, meaning anything else will remain unchanged"><a href="#t1493009377736041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:49:37</span>           nathanmarz </span><span>the path in transform says what you want to change in the data structure, meaning anything else will remain unchanged</span></div><div id="t1493009395737622" t="2017-04-24 04:49:55 nathanmarz so what you wrote says to transform each non empty vector with  identity"><a href="#t1493009395737622" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:49:55</span>           nathanmarz </span><span>so what you wrote says to transform each non empty vector with </span><code>identity</code></div><div id="t1493009399737961" t="2017-04-24 04:49:59 sophiago This is really great! I don&apos;t quite understand how you defined the LEAVES navigator to begin with, but from there everything is incredibly simple."><a href="#t1493009399737961" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:49:59</span>             sophiago </span><span>This is really great! I don&apos;t quite understand how you defined the LEAVES navigator to begin with, but from there everything is incredibly simple.</span></div><div id="t1493009413739168" t="2017-04-24 04:50:13 nathanmarz it&apos;s pretty simple"><a href="#t1493009413739168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:50:13</span>           nathanmarz </span><span>it&apos;s pretty simple</span></div><div id="t1493009426740449" t="2017-04-24 04:50:26 nathanmarz it&apos;s just saying how to get to the vec of vecs"><a href="#t1493009426740449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:50:26</span>           nathanmarz </span><span>it&apos;s just saying how to get to the vec of vecs</span></div><div id="t1493009451742824" t="2017-04-24 04:50:51 nathanmarz recursive-path  lets you have the path refer to itself (using  p  in this case)"><a href="#t1493009451742824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:50:51</span>           nathanmarz </span><code>recursive-path</code><span> lets you have the path refer to itself (using </span><code>p</code><span> in this case)</span></div><div id="t1493009492746382" t="2017-04-24 04:51:32 nathanmarz it&apos;s saying &quot;if currently at a map, recurse at all the map vals, otherwise already at the target so stay navigated&quot;"><a href="#t1493009492746382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:51:32</span>           nathanmarz </span><span>it&apos;s saying &quot;if currently at a map, recurse at all the map vals, otherwise already at the target so stay navigated&quot;</span></div><div id="t1493009508747729" t="2017-04-24 04:51:48 sophiago Right. I get it now."><a href="#t1493009508747729" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:51:48</span>             sophiago </span><span>Right. I get it now.</span></div><div id="t1493009542750587" t="2017-04-24 04:52:22 sophiago What about merging two maps with a transformation function?"><a href="#t1493009542750587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:52:22</span>             sophiago </span><span>What about merging two maps with a transformation function?</span></div><div id="t1493009566752614" t="2017-04-24 04:52:46 nathanmarz example?"><a href="#t1493009566752614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:52:46</span>           nathanmarz </span><span>example?</span></div><div id="t1493009666761407" t="2017-04-24 04:54:26 sophiago Let&apos;s say I have two of that map above, so the keys are equal, and I want a new map with the same structure and the values the result of a binary function applied to the old one?"><a href="#t1493009666761407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:54:26</span>             sophiago </span><span>Let&apos;s say I have two of that map above, so the keys are equal, and I want a new map with the same structure and the values the result of a binary function applied to the old one?</span></div><div id="t1493009755769385" t="2017-04-24 04:55:55 sophiago I don&apos;t want to make it more complicated by adding a long function to multiply or divide two vectors, but you get the idea. I would also ideally like to be able to choose what to do with key signatures that don&apos;t match, but that seems more complicated."><a href="#t1493009755769385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:55:55</span>             sophiago </span><span>I don&apos;t want to make it more complicated by adding a long function to multiply or divide two vectors, but you get the idea. I would also ideally like to be able to choose what to do with key signatures that don&apos;t match, but that seems more complicated.</span></div><div id="t1493009768770538" t="2017-04-24 04:56:08 nathanmarz ah, yea specter won&apos;t help with that"><a href="#t1493009768770538" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:56:08</span>           nathanmarz </span><span>ah, yea specter won&apos;t help with that</span></div><div id="t1493009778771378" t="2017-04-24 04:56:18 nathanmarz that sounds like a somewhat complicated  merge-with"><a href="#t1493009778771378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:56:18</span>           nathanmarz </span><span>that sounds like a somewhat complicated </span><code>merge-with</code></div><div id="t1493009812774377" t="2017-04-24 04:56:52 sophiago I can&apos;t quite remember, but that must have been the first thing I tried for that before  postwalk . It works with nesting?"><a href="#t1493009812774377" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:56:52</span>             sophiago </span><span>I can&apos;t quite remember, but that must have been the first thing I tried for that before </span><code>postwalk</code><span>. It works with nesting?</span></div><div id="t1493009823775253" t="2017-04-24 04:57:03 nathanmarz well"><a href="#t1493009823775253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:57:03</span>           nathanmarz </span><span>well</span></div><div id="t1493009843777025" t="2017-04-24 04:57:23 nathanmarz your call to  merge-with  will have to be recursive"><a href="#t1493009843777025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:57:23</span>           nathanmarz </span><span>your call to </span><code>merge-with</code><span> will have to be recursive</span></div><div id="t1493009868779220" t="2017-04-24 04:57:48 sophiago Right. I think what happened was I gave up on writing a recursive  merge-with   😛"><a href="#t1493009868779220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:57:48</span>             sophiago </span><span>Right. I think what happened was I gave up on writing a recursive </span><code>merge-with</code><span> </span><b>😛</b></div><div id="t1493009931784660" t="2017-04-24 04:58:51 nathanmarz i&apos;ve thought a bit about extending specter to walk multiple structures at once, but I haven&apos;t personally had many use cases for it"><a href="#t1493009931784660" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:58:51</span>           nathanmarz </span><span>i&apos;ve thought a bit about extending specter to walk multiple structures at once, but I haven&apos;t personally had many use cases for it</span></div><div id="t1493009965787872" t="2017-04-24 04:59:25 nathanmarz it would likely be a massive change to how specter works and I&apos;m not sure it can be done while maintaining near-optimal efficiency"><a href="#t1493009965787872" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:59:25</span>           nathanmarz </span><span>it would likely be a massive change to how specter works and I&apos;m not sure it can be done while maintaining near-optimal efficiency</span></div><div id="t1493009966787928" t="2017-04-24 04:59:26 sophiago It seems like it would help with that as is... I&apos;d have to think about it a bit."><a href="#t1493009966787928" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:59:26</span>             sophiago </span><span>It seems like it would help with that as is... I&apos;d have to think about it a bit.</span></div><div id="t1493009987789716" t="2017-04-24 04:59:47 sophiago Yeah, I&apos;m not taking into account efficiency of using specter for something like that."><a href="#t1493009987789716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">04:59:47</span>             sophiago </span><span>Yeah, I&apos;m not taking into account efficiency of using specter for something like that.</span></div><div id="t1493010012792543" t="2017-04-24 05:00:12 nathanmarz those transformations I was showing before will be near-optimal efficiency"><a href="#t1493010012792543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:00:12</span>           nathanmarz </span><span>those transformations I was showing before will be near-optimal efficiency</span></div><div id="t1493010022793603" t="2017-04-24 05:00:22 sophiago I do think being able to precisely define a path and apply  transform  to that will really help me with this library."><a href="#t1493010022793603" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:00:22</span>             sophiago </span><span>I do think being able to precisely define a path and apply </span><code>transform</code><span> to that will really help me with this library.</span></div><div id="t1493010034794882" t="2017-04-24 05:00:34 nathanmarz will blow away the performance of postwalk"><a href="#t1493010034794882" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:00:34</span>           nathanmarz </span><span>will blow away the performance of postwalk</span></div><div id="t1493010043795746" t="2017-04-24 05:00:43 nathanmarz yea, I think this should be a good start for you"><a href="#t1493010043795746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:00:43</span>           nathanmarz </span><span>yea, I think this should be a good start for you</span></div><div id="t1493010064797755" t="2017-04-24 05:01:04 sophiago postwalk  just is really difficult to work with due to everything it returns"><a href="#t1493010064797755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:01:04</span>             sophiago </span><code>postwalk</code><span> just is really difficult to work with due to everything it returns</span></div><div id="t1493010159807197" t="2017-04-24 05:02:39 sophiago I guess the only other thing I was going to ask about was sorting and why  (into (sorted-map) @diff-map)  wasn&apos;t changing anything. This one came out perfectly sorted, but when they get really gigantic and hairy, they&apos;re not on the deepest level. I designed it that way in case I wanted to use something similar to  pmap ."><a href="#t1493010159807197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:02:39</span>             sophiago </span><span>I guess the only other thing I was going to ask about was sorting and why </span><code>(into (sorted-map) @diff-map)</code><span> wasn&apos;t changing anything. This one came out perfectly sorted, but when they get really gigantic and hairy, they&apos;re not on the deepest level. I designed it that way in case I wanted to use something similar to </span><code>pmap</code><span>.</span></div><div id="t1493010204811278" t="2017-04-24 05:03:24 nathanmarz that will only sort the first level"><a href="#t1493010204811278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:03:24</span>           nathanmarz </span><span>that will only sort the first level</span></div><div id="t1493010216812439" t="2017-04-24 05:03:36 sophiago Ah ok. Then that&apos;s the expected behavior."><a href="#t1493010216812439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:03:36</span>             sophiago </span><span>Ah ok. Then that&apos;s the expected behavior.</span></div><div id="t1493010252815755" t="2017-04-24 05:04:12 nathanmarz you can define a navigator to every map and then do  (transform MAP-NODES #(into (sorted-map) %) @diff-map)"><a href="#t1493010252815755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:04:12</span>           nathanmarz </span><span>you can define a navigator to every map and then do </span><code>(transform MAP-NODES #(into (sorted-map) %) @diff-map)</code></div><div id="t1493010289819056" t="2017-04-24 05:04:49 nathanmarz (def MAP-NODES
  (recursive-path [] p
    (if-path map?
      (continue-then-stay MAP-VALS p))
    ))
"><a href="#t1493010289819056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:04:49</span>           nathanmarz </span><pre>(def MAP-NODES
  (recursive-path [] p
    (if-path map?
      (continue-then-stay MAP-VALS p))
    ))
</pre></div><div id="t1493010311821173" t="2017-04-24 05:05:11 sophiago Yes, I was just going to say. It helps to see the navigator for that as well."><a href="#t1493010311821173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:05:11</span>             sophiago </span><span>Yes, I was just going to say. It helps to see the navigator for that as well.</span></div><div id="t1493010371827035" t="2017-04-24 05:06:11 nathanmarz anyway, it&apos;s bedtime for me, I&apos;ll be back online tomorrow if you have more questions"><a href="#t1493010371827035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:06:11</span>           nathanmarz </span><span>anyway, it&apos;s bedtime for me, I&apos;ll be back online tomorrow if you have more questions</span></div><div id="t1493010418831459" t="2017-04-24 05:06:58 sophiago Thanks so much! This will definitely get me started. I was also just going to ask whether you find much of a speed increase using  int-map  with these kind of functions?"><a href="#t1493010418831459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:06:58</span>             sophiago </span><span>Thanks so much! This will definitely get me started. I was also just going to ask whether you find much of a speed increase using </span><code>int-map</code><span> with these kind of functions?</span></div><div id="t1493010488837594" t="2017-04-24 05:08:08 nathanmarz I&apos;ve never used  int-map  so I&apos;m not familiar with which operations it achieves speedups"><a href="#t1493010488837594" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:08:08</span>           nathanmarz </span><span>I&apos;ve never used </span><code>int-map</code><span> so I&apos;m not familiar with which operations it achieves speedups</span></div><div id="t1493010525840956" t="2017-04-24 05:08:45 nathanmarz I&apos;m guessing it&apos;s faster for get and assoc, which these transformations we&apos;ve been doing aren&apos;t using"><a href="#t1493010525840956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:08:45</span>           nathanmarz </span><span>I&apos;m guessing it&apos;s faster for get and assoc, which these transformations we&apos;ve been doing aren&apos;t using</span></div><div id="t1493010595847436" t="2017-04-24 05:09:55 sophiago I actually found very little increase for  assoc . I think the main benefit is when you&apos;re calling  update  frequently since it provides its own version of that."><a href="#t1493010595847436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span> <span class="t" onclick="H(this)">05:09:55</span>             sophiago </span><span>I actually found very little increase for </span><code>assoc</code><span>. I think the main benefit is when you&apos;re calling </span><code>update</code><span> frequently since it provides its own version of that.</span></div><div id="t1493213724105238" t="2017-04-26 13:35:24 sophiago @nathanmarz thanks again for all the help again the other day! I just wanted to clarify one thing, this function you gave me for filtering out empty lists isn&apos;t working:  (setval [LEAVES ALL #(= [] %)] NONE *map*) . It seems like it should so I&apos;m a bit confused."><a href="#t1493213724105238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:35:24</span>             sophiago </span><span>@nathanmarz thanks again for all the help again the other day! I just wanted to clarify one thing, this function you gave me for filtering out empty lists isn&apos;t working: </span><code>(setval [LEAVES ALL #(= [] %)] NONE *map*)</code><span>. It seems like it should so I&apos;m a bit confused.</span></div><div id="t1493213880164392" t="2017-04-26 13:38:00 nathanmarz seems to be working fine
 user=&gt; (def LEAVES
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (if-path map?
  #_=&gt;       [MAP-VALS p]
  #_=&gt;       STAY
  #_=&gt;       )))
#&apos;user/LEAVES
user=&gt; (def m {0 {1 [[1 2 3] [] [4]]} 2 [[] [] [5 6]]}) 
#&apos;user/m
user=&gt; (setval [LEAVES ALL #(= [] %)] NONE m)
{0 {1 [[1 2 3] [4]]}, 2 [[5 6]]}
"><a href="#t1493213880164392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:38:00</span>           nathanmarz </span><span>seems to be working fine
</span><pre>user=&gt; (def LEAVES
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (if-path map?
  #_=&gt;       [MAP-VALS p]
  #_=&gt;       STAY
  #_=&gt;       )))
#&apos;user/LEAVES
user=&gt; (def m {0 {1 [[1 2 3] [] [4]]} 2 [[] [] [5 6]]}) 
#&apos;user/m
user=&gt; (setval [LEAVES ALL #(= [] %)] NONE m)
{0 {1 [[1 2 3] [4]]}, 2 [[5 6]]}
</pre></div><div id="t1493214116252213" t="2017-04-26 13:41:56 sophiago Oh wait. You&apos;re filtering empty vectors inside the values. I was thinking that would filter values that were empty vectors."><a href="#t1493214116252213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:41:56</span>             sophiago </span><span>Oh wait. You&apos;re filtering empty vectors inside the values. I was thinking that would filter values that were empty vectors.</span></div><div id="t1493214190280136" t="2017-04-26 13:43:10 nathanmarz if you want to filter the direct values of the maps then just remove the  ALL"><a href="#t1493214190280136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:43:10</span>           nathanmarz </span><span>if you want to filter the direct values of the maps then just remove the </span><code>ALL</code></div><div id="t1493214228295478" t="2017-04-26 13:43:48 nathanmarz you can also do   (setval [LEAVES (continue-then-stay ALL) #(= [] %)] NONE m)  to remove empty vectors from inside the map values and then remove key/value pairs where the value is  []"><a href="#t1493214228295478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:43:48</span>           nathanmarz </span><span>you can also do </span><code> (setval [LEAVES (continue-then-stay ALL) #(= [] %)] NONE m)</code><span> to remove empty vectors from inside the map values and then remove key/value pairs where the value is </span><code>[]</code></div><div id="t1493214344339919" t="2017-04-26 13:45:44 sophiago Ah, I see. I just looked back at the docs. Since I&apos;m already selecting for leaves of the maps that means ALL would go inside any collections present in the values. I assumed it meant &quot;apply this to all leaves.&quot;"><a href="#t1493214344339919" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:45:44</span>             sophiago </span><span>Ah, I see. I just looked back at the docs. Since I&apos;m already selecting for leaves of the maps that means ALL would go inside any collections present in the values. I assumed it meant &quot;apply this to all leaves.&quot;</span></div><div id="t1493214399361272" t="2017-04-26 13:46:39 sophiago Yup, looks good now. Thanks!"><a href="#t1493214399361272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:46:39</span>             sophiago </span><span>Yup, looks good now. Thanks!</span></div><div id="t1493214405363737" t="2017-04-26 13:46:45 nathanmarz no problem"><a href="#t1493214405363737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">13:46:45</span>           nathanmarz </span><span>no problem</span></div><div id="t1493219398519999" t="2017-04-26 15:09:58 nathanmarz @teng  srange  navigates you to a sequence, so navigating to a keyword from there doesn&apos;t make sense"><a href="#t1493219398519999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">15:09:58</span>           nathanmarz </span><span>@teng </span><code>srange</code><span> navigates you to a sequence, so navigating to a keyword from there doesn&apos;t make sense</span></div><div id="t1493219421530173" t="2017-04-26 15:10:21 nathanmarz I think you want:  (setval [:educations (nthpath 1) :major-name] &quot;C&quot; data)"><a href="#t1493219421530173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">15:10:21</span>           nathanmarz </span><span>I think you want: </span><code>(setval [:educations (nthpath 1) :major-name] &quot;C&quot; data)</code></div><div id="t1493219505566308" t="2017-04-26 15:11:45 teng @nathanmarz That worked, thanks!  🙂"><a href="#t1493219505566308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">15:11:45</span>                 teng </span><span>@nathanmarz That worked, thanks! </span><b>🙂</b></div><div id="t1493248080848902" t="2017-04-26 23:08:00 albaker @nathanmarz so in the crazy nested structure of  {:id &quot;blah :children [{:id &quot;blah2 :children [ .. ]]}  it looks like a  (select-first (recursive-path [] p [(walker (fn [x] ... match an id ...) STAY]) tree)  will grab any intermediate node in that structure (and halt with the STAY) is that right?"><a href="#t1493248080848902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">23:08:00</span>              albaker </span><span>@nathanmarz so in the crazy nested structure of </span><code>{:id &quot;blah :children [{:id &quot;blah2 :children [ .. ]]}</code><span> it looks like a </span><code>(select-first (recursive-path [] p [(walker (fn [x] ... match an id ...) STAY]) tree)</code><span> will grab any intermediate node in that structure (and halt with the STAY) is that right?</span></div><div id="t1493248980011973" t="2017-04-26 23:23:00 nathanmarz @albaker it&apos;ll grab the first node it encounters"><a href="#t1493248980011973" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">23:23:00</span>           nathanmarz </span><span>@albaker it&apos;ll grab the first node it encounters</span></div><div id="t1493249009017255" t="2017-04-26 23:23:29 nathanmarz fyi that path isn&apos;t recursive so no reason to use  recursive-path"><a href="#t1493249009017255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">23:23:29</span>           nathanmarz </span><span>fyi that path isn&apos;t recursive so no reason to use </span><code>recursive-path</code></div><div id="t1493249023019576" t="2017-04-26 23:23:43 nathanmarz and no reason to have the  STAY  after  walker"><a href="#t1493249023019576" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">23:23:43</span>           nathanmarz </span><span>and no reason to have the </span><code>STAY</code><span> after </span><code>walker</code></div><div id="t1493249286065855" t="2017-04-26 23:28:06 albaker ah, so the walker will depth first down through w/o a recursive path, and select-first makes STAY redundant?   I&apos;m still wrapping my head around paths"><a href="#t1493249286065855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span> <span class="t" onclick="H(this)">23:28:06</span>              albaker </span><span>ah, so the walker will depth first down through w/o a recursive path, and select-first makes STAY redundant?   I&apos;m still wrapping my head around paths</span></div><div id="t1493282718142263" t="2017-04-27 08:45:18 nathanmarz @albaker  recursive-path  is only needed when your path definition needs to refer to itself"><a href="#t1493282718142263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span> <span class="t" onclick="H(this)">08:45:18</span>           nathanmarz </span><span>@albaker </span><code>recursive-path</code><span> is only needed when your path definition needs to refer to itself</span></div><div id="t1493282745149463" t="2017-04-27 08:45:45 nathanmarz the  STAY  is redundant regardless of the operation"><a href="#t1493282745149463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span> <span class="t" onclick="H(this)">08:45:45</span>           nathanmarz </span><span>the </span><code>STAY</code><span> is redundant regardless of the operation</span></div><div id="t1493282769155786" t="2017-04-27 08:46:09 nathanmarz walker  navigates you to all values matching that predicate"><a href="#t1493282769155786" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span> <span class="t" onclick="H(this)">08:46:09</span>           nathanmarz </span><code>walker</code><span> navigates you to all values matching that predicate</span></div><div id="t1493282789160893" t="2017-04-27 08:46:29 nathanmarz navigating from those values using  STAY  does nothing"><a href="#t1493282789160893" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span> <span class="t" onclick="H(this)">08:46:29</span>           nathanmarz </span><span>navigating from those values using </span><code>STAY</code><span> does nothing</span></div><div id="t1493304541340227" t="2017-04-27 14:49:01 albaker makes sense, thanks!"><a href="#t1493304541340227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span> <span class="t" onclick="H(this)">14:49:01</span>              albaker </span><span>makes sense, thanks!</span></div><div id="t1493661808117826" t="2017-05-01 18:03:28 nijssels Why do the following statements work..."><a href="#t1493661808117826" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:03:28</span>             nijssels </span><span>Why do the following statements work...</span></div><div id="t1493661829125720" t="2017-05-01 18:03:49 nijssels But the combination doesnt..."><a href="#t1493661829125720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:03:49</span>             nijssels </span><span>But the combination doesnt...</span></div><div id="t1493662219258116" t="2017-05-01 18:10:19 nijssels This works... It must be the workings of select-one..."><a href="#t1493662219258116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:10:19</span>             nijssels </span><span>This works... It must be the workings of select-one...</span></div><div id="t1493664453019290" t="2017-05-01 18:47:33 levitanong @nathanmarz I can’t seem to find documentation on  traverse-all . Tried using it as if it were a transducer version of  traverse  but it doesn’t seem to work exactly like that."><a href="#t1493664453019290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:47:33</span>           levitanong </span><span>@nathanmarz I can’t seem to find documentation on </span><code>traverse-all</code><span>. Tried using it as if it were a transducer version of </span><code>traverse</code><span> but it doesn’t seem to work exactly like that.</span></div><div id="t1493664487031434" t="2017-05-01 18:48:07 nathanmarz @nijssels  MAP-VALS  navigates you to each value individually, which means you&apos;re calling  FIRST  on a number"><a href="#t1493664487031434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:48:07</span>           nathanmarz </span><span>@nijssels </span><code>MAP-VALS</code><span> navigates you to each value individually, which means you&apos;re calling </span><code>FIRST</code><span> on a number</span></div><div id="t1493664516041063" t="2017-05-01 18:48:36 nathanmarz you can do  (select-first MAP-VALS {:a 1 :b 2 :c 3})"><a href="#t1493664516041063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:48:36</span>           nathanmarz </span><span>you can do </span><code>(select-first MAP-VALS {:a 1 :b 2 :c 3})</code></div><div id="t1493664548052258" t="2017-05-01 18:49:08 nathanmarz @levitanong examples of usage:  https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1370"><a href="#t1493664548052258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:49:08</span>           nathanmarz </span><span>@levitanong examples of usage: </span><a href="https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1370" target="_blank">https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1370</a></div><div id="t1493664619076864" t="2017-05-01 18:50:19 levitanong ok that makes sense. thanks!"><a href="#t1493664619076864" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:50:19</span>           levitanong </span><span>ok that makes sense. thanks!</span></div><div id="t1493664631080957" t="2017-05-01 18:50:31 nijssels Of course. Thanks @nathanmarz!"><a href="#t1493664631080957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">18:50:31</span>             nijssels </span><span>Of course. Thanks @nathanmarz!</span></div><div id="t1493673909982765" t="2017-05-01 21:25:09 urbank I probably should have figured this out, but how do recursively navigate this kind of data-structure"><a href="#t1493673909982765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">21:25:09</span>               urbank </span><span>I probably should have figured this out, but how do recursively navigate this kind of data-structure</span></div><div id="t1493674095033038" t="2017-05-01 21:28:15 urbank I want to get to all the maps that have a :children key"><a href="#t1493674095033038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">21:28:15</span>               urbank </span><span>I want to get to all the maps that have a :children key</span></div><div id="t1493676323594463" t="2017-05-01 22:05:23 nathanmarz @urbank
 (def data
  {:data 10
   :children [{:data [1 2 3]
               :children []}
              {:data [4 5 6]
               :children []}]})


(def NODES
  (recursive-path [] p
    (continue-then-stay :children ALL p)
    ))

(select [NODES :data] data)
;; =&gt; [[1 2 3] [4 5 6] 10]
"><a href="#t1493676323594463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:05:23</span>           nathanmarz </span><span>@urbank
</span><pre>(def data
  {:data 10
   :children [{:data [1 2 3]
               :children []}
              {:data [4 5 6]
               :children []}]})


(def NODES
  (recursive-path [] p
    (continue-then-stay :children ALL p)
    ))

(select [NODES :data] data)
;; =&gt; [[1 2 3] [4 5 6] 10]
</pre></div><div id="t1493677202781596" t="2017-05-01 22:20:02 urbank @nathanmarz Oh cool, thanks! For some reason I thought there needed to be a terminating clause in a recursive path, but I suppose it just stops when it runs out of results"><a href="#t1493677202781596" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:20:02</span>               urbank </span><span>@nathanmarz Oh cool, thanks! For some reason I thought there needed to be a terminating clause in a recursive path, but I suppose it just stops when it runs out of results</span></div><div id="t1493677363814144" t="2017-05-01 22:22:43 urbank Still don&apos;t quite understand what  Navigates to the provided path and then to the current element  means. Stay as opposed to what?"><a href="#t1493677363814144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:22:43</span>               urbank </span><span>Still don&apos;t quite understand what </span><code>Navigates to the provided path and then to the current element</code><span> means. Stay as opposed to what?</span></div><div id="t1493677763893694" t="2017-05-01 22:29:23 nathanmarz @urbank as opposed to only navigating to the provided subpath"><a href="#t1493677763893694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:29:23</span>           nathanmarz </span><span>@urbank as opposed to only navigating to the provided subpath</span></div><div id="t1493677814904544" t="2017-05-01 22:30:14 nathanmarz (select (continue-then-stay :a) {:a 1}) ; =&gt; [1 {:a 1}]"><a href="#t1493677814904544" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:30:14</span>           nathanmarz </span><code>(select (continue-then-stay :a) {:a 1}) ; =&gt; [1 {:a 1}]</code></div><div id="t1493677834908669" t="2017-05-01 22:30:34 nathanmarz it navigates to :a, then navigates to itself"><a href="#t1493677834908669" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-01</span> <span class="t" onclick="H(this)">22:30:34</span>           nathanmarz </span><span>it navigates to :a, then navigates to itself</span></div><div id="t1493693440130540" t="2017-05-02 02:50:40 luxbock is there some built-in higher order selector that allows me to write the following:  (transform (??? FIRST LAST) (fn [[a b]] (if (&gt; a b) [(str a) b] [a (str b)]) [1 2 3])  =&gt; [1 2 &quot;3&quot;]?"><a href="#t1493693440130540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">02:50:40</span>              luxbock </span><span>is there some built-in higher order selector that allows me to write the following: </span><code>(transform (??? FIRST LAST) (fn [[a b]] (if (&gt; a b) [(str a) b] [a (str b)]) [1 2 3])</code><span> =&gt; [1 2 &quot;3&quot;]?</span></div><div id="t1493705906422993" t="2017-05-02 06:18:26 narkisr Hey, looking for a way to transform a single value from set into multiple values using a predicate (subset won&apos;t help in that case becuase its not a static set of items)"><a href="#t1493705906422993" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">06:18:26</span>              narkisr </span><span>Hey, looking for a way to transform a single value from set into multiple values using a predicate (subset won&apos;t help in that case becuase its not a static set of items)</span></div><div id="t1493705936426582" t="2017-05-02 06:18:56 narkisr iv tried to use transform with pred but that can replace only a single value and not expand a value into multiple ones"><a href="#t1493705936426582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">06:18:56</span>              narkisr </span><span>iv tried to use transform with pred but that can replace only a single value and not expand a value into multiple ones</span></div><div id="t1493707855681492" t="2017-05-02 06:50:55 narkisr I managed to so by using a reduce in the transform function but that not really using specter"><a href="#t1493707855681492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">06:50:55</span>              narkisr </span><span>I managed to so by using a reduce in the transform function but that not really using specter</span></div><div id="t1493719110979508" t="2017-05-02 09:58:30 nathanmarz @narkisr you would need a new navigator for that"><a href="#t1493719110979508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">09:58:30</span>           nathanmarz </span><span>@narkisr you would need a new navigator for that</span></div><div id="t1493719151988868" t="2017-05-02 09:59:11 nathanmarz something like  (dynamic-subset even?)  that navigates to the subset of all even values"><a href="#t1493719151988868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">09:59:11</span>           nathanmarz </span><span>something like </span><code>(dynamic-subset even?)</code><span> that navigates to the subset of all even values</span></div><div id="t1493719187996681" t="2017-05-02 09:59:47 nathanmarz the definition of  subset  should be a good starting point  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L794"><a href="#t1493719187996681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">09:59:47</span>           nathanmarz </span><span>the definition of </span><code>subset</code><span> should be a good starting point </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L794" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L794</a></div><div id="t1493719463057339" t="2017-05-02 10:04:23 mac Has anybody looked at odin  https://github.com/halgari/odin  Any thoughts on how it compares to specter?"><a href="#t1493719463057339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">10:04:23</span>                  mac </span><span>Has anybody looked at odin </span><a href="https://github.com/halgari/odin" target="_blank">https://github.com/halgari/odin</a><span> Any thoughts on how it compares to specter?</span></div><div id="t1493735404222044" t="2017-05-02 14:30:04 nathanmarz @mac from glancing at the readme every example deals with nested maps, so I would want to know if it can handle other data structures / be extensible to user data types"><a href="#t1493735404222044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:30:04</span>           nathanmarz </span><span>@mac from glancing at the readme every example deals with nested maps, so I would want to know if it can handle other data structures / be extensible to user data types</span></div><div id="t1493735537279134" t="2017-05-02 14:32:17 nathanmarz I&apos;m also skeptical of the performance and the expressive power"><a href="#t1493735537279134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:32:17</span>           nathanmarz </span><span>I&apos;m also skeptical of the performance and the expressive power</span></div><div id="t1493735557287758" t="2017-05-02 14:32:37 nathanmarz especially specter&apos;s &quot;substructure&quot; navigators, like &quot;srange&quot;, &quot;filterer&quot;, etc."><a href="#t1493735557287758" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:32:37</span>           nathanmarz </span><span>especially specter&apos;s &quot;substructure&quot; navigators, like &quot;srange&quot;, &quot;filterer&quot;, etc.</span></div><div id="t1493735591302103" t="2017-05-02 14:33:11 nathanmarz a good test use case is incrementing the last odd number in a vector of numbers"><a href="#t1493735591302103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:33:11</span>           nathanmarz </span><span>a good test use case is incrementing the last odd number in a vector of numbers</span></div><div id="t1493735627317037" t="2017-05-02 14:33:47 mac @nathanmarz If get the time I will see if I can make that work."><a href="#t1493735627317037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:33:47</span>                  mac </span><span>@nathanmarz If get the time I will see if I can make that work.</span></div><div id="t1493735659330862" t="2017-05-02 14:34:19 mac Unrelated I am having trouble with understanding DISPENSE."><a href="#t1493735659330862" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:34:19</span>                  mac </span><span>Unrelated I am having trouble with understanding DISPENSE.</span></div><div id="t1493735667333802" t="2017-05-02 14:34:27 nathanmarz cool, please post whatever you find"><a href="#t1493735667333802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:34:27</span>           nathanmarz </span><span>cool, please post whatever you find</span></div><div id="t1493735692344370" t="2017-05-02 14:34:52 mac I would have expected  (s/select [s/ALL (s/collect-one :a) :b s/DISPENSE #(= % 1)] [{:a &quot;A&quot; :b 1} {:a &quot;AA&quot; :b 1}])"><a href="#t1493735692344370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:34:52</span>                  mac </span><span>I would have expected </span><pre>(s/select [s/ALL (s/collect-one :a) :b s/DISPENSE #(= % 1)] [{:a &quot;A&quot; :b 1} {:a &quot;AA&quot; :b 1}])</pre></div><div id="t1493735715354259" t="2017-05-02 14:35:15 mac to return  [&quot;A&quot; &quot;AA&quot;]"><a href="#t1493735715354259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:35:15</span>                  mac </span><span>to return </span><pre>[&quot;A&quot; &quot;AA&quot;]</pre></div><div id="t1493735741364839" t="2017-05-02 14:35:41 mac but I get  [1 1]"><a href="#t1493735741364839" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:35:41</span>                  mac </span><span>but I get </span><pre>[1 1]</pre></div><div id="t1493735774378625" t="2017-05-02 14:36:14 mac Isn&apos;t DISPENSE suppose to drop whatever navigations comes after it?"><a href="#t1493735774378625" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:36:14</span>                  mac </span><span>Isn&apos;t DISPENSE suppose to drop whatever navigations comes after it?</span></div><div id="t1493735786383625" t="2017-05-02 14:36:26 nathanmarz it&apos;s producing the right result"><a href="#t1493735786383625" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:36:26</span>           nathanmarz </span><span>it&apos;s producing the right result</span></div><div id="t1493735795387140" t="2017-05-02 14:36:35 nathanmarz DISPENSE  drops collected values"><a href="#t1493735795387140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:36:35</span>           nathanmarz </span><code>DISPENSE</code><span> drops collected values</span></div><div id="t1493735811393783" t="2017-05-02 14:36:51 nathanmarz that path is equivalent to  [ALL :b #(= % 1)]"><a href="#t1493735811393783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:36:51</span>           nathanmarz </span><span>that path is equivalent to </span><code>[ALL :b #(= % 1)]</code></div><div id="t1493735820397643" t="2017-05-02 14:37:00 mac Ok, then I find the docs slightly confusing."><a href="#t1493735820397643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:37:00</span>                  mac </span><span>Ok, then I find the docs slightly confusing.</span></div><div id="t1493735863415746" t="2017-05-02 14:37:43 nathanmarz what about it?"><a href="#t1493735863415746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:37:43</span>           nathanmarz </span><span>what about it?</span></div><div id="t1493735900430783" t="2017-05-02 14:38:20 mac Ref &quot;Drops all collected values for subsequent navigation&quot; - I understood this to mean values for subsequent navigations to be droped."><a href="#t1493735900430783" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:38:20</span>                  mac </span><span>Ref &quot;Drops all collected values for subsequent navigation&quot; - I understood this to mean values for subsequent navigations to be droped.</span></div><div id="t1493735937446464" t="2017-05-02 14:38:57 nathanmarz &quot;collected values&quot; always refers to values collected via  collect ,  collect-one , and  VAL"><a href="#t1493735937446464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:38:57</span>           nathanmarz </span><span>&quot;collected values&quot; always refers to values collected via </span><code>collect</code><span>, </span><code>collect-one</code><span>, and </span><code>VAL</code></div><div id="t1493735998471241" t="2017-05-02 14:39:58 nathanmarz user=&gt; (doc DISPENSE)
-------------------------
com.rpl.specter/DISPENSE
  Drops all collected values for subsequent navigation.
nil
user=&gt; (doc collect-one)
-------------------------
com.rpl.specter/collect-one
  Adds the result of running select-one with the given path on the
          current value to the collected vals.
nil
user=&gt; (doc collect)
-------------------------
com.rpl.specter/collect
  Adds the result of running select with the given path on the
          current value to the collected vals.
nil
user=&gt; (doc with-fresh-collected)
-------------------------
com.rpl.specter/with-fresh-collected
  Continues navigating on the given path with the collected vals reset to []. Once
     navigation leaves the scope of with-fresh-collected, the collected vals revert
     to what they were before.
nil
"><a href="#t1493735998471241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:39:58</span>           nathanmarz </span><pre>user=&gt; (doc DISPENSE)
-------------------------
com.rpl.specter/DISPENSE
  Drops all collected values for subsequent navigation.
nil
user=&gt; (doc collect-one)
-------------------------
com.rpl.specter/collect-one
  Adds the result of running select-one with the given path on the
          current value to the collected vals.
nil
user=&gt; (doc collect)
-------------------------
com.rpl.specter/collect
  Adds the result of running select with the given path on the
          current value to the collected vals.
nil
user=&gt; (doc with-fresh-collected)
-------------------------
com.rpl.specter/with-fresh-collected
  Continues navigating on the given path with the collected vals reset to []. Once
     navigation leaves the scope of with-fresh-collected, the collected vals revert
     to what they were before.
nil
</pre></div><div id="t1493736008475500" t="2017-05-02 14:40:08 nathanmarz terminology is consistent"><a href="#t1493736008475500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:40:08</span>           nathanmarz </span><span>terminology is consistent</span></div><div id="t1493736060497081" t="2017-05-02 14:41:00 mac Ok. Is there a way to achieve what I expected."><a href="#t1493736060497081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:41:00</span>                  mac </span><span>Ok. Is there a way to achieve what I expected.</span></div><div id="t1493736109517314" t="2017-05-02 14:41:49 nathanmarz I think you&apos;re looking for  (select [ALL #(= 1 (:b %)) :a] data)"><a href="#t1493736109517314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:41:49</span>           nathanmarz </span><span>I think you&apos;re looking for </span><code>(select [ALL #(= 1 (:b %)) :a] data)</code></div><div id="t1493736137528975" t="2017-05-02 14:42:17 nathanmarz or  (select [ALL (selected? :b #(= 1 %)) :a] data)"><a href="#t1493736137528975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:42:17</span>           nathanmarz </span><span>or </span><code>(select [ALL (selected? :b #(= 1 %)) :a] data)</code></div><div id="t1493736247576094" t="2017-05-02 14:44:07 mac Thanks. I take it then there is no &quot;do not return any values navigated to after this point just use it for selecting&quot; navigator."><a href="#t1493736247576094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:44:07</span>                  mac </span><span>Thanks. I take it then there is no &quot;do not return any values navigated to after this point just use it for selecting&quot; navigator.</span></div><div id="t1493736265583599" t="2017-05-02 14:44:25 nathanmarz correct"><a href="#t1493736265583599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">14:44:25</span>           nathanmarz </span><span>correct</span></div><div id="t1493758594245568" t="2017-05-02 20:56:34 mac @nathanmarz Gave halgari anouthe look. No obvious way of solving the use case you mentioned."><a href="#t1493758594245568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-02</span> <span class="t" onclick="H(this)">20:56:34</span>                  mac </span><span>@nathanmarz Gave halgari anouthe look. No obvious way of solving the use case you mentioned.</span></div><div id="t1493819364081489" t="2017-05-03 13:49:24 mac I am faced with a design dilemma. I have data structure consisting of deeply nested records which reflect the domain I am working in. Querying this is very straight fwd using specter. But some of these records contain &quot;behaviour&quot; (ie. anonymous functions as values) in the form of validation functions, transformation functions (for how to transform themselves or other records in the structure), dispatch functions(that decides when to dispatch certain messages), conditions etc. I am debating (with myself) two different approaches: Either use multimethods to walk/query the datastructure/trigger behaviour OR use specter for the same task. My primary (perhaps very unfounded) concern with specter is that my structure contains &quot;behaviour&quot;.  My concern with the multimethod approach is that it will be messy and hard to maintain. Hope my question is even remotely clear, otherwise happy to clarify and context."><a href="#t1493819364081489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-03</span> <span class="t" onclick="H(this)">13:49:24</span>                  mac </span><span>I am faced with a design dilemma. I have data structure consisting of deeply nested records which reflect the domain I am working in. Querying this is very straight fwd using specter. But some of these records contain &quot;behaviour&quot; (ie. anonymous functions as values) in the form of validation functions, transformation functions (for how to transform themselves or other records in the structure), dispatch functions(that decides when to dispatch certain messages), conditions etc. I am debating (with myself) two different approaches: Either use multimethods to walk/query the datastructure/trigger behaviour OR use specter for the same task. My primary (perhaps very unfounded) concern with specter is that my structure contains &quot;behaviour&quot;.  My concern with the multimethod approach is that it will be messy and hard to maintain. Hope my question is even remotely clear, otherwise happy to clarify and context.</span></div><div id="t1493819836267681" t="2017-05-03 13:57:16 nathanmarz @mac I think using specter is fine for that task"><a href="#t1493819836267681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-03</span> <span class="t" onclick="H(this)">13:57:16</span>           nathanmarz </span><span>@mac I think using specter is fine for that task</span></div><div id="t1493819864279182" t="2017-05-03 13:57:44 nathanmarz you probably want to use  traverse  with  reduce  to trigger the nested functions"><a href="#t1493819864279182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-03</span> <span class="t" onclick="H(this)">13:57:44</span>           nathanmarz </span><span>you probably want to use </span><code>traverse</code><span> with </span><code>reduce</code><span> to trigger the nested functions</span></div><div id="t1493820237437472" t="2017-05-03 14:03:57 mac Thanks, had not noticed traverse, looks very useful."><a href="#t1493820237437472" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-03</span> <span class="t" onclick="H(this)">14:03:57</span>                  mac </span><span>Thanks, had not noticed traverse, looks very useful.</span></div><div id="t1493868950461695" t="2017-05-04 03:35:50 nathanmarz @luxbock just noticed your question"><a href="#t1493868950461695" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-04</span> <span class="t" onclick="H(this)">03:35:50</span>           nathanmarz </span><span>@luxbock just noticed your question</span></div><div id="t1493868986465128" t="2017-05-04 03:36:26 nathanmarz yes there is, it&apos;s this:
 (transform (subselect (multi-path FIRST LAST))
  (fn [[a b]] (if (&gt; a b) [(str a) b] [a (str b)]))
  [1 2 3])
;; =&gt; [1 2 &quot;3&quot;]
"><a href="#t1493868986465128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-04</span> <span class="t" onclick="H(this)">03:36:26</span>           nathanmarz </span><span>yes there is, it&apos;s this:
</span><pre>(transform (subselect (multi-path FIRST LAST))
  (fn [[a b]] (if (&gt; a b) [(str a) b] [a (str b)]))
  [1 2 3])
;; =&gt; [1 2 &quot;3&quot;]
</pre></div><div id="t1493869214486417" t="2017-05-04 03:40:14 luxbock Ah that&apos;s great, I will try to see if it works for my original use case "><a href="#t1493869214486417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-04</span> <span class="t" onclick="H(this)">03:40:14</span>              luxbock </span><span>Ah that&apos;s great, I will try to see if it works for my original use case </span></div><div id="t1494175703045093" t="2017-05-07 16:48:23 nha Could this selector be rewritten to avoid  sp/range  or  sp/LAST ?

 (def data
  [[:foo {:component &quot;aaa&quot;}]
   [:bar {:component &quot;bbb&quot;}]
   [:qux {:component &quot;ccc&quot;}]])

(= (sp/select [sp/ALL
               (sp/srange 1 2)
               sp/ALL
               :component
               ] data)

   (sp/select [sp/ALL
               sp/LAST
               :component
               ] data)) ;; =&gt; true
 

Is there something analog to  sp/SECOND  or  sp/NTH  ?"><a href="#t1494175703045093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-07</span> <span class="t" onclick="H(this)">16:48:23</span>                  nha </span><span>Could this selector be rewritten to avoid </span><code>sp/range</code><span> or </span><code>sp/LAST</code><span>?

</span><pre>(def data
  [[:foo {:component &quot;aaa&quot;}]
   [:bar {:component &quot;bbb&quot;}]
   [:qux {:component &quot;ccc&quot;}]])

(= (sp/select [sp/ALL
               (sp/srange 1 2)
               sp/ALL
               :component
               ] data)

   (sp/select [sp/ALL
               sp/LAST
               :component
               ] data)) ;; =&gt; true
</pre><span>

Is there something analog to </span><code>sp/SECOND</code><span> or </span><code>sp/NTH</code><span> ?</span></div><div id="t1494182725487165" t="2017-05-07 18:45:25 nathanmarz @nha use nthpath"><a href="#t1494182725487165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-07</span> <span class="t" onclick="H(this)">18:45:25</span>           nathanmarz </span><span>@nha use nthpath</span></div><div id="t1494182738488033" t="2017-05-07 18:45:38 nathanmarz (nthpath 1)"><a href="#t1494182738488033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-07</span> <span class="t" onclick="H(this)">18:45:38</span>           nathanmarz </span><code>(nthpath 1)</code></div><div id="t1494186742747072" t="2017-05-07 19:52:22 nha Perfect, I missed this one  🙂  Thanks nathanmarz, always helpful!"><a href="#t1494186742747072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-07</span> <span class="t" onclick="H(this)">19:52:22</span>                  nha </span><span>Perfect, I missed this one </span><b>🙂</b><span> Thanks nathanmarz, always helpful!</span></div><div id="t1494278985768208" t="2017-05-08 21:29:45 mac @nathanmarz I looked at traverse and not sure it does what I need. I have a tree structure of deeply nested records which I would like to walk/transform. Some of these are condition records that should stop navigation of the subtree underneath if the condition (a vector of predicate functions) does not return true. Does that make sense?  I have tried to illustrate the structure below. Navigation should not get to the action records of type :three and :three-and-a-half but allow me to select/transform the other records based on some criteria."><a href="#t1494278985768208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">21:29:45</span>                  mac </span><span>@nathanmarz I looked at traverse and not sure it does what I need. I have a tree structure of deeply nested records which I would like to walk/transform. Some of these are condition records that should stop navigation of the subtree underneath if the condition (a vector of predicate functions) does not return true. Does that make sense?  I have tried to illustrate the structure below. Navigation should not get to the action records of type :three and :three-and-a-half but allow me to select/transform the other records based on some criteria.</span></div><div id="t1494280963301139" t="2017-05-08 22:02:43 nathanmarz @mac what do you run the predicate function on?"><a href="#t1494280963301139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:02:43</span>           nathanmarz </span><span>@mac what do you run the predicate function on?</span></div><div id="t1494280979305360" t="2017-05-08 22:02:59 nathanmarz what is  #(= % 3)  supposed to receive as input?"><a href="#t1494280979305360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:02:59</span>           nathanmarz </span><span>what is </span><code>#(= % 3)</code><span> supposed to receive as input?</span></div><div id="t1494281112338636" t="2017-05-08 22:05:12 mac @nathanmarz I will pass it the children it is guarding and probably an environment of some sort (a map most likely)."><a href="#t1494281112338636" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:05:12</span>                  mac </span><span>@nathanmarz I will pass it the children it is guarding and probably an environment of some sort (a map most likely).</span></div><div id="t1494282123568392" t="2017-05-08 22:22:03 nathanmarz from your prior description it sounded like you needed to get some functions out of a nested structure and run them"><a href="#t1494282123568392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:22:03</span>           nathanmarz </span><span>from your prior description it sounded like you needed to get some functions out of a nested structure and run them</span></div><div id="t1494282149574012" t="2017-05-08 22:22:29 nathanmarz to do this, once you get to a condition, just use a function to filter it"><a href="#t1494282149574012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:22:29</span>           nathanmarz </span><span>to do this, once you get to a condition, just use a function to filter it</span></div><div id="t1494282205586100" t="2017-05-08 22:23:25 nathanmarz (defn cond-filter [cond]
  ;; return true if every condition function returns true)
"><a href="#t1494282205586100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:23:25</span>           nathanmarz </span><pre>(defn cond-filter [cond]
  ;; return true if every condition function returns true)
</pre></div><div id="t1494282233592113" t="2017-05-08 22:23:53 nathanmarz then your path would contain  [... cond-filter :actions ALL ...]"><a href="#t1494282233592113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:23:53</span>           nathanmarz </span><span>then your path would contain </span><code>[... cond-filter :actions ALL ...]</code></div><div id="t1494282563661792" t="2017-05-08 22:29:23 mac @nathanmarz Sorry for the confusion. I only need to run the functions to determine if the subtree they are guarding should be walked or skipped."><a href="#t1494282563661792" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:29:23</span>                  mac </span><span>@nathanmarz Sorry for the confusion. I only need to run the functions to determine if the subtree they are guarding should be walked or skipped.</span></div><div id="t1494283206793734" t="2017-05-08 22:40:06 nathanmarz @mac does making a function that runs the condition functions solve your problem?"><a href="#t1494283206793734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:40:06</span>           nathanmarz </span><span>@mac does making a function that runs the condition functions solve your problem?</span></div><div id="t1494284202987049" t="2017-05-08 22:56:42 mac @nathanmarz I don&apos;t think so. Only if I the result could control if the children of the Condition record are walked or not - the problem is I don&apos;t know how to do that. Been looking at zippers too, but last time I dealt with them it was painful  🙂"><a href="#t1494284202987049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">22:56:42</span>                  mac </span><span>@nathanmarz I don&apos;t think so. Only if I the result could control if the children of the Condition record are walked or not - the problem is I don&apos;t know how to do that. Been looking at zippers too, but last time I dealt with them it was painful </span><b>🙂</b></div><div id="t1494284922123735" t="2017-05-08 23:08:42 nathanmarz it does control that"><a href="#t1494284922123735" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:08:42</span>           nathanmarz </span><span>it does control that</span></div><div id="t1494284935125905" t="2017-05-08 23:08:55 nathanmarz that&apos;s exactly what it does"><a href="#t1494284935125905" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:08:55</span>           nathanmarz </span><span>that&apos;s exactly what it does</span></div><div id="t1494284983134059" t="2017-05-08 23:09:43 nathanmarz your path should navigate to condition, then run a filter function there to do all the logic of testing the predicates against the guarded children"><a href="#t1494284983134059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:09:43</span>           nathanmarz </span><span>your path should navigate to condition, then run a filter function there to do all the logic of testing the predicates against the guarded children</span></div><div id="t1494284991135665" t="2017-05-08 23:09:51 nathanmarz if that returns true, then it can continue walking the actions"><a href="#t1494284991135665" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:09:51</span>           nathanmarz </span><span>if that returns true, then it can continue walking the actions</span></div><div id="t1494284997136690" t="2017-05-08 23:09:57 nathanmarz if it returns false, then the actions will not be walked"><a href="#t1494284997136690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:09:57</span>           nathanmarz </span><span>if it returns false, then the actions will not be walked</span></div><div id="t1494285372204747" t="2017-05-08 23:16:12 mac And the remainder of the structure will still be walked?"><a href="#t1494285372204747" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:16:12</span>                  mac </span><span>And the remainder of the structure will still be walked?</span></div><div id="t1494285566238426" t="2017-05-08 23:19:26 mac @nathanmarz I might be missing something here, but I don&apos;t have a path at all, only a walker."><a href="#t1494285566238426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:19:26</span>                  mac </span><span>@nathanmarz I might be missing something here, but I don&apos;t have a path at all, only a walker.</span></div><div id="t1494285600244148" t="2017-05-08 23:20:00 nathanmarz you mean you&apos;re using the  walker  navigator?"><a href="#t1494285600244148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:20:00</span>           nathanmarz </span><span>you mean you&apos;re using the </span><code>walker</code><span> navigator?</span></div><div id="t1494285608245680" t="2017-05-08 23:20:08 mac Yes"><a href="#t1494285608245680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:20:08</span>                  mac </span><span>Yes</span></div><div id="t1494285627249294" t="2017-05-08 23:20:27 nathanmarz wrap it in a  recursive-path"><a href="#t1494285627249294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:20:27</span>           nathanmarz </span><span>wrap it in a </span><code>recursive-path</code></div><div id="t1494285673257360" t="2017-05-08 23:21:13 nathanmarz what are you walking to?"><a href="#t1494285673257360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:21:13</span>           nathanmarz </span><span>what are you walking to?</span></div><div id="t1494285679258614" t="2017-05-08 23:21:19 nathanmarz Action  or  Condition ?"><a href="#t1494285679258614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:21:19</span>           nathanmarz </span><code>Action</code><span> or </span><code>Condition</code><span>?</span></div><div id="t1494285715264932" t="2017-05-08 23:21:55 nathanmarz actually, is your goal to just retrieve all actions that are properly guarded?"><a href="#t1494285715264932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:21:55</span>           nathanmarz </span><span>actually, is your goal to just retrieve all actions that are properly guarded?</span></div><div id="t1494285738268858" t="2017-05-08 23:22:18 mac Yes, and potentially transform them."><a href="#t1494285738268858" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:22:18</span>                  mac </span><span>Yes, and potentially transform them.</span></div><div id="t1494285831285211" t="2017-05-08 23:23:51 nathanmarz (def SATISFACTORY-ACTION-NODES
  (recursive-path [] p
    (if-path #(instance? Condition %)
      [cond-filter :children ALL p]
      (continue-then-stay
        :children
        ALL
        p
        ))))
"><a href="#t1494285831285211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:23:51</span>           nathanmarz </span><pre>(def SATISFACTORY-ACTION-NODES
  (recursive-path [] p
    (if-path #(instance? Condition %)
      [cond-filter :children ALL p]
      (continue-then-stay
        :children
        ALL
        p
        ))))
</pre></div><div id="t1494285835285921" t="2017-05-08 23:23:55 nathanmarz you want something like that"><a href="#t1494285835285921" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:23:55</span>           nathanmarz </span><span>you want something like that</span></div><div id="t1494285854289108" t="2017-05-08 23:24:14 nathanmarz I don&apos;t think you want to use walker"><a href="#t1494285854289108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:24:14</span>           nathanmarz </span><span>I don&apos;t think you want to use walker</span></div><div id="t1494285883293774" t="2017-05-08 23:24:43 nathanmarz it&apos;s always better to encode the precise structure of your data rather than brute force it with  walker"><a href="#t1494285883293774" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:24:43</span>           nathanmarz </span><span>it&apos;s always better to encode the precise structure of your data rather than brute force it with </span><code>walker</code></div><div id="t1494285994313619" t="2017-05-08 23:26:34 nathanmarz an alternative way to solve this is with protocol paths (if you&apos;re using clojure)"><a href="#t1494285994313619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:26:34</span>           nathanmarz </span><span>an alternative way to solve this is with protocol paths (if you&apos;re using clojure)</span></div><div id="t1494286023318716" t="2017-05-08 23:27:03 nathanmarz protocol path solution would be extensible to other types of nodes beyond Action and Condition"><a href="#t1494286023318716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:27:03</span>           nathanmarz </span><span>protocol path solution would be extensible to other types of nodes beyond Action and Condition</span></div><div id="t1494286079328702" t="2017-05-08 23:27:59 mac That might be even better, since I have several other record types."><a href="#t1494286079328702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:27:59</span>                  mac </span><span>That might be even better, since I have several other record types.</span></div><div id="t1494286107333694" t="2017-05-08 23:28:27 nathanmarz there&apos;s examples of those on the README"><a href="#t1494286107333694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:28:27</span>           nathanmarz </span><span>there&apos;s examples of those on the README</span></div><div id="t1494286149341125" t="2017-05-08 23:29:09 mac Yeah, looked at those but it wasn&apos;t clear to me how to achieve my goal. Will look at them again."><a href="#t1494286149341125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:29:09</span>                  mac </span><span>Yeah, looked at those but it wasn&apos;t clear to me how to achieve my goal. Will look at them again.</span></div><div id="t1494286264361802" t="2017-05-08 23:31:04 nathanmarz (defprotocolpath SatisfactoryActionNodes)

(extend-protocolpath SatisfactoryActionNodes
  Action (continue-then-stay :children ALL SatisfactoryActionNodes)
  Condition [cond-filter :children ALL SatisfactoryActionNodes])
"><a href="#t1494286264361802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:31:04</span>           nathanmarz </span><pre>(defprotocolpath SatisfactoryActionNodes)

(extend-protocolpath SatisfactoryActionNodes
  Action (continue-then-stay :children ALL SatisfactoryActionNodes)
  Condition [cond-filter :children ALL SatisfactoryActionNodes])
</pre></div><div id="t1494286478398918" t="2017-05-08 23:34:38 mac @nathanmarz That it is very elegant."><a href="#t1494286478398918" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-08</span> <span class="t" onclick="H(this)">23:34:38</span>                  mac </span><span>@nathanmarz That it is very elegant.</span></div><div id="t1494512056464755" t="2017-05-11 14:14:16 wilkerlucio hello, I&apos;m trying to figure if I can use specter for a situation I have here"><a href="#t1494512056464755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">14:14:16</span>          wilkerlucio </span><span>hello, I&apos;m trying to figure if I can use specter for a situation I have here</span></div><div id="t1494512081475117" t="2017-05-11 14:14:41 wilkerlucio I have a map, and I would like to filter the map by some criteria on the values"><a href="#t1494512081475117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">14:14:41</span>          wilkerlucio </span><span>I have a map, and I would like to filter the map by some criteria on the values</span></div><div id="t1494512104484753" t="2017-05-11 14:15:04 wilkerlucio today my Clojure code is:"><a href="#t1494512104484753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">14:15:04</span>          wilkerlucio </span><span>today my Clojure code is:</span></div><div id="t1494512137499106" t="2017-05-11 14:15:37 wilkerlucio (-&gt;&gt; some-map
     (filter (fn [[k v]]
               (&gt; v 10)))
     (into {}))"><a href="#t1494512137499106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">14:15:37</span>          wilkerlucio </span><pre>(-&gt;&gt; some-map
     (filter (fn [[k v]]
               (&gt; v 10)))
     (into {}))</pre></div><div id="t1494512154506091" t="2017-05-11 14:15:54 wilkerlucio is there a way to replace this with specter  select  and avoid having to convert the data types?"><a href="#t1494512154506091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">14:15:54</span>          wilkerlucio </span><span>is there a way to replace this with specter </span><code>select</code><span> and avoid having to convert the data types?</span></div><div id="t1494514839698820" t="2017-05-11 15:00:39 nathanmarz @wilkerlucio  (transform [MAP-VALS #(&gt; % 10)] some-map)"><a href="#t1494514839698820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:00:39</span>           nathanmarz </span><span>@wilkerlucio </span><code>(transform [MAP-VALS #(&gt; % 10)] some-map)</code></div><div id="t1494514884720657" t="2017-05-11 15:01:24 nathanmarz that will maintain the type of the map and also run about 10x faster"><a href="#t1494514884720657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:01:24</span>           nathanmarz </span><span>that will maintain the type of the map and also run about 10x faster</span></div><div id="t1494515209870008" t="2017-05-11 15:06:49 wilkerlucio @nathanmarz thanks, didn&apos;t even occur to me to use transform to filter, but seeing it makes total sense  🙂"><a href="#t1494515209870008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:06:49</span>          wilkerlucio </span><span>@nathanmarz thanks, didn&apos;t even occur to me to use transform to filter, but seeing it makes total sense </span><b>🙂</b></div><div id="t1494515242886020" t="2017-05-11 15:07:22 wilkerlucio I think would be nice to have some  filter  example like this on README"><a href="#t1494515242886020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:07:22</span>          wilkerlucio </span><span>I think would be nice to have some </span><code>filter</code><span> example like this on README</span></div><div id="t1494515286905466" t="2017-05-11 15:08:06 nathanmarz err"><a href="#t1494515286905466" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:08:06</span>           nathanmarz </span><span>err</span></div><div id="t1494515308915489" t="2017-05-11 15:08:28 nathanmarz sorry, meant to write this:  (setval [MAP-VALS #(&lt;= % 10)] NONE some-map)"><a href="#t1494515308915489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:08:28</span>           nathanmarz </span><span>sorry, meant to write this: </span><code>(setval [MAP-VALS #(&lt;= % 10)] NONE some-map)</code></div><div id="t1494515318919247" t="2017-05-11 15:08:38 nathanmarz sleepy today"><a href="#t1494515318919247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:08:38</span>           nathanmarz </span><span>sleepy today</span></div><div id="t1494515417963705" t="2017-05-11 15:10:17 wilkerlucio haha, I was just coming back to ask, thanks for the speedy catch  🙂"><a href="#t1494515417963705" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:10:17</span>          wilkerlucio </span><span>haha, I was just coming back to ask, thanks for the speedy catch </span><b>🙂</b></div><div id="t1494515472988506" t="2017-05-11 15:11:12 wilkerlucio @nathanmarz why we need to invert the predicate?"><a href="#t1494515472988506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:11:12</span>          wilkerlucio </span><span>@nathanmarz why we need to invert the predicate?</span></div><div id="t1494515494998061" t="2017-05-11 15:11:34 wilkerlucio ah, gotcha, it&apos;s not about filtering ther,e it&apos;s about removing"><a href="#t1494515494998061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:11:34</span>          wilkerlucio </span><span>ah, gotcha, it&apos;s not about filtering ther,e it&apos;s about removing</span></div><div id="t1494515714095345" t="2017-05-11 15:15:14 nathanmarz yea, that&apos;s right"><a href="#t1494515714095345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-11</span> <span class="t" onclick="H(this)">15:15:14</span>           nathanmarz </span><span>yea, that&apos;s right</span></div><div id="t1494628511095955" t="2017-05-12 22:35:11 ksmithbaylor Hey everyone! I&apos;ve got a nested map (It&apos;s a deserialization of a flat file JSON &quot;database&quot; for a budgeting app I&apos;m extending) that looks similar to this (stripped down somewhat):

 {:categories [{:name &quot;Monthly bills&quot;
               :subcategories [{:name &quot;Electric&quot;}
                               {:name &quot;Cable&quot; :inactive true}
                               {:name &quot;Mortgage&quot;}
                               {:name &quot;Natural Gas&quot;}]}
              {:name &quot;Food&quot;
               :subcategories [{:name &quot;Eating Out&quot;}
                               {:name &quot;Groceries&quot;}]}
              {:name &quot;Stuff&quot;
               :inactive true
               :subcategories [{:name &quot;Things&quot; :inactive true}
                               {:name &quot;Whatever&quot;}]}]
 :accounts [{:name &quot;Checking&quot;
             :balance 100}
            {:name &quot;Old account&quot;
             :balance 0
             :inactive true}
            {:name &quot;Savings&quot;
             :balance 500}]}
 

I&apos;m fairly new to specter, and am still learning about what&apos;s possible. How would I recursively remove all maps at all levels that have an  :inactive true  flag? The result I would get from the above would be:

 {:categories [{:name &quot;Monthly bills&quot;
               :subcategories [{:name &quot;Electric&quot;}
                               {:name &quot;Mortgage&quot;}
                               {:name &quot;Natural Gas&quot;}]}
              {:name &quot;Food&quot;
               :subcategories [{:name &quot;Eating Out&quot;}
                               {:name &quot;Groceries&quot;}]}]
 :accounts [{:name &quot;Checking&quot;
             :balance 100}
            {:name &quot;Savings&quot;
             :balance 500}]}
"><a href="#t1494628511095955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">22:35:11</span>         ksmithbaylor </span><span>Hey everyone! I&apos;ve got a nested map (It&apos;s a deserialization of a flat file JSON &quot;database&quot; for a budgeting app I&apos;m extending) that looks similar to this (stripped down somewhat):

</span><pre>{:categories [{:name &quot;Monthly bills&quot;
               :subcategories [{:name &quot;Electric&quot;}
                               {:name &quot;Cable&quot; :inactive true}
                               {:name &quot;Mortgage&quot;}
                               {:name &quot;Natural Gas&quot;}]}
              {:name &quot;Food&quot;
               :subcategories [{:name &quot;Eating Out&quot;}
                               {:name &quot;Groceries&quot;}]}
              {:name &quot;Stuff&quot;
               :inactive true
               :subcategories [{:name &quot;Things&quot; :inactive true}
                               {:name &quot;Whatever&quot;}]}]
 :accounts [{:name &quot;Checking&quot;
             :balance 100}
            {:name &quot;Old account&quot;
             :balance 0
             :inactive true}
            {:name &quot;Savings&quot;
             :balance 500}]}
</pre><span>

I&apos;m fairly new to specter, and am still learning about what&apos;s possible. How would I recursively remove all maps at all levels that have an </span><code>:inactive true</code><span> flag? The result I would get from the above would be:

</span><pre>{:categories [{:name &quot;Monthly bills&quot;
               :subcategories [{:name &quot;Electric&quot;}
                               {:name &quot;Mortgage&quot;}
                               {:name &quot;Natural Gas&quot;}]}
              {:name &quot;Food&quot;
               :subcategories [{:name &quot;Eating Out&quot;}
                               {:name &quot;Groceries&quot;}]}]
 :accounts [{:name &quot;Checking&quot;
             :balance 100}
            {:name &quot;Savings&quot;
             :balance 500}]}
</pre></div><div id="t1494630195357018" t="2017-05-12 23:03:15 nathanmarz @ksmithbaylor it would be something like:
 (def NODES
  (recursive-path [] p
    (continue-then-stay
      (must :subcategories) ALL p
      )))

(setval [(multi-path :categories :accounts)
         ALL
         NODES
         (pred :inactive)]
  NONE
  data)
"><a href="#t1494630195357018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:03:15</span>           nathanmarz </span><span>@ksmithbaylor it would be something like:
</span><pre>(def NODES
  (recursive-path [] p
    (continue-then-stay
      (must :subcategories) ALL p
      )))

(setval [(multi-path :categories :accounts)
         ALL
         NODES
         (pred :inactive)]
  NONE
  data)
</pre></div><div id="t1494631265505435" t="2017-05-12 23:21:05 ksmithbaylor This is doing almost what I want:  (setval [(walker #(and (map? %) (:inactive %)))] nil data)"><a href="#t1494631265505435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:21:05</span>         ksmithbaylor </span><span>This is doing almost what I want: </span><code>(setval [(walker #(and (map? %) (:inactive %)))] nil data)</code></div><div id="t1494631289508530" t="2017-05-12 23:21:29 ksmithbaylor but now I need to recursively remove the  nil s"><a href="#t1494631289508530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:21:29</span>         ksmithbaylor </span><span>but now I need to recursively remove the </span><code>nil</code><span>s</span></div><div id="t1494631330513756" t="2017-05-12 23:22:10 ksmithbaylor I&apos;d like to keep it generic so I don&apos;t need to know/care what keys are in each level"><a href="#t1494631330513756" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:22:10</span>         ksmithbaylor </span><span>I&apos;d like to keep it generic so I don&apos;t need to know/care what keys are in each level</span></div><div id="t1494632876696979" t="2017-05-12 23:47:56 nathanmarz it&apos;s generally better to be more precise about the structure of your data"><a href="#t1494632876696979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:47:56</span>           nathanmarz </span><span>it&apos;s generally better to be more precise about the structure of your data</span></div><div id="t1494632887698275" t="2017-05-12 23:48:07 nathanmarz walker  doesn&apos;t perform well and has some pitfalls"><a href="#t1494632887698275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:48:07</span>           nathanmarz </span><code>walker</code><span> doesn&apos;t perform well and has some pitfalls</span></div><div id="t1494632903700138" t="2017-05-12 23:48:23 nathanmarz you can just replace  nil  with  NONE  there to get the maps removed"><a href="#t1494632903700138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:48:23</span>           nathanmarz </span><span>you can just replace </span><code>nil</code><span> with </span><code>NONE</code><span> there to get the maps removed</span></div><div id="t1494632980708680" t="2017-05-12 23:49:40 nathanmarz actually nevermind,  walker  doesn&apos;t implement  NONE  removal"><a href="#t1494632980708680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-12</span> <span class="t" onclick="H(this)">23:49:40</span>           nathanmarz </span><span>actually nevermind, </span><code>walker</code><span> doesn&apos;t implement </span><code>NONE</code><span> removal</span></div><div id="t1494636942069460" t="2017-05-13 00:55:42 ksmithbaylor Is there a way to implement NONE removal for walker? There are a lot of types of entities in the db and they all use the same flag for signifying something as inactive."><a href="#t1494636942069460" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">00:55:42</span>         ksmithbaylor </span><span>Is there a way to implement NONE removal for walker? There are a lot of types of entities in the db and they all use the same flag for signifying something as inactive.</span></div><div id="t1494636999073660" t="2017-05-13 00:56:39 ksmithbaylor Also, the inactive entities always appear in vectors. Would it make sense to wrap the setval above in a transform that would filter each vector to remove NONE?"><a href="#t1494636999073660" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">00:56:39</span>         ksmithbaylor </span><span>Also, the inactive entities always appear in vectors. Would it make sense to wrap the setval above in a transform that would filter each vector to remove NONE?</span></div><div id="t1494637756128319" t="2017-05-13 01:09:16 nathanmarz @ksmithbaylor i don&apos;t think it would be too hard to re-implement walker in terms of  recursive-path ,  ALL , etc."><a href="#t1494637756128319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">01:09:16</span>           nathanmarz </span><span>@ksmithbaylor i don&apos;t think it would be too hard to re-implement walker in terms of </span><code>recursive-path</code><span>, </span><code>ALL</code><span>, etc.</span></div><div id="t1494637800131184" t="2017-05-13 01:10:00 nathanmarz you could also use  [(walker vector?) ALL (pred :inactive)]  as your path, and  NONE  removal will work"><a href="#t1494637800131184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">01:10:00</span>           nathanmarz </span><span>you could also use </span><code>[(walker vector?) ALL (pred :inactive)]</code><span> as your path, and </span><code>NONE</code><span> removal will work</span></div><div id="t1494637977143103" t="2017-05-13 01:12:57 nathanmarz actually that would need to be wrapped in  recursive-path  so it reaches vectors nested inside maps inside vectors"><a href="#t1494637977143103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">01:12:57</span>           nathanmarz </span><span>actually that would need to be wrapped in </span><code>recursive-path</code><span> so it reaches vectors nested inside maps inside vectors</span></div><div id="t1494711014225895" t="2017-05-13 21:30:14 ksmithbaylor Since I&apos;m fairly new to Clojure, I&apos;m not quite clear on the usage of  recursive-path . Here&apos;s what I have so far, but it seems to have no effect on the data:
 (setval (recursive-path [] p [(walker vector?) ALL (pred :inactive) p]) NONE data)
"><a href="#t1494711014225895" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-13</span> <span class="t" onclick="H(this)">21:30:14</span>         ksmithbaylor </span><span>Since I&apos;m fairly new to Clojure, I&apos;m not quite clear on the usage of </span><code>recursive-path</code><span>. Here&apos;s what I have so far, but it seems to have no effect on the data:
</span><pre>(setval (recursive-path [] p [(walker vector?) ALL (pred :inactive) p]) NONE data)
</pre></div><div id="t1494818130033618" t="2017-05-15 03:15:30 nathanmarz @ksmithbaylor that path as defined never finishes navigation anywhere"><a href="#t1494818130033618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-15</span> <span class="t" onclick="H(this)">03:15:30</span>           nathanmarz </span><span>@ksmithbaylor that path as defined never finishes navigation anywhere</span></div><div id="t1494818401059092" t="2017-05-15 03:20:01 nathanmarz you&apos;ll want something like
 (let [all-maps
        (recursive-path [] p
           [(walker vector?)
             ALL
             (continue-then-stay p)])]
(setval [all-maps (pred :inactive)] NONE data))
"><a href="#t1494818401059092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-15</span> <span class="t" onclick="H(this)">03:20:01</span>           nathanmarz </span><span>you&apos;ll want something like
</span><pre>(let [all-maps
        (recursive-path [] p
           [(walker vector?)
             ALL
             (continue-then-stay p)])]
(setval [all-maps (pred :inactive)] NONE data))
</pre></div><div id="t1495485919492971" t="2017-05-22 20:45:19 dottedmag Is Specter a good tool for the following task? I have a representation of file tree  {:dirs {&quot;name&quot; &lt;...&gt; &quot;name2&quot; &lt;..&gt;} :files {&quot;fname&quot; &lt;...&gt; &quot;fname2&quot; &lt;...&gt;}} , where values in map under  :dirs  are of the same structure. And I also have a file path &quot;name/subname/subname/filename&quot;. I need to return a new file tree with this path added, potentially creating any missing intermediate directories."><a href="#t1495485919492971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-22</span> <span class="t" onclick="H(this)">20:45:19</span>            dottedmag </span><span>Is Specter a good tool for the following task? I have a representation of file tree </span><code>{:dirs {&quot;name&quot; &lt;...&gt; &quot;name2&quot; &lt;..&gt;} :files {&quot;fname&quot; &lt;...&gt; &quot;fname2&quot; &lt;...&gt;}}</code><span>, where values in map under </span><code>:dirs</code><span> are of the same structure. And I also have a file path &quot;name/subname/subname/filename&quot;. I need to return a new file tree with this path added, potentially creating any missing intermediate directories.</span></div><div id="t1495495145677911" t="2017-05-22 23:19:05 nathanmarz @dottedmag it&apos;ll help but won&apos;t be as compelling as it is for a lot of other use cases"><a href="#t1495495145677911" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-22</span> <span class="t" onclick="H(this)">23:19:05</span>           nathanmarz </span><span>@dottedmag it&apos;ll help but won&apos;t be as compelling as it is for a lot of other use cases</span></div><div id="t1495495201687191" t="2017-05-22 23:20:01 nathanmarz for this I would dynamically create a path using reduce, comp-paths, and keypath"><a href="#t1495495201687191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-22</span> <span class="t" onclick="H(this)">23:20:01</span>           nathanmarz </span><span>for this I would dynamically create a path using reduce, comp-paths, and keypath</span></div><div id="t1495497495054440" t="2017-05-22 23:58:15 dottedmag @nathanmarz Yep, I&apos;ve got the same impression. Looks like a zipper is a better fit for this particular problem."><a href="#t1495497495054440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-22</span> <span class="t" onclick="H(this)">23:58:15</span>            dottedmag </span><span>@nathanmarz Yep, I&apos;ve got the same impression. Looks like a zipper is a better fit for this particular problem.</span></div><div id="t1495501668640520" t="2017-05-23 01:07:48 madstap @dottedmag I would just use core functions:
 (defn assoc-file [dir-map path content]
  (let [xs (str/split path #&quot;/&quot;)
        dirs (butlast xs)
        file-name (last xs)
        path-vec (-&gt; (interleave (repeat :dirs) dirs)
                     vec
                     (conj :files file-name))]
    (assoc-in dir-map path-vec content)))

(assoc-file {} &quot;foo/bar/baz.sh&quot; &quot;#!/bin/bash\n\necho foobar&quot;)
 
Edit:  (mapcat vector foo bar)  is just  (interleave foo bar)"><a href="#t1495501668640520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span> <span class="t" onclick="H(this)">01:07:48</span>              madstap </span><span>@dottedmag I would just use core functions:
</span><pre>(defn assoc-file [dir-map path content]
  (let [xs (str/split path #&quot;/&quot;)
        dirs (butlast xs)
        file-name (last xs)
        path-vec (-&gt; (interleave (repeat :dirs) dirs)
                     vec
                     (conj :files file-name))]
    (assoc-in dir-map path-vec content)))

(assoc-file {} &quot;foo/bar/baz.sh&quot; &quot;#!/bin/bash\n\necho foobar&quot;)
</pre><span>
Edit: </span><code>(mapcat vector foo bar)</code><span> is just </span><code>(interleave foo bar)</code></div><div id="t1495565835299779" t="2017-05-23 18:57:15 dottedmag @madstap Thanks. I&apos;ve got other operations on the same structure, so I went slightly crazy and created  https://github.com/dottedmag/azip"><a href="#t1495565835299779" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span> <span class="t" onclick="H(this)">18:57:15</span>            dottedmag </span><span>@madstap Thanks. I&apos;ve got other operations on the same structure, so I went slightly crazy and created </span><a href="https://github.com/dottedmag/azip" target="_blank">https://github.com/dottedmag/azip</a></div><div id="t1495566284478220" t="2017-05-23 19:04:44 madstap dottedmag: Nice. I&apos;ve never used zippers before. Out of curiosity, how would my assoc-file function look using azip?"><a href="#t1495566284478220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span> <span class="t" onclick="H(this)">19:04:44</span>                   madstap </span><span>dottedmag: Nice. I&apos;ve never used zippers before. Out of curiosity, how would my assoc-file function look using azip?</span></div><div id="t1496084984226772" t="2017-05-29 19:09:44 oskarkv outer-map looks like this:
 {[1.0 1.0] {:vertices [[0 0] [1.5 0.0] [1.5 1.5] [0.0 1.5]]}
 ...}
 

Can I do this conveniently with specter? I.e. take the vertices, make a polygon out of them, and put it next to the vertices.

 (into {} (map (fn [[site m]] (assoc m :polygon
                                    (pair-cycle (:vertices m)))
                outer-map)))
"><a href="#t1496084984226772" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-29</span> <span class="t" onclick="H(this)">19:09:44</span>              oskarkv </span><span>outer-map looks like this:
</span><pre>{[1.0 1.0] {:vertices [[0 0] [1.5 0.0] [1.5 1.5] [0.0 1.5]]}
 ...}
</pre><span>

Can I do this conveniently with specter? I.e. take the vertices, make a polygon out of them, and put it next to the vertices.

</span><pre>(into {} (map (fn [[site m]] (assoc m :polygon
                                    (pair-cycle (:vertices m)))
                outer-map)))
</pre></div><div id="t1496091745966596" t="2017-05-29 21:02:25 oskarkv (s/transform [s/MAP-VALS (s/collect-one :vertices) :polygon]
                   (fn [vs _] (pair-cycle vs))
                   m)
"><a href="#t1496091745966596" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-29</span> <span class="t" onclick="H(this)">21:02:25</span>              oskarkv </span><pre>(s/transform [s/MAP-VALS (s/collect-one :vertices) :polygon]
                   (fn [vs _] (pair-cycle vs))
                   m)
</pre></div><div id="t1496091773969338" t="2017-05-29 21:02:53 oskarkv That&apos;s what I came up with."><a href="#t1496091773969338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-29</span> <span class="t" onclick="H(this)">21:02:53</span>              oskarkv </span><span>That&apos;s what I came up with.</span></div><div id="t1496098014495972" t="2017-05-29 22:46:54 nathanmarz @oskarkv that code looks good to me"><a href="#t1496098014495972" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-29</span> <span class="t" onclick="H(this)">22:46:54</span>           nathanmarz </span><span>@oskarkv that code looks good to me</span></div><div id="t1496174451441630" t="2017-05-30 20:00:51 mping hia"><a href="#t1496174451441630" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">20:00:51</span>                mping </span><span>hia</span></div><div id="t1496174545474581" t="2017-05-30 20:02:25 mping is there a way to traverse a map of maps and return a val for a given predicate?"><a href="#t1496174545474581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">20:02:25</span>                mping </span><span>is there a way to traverse a map of maps and return a val for a given predicate?</span></div><div id="t1496174554477759" t="2017-05-30 20:02:34 mping I&apos;m still wrapping my head around specter"><a href="#t1496174554477759" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">20:02:34</span>                mping </span><span>I&apos;m still wrapping my head around specter</span></div><div id="t1496174620500750" t="2017-05-30 20:03:40 mping something like a recursive tree walk"><a href="#t1496174620500750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">20:03:40</span>                mping </span><span>something like a recursive tree walk</span></div><div id="t1496182387800539" t="2017-05-30 22:13:07 nathanmarz @mping yes, that&apos;s pretty easy"><a href="#t1496182387800539" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">22:13:07</span>           nathanmarz </span><span>@mping yes, that&apos;s pretty easy</span></div><div id="t1496182391801409" t="2017-05-30 22:13:11 nathanmarz have a particular example?"><a href="#t1496182391801409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-30</span> <span class="t" onclick="H(this)">22:13:11</span>           nathanmarz </span><span>have a particular example?</span></div><div id="t1496191376309652" t="2017-05-31 00:42:56 danboykis If I have the following:

 (def person
  [{:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :a}
   {:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :b}
   {:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :c}])
 

I want to transform that to

 {:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag #{:c :b :a}}
 

In plain clojure I can  do it with

 (into {} (map (fn [[k v]] (assoc k :tag v)))
      (reduce (fn [accum e]
          (let [sm (select-keys e [:name :id :job])]
            (if-let [exists (get accum sm)]
              (assoc accum sm (conj exists (:tag e)))
              (assoc accum sm #{(:tag e)}))))
        {}
        person))
 

I am hoping there&apos;s a nicer way to do the same in specter"><a href="#t1496191376309652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">00:42:56</span>            danboykis </span><span>If I have the following:

</span><pre>(def person
  [{:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :a}
   {:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :b}
   {:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag :c}])
</pre><span>

I want to transform that to

</span><pre>{:name &quot;Person&quot;, :id 1, :job &quot;Something&quot;, :tag #{:c :b :a}}
</pre><span>

In plain clojure I can  do it with

</span><pre>(into {} (map (fn [[k v]] (assoc k :tag v)))
      (reduce (fn [accum e]
          (let [sm (select-keys e [:name :id :job])]
            (if-let [exists (get accum sm)]
              (assoc accum sm (conj exists (:tag e)))
              (assoc accum sm #{(:tag e)}))))
        {}
        person))
</pre><span>

I am hoping there&apos;s a nicer way to do the same in specter</span></div><div id="t1496197141057865" t="2017-05-31 02:19:01 nathanmarz @danboykis that&apos;s computing an entirely new value, whereas specter is about changing part of a data structure"><a href="#t1496197141057865" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">02:19:01</span>           nathanmarz </span><span>@danboykis that&apos;s computing an entirely new value, whereas specter is about changing part of a data structure</span></div><div id="t1496197239069598" t="2017-05-31 02:20:39 nathanmarz there are pieces of it you can make nicer with specter, like replacing the  if-let  clause with  (setval [(keypath sm) NONE-ELEM] (:tag e) accum)"><a href="#t1496197239069598" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">02:20:39</span>           nathanmarz </span><span>there are pieces of it you can make nicer with specter, like replacing the </span><code>if-let</code><span> clause with </span><code>(setval [(keypath sm) NONE-ELEM] (:tag e) accum)</code></div><div id="t1496199982391841" t="2017-05-31 03:06:22 danboykis @nathanmarz thanks for the explanation, I am new to specter and don&apos;t have a good feel for the its use cases yet"><a href="#t1496199982391841" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">03:06:22</span>            danboykis </span><span>@nathanmarz thanks for the explanation, I am new to specter and don&apos;t have a good feel for the its use cases yet</span></div><div id="t1496211126637006" t="2017-05-31 06:12:06 mping @nathanmarz figured it out:  (specter/select (specter/walker is-pdf-attachment?) user/msg)"><a href="#t1496211126637006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">06:12:06</span>                mping </span><span>@nathanmarz figured it out: </span><code>(specter/select (specter/walker is-pdf-attachment?) user/msg)</code></div><div id="t1496211129637367" t="2017-05-31 06:12:09 mping tks"><a href="#t1496211129637367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-31</span> <span class="t" onclick="H(this)">06:12:09</span>                mping </span><span>tks</span></div><div id="t1496409793577510" t="2017-06-02 13:23:13 wilkerlucio hello, I would like to use specter to apply a function to all map keys (recursively) on a map, can someone please give me an example on doing that?"><a href="#t1496409793577510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">13:23:13</span>          wilkerlucio </span><span>hello, I would like to use specter to apply a function to all map keys (recursively) on a map, can someone please give me an example on doing that?</span></div><div id="t1496411498150800" t="2017-06-02 13:51:38 nathanmarz @wilkerlucio can you show a specific example of a transformation?"><a href="#t1496411498150800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">13:51:38</span>           nathanmarz </span><span>@wilkerlucio can you show a specific example of a transformation?</span></div><div id="t1496411507153703" t="2017-06-02 13:51:47 nathanmarz that should be pretty easy"><a href="#t1496411507153703" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">13:51:47</span>           nathanmarz </span><span>that should be pretty easy</span></div><div id="t1496411644202871" t="2017-06-02 13:54:04 wilkerlucio @nathanmarz sure, something like this:

 {:person/name &quot;Bla&quot;
 :person/child {:child/something &quot;other&quot;
                :child/bla {:subchild/entry &quot;blabla&quot;}}}
 

to this:

 {:name &quot;Bla&quot;
 :child {:something &quot;other&quot;
                :bla {:entry &quot;blabla&quot;}}}
"><a href="#t1496411644202871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">13:54:04</span>          wilkerlucio </span><span>@nathanmarz sure, something like this:

</span><pre>{:person/name &quot;Bla&quot;
 :person/child {:child/something &quot;other&quot;
                :child/bla {:subchild/entry &quot;blabla&quot;}}}
</pre><span>

to this:

</span><pre>{:name &quot;Bla&quot;
 :child {:something &quot;other&quot;
                :bla {:entry &quot;blabla&quot;}}}
</pre></div><div id="t1496411657207327" t="2017-06-02 13:54:17 wilkerlucio considering it can  have N nesting fields"><a href="#t1496411657207327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">13:54:17</span>          wilkerlucio </span><span>considering it can  have N nesting fields</span></div><div id="t1496412327457893" t="2017-06-02 14:05:27 nathanmarz @wilkerlucio looks like this:
 (def data
  {:person/name &quot;Bla&quot;
   :person/child {:child/something &quot;other&quot;
                  :child/bla {:subchild/entry &quot;blabla&quot;}}})

(def MapWalker
  (recursive-path [] p
    (if-path map?
      (continue-then-stay MAP-VALS p))
    ))

(setval [MapWalker MAP-KEYS NAMESPACE] nil data)
"><a href="#t1496412327457893" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">14:05:27</span>           nathanmarz </span><span>@wilkerlucio looks like this:
</span><pre>(def data
  {:person/name &quot;Bla&quot;
   :person/child {:child/something &quot;other&quot;
                  :child/bla {:subchild/entry &quot;blabla&quot;}}})

(def MapWalker
  (recursive-path [] p
    (if-path map?
      (continue-then-stay MAP-VALS p))
    ))

(setval [MapWalker MAP-KEYS NAMESPACE] nil data)
</pre></div><div id="t1496416649119002" t="2017-06-02 15:17:29 wilkerlucio @nathanmarz thanks  🙂"><a href="#t1496416649119002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">15:17:29</span>          wilkerlucio </span><span>@nathanmarz thanks </span><b>🙂</b></div><div id="t1496419564233137" t="2017-06-02 16:06:04 souenzzo (def ALL-MAPS
  &quot;All maps of an entity&quot;
  (recursive-path [] p
                  [(walker map?) (stay-then-continue MAP-VALS p)]))

 
@wilkerlucio those dont work with  {:a [{:b :c}]} ..."><a href="#t1496419564233137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">16:06:04</span>             souenzzo </span><pre>(def ALL-MAPS
  &quot;All maps of an entity&quot;
  (recursive-path [] p
                  [(walker map?) (stay-then-continue MAP-VALS p)]))

</pre><span>
@wilkerlucio those dont work with </span><code>{:a [{:b :c}]}</code><span>...</span></div><div id="t1496422776367437" t="2017-06-02 16:59:36 nathanmarz it&apos;s generally better not to use walker"><a href="#t1496422776367437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">16:59:36</span>           nathanmarz </span><span>it&apos;s generally better not to use walker</span></div><div id="t1496422801375719" t="2017-06-02 17:00:01 nathanmarz but rather make a path that precisely encodes the structure of the data you&apos;re working with"><a href="#t1496422801375719" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:00:01</span>           nathanmarz </span><span>but rather make a path that precisely encodes the structure of the data you&apos;re working with</span></div><div id="t1496422826386111" t="2017-06-02 17:00:26 nathanmarz walker is brute force which makes it less performant and often causes surprising bugs (e.g. by descending into things you didn&apos;t want, like records)"><a href="#t1496422826386111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:00:26</span>           nathanmarz </span><span>walker is brute force which makes it less performant and often causes surprising bugs (e.g. by descending into things you didn&apos;t want, like records)</span></div><div id="t1496422925420869" t="2017-06-02 17:02:05 souenzzo There is some other way to define  ALL-MAPS  (w/o walker)?"><a href="#t1496422925420869" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:02:05</span>             souenzzo </span><span>There is some other way to define </span><code>ALL-MAPS</code><span> (w/o walker)?</span></div><div id="t1496422975438388" t="2017-06-02 17:02:55 nathanmarz @souenzzo  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1284"><a href="#t1496422975438388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:02:55</span>           nathanmarz </span><span>@souenzzo </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1284" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1284</a></div><div id="t1496422990443338" t="2017-06-02 17:03:10 nathanmarz that&apos;s the new definition of  walker  I recently committed"><a href="#t1496422990443338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:03:10</span>           nathanmarz </span><span>that&apos;s the new definition of </span><code>walker</code><span> I recently committed</span></div><div id="t1496423039459771" t="2017-06-02 17:03:59 nathanmarz can define your  ALL-MAPS  similarly by handling the different data structure cases in a  cond-path"><a href="#t1496423039459771" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:03:59</span>           nathanmarz </span><span>can define your </span><code>ALL-MAPS</code><span> similarly by handling the different data structure cases in a </span><code>cond-path</code></div><div id="t1496423616653577" t="2017-06-02 17:13:36 souenzzo (def ALL-MAPS-2
  (recursive-path
    [] p
    (cond-path map? (continue-then-stay MAP-VALS p)
               coll? [ALL p])))
 
I will try to swap in my code."><a href="#t1496423616653577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">17:13:36</span>             souenzzo </span><pre>(def ALL-MAPS-2
  (recursive-path
    [] p
    (cond-path map? (continue-then-stay MAP-VALS p)
               coll? [ALL p])))
</pre><span>
I will try to swap in my code.</span></div><div id="t1496429113531132" t="2017-06-02 18:45:13 wilkerlucio @souenzzo nice catch"><a href="#t1496429113531132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-02</span> <span class="t" onclick="H(this)">18:45:13</span>          wilkerlucio </span><span>@souenzzo nice catch</span></div><div id="t1496505690695364" t="2017-06-03 16:01:30 souenzzo (-&gt;&gt; x
(transform [:foo :bar MY-TRANSFORM] inc)
(transform [:foo2 :bar2 MY-TRANSFORM] inc))
 
There is some how to do this with one transoform?"><a href="#t1496505690695364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span> <span class="t" onclick="H(this)">16:01:30</span>             souenzzo </span><pre>(-&gt;&gt; x
(transform [:foo :bar MY-TRANSFORM] inc)
(transform [:foo2 :bar2 MY-TRANSFORM] inc))
</pre><span>
There is some how to do this with one transoform?</span></div><div id="t1496509481966515" t="2017-06-03 17:04:41 urbank Try multi-path"><a href="#t1496509481966515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span> <span class="t" onclick="H(this)">17:04:41</span>               urbank </span><span>Try multi-path</span></div><div id="t1496518312483102" t="2017-06-03 19:31:52 nathanmarz if you want different transformation functions applied at each path, use  multi-transform  +  terminal /`terminal-val`"><a href="#t1496518312483102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span> <span class="t" onclick="H(this)">19:31:52</span>           nathanmarz </span><span>if you want different transformation functions applied at each path, use </span><code>multi-transform</code><span> + </span><code>terminal</code><span>/`terminal-val`</span></div><div id="t1496518321483562" t="2017-06-03 19:32:01 nathanmarz in this case just  multi-path  is fine"><a href="#t1496518321483562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span> <span class="t" onclick="H(this)">19:32:01</span>           nathanmarz </span><span>in this case just </span><code>multi-path</code><span> is fine</span></div><div id="t1496539840486261" t="2017-06-04 01:30:40 michaelwfogleman Hm, playing around with specter and really loving it so far. I notice that sometimes I want to get a single value but specter wraps the return in a vector - so I call first on the result - is there a more idiomatic way to do this?"><a href="#t1496539840486261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-04</span> <span class="t" onclick="H(this)">01:30:40</span>     michaelwfogleman </span><span>Hm, playing around with specter and really loving it so far. I notice that sometimes I want to get a single value but specter wraps the return in a vector - so I call first on the result - is there a more idiomatic way to do this?</span></div><div id="t1496544888680385" t="2017-06-04 02:54:48 nathanmarz @michaelwfogleman  select-any"><a href="#t1496544888680385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-04</span> <span class="t" onclick="H(this)">02:54:48</span>           nathanmarz </span><span>@michaelwfogleman </span><code>select-any</code></div><div id="t1496544897680681" t="2017-06-04 02:54:57 nathanmarz or  select-first"><a href="#t1496544897680681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-04</span> <span class="t" onclick="H(this)">02:54:57</span>           nathanmarz </span><span>or </span><code>select-first</code></div><div id="t1496544961683285" t="2017-06-04 02:56:01 nathanmarz those are also much more efficient than  (first (select ...))"><a href="#t1496544961683285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-04</span> <span class="t" onclick="H(this)">02:56:01</span>           nathanmarz </span><span>those are also much more efficient than </span><code>(first (select ...))</code></div><div id="t1496849945246223" t="2017-06-07 15:39:05 frankmoyer I’ve really enjoyed working with specter over the past couple of days; its code concision in dealing with nested sequences is beautiful. I’ve run into an issue that has gotten me stuck.

I have a  defnav my-nav  that is returning  [[] [] [[&quot;a&quot; {:x &quot;y&quot;}]]] . I cannot figure out a way to remove the empty sequences from the  defnav  before returning it. I’ve read through recent posts on using  (setval [ALL nil?] NONE m) , however that only works when used outside the  defnav . Also, when I place  FIRST  in a path after  my-nav  like  (select [my-nav FIRST] m) , it removes the empty vectors. However, when I place that  FIRST  at the last part of the navigator within  my-nav , it does not remove them. Any ideas on why specter behaves this way and any way around it?"><a href="#t1496849945246223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:39:05</span>           frankmoyer </span><span>I’ve really enjoyed working with specter over the past couple of days; its code concision in dealing with nested sequences is beautiful. I’ve run into an issue that has gotten me stuck.

I have a </span><code>defnav my-nav</code><span> that is returning </span><code>[[] [] [[&quot;a&quot; {:x &quot;y&quot;}]]]</code><span>. I cannot figure out a way to remove the empty sequences from the </span><code>defnav</code><span> before returning it. I’ve read through recent posts on using </span><code>(setval [ALL nil?] NONE m)</code><span>, however that only works when used outside the </span><code>defnav</code><span>. Also, when I place </span><code>FIRST</code><span> in a path after </span><code>my-nav</code><span> like </span><code>(select [my-nav FIRST] m)</code><span>, it removes the empty vectors. However, when I place that </span><code>FIRST</code><span> at the last part of the navigator within </span><code>my-nav</code><span>, it does not remove them. Any ideas on why specter behaves this way and any way around it?</span></div><div id="t1496850445456643" t="2017-06-07 15:47:25 nathanmarz @frankmoyer what is the definition of  my-nav ?"><a href="#t1496850445456643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:47:25</span>           nathanmarz </span><span>@frankmoyer what is the definition of </span><code>my-nav</code><span>?</span></div><div id="t1496850612527342" t="2017-06-07 15:50:12 frankmoyer @nathanmarz 

 (sp/defnav previously-assigned-not-finished
  [user get-time completion-time-limit]
  (select* [this structure next-fn]
    (next-fn
      (sp/select
        (sp/selected? ;; return the matching keys-value pairs from this point
          [sp/LAST ;; pick the map value (now in vector form)
           :assignments ;; select :assignments entry
           (sp/must annotator) ;; only the ones assigned to this user
           (sp/selected? ;; pass through the assignments to both next
             [(sp/must :assigned) ;; get the assigned entry
             ;; check that the time limit has not passed
             #(&gt; completion-time-limit (- (get-time) %))])
             (sp/not-selected? ;; exclude when finished
               (sp/multi-path
                 (sp/must :complete)
                 (sp/must :flagged-for-review)
                 (sp/must :incomplete)))])
      structure)))
  (transform* [this structure next-fn]
        (next-fn [structure annotator])))
 

Any other advice is appreciated; I just started working with Specter yesterday."><a href="#t1496850612527342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:50:12</span>           frankmoyer </span><span>@nathanmarz 

</span><pre>(sp/defnav previously-assigned-not-finished
  [user get-time completion-time-limit]
  (select* [this structure next-fn]
    (next-fn
      (sp/select
        (sp/selected? ;; return the matching keys-value pairs from this point
          [sp/LAST ;; pick the map value (now in vector form)
           :assignments ;; select :assignments entry
           (sp/must annotator) ;; only the ones assigned to this user
           (sp/selected? ;; pass through the assignments to both next
             [(sp/must :assigned) ;; get the assigned entry
             ;; check that the time limit has not passed
             #(&gt; completion-time-limit (- (get-time) %))])
             (sp/not-selected? ;; exclude when finished
               (sp/multi-path
                 (sp/must :complete)
                 (sp/must :flagged-for-review)
                 (sp/must :incomplete)))])
      structure)))
  (transform* [this structure next-fn]
        (next-fn [structure annotator])))
</pre><span>

Any other advice is appreciated; I just started working with Specter yesterday.</span></div><div id="t1496850660548184" t="2017-06-07 15:51:00 nathanmarz ok, I suspect you don&apos;t want to be using  defnav"><a href="#t1496850660548184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:51:00</span>           nathanmarz </span><span>ok, I suspect you don&apos;t want to be using </span><code>defnav</code></div><div id="t1496850666551048" t="2017-06-07 15:51:06 nathanmarz what are you trying to accomplish with that?"><a href="#t1496850666551048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:51:06</span>           nathanmarz </span><span>what are you trying to accomplish with that?</span></div><div id="t1496850680557010" t="2017-06-07 15:51:20 nathanmarz there seems to be no relation between the  select*  and  transform*  codepaths"><a href="#t1496850680557010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:51:20</span>           nathanmarz </span><span>there seems to be no relation between the </span><code>select*</code><span> and </span><code>transform*</code><span> codepaths</span></div><div id="t1496850893646167" t="2017-06-07 15:54:53 frankmoyer I was hoping not to implement  transform* , as all I really need is a parameterized navigator."><a href="#t1496850893646167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:54:53</span>           frankmoyer </span><span>I was hoping not to implement </span><code>transform*</code><span>, as all I really need is a parameterized navigator.</span></div><div id="t1496850917656546" t="2017-06-07 15:55:17 nathanmarz for your select* code, you can just accomplish that with a regular  defn :
 (defn previously-assigned-not-finished-path [user get-time completion-time-limit]
  (path ...)
  )
"><a href="#t1496850917656546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:55:17</span>           nathanmarz </span><span>for your select* code, you can just accomplish that with a regular </span><code>defn</code><span>:
</span><pre>(defn previously-assigned-not-finished-path [user get-time completion-time-limit]
  (path ...)
  )
</pre></div><div id="t1496850947669607" t="2017-06-07 15:55:47 nathanmarz and then use it in any  select  or  transform"><a href="#t1496850947669607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:55:47</span>           nathanmarz </span><span>and then use it in any </span><code>select</code><span> or </span><code>transform</code></div><div id="t1496850955672658" t="2017-06-07 15:55:55 frankmoyer :+1:"><a href="#t1496850955672658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:55:55</span>           frankmoyer </span><b>:+1:</b></div><div id="t1496850975681521" t="2017-06-07 15:56:15 nathanmarz the path itself isn&apos;t navigating anywhere"><a href="#t1496850975681521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:56:15</span>           nathanmarz </span><span>the path itself isn&apos;t navigating anywhere</span></div><div id="t1496850978682739" t="2017-06-07 15:56:18 nathanmarz is that what you want?"><a href="#t1496850978682739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:56:18</span>           nathanmarz </span><span>is that what you want?</span></div><div id="t1496850981683924" t="2017-06-07 15:56:21 nathanmarz it&apos;s just a filter"><a href="#t1496850981683924" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:56:21</span>           nathanmarz </span><span>it&apos;s just a filter</span></div><div id="t1496851067720990" t="2017-06-07 15:57:47 nathanmarz selected?  stays navigated if the provided path selects at least one value"><a href="#t1496851067720990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:57:47</span>           nathanmarz </span><code>selected?</code><span> stays navigated if the provided path selects at least one value</span></div><div id="t1496851080726727" t="2017-06-07 15:58:00 frankmoyer Yes, it is. I was trying to get more advanced with defining navigators and testing them individually, chaining them together for different filters. Given it is my second day, I think I need to spend a few more cycles with Specter."><a href="#t1496851080726727" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:58:00</span>           frankmoyer </span><span>Yes, it is. I was trying to get more advanced with defining navigators and testing them individually, chaining them together for different filters. Given it is my second day, I think I need to spend a few more cycles with Specter.</span></div><div id="t1496851129747592" t="2017-06-07 15:58:49 frankmoyer I have been using  selected?  a lot because in a map I want to also return the key."><a href="#t1496851129747592" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:58:49</span>           frankmoyer </span><span>I have been using </span><code>selected?</code><span> a lot because in a map I want to also return the key.</span></div><div id="t1496851151756828" t="2017-06-07 15:59:11 nathanmarz selected?  has nothing to do with that"><a href="#t1496851151756828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:59:11</span>           nathanmarz </span><code>selected?</code><span> has nothing to do with that</span></div><div id="t1496851180769967" t="2017-06-07 15:59:40 nathanmarz if you can simplify your example it will be easier to show you the best way to handle it"><a href="#t1496851180769967" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:59:40</span>           nathanmarz </span><span>if you can simplify your example it will be easier to show you the best way to handle it</span></div><div id="t1496851182770726" t="2017-06-07 15:59:42 frankmoyer How would you get the full filtered value from the incoming structure?"><a href="#t1496851182770726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">15:59:42</span>           frankmoyer </span><span>How would you get the full filtered value from the incoming structure?</span></div><div id="t1496851207783156" t="2017-06-07 16:00:07 nathanmarz that question is too generic to answer"><a href="#t1496851207783156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">16:00:07</span>           nathanmarz </span><span>that question is too generic to answer</span></div><div id="t1496851222790673" t="2017-06-07 16:00:22 nathanmarz try to come up with a simple representative example of your use case"><a href="#t1496851222790673" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">16:00:22</span>           nathanmarz </span><span>try to come up with a simple representative example of your use case</span></div><div id="t1496851232795444" t="2017-06-07 16:00:32 frankmoyer will do. thanks!"><a href="#t1496851232795444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-07</span> <span class="t" onclick="H(this)">16:00:32</span>           frankmoyer </span><span>will do. thanks!</span></div><div id="t1496955435826835" t="2017-06-08 20:57:15 souenzzo @nathanmarz It&apos;s missing on docs that on clojurescript you may need to  :require  with  :refer-macros :all"><a href="#t1496955435826835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-08</span> <span class="t" onclick="H(this)">20:57:15</span>             souenzzo </span><span>@nathanmarz It&apos;s missing on docs that on clojurescript you may need to </span><code>:require</code><span> with </span><code>:refer-macros :all</code></div><div id="t1496956804261667" t="2017-06-08 21:20:04 nathanmarz @souenzzo please add to  https://github.com/nathanmarz/specter/issues/56"><a href="#t1496956804261667" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-08</span> <span class="t" onclick="H(this)">21:20:04</span>           nathanmarz </span><span>@souenzzo please add to </span><a href="https://github.com/nathanmarz/specter/issues/56" target="_blank">https://github.com/nathanmarz/specter/issues/56</a></div><div id="t1497027628292252" t="2017-06-09 17:00:28 michaelwfogleman Apparently reagent implements its own form of atom. Does anyone have any experience getting specter to work with reagent atoms?"><a href="#t1497027628292252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-09</span> <span class="t" onclick="H(this)">17:00:28</span>     michaelwfogleman </span><span>Apparently reagent implements its own form of atom. Does anyone have any experience getting specter to work with reagent atoms?</span></div><div id="t1497029571955576" t="2017-06-09 17:32:51 nathanmarz @michaelwfogleman i&apos;m unfamiliar with reagent, but it sounds like you could make a navigator for it similar to  ATOM"><a href="#t1497029571955576" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-09</span> <span class="t" onclick="H(this)">17:32:51</span>           nathanmarz </span><span>@michaelwfogleman i&apos;m unfamiliar with reagent, but it sounds like you could make a navigator for it similar to </span><code>ATOM</code></div><div id="t1497285070261833" t="2017-06-12 16:31:10 nathanmarz Released Specter 1.0.2  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1497285070261833" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-12</span> <span class="t" onclick="H(this)">16:31:10</span>           nathanmarz </span><span>Released Specter 1.0.2 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1497290964433145" t="2017-06-12 18:09:24 souenzzo For ALL transforms on maps, interpret transformed key/value pair of size &lt; 2 as removal  REAL AWESOME."><a href="#t1497290964433145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-12</span> <span class="t" onclick="H(this)">18:09:24</span>             souenzzo </span><code>For ALL transforms on maps, interpret transformed key/value pair of size &lt; 2 as removal</code><span> REAL AWESOME.</span></div><div id="t1497432694585917" t="2017-06-14 09:31:34 tcoupland looking for a &apos;stateful collector&apos;, for merging a sequence of values with a value within a nested structure"><a href="#t1497432694585917" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">09:31:34</span>            tcoupland </span><span>looking for a &apos;stateful collector&apos;, for merging a sequence of values with a value within a nested structure</span></div><div id="t1497432704588332" t="2017-06-14 09:31:44 tcoupland something like this:
 (use &apos;com.rpl.specter)

(def o {:a {:x 1}
        :b {:x 1}
        :c {:x 1}})

(def i (range 1 10))

(defcollector putseqval
  [a]
  (collect-val 
   [this structure]
   (let [v (first @a)]
     (swap! a rest)
     v)))

(transform
 [MAP-VALS MAP-VALS (putseqval (atom i))] 
 +
 o);; =&gt; {:a {:x 2}, :b {:x 3}, :c {:x 4}}
"><a href="#t1497432704588332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">09:31:44</span>            tcoupland </span><span>something like this:
</span><pre>(use &apos;com.rpl.specter)

(def o {:a {:x 1}
        :b {:x 1}
        :c {:x 1}})

(def i (range 1 10))

(defcollector putseqval
  [a]
  (collect-val 
   [this structure]
   (let [v (first @a)]
     (swap! a rest)
     v)))

(transform
 [MAP-VALS MAP-VALS (putseqval (atom i))] 
 +
 o);; =&gt; {:a {:x 2}, :b {:x 3}, :c {:x 4}}
</pre></div><div id="t1497432726593983" t="2017-06-14 09:32:06 tcoupland anybody have any better ideas?  🙂"><a href="#t1497432726593983" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">09:32:06</span>            tcoupland </span><span>anybody have any better ideas? </span><b>🙂</b></div><div id="t1497450329409260" t="2017-06-14 14:25:29 nathanmarz @tcoupland use  subselect"><a href="#t1497450329409260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:25:29</span>           nathanmarz </span><span>@tcoupland use </span><code>subselect</code></div><div id="t1497450351418602" t="2017-06-14 14:25:51 nathanmarz (setval (subselect MAP-VALS MAP-VALS) [2 3 4] o)"><a href="#t1497450351418602" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:25:51</span>           nathanmarz </span><code>(setval (subselect MAP-VALS MAP-VALS) [2 3 4] o)</code></div><div id="t1497450538497714" t="2017-06-14 14:28:58 tcoupland can i work that into the transform?"><a href="#t1497450538497714" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:28:58</span>            tcoupland </span><span>can i work that into the transform?</span></div><div id="t1497450936668682" t="2017-06-14 14:35:36 nathanmarz @tcoupland what do you mean?"><a href="#t1497450936668682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:35:36</span>           nathanmarz </span><span>@tcoupland what do you mean?</span></div><div id="t1497451017702124" t="2017-06-14 14:36:57 tcoupland i want to execute a function (+) on the value in the datastructure (o) and values from the sequence (i)"><a href="#t1497451017702124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:36:57</span>            tcoupland </span><span>i want to execute a function (+) on the value in the datastructure (o) and values from the sequence (i)</span></div><div id="t1497451065722478" t="2017-06-14 14:37:45 nathanmarz transform  on the subselect will be on the sequence of values"><a href="#t1497451065722478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:37:45</span>           nathanmarz </span><code>transform</code><span> on the subselect will be on the sequence of values</span></div><div id="t1497451071724858" t="2017-06-14 14:37:51 nathanmarz so you can combine the two sequences easily"><a href="#t1497451071724858" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:37:51</span>           nathanmarz </span><span>so you can combine the two sequences easily</span></div><div id="t1497451126747639" t="2017-06-14 14:38:46 nathanmarz (transform (subselect MAP-VALS MAP-VALS) (fn [s] (map + s [2 3 4])) o)"><a href="#t1497451126747639" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:38:46</span>           nathanmarz </span><code>(transform (subselect MAP-VALS MAP-VALS) (fn [s] (map + s [2 3 4])) o)</code></div><div id="t1497451366847354" t="2017-06-14 14:42:46 tcoupland clearly i do not grok subselect  🙂"><a href="#t1497451366847354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:42:46</span>            tcoupland </span><span>clearly i do not grok subselect </span><b>🙂</b></div><div id="t1497451373850405" t="2017-06-14 14:42:53 tcoupland thank you nathan  🙇"><a href="#t1497451373850405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:42:53</span>            tcoupland </span><span>thank you nathan </span><b>🙇</b></div><div id="t1497451498902048" t="2017-06-14 14:44:58 nathanmarz i recommend toying around with the size of transformed sequence to fully understand its behavior"><a href="#t1497451498902048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">14:44:58</span>           nathanmarz </span><span>i recommend toying around with the size of transformed sequence to fully understand its behavior</span></div><div id="t1497455665687236" t="2017-06-14 15:54:25 tcoupland do collect and subselect play nicely together?"><a href="#t1497455665687236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:54:25</span>            tcoupland </span><span>do collect and subselect play nicely together?</span></div><div id="t1497455679693445" t="2017-06-14 15:54:39 tcoupland getting an arity exception in terminal*"><a href="#t1497455679693445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:54:39</span>            tcoupland </span><span>getting an arity exception in terminal*</span></div><div id="t1497455712708174" t="2017-06-14 15:55:12 tcoupland for my function i also need the map keys, trying to collect them on the way"><a href="#t1497455712708174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:55:12</span>            tcoupland </span><span>for my function i also need the map keys, trying to collect them on the way</span></div><div id="t1497455777736114" t="2017-06-14 15:56:17 tcoupland (transform [(subselect MAP-VALS (collect FIRST FIRST) MAP-VALS)]
           (fn [fnd] (prn (map (fn [[k v] r] (str k v r)) fnd  i))) 
           o)
"><a href="#t1497455777736114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:56:17</span>            tcoupland </span><pre>(transform [(subselect MAP-VALS (collect FIRST FIRST) MAP-VALS)]
           (fn [fnd] (prn (map (fn [[k v] r] (str k v r)) fnd  i))) 
           o)
</pre></div><div id="t1497455794743516" t="2017-06-14 15:56:34 tcoupland Wrong number of args (2) passed to:
   specter/fn--38572/fn/reify--38574/fn--38579

                  AFn.java:  429  clojure.lang.AFn/throwArity
                  AFn.java:   36  clojure.lang.AFn/invoke
                  AFn.java:  156  clojure.lang.AFn/applyToHelper
                  AFn.java:  144  clojure.lang.AFn/applyTo
                  core.clj:  657  clojure.core/apply
                  core.clj:  652  clojure.core/apply
                 impl.cljc:  406  com.rpl.specter.impl$terminal_STAR_/invokeStatic
                 impl.cljc:  403  com.rpl.specter.impl$terminal_STAR_/invoke
                 impl.cljc:  413  com.rpl.specter.impl$compiled_transform_STAR_$fn__36780/invoke
              specter.cljc:  673  com.rpl.specter$reify__38443$next_fn__38449/invoke
"><a href="#t1497455794743516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:56:34</span>            tcoupland </span><pre>Wrong number of args (2) passed to:
   specter/fn--38572/fn/reify--38574/fn--38579

                  AFn.java:  429  clojure.lang.AFn/throwArity
                  AFn.java:   36  clojure.lang.AFn/invoke
                  AFn.java:  156  clojure.lang.AFn/applyToHelper
                  AFn.java:  144  clojure.lang.AFn/applyTo
                  core.clj:  657  clojure.core/apply
                  core.clj:  652  clojure.core/apply
                 impl.cljc:  406  com.rpl.specter.impl$terminal_STAR_/invokeStatic
                 impl.cljc:  403  com.rpl.specter.impl$terminal_STAR_/invoke
                 impl.cljc:  413  com.rpl.specter.impl$compiled_transform_STAR_$fn__36780/invoke
              specter.cljc:  673  com.rpl.specter$reify__38443$next_fn__38449/invoke
</pre></div><div id="t1497455821755205" t="2017-06-14 15:57:01 tcoupland the prn in the transform function get&apos;s fired and looks right, but then the exception happens"><a href="#t1497455821755205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">15:57:01</span>            tcoupland </span><span>the prn in the transform function get&apos;s fired and looks right, but then the exception happens</span></div><div id="t1497456084873999" t="2017-06-14 16:01:24 tcoupland hm, works in a select, but not in the transform"><a href="#t1497456084873999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">16:01:24</span>            tcoupland </span><span>hm, works in a select, but not in the transform</span></div><div id="t1497456578097535" t="2017-06-14 16:09:38 nathanmarz @tcoupland don&apos;t use value collection in  subselect"><a href="#t1497456578097535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">16:09:38</span>           nathanmarz </span><span>@tcoupland don&apos;t use value collection in </span><code>subselect</code></div><div id="t1497456615115179" t="2017-06-14 16:10:15 nathanmarz i&apos;ll put a note about that in its documentation"><a href="#t1497456615115179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-14</span> <span class="t" onclick="H(this)">16:10:15</span>           nathanmarz </span><span>i&apos;ll put a note about that in its documentation</span></div><div id="t1497561929438384" t="2017-06-15 21:25:29 timgilbert Hey, I&apos;ve got a newbie question. I have a big arbitrarily-nested ball of data (vectors, maps, etc). I want to traverse it looking for maps that pass a certain predicate, and then assoc a new key into those maps."><a href="#t1497561929438384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:25:29</span>           timgilbert </span><span>Hey, I&apos;ve got a newbie question. I have a big arbitrarily-nested ball of data (vectors, maps, etc). I want to traverse it looking for maps that pass a certain predicate, and then assoc a new key into those maps.</span></div><div id="t1497561953444976" t="2017-06-15 21:25:53 timgilbert Here&apos;s what my current implementation looks like:
 (defn decorate
  &quot;walk/postwalk version of above that adds get urls in-place&quot;
  [data]
  (walk/postwalk
   (fn [item]
     (if-not (right-thing? item)
       item
       (my-transform item)))
   data))
"><a href="#t1497561953444976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:25:53</span>           timgilbert </span><span>Here&apos;s what my current implementation looks like:
</span><pre>(defn decorate
  &quot;walk/postwalk version of above that adds get urls in-place&quot;
  [data]
  (walk/postwalk
   (fn [item]
     (if-not (right-thing? item)
       item
       (my-transform item)))
   data))
</pre></div><div id="t1497561983453185" t="2017-06-15 21:26:23 timgilbert Can someone advise me on what the equivalent specter calls would be?"><a href="#t1497561983453185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:26:23</span>           timgilbert </span><span>Can someone advise me on what the equivalent specter calls would be?</span></div><div id="t1497562638634926" t="2017-06-15 21:37:18 nathanmarz @timgilbert it would look something like  (setval [(walker right-thing?) :my-new-key] my-new-val data)"><a href="#t1497562638634926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:37:18</span>           nathanmarz </span><span>@timgilbert it would look something like </span><code>(setval [(walker right-thing?) :my-new-key] my-new-val data)</code></div><div id="t1497562827684895" t="2017-06-15 21:40:27 nathanmarz or to match your code exactly  (transform (walker right-thing?) my-transform data)"><a href="#t1497562827684895" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:40:27</span>           nathanmarz </span><span>or to match your code exactly </span><code>(transform (walker right-thing?) my-transform data)</code></div><div id="t1497562851691245" t="2017-06-15 21:40:51 nathanmarz depending on what  my-transform  is you may be able to express it within the path"><a href="#t1497562851691245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:40:51</span>           nathanmarz </span><span>depending on what </span><code>my-transform</code><span> is you may be able to express it within the path</span></div><div id="t1497562890701587" t="2017-06-15 21:41:30 timgilbert It&apos;s basically just  (assoc my-map :my/key (other-fn my-map))"><a href="#t1497562890701587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:41:30</span>           timgilbert </span><span>It&apos;s basically just </span><code>(assoc my-map :my/key (other-fn my-map))</code></div><div id="t1497562980725292" t="2017-06-15 21:43:00 nathanmarz you can do  (transform [(walker right-thing?) (collect-one (view other-fn)) :my/key] (fn [m _] m) data)"><a href="#t1497562980725292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:43:00</span>           nathanmarz </span><span>you can do </span><code>(transform [(walker right-thing?) (collect-one (view other-fn)) :my/key] (fn [m _] m) data)</code></div><div id="t1497563017734835" t="2017-06-15 21:43:37 timgilbert Cool. Thanks for the help, I&apos;ll play around with it some. I&apos;m benchmarking a few different approaches"><a href="#t1497563017734835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:43:37</span>           timgilbert </span><span>Cool. Thanks for the help, I&apos;ll play around with it some. I&apos;m benchmarking a few different approaches</span></div><div id="t1497563064746826" t="2017-06-15 21:44:24 nathanmarz the  walker  in latest specter release is a lot faster than clojure.walk and has same functionality"><a href="#t1497563064746826" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:44:24</span>           nathanmarz </span><span>the </span><code>walker</code><span> in latest specter release is a lot faster than clojure.walk and has same functionality</span></div><div id="t1497563080751054" t="2017-06-15 21:44:40 nathanmarz i benchmarked 70% improvement"><a href="#t1497563080751054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:44:40</span>           nathanmarz </span><span>i benchmarked 70% improvement</span></div><div id="t1497563116760357" t="2017-06-15 21:45:16 timgilbert Cool. I&apos;ll let you know how it turns out"><a href="#t1497563116760357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">21:45:16</span>           timgilbert </span><span>Cool. I&apos;ll let you know how it turns out</span></div><div id="t1497564068000042" t="2017-06-15 22:01:08 timgilbert FWIW, I&apos;m seeing about the same speeds on my test data set, which has a lot of stuff I don&apos;t care (about 750K of EDN) about and 0-90 target maps"><a href="#t1497564068000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:01:08</span>           timgilbert </span><span>FWIW, I&apos;m seeing about the same speeds on my test data set, which has a lot of stuff I don&apos;t care (about 750K of EDN) about and 0-90 target maps</span></div><div id="t1497564097006964" t="2017-06-15 22:01:37 nathanmarz care to share your benchmark code?"><a href="#t1497564097006964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:01:37</span>           nathanmarz </span><span>care to share your benchmark code?</span></div><div id="t1497564156020927" t="2017-06-15 22:02:36 timgilbert It would take me some time to clean it up and put it into a gist, but I&apos;ll try to do it tomorrow afternoon sometime"><a href="#t1497564156020927" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:02:36</span>           timgilbert </span><span>It would take me some time to clean it up and put it into a gist, but I&apos;ll try to do it tomorrow afternoon sometime</span></div><div id="t1497564197030792" t="2017-06-15 22:03:17 timgilbert But it&apos;s basically running criterium against a bunch of random data from an EDN file plus a bunch of generated data from specs"><a href="#t1497564197030792" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:03:17</span>           timgilbert </span><span>But it&apos;s basically running criterium against a bunch of random data from an EDN file plus a bunch of generated data from specs</span></div><div id="t1497564297054144" t="2017-06-15 22:04:57 timgilbert The context is I need to go through a potentially large API response and decorate some data with derived values, and I&apos;m trying to see how much of a perf hit I&apos;m setting myself up for"><a href="#t1497564297054144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:04:57</span>           timgilbert </span><span>The context is I need to go through a potentially large API response and decorate some data with derived values, and I&apos;m trying to see how much of a perf hit I&apos;m setting myself up for</span></div><div id="t1497564333063216" t="2017-06-15 22:05:33 nathanmarz i&apos;d be curious to see benchmark of  (transform (walker right-thing?) my-transform data)  approach as well (without using  collect-one )"><a href="#t1497564333063216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:05:33</span>           nathanmarz </span><span>i&apos;d be curious to see benchmark of </span><code>(transform (walker right-thing?) my-transform data)</code><span> approach as well (without using </span><code>collect-one</code><span>)</span></div><div id="t1497564681141992" t="2017-06-15 22:11:21 timgilbert Looks like about the same. In my benchmarks I&apos;ve got 0.2927 for the collect-one version, 0.2994 for the transform one and 0.2962 for the postwalk version"><a href="#t1497564681141992" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:11:21</span>           timgilbert </span><span>Looks like about the same. In my benchmarks I&apos;ve got 0.2927 for the collect-one version, 0.2994 for the transform one and 0.2962 for the postwalk version</span></div><div id="t1497564729152535" t="2017-06-15 22:12:09 timgilbert (I&apos;m not going absolutely crazy with the methodology here, I should note, just looking for back-of-the-envelope stuff)"><a href="#t1497564729152535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:12:09</span>           timgilbert </span><span>(I&apos;m not going absolutely crazy with the methodology here, I should note, just looking for back-of-the-envelope stuff)</span></div><div id="t1497564781163782" t="2017-06-15 22:13:01 nathanmarz if your target maps are never within another map&apos;s keys, you can gain big performance improvement by using a custom recursive path"><a href="#t1497564781163782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:13:01</span>           nathanmarz </span><span>if your target maps are never within another map&apos;s keys, you can gain big performance improvement by using a custom recursive path</span></div><div id="t1497564812170861" t="2017-06-15 22:13:32 timgilbert Sadly, they are deeply and somewhat arbitrarily nested"><a href="#t1497564812170861" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:13:32</span>           timgilbert </span><span>Sadly, they are deeply and somewhat arbitrarily nested</span></div><div id="t1497564827174274" t="2017-06-15 22:13:47 timgilbert (Which is something I&apos;m looking to fix but that&apos;s another story)"><a href="#t1497564827174274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:13:47</span>           timgilbert </span><span>(Which is something I&apos;m looking to fix but that&apos;s another story)</span></div><div id="t1497564828174570" t="2017-06-15 22:13:48 nathanmarz (def optimized-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [MAP-VALS p]
               coll? [ALL p]
               )))
"><a href="#t1497564828174570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:13:48</span>           nathanmarz </span><pre>(def optimized-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [MAP-VALS p]
               coll? [ALL p]
               )))
</pre></div><div id="t1497564844178087" t="2017-06-15 22:14:04 nathanmarz the data has maps within map keys?"><a href="#t1497564844178087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:14:04</span>           nathanmarz </span><span>the data has maps within map keys?</span></div><div id="t1497564863182269" t="2017-06-15 22:14:23 nathanmarz e.g.  {[{:a 1}] 2}"><a href="#t1497564863182269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:14:23</span>           nathanmarz </span><span>e.g. </span><code>{[{:a 1}] 2}</code></div><div id="t1497564943199702" t="2017-06-15 22:15:43 timgilbert Yeah, so it could be like  {:company &quot;foo&quot; :people [{:person &quot;bob&quot; :avatar {:type :thumbnail :image-path &quot;/dir/file.png&quot;}}]}"><a href="#t1497564943199702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:15:43</span>           timgilbert </span><span>Yeah, so it could be like </span><code>{:company &quot;foo&quot; :people [{:person &quot;bob&quot; :avatar {:type :thumbnail :image-path &quot;/dir/file.png&quot;}}]}</code></div><div id="t1497564955202342" t="2017-06-15 22:15:55 timgilbert I&apos;m looking for  :image-path"><a href="#t1497564955202342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:15:55</span>           timgilbert </span><span>I&apos;m looking for </span><code>:image-path</code></div><div id="t1497565004212707" t="2017-06-15 22:16:44 timgilbert But it could also be  {:product &quot;foo&quot; :images [{:type :product-img :image-path &quot;foo-bar&quot;}]}"><a href="#t1497565004212707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:16:44</span>           timgilbert </span><span>But it could also be </span><code>{:product &quot;foo&quot; :images [{:type :product-img :image-path &quot;foo-bar&quot;}]}</code></div><div id="t1497565012214365" t="2017-06-15 22:16:52 nathanmarz yea, use  optimized-walker"><a href="#t1497565012214365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:16:52</span>           nathanmarz </span><span>yea, use </span><code>optimized-walker</code></div><div id="t1497565015215001" t="2017-06-15 22:16:55 timgilbert ...and those things can all nest in various ways"><a href="#t1497565015215001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:16:55</span>           timgilbert </span><span>...and those things can all nest in various ways</span></div><div id="t1497565039220274" t="2017-06-15 22:17:19 nathanmarz avoiding traversing over key/value pairs and keys should be very significant"><a href="#t1497565039220274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:17:19</span>           nathanmarz </span><span>avoiding traversing over key/value pairs and keys should be very significant</span></div><div id="t1497565074227744" t="2017-06-15 22:17:54 timgilbert Cool. Thanks again for the help. I&apos;ll play around with it more tomorrow and let you know if I kick up anything interesting"><a href="#t1497565074227744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:17:54</span>           timgilbert </span><span>Cool. Thanks again for the help. I&apos;ll play around with it more tomorrow and let you know if I kick up anything interesting</span></div><div id="t1497565102233628" t="2017-06-15 22:18:22 nathanmarz sure thing"><a href="#t1497565102233628" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-15</span> <span class="t" onclick="H(this)">22:18:22</span>           nathanmarz </span><span>sure thing</span></div><div id="t1498751608236636" t="2017-06-29 15:53:28 enn Hello … I’m wondering if I’m missing an obvious way to do sorting and/or selecting minimum/maximum values with Specter? I think I could do it with  view  or  transformed  and a function that takes  the whole array and just does the min/max in Clojure, but is there a more Specter-y (spectral?) way?"><a href="#t1498751608236636" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-29</span> <span class="t" onclick="H(this)">15:53:28</span>                  enn </span><span>Hello … I’m wondering if I’m missing an obvious way to do sorting and/or selecting minimum/maximum values with Specter? I think I could do it with </span><code>view</code><span> or </span><code>transformed</code><span> and a function that takes  the whole array and just does the min/max in Clojure, but is there a more Specter-y (spectral?) way?</span></div><div id="t1498752237514462" t="2017-06-29 16:03:57 enn Hmm, it looks like  view  or  transformed  will not do what I want because the provided functions get applied to each value matching my  ALL  selector, rather than the sequence of matching values."><a href="#t1498752237514462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-29</span> <span class="t" onclick="H(this)">16:03:57</span>                  enn </span><span>Hmm, it looks like </span><code>view</code><span> or </span><code>transformed</code><span> will not do what I want because the provided functions get applied to each value matching my </span><code>ALL</code><span> selector, rather than the sequence of matching values.</span></div><div id="t1498752442607871" t="2017-06-29 16:07:22 nathanmarz @enn if it&apos;s not already sorted in your data structure, you would need to do  (view sort)"><a href="#t1498752442607871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-29</span> <span class="t" onclick="H(this)">16:07:22</span>           nathanmarz </span><span>@enn if it&apos;s not already sorted in your data structure, you would need to do </span><code>(view sort)</code></div><div id="t1498752493631028" t="2017-06-29 16:08:13 nathanmarz if the values are spread throughout your data structure (not together in a sequence), you can first do  (subselect &lt;path&gt;)   to manipulate them as a single sequence"><a href="#t1498752493631028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-29</span> <span class="t" onclick="H(this)">16:08:13</span>           nathanmarz </span><span>if the values are spread throughout your data structure (not together in a sequence), you can first do </span><code>(subselect &lt;path&gt;)</code><span>  to manipulate them as a single sequence</span></div><div id="t1498752629698004" t="2017-06-29 16:10:29 enn @nathanmarz aha, thank you, I will look at  subselect"><a href="#t1498752629698004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-29</span> <span class="t" onclick="H(this)">16:10:29</span>                  enn </span><span>@nathanmarz aha, thank you, I will look at </span><code>subselect</code></div><div id="t1499206934862154" t="2017-07-04 22:22:14 sophiago Not expecting an answer today, but figured I&apos;d put this out there since I couldn&apos;t figure it out from the wiki this weekend: is there a way to just call  select  on a sequence of keys? I would expect to at least be able to do something like this unless there&apos;s a simpler way, but it returns all kv pairs:  (select [ALL (fn [[k v]] (map #(= k %) [2 3]))] {1 :a, 2 :b, 3, :c, 4 :d})"><a href="#t1499206934862154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:22:14</span>             sophiago </span><span>Not expecting an answer today, but figured I&apos;d put this out there since I couldn&apos;t figure it out from the wiki this weekend: is there a way to just call </span><code>select</code><span> on a sequence of keys? I would expect to at least be able to do something like this unless there&apos;s a simpler way, but it returns all kv pairs: </span><code>(select [ALL (fn [[k v]] (map #(= k %) [2 3]))] {1 :a, 2 :b, 3, :c, 4 :d})</code></div><div id="t1499207007869736" t="2017-07-04 22:23:27 sophiago I&apos;m also wondering if, after selecting based on keys, Specter has a faster way to return just the values than  val  from clojure.core?"><a href="#t1499207007869736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:23:27</span>             sophiago </span><span>I&apos;m also wondering if, after selecting based on keys, Specter has a faster way to return just the values than </span><code>val</code><span> from clojure.core?</span></div><div id="t1499208998072716" t="2017-07-04 22:56:38 nathanmarz @sophiago I think you&apos;re looking for  (select [(submap [2 3]) MAP-VALS] {1 :a 2 :b 3 :c 4 :d})"><a href="#t1499208998072716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:56:38</span>           nathanmarz </span><span>@sophiago I think you&apos;re looking for </span><code>(select [(submap [2 3]) MAP-VALS] {1 :a 2 :b 3 :c 4 :d})</code></div><div id="t1499209030076122" t="2017-07-04 22:57:10 nathanmarz or possibly  (select (multi-path (keypath 2) (keypath 3)) {1 :a 2 :b 3 :c 4 :d})"><a href="#t1499209030076122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:57:10</span>           nathanmarz </span><span>or possibly </span><code>(select (multi-path (keypath 2) (keypath 3)) {1 :a 2 :b 3 :c 4 :d})</code></div><div id="t1499209064079652" t="2017-07-04 22:57:44 sophiago Thanks for responding, Nathan! Probably the first one, unless there&apos;s a performance difference?"><a href="#t1499209064079652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:57:44</span>             sophiago </span><span>Thanks for responding, Nathan! Probably the first one, unless there&apos;s a performance difference?</span></div><div id="t1499209081081360" t="2017-07-04 22:58:01 nathanmarz the latter should be faster"><a href="#t1499209081081360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:58:01</span>           nathanmarz </span><span>the latter should be faster</span></div><div id="t1499209093082511" t="2017-07-04 22:58:13 nathanmarz but the former works with a dynamic sequence of keys"><a href="#t1499209093082511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:58:13</span>           nathanmarz </span><span>but the former works with a dynamic sequence of keys</span></div><div id="t1499209120085146" t="2017-07-04 22:58:40 sophiago Can&apos;t I just map keypath over a sequence of keys?"><a href="#t1499209120085146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:58:40</span>             sophiago </span><span>Can&apos;t I just map keypath over a sequence of keys?</span></div><div id="t1499209157088794" t="2017-07-04 22:59:17 nathanmarz yes, but that won&apos;t perform optimally at the moment"><a href="#t1499209157088794" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:59:17</span>           nathanmarz </span><span>yes, but that won&apos;t perform optimally at the moment</span></div><div id="t1499209158088871" t="2017-07-04 22:59:18 nathanmarz https://github.com/nathanmarz/specter/issues/200"><a href="#t1499209158088871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:59:18</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/200" target="_blank">https://github.com/nathanmarz/specter/issues/200</a></div><div id="t1499209170090117" t="2017-07-04 22:59:30 nathanmarz both  keypath  and  multi-path  are dynamic navs"><a href="#t1499209170090117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">22:59:30</span>           nathanmarz </span><span>both </span><code>keypath</code><span> and </span><code>multi-path</code><span> are dynamic navs</span></div><div id="t1499209224096844" t="2017-07-04 23:00:24 sophiago I see. So the fastest way is with  submap  until that issue is closed?"><a href="#t1499209224096844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:00:24</span>             sophiago </span><span>I see. So the fastest way is with </span><code>submap</code><span> until that issue is closed?</span></div><div id="t1499209252100184" t="2017-07-04 23:00:52 nathanmarz you&apos;d have to benchmark to be sure, but that would be my guess"><a href="#t1499209252100184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:00:52</span>           nathanmarz </span><span>you&apos;d have to benchmark to be sure, but that would be my guess</span></div><div id="t1499209266101706" t="2017-07-04 23:01:06 sophiago Great. Thanks!"><a href="#t1499209266101706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:01:06</span>             sophiago </span><span>Great. Thanks!</span></div><div id="t1499209275102780" t="2017-07-04 23:01:15 nathanmarz actually"><a href="#t1499209275102780" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:01:15</span>           nathanmarz </span><span>actually</span></div><div id="t1499209312106725" t="2017-07-04 23:01:52 nathanmarz you can do this:  (map #(select-any (keypath %) data) key-seq)"><a href="#t1499209312106725" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:01:52</span>           nathanmarz </span><span>you can do this: </span><code>(map #(select-any (keypath %) data) key-seq)</code></div><div id="t1499209340109642" t="2017-07-04 23:02:20 nathanmarz nevermind"><a href="#t1499209340109642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:02:20</span>           nathanmarz </span><span>nevermind</span></div><div id="t1499209360111543" t="2017-07-04 23:02:40 nathanmarz if performance is critical just do  (map #(get data %) key-seq)"><a href="#t1499209360111543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:02:40</span>           nathanmarz </span><span>if performance is critical just do </span><code>(map #(get data %) key-seq)</code></div><div id="t1499209514128642" t="2017-07-04 23:05:14 sophiago Ok, got it. I&apos;ll run some microbenchmarks to be sure as well."><a href="#t1499209514128642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span> <span class="t" onclick="H(this)">23:05:14</span>             sophiago </span><span>Ok, got it. I&apos;ll run some microbenchmarks to be sure as well.</span></div><div id="t1499780585060676" t="2017-07-11 13:43:05 mbjarland lets say I have the following data structure: 
 {:2010-12-31 [{:name &quot;New Year&apos;s Eve&quot;, :date &quot;2010-12-31&quot;, :observed &quot;2010-12-31&quot;, :public true}],
 :2010-12-25 [{:name &quot;Christmas Day&quot;, :date &quot;2010-12-25&quot;, :observed &quot;2010-12-24&quot;, :public true}],
 :2010-05-31 [{:name &quot;Memorial Day&quot;, :date &quot;2010-05-31&quot;, :observed &quot;2010-05-31&quot;, :public true}],
 :2010-11-25 [{:name &quot;Thanksgiving Day&quot;, :date &quot;2010-11-25&quot;, :observed &quot;2010-11-25&quot;, :public true}],
 :2010-09-06 [{:name &quot;Labor Day&quot;, :date &quot;2010-09-06&quot;, :observed &quot;2010-09-06&quot;, :public true}],
 :2010-01-01 [{:name &quot;New Year&apos;s Day&quot;, :date &quot;2010-01-01&quot;, :observed &quot;2010-01-01&quot;, :public true}],
 :2010-07-04 [{:name &quot;Independence Day&quot;, :date &quot;2010-07-04&quot;, :observed &quot;2010-07-05&quot;, :public true}],
 :2010-11-11 [{:name &quot;Veterans Day&quot;, :date &quot;2010-11-11&quot;, :observed &quot;2010-11-11&quot;, :public true}],
 :2010-02-15 [{:name &quot;George Washington&apos;s Birthday&quot;, :date &quot;2010-02-15&quot;, :observed &quot;2010-02-15&quot;, :public true}],
 :2010-01-18 [{:name &quot;Martin Luther King, Jr. Day&quot;, :date &quot;2010-01-18&quot;, :observed &quot;2010-01-18&quot;, :public true}],
 :2010-10-11 [{:name &quot;Columbus Day&quot;, :date &quot;2010-10-11&quot;, :observed &quot;2010-10-11&quot;, :public true}]}
 
and I would like to apply a function to all the dates (root level key and  :date  and  :observed  in the inner map). I got as far as using  multi-transform  on the root level keys but I&apos;m failing at writing the rest of the path expression. I can do the first level with: 
 (multi-transform [MAP-KEYS (terminal my-tranform-fn)] data)
 
how would I go about transforming the other two dates in the data?"><a href="#t1499780585060676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">13:43:05</span>            mbjarland </span><span>lets say I have the following data structure: 
</span><pre>{:2010-12-31 [{:name &quot;New Year&apos;s Eve&quot;, :date &quot;2010-12-31&quot;, :observed &quot;2010-12-31&quot;, :public true}],
 :2010-12-25 [{:name &quot;Christmas Day&quot;, :date &quot;2010-12-25&quot;, :observed &quot;2010-12-24&quot;, :public true}],
 :2010-05-31 [{:name &quot;Memorial Day&quot;, :date &quot;2010-05-31&quot;, :observed &quot;2010-05-31&quot;, :public true}],
 :2010-11-25 [{:name &quot;Thanksgiving Day&quot;, :date &quot;2010-11-25&quot;, :observed &quot;2010-11-25&quot;, :public true}],
 :2010-09-06 [{:name &quot;Labor Day&quot;, :date &quot;2010-09-06&quot;, :observed &quot;2010-09-06&quot;, :public true}],
 :2010-01-01 [{:name &quot;New Year&apos;s Day&quot;, :date &quot;2010-01-01&quot;, :observed &quot;2010-01-01&quot;, :public true}],
 :2010-07-04 [{:name &quot;Independence Day&quot;, :date &quot;2010-07-04&quot;, :observed &quot;2010-07-05&quot;, :public true}],
 :2010-11-11 [{:name &quot;Veterans Day&quot;, :date &quot;2010-11-11&quot;, :observed &quot;2010-11-11&quot;, :public true}],
 :2010-02-15 [{:name &quot;George Washington&apos;s Birthday&quot;, :date &quot;2010-02-15&quot;, :observed &quot;2010-02-15&quot;, :public true}],
 :2010-01-18 [{:name &quot;Martin Luther King, Jr. Day&quot;, :date &quot;2010-01-18&quot;, :observed &quot;2010-01-18&quot;, :public true}],
 :2010-10-11 [{:name &quot;Columbus Day&quot;, :date &quot;2010-10-11&quot;, :observed &quot;2010-10-11&quot;, :public true}]}
</pre><span>
and I would like to apply a function to all the dates (root level key and </span><code>:date</code><span> and </span><code>:observed</code><span> in the inner map). I got as far as using </span><code>multi-transform</code><span> on the root level keys but I&apos;m failing at writing the rest of the path expression. I can do the first level with: 
</span><pre>(multi-transform [MAP-KEYS (terminal my-tranform-fn)] data)
</pre><span>
how would I go about transforming the other two dates in the data?</span></div><div id="t1499781202422762" t="2017-07-11 13:53:22 mbjarland ok I think I got it, somebody please tell me if there is a better way: 
 (multi-transform [(multi-path [MAP-VALS ALL (multi-path [:date (terminal my-transform-fn)]
                                                        [:observed (terminal my-transform-fn)])]
                              [MAP-KEYS (terminal my-transform-fn)])] data)
"><a href="#t1499781202422762" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">13:53:22</span>            mbjarland </span><span>ok I think I got it, somebody please tell me if there is a better way: 
</span><pre>(multi-transform [(multi-path [MAP-VALS ALL (multi-path [:date (terminal my-transform-fn)]
                                                        [:observed (terminal my-transform-fn)])]
                              [MAP-KEYS (terminal my-transform-fn)])] data)
</pre></div><div id="t1499782376147268" t="2017-07-11 14:12:56 nathanmarz @mbjarland this is better:  (transform (multi-path MAP-KEYS [MAP-VALS ALL (multi-path :date :observed)]) my-transform-fn data)"><a href="#t1499782376147268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:12:56</span>           nathanmarz </span><span>@mbjarland this is better: </span><code>(transform (multi-path MAP-KEYS [MAP-VALS ALL (multi-path :date :observed)]) my-transform-fn data)</code></div><div id="t1499782522237855" t="2017-07-11 14:15:22 nathanmarz multi-transform  is more for when you have distinct transformations you want to run on the same structure"><a href="#t1499782522237855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:15:22</span>           nathanmarz </span><code>multi-transform</code><span> is more for when you have distinct transformations you want to run on the same structure</span></div><div id="t1499782627303720" t="2017-07-11 14:17:07 mbjarland : ) figured there would be a better way...so just  transform ....when would I use  multi-transform ?"><a href="#t1499782627303720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:17:07</span>            mbjarland </span><span>: ) figured there would be a better way...so just </span><code>transform</code><span>....when would I use </span><code>multi-transform</code><span>?</span></div><div id="t1499782684340005" t="2017-07-11 14:18:04 nathanmarz e.g.  (multi-transform [ALL (multi-path [:a (terminal inc)] [:b (terminal dec)])] data)"><a href="#t1499782684340005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:18:04</span>           nathanmarz </span><span>e.g. </span><code>(multi-transform [ALL (multi-path [:a (terminal inc)] [:b (terminal dec)])] data)</code></div><div id="t1499782715359112" t="2017-07-11 14:18:35 nathanmarz another good example:  https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L342"><a href="#t1499782715359112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:18:35</span>           nathanmarz </span><span>another good example: </span><a href="https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L342" target="_blank">https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L342</a></div><div id="t1499782741375506" t="2017-07-11 14:19:01 nathanmarz if the transformation functions are distinct and there&apos;s any shared navigation,  multi-transform  will be more efficient"><a href="#t1499782741375506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:19:01</span>           nathanmarz </span><span>if the transformation functions are distinct and there&apos;s any shared navigation, </span><code>multi-transform</code><span> will be more efficient</span></div><div id="t1499782805415646" t="2017-07-11 14:20:05 mbjarland ah so forking paths which shared ancestry are a good candidate"><a href="#t1499782805415646" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:20:05</span>            mbjarland </span><span>ah so forking paths which shared ancestry are a good candidate</span></div><div id="t1499782805415945" t="2017-07-11 14:20:05 nathanmarz in your case each date location is transformed the same way, so cleaner to navigate to each date as a single path"><a href="#t1499782805415945" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:20:05</span>           nathanmarz </span><span>in your case each date location is transformed the same way, so cleaner to navigate to each date as a single path</span></div><div id="t1499782814420888" t="2017-07-11 14:20:14 nathanmarz yes, that&apos;s right"><a href="#t1499782814420888" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:20:14</span>           nathanmarz </span><span>yes, that&apos;s right</span></div><div id="t1499782899474660" t="2017-07-11 14:21:39 mbjarland ok, got it...it seems to me every time I find an excuse to use specter a couple of things happen 1. half my code goes away 2. the end result is beautiful 3. I realize that at least for me, most of the hurdle in specter is to grok paths. Thanks for the pointers"><a href="#t1499782899474660" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:21:39</span>            mbjarland </span><span>ok, got it...it seems to me every time I find an excuse to use specter a couple of things happen 1. half my code goes away 2. the end result is beautiful 3. I realize that at least for me, most of the hurdle in specter is to grok paths. Thanks for the pointers</span></div><div id="t1499782923489434" t="2017-07-11 14:22:03 nathanmarz 🙂"><a href="#t1499782923489434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:22:03</span>           nathanmarz </span><b>🙂</b></div><div id="t1499784418464753" t="2017-07-11 14:46:58 schmee I’m sure this has been asked a million times, but can I use Specter to go from  [{:a 1 :b 2} {:a 3 :b 4}]  to  {:a [1 3] :b [2 4]} ?"><a href="#t1499784418464753" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">14:46:58</span>               schmee </span><span>I’m sure this has been asked a million times, but can I use Specter to go from </span><code>[{:a 1 :b 2} {:a 3 :b 4}]</code><span> to </span><code>{:a [1 3] :b [2 4]}</code><span>?</span></div><div id="t1499791569989869" t="2017-07-11 16:46:09 nathanmarz @schmee that&apos;s a complete transformation, so should do that with  reduce"><a href="#t1499791569989869" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">16:46:09</span>           nathanmarz </span><span>@schmee that&apos;s a complete transformation, so should do that with </span><code>reduce</code></div><div id="t1499791796120699" t="2017-07-11 16:49:56 madstap @schmee I remember seeing a one liner for that that was something like:  (defn f [ms] (apply merge-with into (for [m ms, [k v] m] {k [v]})))"><a href="#t1499791796120699" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">16:49:56</span>              madstap </span><span>@schmee I remember seeing a one liner for that that was something like: </span><code>(defn f [ms] (apply merge-with into (for [m ms, [k v] m] {k [v]})))</code></div><div id="t1499794152474465" t="2017-07-11 17:29:12 schmee roger, thanks for the input  :+1:"><a href="#t1499794152474465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">17:29:12</span>               schmee </span><span>roger, thanks for the input </span><b>:+1:</b></div><div id="t1499816144833981" t="2017-07-11 23:35:44 schmee is there a know issue with  transform  and transients?"><a href="#t1499816144833981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">23:35:44</span>               schmee </span><span>is there a know issue with </span><code>transform</code><span> and transients?</span></div><div id="t1499816192845352" t="2017-07-11 23:36:32 schmee I’m getting 
 java.lang.IllegalAccessError: Transient used after persistent! call
	at clojure.lang.PersistentVector$TransientVector.ensureEditable(PersistentVector.java:548)
	at clojure.lang.PersistentVector$TransientVector.persistent(PersistentVector.java:559)
	at clojure.lang.PersistentVector$TransientVector.persistent(PersistentVector.java:518)
	at clojure.core$persistent_BANG_.invokeStatic(core.clj:3336)
	at clojure.core$persistent_BANG_.invoke(core.clj:3329)
	at com.rpl.specter.impl$terminal_STAR_.invokeStatic(impl.cljc:402)
	at com.rpl.specter.impl$terminal_STAR_.invoke(impl.cljc:400)
	at com.rpl.specter.impl$compiled_transform_STAR_$fn__16689.invoke(impl.cljc:410)
	at com.rpl.specter$reify__18110$next_fn__18116.invoke(specter.cljc:642)
	at com.rpl.specter.navs$eval17464$fn__17465.invoke(navs.cljc:261)
	at com.rpl.specter.navs$eval17420$fn__17421$G__17409__17428.invoke(navs.cljc:213)
	at com.rpl.specter$reify__18110.transform_STAR_(specter.cljc:651)
	at com.rpl.specter.impl$compiled_transform_STAR_.invokeStatic(impl.cljc:408)
	at com.rpl.specter.impl$compiled_transform_STAR_.invoke(impl.cljc:407)
 
when using  (s/transform s/MAP-VALS persistent! stuff)"><a href="#t1499816192845352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">23:36:32</span>               schmee </span><span>I’m getting 
</span><pre>java.lang.IllegalAccessError: Transient used after persistent! call
	at clojure.lang.PersistentVector$TransientVector.ensureEditable(PersistentVector.java:548)
	at clojure.lang.PersistentVector$TransientVector.persistent(PersistentVector.java:559)
	at clojure.lang.PersistentVector$TransientVector.persistent(PersistentVector.java:518)
	at clojure.core$persistent_BANG_.invokeStatic(core.clj:3336)
	at clojure.core$persistent_BANG_.invoke(core.clj:3329)
	at com.rpl.specter.impl$terminal_STAR_.invokeStatic(impl.cljc:402)
	at com.rpl.specter.impl$terminal_STAR_.invoke(impl.cljc:400)
	at com.rpl.specter.impl$compiled_transform_STAR_$fn__16689.invoke(impl.cljc:410)
	at com.rpl.specter$reify__18110$next_fn__18116.invoke(specter.cljc:642)
	at com.rpl.specter.navs$eval17464$fn__17465.invoke(navs.cljc:261)
	at com.rpl.specter.navs$eval17420$fn__17421$G__17409__17428.invoke(navs.cljc:213)
	at com.rpl.specter$reify__18110.transform_STAR_(specter.cljc:651)
	at com.rpl.specter.impl$compiled_transform_STAR_.invokeStatic(impl.cljc:408)
	at com.rpl.specter.impl$compiled_transform_STAR_.invoke(impl.cljc:407)
</pre><span>
when using </span><code>(s/transform s/MAP-VALS persistent! stuff)</code></div><div id="t1499816222852531" t="2017-07-11 23:37:02 schmee where  stuff  is a map of keyword to transient vectors"><a href="#t1499816222852531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-11</span> <span class="t" onclick="H(this)">23:37:02</span>               schmee </span><span>where </span><code>stuff</code><span> is a map of keyword to transient vectors</span></div><div id="t1499822419205707" t="2017-07-12 01:20:19 nathanmarz @schmee looks fine to me:
 (transform MAP-VALS persistent! {1 (transient []) 2 (transient [1 2 3])})
;; =&gt; {1 [], 2 [1 2 3]}
"><a href="#t1499822419205707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">01:20:19</span>           nathanmarz </span><span>@schmee looks fine to me:
</span><pre>(transform MAP-VALS persistent! {1 (transient []) 2 (transient [1 2 3])})
;; =&gt; {1 [], 2 [1 2 3]}
</pre></div><div id="t1499822457213155" t="2017-07-12 01:20:57 nathanmarz there must be another issue with your code"><a href="#t1499822457213155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">01:20:57</span>           nathanmarz </span><span>there must be another issue with your code</span></div><div id="t1499843643142526" t="2017-07-12 07:14:03 schmee hmm… weird, I’ll see if I can find a minimal case"><a href="#t1499843643142526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">07:14:03</span>               schmee </span><span>hmm… weird, I’ll see if I can find a minimal case</span></div><div id="t1499848400707454" t="2017-07-12 08:33:20 schmee Two questions:
1. is it possible to return a “subpath” of a path from  transform ? e.g.  transform [(submap [:a :c]) MAP-VALS] inc {:a 1 :b 2 :c 3}  returns  {:a 2 :b 2 :c 4} , can you modify the path somehow to make it return  {:a 2 :c 4} ?
2. can you “invert” a path? e.g. to make  (some-invert-fn (submap [:a :c]))  navigate to the map without  :a  and  :c"><a href="#t1499848400707454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">08:33:20</span>               schmee </span><span>Two questions:
1. is it possible to return a “subpath” of a path from </span><code>transform</code><span>? e.g. </span><code>transform [(submap [:a :c]) MAP-VALS] inc {:a 1 :b 2 :c 3}</code><span> returns </span><code>{:a 2 :b 2 :c 4}</code><span>, can you modify the path somehow to make it return </span><code>{:a 2 :c 4}</code><span>?
2. can you “invert” a path? e.g. to make </span><code>(some-invert-fn (submap [:a :c]))</code><span> navigate to the map without </span><code>:a</code><span> and </span><code>:c</code></div><div id="t1499861586213223" t="2017-07-12 12:13:06 souenzzo @schmee take a look on &quot;select&quot; and on &quot;if-path&quot;"><a href="#t1499861586213223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">12:13:06</span>             souenzzo </span><span>@schmee take a look on &quot;select&quot; and on &quot;if-path&quot;</span></div><div id="t1499861654237513" t="2017-07-12 12:14:14 schmee could you give a more concrete example on how those would help me?"><a href="#t1499861654237513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">12:14:14</span>               schmee </span><span>could you give a more concrete example on how those would help me?</span></div><div id="t1499861745270294" t="2017-07-12 12:15:45 souenzzo I&apos;m on mobile. When I arrive I&apos;ll do one"><a href="#t1499861745270294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">12:15:45</span>                  souenzzo </span><span>I&apos;m on mobile. When I arrive I&apos;ll do one</span></div><div id="t1499861765277387" t="2017-07-12 12:16:05 schmee cheers  :+1:"><a href="#t1499861765277387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">12:16:05</span>                    schmee </span><span>cheers </span><b>:+1:</b></div><div id="t1499861680246831" t="2017-07-12 12:14:40 schmee AFAIK  select  always returns a sequence and doesn’t modify the original structure"><a href="#t1499861680246831" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">12:14:40</span>               schmee </span><span>AFAIK </span><code>select</code><span> always returns a sequence and doesn’t modify the original structure</span></div><div id="t1499866258306742" t="2017-07-12 13:30:58 nathanmarz @schmee you can do  (view #(select-keys % [:a :c]))"><a href="#t1499866258306742" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:30:58</span>           nathanmarz </span><span>@schmee you can do </span><code>(view #(select-keys % [:a :c]))</code></div><div id="t1499866384376747" t="2017-07-12 13:33:04 nathanmarz for #2, that would need to be another navigator"><a href="#t1499866384376747" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:33:04</span>           nathanmarz </span><span>for #2, that would need to be another navigator</span></div><div id="t1499866454414860" t="2017-07-12 13:34:14 schmee ahh,  view  is the one!"><a href="#t1499866454414860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:34:14</span>               schmee </span><span>ahh, </span><code>view</code><span> is the one!</span></div><div id="t1499866461418813" t="2017-07-12 13:34:21 schmee is there a version of  view  that takes a path?"><a href="#t1499866461418813" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:34:21</span>               schmee </span><span>is there a version of </span><code>view</code><span> that takes a path?</span></div><div id="t1499866476427269" t="2017-07-12 13:34:36 nathanmarz no, it just takes a function"><a href="#t1499866476427269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:34:36</span>           nathanmarz </span><span>no, it just takes a function</span></div><div id="t1499866493436643" t="2017-07-12 13:34:53 schmee my intuition was that  transformed  was the path equivalent"><a href="#t1499866493436643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:34:53</span>               schmee </span><span>my intuition was that </span><code>transformed</code><span> was the path equivalent</span></div><div id="t1499866501441223" t="2017-07-12 13:35:01 nathanmarz yes, that&apos;s right"><a href="#t1499866501441223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:35:01</span>           nathanmarz </span><span>yes, that&apos;s right</span></div><div id="t1499866515448906" t="2017-07-12 13:35:15 nathanmarz forgot about that"><a href="#t1499866515448906" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:35:15</span>           nathanmarz </span><span>forgot about that</span></div><div id="t1499866526455120" t="2017-07-12 13:35:26 schmee user=&gt; (s/transform [(s/transformed (s/submap [:a :c]) identity) s/MAP-VALS] inc {:a 1 :b 2 :c 3})
{:a 2 :b 3 :c 4}
"><a href="#t1499866526455120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:35:26</span>               schmee </span><pre>user=&gt; (s/transform [(s/transformed (s/submap [:a :c]) identity) s/MAP-VALS] inc {:a 1 :b 2 :c 3})
{:a 2 :b 3 :c 4}
</pre></div><div id="t1499866609501908" t="2017-07-12 13:36:49 schmee seems like that would be equivalent to the  view  version?"><a href="#t1499866609501908" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:36:49</span>               schmee </span><span>seems like that would be equivalent to the </span><code>view</code><span> version?</span></div><div id="t1499866837629933" t="2017-07-12 13:40:37 nathanmarz no, that doesn&apos;t remove :b"><a href="#t1499866837629933" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:40:37</span>           nathanmarz </span><span>no, that doesn&apos;t remove :b</span></div><div id="t1499866854639999" t="2017-07-12 13:40:54 nathanmarz (transformed (submap [:a :c]) identity)  is a no-op"><a href="#t1499866854639999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:40:54</span>           nathanmarz </span><code>(transformed (submap [:a :c]) identity)</code><span> is a no-op</span></div><div id="t1499866889659494" t="2017-07-12 13:41:29 nathanmarz (transformed (submap [:a :c]) (fn [_] nil))  would remove :a and :c"><a href="#t1499866889659494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:41:29</span>           nathanmarz </span><code>(transformed (submap [:a :c]) (fn [_] nil))</code><span> would remove :a and :c</span></div><div id="t1499866905668776" t="2017-07-12 13:41:45 schmee ahh, right!"><a href="#t1499866905668776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:41:45</span>               schmee </span><span>ahh, right!</span></div><div id="t1499866924679778" t="2017-07-12 13:42:04 schmee thank you for your patience in answering all these question, I appreciate it!"><a href="#t1499866924679778" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:42:04</span>               schmee </span><span>thank you for your patience in answering all these question, I appreciate it!</span></div><div id="t1499866956697456" t="2017-07-12 13:42:36 nathanmarz no problem, happy to help"><a href="#t1499866956697456" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">13:42:36</span>           nathanmarz </span><span>no problem, happy to help</span></div><div id="t1499879358530022" t="2017-07-12 17:09:18 drowsy While toying around I stumbled over something strange. When using select a MapEntry is handled as MapEntry while when using transform is a Vector. So  (select [ALL (pred key)] {:a 1})  =&gt;  [[:a 1]]  while  (transform [ALL (pred key)] identity {:a 1})  throws a ClassCastException"><a href="#t1499879358530022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:09:18</span>               drowsy </span><span>While toying around I stumbled over something strange. When using select a MapEntry is handled as MapEntry while when using transform is a Vector. So </span><code>(select [ALL (pred key)] {:a 1})</code><span> =&gt; </span><code>[[:a 1]]</code><span> while </span><code>(transform [ALL (pred key)] identity {:a 1})</code><span> throws a ClassCastException</span></div><div id="t1499879658700574" t="2017-07-12 17:14:18 drowsy I know this path is not useful, but I&apos;m just curious if this is &quot;working as intended&quot; as select and transform differs"><a href="#t1499879658700574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:14:18</span>               drowsy </span><span>I know this path is not useful, but I&apos;m just curious if this is &quot;working as intended&quot; as select and transform differs</span></div><div id="t1499882048090202" t="2017-07-12 17:54:08 nathanmarz @drowsy that&apos;s a good observation"><a href="#t1499882048090202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:54:08</span>           nathanmarz </span><span>@drowsy that&apos;s a good observation</span></div><div id="t1499882120133436" t="2017-07-12 17:55:20 nathanmarz it&apos;s because  select  does a  reduce  over the map, while  transform  accesses the keys/vals using direct means"><a href="#t1499882120133436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:55:20</span>           nathanmarz </span><span>it&apos;s because </span><code>select</code><span> does a </span><code>reduce</code><span> over the map, while </span><code>transform</code><span> accesses the keys/vals using direct means</span></div><div id="t1499882300241228" t="2017-07-12 17:58:20 nathanmarz while it would be nice to be consistent, it&apos;s not really important"><a href="#t1499882300241228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:58:20</span>           nathanmarz </span><span>while it would be nice to be consistent, it&apos;s not really important</span></div><div id="t1499882346269041" t="2017-07-12 17:59:06 nathanmarz (since there would be a slight performance penalty to do a conversion somewhere)"><a href="#t1499882346269041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:59:06</span>           nathanmarz </span><span>(since there would be a slight performance penalty to do a conversion somewhere)</span></div><div id="t1499882432323622" t="2017-07-12 18:00:32 drowsy @nathanmarz thanks for the explanation, I agree, it&apos;s not important. Are there more things where select and transform differs? maybe those can be documented somewhere?"><a href="#t1499882432323622" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:00:32</span>               drowsy </span><span>@nathanmarz thanks for the explanation, I agree, it&apos;s not important. Are there more things where select and transform differs? maybe those can be documented somewhere?</span></div><div id="t1499882553398581" t="2017-07-12 18:02:33 nathanmarz not that i can think of"><a href="#t1499882553398581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:02:33</span>           nathanmarz </span><span>not that i can think of</span></div><div id="t1499882560403373" t="2017-07-12 18:02:40 nathanmarz ALL on maps is a weird case"><a href="#t1499882560403373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:02:40</span>           nathanmarz </span><span>ALL on maps is a weird case</span></div><div id="t1499882576412996" t="2017-07-12 18:02:56 nathanmarz a good thing to add to  https://github.com/nathanmarz/specter/issues/56"><a href="#t1499882576412996" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:02:56</span>           nathanmarz </span><span>a good thing to add to </span><a href="https://github.com/nathanmarz/specter/issues/56" target="_blank">https://github.com/nathanmarz/specter/issues/56</a></div><div id="t1499882736507998" t="2017-07-12 18:05:36 drowsy i will have a look. btw. I really like specter  🙂  so thank you!"><a href="#t1499882736507998" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:05:36</span>               drowsy </span><span>i will have a look. btw. I really like specter </span><b>🙂</b><span> so thank you!</span></div><div id="t1499882751517165" t="2017-07-12 18:05:51 nathanmarz 🙂"><a href="#t1499882751517165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">18:05:51</span>           nathanmarz </span><b>🙂</b></div><div id="t1500069850166828" t="2017-07-14 22:04:10 frankmoyer I’m using specter in Clojurescript. I have a form that uses specter to remove a row from a deeply nested map. When I call the form from the repl, it works fine. When I run it from the browser,  core.cljs?rel=1495975558928:89 Error: No protocol method IAssociative.-assoc defined for type cljs.core/LazySeq:..... 

I’d really like to get Specter working in Clojurescript, as it will make my code much more manageable.

Here is the form:

 (defn delete-row
  [db row-nbr]
  (-&gt;&gt; db
       (sp/transform [:db (:active (:db db)) :blocks
                      (sp/if-path #(&lt; 1 (count %)) (sp/keypath row-nbr))]
                     sp/NONE)
       (sp/setval    [:db (:active (:db db)) :blocks nil?]
                     sp/NONE)))
"><a href="#t1500069850166828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span> <span class="t" onclick="H(this)">22:04:10</span>           frankmoyer </span><span>I’m using specter in Clojurescript. I have a form that uses specter to remove a row from a deeply nested map. When I call the form from the repl, it works fine. When I run it from the browser, </span><code>core.cljs?rel=1495975558928:89 Error: No protocol method IAssociative.-assoc defined for type cljs.core/LazySeq:.....</code><span>

I’d really like to get Specter working in Clojurescript, as it will make my code much more manageable.

Here is the form:

</span><pre>(defn delete-row
  [db row-nbr]
  (-&gt;&gt; db
       (sp/transform [:db (:active (:db db)) :blocks
                      (sp/if-path #(&lt; 1 (count %)) (sp/keypath row-nbr))]
                     sp/NONE)
       (sp/setval    [:db (:active (:db db)) :blocks nil?]
                     sp/NONE)))
</pre></div><div id="t1500070582367268" t="2017-07-14 22:16:22 nathanmarz @frankmoyer which line is failing, the transform or the setval?"><a href="#t1500070582367268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span> <span class="t" onclick="H(this)">22:16:22</span>           nathanmarz </span><span>@frankmoyer which line is failing, the transform or the setval?</span></div><div id="t1500070664388486" t="2017-07-14 22:17:44 nathanmarz also, what is  (:active (:db db)) ?"><a href="#t1500070664388486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span> <span class="t" onclick="H(this)">22:17:44</span>           nathanmarz </span><span>also, what is </span><code>(:active (:db db))</code><span>?</span></div><div id="t1500070678391834" t="2017-07-14 22:17:58 nathanmarz that returns a navigator?"><a href="#t1500070678391834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span> <span class="t" onclick="H(this)">22:17:58</span>           nathanmarz </span><span>that returns a navigator?</span></div><div id="t1500077523732020" t="2017-07-15 00:12:03 frankmoyer @nathanmarz Here is a test map input.

 {:db
  {:active                         :left,
   :left
   {:southern                      false,
    :blocks
    [{:tame                        &quot;first row&quot;
      :nont                        false}]}}
 :event                            [:last-char-deleted 0]}
 

It looks like it is happening in the  keypath  part of the  transform . Here is some more of the stacktrace:

 core.cljs?rel=1495975558928:89 Error: No protocol method IAssociative.-assoc defined for type cljs.core/LazySeq: ({:tame &quot;&quot;,  :nont false} {:tame &quot;This&quot;, :nont false})
    at Object.cljs$core$missing_protocol [as missing_protocol] (core.cljs:270)
    at Object.cljs$core$_assoc [as _assoc] (core.cljs:529)
    at Function.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3 (core.cljs:1860)
    at cljs$core$assoc (core.cljs:1853)
    at com$rpl$specter$navs$do_keypath_transform (navs.cljc?rel=1495975557245:615)
    at com.rpl.specter.navs.keypath_STAR_.com.rpl.specter.impl.direct_nav_obj.call.com.rpl.specter.navs.t_com$rpl$specter$$rpl$specter$protocols$RichNavigator$transform_STAR_$arity$4 (navs.cljc?rel=1495975557245:625)
    at com$rpl$specter$protocols$transform_STAR_ (protocols.cljc?rel=1495975553225:15)
    at com$rpl$specter$navs$if_transform (navs.cljc?rel=1495975557245:402)
"><a href="#t1500077523732020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">00:12:03</span>           frankmoyer </span><span>@nathanmarz Here is a test map input.

</span><pre>{:db
  {:active                         :left,
   :left
   {:southern                      false,
    :blocks
    [{:tame                        &quot;first row&quot;
      :nont                        false}]}}
 :event                            [:last-char-deleted 0]}
</pre><span>

It looks like it is happening in the </span><code>keypath</code><span> part of the </span><code>transform</code><span>. Here is some more of the stacktrace:

</span><pre>core.cljs?rel=1495975558928:89 Error: No protocol method IAssociative.-assoc defined for type cljs.core/LazySeq: ({:tame &quot;&quot;,  :nont false} {:tame &quot;This&quot;, :nont false})
    at Object.cljs$core$missing_protocol [as missing_protocol] (core.cljs:270)
    at Object.cljs$core$_assoc [as _assoc] (core.cljs:529)
    at Function.cljs.core.assoc.cljs$core$IFn$_invoke$arity$3 (core.cljs:1860)
    at cljs$core$assoc (core.cljs:1853)
    at com$rpl$specter$navs$do_keypath_transform (navs.cljc?rel=1495975557245:615)
    at com.rpl.specter.navs.keypath_STAR_.com.rpl.specter.impl.direct_nav_obj.call.com.rpl.specter.navs.t_com$rpl$specter$$rpl$specter$protocols$RichNavigator$transform_STAR_$arity$4 (navs.cljc?rel=1495975557245:625)
    at com$rpl$specter$protocols$transform_STAR_ (protocols.cljc?rel=1495975553225:15)
    at com$rpl$specter$navs$if_transform (navs.cljc?rel=1495975557245:402)
</pre></div><div id="t1500081725183262" t="2017-07-15 01:22:05 nathanmarz @frankmoyer oh, that  transform  should be a  setval"><a href="#t1500081725183262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:22:05</span>           nathanmarz </span><span>@frankmoyer oh, that </span><code>transform</code><span> should be a </span><code>setval</code></div><div id="t1500081805190151" t="2017-07-15 01:23:25 nathanmarz also you should wrap  (:active (:db db))  with  keypath"><a href="#t1500081805190151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:23:25</span>           nathanmarz </span><span>also you should wrap </span><code>(:active (:db db))</code><span> with </span><code>keypath</code></div><div id="t1500081825191784" t="2017-07-15 01:23:45 nathanmarz no semantic difference but will perform better"><a href="#t1500081825191784" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:23:45</span>           nathanmarz </span><span>no semantic difference but will perform better</span></div><div id="t1500081844193433" t="2017-07-15 01:24:04 nathanmarz since it doesn&apos;t have to convert keyword -&gt; navigator at runtime"><a href="#t1500081844193433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:24:04</span>           nathanmarz </span><span>since it doesn&apos;t have to convert keyword -&gt; navigator at runtime</span></div><div id="t1500081946202726" t="2017-07-15 01:25:46 frankmoyer Perfect! That worked. I really appreciate it. I was just bragging to my wife about how great Specter is and how responsive you are. It makes working with Specter so much less daunting to know you are there for support!"><a href="#t1500081946202726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:25:46</span>           frankmoyer </span><span>Perfect! That worked. I really appreciate it. I was just bragging to my wife about how great Specter is and how responsive you are. It makes working with Specter so much less daunting to know you are there for support!</span></div><div id="t1500081974205250" t="2017-07-15 01:26:14 nathanmarz you can also combine the two calls using  (multi-path (if-path ...) nil?)"><a href="#t1500081974205250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:26:14</span>           nathanmarz </span><span>you can also combine the two calls using </span><code>(multi-path (if-path ...) nil?)</code></div><div id="t1500081996207221" t="2017-07-15 01:26:36 nathanmarz awesome, glad to help"><a href="#t1500081996207221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:26:36</span>           nathanmarz </span><span>awesome, glad to help</span></div><div id="t1500082029210326" t="2017-07-15 01:27:09 frankmoyer I’m not sure I need the second call anymore now that the first call has been changed to a  setval ."><a href="#t1500082029210326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-15</span> <span class="t" onclick="H(this)">01:27:09</span>           frankmoyer </span><span>I’m not sure I need the second call anymore now that the first call has been changed to a </span><code>setval</code><span>.</span></div><div id="t1500476561178830" t="2017-07-19 15:02:41 slpssm Hi, I’m new to specter and have a select I keep trying to do but I’m not quite sure how. I have data like this:  {:foo [{:data &quot;text&quot; :required true}]
 :bar [{:data &quot;text&quot;}]
 :baz [{:data &quot;text&quot; :required true}]}  and I’d like the list of keys whose value has :required in the inner map. This seems to do it:  (map first (s/select [s/ALL (fn[[k,v]] (:required (first v)))] data))  and return the expected  (:foo :baz)  Is there a better way? There have been a few places where I’d like the outer key depending on some value lower in the data structure."><a href="#t1500476561178830" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:02:41</span>               slpssm </span><span>Hi, I’m new to specter and have a select I keep trying to do but I’m not quite sure how. I have data like this: </span><pre>{:foo [{:data &quot;text&quot; :required true}]
 :bar [{:data &quot;text&quot;}]
 :baz [{:data &quot;text&quot; :required true}]}</pre><span> and I’d like the list of keys whose value has :required in the inner map. This seems to do it: </span><pre>(map first (s/select [s/ALL (fn[[k,v]] (:required (first v)))] data))</pre><span> and return the expected </span><pre>(:foo :baz)</pre><span> Is there a better way? There have been a few places where I’d like the outer key depending on some value lower in the data structure.</span></div><div id="t1500477338688104" t="2017-07-19 15:15:38 nathanmarz @slpssm can those inner vectors have multiple elements?"><a href="#t1500477338688104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:15:38</span>           nathanmarz </span><span>@slpssm can those inner vectors have multiple elements?</span></div><div id="t1500477364704907" t="2017-07-19 15:16:04 nathanmarz if so then it&apos;s  (select [ALL (selected? LAST ALL (must :required)) FIRST] data)"><a href="#t1500477364704907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:16:04</span>           nathanmarz </span><span>if so then it&apos;s </span><code>(select [ALL (selected? LAST ALL (must :required)) FIRST] data)</code></div><div id="t1500477415738833" t="2017-07-19 15:16:55 nathanmarz otherwise it&apos;s  (select [ALL (selected? LAST FIRST (must :required)) FIRST] data)  to match your code"><a href="#t1500477415738833" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:16:55</span>           nathanmarz </span><span>otherwise it&apos;s </span><code>(select [ALL (selected? LAST FIRST (must :required)) FIRST] data)</code><span> to match your code</span></div><div id="t1500477617871870" t="2017-07-19 15:20:17 nathanmarz this code just checks for existence of a :required key, if you need to match only when :required is truthy replace  (must :required)  with  :required identity"><a href="#t1500477617871870" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:20:17</span>           nathanmarz </span><span>this code just checks for existence of a :required key, if you need to match only when :required is truthy replace </span><code>(must :required)</code><span> with </span><code>:required identity</code></div><div id="t1500477741952512" t="2017-07-19 15:22:21 slpssm I think it can have more than one item, but I’ve never seen one so I’m going with the first version.  🙂  With a note on the second version just in case. Now I just need to parse this so I know how it works."><a href="#t1500477741952512" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:22:21</span>               slpssm </span><span>I think it can have more than one item, but I’ve never seen one so I’m going with the first version. </span><b>🙂</b><span> With a note on the second version just in case. Now I just need to parse this so I know how it works.</span></div><div id="t1500477776975543" t="2017-07-19 15:22:56 nathanmarz selected?  is a filter based on whether the subpath selects at least a single value"><a href="#t1500477776975543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:22:56</span>           nathanmarz </span><code>selected?</code><span> is a filter based on whether the subpath selects at least a single value</span></div><div id="t1500478047153902" t="2017-07-19 15:27:27 slpssm LAST  gets you into the array, the next  ALL  looks at key/values,  (must :required)  does the  :required  check and the last  FIRST  is the outer key. About right?"><a href="#t1500478047153902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:27:27</span>               slpssm </span><code>LAST</code><span> gets you into the array, the next </span><code>ALL</code><span> looks at key/values, </span><code>(must :required)</code><span> does the </span><code>:required</code><span> check and the last </span><code>FIRST</code><span> is the outer key. About right?</span></div><div id="t1500478214265519" t="2017-07-19 15:30:14 nathanmarz the initial  LAST  goes to the value for that key/value pair, the subsequent  ALL  looks at all maps inside that vector"><a href="#t1500478214265519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:30:14</span>           nathanmarz </span><span>the initial </span><code>LAST</code><span> goes to the value for that key/value pair, the subsequent </span><code>ALL</code><span> looks at all maps inside that vector</span></div><div id="t1500478946752288" t="2017-07-19 15:42:26 slpssm Ah, OK. Yes.  FIRST  would be the key,  LAST  is the value."><a href="#t1500478946752288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-19</span> <span class="t" onclick="H(this)">15:42:26</span>               slpssm </span><span>Ah, OK. Yes. </span><code>FIRST</code><span> would be the key, </span><code>LAST</code><span> is the value.</span></div><div id="t1500552976379170" t="2017-07-20 12:16:16 alexyakushev Hello everyone. I want to do the following transformation:
 [[:a :b :c] [:d] [:e :f] [:g]] =&gt; [[0 1 2] [3] [4 5] [6]]
 
In other words, I want to enumerate elements in two-levels-deep nested structure. I managed to achieve this with  subselect :
 (setval (subselect ALL ALL) (iterate inc 0) [[:a :a :a] [:b] [:c :c] [:d]])
 
Is there a better way than using  subselect  here? I was looking for something like  FLATMAP  navigator that is like  ALL  but splices each sequence into top-level view."><a href="#t1500552976379170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:16:16</span>         alexyakushev </span><span>Hello everyone. I want to do the following transformation:
</span><pre>[[:a :b :c] [:d] [:e :f] [:g]] =&gt; [[0 1 2] [3] [4 5] [6]]
</pre><span>
In other words, I want to enumerate elements in two-levels-deep nested structure. I managed to achieve this with </span><code>subselect</code><span>:
</span><pre>(setval (subselect ALL ALL) (iterate inc 0) [[:a :a :a] [:b] [:c :c] [:d]])
</pre><span>
Is there a better way than using </span><code>subselect</code><span> here? I was looking for something like </span><code>FLATMAP</code><span> navigator that is like </span><code>ALL</code><span> but splices each sequence into top-level view.</span></div><div id="t1500553913720505" t="2017-07-20 12:31:53 nathanmarz @alexyakushev that&apos;s a perfect solution"><a href="#t1500553913720505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:31:53</span>           nathanmarz </span><span>@alexyakushev that&apos;s a perfect solution</span></div><div id="t1500554086788021" t="2017-07-20 12:34:46 nathanmarz you could define  FLATMAP  with something like:
 (def FLATMAP
  (recursive-path [] p
    (if-path sequential?
      [ALL p]
      STAY
      )))
"><a href="#t1500554086788021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:34:46</span>           nathanmarz </span><span>you could define </span><code>FLATMAP</code><span> with something like:
</span><pre>(def FLATMAP
  (recursive-path [] p
    (if-path sequential?
      [ALL p]
      STAY
      )))
</pre></div><div id="t1500554098792460" t="2017-07-20 12:34:58 alexyakushev Thanks, Nathan! A quick follow-up question. Is there a way to transform a vector so that the transform-fn receives an index of the element? Like  map-indexed . All I could Google was  https://github.com/nathanmarz/specter/issues/169 , but in that case the iterable element was a map, where keys are more easily obtained."><a href="#t1500554098792460" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:34:58</span>         alexyakushev </span><span>Thanks, Nathan! A quick follow-up question. Is there a way to transform a vector so that the transform-fn receives an index of the element? Like </span><code>map-indexed</code><span>. All I could Google was </span><a href="https://github.com/nathanmarz/specter/issues/169" target="_blank">https://github.com/nathanmarz/specter/issues/169</a><span>, but in that case the iterable element was a map, where keys are more easily obtained.</span></div><div id="t1500554128804507" t="2017-07-20 12:35:28 nathanmarz not in specter core"><a href="#t1500554128804507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:35:28</span>           nathanmarz </span><span>not in specter core</span></div><div id="t1500554145811128" t="2017-07-20 12:35:45 nathanmarz you could define a navigator similar to  ALL  which navigates to [index value]"><a href="#t1500554145811128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:35:45</span>           nathanmarz </span><span>you could define a navigator similar to </span><code>ALL</code><span> which navigates to [index value]</span></div><div id="t1500554180824191" t="2017-07-20 12:36:20 alexyakushev Hm, I didn&apos;t know it is this easy to define new navigators  🙂  This is excellent, thank you!"><a href="#t1500554180824191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-20</span> <span class="t" onclick="H(this)">12:36:20</span>         alexyakushev </span><span>Hm, I didn&apos;t know it is this easy to define new navigators </span><b>🙂</b><span> This is excellent, thank you!</span></div><div id="t1500998293515517" t="2017-07-25 15:58:13 felipe-campos looking for documentation or some examples about  recursive-path"><a href="#t1500998293515517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span> <span class="t" onclick="H(this)">15:58:13</span>        felipe-campos </span><span>looking for documentation or some examples about </span><code>recursive-path</code></div><div id="t1501060379073998" t="2017-07-26 09:12:59 andrea.crotti hi guys"><a href="#t1501060379073998" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:12:59</span>        andrea.crotti </span><span>hi guys</span></div><div id="t1501060407084832" t="2017-07-26 09:13:27 andrea.crotti I&apos;m trying to implement something like this
 (get-capitals {&quot;A&quot; [&quot;hello&quot;]
               &quot;b&quot; [&quot;other&quot;]})

;; should return {&quot;A&quot; [&quot;hello&quot;]}
"><a href="#t1501060407084832" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:13:27</span>        andrea.crotti </span><span>I&apos;m trying to implement something like this
</span><pre>(get-capitals {&quot;A&quot; [&quot;hello&quot;]
               &quot;b&quot; [&quot;other&quot;]})

;; should return {&quot;A&quot; [&quot;hello&quot;]}
</pre></div><div id="t1501060423091220" t="2017-07-26 09:13:43 andrea.crotti with Specter, which in theory it&apos;s just a select right?"><a href="#t1501060423091220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:13:43</span>        andrea.crotti </span><span>with Specter, which in theory it&apos;s just a select right?</span></div><div id="t1501060426092361" t="2017-07-26 09:13:46 andrea.crotti (defn get-capitals
  [probs]
  (specter/select
   [specter/MAP-KEYS #(Character/isUpperCase (first %))]
   probs))
"><a href="#t1501060426092361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:13:46</span>        andrea.crotti </span><pre>(defn get-capitals
  [probs]
  (specter/select
   [specter/MAP-KEYS #(Character/isUpperCase (first %))]
   probs))
</pre></div><div id="t1501060435095954" t="2017-07-26 09:13:55 andrea.crotti this loses the original structure though"><a href="#t1501060435095954" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:13:55</span>        andrea.crotti </span><span>this loses the original structure though</span></div><div id="t1501060509124855" t="2017-07-26 09:15:09 schmee select  always return a sequence, so if you want to maintain the structure you have to use something else"><a href="#t1501060509124855" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:15:09</span>               schmee </span><code>select</code><span> always return a sequence, so if you want to maintain the structure you have to use something else</span></div><div id="t1501060512126169" t="2017-07-26 09:15:12 schmee gimmie a sec"><a href="#t1501060512126169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:15:12</span>               schmee </span><span>gimmie a sec</span></div><div id="t1501060581152806" t="2017-07-26 09:16:21 andrea.crotti ah yes ok i can try with transofrm"><a href="#t1501060581152806" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:16:21</span>        andrea.crotti </span><span>ah yes ok i can try with transofrm</span></div><div id="t1501060591156619" t="2017-07-26 09:16:31 andrea.crotti but the function itself should be identity then?"><a href="#t1501060591156619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:16:31</span>        andrea.crotti </span><span>but the function itself should be identity then?</span></div><div id="t1501060607162755" t="2017-07-26 09:16:47 schmee this should do it:  (defn get-capitals
  [probs]
  (specter/setval
   [specter/MAP-KEYS #(Character/isLowerCase (first %))]
   specter/NONE
   probs)
"><a href="#t1501060607162755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:16:47</span>               schmee </span><span>this should do it: </span><pre>(defn get-capitals
  [probs]
  (specter/setval
   [specter/MAP-KEYS #(Character/isLowerCase (first %))]
   specter/NONE
   probs)
</pre></div><div id="t1501060624169282" t="2017-07-26 09:17:04 schmee it removes everything that is lower case, instead of selecting what is upper case"><a href="#t1501060624169282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:17:04</span>               schmee </span><span>it removes everything that is lower case, instead of selecting what is upper case</span></div><div id="t1501060625169537" t="2017-07-26 09:17:05 andrea.crotti Ah this also works actualy
 (defn get-capitals
  [probs]
  (specter/transform
   [specter/MAP-KEYS #(Character/isUpperCase (first %))]
   identity
   probs))
"><a href="#t1501060625169537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:17:05</span>        andrea.crotti </span><span>Ah this also works actualy
</span><pre>(defn get-capitals
  [probs]
  (specter/transform
   [specter/MAP-KEYS #(Character/isUpperCase (first %))]
   identity
   probs))
</pre></div><div id="t1501060641175904" t="2017-07-26 09:17:21 andrea.crotti I actually need both submaps really"><a href="#t1501060641175904" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:17:21</span>        andrea.crotti </span><span>I actually need both submaps really</span></div><div id="t1501060662183644" t="2017-07-26 09:17:42 andrea.crotti or maybe I can just use select to extract the two set of keys and reconstruct the maps later"><a href="#t1501060662183644" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">09:17:42</span>        andrea.crotti </span><span>or maybe I can just use select to extract the two set of keys and reconstruct the maps later</span></div><div id="t1501103522213697" t="2017-07-26 21:12:02 frankmoyer I have a straight-forward selector that, does not function as I expect it to when the last element is index reference to a collection. Here is the  select  without the index in the  keypath  followed by the  select  with the index (0) in the  keypath :

 (sp/select [(apply sp/keypath [:db :right :text-entry 0 :offset])])
[({:text &quot;180 West&quot;, :label &quot;&quot;})]

(sp/select [(apply sp/keypath [:db :right :text-entry 0 :offset 0])])
[nil]
 

The index navigator after  :text-entry  always works. It seems like it is just when the index is at the last position."><a href="#t1501103522213697" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">21:12:02</span>           frankmoyer </span><span>I have a straight-forward selector that, does not function as I expect it to when the last element is index reference to a collection. Here is the </span><code>select</code><span> without the index in the </span><code>keypath</code><span> followed by the </span><code>select</code><span> with the index (0) in the </span><code>keypath</code><span>:

</span><pre>(sp/select [(apply sp/keypath [:db :right :text-entry 0 :offset])])
[({:text &quot;180 West&quot;, :label &quot;&quot;})]

(sp/select [(apply sp/keypath [:db :right :text-entry 0 :offset 0])])
[nil]
</pre><span>

The index navigator after </span><code>:text-entry</code><span> always works. It seems like it is just when the index is at the last position.</span></div><div id="t1501105888277336" t="2017-07-26 21:51:28 nathanmarz @frankmoyer what&apos;s the input?"><a href="#t1501105888277336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">21:51:28</span>           nathanmarz </span><span>@frankmoyer what&apos;s the input?</span></div><div id="t1501107911039382" t="2017-07-26 22:25:11 frankmoyer @nathanmarz I just figured out what was going on while I was compiling the input for you. A prior  transform  altered the portion of the structure that was being modified to be a  List . When I convert it to a  vec  in the form, subsequent  transform  operations are able to navigate to the index. Thank you!"><a href="#t1501107911039382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:25:11</span>           frankmoyer </span><span>@nathanmarz I just figured out what was going on while I was compiling the input for you. A prior </span><code>transform</code><span> altered the portion of the structure that was being modified to be a </span><code>List</code><span>. When I convert it to a </span><code>vec</code><span> in the form, subsequent </span><code>transform</code><span> operations are able to navigate to the index. Thank you!</span></div><div id="t1501107995067009" t="2017-07-26 22:26:35 wei is there a way to make walker search only maps (not e.g. Datomic entitymaps?)  (def link-walker [(sp/walker ::link)])"><a href="#t1501107995067009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:26:35</span>                  wei </span><span>is there a way to make walker search only maps (not e.g. Datomic entitymaps?) </span><pre>(def link-walker [(sp/walker ::link)])</pre></div><div id="t1501108077093150" t="2017-07-26 22:27:57 nathanmarz @frankmoyer cool, figured it would be something like that"><a href="#t1501108077093150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:27:57</span>           nathanmarz </span><span>@frankmoyer cool, figured it would be something like that</span></div><div id="t1501108146115364" t="2017-07-26 22:29:06 wei I’m confused why these give different results:  dev.user=&gt; (sp/transform [(sp/walker ::link)] identity {:a 1 :b (d/entity (db/db) 17592186045447) ::link [:a 1]})
{:a 1, :b #:db{:id 17592186045447}, :dev.user/link [:a 1]}
dev.user=&gt; (sp/transform [(sp/walker ::link)] identity {:a 1 :b (d/entity (db/db) 17592186045447)})
AbstractMethodError   clojure.lang.RT.conj (RT.java:667)
"><a href="#t1501108146115364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:29:06</span>                  wei </span><span>I’m confused why these give different results: </span><pre>dev.user=&gt; (sp/transform [(sp/walker ::link)] identity {:a 1 :b (d/entity (db/db) 17592186045447) ::link [:a 1]})
{:a 1, :b #:db{:id 17592186045447}, :dev.user/link [:a 1]}
dev.user=&gt; (sp/transform [(sp/walker ::link)] identity {:a 1 :b (d/entity (db/db) 17592186045447)})
AbstractMethodError   clojure.lang.RT.conj (RT.java:667)
</pre></div><div id="t1501108191130447" t="2017-07-26 22:29:51 wei oh nevermind, I think I know why-- depth first search descends in the second case but cuts off in the first case"><a href="#t1501108191130447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:29:51</span>                  wei </span><span>oh nevermind, I think I know why-- depth first search descends in the second case but cuts off in the first case</span></div><div id="t1501108198133279" t="2017-07-26 22:29:58 nathanmarz @wei walker will blindly walk into any collection (functions like clojure.walk)"><a href="#t1501108198133279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:29:58</span>           nathanmarz </span><span>@wei walker will blindly walk into any collection (functions like clojure.walk)</span></div><div id="t1501108228144037" t="2017-07-26 22:30:28 wei thanks @nathanmarz. looking for a good alternative to  walker  then"><a href="#t1501108228144037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:30:28</span>                  wei </span><span>thanks @nathanmarz. looking for a good alternative to </span><code>walker</code><span> then</span></div><div id="t1501108254152819" t="2017-07-26 22:30:54 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1352"><a href="#t1501108254152819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:30:54</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1352" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1352</a></div><div id="t1501108288164258" t="2017-07-26 22:31:28 nathanmarz (walker ::link)  doesn&apos;t make much sense"><a href="#t1501108288164258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:31:28</span>           nathanmarz </span><code>(walker ::link)</code><span> doesn&apos;t make much sense</span></div><div id="t1501108303168911" t="2017-07-26 22:31:43 nathanmarz look at the docstring"><a href="#t1501108303168911" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:31:43</span>           nathanmarz </span><span>look at the docstring</span></div><div id="t1501108338180246" t="2017-07-26 22:32:18 nathanmarz it&apos;s generally better to make your own recursive path tailored to the data structure / problem at hand"><a href="#t1501108338180246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:32:18</span>           nathanmarz </span><span>it&apos;s generally better to make your own recursive path tailored to the data structure / problem at hand</span></div><div id="t1501108353185119" t="2017-07-26 22:32:33 nathanmarz and it&apos;s really easy to do"><a href="#t1501108353185119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:32:33</span>           nathanmarz </span><span>and it&apos;s really easy to do</span></div><div id="t1501108440213483" t="2017-07-26 22:34:00 wei I’m trying to find maps with the key  ::link  in them, so it seems like a legit  afn  to me? could you explain what I’m missing?"><a href="#t1501108440213483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:34:00</span>                  wei </span><span>I’m trying to find maps with the key </span><code>::link</code><span> in them, so it seems like a legit </span><code>afn</code><span> to me? could you explain what I’m missing?</span></div><div id="t1501108516237900" t="2017-07-26 22:35:16 wei (in my example above, the map passed in was contrived and I substituted  identity  with a function that actually does something useful)"><a href="#t1501108516237900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:35:16</span>                  wei </span><span>(in my example above, the map passed in was contrived and I substituted </span><code>identity</code><span> with a function that actually does something useful)</span></div><div id="t1501108540245704" t="2017-07-26 22:35:40 nathanmarz it&apos;s going to call  ::link  on all values / data structures it sees"><a href="#t1501108540245704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:35:40</span>           nathanmarz </span><span>it&apos;s going to call </span><code>::link</code><span> on all values / data structures it sees</span></div><div id="t1501108561252010" t="2017-07-26 22:36:01 nathanmarz e.g.  (::link 1)"><a href="#t1501108561252010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:36:01</span>           nathanmarz </span><span>e.g. </span><code>(::link 1)</code></div><div id="t1501108572255315" t="2017-07-26 22:36:12 nathanmarz I wouldn&apos;t rely on that behavior"><a href="#t1501108572255315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:36:12</span>           nathanmarz </span><span>I wouldn&apos;t rely on that behavior</span></div><div id="t1501108629272465" t="2017-07-26 22:37:09 nathanmarz #(and (map? %) (contains? % ::link))  is better i think"><a href="#t1501108629272465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:37:09</span>           nathanmarz </span><code>#(and (map? %) (contains? % ::link))</code><span> is better i think</span></div><div id="t1501108781318657" t="2017-07-26 22:39:41 wei ah that makes more sense. unfortunately it’s still descending into the datomic entity I think. is there a way to make  walker  short-circuit, or is there a better alternative?  dev.user=&gt; (sp/transform [(sp/walker #(and (map? %) (contains? % ::link)))] identity {:a 1 :b (d/entity (db/db) 17592186045447)})
AbstractMethodError   clojure.lang.RT.conj (RT.java:667)
"><a href="#t1501108781318657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:39:41</span>                  wei </span><span>ah that makes more sense. unfortunately it’s still descending into the datomic entity I think. is there a way to make </span><code>walker</code><span> short-circuit, or is there a better alternative? </span><pre>dev.user=&gt; (sp/transform [(sp/walker #(and (map? %) (contains? % ::link)))] identity {:a 1 :b (d/entity (db/db) 17592186045447)})
AbstractMethodError   clojure.lang.RT.conj (RT.java:667)
</pre></div><div id="t1501108847340288" t="2017-07-26 22:40:47 nathanmarz you can&apos;t avoid that with  walker"><a href="#t1501108847340288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:40:47</span>           nathanmarz </span><span>you can&apos;t avoid that with </span><code>walker</code></div><div id="t1501108857343229" t="2017-07-26 22:40:57 nathanmarz an easy variant you could use is:
 (def walk-skipper
  (recursive-path [afn skip-fn] p
    (cond-path (pred skip-fn) STOP
               (pred afn) STAY
               coll? [ALL p]
               )))
"><a href="#t1501108857343229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:40:57</span>           nathanmarz </span><span>an easy variant you could use is:
</span><pre>(def walk-skipper
  (recursive-path [afn skip-fn] p
    (cond-path (pred skip-fn) STOP
               (pred afn) STAY
               coll? [ALL p]
               )))
</pre></div><div id="t1501108869346824" t="2017-07-26 22:41:09 nathanmarz set the  skip-fn  to return true on datomic entities"><a href="#t1501108869346824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:41:09</span>           nathanmarz </span><span>set the </span><code>skip-fn</code><span> to return true on datomic entities</span></div><div id="t1501108875348655" t="2017-07-26 22:41:15 nathanmarz or anything else you don&apos;t want to walk"><a href="#t1501108875348655" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:41:15</span>           nathanmarz </span><span>or anything else you don&apos;t want to walk</span></div><div id="t1501109065407190" t="2017-07-26 22:44:25 wei trying to understand  recursive-path  usage, where does  pred  come from in this case?"><a href="#t1501109065407190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:44:25</span>                  wei </span><span>trying to understand </span><code>recursive-path</code><span> usage, where does </span><code>pred</code><span> come from in this case?</span></div><div id="t1501109088414273" t="2017-07-26 22:44:48 nathanmarz pred  is a navigator"><a href="#t1501109088414273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:44:48</span>           nathanmarz </span><code>pred</code><span> is a navigator</span></div><div id="t1501109103418690" t="2017-07-26 22:45:03 nathanmarz that&apos;s what&apos;s implicitly used when you put a function into a path"><a href="#t1501109103418690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:45:03</span>           nathanmarz </span><span>that&apos;s what&apos;s implicitly used when you put a function into a path</span></div><div id="t1501109122424932" t="2017-07-26 22:45:22 nathanmarz it&apos;s used in this case to avoid runtime conversion of function -&gt; navigator"><a href="#t1501109122424932" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:45:22</span>           nathanmarz </span><span>it&apos;s used in this case to avoid runtime conversion of function -&gt; navigator</span></div><div id="t1501109153435229" t="2017-07-26 22:45:53 nathanmarz (for performance)"><a href="#t1501109153435229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:45:53</span>           nathanmarz </span><span>(for performance)</span></div><div id="t1501109286475308" t="2017-07-26 22:48:06 wei great, seems to be working as expected! i substituted  com.rpl.specter/pred  so I could define  walk-skipper  in my own ns. thanks for your help."><a href="#t1501109286475308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">22:48:06</span>                  wei </span><span>great, seems to be working as expected! i substituted </span><code>com.rpl.specter/pred</code><span> so I could define </span><code>walk-skipper</code><span> in my own ns. thanks for your help.</span></div><div id="t1501111274051103" t="2017-07-26 23:21:14 wei sorry to bug you again @nathanmarz but the  walk-skipper  doesn’t seem to be working for me:  (def walk-skipper
  (sp/recursive-path [afn skip-fn] p
                     (sp/cond-path (sp/pred skip-fn) sp/STOP
                                   (sp/pred afn) sp/STAY
                                   coll? [sp/ALL p])))

dev.user=&gt; (sp/select [(sp/walker #(and (map? %) (contains? % :d)) )] {:a 1 :b 2 :c {:d 1}})
[{:d 1}]
dev.user=&gt; (sp/select [(walk-skipper #(and (map? %) (contains? % :d)) (complement map?))] {:a 1 :b 2 :c {:d 1}})
[]
"><a href="#t1501111274051103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:21:14</span>                  wei </span><span>sorry to bug you again @nathanmarz but the </span><code>walk-skipper</code><span> doesn’t seem to be working for me: </span><pre>(def walk-skipper
  (sp/recursive-path [afn skip-fn] p
                     (sp/cond-path (sp/pred skip-fn) sp/STOP
                                   (sp/pred afn) sp/STAY
                                   coll? [sp/ALL p])))

dev.user=&gt; (sp/select [(sp/walker #(and (map? %) (contains? % :d)) )] {:a 1 :b 2 :c {:d 1}})
[{:d 1}]
dev.user=&gt; (sp/select [(walk-skipper #(and (map? %) (contains? % :d)) (complement map?))] {:a 1 :b 2 :c {:d 1}})
[]
</pre></div><div id="t1501111327065667" t="2017-07-26 23:22:07 wei still wrapping my head around how  recursive-path  works. mind helping me troubleshoot?"><a href="#t1501111327065667" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:22:07</span>                  wei </span><span>still wrapping my head around how </span><code>recursive-path</code><span> works. mind helping me troubleshoot?</span></div><div id="t1501113450617923" t="2017-07-26 23:57:30 nathanmarz @wei the definition of  walker  /  walk-skipper  traverses all collections via  ALL  to replicate clojure.walk semantics"><a href="#t1501113450617923" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:57:30</span>           nathanmarz </span><span>@wei the definition of </span><code>walker</code><span> / </span><code>walk-skipper</code><span> traverses all collections via </span><code>ALL</code><span> to replicate clojure.walk semantics</span></div><div id="t1501113472623651" t="2017-07-26 23:57:52 nathanmarz so that means it traverses each key/value pair as a vector, then traverses those to each key/value"><a href="#t1501113472623651" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:57:52</span>           nathanmarz </span><span>so that means it traverses each key/value pair as a vector, then traverses those to each key/value</span></div><div id="t1501113497630151" t="2017-07-26 23:58:17 nathanmarz since you stop navigation if encountering a non-map, it stops traversing once it reaches key/value pairs"><a href="#t1501113497630151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:58:17</span>           nathanmarz </span><span>since you stop navigation if encountering a non-map, it stops traversing once it reaches key/value pairs</span></div><div id="t1501113503631649" t="2017-07-26 23:58:23 nathanmarz so never reaches the inner map"><a href="#t1501113503631649" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:58:23</span>           nathanmarz </span><span>so never reaches the inner map</span></div><div id="t1501113534639246" t="2017-07-26 23:58:54 nathanmarz like I said, it&apos;s better to make your own recursive path tailored to the data structure / problem at hand"><a href="#t1501113534639246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:58:54</span>           nathanmarz </span><span>like I said, it&apos;s better to make your own recursive path tailored to the data structure / problem at hand</span></div><div id="t1501113568647635" t="2017-07-26 23:59:28 nathanmarz in this case you probably want to descend using  MAP-VALS  rather than  ALL"><a href="#t1501113568647635" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span> <span class="t" onclick="H(this)">23:59:28</span>           nathanmarz </span><span>in this case you probably want to descend using </span><code>MAP-VALS</code><span> rather than </span><code>ALL</code></div><div id="t1501113606657586" t="2017-07-27 00:00:06 nathanmarz will be a lot more performant as well by avoiding traversing totally irrelevant parts of the data structure"><a href="#t1501113606657586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">00:00:06</span>           nathanmarz </span><span>will be a lot more performant as well by avoiding traversing totally irrelevant parts of the data structure</span></div><div id="t1501149454169036" t="2017-07-27 09:57:34 wei ^ I get it now, thanks for the help!"><a href="#t1501149454169036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">09:57:34</span>                  wei </span><span>^ I get it now, thanks for the help!</span></div><div id="t1501166293205412" t="2017-07-27 14:38:13 souenzzo (setval [(walker #(contains? % :foo))] NONE [{:foo true}])  ;=&gt; [:com.rpl.specter.impl/NONE]
(setval [ALL (walker #(contains? % :foo))] NONE [{:foo true}])  ;=&gt; [] 
Is it a bug?"><a href="#t1501166293205412" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">14:38:13</span>             souenzzo </span><pre>(setval [(walker #(contains? % :foo))] NONE [{:foo true}])  ;=&gt; [:com.rpl.specter.impl/NONE]
(setval [ALL (walker #(contains? % :foo))] NONE [{:foo true}])  ;=&gt; []</pre><span>
Is it a bug?</span></div><div id="t1501166753504494" t="2017-07-27 14:45:53 nathanmarz @souenzzo you&apos;re using an old version"><a href="#t1501166753504494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">14:45:53</span>           nathanmarz </span><span>@souenzzo you&apos;re using an old version</span></div><div id="t1501166778521493" t="2017-07-27 14:46:18 nathanmarz NONE  integration with  walker  was added in 1.0.2"><a href="#t1501166778521493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">14:46:18</span>           nathanmarz </span><code>NONE</code><span> integration with </span><code>walker</code><span> was added in 1.0.2</span></div><div id="t1501166847566975" t="2017-07-27 14:47:27 souenzzo I was on 1.0.1. I did not see the new  😅  sorry"><a href="#t1501166847566975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-27</span> <span class="t" onclick="H(this)">14:47:27</span>                  souenzzo </span><span>I was on 1.0.1. I did not see the new </span><b>😅</b><span> sorry</span></div><div id="t1501205901469642" t="2017-07-28 01:38:21 eriktjacobsen First-time specter user today; How would I compose  [MAP-VALS (multi-path :checks :dependencies) ALL :relation]  and  [MAP-VALS :features MAP-VALS]  ?"><a href="#t1501205901469642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">01:38:21</span>        eriktjacobsen </span><span>First-time specter user today; How would I compose </span><code>[MAP-VALS (multi-path :checks :dependencies) ALL :relation]</code><span> and </span><code>[MAP-VALS :features MAP-VALS]</code><span> ?</span></div><div id="t1501206134514835" t="2017-07-28 01:42:14 eriktjacobsen it looked like cond-path, but then it seems you&apos;re duplicating the multi-path and :features? Wasn&apos;t sure if there was a cleaner way. (ie  [MAP-VALS (cond-path (multi-path :checks :dependencies) [(multi-path :checks :dependencies) ALL :relation] :features [:features MAP-VALS])] )"><a href="#t1501206134514835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">01:42:14</span>        eriktjacobsen </span><span>it looked like cond-path, but then it seems you&apos;re duplicating the multi-path and :features? Wasn&apos;t sure if there was a cleaner way. (ie </span><code>[MAP-VALS (cond-path (multi-path :checks :dependencies) [(multi-path :checks :dependencies) ALL :relation] :features [:features MAP-VALS])]</code><span>)</span></div><div id="t1501216392304060" t="2017-07-28 04:33:12 nathanmarz @eriktjacobsen not sure what you mean by &quot;compose&quot;"><a href="#t1501216392304060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:33:12</span>           nathanmarz </span><span>@eriktjacobsen not sure what you mean by &quot;compose&quot;</span></div><div id="t1501216426309007" t="2017-07-28 04:33:46 nathanmarz if you want to do both paths at once it&apos;s just  multi-path  similar to what you&apos;re already doing"><a href="#t1501216426309007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:33:46</span>           nathanmarz </span><span>if you want to do both paths at once it&apos;s just </span><code>multi-path</code><span> similar to what you&apos;re already doing</span></div><div id="t1501216435310332" t="2017-07-28 04:33:55 eriktjacobsen fair. the third block using cond-path is what I want, i just thought there might be another way besides duplicating the pieces in cond"><a href="#t1501216435310332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:33:55</span>        eriktjacobsen </span><span>fair. the third block using cond-path is what I want, i just thought there might be another way besides duplicating the pieces in cond</span></div><div id="t1501216480317121" t="2017-07-28 04:34:40 nathanmarz putting  (multi-path :checks :dependencies)  as your condition does nothing"><a href="#t1501216480317121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:34:40</span>           nathanmarz </span><span>putting </span><code>(multi-path :checks :dependencies)</code><span> as your condition does nothing</span></div><div id="t1501216512321832" t="2017-07-28 04:35:12 nathanmarz that condition is always true"><a href="#t1501216512321832" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:35:12</span>           nathanmarz </span><span>that condition is always true</span></div><div id="t1501216596334739" t="2017-07-28 04:36:36 nathanmarz conditionals in specter (`cond-path` and  if-path ) are true if at least one element is selected"><a href="#t1501216596334739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-28</span> <span class="t" onclick="H(this)">04:36:36</span>           nathanmarz </span><span>conditionals in specter (`cond-path` and </span><code>if-path</code><span>) are true if at least one element is selected</span></div><div id="t1501373493879235" t="2017-07-30 00:11:33 rcullito Hey all, I’m a little confused about how conceptually to think about using  filterer  versus just containing a predicate in my path. To take this example:"><a href="#t1501373493879235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">00:11:33</span>             rcullito </span><span>Hey all, I’m a little confused about how conceptually to think about using </span><code>filterer</code><span> versus just containing a predicate in my path. To take this example:</span></div><div id="t1501373498879527" t="2017-07-30 00:11:38 rcullito (select (filterer even?) (range 10))
[[0 2 4 6 8]]

(select [ALL even?] (range 10))
[0 2 4 6 8]"><a href="#t1501373498879527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">00:11:38</span>             rcullito </span><pre>(select (filterer even?) (range 10))
[[0 2 4 6 8]]

(select [ALL even?] (range 10))
[0 2 4 6 8]</pre></div><div id="t1501373522881102" t="2017-07-30 00:12:02 rcullito it is still unclear to me why the  filterer  version would be nested versus the second example."><a href="#t1501373522881102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">00:12:02</span>             rcullito </span><span>it is still unclear to me why the </span><code>filterer</code><span> version would be nested versus the second example.</span></div><div id="t1501374458937523" t="2017-07-30 00:27:38 drowsy as far as I understand filterer navigates to the subcollection (so you could for example reverse it) while ALL pred navigates to every single number (so you could for example inc it)"><a href="#t1501374458937523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">00:27:38</span>               drowsy </span><span>as far as I understand filterer navigates to the subcollection (so you could for example reverse it) while ALL pred navigates to every single number (so you could for example inc it)</span></div><div id="t1501376166036402" t="2017-07-30 00:56:06 nathanmarz @rcullito by navigating you to a sequence you can do things with  filterer  that you can&apos;t do with navigators that go straight to subvalues, e.g. selecting the last even number in a sequence:  (select-any [(filterer even?) LAST] (range 10)) ; =&gt; 8"><a href="#t1501376166036402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">00:56:06</span>           nathanmarz </span><span>@rcullito by navigating you to a sequence you can do things with </span><code>filterer</code><span> that you can&apos;t do with navigators that go straight to subvalues, e.g. selecting the last even number in a sequence: </span><code>(select-any [(filterer even?) LAST] (range 10)) ; =&gt; 8</code></div><div id="t1501397981196471" t="2017-07-30 06:59:41 rcullito Thanks for the examples: @drowsy, @nathanmarz! Starting to pick up on the subtleties for when it is preferable to use  filterer . Much appreciated."><a href="#t1501397981196471" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-30</span> <span class="t" onclick="H(this)">06:59:41</span>             rcullito </span><span>Thanks for the examples: @drowsy, @nathanmarz! Starting to pick up on the subtleties for when it is preferable to use </span><code>filterer</code><span>. Much appreciated.</span></div><div id="t1501663505022976" t="2017-08-02 08:45:05 levitanong Hi all, is there any way to mimic the functionality of multi-arity  map ?
 (map (fn [a b] ...) [1 2 3] [4 5 6])
"><a href="#t1501663505022976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span> <span class="t" onclick="H(this)">08:45:05</span>           levitanong </span><span>Hi all, is there any way to mimic the functionality of multi-arity </span><code>map</code><span>?
</span><pre>(map (fn [a b] ...) [1 2 3] [4 5 6])
</pre></div><div id="t1501720740951880" t="2017-08-03 00:39:00 steveb8n I’m struggling with a conditional transform. seems simple but I can’t work it out. How do I transform a map value only if it is present?"><a href="#t1501720740951880" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:39:00</span>             steveb8n </span><span>I’m struggling with a conditional transform. seems simple but I can’t work it out. How do I transform a map value only if it is present?</span></div><div id="t1501720758955664" t="2017-08-03 00:39:18 steveb8n (transform [:b vector?] set {:a 1})"><a href="#t1501720758955664" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:39:18</span>             steveb8n </span><code>(transform [:b vector?] set {:a 1})</code></div><div id="t1501720784961095" t="2017-08-03 00:39:44 steveb8n will return  {:a 1, :b nil}"><a href="#t1501720784961095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:39:44</span>             steveb8n </span><span>will return </span><code>{:a 1, :b nil}</code></div><div id="t1501720817968187" t="2017-08-03 00:40:17 steveb8n but I only want the “:b” transformed if “:b” is present"><a href="#t1501720817968187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:40:17</span>             steveb8n </span><span>but I only want the “:b” transformed if “:b” is present</span></div><div id="t1501720911987473" t="2017-08-03 00:41:51 schmee @steveb8n  (s/must :b)"><a href="#t1501720911987473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:41:51</span>               schmee </span><span>@steveb8n </span><code>(s/must :b)</code></div><div id="t1501720922989715" t="2017-08-03 00:42:02 schmee https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must"><a href="#t1501720922989715" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:42:02</span>               schmee </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#must</a></div><div id="t1501720974000190" t="2017-08-03 00:42:54 steveb8n thanks @schmee I knew there had to be a simple answer"><a href="#t1501720974000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-03</span> <span class="t" onclick="H(this)">00:42:54</span>             steveb8n </span><span>thanks @schmee I knew there had to be a simple answer</span></div><div id="t1502706946550142" t="2017-08-14 10:35:46 nathanmarz Released Specter 1.0.3  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1502706946550142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span> <span class="t" onclick="H(this)">10:35:46</span>           nathanmarz </span><span>Released Specter 1.0.3 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1502707106590765" t="2017-08-14 10:38:26 nathanmarz (setval (index-nav 3) 1 [:a :b :c :d :e])
;; =&gt; [:a :d :b :c :e]

(select INDEXED-VALS [:a :b :c])
;; =&gt; [[0 :a] [1 :b] [2 :c]]

(setval [INDEXED-VALS FIRST] 0 [:a :b :c :d])
;; =&gt; [:d :c :b :a]

(setval (before-index 2) :a &apos;(0 1 2 3 4))
;; =&gt; (0 1 :a 2 3 4)
"><a href="#t1502707106590765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span> <span class="t" onclick="H(this)">10:38:26</span>           nathanmarz </span><pre>(setval (index-nav 3) 1 [:a :b :c :d :e])
;; =&gt; [:a :d :b :c :e]

(select INDEXED-VALS [:a :b :c])
;; =&gt; [[0 :a] [1 :b] [2 :c]]

(setval [INDEXED-VALS FIRST] 0 [:a :b :c :d])
;; =&gt; [:d :c :b :a]

(setval (before-index 2) :a &apos;(0 1 2 3 4))
;; =&gt; (0 1 :a 2 3 4)
</pre></div><div id="t1503249656000062" t="2017-08-20 17:20:56 michaelwfogleman There was recently a very interesting question on Stack Overflow - no one has written a Specter-based solution yet... I am trying to write one."><a href="#t1503249656000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-20</span> <span class="t" onclick="H(this)">17:20:56</span>     michaelwfogleman </span><span>There was recently a very interesting question on Stack Overflow - no one has written a Specter-based solution yet... I am trying to write one.</span></div><div id="t1503249669000018" t="2017-08-20 17:21:09 michaelwfogleman https://stackoverflow.com/questions/45764946/how-to-find-indexes-in-deeply-nested-data-structurevectors-and-lists-in-clojur"><a href="#t1503249669000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-20</span> <span class="t" onclick="H(this)">17:21:09</span>     michaelwfogleman </span><a href="https://stackoverflow.com/questions/45764946/how-to-find-indexes-in-deeply-nested-data-structurevectors-and-lists-in-clojur" target="_blank">https://stackoverflow.com/questions/45764946/how-to-find-indexes-in-deeply-nested-data-structurevectors-and-lists-in-clojur</a></div><div id="t1503250122000110" t="2017-08-20 17:28:42 nathanmarz @michaelwfogleman I&apos;ll take a closer look later, but you basically want to use  recursive-path ,  collect-one , and  INDEXED-VALS"><a href="#t1503250122000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-20</span> <span class="t" onclick="H(this)">17:28:42</span>           nathanmarz </span><span>@michaelwfogleman I&apos;ll take a closer look later, but you basically want to use </span><code>recursive-path</code><span>, </span><code>collect-one</code><span>, and </span><code>INDEXED-VALS</code></div><div id="t1503254084000035" t="2017-08-20 18:34:44 nathanmarz @michaelwfogleman looks like this:
 (defn find-index-route [v data]
  (let [p (recursive-path [] p
            (if-path sequential?
              [INDEXED-VALS
               (if-path [LAST (pred= v)]
                 FIRST
                 [(collect-one FIRST) LAST p]
                 )]))]
    (let [ret (select-first p data)]
      (if (vector? ret) ret [ret])
      )))
"><a href="#t1503254084000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-20</span> <span class="t" onclick="H(this)">18:34:44</span>           nathanmarz </span><span>@michaelwfogleman looks like this:
</span><pre>(defn find-index-route [v data]
  (let [p (recursive-path [] p
            (if-path sequential?
              [INDEXED-VALS
               (if-path [LAST (pred= v)]
                 FIRST
                 [(collect-one FIRST) LAST p]
                 )]))]
    (let [ret (select-first p data)]
      (if (vector? ret) ret [ret])
      )))
</pre></div><div id="t1503263743000054" t="2017-08-20 21:15:43 souenzzo Mine, w/o specter but works on maps and find &quot;all&quot; routes
 (defn find-index-route
  &quot;find all routes to some value&quot;
  ([k x] (find-index-route k x []))
  ([k x p]
   (cond
     (= k x) [p]
     (coll? x) (-&gt;&gt; (if (map? x) x (vec x))
                    (reduce-kv (fn [acc i v]
                                 (into (vec (find-index-route k v (conj p i))) acc)) []))
     :else nil)))
"><a href="#t1503263743000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-20</span> <span class="t" onclick="H(this)">21:15:43</span>                  souenzzo </span><span>Mine, w/o specter but works on maps and find &quot;all&quot; routes
</span><pre>(defn find-index-route
  &quot;find all routes to some value&quot;
  ([k x] (find-index-route k x []))
  ([k x p]
   (cond
     (= k x) [p]
     (coll? x) (-&gt;&gt; (if (map? x) x (vec x))
                    (reduce-kv (fn [acc i v]
                                 (into (vec (find-index-route k v (conj p i))) acc)) []))
     :else nil)))
</pre></div><div id="t1503300706000315" t="2017-08-21 07:31:46 nathanmarz @U2J4FRT2T a slight modification makes the specter version work for maps as well:
 (defn find-index-route [v data]
  (let [p (recursive-path [] p
            [(if-path map? ALL INDEXED-VALS)
             (if-path [LAST (pred= v)]
               FIRST
               [(collect-one FIRST) LAST coll? p]
               )])]
    (let [ret (select-first p data)]
      (if (or (nil? ret) (vector? ret)) ret [ret])
      )))
"><a href="#t1503300706000315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">07:31:46</span>                nathanmarz </span><span>@U2J4FRT2T a slight modification makes the specter version work for maps as well:
</span><pre>(defn find-index-route [v data]
  (let [p (recursive-path [] p
            [(if-path map? ALL INDEXED-VALS)
             (if-path [LAST (pred= v)]
               FIRST
               [(collect-one FIRST) LAST coll? p]
               )])]
    (let [ret (select-first p data)]
      (if (or (nil? ret) (vector? ret)) ret [ret])
      )))
</pre></div><div id="t1503317335000189" t="2017-08-21 12:08:55 michaelwfogleman pred= and friends are great!"><a href="#t1503317335000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:08:55</span>     michaelwfogleman </span><span>pred= and friends are great!</span></div><div id="t1503318266000227" t="2017-08-21 12:24:26 michaelwfogleman @nathanmarz Is it possible to contribute to the Specter wiki?"><a href="#t1503318266000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:24:26</span>     michaelwfogleman </span><span>@nathanmarz Is it possible to contribute to the Specter wiki?</span></div><div id="t1503318331000223" t="2017-08-21 12:25:31 michaelwfogleman When you first mentioned recursive-path, I noticed it wasn&apos;t documented (in the Macros section?). I dug up the mention in Changes.MD that had an example. I cloned the wiki and made a change locally but would like to contribute it"><a href="#t1503318331000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:25:31</span>     michaelwfogleman </span><span>When you first mentioned recursive-path, I noticed it wasn&apos;t documented (in the Macros section?). I dug up the mention in Changes.MD that had an example. I cloned the wiki and made a change locally but would like to contribute it</span></div><div id="t1503319230000001" t="2017-08-21 12:40:30 nathanmarz @michaelwfogleman yea, I wish github had a way to make pull requests for project wikis"><a href="#t1503319230000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:40:30</span>           nathanmarz </span><span>@michaelwfogleman yea, I wish github had a way to make pull requests for project wikis</span></div><div id="t1503319258000312" t="2017-08-21 12:40:58 nathanmarz maybe I can make the specter wiki its own project and keep it in sync myself"><a href="#t1503319258000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:40:58</span>           nathanmarz </span><span>maybe I can make the specter wiki its own project and keep it in sync myself</span></div><div id="t1503319385000155" t="2017-08-21 12:43:05 nathanmarz @michaelwfogleman ok, make a pull request to  https://github.com/nathanmarz/specter-wiki"><a href="#t1503319385000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:43:05</span>           nathanmarz </span><span>@michaelwfogleman ok, make a pull request to </span><a href="https://github.com/nathanmarz/specter-wiki" target="_blank">https://github.com/nathanmarz/specter-wiki</a></div><div id="t1503319598000447" t="2017-08-21 12:46:38 michaelwfogleman Awesome! Done!"><a href="#t1503319598000447" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:46:38</span>     michaelwfogleman </span><span>Awesome! Done!</span></div><div id="t1503319616000360" t="2017-08-21 12:46:56 michaelwfogleman Happy to tweak the documentation if it&apos;s not quite right.  🙂"><a href="#t1503319616000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:46:56</span>     michaelwfogleman </span><span>Happy to tweak the documentation if it&apos;s not quite right. </span><b>🙂</b></div><div id="t1503319818000002" t="2017-08-21 12:50:18 nathanmarz awesome, merged"><a href="#t1503319818000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:50:18</span>           nathanmarz </span><span>awesome, merged</span></div><div id="t1503319832000246" t="2017-08-21 12:50:32 nathanmarz should probably add example of transform and an example of a parameterized recursive-path"><a href="#t1503319832000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:50:32</span>           nathanmarz </span><span>should probably add example of transform and an example of a parameterized recursive-path</span></div><div id="t1503319901000148" t="2017-08-21 12:51:41 nathanmarz can open issues on specter-wiki repository for anything you find that&apos;s lacking"><a href="#t1503319901000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:51:41</span>           nathanmarz </span><span>can open issues on specter-wiki repository for anything you find that&apos;s lacking</span></div><div id="t1503319909000185" t="2017-08-21 12:51:49 nathanmarz (which is probably a lot of things)"><a href="#t1503319909000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:51:49</span>           nathanmarz </span><span>(which is probably a lot of things)</span></div><div id="t1503320303000232" t="2017-08-21 12:58:23 twillis hello, just discovered specter yesterday and I thought it might help me transforming honeysql queries. for example given...


 {:select (:*), :from (:table), :where [:or [:and [:= :a 1] [:b 1]] [:and [:= :c 1] [:= :d 1]]]}
 

example: if i need to add  [:= :active true]  to each clause. 

having trouble specifying the path past  [:where ALL]  , i guess it&apos;s a problem with the sequences having a keyword as the first element."><a href="#t1503320303000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">12:58:23</span>              twillis </span><span>hello, just discovered specter yesterday and I thought it might help me transforming honeysql queries. for example given...


</span><pre>{:select (:*), :from (:table), :where [:or [:and [:= :a 1] [:b 1]] [:and [:= :c 1] [:= :d 1]]]}
</pre><span>

example: if i need to add </span><code>[:= :active true]</code><span> to each clause. 

having trouble specifying the path past </span><code>[:where ALL]</code><span> , i guess it&apos;s a problem with the sequences having a keyword as the first element.</span></div><div id="t1503325612000536" t="2017-08-21 14:26:52 nathanmarz @twillis do you want to add that clause to the top-level of  :where  (e.g.  [:and [:= :active true] [:or ...]] ) or within each  :and  clause?"><a href="#t1503325612000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:26:52</span>           nathanmarz </span><span>@twillis do you want to add that clause to the top-level of </span><code>:where</code><span> (e.g. </span><code>[:and [:= :active true] [:or ...]]</code><span>) or within each </span><code>:and</code><span> clause?</span></div><div id="t1503325698000633" t="2017-08-21 14:28:18 nathanmarz if the latter you&apos;ll probably need a recursive path since  :and  and  :or  can nest arbitrarily"><a href="#t1503325698000633" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:28:18</span>           nathanmarz </span><span>if the latter you&apos;ll probably need a recursive path since </span><code>:and</code><span> and </span><code>:or</code><span> can nest arbitrarily</span></div><div id="t1503325949000484" t="2017-08-21 14:32:29 twillis well in the above example I was thinking of adding to each clause but it was just an arbitrary example. but I think the issue i&apos;m having is that I dont know how to get to things in a vector where the first item is a keyword."><a href="#t1503325949000484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:32:29</span>              twillis </span><span>well in the above example I was thinking of adding to each clause but it was just an arbitrary example. but I think the issue i&apos;m having is that I dont know how to get to things in a vector where the first item is a keyword.</span></div><div id="t1503326314000257" t="2017-08-21 14:38:34 nathanmarz you can use this to navigate to each node in tree: 
 (def TreeNodes
    (recursive-path [] p
     (if-path sequential?
       (continue-then-stay ALL p)
       STAY
       )))
"><a href="#t1503326314000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:38:34</span>           nathanmarz </span><span>you can use this to navigate to each node in tree: 
</span><pre>(def TreeNodes
    (recursive-path [] p
     (if-path sequential?
       (continue-then-stay ALL p)
       STAY
       )))
</pre></div><div id="t1503326512000201" t="2017-08-21 14:41:52 nathanmarz then something like this for your transform:
 (setval [:where TreeNodes vector? (selected? FIRST (pred= :and)) AFTER-ELEM] [:= :active true] data)
  "><a href="#t1503326512000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:41:52</span>           nathanmarz </span><span>then something like this for your transform:
</span><pre>(setval [:where TreeNodes vector? (selected? FIRST (pred= :and)) AFTER-ELEM] [:= :active true] data)
</pre><span> </span></div><div id="t1503326727000104" t="2017-08-21 14:45:27 twillis ok thanks for your help @nathanmarz"><a href="#t1503326727000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">14:45:27</span>              twillis </span><span>ok thanks for your help @nathanmarz</span></div><div id="t1503338358000485" t="2017-08-21 17:59:18 urbank Hm... where does  pred=  come from? Is it just a user defined function?"><a href="#t1503338358000485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">17:59:18</span>               urbank </span><span>Hm... where does </span><code>pred=</code><span> come from? Is it just a user defined function?</span></div><div id="t1503338473000247" t="2017-08-21 18:01:13 urbank Oh, it&apos;s a specter function. Didn&apos;t notice that none of the functions were namespaced in the samples"><a href="#t1503338473000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">18:01:13</span>               urbank </span><span>Oh, it&apos;s a specter function. Didn&apos;t notice that none of the functions were namespaced in the samples</span></div><div id="t1503338833000516" t="2017-08-21 18:07:13 nathanmarz it&apos;s just a convenience, same as  #(= % some-val)"><a href="#t1503338833000516" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">18:07:13</span>           nathanmarz </span><span>it&apos;s just a convenience, same as </span><code>#(= % some-val)</code></div><div id="t1503338994000295" t="2017-08-21 18:09:54 urbank Yeah, figured. Just thought it was a part of clojure core or something"><a href="#t1503338994000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-21</span> <span class="t" onclick="H(this)">18:09:54</span>               urbank </span><span>Yeah, figured. Just thought it was a part of clojure core or something</span></div><div id="t1503531148000206" t="2017-08-23 23:32:28 lvh Is there some way to coalesce a bunch of sequential transforms, and would there be a performance benefit from doing so?"><a href="#t1503531148000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-23</span> <span class="t" onclick="H(this)">23:32:28</span>                  lvh </span><span>Is there some way to coalesce a bunch of sequential transforms, and would there be a performance benefit from doing so?</span></div><div id="t1503531156000052" t="2017-08-23 23:32:36 lvh (My transforms don’t commute.)"><a href="#t1503531156000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-23</span> <span class="t" onclick="H(this)">23:32:36</span>                  lvh </span><span>(My transforms don’t commute.)</span></div><div id="t1503538318000001" t="2017-08-24 01:31:58 nathanmarz @lvh if there&apos;s shared navigation among the transforms then  multi-transform  can be used for major performance gains"><a href="#t1503538318000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-24</span> <span class="t" onclick="H(this)">01:31:58</span>           nathanmarz </span><span>@lvh if there&apos;s shared navigation among the transforms then </span><code>multi-transform</code><span> can be used for major performance gains</span></div><div id="t1503538442000030" t="2017-08-24 01:34:02 nathanmarz a couple examples from benchmarks:  https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L336"><a href="#t1503538442000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-24</span> <span class="t" onclick="H(this)">01:34:02</span>           nathanmarz </span><span>a couple examples from benchmarks: </span><a href="https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L336" target="_blank">https://github.com/nathanmarz/specter/blob/master/scripts/benchmarks.clj#L336</a></div><div id="t1503683635000365" t="2017-08-25 17:53:55 sandbags @nathanmarz here&apos;s my use case, see if you think Specter makes this easier. I&apos;m building a library for modular behaviour trees. i&apos;ve decided to represent these as nested vectors a la Hiccup markup so, for example  [:selector [:loop {:count 99} [:sequence [:randomly {:p 0.5} [:foo]] [:randomly {:p 0.25} [:bar]] [:baz]]]]"><a href="#t1503683635000365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">17:53:55</span>             sandbags </span><span>@nathanmarz here&apos;s my use case, see if you think Specter makes this easier. I&apos;m building a library for modular behaviour trees. i&apos;ve decided to represent these as nested vectors a la Hiccup markup so, for example </span><code>[:selector [:loop {:count 99} [:sequence [:randomly {:p 0.5} [:foo]] [:randomly {:p 0.25} [:bar]] [:baz]]]]</code></div><div id="t1503683699000115" t="2017-08-25 17:54:59 sandbags what i want to do is (1) label each vector with an autogenerated id, (2) check that required options are specified (e.g.  :loop  must always have a  :count  option) (3) check required number of children is specified (e.g.  :loop  always has exactly 1 child)"><a href="#t1503683699000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">17:54:59</span>             sandbags </span><span>what i want to do is (1) label each vector with an autogenerated id, (2) check that required options are specified (e.g. </span><code>:loop</code><span> must always have a </span><code>:count</code><span> option) (3) check required number of children is specified (e.g. </span><code>:loop</code><span> always has exactly 1 child)</span></div><div id="t1503683740000028" t="2017-08-25 17:55:40 sandbags i have code doing this based on postwalk (well i&apos;ve not done 3 yet but it&apos;s a trivial modification of 2)"><a href="#t1503683740000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">17:55:40</span>             sandbags </span><span>i have code doing this based on postwalk (well i&apos;ve not done 3 yet but it&apos;s a trivial modification of 2)</span></div><div id="t1503683766000261" t="2017-08-25 17:56:06 sandbags at the moment I am hoisting the options map (and the id) into the metadata for the vector"><a href="#t1503683766000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">17:56:06</span>             sandbags </span><span>at the moment I am hoisting the options map (and the id) into the metadata for the vector</span></div><div id="t1503683797000294" t="2017-08-25 17:56:37 sandbags i&apos;m undecided whether a better approach would be to add an options map to all vectors and put the id in there instead"><a href="#t1503683797000294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">17:56:37</span>             sandbags </span><span>i&apos;m undecided whether a better approach would be to add an options map to all vectors and put the id in there instead</span></div><div id="t1503685294000384" t="2017-08-25 18:21:34 nathanmarz @sandbags yes, this is exactly the kind of stuff specter excels at"><a href="#t1503685294000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:21:34</span>           nathanmarz </span><span>@sandbags yes, this is exactly the kind of stuff specter excels at</span></div><div id="t1503685303000192" t="2017-08-25 18:21:43 nathanmarz i&apos;ll show you an example"><a href="#t1503685303000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:21:43</span>           nathanmarz </span><span>i&apos;ll show you an example</span></div><div id="t1503685497000364" t="2017-08-25 18:24:57 sandbags (one thing that the walk approach does not seem to make particularly easy is giving diagnostic information)"><a href="#t1503685497000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:24:57</span>             sandbags </span><span>(one thing that the walk approach does not seem to make particularly easy is giving diagnostic information)</span></div><div id="t1503685527000380" t="2017-08-25 18:25:27 nathanmarz (def data [:selector [:loop {:count 99} [:sequence [:randomly {:p 0.5} [:foo]] [:randomly {:p 0.25} [:bar]] [:baz]]]])

(def ALL-VECTORS
  (recursive-path [] p
    (if-path vector?
      (continue-then-stay ALL p))))

(let [data2 (transform (subselect ALL-VECTORS META :id) (fn [s] (-&gt; s count range)) data)]
  (select [ALL-VECTORS (collect-one META :id)] data2))
;; =&gt;
[[0 [:foo]]
 [1 [:randomly {:p 0.5} [:foo]]]
 [2 [:bar]]
 [3 [:randomly {:p 0.25} [:bar]]]
 [4 [:baz]]
 [5
  [:sequence
   [:randomly {:p 0.5} [:foo]]
   [:randomly {:p 0.25} [:bar]]
   [:baz]]]
 [6
  [:loop
   {:count 99}
   [:sequence
    [:randomly {:p 0.5} [:foo]]
    [:randomly {:p 0.25} [:bar]]
    [:baz]]]]
 [7
  [:selector
   [:loop
    {:count 99}
    [:sequence
     [:randomly {:p 0.5} [:foo]]
     [:randomly {:p 0.25} [:bar]]
     [:baz]]]]]]
"><a href="#t1503685527000380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:25:27</span>           nathanmarz </span><pre>(def data [:selector [:loop {:count 99} [:sequence [:randomly {:p 0.5} [:foo]] [:randomly {:p 0.25} [:bar]] [:baz]]]])

(def ALL-VECTORS
  (recursive-path [] p
    (if-path vector?
      (continue-then-stay ALL p))))

(let [data2 (transform (subselect ALL-VECTORS META :id) (fn [s] (-&gt; s count range)) data)]
  (select [ALL-VECTORS (collect-one META :id)] data2))
;; =&gt;
[[0 [:foo]]
 [1 [:randomly {:p 0.5} [:foo]]]
 [2 [:bar]]
 [3 [:randomly {:p 0.25} [:bar]]]
 [4 [:baz]]
 [5
  [:sequence
   [:randomly {:p 0.5} [:foo]]
   [:randomly {:p 0.25} [:bar]]
   [:baz]]]
 [6
  [:loop
   {:count 99}
   [:sequence
    [:randomly {:p 0.5} [:foo]]
    [:randomly {:p 0.25} [:bar]]
    [:baz]]]]
 [7
  [:selector
   [:loop
    {:count 99}
    [:sequence
     [:randomly {:p 0.5} [:foo]]
     [:randomly {:p 0.25} [:bar]]
     [:baz]]]]]]
</pre></div><div id="t1503685566000505" t="2017-08-25 18:26:06 nathanmarz that&apos;s adding the auto-generated id to the metadata of each vector, the  select  call is just so you can see what it did"><a href="#t1503685566000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:26:06</span>           nathanmarz </span><span>that&apos;s adding the auto-generated id to the metadata of each vector, the </span><code>select</code><span> call is just so you can see what it did</span></div><div id="t1503685644000639" t="2017-08-25 18:27:24 sandbags interesting, thank you"><a href="#t1503685644000639" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:27:24</span>             sandbags </span><span>interesting, thank you</span></div><div id="t1503685681000039" t="2017-08-25 18:28:01 sandbags i definitely need to go back and read the docs again"><a href="#t1503685681000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:28:01</span>             sandbags </span><span>i definitely need to go back and read the docs again</span></div><div id="t1503685768000240" t="2017-08-25 18:29:28 nathanmarz here&apos;s how you could insert ids at index 1 of each vector:
 (transform (subselect ALL-VECTORS (srange 1 1)) (fn [s] (-&gt;&gt; s count range (map vector))) data)
;;=&gt; [:selector 7 [:loop 6 {:count 99} [:sequence 5 [:randomly 1 {:p 0.5} [:foo 0]] [:randomly 3 {:p 0.25} [:bar 2]] [:baz 4]]]]
"><a href="#t1503685768000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:29:28</span>           nathanmarz </span><span>here&apos;s how you could insert ids at index 1 of each vector:
</span><pre>(transform (subselect ALL-VECTORS (srange 1 1)) (fn [s] (-&gt;&gt; s count range (map vector))) data)
;;=&gt; [:selector 7 [:loop 6 {:count 99} [:sequence 5 [:randomly 1 {:p 0.5} [:foo 0]] [:randomly 3 {:p 0.25} [:bar 2]] [:baz 4]]]]
</pre></div><div id="t1503685958000083" t="2017-08-25 18:32:38 nathanmarz and as one last example, here&apos;s how you would manipulate a particular node type in the tree:
 (defn node-type [kw] (path (selected? FIRST (pred= kw))))

(transform [ALL-VECTORS (node-type :randomly) (nthpath 1) :p] #(* 2 %) data)
;; =&gt; [:selector [:loop {:count 99} [:sequence [:randomly {:p 1.0} [:foo]] [:randomly {:p 0.5} [:bar]] [:baz]]]]
"><a href="#t1503685958000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:32:38</span>           nathanmarz </span><span>and as one last example, here&apos;s how you would manipulate a particular node type in the tree:
</span><pre>(defn node-type [kw] (path (selected? FIRST (pred= kw))))

(transform [ALL-VECTORS (node-type :randomly) (nthpath 1) :p] #(* 2 %) data)
;; =&gt; [:selector [:loop {:count 99} [:sequence [:randomly {:p 1.0} [:foo]] [:randomly {:p 0.5} [:bar]] [:baz]]]]
</pre></div><div id="t1503686009000006" t="2017-08-25 18:33:29 sandbags that&apos;s very cute"><a href="#t1503686009000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:33:29</span>             sandbags </span><span>that&apos;s very cute</span></div><div id="t1503686078000152" t="2017-08-25 18:34:38 sandbags it&apos;s really a shame Specter isn&apos;t better known. I know about it and a number of times i&apos;ve messed around for hours with walk/zippers etc. trying to do something that would have been easier with a bit of Specter"><a href="#t1503686078000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:34:38</span>             sandbags </span><span>it&apos;s really a shame Specter isn&apos;t better known. I know about it and a number of times i&apos;ve messed around for hours with walk/zippers etc. trying to do something that would have been easier with a bit of Specter</span></div><div id="t1503686217000108" t="2017-08-25 18:36:57 nathanmarz I consider it essential for immutable programming"><a href="#t1503686217000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:36:57</span>           nathanmarz </span><span>I consider it essential for immutable programming</span></div><div id="t1503686238000296" t="2017-08-25 18:37:18 nathanmarz I&apos;ve encountered a surprising amount of resistance to it though"><a href="#t1503686238000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:37:18</span>           nathanmarz </span><span>I&apos;ve encountered a surprising amount of resistance to it though</span></div><div id="t1503686241000120" t="2017-08-25 18:37:21 sandbags i guess one downside (but probably just inherent in this kind of complex structure bending) is that those expressions take some real picking apart"><a href="#t1503686241000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:37:21</span>             sandbags </span><span>i guess one downside (but probably just inherent in this kind of complex structure bending) is that those expressions take some real picking apart</span></div><div id="t1503686268000173" t="2017-08-25 18:37:48 sandbags it&apos;s always going to make for a bit of a learning hill"><a href="#t1503686268000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:37:48</span>             sandbags </span><span>it&apos;s always going to make for a bit of a learning hill</span></div><div id="t1503686273000317" t="2017-08-25 18:37:53 nathanmarz I wouldn&apos;t consider conciseness a downside, but the opposite"><a href="#t1503686273000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:37:53</span>           nathanmarz </span><span>I wouldn&apos;t consider conciseness a downside, but the opposite</span></div><div id="t1503686276000401" t="2017-08-25 18:37:56 nathanmarz definitely a learning curve"><a href="#t1503686276000401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:37:56</span>           nathanmarz </span><span>definitely a learning curve</span></div><div id="t1503686290000049" t="2017-08-25 18:38:10 nathanmarz what you&apos;re seeing here is the result after me learning this stuff for years"><a href="#t1503686290000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:38:10</span>           nathanmarz </span><span>what you&apos;re seeing here is the result after me learning this stuff for years</span></div><div id="t1503686295000716" t="2017-08-25 18:38:15 sandbags that&apos;s what i mean"><a href="#t1503686295000716" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:38:15</span>             sandbags </span><span>that&apos;s what i mean</span></div><div id="t1503686317000385" t="2017-08-25 18:38:37 nathanmarz it&apos;s a different way of thinking"><a href="#t1503686317000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:38:37</span>           nathanmarz </span><span>it&apos;s a different way of thinking</span></div><div id="t1503686351000442" t="2017-08-25 18:39:11 nathanmarz but it brings true simplicity and an incredible amount of power over your data"><a href="#t1503686351000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:39:11</span>           nathanmarz </span><span>but it brings true simplicity and an incredible amount of power over your data</span></div><div id="t1503686382000562" t="2017-08-25 18:39:42 sandbags i don&apos;t doubt it"><a href="#t1503686382000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:39:42</span>             sandbags </span><span>i don&apos;t doubt it</span></div><div id="t1503686536000083" t="2017-08-25 18:42:16 sandbags what do Rich &amp; co. make of it?"><a href="#t1503686536000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:42:16</span>             sandbags </span><span>what do Rich &amp; co. make of it?</span></div><div id="t1503686582000491" t="2017-08-25 18:43:02 nathanmarz no idea, I&apos;m curious about that myself"><a href="#t1503686582000491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:43:02</span>           nathanmarz </span><span>no idea, I&apos;m curious about that myself</span></div><div id="t1503686599000376" t="2017-08-25 18:43:19 nathanmarz they haven&apos;t said anything about it to my knowledge"><a href="#t1503686599000376" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:43:19</span>           nathanmarz </span><span>they haven&apos;t said anything about it to my knowledge</span></div><div id="t1503686618000361" t="2017-08-25 18:43:38 sandbags Stuart Holloway, for example, I should have thought would find this interesting."><a href="#t1503686618000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:43:38</span>             sandbags </span><span>Stuart Holloway, for example, I should have thought would find this interesting.</span></div><div id="t1503686828000169" t="2017-08-25 18:47:08 nathanmarz I suggested contributing specter to clojure awhile back, but the response from core team was &quot;no&quot; with minimal explanation  https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:relevance/clojure/qN1UPMVQmaM/uegIimKjCwAJ"><a href="#t1503686828000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:47:08</span>           nathanmarz </span><span>I suggested contributing specter to clojure awhile back, but the response from core team was &quot;no&quot; with minimal explanation </span><a href="https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:relevance/clojure/qN1UPMVQmaM/uegIimKjCwAJ" target="_blank">https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:relevance/clojure/qN1UPMVQmaM/uegIimKjCwAJ</a></div><div id="t1503686929000437" t="2017-08-25 18:48:49 nathanmarz also saw this recently which makes me think rich would have serious problems with specter:  https://gist.github.com/reborg/dc8b0c96c397a56668905e2767fd697f"><a href="#t1503686929000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:48:49</span>           nathanmarz </span><span>also saw this recently which makes me think rich would have serious problems with specter: </span><a href="https://gist.github.com/reborg/dc8b0c96c397a56668905e2767fd697f" target="_blank">https://gist.github.com/reborg/dc8b0c96c397a56668905e2767fd697f</a></div><div id="t1503687014000295" t="2017-08-25 18:50:14 nathanmarz since he&apos;s philosophically against the same function having different performance characteristics on different datatypes, he won&apos;t like how I designed the navigators"><a href="#t1503687014000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:50:14</span>           nathanmarz </span><span>since he&apos;s philosophically against the same function having different performance characteristics on different datatypes, he won&apos;t like how I designed the navigators</span></div><div id="t1503687061000579" t="2017-08-25 18:51:01 nathanmarz nthpath  for instance being O(n) on lists but faster on vectors (O(log n) I think)"><a href="#t1503687061000579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:51:01</span>           nathanmarz </span><code>nthpath</code><span> for instance being O(n) on lists but faster on vectors (O(log n) I think)</span></div><div id="t1503687517000358" t="2017-08-25 18:58:37 sandbags hrmmm"><a href="#t1503687517000358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">18:58:37</span>             sandbags </span><span>hrmmm</span></div><div id="t1503687847000201" t="2017-08-25 19:04:07 sandbags Ah well, perhaps for the best anyway"><a href="#t1503687847000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-25</span> <span class="t" onclick="H(this)">19:04:07</span>             sandbags </span><span>Ah well, perhaps for the best anyway</span></div><div id="t1503851138000009" t="2017-08-27 16:25:38 franquito Hi! I&apos;ve been thinking of defining a new path with parameters. I saw that  paramsfn  is not available anymore. Now, I think of two possible ways to define the path:  (defn [&amp; params] (spec/path ...))  or with  declarepath  and  providepath  (BTW, for this last pair of functions there&apos;s not an example of using parameters on the wiki). Which one should I use?  🤔"><a href="#t1503851138000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-27</span> <span class="t" onclick="H(this)">16:25:38</span>            franquito </span><span>Hi! I&apos;ve been thinking of defining a new path with parameters. I saw that </span><code>paramsfn</code><span> is not available anymore. Now, I think of two possible ways to define the path: </span><code>(defn [&amp; params] (spec/path ...))</code><span> or with </span><code>declarepath</code><span> and </span><code>providepath</code><span> (BTW, for this last pair of functions there&apos;s not an example of using parameters on the wiki). Which one should I use? </span><b>🤔</b></div><div id="t1503855690000074" t="2017-08-27 17:41:30 nathanmarz @franquito just use  defn  and define the returned path with  path"><a href="#t1503855690000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-27</span> <span class="t" onclick="H(this)">17:41:30</span>           nathanmarz </span><span>@franquito just use </span><code>defn</code><span> and define the returned path with </span><code>path</code></div><div id="t1503855975000025" t="2017-08-27 17:46:15 nathanmarz examples:  https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L843"><a href="#t1503855975000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-27</span> <span class="t" onclick="H(this)">17:46:15</span>           nathanmarz </span><span>examples: </span><a href="https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L843" target="_blank">https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L843</a></div><div id="t1503857367000010" t="2017-08-27 18:09:27 franquito Sweet! Thank you very much Nathan!"><a href="#t1503857367000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-27</span> <span class="t" onclick="H(this)">18:09:27</span>            franquito </span><span>Sweet! Thank you very much Nathan!</span></div><div id="t1503950023000073" t="2017-08-28 19:53:43 alexyakushev Hi, I remember I saw something somewhere about Specter supporting iteration over multiple sequences (like Clojure&apos;s  map  does). Maybe, it was an explanation why Specter doesn&apos;t have this; anyway, I can&apos;t find the link. Can anyone help? A pointer how to work around this problem would be nice too. Thanks!"><a href="#t1503950023000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">19:53:43</span>         alexyakushev </span><span>Hi, I remember I saw something somewhere about Specter supporting iteration over multiple sequences (like Clojure&apos;s </span><code>map</code><span> does). Maybe, it was an explanation why Specter doesn&apos;t have this; anyway, I can&apos;t find the link. Can anyone help? A pointer how to work around this problem would be nice too. Thanks!</span></div><div id="t1503950209000303" t="2017-08-28 19:56:49 nathanmarz @alexyakushev no, Specter doesn&apos;t support that"><a href="#t1503950209000303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">19:56:49</span>           nathanmarz </span><span>@alexyakushev no, Specter doesn&apos;t support that</span></div><div id="t1503950298000086" t="2017-08-28 19:58:18 nathanmarz besides questions of how to do a performant implementation of that, there&apos;s questions of semantics too"><a href="#t1503950298000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">19:58:18</span>           nathanmarz </span><span>besides questions of how to do a performant implementation of that, there&apos;s questions of semantics too</span></div><div id="t1503950323000269" t="2017-08-28 19:58:43 nathanmarz for instance, what would an  ALL  transform on a vector and a map produce?"><a href="#t1503950323000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">19:58:43</span>           nathanmarz </span><span>for instance, what would an </span><code>ALL</code><span> transform on a vector and a map produce?</span></div><div id="t1503950503000269" t="2017-08-28 20:01:43 alexyakushev @nathanmarz Yeah, I thought it was something along these lines.  map  was always an outlier among other sequence processing functions, it makes sense that Specter doesn&apos;t have it.
Regarding my problem, I need to  merge  two lists of lists of lists of maps. Without Specter, I solved it with an abhorrent lasagna of  (partial map ...) . Can Specter help here somehow?"><a href="#t1503950503000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:01:43</span>         alexyakushev </span><span>@nathanmarz Yeah, I thought it was something along these lines. </span><code>map</code><span> was always an outlier among other sequence processing functions, it makes sense that Specter doesn&apos;t have it.
Regarding my problem, I need to </span><code>merge</code><span> two lists of lists of lists of maps. Without Specter, I solved it with an abhorrent lasagna of </span><code>(partial map ...)</code><span>. Can Specter help here somehow?</span></div><div id="t1503950873000645" t="2017-08-28 20:07:53 nathanmarz @alexyakushev unfortunately not"><a href="#t1503950873000645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:07:53</span>           nathanmarz </span><span>@alexyakushev unfortunately not</span></div><div id="t1503950889000451" t="2017-08-28 20:08:09 nathanmarz I had an idea open awhile ago that would have helped, or an extension of it  https://github.com/nathanmarz/specter/issues/49"><a href="#t1503950889000451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:08:09</span>           nathanmarz </span><span>I had an idea open awhile ago that would have helped, or an extension of it </span><a href="https://github.com/nathanmarz/specter/issues/49" target="_blank">https://github.com/nathanmarz/specter/issues/49</a></div><div id="t1503950928000134" t="2017-08-28 20:08:48 nathanmarz basically you  locate  the specific paths to elements you care about, then use the element-specific path to get the corresponding value in the other data structure"><a href="#t1503950928000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:08:48</span>           nathanmarz </span><span>basically you </span><code>locate</code><span> the specific paths to elements you care about, then use the element-specific path to get the corresponding value in the other data structure</span></div><div id="t1503951021000050" t="2017-08-28 20:10:21 nathanmarz locate  is complicated to implement especially for substructure navigators like  srange"><a href="#t1503951021000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:10:21</span>           nathanmarz </span><code>locate</code><span> is complicated to implement especially for substructure navigators like </span><code>srange</code></div><div id="t1503951130000179" t="2017-08-28 20:12:10 nathanmarz I hadn&apos;t thought before about how something like  locate  would help with processing multiple data structures together"><a href="#t1503951130000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:12:10</span>           nathanmarz </span><span>I hadn&apos;t thought before about how something like </span><code>locate</code><span> would help with processing multiple data structures together</span></div><div id="t1503951893000031" t="2017-08-28 20:24:53 alexyakushev @nathanmarz Thanks! This is still quite helpful."><a href="#t1503951893000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:24:53</span>         alexyakushev </span><span>@nathanmarz Thanks! This is still quite helpful.</span></div><div id="t1503952085000367" t="2017-08-28 20:28:05 nathanmarz I ended up implementing something different than  locate  as described in that ticket, but this might be worth considering again"><a href="#t1503952085000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:28:05</span>           nathanmarz </span><span>I ended up implementing something different than </span><code>locate</code><span> as described in that ticket, but this might be worth considering again</span></div><div id="t1503952119000264" t="2017-08-28 20:28:39 nathanmarz Having a broader set of use cases would be needed to understand how to spec the new operation"><a href="#t1503952119000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:28:39</span>           nathanmarz </span><span>Having a broader set of use cases would be needed to understand how to spec the new operation</span></div><div id="t1503952793000616" t="2017-08-28 20:39:53 nathanmarz https://github.com/nathanmarz/specter/issues/229"><a href="#t1503952793000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-28</span> <span class="t" onclick="H(this)">20:39:53</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/229" target="_blank">https://github.com/nathanmarz/specter/issues/229</a></div><div id="t1504031801000067" t="2017-08-29 18:36:41 urzds Hi!"><a href="#t1504031801000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:36:41</span>                urzds </span><span>Hi!</span></div><div id="t1504032254000120" t="2017-08-29 18:44:14 urzds I have an ip-pool  {&quot;127.0.0.1&quot; {:k v}}  and would like to get first IP where  :k  is  nil . How would I do that? I would hope to get a more readable version of  (first (first (filter #(nil? (:k (second %))) ip-pool)"><a href="#t1504032254000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:44:14</span>                urzds </span><span>I have an ip-pool </span><code>{&quot;127.0.0.1&quot; {:k v}}</code><span> and would like to get first IP where </span><code>:k</code><span> is </span><code>nil</code><span>. How would I do that? I would hope to get a more readable version of </span><code>(first (first (filter #(nil? (:k (second %))) ip-pool)</code></div><div id="t1504032383000021" t="2017-08-29 18:46:23 nathanmarz @urzds what does &quot;first&quot; mean in this context given that your input is an unsorted map?"><a href="#t1504032383000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:46:23</span>           nathanmarz </span><span>@urzds what does &quot;first&quot; mean in this context given that your input is an unsorted map?</span></div><div id="t1504032409000228" t="2017-08-29 18:46:49 urzds any, but one is enough"><a href="#t1504032409000228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:46:49</span>                urzds </span><span>any, but one is enough</span></div><div id="t1504032495000068" t="2017-08-29 18:48:15 urzds i.e. I don&apos;t care which one, but I want only one and not more. The result shall be the key, i.e. a string, e.g. &quot;127.0.0.1&quot;."><a href="#t1504032495000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:48:15</span>                urzds </span><span>i.e. I don&apos;t care which one, but I want only one and not more. The result shall be the key, i.e. a string, e.g. &quot;127.0.0.1&quot;.</span></div><div id="t1504032624000039" t="2017-08-29 18:50:24 urzds I don&apos;t like the regular-Clojure version I wrote above, because it is not immediately clear what the two  first s mean.  second  can be deduced, if one knows  ip-pool  is a map and how  filter  works, but I find the two  first  to be not obvious enough."><a href="#t1504032624000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:50:24</span>                urzds </span><span>I don&apos;t like the regular-Clojure version I wrote above, because it is not immediately clear what the two </span><code>first</code><span>s mean. </span><code>second</code><span> can be deduced, if one knows </span><code>ip-pool</code><span> is a map and how </span><code>filter</code><span> works, but I find the two </span><code>first</code><span> to be not obvious enough.</span></div><div id="t1504032808000693" t="2017-08-29 18:53:28 nathanmarz @urzds 
 (def data {&quot;127.0.0.1&quot; {:k 3} &quot;127.0.0.2&quot; {} &quot;127.0.0.3&quot; {:b 2}})
(select-first [ALL (selected? LAST :k nil?) FIRST] data)
"><a href="#t1504032808000693" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:53:28</span>           nathanmarz </span><span>@urzds 
</span><pre>(def data {&quot;127.0.0.1&quot; {:k 3} &quot;127.0.0.2&quot; {} &quot;127.0.0.3&quot; {:b 2}})
(select-first [ALL (selected? LAST :k nil?) FIRST] data)
</pre></div><div id="t1504032835000258" t="2017-08-29 18:53:55 nathanmarz if you want all of them just change  select-first  to  select"><a href="#t1504032835000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:53:55</span>           nathanmarz </span><span>if you want all of them just change </span><code>select-first</code><span> to </span><code>select</code></div><div id="t1504032988000214" t="2017-08-29 18:56:28 urzds (selected? ...)  is basically like  (some? (select ...)) ?"><a href="#t1504032988000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:56:28</span>                urzds </span><code>(selected? ...)</code><span> is basically like </span><code>(some? (select ...))</code><span>?</span></div><div id="t1504033070000313" t="2017-08-29 18:57:50 nathanmarz it&apos;s like  (not (empty? (select ...)))  except it runs far more efficiently than that"><a href="#t1504033070000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:57:50</span>           nathanmarz </span><span>it&apos;s like </span><code>(not (empty? (select ...)))</code><span> except it runs far more efficiently than that</span></div><div id="t1504033102000119" t="2017-08-29 18:58:22 nathanmarz no materialization of intermediate sequences and stops traversal as soon as it matches something"><a href="#t1504033102000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:58:22</span>           nathanmarz </span><span>no materialization of intermediate sequences and stops traversal as soon as it matches something</span></div><div id="t1504033109000001" t="2017-08-29 18:58:29 nathanmarz same as  select-first"><a href="#t1504033109000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:58:29</span>           nathanmarz </span><span>same as </span><code>select-first</code></div><div id="t1504033136000054" t="2017-08-29 18:58:56 urzds Thanks."><a href="#t1504033136000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:58:56</span>                urzds </span><span>Thanks.</span></div><div id="t1504033141000553" t="2017-08-29 18:59:01 urzds Guess I should alias LAST to VALUE and FIRST to KEY. That might make it easier to read..."><a href="#t1504033141000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:59:01</span>                urzds </span><span>Guess I should alias LAST to VALUE and FIRST to KEY. That might make it easier to read...</span></div><div id="t1504033177000427" t="2017-08-29 18:59:37 nathanmarz yea, that&apos;s easy enough"><a href="#t1504033177000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">18:59:37</span>           nathanmarz </span><span>yea, that&apos;s easy enough</span></div><div id="t1504033232000405" t="2017-08-29 19:00:32 urzds If I wanted to select the IP address where  :k  is 1, I would run  (select-first [ALL (selected? LAST :k #(= % 1)) FIRST] data)  ?"><a href="#t1504033232000405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:00:32</span>                urzds </span><span>If I wanted to select the IP address where </span><code>:k</code><span> is 1, I would run </span><code>(select-first [ALL (selected? LAST :k #(= % 1)) FIRST] data)</code><span> ?</span></div><div id="t1504033283000388" t="2017-08-29 19:01:23 nathanmarz yea"><a href="#t1504033283000388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:01:23</span>           nathanmarz </span><span>yea</span></div><div id="t1504033296000385" t="2017-08-29 19:01:36 nathanmarz can also say  (pred= 1)  instead of the anonymous function"><a href="#t1504033296000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:01:36</span>           nathanmarz </span><span>can also say </span><code>(pred= 1)</code><span> instead of the anonymous function</span></div><div id="t1504033324000206" t="2017-08-29 19:02:04 urzds pred=  is defined by Specter?"><a href="#t1504033324000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:02:04</span>                urzds </span><code>pred=</code><span> is defined by Specter?</span></div><div id="t1504033327000183" t="2017-08-29 19:02:07 nathanmarz yes"><a href="#t1504033327000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:02:07</span>           nathanmarz </span><span>yes</span></div><div id="t1504033343000281" t="2017-08-29 19:02:23 nathanmarz there&apos;s also  pred&gt; ,  pred&lt; ,  pred&lt;= , and  pred&gt;="><a href="#t1504033343000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:02:23</span>           nathanmarz </span><span>there&apos;s also </span><code>pred&gt;</code><span>, </span><code>pred&lt;</code><span>, </span><code>pred&lt;=</code><span>, and </span><code>pred&gt;=</code></div><div id="t1504033353000575" t="2017-08-29 19:02:33 nathanmarz just convenience navigators"><a href="#t1504033353000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:02:33</span>           nathanmarz </span><span>just convenience navigators</span></div><div id="t1504033365000629" t="2017-08-29 19:02:45 nathanmarz I find it slightly more readable"><a href="#t1504033365000629" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:02:45</span>           nathanmarz </span><span>I find it slightly more readable</span></div><div id="t1504034217000663" t="2017-08-29 19:16:57 urzds Thanks @nathanmarz !"><a href="#t1504034217000663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-29</span> <span class="t" onclick="H(this)">19:16:57</span>                urzds </span><span>Thanks @nathanmarz !</span></div><div id="t1504119717000295" t="2017-08-30 19:01:57 lvh I have a data structure like:

 {:x
 {:a {:y 1}
  :b {:y 2}
  :c {:y 3}}}
 

And I’d like  {:a 1 :b 2 :c 3} . I can write the select path that gets the values:  [:x (sr/multi-path :a :b :c) :y] , and I guess I can zipmap from there; but is there an elegant way to get specter to do that for me?"><a href="#t1504119717000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:01:57</span>                  lvh </span><span>I have a data structure like:

</span><pre>{:x
 {:a {:y 1}
  :b {:y 2}
  :c {:y 3}}}
</pre><span>

And I’d like </span><code>{:a 1 :b 2 :c 3}</code><span>. I can write the select path that gets the values: </span><code>[:x (sr/multi-path :a :b :c) :y]</code><span>, and I guess I can zipmap from there; but is there an elegant way to get specter to do that for me?</span></div><div id="t1504119771000330" t="2017-08-30 19:02:51 lvh sr/collect’ing the multi-path doesn’t really do what I expected:

 [[[{:y 1} {:y 2} {:y 3}] nil]]"><a href="#t1504119771000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:02:51</span>                  lvh </span><span>sr/collect’ing the multi-path doesn’t really do what I expected:

</span><code>[[[{:y 1} {:y 2} {:y 3}] nil]]</code></div><div id="t1504120941000562" t="2017-08-30 19:22:21 nathanmarz @lvh something like this?  (select-any [:x (transformed MAP-VALS :y)] data)"><a href="#t1504120941000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:22:21</span>           nathanmarz </span><span>@lvh something like this? </span><code>(select-any [:x (transformed MAP-VALS :y)] data)</code></div><div id="t1504120998000525" t="2017-08-30 19:23:18 lvh Cool; thanks! I guess my sample was a little underspecified; there are other keys in there I do not want; but I guess a multi-path instead of a MAP-VALS would probably do the trick; lemme try"><a href="#t1504120998000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:23:18</span>                  lvh </span><span>Cool; thanks! I guess my sample was a little underspecified; there are other keys in there I do not want; but I guess a multi-path instead of a MAP-VALS would probably do the trick; lemme try</span></div><div id="t1504121076000191" t="2017-08-30 19:24:36 nathanmarz for that you will want multi-transform with keys you don&apos;t want becoming  (terminal-val NONE)  and ones you do using  (terminal :y)"><a href="#t1504121076000191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:24:36</span>           nathanmarz </span><span>for that you will want multi-transform with keys you don&apos;t want becoming </span><code>(terminal-val NONE)</code><span> and ones you do using </span><code>(terminal :y)</code></div><div id="t1504121114000234" t="2017-08-30 19:25:14 nathanmarz if you want to do it in a one-liner that is"><a href="#t1504121114000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:25:14</span>           nathanmarz </span><span>if you want to do it in a one-liner that is</span></div><div id="t1504121193000421" t="2017-08-30 19:26:33 nathanmarz can also just do the  select-any  followed by a  (setval [MAP-KEYS #{:k1 :k2 ...}] NONE data2)"><a href="#t1504121193000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:26:33</span>           nathanmarz </span><span>can also just do the </span><code>select-any</code><span> followed by a </span><code>(setval [MAP-KEYS #{:k1 :k2 ...}] NONE data2)</code></div><div id="t1504121226000336" t="2017-08-30 19:27:06 nathanmarz I would just do the latter since there&apos;s no  multi-transformed"><a href="#t1504121226000336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:27:06</span>           nathanmarz </span><span>I would just do the latter since there&apos;s no </span><code>multi-transformed</code></div><div id="t1504121369000426" t="2017-08-30 19:29:29 nathanmarz actually, just use  submap  before  transformed"><a href="#t1504121369000426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:29:29</span>           nathanmarz </span><span>actually, just use </span><code>submap</code><span> before </span><code>transformed</code></div><div id="t1504121375000620" t="2017-08-30 19:29:35 nathanmarz that&apos;s the easiest and most efficient"><a href="#t1504121375000620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:29:35</span>           nathanmarz </span><span>that&apos;s the easiest and most efficient</span></div><div id="t1504121428000135" t="2017-08-30 19:30:28 nathanmarz [:x (submap [:k1 :k2...]) (transformed MAP-VALS :y)"><a href="#t1504121428000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">19:30:28</span>           nathanmarz </span><code>[:x (submap [:k1 :k2...]) (transformed MAP-VALS :y)</code></div><div id="t1504350229000001" t="2017-09-02 11:03:49 hmaurer Quick question: is there a set of “laws” that navigators are expected to follow? For example, I assume I should expect the following:
 (= (select path structure) (transform path (fn [x] x) structure))
 
or

 (= 42 (select path (transform path (fn [_] 42) structure)))
 
etc"><a href="#t1504350229000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:03:49</span>              hmaurer </span><span>Quick question: is there a set of “laws” that navigators are expected to follow? For example, I assume I should expect the following:
</span><pre>(= (select path structure) (transform path (fn [x] x) structure))
</pre><span>
or

</span><pre>(= 42 (select path (transform path (fn [_] 42) structure)))
</pre><span>
etc</span></div><div id="t1504352265000031" t="2017-09-02 11:37:45 nathanmarz @hmaurer well, those are both not true"><a href="#t1504352265000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:37:45</span>           nathanmarz </span><span>@hmaurer well, those are both not true</span></div><div id="t1504352299000039" t="2017-09-02 11:38:19 nathanmarz :a  for first one,  ALL  for second one shows falsehood"><a href="#t1504352299000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:38:19</span>           nathanmarz </span><code>:a</code><span> for first one, </span><code>ALL</code><span> for second one shows falsehood</span></div><div id="t1504352303000027" t="2017-09-02 11:38:23 hmaurer @nathanmarz ha! how so? transforming a path with the identity shouldn’t leave the values under that path unchanged?"><a href="#t1504352303000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:38:23</span>              hmaurer </span><span>@nathanmarz ha! how so? transforming a path with the identity shouldn’t leave the values under that path unchanged?</span></div><div id="t1504352335000025" t="2017-09-02 11:38:55 hmaurer oh sorry, my first example had a typo"><a href="#t1504352335000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:38:55</span>              hmaurer </span><span>oh sorry, my first example had a typo</span></div><div id="t1504352348000041" t="2017-09-02 11:39:08 hmaurer (= (select path structure) (select path (transform path (fn [x] x) structure)))
"><a href="#t1504352348000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:39:08</span>              hmaurer </span><pre>(= (select path structure) (select path (transform path (fn [x] x) structure)))
</pre></div><div id="t1504352370000057" t="2017-09-02 11:39:30 nathanmarz (transform (view inc) identity 1)"><a href="#t1504352370000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:39:30</span>           nathanmarz </span><code>(transform (view inc) identity 1)</code></div><div id="t1504352392000005" t="2017-09-02 11:39:52 nathanmarz returns 2"><a href="#t1504352392000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:39:52</span>           nathanmarz </span><span>returns 2</span></div><div id="t1504352487000024" t="2017-09-02 11:41:27 nathanmarz there&apos;s not any mathematical relations I can think of between  select  and  transform"><a href="#t1504352487000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:41:27</span>           nathanmarz </span><span>there&apos;s not any mathematical relations I can think of between </span><code>select</code><span> and </span><code>transform</code></div><div id="t1504352505000001" t="2017-09-02 11:41:45 nathanmarz only important property is that  select  and  transform  traverse same values in same order"><a href="#t1504352505000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:41:45</span>           nathanmarz </span><span>only important property is that </span><code>select</code><span> and </span><code>transform</code><span> traverse same values in same order</span></div><div id="t1504352518000063" t="2017-09-02 11:41:58 nathanmarz that&apos;s necessary for  subselect"><a href="#t1504352518000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:41:58</span>           nathanmarz </span><span>that&apos;s necessary for </span><code>subselect</code></div><div id="t1504352591000037" t="2017-09-02 11:43:11 hmaurer @nathanmarz in the case of  (view inc) , the invariant
 (= (select path structure) (select path (transform path (fn [x] x) structure)))
 
holds as far as I can see"><a href="#t1504352591000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:43:11</span>              hmaurer </span><span>@nathanmarz in the case of </span><code>(view inc)</code><span>, the invariant
</span><pre>(= (select path structure) (select path (transform path (fn [x] x) structure)))
</pre><span>
holds as far as I can see</span></div><div id="t1504352623000003" t="2017-09-02 11:43:43 hmaurer nevermind, it does not"><a href="#t1504352623000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:43:43</span>              hmaurer </span><span>nevermind, it does not</span></div><div id="t1504352630000031" t="2017-09-02 11:43:50 hmaurer ok, thank you!"><a href="#t1504352630000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:43:50</span>              hmaurer </span><span>ok, thank you!</span></div><div id="t1504352682000070" t="2017-09-02 11:44:42 hmaurer I need to wrap my head around paths that apply functions while navigating  😄"><a href="#t1504352682000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:44:42</span>              hmaurer </span><span>I need to wrap my head around paths that apply functions while navigating </span><b>😄</b></div><div id="t1504352715000017" t="2017-09-02 11:45:15 nathanmarz yea, those ones are different"><a href="#t1504352715000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:45:15</span>           nathanmarz </span><span>yea, those ones are different</span></div><div id="t1504352720000081" t="2017-09-02 11:45:20 nathanmarz just  view  and  transformed"><a href="#t1504352720000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:45:20</span>           nathanmarz </span><span>just </span><code>view</code><span> and </span><code>transformed</code></div><div id="t1504352757000039" t="2017-09-02 11:45:57 hmaurer @nathanmarz what is your mental model for navigation if the model “navigating to a nested structure” is too limiting/unsuitable?"><a href="#t1504352757000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:45:57</span>              hmaurer </span><span>@nathanmarz what is your mental model for navigation if the model “navigating to a nested structure” is too limiting/unsuitable?</span></div><div id="t1504352762000042" t="2017-09-02 11:46:02 hmaurer if that question makes sense"><a href="#t1504352762000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:46:02</span>              hmaurer </span><span>if that question makes sense</span></div><div id="t1504352818000073" t="2017-09-02 11:46:58 nathanmarz well most of the time that is my mental model"><a href="#t1504352818000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:46:58</span>           nathanmarz </span><span>well most of the time that is my mental model</span></div><div id="t1504352826000040" t="2017-09-02 11:47:06 nathanmarz including for substructure navigators like srange"><a href="#t1504352826000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:47:06</span>           nathanmarz </span><span>including for substructure navigators like srange</span></div><div id="t1504352851000015" t="2017-09-02 11:47:31 nathanmarz I literally visualize moving from one portion of a data structure to another"><a href="#t1504352851000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:47:31</span>           nathanmarz </span><span>I literally visualize moving from one portion of a data structure to another</span></div><div id="t1504352917000024" t="2017-09-02 11:48:37 nathanmarz it gets easier with practice"><a href="#t1504352917000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:48:37</span>           nathanmarz </span><span>it gets easier with practice</span></div><div id="t1504352940000043" t="2017-09-02 11:49:00 nathanmarz eventually it&apos;s like anything else in programming and its just instinctive"><a href="#t1504352940000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">11:49:00</span>           nathanmarz </span><span>eventually it&apos;s like anything else in programming and its just instinctive</span></div><div id="t1504364123000060" t="2017-09-02 14:55:23 hmaurer @nathanmarz I am having a little bit of difficulty picturing the  view  example you mentioned about. When selected (reading) values, this makes sense. We are “viewing” the result of applying a function to every navigated value"><a href="#t1504364123000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">14:55:23</span>              hmaurer </span><span>@nathanmarz I am having a little bit of difficulty picturing the </span><code>view</code><span> example you mentioned about. When selected (reading) values, this makes sense. We are “viewing” the result of applying a function to every navigated value</span></div><div id="t1504364161000079" t="2017-09-02 14:56:01 hmaurer However the  transform  case seems a bit odd to me. I would expect  transform  to apply the inverse function of the function passed to  view  when re-constructing the data"><a href="#t1504364161000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">14:56:01</span>              hmaurer </span><span>However the </span><code>transform</code><span> case seems a bit odd to me. I would expect </span><code>transform</code><span> to apply the inverse function of the function passed to </span><code>view</code><span> when re-constructing the data</span></div><div id="t1504364171000032" t="2017-09-02 14:56:11 hmaurer (aka flowing the data back “up the pipe”, if that makes sense)"><a href="#t1504364171000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">14:56:11</span>              hmaurer </span><span>(aka flowing the data back “up the pipe”, if that makes sense)</span></div><div id="t1504364187000085" t="2017-09-02 14:56:27 hmaurer Am I fundamentally misunderstanding somethng here?"><a href="#t1504364187000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">14:56:27</span>              hmaurer </span><span>Am I fundamentally misunderstanding somethng here?</span></div><div id="t1504364211000016" t="2017-09-02 14:56:51 hmaurer (regardless of the fact that, afaik, there is no way to compute the inverse of an arbitrary function in clojure)"><a href="#t1504364211000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">14:56:51</span>              hmaurer </span><span>(regardless of the fact that, afaik, there is no way to compute the inverse of an arbitrary function in clojure)</span></div><div id="t1504364998000029" t="2017-09-02 15:09:58 nathanmarz @hmaurer that&apos;s what  parser  does  https://github.com/nathanmarz/specter/wiki/List-of-Navigators#parser"><a href="#t1504364998000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:09:58</span>           nathanmarz </span><span>@hmaurer that&apos;s what </span><code>parser</code><span> does </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#parser" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#parser</a></div><div id="t1504365079000071" t="2017-09-02 15:11:19 nathanmarz think of  view  as like a transform function that then continues navigating into the result of the transform"><a href="#t1504365079000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:11:19</span>           nathanmarz </span><span>think of </span><code>view</code><span> as like a transform function that then continues navigating into the result of the transform</span></div><div id="t1504365317000111" t="2017-09-02 15:15:17 hmaurer @nathanmarz that clarifies things. So if my mental model looks like this:
 [ 1 ] -- inc --&gt; [ 2 ]
 
and I want to apply a transform to the value in the second box, which I then expect to be “flowed back” to the first box by inverting the computation, then  parser  is the way to go"><a href="#t1504365317000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:15:17</span>              hmaurer </span><span>@nathanmarz that clarifies things. So if my mental model looks like this:
</span><pre>[ 1 ] -- inc --&gt; [ 2 ]
</pre><span>
and I want to apply a transform to the value in the second box, which I then expect to be “flowed back” to the first box by inverting the computation, then </span><code>parser</code><span> is the way to go</span></div><div id="t1504365337000001" t="2017-09-02 15:15:37 nathanmarz that&apos;s right"><a href="#t1504365337000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:15:37</span>           nathanmarz </span><span>that&apos;s right</span></div><div id="t1504365363000102" t="2017-09-02 15:16:03 hmaurer and  view  would stay navigated in the first box?"><a href="#t1504365363000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:16:03</span>              hmaurer </span><span>and </span><code>view</code><span> would stay navigated in the first box?</span></div><div id="t1504365381000088" t="2017-09-02 15:16:21 nathanmarz the only use case we could think of for the function+inverse was parsing, but it could be used for other things as well"><a href="#t1504365381000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:16:21</span>           nathanmarz </span><span>the only use case we could think of for the function+inverse was parsing, but it could be used for other things as well</span></div><div id="t1504365392000011" t="2017-09-02 15:16:32 nathanmarz view  would stay at the second box"><a href="#t1504365392000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:16:32</span>           nathanmarz </span><code>view</code><span> would stay at the second box</span></div><div id="t1504365414000054" t="2017-09-02 15:16:54 nathanmarz (transform [(view inc) STOP] dec 1) ;; =&gt; 2"><a href="#t1504365414000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:16:54</span>           nathanmarz </span><code>(transform [(view inc) STOP] dec 1) ;; =&gt; 2</code></div><div id="t1504365664000021" t="2017-09-02 15:21:04 hmaurer Wait, I would be navigated to the second box with  view ? How so? If I am at the first box and navigate to the second box by applying some computation (here  view ), and I then use  setval  to set the value on that path (the second box), shouldn’t I expect the computation to be inverted to determine the value of the first box?"><a href="#t1504365664000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:21:04</span>              hmaurer </span><span>Wait, I would be navigated to the second box with </span><code>view</code><span>? How so? If I am at the first box and navigate to the second box by applying some computation (here </span><code>view</code><span>), and I then use </span><code>setval</code><span> to set the value on that path (the second box), shouldn’t I expect the computation to be inverted to determine the value of the first box?</span></div><div id="t1504365687000069" t="2017-09-02 15:21:27 hmaurer If  view  navigates to the second box, I don’t get why/how its behaviour differs from  parser  in the  transform  case"><a href="#t1504365687000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:21:27</span>              hmaurer </span><span>If </span><code>view</code><span> navigates to the second box, I don’t get why/how its behaviour differs from </span><code>parser</code><span> in the </span><code>transform</code><span> case</span></div><div id="t1504365744000018" t="2017-09-02 15:22:24 nathanmarz well it stays there"><a href="#t1504365744000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:22:24</span>           nathanmarz </span><span>well it stays there</span></div><div id="t1504365751000012" t="2017-09-02 15:22:31 nathanmarz maybe &quot;boxes&quot; is not the right analogy"><a href="#t1504365751000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:22:31</span>           nathanmarz </span><span>maybe &quot;boxes&quot; is not the right analogy</span></div><div id="t1504365770000006" t="2017-09-02 15:22:50 nathanmarz you can think of  view  not navigating at all, just changing the box it&apos;s at"><a href="#t1504365770000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:22:50</span>           nathanmarz </span><span>you can think of </span><code>view</code><span> not navigating at all, just changing the box it&apos;s at</span></div><div id="t1504365781000046" t="2017-09-02 15:23:01 nathanmarz and then the rest of the path continues with the new value"><a href="#t1504365781000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:23:01</span>           nathanmarz </span><span>and then the rest of the path continues with the new value</span></div><div id="t1504365813000012" t="2017-09-02 15:23:33 nathanmarz in that example I just showed you can see the  dec  function is never reached"><a href="#t1504365813000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:23:33</span>           nathanmarz </span><span>in that example I just showed you can see the </span><code>dec</code><span> function is never reached</span></div><div id="t1504365819000011" t="2017-09-02 15:23:39 nathanmarz but the  view  persists in the result"><a href="#t1504365819000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:23:39</span>           nathanmarz </span><span>but the </span><code>view</code><span> persists in the result</span></div><div id="t1504365852000097" t="2017-09-02 15:24:12 nathanmarz it&apos;s equivalent to  (transform STOP dec (transform STAY inc 1))"><a href="#t1504365852000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:24:12</span>           nathanmarz </span><span>it&apos;s equivalent to </span><code>(transform STOP dec (transform STAY inc 1))</code></div><div id="t1504366259000023" t="2017-09-02 15:30:59 hmaurer I see; thank you!"><a href="#t1504366259000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:30:59</span>              hmaurer </span><span>I see; thank you!</span></div><div id="t1504366309000113" t="2017-09-02 15:31:49 nathanmarz sure thing"><a href="#t1504366309000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:31:49</span>           nathanmarz </span><span>sure thing</span></div><div id="t1504366372000020" t="2017-09-02 15:32:52 hmaurer ah, last but not least, do you have an example of a scenario where  view  is useful but  parser  would be unsuitable?"><a href="#t1504366372000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:32:52</span>              hmaurer </span><span>ah, last but not least, do you have an example of a scenario where </span><code>view</code><span> is useful but </span><code>parser</code><span> would be unsuitable?</span></div><div id="t1504367001000014" t="2017-09-02 15:43:21 nathanmarz @hmaurer mostly I use it in  select s, where its more concise than  parser"><a href="#t1504367001000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:43:21</span>           nathanmarz </span><span>@hmaurer mostly I use it in </span><code>select</code><span>s, where its more concise than </span><code>parser</code></div><div id="t1504367018000043" t="2017-09-02 15:43:38 nathanmarz plus there&apos;s no  unparse-fn  for those cases"><a href="#t1504367018000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:43:38</span>           nathanmarz </span><span>plus there&apos;s no </span><code>unparse-fn</code><span> for those cases</span></div><div id="t1504367049000013" t="2017-09-02 15:44:09 nathanmarz one spot where I use it in a  transform  is needing to manipulate a string as a vector of characters"><a href="#t1504367049000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:44:09</span>           nathanmarz </span><span>one spot where I use it in a </span><code>transform</code><span> is needing to manipulate a string as a vector of characters</span></div><div id="t1504367054000049" t="2017-09-02 15:44:14 nathanmarz so I do a  (view vec)"><a href="#t1504367054000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:44:14</span>           nathanmarz </span><span>so I do a </span><code>(view vec)</code></div><div id="t1504367129000030" t="2017-09-02 15:45:29 hmaurer In that case though  parser ‘s behaviour would make sense, since when manipulating a string as a list of characters you are essentially navigating into the substructure of that string, right?"><a href="#t1504367129000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:45:29</span>              hmaurer </span><span>In that case though </span><code>parser</code><span>‘s behaviour would make sense, since when manipulating a string as a list of characters you are essentially navigating into the substructure of that string, right?</span></div><div id="t1504367136000037" t="2017-09-02 15:45:36 hmaurer which you could then re-construct"><a href="#t1504367136000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:45:36</span>              hmaurer </span><span>which you could then re-construct</span></div><div id="t1504367139000064" t="2017-09-02 15:45:39 nathanmarz it&apos;s actually for converting a vector of strings to a matrix of characters with some default rendering info attached to each character"><a href="#t1504367139000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:45:39</span>           nathanmarz </span><span>it&apos;s actually for converting a vector of strings to a matrix of characters with some default rendering info attached to each character</span></div><div id="t1504367180000030" t="2017-09-02 15:46:20 nathanmarz yea you could have an  unparse-fn  for that kind of navigation, but in this case the goal is to have vector of characters in the output"><a href="#t1504367180000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:46:20</span>           nathanmarz </span><span>yea you could have an </span><code>unparse-fn</code><span> for that kind of navigation, but in this case the goal is to have vector of characters in the output</span></div><div id="t1504367197000046" t="2017-09-02 15:46:37 nathanmarz (def card-back
[
&quot;.------.&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;`------&apos;&quot;
])
"><a href="#t1504367197000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:46:37</span>           nathanmarz </span><pre>(def card-back
[
&quot;.------.&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;|//////|&quot;
&quot;`------&apos;&quot;
])
</pre></div><div id="t1504367232000106" t="2017-09-02 15:47:12 nathanmarz basically that&apos;s how I specify &quot;images&quot; and the subsequent  transform  converts it to something that can be rendered"><a href="#t1504367232000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:47:12</span>           nathanmarz </span><span>basically that&apos;s how I specify &quot;images&quot; and the subsequent </span><code>transform</code><span> converts it to something that can be rendered</span></div><div id="t1504367285000030" t="2017-09-02 15:48:05 nathanmarz (def cards
  (into {}
    (for [v [2 3 4 5 6 7 8 9 :T :J :Q :K :A]]
      [v
       (into {}
         (for [[s template] {:clubs clubs-template :diamonds diamonds-template
                             :spades spades-template :hearts hearts-template}]
           [s (transform ALL #(apply str %)
                (setval [ALL (view vec) ALL (pred= \?)] (last (str v)) template))]
           ))])))
"><a href="#t1504367285000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:48:05</span>           nathanmarz </span><pre>(def cards
  (into {}
    (for [v [2 3 4 5 6 7 8 9 :T :J :Q :K :A]]
      [v
       (into {}
         (for [[s template] {:clubs clubs-template :diamonds diamonds-template
                             :spades spades-template :hearts hearts-template}]
           [s (transform ALL #(apply str %)
                (setval [ALL (view vec) ALL (pred= \?)] (last (str v)) template))]
           ))])))
</pre></div><div id="t1504367329000086" t="2017-09-02 15:48:49 nathanmarz oh actually in this case it turns templates into vector of strings for each card value"><a href="#t1504367329000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:48:49</span>           nathanmarz </span><span>oh actually in this case it turns templates into vector of strings for each card value</span></div><div id="t1504367384000041" t="2017-09-02 15:49:44 nathanmarz forgot how this code works :/"><a href="#t1504367384000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:49:44</span>           nathanmarz </span><span>forgot how this code works :/</span></div><div id="t1504367403000046" t="2017-09-02 15:50:03 nathanmarz in this case  parser  would work"><a href="#t1504367403000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:50:03</span>           nathanmarz </span><span>in this case </span><code>parser</code><span> would work</span></div><div id="t1504367485000051" t="2017-09-02 15:51:25 hmaurer Mmh. Out of curiosity, is  view  the only (shipped with Specter) infraction to the invariant
 (= (select path structure) (select path (transform path identity structure)))
 
?"><a href="#t1504367485000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:51:25</span>              hmaurer </span><span>Mmh. Out of curiosity, is </span><code>view</code><span> the only (shipped with Specter) infraction to the invariant
</span><pre>(= (select path structure) (select path (transform path identity structure)))
</pre><span>
?</span></div><div id="t1504367525000098" t="2017-09-02 15:52:05 hmaurer When thinking of navigation as “diving into structure” it seems that this invariant should hold; I am a bit bothered that  view  does not maintain it with transform"><a href="#t1504367525000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:52:05</span>              hmaurer </span><span>When thinking of navigation as “diving into structure” it seems that this invariant should hold; I am a bit bothered that </span><code>view</code><span> does not maintain it with transform</span></div><div id="t1504367535000112" t="2017-09-02 15:52:15 hmaurer but I am probably just being picky  😄"><a href="#t1504367535000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:52:15</span>              hmaurer </span><span>but I am probably just being picky </span><b>😄</b></div><div id="t1504367621000049" t="2017-09-02 15:53:41 nathanmarz also  transformed ,  nil-&gt;val"><a href="#t1504367621000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:53:41</span>           nathanmarz </span><span>also </span><code>transformed</code><span>, </span><code>nil-&gt;val</code></div><div id="t1504367639000024" t="2017-09-02 15:53:59 nathanmarz here&apos;s a better example of  view  transform use case:  (transform [(view vec) ALL] (ichar-with-attrs prompt-attrs) prompt)"><a href="#t1504367639000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:53:59</span>           nathanmarz </span><span>here&apos;s a better example of </span><code>view</code><span> transform use case: </span><code>(transform [(view vec) ALL] (ichar-with-attrs prompt-attrs) prompt)</code></div><div id="t1504367679000017" t="2017-09-02 15:54:39 nathanmarz a &quot;prompt&quot; string is converted to a vector of characters with each character wrapped in a map also containing rendering attributes like color, font, etc."><a href="#t1504367679000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:54:39</span>           nathanmarz </span><span>a &quot;prompt&quot; string is converted to a vector of characters with each character wrapped in a map also containing rendering attributes like color, font, etc.</span></div><div id="t1504367747000061" t="2017-09-02 15:55:47 nathanmarz could also do  (transform ALL (ichar-with-attrs prompt-attrs) (vec prompt)) , but the style with  view  would be useful if needed to do that transformation if had something like a map of prompts"><a href="#t1504367747000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:55:47</span>           nathanmarz </span><span>could also do </span><code>(transform ALL (ichar-with-attrs prompt-attrs) (vec prompt))</code><span>, but the style with </span><code>view</code><span> would be useful if needed to do that transformation if had something like a map of prompts</span></div><div id="t1504367843000130" t="2017-09-02 15:57:23 nathanmarz invariants like that are important for monads where it really does affect the utility of the monad"><a href="#t1504367843000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:57:23</span>           nathanmarz </span><span>invariants like that are important for monads where it really does affect the utility of the monad</span></div><div id="t1504367865000072" t="2017-09-02 15:57:45 nathanmarz other than the traversal order thing I mentioned, invariants like that aren&apos;t needed for navigation"><a href="#t1504367865000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:57:45</span>           nathanmarz </span><span>other than the traversal order thing I mentioned, invariants like that aren&apos;t needed for navigation</span></div><div id="t1504367923000033" t="2017-09-02 15:58:43 hmaurer I was hoping to use such invariants to better understand what navigators can and can’t do"><a href="#t1504367923000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:58:43</span>              hmaurer </span><span>I was hoping to use such invariants to better understand what navigators can and can’t do</span></div><div id="t1504367936000019" t="2017-09-02 15:58:56 hmaurer But this discussion was very helpful  🙂"><a href="#t1504367936000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:58:56</span>              hmaurer </span><span>But this discussion was very helpful </span><b>🙂</b></div><div id="t1504367957000067" t="2017-09-02 15:59:17 nathanmarz you could try reading the source code of navigators in specter"><a href="#t1504367957000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:59:17</span>           nathanmarz </span><span>you could try reading the source code of navigators in specter</span></div><div id="t1504367964000036" t="2017-09-02 15:59:24 nathanmarz view  is one of the simplest"><a href="#t1504367964000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">15:59:24</span>           nathanmarz </span><code>view</code><span> is one of the simplest</span></div><div id="t1504368127000005" t="2017-09-02 16:02:07 nathanmarz navigators are just functions, so they have all the power a function has"><a href="#t1504368127000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:02:07</span>           nathanmarz </span><span>navigators are just functions, so they have all the power a function has</span></div><div id="t1504368209000044" t="2017-09-02 16:03:29 hmaurer @nathanmarz of course, but I assume that if I want other people to be able to use the navigators I write they should follow some expected behaviours"><a href="#t1504368209000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:03:29</span>              hmaurer </span><span>@nathanmarz of course, but I assume that if I want other people to be able to use the navigators I write they should follow some expected behaviours</span></div><div id="t1504368228000103" t="2017-09-02 16:03:48 hmaurer so as not to force them to completely swap their mental model around on every new navigator they encounter"><a href="#t1504368228000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:03:48</span>              hmaurer </span><span>so as not to force them to completely swap their mental model around on every new navigator they encounter</span></div><div id="t1504368243000003" t="2017-09-02 16:04:03 hmaurer I might be overthinking the issue though; I’ll dig into the source-code!"><a href="#t1504368243000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:04:03</span>              hmaurer </span><span>I might be overthinking the issue though; I’ll dig into the source-code!</span></div><div id="t1504368397000040" t="2017-09-02 16:06:37 nathanmarz the only types of navigators I&apos;ve encountered are &quot;subvalue&quot; (e.g. keypath, nthpath, META, ALL), &quot;substructure&quot; (e.g. srange, submap, subset), &quot;filter&quot; (e.g. pred, selected?), and &quot;view&quot; (e.g. view, nil-&gt;val, transformed)"><a href="#t1504368397000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:06:37</span>           nathanmarz </span><span>the only types of navigators I&apos;ve encountered are &quot;subvalue&quot; (e.g. keypath, nthpath, META, ALL), &quot;substructure&quot; (e.g. srange, submap, subset), &quot;filter&quot; (e.g. pred, selected?), and &quot;view&quot; (e.g. view, nil-&gt;val, transformed)</span></div><div id="t1504368425000034" t="2017-09-02 16:07:05 nathanmarz index-nav  is an interesting example of a &quot;subvalue&quot; navigator because it navigates you to an implicit value"><a href="#t1504368425000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:07:05</span>           nathanmarz </span><code>index-nav</code><span> is an interesting example of a &quot;subvalue&quot; navigator because it navigates you to an implicit value</span></div><div id="t1504368854000070" t="2017-09-02 16:14:14 hmaurer @nathanmarz oh that’s interesting indeed. The doc on  index-nav  is missing from the wiki by the way"><a href="#t1504368854000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:14:14</span>              hmaurer </span><span>@nathanmarz oh that’s interesting indeed. The doc on </span><code>index-nav</code><span> is missing from the wiki by the way</span></div><div id="t1504368860000024" t="2017-09-02 16:14:20 hmaurer Quick question: what is a “rich nav”?"><a href="#t1504368860000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:14:20</span>              hmaurer </span><span>Quick question: what is a “rich nav”?</span></div><div id="t1504369620000016" t="2017-09-02 16:27:00 nathanmarz @hmaurer yea the wiki is not up to date"><a href="#t1504369620000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:27:00</span>           nathanmarz </span><span>@hmaurer yea the wiki is not up to date</span></div><div id="t1504369632000063" t="2017-09-02 16:27:12 nathanmarz the API docs are the most up to date, but the wiki has more examples"><a href="#t1504369632000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:27:12</span>           nathanmarz </span><span>the API docs are the most up to date, but the wiki has more examples</span></div><div id="t1504369652000130" t="2017-09-02 16:27:32 nathanmarz richnav  exposes the full navigator interface when defining navigators"><a href="#t1504369652000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:27:32</span>           nathanmarz </span><code>richnav</code><span> exposes the full navigator interface when defining navigators</span></div><div id="t1504369672000025" t="2017-09-02 16:27:52 nathanmarz https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3"><a href="#t1504369672000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:27:52</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3</a></div><div id="t1504369691000029" t="2017-09-02 16:28:11 nathanmarz many navigators use  defrichnav  purely as an optimization"><a href="#t1504369691000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:28:11</span>           nathanmarz </span><span>many navigators use </span><code>defrichnav</code><span> purely as an optimization</span></div><div id="t1504369731000130" t="2017-09-02 16:28:51 nathanmarz defnav  wraps  next-fn  and puts  vals  in closure to pass along when it&apos;s called"><a href="#t1504369731000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:28:51</span>           nathanmarz </span><code>defnav</code><span> wraps </span><code>next-fn</code><span> and puts </span><code>vals</code><span> in closure to pass along when it&apos;s called</span></div><div id="t1504369750000018" t="2017-09-02 16:29:10 nathanmarz with  defrichnav  you can avoid all that allocation/indirection by passing the  vals  yourself"><a href="#t1504369750000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:29:10</span>           nathanmarz </span><span>with </span><code>defrichnav</code><span> you can avoid all that allocation/indirection by passing the </span><code>vals</code><span> yourself</span></div><div id="t1504369776000084" t="2017-09-02 16:29:36 nathanmarz unfortunately clojure doesn&apos;t optimize this case with inlining and neither does the JVM"><a href="#t1504369776000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:29:36</span>           nathanmarz </span><span>unfortunately clojure doesn&apos;t optimize this case with inlining and neither does the JVM</span></div><div id="t1504369790000026" t="2017-09-02 16:29:50 nathanmarz although in theory a compiler could do it"><a href="#t1504369790000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:29:50</span>           nathanmarz </span><span>although in theory a compiler could do it</span></div><div id="t1504369842000055" t="2017-09-02 16:30:42 nathanmarz so I do it manually for some cases where that optimization makes a difference – basically I try to do it wherever the navigation itself is very cheap so extra overhead will have noticeable performance impact"><a href="#t1504369842000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:30:42</span>           nathanmarz </span><span>so I do it manually for some cases where that optimization makes a difference – basically I try to do it wherever the navigation itself is very cheap so extra overhead will have noticeable performance impact</span></div><div id="t1504369891000127" t="2017-09-02 16:31:31 nathanmarz btw  vals  in that interface refers to &quot;collected vals&quot; collected with  VAL ,  collect , and  collect-one"><a href="#t1504369891000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-02</span> <span class="t" onclick="H(this)">16:31:31</span>           nathanmarz </span><span>btw </span><code>vals</code><span> in that interface refers to &quot;collected vals&quot; collected with </span><code>VAL</code><span>, </span><code>collect</code><span>, and </span><code>collect-one</code></div><div id="t1504648456000197" t="2017-09-05 21:54:16 dadair How does Spectre compare in performance for recursively (and exhaustively) walking large trees (e.g., against  clojure.walk/prewalk )? Looked at posted benchmarks but didn&apos;t see any for walking trees"><a href="#t1504648456000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">21:54:16</span>               dadair </span><span>How does Spectre compare in performance for recursively (and exhaustively) walking large trees (e.g., against </span><code>clojure.walk/prewalk</code><span>)? Looked at posted benchmarks but didn&apos;t see any for walking trees</span></div><div id="t1504649372000241" t="2017-09-05 22:09:32 nathanmarz @dadair specter destroys the performance of anything in vanilla clojure for anything involving compound or recursive data structures"><a href="#t1504649372000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:09:32</span>           nathanmarz </span><span>@dadair specter destroys the performance of anything in vanilla clojure for anything involving compound or recursive data structures</span></div><div id="t1504649399000209" t="2017-09-05 22:09:59 nathanmarz clojure.walk  is a very brute force approach forcing you to traverse parts of data structures you don&apos;t care about (like map keys, key/value pairs)"><a href="#t1504649399000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:09:59</span>           nathanmarz </span><code>clojure.walk</code><span> is a very brute force approach forcing you to traverse parts of data structures you don&apos;t care about (like map keys, key/value pairs)</span></div><div id="t1504649429000089" t="2017-09-05 22:10:29 nathanmarz with specter you can make traversals that perform dramatically better"><a href="#t1504649429000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:10:29</span>           nathanmarz </span><span>with specter you can make traversals that perform dramatically better</span></div><div id="t1504649453000076" t="2017-09-05 22:10:53 nathanmarz even just in replicating  clojure.walk/postwalk  semantics specter is 40% better
 Benchmark: walker vs. clojure.walk version (150000 iterations)

Avg(ms)		vs best		Code
959.39 		 1.00 		 (transform (walker number?) inc data)
1347.1 		 1.40 		 (transform (walker-old number?) inc data)
"><a href="#t1504649453000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:10:53</span>           nathanmarz </span><span>even just in replicating </span><code>clojure.walk/postwalk</code><span> semantics specter is 40% better
</span><pre>Benchmark: walker vs. clojure.walk version (150000 iterations)

Avg(ms)		vs best		Code
959.39 		 1.00 		 (transform (walker number?) inc data)
1347.1 		 1.40 		 (transform (walker-old number?) inc data)
</pre></div><div id="t1504649537000384" t="2017-09-05 22:12:17 nathanmarz the implementation of  walker  is instructive for making your own recursive paths
 (def
  ^{:doc &quot;Navigate the data structure until reaching
          a value for which `afn` returns truthy. Has
          same semantics as clojure.walk.&quot;}
  walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               coll? [ALL p]
               )))
"><a href="#t1504649537000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:12:17</span>           nathanmarz </span><span>the implementation of </span><code>walker</code><span> is instructive for making your own recursive paths
</span><pre>(def
  ^{:doc &quot;Navigate the data structure until reaching
          a value for which `afn` returns truthy. Has
          same semantics as clojure.walk.&quot;}
  walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               coll? [ALL p]
               )))
</pre></div><div id="t1504649677000085" t="2017-09-05 22:14:37 dadair awesome, I&apos;ll take a look at spectre. I have a prewalk running in ~28ms that I need to cut down as much as possible"><a href="#t1504649677000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-05</span> <span class="t" onclick="H(this)">22:14:37</span>               dadair </span><span>awesome, I&apos;ll take a look at spectre. I have a prewalk running in ~28ms that I need to cut down as much as possible</span></div><div id="t1504723967000197" t="2017-09-06 18:52:47 dadair Hi again! Just trying to grasp navigation and collection a bit better. Let&apos;s say I have a recursive structure like so:
 {:root {:name &quot;/&quot;
           :children {:a {:name &quot;a&quot; :children {&lt;recursive&gt;}}
                            :b {:name &quot;b&quot; :children {&lt;recursive&gt;}}}}}
 
I&apos;d like to augment each &quot;node&quot; with the direct path to take to that node:
 {:root {:name &quot;/&quot;
           :ref [:root]
           :children {:a {:name &quot;a&quot; :ref [:root :children :a] :children {&lt;recursive&gt;}}
                            :b {:name &quot;b&quot; :ref [:root :children :b] :children {&lt;recursive&gt;}}}}}
 
How would this work with mixing  recursive-path  and  collect ?"><a href="#t1504723967000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">18:52:47</span>               dadair </span><span>Hi again! Just trying to grasp navigation and collection a bit better. Let&apos;s say I have a recursive structure like so:
</span><pre>{:root {:name &quot;/&quot;
           :children {:a {:name &quot;a&quot; :children {&lt;recursive&gt;}}
                            :b {:name &quot;b&quot; :children {&lt;recursive&gt;}}}}}
</pre><span>
I&apos;d like to augment each &quot;node&quot; with the direct path to take to that node:
</span><pre>{:root {:name &quot;/&quot;
           :ref [:root]
           :children {:a {:name &quot;a&quot; :ref [:root :children :a] :children {&lt;recursive&gt;}}
                            :b {:name &quot;b&quot; :ref [:root :children :b] :children {&lt;recursive&gt;}}}}}
</pre><span>
How would this work with mixing </span><code>recursive-path</code><span> and </span><code>collect</code><span>?</span></div><div id="t1504727287000624" t="2017-09-06 19:48:07 nathanmarz @dadair you can do that example like this:
 (def data
 {:root {:name &quot;/&quot;
         :children {:a {:name &quot;a&quot;}
                    :b {:name &quot;b&quot;}}}})


(def nodes-with-path
  (recursive-path [] p
    (continue-then-stay
      (putval :children)
      (must :children)
      ALL
      (collect-one FIRST)
      LAST
      p)))

(transform [(putval :root) :root nodes-with-path :ref] (fn [&amp; args] (butlast args)) data)
"><a href="#t1504727287000624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">19:48:07</span>           nathanmarz </span><span>@dadair you can do that example like this:
</span><pre>(def data
 {:root {:name &quot;/&quot;
         :children {:a {:name &quot;a&quot;}
                    :b {:name &quot;b&quot;}}}})


(def nodes-with-path
  (recursive-path [] p
    (continue-then-stay
      (putval :children)
      (must :children)
      ALL
      (collect-one FIRST)
      LAST
      p)))

(transform [(putval :root) :root nodes-with-path :ref] (fn [&amp; args] (butlast args)) data)
</pre></div><div id="t1504727357000431" t="2017-09-06 19:49:17 hmaurer @nathanmarz that’s very cool"><a href="#t1504727357000431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">19:49:17</span>              hmaurer </span><span>@nathanmarz that’s very cool</span></div><div id="t1504727360000362" t="2017-09-06 19:49:20 hmaurer 😱"><a href="#t1504727360000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">19:49:20</span>              hmaurer </span><b>😱</b></div><div id="t1504727588000184" t="2017-09-06 19:53:08 hmaurer @nathanmarz completely uninformed question: are there similarities between Specter and Gremlin?"><a href="#t1504727588000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">19:53:08</span>              hmaurer </span><span>@nathanmarz completely uninformed question: are there similarities between Specter and Gremlin?</span></div><div id="t1504727600000055" t="2017-09-06 19:53:20 hmaurer (even though their intended use-cases are quite different)"><a href="#t1504727600000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">19:53:20</span>              hmaurer </span><span>(even though their intended use-cases are quite different)</span></div><div id="t1504729408000672" t="2017-09-06 20:23:28 nathanmarz @hmaurer I&apos;m not very familiar with Gremlin"><a href="#t1504729408000672" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">20:23:28</span>           nathanmarz </span><span>@hmaurer I&apos;m not very familiar with Gremlin</span></div><div id="t1504729490000031" t="2017-09-06 20:24:50 dadair thanks @nathanmarz that helps!"><a href="#t1504729490000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-06</span> <span class="t" onclick="H(this)">20:24:50</span>               dadair </span><span>thanks @nathanmarz that helps!</span></div><div id="t1504817863000060" t="2017-09-07 20:57:43 dadair Would compiling recursive paths give any benefit? I&apos;ve tried a  compiled-transform  with  comp-paths  for the above path vector and don&apos;t see any performance benefits (using criterium to get means)"><a href="#t1504817863000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">20:57:43</span>               dadair </span><span>Would compiling recursive paths give any benefit? I&apos;ve tried a </span><code>compiled-transform</code><span> with </span><code>comp-paths</code><span> for the above path vector and don&apos;t see any performance benefits (using criterium to get means)</span></div><div id="t1504820737000321" t="2017-09-07 21:45:37 nathanmarz @dadair no that&apos;s not necessary anymore"><a href="#t1504820737000321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:45:37</span>           nathanmarz </span><span>@dadair no that&apos;s not necessary anymore</span></div><div id="t1504820744000369" t="2017-09-07 21:45:44 nathanmarz since 0.11.0 specter does inline compilation/caching"><a href="#t1504820744000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:45:44</span>           nathanmarz </span><span>since 0.11.0 specter does inline compilation/caching</span></div><div id="t1504820814000307" t="2017-09-07 21:46:54 nathanmarz feel free to paste your path if you&apos;d like tips on performance"><a href="#t1504820814000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:46:54</span>           nathanmarz </span><span>feel free to paste your path if you&apos;d like tips on performance</span></div><div id="t1504820894000052" t="2017-09-07 21:48:14 dadair it&apos;s the exact path you provided in the code block above. It&apos;s improved my app performance quite substantially already, I was just curious of compilation would make it faster as I know the path beforehand"><a href="#t1504820894000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:48:14</span>               dadair </span><span>it&apos;s the exact path you provided in the code block above. It&apos;s improved my app performance quite substantially already, I was just curious of compilation would make it faster as I know the path beforehand</span></div><div id="t1504820923000227" t="2017-09-07 21:48:43 nathanmarz ah"><a href="#t1504820923000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:48:43</span>           nathanmarz </span><span>ah</span></div><div id="t1504820929000428" t="2017-09-07 21:48:49 nathanmarz yea that path&apos;s performance could be improved"><a href="#t1504820929000428" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:48:49</span>           nathanmarz </span><span>yea that path&apos;s performance could be improved</span></div><div id="t1504821022000217" t="2017-09-07 21:50:22 nathanmarz or rather that transform"><a href="#t1504821022000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:50:22</span>           nathanmarz </span><span>or rather that transform</span></div><div id="t1504821031000124" t="2017-09-07 21:50:31 nathanmarz (def terminal2
  (richnav [afn]
    (select* [this vals structure next-fn]
      (i/throw-illegal &quot;&apos;terminal2&apos; should only be used in multi-transform&quot;))
    (transform* [this vals structure next-fn]
      (afn vals structure))))
"><a href="#t1504821031000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:50:31</span>           nathanmarz </span><pre>(def terminal2
  (richnav [afn]
    (select* [this vals structure next-fn]
      (i/throw-illegal &quot;&apos;terminal2&apos; should only be used in multi-transform&quot;))
    (transform* [this vals structure next-fn]
      (afn vals structure))))
</pre></div><div id="t1504821067000375" t="2017-09-07 21:51:07 nathanmarz (multi-transform [(putval :root) :root nodes-with-path :ref (terminal2 (fn [vals _] vals))] data)"><a href="#t1504821067000375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:51:07</span>           nathanmarz </span><code>(multi-transform [(putval :root) :root nodes-with-path :ref (terminal2 (fn [vals _] vals))] data)</code></div><div id="t1504821077000445" t="2017-09-07 21:51:17 nathanmarz try that"><a href="#t1504821077000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:51:17</span>           nathanmarz </span><span>try that</span></div><div id="t1504821134000132" t="2017-09-07 21:52:14 nathanmarz avoids the  apply  on the transform-fn and the  butlast  call"><a href="#t1504821134000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:52:14</span>           nathanmarz </span><span>avoids the </span><code>apply</code><span> on the transform-fn and the </span><code>butlast</code><span> call</span></div><div id="t1504821223000258" t="2017-09-07 21:53:43 dadair is terminal2 on  1.0.3 ?"><a href="#t1504821223000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:53:43</span>               dadair </span><span>is terminal2 on </span><code>1.0.3</code><span>?</span></div><div id="t1504821234000258" t="2017-09-07 21:53:54 nathanmarz no"><a href="#t1504821234000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:53:54</span>           nathanmarz </span><span>no</span></div><div id="t1504821244000221" t="2017-09-07 21:54:04 nathanmarz I should probably add something like that into a future version"><a href="#t1504821244000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:54:04</span>           nathanmarz </span><span>I should probably add something like that into a future version</span></div><div id="t1504821276000218" t="2017-09-07 21:54:36 nathanmarz that&apos;s a variant of  terminal  which is in specter"><a href="#t1504821276000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:54:36</span>           nathanmarz </span><span>that&apos;s a variant of </span><code>terminal</code><span> which is in specter</span></div><div id="t1504821472000290" t="2017-09-07 21:57:52 dadair yeah that improved it quite a bit again:  prewalk: 27ms, transform: 5.4ms, multi-transform: 1.3ms"><a href="#t1504821472000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:57:52</span>               dadair </span><span>yeah that improved it quite a bit again: </span><code>prewalk: 27ms, transform: 5.4ms, multi-transform: 1.3ms</code></div><div id="t1504821479000308" t="2017-09-07 21:57:59 dadair this is awesome thank you"><a href="#t1504821479000308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:57:59</span>               dadair </span><span>this is awesome thank you</span></div><div id="t1504821486000283" t="2017-09-07 21:58:06 nathanmarz very nice"><a href="#t1504821486000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:58:06</span>           nathanmarz </span><span>very nice</span></div><div id="t1504821492000229" t="2017-09-07 21:58:12 nathanmarz that&apos;s probably close to optimal"><a href="#t1504821492000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:58:12</span>           nathanmarz </span><span>that&apos;s probably close to optimal</span></div><div id="t1504821548000082" t="2017-09-07 21:59:08 dadair I&apos;ve also replaced a  tree-seq &gt; group-by &gt; get  pipeline with:
 (def nodes-without-path
  (sp/recursive-path [] p
                     (sp/continue-then-stay
                      (sp/must :children)
                      sp/ALL
                      sp/LAST
                      p)))

(defn find-vals [root type]
  (sp/select [:root nodes-without-path (fn [x] (= type (-&gt; x :descriptor :type)))] root))
 
any performance tips there?"><a href="#t1504821548000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">21:59:08</span>               dadair </span><span>I&apos;ve also replaced a </span><code>tree-seq &gt; group-by &gt; get</code><span> pipeline with:
</span><pre>(def nodes-without-path
  (sp/recursive-path [] p
                     (sp/continue-then-stay
                      (sp/must :children)
                      sp/ALL
                      sp/LAST
                      p)))

(defn find-vals [root type]
  (sp/select [:root nodes-without-path (fn [x] (= type (-&gt; x :descriptor :type)))] root))
</pre><span>
any performance tips there?</span></div><div id="t1504821610000424" t="2017-09-07 22:00:10 nathanmarz no, that seems good"><a href="#t1504821610000424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:00:10</span>           nathanmarz </span><span>no, that seems good</span></div><div id="t1504821632000231" t="2017-09-07 22:00:32 dadair also, when the predicate matches, that node will be a leaf, if that adds some performance considerations"><a href="#t1504821632000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:00:32</span>               dadair </span><span>also, when the predicate matches, that node will be a leaf, if that adds some performance considerations</span></div><div id="t1504821684000400" t="2017-09-07 22:01:24 nathanmarz oh, you can replace  ALL LAST  with  MAP-VALS"><a href="#t1504821684000400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:01:24</span>           nathanmarz </span><span>oh, you can replace </span><code>ALL LAST</code><span> with </span><code>MAP-VALS</code></div><div id="t1504821690000317" t="2017-09-07 22:01:30 nathanmarz that will be a big performance boost"><a href="#t1504821690000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:01:30</span>           nathanmarz </span><span>that will be a big performance boost</span></div><div id="t1504821860000111" t="2017-09-07 22:04:20 nathanmarz as for the last property you said, you should be able to change the path to reflect that"><a href="#t1504821860000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:04:20</span>           nathanmarz </span><span>as for the last property you said, you should be able to change the path to reflect that</span></div><div id="t1504821879000339" t="2017-09-07 22:04:39 nathanmarz basically to only navigate to leaves, not to every intermediate node"><a href="#t1504821879000339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:04:39</span>           nathanmarz </span><span>basically to only navigate to leaves, not to every intermediate node</span></div><div id="t1504821907000167" t="2017-09-07 22:05:07 nathanmarz depends on how you detect a leaf"><a href="#t1504821907000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:05:07</span>           nathanmarz </span><span>depends on how you detect a leaf</span></div><div id="t1504821922000141" t="2017-09-07 22:05:22 nathanmarz non-existence of  :children  key, or just  :children  key with empty map?"><a href="#t1504821922000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:05:22</span>           nathanmarz </span><span>non-existence of </span><code>:children</code><span> key, or just </span><code>:children</code><span> key with empty map?</span></div><div id="t1504822058000028" t="2017-09-07 22:07:38 dadair I was going to say  :children  with empty map but that&apos;s not necessarily true actually, it&apos;s more that certain nodes have  types   (-&gt; node :descriptor :type)  that reflect leaf &quot;value&quot; nodes, but internally they may have  :children  for sub-values"><a href="#t1504822058000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:07:38</span>               dadair </span><span>I was going to say </span><code>:children</code><span> with empty map but that&apos;s not necessarily true actually, it&apos;s more that certain nodes have </span><code>types</code><span> </span><code>(-&gt; node :descriptor :type)</code><span> that reflect leaf &quot;value&quot; nodes, but internally they may have </span><code>:children</code><span> for sub-values</span></div><div id="t1504822077000168" t="2017-09-07 22:07:57 dadair I could check if the type is in a known set of types"><a href="#t1504822077000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:07:57</span>               dadair </span><span>I could check if the type is in a known set of types</span></div><div id="t1504822092000238" t="2017-09-07 22:08:12 nathanmarz it would look like:"><a href="#t1504822092000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:08:12</span>           nathanmarz </span><span>it would look like:</span></div><div id="t1504822096000084" t="2017-09-07 22:08:16 nathanmarz (def leaf-nodes
  (recursive-path [] p
    (if-path leaf-node?
      STAY
      [:children MAP-VALS p]
      )))
"><a href="#t1504822096000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:08:16</span>           nathanmarz </span><pre>(def leaf-nodes
  (recursive-path [] p
    (if-path leaf-node?
      STAY
      [:children MAP-VALS p]
      )))
</pre></div><div id="t1504822102000122" t="2017-09-07 22:08:22 nathanmarz just fill in  leaf-node?"><a href="#t1504822102000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:08:22</span>           nathanmarz </span><span>just fill in </span><code>leaf-node?</code></div><div id="t1504822354000153" t="2017-09-07 22:12:34 dadair Great I&apos;ll give that a try, thanks! Specter is awesome, thanks for open sourcing it!"><a href="#t1504822354000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-07</span> <span class="t" onclick="H(this)">22:12:34</span>               dadair </span><span>Great I&apos;ll give that a try, thanks! Specter is awesome, thanks for open sourcing it!</span></div><div id="t1505039986000051" t="2017-09-10 10:39:46 andrea.crotti I am trying to go recursively through a hiccup data structure"><a href="#t1505039986000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:39:46</span>        andrea.crotti </span><span>I am trying to go recursively through a hiccup data structure</span></div><div id="t1505040008000034" t="2017-09-10 10:40:08 andrea.crotti something like this
 (def nested
  [:div {:id &quot;hello&quot;}
   [:a {:href &quot;&quot;} :welcome]])
"><a href="#t1505040008000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:40:08</span>        andrea.crotti </span><span>something like this
</span><pre>(def nested
  [:div {:id &quot;hello&quot;}
   [:a {:href &quot;&quot;} :welcome]])
</pre></div><div id="t1505040035000045" t="2017-09-10 10:40:35 andrea.crotti and simply replace automaticaly (using the tongue library) every known symbol with its translation"><a href="#t1505040035000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:40:35</span>        andrea.crotti </span><span>and simply replace automaticaly (using the tongue library) every known symbol with its translation</span></div><div id="t1505040081000024" t="2017-09-10 10:41:21 andrea.crotti so given this dictionary
 (def dicts
  &quot;List of all the words/sentences that need localization&quot;
  {:en {:welcome &quot;Welcome&quot;}
   :it {:welcome &quot;Benvenuto&quot;}})

"><a href="#t1505040081000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:41:21</span>        andrea.crotti </span><span>so given this dictionary
</span><pre>(def dicts
  &quot;List of all the words/sentences that need localization&quot;
  {:en {:welcome &quot;Welcome&quot;}
   :it {:welcome &quot;Benvenuto&quot;}})

</pre></div><div id="t1505040091000026" t="2017-09-10 10:41:31 andrea.crotti I just tried this first
 (s/transform
 [s/ALL]
 #(do
    (print %)
    (if (contains? dicts %)
      (translate :en %)
      %))
 nested)
"><a href="#t1505040091000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:41:31</span>        andrea.crotti </span><span>I just tried this first
</span><pre>(s/transform
 [s/ALL]
 #(do
    (print %)
    (if (contains? dicts %)
      (translate :en %)
      %))
 nested)
</pre></div><div id="t1505040134000001" t="2017-09-10 10:42:14 andrea.crotti but it doesn&apos;t actually check :welcome, I also tried to follow the recursive example in the docs
 (s/transform
 (s/subselect TreeValues)
 #(do
    (print %)
    (if (contains? dicts %)
      (translate :en %)
      %))
 nested)
"><a href="#t1505040134000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:42:14</span>        andrea.crotti </span><span>but it doesn&apos;t actually check :welcome, I also tried to follow the recursive example in the docs
</span><pre>(s/transform
 (s/subselect TreeValues)
 #(do
    (print %)
    (if (contains? dicts %)
      (translate :en %)
      %))
 nested)
</pre></div><div id="t1505040140000026" t="2017-09-10 10:42:20 andrea.crotti but it looks like it&apos;s the same thing"><a href="#t1505040140000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:42:20</span>        andrea.crotti </span><span>but it looks like it&apos;s the same thing</span></div><div id="t1505040152000023" t="2017-09-10 10:42:32 andrea.crotti is it actually possible to do this somehow?"><a href="#t1505040152000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">10:42:32</span>        andrea.crotti </span><span>is it actually possible to do this somehow?</span></div><div id="t1505042222000031" t="2017-09-10 11:17:02 nathanmarz @andrea.crotti yes, that&apos;s easy"><a href="#t1505042222000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:17:02</span>           nathanmarz </span><span>@andrea.crotti yes, that&apos;s easy</span></div><div id="t1505042263000052" t="2017-09-10 11:17:43 nathanmarz where can the target keywords reside? only map values or also in arbitrary vector values or map keys?"><a href="#t1505042263000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:17:43</span>           nathanmarz </span><span>where can the target keywords reside? only map values or also in arbitrary vector values or map keys?</span></div><div id="t1505042389000051" t="2017-09-10 11:19:49 andrea.crotti I think only in nested vectors "><a href="#t1505042389000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:19:49</span>        andrea.crotti </span><span>I think only in nested vectors </span></div><div id="t1505042452000054" t="2017-09-10 11:20:52 andrea.crotti Since it&apos;s html text really"><a href="#t1505042452000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:20:52</span>        andrea.crotti </span><span>Since it&apos;s html text really</span></div><div id="t1505042536000007" t="2017-09-10 11:22:16 nathanmarz (def TreeValues
  (recursive-path [] p
    (if-path vector?
      [ALL p]
      STAY
      )))

(def nested
  [:div {:id &quot;hello&quot;}
   [:a {:href &quot;&quot;} :welcome]])

(def dicts
  {:en {:welcome &quot;Welcome&quot;}
   :it {:welcome &quot;Benvenuto&quot;}})

(let [dict (:en dicts)]
  (transform [TreeValues #(contains? dict %)] dict nested))
"><a href="#t1505042536000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:22:16</span>           nathanmarz </span><pre>(def TreeValues
  (recursive-path [] p
    (if-path vector?
      [ALL p]
      STAY
      )))

(def nested
  [:div {:id &quot;hello&quot;}
   [:a {:href &quot;&quot;} :welcome]])

(def dicts
  {:en {:welcome &quot;Welcome&quot;}
   :it {:welcome &quot;Benvenuto&quot;}})

(let [dict (:en dicts)]
  (transform [TreeValues #(contains? dict %)] dict nested))
</pre></div><div id="t1505042556000053" t="2017-09-10 11:22:36 nathanmarz that&apos;s one way to do it"><a href="#t1505042556000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:22:36</span>           nathanmarz </span><span>that&apos;s one way to do it</span></div><div id="t1505042636000026" t="2017-09-10 11:23:56 nathanmarz you can make it more precise by making a recursive path that doesn&apos;t go to the first 2 elements of vectors, so that you don&apos;t inadvertently translate the node type if something like  :div  is used in the dictionary"><a href="#t1505042636000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">11:23:56</span>           nathanmarz </span><span>you can make it more precise by making a recursive path that doesn&apos;t go to the first 2 elements of vectors, so that you don&apos;t inadvertently translate the node type if something like </span><code>:div</code><span> is used in the dictionary</span></div><div id="t1505053022000045" t="2017-09-10 14:17:02 andrea.crotti Ah nice thanks I&apos;ll try it out"><a href="#t1505053022000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-10</span> <span class="t" onclick="H(this)">14:17:02</span>        andrea.crotti </span><span>Ah nice thanks I&apos;ll try it out</span></div><div id="t1505122980000127" t="2017-09-11 09:43:00 sandbags I&apos;m not grokking navigators for maps. I have a map like  {:a {:x {:y {:z ...}}} :b {:x {:y {:z ...}}} :c {:x {:y {:z ...}}}}  and I want to transform the value of  :z  for all keys in the map  :a ,  :b ,  :c  etc... but every permutation I try gets me something along the lines of  Error: Vector&apos;s key for assoc must be a number"><a href="#t1505122980000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">09:43:00</span>             sandbags </span><span>I&apos;m not grokking navigators for maps. I have a map like </span><code>{:a {:x {:y {:z ...}}} :b {:x {:y {:z ...}}} :c {:x {:y {:z ...}}}}</code><span> and I want to transform the value of </span><code>:z</code><span> for all keys in the map </span><code>:a</code><span>, </span><code>:b</code><span>, </span><code>:c</code><span> etc... but every permutation I try gets me something along the lines of </span><code>Error: Vector&apos;s key for assoc must be a number</code></div><div id="t1505123081000171" t="2017-09-11 09:44:41 sandbags i think the problem is about my root map being processed as a vector of key-pairs but i am finding it hard to understand what ids going on (it might help to understand that I do not visualise very well)"><a href="#t1505123081000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">09:44:41</span>             sandbags </span><span>i think the problem is about my root map being processed as a vector of key-pairs but i am finding it hard to understand what ids going on (it might help to understand that I do not visualise very well)</span></div><div id="t1505123123000310" t="2017-09-11 09:45:23 sandbags reaching in via a fixed keypath  [:a :x :y :z]  is okay, but how to put the  *  at the beginning..."><a href="#t1505123123000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">09:45:23</span>             sandbags </span><span>reaching in via a fixed keypath </span><code>[:a :x :y :z]</code><span> is okay, but how to put the </span><code>*</code><span> at the beginning...</span></div><div id="t1505131155000263" t="2017-09-11 11:59:15 sandbags hrmm... okay i&apos;m not sure what i am doing differently now to earlier but:"><a href="#t1505131155000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">11:59:15</span>             sandbags </span><span>hrmm... okay i&apos;m not sure what i am doing differently now to earlier but:</span></div><div id="t1505131171000002" t="2017-09-11 11:59:31 sandbags (nav/transform [nav/MAP-VALS :exits nav/ALL :available] #(not %) {:foo {:exits [{:to :bar :available true}]} :bar {:exits [{:to :foo :available false}]}})"><a href="#t1505131171000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">11:59:31</span>             sandbags </span><code>(nav/transform [nav/MAP-VALS :exits nav/ALL :available] #(not %) {:foo {:exits [{:to :bar :available true}]} :bar {:exits [{:to :foo :available false}]}})</code></div><div id="t1505131203000025" t="2017-09-11 12:00:03 sandbags works and is, structurally, my use case"><a href="#t1505131203000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:00:03</span>             sandbags </span><span>works and is, structurally, my use case</span></div><div id="t1505131623000402" t="2017-09-11 12:07:03 sandbags I will confess I am still feel quit uncertain about my use of these navigators"><a href="#t1505131623000402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:07:03</span>             sandbags </span><span>I will confess I am still feel quit uncertain about my use of these navigators</span></div><div id="t1505131733000108" t="2017-09-11 12:08:53 levitanong @sandbags this should work for the data structure you posted
 (transform [MAP-VALS :x :y :z] (fn [z] (* 2 z)) {:a {:x {:y {:z 2}}} :b {:x {:y {:z 3}}} :c {:x {:y {:z 4}}}}"><a href="#t1505131733000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:08:53</span>           levitanong </span><span>@sandbags this should work for the data structure you posted
</span><code>(transform [MAP-VALS :x :y :z] (fn [z] (* 2 z)) {:a {:x {:y {:z 2}}} :b {:x {:y {:z 3}}} :c {:x {:y {:z 4}}}}</code></div><div id="t1505131793000066" t="2017-09-11 12:09:53 sandbags @levitanong i may have been making some kind of transliteration mistake as that kind of approach didn&apos;t work when i tried it, but yes - thanks. And the example I posted about is my actual use case (structurally at least)"><a href="#t1505131793000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:09:53</span>             sandbags </span><span>@levitanong i may have been making some kind of transliteration mistake as that kind of approach didn&apos;t work when i tried it, but yes - thanks. And the example I posted about is my actual use case (structurally at least)</span></div><div id="t1505131870000147" t="2017-09-11 12:11:10 levitanong @sandbags Well I’m glad things are working for you now.  😁"><a href="#t1505131870000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:11:10</span>           levitanong </span><span>@sandbags Well I’m glad things are working for you now. </span><b>😁</b></div><div id="t1505131885000027" t="2017-09-11 12:11:25 sandbags yes, thanks for your help"><a href="#t1505131885000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:11:25</span>             sandbags </span><span>yes, thanks for your help</span></div><div id="t1505131909000435" t="2017-09-11 12:11:49 sandbags i think a key problem i have (I have something called Aphantasia) is I struggle to visualise what is going on in the navigators"><a href="#t1505131909000435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:11:49</span>             sandbags </span><span>i think a key problem i have (I have something called Aphantasia) is I struggle to visualise what is going on in the navigators</span></div><div id="t1505133074000181" t="2017-09-11 12:31:14 hmaurer @sandbags ah; sounds like there is room to develop a visualization app for navigators then!  🙂"><a href="#t1505133074000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:31:14</span>              hmaurer </span><span>@sandbags ah; sounds like there is room to develop a visualization app for navigators then! </span><b>🙂</b></div><div id="t1505133094000112" t="2017-09-11 12:31:34 sandbags or some kind of tutorial with some visualisations, yes"><a href="#t1505133094000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:31:34</span>             sandbags </span><span>or some kind of tutorial with some visualisations, yes</span></div><div id="t1505133103000449" t="2017-09-11 12:31:43 hmaurer yes, that’s what I meant"><a href="#t1505133103000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:31:43</span>              hmaurer </span><span>yes, that’s what I meant</span></div><div id="t1505133111000176" t="2017-09-11 12:31:51 hmaurer an interactive tutorial"><a href="#t1505133111000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:31:51</span>              hmaurer </span><span>an interactive tutorial</span></div><div id="t1505133591000370" t="2017-09-11 12:39:51 levitanong @hmaurer @sandbags Now there’s an idea.  🤔"><a href="#t1505133591000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:39:51</span>           levitanong </span><span>@hmaurer @sandbags Now there’s an idea. </span><b>🤔</b></div><div id="t1505133645000128" t="2017-09-11 12:40:45 hmaurer @levitanong something a bit like  http://rxmarbles.com/"><a href="#t1505133645000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:40:45</span>              hmaurer </span><span>@levitanong something a bit like </span><a href="http://rxmarbles.com/" target="_blank">http://rxmarbles.com/</a></div><div id="t1505133723000294" t="2017-09-11 12:42:03 michaelwfogleman I like  http://www.learndatalogtoday.org/  - not really visualizable but good for grokking a DSL"><a href="#t1505133723000294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:42:03</span>     michaelwfogleman </span><span>I like </span><a href="http://www.learndatalogtoday.org/" target="_blank">http://www.learndatalogtoday.org/</a><span> - not really visualizable but good for grokking a DSL</span></div><div id="t1505134301000234" t="2017-09-11 12:51:41 nathanmarz @sandbags I&apos;d never heard of aphantasia before, reading about it just blew my mind"><a href="#t1505134301000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:51:41</span>           nathanmarz </span><span>@sandbags I&apos;d never heard of aphantasia before, reading about it just blew my mind</span></div><div id="t1505134336000364" t="2017-09-11 12:52:16 nathanmarz had no idea that was something that could differ between people"><a href="#t1505134336000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:52:16</span>           nathanmarz </span><span>had no idea that was something that could differ between people</span></div><div id="t1505134364000264" t="2017-09-11 12:52:44 nathanmarz a visualization is a good idea, I put some thoughts here  https://github.com/nathanmarz/specter/issues/56#issuecomment-328519037"><a href="#t1505134364000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:52:44</span>           nathanmarz </span><span>a visualization is a good idea, I put some thoughts here </span><a href="https://github.com/nathanmarz/specter/issues/56#issuecomment-328519037" target="_blank">https://github.com/nathanmarz/specter/issues/56#issuecomment-328519037</a></div><div id="t1505134397000056" t="2017-09-11 12:53:17 nathanmarz do you think that  visualize-path  command would be helpful?"><a href="#t1505134397000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:53:17</span>           nathanmarz </span><span>do you think that </span><code>visualize-path</code><span> command would be helpful?</span></div><div id="t1505134703000234" t="2017-09-11 12:58:23 michaelwfogleman @nathanmarz Yes!"><a href="#t1505134703000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:58:23</span>     michaelwfogleman </span><span>@nathanmarz Yes!</span></div><div id="t1505134721000053" t="2017-09-11 12:58:41 michaelwfogleman (Even for those of us without aphantasia)  🙂"><a href="#t1505134721000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:58:41</span>     michaelwfogleman </span><span>(Even for those of us without aphantasia) </span><b>🙂</b></div><div id="t1505134736000253" t="2017-09-11 12:58:56 michaelwfogleman Hadn&apos;t seen that issue, subscribing in case I can help..."><a href="#t1505134736000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:58:56</span>     michaelwfogleman </span><span>Hadn&apos;t seen that issue, subscribing in case I can help...</span></div><div id="t1505134790000056" t="2017-09-11 12:59:50 nathanmarz comments and ideas are welcome on that issue"><a href="#t1505134790000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">12:59:50</span>           nathanmarz </span><span>comments and ideas are welcome on that issue</span></div><div id="t1505134812000395" t="2017-09-11 13:00:12 nathanmarz and contributions, of course"><a href="#t1505134812000395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:00:12</span>           nathanmarz </span><span>and contributions, of course</span></div><div id="t1505134837000497" t="2017-09-11 13:00:37 nathanmarz the specter wiki is in its own repository if anyone wants to contribute  https://github.com/nathanmarz/specter-wiki"><a href="#t1505134837000497" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:00:37</span>           nathanmarz </span><span>the specter wiki is in its own repository if anyone wants to contribute </span><a href="https://github.com/nathanmarz/specter-wiki" target="_blank">https://github.com/nathanmarz/specter-wiki</a></div><div id="t1505134883000521" t="2017-09-11 13:01:23 hmaurer I’ll try to tackle this when I have some time. It could be an interesting opportunity to write an interactive doc"><a href="#t1505134883000521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:01:23</span>              hmaurer </span><span>I’ll try to tackle this when I have some time. It could be an interesting opportunity to write an interactive doc</span></div><div id="t1505134903000520" t="2017-09-11 13:01:43 hmaurer good project to get my hands on ClojureScript  🙂"><a href="#t1505134903000520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:01:43</span>              hmaurer </span><span>good project to get my hands on ClojureScript </span><b>🙂</b></div><div id="t1505134929000546" t="2017-09-11 13:02:09 michaelwfogleman @nathanmarz Do you know off the top of your head which functions / macros etc. aren&apos;t documented or need more explanation? I&apos;m happy to write explanations for the ones I understand."><a href="#t1505134929000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:02:09</span>     michaelwfogleman </span><span>@nathanmarz Do you know off the top of your head which functions / macros etc. aren&apos;t documented or need more explanation? I&apos;m happy to write explanations for the ones I understand.</span></div><div id="t1505135085000042" t="2017-09-11 13:04:45 nathanmarz looks like almost everything added since 0.13.0"><a href="#t1505135085000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:04:45</span>           nathanmarz </span><span>looks like almost everything added since 0.13.0</span></div><div id="t1505135092000030" t="2017-09-11 13:04:52 nathanmarz https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1505135092000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:04:52</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1505135205000505" t="2017-09-11 13:06:45 nathanmarz nthpath ,  MAP-KEYS ,  BEFORE-ELEM ,  AFTER-ELEM ,  NONE-ELEM ,  NAME ,  NAMESPACE ,  map-key ,  set-elem ,  before-index ,  index-nav ,  INDEXED-VALS"><a href="#t1505135205000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:06:45</span>           nathanmarz </span><code>nthpath</code><span>, </span><code>MAP-KEYS</code><span>, </span><code>BEFORE-ELEM</code><span>, </span><code>AFTER-ELEM</code><span>, </span><code>NONE-ELEM</code><span>, </span><code>NAME</code><span>, </span><code>NAMESPACE</code><span>, </span><code>map-key</code><span>, </span><code>set-elem</code><span>, </span><code>before-index</code><span>, </span><code>index-nav</code><span>, </span><code>INDEXED-VALS</code></div><div id="t1505135248000237" t="2017-09-11 13:07:28 nathanmarz plus  eachnav , the improvements to  keypath /`must`, and the extension of many navigators to work with strings"><a href="#t1505135248000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">13:07:28</span>           nathanmarz </span><span>plus </span><code>eachnav</code><span>, the improvements to </span><code>keypath</code><span>/`must`, and the extension of many navigators to work with strings</span></div><div id="t1505139003000771" t="2017-09-11 14:10:03 michaelwfogleman @nathanmarz Can you give an example of transforming with INDEXED-VALS?"><a href="#t1505139003000771" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">14:10:03</span>     michaelwfogleman </span><span>@nathanmarz Can you give an example of transforming with INDEXED-VALS?</span></div><div id="t1505140069000421" t="2017-09-11 14:27:49 nathanmarz @michaelwfogleman there&apos;s some examples in the tests  https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1620"><a href="#t1505140069000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">14:27:49</span>           nathanmarz </span><span>@michaelwfogleman there&apos;s some examples in the tests </span><a href="https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1620" target="_blank">https://github.com/nathanmarz/specter/blob/master/test/com/rpl/specter/core_test.cljc#L1620</a></div><div id="t1505145493000375" t="2017-09-11 15:58:13 michaelwfogleman @nathanmarz About to push a big pull request for the wiki, did almost everything you listed save for eachnav and the improvement to keypath/must, but also did pred= and co, and traversed"><a href="#t1505145493000375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">15:58:13</span>     michaelwfogleman </span><span>@nathanmarz About to push a big pull request for the wiki, did almost everything you listed save for eachnav and the improvement to keypath/must, but also did pred= and co, and traversed</span></div><div id="t1505149342000464" t="2017-09-11 17:02:22 hmaurer that was fast"><a href="#t1505149342000464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">17:02:22</span>                   hmaurer </span><span>that was fast</span></div><div id="t1505154296000524" t="2017-09-11 18:24:56 michaelwfogleman Thanks!  🙂  I mostly adapted the tests and docstrings"><a href="#t1505154296000524" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">18:24:56</span>          michaelwfogleman </span><span>Thanks! </span><b>🙂</b><span> I mostly adapted the tests and docstrings</span></div><div id="t1505160688000276" t="2017-09-11 20:11:28 nathanmarz @michaelwfogleman merged it in, thanks!"><a href="#t1505160688000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-11</span> <span class="t" onclick="H(this)">20:11:28</span>           nathanmarz </span><span>@michaelwfogleman merged it in, thanks!</span></div><div id="t1505205876000260" t="2017-09-12 08:44:36 sandbags @nathanmarz i only found out the name for it myself a few months ago. i&apos;ve known i was different for about 20 years but always assumed it was just me as nobody else ever seemed able to relate"><a href="#t1505205876000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">08:44:36</span>             sandbags </span><span>@nathanmarz i only found out the name for it myself a few months ago. i&apos;ve known i was different for about 20 years but always assumed it was just me as nobody else ever seemed able to relate</span></div><div id="t1505205899000468" t="2017-09-12 08:44:59 sandbags it turns out something like 2% of the population are somewhere on the spectrum in terms of low-no visualisation"><a href="#t1505205899000468" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">08:44:59</span>             sandbags </span><span>it turns out something like 2% of the population are somewhere on the spectrum in terms of low-no visualisation</span></div><div id="t1505205917000477" t="2017-09-12 08:45:17 sandbags i have a little, enough to confuse the issue but not enough to be useful ... some people have none at all"><a href="#t1505205917000477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">08:45:17</span>             sandbags </span><span>i have a little, enough to confuse the issue but not enough to be useful ... some people have none at all</span></div><div id="t1505218779000383" t="2017-09-12 12:19:39 nathanmarz @sandbags crazy stuff, got me thinking a lot about how people can experience life differently"><a href="#t1505218779000383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">12:19:39</span>           nathanmarz </span><span>@sandbags crazy stuff, got me thinking a lot about how people can experience life differently</span></div><div id="t1505218835000146" t="2017-09-12 12:20:35 nathanmarz fyi, someone on twitter pointed me to this facebook group for people with aphantasia  https://www.facebook.com/groups/204603509580186/?fref=mentions"><a href="#t1505218835000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">12:20:35</span>           nathanmarz </span><span>fyi, someone on twitter pointed me to this facebook group for people with aphantasia </span><a href="https://www.facebook.com/groups/204603509580186/?fref=mentions" target="_blank">https://www.facebook.com/groups/204603509580186/?fref=mentions</a></div><div id="t1505218954000121" t="2017-09-12 12:22:34 hmaurer I am impressed you manage to do your job as a programmer/engineer with aphantasia. Visualisation is such an important thing for me"><a href="#t1505218954000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">12:22:34</span>              hmaurer </span><span>I am impressed you manage to do your job as a programmer/engineer with aphantasia. Visualisation is such an important thing for me</span></div><div id="t1505218983000076" t="2017-09-12 12:23:03 hmaurer I cannot phantom how I would be able to work with abstract concepts without an ability to visualise them in one way or another"><a href="#t1505218983000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">12:23:03</span>              hmaurer </span><span>I cannot phantom how I would be able to work with abstract concepts without an ability to visualise them in one way or another</span></div><div id="t1505230567000331" t="2017-09-12 15:36:07 sandbags I&apos;ve never found it a problem with abstract concepts, perhaps more so with the details in fact!"><a href="#t1505230567000331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">15:36:07</span>             sandbags </span><span>I&apos;ve never found it a problem with abstract concepts, perhaps more so with the details in fact!</span></div><div id="t1505234636000186" t="2017-09-12 16:43:56 nha To me it looks like some “specter exercises” would be better suited for learning specter first, and the visualisation part could come in later for more advanced use-cases, when there is lots of data/nested keywords etc.

At work we have dev helpers to trim or pprint data structures to files and use diff (or meld) to compare them since it’s no use printing them in Emacs (too big). But I did not need all that to learn how to manipulate data in Clojure.

For learning Clojure I used simple examples, easy exercises (I remember  http://clojurekoans.com/  being helpful for Clojure). I have yet to play with  https://github.com/gdeer81/specter-koans  by the way. In the meantime my use of specter is fairly limited."><a href="#t1505234636000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">16:43:56</span>                  nha </span><span>To me it looks like some “specter exercises” would be better suited for learning specter first, and the visualisation part could come in later for more advanced use-cases, when there is lots of data/nested keywords etc.

At work we have dev helpers to trim or pprint data structures to files and use diff (or meld) to compare them since it’s no use printing them in Emacs (too big). But I did not need all that to learn how to manipulate data in Clojure.

For learning Clojure I used simple examples, easy exercises (I remember </span><a href="http://clojurekoans.com/" target="_blank">http://clojurekoans.com/</a><span> being helpful for Clojure). I have yet to play with </span><a href="https://github.com/gdeer81/specter-koans" target="_blank">https://github.com/gdeer81/specter-koans</a><span> by the way. In the meantime my use of specter is fairly limited.</span></div><div id="t1505234962000430" t="2017-09-12 16:49:22 nathanmarz yea, specter is naturally suited for learning via a series of progressively more difficult use cases"><a href="#t1505234962000430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">16:49:22</span>           nathanmarz </span><span>yea, specter is naturally suited for learning via a series of progressively more difficult use cases</span></div><div id="t1505238307000523" t="2017-09-12 17:45:07 gdeer81 Sorry I dropped the ball on writing the specter-koans. I get distracted easily"><a href="#t1505238307000523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-12</span> <span class="t" onclick="H(this)">17:45:07</span>              gdeer81 </span><span>Sorry I dropped the ball on writing the specter-koans. I get distracted easily</span></div><div id="t1505264979000148" t="2017-09-13 01:09:39 lvh I’m stuck writing a selector: I’d like to recursively walk down nested maps, and, if I get a choice, deepest first. So, for:

 {&quot;a&quot; {&quot;b&quot; {&quot;c&quot; 1}}}
 

I’d get  {&quot;c&quot; 1} ,  {&quot;b&quot; {&quot;c&quot; 1}} ,  {&quot;a&quot; {&quot;b&quot; {&quot;c&quot; 1}}} . I’ve been messing around with recursive-path but haven’t gotten far."><a href="#t1505264979000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">01:09:39</span>                  lvh </span><span>I’m stuck writing a selector: I’d like to recursively walk down nested maps, and, if I get a choice, deepest first. So, for:

</span><pre>{&quot;a&quot; {&quot;b&quot; {&quot;c&quot; 1}}}
</pre><span>

I’d get </span><code>{&quot;c&quot; 1}</code><span>, </span><code>{&quot;b&quot; {&quot;c&quot; 1}}</code><span>, </span><code>{&quot;a&quot; {&quot;b&quot; {&quot;c&quot; 1}}}</code><span>. I’ve been messing around with recursive-path but haven’t gotten far.</span></div><div id="t1505265166000070" t="2017-09-13 01:12:46 lvh writing the nested traversal that just grabs the values at the leaves is easy:

 (sr/recursive-path
   [] p
   (sr/cond-path
    map? (sr/stay-then-continue [p sr/MAP-VALS])
    sr/STAY sr/STAY))
"><a href="#t1505265166000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">01:12:46</span>                  lvh </span><span>writing the nested traversal that just grabs the values at the leaves is easy:

</span><pre>(sr/recursive-path
   [] p
   (sr/cond-path
    map? (sr/stay-then-continue [p sr/MAP-VALS])
    sr/STAY sr/STAY))
</pre></div><div id="t1505265450000059" t="2017-09-13 01:17:30 lvh This is almost what I want:

 (def tree-vals
  (sr/recursive-path
   [] p
   (sr/if-path map?
    [sr/VAL sr/MAP-VALS p]
    sr/STAY)))
 

is almost what I want: it just returns the  1  too"><a href="#t1505265450000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">01:17:30</span>                  lvh </span><span>This is almost what I want:

</span><pre>(def tree-vals
  (sr/recursive-path
   [] p
   (sr/if-path map?
    [sr/VAL sr/MAP-VALS p]
    sr/STAY)))
</pre><span>

is almost what I want: it just returns the </span><code>1</code><span> too</span></div><div id="t1505265508000058" t="2017-09-13 01:18:28 lvh (sr/NONE still selects nil; and I’m not sure how to say “ok you’re done now” — I don’t think it’s STOP, because that just stops navigation entirely, right?)"><a href="#t1505265508000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">01:18:28</span>                  lvh </span><span>(sr/NONE still selects nil; and I’m not sure how to say “ok you’re done now” — I don’t think it’s STOP, because that just stops navigation entirely, right?)</span></div><div id="t1505282895000107" t="2017-09-13 06:08:15 lvh Got it:
 (def tree-vals
  (sr/recursive-path
   [] p
   (sr/if-path map? (sr/continue-then-stay [sr/MAP-VALS p]))))
"><a href="#t1505282895000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">06:08:15</span>                  lvh </span><span>Got it:
</span><pre>(def tree-vals
  (sr/recursive-path
   [] p
   (sr/if-path map? (sr/continue-then-stay [sr/MAP-VALS p]))))
</pre></div><div id="t1505301383000211" t="2017-09-13 11:16:23 nathanmarz @lvh you can omit the  []  in  continue-then-stay"><a href="#t1505301383000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">11:16:23</span>           nathanmarz </span><span>@lvh you can omit the </span><code>[]</code><span> in </span><code>continue-then-stay</code></div><div id="t1505301394000117" t="2017-09-13 11:16:34 nathanmarz no performance difference, just a little nicer"><a href="#t1505301394000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">11:16:34</span>           nathanmarz </span><span>no performance difference, just a little nicer</span></div><div id="t1505312908000369" t="2017-09-13 14:28:28 lvh Ah, thanks :)"><a href="#t1505312908000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span> <span class="t" onclick="H(this)">14:28:28</span>                  lvh </span><span>Ah, thanks :)</span></div><div id="t1505739194000013" t="2017-09-18 12:53:14 michaelwfogleman @nathanmarz: Just pushed a PR for documentation of multiple arguments, wrapping up eachnav/keypath/must. If anything else needs documenting let me know and I&apos;ll try to take a stab at it  🙂"><a href="#t1505739194000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">12:53:14</span>     michaelwfogleman </span><span>@nathanmarz: Just pushed a PR for documentation of multiple arguments, wrapping up eachnav/keypath/must. If anything else needs documenting let me know and I&apos;ll try to take a stab at it </span><b>🙂</b></div><div id="t1505740597000055" t="2017-09-18 13:16:37 michaelwfogleman Also did a PR for recursive-path"><a href="#t1505740597000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">13:16:37</span>          michaelwfogleman </span><span>Also did a PR for recursive-path</span></div><div id="t1505742623000323" t="2017-09-18 13:50:23 nathanmarz @michaelwfogleman awesome, thanks! I left a couple comments"><a href="#t1505742623000323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">13:50:23</span>           nathanmarz </span><span>@michaelwfogleman awesome, thanks! I left a couple comments</span></div><div id="t1505754548000309" t="2017-09-18 17:09:08 nathanmarz @michaelwfogleman something else that&apos;s pretty undocumented is the  com.rpl.specter.zipper  namespace"><a href="#t1505754548000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">17:09:08</span>           nathanmarz </span><span>@michaelwfogleman something else that&apos;s pretty undocumented is the </span><code>com.rpl.specter.zipper</code><span> namespace</span></div><div id="t1505769278000050" t="2017-09-18 21:14:38 michaelwfogleman @nathanmarz Would you want a separate section of the docs for that?"><a href="#t1505769278000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">21:14:38</span>     michaelwfogleman </span><span>@nathanmarz Would you want a separate section of the docs for that?</span></div><div id="t1505769850000230" t="2017-09-18 21:24:10 nathanmarz @michaelwfogleman yea, definitely"><a href="#t1505769850000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">21:24:10</span>           nathanmarz </span><span>@michaelwfogleman yea, definitely</span></div><div id="t1505769893000052" t="2017-09-18 21:24:53 nathanmarz those are infrequently needed so putting them with rest of docs would be confusing to new users"><a href="#t1505769893000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-18</span> <span class="t" onclick="H(this)">21:24:53</span>           nathanmarz </span><span>those are infrequently needed so putting them with rest of docs would be confusing to new users</span></div><div id="t1505862016000080" t="2017-09-19 23:00:16 michaelwfogleman @nathanmarz  https://github.com/nathanmarz/specter-wiki/pull/7"><a href="#t1505862016000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-19</span> <span class="t" onclick="H(this)">23:00:16</span>     michaelwfogleman </span><span>@nathanmarz </span><a href="https://github.com/nathanmarz/specter-wiki/pull/7" target="_blank">https://github.com/nathanmarz/specter-wiki/pull/7</a></div><div id="t1505863508000254" t="2017-09-19 23:25:08 nathanmarz @michaelwfogleman the zipper data structure is an implementation detail, I don&apos;t think showing those belongs in the documentation"><a href="#t1505863508000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-19</span> <span class="t" onclick="H(this)">23:25:08</span>           nathanmarz </span><span>@michaelwfogleman the zipper data structure is an implementation detail, I don&apos;t think showing those belongs in the documentation</span></div><div id="t1505863578000100" t="2017-09-19 23:26:18 nathanmarz with zipper usage you always do the following steps: 1. navigate to zipper, 2. navigate with zippers to whatever you want to change 3. navigate using  NODE  or  NODE-SEQ  to the actual value for updates"><a href="#t1505863578000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-19</span> <span class="t" onclick="H(this)">23:26:18</span>           nathanmarz </span><span>with zipper usage you always do the following steps: 1. navigate to zipper, 2. navigate with zippers to whatever you want to change 3. navigate using </span><code>NODE</code><span> or </span><code>NODE-SEQ</code><span> to the actual value for updates</span></div><div id="t1505863651000238" t="2017-09-19 23:27:31 nathanmarz e.g.  (transform [VECTOR-ZIP DOWN RIGHT RIGHT NODE] inc [1 2 3 4 5]) ; =&gt; [1 2 4 4 5]"><a href="#t1505863651000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-19</span> <span class="t" onclick="H(this)">23:27:31</span>           nathanmarz </span><span>e.g. </span><code>(transform [VECTOR-ZIP DOWN RIGHT RIGHT NODE] inc [1 2 3 4 5]) ; =&gt; [1 2 4 4 5]</code></div><div id="t1505863747000179" t="2017-09-19 23:29:07 nathanmarz also here&apos;s an example of  NODE-SEQ  for you:
 (setval [VECTOR-ZIP DOWN RIGHT RIGHT NODE-SEQ] [:a :b :c] [1 2 3 4 5])
;; =&gt; [1 2 :a :b :c 4 5]
"><a href="#t1505863747000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-19</span> <span class="t" onclick="H(this)">23:29:07</span>           nathanmarz </span><span>also here&apos;s an example of </span><code>NODE-SEQ</code><span> for you:
</span><pre>(setval [VECTOR-ZIP DOWN RIGHT RIGHT NODE-SEQ] [:a :b :c] [1 2 3 4 5])
;; =&gt; [1 2 :a :b :c 4 5]
</pre></div><div id="t1505912707000289" t="2017-09-20 13:05:07 michaelwfogleman @nathanmarz Thanks for the example!"><a href="#t1505912707000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:05:07</span>     michaelwfogleman </span><span>@nathanmarz Thanks for the example!</span></div><div id="t1505912724000434" t="2017-09-20 13:05:24 michaelwfogleman The overview is helpful too... I&apos;ve not really used zippers before"><a href="#t1505912724000434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:05:24</span>     michaelwfogleman </span><span>The overview is helpful too... I&apos;ve not really used zippers before</span></div><div id="t1505912749000531" t="2017-09-20 13:05:49 michaelwfogleman For the part you don&apos;t think I should include - are you saying the example zipper?"><a href="#t1505912749000531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:05:49</span>     michaelwfogleman </span><span>For the part you don&apos;t think I should include - are you saying the example zipper?</span></div><div id="t1505912752000002" t="2017-09-20 13:05:52 michaelwfogleman &quot;Let&apos;s also define a sample zipper that we can work with in the examples below.

 (def data [1 [[2 3 4] 5 6] 7 [8 9]])
(def data-zipper (zip/vector-zip data))
 &quot;"><a href="#t1505912752000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:05:52</span>     michaelwfogleman </span><span>&quot;Let&apos;s also define a sample zipper that we can work with in the examples below.

</span><pre>(def data [1 [[2 3 4] 5 6] 7 [8 9]])
(def data-zipper (zip/vector-zip data))
</pre><span>&quot;</span></div><div id="t1505913126000317" t="2017-09-20 13:12:06 michaelwfogleman I added the example of NODE-SEQ that you gave me, as well as a few others to compare to selecting and also using NODE instead"><a href="#t1505913126000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:12:06</span>     michaelwfogleman </span><span>I added the example of NODE-SEQ that you gave me, as well as a few others to compare to selecting and also using NODE instead</span></div><div id="t1505913679000003" t="2017-09-20 13:21:19 nathanmarz @michaelwfogleman yea, I wouldn&apos;t include  data-zipper"><a href="#t1505913679000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:21:19</span>           nathanmarz </span><span>@michaelwfogleman yea, I wouldn&apos;t include </span><code>data-zipper</code></div><div id="t1505913694000576" t="2017-09-20 13:21:34 nathanmarz that should all be encapsulated in the paths"><a href="#t1505913694000576" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:21:34</span>           nathanmarz </span><span>that should all be encapsulated in the paths</span></div><div id="t1505913728000077" t="2017-09-20 13:22:08 michaelwfogleman OK, I think I&apos;ve got what you are saying!  🙂"><a href="#t1505913728000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:22:08</span>     michaelwfogleman </span><span>OK, I think I&apos;ve got what you are saying! </span><b>🙂</b></div><div id="t1505914099000173" t="2017-09-20 13:28:19 michaelwfogleman Cool, just pushed a new version - let me know if that&apos;s not what you had in mind, or you see anything else  🙂"><a href="#t1505914099000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:28:19</span>     michaelwfogleman </span><span>Cool, just pushed a new version - let me know if that&apos;s not what you had in mind, or you see anything else </span><b>🙂</b></div><div id="t1505914276000259" t="2017-09-20 13:31:16 nathanmarz I still see zipper data structures printed out as results to the examples"><a href="#t1505914276000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:31:16</span>           nathanmarz </span><span>I still see zipper data structures printed out as results to the examples</span></div><div id="t1505914302000381" t="2017-09-20 13:31:42 nathanmarz like for  (S/select-any [SZ/VECTOR-ZIP SZ/DOWN] data)"><a href="#t1505914302000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:31:42</span>           nathanmarz </span><span>like for </span><code>(S/select-any [SZ/VECTOR-ZIP SZ/DOWN] data)</code></div><div id="t1505914977000479" t="2017-09-20 13:42:57 michaelwfogleman Got it, I see what you&apos;re saying now, that does make it a lot neater. I pushed a new version and also added your comment about the three steps - I can remove that but I found what you said useful  🙂"><a href="#t1505914977000479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">13:42:57</span>     michaelwfogleman </span><span>Got it, I see what you&apos;re saying now, that does make it a lot neater. I pushed a new version and also added your comment about the three steps - I can remove that but I found what you said useful </span><b>🙂</b></div><div id="t1505938888000342" t="2017-09-20 20:21:28 pataprogramming I’m wrestling with figuring out recursive paths. Specifically, I’m processing and transforming some JSON-LD.  I’d like to perform some transformations at any level of the tree, with arbitrary nesting. To simplify, consider a map where keys are primitive strings and values can be a primitive, a nested map, or a vector of nested maps. 

A standard transformation might be: if a map has a key  jkl:mno  equal to  wibble , add a new key  jkl:123  equal to  whammy .  Here’s a test map:

 {&quot;abc:def&quot;: [{&quot;abc:ghi&quot;: {&quot;jkl:mno&quot;: &quot;womble&quot;,
                          &quot;jkl:qrs&quot;: 12345}},
             {&quot;abc:tuv&quot;: {&quot;jkl:mno&quot;: &quot;wibble&quot;,
                          &quot;abc:def&quot;: {&quot;abc:ghi&quot;: [{&quot;jkl:mno&quot;: &quot;wibble&quot;,
                                                   &quot;jkl:qrs&quot;: 0 },
                                                  {&quot;jkl:qrs&quot;: 20}]}}}],
 &quot;abc:wxy&quot;: {&quot;abc:def&quot;: {&quot;jkl:mno&quot;: &quot;wibble&quot;}}}"><a href="#t1505938888000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:21:28</span>      pataprogramming </span><span>I’m wrestling with figuring out recursive paths. Specifically, I’m processing and transforming some JSON-LD.  I’d like to perform some transformations at any level of the tree, with arbitrary nesting. To simplify, consider a map where keys are primitive strings and values can be a primitive, a nested map, or a vector of nested maps. 

A standard transformation might be: if a map has a key </span><code>jkl:mno</code><span> equal to </span><code>wibble</code><span>, add a new key </span><code>jkl:123</code><span> equal to </span><code>whammy</code><span>.  Here’s a test map:

</span><pre>{&quot;abc:def&quot;: [{&quot;abc:ghi&quot;: {&quot;jkl:mno&quot;: &quot;womble&quot;,
                          &quot;jkl:qrs&quot;: 12345}},
             {&quot;abc:tuv&quot;: {&quot;jkl:mno&quot;: &quot;wibble&quot;,
                          &quot;abc:def&quot;: {&quot;abc:ghi&quot;: [{&quot;jkl:mno&quot;: &quot;wibble&quot;,
                                                   &quot;jkl:qrs&quot;: 0 },
                                                  {&quot;jkl:qrs&quot;: 20}]}}}],
 &quot;abc:wxy&quot;: {&quot;abc:def&quot;: {&quot;jkl:mno&quot;: &quot;wibble&quot;}}}</pre></div><div id="t1505939087000163" t="2017-09-20 20:24:47 pataprogramming walker  terminates as soon as it matches, so it’s clear a recursive path is needed. Is  recursive-path  the right one to be using, or is this a job for a  extend-protocolpath  providing implementations for vectors and maps?"><a href="#t1505939087000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:24:47</span>      pataprogramming </span><code>walker</code><span> terminates as soon as it matches, so it’s clear a recursive path is needed. Is </span><code>recursive-path</code><span> the right one to be using, or is this a job for a </span><code>extend-protocolpath</code><span> providing implementations for vectors and maps?</span></div><div id="t1505939470000094" t="2017-09-20 20:31:10 pataprogramming Some of the maps are  sorted-maps , as well, to influence the serialization when the JSON is written out, so just providing an implementation for  clojure.lang.PersistentHashMap  won’t cut it  in the latter case."><a href="#t1505939470000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:31:10</span>      pataprogramming </span><span>Some of the maps are </span><code>sorted-maps</code><span>, as well, to influence the serialization when the JSON is written out, so just providing an implementation for </span><code>clojure.lang.PersistentHashMap</code><span> won’t cut it  in the latter case.</span></div><div id="t1505940891000614" t="2017-09-20 20:54:51 nathanmarz @pataprogramming use  recursive-path"><a href="#t1505940891000614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:54:51</span>           nathanmarz </span><span>@pataprogramming use </span><code>recursive-path</code></div><div id="t1505940894000224" t="2017-09-20 20:54:54 nathanmarz I&apos;ll show you how"><a href="#t1505940894000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:54:54</span>           nathanmarz </span><span>I&apos;ll show you how</span></div><div id="t1505940895000597" t="2017-09-20 20:54:55 nathanmarz one sec"><a href="#t1505940895000597" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">20:54:55</span>           nathanmarz </span><span>one sec</span></div><div id="t1505941281000215" t="2017-09-20 21:01:21 nathanmarz (def data
  {&quot;abc:def&quot; [{&quot;abc:ghi&quot; {&quot;jkl:mno&quot; &quot;womble&quot;,
                          &quot;jkl:qrs&quot; 12345}},
               {&quot;abc:tuv&quot; {&quot;jkl:mno&quot; &quot;wibble&quot;,
                            &quot;abc:def&quot; {&quot;abc:ghi&quot; [{&quot;jkl:mno&quot; &quot;wibble&quot;,
                                                     &quot;jkl:qrs&quot; 0 },
                                                    {&quot;jkl:qrs&quot; 20}]}}}],
   &quot;abc:wxy&quot; {&quot;abc:def&quot; {&quot;jkl:mno&quot; &quot;wibble&quot;}}})


(def MY-WALKER
  (recursive-path [] p
    (continue-then-stay
      (cond-path
        map? [MAP-VALS p]
        sequential? [ALL p]
        ))))

(setval [MY-WALKER map? (selected? (keypath &quot;jkl:mno&quot;) (pred= &quot;wibble&quot;)) (keypath &quot;jkl:123&quot;)] &quot;whammy&quot; data)
"><a href="#t1505941281000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">21:01:21</span>           nathanmarz </span><pre>(def data
  {&quot;abc:def&quot; [{&quot;abc:ghi&quot; {&quot;jkl:mno&quot; &quot;womble&quot;,
                          &quot;jkl:qrs&quot; 12345}},
               {&quot;abc:tuv&quot; {&quot;jkl:mno&quot; &quot;wibble&quot;,
                            &quot;abc:def&quot; {&quot;abc:ghi&quot; [{&quot;jkl:mno&quot; &quot;wibble&quot;,
                                                     &quot;jkl:qrs&quot; 0 },
                                                    {&quot;jkl:qrs&quot; 20}]}}}],
   &quot;abc:wxy&quot; {&quot;abc:def&quot; {&quot;jkl:mno&quot; &quot;wibble&quot;}}})


(def MY-WALKER
  (recursive-path [] p
    (continue-then-stay
      (cond-path
        map? [MAP-VALS p]
        sequential? [ALL p]
        ))))

(setval [MY-WALKER map? (selected? (keypath &quot;jkl:mno&quot;) (pred= &quot;wibble&quot;)) (keypath &quot;jkl:123&quot;)] &quot;whammy&quot; data)
</pre></div><div id="t1505943701000174" t="2017-09-20 21:41:41 pataprogramming @nathanmarz: Oh, great, thanks!  cond-path  is what I didn’t know I was groping for. And that example also helps make it clear how to use  self-sym , which I wasn’t quite grokking."><a href="#t1505943701000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">21:41:41</span>      pataprogramming </span><span>@nathanmarz: Oh, great, thanks! </span><code>cond-path</code><span> is what I didn’t know I was groping for. And that example also helps make it clear how to use </span><code>self-sym</code><span>, which I wasn’t quite grokking.</span></div><div id="t1505943880000155" t="2017-09-20 21:44:40 pataprogramming Major kudos for specter, by the way. It’s a brilliant library."><a href="#t1505943880000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">21:44:40</span>      pataprogramming </span><span>Major kudos for specter, by the way. It’s a brilliant library.</span></div><div id="t1505943913000016" t="2017-09-20 21:45:13 nathanmarz happy to hear you&apos;re getting good use out of it"><a href="#t1505943913000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-20</span> <span class="t" onclick="H(this)">21:45:13</span>           nathanmarz </span><span>happy to hear you&apos;re getting good use out of it</span></div><div id="t1506078830000153" t="2017-09-22 11:13:50 nha I have a recursive-path walker in the works, but I am hitting a not on a particular prismatic/shema record. In particular,  s/if  returns a record with two paths I would like to explore (say, left and right). I know how to extract them from the record but not how to navigate to both of them: 
 (def ^:private PATH-SCHEMA-WALKER
  (recursive-path [] p
                  (cond-path
                    (fn [v]
                      (instance? schema.core.ConditionalSchema v))
                    [ALL (collect-one FIRST) LAST p] ;; how do I walk left and right here?

                    (fn [v]
                      (cond
                        (primitive-schema? v) false
                        (map? v) true ;; this is a real path
                        :default false))
                    [ALL (collect-one FIRST) LAST p]

                    (fn [v] true) STAY)))
 
Here is my attempt above, but I don&apos;t know what to put for the first path. Here is how I can extract the schemas:
 (if (instance? schema.core.ConditionalSchema x)
    (let [[p+s1 s2] (:preds-and-schemas (s/if map?
                                          {:first :schema} {:second :schema})
                                        )]
      {:s1 (second p+s1) :s2 s2})
    x
    )
"><a href="#t1506078830000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-22</span> <span class="t" onclick="H(this)">11:13:50</span>                  nha </span><span>I have a recursive-path walker in the works, but I am hitting a not on a particular prismatic/shema record. In particular, </span><code>s/if</code><span> returns a record with two paths I would like to explore (say, left and right). I know how to extract them from the record but not how to navigate to both of them: 
</span><pre>(def ^:private PATH-SCHEMA-WALKER
  (recursive-path [] p
                  (cond-path
                    (fn [v]
                      (instance? schema.core.ConditionalSchema v))
                    [ALL (collect-one FIRST) LAST p] ;; how do I walk left and right here?

                    (fn [v]
                      (cond
                        (primitive-schema? v) false
                        (map? v) true ;; this is a real path
                        :default false))
                    [ALL (collect-one FIRST) LAST p]

                    (fn [v] true) STAY)))
</pre><span>
Here is my attempt above, but I don&apos;t know what to put for the first path. Here is how I can extract the schemas:
</span><pre>(if (instance? schema.core.ConditionalSchema x)
    (let [[p+s1 s2] (:preds-and-schemas (s/if map?
                                          {:first :schema} {:second :schema})
                                        )]
      {:s1 (second p+s1) :s2 s2})
    x
    )
</pre></div><div id="t1506085418000197" t="2017-09-22 13:03:38 nathanmarz @nha to walk multiple paths the general answer is to use  multi-path , e.g.  (multi-path :left :right)"><a href="#t1506085418000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-22</span> <span class="t" onclick="H(this)">13:03:38</span>           nathanmarz </span><span>@nha to walk multiple paths the general answer is to use </span><code>multi-path</code><span>, e.g. </span><code>(multi-path :left :right)</code></div><div id="t1506086021000146" t="2017-09-22 13:13:41 nha Will try, thanks  simple_smile  "><a href="#t1506086021000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-22</span> <span class="t" onclick="H(this)">13:13:41</span>                  nha </span><span>Will try, thanks </span><b>simple_smile</b><span> </span></div><div id="t1506086761000306" t="2017-09-22 13:26:01 nathanmarz @nha btw instead of  (fn [v] true)  for default case you can just write  STAY"><a href="#t1506086761000306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-22</span> <span class="t" onclick="H(this)">13:26:01</span>           nathanmarz </span><span>@nha btw instead of </span><code>(fn [v] true)</code><span> for default case you can just write </span><code>STAY</code></div><div id="t1506131248000039" t="2017-09-23 01:47:28 sophiago Does Specter have known issues with OpenJDK7? I&apos;ve never used it myself, but just noticed an error on a Travis build."><a href="#t1506131248000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">01:47:28</span>             sophiago </span><span>Does Specter have known issues with OpenJDK7? I&apos;ve never used it myself, but just noticed an error on a Travis build.</span></div><div id="t1506133051000067" t="2017-09-23 02:17:31 nathanmarz @sophiago I haven&apos;t tested it on that, I&apos;d have to see the error to have an idea of whether that&apos;s related to Specter or not"><a href="#t1506133051000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">02:17:31</span>           nathanmarz </span><span>@sophiago I haven&apos;t tested it on that, I&apos;d have to see the error to have an idea of whether that&apos;s related to Specter or not</span></div><div id="t1506133523000010" t="2017-09-23 02:25:23 sophiago The error was  Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/rpl/specter/Util : Unsupported major.minor version 52.0, compiling:(com/rpl/specter/impl.cljc:1:1) . Let me know if you want me to file an issue."><a href="#t1506133523000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">02:25:23</span>             sophiago </span><span>The error was </span><code>Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/rpl/specter/Util : Unsupported major.minor version 52.0, compiling:(com/rpl/specter/impl.cljc:1:1)</code><span>. Let me know if you want me to file an issue.</span></div><div id="t1506133568000016" t="2017-09-23 02:26:08 sophiago (I understand that&apos;s not particularly informative)"><a href="#t1506133568000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">02:26:08</span>             sophiago </span><span>(I understand that&apos;s not particularly informative)</span></div><div id="t1506134104000004" t="2017-09-23 02:35:04 sophiago Oh, that was a fast Googling. I guess it just means the jar was built in 8 and I&apos;m trying to run it in 7."><a href="#t1506134104000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">02:35:04</span>             sophiago </span><span>Oh, that was a fast Googling. I guess it just means the jar was built in 8 and I&apos;m trying to run it in 7.</span></div><div id="t1506134191000038" t="2017-09-23 02:36:31 sophiago I&apos;m also on the 1.9 alpha, although I don&apos;t think that should factor in. I&apos;m getting the jar straight from Maven."><a href="#t1506134191000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">02:36:31</span>             sophiago </span><span>I&apos;m also on the 1.9 alpha, although I don&apos;t think that should factor in. I&apos;m getting the jar straight from Maven.</span></div><div id="t1506135700000047" t="2017-09-23 03:01:40 nathanmarz yea that&apos;s cause the java code was compiled to a different version"><a href="#t1506135700000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">03:01:40</span>           nathanmarz </span><span>yea that&apos;s cause the java code was compiled to a different version</span></div><div id="t1506135703000078" t="2017-09-23 03:01:43 nathanmarz not a specter issue"><a href="#t1506135703000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">03:01:43</span>           nathanmarz </span><span>not a specter issue</span></div><div id="t1506138806000047" t="2017-09-23 03:53:26 sophiago Sorry, could you please clarify? If I&apos;m just having Lein pull it from Maven then how would I control how it&apos;s built?"><a href="#t1506138806000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">03:53:26</span>             sophiago </span><span>Sorry, could you please clarify? If I&apos;m just having Lein pull it from Maven then how would I control how it&apos;s built?</span></div><div id="t1506158837000016" t="2017-09-23 09:27:17 nathanmarz @sophiago specter has a little bit of java code so the jar contains a couple classfiles"><a href="#t1506158837000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">09:27:17</span>           nathanmarz </span><span>@sophiago specter has a little bit of java code so the jar contains a couple classfiles</span></div><div id="t1506158876000011" t="2017-09-23 09:27:56 nathanmarz you can try building specter yourself by checking out the project and running  lein jar  or  lein install"><a href="#t1506158876000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">09:27:56</span>           nathanmarz </span><span>you can try building specter yourself by checking out the project and running </span><code>lein jar</code><span> or </span><code>lein install</code></div><div id="t1506160090000017" t="2017-09-23 09:48:10 sophiago In that case, I think I&apos;ll just drop support for OpenJDK7. I think for libraries that&apos;s an appropriate expectation now that JDK9 is out. I&apos;m not sure if this is something you&apos;d want to mention in your documentation, though (I will in mine). All other Clojure libraries I use support it."><a href="#t1506160090000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-23</span> <span class="t" onclick="H(this)">09:48:10</span>             sophiago </span><span>In that case, I think I&apos;ll just drop support for OpenJDK7. I think for libraries that&apos;s an appropriate expectation now that JDK9 is out. I&apos;m not sure if this is something you&apos;d want to mention in your documentation, though (I will in mine). All other Clojure libraries I use support it.</span></div><div id="t1506398579000064" t="2017-09-26 04:02:59 Nick Drew Java 9 has support for jars with multiple versions of class files. might be a handy way to preserve backward compatibility @U173SEFUN "><a href="#t1506398579000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-26</span> <span class="t" onclick="H(this)">04:02:59</span>                 Nick Drew </span><span>Java 9 has support for jars with multiple versions of class files. might be a handy way to preserve backward compatibility @U173SEFUN </span></div><div id="t1506381109000162" t="2017-09-25 23:11:49 chromalchemy If I my navigation leads to a vector of strings, how do I continue to navigate the strings as whole values instead of splicing into charachter subsequences?   (select [ALL FIRST] [&quot;aaa&quot; &quot;bbb&quot; &quot;ccc&quot;])   gives  [&quot;a&quot; &quot;b&quot; &quot;c&quot;]  instead of  [&quot;aaa&quot;]"><a href="#t1506381109000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-25</span> <span class="t" onclick="H(this)">23:11:49</span>         chromalchemy </span><span>If I my navigation leads to a vector of strings, how do I continue to navigate the strings as whole values instead of splicing into charachter subsequences?  </span><code>(select [ALL FIRST] [&quot;aaa&quot; &quot;bbb&quot; &quot;ccc&quot;]) </code><span> gives </span><code>[&quot;a&quot; &quot;b&quot; &quot;c&quot;]</code><span> instead of </span><code>[&quot;aaa&quot;]</code></div><div id="t1506381179000113" t="2017-09-25 23:12:59 chromalchemy Using  keypath  on a list of maps gave me the vector of strings, and I want to use  srange  on it..."><a href="#t1506381179000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-25</span> <span class="t" onclick="H(this)">23:12:59</span>         chromalchemy </span><span>Using </span><code>keypath</code><span> on a list of maps gave me the vector of strings, and I want to use </span><code>srange</code><span> on it...</span></div><div id="t1506389954000074" t="2017-09-26 01:39:14 nathanmarz @chromalchemy if you have a vector of strings and just want to navigate to the first one, it&apos;s just  FIRST"><a href="#t1506389954000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-26</span> <span class="t" onclick="H(this)">01:39:14</span>           nathanmarz </span><span>@chromalchemy if you have a vector of strings and just want to navigate to the first one, it&apos;s just </span><code>FIRST</code></div><div id="t1506390002000123" t="2017-09-26 01:40:02 nathanmarz keypath  won&apos;t work on lists, but  nthpath  will"><a href="#t1506390002000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-26</span> <span class="t" onclick="H(this)">01:40:02</span>           nathanmarz </span><code>keypath</code><span> won&apos;t work on lists, but </span><code>nthpath</code><span> will</span></div><div id="t1506707235000141" t="2017-09-29 17:47:15 teawaterwire Hi there, I&apos;m having trouble doing the following: 
 ;; Considering this map m
(def m {:a 3
        :b {10 {:c 3}
            2 {:d 4}
            20 {:c 5}}})
;; I&apos;d like to remove entries in the :b map if 
;; the key is &lt; 15
;; and 
;; the value doesn&apos;t contain :d 
;; so it&apos;s like:
; {:a 3
;  :b {2 {:d 4}
;      20 {:c 5}}}
"><a href="#t1506707235000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">17:47:15</span>         teawaterwire </span><span>Hi there, I&apos;m having trouble doing the following: 
</span><pre>;; Considering this map m
(def m {:a 3
        :b {10 {:c 3}
            2 {:d 4}
            20 {:c 5}}})
;; I&apos;d like to remove entries in the :b map if 
;; the key is &lt; 15
;; and 
;; the value doesn&apos;t contain :d 
;; so it&apos;s like:
; {:a 3
;  :b {2 {:d 4}
;      20 {:c 5}}}
</pre></div><div id="t1506707416000322" t="2017-09-29 17:50:16 teawaterwire I managed to do it with  (sp/setval [:b sp/ALL (fn [[k v]] (and (&lt; k 15) (not (contains? v :d))))] sp/NONE m)  but I guess there could be a more elegant solution?"><a href="#t1506707416000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">17:50:16</span>         teawaterwire </span><span>I managed to do it with </span><code>(sp/setval [:b sp/ALL (fn [[k v]] (and (&lt; k 15) (not (contains? v :d))))] sp/NONE m)</code><span> but I guess there could be a more elegant solution?</span></div><div id="t1506710365000112" t="2017-09-29 18:39:25 nathanmarz here&apos;s a way that doesn&apos;t use any anonymous functions:
 (setval
  [:b
   ALL
   (not-selected? LAST (must :d))
   FIRST
   (pred&lt; 15)]
  NONE
  m)
"><a href="#t1506710365000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">18:39:25</span>           nathanmarz </span><span>here&apos;s a way that doesn&apos;t use any anonymous functions:
</span><pre>(setval
  [:b
   ALL
   (not-selected? LAST (must :d))
   FIRST
   (pred&lt; 15)]
  NONE
  m)
</pre></div><div id="t1506711577000418" t="2017-09-29 18:59:37 teawaterwire Amazing, thanks!
I tried something with  not-selected?  but I got stuck at:
 (setval
 [:b
  (not-selected? MAP-VALS (must :d))
  MAP-KEYS
  (pred&lt; 15)]
 NONE
 m)
"><a href="#t1506711577000418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">18:59:37</span>         teawaterwire </span><span>Amazing, thanks!
I tried something with </span><code>not-selected?</code><span> but I got stuck at:
</span><pre>(setval
 [:b
  (not-selected? MAP-VALS (must :d))
  MAP-KEYS
  (pred&lt; 15)]
 NONE
 m)
</pre></div><div id="t1506711922000413" t="2017-09-29 19:05:22 nathanmarz that  not-selected?  call is a filter on the map as a whole"><a href="#t1506711922000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">19:05:22</span>           nathanmarz </span><span>that </span><code>not-selected?</code><span> call is a filter on the map as a whole</span></div><div id="t1506712009000433" t="2017-09-29 19:06:49 nathanmarz using  ALL  lets you test both conditions on the same entry"><a href="#t1506712009000433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">19:06:49</span>           nathanmarz </span><span>using </span><code>ALL</code><span> lets you test both conditions on the same entry</span></div><div id="t1506713327000417" t="2017-09-29 19:28:47 teawaterwire Neat  👍"><a href="#t1506713327000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-29</span> <span class="t" onclick="H(this)">19:28:47</span>         teawaterwire </span><span>Neat </span><b>👍</b></div><div id="t1506823463000050" t="2017-10-01 02:04:23 michaelwfogleman I just found myself writing a helper function, (defn match-path [p] (if-path p STAY)) - is there a more idiomatic way to do that, or is that sensible (TM)?"><a href="#t1506823463000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">02:04:23</span>     michaelwfogleman </span><span>I just found myself writing a helper function, (defn match-path [p] (if-path p STAY)) - is there a more idiomatic way to do that, or is that sensible (TM)?</span></div><div id="t1506851982000031" t="2017-10-01 09:59:42 nathanmarz @michaelwfogleman that&apos;s  selected?"><a href="#t1506851982000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">09:59:42</span>           nathanmarz </span><span>@michaelwfogleman that&apos;s </span><code>selected?</code></div><div id="t1506852031000013" t="2017-10-01 10:00:31 nathanmarz also, that would be a very unperformant way to implement  selected? , since it would force recompilation of that subpath every single time the callsite is invoked"><a href="#t1506852031000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">10:00:31</span>           nathanmarz </span><span>also, that would be a very unperformant way to implement </span><code>selected?</code><span>, since it would force recompilation of that subpath every single time the callsite is invoked</span></div><div id="t1506852051000029" t="2017-10-01 10:00:51 nathanmarz (defdynamicnav match-path [p] (if-path p STAY))  fixes it"><a href="#t1506852051000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">10:00:51</span>           nathanmarz </span><code>(defdynamicnav match-path [p] (if-path p STAY))</code><span> fixes it</span></div><div id="t1506877152000007" t="2017-10-01 16:59:12 michaelwfogleman Got it, thanks! I don&apos;t think we&apos;ve documented defdynamicnav and defrichnav, anything I&apos;m missing? I&apos;ll try to make a PR at some point"><a href="#t1506877152000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">16:59:12</span>     michaelwfogleman </span><span>Got it, thanks! I don&apos;t think we&apos;ve documented defdynamicnav and defrichnav, anything I&apos;m missing? I&apos;ll try to make a PR at some point</span></div><div id="t1506879175000013" t="2017-10-01 17:32:55 michaelwfogleman Then again that may be above my pay grade...  🙂"><a href="#t1506879175000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">17:32:55</span>     michaelwfogleman </span><span>Then again that may be above my pay grade... </span><b>🙂</b></div><div id="t1506879693000056" t="2017-10-01 17:41:33 michaelwfogleman Ah it&apos;s in the inline caching implementation doc - had not read that"><a href="#t1506879693000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">17:41:33</span>     michaelwfogleman </span><span>Ah it&apos;s in the inline caching implementation doc - had not read that</span></div><div id="t1506893700000110" t="2017-10-01 21:35:00 nathanmarz yea, that would be a good one to document"><a href="#t1506893700000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-01</span> <span class="t" onclick="H(this)">21:35:00</span>           nathanmarz </span><span>yea, that would be a good one to document</span></div><div id="t1506944187000066" t="2017-10-02 11:36:27 michaelwfogleman Have a basic PR submitted, just pointing to the inline caching doc- nothing for defrichnav"><a href="#t1506944187000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-02</span> <span class="t" onclick="H(this)">11:36:27</span>     michaelwfogleman </span><span>Have a basic PR submitted, just pointing to the inline caching doc- nothing for defrichnav</span></div><div id="t1507210683000280" t="2017-10-05 13:38:03 hkjels Can I use  specter  to get the path of some deeply nested key using a predicate?
Say I want the path to the last value that’s  brown  here:
 {:a &quot;foo&quot; :b :_ :c {:d &quot;brown&quot; :e &quot;bar&quot;} :f [{:g &quot;pale&quot; :h &quot;brown&quot; :i {:j &quot;ale&quot; :k [{:l &quot;brown&quot;} {:l &quot;brown&quot;}]}}]}"><a href="#t1507210683000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">13:38:03</span>               hkjels </span><span>Can I use </span><code>specter</code><span> to get the path of some deeply nested key using a predicate?
Say I want the path to the last value that’s </span><code>brown</code><span> here:
</span><code>{:a &quot;foo&quot; :b :_ :c {:d &quot;brown&quot; :e &quot;bar&quot;} :f [{:g &quot;pale&quot; :h &quot;brown&quot; :i {:j &quot;ale&quot; :k [{:l &quot;brown&quot;} {:l &quot;brown&quot;}]}}]}</code></div><div id="t1507211956000522" t="2017-10-05 13:59:16 nathanmarz @hkjels yes, you use  recursive-path  and  collect-one"><a href="#t1507211956000522" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">13:59:16</span>           nathanmarz </span><span>@hkjels yes, you use </span><code>recursive-path</code><span> and </span><code>collect-one</code></div><div id="t1507211960000496" t="2017-10-05 13:59:20 nathanmarz a related example here:  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure"><a href="#t1507211960000496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">13:59:20</span>           nathanmarz </span><span>a related example here: </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure</a></div><div id="t1507212895000222" t="2017-10-05 14:14:55 hkjels @nathanmarz thanks! I’ll give that a shot
Looks like a really good lib"><a href="#t1507212895000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">14:14:55</span>               hkjels </span><span>@nathanmarz thanks! I’ll give that a shot
Looks like a really good lib</span></div><div id="t1507220763000502" t="2017-10-05 16:26:03 michaelwfogleman @nathanmarz: Just pushed a new version of PR with mutual recursion and the building blocks we&apos;ve been working on - could use an assist coming up with a better example for mutually recursive paths"><a href="#t1507220763000502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">16:26:03</span>     michaelwfogleman </span><span>@nathanmarz: Just pushed a new version of PR with mutual recursion and the building blocks we&apos;ve been working on - could use an assist coming up with a better example for mutually recursive paths</span></div><div id="t1507226009000146" t="2017-10-05 17:53:29 nathanmarz @michaelwfogleman I only ever made a mutually recursive path once... and it&apos;s way too involved to use as an example"><a href="#t1507226009000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">17:53:29</span>           nathanmarz </span><span>@michaelwfogleman I only ever made a mutually recursive path once... and it&apos;s way too involved to use as an example</span></div><div id="t1507226042000257" t="2017-10-05 17:54:02 nathanmarz I think just showing the basics of how mutually recursive paths would be structured is sufficient"><a href="#t1507226042000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">17:54:02</span>           nathanmarz </span><span>I think just showing the basics of how mutually recursive paths would be structured is sufficient</span></div><div id="t1507231324000723" t="2017-10-05 19:22:04 gdeer81 speaking of examples, if anyone has any interesting ones that they want me to turn into a specter koan, just open an issue and paste it in  https://github.com/gdeer81/specter-koans/issues"><a href="#t1507231324000723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">19:22:04</span>              gdeer81 </span><span>speaking of examples, if anyone has any interesting ones that they want me to turn into a specter koan, just open an issue and paste it in </span><a href="https://github.com/gdeer81/specter-koans/issues" target="_blank">https://github.com/gdeer81/specter-koans/issues</a></div><div id="t1507231379000141" t="2017-10-05 19:22:59 gdeer81 or you can just paste your scratchpad and I can mine it for any good nuggets"><a href="#t1507231379000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">19:22:59</span>              gdeer81 </span><span>or you can just paste your scratchpad and I can mine it for any good nuggets</span></div><div id="t1507242319000072" t="2017-10-05 22:25:19 michaelwfogleman @nathanmarz In that case, the PR should be either pretty close or good to go  🙂"><a href="#t1507242319000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-05</span> <span class="t" onclick="H(this)">22:25:19</span>     michaelwfogleman </span><span>@nathanmarz In that case, the PR should be either pretty close or good to go </span><b>🙂</b></div><div id="t1507303961000498" t="2017-10-06 15:32:41 gdeer81 is  AFTER-ELEM  used in selections or is just primarily used with  setval  ? I want to make sure my koans cover possible use cases unless it doesn&apos;t make sense."><a href="#t1507303961000498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:32:41</span>              gdeer81 </span><span>is </span><code>AFTER-ELEM</code><span> used in selections or is just primarily used with </span><code>setval</code><span> ? I want to make sure my koans cover possible use cases unless it doesn&apos;t make sense.</span></div><div id="t1507304674000388" t="2017-10-06 15:44:34 gdeer81 also, I watched the talk and was excited about specter keeping the collection type the same so I was surprised when I saw this  (setval AFTER-ELEM 2 #{1 2}) =&gt; (1 2 2)"><a href="#t1507304674000388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:44:34</span>              gdeer81 </span><span>also, I watched the talk and was excited about specter keeping the collection type the same so I was surprised when I saw this </span><code>(setval AFTER-ELEM 2 #{1 2}) =&gt; (1 2 2)</code></div><div id="t1507304703000473" t="2017-10-06 15:45:03 gdeer81 the set was turned into a list"><a href="#t1507304703000473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:45:03</span>              gdeer81 </span><span>the set was turned into a list</span></div><div id="t1507304943000527" t="2017-10-06 15:49:03 gdeer81 it does the same thing for a map"><a href="#t1507304943000527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:49:03</span>              gdeer81 </span><span>it does the same thing for a map</span></div><div id="t1507305010000157" t="2017-10-06 15:50:10 gdeer81 I tried to pass a k/v pair to AFTER-ELEM as two args and go a wrong number of args error"><a href="#t1507305010000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:50:10</span>              gdeer81 </span><span>I tried to pass a k/v pair to AFTER-ELEM as two args and go a wrong number of args error</span></div><div id="t1507305343000591" t="2017-10-06 15:55:43 gdeer81 when I put the k/v pair as a map it just turned the original map into a vector, added it to a list and then added my k/v argument as a separate map in the list like this:  (setval AFTER-ELEM {:friend &quot;Mary&quot;} {:name &quot;Paul&quot;}) =&gt; ([:name &quot;Paul&quot;] {:friend &quot;Mary&quot;})  so since the result isn&apos;t treated like a map you don&apos;t need k/v pair balance  (setval AFTER-ELEM &quot;Mary&quot; {:name &quot;Paul&quot;}) =&gt; ([:name &quot;Paul&quot;] &quot;Mary&quot;)"><a href="#t1507305343000591" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:55:43</span>              gdeer81 </span><span>when I put the k/v pair as a map it just turned the original map into a vector, added it to a list and then added my k/v argument as a separate map in the list like this: </span><code>(setval AFTER-ELEM {:friend &quot;Mary&quot;} {:name &quot;Paul&quot;}) =&gt; ([:name &quot;Paul&quot;] {:friend &quot;Mary&quot;})</code><span> so since the result isn&apos;t treated like a map you don&apos;t need k/v pair balance </span><code>(setval AFTER-ELEM &quot;Mary&quot; {:name &quot;Paul&quot;}) =&gt; ([:name &quot;Paul&quot;] &quot;Mary&quot;)</code></div><div id="t1507305462000444" t="2017-10-06 15:57:42 gdeer81 I just want to make sure I&apos;m not documenting nonsense cases"><a href="#t1507305462000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:57:42</span>              gdeer81 </span><span>I just want to make sure I&apos;m not documenting nonsense cases</span></div><div id="t1507305554000268" t="2017-10-06 15:59:14 nathanmarz @gdeer81  AFTER-ELEM  is only intended for transformations"><a href="#t1507305554000268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:59:14</span>           nathanmarz </span><span>@gdeer81 </span><code>AFTER-ELEM</code><span> is only intended for transformations</span></div><div id="t1507305574000352" t="2017-10-06 15:59:34 nathanmarz it doesn&apos;t make sense in the context of a set"><a href="#t1507305574000352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:59:34</span>           nathanmarz </span><span>it doesn&apos;t make sense in the context of a set</span></div><div id="t1507305586000330" t="2017-10-06 15:59:46 nathanmarz to add a single element to a set most efficiently use  NONE-ELEM"><a href="#t1507305586000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">15:59:46</span>           nathanmarz </span><span>to add a single element to a set most efficiently use </span><code>NONE-ELEM</code></div><div id="t1507305612000417" t="2017-10-06 16:00:12 nathanmarz likewise, it doesn&apos;t make sense in the context of a map"><a href="#t1507305612000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:00:12</span>           nathanmarz </span><span>likewise, it doesn&apos;t make sense in the context of a map</span></div><div id="t1507305616000291" t="2017-10-06 16:00:16 nathanmarz for a map, just use  keypath"><a href="#t1507305616000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:00:16</span>           nathanmarz </span><span>for a map, just use </span><code>keypath</code></div><div id="t1507305664000052" t="2017-10-06 16:01:04 gdeer81 I figured that was the case"><a href="#t1507305664000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:01:04</span>              gdeer81 </span><span>I figured that was the case</span></div><div id="t1507306290000288" t="2017-10-06 16:11:30 gdeer81 so for each navigation I&apos;m trying to document intended use and collection types"><a href="#t1507306290000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:11:30</span>              gdeer81 </span><span>so for each navigation I&apos;m trying to document intended use and collection types</span></div><div id="t1507306371000240" t="2017-10-06 16:12:51 nathanmarz cool, that&apos;s good"><a href="#t1507306371000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:12:51</span>           nathanmarz </span><span>cool, that&apos;s good</span></div><div id="t1507306378000330" t="2017-10-06 16:12:58 nathanmarz would be a good thing to add to the docstrings too"><a href="#t1507306378000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:12:58</span>           nathanmarz </span><span>would be a good thing to add to the docstrings too</span></div><div id="t1507306469000632" t="2017-10-06 16:14:29 gdeer81 ha or even the spec, &quot;spec error: you shouldn&apos;t be using this on a set&quot;"><a href="#t1507306469000632" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">16:14:29</span>              gdeer81 </span><span>ha or even the spec, &quot;spec error: you shouldn&apos;t be using this on a set&quot;</span></div><div id="t1507319425000024" t="2017-10-06 19:50:25 michaelwfogleman Does Specter have specs? I didn&apos;t think it did"><a href="#t1507319425000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">19:50:25</span>     michaelwfogleman </span><span>Does Specter have specs? I didn&apos;t think it did</span></div><div id="t1507319441000586" t="2017-10-06 19:50:41 michaelwfogleman I&apos;m pretty new to specs but I&apos;d be willing to help spec Specter if that&apos;s of interest"><a href="#t1507319441000586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">19:50:41</span>     michaelwfogleman </span><span>I&apos;m pretty new to specs but I&apos;d be willing to help spec Specter if that&apos;s of interest</span></div><div id="t1507321654000042" t="2017-10-06 20:27:34 michaelwfogleman Yeah, took another look and pretty sure it doesn&apos;t, since it&apos;s on 1.8.0 and there&apos;s no files included"><a href="#t1507321654000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">20:27:34</span>     michaelwfogleman </span><span>Yeah, took another look and pretty sure it doesn&apos;t, since it&apos;s on 1.8.0 and there&apos;s no files included</span></div><div id="t1507323596000363" t="2017-10-06 20:59:56 gdeer81 @nathanmarz  (let [my-vec ^{:author &quot;Gary&quot;} [1 2 3]] (meta (select ALL-WITH-META my-vec)))  returns nil , am I doing something wrong or is this a bug?"><a href="#t1507323596000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">20:59:56</span>              gdeer81 </span><span>@nathanmarz </span><code>(let [my-vec ^{:author &quot;Gary&quot;} [1 2 3]] (meta (select ALL-WITH-META my-vec)))</code><span> returns nil , am I doing something wrong or is this a bug?</span></div><div id="t1507326363000272" t="2017-10-06 21:46:03 michaelwfogleman @gdeer81 @nathanmarz I took a look, it looks like meta is preserved with a transform but not with the select implementation, you can see it in the code too"><a href="#t1507326363000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:46:03</span>     michaelwfogleman </span><span>@gdeer81 @nathanmarz I took a look, it looks like meta is preserved with a transform but not with the select implementation, you can see it in the code too</span></div><div id="t1507326372000242" t="2017-10-06 21:46:12 michaelwfogleman (let [my-num ^{:author &quot;Gary&quot;} [1]] (meta (transform ALL-WITH-META inc my-num)))"><a href="#t1507326372000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:46:12</span>     michaelwfogleman </span><span>(let [my-num ^{:author &quot;Gary&quot;} [1]] (meta (transform ALL-WITH-META inc my-num)))</span></div><div id="t1507326383000240" t="2017-10-06 21:46:23 michaelwfogleman (defnav
  ^{:doc &quot;Same as ALL, except maintains metadata on the structure.&quot;}
  ALL-WITH-META
  []
  (select* [this structure next-fn]
    (n/all-select structure next-fn))
  (transform* [this structure next-fn]
    (let [m (meta structure)
          res (n/all-transform structure next-fn)]
      (if (some? res)
        (with-meta res m)
        ))))"><a href="#t1507326383000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:46:23</span>     michaelwfogleman </span><span>(defnav
  ^{:doc &quot;Same as ALL, except maintains metadata on the structure.&quot;}
  ALL-WITH-META
  []
  (select* [this structure next-fn]
    (n/all-select structure next-fn))
  (transform* [this structure next-fn]
    (let [m (meta structure)
          res (n/all-transform structure next-fn)]
      (if (some? res)
        (with-meta res m)
        ))))</span></div><div id="t1507326414000163" t="2017-10-06 21:46:54 michaelwfogleman I think I can file a patch  🙂"><a href="#t1507326414000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:46:54</span>     michaelwfogleman </span><span>I think I can file a patch </span><b>🙂</b></div><div id="t1507326484000310" t="2017-10-06 21:48:04 nathanmarz there&apos;s no metadata to maintain on select, since it navigates into the subvalues"><a href="#t1507326484000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:48:04</span>           nathanmarz </span><span>there&apos;s no metadata to maintain on select, since it navigates into the subvalues</span></div><div id="t1507326514000128" t="2017-10-06 21:48:34 nathanmarz that nav purely exists for transforms, especially for  codewalker"><a href="#t1507326514000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:48:34</span>           nathanmarz </span><span>that nav purely exists for transforms, especially for </span><code>codewalker</code></div><div id="t1507326804000200" t="2017-10-06 21:53:24 michaelwfogleman @nathanmarz Ah, looks like this one isn&apos;t in the docs either, I&apos;ll submit a pr for it"><a href="#t1507326804000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">21:53:24</span>     michaelwfogleman </span><span>@nathanmarz Ah, looks like this one isn&apos;t in the docs either, I&apos;ll submit a pr for it</span></div><div id="t1507327266000181" t="2017-10-06 22:01:06 gdeer81 I&apos;m going to stick to creating koans for the things documented in the wiki until I&apos;m more attuned with the code"><a href="#t1507327266000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">22:01:06</span>              gdeer81 </span><span>I&apos;m going to stick to creating koans for the things documented in the wiki until I&apos;m more attuned with the code</span></div><div id="t1507329604000090" t="2017-10-06 22:40:04 michaelwfogleman Sent in a PR, and a few related to a new issue I opened about undocumented vars:  https://github.com/nathanmarz/specter-wiki/issues/17"><a href="#t1507329604000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">22:40:04</span>     michaelwfogleman </span><span>Sent in a PR, and a few related to a new issue I opened about undocumented vars: </span><a href="https://github.com/nathanmarz/specter-wiki/issues/17" target="_blank">https://github.com/nathanmarz/specter-wiki/issues/17</a></div><div id="t1507331650000182" t="2017-10-06 23:14:10 james Hi everyone, I made a screencast to introduce Specter to newcomers:  https://www.youtube.com/watch?v=rh5J4vacG98"><a href="#t1507331650000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">23:14:10</span>                james </span><span>Hi everyone, I made a screencast to introduce Specter to newcomers: </span><a href="https://www.youtube.com/watch?v=rh5J4vacG98" target="_blank">https://www.youtube.com/watch?v=rh5J4vacG98</a></div><div id="t1507333117000157" t="2017-10-06 23:38:37 michaelwfogleman I&apos;ve watched a bunch of your older videos, awesome to see one on Specter! Keep them coming!  🙂"><a href="#t1507333117000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span> <span class="t" onclick="H(this)">23:38:37</span>          michaelwfogleman </span><span>I&apos;ve watched a bunch of your older videos, awesome to see one on Specter! Keep them coming! </span><b>🙂</b></div><div id="t1507343311000073" t="2017-10-07 02:28:31 drewverlee This is awesome"><a href="#t1507343311000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:28:31</span>                drewverlee </span><span>This is awesome</span></div><div id="t1507343293000007" t="2017-10-07 02:28:13 gdeer81 ha, I love when I find holes in my understanding of how the code works. my new obsession is  INDEXED-VALS  on its own as a select it totally makes sense, but change it to a transform and compose it with another navigator and you blow my cognitive budget. I thought this code was going to return the collection unchanged  (setval [INDEXED-VALS FIRST] 0 [1 2 3])  but to achieve that result you have to pass it length - 1 instead of 0"><a href="#t1507343293000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:28:13</span>              gdeer81 </span><span>ha, I love when I find holes in my understanding of how the code works. my new obsession is </span><code>INDEXED-VALS</code><span> on its own as a select it totally makes sense, but change it to a transform and compose it with another navigator and you blow my cognitive budget. I thought this code was going to return the collection unchanged </span><code>(setval [INDEXED-VALS FIRST] 0 [1 2 3])</code><span> but to achieve that result you have to pass it length - 1 instead of 0</span></div><div id="t1507344199000066" t="2017-10-07 02:43:19 drewverlee So, i’m sure this has come up before. But i can’t find any discussion on it. Possible because its a nonsense idea. But isn’t HTML a deeply nested structure? Couldn’t Specter be used to manipulate it? Actual, come to think of it, is there any overlap in concept to something like jquery?"><a href="#t1507344199000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:43:19</span>           drewverlee </span><span>So, i’m sure this has come up before. But i can’t find any discussion on it. Possible because its a nonsense idea. But isn’t HTML a deeply nested structure? Couldn’t Specter be used to manipulate it? Actual, come to think of it, is there any overlap in concept to something like jquery?</span></div><div id="t1507344324000051" t="2017-10-07 02:45:24 drewverlee Also is there a way to just navigate to something based not on the path but based off some predicate? like any map with the key :foo"><a href="#t1507344324000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:45:24</span>           drewverlee </span><span>Also is there a way to just navigate to something based not on the path but based off some predicate? like any map with the key :foo</span></div><div id="t1507344362000061" t="2017-10-07 02:46:02 drewverlee um, yea. its called walker"><a href="#t1507344362000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:46:02</span>           drewverlee </span><span>um, yea. its called walker</span></div><div id="t1507345082000113" t="2017-10-07 02:58:02 gdeer81 I just realized that  (setval [INDEXED-VALS FIRST] 0 [1 2 3])  actually reverses the collection"><a href="#t1507345082000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">02:58:02</span>              gdeer81 </span><span>I just realized that </span><code>(setval [INDEXED-VALS FIRST] 0 [1 2 3])</code><span> actually reverses the collection</span></div><div id="t1507345420000072" t="2017-10-07 03:03:40 gdeer81 well anyway, I&apos;m going to put it in as a koan so it will be interesting to see how many people come to the channel to ask about this one ha"><a href="#t1507345420000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">03:03:40</span>              gdeer81 </span><span>well anyway, I&apos;m going to put it in as a koan so it will be interesting to see how many people come to the channel to ask about this one ha</span></div><div id="t1507401525000102" t="2017-10-07 18:38:45 nathanmarz @james Great screencast! I&apos;ll add it as a link to the readme"><a href="#t1507401525000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">18:38:45</span>           nathanmarz </span><span>@james Great screencast! I&apos;ll add it as a link to the readme</span></div><div id="t1507401628000023" t="2017-10-07 18:40:28 nathanmarz @drewverlee yea, Specter is perfect for manipulating HTML"><a href="#t1507401628000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">18:40:28</span>           nathanmarz </span><span>@drewverlee yea, Specter is perfect for manipulating HTML</span></div><div id="t1507401659000089" t="2017-10-07 18:40:59 nathanmarz it would be easy to make compound navigators to re-create the various query capabilities of jquery"><a href="#t1507401659000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">18:40:59</span>           nathanmarz </span><span>it would be easy to make compound navigators to re-create the various query capabilities of jquery</span></div><div id="t1507416160000072" t="2017-10-07 22:42:40 james @nathanmarz Thanks!"><a href="#t1507416160000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-07</span> <span class="t" onclick="H(this)">22:42:40</span>                james </span><span>@nathanmarz Thanks!</span></div><div id="t1507533010000128" t="2017-10-09 07:10:10 hkjels @james really good introduction! Thank you"><a href="#t1507533010000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">07:10:10</span>               hkjels </span><span>@james really good introduction! Thank you</span></div><div id="t1507533131000018" t="2017-10-09 07:12:11 hkjels are you by any chance going to make one on how to use Specter recursively as well  😆"><a href="#t1507533131000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">07:12:11</span>               hkjels </span><span>are you by any chance going to make one on how to use Specter recursively as well </span><b>😆</b></div><div id="t1507533209000062" t="2017-10-09 07:13:29 schmee @hkjels I know it’s not a screencast, but have you seen  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively ?"><a href="#t1507533209000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">07:13:29</span>               schmee </span><span>@hkjels I know it’s not a screencast, but have you seen </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively</a><span>?</span></div><div id="t1507533266000177" t="2017-10-09 07:14:26 hkjels yeah. It’s just not as easy to take in as a screencast when I have to kids running around"><a href="#t1507533266000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">07:14:26</span>               hkjels </span><span>yeah. It’s just not as easy to take in as a screencast when I have to kids running around</span></div><div id="t1507546129000291" t="2017-10-09 10:48:49 hkjels I’ve come to a point where I’m trying things at random   😡"><a href="#t1507546129000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">10:48:49</span>               hkjels </span><span>I’ve come to a point where I’m trying things at random  </span><b>😡</b></div><div id="t1507547734000024" t="2017-10-09 11:15:34 hkjels I’d really appreciate it if someone could explain what I’m doing wrong here:
 https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f"><a href="#t1507547734000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">11:15:34</span>               hkjels </span><span>I’d really appreciate it if someone could explain what I’m doing wrong here:
</span><a href="https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f" target="_blank">https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f</a></div><div id="t1507556835000493" t="2017-10-09 13:47:15 schmee @hkjels I’m not sure exactly what’s wrong but one thing is that you are not using your recursive path (`p`) anywhere"><a href="#t1507556835000493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">13:47:15</span>               schmee </span><span>@hkjels I’m not sure exactly what’s wrong but one thing is that you are not using your recursive path (`p`) anywhere</span></div><div id="t1507557723000338" t="2017-10-09 14:02:03 hkjels OK. I need to have another look at the docs"><a href="#t1507557723000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">14:02:03</span>               hkjels </span><span>OK. I need to have another look at the docs</span></div><div id="t1507574341000331" t="2017-10-09 18:39:01 michaelwfogleman @hjkels Tried to take a look but I&apos;m not sure exactly what you want - it might help to write a test to validate the output"><a href="#t1507574341000331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-09</span> <span class="t" onclick="H(this)">18:39:01</span>     michaelwfogleman </span><span>@hjkels Tried to take a look but I&apos;m not sure exactly what you want - it might help to write a test to validate the output</span></div><div id="t1507605854000143" t="2017-10-10 03:24:14 gdeer81 parinfer is a blessing and a curse"><a href="#t1507605854000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">03:24:14</span>              gdeer81 </span><span>parinfer is a blessing and a curse</span></div><div id="t1507609326000067" t="2017-10-10 04:22:06 gdeer81 latest version of the koans are up with all unparameterized and parameterized navigators covered"><a href="#t1507609326000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">04:22:06</span>              gdeer81 </span><span>latest version of the koans are up with all unparameterized and parameterized navigators covered</span></div><div id="t1507647916000823" t="2017-10-10 15:05:16 gdeer81 next step is covering the rest of the core macros in depth. I had a real chicken and egg problem when deciding how to organize the koans. it&apos;s like do I say &quot;look at  select [ALL]  ignore what  ALL  means, but here&apos;s what  select  returns vs  select-one  or do I say look what  [ALL]  does, it does something different if used with  select   setval  and  transform  but just know that no matter what you&apos;re doing, it gives you all the things&quot;"><a href="#t1507647916000823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">15:05:16</span>              gdeer81 </span><span>next step is covering the rest of the core macros in depth. I had a real chicken and egg problem when deciding how to organize the koans. it&apos;s like do I say &quot;look at </span><code>select [ALL]</code><span> ignore what </span><code>ALL</code><span> means, but here&apos;s what </span><code>select</code><span> returns vs </span><code>select-one</code><span> or do I say look what </span><code>[ALL]</code><span> does, it does something different if used with </span><code>select</code><span> </span><code>setval</code><span> and </span><code>transform</code><span> but just know that no matter what you&apos;re doing, it gives you all the things&quot;</span></div><div id="t1507650913000681" t="2017-10-10 15:55:13 nathanmarz @gdeer81 in my mind I find the easiest mental model is distinguishing between subvalue, substructure, filter, and view navigators"><a href="#t1507650913000681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">15:55:13</span>           nathanmarz </span><span>@gdeer81 in my mind I find the easiest mental model is distinguishing between subvalue, substructure, filter, and view navigators</span></div><div id="t1507650953000272" t="2017-10-10 15:55:53 nathanmarz subvalue navs I just imagine as taking me to subvalues of a data structure, and the operation (e.g. select, transform) just says what to do when I get there"><a href="#t1507650953000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">15:55:53</span>           nathanmarz </span><span>subvalue navs I just imagine as taking me to subvalues of a data structure, and the operation (e.g. select, transform) just says what to do when I get there</span></div><div id="t1507651035000552" t="2017-10-10 15:57:15 nathanmarz one example that would be good for the koans to illustrate what an operation does is  (select-any ALL data)"><a href="#t1507651035000552" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">15:57:15</span>           nathanmarz </span><span>one example that would be good for the koans to illustrate what an operation does is </span><code>(select-any ALL data)</code></div><div id="t1507651354000821" t="2017-10-10 16:02:34 gdeer81 @nathanmarz like this?  https://github.com/gdeer81/specter-koans/blob/55686414f70c8ba739c84bafffb88173b7ee9f9d/src/koans/01_selection.clj#L50"><a href="#t1507651354000821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:02:34</span>              gdeer81 </span><span>@nathanmarz like this? </span><a href="https://github.com/gdeer81/specter-koans/blob/55686414f70c8ba739c84bafffb88173b7ee9f9d/src/koans/01_selection.clj#L50" target="_blank">https://github.com/gdeer81/specter-koans/blob/55686414f70c8ba739c84bafffb88173b7ee9f9d/src/koans/01_selection.clj#L50</a></div><div id="t1507651627000675" t="2017-10-10 16:07:07 gdeer81 After watching @james screencast I think you&apos;re right, the first thing that needs to be discussed is the concept of subvalues, substructures, filters, and views"><a href="#t1507651627000675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:07:07</span>              gdeer81 </span><span>After watching @james screencast I think you&apos;re right, the first thing that needs to be discussed is the concept of subvalues, substructures, filters, and views</span></div><div id="t1507651742000448" t="2017-10-10 16:09:02 gdeer81 in koan 1 I kept running into it when illustrating navigation but never made it a first class concept"><a href="#t1507651742000448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:09:02</span>              gdeer81 </span><span>in koan 1 I kept running into it when illustrating navigation but never made it a first class concept</span></div><div id="t1507651801000070" t="2017-10-10 16:10:01 nathanmarz ah yea, that&apos;s good"><a href="#t1507651801000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:10:01</span>           nathanmarz </span><span>ah yea, that&apos;s good</span></div><div id="t1507651840000158" t="2017-10-10 16:10:40 nathanmarz a series with  select-any ,  select-first ,  select-one , and  select-one!  to show the subtle differences would be good too"><a href="#t1507651840000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:10:40</span>           nathanmarz </span><span>a series with </span><code>select-any</code><span>, </span><code>select-first</code><span>, </span><code>select-one</code><span>, and </span><code>select-one!</code><span> to show the subtle differences would be good too</span></div><div id="t1507651996000500" t="2017-10-10 16:13:16 gdeer81 Yeah, I think I can flesh out the rest of koan 1 to operate on the same data structure, the trick is finding one that&apos;s complex enough to be interesting but not so unwieldy that it ruins the learning experience"><a href="#t1507651996000500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:13:16</span>              gdeer81 </span><span>Yeah, I think I can flesh out the rest of koan 1 to operate on the same data structure, the trick is finding one that&apos;s complex enough to be interesting but not so unwieldy that it ruins the learning experience</span></div><div id="t1507652104000442" t="2017-10-10 16:15:04 gdeer81 I&apos;ve started mining github for examples by searching for repos where people have hand-written  map-vals"><a href="#t1507652104000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:15:04</span>              gdeer81 </span><span>I&apos;ve started mining github for examples by searching for repos where people have hand-written </span><code>map-vals</code></div><div id="t1507652351000507" t="2017-10-10 16:19:11 gdeer81 another one people seem to grok easily is product data. even ones with complex hierarchies"><a href="#t1507652351000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:19:11</span>              gdeer81 </span><span>another one people seem to grok easily is product data. even ones with complex hierarchies</span></div><div id="t1507652384000588" t="2017-10-10 16:19:44 nathanmarz I would start simple before getting to anything too compound"><a href="#t1507652384000588" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:19:44</span>           nathanmarz </span><span>I would start simple before getting to anything too compound</span></div><div id="t1507652425000391" t="2017-10-10 16:20:25 gdeer81 okay, I&apos;ll save it for the advanced koans then"><a href="#t1507652425000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:20:25</span>              gdeer81 </span><span>okay, I&apos;ll save it for the advanced koans then</span></div><div id="t1507652445000164" t="2017-10-10 16:20:45 nathanmarz if you want to make &quot;challenge koans&quot; towards the end, paths that require  subselect  are usually pretty challenging"><a href="#t1507652445000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:20:45</span>           nathanmarz </span><span>if you want to make &quot;challenge koans&quot; towards the end, paths that require </span><code>subselect</code><span> are usually pretty challenging</span></div><div id="t1507652865000435" t="2017-10-10 16:27:45 gdeer81 yeah, when I did the parameterized navigators koan and I got to subselect, I just copied and pasted the example from the wiki"><a href="#t1507652865000435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:27:45</span>              gdeer81 </span><span>yeah, when I did the parameterized navigators koan and I got to subselect, I just copied and pasted the example from the wiki</span></div><div id="t1507652895000369" t="2017-10-10 16:28:15 gdeer81 it hurt my brain trying to think of a practical example that would work"><a href="#t1507652895000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">16:28:15</span>              gdeer81 </span><span>it hurt my brain trying to think of a practical example that would work</span></div><div id="t1507662961000635" t="2017-10-10 19:16:01 gdeer81 after playing with  subselect  a bit I&apos;m starting to get it. basically for transforms you want to use a function that takes a collection and returns a collection. a lot of these seem tricky in isolation but once you start understanding when you would use them, they become more intuitive"><a href="#t1507662961000635" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">19:16:01</span>              gdeer81 </span><span>after playing with </span><code>subselect</code><span> a bit I&apos;m starting to get it. basically for transforms you want to use a function that takes a collection and returns a collection. a lot of these seem tricky in isolation but once you start understanding when you would use them, they become more intuitive</span></div><div id="t1507669073000183" t="2017-10-10 20:57:53 gdeer81 my next endeavor is using specter with reframe.  most reframe events have pretty small effects like &quot;add this string to the todos vector&quot; but someone once said that you don&apos;t need to have a deeply nested data structure to get the benefits of specter. so if anything I will get to play around with visualizing specter transformations with refrisk"><a href="#t1507669073000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">20:57:53</span>              gdeer81 </span><span>my next endeavor is using specter with reframe.  most reframe events have pretty small effects like &quot;add this string to the todos vector&quot; but someone once said that you don&apos;t need to have a deeply nested data structure to get the benefits of specter. so if anything I will get to play around with visualizing specter transformations with refrisk</span></div><div id="t1507670513000211" t="2017-10-10 21:21:53 nathanmarz @gdeer81 a visualizer of navigation would be a tremendous addition to the project"><a href="#t1507670513000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">21:21:53</span>           nathanmarz </span><span>@gdeer81 a visualizer of navigation would be a tremendous addition to the project</span></div><div id="t1507670523000085" t="2017-10-10 21:22:03 nathanmarz I think that would really help people get over the learning curve"><a href="#t1507670523000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">21:22:03</span>           nathanmarz </span><span>I think that would really help people get over the learning curve</span></div><div id="t1507673531000070" t="2017-10-10 22:12:11 gdeer81 awesome I was able to get reframe events and subscriptions to use specter but refrisk doesn&apos;t show enough detail to visualize the transformation. Back to the drawing board"><a href="#t1507673531000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">22:12:11</span>              gdeer81 </span><span>awesome I was able to get reframe events and subscriptions to use specter but refrisk doesn&apos;t show enough detail to visualize the transformation. Back to the drawing board</span></div><div id="t1507673732000237" t="2017-10-10 22:15:32 gdeer81 I am pretty happy I got specter working with re-frame, even though I&apos;m doing anything mind blowing  (reg-sub :counter  (fn [db _] (specter/select-any [:counter] db)))  gets the current count of the counter and  (reg-event-db :inc-counter (fn [db _] (specter/transform [:counter] inc db))  increases the counter this is wired up to a div subscribed to the count and a button to dispatch the :inc-counter event"><a href="#t1507673732000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">22:15:32</span>              gdeer81 </span><span>I am pretty happy I got specter working with re-frame, even though I&apos;m doing anything mind blowing </span><code>(reg-sub :counter  (fn [db _] (specter/select-any [:counter] db)))</code><span> gets the current count of the counter and </span><code>(reg-event-db :inc-counter (fn [db _] (specter/transform [:counter] inc db))</code><span> increases the counter this is wired up to a div subscribed to the count and a button to dispatch the :inc-counter event</span></div><div id="t1507674044000349" t="2017-10-10 22:20:44 gdeer81 and of course the db is just  {counter 0}  but I wanted to get it working before I went too crazy with the nesting"><a href="#t1507674044000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">22:20:44</span>              gdeer81 </span><span>and of course the db is just </span><code>{counter 0}</code><span> but I wanted to get it working before I went too crazy with the nesting</span></div><div id="t1507674221000091" t="2017-10-10 22:23:41 gdeer81 tonight I&apos;ll explore the re-frame library that gives you undo capabilities since that will probably keep track of before/after app db state which would be helpful with the visualization"><a href="#t1507674221000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">22:23:41</span>              gdeer81 </span><span>tonight I&apos;ll explore the re-frame library that gives you undo capabilities since that will probably keep track of before/after app db state which would be helpful with the visualization</span></div><div id="t1507678073000032" t="2017-10-10 23:27:53 michaelwfogleman @nathanmarz Venturing into the code with an initial commit of a regex navigator  - I just have select working - might need an assist with the transform implementation"><a href="#t1507678073000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">23:27:53</span>     michaelwfogleman </span><span>@nathanmarz Venturing into the code with an initial commit of a regex navigator  - I just have select working - might need an assist with the transform implementation</span></div><div id="t1507679538000042" t="2017-10-10 23:52:18 nathanmarz @michaelwfogleman a regex can match many substrings, so your implementation doesn&apos;t look right"><a href="#t1507679538000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">23:52:18</span>           nathanmarz </span><span>@michaelwfogleman a regex can match many substrings, so your implementation doesn&apos;t look right</span></div><div id="t1507679636000124" t="2017-10-10 23:53:56 nathanmarz I&apos;m not sure what replacement facilities are available in the regex api"><a href="#t1507679636000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-10</span> <span class="t" onclick="H(this)">23:53:56</span>           nathanmarz </span><span>I&apos;m not sure what replacement facilities are available in the regex api</span></div><div id="t1507711260000288" t="2017-10-11 08:41:00 hkjels I’m starting to get a feel for  recursive-path  now, but I don’t see how I can solve my problem with it.
I want to pluck all the parents of a particular map based on a predicate for that map.
The way I see it, I’ll either have to start the search from the leaves of my tree or remove branches as it goes.
The latter would require that I keep track of my tree with some local-state, so it doesn’t seem idiomatic to specter?"><a href="#t1507711260000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">08:41:00</span>               hkjels </span><span>I’m starting to get a feel for </span><code>recursive-path</code><span> now, but I don’t see how I can solve my problem with it.
I want to pluck all the parents of a particular map based on a predicate for that map.
The way I see it, I’ll either have to start the search from the leaves of my tree or remove branches as it goes.
The latter would require that I keep track of my tree with some local-state, so it doesn’t seem idiomatic to specter?</span></div><div id="t1507711455000332" t="2017-10-11 08:44:15 hkjels https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f"><a href="#t1507711455000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">08:44:15</span>               hkjels </span><a href="https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f" target="_blank">https://gist.github.com/hkjels/2bad9d432eb77c68e5dc31dc5df9f63f</a></div><div id="t1507711503000375" t="2017-10-11 08:45:03 hkjels This current solution will select the correct maps, but if I try to collect the previous result, that will happen for “bar” as well"><a href="#t1507711503000375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">08:45:03</span>               hkjels </span><span>This current solution will select the correct maps, but if I try to collect the previous result, that will happen for “bar” as well</span></div><div id="t1507720198000186" t="2017-10-11 11:09:58 hkjels Almost at a solution now"><a href="#t1507720198000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">11:09:58</span>               hkjels </span><span>Almost at a solution now</span></div><div id="t1507720301000161" t="2017-10-11 11:11:41 hkjels Can I do a transformation from within a recursive-path macro"><a href="#t1507720301000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">11:11:41</span>               hkjels </span><span>Can I do a transformation from within a recursive-path macro</span></div><div id="t1507720313000120" t="2017-10-11 11:11:53 hkjels is that frowned upon?"><a href="#t1507720313000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">11:11:53</span>               hkjels </span><span>is that frowned upon?</span></div><div id="t1507735913000416" t="2017-10-11 15:31:53 nathanmarz @hkjels not entitely clear on what you&apos;re trying to do. Are you just trying to remove the children of all nodes matching a certain name?"><a href="#t1507735913000416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">15:31:53</span>           nathanmarz </span><span>@hkjels not entitely clear on what you&apos;re trying to do. Are you just trying to remove the children of all nodes matching a certain name?</span></div><div id="t1507738008000467" t="2017-10-11 16:06:48 hkjels @nathanmarz I’m trying to retrieve all the parent nodes of nodes where the predicate is true and leave out all the children"><a href="#t1507738008000467" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:06:48</span>               hkjels </span><span>@nathanmarz I’m trying to retrieve all the parent nodes of nodes where the predicate is true and leave out all the children</span></div><div id="t1507738041000445" t="2017-10-11 16:07:21 hkjels of those nodes"><a href="#t1507738041000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:07:21</span>               hkjels </span><span>of those nodes</span></div><div id="t1507738298000261" t="2017-10-11 16:11:38 nathanmarz @hkjels so in this case you want to navigate to the parents of nodes with name &quot;qux&quot;?"><a href="#t1507738298000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:11:38</span>           nathanmarz </span><span>@hkjels so in this case you want to navigate to the parents of nodes with name &quot;qux&quot;?</span></div><div id="t1507738383000359" t="2017-10-11 16:13:03 hkjels yeah"><a href="#t1507738383000359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:13:03</span>               hkjels </span><span>yeah</span></div><div id="t1507738549000514" t="2017-10-11 16:15:49 nathanmarz looks like this:
 (def data
  {:name &quot;foo&quot;
   :children
   [{:name &quot;bar&quot;
     :children []}
    {:name &quot;baz&quot;
     :children
     [{:name &quot;qux&quot;
       :children
       [{:name &quot;NO!&quot;
         :children
         []}]}]}
    {:name &quot;hello&quot;
     :children
     [{:name &quot;world&quot;
       :children
       [{:name &quot;qux&quot;
         :children
         [{:name &quot;NO!&quot;
           :children
           []}]}]}]}]})

(def NODES
  (recursive-path [] p
    (continue-then-stay :children ALL p)))

(defn nodes-with-child [name]
  (path NODES (selected? :children ALL :name (pred= name)))
  )

(select (nodes-with-child &quot;qux&quot;) data)
"><a href="#t1507738549000514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:15:49</span>           nathanmarz </span><span>looks like this:
</span><pre>(def data
  {:name &quot;foo&quot;
   :children
   [{:name &quot;bar&quot;
     :children []}
    {:name &quot;baz&quot;
     :children
     [{:name &quot;qux&quot;
       :children
       [{:name &quot;NO!&quot;
         :children
         []}]}]}
    {:name &quot;hello&quot;
     :children
     [{:name &quot;world&quot;
       :children
       [{:name &quot;qux&quot;
         :children
         [{:name &quot;NO!&quot;
           :children
           []}]}]}]}]})

(def NODES
  (recursive-path [] p
    (continue-then-stay :children ALL p)))

(defn nodes-with-child [name]
  (path NODES (selected? :children ALL :name (pred= name)))
  )

(select (nodes-with-child &quot;qux&quot;) data)
</pre></div><div id="t1507738575000642" t="2017-10-11 16:16:15 nathanmarz easiest way to do a recursive navigation is first make a path that navigates to every node, then do whatever filtering you need on top of that"><a href="#t1507738575000642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:16:15</span>           nathanmarz </span><span>easiest way to do a recursive navigation is first make a path that navigates to every node, then do whatever filtering you need on top of that</span></div><div id="t1507739216000337" t="2017-10-11 16:26:56 hkjels Nice tip!
There’s still the issue where children of the selected node is in the structure"><a href="#t1507739216000337" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:26:56</span>               hkjels </span><span>Nice tip!
There’s still the issue where children of the selected node is in the structure</span></div><div id="t1507739347000229" t="2017-10-11 16:29:07 nathanmarz if you want the results without children then specify that in your selection"><a href="#t1507739347000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:29:07</span>           nathanmarz </span><span>if you want the results without children then specify that in your selection</span></div><div id="t1507739394000782" t="2017-10-11 16:29:54 nathanmarz (select [(nodes-with-child &quot;qux&quot;) (transformed :children (constantly NONE))] data)"><a href="#t1507739394000782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:29:54</span>           nathanmarz </span><code>(select [(nodes-with-child &quot;qux&quot;) (transformed :children (constantly NONE))] data)</code></div><div id="t1507746888000397" t="2017-10-11 18:34:48 hkjels That short-circuits the walk on the node prior to the one where the predicate is true"><a href="#t1507746888000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">18:34:48</span>                    hkjels </span><span>That short-circuits the walk on the node prior to the one where the predicate is true</span></div><div id="t1507740431000100" t="2017-10-11 16:47:11 Chris Dewar-English I want to cherry-pick a set of values from different parts of a nested structure.  Is that a reasonable thing to try to do with Specter?"><a href="#t1507740431000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:47:11</span>  Chris Dewar-English </span><span>I want to cherry-pick a set of values from different parts of a nested structure.  Is that a reasonable thing to try to do with Specter?</span></div><div id="t1507740530000510" t="2017-10-11 16:48:50 nathanmarz yes"><a href="#t1507740530000510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:48:50</span>           nathanmarz </span><span>yes</span></div><div id="t1507740687000070" t="2017-10-11 16:51:27 Chris Dewar-English I currently use  get-in  and map over the keywords to get to each value.  It works fine, but what is the principle behind doing that with specter?"><a href="#t1507740687000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:51:27</span>  Chris Dewar-English </span><span>I currently use </span><code>get-in</code><span> and map over the keywords to get to each value.  It works fine, but what is the principle behind doing that with specter?</span></div><div id="t1507740807000030" t="2017-10-11 16:53:27 Chris Dewar-English In this sample dataset  https://pastebin.com/MgtqLCXg"><a href="#t1507740807000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:53:27</span>  Chris Dewar-English </span><span>In this sample dataset </span><a href="https://pastebin.com/MgtqLCXg" target="_blank">https://pastebin.com/MgtqLCXg</a></div><div id="t1507740876000536" t="2017-10-11 16:54:36 nathanmarz if you want to get all the summaries, it&apos;s  (select [(keypath &quot;issues&quot;) ALL (keypath &quot;fields&quot; &quot;summary&quot;)] data)"><a href="#t1507740876000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:54:36</span>           nathanmarz </span><span>if you want to get all the summaries, it&apos;s </span><code>(select [(keypath &quot;issues&quot;) ALL (keypath &quot;fields&quot; &quot;summary&quot;)] data)</code></div><div id="t1507740948000195" t="2017-10-11 16:55:48 Chris Dewar-English I would like to pull multiple values, i.e. from issues/id, issues/key, issues/fields/summary, issues/fields/project/name"><a href="#t1507740948000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:55:48</span>  Chris Dewar-English </span><span>I would like to pull multiple values, i.e. from issues/id, issues/key, issues/fields/summary, issues/fields/project/name</span></div><div id="t1507740977000034" t="2017-10-11 16:56:17 Chris Dewar-English I&apos;m not sure all those selects make sense in a single navigator do they?"><a href="#t1507740977000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:56:17</span>  Chris Dewar-English </span><span>I&apos;m not sure all those selects make sense in a single navigator do they?</span></div><div id="t1507740981000149" t="2017-10-11 16:56:21 nathanmarz how do you want the results structured?"><a href="#t1507740981000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:56:21</span>           nathanmarz </span><span>how do you want the results structured?</span></div><div id="t1507741025000267" t="2017-10-11 16:57:05 Chris Dewar-English I&apos;m essentially trying to flatten the JSON data into CSV."><a href="#t1507741025000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:57:05</span>  Chris Dewar-English </span><span>I&apos;m essentially trying to flatten the JSON data into CSV.</span></div><div id="t1507741060000421" t="2017-10-11 16:57:40 Chris Dewar-English And cherry-pick just the values I need."><a href="#t1507741060000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:57:40</span>  Chris Dewar-English </span><span>And cherry-pick just the values I need.</span></div><div id="t1507741079000344" t="2017-10-11 16:57:59 nathanmarz (select [(keypath &quot;issues&quot;) ALL (collect-one (keypath &quot;id&quot;)) (keypath &quot;fields&quot;) (collect-one (keypath &quot;summary&quot;)) (keypath &quot;project&quot; &quot;name&quot;)] data)"><a href="#t1507741079000344" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:57:59</span>           nathanmarz </span><code>(select [(keypath &quot;issues&quot;) ALL (collect-one (keypath &quot;id&quot;)) (keypath &quot;fields&quot;) (collect-one (keypath &quot;summary&quot;)) (keypath &quot;project&quot; &quot;name&quot;)] data)</code></div><div id="t1507741107000330" t="2017-10-11 16:58:27 nathanmarz that will get everything you need as a vector in that order"><a href="#t1507741107000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:58:27</span>           nathanmarz </span><span>that will get everything you need as a vector in that order</span></div><div id="t1507741123000190" t="2017-10-11 16:58:43 Chris Dewar-English Ok, so drill down to the end element, but collect the values as you go?"><a href="#t1507741123000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:58:43</span>  Chris Dewar-English </span><span>Ok, so drill down to the end element, but collect the values as you go?</span></div><div id="t1507741158000549" t="2017-10-11 16:59:18 nathanmarz yes"><a href="#t1507741158000549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:59:18</span>           nathanmarz </span><span>yes</span></div><div id="t1507741184000105" t="2017-10-11 16:59:44 nathanmarz if you&apos;re doing a lot of navigation by string keys, it may be worth creating an implicit navigator for strings as is done for keywords  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1161"><a href="#t1507741184000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">16:59:44</span>           nathanmarz </span><span>if you&apos;re doing a lot of navigation by string keys, it may be worth creating an implicit navigator for strings as is done for keywords </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1161" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1161</a></div><div id="t1507741202000429" t="2017-10-11 17:00:02 nathanmarz then you can write  (select [&quot;issues&quot; ALL (collect-one &quot;id&quot;) ..."><a href="#t1507741202000429" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">17:00:02</span>           nathanmarz </span><span>then you can write </span><code>(select [&quot;issues&quot; ALL (collect-one &quot;id&quot;) ...</code></div><div id="t1507741252000655" t="2017-10-11 17:00:52 Chris Dewar-English That part is ok, the string keys are turned into keywords using Cheshire when it parses"><a href="#t1507741252000655" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">17:00:52</span>  Chris Dewar-English </span><span>That part is ok, the string keys are turned into keywords using Cheshire when it parses</span></div><div id="t1507741291000558" t="2017-10-11 17:01:31 Chris Dewar-English Regarding using  collect...  I&apos;ve just assumed  collect-one  was only applicable when doing a transform. I didn&apos;t realise it would just contain the final elements!"><a href="#t1507741291000558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">17:01:31</span>  Chris Dewar-English </span><span>Regarding using </span><code>collect...</code><span> I&apos;ve just assumed </span><code>collect-one</code><span> was only applicable when doing a transform. I didn&apos;t realise it would just contain the final elements!</span></div><div id="t1507741313000284" t="2017-10-11 17:01:53 nathanmarz yep, that&apos;s the only behavior that makes sense for  select  codepath"><a href="#t1507741313000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">17:01:53</span>           nathanmarz </span><span>yep, that&apos;s the only behavior that makes sense for </span><code>select</code><span> codepath</span></div><div id="t1507741364000599" t="2017-10-11 17:02:44 Chris Dewar-English Good stuff. Thank you, Nathan."><a href="#t1507741364000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">17:02:44</span>  Chris Dewar-English </span><span>Good stuff. Thank you, Nathan.</span></div><div id="t1507755978000185" t="2017-10-11 21:06:18 gdeer81 okay, I think I&apos;ve found an interesting data structure for learning; koan 4 will be about writing transformations to facilitate a space-shooter game. this makes the examples like this easier to read  (transform [ALL (collect-one :velocity) #(:enemy? %) :y] (fn [velocity current-y] (* velocity current-y)) entities)"><a href="#t1507755978000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">21:06:18</span>              gdeer81 </span><span>okay, I think I&apos;ve found an interesting data structure for learning; koan 4 will be about writing transformations to facilitate a space-shooter game. this makes the examples like this easier to read </span><code>(transform [ALL (collect-one :velocity) #(:enemy? %) :y] (fn [velocity current-y] (* velocity current-y)) entities)</code></div><div id="t1507756193000130" t="2017-10-11 21:09:53 gdeer81 this transformation obviously takes all the entity maps and updates every enemy&apos;s y coordinate by its velocity"><a href="#t1507756193000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">21:09:53</span>              gdeer81 </span><span>this transformation obviously takes all the entity maps and updates every enemy&apos;s y coordinate by its velocity</span></div><div id="t1507756356000158" t="2017-10-11 21:12:36 gdeer81 that can process about 5k maps in sub-miliseconds (caveat: i&apos;m using  time  as my micro-benchmark tool)"><a href="#t1507756356000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">21:12:36</span>              gdeer81 </span><span>that can process about 5k maps in sub-miliseconds (caveat: i&apos;m using </span><code>time</code><span> as my micro-benchmark tool)</span></div><div id="t1507760430000184" t="2017-10-11 22:20:30 nathanmarz @gdeer81 cool, that sounds nice and tangible"><a href="#t1507760430000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:20:30</span>           nathanmarz </span><span>@gdeer81 cool, that sounds nice and tangible</span></div><div id="t1507761381000025" t="2017-10-11 22:36:21 gdeer81 differences in decisions about how you want to manipulate the game objects easily illustrate subtle differences in navigations"><a href="#t1507761381000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:36:21</span>              gdeer81 </span><span>differences in decisions about how you want to manipulate the game objects easily illustrate subtle differences in navigations</span></div><div id="t1507762103000102" t="2017-10-11 22:48:23 michaelwfogleman @nathanmarz: Perhaps what you are thinking of is using re-seq? (re-seq #&quot;.&quot;  &quot;abc&quot;)
(&quot;a&quot; &quot;b&quot; &quot;c&quot;)"><a href="#t1507762103000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:48:23</span>     michaelwfogleman </span><span>@nathanmarz: Perhaps what you are thinking of is using re-seq? (re-seq #&quot;.&quot;  &quot;abc&quot;)
(&quot;a&quot; &quot;b&quot; &quot;c&quot;)</span></div><div id="t1507762115000230" t="2017-10-11 22:48:35 michaelwfogleman (re-seq #&quot;abc+&quot;  &quot;abc&quot;)
(&quot;abc&quot;)"><a href="#t1507762115000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:48:35</span>     michaelwfogleman </span><span>(re-seq #&quot;abc+&quot;  &quot;abc&quot;)
(&quot;abc&quot;)</span></div><div id="t1507762566000047" t="2017-10-11 22:56:06 nathanmarz @michaelwfogleman yea, that looks right"><a href="#t1507762566000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:56:06</span>           nathanmarz </span><span>@michaelwfogleman yea, that looks right</span></div><div id="t1507762699000042" t="2017-10-11 22:58:19 michaelwfogleman ok cool"><a href="#t1507762699000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:58:19</span>     michaelwfogleman </span><span>ok cool</span></div><div id="t1507762743000150" t="2017-10-11 22:59:03 michaelwfogleman going to try and poke at the transform"><a href="#t1507762743000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-11</span> <span class="t" onclick="H(this)">22:59:03</span>     michaelwfogleman </span><span>going to try and poke at the transform</span></div><div id="t1507774970000102" t="2017-10-12 02:22:50 gdeer81 can you do transforms on records? I&apos;m getting an error that specter can&apos;t create an empty record"><a href="#t1507774970000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-12</span> <span class="t" onclick="H(this)">02:22:50</span>              gdeer81 </span><span>can you do transforms on records? I&apos;m getting an error that specter can&apos;t create an empty record</span></div><div id="t1507775535000240" t="2017-10-12 02:32:15 gdeer81 oh no, I think I tried to get too clever"><a href="#t1507775535000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-12</span> <span class="t" onclick="H(this)">02:32:15</span>              gdeer81 </span><span>oh no, I think I tried to get too clever</span></div><div id="t1507915786000199" t="2017-10-13 17:29:46 michaelwfogleman @nathanmarz Do you have a sense of a transform implementation that&apos;s similar to what needs to be done for the Regex navigator?"><a href="#t1507915786000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-13</span> <span class="t" onclick="H(this)">17:29:46</span>     michaelwfogleman </span><span>@nathanmarz Do you have a sense of a transform implementation that&apos;s similar to what needs to be done for the Regex navigator?</span></div><div id="t1507916858000284" t="2017-10-13 17:47:38 nathanmarz @michaelwfogleman no, the implementation will be fairly specific to that navigator"><a href="#t1507916858000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-13</span> <span class="t" onclick="H(this)">17:47:38</span>           nathanmarz </span><span>@michaelwfogleman no, the implementation will be fairly specific to that navigator</span></div><div id="t1507916883000706" t="2017-10-13 17:48:03 nathanmarz needs to run replace matching substrings with result of running  next-fn  on the substring"><a href="#t1507916883000706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-13</span> <span class="t" onclick="H(this)">17:48:03</span>           nathanmarz </span><span>needs to run replace matching substrings with result of running </span><code>next-fn</code><span> on the substring</span></div><div id="t1507917216000658" t="2017-10-13 17:53:36 nathanmarz looks like  Pattern/split  and some of the functions in  Matcher  should be able to be used to implement it"><a href="#t1507917216000658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-13</span> <span class="t" onclick="H(this)">17:53:36</span>           nathanmarz </span><span>looks like </span><code>Pattern/split</code><span> and some of the functions in </span><code>Matcher</code><span> should be able to be used to implement it</span></div><div id="t1507918548000649" t="2017-10-13 18:15:48 michaelwfogleman Makes sense, I&apos;ll look into it"><a href="#t1507918548000649" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-13</span> <span class="t" onclick="H(this)">18:15:48</span>     michaelwfogleman </span><span>Makes sense, I&apos;ll look into it</span></div><div id="t1507948173000028" t="2017-10-14 02:29:33 aisamu Hi!
Is it possible to  collect  a value of every &quot;branch&quot; separately instead of all of them?

I&apos;m trying to get all possible  get-in  path vectors for a given nested map (preferably excluding  :root ):
 (magic {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})
 =&gt; [[:a :b] [:a :c] [:d :e] [:d :f]]`
 
The best I could manage so far was this:
 (select [MAP-VALS (collect MAP-KEYS) MAP-VALS MAP-KEYS]
        {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})
=&gt; [[[:a :d] :b] [[:a :d] :c] [[:a :d] :e] [[:a :d] :f]]
 
...which is almost there, but  collect  grabs all the branches&apos; values at every step.
I could massage that second structure into what I need, but I suspect there is a nicer way of approaching this  🙂"><a href="#t1507948173000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span> <span class="t" onclick="H(this)">02:29:33</span>               aisamu </span><span>Hi!
Is it possible to </span><code>collect</code><span> a value of every &quot;branch&quot; separately instead of all of them?

I&apos;m trying to get all possible </span><code>get-in</code><span> path vectors for a given nested map (preferably excluding </span><code>:root</code><span>):
</span><pre>(magic {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})
 =&gt; [[:a :b] [:a :c] [:d :e] [:d :f]]`
</pre><span>
The best I could manage so far was this:
</span><pre>(select [MAP-VALS (collect MAP-KEYS) MAP-VALS MAP-KEYS]
        {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})
=&gt; [[[:a :d] :b] [[:a :d] :c] [[:a :d] :e] [[:a :d] :f]]
</pre><span>
...which is almost there, but </span><code>collect</code><span> grabs all the branches&apos; values at every step.
I could massage that second structure into what I need, but I suspect there is a nicer way of approaching this </span><b>🙂</b></div><div id="t1507999032000012" t="2017-10-14 16:37:12 nathanmarz @aisamu it&apos;s like this:
 (def data {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})

(select [:root ALL (collect-one FIRST) LAST MAP-KEYS] data)
"><a href="#t1507999032000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span> <span class="t" onclick="H(this)">16:37:12</span>           nathanmarz </span><span>@aisamu it&apos;s like this:
</span><pre>(def data {:root {:a {:b 1 :c 2} :d {:e 1 :f 2}}})

(select [:root ALL (collect-one FIRST) LAST MAP-KEYS] data)
</pre></div><div id="t1507999118000034" t="2017-10-14 16:38:38 nathanmarz if your data is recursive, this example is instructive for how to collect all the paths (which can be arbitrary/varying lengths):  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure"><a href="#t1507999118000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span> <span class="t" onclick="H(this)">16:38:38</span>           nathanmarz </span><span>if your data is recursive, this example is instructive for how to collect all the paths (which can be arbitrary/varying lengths): </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure</a></div><div id="t1508002080000050" t="2017-10-14 17:28:00 aisamu Thanks! That makes a lot of sense!"><a href="#t1508002080000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span> <span class="t" onclick="H(this)">17:28:00</span>               aisamu </span><span>Thanks! That makes a lot of sense!</span></div><div id="t1508151626000078" t="2017-10-16 11:00:26 hkjels Is it possible to start a search from a trees leaves?
Or select the deepest nested match only?"><a href="#t1508151626000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">11:00:26</span>               hkjels </span><span>Is it possible to start a search from a trees leaves?
Or select the deepest nested match only?</span></div><div id="t1508167890000829" t="2017-10-16 15:31:30 borkdude I have a data structure like  {:foo [{:bar #{:a x}} {:bar #{:b c}]}  and I want to filter  :foo  by some predicate. Now I’m using  (update m :foo filter-fn)  where  filter-fn  is something like  (filter coll pred) . 
How do I write this using Specter? Does it have some filter functionality?"><a href="#t1508167890000829" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:31:30</span>             borkdude </span><span>I have a data structure like </span><code>{:foo [{:bar #{:a x}} {:bar #{:b c}]}</code><span> and I want to filter </span><code>:foo</code><span> by some predicate. Now I’m using </span><code>(update m :foo filter-fn)</code><span> where </span><code>filter-fn</code><span> is something like </span><code>(filter coll pred)</code><span>. 
How do I write this using Specter? Does it have some filter functionality?</span></div><div id="t1508168659000839" t="2017-10-16 15:44:19 nathanmarz @hkjels you could do something like that with zippers, but there&apos;s probably a better way"><a href="#t1508168659000839" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:44:19</span>           nathanmarz </span><span>@hkjels you could do something like that with zippers, but there&apos;s probably a better way</span></div><div id="t1508168715000436" t="2017-10-16 15:45:15 nathanmarz for deepest match, you could do  select  with  putval  at every recursive step, and then choose longest result at end"><a href="#t1508168715000436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:45:15</span>           nathanmarz </span><span>for deepest match, you could do </span><code>select</code><span> with </span><code>putval</code><span> at every recursive step, and then choose longest result at end</span></div><div id="t1508168782000749" t="2017-10-16 15:46:22 nathanmarz @borkdude that looks like  (setval [:foo ALL remove-fn?] NONE data)"><a href="#t1508168782000749" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:46:22</span>           nathanmarz </span><span>@borkdude that looks like </span><code>(setval [:foo ALL remove-fn?] NONE data)</code></div><div id="t1508168859000014" t="2017-10-16 15:47:39 borkdude ah great"><a href="#t1508168859000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:47:39</span>             borkdude </span><span>ah great</span></div><div id="t1508168891000100" t="2017-10-16 15:48:11 borkdude so setting NONE is semantically equivalent to removing an element in Specter"><a href="#t1508168891000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:48:11</span>             borkdude </span><span>so setting NONE is semantically equivalent to removing an element in Specter</span></div><div id="t1508169099000254" t="2017-10-16 15:51:39 nathanmarz yes"><a href="#t1508169099000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:51:39</span>           nathanmarz </span><span>yes</span></div><div id="t1508169268000452" t="2017-10-16 15:54:28 hkjels @nathanmarz I was overcomplicating it. I realized that I always need the fift level or deeper, so a simple predicate solved it"><a href="#t1508169268000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:54:28</span>               hkjels </span><span>@nathanmarz I was overcomplicating it. I realized that I always need the fift level or deeper, so a simple predicate solved it</span></div><div id="t1508169473000413" t="2017-10-16 15:57:53 borkdude Maybe there should be a Specter course on Clojure Academy  🙂"><a href="#t1508169473000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">15:57:53</span>             borkdude </span><span>Maybe there should be a Specter course on Clojure Academy </span><b>🙂</b></div><div id="t1508169929000503" t="2017-10-16 16:05:29 borkdude Almost what I want:
 (def data {:foo [{:bar [:a]}
                 {:bar [:a :b]}
                 {:bar [:c]}]})

(setval
 [:foo ALL :bar
  #(seq (set/intersection #{:a}
                          (set %)))]
 NONE
 data) ;;=&gt; {:foo [{} {} {:bar [:c]}]}
"><a href="#t1508169929000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:05:29</span>             borkdude </span><span>Almost what I want:
</span><pre>(def data {:foo [{:bar [:a]}
                 {:bar [:a :b]}
                 {:bar [:c]}]})

(setval
 [:foo ALL :bar
  #(seq (set/intersection #{:a}
                          (set %)))]
 NONE
 data) ;;=&gt; {:foo [{} {} {:bar [:c]}]}
</pre></div><div id="t1508169934000123" t="2017-10-16 16:05:34 borkdude but I want to get rid of the empty maps"><a href="#t1508169934000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:05:34</span>             borkdude </span><span>but I want to get rid of the empty maps</span></div><div id="t1508170002000064" t="2017-10-16 16:06:42 borkdude This works:
 (setval
 [:foo ALL
  #(seq (set/intersection #{:a}
                          (set (:bar %))))]
 NONE
 data)
"><a href="#t1508170002000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:06:42</span>             borkdude </span><span>This works:
</span><pre>(setval
 [:foo ALL
  #(seq (set/intersection #{:a}
                          (set (:bar %))))]
 NONE
 data)
</pre></div><div id="t1508170076000650" t="2017-10-16 16:07:56 hkjels More learning-material would be great. I saw one of your talks on Specter yesterday @nathanmarz and was really impressed by your presentation skills"><a href="#t1508170076000650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:07:56</span>               hkjels </span><span>More learning-material would be great. I saw one of your talks on Specter yesterday @nathanmarz and was really impressed by your presentation skills</span></div><div id="t1508170092000090" t="2017-10-16 16:08:12 hkjels well done"><a href="#t1508170092000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:08:12</span>               hkjels </span><span>well done</span></div><div id="t1508170221000307" t="2017-10-16 16:10:21 borkdude actually it doesn’t work yet, hang on"><a href="#t1508170221000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:10:21</span>             borkdude </span><span>actually it doesn’t work yet, hang on</span></div><div id="t1508170251000607" t="2017-10-16 16:10:51 borkdude the predicate should be reversed, so with  empty?   🙂"><a href="#t1508170251000607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:10:51</span>             borkdude </span><span>the predicate should be reversed, so with </span><code>empty?</code><span> </span><b>🙂</b></div><div id="t1508170478000532" t="2017-10-16 16:14:38 borkdude How do I update two paths in parallel, e.g.  {:foo 1 :bar 2} ,  (transform [#{:foo :bar} inc]) , is this possible?"><a href="#t1508170478000532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:14:38</span>             borkdude </span><span>How do I update two paths in parallel, e.g. </span><code>{:foo 1 :bar 2}</code><span>, </span><code>(transform [#{:foo :bar} inc])</code><span>, is this possible?</span></div><div id="t1508170727000561" t="2017-10-16 16:18:47 borkdude ah, multi-path"><a href="#t1508170727000561" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">16:18:47</span>             borkdude </span><span>ah, multi-path</span></div><div id="t1508174461000046" t="2017-10-16 17:21:01 nathanmarz @borkdude for your empty map issue:
 (setval
  [:foo
   ALL
   (multi-path
     [:bar (selected? ALL (pred= :a))]
     empty?)]
  NONE
  data)
"><a href="#t1508174461000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:21:01</span>           nathanmarz </span><span>@borkdude for your empty map issue:
</span><pre>(setval
  [:foo
   ALL
   (multi-path
     [:bar (selected? ALL (pred= :a))]
     empty?)]
  NONE
  data)
</pre></div><div id="t1508174474000555" t="2017-10-16 17:21:14 nathanmarz @hkjels thanks"><a href="#t1508174474000555" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:21:14</span>           nathanmarz </span><span>@hkjels thanks</span></div><div id="t1508174497000020" t="2017-10-16 17:21:37 nathanmarz the wiki is much better nowadays and there was a screencast released recently"><a href="#t1508174497000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:21:37</span>           nathanmarz </span><span>the wiki is much better nowadays and there was a screencast released recently</span></div><div id="t1508174503000038" t="2017-10-16 17:21:43 nathanmarz linked on the readme"><a href="#t1508174503000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:21:43</span>           nathanmarz </span><span>linked on the readme</span></div><div id="t1508175260000709" t="2017-10-16 17:34:20 borkdude @nathanmarz that’s awesome"><a href="#t1508175260000709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:34:20</span>             borkdude </span><span>@nathanmarz that’s awesome</span></div><div id="t1508176137000100" t="2017-10-16 17:48:57 borkdude @nathanmarz If I understand correctly, the function  empty?  is a selector for the path  :bar , after the right path has been applied, so it removes the empty map?"><a href="#t1508176137000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:48:57</span>             borkdude </span><span>@nathanmarz If I understand correctly, the function </span><code>empty?</code><span> is a selector for the path </span><code>:bar</code><span>, after the right path has been applied, so it removes the empty map?</span></div><div id="t1508176442000173" t="2017-10-16 17:54:02 borkdude On the wiki it says: for transforms it applies in order"><a href="#t1508176442000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:54:02</span>             borkdude </span><span>On the wiki it says: for transforms it applies in order</span></div><div id="t1508176520000147" t="2017-10-16 17:55:20 nathanmarz empty? is a filter run after removal of :bar values matching the first path"><a href="#t1508176520000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:55:20</span>           nathanmarz </span><span>empty? is a filter run after removal of :bar values matching the first path</span></div><div id="t1508176788000427" t="2017-10-16 17:59:48 borkdude ah now I get it, I read it wrong, as if  :bar  and  (selected? ....)  were both paths, but  empty?  itself is a “path” on the value returned by the previous path"><a href="#t1508176788000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">17:59:48</span>             borkdude </span><span>ah now I get it, I read it wrong, as if </span><code>:bar</code><span> and </span><code>(selected? ....)</code><span> were both paths, but </span><code>empty?</code><span> itself is a “path” on the value returned by the previous path</span></div><div id="t1508176842000425" t="2017-10-16 18:00:42 nathanmarz yea, that&apos;s right"><a href="#t1508176842000425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:00:42</span>           nathanmarz </span><span>yea, that&apos;s right</span></div><div id="t1508176996000266" t="2017-10-16 18:03:16 nathanmarz that&apos;s also much more efficient than the set intersection approach"><a href="#t1508176996000266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:03:16</span>           nathanmarz </span><span>that&apos;s also much more efficient than the set intersection approach</span></div><div id="t1508177091000314" t="2017-10-16 18:04:51 borkdude and because selected? stops the navigation, what is returned is the empty map, because no key-vals have been selected because pred= returned false"><a href="#t1508177091000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:04:51</span>             borkdude </span><span>and because selected? stops the navigation, what is returned is the empty map, because no key-vals have been selected because pred= returned false</span></div><div id="t1508177109000733" t="2017-10-16 18:05:09 borkdude correct?"><a href="#t1508177109000733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:05:09</span>             borkdude </span><span>correct?</span></div><div id="t1508177140000002" t="2017-10-16 18:05:40 borkdude those are patterns worth remembering"><a href="#t1508177140000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:05:40</span>             borkdude </span><span>those are patterns worth remembering</span></div><div id="t1508177632000656" t="2017-10-16 18:13:52 nathanmarz well, selected? is run on the value of  :bar"><a href="#t1508177632000656" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:13:52</span>           nathanmarz </span><span>well, selected? is run on the value of </span><code>:bar</code></div><div id="t1508177644000681" t="2017-10-16 18:14:04 nathanmarz it selects any vectors that have  :a  in them"><a href="#t1508177644000681" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:14:04</span>           nathanmarz </span><span>it selects any vectors that have </span><code>:a</code><span> in them</span></div><div id="t1508177670000169" t="2017-10-16 18:14:30 nathanmarz which is then set to  NONE , removing the key/val pair from the map"><a href="#t1508177670000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:14:30</span>           nathanmarz </span><span>which is then set to </span><code>NONE</code><span>, removing the key/val pair from the map</span></div><div id="t1508177682000533" t="2017-10-16 18:14:42 nathanmarz then empty? is run, removing any maps from the vector that are now empty"><a href="#t1508177682000533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:14:42</span>           nathanmarz </span><span>then empty? is run, removing any maps from the vector that are now empty</span></div><div id="t1508178123000238" t="2017-10-16 18:22:03 borkdude well, I need to check for multiple values, so I need the intersection, like this:
 (setval
 [:foo
  ALL
  (multi-path
   [:bar (selected? #(empty? (set/intersection #{:a :b} %)))]
   empty?)]
 NONE
 data)
"><a href="#t1508178123000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:22:03</span>             borkdude </span><span>well, I need to check for multiple values, so I need the intersection, like this:
</span><pre>(setval
 [:foo
  ALL
  (multi-path
   [:bar (selected? #(empty? (set/intersection #{:a :b} %)))]
   empty?)]
 NONE
 data)
</pre></div><div id="t1508178252000232" t="2017-10-16 18:24:12 nathanmarz you can do  [:bar (selected? ALL #{:a :b})]"><a href="#t1508178252000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:24:12</span>           nathanmarz </span><span>you can do </span><code>[:bar (selected? ALL #{:a :b})]</code></div><div id="t1508178271000381" t="2017-10-16 18:24:31 nathanmarz there&apos;s also no point to using  selected?  with only a function"><a href="#t1508178271000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:24:31</span>           nathanmarz </span><span>there&apos;s also no point to using </span><code>selected?</code><span> with only a function</span></div><div id="t1508178287000122" t="2017-10-16 18:24:47 nathanmarz sets are implicit filter predicates in specter"><a href="#t1508178287000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:24:47</span>           nathanmarz </span><span>sets are implicit filter predicates in specter</span></div><div id="t1508178296000328" t="2017-10-16 18:24:56 nathanmarz interpreted equivalent to a clojure function"><a href="#t1508178296000328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-16</span> <span class="t" onclick="H(this)">18:24:56</span>           nathanmarz </span><span>interpreted equivalent to a clojure function</span></div><div id="t1508252287000421" t="2017-10-17 14:58:07 borkdude This code does what I want:
 (def data (let [inner-data [{:bar #{:a}}
                            {:bar #{:a :b}}
                            {:bar #{:c}}]]
            {:a inner-data
             :b inner-data}))

(setval
 [(multi-path :a :b)
  ALL
  (multi-path
   [:bar (selected? ALL
                    (comp not #{:a :b}))]
   empty?)]
 NONE
 data)
 
but not in the case of  nil  or  {} , then it adds keys with nil"><a href="#t1508252287000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">14:58:07</span>             borkdude </span><span>This code does what I want:
</span><pre>(def data (let [inner-data [{:bar #{:a}}
                            {:bar #{:a :b}}
                            {:bar #{:c}}]]
            {:a inner-data
             :b inner-data}))

(setval
 [(multi-path :a :b)
  ALL
  (multi-path
   [:bar (selected? ALL
                    (comp not #{:a :b}))]
   empty?)]
 NONE
 data)
</pre><span>
but not in the case of </span><code>nil</code><span> or </span><code>{}</code><span>, then it adds keys with nil</span></div><div id="t1508252370000325" t="2017-10-17 14:59:30 nathanmarz @borkdude nil or {} for what?"><a href="#t1508252370000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">14:59:30</span>           nathanmarz </span><span>@borkdude nil or {} for what?</span></div><div id="t1508252374000274" t="2017-10-17 14:59:34 nathanmarz the inner maps?"><a href="#t1508252374000274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">14:59:34</span>           nathanmarz </span><span>the inner maps?</span></div><div id="t1508252385000566" t="2017-10-17 14:59:45 borkdude the result,  {:a nil, :b nil}"><a href="#t1508252385000566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">14:59:45</span>             borkdude </span><span>the result, </span><code>{:a nil, :b nil}</code></div><div id="t1508252439000675" t="2017-10-17 15:00:39 nathanmarz not following"><a href="#t1508252439000675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:00:39</span>           nathanmarz </span><span>not following</span></div><div id="t1508252457000293" t="2017-10-17 15:00:57 borkdude (setval
 [(multi-path :a :b)
  ALL
  (multi-path
   [:bar (selected? ALL
                    (comp not #{:a :b}))]
   empty?)]
 NONE
 nil)
"><a href="#t1508252457000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:00:57</span>             borkdude </span><pre>(setval
 [(multi-path :a :b)
  ALL
  (multi-path
   [:bar (selected? ALL
                    (comp not #{:a :b}))]
   empty?)]
 NONE
 nil)
</pre></div><div id="t1508252468000086" t="2017-10-17 15:01:08 nathanmarz ah"><a href="#t1508252468000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:01:08</span>           nathanmarz </span><span>ah</span></div><div id="t1508252474000172" t="2017-10-17 15:01:14 borkdude ;;=&gt; {:a nil, :b nil}"><a href="#t1508252474000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:01:14</span>             borkdude </span><code>;;=&gt; {:a nil, :b nil}</code></div><div id="t1508252481000222" t="2017-10-17 15:01:21 nathanmarz you can use  (multi-path (must :a) (must :b))"><a href="#t1508252481000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:01:21</span>           nathanmarz </span><span>you can use </span><code>(multi-path (must :a) (must :b))</code></div><div id="t1508252501000887" t="2017-10-17 15:01:41 borkdude ah, a new construct… going to the wiki  🙂"><a href="#t1508252501000887" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:01:41</span>             borkdude </span><span>ah, a new construct… going to the wiki </span><b>🙂</b></div><div id="t1508252543000138" t="2017-10-17 15:02:23 borkdude when do you not want the behavior of  must ?"><a href="#t1508252543000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:02:23</span>             borkdude </span><span>when do you not want the behavior of </span><code>must</code><span>?</span></div><div id="t1508252596000622" t="2017-10-17 15:03:16 borkdude I mean, why is it not the default"><a href="#t1508252596000622" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:03:16</span>             borkdude </span><span>I mean, why is it not the default</span></div><div id="t1508252663000253" t="2017-10-17 15:04:23 nathanmarz i&apos;ve found the need to definitely navigate to a key is far more common"><a href="#t1508252663000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:04:23</span>           nathanmarz </span><span>i&apos;ve found the need to definitely navigate to a key is far more common</span></div><div id="t1508252665000167" t="2017-10-17 15:04:25 nathanmarz and it&apos;s faster"><a href="#t1508252665000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:04:25</span>           nathanmarz </span><span>and it&apos;s faster</span></div><div id="t1508252695000009" t="2017-10-17 15:04:55 nathanmarz also  (update {} :a identity) ;; =&gt; {:a nil}"><a href="#t1508252695000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:04:55</span>           nathanmarz </span><span>also </span><code>(update {} :a identity) ;; =&gt; {:a nil}</code></div><div id="t1508252781000214" t="2017-10-17 15:06:21 borkdude ah"><a href="#t1508252781000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">15:06:21</span>             borkdude </span><span>ah</span></div><div id="t1508257112000149" t="2017-10-17 16:18:32 borkdude Still I find the code incredibly hard to read compared to normal Clojure…"><a href="#t1508257112000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">16:18:32</span>             borkdude </span><span>Still I find the code incredibly hard to read compared to normal Clojure…</span></div><div id="t1508257128000411" t="2017-10-17 16:18:48 nathanmarz Specter 1.0.4 released"><a href="#t1508257128000411" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">16:18:48</span>           nathanmarz </span><span>Specter 1.0.4 released</span></div><div id="t1508257161000220" t="2017-10-17 16:19:21 borkdude Congrats on the new release"><a href="#t1508257161000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">16:19:21</span>             borkdude </span><span>Congrats on the new release</span></div><div id="t1508259290000291" t="2017-10-17 16:54:50 jeaye @nathanmarz Do you recommend using specter in lieu of clojure.core fns always? Or perhaps only when either 1) it&apos;s known to be faster; 2) it provides a much more robust solution;"><a href="#t1508259290000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">16:54:50</span>                jeaye </span><span>@nathanmarz Do you recommend using specter in lieu of clojure.core fns always? Or perhaps only when either 1) it&apos;s known to be faster; 2) it provides a much more robust solution;</span></div><div id="t1508259444000503" t="2017-10-17 16:57:24 jeaye Based on the benchmarks, it looks like specter isn&apos;t always faster. On a team, this makes it harder to bring in, since one can&apos;t just say &quot;We&apos;re using specter for data access now; it&apos;s faster and more robust.&quot; Unfortunately, the ruleset of when to use it (i.e.  get-in  seems slow,  transform  is very fast, unless you&apos;re doing a  mapv ) is complex, then makes it much more expensive to adopt and learn."><a href="#t1508259444000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">16:57:24</span>                jeaye </span><span>Based on the benchmarks, it looks like specter isn&apos;t always faster. On a team, this makes it harder to bring in, since one can&apos;t just say &quot;We&apos;re using specter for data access now; it&apos;s faster and more robust.&quot; Unfortunately, the ruleset of when to use it (i.e. </span><code>get-in</code><span> seems slow, </span><code>transform</code><span> is very fast, unless you&apos;re doing a </span><code>mapv</code><span>) is complex, then makes it much more expensive to adopt and learn.</span></div><div id="t1508260047000507" t="2017-10-17 17:07:27 nathanmarz @jeaye I use it always when it&apos;s more elegant than trying to do it in vanilla Clojure"><a href="#t1508260047000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:07:27</span>           nathanmarz </span><span>@jeaye I use it always when it&apos;s more elegant than trying to do it in vanilla Clojure</span></div><div id="t1508260240000295" t="2017-10-17 17:10:40 nathanmarz the overhead is generally quite small even for cases where the vanilla Clojure is just as elegant"><a href="#t1508260240000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:10:40</span>           nathanmarz </span><span>the overhead is generally quite small even for cases where the vanilla Clojure is just as elegant</span></div><div id="t1508260259000369" t="2017-10-17 17:10:59 nathanmarz the notable exception is  (select-any [:a :b :c] data)  vs.  (-&gt; data :a :b :c)"><a href="#t1508260259000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:10:59</span>           nathanmarz </span><span>the notable exception is </span><code>(select-any [:a :b :c] data)</code><span> vs. </span><code>(-&gt; data :a :b :c)</code></div><div id="t1508260316000056" t="2017-10-17 17:11:56 nathanmarz I do believe it&apos;s possible to eliminate most of the overhead for that with additional work on Specter"><a href="#t1508260316000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:11:56</span>           nathanmarz </span><span>I do believe it&apos;s possible to eliminate most of the overhead for that with additional work on Specter</span></div><div id="t1508260361000624" t="2017-10-17 17:12:41 nathanmarz though for a case like that I would do the latter expression in my own code since it&apos;s elegant"><a href="#t1508260361000624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:12:41</span>           nathanmarz </span><span>though for a case like that I would do the latter expression in my own code since it&apos;s elegant</span></div><div id="t1508261243000456" t="2017-10-17 17:27:23 jeaye Word. Thanks for the info and congrats on the 1.0.4 release."><a href="#t1508261243000456" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:27:23</span>                jeaye </span><span>Word. Thanks for the info and congrats on the 1.0.4 release.</span></div><div id="t1508262119000286" t="2017-10-17 17:41:59 tanzoniteblack is there a way to use specter to select only distinct values (besides the obvious of  (distinct (specter/select apath structure))  which requires looping through the final result)"><a href="#t1508262119000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:41:59</span>       tanzoniteblack </span><span>is there a way to use specter to select only distinct values (besides the obvious of </span><code>(distinct (specter/select apath structure))</code><span> which requires looping through the final result)</span></div><div id="t1508262174000101" t="2017-10-17 17:42:54 tanzoniteblack (not that this is really a huge performance hit, but just curious)"><a href="#t1508262174000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:42:54</span>       tanzoniteblack </span><span>(not that this is really a huge performance hit, but just curious)</span></div><div id="t1508262457000820" t="2017-10-17 17:47:37 nathanmarz @tanzoniteblack you can do  (into #{} (traverse apath structure))"><a href="#t1508262457000820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:47:37</span>           nathanmarz </span><span>@tanzoniteblack you can do </span><code>(into #{} (traverse apath structure))</code></div><div id="t1508262463000038" t="2017-10-17 17:47:43 nathanmarz that&apos;s the fastest"><a href="#t1508262463000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:47:43</span>           nathanmarz </span><span>that&apos;s the fastest</span></div><div id="t1508262475000310" t="2017-10-17 17:47:55 tanzoniteblack not the same though, since set&apos;s don&apos;t retain the order (which is important in this case)"><a href="#t1508262475000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:47:55</span>       tanzoniteblack </span><span>not the same though, since set&apos;s don&apos;t retain the order (which is important in this case)</span></div><div id="t1508262518000171" t="2017-10-17 17:48:38 tanzoniteblack (which I didn&apos;t specify in my question  🙂  , but  distinct  does retain the order, which is a useful property in my case)"><a href="#t1508262518000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:48:38</span>       tanzoniteblack </span><span>(which I didn&apos;t specify in my question </span><b>🙂</b><span> , but </span><code>distinct</code><span> does retain the order, which is a useful property in my case)</span></div><div id="t1508262697000649" t="2017-10-17 17:51:37 nathanmarz distinct  is the easiest, though  traverse  just returns a reducible so you can do it faster if needed"><a href="#t1508262697000649" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:51:37</span>           nathanmarz </span><code>distinct</code><span> is the easiest, though </span><code>traverse</code><span> just returns a reducible so you can do it faster if needed</span></div><div id="t1508262722000028" t="2017-10-17 17:52:02 nathanmarz reduce  over the  traverse  return to add into a vector while keeping a mutable set in scope in order to not append duplicates"><a href="#t1508262722000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:52:02</span>           nathanmarz </span><code>reduce</code><span> over the </span><code>traverse</code><span> return to add into a vector while keeping a mutable set in scope in order to not append duplicates</span></div><div id="t1508262768000274" t="2017-10-17 17:52:48 tanzoniteblack thanks"><a href="#t1508262768000274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:52:48</span>       tanzoniteblack </span><span>thanks</span></div><div id="t1508262811000236" t="2017-10-17 17:53:31 nathanmarz actually  (into [] (distinct) (traverse apath structure))  might be equivalent to that"><a href="#t1508262811000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:53:31</span>           nathanmarz </span><span>actually </span><code>(into [] (distinct) (traverse apath structure))</code><span> might be equivalent to that</span></div><div id="t1508262877000244" t="2017-10-17 17:54:37 nathanmarz yea it is:
 user=&gt; (into [] (distinct) (traverse ALL [1 2 3 4 5 2 1 7]))
[1 2 3 4 5 7]
"><a href="#t1508262877000244" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:54:37</span>           nathanmarz </span><span>yea it is:
</span><pre>user=&gt; (into [] (distinct) (traverse ALL [1 2 3 4 5 2 1 7]))
[1 2 3 4 5 7]
</pre></div><div id="t1508262916000445" t="2017-10-17 17:55:16 tanzoniteblack nice to know I can use  traverse  with transducers"><a href="#t1508262916000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:55:16</span>       tanzoniteblack </span><span>nice to know I can use </span><code>traverse</code><span> with transducers</span></div><div id="t1508262950000220" t="2017-10-17 17:55:50 nathanmarz you can also make a specter-based transducer with  traverse-all"><a href="#t1508262950000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">17:55:50</span>           nathanmarz </span><span>you can also make a specter-based transducer with </span><code>traverse-all</code></div><div id="t1508266998000499" t="2017-10-17 19:03:18 borkdude @nathanmarz When you do a multi-path over an  ALL , will it iterate multiple times over the sequence? My code now looks like this:
 (setval
      [(multi-path (must :report) (must :highlights))
       ALL
       (multi-path
        [:pico
         #(not (some (set picos) %))]
        ;; if key is removed, remove the map entirely
        (comp not :pico))]
      NONE
      results)
"><a href="#t1508266998000499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:03:18</span>             borkdude </span><span>@nathanmarz When you do a multi-path over an </span><code>ALL</code><span>, will it iterate multiple times over the sequence? My code now looks like this:
</span><pre>(setval
      [(multi-path (must :report) (must :highlights))
       ALL
       (multi-path
        [:pico
         #(not (some (set picos) %))]
        ;; if key is removed, remove the map entirely
        (comp not :pico))]
      NONE
      results)
</pre></div><div id="t1508267035000478" t="2017-10-17 19:03:55 borkdude but I could have used just a filter/remove function on the ALL"><a href="#t1508267035000478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:03:55</span>             borkdude </span><span>but I could have used just a filter/remove function on the ALL</span></div><div id="t1508267230000425" t="2017-10-17 19:07:10 borkdude I could imagine that specter fuses these operations"><a href="#t1508267230000425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:07:10</span>             borkdude </span><span>I could imagine that specter fuses these operations</span></div><div id="t1508267585000368" t="2017-10-17 19:13:05 nathanmarz that does not iterate over any sequence multiple times"><a href="#t1508267585000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:13:05</span>           nathanmarz </span><span>that does not iterate over any sequence multiple times</span></div><div id="t1508267650000545" t="2017-10-17 19:14:10 borkdude I think this is more readable though:
 (transform
      [(multi-path (must :report) (must :highlights))]
      #(remove
        (fn [m]
          (not (some (set picos) (:pico m)))) %)
      results)
"><a href="#t1508267650000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:14:10</span>             borkdude </span><span>I think this is more readable though:
</span><pre>(transform
      [(multi-path (must :report) (must :highlights))]
      #(remove
        (fn [m]
          (not (some (set picos) (:pico m)))) %)
      results)
</pre></div><div id="t1508267666000050" t="2017-10-17 19:14:26 borkdude but good to know it doesn’t iterate multiple times"><a href="#t1508267666000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:14:26</span>             borkdude </span><span>but good to know it doesn’t iterate multiple times</span></div><div id="t1508267965000166" t="2017-10-17 19:19:25 nathanmarz @borkdude the specter version can be done much simpler:
 (setval
  [(multi-path (must :report) (must :highlights))
   ALL
   (selected? :pico ALL (pred (set picos)))]
  NONE
  results)
"><a href="#t1508267965000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:19:25</span>           nathanmarz </span><span>@borkdude the specter version can be done much simpler:
</span><pre>(setval
  [(multi-path (must :report) (must :highlights))
   ALL
   (selected? :pico ALL (pred (set picos)))]
  NONE
  results)
</pre></div><div id="t1508268096000170" t="2017-10-17 19:21:36 borkdude nice!"><a href="#t1508268096000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:21:36</span>             borkdude </span><span>nice!</span></div><div id="t1508269159000194" t="2017-10-17 19:39:19 borkdude The problem is that  I need something slightly different:

 (def picos [:a :b])
(def results {:highlights [{:pico [:a]}    ;; keep
                           {:pico [:a :b]} ;; keep
                           {:pico [:c]}    ;; drop
                           {:pico [:c :d]} ;; drop
                           {:pico [:c :a]}]}) ;;keep

(transform
 [(multi-path (must :report) (must :highlights))]
 #(remove
   (fn [m]
     (not (some (set picos) (:pico m)))) %)
 results) ;;=&gt; {:highlights ({:pico [:a]} {:pico [:a :b]} {:pico [:c :a]})}
"><a href="#t1508269159000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:39:19</span>             borkdude </span><span>The problem is that  I need something slightly different:

</span><pre>(def picos [:a :b])
(def results {:highlights [{:pico [:a]}    ;; keep
                           {:pico [:a :b]} ;; keep
                           {:pico [:c]}    ;; drop
                           {:pico [:c :d]} ;; drop
                           {:pico [:c :a]}]}) ;;keep

(transform
 [(multi-path (must :report) (must :highlights))]
 #(remove
   (fn [m]
     (not (some (set picos) (:pico m)))) %)
 results) ;;=&gt; {:highlights ({:pico [:a]} {:pico [:a :b]} {:pico [:c :a]})}
</pre></div><div id="t1508269200000751" t="2017-10-17 19:40:00 borkdude so something like  (selected? :pico ANY (pred (comp not (set picos))))"><a href="#t1508269200000751" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:40:00</span>             borkdude </span><span>so something like </span><code>(selected? :pico ANY (pred (comp not (set picos))))</code></div><div id="t1508269209000120" t="2017-10-17 19:40:09 borkdude but I didn’t find something like  ANY"><a href="#t1508269209000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:40:09</span>             borkdude </span><span>but I didn’t find something like </span><code>ANY</code></div><div id="t1508269587000438" t="2017-10-17 19:46:27 nathanmarz ah you just need  (not-selected? ALL (set picos))"><a href="#t1508269587000438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:46:27</span>           nathanmarz </span><span>ah you just need </span><code>(not-selected? ALL (set picos))</code></div><div id="t1508269631000002" t="2017-10-17 19:47:11 borkdude that works"><a href="#t1508269631000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:47:11</span>             borkdude </span><span>that works</span></div><div id="t1508269675000185" t="2017-10-17 19:47:55 nathanmarz btw, the  pred  is only there for performance, and is only needed if  picos  is a local variable"><a href="#t1508269675000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:47:55</span>           nathanmarz </span><span>btw, the </span><code>pred</code><span> is only there for performance, and is only needed if </span><code>picos</code><span> is a local variable</span></div><div id="t1508269910000612" t="2017-10-17 19:51:50 borkdude in my original code it is a local"><a href="#t1508269910000612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:51:50</span>             borkdude </span><span>in my original code it is a local</span></div><div id="t1508270383000426" t="2017-10-17 19:59:43 nathanmarz the specter version will also preserve the sequence type"><a href="#t1508270383000426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">19:59:43</span>           nathanmarz </span><span>the specter version will also preserve the sequence type</span></div><div id="t1508270421000117" t="2017-10-17 20:00:21 borkdude yes, that’s a bonus"><a href="#t1508270421000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:00:21</span>             borkdude </span><span>yes, that’s a bonus</span></div><div id="t1508270444000185" t="2017-10-17 20:00:44 nathanmarz also will only convert  picos  to a set once, instead of for every element"><a href="#t1508270444000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:00:44</span>           nathanmarz </span><span>also will only convert </span><code>picos</code><span> to a set once, instead of for every element</span></div><div id="t1508270475000302" t="2017-10-17 20:01:15 borkdude What is the explanation of this result? I don’t understand  selected?  and  not-selected?  well enough.
 (select [(selected? ALL odd?)] [1 2 3]) ;;=&gt; [[1 2 3]]"><a href="#t1508270475000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:01:15</span>             borkdude </span><span>What is the explanation of this result? I don’t understand </span><code>selected?</code><span> and </span><code>not-selected?</code><span> well enough.
</span><code>(select [(selected? ALL odd?)] [1 2 3]) ;;=&gt; [[1 2 3]]</code></div><div id="t1508270523000609" t="2017-10-17 20:02:03 nathanmarz selected?  stays navigated if the path selects at least one value"><a href="#t1508270523000609" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:02:03</span>           nathanmarz </span><code>selected?</code><span> stays navigated if the path selects at least one value</span></div><div id="t1508270545000369" t="2017-10-17 20:02:25 nathanmarz in this case it&apos;s run on the root, and it is true"><a href="#t1508270545000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:02:25</span>           nathanmarz </span><span>in this case it&apos;s run on the root, and it is true</span></div><div id="t1508270558000432" t="2017-10-17 20:02:38 nathanmarz so it selects the root  [1 2 3]"><a href="#t1508270558000432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:02:38</span>           nathanmarz </span><span>so it selects the root </span><code>[1 2 3]</code></div><div id="t1508270565000650" t="2017-10-17 20:02:45 borkdude ah, that’s it"><a href="#t1508270565000650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:02:45</span>             borkdude </span><span>ah, that’s it</span></div><div id="t1508270773000495" t="2017-10-17 20:06:13 borkdude so with a local I need  (pred (set picos))  and then it will substitute the value of the expression?"><a href="#t1508270773000495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:06:13</span>             borkdude </span><span>so with a local I need </span><code>(pred (set picos))</code><span> and then it will substitute the value of the expression?</span></div><div id="t1508271261000680" t="2017-10-17 20:14:21 nathanmarz the  pred  in that case avoids a runtime conversion from an implicit navigator (a set) to a navigator"><a href="#t1508271261000680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:14:21</span>           nathanmarz </span><span>the </span><code>pred</code><span> in that case avoids a runtime conversion from an implicit navigator (a set) to a navigator</span></div><div id="t1508271332000130" t="2017-10-17 20:15:32 nathanmarz sets are implicitly wrapped in  pred , but if the value at a spot is dynamic, then specter cannot know that until runtime"><a href="#t1508271332000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:15:32</span>           nathanmarz </span><span>sets are implicitly wrapped in </span><code>pred</code><span>, but if the value at a spot is dynamic, then specter cannot know that until runtime</span></div><div id="t1508271376000164" t="2017-10-17 20:16:16 nathanmarz it&apos;s not a huge deal, but it is a protocol invocation"><a href="#t1508271376000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-17</span> <span class="t" onclick="H(this)">20:16:16</span>           nathanmarz </span><span>it&apos;s not a huge deal, but it is a protocol invocation</span></div><div id="t1508339550000463" t="2017-10-18 15:12:30 levitanong This is weird. on 1.0.3, while firing up my repl, I got a:
 java.lang.RuntimeException: Unable to resolve symbol: richnav in this context, compiling:(com/rpl/specter.cljc:62:6)
"><a href="#t1508339550000463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">15:12:30</span>           levitanong </span><span>This is weird. on 1.0.3, while firing up my repl, I got a:
</span><pre>java.lang.RuntimeException: Unable to resolve symbol: richnav in this context, compiling:(com/rpl/specter.cljc:62:6)
</pre></div><div id="t1508339559000178" t="2017-10-18 15:12:39 levitanong what could this be?"><a href="#t1508339559000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">15:12:39</span>           levitanong </span><span>what could this be?</span></div><div id="t1508358477000028" t="2017-10-18 20:27:57 nathanmarz @levitanong is this clj or cljs?"><a href="#t1508358477000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">20:27:57</span>           nathanmarz </span><span>@levitanong is this clj or cljs?</span></div><div id="t1508358713000003" t="2017-10-18 20:31:53 levitanong @nathanmarz clj. Disappeared when I updated to 1.0.4 lol"><a href="#t1508358713000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">20:31:53</span>           levitanong </span><span>@nathanmarz clj. Disappeared when I updated to 1.0.4 lol</span></div><div id="t1508359921000038" t="2017-10-18 20:52:01 nathanmarz ok"><a href="#t1508359921000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">20:52:01</span>           nathanmarz </span><span>ok</span></div><div id="t1508368901000065" t="2017-10-18 23:21:41 gdeer81 the same thing happened to me when I was righting the specter-koans. it was because I started writing the koans in version 0.13.0 and picked it up again after the 1.0 release so my project.clj was sorely out of date. all was well after I bumped the specter version"><a href="#t1508368901000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-18</span> <span class="t" onclick="H(this)">23:21:41</span>              gdeer81 </span><span>the same thing happened to me when I was righting the specter-koans. it was because I started writing the koans in version 0.13.0 and picked it up again after the 1.0 release so my project.clj was sorely out of date. all was well after I bumped the specter version</span></div><div id="t1508385216000102" t="2017-10-19 03:53:36 kishanov Hi there. How do I do the following transformation with specter:  (let [data {:a {:val 15}
            :b {:val 18}}]

  (-&gt;&gt; data
       (map (fn [[k v]]
              [k (assoc v :key (name k))]))
       (into {})))"><a href="#t1508385216000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">03:53:36</span>             kishanov </span><span>Hi there. How do I do the following transformation with specter: </span><pre>(let [data {:a {:val 15}
            :b {:val 18}}]

  (-&gt;&gt; data
       (map (fn [[k v]]
              [k (assoc v :key (name k))]))
       (into {})))</pre></div><div id="t1508385268000011" t="2017-10-19 03:54:28 kishanov i.e. is it possible to capture arguments in  transform  path and path them to transformation function?"><a href="#t1508385268000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">03:54:28</span>             kishanov </span><span>i.e. is it possible to capture arguments in </span><code>transform</code><span> path and path them to transformation function?</span></div><div id="t1508386222000153" t="2017-10-19 04:10:22 nathanmarz @kishanov yes, with value collection"><a href="#t1508386222000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:10:22</span>           nathanmarz </span><span>@kishanov yes, with value collection</span></div><div id="t1508386226000007" t="2017-10-19 04:10:26 nathanmarz (transform [ALL (collect-one FIRST NAME) LAST :key]
  (fn [n _] n)
  data)
"><a href="#t1508386226000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:10:26</span>           nathanmarz </span><pre>(transform [ALL (collect-one FIRST NAME) LAST :key]
  (fn [n _] n)
  data)
</pre></div><div id="t1508386414000184" t="2017-10-19 04:13:34 kishanov thnx @nathanmarz. Will the same approach work if I want to capture more then 1 value from the path? Ultimately I’m looking for the analog of “Capture groups” in instar"><a href="#t1508386414000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:13:34</span>             kishanov </span><span>thnx @nathanmarz. Will the same approach work if I want to capture more then 1 value from the path? Ultimately I’m looking for the analog of “Capture groups” in instar</span></div><div id="t1508386436000045" t="2017-10-19 04:13:56 nathanmarz yes, you can capture as many values as you want"><a href="#t1508386436000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:13:56</span>           nathanmarz </span><span>yes, you can capture as many values as you want</span></div><div id="t1508386457000121" t="2017-10-19 04:14:17 nathanmarz each  collect /`collect-one` call produces an extra argument to the transform function, in the order in which they&apos;re called"><a href="#t1508386457000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:14:17</span>           nathanmarz </span><span>each </span><code>collect</code><span>/`collect-one` call produces an extra argument to the transform function, in the order in which they&apos;re called</span></div><div id="t1508386478000147" t="2017-10-19 04:14:38 kishanov nice, thanks!"><a href="#t1508386478000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-19</span> <span class="t" onclick="H(this)">04:14:38</span>             kishanov </span><span>nice, thanks!</span></div><div id="t1509243163000055" t="2017-10-29 02:12:43 eoliphant Hi i just discovered specter, it’s awesome.  I have a quick question.  I’m trying to add a map to a list of maps., but setval treats it as a collection and adding each k-v pair.  Like so:

 testmap
=&gt; {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;}]}
(s/setval [:b s/END] {:id 5
                      :a 6} testmap)
=&gt; {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;} [:id 5] [:a 6]]}
 

How do I get around this?"><a href="#t1509243163000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:12:43</span>            eoliphant </span><span>Hi i just discovered specter, it’s awesome.  I have a quick question.  I’m trying to add a map to a list of maps., but setval treats it as a collection and adding each k-v pair.  Like so:

</span><pre>testmap
=&gt; {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;}]}
(s/setval [:b s/END] {:id 5
                      :a 6} testmap)
=&gt; {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;} [:id 5] [:a 6]]}
</pre><span>

How do I get around this?</span></div><div id="t1509243515000028" t="2017-10-29 02:18:35 michaelwfogleman Not sure if this is the idiomatic way but does this do what you&apos;re looking for?"><a href="#t1509243515000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:18:35</span>          michaelwfogleman </span><span>Not sure if this is the idiomatic way but does this do what you&apos;re looking for?</span></div><div id="t1509243517000053" t="2017-10-29 02:18:37 michaelwfogleman (def test-map {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;}]})
(transform [:b END] #(conj % {:id 5 :a 6}) test-map) "><a href="#t1509243517000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:18:37</span>          michaelwfogleman </span><pre>(def test-map {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;}]})
(transform [:b END] #(conj % {:id 5 :a 6}) test-map) </pre></div><div id="t1509243530000032" t="2017-10-29 02:18:50 michaelwfogleman That returns  {:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;} {:id 5, :a 6}]}  for me"><a href="#t1509243530000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:18:50</span>          michaelwfogleman </span><span>That returns </span><pre>{:a &quot;a&quot;, :b [{:id 1, :str &quot;1&quot;} {:id 2, :str &quot;2&quot;} {:id 3, :str &quot;2&quot;} {:id 5, :a 6}]}</pre><span> for me</span></div><div id="t1509243608000041" t="2017-10-29 02:20:08 eoliphant ah pass a function that returns it"><a href="#t1509243608000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:08</span>                 eoliphant </span><span>ah pass a function that returns it</span></div><div id="t1509243615000025" t="2017-10-29 02:20:15 eoliphant ok cool thanks will give that a shot"><a href="#t1509243615000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:15</span>                 eoliphant </span><span>ok cool thanks will give that a shot</span></div><div id="t1509243633000042" t="2017-10-29 02:20:33 michaelwfogleman I also don&apos;t think I needed end there"><a href="#t1509243633000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:33</span>          michaelwfogleman </span><span>I also don&apos;t think I needed end there</span></div><div id="t1509243642000012" t="2017-10-29 02:20:42 michaelwfogleman (transform [:b] #(conj % {:id 5 :a 6}) test-map)"><a href="#t1509243642000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:42</span>          michaelwfogleman </span><pre>(transform [:b] #(conj % {:id 5 :a 6}) test-map)</pre></div><div id="t1509243647000009" t="2017-10-29 02:20:47 michaelwfogleman that should do the same"><a href="#t1509243647000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:47</span>          michaelwfogleman </span><span>that should do the same</span></div><div id="t1509243654000015" t="2017-10-29 02:20:54 michaelwfogleman since a vector gets added to the end anyway"><a href="#t1509243654000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:20:54</span>          michaelwfogleman </span><span>since a vector gets added to the end anyway</span></div><div id="t1509244572000012" t="2017-10-29 02:36:12 eoliphant hey i just tried this too

 (s/setval [:b s/END] [{:id 5
                      :a 6}] testmap)
 
seems to work"><a href="#t1509244572000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:36:12</span>                 eoliphant </span><span>hey i just tried this too

</span><pre>(s/setval [:b s/END] [{:id 5
                      :a 6}] testmap)
</pre><span>
seems to work</span></div><div id="t1509245186000012" t="2017-10-29 02:46:26 michaelwfogleman Ah yeah!  🙂"><a href="#t1509245186000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:46:26</span>          michaelwfogleman </span><span>Ah yeah! </span><b>🙂</b></div><div id="t1509245188000012" t="2017-10-29 02:46:28 michaelwfogleman Nice!  🙂"><a href="#t1509245188000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">02:46:28</span>          michaelwfogleman </span><span>Nice! </span><b>🙂</b></div><div id="t1509248329000014" t="2017-10-29 03:38:49 nathanmarz @eoliphant use  AFTER-ELEM  to append a single element to a sequence"><a href="#t1509248329000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">03:38:49</span>           nathanmarz </span><span>@eoliphant use </span><code>AFTER-ELEM</code><span> to append a single element to a sequence</span></div><div id="t1509248350000022" t="2017-10-29 03:39:10 nathanmarz (setval [:b AFTER-ELEM] {:id 5 :a 6} testmap)"><a href="#t1509248350000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">03:39:10</span>           nathanmarz </span><code>(setval [:b AFTER-ELEM] {:id 5 :a 6} testmap)</code></div><div id="t1509248366000013" t="2017-10-29 03:39:26 nathanmarz that&apos;s more efficient than using  END  for this use case"><a href="#t1509248366000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">03:39:26</span>           nathanmarz </span><span>that&apos;s more efficient than using </span><code>END</code><span> for this use case</span></div><div id="t1509266013000008" t="2017-10-29 08:33:33 schmee this Specter snippet works, but I think it’s a bit of a code smell to have both  cond-path  and a  cond  in my transformation function. This being Specter, I suspect that there is a better way to do it  🙂 
 (def DATA-WALKER
  (s/recursive-path [] p
    (s/cond-path
      map? (s/continue-then-stay s/MAP-VALS p)
      seq? (s/continue-then-stay s/ALL p))))

(defn simplify [m]
  (s/transform
    DATA-WALKER
    #(cond
       (sequential? %) (vec %)
       (map? %) (into {} %))
    m))
 
Any suggestions?"><a href="#t1509266013000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">08:33:33</span>               schmee </span><span>this Specter snippet works, but I think it’s a bit of a code smell to have both </span><code>cond-path</code><span> and a </span><code>cond</code><span> in my transformation function. This being Specter, I suspect that there is a better way to do it </span><b>🙂</b><span>
</span><pre>(def DATA-WALKER
  (s/recursive-path [] p
    (s/cond-path
      map? (s/continue-then-stay s/MAP-VALS p)
      seq? (s/continue-then-stay s/ALL p))))

(defn simplify [m]
  (s/transform
    DATA-WALKER
    #(cond
       (sequential? %) (vec %)
       (map? %) (into {} %))
    m))
</pre><span>
Any suggestions?</span></div><div id="t1509266039000064" t="2017-10-29 08:33:59 schmee I’ve looked at  multi-transform , but I haven’t figured out how to use it with recursive paths"><a href="#t1509266039000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">08:33:59</span>               schmee </span><span>I’ve looked at </span><code>multi-transform</code><span>, but I haven’t figured out how to use it with recursive paths</span></div><div id="t1509284301000095" t="2017-10-29 13:38:21 nathanmarz @schmee  multi-transform  version would be  (multi-transform [DATA-WALKER (if-path map? (terminal #(into {} %)) (terminal vec))] m)"><a href="#t1509284301000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">13:38:21</span>           nathanmarz </span><span>@schmee </span><code>multi-transform</code><span> version would be </span><code>(multi-transform [DATA-WALKER (if-path map? (terminal #(into {} %)) (terminal vec))] m)</code></div><div id="t1509284336000042" t="2017-10-29 13:38:56 nathanmarz you don&apos;t need the  cond  since after  DATA-WALKER  it&apos;s either  map?  or  seq?"><a href="#t1509284336000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">13:38:56</span>           nathanmarz </span><span>you don&apos;t need the </span><code>cond</code><span> since after </span><code>DATA-WALKER</code><span> it&apos;s either </span><code>map?</code><span> or </span><code>seq?</code></div><div id="t1509293901000044" t="2017-10-29 16:18:21 schmee nice, thank you!  😄"><a href="#t1509293901000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-29</span> <span class="t" onclick="H(this)">16:18:21</span>               schmee </span><span>nice, thank you! </span><b>😄</b></div><div id="t1509331192000019" t="2017-10-30 02:39:52 eoliphant hi i’ve got a quick path/select question.  In the following code
 (def testdata {:a
               {:b [{:c :d}
                    {:e :f}
                    {:g :h}]}})
 
I’d like to select out  :f  based on the fact that I know the  {:e :f}  map’s index
I get this far  (s/select [:a :b (s/srange 1 2)] testdata)   But can’t figure out what to add to the rest of the path"><a href="#t1509331192000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">02:39:52</span>            eoliphant </span><span>hi i’ve got a quick path/select question.  In the following code
</span><pre>(def testdata {:a
               {:b [{:c :d}
                    {:e :f}
                    {:g :h}]}})
</pre><span>
I’d like to select out </span><code>:f</code><span> based on the fact that I know the </span><code>{:e :f}</code><span> map’s index
I get this far </span><code>(s/select [:a :b (s/srange 1 2)] testdata)</code><span>  But can’t figure out what to add to the rest of the path</span></div><div id="t1509332301000004" t="2017-10-30 02:58:21 nathanmarz @eoliphant use  (nthpath 1)"><a href="#t1509332301000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">02:58:21</span>           nathanmarz </span><span>@eoliphant use </span><code>(nthpath 1)</code></div><div id="t1509332746000071" t="2017-10-30 03:05:46 eoliphant ah.. yeah that does it.  thanks!"><a href="#t1509332746000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">03:05:46</span>            eoliphant </span><span>ah.. yeah that does it.  thanks!</span></div><div id="t1509333933000143" t="2017-10-30 03:25:33 nathanmarz @eoliphant worth skimming through this page to see all the navigators that come with specter  https://github.com/nathanmarz/specter/wiki/List-of-Navigators"><a href="#t1509333933000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">03:25:33</span>           nathanmarz </span><span>@eoliphant worth skimming through this page to see all the navigators that come with specter </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a></div><div id="t1509371923000393" t="2017-10-30 13:58:43 eoliphant hi @nathanmarz yeah re-read them after your help on that one.  I’d skimmed them before I started coding and really ‘got it’ lol.  Really great tool.  I’ve used lenses in Scala, which cover some of what Specter does. Clojure just makes everything better lol.  Specter is a much needed bit of special sauce,  I’m working on a pretty complex dynamic forms app, that needs a lot of deep structure querying/manipulation, spent the past 2 days ripping out all of my existing code for use cases that Specter covers"><a href="#t1509371923000393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">13:58:43</span>            eoliphant </span><span>hi @nathanmarz yeah re-read them after your help on that one.  I’d skimmed them before I started coding and really ‘got it’ lol.  Really great tool.  I’ve used lenses in Scala, which cover some of what Specter does. Clojure just makes everything better lol.  Specter is a much needed bit of special sauce,  I’m working on a pretty complex dynamic forms app, that needs a lot of deep structure querying/manipulation, spent the past 2 days ripping out all of my existing code for use cases that Specter covers</span></div><div id="t1509373885000119" t="2017-10-30 14:31:25 nathanmarz @eoliphant great to hear"><a href="#t1509373885000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-30</span> <span class="t" onclick="H(this)">14:31:25</span>           nathanmarz </span><span>@eoliphant great to hear</span></div><div id="t1509414724000080" t="2017-10-31 01:52:04 eoliphant is there a something like a ‘move’ macro/operation?  I’m picking my way through the use of recursive-path, etc. Basically, I’ve a use case where I need to find a node in a tree, save its current value, delete it from its current location, find a target node, then insert the saved node before or after the target.  Once I get the recursive locator stuff working, it seems like I’d need a select and two transforms, or a select and a multi-transform, is that more or less correct?"><a href="#t1509414724000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">01:52:04</span>            eoliphant </span><span>is there a something like a ‘move’ macro/operation?  I’m picking my way through the use of recursive-path, etc. Basically, I’ve a use case where I need to find a node in a tree, save its current value, delete it from its current location, find a target node, then insert the saved node before or after the target.  Once I get the recursive locator stuff working, it seems like I’d need a select and two transforms, or a select and a multi-transform, is that more or less correct?</span></div><div id="t1509417111000066" t="2017-10-31 02:31:51 nathanmarz best way to do something like that would be combining  multi-transform  and   collect-one"><a href="#t1509417111000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">02:31:51</span>           nathanmarz </span><span>best way to do something like that would be combining </span><code>multi-transform</code><span> and  </span><code>collect-one</code></div><div id="t1509417204000028" t="2017-10-31 02:33:24 nathanmarz depends on the use case though, some could require zippers"><a href="#t1509417204000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">02:33:24</span>           nathanmarz </span><span>depends on the use case though, some could require zippers</span></div><div id="t1509417216000117" t="2017-10-31 02:33:36 nathanmarz would need to see specifically what you&apos;re trying to do"><a href="#t1509417216000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">02:33:36</span>           nathanmarz </span><span>would need to see specifically what you&apos;re trying to do</span></div><div id="t1509457919000180" t="2017-10-31 13:51:59 eoliphant hi @nathanmarz sure, here’s a simplified example

 (def fakeform {:formdef {:form/id 1
                         :form/groups [{:group/id 2
                                        :group/type :page
                                        :group/fields [{:field/id 3
                                                        :field/name :fieldone}
                                                       {:field/id 4
                                                        :field/name :fieldtwo}
                                                       {:field/id 5
                                                        :field/name :fieldthree}]
                                        :group/subgroups  [{:group/id 6
                                                            :group/type :section
                                                            :group/fields [{:field/id 7
                                                                            :field/name :fieldfour}]}]}]}})
 

I’d like to approach simple transforms like “move the map identified by  :field/id 3  after the one identified by  :field/id 4 ” (which I can do with a srange/reverse, etc) as well as more arbitrarily complex ones like “move the map identified by  :field/id 3  after the one identified by  :field/id 7 ” in a consistent manner"><a href="#t1509457919000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">13:51:59</span>            eoliphant </span><span>hi @nathanmarz sure, here’s a simplified example

</span><pre>(def fakeform {:formdef {:form/id 1
                         :form/groups [{:group/id 2
                                        :group/type :page
                                        :group/fields [{:field/id 3
                                                        :field/name :fieldone}
                                                       {:field/id 4
                                                        :field/name :fieldtwo}
                                                       {:field/id 5
                                                        :field/name :fieldthree}]
                                        :group/subgroups  [{:group/id 6
                                                            :group/type :section
                                                            :group/fields [{:field/id 7
                                                                            :field/name :fieldfour}]}]}]}})
</pre><span>

I’d like to approach simple transforms like “move the map identified by </span><code>:field/id 3</code><span> after the one identified by </span><code>:field/id 4</code><span>” (which I can do with a srange/reverse, etc) as well as more arbitrarily complex ones like “move the map identified by </span><code>:field/id 3</code><span> after the one identified by </span><code>:field/id 7</code><span>” in a consistent manner</span></div><div id="t1509459357000210" t="2017-10-31 14:15:57 nathanmarz @eoliphant you can do this with a helper path that navigates you to a zipper pointing to the desired node"><a href="#t1509459357000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:15:57</span>           nathanmarz </span><span>@eoliphant you can do this with a helper path that navigates you to a zipper pointing to the desired node</span></div><div id="t1509459365000027" t="2017-10-31 14:16:05 nathanmarz (point-to 3)"><a href="#t1509459365000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:16:05</span>           nathanmarz </span><code>(point-to 3)</code></div><div id="t1509459393000021" t="2017-10-31 14:16:33 nathanmarz then you could do  (select-any [(point-to 3) zip/NODE] fakeform)  to get the value for 3"><a href="#t1509459393000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:16:33</span>           nathanmarz </span><span>then you could do </span><code>(select-any [(point-to 3) zip/NODE] fakeform)</code><span> to get the value for 3</span></div><div id="t1509459414000107" t="2017-10-31 14:16:54 nathanmarz (setval [(point-to 3) zip/NODE-SEQ] [] fakeform)  to remove 3"><a href="#t1509459414000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:16:54</span>           nathanmarz </span><code>(setval [(point-to 3) zip/NODE-SEQ] [] fakeform)</code><span> to remove 3</span></div><div id="t1509459470000668" t="2017-10-31 14:17:50 nathanmarz and  (setval [(point-to 7] zip/INNER-RIGHT] [value-for-3] fakeform)  to finish the move"><a href="#t1509459470000668" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:17:50</span>           nathanmarz </span><span>and </span><code>(setval [(point-to 7] zip/INNER-RIGHT] [value-for-3] fakeform)</code><span> to finish the move</span></div><div id="t1509459492000722" t="2017-10-31 14:18:12 nathanmarz actually you could combine the retrieval of 3&apos;s value with removal using  replace-in"><a href="#t1509459492000722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:18:12</span>           nathanmarz </span><span>actually you could combine the retrieval of 3&apos;s value with removal using </span><code>replace-in</code></div><div id="t1509459527000498" t="2017-10-31 14:18:47 nathanmarz https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1509459527000498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:18:47</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1509459532000270" t="2017-10-31 14:18:52 eoliphant Ok will give that a shot, so  point-to  will be my recursive-path based helper?"><a href="#t1509459532000270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:18:52</span>            eoliphant </span><span>Ok will give that a shot, so </span><code>point-to</code><span> will be my recursive-path based helper?</span></div><div id="t1509459568000787" t="2017-10-31 14:19:28 nathanmarz yes"><a href="#t1509459568000787" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:19:28</span>           nathanmarz </span><span>yes</span></div><div id="t1509459579000420" t="2017-10-31 14:19:39 eoliphant gotcha, will play around with it"><a href="#t1509459579000420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:19:39</span>            eoliphant </span><span>gotcha, will play around with it</span></div><div id="t1509459592000196" t="2017-10-31 14:19:52 eoliphant thanks!"><a href="#t1509459592000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-31</span> <span class="t" onclick="H(this)">14:19:52</span>            eoliphant </span><span>thanks!</span></div><div id="t1509634906000536" t="2017-11-02 15:01:46 borkdude Hmm, why does this print tuples instead of single values?
 (setval
   [ALL
    #_(multi-path :target/source )
    :target/neighbours ALL first (fn [v]
                                   (println “is this the first?” v)
                                   v)
    (pred #{“medline”})]
   NONE
   [{:target/source “not” :target/neighbours [[“medline” 1] [“not 2”]]}
    {:target/source “medline” :target/neighbours [[“medline” 1] [“not 2&quot;]]}
    {:target/source “medline” :target/neighbours [[“medline” 1] [“not 2”]]}
    ])
"><a href="#t1509634906000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:01:46</span>             borkdude </span><span>Hmm, why does this print tuples instead of single values?
</span><pre>(setval
   [ALL
    #_(multi-path :target/source )
    :target/neighbours ALL first (fn [v]
                                   (println “is this the first?” v)
                                   v)
    (pred #{“medline”})]
   NONE
   [{:target/source “not” :target/neighbours [[“medline” 1] [“not 2”]]}
    {:target/source “medline” :target/neighbours [[“medline” 1] [“not 2&quot;]]}
    {:target/source “medline” :target/neighbours [[“medline” 1] [“not 2”]]}
    ])
</pre></div><div id="t1509634992000607" t="2017-11-02 15:03:12 borkdude ALL  (every map value),  :target/neighbours  (vector of tuples),  ALL  (every tuple),  first  … oh I see"><a href="#t1509634992000607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:03:12</span>             borkdude </span><code>ALL</code><span> (every map value), </span><code>:target/neighbours</code><span> (vector of tuples), </span><code>ALL</code><span> (every tuple), </span><code>first</code><span> … oh I see</span></div><div id="t1509635012000095" t="2017-11-02 15:03:32 borkdude first  is acting as a predicate?"><a href="#t1509635012000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:03:32</span>             borkdude </span><code>first</code><span> is acting as a predicate?</span></div><div id="t1509635226000176" t="2017-11-02 15:07:06 borkdude ah,  FIRST , doh…"><a href="#t1509635226000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:07:06</span>             borkdude </span><span>ah, </span><code>FIRST</code><span>, doh…</span></div><div id="t1509637128000449" t="2017-11-02 15:38:48 borkdude I have trouble writing this in specter:
 ;; only x and y are allowed
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]} ;=&gt; fine, keep as is
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot; &quot;z&quot;]} ;=&gt; keep only allowed rels: {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;z&quot;]} ;=&gt; no allowed rels, remove map completely
   {:name &quot;z&quot; :rels [&quot;x&quot; &quot;y&quot;]}] ;=&gt; disallowed name, remove completely
  ;;=&gt;
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}]
   
as a single  setval  using  multi-path  and  not-selected? . I know it must be possible…"><a href="#t1509637128000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:38:48</span>             borkdude </span><span>I have trouble writing this in specter:
</span><pre>;; only x and y are allowed
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]} ;=&gt; fine, keep as is
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot; &quot;z&quot;]} ;=&gt; keep only allowed rels: {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;z&quot;]} ;=&gt; no allowed rels, remove map completely
   {:name &quot;z&quot; :rels [&quot;x&quot; &quot;y&quot;]}] ;=&gt; disallowed name, remove completely
  ;;=&gt;
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}]
  </pre><span>
as a single </span><code>setval</code><span> using </span><code>multi-path</code><span> and </span><code>not-selected?</code><span>. I know it must be possible…</span></div><div id="t1509637583000039" t="2017-11-02 15:46:23 nathanmarz @borkdude 
 (setval [ALL
         (transformed [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))] (fn [_] NONE))
         (selected?
          (multi-path
            (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
            (not-selected? :rels ALL #{&quot;x&quot; &quot;y&quot;})))
         ]
  NONE
  data)
"><a href="#t1509637583000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:46:23</span>           nathanmarz </span><span>@borkdude 
</span><pre>(setval [ALL
         (transformed [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))] (fn [_] NONE))
         (selected?
          (multi-path
            (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
            (not-selected? :rels ALL #{&quot;x&quot; &quot;y&quot;})))
         ]
  NONE
  data)
</pre></div><div id="t1509637679000385" t="2017-11-02 15:47:59 nathanmarz you can also do
 (setval [ALL
         (transformed [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))] (fn [_] NONE))
         (selected?
          (multi-path
            (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
            [:rels empty?]))
         ]
  NONE
  data)
"><a href="#t1509637679000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:47:59</span>           nathanmarz </span><span>you can also do
</span><pre>(setval [ALL
         (transformed [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))] (fn [_] NONE))
         (selected?
          (multi-path
            (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
            [:rels empty?]))
         ]
  NONE
  data)
</pre></div><div id="t1509637963000430" t="2017-11-02 15:52:43 borkdude cool, cool, thanks!"><a href="#t1509637963000430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:52:43</span>             borkdude </span><span>cool, cool, thanks!</span></div><div id="t1509638300000126" t="2017-11-02 15:58:20 nathanmarz @borkdude looking at it again you don&apos;t need the  transformed :
 (setval [ALL
         (multi-path
          [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))]
          (selected?
           (multi-path
             (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
             [:rels empty?])))]
  NONE
  data)
"><a href="#t1509638300000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:58:20</span>           nathanmarz </span><span>@borkdude looking at it again you don&apos;t need the </span><code>transformed</code><span>:
</span><pre>(setval [ALL
         (multi-path
          [:rels ALL (pred (complement #{&quot;x&quot; &quot;y&quot;}))]
          (selected?
           (multi-path
             (not-selected? :name #{&quot;x&quot; &quot;y&quot;})
             [:rels empty?])))]
  NONE
  data)
</pre></div><div id="t1509638357000814" t="2017-11-02 15:59:17 borkdude ah, that one makes even more sense"><a href="#t1509638357000814" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">15:59:17</span>             borkdude </span><span>ah, that one makes even more sense</span></div><div id="t1509638532000320" t="2017-11-02 16:02:12 borkdude More readable too. Wasn’t familiar with  transformed  yet"><a href="#t1509638532000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">16:02:12</span>             borkdude </span><span>More readable too. Wasn’t familiar with </span><code>transformed</code><span> yet</span></div><div id="t1509638760000069" t="2017-11-02 16:06:00 borkdude Eh, wait, I didn’t know  complement  exists either, I always do  comp not f   🙂"><a href="#t1509638760000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">16:06:00</span>             borkdude </span><span>Eh, wait, I didn’t know </span><code>complement</code><span> exists either, I always do </span><code>comp not f</code><span> </span><b>🙂</b></div><div id="t1509638791000548" t="2017-11-02 16:06:31 nathanmarz transformed  has same semantics as  view , useful when doing multiple distinct transforms in one traversal"><a href="#t1509638791000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">16:06:31</span>           nathanmarz </span><code>transformed</code><span> has same semantics as </span><code>view</code><span>, useful when doing multiple distinct transforms in one traversal</span></div><div id="t1509638842000465" t="2017-11-02 16:07:22 nathanmarz or for manipulating the results of a  select  in one go"><a href="#t1509638842000465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">16:07:22</span>           nathanmarz </span><span>or for manipulating the results of a </span><code>select</code><span> in one go</span></div><div id="t1509642526000316" t="2017-11-02 17:08:46 borkdude @nathanmarz Does this make sense? I mean the  pred  thing in the  let . I’m not really sure when to wrap a function in  pred .

 (defn keep-allowed-relations [user-profile relations]
  (let [disallowed? (pred #(not (allowed-source? user-profile %)))]
    (setval
     [ALL
      (multi-path
       [:target/neighbours ALL
        (selected? FIRST
                   disallowed?)]
       (selected?
        (multi-path
         [:target/neighbours empty?]
         (selected? :target/source disallowed?)
         )))]
     NONE
     relations)))
"><a href="#t1509642526000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:08:46</span>             borkdude </span><span>@nathanmarz Does this make sense? I mean the </span><code>pred</code><span> thing in the </span><code>let</code><span>. I’m not really sure when to wrap a function in </span><code>pred</code><span>.

</span><pre>(defn keep-allowed-relations [user-profile relations]
  (let [disallowed? (pred #(not (allowed-source? user-profile %)))]
    (setval
     [ALL
      (multi-path
       [:target/neighbours ALL
        (selected? FIRST
                   disallowed?)]
       (selected?
        (multi-path
         [:target/neighbours empty?]
         (selected? :target/source disallowed?)
         )))]
     NONE
     relations)))
</pre></div><div id="t1509642528000474" t="2017-11-02 17:08:48 borkdude but it works"><a href="#t1509642528000474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:08:48</span>             borkdude </span><span>but it works</span></div><div id="t1509642734000249" t="2017-11-02 17:12:14 borkdude little simplification:
 (setval
     [ALL
      (multi-path
       [:target/neighbours ALL
        (selected? FIRST
                   disallowed?)]
       (selected?
        (multi-path
         [:target/neighbours empty?]
         [:target/source disallowed?]
         )))]
     NONE
     relations)))
"><a href="#t1509642734000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:12:14</span>             borkdude </span><span>little simplification:
</span><pre>(setval
     [ALL
      (multi-path
       [:target/neighbours ALL
        (selected? FIRST
                   disallowed?)]
       (selected?
        (multi-path
         [:target/neighbours empty?]
         [:target/source disallowed?]
         )))]
     NONE
     relations)))
</pre></div><div id="t1509642873000623" t="2017-11-02 17:14:33 borkdude This is what I meant with, it must be possible with only  selected?  and  multi-path   🙂"><a href="#t1509642873000623" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:14:33</span>             borkdude </span><span>This is what I meant with, it must be possible with only </span><code>selected?</code><span> and </span><code>multi-path</code><span> </span><b>🙂</b></div><div id="t1509643023000133" t="2017-11-02 17:17:03 borkdude (my data looks a little different, hence the variation with  FIRST )"><a href="#t1509643023000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:17:03</span>             borkdude </span><span>(my data looks a little different, hence the variation with </span><code>FIRST</code><span>)</span></div><div id="t1509645203000022" t="2017-11-02 17:53:23 nathanmarz @borkdude that&apos;s fine though it will be slightly more efficient to use  pred  in the path declaration rather than outside it"><a href="#t1509645203000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:53:23</span>           nathanmarz </span><span>@borkdude that&apos;s fine though it will be slightly more efficient to use </span><code>pred</code><span> in the path declaration rather than outside it</span></div><div id="t1509645231000459" t="2017-11-02 17:53:51 nathanmarz that way specter knows statically it&apos;s a compiled navigator and doesn&apos;t have to do an  instance?  check at runtime"><a href="#t1509645231000459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:53:51</span>           nathanmarz </span><span>that way specter knows statically it&apos;s a compiled navigator and doesn&apos;t have to do an </span><code>instance?</code><span> check at runtime</span></div><div id="t1509645236000271" t="2017-11-02 17:53:56 nathanmarz but that&apos;s not a big deal"><a href="#t1509645236000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:53:56</span>           nathanmarz </span><span>but that&apos;s not a big deal</span></div><div id="t1509645272000381" t="2017-11-02 17:54:32 nathanmarz wrapping with  pred  in the  let  is much better than not, in which case specter would have to do a protocol invocation to convert function -&gt; navigator every time that callsite is invoked"><a href="#t1509645272000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">17:54:32</span>           nathanmarz </span><span>wrapping with </span><code>pred</code><span> in the </span><code>let</code><span> is much better than not, in which case specter would have to do a protocol invocation to convert function -&gt; navigator every time that callsite is invoked</span></div><div id="t1509722833000043" t="2017-11-03 15:27:13 borkdude So, this works:
 (def data ;; only x and y are allowed
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]} ;=&gt; fine, keep as is
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot; &quot;z&quot;]} ;=&gt; keep only allowed rels: {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;z&quot;]} ;=&gt; no allowed rels, remove map completely
   {:name &quot;z&quot; :rels [&quot;x&quot; &quot;y&quot;]}] ;=&gt; disallowed name, remove completely
  )

(def disallowed? (complement #{&quot;x&quot; &quot;y&quot;}))

(setval
 [ALL
  (multi-path
   [:rels ALL
    (pred disallowed?)]
   (selected?
    (multi-path
     [:rels empty?]
     [:name (pred disallowed?)])))]
 NONE
 data)
 
I was wondering if it’s possible to first express  [:name (pred disallowed?)] , since it might be cheaper to look at the name first. Then it doesn’t have to process the  :rels . E.g.
 (setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)
 
But this triggers a  ClassCastException  probably because  NONE  is treated as a map or something."><a href="#t1509722833000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:27:13</span>             borkdude </span><span>So, this works:
</span><pre>(def data ;; only x and y are allowed
  [{:name &quot;x&quot; :rels [&quot;x&quot; &quot;y&quot;]} ;=&gt; fine, keep as is
   {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot; &quot;z&quot;]} ;=&gt; keep only allowed rels: {:name &quot;y&quot; :rels [&quot;x&quot; &quot;y&quot;]}
   {:name &quot;y&quot; :rels [&quot;z&quot;]} ;=&gt; no allowed rels, remove map completely
   {:name &quot;z&quot; :rels [&quot;x&quot; &quot;y&quot;]}] ;=&gt; disallowed name, remove completely
  )

(def disallowed? (complement #{&quot;x&quot; &quot;y&quot;}))

(setval
 [ALL
  (multi-path
   [:rels ALL
    (pred disallowed?)]
   (selected?
    (multi-path
     [:rels empty?]
     [:name (pred disallowed?)])))]
 NONE
 data)
</pre><span>
I was wondering if it’s possible to first express </span><code>[:name (pred disallowed?)]</code><span>, since it might be cheaper to look at the name first. Then it doesn’t have to process the </span><code>:rels</code><span>. E.g.
</span><pre>(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)
</pre><span>
But this triggers a </span><code>ClassCastException</code><span> probably because </span><code>NONE</code><span> is treated as a map or something.</span></div><div id="t1509722984000784" t="2017-11-03 15:29:44 borkdude When I replace  NONE  with  {}  it kind of works. Maybe Specter paths should be able to play nicely with  NONE ?"><a href="#t1509722984000784" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:29:44</span>             borkdude </span><span>When I replace </span><code>NONE</code><span> with </span><code>{}</code><span> it kind of works. Maybe Specter paths should be able to play nicely with </span><code>NONE</code><span>?</span></div><div id="t1509723160000138" t="2017-11-03 15:32:40 borkdude This works:
 (setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [#(not= NONE %) :rels ALL disallowed?]
   (selected? #(not= NONE %) :rels empty?))]
 NONE
 data)
"><a href="#t1509723160000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:32:40</span>             borkdude </span><span>This works:
</span><pre>(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [#(not= NONE %) :rels ALL disallowed?]
   (selected? #(not= NONE %) :rels empty?))]
 NONE
 data)
</pre></div><div id="t1509723237000395" t="2017-11-03 15:33:57 borkdude (defn SOME? [x]
  (not= NONE x))

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [(pred SOME?) :rels ALL disallowed?]
   (selected? (pred SOME?) :rels empty?))]
 NONE
 data)
"><a href="#t1509723237000395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:33:57</span>             borkdude </span><pre>(defn SOME? [x]
  (not= NONE x))

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [(pred SOME?) :rels ALL disallowed?]
   (selected? (pred SOME?) :rels empty?))]
 NONE
 data)
</pre></div><div id="t1509723357000401" t="2017-11-03 15:35:57 borkdude I quite like the last solution. It almost reads literally like my requirement:
- drop when the name is disallowed
- drop all  :rels  that are disallowed
- drop when no  :rels  are left"><a href="#t1509723357000401" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:35:57</span>             borkdude </span><span>I quite like the last solution. It almost reads literally like my requirement:
- drop when the name is disallowed
- drop all </span><code>:rels</code><span> that are disallowed
- drop when no </span><code>:rels</code><span> are left</span></div><div id="t1509724184000745" t="2017-11-03 15:49:44 nathanmarz when you remove an element from a sequence, then future navigation in the same path will start at  NONE"><a href="#t1509724184000745" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:49:44</span>           nathanmarz </span><span>when you remove an element from a sequence, then future navigation in the same path will start at </span><code>NONE</code></div><div id="t1509724216000757" t="2017-11-03 15:50:16 nathanmarz that&apos;s the correct behavior from Specter, and getting a ClassCastException is expected and desired"><a href="#t1509724216000757" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:50:16</span>           nathanmarz </span><span>that&apos;s the correct behavior from Specter, and getting a ClassCastException is expected and desired</span></div><div id="t1509724243000286" t="2017-11-03 15:50:43 nathanmarz that solution with  SOME?  is fine"><a href="#t1509724243000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:50:43</span>           nathanmarz </span><span>that solution with </span><code>SOME?</code><span> is fine</span></div><div id="t1509724252000607" t="2017-11-03 15:50:52 nathanmarz you don&apos;t need the  pred  around  SOME?"><a href="#t1509724252000607" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:50:52</span>           nathanmarz </span><span>you don&apos;t need the </span><code>pred</code><span> around </span><code>SOME?</code></div><div id="t1509724258000634" t="2017-11-03 15:50:58 nathanmarz but you should have it around  disallowed?"><a href="#t1509724258000634" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:50:58</span>           nathanmarz </span><span>but you should have it around </span><code>disallowed?</code></div><div id="t1509724268000614" t="2017-11-03 15:51:08 nathanmarz or define  disallowed?  as  (pred (complement ...))"><a href="#t1509724268000614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:51:08</span>           nathanmarz </span><span>or define </span><code>disallowed?</code><span> as </span><code>(pred (complement ...))</code></div><div id="t1509724291000026" t="2017-11-03 15:51:31 borkdude I’m not sure why it’s desired? Navigating to  NONE  could semantically be treated as a dead end?"><a href="#t1509724291000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:51:31</span>             borkdude </span><span>I’m not sure why it’s desired? Navigating to </span><code>NONE</code><span> could semantically be treated as a dead end?</span></div><div id="t1509724308000188" t="2017-11-03 15:51:48 nathanmarz actually nvm, you don&apos;t need it around  disallowed?  since it&apos;s defined globally"><a href="#t1509724308000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:51:48</span>           nathanmarz </span><span>actually nvm, you don&apos;t need it around </span><code>disallowed?</code><span> since it&apos;s defined globally</span></div><div id="t1509724355000398" t="2017-11-03 15:52:35 nathanmarz the element in the sequence was removed, so it&apos;s navigated to the &quot;void&quot;, represented consistently in Specter as  NONE"><a href="#t1509724355000398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:52:35</span>           nathanmarz </span><span>the element in the sequence was removed, so it&apos;s navigated to the &quot;void&quot;, represented consistently in Specter as </span><code>NONE</code></div><div id="t1509724364000573" t="2017-11-03 15:52:44 borkdude well, in my ‘real’ code, disallowed is not able to be defined globally, but that’s why I wrapped it in a  pred  in the let. Now I don’t understand why I don’t need the  pred  around  SOME? , because it’s a global?"><a href="#t1509724364000573" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:52:44</span>             borkdude </span><span>well, in my ‘real’ code, disallowed is not able to be defined globally, but that’s why I wrapped it in a </span><code>pred</code><span> in the let. Now I don’t understand why I don’t need the </span><code>pred</code><span> around </span><code>SOME?</code><span>, because it’s a global?</span></div><div id="t1509724381000484" t="2017-11-03 15:53:01 nathanmarz multi-path  always executes every subpath in order"><a href="#t1509724381000484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:53:01</span>           nathanmarz </span><code>multi-path</code><span> always executes every subpath in order</span></div><div id="t1509724389000358" t="2017-11-03 15:53:09 nathanmarz SOME?  is statically known to be a function"><a href="#t1509724389000358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:53:09</span>           nathanmarz </span><code>SOME?</code><span> is statically known to be a function</span></div><div id="t1509724400000034" t="2017-11-03 15:53:20 nathanmarz so specter can figure that out at &quot;compile-time&quot;"><a href="#t1509724400000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:53:20</span>           nathanmarz </span><span>so specter can figure that out at &quot;compile-time&quot;</span></div><div id="t1509724403000193" t="2017-11-03 15:53:23 borkdude ok, so Specter intentionally allows navigating to NONE, so the user can do something with this?"><a href="#t1509724403000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:53:23</span>             borkdude </span><span>ok, so Specter intentionally allows navigating to NONE, so the user can do something with this?</span></div><div id="t1509724423000474" t="2017-11-03 15:53:43 nathanmarz AFTER-ELEM  and  BEFORE-ELEM  navigate to  NONE"><a href="#t1509724423000474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:53:43</span>           nathanmarz </span><code>AFTER-ELEM</code><span> and </span><code>BEFORE-ELEM</code><span> navigate to </span><code>NONE</code></div><div id="t1509724449000322" t="2017-11-03 15:54:09 borkdude cool! so maybe Specter could use a primitive like  SOME?"><a href="#t1509724449000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:54:09</span>             borkdude </span><span>cool! so maybe Specter could use a primitive like </span><code>SOME?</code></div><div id="t1509724467000036" t="2017-11-03 15:54:27 borkdude I’m fine with my own for now"><a href="#t1509724467000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:54:27</span>             borkdude </span><span>I’m fine with my own for now</span></div><div id="t1509724497000306" t="2017-11-03 15:54:57 nathanmarz needing that function is very esoteric"><a href="#t1509724497000306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:54:57</span>           nathanmarz </span><span>needing that function is very esoteric</span></div><div id="t1509724525000714" t="2017-11-03 15:55:25 nathanmarz btw a better way to implement it is  (defn SOME? [v] (not (identical? NONE v)))"><a href="#t1509724525000714" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:55:25</span>           nathanmarz </span><span>btw a better way to implement it is </span><code>(defn SOME? [v] (not (identical? NONE v)))</code></div><div id="t1509724570000203" t="2017-11-03 15:56:10 borkdude because eventually  =  will dispatch to that anyway"><a href="#t1509724570000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:56:10</span>             borkdude </span><span>because eventually </span><code>=</code><span> will dispatch to that anyway</span></div><div id="t1509724642000252" t="2017-11-03 15:57:22 nathanmarz yea, avoids some overhead"><a href="#t1509724642000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:57:22</span>           nathanmarz </span><span>yea, avoids some overhead</span></div><div id="t1509724742000503" t="2017-11-03 15:59:02 borkdude cool, I learned something  🙂"><a href="#t1509724742000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">15:59:02</span>             borkdude </span><span>cool, I learned something </span><b>🙂</b></div><div id="t1509725350000012" t="2017-11-03 16:09:10 borkdude Hack which makes  SOME?  obsolete:
 (alter-var-root #&apos;com.rpl.specter.impl/NONE (fn [_] {}))

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)
"><a href="#t1509725350000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:09:10</span>             borkdude </span><span>Hack which makes </span><code>SOME?</code><span> obsolete:
</span><pre>(alter-var-root #&apos;com.rpl.specter.impl/NONE (fn [_] {}))

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)
</pre></div><div id="t1509725472000459" t="2017-11-03 16:11:12 borkdude AFTER-ELEM  and  BEFORE-ELEM  still work"><a href="#t1509725472000459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:11:12</span>             borkdude </span><code>AFTER-ELEM</code><span> and </span><code>BEFORE-ELEM</code><span> still work</span></div><div id="t1509725611000378" t="2017-11-03 16:13:31 borkdude hmm, but this is going to break other stuff probably, because it seems that Clojure uses a singleton object for representing the empty hash-map"><a href="#t1509725611000378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:13:31</span>             borkdude </span><span>hmm, but this is going to break other stuff probably, because it seems that Clojure uses a singleton object for representing the empty hash-map</span></div><div id="t1509725643000148" t="2017-11-03 16:14:03 borkdude (identical? (hash-map) (hash-map)) ;;=&gt; true"><a href="#t1509725643000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:14:03</span>             borkdude </span><code>(identical? (hash-map) (hash-map)) ;;=&gt; true</code></div><div id="t1509725666000474" t="2017-11-03 16:14:26 nathanmarz yea lol"><a href="#t1509725666000474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:14:26</span>           nathanmarz </span><span>yea lol</span></div><div id="t1509725727000012" t="2017-11-03 16:15:27 nathanmarz becomes very hard to set values to empty maps"><a href="#t1509725727000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:15:27</span>           nathanmarz </span><span>becomes very hard to set values to empty maps</span></div><div id="t1509725892000354" t="2017-11-03 16:18:12 borkdude This could work though:
 (def my-NONE {::NONE true})
(alter-var-root #&apos;com.rpl.specter.impl/NONE (fn [_] my-NONE))

(defn SOME? [x]
  (not (identical? NONE x)))

;; no SOME? needed

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)

(setval AFTER-ELEM 3 [1 2])
(setval BEFORE-ELEM 3 [1 2])
 
since  (identical? {::NONE true} {::NONE true}) ;;=&gt; false"><a href="#t1509725892000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:18:12</span>             borkdude </span><span>This could work though:
</span><pre>(def my-NONE {::NONE true})
(alter-var-root #&apos;com.rpl.specter.impl/NONE (fn [_] my-NONE))

(defn SOME? [x]
  (not (identical? NONE x)))

;; no SOME? needed

(setval
 [ALL
  (multi-path
   (selected? :name disallowed?)
   [:rels ALL disallowed?]
   (selected? :rels empty?))]
 NONE
 data)

(setval AFTER-ELEM 3 [1 2])
(setval BEFORE-ELEM 3 [1 2])
</pre><span>
since </span><code>(identical? {::NONE true} {::NONE true}) ;;=&gt; false</code></div><div id="t1509726364000575" t="2017-11-03 16:26:04 borkdude Don’t know if there is anything against changing this implementation detail?"><a href="#t1509726364000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:26:04</span>             borkdude </span><span>Don’t know if there is anything against changing this implementation detail?</span></div><div id="t1509726372000235" t="2017-11-03 16:26:12 borkdude Could make life with NONE somewhat easier"><a href="#t1509726372000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:26:12</span>             borkdude </span><span>Could make life with NONE somewhat easier</span></div><div id="t1509727476000182" t="2017-11-03 16:44:36 nathanmarz no, it&apos;s better to error when trying to navigate on  NONE"><a href="#t1509727476000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:44:36</span>           nathanmarz </span><span>no, it&apos;s better to error when trying to navigate on </span><code>NONE</code></div><div id="t1509727580000749" t="2017-11-03 16:46:20 nathanmarz this code makes  NONE  magically &quot;work&quot; for map navigators"><a href="#t1509727580000749" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:46:20</span>           nathanmarz </span><span>this code makes </span><code>NONE</code><span> magically &quot;work&quot; for map navigators</span></div><div id="t1509727591000272" t="2017-11-03 16:46:31 nathanmarz but it will still fail for all the other navigators"><a href="#t1509727591000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:46:31</span>           nathanmarz </span><span>but it will still fail for all the other navigators</span></div><div id="t1509727670000254" t="2017-11-03 16:47:50 nathanmarz better to handle it explicitly in code like this"><a href="#t1509727670000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:47:50</span>           nathanmarz </span><span>better to handle it explicitly in code like this</span></div><div id="t1509727687000391" t="2017-11-03 16:48:07 borkdude ok"><a href="#t1509727687000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:48:07</span>             borkdude </span><span>ok</span></div><div id="t1509727729000406" t="2017-11-03 16:48:49 borkdude Looking at the vanilla Clojure (which I didn’t write prior to writing Specter), it’s comparable length wise:
 https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#file-specter-clj-L20"><a href="#t1509727729000406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:48:49</span>             borkdude </span><span>Looking at the vanilla Clojure (which I didn’t write prior to writing Specter), it’s comparable length wise:
</span><a href="https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#file-specter-clj-L20" target="_blank">https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#file-specter-clj-L20</a></div><div id="t1509727838000413" t="2017-11-03 16:50:38 nathanmarz it changes all the vectors to seqs"><a href="#t1509727838000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:50:38</span>           nathanmarz </span><span>it changes all the vectors to seqs</span></div><div id="t1509727856000277" t="2017-11-03 16:50:56 borkdude true. in this case I didn’t need the vectors much longer as it went out as JSON anyway"><a href="#t1509727856000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:50:56</span>             borkdude </span><span>true. in this case I didn’t need the vectors much longer as it went out as JSON anyway</span></div><div id="t1509727950000446" t="2017-11-03 16:52:30 nathanmarz length isn&apos;t always the best metric of code quality"><a href="#t1509727950000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:52:30</span>           nathanmarz </span><span>length isn&apos;t always the best metric of code quality</span></div><div id="t1509727976000759" t="2017-11-03 16:52:56 nathanmarz besides maintaining types, I find the Specter version far more readable"><a href="#t1509727976000759" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:52:56</span>           nathanmarz </span><span>besides maintaining types, I find the Specter version far more readable</span></div><div id="t1509727994000032" t="2017-11-03 16:53:14 nathanmarz pretty much read left to right instead of having lots of nested expressions"><a href="#t1509727994000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">16:53:14</span>           nathanmarz </span><span>pretty much read left to right instead of having lots of nested expressions</span></div><div id="t1509728596000126" t="2017-11-03 17:03:16 borkdude Running a poll…  🙂   https://twitter.com/borkdude/status/926493766441226240"><a href="#t1509728596000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:03:16</span>             borkdude </span><span>Running a poll… </span><b>🙂</b><span> </span><a href="https://twitter.com/borkdude/status/926493766441226240" target="_blank">https://twitter.com/borkdude/status/926493766441226240</a></div><div id="t1509729531000481" t="2017-11-03 17:18:51 borkdude The Clojure version appears to be twice as fast (running 100k times with time,  keep  wrapped in  doall , I know, not a robust profiling tool, but still?)"><a href="#t1509729531000481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:18:51</span>             borkdude </span><span>The Clojure version appears to be twice as fast (running 100k times with time, </span><code>keep</code><span> wrapped in </span><code>doall</code><span>, I know, not a robust profiling tool, but still?)</span></div><div id="t1509729640000156" t="2017-11-03 17:20:40 borkdude Around 200ms for Clojure and 400ms for Specter"><a href="#t1509729640000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:20:40</span>             borkdude </span><span>Around 200ms for Clojure and 400ms for Specter</span></div><div id="t1509729770000646" t="2017-11-03 17:22:50 nathanmarz there&apos;s probably a bunch of micro-optimizations that can be done"><a href="#t1509729770000646" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:22:50</span>           nathanmarz </span><span>there&apos;s probably a bunch of micro-optimizations that can be done</span></div><div id="t1509729850000311" t="2017-11-03 17:24:10 nathanmarz empty?  is slow on vectors"><a href="#t1509729850000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:24:10</span>           nathanmarz </span><code>empty?</code><span> is slow on vectors</span></div><div id="t1509729880000225" t="2017-11-03 17:24:40 borkdude Could try  seq"><a href="#t1509729880000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:24:40</span>             borkdude </span><span>Could try </span><code>seq</code></div><div id="t1509729881000022" t="2017-11-03 17:24:41 nathanmarz #(= 0 (.length ^IPersistentVector v)) is fastest way I&apos;ve found"><a href="#t1509729881000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:24:41</span>           nathanmarz </span><span>#(= 0 (.length ^IPersistentVector v)) is fastest way I&apos;ve found</span></div><div id="t1509729895000147" t="2017-11-03 17:24:55 borkdude oh no wait, that’s the opposite  😛"><a href="#t1509729895000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:24:55</span>             borkdude </span><span>oh no wait, that’s the opposite </span><b>😛</b></div><div id="t1509729902000434" t="2017-11-03 17:25:02 borkdude ok"><a href="#t1509729902000434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:25:02</span>             borkdude </span><span>ok</span></div><div id="t1509729942000417" t="2017-11-03 17:25:42 nathanmarz can also change to:
 (setval
 [ALL
  (if-path (selected? :name disallowed?)
   STAY
   (multi-path
    [:rels ALL disallowed?]
    (selected? :rels empty?)))]
 NONE
 data)
"><a href="#t1509729942000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:25:42</span>           nathanmarz </span><span>can also change to:
</span><pre>(setval
 [ALL
  (if-path (selected? :name disallowed?)
   STAY
   (multi-path
    [:rels ALL disallowed?]
    (selected? :rels empty?)))]
 NONE
 data)
</pre></div><div id="t1509729953000038" t="2017-11-03 17:25:53 nathanmarz so it stops doing work after removing on first condition"><a href="#t1509729953000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:25:53</span>           nathanmarz </span><span>so it stops doing work after removing on first condition</span></div><div id="t1509729979000620" t="2017-11-03 17:26:19 borkdude ah"><a href="#t1509729979000620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:26:19</span>             borkdude </span><span>ah</span></div><div id="t1509730003000701" t="2017-11-03 17:26:43 nathanmarz #(-&gt; % :name disallowed?)  might be faster"><a href="#t1509730003000701" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:26:43</span>           nathanmarz </span><code>#(-&gt; % :name disallowed?)</code><span> might be faster</span></div><div id="t1509730084000022" t="2017-11-03 17:28:04 nathanmarz same with  #(-&gt; % :rels empty?)"><a href="#t1509730084000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:28:04</span>           nathanmarz </span><span>same with </span><code>#(-&gt; % :rels empty?)</code></div><div id="t1509730186000205" t="2017-11-03 17:29:46 borkdude (def my-empty? (fn [v] (= 0 (.length ^clojure.lang.IPersistentVector v))))

(time
 (dotimes [i 100000]
   (setval
    [ALL
     (if-path #(-&gt; % :name disallowed?)
              STAY
              (multi-path
               [:rels ALL disallowed?]
               #(-&gt; % :rels my-empty?)))]
    NONE
    data)))
 
Shaves off roughly 80ms"><a href="#t1509730186000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:29:46</span>             borkdude </span><pre>(def my-empty? (fn [v] (= 0 (.length ^clojure.lang.IPersistentVector v))))

(time
 (dotimes [i 100000]
   (setval
    [ALL
     (if-path #(-&gt; % :name disallowed?)
              STAY
              (multi-path
               [:rels ALL disallowed?]
               #(-&gt; % :rels my-empty?)))]
    NONE
    data)))
</pre><span>
Shaves off roughly 80ms</span></div><div id="t1509730364000210" t="2017-11-03 17:32:44 nathanmarz since specter version maintains types and clojure version constructs a different type, it&apos;s hard to say how much of difference comes from that"><a href="#t1509730364000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">17:32:44</span>           nathanmarz </span><span>since specter version maintains types and clojure version constructs a different type, it&apos;s hard to say how much of difference comes from that</span></div><div id="t1509732932000095" t="2017-11-03 18:15:32 nathanmarz @borkdude the inner call to  remove  is also not realizing the full computation"><a href="#t1509732932000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:15:32</span>           nathanmarz </span><span>@borkdude the inner call to </span><code>remove</code><span> is also not realizing the full computation</span></div><div id="t1509732956000333" t="2017-11-03 18:15:56 nathanmarz should wrap that in  doall  to make comparison fair"><a href="#t1509732956000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:15:56</span>           nathanmarz </span><span>should wrap that in </span><code>doall</code><span> to make comparison fair</span></div><div id="t1509734307000397" t="2017-11-03 18:38:27 borkdude @nathanmarz yes, did that, yields about 20ms extra"><a href="#t1509734307000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:38:27</span>             borkdude </span><span>@nathanmarz yes, did that, yields about 20ms extra</span></div><div id="t1509735039000307" t="2017-11-03 18:50:39 tanzoniteblack (defn vanilla []
  (doall (keep
          (fn [m]
            (if-not (disallowed? (:name m))
              (if-let [new-rels (doall (seq (remove disallowed? (:rels m))))]
                (assoc m :rels new-rels))))
          data)))  making this non-lazy (and measured with criterium)  Evaluation count : 558918 in 6 samples of 93153 calls.
             Execution time mean : 1.115634 µs
    Execution time std-deviation : 37.921802 ns
   Execution time lower quantile : 1.082254 µs ( 2.5%)
   Execution time upper quantile : 1.172033 µs (97.5%)
                   Overhead used : 1.603741 ns
 

This specter version:  (defn specter-v2 []
  (setval [ALL
           (if-path #(-&gt; % :name disallowed?)
                    STAY
                    (multi-path [:rels ALL disallowed?]
                                #(-&gt; % :rels empty?)))]
          NONE
          data))  also measured with criterium:  Evaluation count : 344118 in 6 samples of 57353 calls.
             Execution time mean : 1.732753 µs
    Execution time std-deviation : 12.525124 ns
   Execution time lower quantile : 1.716643 µs ( 2.5%)
   Execution time upper quantile : 1.744641 µs (97.5%)
                   Overhead used : 1.603741 ns
"><a href="#t1509735039000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:50:39</span>       tanzoniteblack </span><pre>(defn vanilla []
  (doall (keep
          (fn [m]
            (if-not (disallowed? (:name m))
              (if-let [new-rels (doall (seq (remove disallowed? (:rels m))))]
                (assoc m :rels new-rels))))
          data)))</pre><span> making this non-lazy (and measured with criterium) </span><pre>Evaluation count : 558918 in 6 samples of 93153 calls.
             Execution time mean : 1.115634 µs
    Execution time std-deviation : 37.921802 ns
   Execution time lower quantile : 1.082254 µs ( 2.5%)
   Execution time upper quantile : 1.172033 µs (97.5%)
                   Overhead used : 1.603741 ns
</pre><span>

This specter version: </span><pre>(defn specter-v2 []
  (setval [ALL
           (if-path #(-&gt; % :name disallowed?)
                    STAY
                    (multi-path [:rels ALL disallowed?]
                                #(-&gt; % :rels empty?)))]
          NONE
          data))</pre><span> also measured with criterium: </span><pre>Evaluation count : 344118 in 6 samples of 57353 calls.
             Execution time mean : 1.732753 µs
    Execution time std-deviation : 12.525124 ns
   Execution time lower quantile : 1.716643 µs ( 2.5%)
   Execution time upper quantile : 1.744641 µs (97.5%)
                   Overhead used : 1.603741 ns
</pre></div><div id="t1509735081000413" t="2017-11-03 18:51:21 tanzoniteblack so yeah...still faster with the hand-written clojure, but no where near as much as it was when factoring in the fact that one was lazy and the other not before"><a href="#t1509735081000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:51:21</span>       tanzoniteblack </span><span>so yeah...still faster with the hand-written clojure, but no where near as much as it was when factoring in the fact that one was lazy and the other not before</span></div><div id="t1509735131000487" t="2017-11-03 18:52:11 tanzoniteblack so...meh. Unless performance is absolutely critical to you, then it&apos;s just a style preference here? And if performance is absolutely critical...then always measure very carefully whatever you&apos;re doing"><a href="#t1509735131000487" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">18:52:11</span>       tanzoniteblack </span><span>so...meh. Unless performance is absolutely critical to you, then it&apos;s just a style preference here? And if performance is absolutely critical...then always measure very carefully whatever you&apos;re doing</span></div><div id="t1509745999000042" t="2017-11-03 21:53:19 borkdude @tanzoniteblack That criterium benchmark doesn’t draw a very different picture than what I already had"><a href="#t1509745999000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:53:19</span>             borkdude </span><span>@tanzoniteblack That criterium benchmark doesn’t draw a very different picture than what I already had</span></div><div id="t1509746065000338" t="2017-11-03 21:54:25 borkdude I had roughly 350ms for specter, 220 for clojure (x 1.5), criterium: x 1.55"><a href="#t1509746065000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:54:25</span>             borkdude </span><span>I had roughly 350ms for specter, 220 for clojure (x 1.5), criterium: x 1.55</span></div><div id="t1509746081000368" t="2017-11-03 21:54:41 borkdude but thanks for measuring"><a href="#t1509746081000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:54:41</span>             borkdude </span><span>but thanks for measuring</span></div><div id="t1509746096000067" t="2017-11-03 21:54:56 tanzoniteblack 🙂  wasn&apos;t saying my numbers were different then yours, I just couldn&apos;t find hard numbers for your final versions to directly compare, so decided to play with it myself"><a href="#t1509746096000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:54:56</span>       tanzoniteblack </span><b>🙂</b><span> wasn&apos;t saying my numbers were different then yours, I just couldn&apos;t find hard numbers for your final versions to directly compare, so decided to play with it myself</span></div><div id="t1509746115000349" t="2017-11-03 21:55:15 borkdude cool"><a href="#t1509746115000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:55:15</span>             borkdude </span><span>cool</span></div><div id="t1509746157000332" t="2017-11-03 21:55:57 tanzoniteblack also, I didn&apos;t see much of a difference between your custom empty and directly using  empty?  when measured with criterium. Don&apos;t remember the exact numbers, but only like 50-100 nanoseconds difference with the different empties swapped? Something within the realm of measuring error with the final result being in microseconds, anyways"><a href="#t1509746157000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:55:57</span>       tanzoniteblack </span><span>also, I didn&apos;t see much of a difference between your custom empty and directly using </span><code>empty?</code><span> when measured with criterium. Don&apos;t remember the exact numbers, but only like 50-100 nanoseconds difference with the different empties swapped? Something within the realm of measuring error with the final result being in microseconds, anyways</span></div><div id="t1509746164000276" t="2017-11-03 21:56:04 tanzoniteblack (just as an FYI)"><a href="#t1509746164000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:56:04</span>       tanzoniteblack </span><span>(just as an FYI)</span></div><div id="t1509746393000333" t="2017-11-03 21:59:53 borkdude Oh look, Alex wrote a transducers version too:  https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#gistcomment-2247156"><a href="#t1509746393000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">21:59:53</span>             borkdude </span><span>Oh look, Alex wrote a transducers version too: </span><a href="https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#gistcomment-2247156" target="_blank">https://gist.github.com/borkdude/5f9a4ae710217e893a9462ff90b6cac3#gistcomment-2247156</a></div><div id="t1509746419000128" t="2017-11-03 22:00:19 borkdude which is also slower than the non-transducer version"><a href="#t1509746419000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span> <span class="t" onclick="H(this)">22:00:19</span>             borkdude </span><span>which is also slower than the non-transducer version</span></div><div id="t1510323314000310" t="2017-11-10 14:15:14 michaelwfogleman Not sure if this has been mentioned before, but this library for string manipulation could be powerful to combine with Specter usage!  https://github.com/funcool/cuerdas"><a href="#t1510323314000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span> <span class="t" onclick="H(this)">14:15:14</span>     michaelwfogleman </span><span>Not sure if this has been mentioned before, but this library for string manipulation could be powerful to combine with Specter usage! </span><a href="https://github.com/funcool/cuerdas" target="_blank">https://github.com/funcool/cuerdas</a></div><div id="t1510337027000129" t="2017-11-10 18:03:47 gdeer81 Oh great, now every library is going to be the missing  X library."><a href="#t1510337027000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span> <span class="t" onclick="H(this)">18:03:47</span>              gdeer81 </span><span>Oh great, now every library is going to be the missing  X library.</span></div><div id="t1510337079000501" t="2017-11-10 18:04:39 gdeer81 I&apos;m going to update Marginalia&apos;s tag line to say &quot;The missing clojure literate programming documentation library&quot;"><a href="#t1510337079000501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span> <span class="t" onclick="H(this)">18:04:39</span>              gdeer81 </span><span>I&apos;m going to update Marginalia&apos;s tag line to say &quot;The missing clojure literate programming documentation library&quot;</span></div><div id="t1510337758000057" t="2017-11-10 18:15:58 gdeer81 but it does look like an interesting library. and if you had some heavily nested text, it would be a powerful combo with Specter"><a href="#t1510337758000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span> <span class="t" onclick="H(this)">18:15:58</span>              gdeer81 </span><span>but it does look like an interesting library. and if you had some heavily nested text, it would be a powerful combo with Specter</span></div><div id="t1510400447000004" t="2017-11-11 11:40:47 borkdude Cuerdas looks great. It has one issue with DCE in Google Closure though"><a href="#t1510400447000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-11</span> <span class="t" onclick="H(this)">11:40:47</span>             borkdude </span><span>Cuerdas looks great. It has one issue with DCE in Google Closure though</span></div><div id="t1510400948000066" t="2017-11-11 11:49:08 borkdude The issue is it adds 47kb / 19kb to your file size. Might be fine, but if you use only one or two functions…"><a href="#t1510400948000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-11</span> <span class="t" onclick="H(this)">11:49:08</span>             borkdude </span><span>The issue is it adds 47kb / 19kb to your file size. Might be fine, but if you use only one or two functions…</span></div><div id="t1510580990000299" t="2017-11-13 13:49:50 hkjels Are sorted-maps not supported?"><a href="#t1510580990000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">13:49:50</span>               hkjels </span><span>Are sorted-maps not supported?</span></div><div id="t1510583585000066" t="2017-11-13 14:33:05 nathanmarz @hkjels they are... why do you ask?"><a href="#t1510583585000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">14:33:05</span>           nathanmarz </span><span>@hkjels they are... why do you ask?</span></div><div id="t1510589280000582" t="2017-11-13 16:08:00 hkjels My bad. Messed up a navigator"><a href="#t1510589280000582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">16:08:00</span>               hkjels </span><span>My bad. Messed up a navigator</span></div><div id="t1510609024000224" t="2017-11-13 21:37:04 ul Hey folks, i&apos;m investigating options for organizing state in my client app. I want DB-like experience, but existing solutions are still not convincing, including DataScript. How do you think, is it viable to use just normalized maps and query/update them with Specter? Is it easy to emulate joins with Specter?"><a href="#t1510609024000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">21:37:04</span>                   ul </span><span>Hey folks, i&apos;m investigating options for organizing state in my client app. I want DB-like experience, but existing solutions are still not convincing, including DataScript. How do you think, is it viable to use just normalized maps and query/update them with Specter? Is it easy to emulate joins with Specter?</span></div><div id="t1510609417000232" t="2017-11-13 21:43:37 nathanmarz @ul joins are not in the scope of specter, but otherwise specter is very helpful for managing state"><a href="#t1510609417000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">21:43:37</span>           nathanmarz </span><span>@ul joins are not in the scope of specter, but otherwise specter is very helpful for managing state</span></div><div id="t1510609465000218" t="2017-11-13 21:44:25 nathanmarz since it&apos;s so elegant to handle data structures of arbitrary complexity, it gives you the freedom to model your data in the best possible way"><a href="#t1510609465000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">21:44:25</span>           nathanmarz </span><span>since it&apos;s so elegant to handle data structures of arbitrary complexity, it gives you the freedom to model your data in the best possible way</span></div><div id="t1510612816000368" t="2017-11-13 22:40:16 ul I see at least two pros on that way:
1. My data will be highly explorable outside main query mechanics (because it will stay just Clojure datastructures)
2. It will be friendly to reactive approach I use: Specter queries will fit perfectly into reactive formulas, and with proper data organization will trigger not much redundant recalculations."><a href="#t1510612816000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-13</span> <span class="t" onclick="H(this)">22:40:16</span>                   ul </span><span>I see at least two pros on that way:
1. My data will be highly explorable outside main query mechanics (because it will stay just Clojure datastructures)
2. It will be friendly to reactive approach I use: Specter queries will fit perfectly into reactive formulas, and with proper data organization will trigger not much redundant recalculations.</span></div><div id="t1510860282000380" t="2017-11-16 19:24:42 nathanmarz Released Specter 1.0.5  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1510860282000380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-16</span> <span class="t" onclick="H(this)">19:24:42</span>           nathanmarz </span><span>Released Specter 1.0.5 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1510881991000106" t="2017-11-17 01:26:31 michaelwfogleman @nathanmarz Just curious, why did you decide against having numbers convert to index-nav?"><a href="#t1510881991000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span> <span class="t" onclick="H(this)">01:26:31</span>     michaelwfogleman </span><span>@nathanmarz Just curious, why did you decide against having numbers convert to index-nav?</span></div><div id="t1510885414000082" t="2017-11-17 02:23:34 nathanmarz so that  (select-any 0 {0 &quot;a&quot;})  would work"><a href="#t1510885414000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span> <span class="t" onclick="H(this)">02:23:34</span>           nathanmarz </span><span>so that </span><code>(select-any 0 {0 &quot;a&quot;})</code><span> would work</span></div><div id="t1510885460000253" t="2017-11-17 02:24:20 nathanmarz it matches semantics with clojure&apos;s  update-in  and  get-in , and it&apos;s less cases to remember for a user"><a href="#t1510885460000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span> <span class="t" onclick="H(this)">02:24:20</span>           nathanmarz </span><span>it matches semantics with clojure&apos;s </span><code>update-in</code><span> and </span><code>get-in</code><span>, and it&apos;s less cases to remember for a user</span></div><div id="t1510921353000059" t="2017-11-17 12:22:33 michaelwfogleman makes sense!  🙂"><a href="#t1510921353000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span> <span class="t" onclick="H(this)">12:22:33</span>     michaelwfogleman </span><span>makes sense! </span><b>🙂</b></div><div id="t1510924993000131" t="2017-11-17 13:23:13 nathanmarz @michaelwfogleman I&apos;m also considering this  https://github.com/nathanmarz/specter/issues/234"><a href="#t1510924993000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span> <span class="t" onclick="H(this)">13:23:13</span>           nathanmarz </span><span>@michaelwfogleman I&apos;m also considering this </span><a href="https://github.com/nathanmarz/specter/issues/234" target="_blank">https://github.com/nathanmarz/specter/issues/234</a></div><div id="t1511302919000138" t="2017-11-21 22:21:59 johanatan hi, i have a normalized map say:  version -&gt; entity_1 -&gt; entity_2  and I want to transform it into:  entity_1 -&gt; version -&gt; entity_2 . what is the best way to do this using specter?"><a href="#t1511302919000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:21:59</span>            johanatan </span><span>hi, i have a normalized map say: </span><code>version -&gt; entity_1 -&gt; entity_2</code><span> and I want to transform it into: </span><code>entity_1 -&gt; version -&gt; entity_2</code><span>. what is the best way to do this using specter?</span></div><div id="t1511302934000220" t="2017-11-21 22:22:14 johanatan [this is a map of maps of maps]"><a href="#t1511302934000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:22:14</span>            johanatan </span><span>[this is a map of maps of maps]</span></div><div id="t1511303665000051" t="2017-11-21 22:34:25 johanatan for example:

input:
 {1 {&quot;e1&quot; {&quot;p1&quot; nil &quot;p2&quot; 9} &quot;e2&quot; {&quot;p3&quot; nil &quot;p4&quot; 6}} 2 {&quot;e1&quot; {&quot;p6&quot; nil &quot;p7&quot; nil}}}
 

output:
 {&quot;e1&quot; {1 {&quot;p1&quot; nil &quot;p2&quot; 9} 2 {&quot;p6&quot; nil &quot;p7&quot; nil}} &quot;e2&quot; {1 {&quot;p3&quot; nil, &quot;p4&quot; 6}}}
"><a href="#t1511303665000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:34:25</span>            johanatan </span><span>for example:

input:
</span><pre>{1 {&quot;e1&quot; {&quot;p1&quot; nil &quot;p2&quot; 9} &quot;e2&quot; {&quot;p3&quot; nil &quot;p4&quot; 6}} 2 {&quot;e1&quot; {&quot;p6&quot; nil &quot;p7&quot; nil}}}
</pre><span>

output:
</span><pre>{&quot;e1&quot; {1 {&quot;p1&quot; nil &quot;p2&quot; 9} 2 {&quot;p6&quot; nil &quot;p7&quot; nil}} &quot;e2&quot; {1 {&quot;p3&quot; nil, &quot;p4&quot; 6}}}
</pre></div><div id="t1511303962000213" t="2017-11-21 22:39:22 nathanmarz @johanatan specter won&apos;t help that much with that since you&apos;re basically making a whole new data structure"><a href="#t1511303962000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:39:22</span>           nathanmarz </span><span>@johanatan specter won&apos;t help that much with that since you&apos;re basically making a whole new data structure</span></div><div id="t1511303996000083" t="2017-11-21 22:39:56 nathanmarz specter is for when you&apos;re changing part of a data structure, or changing many pieces the same way within the overall structure"><a href="#t1511303996000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:39:56</span>           nathanmarz </span><span>specter is for when you&apos;re changing part of a data structure, or changing many pieces the same way within the overall structure</span></div><div id="t1511304038000269" t="2017-11-21 22:40:38 johanatan well, i could do it with a transform/collect/map combo"><a href="#t1511304038000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:40:38</span>            johanatan </span><span>well, i could do it with a transform/collect/map combo</span></div><div id="t1511304046000082" t="2017-11-21 22:40:46 johanatan but that isn&apos;t much better than just doing it by hand in pure clj"><a href="#t1511304046000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:40:46</span>            johanatan </span><span>but that isn&apos;t much better than just doing it by hand in pure clj</span></div><div id="t1511304188000318" t="2017-11-21 22:43:08 johanatan but i fail to see how in principle the &quot;whole&quot; isn&apos;t just an all-encompassing &quot;part&quot;"><a href="#t1511304188000318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:43:08</span>            johanatan </span><span>but i fail to see how in principle the &quot;whole&quot; isn&apos;t just an all-encompassing &quot;part&quot;</span></div><div id="t1511304227000119" t="2017-11-21 22:43:47 johanatan i.e., with any transformation-based language (say e.g. XSLT) changing the whole is just changing like changing a part where the part == the whole"><a href="#t1511304227000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:43:47</span>            johanatan </span><span>i.e., with any transformation-based language (say e.g. XSLT) changing the whole is just changing like changing a part where the part == the whole</span></div><div id="t1511304302000253" t="2017-11-21 22:45:02 johanatan in other words, it probably is possible with specter (and I would wager that the ultimate solution to it ends up being rather elegant once discovered) but the solution, like many (most?) in specter, is elusive and mind-bending to try to arrive at"><a href="#t1511304302000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:45:02</span>            johanatan </span><span>in other words, it probably is possible with specter (and I would wager that the ultimate solution to it ends up being rather elegant once discovered) but the solution, like many (most?) in specter, is elusive and mind-bending to try to arrive at</span></div><div id="t1511304426000080" t="2017-11-21 22:47:06 nathanmarz I don&apos;t think there&apos;s an elegant specter solution to this"><a href="#t1511304426000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:47:06</span>           nathanmarz </span><span>I don&apos;t think there&apos;s an elegant specter solution to this</span></div><div id="t1511304445000072" t="2017-11-21 22:47:25 nathanmarz this is a total restructuring"><a href="#t1511304445000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:47:25</span>           nathanmarz </span><span>this is a total restructuring</span></div><div id="t1511304466000508" t="2017-11-21 22:47:46 nathanmarz that it&apos;s still a map -&gt; map -&gt; map afterwards is deceiving"><a href="#t1511304466000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:47:46</span>           nathanmarz </span><span>that it&apos;s still a map -&gt; map -&gt; map afterwards is deceiving</span></div><div id="t1511304527000198" t="2017-11-21 22:48:47 johanatan you may be right.  🙂"><a href="#t1511304527000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:48:47</span>            johanatan </span><span>you may be right. </span><b>🙂</b></div><div id="t1511304543000086" t="2017-11-21 22:49:03 johanatan at least i know to not spend too much time searching for it lol"><a href="#t1511304543000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:49:03</span>            johanatan </span><span>at least i know to not spend too much time searching for it lol</span></div><div id="t1511304627000202" t="2017-11-21 22:50:27 nathanmarz it is an interesting use case"><a href="#t1511304627000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">22:50:27</span>           nathanmarz </span><span>it is an interesting use case</span></div><div id="t1511305725000286" t="2017-11-21 23:08:45 johanatan this works:
 (apply deep-merge (for [[version events] in] (specter/transform [specter/MAP-VALS] #(do {version %}) events)))
"><a href="#t1511305725000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">23:08:45</span>            johanatan </span><span>this works:
</span><pre>(apply deep-merge (for [[version events] in] (specter/transform [specter/MAP-VALS] #(do {version %}) events)))
</pre></div><div id="t1511305752000196" t="2017-11-21 23:09:12 johanatan where  deep-merge  is defined as:
 (defn deep-merge
  [&amp; vals]
  (if (every? map? vals)
    (apply merge-with deep-merge vals)
    (last vals)))
"><a href="#t1511305752000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">23:09:12</span>            johanatan </span><span>where </span><code>deep-merge</code><span> is defined as:
</span><pre>(defn deep-merge
  [&amp; vals]
  (if (every? map? vals)
    (apply merge-with deep-merge vals)
    (last vals)))
</pre></div><div id="t1511468798000193" t="2017-11-23 20:26:38 madstap Where specter isn&apos;t that well suited for this kind of transformation, there&apos;s this cool lib I remember seeing that should be perfect.   https://github.com/disalvjn/faconne"><a href="#t1511468798000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">20:26:38</span>                   madstap </span><span>Where specter isn&apos;t that well suited for this kind of transformation, there&apos;s this cool lib I remember seeing that should be perfect.  </span><a href="https://github.com/disalvjn/faconne" target="_blank">https://github.com/disalvjn/faconne</a></div><div id="t1511468848000094" t="2017-11-23 20:27:28 madstap The same thing in faconne
 (require &apos;[faconne.core :as fac])

(def f (fac/transformer {v {e1 {e2 x}}} {e1 {v {e2 x}}}))
"><a href="#t1511468848000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">20:27:28</span>                   madstap </span><span>The same thing in faconne
</span><pre>(require &apos;[faconne.core :as fac])

(def f (fac/transformer {v {e1 {e2 x}}} {e1 {v {e2 x}}}))
</pre></div><div id="t1511305792000229" t="2017-11-21 23:09:52 johanatan That&apos;s probably about as good/elegant as can be expected..."><a href="#t1511305792000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-21</span> <span class="t" onclick="H(this)">23:09:52</span>            johanatan </span><span>That&apos;s probably about as good/elegant as can be expected...</span></div><div id="t1511627751000081" t="2017-11-25 16:35:51 benstox Hello, a very beginner question here. Say I have a data structure like this and I want to select all the foods that have 3 pieces of cheese in them:
 (def kitchen {:foods [{:type :sandwich :ingredients [{:type :bread :quantity 3}
                                                     {:type :cheese :quantity 2}
                                                     {:type :meatball :quantity 5}]}
                      {:type :sandwich :ingredients [{:type :bread :quantity 2}
                                                     {:type :cheese :quantity 3}
                                                     {:type :ham :quantity 2}]}
                      {:type :quiche :ingredients [{:type :egg :quantity 5}
                                                   {:type :cheese :quantity 5}]}]})
 
That is, I expect to return the ham sandwich and the quiche.
I understand how I could use Specter to navigate to all the quantities of cheese that are greater than 3:
 (select [:foods ALL :ingredients ALL #(= (:type %) :cheese) :quantity #(&gt;= % 3)] kitchen)
 
but what I really want to do is this:
 (defn three-cheese-food? [food]
  (-&gt;&gt; food
    (:ingredients)
    (some
      (fn [ingredient]
        (and
          (= (:type ingredient) :cheese)
          (&gt;= (:quantity ingredient) 3))))))

(filter three-cheese-food? (:foods kitchen))
 
Can I use Specter to do the work done in my filtering and  three-cheese-food?  function? Thanks!"><a href="#t1511627751000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">16:35:51</span>              benstox </span><span>Hello, a very beginner question here. Say I have a data structure like this and I want to select all the foods that have 3 pieces of cheese in them:
</span><pre>(def kitchen {:foods [{:type :sandwich :ingredients [{:type :bread :quantity 3}
                                                     {:type :cheese :quantity 2}
                                                     {:type :meatball :quantity 5}]}
                      {:type :sandwich :ingredients [{:type :bread :quantity 2}
                                                     {:type :cheese :quantity 3}
                                                     {:type :ham :quantity 2}]}
                      {:type :quiche :ingredients [{:type :egg :quantity 5}
                                                   {:type :cheese :quantity 5}]}]})
</pre><span>
That is, I expect to return the ham sandwich and the quiche.
I understand how I could use Specter to navigate to all the quantities of cheese that are greater than 3:
</span><pre>(select [:foods ALL :ingredients ALL #(= (:type %) :cheese) :quantity #(&gt;= % 3)] kitchen)
</pre><span>
but what I really want to do is this:
</span><pre>(defn three-cheese-food? [food]
  (-&gt;&gt; food
    (:ingredients)
    (some
      (fn [ingredient]
        (and
          (= (:type ingredient) :cheese)
          (&gt;= (:quantity ingredient) 3))))))

(filter three-cheese-food? (:foods kitchen))
</pre><span>
Can I use Specter to do the work done in my filtering and </span><code>three-cheese-food?</code><span> function? Thanks!</span></div><div id="t1511630810000021" t="2017-11-25 17:26:50 nathanmarz @benstox yes, use  selected?"><a href="#t1511630810000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">17:26:50</span>           nathanmarz </span><span>@benstox yes, use </span><code>selected?</code></div><div id="t1511630814000003" t="2017-11-25 17:26:54 nathanmarz (select [:foods
         ALL
         (selected? :ingredients ALL #(= :cheese (:type %)) :quantity (pred&gt;= 3))]
  kitchen)
"><a href="#t1511630814000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">17:26:54</span>           nathanmarz </span><pre>(select [:foods
         ALL
         (selected? :ingredients ALL #(= :cheese (:type %)) :quantity (pred&gt;= 3))]
  kitchen)
</pre></div><div id="t1511631176000077" t="2017-11-25 17:32:56 benstox Ah,  selected? ! That was the piece I was missing. Thanks!"><a href="#t1511631176000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">17:32:56</span>              benstox </span><span>Ah, </span><code>selected?</code><span>! That was the piece I was missing. Thanks!</span></div><div id="t1511631503000093" t="2017-11-25 17:38:23 benstox And the  pred&gt;=  too."><a href="#t1511631503000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">17:38:23</span>              benstox </span><span>And the </span><code>pred&gt;=</code><span> too.</span></div><div id="t1511637450000023" t="2017-11-25 19:17:30 benstox Is there a Specter-y way to add multiple conditions to the filtering? I thought of this:
 (select [:foods
         ALL
         (selected? :ingredients ALL #(= :cheese (:type %)) (multi-path [:quantity (pred&gt;= 3)]
                                                                        [:quality (pred&gt;= 10)]))])
 
But this seems to act like an OR when what I want is an AND."><a href="#t1511637450000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">19:17:30</span>              benstox </span><span>Is there a Specter-y way to add multiple conditions to the filtering? I thought of this:
</span><pre>(select [:foods
         ALL
         (selected? :ingredients ALL #(= :cheese (:type %)) (multi-path [:quantity (pred&gt;= 3)]
                                                                        [:quality (pred&gt;= 10)]))])
</pre><span>
But this seems to act like an OR when what I want is an AND.</span></div><div id="t1511639842000058" t="2017-11-25 19:57:22 swizzard i&apos;m having a tough time requiring specter in a lumo repl:"><a href="#t1511639842000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">19:57:22</span>             swizzard </span><span>i&apos;m having a tough time requiring specter in a lumo repl:</span></div><div id="t1511639844000036" t="2017-11-25 19:57:24 swizzard cljs.user=&gt; (require &apos;[com.rpl.specter :as s :refer-macros [select transform]])
Could not require com.rpl.specter.navs in file com/rpl/specter.cljc
Could not require com.rpl.specter in file com/rpl/specter/navs.cljc
         (new)
         Function.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:1928:72)
         Function.cljs.analyzer.error.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2539:92)
         Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5849:145)
         Object.cljs.js.load_macros (NO_SOURCE_FILE &lt;embedded&gt;:5883:41)
         (NO_SOURCE_FILE &lt;embedded&gt;:5883:374)
         Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5838:1)
         Object.cljs.js.load_macros (NO_SOURCE_FILE &lt;embedded&gt;:5883:41)
         (NO_SOURCE_FILE &lt;embedded&gt;:5905:316)
         (NO_SOURCE_FILE &lt;embedded&gt;:5918:218)

Invalid regular expression: /\.js$/: Stack overflow
         String.replace (NO_SOURCE_FILE &lt;anonymous&gt;)
         Object.clojure.string.replace_all (NO_SOURCE_FILE &lt;embedded&gt;:1959:385)
         Object.clojure.string.replace (NO_SOURCE_FILE &lt;embedded&gt;:1962:191)
         (Object.cljs$stacktrace$remove_ext)
         (Object.cljs$stacktrace$mapped_line_column_call)
         (Object.cljs$stacktrace$mapped_frame)
         Function.&lt;anonymous&gt; (evalmachine.&lt;anonymous&gt;:512:24)
         Function.cljs.core.apply_to_simple.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:771:157)
         Function.cljs.core.apply_to_simple.cljs$core$IFn$_invoke$arity$2 (NO_SOURCE_FILE &lt;embedded&gt;:770:188)
         Function.cljs.core.apply.cljs$core$IFn$_invoke$arity$2 (NO_SOURCE_FILE &lt;embedded&gt;:783:244)
"><a href="#t1511639844000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">19:57:24</span>             swizzard </span><pre>cljs.user=&gt; (require &apos;[com.rpl.specter :as s :refer-macros [select transform]])
Could not require com.rpl.specter.navs in file com/rpl/specter.cljc
Could not require com.rpl.specter in file com/rpl/specter/navs.cljc
         (new)
         Function.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:1928:72)
         Function.cljs.analyzer.error.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2539:92)
         Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5849:145)
         Object.cljs.js.load_macros (NO_SOURCE_FILE &lt;embedded&gt;:5883:41)
         (NO_SOURCE_FILE &lt;embedded&gt;:5883:374)
         Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5838:1)
         Object.cljs.js.load_macros (NO_SOURCE_FILE &lt;embedded&gt;:5883:41)
         (NO_SOURCE_FILE &lt;embedded&gt;:5905:316)
         (NO_SOURCE_FILE &lt;embedded&gt;:5918:218)

Invalid regular expression: /\.js$/: Stack overflow
         String.replace (NO_SOURCE_FILE &lt;anonymous&gt;)
         Object.clojure.string.replace_all (NO_SOURCE_FILE &lt;embedded&gt;:1959:385)
         Object.clojure.string.replace (NO_SOURCE_FILE &lt;embedded&gt;:1962:191)
         (Object.cljs$stacktrace$remove_ext)
         (Object.cljs$stacktrace$mapped_line_column_call)
         (Object.cljs$stacktrace$mapped_frame)
         Function.&lt;anonymous&gt; (evalmachine.&lt;anonymous&gt;:512:24)
         Function.cljs.core.apply_to_simple.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:771:157)
         Function.cljs.core.apply_to_simple.cljs$core$IFn$_invoke$arity$2 (NO_SOURCE_FILE &lt;embedded&gt;:770:188)
         Function.cljs.core.apply.cljs$core$IFn$_invoke$arity$2 (NO_SOURCE_FILE &lt;embedded&gt;:783:244)
</pre></div><div id="t1511640397000050" t="2017-11-25 20:06:37 nathanmarz @benstox  selected?  is true if it navigates to at least one value, so  multi-path  in a  selected?  acts like an or"><a href="#t1511640397000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:06:37</span>           nathanmarz </span><span>@benstox </span><code>selected?</code><span> is true if it navigates to at least one value, so </span><code>multi-path</code><span> in a </span><code>selected?</code><span> acts like an or</span></div><div id="t1511640438000053" t="2017-11-25 20:07:18 nathanmarz for multiple conditions just use multiple  selected?  or multiple predicates in the path, e.g.  [#(...) #(...) (selected? ...)]"><a href="#t1511640438000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:07:18</span>           nathanmarz </span><span>for multiple conditions just use multiple </span><code>selected?</code><span> or multiple predicates in the path, e.g. </span><code>[#(...) #(...) (selected? ...)]</code></div><div id="t1511640492000030" t="2017-11-25 20:08:12 nathanmarz @swizzard don&apos;t know anything about lumo, you&apos;ll probably have better luck in #clojurescript"><a href="#t1511640492000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:08:12</span>           nathanmarz </span><span>@swizzard don&apos;t know anything about lumo, you&apos;ll probably have better luck in #clojurescript</span></div><div id="t1511640504000043" t="2017-11-25 20:08:24 swizzard fair enough, thanks"><a href="#t1511640504000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:08:24</span>             swizzard </span><span>fair enough, thanks</span></div><div id="t1511642582000026" t="2017-11-25 20:43:02 drowsy @benstox I wrote a small lib to tackle such a selection more declarative:  https://github.com/IamDrowsy/ebenbild"><a href="#t1511642582000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:43:02</span>               drowsy </span><span>@benstox I wrote a small lib to tackle such a selection more declarative: </span><a href="https://github.com/IamDrowsy/ebenbild" target="_blank">https://github.com/IamDrowsy/ebenbild</a></div><div id="t1511642662000024" t="2017-11-25 20:44:22 drowsy in your case  (like {:type :cheese :quantity #(&gt;= % 3) :quality #(&gt;= % 10)})  would work"><a href="#t1511642662000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:44:22</span>               drowsy </span><span>in your case </span><code>(like {:type :cheese :quantity #(&gt;= % 3) :quality #(&gt;= % 10)})</code><span> would work</span></div><div id="t1511642708000124" t="2017-11-25 20:45:08 drowsy it returns a predicate that can be used directly in a specter path"><a href="#t1511642708000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">20:45:08</span>               drowsy </span><span>it returns a predicate that can be used directly in a specter path</span></div><div id="t1511647893000060" t="2017-11-25 22:11:33 benstox @nathanmarz Okay, makes sense. Thanks!
@drowsy Interesting! I’ll try your library out."><a href="#t1511647893000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-25</span> <span class="t" onclick="H(this)">22:11:33</span>              benstox </span><span>@nathanmarz Okay, makes sense. Thanks!
@drowsy Interesting! I’ll try your library out.</span></div><div id="t1511948027000181" t="2017-11-29 09:33:47 plamen Hello Nathan,

1. Specter is an amazing library, thank you for providing it!
2. Couple of questions around recursion:

In the following map, I do currently a lot of transformations using reduce/reduce-kv, loops, assoc-in/update-in etc., but as I started to rewrite the manipulations using Specter, the code got of course more readable and consistent.
 
{:name       ’A
 :info       ...
 :parameters ...
 :backend    {:package-name “a”}
 :inputs     {’IA {:connector :csv
                   :endpoint  ...
                   :variables {’iax {:name ’ix
                                     :type :double
                                     :rank 0}
                               ’iay {:name ’iy
                                     :type :double
                                     :rank 2}}}
              ’IB {:...       ...
                   :variables {’ibx {...}
                               ’iby {...}}
                   }}
 :variables  {’Avx {
              ’Avy {...}
              ’Avz {:name      “Avz”
                    :backend   {:package-name “a.avz”
					            :array-layout :column-major
								:array-memory :off-heap}
                    :type      :record
                    :variables {’Avzx {...}
                                ’Avzy {...}
								’Avzz {...
								       :name ’Avzz
								       :backend {:package-name “a.avz.avzz”}}}}}}

Now - in recursion scenarios like in adding a key :name with value the key of the map itself (where select result and transformation target are the same) like
input:
                   :variables {’iax {:type :double
                                     :rank 0}
                               ’iay {:type :double
                                     :rank 2}}
output:
                   :variables {’iax {:name ’ix
                                     :type :double
                                     :rank 0}
                               ’iay {:name ’iy
                                     :type :double
                                     :rank 2}}

everything works, but I probably miss some documentation or understanding to do recursion involving values from nodes from an upper or dispatching on values from a lower level. Examples:
- how do I create recursively the entry 
    :backend   {:package-name ???} 
	- where ??? is the path of :name to the selected/trasfomed map (as in the manually added package names in ’A ’Avz and ’Avzz)
	- while in this case not touching :variables maps starting at the :inputs key in one case?
	- or transforming both :variables paths (starting at :variables AND :inputs)?
- is there a way to collect on the go the current depth of recursion in Specter (or path?) in that same transformation query?
- is there a way to dispatch (or do separate transformation over the structure), but whose input can be in higher level than the tranformation target (e.g. can I select/transform the variable ’Avzx based on a :backend value in ’Avz)? 
- is there a way to dispatch (or do separate transformation over the structure), but whose input can be in lower level than the tranformation target (e.g. can I select/transform the variable ’Avz based on a [:backend :array-layout] and [:backend :array-memory] values in ’Avz)? 

In all the questions my main problem is less how to solve it outside of Specter, but how to select and recurse where selection/collection come from other nodes that the transformation target."><a href="#t1511948027000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">09:33:47</span>               plamen </span><span>Hello Nathan,

1. Specter is an amazing library, thank you for providing it!
2. Couple of questions around recursion:

In the following map, I do currently a lot of transformations using reduce/reduce-kv, loops, assoc-in/update-in etc., but as I started to rewrite the manipulations using Specter, the code got of course more readable and consistent.
 
{:name       ’A
 :info       ...
 :parameters ...
 :backend    {:package-name “a”}
 :inputs     {’IA {:connector :csv
                   :endpoint  ...
                   :variables {’iax {:name ’ix
                                     :type :double
                                     :rank 0}
                               ’iay {:name ’iy
                                     :type :double
                                     :rank 2}}}
              ’IB {:...       ...
                   :variables {’ibx {...}
                               ’iby {...}}
                   }}
 :variables  {’Avx {
              ’Avy {...}
              ’Avz {:name      “Avz”
                    :backend   {:package-name “a.avz”
					            :array-layout :column-major
								:array-memory :off-heap}
                    :type      :record
                    :variables {’Avzx {...}
                                ’Avzy {...}
								’Avzz {...
								       :name ’Avzz
								       :backend {:package-name “a.avz.avzz”}}}}}}

Now - in recursion scenarios like in adding a key :name with value the key of the map itself (where select result and transformation target are the same) like
input:
                   :variables {’iax {:type :double
                                     :rank 0}
                               ’iay {:type :double
                                     :rank 2}}
output:
                   :variables {’iax {:name ’ix
                                     :type :double
                                     :rank 0}
                               ’iay {:name ’iy
                                     :type :double
                                     :rank 2}}

everything works, but I probably miss some documentation or understanding to do recursion involving values from nodes from an upper or dispatching on values from a lower level. Examples:
- how do I create recursively the entry 
    :backend   {:package-name ???} 
	- where ??? is the path of :name to the selected/trasfomed map (as in the manually added package names in ’A ’Avz and ’Avzz)
	- while in this case not touching :variables maps starting at the :inputs key in one case?
	- or transforming both :variables paths (starting at :variables AND :inputs)?
- is there a way to collect on the go the current depth of recursion in Specter (or path?) in that same transformation query?
- is there a way to dispatch (or do separate transformation over the structure), but whose input can be in higher level than the tranformation target (e.g. can I select/transform the variable ’Avzx based on a :backend value in ’Avz)? 
- is there a way to dispatch (or do separate transformation over the structure), but whose input can be in lower level than the tranformation target (e.g. can I select/transform the variable ’Avz based on a [:backend :array-layout] and [:backend :array-memory] values in ’Avz)? 

In all the questions my main problem is less how to solve it outside of Specter, but how to select and recurse where selection/collection come from other nodes that the transformation target.</span></div><div id="t1511967540000082" t="2017-11-29 14:59:00 nathanmarz for collecting a path as you go, look at  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure"><a href="#t1511967540000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">14:59:00</span>           nathanmarz </span><span>for collecting a path as you go, look at </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure</a></div><div id="t1511967566000132" t="2017-11-29 14:59:26 nathanmarz by collecting a path as you go like that, you can compute the recursion depth"><a href="#t1511967566000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">14:59:26</span>           nathanmarz </span><span>by collecting a path as you go like that, you can compute the recursion depth</span></div><div id="t1511967644000351" t="2017-11-29 15:00:44 nathanmarz if you use a  multi-transform , you could dispatch the transformation function like:
 (if-path [:backend (pred= :a)]
  (terminal transformer1)
  (terminal transformer2))
"><a href="#t1511967644000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">15:00:44</span>           nathanmarz </span><span>if you use a </span><code>multi-transform</code><span>, you could dispatch the transformation function like:
</span><pre>(if-path [:backend (pred= :a)]
  (terminal transformer1)
  (terminal transformer2))
</pre></div><div id="t1511967750000345" t="2017-11-29 15:02:30 nathanmarz I&apos;m not sure what you mean by your last question, it would help if you simplified your example and showed desired input/output"><a href="#t1511967750000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">15:02:30</span>           nathanmarz </span><span>I&apos;m not sure what you mean by your last question, it would help if you simplified your example and showed desired input/output</span></div><div id="t1511968055000374" t="2017-11-29 15:07:35 plamen Hello Nathan, a lot of thanks for the reply! Will implement what you just showed to me first and will come back to the last questions with simplification again."><a href="#t1511968055000374" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">15:07:35</span>               plamen </span><span>Hello Nathan, a lot of thanks for the reply! Will implement what you just showed to me first and will come back to the last questions with simplification again.</span></div><div id="t1511992886000249" t="2017-11-29 22:01:26 plamen ok, the answers added a lot of light to my questions 2,3 and 4, but I still struggle with 1. I simplified it to:"><a href="#t1511992886000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:01:26</span>               plamen </span><span>ok, the answers added a lot of light to my questions 2,3 and 4, but I still struggle with 1. I simplified it to:</span></div><div id="t1511992897000809" t="2017-11-29 22:01:37 plamen how to transform the map of maps"><a href="#t1511992897000809" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:01:37</span>               plamen </span><span>how to transform the map of maps</span></div><div id="t1511992903000685" t="2017-11-29 22:01:43 plamen {:name “root”
 :a    {:name “a”
        :i    1
        :j    {:name “j”
               :m    :test}
        :k    2}
  😛     {:name “b”
        :m    {:name “m”
               :n    :test}}}"><a href="#t1511992903000685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:01:43</span>               plamen </span><span>{:name “root”
 :a    {:name “a”
        :i    1
        :j    {:name “j”
               :m    :test}
        :k    2}
 </span><b>😛</b><span>    {:name “b”
        :m    {:name “m”
               :n    :test}}}</span></div><div id="t1511992941000480" t="2017-11-29 22:02:21 plamen (instead of a smiley, a keyword  😛  should be in the text…)"><a href="#t1511992941000480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:02:21</span>               plamen </span><span>(instead of a smiley, a keyword </span><b>😛</b><span> should be in the text…)</span></div><div id="t1511992959000844" t="2017-11-29 22:02:39 plamen (instead of a smiley, a keyword “:b” should be in the text…)"><a href="#t1511992959000844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:02:39</span>               plamen </span><span>(instead of a smiley, a keyword “:b” should be in the text…)</span></div><div id="t1511992969000865" t="2017-11-29 22:02:49 plamen to the map"><a href="#t1511992969000865" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:02:49</span>               plamen </span><span>to the map</span></div><div id="t1511992975000135" t="2017-11-29 22:02:55 plamen {:name “root”
 :package “root”
 :a    {:name “a”
        :package “root.a”
        :i    1
        :j    {:name “j”
               :package “root.a.j”
               :m    :test}
        :k    2}
  😛     {:name “b”
        :package “root.b”
        :m    {:name “m”
               :package “root.b.m”
               :n    :test}}}"><a href="#t1511992975000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:02:55</span>               plamen </span><span>{:name “root”
 :package “root”
 :a    {:name “a”
        :package “root.a”
        :i    1
        :j    {:name “j”
               :package “root.a.j”
               :m    :test}
        :k    2}
 </span><b>😛</b><span>    {:name “b”
        :package “root.b”
        :m    {:name “m”
               :package “root.b.m”
               :n    :test}}}</span></div><div id="t1511992984000478" t="2017-11-29 22:03:04 plamen (instead of a smiley, a keyword “:b” should be in the text…)"><a href="#t1511992984000478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:03:04</span>               plamen </span><span>(instead of a smiley, a keyword “:b” should be in the text…)</span></div><div id="t1511993125000646" t="2017-11-29 22:05:25 plamen sorry for the lack of formatting - learning to use slack"><a href="#t1511993125000646" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:05:25</span>               plamen </span><span>sorry for the lack of formatting - learning to use slack</span></div><div id="t1511993132000775" t="2017-11-29 22:05:32 plamen here again: how to trasform"><a href="#t1511993132000775" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:05:32</span>               plamen </span><span>here again: how to trasform</span></div><div id="t1511993136000924" t="2017-11-29 22:05:36 plamen {:name &quot;root&quot;
 :a    {:name &quot;a&quot;
        :i    1
        :j    {:name &quot;j&quot;
               :m    :test}
        :k    2}
 :b    {:name &quot;b&quot;
        :m    {:name &quot;m&quot;
               :n    :test}}}"><a href="#t1511993136000924" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:05:36</span>               plamen </span><pre>{:name &quot;root&quot;
 :a    {:name &quot;a&quot;
        :i    1
        :j    {:name &quot;j&quot;
               :m    :test}
        :k    2}
 :b    {:name &quot;b&quot;
        :m    {:name &quot;m&quot;
               :n    :test}}}</pre></div><div id="t1511993140000750" t="2017-11-29 22:05:40 plamen into"><a href="#t1511993140000750" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:05:40</span>               plamen </span><span>into</span></div><div id="t1511993150000350" t="2017-11-29 22:05:50 plamen {:name &quot;root&quot;
 :package &quot;root&quot;
 :a    {:name &quot;a&quot;
        :package &quot;root.a&quot;
        :i    1
        :j    {:name &quot;j&quot;
               :package &quot;root.a.j&quot;
               :m    :test}
        :k    2}
 :b    {:name &quot;b&quot;
        :package &quot;root.b&quot;
        :m    {:name &quot;m&quot;
               :package &quot;root.b.m&quot;
               :n    :test}}}"><a href="#t1511993150000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:05:50</span>               plamen </span><pre>{:name &quot;root&quot;
 :package &quot;root&quot;
 :a    {:name &quot;a&quot;
        :package &quot;root.a&quot;
        :i    1
        :j    {:name &quot;j&quot;
               :package &quot;root.a.j&quot;
               :m    :test}
        :k    2}
 :b    {:name &quot;b&quot;
        :package &quot;root.b&quot;
        :m    {:name &quot;m&quot;
               :package &quot;root.b.m&quot;
               :n    :test}}}</pre></div><div id="t1511993215000290" t="2017-11-29 22:06:55 plamen where the  :package  is constructed recursively from the path defined by the  :name  values"><a href="#t1511993215000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:06:55</span>               plamen </span><span>where the </span><pre>:package</pre><span> is constructed recursively from the path defined by the </span><pre>:name</pre><span> values</span></div><div id="t1511993296000391" t="2017-11-29 22:08:16 plamen any help is greatly appreciated"><a href="#t1511993296000391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:08:16</span>               plamen </span><span>any help is greatly appreciated</span></div><div id="t1511993975000254" t="2017-11-29 22:19:35 nathanmarz @plamen here&apos;s one way to do it:
 (def NODES-WITH-PATH
  (recursive-path [] p
    [(collect-one :name)
     (continue-then-stay MAP-VALS map? p)
     ]))

(transform [NODES-WITH-PATH :package]
  (fn [&amp; args]
    (let [path (butlast args)]
      (clojure.string/join &quot;.&quot; path)
      ))
  data
  )
"><a href="#t1511993975000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:19:35</span>           nathanmarz </span><span>@plamen here&apos;s one way to do it:
</span><pre>(def NODES-WITH-PATH
  (recursive-path [] p
    [(collect-one :name)
     (continue-then-stay MAP-VALS map? p)
     ]))

(transform [NODES-WITH-PATH :package]
  (fn [&amp; args]
    (let [path (butlast args)]
      (clojure.string/join &quot;.&quot; path)
      ))
  data
  )
</pre></div><div id="t1511994794000446" t="2017-11-29 22:33:14 plamen now starting to understand the benefit of continue-than-stay/stay-then-continue in combination with recursive-path. This was very enlightening (while I discovered Specter 2 days ago and still noob in it, spend may be 3 hours in bending with ALL/FIRST/LAST/p/collect-one for keys/values/recursion and always ended up either missing something from the path or ending in the value of the path key instead of the actual map etc…). A lot of thanks for taking time for my questions! Now everything is explained."><a href="#t1511994794000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:33:14</span>               plamen </span><span>now starting to understand the benefit of continue-than-stay/stay-then-continue in combination with recursive-path. This was very enlightening (while I discovered Specter 2 days ago and still noob in it, spend may be 3 hours in bending with ALL/FIRST/LAST/p/collect-one for keys/values/recursion and always ended up either missing something from the path or ending in the value of the path key instead of the actual map etc…). A lot of thanks for taking time for my questions! Now everything is explained.</span></div><div id="t1511995111000507" t="2017-11-29 22:38:31 plamen Amazing!"><a href="#t1511995111000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:38:31</span>               plamen </span><span>Amazing!</span></div><div id="t1511995207000264" t="2017-11-29 22:40:07 nathanmarz sure thing"><a href="#t1511995207000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-29</span> <span class="t" onclick="H(this)">22:40:07</span>           nathanmarz </span><span>sure thing</span></div><div id="t1512074467000425" t="2017-11-30 20:41:07 eoliphant Hi, I have the following data
 (def testtree    {:form/id 1
                  :form/name &quot;Test Form&quot;
                  :form/description &quot;My Description&quot;
                  :form/version 1
                  :form/groups [{:group/id    2
                                 :group/title  &quot;Page 1&quot;
                                 :group/type   :page
                                 :group/layout :vertical
                                 :group/fields []}
                                {:group/id    4
                                 :group/title  &quot;Page 1&quot;
                                 :group/type   :page
                                 :group/layout :vertical
                                 :group/fields []}]}
  )
 

to insert a new map in  form/groups  I’m doing the following:
 (sp/setval [:form/groups
            ;sp/ALL 
            (sp/srange-dynamic
              (fn [x] (first (keep-indexed #(when (= (:group/id %2) 2) %1) x)))
              (fn [x] (first (keep-indexed #(when (= (:group/id %2) 2) %1) x)))
              )]
          [ {:group/id 4
            :group/title &quot;Inserted&quot;}]
           testtree )
 

Which generally does what I want, but I’m just wondering if there’s any cleaner (more specterish) way to compute the indicies for the srange-dynamic"><a href="#t1512074467000425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">20:41:07</span>            eoliphant </span><span>Hi, I have the following data
</span><pre>(def testtree    {:form/id 1
                  :form/name &quot;Test Form&quot;
                  :form/description &quot;My Description&quot;
                  :form/version 1
                  :form/groups [{:group/id    2
                                 :group/title  &quot;Page 1&quot;
                                 :group/type   :page
                                 :group/layout :vertical
                                 :group/fields []}
                                {:group/id    4
                                 :group/title  &quot;Page 1&quot;
                                 :group/type   :page
                                 :group/layout :vertical
                                 :group/fields []}]}
  )
</pre><span>

to insert a new map in </span><code>form/groups</code><span> I’m doing the following:
</span><pre>(sp/setval [:form/groups
            ;sp/ALL 
            (sp/srange-dynamic
              (fn [x] (first (keep-indexed #(when (= (:group/id %2) 2) %1) x)))
              (fn [x] (first (keep-indexed #(when (= (:group/id %2) 2) %1) x)))
              )]
          [ {:group/id 4
            :group/title &quot;Inserted&quot;}]
           testtree )
</pre><span>

Which generally does what I want, but I’m just wondering if there’s any cleaner (more specterish) way to compute the indicies for the srange-dynamic</span></div><div id="t1512076729000204" t="2017-11-30 21:18:49 nathanmarz @eoliphant you&apos;re trying to insert before the map with  :group/id=2 , regardless of where it is in that sequence?"><a href="#t1512076729000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:18:49</span>           nathanmarz </span><span>@eoliphant you&apos;re trying to insert before the map with </span><code>:group/id=2</code><span>, regardless of where it is in that sequence?</span></div><div id="t1512076888000042" t="2017-11-30 21:21:28 eoliphant yes exactyl"><a href="#t1512076888000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:21:28</span>            eoliphant </span><span>yes exactyl</span></div><div id="t1512077177000568" t="2017-11-30 21:26:17 nathanmarz you can factor out that sort of navigation like this:
 (defn ^:direct-nav before-index-dynamic [p]
  (path
    (srange-dynamic
      (fn [aseq] (first (keep-indexed (fn [i e] (if (p e) i)) aseq)))
      (end-fn [_ s] s))
    BEFORE-ELEM))
"><a href="#t1512077177000568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:26:17</span>           nathanmarz </span><span>you can factor out that sort of navigation like this:
</span><pre>(defn ^:direct-nav before-index-dynamic [p]
  (path
    (srange-dynamic
      (fn [aseq] (first (keep-indexed (fn [i e] (if (p e) i)) aseq)))
      (end-fn [_ s] s))
    BEFORE-ELEM))
</pre></div><div id="t1512077207000071" t="2017-11-30 21:26:47 nathanmarz then you can use it like this:
 user=&gt; (setval (before-index-dynamic #(= % 2)) :a [1 2 4 9 2 10])
[1 :a 2 4 9 2 10]
"><a href="#t1512077207000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:26:47</span>           nathanmarz </span><span>then you can use it like this:
</span><pre>user=&gt; (setval (before-index-dynamic #(= % 2)) :a [1 2 4 9 2 10])
[1 :a 2 4 9 2 10]
</pre></div><div id="t1512077225000329" t="2017-11-30 21:27:05 eoliphant ah gotcha.  Yes that’s much cleaner  🙂"><a href="#t1512077225000329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:27:05</span>            eoliphant </span><span>ah gotcha.  Yes that’s much cleaner </span><b>🙂</b></div><div id="t1512077227000192" t="2017-11-30 21:27:07 eoliphant thanks"><a href="#t1512077227000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:27:07</span>            eoliphant </span><span>thanks</span></div><div id="t1512077256000203" t="2017-11-30 21:27:36 nathanmarz using  end-fn  also avoids computing the index twice"><a href="#t1512077256000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:27:36</span>           nathanmarz </span><span>using </span><code>end-fn</code><span> also avoids computing the index twice</span></div><div id="t1512077283000326" t="2017-11-30 21:28:03 eoliphant yeah that’s cool, that was annoying me as well"><a href="#t1512077283000326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:28:03</span>            eoliphant </span><span>yeah that’s cool, that was annoying me as well</span></div><div id="t1512077830000122" t="2017-11-30 21:37:10 eoliphant it’s funny, I first started playing with specter a month or 2 ago and it kind of gave me a migraine lol.  But sometimes you have to step away, and come back.  Just picked it back up this morning and blew through a couple scenarios quite easily"><a href="#t1512077830000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:37:10</span>            eoliphant </span><span>it’s funny, I first started playing with specter a month or 2 ago and it kind of gave me a migraine lol.  But sometimes you have to step away, and come back.  Just picked it back up this morning and blew through a couple scenarios quite easily</span></div><div id="t1512078004000278" t="2017-11-30 21:40:04 nathanmarz any new way of thinking takes time to learn"><a href="#t1512078004000278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:40:04</span>           nathanmarz </span><span>any new way of thinking takes time to learn</span></div><div id="t1512078017000446" t="2017-11-30 21:40:17 nathanmarz eventually it becomes really easy"><a href="#t1512078017000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">21:40:17</span>           nathanmarz </span><span>eventually it becomes really easy</span></div><div id="t1512079582000462" t="2017-11-30 22:06:22 eoliphant yeah definitely grokking it better now.  One more quick question, this data structure is for an interactive form builder.  So as you can see a group has fields, etc.  There will cases where say you move a field from one group to another.  Is there a way to ‘move’ something from one path to another, or do the delete and add together, kind of transactionally?"><a href="#t1512079582000462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">22:06:22</span>            eoliphant </span><span>yeah definitely grokking it better now.  One more quick question, this data structure is for an interactive form builder.  So as you can see a group has fields, etc.  There will cases where say you move a field from one group to another.  Is there a way to ‘move’ something from one path to another, or do the delete and add together, kind of transactionally?</span></div><div id="t1512080129000057" t="2017-11-30 22:15:29 nathanmarz index-nav  can be used to move an element from one location in a sequence to another"><a href="#t1512080129000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">22:15:29</span>           nathanmarz </span><code>index-nav</code><span> can be used to move an element from one location in a sequence to another</span></div><div id="t1512080149000390" t="2017-11-30 22:15:49 nathanmarz otherwise you&apos;ll have to do removal and addition separately"><a href="#t1512080149000390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">22:15:49</span>           nathanmarz </span><span>otherwise you&apos;ll have to do removal and addition separately</span></div><div id="t1512080649000014" t="2017-11-30 22:24:09 eoliphant Ok, will give that a whirl"><a href="#t1512080649000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">22:24:09</span>            eoliphant </span><span>Ok, will give that a whirl</span></div><div id="t1512331857000030" t="2017-12-03 20:10:57 eoliphant hi, i have a quick question.  I want to recursively search for an element in a data-structure (maps, that have lists, that have maps, etc), then do a setval before/after the element i found

so I have this test data structure
 #:designer{:cur-form-def #:form{:id #uuid&quot;4979e704-5047-48cf-bfe3-fdf9ca58bae8&quot;,
                                :name &quot;New Form&quot;,
                                :description &quot;Description&quot;,
                                :version 1,
                                :groups [#:group{:id #uuid&quot;d865ab2f-d114-4853-9a37-592a2c941152&quot;,
                                                 :title &quot;Page 1&quot;,
                                                 :type :page,
                                                 :layout :vertical,
                                                 :subgroups [#:group{:id #uuid&quot;237a7f3e-702e-4b63-8b4e-5df4da205e22&quot;,
                                                                     :name &quot;row1&quot;,
                                                                     :type :row,
                                                                     :layout :horizontal,
                                                                     :fields [#:field{:id #uuid&quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;,
                                                                                      :name :newfield,
                                                                                      :label &quot;New Fuekd&quot;,
                                                                                      :type :text}]}]}]}}
 

And I want to find the :newfield by its id and jam a new map in the containing vector after :newfield

so I do the following:

 (sp/setval [:designer/cur-form-def
            :form/groups
            sp/ALL
            (sp/walker #(= (:field/id %) #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;))
            sp/AFTER-ELEM
            ] [{:test :newfield}] appdb)
 
which gives me this:

 #:designer{:cur-form-def #:form{:id #uuid&quot;4979e704-5047-48cf-bfe3-fdf9ca58bae8&quot;,
                                :name &quot;New Form&quot;,
                                :description &quot;Description&quot;,
                                :version 1,
                                :groups [#:group{:id #uuid&quot;d865ab2f-d114-4853-9a37-592a2c941152&quot;,
                                                 :title &quot;Page 1&quot;,
                                                 :type :page,
                                                 :layout :vertical,
                                                 :subgroups [#:group{:id #uuid&quot;237a7f3e-702e-4b63-8b4e-5df4da205e22&quot;,
                                                                     :name &quot;row1&quot;,
                                                                     :type :row,
                                                                     :layout :horizontal,
                                                                     :fields [([:field/id
                                                                                #uuid&quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;]
                                                                               [:field/name :newfield]
                                                                               [:field/label &quot;New Fuekd&quot;]
                                                                               [:field/type :text]
 
The walker selector worked fine, but now :group/fields has gone from a vector with a single map to a vector, that has a single list of k/v pairs including the new one.  So I’m obviously doing somethign wrong lol.  When if leave off the AFTER-ELEM, the map is set as one would expect but replaces the one that was ‘found’

I’ve figured that I need to ‘go up/out’ of the map to get back to the vector, at this point, just not sure how"><a href="#t1512331857000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">20:10:57</span>            eoliphant </span><span>hi, i have a quick question.  I want to recursively search for an element in a data-structure (maps, that have lists, that have maps, etc), then do a setval before/after the element i found

so I have this test data structure
</span><pre>#:designer{:cur-form-def #:form{:id #uuid&quot;4979e704-5047-48cf-bfe3-fdf9ca58bae8&quot;,
                                :name &quot;New Form&quot;,
                                :description &quot;Description&quot;,
                                :version 1,
                                :groups [#:group{:id #uuid&quot;d865ab2f-d114-4853-9a37-592a2c941152&quot;,
                                                 :title &quot;Page 1&quot;,
                                                 :type :page,
                                                 :layout :vertical,
                                                 :subgroups [#:group{:id #uuid&quot;237a7f3e-702e-4b63-8b4e-5df4da205e22&quot;,
                                                                     :name &quot;row1&quot;,
                                                                     :type :row,
                                                                     :layout :horizontal,
                                                                     :fields [#:field{:id #uuid&quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;,
                                                                                      :name :newfield,
                                                                                      :label &quot;New Fuekd&quot;,
                                                                                      :type :text}]}]}]}}
</pre><span>

And I want to find the :newfield by its id and jam a new map in the containing vector after :newfield

so I do the following:

</span><pre>(sp/setval [:designer/cur-form-def
            :form/groups
            sp/ALL
            (sp/walker #(= (:field/id %) #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;))
            sp/AFTER-ELEM
            ] [{:test :newfield}] appdb)
</pre><span>
which gives me this:

</span><pre>#:designer{:cur-form-def #:form{:id #uuid&quot;4979e704-5047-48cf-bfe3-fdf9ca58bae8&quot;,
                                :name &quot;New Form&quot;,
                                :description &quot;Description&quot;,
                                :version 1,
                                :groups [#:group{:id #uuid&quot;d865ab2f-d114-4853-9a37-592a2c941152&quot;,
                                                 :title &quot;Page 1&quot;,
                                                 :type :page,
                                                 :layout :vertical,
                                                 :subgroups [#:group{:id #uuid&quot;237a7f3e-702e-4b63-8b4e-5df4da205e22&quot;,
                                                                     :name &quot;row1&quot;,
                                                                     :type :row,
                                                                     :layout :horizontal,
                                                                     :fields [([:field/id
                                                                                #uuid&quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;]
                                                                               [:field/name :newfield]
                                                                               [:field/label &quot;New Fuekd&quot;]
                                                                               [:field/type :text]
</pre><span>
The walker selector worked fine, but now :group/fields has gone from a vector with a single map to a vector, that has a single list of k/v pairs including the new one.  So I’m obviously doing somethign wrong lol.  When if leave off the AFTER-ELEM, the map is set as one would expect but replaces the one that was ‘found’

I’ve figured that I need to ‘go up/out’ of the map to get back to the vector, at this point, just not sure how</span></div><div id="t1512335049000047" t="2017-12-03 21:04:09 nathanmarz @eoliphant you need to do something similar to what I showed you before with  before-index-dynamic , except navigate after the index of the target element"><a href="#t1512335049000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:04:09</span>           nathanmarz </span><span>@eoliphant you need to do something similar to what I showed you before with </span><code>before-index-dynamic</code><span>, except navigate after the index of the target element</span></div><div id="t1512335131000077" t="2017-12-03 21:05:31 nathanmarz you could also use zippers for this task, see  https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1512335131000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:05:31</span>           nathanmarz </span><span>you could also use zippers for this task, see </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1512337621000084" t="2017-12-03 21:47:01 eoliphant hmm, ok so would it be something more like creating a recursive-path navigator instead of using walker?"><a href="#t1512337621000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:47:01</span>            eoliphant </span><span>hmm, ok so would it be something more like creating a recursive-path navigator instead of using walker?</span></div><div id="t1512337635000119" t="2017-12-03 21:47:15 nathanmarz definitely"><a href="#t1512337635000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:47:15</span>           nathanmarz </span><span>definitely</span></div><div id="t1512337678000094" t="2017-12-03 21:47:58 nathanmarz make a recursive path navigating to every &quot;group&quot; map, then navigate from there to the position next to your target element"><a href="#t1512337678000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:47:58</span>           nathanmarz </span><span>make a recursive path navigating to every &quot;group&quot; map, then navigate from there to the position next to your target element</span></div><div id="t1512337737000009" t="2017-12-03 21:48:57 nathanmarz there are really very few cases that justify the use of  walker"><a href="#t1512337737000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:48:57</span>           nathanmarz </span><span>there are really very few cases that justify the use of </span><code>walker</code></div><div id="t1512337806000035" t="2017-12-03 21:50:06 nathanmarz it traverses map keys, map key/value pairs, dives into record fields, all of which causes it to be much slower than necessary as well as lead to surprising bugs"><a href="#t1512337806000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:50:06</span>           nathanmarz </span><span>it traverses map keys, map key/value pairs, dives into record fields, all of which causes it to be much slower than necessary as well as lead to surprising bugs</span></div><div id="t1512337953000031" t="2017-12-03 21:52:33 eoliphant ok cool, that’s ironically sort of what I was thinking  🙂"><a href="#t1512337953000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:52:33</span>            eoliphant </span><span>ok cool, that’s ironically sort of what I was thinking </span><b>🙂</b></div><div id="t1512338022000077" t="2017-12-03 21:53:42 eoliphant and i see your point, walker is quick-and-dirty but far from optimal since I know specifically what I need to ’walk;"><a href="#t1512338022000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">21:53:42</span>            eoliphant </span><span>and i see your point, walker is quick-and-dirty but far from optimal since I know specifically what I need to ’walk;</span></div><div id="t1512342824000050" t="2017-12-03 23:13:44 eoliphant hi, I’m trying something like this:

 (def find-field
  (sp/recursive-path [uuid] p
                     (sp/cond-path
                       (sp/keypath :group/subgroups) [sp/ALL p]
                       (sp/keypath :group/fields) [sp/ALL p]
                       #(= (:field/id %) uuid) sp/STAY)))
 
and calling it like so
 (sp/select [:designer/cur-form-def
            :form/groups
            (find-field #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot; )
            ]
            appdb)
 

I’ve tried it with and without the  keypath  call but I’m getting a “Don’t know how to create ISeq from: clojure.lang.Keyword  ” in both cases"><a href="#t1512342824000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-03</span> <span class="t" onclick="H(this)">23:13:44</span>            eoliphant </span><span>hi, I’m trying something like this:

</span><pre>(def find-field
  (sp/recursive-path [uuid] p
                     (sp/cond-path
                       (sp/keypath :group/subgroups) [sp/ALL p]
                       (sp/keypath :group/fields) [sp/ALL p]
                       #(= (:field/id %) uuid) sp/STAY)))
</pre><span>
and calling it like so
</span><pre>(sp/select [:designer/cur-form-def
            :form/groups
            (find-field #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot; )
            ]
            appdb)
</pre><span>

I’ve tried it with and without the </span><code>keypath</code><span> call but I’m getting a “Don’t know how to create ISeq from: clojure.lang.Keyword  ” in both cases</span></div><div id="t1512346164000014" t="2017-12-04 00:09:24 nathanmarz @eoliphant a few things"><a href="#t1512346164000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:09:24</span>           nathanmarz </span><span>@eoliphant a few things</span></div><div id="t1512346172000054" t="2017-12-04 00:09:32 nathanmarz you&apos;re misunderstanding  cond-path  and  keypath"><a href="#t1512346172000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:09:32</span>           nathanmarz </span><span>you&apos;re misunderstanding </span><code>cond-path</code><span> and </span><code>keypath</code></div><div id="t1512346179000079" t="2017-12-04 00:09:39 nathanmarz a condition is true if it selects anything"><a href="#t1512346179000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:09:39</span>           nathanmarz </span><span>a condition is true if it selects anything</span></div><div id="t1512346195000095" t="2017-12-04 00:09:55 nathanmarz keypath  always selects something, so it&apos;s pointless to be a condition on its own"><a href="#t1512346195000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:09:55</span>           nathanmarz </span><code>keypath</code><span> always selects something, so it&apos;s pointless to be a condition on its own</span></div><div id="t1512346259000152" t="2017-12-04 00:10:59 nathanmarz you&apos;re also trying to navigate the maps and find the field in the submap at the same time, which isn&apos;t the right approach"><a href="#t1512346259000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:10:59</span>           nathanmarz </span><span>you&apos;re also trying to navigate the maps and find the field in the submap at the same time, which isn&apos;t the right approach</span></div><div id="t1512346305000133" t="2017-12-04 00:11:45 nathanmarz instead do something like:  (def NODES (recursive-path [] p (continue-then-stay :subgroups ALL)))"><a href="#t1512346305000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:11:45</span>           nathanmarz </span><span>instead do something like: </span><code>(def NODES (recursive-path [] p (continue-then-stay :subgroups ALL)))</code></div><div id="t1512346348000062" t="2017-12-04 00:12:28 nathanmarz then from there you can do  (transform [NODES :fields ..."><a href="#t1512346348000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">00:12:28</span>           nathanmarz </span><span>then from there you can do </span><code>(transform [NODES :fields ...</code></div><div id="t1512351419000011" t="2017-12-04 01:36:59 eoliphant hmm ok, will give that a shot, yeah i’d just tossed in keypath in trying to figure out why it wasn’t working.  originally it was just  
 (sp/cond-path
  :group/subgroups [ALL p]
 

but ok i think I see understand it a little better will break it out"><a href="#t1512351419000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">01:36:59</span>            eoliphant </span><span>hmm ok, will give that a shot, yeah i’d just tossed in keypath in trying to figure out why it wasn’t working.  originally it was just  
</span><pre>(sp/cond-path
  :group/subgroups [ALL p]
</pre><span>

but ok i think I see understand it a little better will break it out</span></div><div id="t1512358231000131" t="2017-12-04 03:30:31 eoliphant ok.  so after banging my head for a bit because i’d mistyped the key in NODES function lol, I’ve got everything working, needs some cleanup, but basically this:
 (sp/setval [:designer/cur-form-def
            :form/groups
            sp/ALL
            NODES
            :group/fields
            #(some? %)
            (before-index-dynamic #(= (:field/id %) #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;))

            ]
           [{:new :field}]
           appdb)
 

Will add  {:new field}  before the field with the matching id.  so good there.  However, had to do a bit of hacking because not all  :group/*  maps have  group/fields ,   This was initially blowing up the  before-index..  function as specter would dutifully provide a nil.  So I added the  some?  check.  That works, in terms of the field getting inserted, though I’m sure it’s not the best way, but the other thing is that the newly returned data structure adds a  {:group/fields nil}  to groups that didn’t have one, which surprised me as I thought the some? check would prevent that.    So I’m thinking the recursive path function should weed out groups that don’t have :group/fields?"><a href="#t1512358231000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">03:30:31</span>            eoliphant </span><span>ok.  so after banging my head for a bit because i’d mistyped the key in NODES function lol, I’ve got everything working, needs some cleanup, but basically this:
</span><pre>(sp/setval [:designer/cur-form-def
            :form/groups
            sp/ALL
            NODES
            :group/fields
            #(some? %)
            (before-index-dynamic #(= (:field/id %) #uuid &quot;b9a2c9ea-2647-48d3-ab26-4c2a115d7b6f&quot;))

            ]
           [{:new :field}]
           appdb)
</pre><span>

Will add </span><code>{:new field}</code><span> before the field with the matching id.  so good there.  However, had to do a bit of hacking because not all </span><code>:group/*</code><span> maps have </span><code>group/fields</code><span>,   This was initially blowing up the </span><code>before-index..</code><span> function as specter would dutifully provide a nil.  So I added the </span><code>some?</code><span> check.  That works, in terms of the field getting inserted, though I’m sure it’s not the best way, but the other thing is that the newly returned data structure adds a </span><code>{:group/fields nil}</code><span> to groups that didn’t have one, which surprised me as I thought the some? check would prevent that.    So I’m thinking the recursive path function should weed out groups that don’t have :group/fields?</span></div><div id="t1512391752000315" t="2017-12-04 12:49:12 nathanmarz @eoliphant ah you just need  before-index-dynamic  to navigate nowhere if there&apos;s no match"><a href="#t1512391752000315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">12:49:12</span>           nathanmarz </span><span>@eoliphant ah you just need </span><code>before-index-dynamic</code><span> to navigate nowhere if there&apos;s no match</span></div><div id="t1512391757000287" t="2017-12-04 12:49:17 nathanmarz this does the trick:
 (defn ^:direct-nav before-index-dynamic [p]
  (path
    (srange-dynamic
      (fn [aseq]
        (if-let [i (first (keep-indexed (fn [i e] (if (p e) i)) aseq))]
          i
          (count aseq)
          ))
      (end-fn [aseq s]
        (if (= s (count aseq)) s (inc s))))
    (complement empty?)
    BEFORE-ELEM
    ))
"><a href="#t1512391757000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">12:49:17</span>           nathanmarz </span><span>this does the trick:
</span><pre>(defn ^:direct-nav before-index-dynamic [p]
  (path
    (srange-dynamic
      (fn [aseq]
        (if-let [i (first (keep-indexed (fn [i e] (if (p e) i)) aseq))]
          i
          (count aseq)
          ))
      (end-fn [aseq s]
        (if (= s (count aseq)) s (inc s))))
    (complement empty?)
    BEFORE-ELEM
    ))
</pre></div><div id="t1512391864000372" t="2017-12-04 12:51:04 nathanmarz if you only want to navigate to a value in a map if the key exists, then do  (must :somekey)"><a href="#t1512391864000372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">12:51:04</span>           nathanmarz </span><span>if you only want to navigate to a value in a map if the key exists, then do </span><code>(must :somekey)</code></div><div id="t1512397180000719" t="2017-12-04 14:19:40 eoliphant ah yeah.  ok so even in my example just (must :group/fields), obviated the need for the (some? ..) and gave the proper result, will mess around with the path function as well to see what makes more sense"><a href="#t1512397180000719" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-04</span> <span class="t" onclick="H(this)">14:19:40</span>            eoliphant </span><span>ah yeah.  ok so even in my example just (must :group/fields), obviated the need for the (some? ..) and gave the proper result, will mess around with the path function as well to see what makes more sense</span></div><div id="t1512654011000085" t="2017-12-07 13:40:11 mbertheau How would I do  (filterv #(-&gt; % :id nil?) foo)  with specter? Or would I not?"><a href="#t1512654011000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">13:40:11</span>            mbertheau </span><span>How would I do </span><code>(filterv #(-&gt; % :id nil?) foo)</code><span> with specter? Or would I not?</span></div><div id="t1512654430000284" t="2017-12-07 13:47:10 nathanmarz @mbertheau two approaches:
 (select [ALL #(-&gt; % :id nil?)] foo)
"><a href="#t1512654430000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">13:47:10</span>           nathanmarz </span><span>@mbertheau two approaches:
</span><pre>(select [ALL #(-&gt; % :id nil?)] foo)
</pre></div><div id="t1512654445000277" t="2017-12-07 13:47:25 nathanmarz (setval [ALL #(-&gt; % :id some?)] NONE foo)
"><a href="#t1512654445000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">13:47:25</span>           nathanmarz </span><pre>(setval [ALL #(-&gt; % :id some?)] NONE foo)
</pre></div><div id="t1512654459000106" t="2017-12-07 13:47:39 nathanmarz the first always returns a vector, the second maintains the type of whatever  foo  is"><a href="#t1512654459000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">13:47:39</span>           nathanmarz </span><span>the first always returns a vector, the second maintains the type of whatever </span><code>foo</code><span> is</span></div><div id="t1512655610000381" t="2017-12-07 14:06:50 mbertheau @nathanmarz I&apos;m just starting out with specter - thanks for helping me up the initial learning curve!"><a href="#t1512655610000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">14:06:50</span>            mbertheau </span><span>@nathanmarz I&apos;m just starting out with specter - thanks for helping me up the initial learning curve!</span></div><div id="t1512656084000444" t="2017-12-07 14:14:44 nathanmarz sure, no problem"><a href="#t1512656084000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-07</span> <span class="t" onclick="H(this)">14:14:44</span>           nathanmarz </span><span>sure, no problem</span></div><div id="t1513173190000041" t="2017-12-13 13:53:10 mbjarland Hi @nathanmarz, now this might be a noob question, but how would I go about getting rid of the following warning when building my lein project (which has specter in the depenendency graph): 
 WARNING: any? already refers to: #&apos;clojure.core/any? in namespace: com.rpl.specter.impl, being replaced by: #&apos;com.rpl.specter.impl/any?
"><a href="#t1513173190000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:53:10</span>            mbjarland </span><span>Hi @nathanmarz, now this might be a noob question, but how would I go about getting rid of the following warning when building my lein project (which has specter in the depenendency graph): 
</span><pre>WARNING: any? already refers to: #&apos;clojure.core/any? in namespace: com.rpl.specter.impl, being replaced by: #&apos;com.rpl.specter.impl/any?
</pre></div><div id="t1513173198000080" t="2017-12-13 13:53:18 mbjarland clojure 1.9.0"><a href="#t1513173198000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:53:18</span>            mbjarland </span><span>clojure 1.9.0</span></div><div id="t1513173249000300" t="2017-12-13 13:54:09 nathanmarz @mbjarland ah i&apos;ll need to release a new version that renames those functions"><a href="#t1513173249000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:54:09</span>           nathanmarz </span><span>@mbjarland ah i&apos;ll need to release a new version that renames those functions</span></div><div id="t1513173265000272" t="2017-12-13 13:54:25 mbjarland I&apos;m using midje for testing which in turn pulls in marick/suchwow which in turn pulls in specter 0.13.0...ah ok"><a href="#t1513173265000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:54:25</span>            mbjarland </span><span>I&apos;m using midje for testing which in turn pulls in marick/suchwow which in turn pulls in specter 0.13.0...ah ok</span></div><div id="t1513173304000371" t="2017-12-13 13:55:04 mbjarland do you want the dependency graph or any other details from my side?"><a href="#t1513173304000371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:55:04</span>            mbjarland </span><span>do you want the dependency graph or any other details from my side?</span></div><div id="t1513173330000160" t="2017-12-13 13:55:30 nathanmarz no, that&apos;s fine"><a href="#t1513173330000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:55:30</span>           nathanmarz </span><span>no, that&apos;s fine</span></div><div id="t1513173361000397" t="2017-12-13 13:56:01 nathanmarz you&apos;ll need to open an issue with midje to update its dependencies"><a href="#t1513173361000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:56:01</span>           nathanmarz </span><span>you&apos;ll need to open an issue with midje to update its dependencies</span></div><div id="t1513173372000475" t="2017-12-13 13:56:12 nathanmarz looks like it&apos;s really outdated"><a href="#t1513173372000475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:56:12</span>           nathanmarz </span><span>looks like it&apos;s really outdated</span></div><div id="t1513173408000150" t="2017-12-13 13:56:48 mbjarland would be glad to, though it might be worth waiting until you do your update before creating the ticket"><a href="#t1513173408000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:56:48</span>            mbjarland </span><span>would be glad to, though it might be worth waiting until you do your update before creating the ticket</span></div><div id="t1513173446000433" t="2017-12-13 13:57:26 nathanmarz just checked, that function no longer exists in specter codebase so there are no warnings with latest version"><a href="#t1513173446000433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:57:26</span>           nathanmarz </span><span>just checked, that function no longer exists in specter codebase so there are no warnings with latest version</span></div><div id="t1513173476000242" t="2017-12-13 13:57:56 mbjarland ha, ok I&apos;ll create a ticket now then"><a href="#t1513173476000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:57:56</span>            mbjarland </span><span>ha, ok I&apos;ll create a ticket now then</span></div><div id="t1513173505000044" t="2017-12-13 13:58:25 nathanmarz oh apparently I knew about and fixed this a long time ago:  https://github.com/nathanmarz/specter/blob/master/CHANGES.md#0131"><a href="#t1513173505000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:58:25</span>           nathanmarz </span><span>oh apparently I knew about and fixed this a long time ago: </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md#0131" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md#0131</a></div><div id="t1513173505000409" t="2017-12-13 13:58:25 mbjarland unfortunate fact"><a href="#t1513173505000409" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:58:25</span>            mbjarland </span><span>unfortunate fact</span></div><div id="t1513173530000589" t="2017-12-13 13:58:50 mbjarland suchwow (which is the immediate dep of midje) has not changed since the 6.0.0 version which midje is using"><a href="#t1513173530000589" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:58:50</span>            mbjarland </span><span>suchwow (which is the immediate dep of midje) has not changed since the 6.0.0 version which midje is using</span></div><div id="t1513173559000284" t="2017-12-13 13:59:19 mbjarland this brings to mind Rich&apos;s talk about dependency hell..."><a href="#t1513173559000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">13:59:19</span>            mbjarland </span><span>this brings to mind Rich&apos;s talk about dependency hell...</span></div><div id="t1513173685000062" t="2017-12-13 14:01:25 mbjarland so I would have to file a ticket with suchwow and once they update, file a ticket with midje?"><a href="#t1513173685000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:01:25</span>            mbjarland </span><span>so I would have to file a ticket with suchwow and once they update, file a ticket with midje?</span></div><div id="t1513175071000620" t="2017-12-13 14:24:31 nathanmarz @mbjarland yea, it&apos;s an annoying problem with the jvm"><a href="#t1513175071000620" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:24:31</span>           nathanmarz </span><span>@mbjarland yea, it&apos;s an annoying problem with the jvm</span></div><div id="t1513175085000047" t="2017-12-13 14:24:45 nathanmarz but yes, that would be the approach to use"><a href="#t1513175085000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:24:45</span>           nathanmarz </span><span>but yes, that would be the approach to use</span></div><div id="t1513175105000709" t="2017-12-13 14:25:05 nathanmarz it would probably be a lot faster for you to just fork the projects yourself in the meantime"><a href="#t1513175105000709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:25:05</span>           nathanmarz </span><span>it would probably be a lot faster for you to just fork the projects yourself in the meantime</span></div><div id="t1513175252000014" t="2017-12-13 14:27:32 mbjarland there is an existing PR on suchwow: 
 https://github.com/marick/suchwow/pull/9"><a href="#t1513175252000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:27:32</span>            mbjarland </span><span>there is an existing PR on suchwow: 
</span><a href="https://github.com/marick/suchwow/pull/9" target="_blank">https://github.com/marick/suchwow/pull/9</a></div><div id="t1513175371000515" t="2017-12-13 14:29:31 mbjarland I created a ticket and referenced the pr, now we wait"><a href="#t1513175371000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:29:31</span>            mbjarland </span><span>I created a ticket and referenced the pr, now we wait</span></div><div id="t1513175386000035" t="2017-12-13 14:29:46 mbjarland https://github.com/marick/suchwow/issues/10"><a href="#t1513175386000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">14:29:46</span>            mbjarland </span><a href="https://github.com/marick/suchwow/issues/10" target="_blank">https://github.com/marick/suchwow/issues/10</a></div><div id="t1513178453000548" t="2017-12-13 15:20:53 abdullahibra @nathanmarz (select [ALL (selected? :p1 ALL :name (pred= &quot;wow&quot;))] data) =&gt; this expression check for &quot;wow&quot; word, what if i want to check multiple  different words"><a href="#t1513178453000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:20:53</span>         abdullahibra </span><span>@nathanmarz (select [ALL (selected? :p1 ALL :name (pred= &quot;wow&quot;))] data) =&gt; this expression check for &quot;wow&quot; word, what if i want to check multiple  different words</span></div><div id="t1513178481000051" t="2017-12-13 15:21:21 abdullahibra for example:
all contains &quot;wow&quot; or contains &quot;good&quot;"><a href="#t1513178481000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:21:21</span>         abdullahibra </span><span>for example:
all contains &quot;wow&quot; or contains &quot;good&quot;</span></div><div id="t1513178574000150" t="2017-12-13 15:22:54 abdullahibra (or (pred= &quot;wow&quot;) (pred= &quot;good&quot;)) ?"><a href="#t1513178574000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:22:54</span>         abdullahibra </span><span>(or (pred= &quot;wow&quot;) (pred= &quot;good&quot;)) ?</span></div><div id="t1513179643000777" t="2017-12-13 15:40:43 nathanmarz @abdullahibra replace  (pred= &quot;wow&quot;)  with  #{&quot;wow&quot; &quot;good&quot;}"><a href="#t1513179643000777" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:40:43</span>           nathanmarz </span><span>@abdullahibra replace </span><code>(pred= &quot;wow&quot;)</code><span> with </span><code>#{&quot;wow&quot; &quot;good&quot;}</code></div><div id="t1513179658000174" t="2017-12-13 15:40:58 abdullahibra great"><a href="#t1513179658000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:40:58</span>         abdullahibra </span><span>great</span></div><div id="t1513179767000713" t="2017-12-13 15:42:47 abdullahibra what if i want to use custom function rather than match string? maybe regexp matcher for example"><a href="#t1513179767000713" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:42:47</span>         abdullahibra </span><span>what if i want to use custom function rather than match string? maybe regexp matcher for example</span></div><div id="t1513179794000489" t="2017-12-13 15:43:14 nathanmarz @abdullahibra you can insert any clojure function into a path"><a href="#t1513179794000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:43:14</span>           nathanmarz </span><span>@abdullahibra you can insert any clojure function into a path</span></div><div id="t1513179834000506" t="2017-12-13 15:43:54 nathanmarz if it returns nil or false, it ceases navigation there"><a href="#t1513179834000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:43:54</span>           nathanmarz </span><span>if it returns nil or false, it ceases navigation there</span></div><div id="t1513179870000626" t="2017-12-13 15:44:30 nathanmarz regexes are also natively supported, they navigate to every substring match"><a href="#t1513179870000626" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:44:30</span>           nathanmarz </span><span>regexes are also natively supported, they navigate to every substring match</span></div><div id="t1513179875000874" t="2017-12-13 15:44:35 abdullahibra #{&quot;wow&quot; (fn [s] (re-find #&quot;[g|G]ood&quot; s))} this is right?"><a href="#t1513179875000874" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:44:35</span>         abdullahibra </span><span>#{&quot;wow&quot; (fn [s] (re-find #&quot;[g|G]ood&quot; s))} this is right?</span></div><div id="t1513179892000437" t="2017-12-13 15:44:52 nathanmarz so  (selected? #&quot;aaa&quot;)  would act as a filter"><a href="#t1513179892000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:44:52</span>           nathanmarz </span><span>so </span><code>(selected? #&quot;aaa&quot;)</code><span> would act as a filter</span></div><div id="t1513179912000674" t="2017-12-13 15:45:12 nathanmarz no, sets are interpreted just like a function"><a href="#t1513179912000674" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:45:12</span>           nathanmarz </span><span>no, sets are interpreted just like a function</span></div><div id="t1513179920001024" t="2017-12-13 15:45:20 nathanmarz (since sets are functions in clojure)"><a href="#t1513179920001024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:45:20</span>           nathanmarz </span><span>(since sets are functions in clojure)</span></div><div id="t1513179982000717" t="2017-12-13 15:46:22 nathanmarz you would want either  (fn [s] (or (= &quot;wow&quot; %) (re-find ...)))  or  (selected? (multi-path (pred= &quot;wow&quot;) #&quot;[g|G]ood&quot;))"><a href="#t1513179982000717" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:46:22</span>           nathanmarz </span><span>you would want either </span><code>(fn [s] (or (= &quot;wow&quot; %) (re-find ...)))</code><span> or </span><code>(selected? (multi-path (pred= &quot;wow&quot;) #&quot;[g|G]ood&quot;))</code></div><div id="t1513180008000462" t="2017-12-13 15:46:48 nathanmarz multi-path  within a  selected?  functions like an  or"><a href="#t1513180008000462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:46:48</span>           nathanmarz </span><code>multi-path</code><span> within a </span><code>selected?</code><span> functions like an </span><code>or</code></div><div id="t1513180028000312" t="2017-12-13 15:47:08 nathanmarz you may wish to look through  https://github.com/nathanmarz/specter/wiki/List-of-Navigators"><a href="#t1513180028000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:47:08</span>           nathanmarz </span><span>you may wish to look through </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a></div><div id="t1513180090000287" t="2017-12-13 15:48:10 abdullahibra that&apos;s really cool"><a href="#t1513180090000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:48:10</span>         abdullahibra </span><span>that&apos;s really cool</span></div><div id="t1513180094000824" t="2017-12-13 15:48:14 abdullahibra thanks man for this"><a href="#t1513180094000824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">15:48:14</span>         abdullahibra </span><span>thanks man for this</span></div><div id="t1513182633000004" t="2017-12-13 16:30:33 abdullahibra for this data: [{:s1 &quot;cool&quot; :p1 [{:name &quot;hello&quot; :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]},  {:s2 &quot;cool2&quot; :p1 [{:name &quot;wow&quot;, :sen &quot;fine&quot;} {:name &quot;world&quot;,, :sen &quot;none&quot;}]}]"><a href="#t1513182633000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:30:33</span>         abdullahibra </span><span>for this data: [{:s1 &quot;cool&quot; :p1 [{:name &quot;hello&quot; :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]},  {:s2 &quot;cool2&quot; :p1 [{:name &quot;wow&quot;, :sen &quot;fine&quot;} {:name &quot;world&quot;,, :sen &quot;none&quot;}]}]</span></div><div id="t1513182804000756" t="2017-12-13 16:33:24 abdullahibra @nathanmarz helped me to extract all hash maps which match &quot;wow&quot; or regexp, and for multiple words i would like to do this:
(selected? (apply multi-path [#&quot;regexp1&quot; #&quot;regexp2&quot;])) and what if i want to match two cases in the same time, so i want to catch the :name which has regexp and :sen which has also regexp"><a href="#t1513182804000756" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:33:24</span>         abdullahibra </span><span>@nathanmarz helped me to extract all hash maps which match &quot;wow&quot; or regexp, and for multiple words i would like to do this:
(selected? (apply multi-path [#&quot;regexp1&quot; #&quot;regexp2&quot;])) and what if i want to match two cases in the same time, so i want to catch the :name which has regexp and :sen which has also regexp</span></div><div id="t1513182877000061" t="2017-12-13 16:34:37 nathanmarz don&apos;t do  (apply multi-path ...)"><a href="#t1513182877000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:34:37</span>           nathanmarz </span><span>don&apos;t do </span><code>(apply multi-path ...)</code></div><div id="t1513182881000163" t="2017-12-13 16:34:41 abdullahibra why ?"><a href="#t1513182881000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:34:41</span>         abdullahibra </span><span>why ?</span></div><div id="t1513182892000248" t="2017-12-13 16:34:52 nathanmarz inefficient and unecessary"><a href="#t1513182892000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:34:52</span>           nathanmarz </span><span>inefficient and unecessary</span></div><div id="t1513182905000654" t="2017-12-13 16:35:05 nathanmarz to match multiple cases just put multiple conditions consecutive in the path"><a href="#t1513182905000654" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:35:05</span>           nathanmarz </span><span>to match multiple cases just put multiple conditions consecutive in the path</span></div><div id="t1513182907000362" t="2017-12-13 16:35:07 abdullahibra what if i have big list of regexp?"><a href="#t1513182907000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:35:07</span>         abdullahibra </span><span>what if i have big list of regexp?</span></div><div id="t1513182973000155" t="2017-12-13 16:36:13 abdullahibra what i would like to get any hash map which match any from regexp-list1 and regexp-list2 from two different paths"><a href="#t1513182973000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:36:13</span>         abdullahibra </span><span>what i would like to get any hash map which match any from regexp-list1 and regexp-list2 from two different paths</span></div><div id="t1513182990000179" t="2017-12-13 16:36:30 abdullahibra one path from :name and other from :sen"><a href="#t1513182990000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:36:30</span>         abdullahibra </span><span>one path from :name and other from :sen</span></div><div id="t1513183061000313" t="2017-12-13 16:37:41 nathanmarz you can do the  (apply multi-path some-list)  but there will be ways to optimize that if you have perf problems"><a href="#t1513183061000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:37:41</span>           nathanmarz </span><span>you can do the </span><code>(apply multi-path some-list)</code><span> but there will be ways to optimize that if you have perf problems</span></div><div id="t1513183167000396" t="2017-12-13 16:39:27 nathanmarz (selected? (multi-path :key1 :key2) (multi-path (pred= &quot;wow&quot;) #&quot;some-regex&quot;))"><a href="#t1513183167000396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:39:27</span>           nathanmarz </span><code>(selected? (multi-path :key1 :key2) (multi-path (pred= &quot;wow&quot;) #&quot;some-regex&quot;))</code></div><div id="t1513183192000514" t="2017-12-13 16:39:52 nathanmarz that would check that either :key1 or :key2 is either &quot;wow&quot; or matches that regex"><a href="#t1513183192000514" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:39:52</span>           nathanmarz </span><span>that would check that either :key1 or :key2 is either &quot;wow&quot; or matches that regex</span></div><div id="t1513183212000054" t="2017-12-13 16:40:12 abdullahibra i got this"><a href="#t1513183212000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:40:12</span>         abdullahibra </span><span>i got this</span></div><div id="t1513183233000389" t="2017-12-13 16:40:33 abdullahibra but if i would like to match :name is &quot;wow&quot; AND :sen is &quot;good&quot;"><a href="#t1513183233000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:40:33</span>         abdullahibra </span><span>but if i would like to match :name is &quot;wow&quot; AND :sen is &quot;good&quot;</span></div><div id="t1513183261000184" t="2017-12-13 16:41:01 abdullahibra so i don&apos;t get match for :name &quot;wow&quot; and :sen &quot;nothing&quot;"><a href="#t1513183261000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:41:01</span>         abdullahibra </span><span>so i don&apos;t get match for :name &quot;wow&quot; and :sen &quot;nothing&quot;</span></div><div id="t1513183272000582" t="2017-12-13 16:41:12 nathanmarz [#(= &quot;wow&quot; (:name %)) #(= &quot;good&quot; (:sen %))]"><a href="#t1513183272000582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:41:12</span>           nathanmarz </span><code>[#(= &quot;wow&quot; (:name %)) #(= &quot;good&quot; (:sen %))]</code></div><div id="t1513183296000966" t="2017-12-13 16:41:36 abdullahibra without multipath ?"><a href="#t1513183296000966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:41:36</span>         abdullahibra </span><span>without multipath ?</span></div><div id="t1513183355000026" t="2017-12-13 16:42:35 nathanmarz multi-path  navigates to multiple paths"><a href="#t1513183355000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:42:35</span>           nathanmarz </span><code>multi-path</code><span> navigates to multiple paths</span></div><div id="t1513183385000392" t="2017-12-13 16:43:05 nathanmarz for &quot;and&quot;, it&apos;s just multiple navigators in a row, for &quot;or&quot; it&apos;s  (selected? (multi-path ...))"><a href="#t1513183385000392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:43:05</span>           nathanmarz </span><span>for &quot;and&quot;, it&apos;s just multiple navigators in a row, for &quot;or&quot; it&apos;s </span><code>(selected? (multi-path ...))</code></div><div id="t1513183399000014" t="2017-12-13 16:43:19 abdullahibra ah okay got this"><a href="#t1513183399000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:43:19</span>         abdullahibra </span><span>ah okay got this</span></div><div id="t1513183455000249" t="2017-12-13 16:44:15 nathanmarz these are just how those concepts emerge from navigation"><a href="#t1513183455000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">16:44:15</span>           nathanmarz </span><span>these are just how those concepts emerge from navigation</span></div><div id="t1513252190000046" t="2017-12-14 11:49:50 abdullahibra hi guys"><a href="#t1513252190000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:49:50</span>         abdullahibra </span><span>hi guys</span></div><div id="t1513252194000390" t="2017-12-14 11:49:54 abdullahibra for this data:"><a href="#t1513252194000390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:49:54</span>         abdullahibra </span><span>for this data:</span></div><div id="t1513252204000502" t="2017-12-14 11:50:04 abdullahibra [{:s1 &quot;cool&quot;, :p1 [{:name &quot;hello&quot;, :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]} {:s2 &quot;cool2&quot;, :p1 [{:name &quot;wow&quot;, :sen &quot;fine&quot;} {:name &quot;world&quot;, :sen &quot;none&quot;}]}][{:s1 &quot;cool&quot;, :p1 [{:name &quot;hello&quot;, :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]}]"><a href="#t1513252204000502" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:50:04</span>         abdullahibra </span><span>[{:s1 &quot;cool&quot;, :p1 [{:name &quot;hello&quot;, :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]} {:s2 &quot;cool2&quot;, :p1 [{:name &quot;wow&quot;, :sen &quot;fine&quot;} {:name &quot;world&quot;, :sen &quot;none&quot;}]}][{:s1 &quot;cool&quot;, :p1 [{:name &quot;hello&quot;, :sen &quot;good&quot;} {:name &quot;world&quot;, :sen &quot;nothing&quot;}]}]</span></div><div id="t1513252236000239" t="2017-12-14 11:50:36 abdullahibra i want to get only hash maps which contain :name &quot;world&quot; and :sen &quot;nothing&quot;"><a href="#t1513252236000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:50:36</span>         abdullahibra </span><span>i want to get only hash maps which contain :name &quot;world&quot; and :sen &quot;nothing&quot;</span></div><div id="t1513252252000279" t="2017-12-14 11:50:52 abdullahibra i have tried:"><a href="#t1513252252000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:50:52</span>         abdullahibra </span><span>i have tried:</span></div><div id="t1513252255000029" t="2017-12-14 11:50:55 abdullahibra (select [ALL (selected? :p1 ALL (multi-path :token :sen) [#(= &quot;world&quot; (:name %)) #(= &quot;nothing&quot; (:sen %))])] data)"><a href="#t1513252255000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:50:55</span>         abdullahibra </span><span>(select [ALL (selected? :p1 ALL (multi-path :token :sen) [#(= &quot;world&quot; (:name %)) #(= &quot;nothing&quot; (:sen %))])] data)</span></div><div id="t1513252303000063" t="2017-12-14 11:51:43 abdullahibra @nathanmarz"><a href="#t1513252303000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">11:51:43</span>         abdullahibra </span><span>@nathanmarz</span></div><div id="t1513256497000333" t="2017-12-14 13:01:37 nathanmarz @abdullahibra  (select [ALL (selected? :p1 ALL #(= (:name %) &quot;world&quot;) #(= (:sen %) &quot;nothing&quot;))] data)"><a href="#t1513256497000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">13:01:37</span>           nathanmarz </span><span>@abdullahibra </span><code>(select [ALL (selected? :p1 ALL #(= (:name %) &quot;world&quot;) #(= (:sen %) &quot;nothing&quot;))] data)</code></div><div id="t1513259569000115" t="2017-12-14 13:52:49 abdullahibra thanks man  🙂 , your video is very worthwhile i have watched it"><a href="#t1513259569000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">13:52:49</span>         abdullahibra </span><span>thanks man </span><b>🙂</b><span>, your video is very worthwhile i have watched it</span></div><div id="t1513261612000435" t="2017-12-14 14:26:52 nathanmarz @abdullahibra thanks"><a href="#t1513261612000435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">14:26:52</span>           nathanmarz </span><span>@abdullahibra thanks</span></div><div id="t1513261639000511" t="2017-12-14 14:27:19 nathanmarz it&apos;s pretty out of date though, my blog post is the best introductory resource"><a href="#t1513261639000511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">14:27:19</span>           nathanmarz </span><span>it&apos;s pretty out of date though, my blog post is the best introductory resource</span></div><div id="t1513261674000128" t="2017-12-14 14:27:54 benstox Hi there, a question about walkers. If I have a data structure like this and I want to get all the leaves that have more than just whitespace in them, but still return the structure where they live:
 (def structure [
  &quot;leaf1&quot;
  &quot;\n&quot;
  {:contents [
    {:contents [&quot;leaf3&quot;]}
    {:contents [
      {:contents [
        &quot;leaf5&quot;
        &quot;leaf6&quot;
        &quot;\n&quot;]}]}
    &quot;\n&quot;
    {:contents [
      &quot;\n&quot;
      &quot;\n&quot;]}]}
  {:contents [
    &quot;leaf2&quot;
    {:contents []}]}
  &quot;leaf4&quot;])
 
So I’d hope to return a structure like this:
 [
  &quot;leaf1&quot;
  {:contents [
    {:contents [&quot;leaf3&quot;]}
    {:contents [
      {:contents [
        &quot;leaf5&quot;
        &quot;leaf6&quot;]}]}]}
  {:contents [&quot;leaf2&quot;]}
  &quot;leaf4&quot;]
 
I can get all the right leaves but not the structure with this:
 (select [(walker #(and (string? %) (re-find #&quot;\S&quot; %)))] structure)
 
I thought maybe  filterer  would be the right tool for this but couldn’t get it to work. Am I going about this the right way?"><a href="#t1513261674000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">14:27:54</span>              benstox </span><span>Hi there, a question about walkers. If I have a data structure like this and I want to get all the leaves that have more than just whitespace in them, but still return the structure where they live:
</span><pre>(def structure [
  &quot;leaf1&quot;
  &quot;\n&quot;
  {:contents [
    {:contents [&quot;leaf3&quot;]}
    {:contents [
      {:contents [
        &quot;leaf5&quot;
        &quot;leaf6&quot;
        &quot;\n&quot;]}]}
    &quot;\n&quot;
    {:contents [
      &quot;\n&quot;
      &quot;\n&quot;]}]}
  {:contents [
    &quot;leaf2&quot;
    {:contents []}]}
  &quot;leaf4&quot;])
</pre><span>
So I’d hope to return a structure like this:
</span><pre>[
  &quot;leaf1&quot;
  {:contents [
    {:contents [&quot;leaf3&quot;]}
    {:contents [
      {:contents [
        &quot;leaf5&quot;
        &quot;leaf6&quot;]}]}]}
  {:contents [&quot;leaf2&quot;]}
  &quot;leaf4&quot;]
</pre><span>
I can get all the right leaves but not the structure with this:
</span><pre>(select [(walker #(and (string? %) (re-find #&quot;\S&quot; %)))] structure)
</pre><span>
I thought maybe </span><code>filterer</code><span> would be the right tool for this but couldn’t get it to work. Am I going about this the right way?</span></div><div id="t1513263665000184" t="2017-12-14 15:01:05 nathanmarz @benstox the right approach is to do a  transform  and remove elements that have whitespace"><a href="#t1513263665000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">15:01:05</span>           nathanmarz </span><span>@benstox the right approach is to do a </span><code>transform</code><span> and remove elements that have whitespace</span></div><div id="t1513263675000216" t="2017-12-14 15:01:15 nathanmarz don&apos;t use  walker"><a href="#t1513263675000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">15:01:15</span>           nathanmarz </span><span>don&apos;t use </span><code>walker</code></div><div id="t1513263896000527" t="2017-12-14 15:04:56 nathanmarz (def NODES
  (recursive-path [] p
    (continue-then-stay
      (cond-path vector? [ALL p]
                 map? [MAP-VALS p])
      )))

(defn whitespace? [s] (= &quot;\n&quot; s))

(setval [NODES (if-path string? whitespace? empty?)] NONE structure)
"><a href="#t1513263896000527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">15:04:56</span>           nathanmarz </span><pre>(def NODES
  (recursive-path [] p
    (continue-then-stay
      (cond-path vector? [ALL p]
                 map? [MAP-VALS p])
      )))

(defn whitespace? [s] (= &quot;\n&quot; s))

(setval [NODES (if-path string? whitespace? empty?)] NONE structure)
</pre></div><div id="t1513263943000398" t="2017-12-14 15:05:43 nathanmarz just fill in  whitespace?  with a complete implementation"><a href="#t1513263943000398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">15:05:43</span>           nathanmarz </span><span>just fill in </span><code>whitespace?</code><span> with a complete implementation</span></div><div id="t1513264106000167" t="2017-12-14 15:08:26 benstox I see. Thanks a lot! I’ll try something like that."><a href="#t1513264106000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">15:08:26</span>              benstox </span><span>I see. Thanks a lot! I’ll try something like that.</span></div><div id="t1513298680000078" t="2017-12-15 00:44:40 jrheard hi, specter rookie here, i’m sure there’s a simple way to do this:"><a href="#t1513298680000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:44:40</span>              jrheard </span><span>hi, specter rookie here, i’m sure there’s a simple way to do this:</span></div><div id="t1513298693000199" t="2017-12-15 00:44:53 jrheard i have a  grid , which is a vector of vectors of values; those values are either numbers or nil"><a href="#t1513298693000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:44:53</span>              jrheard </span><span>i have a </span><code>grid</code><span>, which is a vector of vectors of values; those values are either numbers or nil</span></div><div id="t1513298717000271" t="2017-12-15 00:45:17 jrheard i’d like to write a specter query that gets me the indexes of all non-nil elements in  grid"><a href="#t1513298717000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:45:17</span>              jrheard </span><span>i’d like to write a specter query that gets me the indexes of all non-nil elements in </span><code>grid</code></div><div id="t1513298756000231" t="2017-12-15 00:45:56 jrheard i can get the non-nil elements themselves by doing
 (select [ALL ALL (comp not nil?)]
                  (@app-state :grid))
 
which gives me eg  (8 2 3 5 7)"><a href="#t1513298756000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:45:56</span>              jrheard </span><span>i can get the non-nil elements themselves by doing
</span><pre>(select [ALL ALL (comp not nil?)]
                  (@app-state :grid))
</pre><span>
which gives me eg </span><code>(8 2 3 5 7)</code></div><div id="t1513298775000341" t="2017-12-15 00:46:15 jrheard but i’d like instead to be given eg  ([5 3] [2 2] [3 1] [6 1] [4 2])  or whatever"><a href="#t1513298775000341" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:46:15</span>              jrheard </span><span>but i’d like instead to be given eg </span><code>([5 3] [2 2] [3 1] [6 1] [4 2])</code><span> or whatever</span></div><div id="t1513298798000051" t="2017-12-15 00:46:38 jrheard i.e. a list of the locations of those non-nil values in the grid, encoded as x-y pairs"><a href="#t1513298798000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:46:38</span>              jrheard </span><span>i.e. a list of the locations of those non-nil values in the grid, encoded as x-y pairs</span></div><div id="t1513299046000095" t="2017-12-15 00:50:46 jrheard the vanilla clojure code i have to do this is  (apply concat
         (for [x (range (count grid))]
           (for [y (range (count (grid x)))
                 :when (not (nil? (get-in grid [x y])))]
             [x y])))) , but i have a comment above it saying “; xxx is there a way to do this in specter”, so here i am  🙂  thanks!"><a href="#t1513299046000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">00:50:46</span>              jrheard </span><span>the vanilla clojure code i have to do this is </span><pre>(apply concat
         (for [x (range (count grid))]
           (for [y (range (count (grid x)))
                 :when (not (nil? (get-in grid [x y])))]
             [x y]))))</pre><span>, but i have a comment above it saying “; xxx is there a way to do this in specter”, so here i am </span><b>🙂</b><span> thanks!</span></div><div id="t1513305827000130" t="2017-12-15 02:43:47 nathanmarz @jrheard like this:  (select [INDEXED-VALS (collect-one FIRST) LAST INDEXED-VALS (selected? LAST some?) FIRST] grid)"><a href="#t1513305827000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">02:43:47</span>           nathanmarz </span><span>@jrheard like this: </span><code>(select [INDEXED-VALS (collect-one FIRST) LAST INDEXED-VALS (selected? LAST some?) FIRST] grid)</code></div><div id="t1513305859000047" t="2017-12-15 02:44:19 nathanmarz will be a lot faster than that clojure code too"><a href="#t1513305859000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">02:44:19</span>           nathanmarz </span><span>will be a lot faster than that clojure code too</span></div><div id="t1513343621000186" t="2017-12-15 13:13:41 mbjarland @nathanmarz The dependency chain we discussed yesterday is a step closer to completion, the pull request on suchwow was accepted, I&apos;ve created a ticket on midje and we&apos;re waiting for build to get deployed to clojars for suchwow ( https://github.com/marick/Midje/issues/427 )"><a href="#t1513343621000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">13:13:41</span>            mbjarland </span><span>@nathanmarz The dependency chain we discussed yesterday is a step closer to completion, the pull request on suchwow was accepted, I&apos;ve created a ticket on midje and we&apos;re waiting for build to get deployed to clojars for suchwow (</span><a href="https://github.com/marick/Midje/issues/427" target="_blank">https://github.com/marick/Midje/issues/427</a><span>)</span></div><div id="t1513361990000285" t="2017-12-15 18:19:50 nathanmarz @mbjarland ok, that&apos;s good"><a href="#t1513361990000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">18:19:50</span>           nathanmarz </span><span>@mbjarland ok, that&apos;s good</span></div><div id="t1513362016000215" t="2017-12-15 18:20:16 nathanmarz btw, have you tried just overriding the dependency with the latest version? should make the warning go away"><a href="#t1513362016000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">18:20:16</span>           nathanmarz </span><span>btw, have you tried just overriding the dependency with the latest version? should make the warning go away</span></div><div id="t1513362931000318" t="2017-12-15 18:35:31 mbjarland @nathanmarz no haven’t done that yet and really, it’s just a warning during a test run so not that big a deal to begin with. I’m happy to wait for the transitive chain to percolate up to midje"><a href="#t1513362931000318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">18:35:31</span>            mbjarland </span><span>@nathanmarz no haven’t done that yet and really, it’s just a warning during a test run so not that big a deal to begin with. I’m happy to wait for the transitive chain to percolate up to midje</span></div><div id="t1513377035000320" t="2017-12-15 22:30:35 jrheard thanks! that does give the same results, excellent"><a href="#t1513377035000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:30:35</span>              jrheard </span><span>thanks! that does give the same results, excellent</span></div><div id="t1513377074000200" t="2017-12-15 22:31:14 jrheard i don’t yet understand what the collecting-values is system is / how it works, will read the docs more closely!"><a href="#t1513377074000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:31:14</span>              jrheard </span><span>i don’t yet understand what the collecting-values is system is / how it works, will read the docs more closely!</span></div><div id="t1513377180000074" t="2017-12-15 22:33:00 jrheard the README makes it look pretty clear, i think i’ve just gotta play around with specter some more to build up some muscle memory and get to a point where this feels more natural  🙂"><a href="#t1513377180000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:33:00</span>              jrheard </span><span>the README makes it look pretty clear, i think i’ve just gotta play around with specter some more to build up some muscle memory and get to a point where this feels more natural </span><b>🙂</b></div><div id="t1513377287000132" t="2017-12-15 22:34:47 jrheard the examples at  https://github.com/nathanmarz/specter/wiki/List-of-Navigators#collect  are v helpful"><a href="#t1513377287000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:34:47</span>              jrheard </span><span>the examples at </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#collect" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#collect</a><span> are v helpful</span></div><div id="t1513378055000069" t="2017-12-15 22:47:35 nathanmarz @jrheard collected values are a vector that is passed along through navigation"><a href="#t1513378055000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:47:35</span>           nathanmarz </span><span>@jrheard collected values are a vector that is passed along through navigation</span></div><div id="t1513378069000053" t="2017-12-15 22:47:49 nathanmarz you can see the interface here:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3"><a href="#t1513378069000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:47:49</span>           nathanmarz </span><span>you can see the interface here: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L3</a></div><div id="t1513378088000080" t="2017-12-15 22:48:08 jrheard and the result of the selection is basically (concat collected-values value-you-navigated-to) ?"><a href="#t1513378088000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:48:08</span>              jrheard </span><span>and the result of the selection is basically (concat collected-values value-you-navigated-to) ?</span></div><div id="t1513378127000076" t="2017-12-15 22:48:47 nathanmarz yes"><a href="#t1513378127000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:48:47</span>           nathanmarz </span><span>yes</span></div><div id="t1513378130000005" t="2017-12-15 22:48:50 jrheard sick"><a href="#t1513378130000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:48:50</span>              jrheard </span><span>sick</span></div><div id="t1513378132000049" t="2017-12-15 22:48:52 nathanmarz conj , not  concat"><a href="#t1513378132000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:48:52</span>           nathanmarz </span><code>conj</code><span>, not </span><code>concat</code></div><div id="t1513378134000337" t="2017-12-15 22:48:54 jrheard aha"><a href="#t1513378134000337" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:48:54</span>              jrheard </span><span>aha</span></div><div id="t1513378150000240" t="2017-12-15 22:49:10 jrheard right, i follow"><a href="#t1513378150000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:49:10</span>              jrheard </span><span>right, i follow</span></div><div id="t1513378153000116" t="2017-12-15 22:49:13 jrheard thanks!  🙂"><a href="#t1513378153000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:49:13</span>              jrheard </span><span>thanks! </span><b>🙂</b></div><div id="t1513378184000146" t="2017-12-15 22:49:44 jrheard thanks again for the help with my grid example, i wouldn’t have come up with that specter code but it makes a lot of sense to me now!"><a href="#t1513378184000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:49:44</span>              jrheard </span><span>thanks again for the help with my grid example, i wouldn’t have come up with that specter code but it makes a lot of sense to me now!</span></div><div id="t1513378218000097" t="2017-12-15 22:50:18 nathanmarz here&apos;s where it happens:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L285"><a href="#t1513378218000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:50:18</span>           nathanmarz </span><span>here&apos;s where it happens: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L285" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L285</a></div><div id="t1513378238000273" t="2017-12-15 22:50:38 jrheard niice"><a href="#t1513378238000273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">22:50:38</span>              jrheard </span><span>niice</span></div><div id="t1513452476000066" t="2017-12-16 19:27:56 jrheard is there a natural way to use  srange , like, backward?"><a href="#t1513452476000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:27:56</span>              jrheard </span><span>is there a natural way to use </span><code>srange</code><span>, like, backward?</span></div><div id="t1513452484000022" t="2017-12-16 19:28:04 jrheard begin unreasonably long context dump for which i am greatly sorry:
again, i have a 2d grid of values that are integers or nil"><a href="#t1513452484000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:28:04</span>              jrheard </span><span>begin unreasonably long context dump for which i am greatly sorry:
again, i have a 2d grid of values that are integers or nil</span></div><div id="t1513452520000020" t="2017-12-16 19:28:40 jrheard i need to start at a particular x,y point on the grid and get the values seen as you walk four steps in each of the cardinal directions from that x,y point"><a href="#t1513452520000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:28:40</span>              jrheard </span><span>i need to start at a particular x,y point on the grid and get the values seen as you walk four steps in each of the cardinal directions from that x,y point</span></div><div id="t1513452545000106" t="2017-12-16 19:29:05 jrheard i call these “runs”, they’re related to the logic of this game i’m programming"><a href="#t1513452545000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:29:05</span>              jrheard </span><span>i call these “runs”, they’re related to the logic of this game i’m programming</span></div><div id="t1513452558000054" t="2017-12-16 19:29:18 jrheard so far, getting the right run and the down run is pretty straightforward:"><a href="#t1513452558000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:29:18</span>              jrheard </span><span>so far, getting the right run and the down run is pretty straightforward:</span></div><div id="t1513452569000005" t="2017-12-16 19:29:29 jrheard (let [x 6
        y 8]
    {:right-run (select [(srange (inc x) (+ x MAX-RUN-LENGTH)) ALL
                         y]
                        (@app-state :grid))
     :down-run (select [x
                        (srange (inc y) (+ y MAX-RUN-LENGTH)) ALL]
                       (@app-state :grid))
     })"><a href="#t1513452569000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:29:29</span>              jrheard </span><pre>(let [x 6
        y 8]
    {:right-run (select [(srange (inc x) (+ x MAX-RUN-LENGTH)) ALL
                         y]
                        (@app-state :grid))
     :down-run (select [x
                        (srange (inc y) (+ y MAX-RUN-LENGTH)) ALL]
                       (@app-state :grid))
     })</pre></div><div id="t1513452629000026" t="2017-12-16 19:30:29 jrheard but i’m having trouble figuring out how to do the left and up runs"><a href="#t1513452629000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:30:29</span>              jrheard </span><span>but i’m having trouble figuring out how to do the left and up runs</span></div><div id="t1513452696000091" t="2017-12-16 19:31:36 jrheard i could do it by hand in each of those cases - eg, if you’re going left, then in that situation you do  (srange (- x MAX-RUN-LENGTH) x)"><a href="#t1513452696000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:31:36</span>              jrheard </span><span>i could do it by hand in each of those cases - eg, if you’re going left, then in that situation you do </span><code>(srange (- x MAX-RUN-LENGTH) x)</code></div><div id="t1513452725000076" t="2017-12-16 19:32:05 jrheard maybe that’s just the sanest thing to do here"><a href="#t1513452725000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:32:05</span>              jrheard </span><span>maybe that’s just the sanest thing to do here</span></div><div id="t1513452783000132" t="2017-12-16 19:33:03 jrheard my preexisting clojure code involved a function (find-runs [x y xdir ydir]), with invocations like  (find-runs x y 0 -1) , and so inside that function you’ve got a single bit of run-finding code that can handle any of the four cardinal directions"><a href="#t1513452783000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:33:03</span>              jrheard </span><span>my preexisting clojure code involved a function (find-runs [x y xdir ydir]), with invocations like </span><code>(find-runs x y 0 -1)</code><span>, and so inside that function you’ve got a single bit of run-finding code that can handle any of the four cardinal directions</span></div><div id="t1513452830000082" t="2017-12-16 19:33:50 jrheard but it looks like if i want to specterize this code, the sanest thing is to write four specter  select  calls by hand, rather than reimplement  (find-runs x y xdir ydir)  in a way that uses a single  select  call whose path is heavily parameterized? apologies if any of this is foolish / obvious / doesn’t make any sense"><a href="#t1513452830000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:33:50</span>              jrheard </span><span>but it looks like if i want to specterize this code, the sanest thing is to write four specter </span><code>select</code><span> calls by hand, rather than reimplement </span><code>(find-runs x y xdir ydir)</code><span> in a way that uses a single </span><code>select</code><span> call whose path is heavily parameterized? apologies if any of this is foolish / obvious / doesn’t make any sense</span></div><div id="t1513452919000119" t="2017-12-16 19:35:19 jrheard preexisting implementation of  find-runs  in case it’s helpful:"><a href="#t1513452919000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:35:19</span>              jrheard </span><span>preexisting implementation of </span><code>find-runs</code><span> in case it’s helpful:</span></div><div id="t1513452923000072" t="2017-12-16 19:35:23 jrheard (reduce (fn [[run-length run-sum] num-steps-in-direction]
     ; Find the position of the cell we&apos;re currently examining.
     (let [run-x (+ x (* xdir num-steps-in-direction))
           run-y (+ y (* ydir num-steps-in-direction))]
       (if (or (not (cell-is-on-grid grid run-x run-y))
               (nil? (get-in grid [run-x run-y])))
         ; If the cell&apos;s value is nil or this position is off the grid, the run is over.
         (reduced [run-length run-sum])
         ; Otherwise, record this cell&apos;s value and continue following the run.
         [(inc run-length)
          (+ run-sum (get-in grid [run-x run-y]))])))
   [0 0]
   (map inc (range)))"><a href="#t1513452923000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:35:23</span>              jrheard </span><pre>(reduce (fn [[run-length run-sum] num-steps-in-direction]
     ; Find the position of the cell we&apos;re currently examining.
     (let [run-x (+ x (* xdir num-steps-in-direction))
           run-y (+ y (* ydir num-steps-in-direction))]
       (if (or (not (cell-is-on-grid grid run-x run-y))
               (nil? (get-in grid [run-x run-y])))
         ; If the cell&apos;s value is nil or this position is off the grid, the run is over.
         (reduced [run-length run-sum])
         ; Otherwise, record this cell&apos;s value and continue following the run.
         [(inc run-length)
          (+ run-sum (get-in grid [run-x run-y]))])))
   [0 0]
   (map inc (range)))</pre></div><div id="t1513452998000066" t="2017-12-16 19:36:38 jrheard the end goal here is to come up with a “run”, which is essentially  [(count run-values) (apply + run-values)]"><a href="#t1513452998000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:36:38</span>              jrheard </span><span>the end goal here is to come up with a “run”, which is essentially </span><code>[(count run-values) (apply + run-values)]</code></div><div id="t1513453083000023" t="2017-12-16 19:38:03 jrheard and again, the main problem i’m having trouble with is figuring out whether it’s sanely possible to write a single  select  call that’s parameterized on  x ,  y ,  xdir , and  ydir , or if that  select  call would be too grody and i should instead write four single-purpose  select  calls by hand"><a href="#t1513453083000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:38:03</span>              jrheard </span><span>and again, the main problem i’m having trouble with is figuring out whether it’s sanely possible to write a single </span><code>select</code><span> call that’s parameterized on </span><code>x</code><span>, </span><code>y</code><span>, </span><code>xdir</code><span>, and </span><code>ydir</code><span>, or if that </span><code>select</code><span> call would be too grody and i should instead write four single-purpose </span><code>select</code><span> calls by hand</span></div><div id="t1513453114000060" t="2017-12-16 19:38:34 jrheard i’ll do the by-hand approach for now, this is a toy project and doesn’t matter, but thanks in advance for your time and advice!  🙂"><a href="#t1513453114000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:38:34</span>              jrheard </span><span>i’ll do the by-hand approach for now, this is a toy project and doesn’t matter, but thanks in advance for your time and advice! </span><b>🙂</b></div><div id="t1513453709000030" t="2017-12-16 19:48:29 jrheard here’s what i ended up with: 
 (defn grid-range [start end direction]
  (srange (max start 0)
          (min end (if (= direction :horizontal)
                     GRID-WIDTH
                     GRID-HEIGHT))))

(let [x 6
      y 4]
  {:right-run (select [(grid-range (inc x) (+ x MAX-RUN-LENGTH) :horizontal) ALL
                       y]
                      (@app-state :grid))
   :down-run  (select [x
                       (grid-range (inc y) (+ y MAX-RUN-LENGTH) :vertical) ALL]
                      (@app-state :grid))
   :left-run  (select [(grid-range (- x (dec MAX-RUN-LENGTH)) x :horizontal) ALL
                       y]
                      (@app-state :grid))
   :up-run    (select [x
                       (grid-range (- y (dec MAX-RUN-LENGTH)) y :vertical) ALL]
                      (@app-state :grid))})
 
the sanest way i can think to clean it up is to make a function like eg  (get-run-selector-path x y :left) , which is implemented with just a  cond  with four branches, and the  :left  branch looks  like  [(grid-range (- x (dec MAX-RUN-LENGTH)) x :horizontal) ALL y] , etc; maybe there’s a saner thing to do here though?"><a href="#t1513453709000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:48:29</span>              jrheard </span><span>here’s what i ended up with: 
</span><pre>(defn grid-range [start end direction]
  (srange (max start 0)
          (min end (if (= direction :horizontal)
                     GRID-WIDTH
                     GRID-HEIGHT))))

(let [x 6
      y 4]
  {:right-run (select [(grid-range (inc x) (+ x MAX-RUN-LENGTH) :horizontal) ALL
                       y]
                      (@app-state :grid))
   :down-run  (select [x
                       (grid-range (inc y) (+ y MAX-RUN-LENGTH) :vertical) ALL]
                      (@app-state :grid))
   :left-run  (select [(grid-range (- x (dec MAX-RUN-LENGTH)) x :horizontal) ALL
                       y]
                      (@app-state :grid))
   :up-run    (select [x
                       (grid-range (- y (dec MAX-RUN-LENGTH)) y :vertical) ALL]
                      (@app-state :grid))})
</pre><span>
the sanest way i can think to clean it up is to make a function like eg </span><code>(get-run-selector-path x y :left)</code><span>, which is implemented with just a </span><code>cond</code><span> with four branches, and the </span><code>:left</code><span> branch looks  like </span><code>[(grid-range (- x (dec MAX-RUN-LENGTH)) x :horizontal) ALL y]</code><span>, etc; maybe there’s a saner thing to do here though?</span></div><div id="t1513454076000166" t="2017-12-16 19:54:36 jrheard all this is further complicated by the fact that i’d like all the runs’ values to be in order based on their direction from the origin cell because a “run” just means “a series of values in a row, in each cardinal direction, starting at this cell but excluding this cell’s value, with maximum length 4, stopping as soon as you see your first nil”."><a href="#t1513454076000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:54:36</span>              jrheard </span><span>all this is further complicated by the fact that i’d like all the runs’ values to be in order based on their direction from the origin cell because a “run” just means “a series of values in a row, in each cardinal direction, starting at this cell but excluding this cell’s value, with maximum length 4, stopping as soon as you see your first nil”.</span></div><div id="t1513454122000065" t="2017-12-16 19:55:22 jrheard so i’ll need to end up reversing  left-run  and  up-run  and then call  (take-until nil the-run)  on each of my four runs. and at the end of the day i’m like, maybe the end result in specter will be insane and i should just stick with my preexisting implementation, which is looking way better now that i’m comparing the two? and if so, that’s totally cool. again, sorry for the wall of text!"><a href="#t1513454122000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">19:55:22</span>              jrheard </span><span>so i’ll need to end up reversing </span><code>left-run</code><span> and </span><code>up-run</code><span> and then call </span><code>(take-until nil the-run)</code><span> on each of my four runs. and at the end of the day i’m like, maybe the end result in specter will be insane and i should just stick with my preexisting implementation, which is looking way better now that i’m comparing the two? and if so, that’s totally cool. again, sorry for the wall of text!</span></div><div id="t1513454636000090" t="2017-12-16 20:03:56 jrheard in case it’s helpful, the game board looks like this:  http://jrheard.com/quinto/ 

the “make a move” button has the AI detect the highest-scoring possible move and make it. there isn’t yet a way for the user to make a move, and there isn’t yet a visible score or any explanation of how the game works. the game’s basically scrabble but for numbers, the goal is to make “runs” of numbers that sum up to a multiple of five, it’s called quinto, my friend found it at goodwill and it seems like basically zero people in the world have ever played it"><a href="#t1513454636000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">20:03:56</span>              jrheard </span><span>in case it’s helpful, the game board looks like this: </span><a href="http://jrheard.com/quinto/" target="_blank">http://jrheard.com/quinto/</a><span>

the “make a move” button has the AI detect the highest-scoring possible move and make it. there isn’t yet a way for the user to make a move, and there isn’t yet a visible score or any explanation of how the game works. the game’s basically scrabble but for numbers, the goal is to make “runs” of numbers that sum up to a multiple of five, it’s called quinto, my friend found it at goodwill and it seems like basically zero people in the world have ever played it</span></div><div id="t1513460315000017" t="2017-12-16 21:38:35 nathanmarz @jrheard your use case is probably best handled with matrix-specific navigators"><a href="#t1513460315000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:38:35</span>           nathanmarz </span><span>@jrheard your use case is probably best handled with matrix-specific navigators</span></div><div id="t1513460360000005" t="2017-12-16 21:39:20 nathanmarz here&apos;s an excerpt from some code I have:
 (defnav matrix-elem [row col]
  (select* [this structure next-fn]
    (next-fn (-&gt; structure :rows (nth row) (nth col)))
    )
  (transform* [this structure next-fn]
    (let [rows (:rows structure)
          r (nth rows row)
          new-elem (next-fn (nth r col))]
      (-&gt;Matrix (assoc rows row (assoc r col new-elem)))
      )))
"><a href="#t1513460360000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:39:20</span>           nathanmarz </span><span>here&apos;s an excerpt from some code I have:
</span><pre>(defnav matrix-elem [row col]
  (select* [this structure next-fn]
    (next-fn (-&gt; structure :rows (nth row) (nth col)))
    )
  (transform* [this structure next-fn]
    (let [rows (:rows structure)
          r (nth rows row)
          new-elem (next-fn (nth r col))]
      (-&gt;Matrix (assoc rows row (assoc r col new-elem)))
      )))
</pre></div><div id="t1513460398000009" t="2017-12-16 21:39:58 nathanmarz you could also make a &quot;submat&quot; navigator that navigates you to a submatrix"><a href="#t1513460398000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:39:58</span>           nathanmarz </span><span>you could also make a &quot;submat&quot; navigator that navigates you to a submatrix</span></div><div id="t1513460491000037" t="2017-12-16 21:41:31 nathanmarz then you could do something like  (select [(submat 4 2 8 2) ALL ALL] mat)  to get the &quot;down run&quot;"><a href="#t1513460491000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:41:31</span>           nathanmarz </span><span>then you could do something like </span><code>(select [(submat 4 2 8 2) ALL ALL] mat)</code><span> to get the &quot;down run&quot;</span></div><div id="t1513460833000048" t="2017-12-16 21:47:13 nathanmarz for a less flexible approach you could have a  submat-elems  function like so:
 (defnav matrix-elem [row col]
  (select* [this structure next-fn]
    (next-fn (-&gt; structure(nth row) (nth col)))
    )
  (transform* [this structure next-fn]
    (let [rows (:rows structure)
          r (nth rows row)
          new-elem (next-fn (nth r col))]
      (assoc rows row (assoc r col new-elem))
      )))

(defn ^:direct-nav submat-elems [row col row2 col2]
  (reduce
    multi-path
    (for [r (range row (inc row2))
          c (range col (inc col2))]
      (matrix-elem r c)
      )))

(def data
  [[1   2   3   4]
   [5   6   7   8]
   [9   :a  :b  :c]
   [:d  :e  :f  :g]])

(select (submat-elems 1 1 3 1) data)
;; =&gt; [6 :a :e]
"><a href="#t1513460833000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:47:13</span>           nathanmarz </span><span>for a less flexible approach you could have a </span><code>submat-elems</code><span> function like so:
</span><pre>(defnav matrix-elem [row col]
  (select* [this structure next-fn]
    (next-fn (-&gt; structure(nth row) (nth col)))
    )
  (transform* [this structure next-fn]
    (let [rows (:rows structure)
          r (nth rows row)
          new-elem (next-fn (nth r col))]
      (assoc rows row (assoc r col new-elem))
      )))

(defn ^:direct-nav submat-elems [row col row2 col2]
  (reduce
    multi-path
    (for [r (range row (inc row2))
          c (range col (inc col2))]
      (matrix-elem r c)
      )))

(def data
  [[1   2   3   4]
   [5   6   7   8]
   [9   :a  :b  :c]
   [:d  :e  :f  :g]])

(select (submat-elems 1 1 3 1) data)
;; =&gt; [6 :a :e]
</pre></div><div id="t1513460910000081" t="2017-12-16 21:48:30 nathanmarz technically you don&apos;t really need  matrix-elem  and can just use  nthpath"><a href="#t1513460910000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">21:48:30</span>           nathanmarz </span><span>technically you don&apos;t really need </span><code>matrix-elem</code><span> and can just use </span><code>nthpath</code></div><div id="t1513477024000040" t="2017-12-17 02:17:04 jrheard thanks nathan! i’ll take a closer look at this tomorrow, much appreciated!  🙂"><a href="#t1513477024000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">02:17:04</span>              jrheard </span><span>thanks nathan! i’ll take a closer look at this tomorrow, much appreciated! </span><b>🙂</b></div><div id="t1513549956000129" t="2017-12-17 22:32:36 jrheard that absolutely did what i wanted - i added bounds checking and added my desired reversing behavior when row2 &lt; row or col2 &lt; col, and ended up with this, which i haven’t tested thoroughly but seems to be correct so far:"><a href="#t1513549956000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:32:36</span>              jrheard </span><span>that absolutely did what i wanted - i added bounds checking and added my desired reversing behavior when row2 &lt; row or col2 &lt; col, and ended up with this, which i haven’t tested thoroughly but seems to be correct so far:</span></div><div id="t1513549960000094" t="2017-12-17 22:32:40 jrheard (defn ^:direct-nav grid-values
  [x1 y1 x2 y2]
  (if (g/cell-is-on-grid x1 y1)
    (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
          y2 (bound-between y2 0 (dec GRID-HEIGHT))]

      (reduce
        multi-path
        (for [x (if (&lt; x1 x2)
                  (range x1 (inc x2))
                  (reverse (range x2 (inc x1))))
              y (if (&lt; y1 y2)
                  (range y1 (inc y2))
                  (reverse (range y2 (inc y1))))]
          (nthpath x y))))

    STOP))"><a href="#t1513549960000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:32:40</span>              jrheard </span><pre>(defn ^:direct-nav grid-values
  [x1 y1 x2 y2]
  (if (g/cell-is-on-grid x1 y1)
    (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
          y2 (bound-between y2 0 (dec GRID-HEIGHT))]

      (reduce
        multi-path
        (for [x (if (&lt; x1 x2)
                  (range x1 (inc x2))
                  (reverse (range x2 (inc x1))))
              y (if (&lt; y1 y2)
                  (range y1 (inc y2))
                  (reverse (range y2 (inc y1))))]
          (nthpath x y))))

    STOP))</pre></div><div id="t1513549969000099" t="2017-12-17 22:32:49 jrheard thanks so much for your help, i really appreciate it!"><a href="#t1513549969000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:32:49</span>              jrheard </span><span>thanks so much for your help, i really appreciate it!</span></div><div id="t1513550541000052" t="2017-12-17 22:42:21 jrheard final usage ends up looking like this, replacing my reduce from earlier:
 (fn [xdir ydir]
   (let [values-in-direction (select (grid-values (+ x xdir)
                                                  (+ y ydir)
                                                  (+ x (* xdir MAX-RUN-LENGTH))
                                                  (+ y (* ydir MAX-RUN-LENGTH)))
                                     grid)
         run-values (take-while (comp not nil?) values-in-direction)]
     [(count run-values) (apply + run-values)]))"><a href="#t1513550541000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:42:21</span>              jrheard </span><span>final usage ends up looking like this, replacing my reduce from earlier:
</span><pre>(fn [xdir ydir]
   (let [values-in-direction (select (grid-values (+ x xdir)
                                                  (+ y ydir)
                                                  (+ x (* xdir MAX-RUN-LENGTH))
                                                  (+ y (* ydir MAX-RUN-LENGTH)))
                                     grid)
         run-values (take-while (comp not nil?) values-in-direction)]
     [(count run-values) (apply + run-values)]))</pre></div><div id="t1513550569000109" t="2017-12-17 22:42:49 jrheard seems to be way slower than my previous reduce implementation though, dang - likely some mistake on my end, will profile"><a href="#t1513550569000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:42:49</span>              jrheard </span><span>seems to be way slower than my previous reduce implementation though, dang - likely some mistake on my end, will profile</span></div><div id="t1513551325000048" t="2017-12-17 22:55:25 jrheard ok yeah now my program spends 88% of its time in com.rpl.specter.impl.mk_dynamic_path_maker"><a href="#t1513551325000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:55:25</span>              jrheard </span><span>ok yeah now my program spends 88% of its time in com.rpl.specter.impl.mk_dynamic_path_maker</span></div><div id="t1513551432000104" t="2017-12-17 22:57:12 jrheard the specterized code above is awesome though, i really like it way more than my handrolled reduce from yesterday - it untangles the computation into its component parts (first get a list of up to 5 values in this direction, then drop everything after and including the first nil, then count the values and sum them)"><a href="#t1513551432000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:57:12</span>              jrheard </span><span>the specterized code above is awesome though, i really like it way more than my handrolled reduce from yesterday - it untangles the computation into its component parts (first get a list of up to 5 values in this direction, then drop everything after and including the first nil, then count the values and sum them)</span></div><div id="t1513551440000017" t="2017-12-17 22:57:20 jrheard whereas my previous code did all those things at once"><a href="#t1513551440000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:57:20</span>              jrheard </span><span>whereas my previous code did all those things at once</span></div><div id="t1513551461000018" t="2017-12-17 22:57:41 jrheard so i remain a big fan of specter and also remain appreciative of your help, but am not sure how to proceed performancewise"><a href="#t1513551461000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:57:41</span>              jrheard </span><span>so i remain a big fan of specter and also remain appreciative of your help, but am not sure how to proceed performancewise</span></div><div id="t1513551483000002" t="2017-12-17 22:58:03 jrheard it’s the weekend, this is a toy project and non-urgent, no rush on a reply  🙂  thanks!"><a href="#t1513551483000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">22:58:03</span>              jrheard </span><span>it’s the weekend, this is a toy project and non-urgent, no rush on a reply </span><b>🙂</b><span> thanks!</span></div><div id="t1513551857000065" t="2017-12-17 23:04:17 jrheard if it’s helpful, a screenshot of the profile data:  https://www.evernote.com/shard/s11/sh/73bf32be-7f86-414d-adcb-d61279942fd2/b3618565f1ea939f  (percentages shown are different because i’ve filtered for com.rpl.specter, i believe)"><a href="#t1513551857000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:04:17</span>              jrheard </span><span>if it’s helpful, a screenshot of the profile data: </span><a href="https://www.evernote.com/shard/s11/sh/73bf32be-7f86-414d-adcb-d61279942fd2/b3618565f1ea939f" target="_blank">https://www.evernote.com/shard/s11/sh/73bf32be-7f86-414d-adcb-d61279942fd2/b3618565f1ea939f</a><span> (percentages shown are different because i’ve filtered for com.rpl.specter, i believe)</span></div><div id="t1513552080000044" t="2017-12-17 23:08:00 jrheard and the profile itself (55MB):  http://jrheard.com/quinto_specter_profile"><a href="#t1513552080000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:08:00</span>              jrheard </span><span>and the profile itself (55MB): </span><a href="http://jrheard.com/quinto_specter_profile" target="_blank">http://jrheard.com/quinto_specter_profile</a></div><div id="t1513552225000003" t="2017-12-17 23:10:25 nathanmarz @jrheard it would be a lot faster as a first-class navigator"><a href="#t1513552225000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:10:25</span>           nathanmarz </span><span>@jrheard it would be a lot faster as a first-class navigator</span></div><div id="t1513552245000037" t="2017-12-17 23:10:45 nathanmarz implementation would be similar to  ALL , except in two dimensions"><a href="#t1513552245000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:10:45</span>           nathanmarz </span><span>implementation would be similar to </span><code>ALL</code><span>, except in two dimensions</span></div><div id="t1513552319000006" t="2017-12-17 23:11:59 nathanmarz it would be easy to also avoid needing to do two  nth  per element, since you can do every matching value in a row one after another"><a href="#t1513552319000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:11:59</span>           nathanmarz </span><span>it would be easy to also avoid needing to do two </span><code>nth</code><span> per element, since you can do every matching value in a row one after another</span></div><div id="t1513552377000025" t="2017-12-17 23:12:57 jrheard interesting, thanks for the tip! i’ll read through the docs and investigate that line of attack"><a href="#t1513552377000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:12:57</span>              jrheard </span><span>interesting, thanks for the tip! i’ll read through the docs and investigate that line of attack</span></div><div id="t1513553489000069" t="2017-12-17 23:31:29 jrheard hm, can’t tell if this is a foolish question - would the implementation actually look more like  srange  rather than  all ? the main difference i see is that srange takes arguments  start  and  end , and my thing will also take arguments (`x1`,  y1 ,  x2 ,  y2 )"><a href="#t1513553489000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:31:29</span>              jrheard </span><span>hm, can’t tell if this is a foolish question - would the implementation actually look more like </span><code>srange</code><span> rather than </span><code>all</code><span>? the main difference i see is that srange takes arguments </span><code>start</code><span> and </span><code>end</code><span>, and my thing will also take arguments (`x1`, </span><code>y1</code><span>, </span><code>x2</code><span>, </span><code>y2</code><span>)</span></div><div id="t1513553531000015" t="2017-12-17 23:32:11 jrheard also, i notice that  ALL  uses  doseqres  (  https://github.com/nathanmarz/specter/blob/5efafd2d9bc2714fd87ff81b1268ae6f88256a81/src/clj/com/rpl/specter/util_macros.clj#L3  ) - should i figure out what doseqres does, or can i safely ignore it?"><a href="#t1513553531000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:32:11</span>              jrheard </span><span>also, i notice that </span><code>ALL</code><span> uses </span><code>doseqres</code><span> ( </span><a href="https://github.com/nathanmarz/specter/blob/5efafd2d9bc2714fd87ff81b1268ae6f88256a81/src/clj/com/rpl/specter/util_macros.clj#L3" target="_blank">https://github.com/nathanmarz/specter/blob/5efafd2d9bc2714fd87ff81b1268ae6f88256a81/src/clj/com/rpl/specter/util_macros.clj#L3</a><span> ) - should i figure out what doseqres does, or can i safely ignore it?</span></div><div id="t1513554475000092" t="2017-12-17 23:47:55 nathanmarz @jrheard I mean it&apos;s going to be similar in function, navigating to many subvalues of a data structure"><a href="#t1513554475000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:47:55</span>           nathanmarz </span><span>@jrheard I mean it&apos;s going to be similar in function, navigating to many subvalues of a data structure</span></div><div id="t1513554486000018" t="2017-12-17 23:48:06 jrheard gotcha"><a href="#t1513554486000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:48:06</span>              jrheard </span><span>gotcha</span></div><div id="t1513554486000048" t="2017-12-17 23:48:06 nathanmarz implementation-wise it will be very different"><a href="#t1513554486000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:48:06</span>           nathanmarz </span><span>implementation-wise it will be very different</span></div><div id="t1513555158000092" t="2017-12-17 23:59:18 jrheard i ended up with this, it’s 4-5x faster than the previous specter approach but still roughly (no benchmarks collected, going solely on how the app feels to use)  1.5-2x slower than the reduce approach. it’s also kind of hideous but that’s my fault:
 (defnav
  grid-values-2
  [x1 y1 x2 y2]
  (select* [this structure next-fn]
           (assert (or (= x1 x2)
                       (= y1 y2)))

           (next-fn
             (if (cell-is-on-grid x1 y1)
               (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
                     y2 (bound-between y2 0 (dec GRID-HEIGHT))]
                 (if (= x1 x2)
                   (let [column (nth structure x1)]
                     (if (&lt; y1 y2)
                       (subvec column y1 (inc y2))
                       (reverse (subvec column y2 (inc y1)))))

                   (for [x (if (&lt; x1 x2)
                             (range x1 (inc x2))
                             (reverse (range x2 (inc x1))))]
                     (-&gt; structure
                         (nth x)
                         (nth y1)))))
               [])))

  (transform* [this structure next-fn]
              ; punting on this for now
              (assert false)))"><a href="#t1513555158000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">23:59:18</span>              jrheard </span><span>i ended up with this, it’s 4-5x faster than the previous specter approach but still roughly (no benchmarks collected, going solely on how the app feels to use)  1.5-2x slower than the reduce approach. it’s also kind of hideous but that’s my fault:
</span><pre>(defnav
  grid-values-2
  [x1 y1 x2 y2]
  (select* [this structure next-fn]
           (assert (or (= x1 x2)
                       (= y1 y2)))

           (next-fn
             (if (cell-is-on-grid x1 y1)
               (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
                     y2 (bound-between y2 0 (dec GRID-HEIGHT))]
                 (if (= x1 x2)
                   (let [column (nth structure x1)]
                     (if (&lt; y1 y2)
                       (subvec column y1 (inc y2))
                       (reverse (subvec column y2 (inc y1)))))

                   (for [x (if (&lt; x1 x2)
                             (range x1 (inc x2))
                             (reverse (range x2 (inc x1))))]
                     (-&gt; structure
                         (nth x)
                         (nth y1)))))
               [])))

  (transform* [this structure next-fn]
              ; punting on this for now
              (assert false)))</pre></div><div id="t1513555209000210" t="2017-12-18 00:00:09 jrheard i’m sure there’s a better and faster way to express this, will stare at it until something comes to mind  😄"><a href="#t1513555209000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">00:00:09</span>              jrheard </span><span>i’m sure there’s a better and faster way to express this, will stare at it until something comes to mind </span><b>😄</b></div><div id="t1513555953000068" t="2017-12-18 00:12:33 jrheard hell, sometimes the performance seems noticeably slower, sometimes it seems precisely the same or even faster"><a href="#t1513555953000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">00:12:33</span>              jrheard </span><span>hell, sometimes the performance seems noticeably slower, sometimes it seems precisely the same or even faster</span></div><div id="t1513556402000063" t="2017-12-18 00:20:02 jrheard perf is actually pretty acceptable when run through advanced compliation, nice"><a href="#t1513556402000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">00:20:02</span>              jrheard </span><span>perf is actually pretty acceptable when run through advanced compliation, nice</span></div><div id="t1513557115000087" t="2017-12-18 00:31:55 jrheard benchmarking stuff now; as you’d expect, that code runs pretty fast ( [:attrs nil] 1400 ms in 1000000 runs) when x1 != x2"><a href="#t1513557115000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">00:31:55</span>              jrheard </span><span>benchmarking stuff now; as you’d expect, that code runs pretty fast (</span><del>35ms in 1000000 runs) when x1 = x2, but about 50x slower (</del><span>1400 ms in 1000000 runs) when x1 != x2</span></div><div id="t1513557182000006" t="2017-12-18 00:33:02 jrheard so the codepath i need to focus on optimizing is  (for [x (if (&lt; x1 x2)
          (range x1 (inc x2))
          (reverse (range x2 (inc x1))))]
  (-&gt; data
      (nth x)
      (nth y1)))  . hm - i’m actually not sure how to do this in a more performant way - the ranges and reverses don’t seem to be the issue afaict, it’s just the bit where we have to use nth to index into each column and then call nth on that column to find our value"><a href="#t1513557182000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">00:33:02</span>              jrheard </span><span>so the codepath i need to focus on optimizing is </span><pre>(for [x (if (&lt; x1 x2)
          (range x1 (inc x2))
          (reverse (range x2 (inc x1))))]
  (-&gt; data
      (nth x)
      (nth y1)))</pre><span> . hm - i’m actually not sure how to do this in a more performant way - the ranges and reverses don’t seem to be the issue afaict, it’s just the bit where we have to use nth to index into each column and then call nth on that column to find our value</span></div><div id="t1513562021000097" t="2017-12-18 01:53:41 nathanmarz @jrheard the  select*  codepath should call  next-fn  on each grid cell, rather than calling  next-fn  on a sequence of cells"><a href="#t1513562021000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">01:53:41</span>           nathanmarz </span><span>@jrheard the </span><code>select*</code><span> codepath should call </span><code>next-fn</code><span> on each grid cell, rather than calling </span><code>next-fn</code><span> on a sequence of cells</span></div><div id="t1513562027000143" t="2017-12-18 01:53:47 nathanmarz that will be a lot more performant"><a href="#t1513562027000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">01:53:47</span>           nathanmarz </span><span>that will be a lot more performant</span></div><div id="t1513562031000121" t="2017-12-18 01:53:51 jrheard o nice, i’ll try that"><a href="#t1513562031000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">01:53:51</span>              jrheard </span><span>o nice, i’ll try that</span></div><div id="t1513562065000028" t="2017-12-18 01:54:25 nathanmarz be sure to read the spec for  select* :  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L6"><a href="#t1513562065000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">01:54:25</span>           nathanmarz </span><span>be sure to read the spec for </span><code>select*</code><span>: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L6" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/protocols.cljc#L6</a></div><div id="t1513562125000146" t="2017-12-18 01:55:25 jrheard will do, thanks!"><a href="#t1513562125000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">01:55:25</span>              jrheard </span><span>will do, thanks!</span></div><div id="t1513569512000137" t="2017-12-18 03:58:32 jrheard hm, that may have caused a speedup but not a drastic one"><a href="#t1513569512000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">03:58:32</span>              jrheard </span><span>hm, that may have caused a speedup but not a drastic one</span></div><div id="t1513569527000116" t="2017-12-18 03:58:47 jrheard ended up with this:
 (defnav
  grid-values
  [x1 y1 x2 y2]
  (select* [this structure next-fn]
           (assert (or (= x1 x2)
                       (= y1 y2)))

           (if (not (cell-is-on-grid x1 y1))
             ; If your starting cell isn&apos;t on the grid, you get nothing.
             []

             (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
                   y2 (bound-between y2 0 (dec GRID-HEIGHT))]

               (if (= x1 x2)
                 (let [column (nth structure x1)]
                   (doseq [value (if (&lt; y1 y2)
                                 (subvec column y1 (inc y2))
                                 (reverse (subvec column y2 (inc y1))))]
                     (next-fn value)))

                 (doseq [x (if (&lt; x1 x2)
                           (range x1 (inc x2))
                           (reverse (range x2 (inc x1))))]
                   (next-fn
                     (-&gt; structure
                         (nth x)
                         (nth y1))))))))"><a href="#t1513569527000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">03:58:47</span>              jrheard </span><span>ended up with this:
</span><pre>(defnav
  grid-values
  [x1 y1 x2 y2]
  (select* [this structure next-fn]
           (assert (or (= x1 x2)
                       (= y1 y2)))

           (if (not (cell-is-on-grid x1 y1))
             ; If your starting cell isn&apos;t on the grid, you get nothing.
             []

             (let [x2 (bound-between x2 0 (dec GRID-WIDTH))
                   y2 (bound-between y2 0 (dec GRID-HEIGHT))]

               (if (= x1 x2)
                 (let [column (nth structure x1)]
                   (doseq [value (if (&lt; y1 y2)
                                 (subvec column y1 (inc y2))
                                 (reverse (subvec column y2 (inc y1))))]
                     (next-fn value)))

                 (doseq [x (if (&lt; x1 x2)
                           (range x1 (inc x2))
                           (reverse (range x2 (inc x1))))]
                   (next-fn
                     (-&gt; structure
                         (nth x)
                         (nth y1))))))))</pre></div><div id="t1513569538000192" t="2017-12-18 03:58:58 jrheard i noticed i had to use  doseq  rather than  for  - presumably  next-fn  is side-effecty?"><a href="#t1513569538000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">03:58:58</span>              jrheard </span><span>i noticed i had to use </span><code>doseq</code><span> rather than </span><code>for</code><span> - presumably </span><code>next-fn</code><span> is side-effecty?</span></div><div id="t1513569542000235" t="2017-12-18 03:59:02 jrheard nbd, just interesting"><a href="#t1513569542000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">03:59:02</span>              jrheard </span><span>nbd, just interesting</span></div><div id="t1513569644000064" t="2017-12-18 04:00:44 jrheard the only other perf thing i can think of is: rather than having  grid  be a 2d array, have it be a 1d array that’s primarily accessed via some function like  (get-cell grid x y) , so most consumers don’t treat it like a 1d array, but certain places like  select*  can treat it like a 1d array and perhaps get a speedup"><a href="#t1513569644000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:00:44</span>              jrheard </span><span>the only other perf thing i can think of is: rather than having </span><code>grid</code><span> be a 2d array, have it be a 1d array that’s primarily accessed via some function like </span><code>(get-cell grid x y)</code><span>, so most consumers don’t treat it like a 1d array, but certain places like </span><code>select*</code><span> can treat it like a 1d array and perhaps get a speedup</span></div><div id="t1513569651000046" t="2017-12-18 04:00:51 jrheard which, i think i just have to try and see what happens, and benchmark before and after"><a href="#t1513569651000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:00:51</span>              jrheard </span><span>which, i think i just have to try and see what happens, and benchmark before and after</span></div><div id="t1513569724000072" t="2017-12-18 04:02:04 nathanmarz doseq  is not very fast"><a href="#t1513569724000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:04</span>           nathanmarz </span><code>doseq</code><span> is not very fast</span></div><div id="t1513569727000018" t="2017-12-18 04:02:07 nathanmarz neither is  reverse"><a href="#t1513569727000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:07</span>           nathanmarz </span><span>neither is </span><code>reverse</code></div><div id="t1513569731000058" t="2017-12-18 04:02:11 jrheard is there anything less drastic that you’d recommend i try instead, or is this
 (doseq [x (if (&lt; x1 x2)
           (range x1 (inc x2))
           (reverse (range x2 (inc x1))))]
   (next-fn
     (-&gt; structure
         (nth x)
         (nth y1))))  unimproveable?"><a href="#t1513569731000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:11</span>              jrheard </span><span>is there anything less drastic that you’d recommend i try instead, or is this
</span><pre>(doseq [x (if (&lt; x1 x2)
           (range x1 (inc x2))
           (reverse (range x2 (inc x1))))]
   (next-fn
     (-&gt; structure
         (nth x)
         (nth y1))))</pre><span> unimproveable?</span></div><div id="t1513569754000171" t="2017-12-18 04:02:34 jrheard i’ve benchmarked the  reverse  codepath and it doesn’t seem noticeably slower, it seems to really be the two-nths situation afaict"><a href="#t1513569754000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:34</span>              jrheard </span><span>i’ve benchmarked the </span><code>reverse</code><span> codepath and it doesn’t seem noticeably slower, it seems to really be the two-nths situation afaict</span></div><div id="t1513569769000043" t="2017-12-18 04:02:49 nathanmarz also, you&apos;re making two  nth  calls per element, when you could do one  nth  call per row"><a href="#t1513569769000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:49</span>           nathanmarz </span><span>also, you&apos;re making two </span><code>nth</code><span> calls per element, when you could do one </span><code>nth</code><span> call per row</span></div><div id="t1513569770000091" t="2017-12-18 04:02:50 jrheard reverse is always getting a list of at most five items fwiw"><a href="#t1513569770000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:50</span>              jrheard </span><span>reverse is always getting a list of at most five items fwiw</span></div><div id="t1513569778000049" t="2017-12-18 04:02:58 jrheard hm"><a href="#t1513569778000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:02:58</span>              jrheard </span><span>hm</span></div><div id="t1513569802000012" t="2017-12-18 04:03:22 jrheard i see how i can do one  nth  call in the case where i’m just doing down the Y axis - eg going from x=4,y=4 to x=4,y=8, and getting all those values"><a href="#t1513569802000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:03:22</span>              jrheard </span><span>i see how i can do one </span><code>nth</code><span> call in the case where i’m just doing down the Y axis - eg going from x=4,y=4 to x=4,y=8, and getting all those values</span></div><div id="t1513569818000136" t="2017-12-18 04:03:38 jrheard but i don’t see how i can do it if i’m going down the x axis, eg x=4,y=4 to x=8, y=4"><a href="#t1513569818000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:03:38</span>              jrheard </span><span>but i don’t see how i can do it if i’m going down the x axis, eg x=4,y=4 to x=8, y=4</span></div><div id="t1513569878000013" t="2017-12-18 04:04:38 jrheard i extremely agree with you that the two  nth  calls seem to be the culprit - is there some obvious better way of doing things that i’m not seeing?"><a href="#t1513569878000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:04:38</span>              jrheard </span><span>i extremely agree with you that the two </span><code>nth</code><span> calls seem to be the culprit - is there some obvious better way of doing things that i’m not seeing?</span></div><div id="t1513569901000004" t="2017-12-18 04:05:01 nathanmarz calling  range  is also materializing an additional sequence that isn&apos;t necessary"><a href="#t1513569901000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:05:01</span>           nathanmarz </span><span>calling </span><code>range</code><span> is also materializing an additional sequence that isn&apos;t necessary</span></div><div id="t1513569929000193" t="2017-12-18 04:05:29 nathanmarz the fastest way to do this is probably with just  loop"><a href="#t1513569929000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:05:29</span>           nathanmarz </span><span>the fastest way to do this is probably with just </span><code>loop</code></div><div id="t1513569990000037" t="2017-12-18 04:06:30 jrheard (fwiw, in my second-to-most-recent snippet, there’s an  if  with two paths - the  (= x1 x2)  path is pretty fast, and it still has the  range  and  reverse )"><a href="#t1513569990000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:06:30</span>              jrheard </span><span>(fwiw, in my second-to-most-recent snippet, there’s an </span><code>if</code><span> with two paths - the </span><code>(= x1 x2)</code><span> path is pretty fast, and it still has the </span><code>range</code><span> and </span><code>reverse</code><span>)</span></div><div id="t1513569997000132" t="2017-12-18 04:06:37 jrheard loop’s a great idea! i forgot it existed  🙂"><a href="#t1513569997000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:06:37</span>              jrheard </span><span>loop’s a great idea! i forgot it existed </span><b>🙂</b></div><div id="t1513570002000093" t="2017-12-18 04:06:42 jrheard i’ll try loop in the morning, thanks nathan!"><a href="#t1513570002000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">04:06:42</span>              jrheard </span><span>i’ll try loop in the morning, thanks nathan!</span></div><div id="t1513618488000416" t="2017-12-18 17:34:48 jrheard started benchmarking things (just sloppily using cljs’s built-in  simple-benchmark , nothing fancy). i have a  pick-move  function that i’m calling 50 times, which causes this navigator codepath to be executed about a jillion times.
when i call  next-fn  a single time on the whole sequence, i see timings of about 9300ms for my benchmark.
when i call  next-fn  multiple times, once per each item of the sequence, i see the same timings.
this is probably because the sequence is always going to be at most five items long - i imagine that if calling  next-fn  once per item tends to give a speedup, perhaps the speedup is more obvious if you’re doing it on a ton of items as opposed to five?
(i should also note that i’m not using advanced compilation while gathering this data)"><a href="#t1513618488000416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">17:34:48</span>              jrheard </span><span>started benchmarking things (just sloppily using cljs’s built-in </span><code>simple-benchmark</code><span>, nothing fancy). i have a </span><code>pick-move</code><span> function that i’m calling 50 times, which causes this navigator codepath to be executed about a jillion times.
when i call </span><code>next-fn</code><span> a single time on the whole sequence, i see timings of about 9300ms for my benchmark.
when i call </span><code>next-fn</code><span> multiple times, once per each item of the sequence, i see the same timings.
this is probably because the sequence is always going to be at most five items long - i imagine that if calling </span><code>next-fn</code><span> once per item tends to give a speedup, perhaps the speedup is more obvious if you’re doing it on a ton of items as opposed to five?
(i should also note that i’m not using advanced compilation while gathering this data)</span></div><div id="t1513618520000229" t="2017-12-18 17:35:20 jrheard i switched my slow, two-`nth`-calls  doseq  with  range  and  reverse  to a handrolled  loop , and that brought me down from 9300ms to 7200ms, which is a good start!"><a href="#t1513618520000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">17:35:20</span>              jrheard </span><span>i switched my slow, two-`nth`-calls </span><code>doseq</code><span> with </span><code>range</code><span> and </span><code>reverse</code><span> to a handrolled </span><code>loop</code><span>, and that brought me down from 9300ms to 7200ms, which is a good start!</span></div><div id="t1513618557000290" t="2017-12-18 17:35:57 jrheard i still wish i could figure out a way to not have to do two  nth  calls - the only one i can think of is to switch from having a 2d vector to having a 1d vector, and measuring the before-and-after"><a href="#t1513618557000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">17:35:57</span>              jrheard </span><span>i still wish i could figure out a way to not have to do two </span><code>nth</code><span> calls - the only one i can think of is to switch from having a 2d vector to having a 1d vector, and measuring the before-and-after</span></div><div id="t1513618596000103" t="2017-12-18 17:36:36 jrheard at this point i’m mainly digging into this just to satisfy my curiosity, perf’s acceptable for my toy app but i’d like to see if the 1d vector approach causes a huge speed boost, none at all, or somewhere inbetween; i’ll post the results later today when i’m done, and then i will stop spamming this channel  🙂"><a href="#t1513618596000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">17:36:36</span>              jrheard </span><span>at this point i’m mainly digging into this just to satisfy my curiosity, perf’s acceptable for my toy app but i’d like to see if the 1d vector approach causes a huge speed boost, none at all, or somewhere inbetween; i’ll post the results later today when i’m done, and then i will stop spamming this channel </span><b>🙂</b></div><div id="t1513620376000224" t="2017-12-18 18:06:16 jrheard huh, basically zero speedup! my base benchmark timings are different for this one because i used a different board/hand combination to test the 2d vs 1d vector implementations; the 2d vector implementation had a benchmark time of 3100ms-3300ms, and so did the 1d vector implementation (presumably because vectors are implemented under the hood as trees, and so a 1d vector doesn’t guarantee you a contiguous block of memory)"><a href="#t1513620376000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">18:06:16</span>              jrheard </span><span>huh, basically zero speedup! my base benchmark timings are different for this one because i used a different board/hand combination to test the 2d vs 1d vector implementations; the 2d vector implementation had a benchmark time of 3100ms-3300ms, and so did the 1d vector implementation (presumably because vectors are implemented under the hood as trees, and so a 1d vector doesn’t guarantee you a contiguous block of memory)</span></div><div id="t1513620493000631" t="2017-12-18 18:08:13 jrheard so i guess this is as good as it’s gonna get; my thing still spends most of its time making those two  nth  calls, and i don’t see how that can be avoided if you’ve got a 2d vector of values, the first dimension holds the columns, and you’re trying to select all the values from eg x=4,y=4 to x=8,y=4. it seems to me that you have to call  nth  two times in that situation, unless i’m missing something"><a href="#t1513620493000631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">18:08:13</span>              jrheard </span><span>so i guess this is as good as it’s gonna get; my thing still spends most of its time making those two </span><code>nth</code><span> calls, and i don’t see how that can be avoided if you’ve got a 2d vector of values, the first dimension holds the columns, and you’re trying to select all the values from eg x=4,y=4 to x=8,y=4. it seems to me that you have to call </span><code>nth</code><span> two times in that situation, unless i’m missing something</span></div><div id="t1513620529000272" t="2017-12-18 18:08:49 jrheard but anyway this has been very interesting and educational for me but no longer has much to do with specter. my app’s specter-related perf seems to be as good as it’s going to get for this query, so again, thanks for all the help and for building this great tool!"><a href="#t1513620529000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">18:08:49</span>              jrheard </span><span>but anyway this has been very interesting and educational for me but no longer has much to do with specter. my app’s specter-related perf seems to be as good as it’s going to get for this query, so again, thanks for all the help and for building this great tool!</span></div><div id="t1513624215000376" t="2017-12-18 19:10:15 nathanmarz yea, for up and down it&apos;s two  nth  calls per element, but for left and right it&apos;s less"><a href="#t1513624215000376" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">19:10:15</span>           nathanmarz </span><span>yea, for up and down it&apos;s two </span><code>nth</code><span> calls per element, but for left and right it&apos;s less</span></div><div id="t1513624254000368" t="2017-12-18 19:10:54 jrheard right exactly"><a href="#t1513624254000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">19:10:54</span>              jrheard </span><span>right exactly</span></div><div id="t1513624272000024" t="2017-12-18 19:11:12 jrheard the one-`nth`-call-and-then-`subvec` dimension is super fast, the two-`nth`-calls-per-element one is 50x slower, and it seems like that’s just a fact of life"><a href="#t1513624272000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">19:11:12</span>              jrheard </span><span>the one-`nth`-call-and-then-`subvec` dimension is super fast, the two-`nth`-calls-per-element one is 50x slower, and it seems like that’s just a fact of life</span></div><div id="t1513624274000575" t="2017-12-18 19:11:14 jrheard oh well!"><a href="#t1513624274000575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">19:11:14</span>              jrheard </span><span>oh well!</span></div><div id="t1513699734000151" t="2017-12-19 16:08:54 mbjarland @nathanmarz apropos our conversation about warnings under clojure 1.9.0, a new version of midje has been released with an updated (direct) dep on specter: 
 [midje &quot;1.9.1&quot; :scope &quot;test&quot;]
   [com.rpl/specter &quot;1.0.4&quot; :scope &quot;test&quot; :exclusions [[org.clojure/clojure] [org.clojure/clojurescript]]]
     [riddley &quot;0.1.12&quot; :scope &quot;test&quot;]
 
the warnings are gone and the related issue on midje ( https://github.com/marick/Midje/issues/427 ) closed"><a href="#t1513699734000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">16:08:54</span>            mbjarland </span><span>@nathanmarz apropos our conversation about warnings under clojure 1.9.0, a new version of midje has been released with an updated (direct) dep on specter: 
</span><pre>[midje &quot;1.9.1&quot; :scope &quot;test&quot;]
   [com.rpl/specter &quot;1.0.4&quot; :scope &quot;test&quot; :exclusions [[org.clojure/clojure] [org.clojure/clojurescript]]]
     [riddley &quot;0.1.12&quot; :scope &quot;test&quot;]
</pre><span>
the warnings are gone and the related issue on midje (</span><a href="https://github.com/marick/Midje/issues/427" target="_blank">https://github.com/marick/Midje/issues/427</a><span>) closed</span></div><div id="t1513703930000191" t="2017-12-19 17:18:50 nathanmarz @mbjarland great"><a href="#t1513703930000191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:18:50</span>           nathanmarz </span><span>@mbjarland great</span></div><div id="t1513704628000268" t="2017-12-19 17:30:28 rafael Hi. Don&apos;t know if this is the right forum, I have a newbie specter question."><a href="#t1513704628000268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:30:28</span>               rafael </span><span>Hi. Don&apos;t know if this is the right forum, I have a newbie specter question.</span></div><div id="t1513704675000751" t="2017-12-19 17:31:15 rafael I wanted to filter out elements not matching the path for a  transform  call."><a href="#t1513704675000751" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:31:15</span>               rafael </span><span>I wanted to filter out elements not matching the path for a </span><code>transform</code><span> call.</span></div><div id="t1513704698000463" t="2017-12-19 17:31:38 rafael It&apos;s easier to explain in code. The following  (specter/transform [specter/ALL (specter/must :a) (specter/must :b)] str [{:a {:b 10}} {:a {:z 42}}])  returns  [{:a {:b &quot;10&quot;}} {:a {:z 42}}]"><a href="#t1513704698000463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:31:38</span>               rafael </span><span>It&apos;s easier to explain in code. The following </span><code>(specter/transform [specter/ALL (specter/must :a) (specter/must :b)] str [{:a {:b 10}} {:a {:z 42}}])</code><span> returns </span><code>[{:a {:b &quot;10&quot;}} {:a {:z 42}}]</code></div><div id="t1513704720000292" t="2017-12-19 17:32:00 rafael It called the transformation function for an element matching the path and returned the rest unchanged."><a href="#t1513704720000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:32:00</span>               rafael </span><span>It called the transformation function for an element matching the path and returned the rest unchanged.</span></div><div id="t1513704747000491" t="2017-12-19 17:32:27 rafael I&apos;m wondering if is there anything I can do to make a similar call return  [{:a {:b &quot;10&quot;}}]  instead?"><a href="#t1513704747000491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:32:27</span>               rafael </span><span>I&apos;m wondering if is there anything I can do to make a similar call return </span><code>[{:a {:b &quot;10&quot;}}]</code><span> instead?</span></div><div id="t1513704773000519" t="2017-12-19 17:32:53 rafael (filtering out the non-matching  {:a {:b 10}}  element)"><a href="#t1513704773000519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:32:53</span>               rafael </span><span>(filtering out the non-matching </span><code>{:a {:b 10}}</code><span> element)</span></div><div id="t1513705274000495" t="2017-12-19 17:41:14 tanzoniteblack @rafael if you want to do a select and a transform in the same operation, you probably want to do  select  to get only the value you want returned and then use the  view  selector to make your transformation ( https://github.com/nathanmarz/specter/wiki/List-of-Navigators#view )"><a href="#t1513705274000495" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:41:14</span>       tanzoniteblack </span><span>@rafael if you want to do a select and a transform in the same operation, you probably want to do </span><code>select</code><span> to get only the value you want returned and then use the </span><code>view</code><span> selector to make your transformation (</span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#view" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#view</a><span>)</span></div><div id="t1513705365000536" t="2017-12-19 17:42:45 tanzoniteblack i.e. how I think of it:  transform  is for modifying in place a piece of a structure;  select  is for pulling out specific information I want from a structure; and  select  with the  view  selector is for doing both selecting only a piece and applying a transformation"><a href="#t1513705365000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:42:45</span>       tanzoniteblack </span><span>i.e. how I think of it: </span><code>transform</code><span> is for modifying in place a piece of a structure; </span><code>select</code><span> is for pulling out specific information I want from a structure; and </span><code>select</code><span> with the </span><code>view</code><span> selector is for doing both selecting only a piece and applying a transformation</span></div><div id="t1513705400000248" t="2017-12-19 17:43:20 rafael Thanks @tanzoniteblack. I&apos;m trying it out now"><a href="#t1513705400000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:43:20</span>               rafael </span><span>Thanks @tanzoniteblack. I&apos;m trying it out now</span></div><div id="t1513705523000505" t="2017-12-19 17:45:23 rafael Naively applying view to the example above gets me:
 (specter/select [specter/ALL (specter/must :a) (specter/must :b) (specter/view str)] [{:a {:b 10}} {:a {:z 42}}]) 
 =&gt; [&quot;10&quot;]"><a href="#t1513705523000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:45:23</span>               rafael </span><span>Naively applying view to the example above gets me:
</span><pre>(specter/select [specter/ALL (specter/must :a) (specter/must :b) (specter/view str)] [{:a {:b 10}} {:a {:z 42}}])</pre><span>
</span><pre>=&gt; [&quot;10&quot;]</pre></div><div id="t1513705551000146" t="2017-12-19 17:45:51 rafael I wonder if is there a way to get  [{:a {:b &quot;10&quot;}}]  in the result."><a href="#t1513705551000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:45:51</span>               rafael </span><span>I wonder if is there a way to get </span><code>[{:a {:b &quot;10&quot;}}]</code><span> in the result.</span></div><div id="t1513705600000381" t="2017-12-19 17:46:40 tanzoniteblack https://github.com/nathanmarz/specter/wiki/List-of-Navigators#transformed  might do that?"><a href="#t1513705600000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:46:40</span>       tanzoniteblack </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#transformed" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#transformed</a><span> might do that?</span></div><div id="t1513705601000139" t="2017-12-19 17:46:41 rafael It would perfectly fine to chain a call to  select  and a another to  transform , or whatever, but even then I&apos;m having a hard time coming up with the right incantation  🙂"><a href="#t1513705601000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:46:41</span>               rafael </span><span>It would perfectly fine to chain a call to </span><code>select</code><span> and a another to </span><code>transform</code><span>, or whatever, but even then I&apos;m having a hard time coming up with the right incantation </span><b>🙂</b></div><div id="t1513705618000048" t="2017-12-19 17:46:58 tanzoniteblack not actually sure off the top of my head, sorry"><a href="#t1513705618000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:46:58</span>       tanzoniteblack </span><span>not actually sure off the top of my head, sorry</span></div><div id="t1513705662000471" t="2017-12-19 17:47:42 rafael No worries, thanks for the help. I&apos;m checking out  transformed  now"><a href="#t1513705662000471" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:47:42</span>               rafael </span><span>No worries, thanks for the help. I&apos;m checking out </span><code>transformed</code><span> now</span></div><div id="t1513706060000459" t="2017-12-19 17:54:20 tanzoniteblack (specter/select [(specter/filterer (specter/must :a) (specter/must :b)) 
                                            specter/ALL
                                            (specter/transformed [:a :b] str)]
                                           [{:a {:b 10}} {:a {:z 42}}])  @rafael that appears to do what I think you want?"><a href="#t1513706060000459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:54:20</span>       tanzoniteblack </span><pre>(specter/select [(specter/filterer (specter/must :a) (specter/must :b)) 
                                            specter/ALL
                                            (specter/transformed [:a :b] str)]
                                           [{:a {:b 10}} {:a {:z 42}}])</pre><span> @rafael that appears to do what I think you want?</span></div><div id="t1513706105000091" t="2017-12-19 17:55:05 tanzoniteblack filterer  removes all items that don&apos;t have  :b  key inside the value at the  :a  key, and then for each item in that list, we&apos;re going to reach into the path  :a  then  :b  and run the function  str"><a href="#t1513706105000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:55:05</span>       tanzoniteblack </span><code>filterer</code><span> removes all items that don&apos;t have </span><code>:b</code><span> key inside the value at the </span><code>:a</code><span> key, and then for each item in that list, we&apos;re going to reach into the path </span><code>:a</code><span> then </span><code>:b</code><span> and run the function </span><code>str</code></div><div id="t1513706118000732" t="2017-12-19 17:55:18 tanzoniteblack probably not more efficient then the manual way of doing it? But no idea"><a href="#t1513706118000732" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:55:18</span>       tanzoniteblack </span><span>probably not more efficient then the manual way of doing it? But no idea</span></div><div id="t1513706248000728" t="2017-12-19 17:57:28 rafael The output looks right. I&apos;m trying to digest it before applying to my real use case (which deals with a structure a bit more complicated than the example). Efficiency is not super important for my use case, I&apos;m reaching for specter for the terseness in dealing with a deeply nested structure, so it should be alright"><a href="#t1513706248000728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">17:57:28</span>               rafael </span><span>The output looks right. I&apos;m trying to digest it before applying to my real use case (which deals with a structure a bit more complicated than the example). Efficiency is not super important for my use case, I&apos;m reaching for specter for the terseness in dealing with a deeply nested structure, so it should be alright</span></div><div id="t1513706774000104" t="2017-12-19 18:06:14 nathanmarz @tanzoniteblack you&apos;re looking for  not-selected?"><a href="#t1513706774000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:06:14</span>           nathanmarz </span><span>@tanzoniteblack you&apos;re looking for </span><code>not-selected?</code></div><div id="t1513706782000126" t="2017-12-19 18:06:22 nathanmarz (setval [ALL (not-selected? (must :a :b))] NONE data)
"><a href="#t1513706782000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:06:22</span>           nathanmarz </span><pre>(setval [ALL (not-selected? (must :a :b))] NONE data)
</pre></div><div id="t1513706961000167" t="2017-12-19 18:09:21 rafael With  not-selected  and  setval  the complete example would then be:
 (-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a :b))] S/NONE)
       (S/transform [S/ALL (S/must :a :b)] str))
 ?"><a href="#t1513706961000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:09:21</span>               rafael </span><span>With </span><code>not-selected</code><span> and </span><code>setval</code><span> the complete example would then be:
</span><pre>(-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a :b))] S/NONE)
       (S/transform [S/ALL (S/must :a :b)] str))
</pre><span>?</span></div><div id="t1513707090000132" t="2017-12-19 18:11:30 nathanmarz yea, that would work"><a href="#t1513707090000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:11:30</span>           nathanmarz </span><span>yea, that would work</span></div><div id="t1513707113000013" t="2017-12-19 18:11:53 nathanmarz for second part you don&apos;t need  must  anymore since they&apos;re guaranteed to be there by first part"><a href="#t1513707113000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:11:53</span>           nathanmarz </span><span>for second part you don&apos;t need </span><code>must</code><span> anymore since they&apos;re guaranteed to be there by first part</span></div><div id="t1513707167000652" t="2017-12-19 18:12:47 rafael Cool, now off to apply it to the real use case  🙂"><a href="#t1513707167000652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">18:12:47</span>               rafael </span><span>Cool, now off to apply it to the real use case </span><b>🙂</b></div><div id="t1513712366000153" t="2017-12-19 19:39:26 rafael Hi again. When applying to my actual use case things turned out to be more complicated. There are multiple S/ALL where we want to remove non-matching elements. Again, a code example is probably easier to explain:
 (def data [{:a [{:b 10}]} {:a [{:b 20} {:z 42}]}])

  (-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a) S/ALL (S/must :b))] S/NONE)
       (S/transform [S/ALL :a S/ALL :b] str))
 
results in 
 =&gt; [{:a [{:b &quot;10&quot;}]} {:a [{:b &quot;20&quot;} {:z 42, :b &quot;&quot;}]}]
 
but I wanted  [{:a [{:b &quot;10&quot;}]} {:a [{:b &quot;20&quot;}]}]"><a href="#t1513712366000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">19:39:26</span>               rafael </span><span>Hi again. When applying to my actual use case things turned out to be more complicated. There are multiple S/ALL where we want to remove non-matching elements. Again, a code example is probably easier to explain:
</span><pre>(def data [{:a [{:b 10}]} {:a [{:b 20} {:z 42}]}])

  (-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a) S/ALL (S/must :b))] S/NONE)
       (S/transform [S/ALL :a S/ALL :b] str))
</pre><span>
results in 
</span><pre>=&gt; [{:a [{:b &quot;10&quot;}]} {:a [{:b &quot;20&quot;} {:z 42, :b &quot;&quot;}]}]
</pre><span>
but I wanted </span><code>[{:a [{:b &quot;10&quot;}]} {:a [{:b &quot;20&quot;}]}]</code></div><div id="t1513712392000627" t="2017-12-19 19:39:52 rafael (it&apos;s a similar example to above, but with one extra nested sequence)"><a href="#t1513712392000627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">19:39:52</span>               rafael </span><span>(it&apos;s a similar example to above, but with one extra nested sequence)</span></div><div id="t1513712416000219" t="2017-12-19 19:40:16 rafael I could get the output I wanted with an extra  setval :
 (-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a) S/ALL (S/must :b))] S/NONE)
       (S/setval [S/ALL (S/must :a) S/ALL (S/not-selected? (S/must :b))] S/NONE)
       (S/transform [S/ALL :a S/ALL :b] str))
"><a href="#t1513712416000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">19:40:16</span>               rafael </span><span>I could get the output I wanted with an extra </span><code>setval</code><span>:
</span><pre>(-&gt;&gt; data
       (S/setval [S/ALL (S/not-selected? (S/must :a) S/ALL (S/must :b))] S/NONE)
       (S/setval [S/ALL (S/must :a) S/ALL (S/not-selected? (S/must :b))] S/NONE)
       (S/transform [S/ALL :a S/ALL :b] str))
</pre></div><div id="t1513712428000345" t="2017-12-19 19:40:28 rafael This works, but I was wondering if there is any way of reducing the duplication"><a href="#t1513712428000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">19:40:28</span>               rafael </span><span>This works, but I was wondering if there is any way of reducing the duplication</span></div><div id="t1513713587000342" t="2017-12-19 19:59:47 nathanmarz @rafael  (setval [ALL :a ALL (transformed (must :b) str) (not-selected? (must :b))] NONE data)"><a href="#t1513713587000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">19:59:47</span>           nathanmarz </span><span>@rafael </span><code>(setval [ALL :a ALL (transformed (must :b) str) (not-selected? (must :b))] NONE data)</code></div><div id="t1513713674000262" t="2017-12-19 20:01:14 nathanmarz do you also want to remove top level maps that don&apos;t have any inner maps under  :a  with  :b ?"><a href="#t1513713674000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:01:14</span>           nathanmarz </span><span>do you also want to remove top level maps that don&apos;t have any inner maps under </span><code>:a</code><span> with </span><code>:b</code><span>?</span></div><div id="t1513713840000218" t="2017-12-19 20:04:00 rafael Ideally yeah, If data is  (def data [{:a [{:b 10}]} {:a [{:b 20} {:z 42}]} {:a [{:z 42}]}])  then I also need to remove the last  {:a [{:z 42}]}"><a href="#t1513713840000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:04:00</span>               rafael </span><span>Ideally yeah, If data is </span><code>(def data [{:a [{:b 10}]} {:a [{:b 20} {:z 42}]} {:a [{:z 42}]}])</code><span> then I also need to remove the last </span><code>{:a [{:z 42}]}</code></div><div id="t1513713973000300" t="2017-12-19 20:06:13 rafael (trying to understand your suggestion above... thank&apos;s for taking the time to help)"><a href="#t1513713973000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:06:13</span>               rafael </span><span>(trying to understand your suggestion above... thank&apos;s for taking the time to help)</span></div><div id="t1513714413000484" t="2017-12-19 20:13:33 nathanmarz @rafael this does the trick:
 (defdynamicnav with-matching [path]
  (if-path path
    path
    (terminal-val NONE)
    ))

(transform
  [ALL
   (with-matching (must :a))
   ALL
   (with-matching (must :b))
   ]
  str
  data)
"><a href="#t1513714413000484" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:13:33</span>           nathanmarz </span><span>@rafael this does the trick:
</span><pre>(defdynamicnav with-matching [path]
  (if-path path
    path
    (terminal-val NONE)
    ))

(transform
  [ALL
   (with-matching (must :a))
   ALL
   (with-matching (must :b))
   ]
  str
  data)
</pre></div><div id="t1513714438000533" t="2017-12-19 20:13:58 rafael Wow"><a href="#t1513714438000533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:13:58</span>               rafael </span><span>Wow</span></div><div id="t1513714751000287" t="2017-12-19 20:19:11 nathanmarz even better:"><a href="#t1513714751000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:19:11</span>           nathanmarz </span><span>even better:</span></div><div id="t1513714755000251" t="2017-12-19 20:19:15 nathanmarz (defdynamicnav with-matching [path]
  (if-path path
    (multi-path path (if-path path STOP (terminal-val NONE)))
    (terminal-val NONE)
    ))

(defdynamicnav with-non-empty [path]
  (multi-path path (if-path empty? (terminal-val NONE)))
  )

(transform
  [ALL
   (with-matching (must :a))
   (with-non-empty ALL)
   (with-matching (must :b))
   ]
  str
  data)
"><a href="#t1513714755000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:19:15</span>           nathanmarz </span><pre>(defdynamicnav with-matching [path]
  (if-path path
    (multi-path path (if-path path STOP (terminal-val NONE)))
    (terminal-val NONE)
    ))

(defdynamicnav with-non-empty [path]
  (multi-path path (if-path empty? (terminal-val NONE)))
  )

(transform
  [ALL
   (with-matching (must :a))
   (with-non-empty ALL)
   (with-matching (must :b))
   ]
  str
  data)
</pre></div><div id="t1513714867000110" t="2017-12-19 20:21:07 nathanmarz with  [{:a [{:b 10}]} {:a [{:q 20} {:z 42}]}]  that removes the second map completely"><a href="#t1513714867000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:21:07</span>           nathanmarz </span><span>with </span><code>[{:a [{:b 10}]} {:a [{:q 20} {:z 42}]}]</code><span> that removes the second map completely</span></div><div id="t1513714913000426" t="2017-12-19 20:21:53 nathanmarz you can read about dynamic navs here:  https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation"><a href="#t1513714913000426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:21:53</span>           nathanmarz </span><span>you can read about dynamic navs here: </span><a href="https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter&apos;s-inline-caching-implementation</a></div><div id="t1513714919000056" t="2017-12-19 20:21:59 nathanmarz they&apos;re similar to macros"><a href="#t1513714919000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:21:59</span>           nathanmarz </span><span>they&apos;re similar to macros</span></div><div id="t1513715206000599" t="2017-12-19 20:26:46 rafael Looks like I have a lot of reading to do. Thanks"><a href="#t1513715206000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:26:46</span>               rafael </span><span>Looks like I have a lot of reading to do. Thanks</span></div><div id="t1513715238000291" t="2017-12-19 20:27:18 nathanmarz actually this is a more flexible implementation I think:
 (defdynamicnav with-matching [path]
  (if-path path
    (multi-path path (if-path path STOP (terminal-val NONE)))
    (terminal-val NONE)
    ))

(defn ^:direct-nav ensure-pred [pred-fn]
  (path (stay-then-continue (if-path (pred pred-fn) STOP (terminal-val NONE)))))

(transform
  [ALL
   (with-matching (must :a))
   (ensure-pred #(-&gt; % empty? not))
   ALL
   (with-matching (must :b))
   ]
  str
  data)
"><a href="#t1513715238000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:27:18</span>           nathanmarz </span><span>actually this is a more flexible implementation I think:
</span><pre>(defdynamicnav with-matching [path]
  (if-path path
    (multi-path path (if-path path STOP (terminal-val NONE)))
    (terminal-val NONE)
    ))

(defn ^:direct-nav ensure-pred [pred-fn]
  (path (stay-then-continue (if-path (pred pred-fn) STOP (terminal-val NONE)))))

(transform
  [ALL
   (with-matching (must :a))
   (ensure-pred #(-&gt; % empty? not))
   ALL
   (with-matching (must :b))
   ]
  str
  data)
</pre></div><div id="t1513715261000513" t="2017-12-19 20:27:41 nathanmarz I may add some variant of these into specter"><a href="#t1513715261000513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:27:41</span>           nathanmarz </span><span>I may add some variant of these into specter</span></div><div id="t1513715831000355" t="2017-12-19 20:37:11 nathanmarz I think this is the simplest solution:
 (defdynamicnav ensure-matching* [path]
  (multi-path path (if-path path STOP (terminal-val NONE))))

(def ensure-matching (eachnav ensure-matching*))
    
(transform
  [ALL
   (ensure-matching (must :a) ALL (must :b))
   ]
  str
  data)
"><a href="#t1513715831000355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-19</span> <span class="t" onclick="H(this)">20:37:11</span>           nathanmarz </span><span>I think this is the simplest solution:
</span><pre>(defdynamicnav ensure-matching* [path]
  (multi-path path (if-path path STOP (terminal-val NONE))))

(def ensure-matching (eachnav ensure-matching*))
    
(transform
  [ALL
   (ensure-matching (must :a) ALL (must :b))
   ]
  str
  data)
</pre></div><div id="t1513868348000619" t="2017-12-21 14:59:08 rafael The  ensure-matching  solution above worked for us, thanks."><a href="#t1513868348000619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">14:59:08</span>               rafael </span><span>The </span><code>ensure-matching</code><span> solution above worked for us, thanks.</span></div><div id="t1513868391000219" t="2017-12-21 14:59:51 rafael We also found the need for another defdynamicnav, I&apos;m posting it here in case anyone finds it helpful:
 (specter/defdynamicnav look-ahead [path]
  (specter/if-path path specter/STAY (specter/terminal-val specter/NONE)))
"><a href="#t1513868391000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">14:59:51</span>               rafael </span><span>We also found the need for another defdynamicnav, I&apos;m posting it here in case anyone finds it helpful:
</span><pre>(specter/defdynamicnav look-ahead [path]
  (specter/if-path path specter/STAY (specter/terminal-val specter/NONE)))
</pre></div><div id="t1513868440000280" t="2017-12-21 15:00:40 rafael It is used like this:
 (transform [ALL (schema-check/look-ahead (must :a))] str [{:a 1 :b 1} {:x 2 :b 2}]) 
evaluates to  =&gt;  [&quot;{:a 1, :b 1}&quot;]"><a href="#t1513868440000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">15:00:40</span>               rafael </span><span>It is used like this:
</span><pre>(transform [ALL (schema-check/look-ahead (must :a))] str [{:a 1 :b 1} {:x 2 :b 2}])</pre><span>
evaluates to </span><code>=&gt;  [&quot;{:a 1, :b 1}&quot;]</code></div><div id="t1513868496000520" t="2017-12-21 15:01:36 rafael Another example:
 (transform [ALL (schema-check/look-ahead (must :a)) :b] str [{:a 1 :b 1} {:x 2 :b 2}]) 
 =&gt; [{:a 1, :b &quot;1&quot;}]"><a href="#t1513868496000520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">15:01:36</span>               rafael </span><span>Another example:
</span><pre>(transform [ALL (schema-check/look-ahead (must :a)) :b] str [{:a 1 :b 1} {:x 2 :b 2}])</pre><span>
</span><pre>=&gt; [{:a 1, :b &quot;1&quot;}]</pre></div><div id="t1513868681000546" t="2017-12-21 15:04:41 nathanmarz @rafael cool"><a href="#t1513868681000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">15:04:41</span>           nathanmarz </span><span>@rafael cool</span></div><div id="t1513868709000340" t="2017-12-21 15:05:09 nathanmarz I opened an issue to add functionality like this into Specter  https://github.com/nathanmarz/specter/issues/240"><a href="#t1513868709000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-21</span> <span class="t" onclick="H(this)">15:05:09</span>           nathanmarz </span><span>I opened an issue to add functionality like this into Specter </span><a href="https://github.com/nathanmarz/specter/issues/240" target="_blank">https://github.com/nathanmarz/specter/issues/240</a></div><div id="t1513908510000068" t="2017-12-22 02:08:30 npetryk Can someone help me understand why  (setval (filterer even?) [:example] (range 0 10)) =&gt; (:example 1 3 5 7 9)  whereas  (setval (filterer even?) [] (range 0 10)) =&gt; (nil 1 3 5 7 9) , yet  (setval (filterer even?) [NONE] (range 0 10)) =&gt; (1 3 5 7 9)"><a href="#t1513908510000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">02:08:30</span>              npetryk </span><span>Can someone help me understand why </span><code>(setval (filterer even?) [:example] (range 0 10)) =&gt; (:example 1 3 5 7 9)</code><span> whereas </span><code>(setval (filterer even?) [] (range 0 10)) =&gt; (nil 1 3 5 7 9)</code><span>, yet </span><code>(setval (filterer even?) [NONE] (range 0 10)) =&gt; (1 3 5 7 9)</code></div><div id="t1513908556000087" t="2017-12-22 02:09:16 npetryk being able to resize a subselection is really beautiful, but this special case of resizing it to zero seems a bit odd, and I dont quite understand why it happens"><a href="#t1513908556000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">02:09:16</span>              npetryk </span><span>being able to resize a subselection is really beautiful, but this special case of resizing it to zero seems a bit odd, and I dont quite understand why it happens</span></div><div id="t1513908616000214" t="2017-12-22 02:10:16 npetryk I would expect replacing a sequence with an empty sequence would remove all elements, rather than leaving a  nil  in the first matching spot"><a href="#t1513908616000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">02:10:16</span>              npetryk </span><span>I would expect replacing a sequence with an empty sequence would remove all elements, rather than leaving a </span><code>nil</code><span> in the first matching spot</span></div><div id="t1513912821000011" t="2017-12-22 03:20:21 nathanmarz @npetryk looks like a bug"><a href="#t1513912821000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">03:20:21</span>           nathanmarz </span><span>@npetryk looks like a bug</span></div><div id="t1513912845000007" t="2017-12-22 03:20:45 nathanmarz try  (setval (filterer even?) nil (range 0 10))"><a href="#t1513912845000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">03:20:45</span>           nathanmarz </span><span>try </span><code>(setval (filterer even?) nil (range 0 10))</code></div><div id="t1513913115000058" t="2017-12-22 03:25:15 nathanmarz fixed for next version:  https://github.com/nathanmarz/specter/commit/7b646ca566bb3bdd362d43a348c2fe00457438b2"><a href="#t1513913115000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">03:25:15</span>           nathanmarz </span><span>fixed for next version: </span><a href="https://github.com/nathanmarz/specter/commit/7b646ca566bb3bdd362d43a348c2fe00457438b2" target="_blank">https://github.com/nathanmarz/specter/commit/7b646ca566bb3bdd362d43a348c2fe00457438b2</a></div><div id="t1514044070000009" t="2017-12-23 15:47:50 npetryk Thanks!"><a href="#t1514044070000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-23</span> <span class="t" onclick="H(this)">15:47:50</span>                   npetryk </span><span>Thanks!</span></div><div id="t1513953181000129" t="2017-12-22 14:33:01 plamen Hello,

I again have a nested map in the form:"><a href="#t1513953181000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">14:33:01</span>               plamen </span><span>Hello,

I again have a nested map in the form:</span></div><div id="t1513953198000421" t="2017-12-22 14:33:18 plamen {... ...
 ’A {:type :double}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}

I also recursively traverse it and apply transformations to variables and other nodes (the map is an AST of a DSL)
						 
 (defn process-var-list [ast]
  (transform [NODES-VARIABLES :variables MAP-VALS]
             (fn [var]
               ; do something to var
               )
             ast))
			 
  `(def NODES-VARIABLES
  (recursive-path [] p
                  (cond-path (must :variables)
                             (continue-then-stay :variables MAP-VALS map? p))))"><a href="#t1513953198000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">14:33:18</span>               plamen </span><pre>{... ...
 ’A {:type :double}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}

I also recursively traverse it and apply transformations to variables and other nodes (the map is an AST of a DSL)
						 
</pre><span>(defn process-var-list [ast]
  (transform [NODES-VARIABLES :variables MAP-VALS]
             (fn [var]
               ; do something to var
               )
             ast))
			 
</span><code></code><span>`(def NODES-VARIABLES
  (recursive-path [] p
                  (cond-path (must :variables)
                             (continue-then-stay :variables MAP-VALS map? p))))</span></div><div id="t1513953252000310" t="2017-12-22 14:34:12 plamen In ‘process-vars’ I have access only to the current node which works for most transformations I need. Now if in that DSL I would like to provide variable scope/visibility rules like in Java for example, where the localness of a variable is directly mapped to the depth of it’s definition over the :variables subbranches, I would need to have access not only to var, but to the root of the datastructure AFTER it has been processed in a previous step. That means I can’t just pass ast as a second parameter, because it would have the original state only before any transformation through Specter. collect I think would also not help me in that situation."><a href="#t1513953252000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">14:34:12</span>               plamen </span><span>In ‘process-vars’ I have access only to the current node which works for most transformations I need. Now if in that DSL I would like to provide variable scope/visibility rules like in Java for example, where the localness of a variable is directly mapped to the depth of it’s definition over the :variables subbranches, I would need to have access not only to var, but to the root of the datastructure AFTER it has been processed in a previous step. That means I can’t just pass ast as a second parameter, because it would have the original state only before any transformation through Specter. collect I think would also not help me in that situation.</span></div><div id="t1513953259000050" t="2017-12-22 14:34:19 plamen So 
1. how one can pass not only the currently selected path element, but the whole structure as well in the already modified state on each invocation of the transform function?
2. if I would like that in the context of where variable B is definied, I would like to have access to variable A in the ast, then I should be able to get to the upper and recursively to all further upper levels up to the root from the current node transformed to access the variables defined there. I know how to do it in Clojure without specter, but how with Specter? (for example to pull the types of variables A and C for calculating B)
3. outside of Specter I have a lot of variable and other dependency analysis (essentially expressions/filters over topological sorts of the variables), but is there an idiomatic way to do it in Specter?

Any hints would be very helpful"><a href="#t1513953259000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">14:34:19</span>               plamen </span><span>So 
1. how one can pass not only the currently selected path element, but the whole structure as well in the already modified state on each invocation of the transform function?
2. if I would like that in the context of where variable B is definied, I would like to have access to variable A in the ast, then I should be able to get to the upper and recursively to all further upper levels up to the root from the current node transformed to access the variables defined there. I know how to do it in Clojure without specter, but how with Specter? (for example to pull the types of variables A and C for calculating B)
3. outside of Specter I have a lot of variable and other dependency analysis (essentially expressions/filters over topological sorts of the variables), but is there an idiomatic way to do it in Specter?

Any hints would be very helpful</span></div><div id="t1513955795000180" t="2017-12-22 15:16:35 nathanmarz @plamen don&apos;t understand what you&apos;re asking about getting root of data structure after it&apos;s been processed"><a href="#t1513955795000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:16:35</span>           nathanmarz </span><span>@plamen don&apos;t understand what you&apos;re asking about getting root of data structure after it&apos;s been processed</span></div><div id="t1513955842000176" t="2017-12-22 15:17:22 nathanmarz it would help if you simplified your examples to get at the heart of your questions"><a href="#t1513955842000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:17:22</span>           nathanmarz </span><span>it would help if you simplified your examples to get at the heart of your questions</span></div><div id="t1513956138000222" t="2017-12-22 15:22:18 plamen Hello Nathan, what I mean is that in the transform function I have as parameter only the current node in the tree as it gets recursed. I would like to pass in addition to it the whole structure so that I can walk it inside the transform function, but not in it’s inital state, but in it’s current (probably already processed state from previous steps in the recursion - my question is probably related to not knowing when exactly the transformation function is applied to the nodes - does first a walk happen in which paths get constructed, then the list is processed, or is it just as in the recursion - step by step depth first, or post-walk or…?) I hope this makes more sense."><a href="#t1513956138000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:22:18</span>               plamen </span><span>Hello Nathan, what I mean is that in the transform function I have as parameter only the current node in the tree as it gets recursed. I would like to pass in addition to it the whole structure so that I can walk it inside the transform function, but not in it’s inital state, but in it’s current (probably already processed state from previous steps in the recursion - my question is probably related to not knowing when exactly the transformation function is applied to the nodes - does first a walk happen in which paths get constructed, then the list is processed, or is it just as in the recursion - step by step depth first, or post-walk or…?) I hope this makes more sense.</span></div><div id="t1513956262000411" t="2017-12-22 15:24:22 plamen (not sure how to make the question simpler as the map with nested :variables keys consisting of lists of other such maps is the simplest one I can think of related to it. This is why I make the analogy with an abstract syntax tree/depth in the tree and variable scope/visibility as in languages like Java/C#)"><a href="#t1513956262000411" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:24:22</span>               plamen </span><span>(not sure how to make the question simpler as the map with nested :variables keys consisting of lists of other such maps is the simplest one I can think of related to it. This is why I make the analogy with an abstract syntax tree/depth in the tree and variable scope/visibility as in languages like Java/C#)</span></div><div id="t1513956308000204" t="2017-12-22 15:25:08 plamen (it is actually not an AST, but more of a types tree)"><a href="#t1513956308000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:25:08</span>               plamen </span><span>(it is actually not an AST, but more of a types tree)</span></div><div id="t1513956384000493" t="2017-12-22 15:26:24 plamen so, in the (defn process-var-list [ast]
 (transform [NODES-VARIABLES :variables MAP-VALS]
            (fn [var]
              ; do something to var
              )
            ast))"><a href="#t1513956384000493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:26:24</span>               plamen </span><span>so, in the (defn process-var-list [ast]
 (transform [NODES-VARIABLES :variables MAP-VALS]
            (fn [var]
              ; do something to var
              )
            ast))</span></div><div id="t1513956462000485" t="2017-12-22 15:27:42 plamen if I rewrite it to"><a href="#t1513956462000485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:27:42</span>               plamen </span><span>if I rewrite it to</span></div><div id="t1513956464000098" t="2017-12-22 15:27:44 plamen (defn process-var [var]
  ;do something and return the transformed var node)
  
(defn process-var-list [ast]
  (transform [NODES-VARIABLES :variables MAP-VALS]
             process-var
             ast))"><a href="#t1513956464000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:27:44</span>               plamen </span><span>(defn process-var [var]
  ;do something and return the transformed var node)
  
(defn process-var-list [ast]
  (transform [NODES-VARIABLES :variables MAP-VALS]
             process-var
             ast))</span></div><div id="t1513956544000493" t="2017-12-22 15:29:04 plamen what I mean is that in my understanding to achieve what I ask for in 1., passing ’ast as an additional argument to ’process-var would pass the inital state of ’ast before the recursion and possible transformation inside it happened?"><a href="#t1513956544000493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:29:04</span>               plamen </span><span>what I mean is that in my understanding to achieve what I ask for in 1., passing ’ast as an additional argument to ’process-var would pass the inital state of ’ast before the recursion and possible transformation inside it happened?</span></div><div id="t1513956761000553" t="2017-12-22 15:32:41 plamen what I need is that during the recursion, during the invocation from Specter of the function ’process-var, inside ’process-var I get as parameter the ’ast as processed up to there. (which is possible only in pre-walk, but not post-walk, but this is also the point - I don’t know how to control or know when the invocation of ’process-var actually happens)"><a href="#t1513956761000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:32:41</span>               plamen </span><span>what I need is that during the recursion, during the invocation from Specter of the function ’process-var, inside ’process-var I get as parameter the ’ast as processed up to there. (which is possible only in pre-walk, but not post-walk, but this is also the point - I don’t know how to control or know when the invocation of ’process-var actually happens)</span></div><div id="t1513956825000320" t="2017-12-22 15:33:45 plamen (sorry - the “possibility” in the “pre-/post-walk” part of the last sentence is wrong)"><a href="#t1513956825000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:33:45</span>               plamen </span><span>(sorry - the “possibility” in the “pre-/post-walk” part of the last sentence is wrong)</span></div><div id="t1513956887000226" t="2017-12-22 15:34:47 plamen Does that make more sense?"><a href="#t1513956887000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:34:47</span>               plamen </span><span>Does that make more sense?</span></div><div id="t1513957153000218" t="2017-12-22 15:39:13 plamen or in other words which is probably more visual - how to transform"><a href="#t1513957153000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:39:13</span>               plamen </span><span>or in other words which is probably more visual - how to transform</span></div><div id="t1513957159000327" t="2017-12-22 15:39:19 plamen {... ...
 ’A {:type :double}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}"><a href="#t1513957159000327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:39:19</span>               plamen </span><span>{... ...
 ’A {:type :double}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}</span></div><div id="t1513957160000172" t="2017-12-22 15:39:20 plamen into"><a href="#t1513957160000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:39:20</span>               plamen </span><span>into</span></div><div id="t1513957170000338" t="2017-12-22 15:39:30 plamen {... ...
 ’A {:type :double}
 ’D {:type :string}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :uses [[:variables ’A] [:variables ’B]]
							 :sees [’D [:variables ’A] [:variables ’B]]
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}"><a href="#t1513957170000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:39:30</span>               plamen </span><span>{... ...
 ’A {:type :double}
 ’D {:type :string}
 :variables {... ...
             ’A {:type :int}
			 ’C {:type :double}
             :variables {... ...
			             ’B {:type :double
						     :uses [[:variables ’A] [:variables ’B]]
							 :sees [’D [:variables ’A] [:variables ’B]]
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}</span></div><div id="t1513957241000368" t="2017-12-22 15:40:41 plamen where the vectors in :uses and :sees are either a path in a map as in ’get-in or may be even a Specter path if that’s possible easy."><a href="#t1513957241000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:40:41</span>               plamen </span><span>where the vectors in :uses and :sees are either a path in a map as in ’get-in or may be even a Specter path if that’s possible easy.</span></div><div id="t1513957274000097" t="2017-12-22 15:41:14 plamen (this is more about 2. and 3.)"><a href="#t1513957274000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:41:14</span>               plamen </span><span>(this is more about 2. and 3.)</span></div><div id="t1513957294000246" t="2017-12-22 15:41:34 plamen about question 1. another example"><a href="#t1513957294000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:41:34</span>               plamen </span><span>about question 1. another example</span></div><div id="t1513957318000351" t="2017-12-22 15:41:58 nathanmarz so when you process var 1 and then var 2, you want the var 2 transform fn to get the updated ast from processing var 1?"><a href="#t1513957318000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:41:58</span>           nathanmarz </span><span>so when you process var 1 and then var 2, you want the var 2 transform fn to get the updated ast from processing var 1?</span></div><div id="t1513957350000214" t="2017-12-22 15:42:30 plamen yes"><a href="#t1513957350000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:42:30</span>               plamen </span><span>yes</span></div><div id="t1513957353000241" t="2017-12-22 15:42:33 plamen exactly"><a href="#t1513957353000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:42:33</span>               plamen </span><span>exactly</span></div><div id="t1513957361000217" t="2017-12-22 15:42:41 plamen as in"><a href="#t1513957361000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:42:41</span>               plamen </span><span>as in</span></div><div id="t1513957365000455" t="2017-12-22 15:42:45 plamen initial tree"><a href="#t1513957365000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:42:45</span>               plamen </span><span>initial tree</span></div><div id="t1513957367000452" t="2017-12-22 15:42:47 plamen {... ...
 ’A {:type :double}
 :variables {... ...
             ’A {}
			 ’C {}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}"><a href="#t1513957367000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:42:47</span>               plamen </span><span>{... ...
 ’A {:type :double}
 :variables {... ...
             ’A {}
			 ’C {}
             :variables {... ...
			             ’B {:type :double
						     :formula “A + C”}
						 ... ...
			             }
		     ... ...}}</span></div><div id="t1513957385000194" t="2017-12-22 15:43:05 plamen when transforming ’A I can add {:type :int} to it"><a href="#t1513957385000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:43:05</span>               plamen </span><span>when transforming ’A I can add {:type :int} to it</span></div><div id="t1513957415000135" t="2017-12-22 15:43:35 nathanmarz I do exactly that with my graph navigators"><a href="#t1513957415000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:43:35</span>           nathanmarz </span><span>I do exactly that with my graph navigators</span></div><div id="t1513957426000313" t="2017-12-22 15:43:46 plamen and in the next recursion step when I process ’B, the :type values of ’A and ’C are already visible to the invocation of the transform function"><a href="#t1513957426000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:43:46</span>               plamen </span><span>and in the next recursion step when I process ’B, the :type values of ’A and ’C are already visible to the invocation of the transform function</span></div><div id="t1513957439000314" t="2017-12-22 15:43:59 nathanmarz my navigators don&apos;t navigate directly to a node, but to a pair of  [graph node-id]"><a href="#t1513957439000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:43:59</span>           nathanmarz </span><span>my navigators don&apos;t navigate directly to a node, but to a pair of </span><code>[graph node-id]</code></div><div id="t1513957451000169" t="2017-12-22 15:44:11 plamen I know how to do it outside of Specter, but specter gives me much more concise way"><a href="#t1513957451000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:11</span>               plamen </span><span>I know how to do it outside of Specter, but specter gives me much more concise way</span></div><div id="t1513957457000394" t="2017-12-22 15:44:17 plamen yes"><a href="#t1513957457000394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:17</span>               plamen </span><span>yes</span></div><div id="t1513957459000436" t="2017-12-22 15:44:19 nathanmarz so when I do  TOPSORT , it navigates to  [graph node-id]  in topological order, with each step having the updates form previous steps"><a href="#t1513957459000436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:19</span>           nathanmarz </span><span>so when I do </span><code>TOPSORT</code><span>, it navigates to </span><code>[graph node-id]</code><span> in topological order, with each step having the updates form previous steps</span></div><div id="t1513957479000164" t="2017-12-22 15:44:39 nathanmarz I believe you can do something similar for your use case with zippers"><a href="#t1513957479000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:39</span>           nathanmarz </span><span>I believe you can do something similar for your use case with zippers</span></div><div id="t1513957488000037" t="2017-12-22 15:44:48 nathanmarz look at com.rpl.specter.zipper"><a href="#t1513957488000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:48</span>           nathanmarz </span><span>look at com.rpl.specter.zipper</span></div><div id="t1513957493000018" t="2017-12-22 15:44:53 plamen in my normal clj code I also on each step have something like [root-node local-path-in-the-recursion]"><a href="#t1513957493000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:44:53</span>               plamen </span><span>in my normal clj code I also on each step have something like [root-node local-path-in-the-recursion]</span></div><div id="t1513957507000356" t="2017-12-22 15:45:07 plamen exactlyt"><a href="#t1513957507000356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:45:07</span>               plamen </span><span>exactlyt</span></div><div id="t1513957509000316" t="2017-12-22 15:45:09 plamen -t"><a href="#t1513957509000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:45:09</span>               plamen </span><span>-t</span></div><div id="t1513957514000047" t="2017-12-22 15:45:14 nathanmarz https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1513957514000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:45:14</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1513957575000083" t="2017-12-22 15:46:15 plamen I even did’t tought about zippers, as in normal Clj I achieve it without them. Thank you for the big hint!"><a href="#t1513957575000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:46:15</span>               plamen </span><span>I even did’t tought about zippers, as in normal Clj I achieve it without them. Thank you for the big hint!</span></div><div id="t1513957597000036" t="2017-12-22 15:46:37 nathanmarz zippers are an advanced form of navigation"><a href="#t1513957597000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:46:37</span>           nathanmarz </span><span>zippers are an advanced form of navigation</span></div><div id="t1513957607000358" t="2017-12-22 15:46:47 plamen so when I do  TOPSORT , it navigates to  [graph node-id]  in topological order, with each step having the updates form previous step - was exactly what I was looking it"><a href="#t1513957607000358" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:46:47</span>               plamen </span><span>so when I do </span><code>TOPSORT</code><span>, it navigates to </span><code>[graph node-id]</code><span> in topological order, with each step having the updates form previous step - was exactly what I was looking it</span></div><div id="t1513957611000434" t="2017-12-22 15:46:51 plamen it=at"><a href="#t1513957611000434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:46:51</span>               plamen </span><span>it=at</span></div><div id="t1513957615000353" t="2017-12-22 15:46:55 nathanmarz more indirect but can do things you can&apos;t with regular navigators"><a href="#t1513957615000353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:46:55</span>           nathanmarz </span><span>more indirect but can do things you can&apos;t with regular navigators</span></div><div id="t1513957625000223" t="2017-12-22 15:47:05 nathanmarz at the cost of increased overhead"><a href="#t1513957625000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:47:05</span>           nathanmarz </span><span>at the cost of increased overhead</span></div><div id="t1513957628000382" t="2017-12-22 15:47:08 plamen will read"><a href="#t1513957628000382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:47:08</span>               plamen </span><span>will read</span></div><div id="t1513957662000065" t="2017-12-22 15:47:42 plamen yes - the overhead is not that important for me as it will be used in a compilation phase, where not the compilation, but the runtime is important"><a href="#t1513957662000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:47:42</span>               plamen </span><span>yes - the overhead is not that important for me as it will be used in a compilation phase, where not the compilation, but the runtime is important</span></div><div id="t1513957913000529" t="2017-12-22 15:51:53 plamen while the topological order is important for me, because without it - no chance for correct code generation. but needed to ask first about step 1 and then to think how to overlay the order on top of it in Specter."><a href="#t1513957913000529" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">15:51:53</span>               plamen </span><span>while the topological order is important for me, because without it - no chance for correct code generation. but needed to ask first about step 1 and then to think how to overlay the order on top of it in Specter.</span></div><div id="t1513958514000397" t="2017-12-22 16:01:54 plamen reading the doc it looks to me that I have to solve couple of things (and rewire the brain a bit for using zippers)"><a href="#t1513958514000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:01:54</span>               plamen </span><span>reading the doc it looks to me that I have to solve couple of things (and rewire the brain a bit for using zippers)</span></div><div id="t1513958559000367" t="2017-12-22 16:02:39 plamen 1. I need to create a specter/zip constructor for nested maps and vectors which can be used from Specter"><a href="#t1513958559000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:02:39</span>               plamen </span><span>1. I need to create a specter/zip constructor for nested maps and vectors which can be used from Specter</span></div><div id="t1513958716000048" t="2017-12-22 16:05:16 plamen 2. not sure if I read it correctly from the examples, but all S/transform invoke a function with the node itself, but not with the zipper, so how would I navigate back to an upper level if the transform function (in the examples - inc) receives only the current value?"><a href="#t1513958716000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:05:16</span>               plamen </span><span>2. not sure if I read it correctly from the examples, but all S/transform invoke a function with the node itself, but not with the zipper, so how would I navigate back to an upper level if the transform function (in the examples - inc) receives only the current value?</span></div><div id="t1513958824000249" t="2017-12-22 16:07:04 plamen what I mean - from the examples the line (S/transform [SZ/VECTOR-ZIP SZ/DOWN SZ/NODE] inc data) invokes ’inc only with the value of the current node, but how would one consult upper nodes from inside ’inc?"><a href="#t1513958824000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:07:04</span>               plamen </span><span>what I mean - from the examples the line (S/transform [SZ/VECTOR-ZIP SZ/DOWN SZ/NODE] inc data) invokes ’inc only with the value of the current node, but how would one consult upper nodes from inside ’inc?</span></div><div id="t1513959239000106" t="2017-12-22 16:13:59 plamen 3. not sure yet how to do the recursion as the zip paths are to specific ‘coordinates’. I could using normal clojure recursion where on each node I construct a new zipper and walk/transform from there. Is this the right line of tought?"><a href="#t1513959239000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:13:59</span>               plamen </span><span>3. not sure yet how to do the recursion as the zip paths are to specific ‘coordinates’. I could using normal clojure recursion where on each node I construct a new zipper and walk/transform from there. Is this the right line of tought?</span></div><div id="t1513960583000003" t="2017-12-22 16:36:23 nathanmarz yea, on second thought zippers won&apos;t be enough for what you want to do"><a href="#t1513960583000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:36:23</span>           nathanmarz </span><span>yea, on second thought zippers won&apos;t be enough for what you want to do</span></div><div id="t1513960692000506" t="2017-12-22 16:38:12 nathanmarz you need a custom navigator that understands the data structure as a whole"><a href="#t1513960692000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:38:12</span>           nathanmarz </span><span>you need a custom navigator that understands the data structure as a whole</span></div><div id="t1513960698000404" t="2017-12-22 16:38:18 nathanmarz to do something like the  TOPSORT  I described"><a href="#t1513960698000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:38:18</span>           nathanmarz </span><span>to do something like the </span><code>TOPSORT</code><span> I described</span></div><div id="t1513960852000195" t="2017-12-22 16:40:52 nathanmarz for reference, my  TOPSORT  code looks like this:
 (defn- multi-anchor-path-select [graph getter next-fn]
  (doseqres NONE [anchor (getter graph)]
    (next-fn [graph anchor])))


(defn- multi-anchor-path-transform [graph getter next-fn]
  (reduce (fn [graph node-id]
            (-&gt; [graph node-id] next-fn first))
          graph
          (getter graph)))

(defnav multi-anchor-path [getter]
  (select* [this graph next-fn]
    (multi-anchor-path-select graph getter next-fn))
  (transform* [this graph next-fn]
    (multi-anchor-path-transform graph getter next-fn)))

(def TOPSORT (multi-anchor-path topsort))
"><a href="#t1513960852000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:40:52</span>           nathanmarz </span><span>for reference, my </span><code>TOPSORT</code><span> code looks like this:
</span><pre>(defn- multi-anchor-path-select [graph getter next-fn]
  (doseqres NONE [anchor (getter graph)]
    (next-fn [graph anchor])))


(defn- multi-anchor-path-transform [graph getter next-fn]
  (reduce (fn [graph node-id]
            (-&gt; [graph node-id] next-fn first))
          graph
          (getter graph)))

(defnav multi-anchor-path [getter]
  (select* [this graph next-fn]
    (multi-anchor-path-select graph getter next-fn))
  (transform* [this graph next-fn]
    (multi-anchor-path-transform graph getter next-fn)))

(def TOPSORT (multi-anchor-path topsort))
</pre></div><div id="t1513960938000120" t="2017-12-22 16:42:18 nathanmarz this is built on top of loom  https://github.com/aysylu/loom"><a href="#t1513960938000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">16:42:18</span>           nathanmarz </span><span>this is built on top of loom </span><a href="https://github.com/aysylu/loom" target="_blank">https://github.com/aysylu/loom</a></div><div id="t1513965845000427" t="2017-12-22 18:04:05 plamen Thank you for the direction, Nathan! I tought it is something trivial  🙂  Now I need to rethink"><a href="#t1513965845000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">18:04:05</span>               plamen </span><span>Thank you for the direction, Nathan! I tought it is something trivial </span><b>🙂</b><span> Now I need to rethink</span></div><div id="t1513965859000065" t="2017-12-22 18:04:19 plamen And for taking time again for my questions!"><a href="#t1513965859000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-22</span> <span class="t" onclick="H(this)">18:04:19</span>               plamen </span><span>And for taking time again for my questions!</span></div><div id="t1514133244000033" t="2017-12-24 16:34:04 jvuillermet Hello, given a collection like this one  [:set1 :set2 :submit :set1 :submit :se2 :set3] 
I want a function that returns the items immediately before each  :submit  
if no  :submit  in the coll, I need an empty coll result

 user=&gt; (-&gt;&gt; [:set1 :set2 :submit :set1 :submit :se2 :set3] (partition-by #(= :submit %)) butlast (remove #(= (list :submit) %)) (map last))
(:set2 :set1) 
is my current solution using  partition-by .

Is there a way to do that with specter ? (or a better way in clojure for that matter, but I’m mainly interested in the specter version)"><a href="#t1514133244000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-24</span> <span class="t" onclick="H(this)">16:34:04</span>          jvuillermet </span><span>Hello, given a collection like this one </span><code>[:set1 :set2 :submit :set1 :submit :se2 :set3]</code><span>
I want a function that returns the items immediately before each </span><code>:submit</code><span> 
if no </span><code>:submit</code><span> in the coll, I need an empty coll result

</span><pre>user=&gt; (-&gt;&gt; [:set1 :set2 :submit :set1 :submit :se2 :set3] (partition-by #(= :submit %)) butlast (remove #(= (list :submit) %)) (map last))
(:set2 :set1)</pre><span>
is my current solution using </span><code>partition-by</code><span>.

Is there a way to do that with specter ? (or a better way in clojure for that matter, but I’m mainly interested in the specter version)</span></div><div id="t1514144823000049" t="2017-12-24 19:47:03 nathanmarz @jvuillermet this is similar:
 user=&gt; (select [(continuous-subseqs #(not= :submit %)) LAST] data)
[:set2 :set1 :set3]
"><a href="#t1514144823000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-24</span> <span class="t" onclick="H(this)">19:47:03</span>           nathanmarz </span><span>@jvuillermet this is similar:
</span><pre>user=&gt; (select [(continuous-subseqs #(not= :submit %)) LAST] data)
[:set2 :set1 :set3]
</pre></div><div id="t1514144860000001" t="2017-12-24 19:47:40 nathanmarz With  https://github.com/nathanmarz/specter/issues/236  you could get exactly the same behavior"><a href="#t1514144860000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-24</span> <span class="t" onclick="H(this)">19:47:40</span>           nathanmarz </span><span>With </span><a href="https://github.com/nathanmarz/specter/issues/236" target="_blank">https://github.com/nathanmarz/specter/issues/236</a><span> you could get exactly the same behavior</span></div><div id="t1514838555000041" t="2018-01-01 20:29:15 mbjarland how would I go about calculating the sum of the string lengths in the following data structure (oh and yes, Nathan, I did cave in and pull in specter into my project, the convenience is just too alluring): 
 [{:delim [&quot;-&quot;]} {:align :L} {:delim [&quot;-&quot; :F &quot;-&quot;]} {:align :R} {:delim [&quot;-&quot;]}]
 
I’m assuming using: 
 (specter/traverse-all [ALL :delim ALL string?])
 
together with transduce would somehow do the trick?

the answer from the above data structure should be  4  as there are 4 strings of length 1 in the  :delim  maps in the exapmle"><a href="#t1514838555000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-01</span> <span class="t" onclick="H(this)">20:29:15</span>            mbjarland </span><span>how would I go about calculating the sum of the string lengths in the following data structure (oh and yes, Nathan, I did cave in and pull in specter into my project, the convenience is just too alluring): 
</span><pre>[{:delim [&quot;-&quot;]} {:align :L} {:delim [&quot;-&quot; :F &quot;-&quot;]} {:align :R} {:delim [&quot;-&quot;]}]
</pre><span>
I’m assuming using: 
</span><pre>(specter/traverse-all [ALL :delim ALL string?])
</pre><span>
together with transduce would somehow do the trick?

the answer from the above data structure should be </span><code>4</code><span> as there are 4 strings of length 1 in the </span><code>:delim</code><span> maps in the exapmle</span></div><div id="t1514838662000001" t="2018-01-01 20:31:02 mbjarland I suspect I’m just not friendly enough with transducers and am tripping over myself here"><a href="#t1514838662000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-01</span> <span class="t" onclick="H(this)">20:31:02</span>            mbjarland </span><span>I suspect I’m just not friendly enough with transducers and am tripping over myself here</span></div><div id="t1514839121000040" t="2018-01-01 20:38:41 mbjarland one way would be to step out from specter and do: 
 (reduce + 
        (map count 
          (specter/select [ALL :delim ALL string?] my-d)))
 
but I figured there might be some way of being even terser here"><a href="#t1514839121000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-01</span> <span class="t" onclick="H(this)">20:38:41</span>            mbjarland </span><span>one way would be to step out from specter and do: 
</span><pre>(reduce + 
        (map count 
          (specter/select [ALL :delim ALL string?] my-d)))
</pre><span>
but I figured there might be some way of being even terser here</span></div><div id="t1514839460000013" t="2018-01-01 20:44:20 nathanmarz @mbjarland this works:  (reduce + (traverse [ALL :delim ALL string? (view count)] data))"><a href="#t1514839460000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-01</span> <span class="t" onclick="H(this)">20:44:20</span>           nathanmarz </span><span>@mbjarland this works: </span><code>(reduce + (traverse [ALL :delim ALL string? (view count)] data))</code></div><div id="t1514839489000021" t="2018-01-01 20:44:49 nathanmarz using  view  lets you avoid needing transducers to make this efficient"><a href="#t1514839489000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-01</span> <span class="t" onclick="H(this)">20:44:49</span>           nathanmarz </span><span>using </span><code>view</code><span> lets you avoid needing transducers to make this efficient</span></div><div id="t1514886672000103" t="2018-01-02 09:51:12 mbjarland view …suspected there was something like this in there. Specter is awesome"><a href="#t1514886672000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-02</span> <span class="t" onclick="H(this)">09:51:12</span>            mbjarland </span><code>view</code><span>…suspected there was something like this in there. Specter is awesome</span></div><div id="t1514903736000304" t="2018-01-02 14:35:36 nathanmarz Specter 1.1.0 released  https://groups.google.com/forum/#!topic/clojure/_VOAYtRkuNc"><a href="#t1514903736000304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-02</span> <span class="t" onclick="H(this)">14:35:36</span>           nathanmarz </span><span>Specter 1.1.0 released </span><a href="https://groups.google.com/forum/#!topic/clojure/_VOAYtRkuNc" target="_blank">https://groups.google.com/forum/#!topic/clojure/_VOAYtRkuNc</a></div><div id="t1514949985000125" t="2018-01-03 03:26:25 mbjarland if I wanted to do a chain of transformations and wanted to avoid writing: 
 (let [data (transform ... data)
      data (transform ... data)
        ...] )
 
how would I go about that?"><a href="#t1514949985000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-03</span> <span class="t" onclick="H(this)">03:26:25</span>            mbjarland </span><span>if I wanted to do a chain of transformations and wanted to avoid writing: 
</span><pre>(let [data (transform ... data)
      data (transform ... data)
        ...] )
</pre><span>
how would I go about that?</span></div><div id="t1514953467000077" t="2018-01-03 04:24:27 nathanmarz @mbjarland either  (-&gt;&gt; data (transform ...) (transform ...))  or use  multi-transform"><a href="#t1514953467000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-03</span> <span class="t" onclick="H(this)">04:24:27</span>           nathanmarz </span><span>@mbjarland either </span><code>(-&gt;&gt; data (transform ...) (transform ...))</code><span> or use </span><code>multi-transform</code></div><div id="t1514953513000154" t="2018-01-03 04:25:13 nathanmarz i prefer the former except where paths share a lot of structure"><a href="#t1514953513000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-03</span> <span class="t" onclick="H(this)">04:25:13</span>           nathanmarz </span><span>i prefer the former except where paths share a lot of structure</span></div><div id="t1515092388000010" t="2018-01-04 18:59:48 wcohen is specter the proper tool for long/wide data transformations, analogous to R’s reshape2?
in other words, conversions from something like:
 {{:id 1 :year 2016 :val foo}
{:id 1 :year 2017 :val bar}
{:id 2 :year 2016 :val abc}
{:id 2 :year 2017 :val def}} 

to something like:
 {{:id 1 :2016 foo :2017 bar}
{:id 2 :2016 abc :2017 def}}"><a href="#t1515092388000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-04</span> <span class="t" onclick="H(this)">18:59:48</span>               wcohen </span><span>is specter the proper tool for long/wide data transformations, analogous to R’s reshape2?
in other words, conversions from something like:
</span><pre>{{:id 1 :year 2016 :val foo}
{:id 1 :year 2017 :val bar}
{:id 2 :year 2016 :val abc}
{:id 2 :year 2017 :val def}}</pre><span>

to something like:
</span><pre>{{:id 1 :2016 foo :2017 bar}
{:id 2 :2016 abc :2017 def}}</pre></div><div id="t1515092529000574" t="2018-01-04 19:02:09 nathanmarz @wcohen no, that&apos;s not what specter&apos;s for"><a href="#t1515092529000574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-04</span> <span class="t" onclick="H(this)">19:02:09</span>           nathanmarz </span><span>@wcohen no, that&apos;s not what specter&apos;s for</span></div><div id="t1515093442000299" t="2018-01-04 19:17:22 wcohen thanks!"><a href="#t1515093442000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-04</span> <span class="t" onclick="H(this)">19:17:22</span>               wcohen </span><span>thanks!</span></div><div id="t1515238426000038" t="2018-01-06 11:33:46 chromalchemy What&apos;s a good way to conditionally add/remove a value based on whether it&apos;s already in a collection? Basically like  assoc  or  dissoc  for vectors, based on value instead of index. Example: If  :a  is not it  in  [:b :c] , add it, else remove it."><a href="#t1515238426000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">11:33:46</span>         chromalchemy </span><span>What&apos;s a good way to conditionally add/remove a value based on whether it&apos;s already in a collection? Basically like </span><code>assoc</code><span> or </span><code>dissoc</code><span> for vectors, based on value instead of index. Example: If </span><code>:a</code><span> is not it  in </span><code>[:b :c]</code><span>, add it, else remove it.</span></div><div id="t1515238520000079" t="2018-01-06 11:35:20 chromalchemy I want to reach for  if-path  but don&apos;t think I can use  setval  with that to conditionally set  :a  or  NONE"><a href="#t1515238520000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">11:35:20</span>         chromalchemy </span><span>I want to reach for </span><code>if-path</code><span> but don&apos;t think I can use </span><code>setval</code><span> with that to conditionally set </span><code>:a</code><span> or </span><code>NONE</code></div><div id="t1515238689000020" t="2018-01-06 11:38:09 chromalchemy Or should I just stick to using maps?"><a href="#t1515238689000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">11:38:09</span>         chromalchemy </span><span>Or should I just stick to using maps?</span></div><div id="t1515239077000054" t="2018-01-06 11:44:37 chromalchemy I&apos;m trying to filter some items on some keywords, and I wanted to avoid having  {:a true :b false}  or  {:a nil :b :nil}  cluttering my data up. I feel like map values are redundant, because I can get boolean truthiness by testing for the presence of keywords (in maps at least)."><a href="#t1515239077000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">11:44:37</span>         chromalchemy </span><span>I&apos;m trying to filter some items on some keywords, and I wanted to avoid having </span><code>{:a true :b false}</code><span> or </span><code>{:a nil :b :nil}</code><span> cluttering my data up. I feel like map values are redundant, because I can get boolean truthiness by testing for the presence of keywords (in maps at least).</span></div><div id="t1515240549000107" t="2018-01-06 12:09:09 chromalchemy Probably I should use a set instead of a vector. But don&apos;t think that deserializes from Firebase properly, which is what I&apos;m using for persistence."><a href="#t1515240549000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">12:09:09</span>         chromalchemy </span><span>Probably I should use a set instead of a vector. But don&apos;t think that deserializes from Firebase properly, which is what I&apos;m using for persistence.</span></div><div id="t1515241402000006" t="2018-01-06 12:23:22 schmee @chromalchemy I think you can use  https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform  for this"><a href="#t1515241402000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">12:23:22</span>               schmee </span><span>@chromalchemy I think you can use </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#multi-transform</a><span> for this</span></div><div id="t1515245287000016" t="2018-01-06 13:28:07 chromalchemy @nathanmarz Thank. Can I use  multi-transform  with  if-path ?"><a href="#t1515245287000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">13:28:07</span>         chromalchemy </span><span>@nathanmarz Thank. Can I use </span><code>multi-transform</code><span> with </span><code>if-path</code><span>?</span></div><div id="t1515245306000031" t="2018-01-06 13:28:26 chromalchemy instead of  multi-path  in the examples..."><a href="#t1515245306000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">13:28:26</span>         chromalchemy </span><span>instead of </span><code>multi-path</code><span> in the examples...</span></div><div id="t1515245328000045" t="2018-01-06 13:28:48 chromalchemy right now I&apos;m hung up on:
 (select
    (if-path (= 1 2) ; false condition
      [ALL (pred= :a)]
      [ALL (pred= :c)])
    [:a :b :c])
=&gt; [:a]"><a href="#t1515245328000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">13:28:48</span>         chromalchemy </span><span>right now I&apos;m hung up on:
</span><pre>(select
    (if-path (= 1 2) ; false condition
      [ALL (pred= :a)]
      [ALL (pred= :c)])
    [:a :b :c])
=&gt; [:a]</pre></div><div id="t1515245422000033" t="2018-01-06 13:30:22 chromalchemy Doesn&apos;t seem to want to return the second path, based on the negative condition"><a href="#t1515245422000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">13:30:22</span>         chromalchemy </span><span>Doesn&apos;t seem to want to return the second path, based on the negative condition</span></div><div id="t1515245459000040" t="2018-01-06 13:30:59 chromalchemy Oh I think I see. It must be a conditional-path, not a generic condition..."><a href="#t1515245459000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">13:30:59</span>         chromalchemy </span><span>Oh I think I see. It must be a conditional-path, not a generic condition...</span></div><div id="t1515247914000030" t="2018-01-06 14:11:54 chromalchemy This is working!  (multi-transform
  (if-path
    [ ALL (pred= :a)]
    [ ALL (pred= :a) (terminal-val NONE)]
    [ BEFORE-ELEM (terminal-val :a)])
  [:a :b :c])"><a href="#t1515247914000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">14:11:54</span>         chromalchemy </span><span>This is working! </span><pre>(multi-transform
  (if-path
    [ ALL (pred= :a)]
    [ ALL (pred= :a) (terminal-val NONE)]
    [ BEFORE-ELEM (terminal-val :a)])
  [:a :b :c])</pre></div><div id="t1515248085000052" t="2018-01-06 14:14:45 chromalchemy Do you think I am barking up the wrong tree performance-wise to use keywords in vectors this way? The set of keywords will be pretty small, so I hope sequential lookup with  (pred=)  is not too big a drag."><a href="#t1515248085000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">14:14:45</span>         chromalchemy </span><span>Do you think I am barking up the wrong tree performance-wise to use keywords in vectors this way? The set of keywords will be pretty small, so I hope sequential lookup with </span><code>(pred=)</code><span> is not too big a drag.</span></div><div id="t1515248175000051" t="2018-01-06 14:16:15 nathanmarz @chromalchemy if ordering isn&apos;t important, then using a set or multi-set would be much more natural"><a href="#t1515248175000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">14:16:15</span>           nathanmarz </span><span>@chromalchemy if ordering isn&apos;t important, then using a set or multi-set would be much more natural</span></div><div id="t1515274448000057" t="2018-01-06 21:34:08 schmee hmm… am I doing something wrong here or is this supposed to work?
 user=&gt; (def data {:a [:x] :b [:x :x] :c [:x :x :x]})
#&apos;user/data
user=&gt; (select [MAP-VALS (view count)] data)
[1 2 3]
user=&gt; (reduce + (traverse [MAP-VALS (view count)] data))
6
user=&gt; (transduce (traverse-all [MAP-VALS (view count)]) + 0 data)
ClassCastException clojure.lang.Keyword cannot be cast to java.util.Map$Entry  clojure.lang.APersistentMap$ValSeq.first (APersistentMap.java:234)
"><a href="#t1515274448000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">21:34:08</span>               schmee </span><span>hmm… am I doing something wrong here or is this supposed to work?
</span><pre>user=&gt; (def data {:a [:x] :b [:x :x] :c [:x :x :x]})
#&apos;user/data
user=&gt; (select [MAP-VALS (view count)] data)
[1 2 3]
user=&gt; (reduce + (traverse [MAP-VALS (view count)] data))
6
user=&gt; (transduce (traverse-all [MAP-VALS (view count)]) + 0 data)
ClassCastException clojure.lang.Keyword cannot be cast to java.util.Map$Entry  clojure.lang.APersistentMap$ValSeq.first (APersistentMap.java:234)
</pre></div><div id="t1515278318000004" t="2018-01-06 22:38:38 nathanmarz traverse-all   runs on each item of sequential input"><a href="#t1515278318000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:38:38</span>           nathanmarz </span><code>traverse-all</code><span>  runs on each item of sequential input</span></div><div id="t1515278337000064" t="2018-01-06 22:38:57 nathanmarz @schmee which is why is has the  -all  suffix"><a href="#t1515278337000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:38:57</span>           nathanmarz </span><span>@schmee which is why is has the </span><code>-all</code><span> suffix</span></div><div id="t1515278471000032" t="2018-01-06 22:41:11 nathanmarz that&apos;s generally what transducers do"><a href="#t1515278471000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:41:11</span>           nathanmarz </span><span>that&apos;s generally what transducers do</span></div><div id="t1515278632000029" t="2018-01-06 22:43:52 schmee ok, I think I see the difference now"><a href="#t1515278632000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:43:52</span>               schmee </span><span>ok, I think I see the difference now</span></div><div id="t1515278814000080" t="2018-01-06 22:46:54 schmee so  traverse-all  can be transduced but  traverse  is reducible but not transducible?"><a href="#t1515278814000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:46:54</span>               schmee </span><span>so </span><code>traverse-all</code><span> can be transduced but </span><code>traverse</code><span> is reducible but not transducible?</span></div><div id="t1515278841000033" t="2018-01-06 22:47:21 schmee if that makes any sense"><a href="#t1515278841000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:47:21</span>               schmee </span><span>if that makes any sense</span></div><div id="t1515279023000120" t="2018-01-06 22:50:23 nathanmarz traverse-all  creates a transducer"><a href="#t1515279023000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:50:23</span>           nathanmarz </span><code>traverse-all</code><span> creates a transducer</span></div><div id="t1515279030000064" t="2018-01-06 22:50:30 nathanmarz traverse  returns a reducible object"><a href="#t1515279030000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:50:30</span>           nathanmarz </span><code>traverse</code><span> returns a reducible object</span></div><div id="t1515279064000017" t="2018-01-06 22:51:04 nathanmarz traverse-all  exists to integrate specter with transducers"><a href="#t1515279064000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">22:51:04</span>           nathanmarz </span><code>traverse-all</code><span> exists to integrate specter with transducers</span></div><div id="t1515282440000010" t="2018-01-06 23:47:20 schmee gotcha, thanks for clarifying  :+1:"><a href="#t1515282440000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-06</span> <span class="t" onclick="H(this)">23:47:20</span>               schmee </span><span>gotcha, thanks for clarifying </span><b>:+1:</b></div><div id="t1515337319000051" t="2018-01-07 15:01:59 alexisvincent Specter is AWESOME"><a href="#t1515337319000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-07</span> <span class="t" onclick="H(this)">15:01:59</span>        alexisvincent </span><span>Specter is AWESOME</span></div><div id="t1515366843000135" t="2018-01-07 23:14:03 alexisvincent I replaced 14 lines of knarly clojure code with 3 lines of Specter calls. @nathanmarz this library makes a huge difference! Thanks! Super impressive engineering"><a href="#t1515366843000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-07</span> <span class="t" onclick="H(this)">23:14:03</span>        alexisvincent </span><span>I replaced 14 lines of knarly clojure code with 3 lines of Specter calls. @nathanmarz this library makes a huge difference! Thanks! Super impressive engineering</span></div><div id="t1515370648000002" t="2018-01-08 00:17:28 nathanmarz @alexisvincent great to hear"><a href="#t1515370648000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">00:17:28</span>           nathanmarz </span><span>@alexisvincent great to hear</span></div><div id="t1515401957000238" t="2018-01-08 08:59:17 aaelony New to Specter. I&apos;m scraping  http://docs.h2o.ai/h2o/latest-stable/h2o-docs/rest-api-reference.html  to build a vector of maps where each map will have a key for :http-verb, :rest-path :inputs and outputs.   Another challenge is that the html appears to be in 4 conceptual sections, 1) a section of a href links with rest endpoints, 2) a section of h2 headings with the http-verb and rest endpoint followed by a table with Input and Output, 3) a section of a href links with schema nouns, and 4) a final section of h2 headings with schema noun name followed by a table of keys and their descriptions.  How might I keep the four sections separate, before combining them?  I&apos;m also unclear if I should use  select ,  collect ,  codewalker , or  continue-then-stay  to collect and surface nested pieces of information.    Thanks in advance."><a href="#t1515401957000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">08:59:17</span>              aaelony </span><span>New to Specter. I&apos;m scraping </span><a href="http://docs.h2o.ai/h2o/latest-stable/h2o-docs/rest-api-reference.html" target="_blank">http://docs.h2o.ai/h2o/latest-stable/h2o-docs/rest-api-reference.html</a><span> to build a vector of maps where each map will have a key for :http-verb, :rest-path :inputs and outputs.   Another challenge is that the html appears to be in 4 conceptual sections, 1) a section of a href links with rest endpoints, 2) a section of h2 headings with the http-verb and rest endpoint followed by a table with Input and Output, 3) a section of a href links with schema nouns, and 4) a final section of h2 headings with schema noun name followed by a table of keys and their descriptions.  How might I keep the four sections separate, before combining them?  I&apos;m also unclear if I should use </span><code>select</code><span>, </span><code>collect</code><span>, </span><code>codewalker</code><span>, or </span><code>continue-then-stay</code><span> to collect and surface nested pieces of information.    Thanks in advance.</span></div><div id="t1515402257000288" t="2018-01-08 09:04:17 aaelony https://pastebin.com/q0RQzLic"><a href="#t1515402257000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:04:17</span>              aaelony </span><a href="https://pastebin.com/q0RQzLic" target="_blank">https://pastebin.com/q0RQzLic</a></div><div id="t1515422775000252" t="2018-01-08 14:46:15 nathanmarz @aaelony you&apos;re going to have to be more specific"><a href="#t1515422775000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">14:46:15</span>           nathanmarz </span><span>@aaelony you&apos;re going to have to be more specific</span></div><div id="t1515422813000282" t="2018-01-08 14:46:53 nathanmarz you want to use specter to extract information out of html?"><a href="#t1515422813000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">14:46:53</span>           nathanmarz </span><span>you want to use specter to extract information out of html?</span></div><div id="t1515422843000299" t="2018-01-08 14:47:23 nathanmarz can you paste a sample of the html you&apos;re scraping, and what you want as output?"><a href="#t1515422843000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">14:47:23</span>           nathanmarz </span><span>can you paste a sample of the html you&apos;re scraping, and what you want as output?</span></div><div id="t1515429574000381" t="2018-01-08 16:39:34 aaelony ok, let me take some time to formulate a better question."><a href="#t1515429574000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">16:39:34</span>              aaelony </span><span>ok, let me take some time to formulate a better question.</span></div><div id="t1515442843000386" t="2018-01-08 20:20:43 aaelony hi @nathanmarz, here is the code in clojure that I&apos;m wondering how to produce in Specter."><a href="#t1515442843000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">20:20:43</span>              aaelony </span><span>hi @nathanmarz, here is the code in clojure that I&apos;m wondering how to produce in Specter.</span></div><div id="t1515442845000285" t="2018-01-08 20:20:45 aaelony (ns testing 
      (:require [net.cgrand.enlive-html :as html]                                                                                                                                                                                                                                  
            [org.httpkit.client :as http]                                                                                                                                                                                                                                      
            [clojure.string :as str] ))

(-&gt;&gt; (html/html-snippet
(:body @(http/get &quot;&quot;
{:insecure false})))
(filterv #(= (:tag %) :html))
first
:content
(filterv #(= (:tag %) :body))
first
:content
(filterv #(= (:tag %) :div))
first
:content
(filterv #(= (:tag %) :h2))
(mapv #(let [[verb endpoint] (-&gt; %
:content
first
(str/split #&quot; &quot;)
)
inputs (if endpoint
(re-seq #&quot;\{(.*?)\}&quot; endpoint))
]
{:verb verb :endpoint endpoint :inputs inputs}
))
(filterv #(or (= (:verb %) &quot;GET&quot;)
(= (:verb %) &quot;POST&quot;)
(= (:verb %) &quot;DELETE&quot;)
(= (:verb %) &quot;HEAD&quot;)))
)
"><a href="#t1515442845000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">20:20:45</span>              aaelony </span><pre>(ns testing 
      (:require [net.cgrand.enlive-html :as html]                                                                                                                                                                                                                                  
            [org.httpkit.client :as http]                                                                                                                                                                                                                                      
            [clojure.string :as str] ))

(-&gt;&gt; (html/html-snippet
(:body @(http/get &quot;&quot;
{:insecure false})))
(filterv #(= (:tag %) :html))
first
:content
(filterv #(= (:tag %) :body))
first
:content
(filterv #(= (:tag %) :div))
first
:content
(filterv #(= (:tag %) :h2))
(mapv #(let [[verb endpoint] (-&gt; %
:content
first
(str/split #&quot; &quot;)
)
inputs (if endpoint
(re-seq #&quot;\{(.*?)\}&quot; endpoint))
]
{:verb verb :endpoint endpoint :inputs inputs}
))
(filterv #(or (= (:verb %) &quot;GET&quot;)
(= (:verb %) &quot;POST&quot;)
(= (:verb %) &quot;DELETE&quot;)
(= (:verb %) &quot;HEAD&quot;)))
)
</pre></div><div id="t1515457933000340" t="2018-01-09 00:32:13 nathanmarz @aaelony with specter it would be something like:
 (defn first-matching-tag [tag]
  (path (filterer #(= (:tag %) tag)) FIRST))

(select
  [(first-matching-tag :html)
   :content
   (first-matching-tag :div)
   :content
   (first-matching-tag :h2)
   ALL
   :content
   FIRST
   (view #(str/split #&quot; &quot;))
   (fn [[verb _]] (#{&quot;GET&quot; &quot;POST&quot; &quot;DELETE&quot; &quot;HEAD&quot;} verb))
   
  ]
 data)
"><a href="#t1515457933000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">00:32:13</span>           nathanmarz </span><span>@aaelony with specter it would be something like:
</span><pre>(defn first-matching-tag [tag]
  (path (filterer #(= (:tag %) tag)) FIRST))

(select
  [(first-matching-tag :html)
   :content
   (first-matching-tag :div)
   :content
   (first-matching-tag :h2)
   ALL
   :content
   FIRST
   (view #(str/split #&quot; &quot;))
   (fn [[verb _]] (#{&quot;GET&quot; &quot;POST&quot; &quot;DELETE&quot; &quot;HEAD&quot;} verb))
   
  ]
 data)
</pre></div><div id="t1515457952000052" t="2018-01-09 00:32:32 nathanmarz plus a little extra code to do that processing of &quot;inputs&quot; in your code"><a href="#t1515457952000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">00:32:32</span>           nathanmarz </span><span>plus a little extra code to do that processing of &quot;inputs&quot; in your code</span></div><div id="t1515459231000151" t="2018-01-09 00:53:51 aaelony Thank-you, @nathanmarz. Looks more elegant and concise. I was unaware of the path macro. I’ll need to look into it. Eager to understand Specter better."><a href="#t1515459231000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">00:53:51</span>              aaelony </span><span>Thank-you, @nathanmarz. Looks more elegant and concise. I was unaware of the path macro. I’ll need to look into it. Eager to understand Specter better.</span></div><div id="t1515459310000046" t="2018-01-09 00:55:10 nathanmarz @aaelony  select ,  transform  etc. implicitly use that macro"><a href="#t1515459310000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">00:55:10</span>           nathanmarz </span><span>@aaelony </span><code>select</code><span>, </span><code>transform</code><span> etc. implicitly use that macro</span></div><div id="t1515459338000021" t="2018-01-09 00:55:38 nathanmarz path  is the heart of what makes specter work"><a href="#t1515459338000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">00:55:38</span>           nathanmarz </span><code>path</code><span> is the heart of what makes specter work</span></div><div id="t1515459606000106" t="2018-01-09 01:00:06 aaelony any reason why path instead of select in this case?"><a href="#t1515459606000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">01:00:06</span>              aaelony </span><span>any reason why path instead of select in this case?</span></div><div id="t1515459731000032" t="2018-01-09 01:02:11 nathanmarz first-matching-tag  returns a navigator to be composed with rest of path"><a href="#t1515459731000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">01:02:11</span>           nathanmarz </span><code>first-matching-tag</code><span> returns a navigator to be composed with rest of path</span></div><div id="t1515459748000186" t="2018-01-09 01:02:28 nathanmarz select  invokes a navigator on a piece of data"><a href="#t1515459748000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">01:02:28</span>           nathanmarz </span><code>select</code><span> invokes a navigator on a piece of data</span></div><div id="t1515465874000280" t="2018-01-09 02:44:34 aaelony got it. thanks again"><a href="#t1515465874000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-09</span> <span class="t" onclick="H(this)">02:44:34</span>              aaelony </span><span>got it. thanks again</span></div><div id="t1515710127000222" t="2018-01-11 22:35:27 phreed Is there a way to do mutual navigation? A use would be to update one structure with data from another."><a href="#t1515710127000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">22:35:27</span>               phreed </span><span>Is there a way to do mutual navigation? A use would be to update one structure with data from another.</span></div><div id="t1515712537000437" t="2018-01-11 23:15:37 nathanmarz @phreed do you have an example of a transformation of this sort?"><a href="#t1515712537000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">23:15:37</span>           nathanmarz </span><span>@phreed do you have an example of a transformation of this sort?</span></div><div id="t1515713752000325" t="2018-01-11 23:35:52 phreed The general idea is seen in the &apos;reduce&apos; macro where one navigation is done over the collection and the reducing function navigates over and updates the accumulator. If the accumulator were implemented as a zipper the position would persist.
In the large, assume I have a database for which I have just received a message on a relevant topic with which I want to update my database. I will navigate the message and use the information found there to navigate the database.
There would be some collect object shared between the two navigators.
The database could be a graph."><a href="#t1515713752000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">23:35:52</span>               phreed </span><span>The general idea is seen in the &apos;reduce&apos; macro where one navigation is done over the collection and the reducing function navigates over and updates the accumulator. If the accumulator were implemented as a zipper the position would persist.
In the large, assume I have a database for which I have just received a message on a relevant topic with which I want to update my database. I will navigate the message and use the information found there to navigate the database.
There would be some collect object shared between the two navigators.
The database could be a graph.</span></div><div id="t1515714237000226" t="2018-01-11 23:43:57 nathanmarz @phreed you can use  collect  and  collect-one  to collect additional information about the data structure during navigation"><a href="#t1515714237000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">23:43:57</span>           nathanmarz </span><span>@phreed you can use </span><code>collect</code><span> and </span><code>collect-one</code><span> to collect additional information about the data structure during navigation</span></div><div id="t1515714257000090" t="2018-01-11 23:44:17 nathanmarz either as additional arguments to the transform function or returned with the navigated values in  select"><a href="#t1515714257000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">23:44:17</span>           nathanmarz </span><span>either as additional arguments to the transform function or returned with the navigated values in </span><code>select</code></div><div id="t1515714304000017" t="2018-01-11 23:45:04 nathanmarz there&apos;s an example of doing that with a recursive data structure here:  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure"><a href="#t1515714304000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-11</span> <span class="t" onclick="H(this)">23:45:04</span>           nathanmarz </span><span>there&apos;s an example of doing that with a recursive data structure here: </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure</a></div><div id="t1515717018000328" t="2018-01-12 00:30:18 phreed @nathanmarz Yes I have been using the collect twins with select which constructs a seq. I will take a look at the example."><a href="#t1515717018000328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">00:30:18</span>               phreed </span><span>@nathanmarz Yes I have been using the collect twins with select which constructs a seq. I will take a look at the example.</span></div><div id="t1515745296000170" t="2018-01-12 08:21:36 schmee is there a way to make  transform  halt after the first successful navigation, something like  transform-one ?"><a href="#t1515745296000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">08:21:36</span>               schmee </span><span>is there a way to make </span><code>transform</code><span> halt after the first successful navigation, something like </span><code>transform-one</code><span>?</span></div><div id="t1515745306000006" t="2018-01-12 08:21:46 schmee I’m thinking about this case:  user=&gt; (def a [{:name &quot;foo&quot; :id 1} {:name &quot;bar&quot; :id 2}])
#&apos;user/a
user=&gt; (transform [ALL (selected? :id (pred= 2))] #(assoc % :name &quot;not-foo&quot;) a)
[{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;not-foo&quot;}]"><a href="#t1515745306000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">08:21:46</span>               schmee </span><span>I’m thinking about this case: </span><pre>user=&gt; (def a [{:name &quot;foo&quot; :id 1} {:name &quot;bar&quot; :id 2}])
#&apos;user/a
user=&gt; (transform [ALL (selected? :id (pred= 2))] #(assoc % :name &quot;not-foo&quot;) a)
[{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;not-foo&quot;}]</pre></div><div id="t1515745348000004" t="2018-01-12 08:22:28 schmee since ids are unique, there will only be one element selected so there is no need to check the rest of the elements once it has been found"><a href="#t1515745348000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">08:22:28</span>               schmee </span><span>since ids are unique, there will only be one element selected so there is no need to check the rest of the elements once it has been found</span></div><div id="t1515745545000199" t="2018-01-12 08:25:45 schmee I don’t know if that makes any sense  😄"><a href="#t1515745545000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">08:25:45</span>               schmee </span><span>I don’t know if that makes any sense </span><b>😄</b></div><div id="t1515766371000233" t="2018-01-12 14:12:51 nathanmarz @schmee no, nothing like that currently"><a href="#t1515766371000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">14:12:51</span>           nathanmarz </span><span>@schmee no, nothing like that currently</span></div><div id="t1515766422000002" t="2018-01-12 14:13:42 nathanmarz this idea might be applicable to that kind of behavior:  https://github.com/nathanmarz/specter/issues/121"><a href="#t1515766422000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">14:13:42</span>           nathanmarz </span><span>this idea might be applicable to that kind of behavior: </span><a href="https://github.com/nathanmarz/specter/issues/121" target="_blank">https://github.com/nathanmarz/specter/issues/121</a></div><div id="t1515767602000045" t="2018-01-12 14:33:22 schmee yeah that seems to be it, I’ll keep an eye on that issue  👍"><a href="#t1515767602000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-12</span> <span class="t" onclick="H(this)">14:33:22</span>               schmee </span><span>yeah that seems to be it, I’ll keep an eye on that issue </span><b>👍</b></div><div id="t1515883787000018" t="2018-01-13 22:49:47 mbjarland how would I move a piece of a data structure (nested maps and vectors)  from one path to another? Seems transform points at a path and changes the value at that path using a function. Would it be a  select  followed by a  setval  or is there a one-liner?"><a href="#t1515883787000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-13</span> <span class="t" onclick="H(this)">22:49:47</span>            mbjarland </span><span>how would I move a piece of a data structure (nested maps and vectors)  from one path to another? Seems transform points at a path and changes the value at that path using a function. Would it be a </span><code>select</code><span> followed by a </span><code>setval</code><span> or is there a one-liner?</span></div><div id="t1515884227000046" t="2018-01-13 22:57:07 mbjarland let me rephrase that because the case is more complex, how would I go from: 
 {:layout    [{:repeat [:a]}
             {:delim [&quot; &quot;]}
             {:repeat [:b]}],
 :apply-for [:odd :even]}
 
to
 {:layout    [{:repeat [:a] :apply-for :odd}
             {:delim [&quot; &quot;]}
             {:repeat [:b] :apply-for :even}]}
 
where there are as many elements in the  :apply-for  vector as there are  :repeat  maps in be before structure. So we are matching by index and moving the  :odd  and  :even  to the corresponding  :repeat  map"><a href="#t1515884227000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-13</span> <span class="t" onclick="H(this)">22:57:07</span>            mbjarland </span><span>let me rephrase that because the case is more complex, how would I go from: 
</span><pre>{:layout    [{:repeat [:a]}
             {:delim [&quot; &quot;]}
             {:repeat [:b]}],
 :apply-for [:odd :even]}
</pre><span>
to
</span><pre>{:layout    [{:repeat [:a] :apply-for :odd}
             {:delim [&quot; &quot;]}
             {:repeat [:b] :apply-for :even}]}
</pre><span>
where there are as many elements in the </span><code>:apply-for</code><span> vector as there are </span><code>:repeat</code><span> maps in be before structure. So we are matching by index and moving the </span><code>:odd</code><span> and </span><code>:even</code><span> to the corresponding </span><code>:repeat</code><span> map</span></div><div id="t1515884345000027" t="2018-01-13 22:59:05 mbjarland I get the feeling I might have to select the vector and then do a stateful  transform  call where the transform function would pull items from the vector one-by-one, but let me know if there is some better way"><a href="#t1515884345000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-13</span> <span class="t" onclick="H(this)">22:59:05</span>            mbjarland </span><span>I get the feeling I might have to select the vector and then do a stateful </span><code>transform</code><span> call where the transform function would pull items from the vector one-by-one, but let me know if there is some better way</span></div><div id="t1515886595000084" t="2018-01-13 23:36:35 nathanmarz @mbjarland use  subselect"><a href="#t1515886595000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-13</span> <span class="t" onclick="H(this)">23:36:35</span>           nathanmarz </span><span>@mbjarland use </span><code>subselect</code></div><div id="t1515886608000045" t="2018-01-13 23:36:48 nathanmarz (let [af (:apply-for data)]
  (-&gt;&gt; data
       (setval [:layout
                (subselect
                  ALL
                  #(contains? % :repeat)
                  :apply-for)
                ]
                af)
       (setval :apply-for NONE)
       ))
"><a href="#t1515886608000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-13</span> <span class="t" onclick="H(this)">23:36:48</span>           nathanmarz </span><pre>(let [af (:apply-for data)]
  (-&gt;&gt; data
       (setval [:layout
                (subselect
                  ALL
                  #(contains? % :repeat)
                  :apply-for)
                ]
                af)
       (setval :apply-for NONE)
       ))
</pre></div><div id="t1515939901000094" t="2018-01-14 14:25:01 mbjarland @nathanmarz wow…that is some kung-fu. Am I reading that right that we are essentially selecting a bunch of nodes in the datastructure as targets for the setval and then assigning using a vector and out comes the transformed data structure? That is perhaps the coolest statement I’ve seen so far from specter. I rewrote the subseelct path as  (subselect ALL (pred :repeat) :apply-for) , seems to do the same thing. Naturally the reward for an awesome answer is another question…is there a way in specter to select the node after a node we match in a vector, i.e. assume a vector: 
 [:a :b :c :d :e 1 :f :g]
 
and I would like to select the item after  :e"><a href="#t1515939901000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-14</span> <span class="t" onclick="H(this)">14:25:01</span>            mbjarland </span><span>@nathanmarz wow…that is some kung-fu. Am I reading that right that we are essentially selecting a bunch of nodes in the datastructure as targets for the setval and then assigning using a vector and out comes the transformed data structure? That is perhaps the coolest statement I’ve seen so far from specter. I rewrote the subseelct path as </span><code>(subselect ALL (pred :repeat) :apply-for)</code><span>, seems to do the same thing. Naturally the reward for an awesome answer is another question…is there a way in specter to select the node after a node we match in a vector, i.e. assume a vector: 
</span><pre>[:a :b :c :d :e 1 :f :g]
</pre><span>
and I would like to select the item after </span><code>:e</code></div><div id="t1515940163000062" t="2018-01-14 14:29:23 nathanmarz subselect  lets you manipulate an arbitrary selection path as a sequence, where changes to the sequence apply at the original locations"><a href="#t1515940163000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-14</span> <span class="t" onclick="H(this)">14:29:23</span>           nathanmarz </span><code>subselect</code><span> lets you manipulate an arbitrary selection path as a sequence, where changes to the sequence apply at the original locations</span></div><div id="t1515940212000166" t="2018-01-14 14:30:12 nathanmarz @mbjarland you can do that with zippers"><a href="#t1515940212000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-14</span> <span class="t" onclick="H(this)">14:30:12</span>           nathanmarz </span><span>@mbjarland you can do that with zippers</span></div><div id="t1515940231000063" t="2018-01-14 14:30:31 nathanmarz also possible with  srange-dynamic"><a href="#t1515940231000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-14</span> <span class="t" onclick="H(this)">14:30:31</span>           nathanmarz </span><span>also possible with </span><code>srange-dynamic</code></div><div id="t1515940250000059" t="2018-01-14 14:30:50 nathanmarz or you can make a custom navigator"><a href="#t1515940250000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-14</span> <span class="t" onclick="H(this)">14:30:50</span>           nathanmarz </span><span>or you can make a custom navigator</span></div><div id="t1516205242000050" t="2018-01-17 16:07:22 jeremys Hey guys I have been scratching my head for some time now. I want to operate the following transformation :
 [&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag tag-to-unwrap :content [&quot;toto&quot;]}]
;=&gt;
[&quot;toto&quot; &quot;titi&quot; &quot;tutu&quot; &quot;toto&quot;]
 
Right now with:
 (transform [ALL XML-ZIP NEXT-WALK NODE map? #(= :tag-to-unwrap (:tag %))]
:content
[&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag tag-to-unwrap :content [&quot;toto&quot;]}])
 
I get
 [&quot;toto&quot; [&quot;titi&quot; &quot;tutu&quot;] [&quot;toto&quot;]] 
Can I get specter to “splice” the vectors  [&quot;titi&quot; &quot;tutu&quot;] and  [&quot;toto&quot;] in the result?"><a href="#t1516205242000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:07:22</span>              jeremys </span><span>Hey guys I have been scratching my head for some time now. I want to operate the following transformation :
</span><pre>[&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag tag-to-unwrap :content [&quot;toto&quot;]}]
;=&gt;
[&quot;toto&quot; &quot;titi&quot; &quot;tutu&quot; &quot;toto&quot;]
</pre><span>
Right now with:
</span><pre>(transform [ALL XML-ZIP NEXT-WALK NODE map? #(= :tag-to-unwrap (:tag %))]
:content
[&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag tag-to-unwrap :content [&quot;toto&quot;]}])
</pre><span>
I get
</span><pre>[&quot;toto&quot; [&quot;titi&quot; &quot;tutu&quot;] [&quot;toto&quot;]]</pre><span>
Can I get specter to “splice” the vectors </span><code>[&quot;titi&quot; &quot;tutu&quot;]</code><span>and </span><code>[&quot;toto&quot;]</code><span>in the result?</span></div><div id="t1516206004000517" t="2018-01-17 16:20:04 nathanmarz @jeremys with what&apos;s built-in you can do something like this:
 (require &apos;[com.rpl.specter.zipper :as z])

(def data
  [&quot;toto&quot;
    {:tag :a :content [&quot;titi&quot; &quot;tutu&quot;]}
    {:tag :a :content [&quot;toto&quot;]}]
  )

(transform
  [z/VECTOR-ZIP
   z/DOWN
   z/NEXT-WALK
   (selected? z/NODE map?)
   z/NODE-SEQ]
  #(select [FIRST :content ALL] %)
  data)
"><a href="#t1516206004000517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:20:04</span>           nathanmarz </span><span>@jeremys with what&apos;s built-in you can do something like this:
</span><pre>(require &apos;[com.rpl.specter.zipper :as z])

(def data
  [&quot;toto&quot;
    {:tag :a :content [&quot;titi&quot; &quot;tutu&quot;]}
    {:tag :a :content [&quot;toto&quot;]}]
  )

(transform
  [z/VECTOR-ZIP
   z/DOWN
   z/NEXT-WALK
   (selected? z/NODE map?)
   z/NODE-SEQ]
  #(select [FIRST :content ALL] %)
  data)
</pre></div><div id="t1516206070000250" t="2018-01-17 16:21:10 nathanmarz it&apos;s also pretty easy to make an  ALL-SEQ  navigator which navigates to each element as a 1 element sequence, and then you could do:
 (transform [ALL-SEQ (selected? FIRST map?)]
  #(select [FIRST :content ALL] %)
  data
  )
"><a href="#t1516206070000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:21:10</span>           nathanmarz </span><span>it&apos;s also pretty easy to make an </span><code>ALL-SEQ</code><span> navigator which navigates to each element as a 1 element sequence, and then you could do:
</span><pre>(transform [ALL-SEQ (selected? FIRST map?)]
  #(select [FIRST :content ALL] %)
  data
  )
</pre></div><div id="t1516206165001072" t="2018-01-17 16:22:45 nathanmarz technically this would work:  (def ALL-SEQ (path z/VECTOR-ZIP z/DOWN z/NEXT-WALK z/NODE-SEQ))"><a href="#t1516206165001072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:22:45</span>           nathanmarz </span><span>technically this would work: </span><code>(def ALL-SEQ (path z/VECTOR-ZIP z/DOWN z/NEXT-WALK z/NODE-SEQ))</code></div><div id="t1516206174000386" t="2018-01-17 16:22:54 nathanmarz though you could make it more efficient with a custom navigator"><a href="#t1516206174000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:22:54</span>           nathanmarz </span><span>though you could make it more efficient with a custom navigator</span></div><div id="t1516206346000328" t="2018-01-17 16:25:46 nathanmarz another solution:
 (transform (continuous-subseqs map?)
  #(select [ALL :content ALL] %)
  data
  )
"><a href="#t1516206346000328" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:25:46</span>           nathanmarz </span><span>another solution:
</span><pre>(transform (continuous-subseqs map?)
  #(select [ALL :content ALL] %)
  data
  )
</pre></div><div id="t1516206467000785" t="2018-01-17 16:27:47 jeremys Thx @nathanmarz I’ll take a look and see what I can come up with."><a href="#t1516206467000785" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-17</span> <span class="t" onclick="H(this)">16:27:47</span>              jeremys </span><span>Thx @nathanmarz I’ll take a look and see what I can come up with.</span></div><div id="t1516276307000124" t="2018-01-18 11:51:47 jose hi, first of all, I&apos;m really enjoying specter and how easy makes many things, but I have a case where I&apos;m thinking that maybe is better to not use specter. I have a map where I want to remove and rename some keys.
e.g. with specter:
 (-&gt;&gt; {:id 1 :data_val 5 :bad nil}
    (s/select-one (s/submap [:id :data_val]))
    (s/transform [s/MAP-KEYS] #(case % :data_val :value %))
 
and without
 (-&gt; {:id 1 :data_val 5 :bad nil}
    (select-keys [:id :data_val])
    (clojure.set/rename-keys {:data_val :value}))
 
what do you think? makes sense to use specter here? Is there a better way to do it with specter?"><a href="#t1516276307000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-18</span> <span class="t" onclick="H(this)">11:51:47</span>                 jose </span><span>hi, first of all, I&apos;m really enjoying specter and how easy makes many things, but I have a case where I&apos;m thinking that maybe is better to not use specter. I have a map where I want to remove and rename some keys.
e.g. with specter:
</span><pre>(-&gt;&gt; {:id 1 :data_val 5 :bad nil}
    (s/select-one (s/submap [:id :data_val]))
    (s/transform [s/MAP-KEYS] #(case % :data_val :value %))
</pre><span>
and without
</span><pre>(-&gt; {:id 1 :data_val 5 :bad nil}
    (select-keys [:id :data_val])
    (clojure.set/rename-keys {:data_val :value}))
</pre><span>
what do you think? makes sense to use specter here? Is there a better way to do it with specter?</span></div><div id="t1516285512000781" t="2018-01-18 14:25:12 souenzzo Almost the same perf
I think that w/o spec is more readable, in this case.
 (time
  (doseq [i (range 1000000)]
    (-&gt;&gt; {:id 1 :data_val 5 :bad nil}
         (s/select-one (s/submap [:id :data_val]))
         (s/transform [s/MAP-KEYS] #(case % :data_val :value %)))))
&quot;Elapsed time: 1031.939844 msecs&quot;
=&gt; nil
(time
  (doseq [i (range 1000000)]
    (-&gt; {:id 1 :data_val 5 :bad nil}
        (select-keys [:id :data_val])
        (clojure.set/rename-keys {:data_val :value}))))
&quot;Elapsed time: 1794.127254 msecs&quot;
"><a href="#t1516285512000781" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-18</span> <span class="t" onclick="H(this)">14:25:12</span>                  souenzzo </span><span>Almost the same perf
I think that w/o spec is more readable, in this case.
</span><pre>(time
  (doseq [i (range 1000000)]
    (-&gt;&gt; {:id 1 :data_val 5 :bad nil}
         (s/select-one (s/submap [:id :data_val]))
         (s/transform [s/MAP-KEYS] #(case % :data_val :value %)))))
&quot;Elapsed time: 1031.939844 msecs&quot;
=&gt; nil
(time
  (doseq [i (range 1000000)]
    (-&gt; {:id 1 :data_val 5 :bad nil}
        (select-keys [:id :data_val])
        (clojure.set/rename-keys {:data_val :value}))))
&quot;Elapsed time: 1794.127254 msecs&quot;
</pre></div><div id="t1516286101000128" t="2018-01-18 14:35:01 souenzzo Mine is a bit faster. And has data/explicit params.
 (let [n 10000000]
  (prn &quot;specter&quot;)
  (time
    (doseq [i (range n)]
      (-&gt;&gt; {:id 1 :data_val 5 :bad nil}
           (s/select-one (s/submap [:id :data_val]))
           (s/transform [s/MAP-KEYS] #(case % :data_val :value %)))))
  (prn &quot;@souenzzo&quot;)
  (time
    (doseq [i (range n)]
      (let [from-&gt;to {:data_val :value
                      :id       :id}]
        (reduce-kv (fn [acc k v]
                     (if (contains? from-&gt;to k)
                       (assoc acc (from-&gt;to k) v)
                       acc)) {} {:id 1 :data_val 5 :bad nil})))))
"><a href="#t1516286101000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-18</span> <span class="t" onclick="H(this)">14:35:01</span>                  souenzzo </span><span>Mine is a bit faster. And has data/explicit params.
</span><pre>(let [n 10000000]
  (prn &quot;specter&quot;)
  (time
    (doseq [i (range n)]
      (-&gt;&gt; {:id 1 :data_val 5 :bad nil}
           (s/select-one (s/submap [:id :data_val]))
           (s/transform [s/MAP-KEYS] #(case % :data_val :value %)))))
  (prn &quot;@souenzzo&quot;)
  (time
    (doseq [i (range n)]
      (let [from-&gt;to {:data_val :value
                      :id       :id}]
        (reduce-kv (fn [acc k v]
                     (if (contains? from-&gt;to k)
                       (assoc acc (from-&gt;to k) v)
                       acc)) {} {:id 1 :data_val 5 :bad nil})))))
</pre></div><div id="t1516310934000047" t="2018-01-18 21:28:54 jose @U2J4FRT2T thanks for your example, didn&apos;t know about reduce-kv"><a href="#t1516310934000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-18</span> <span class="t" onclick="H(this)">21:28:54</span>                      jose </span><span>@U2J4FRT2T thanks for your example, didn&apos;t know about reduce-kv</span></div><div id="t1516378336000402" t="2018-01-19 16:12:16 jeremys Hey guys, I wanted to share how I am finally going about “splicing” some tags in a html tree. I realize I hadn’t properly formulated my problem... Anyway here’s the code:
 (require &apos;[com.rpl.specter :as sp])
(require &apos;[com.rpl.specter.zipper :as spz])
(require &apos;[clojure.zip :as zip])

(def tag-to-unwrap :tag-to-unwrap)
(defn tag-to-unwrap? [t] (= (:tag t) tag-to-unwrap))
(defn tag?-to-unwrap? [t] (and (map? t) (tag-to-unwrap? t)))

(def TAGS-TO-UNWRAP (sp/path [spz/XML-ZIP spz/NEXT-WALK
(sp/selected? [spz/NODE tag?-to-unwrap?])]))

(defn unwrap [zipper]
(let [cs (zip/children zipper)
zipper (reduce zip/insert-right zipper (reverse cs))]
(zip/remove zipper)))

(defn splice-doc [doc]
(sp/transform TAGS-TO-UNWRAP unwrap doc))

(splice-doc
{:tag :body
:content [&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag :div
:content [{:tag tag-to-unwrap :content [&quot;toto in a div&quot;]}]}]})
;=&gt;
{:tag :body, :content [&quot;toto&quot; &quot;titi&quot; &quot;tutu&quot; {:tag :div, :content [&quot;toto in a div&quot;]}]}
"><a href="#t1516378336000402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-19</span> <span class="t" onclick="H(this)">16:12:16</span>              jeremys </span><span>Hey guys, I wanted to share how I am finally going about “splicing” some tags in a html tree. I realize I hadn’t properly formulated my problem... Anyway here’s the code:
</span><pre>(require &apos;[com.rpl.specter :as sp])
(require &apos;[com.rpl.specter.zipper :as spz])
(require &apos;[clojure.zip :as zip])

(def tag-to-unwrap :tag-to-unwrap)
(defn tag-to-unwrap? [t] (= (:tag t) tag-to-unwrap))
(defn tag?-to-unwrap? [t] (and (map? t) (tag-to-unwrap? t)))

(def TAGS-TO-UNWRAP (sp/path [spz/XML-ZIP spz/NEXT-WALK
(sp/selected? [spz/NODE tag?-to-unwrap?])]))

(defn unwrap [zipper]
(let [cs (zip/children zipper)
zipper (reduce zip/insert-right zipper (reverse cs))]
(zip/remove zipper)))

(defn splice-doc [doc]
(sp/transform TAGS-TO-UNWRAP unwrap doc))

(splice-doc
{:tag :body
:content [&quot;toto&quot;
{:tag tag-to-unwrap :content [&quot;titi&quot; &quot;tutu&quot;]}
{:tag :div
:content [{:tag tag-to-unwrap :content [&quot;toto in a div&quot;]}]}]})
;=&gt;
{:tag :body, :content [&quot;toto&quot; &quot;titi&quot; &quot;tutu&quot; {:tag :div, :content [&quot;toto in a div&quot;]}]}
</pre></div><div id="t1516378342000237" t="2018-01-19 16:12:22 jeremys cheers"><a href="#t1516378342000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-19</span> <span class="t" onclick="H(this)">16:12:22</span>              jeremys </span><span>cheers</span></div><div id="t1516830137000144" t="2018-01-24 21:42:17 dadair Given  add-ref  and  parse-tree  in the following snippet, is there a way to combine this pair of transform/traverse into a single traversal (to improve performance by not requiring a multi-pass of a large datastructure?)

 (def NODE
    (sp/recursive-path [] p
                       (sp/continue-then-stay
                        (sp/must :children)
                        sp/MAP-VALS
                        p)))

  (def terminal2
    (sp/richnav [afn]
                (sp/select* [this vals structure next-fn]
                            (throw (Exception. &quot;&apos;terminal2&apos; should only be used in multi-transform&quot;)))
                (sp/transform* [this vals structure next-fn]
                               (afn vals structure))))

  (def nodes-with-refs
    (sp/recursive-path [] p
                       (sp/continue-then-stay
                        (sp/putval :children)
                        (sp/must :children)
                        sp/ALL
                        (sp/collect-one sp/FIRST)
                        sp/LAST
                        p)))

  (defn add-ref [root]
    (sp/multi-transform
     [(sp/putval :root)
      :root
      nodes-with-refs
      :ref
      (terminal2 (fn [vals _] (ref/unparse vals)))]
     root))

  (defn parse-tree [root]
    (reduce
     (fn [result item]
       (if-let [parsed (parse-node item)]
         (conj result parsed)
         result))
     []
     (sp/traverse [:root :children MAP-VALS NODE] root)))

  (-&gt;&gt; test-segment ;; potentially large datastructure with form {:root {:name &quot;root&quot; .. :children {..}}}
       add-ref ;; add path down the tree to each node in the tree, e.g., &quot;/a/b/c&quot; where A, B, C are nodes with names a, b, c
       parse-tree)
"><a href="#t1516830137000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">21:42:17</span>               dadair </span><span>Given </span><code>add-ref</code><span> and </span><code>parse-tree</code><span> in the following snippet, is there a way to combine this pair of transform/traverse into a single traversal (to improve performance by not requiring a multi-pass of a large datastructure?)

</span><pre>(def NODE
    (sp/recursive-path [] p
                       (sp/continue-then-stay
                        (sp/must :children)
                        sp/MAP-VALS
                        p)))

  (def terminal2
    (sp/richnav [afn]
                (sp/select* [this vals structure next-fn]
                            (throw (Exception. &quot;&apos;terminal2&apos; should only be used in multi-transform&quot;)))
                (sp/transform* [this vals structure next-fn]
                               (afn vals structure))))

  (def nodes-with-refs
    (sp/recursive-path [] p
                       (sp/continue-then-stay
                        (sp/putval :children)
                        (sp/must :children)
                        sp/ALL
                        (sp/collect-one sp/FIRST)
                        sp/LAST
                        p)))

  (defn add-ref [root]
    (sp/multi-transform
     [(sp/putval :root)
      :root
      nodes-with-refs
      :ref
      (terminal2 (fn [vals _] (ref/unparse vals)))]
     root))

  (defn parse-tree [root]
    (reduce
     (fn [result item]
       (if-let [parsed (parse-node item)]
         (conj result parsed)
         result))
     []
     (sp/traverse [:root :children MAP-VALS NODE] root)))

  (-&gt;&gt; test-segment ;; potentially large datastructure with form {:root {:name &quot;root&quot; .. :children {..}}}
       add-ref ;; add path down the tree to each node in the tree, e.g., &quot;/a/b/c&quot; where A, B, C are nodes with names a, b, c
       parse-tree)
</pre></div><div id="t1516830373000644" t="2018-01-24 21:46:13 nathanmarz @dadair can you just collect the path in  parse-tree ?"><a href="#t1516830373000644" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">21:46:13</span>           nathanmarz </span><span>@dadair can you just collect the path in </span><code>parse-tree</code><span>?</span></div><div id="t1516830422000036" t="2018-01-24 21:47:02 nathanmarz besides that, the latest release adds  vtransform  which eliminate the need for you to do  multi-transform  with custom  terminal2"><a href="#t1516830422000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">21:47:02</span>           nathanmarz </span><span>besides that, the latest release adds </span><code>vtransform</code><span> which eliminate the need for you to do </span><code>multi-transform</code><span> with custom </span><code>terminal2</code></div><div id="t1516830497000573" t="2018-01-24 21:48:17 nathanmarz you might benefit here from a new  vselect  which navigates to  [collected-vals navigated-value]"><a href="#t1516830497000573" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">21:48:17</span>           nathanmarz </span><span>you might benefit here from a new </span><code>vselect</code><span> which navigates to </span><code>[collected-vals navigated-value]</code></div><div id="t1516831538000535" t="2018-01-24 22:05:38 dadair Thanks for pointing out  vtransform , cleans up the code! I’m not quite sure how I would go about collecting the path in parse-tree, and passing those collected values into the reducing function."><a href="#t1516831538000535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">22:05:38</span>               dadair </span><span>Thanks for pointing out </span><code>vtransform</code><span>, cleans up the code! I’m not quite sure how I would go about collecting the path in parse-tree, and passing those collected values into the reducing function.</span></div><div id="t1516831682000415" t="2018-01-24 22:08:02 dadair hmm, are you suggesting that I could change the  sp/traverse  call to a  vselect , and then  item  in the reduce would be  [collected navigated] ?"><a href="#t1516831682000415" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-24</span> <span class="t" onclick="H(this)">22:08:02</span>               dadair </span><span>hmm, are you suggesting that I could change the </span><code>sp/traverse</code><span> call to a </span><code>vselect</code><span>, and then </span><code>item</code><span> in the reduce would be </span><code>[collected navigated]</code><span>?</span></div><div id="t1516842391000053" t="2018-01-25 01:06:31 nathanmarz @dadair yes, that&apos;s right"><a href="#t1516842391000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">01:06:31</span>           nathanmarz </span><span>@dadair yes, that&apos;s right</span></div><div id="t1516842441000155" t="2018-01-25 01:07:21 nathanmarz would add a  vtraverse  as well"><a href="#t1516842441000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">01:07:21</span>           nathanmarz </span><span>would add a </span><code>vtraverse</code><span> as well</span></div><div id="t1516842447000228" t="2018-01-25 01:07:27 nathanmarz will probably do those for next release"><a href="#t1516842447000228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">01:07:27</span>           nathanmarz </span><span>will probably do those for next release</span></div><div id="t1516842512000247" t="2018-01-25 01:08:32 nathanmarz but for now you can collect the path just like you&apos;re doing in  nodes-with-refs  and then parse it out of  item  when doing the  traverse"><a href="#t1516842512000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">01:08:32</span>           nathanmarz </span><span>but for now you can collect the path just like you&apos;re doing in </span><code>nodes-with-refs</code><span> and then parse it out of </span><code>item</code><span> when doing the </span><code>traverse</code></div><div id="t1516843780000179" t="2018-01-25 01:29:40 dadair Ok thank you I’ll give that a try"><a href="#t1516843780000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">01:29:40</span>               dadair </span><span>Ok thank you I’ll give that a try</span></div><div id="t1516923359000212" t="2018-01-25 23:35:59 schmee is there a more specter-y way to write  (view (juxt :color :symbol)) ?"><a href="#t1516923359000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">23:35:59</span>               schmee </span><span>is there a more specter-y way to write </span><code>(view (juxt :color :symbol))</code><span>?</span></div><div id="t1516923789000155" t="2018-01-25 23:43:09 nathanmarz @schmee looks good to me"><a href="#t1516923789000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">23:43:09</span>           nathanmarz </span><span>@schmee looks good to me</span></div><div id="t1516924198000269" t="2018-01-25 23:49:58 schmee is there something I can use in place of ??? to make this true?
 user=&gt; stuff
[{:color :red :symbol :moon} {:color :green :symbol :gear} {:color :yellow :symbol :star} {:color :blue :symbol :planet}]
user=&gt; (= (select (??? :color :symbol) stuff) [[:red :green :yellow :blue] [:moon :gear :star :planet]])
"><a href="#t1516924198000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">23:49:58</span>               schmee </span><span>is there something I can use in place of ??? to make this true?
</span><pre>user=&gt; stuff
[{:color :red :symbol :moon} {:color :green :symbol :gear} {:color :yellow :symbol :star} {:color :blue :symbol :planet}]
user=&gt; (= (select (??? :color :symbol) stuff) [[:red :green :yellow :blue] [:moon :gear :star :planet]])
</pre></div><div id="t1516924251000174" t="2018-01-25 23:50:51 schmee feels like a  multi-select"><a href="#t1516924251000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-25</span> <span class="t" onclick="H(this)">23:50:51</span>               schmee </span><span>feels like a </span><code>multi-select</code></div><div id="t1516926773000286" t="2018-01-26 00:32:53 nathanmarz well, this will do it but it&apos;s better to just do it as two selects  (select (multi-path (subselect ALL :color) (subselect ALL :symbol)) stuff)"><a href="#t1516926773000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span> <span class="t" onclick="H(this)">00:32:53</span>           nathanmarz </span><span>well, this will do it but it&apos;s better to just do it as two selects </span><code>(select (multi-path (subselect ALL :color) (subselect ALL :symbol)) stuff)</code></div><div id="t1517409170000367" t="2018-01-31 14:32:50 cperrone Hi Nathan and all, I posted the problem in the #beginner channel, but someone suggested that I ask here. (I actually played with specter a bit (love it) but this is well beyond my current abilities).
At its simplest level, let’s say I have a ‘dumb’ container component, e.g.:
 (defn my-component [content]
[:div content]) 
… and a (possibly arbitrarily nested) tree structure, e.g.
 (def tree [[&quot;a&quot; [&quot;b&quot; &quot;c&quot; &quot;d&quot;]] &quot;e&quot;])  
What approach would you use to walk the tree, plug-in the component and its content to return something like this?
 (def result [:div
             [:div &quot;a&quot;
              [:div &quot;b&quot;]
              [:div &quot;c&quot;]
              [:div &quot;d&quot;]]
             [:div &quot;e&quot;]]) 
(My naive implementation has the component recursively calling itself on the children, which I really don’t want.)
Thanks so much in advance!"><a href="#t1517409170000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:32:50</span>             cperrone </span><span>Hi Nathan and all, I posted the problem in the #beginner channel, but someone suggested that I ask here. (I actually played with specter a bit (love it) but this is well beyond my current abilities).
At its simplest level, let’s say I have a ‘dumb’ container component, e.g.:
</span><pre>(defn my-component [content]
[:div content])</pre><span>
… and a (possibly arbitrarily nested) tree structure, e.g.
</span><pre>(def tree [[&quot;a&quot; [&quot;b&quot; &quot;c&quot; &quot;d&quot;]] &quot;e&quot;])</pre><span> 
What approach would you use to walk the tree, plug-in the component and its content to return something like this?
</span><pre>(def result [:div
             [:div &quot;a&quot;
              [:div &quot;b&quot;]
              [:div &quot;c&quot;]
              [:div &quot;d&quot;]]
             [:div &quot;e&quot;]])</pre><span>
(My naive implementation has the component recursively calling itself on the children, which I really don’t want.)
Thanks so much in advance!</span></div><div id="t1517409598000381" t="2018-01-31 14:39:58 nathanmarz @cperrone what exactly are the rules you want to follow for the transformation?"><a href="#t1517409598000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:39:58</span>           nathanmarz </span><span>@cperrone what exactly are the rules you want to follow for the transformation?</span></div><div id="t1517409639000706" t="2018-01-31 14:40:39 nathanmarz looks like you wrap leaf values in  :div , except for the case of  &quot;a&quot;"><a href="#t1517409639000706" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:40:39</span>           nathanmarz </span><span>looks like you wrap leaf values in </span><code>:div</code><span>, except for the case of </span><code>&quot;a&quot;</code></div><div id="t1517409645000322" t="2018-01-31 14:40:45 nathanmarz which wraps it and the children"><a href="#t1517409645000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:40:45</span>           nathanmarz </span><span>which wraps it and the children</span></div><div id="t1517409651000042" t="2018-01-31 14:40:51 nathanmarz but  &quot;b&quot;  doesn&apos;t follow that same rule"><a href="#t1517409651000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:40:51</span>           nathanmarz </span><span>but </span><code>&quot;b&quot;</code><span> doesn&apos;t follow that same rule</span></div><div id="t1517409870000694" t="2018-01-31 14:44:30 cperrone Let me think. In this case, a contains b c d (which are siblings), e is at the same level of a"><a href="#t1517409870000694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:44:30</span>             cperrone </span><span>Let me think. In this case, a contains b c d (which are siblings), e is at the same level of a</span></div><div id="t1517410391000439" t="2018-01-31 14:53:11 cperrone So the rule (I think) is the same. my-component should be able to “render” its content recursively. An input map with nested :children vector may work as well, if it makes it easier. The crux of the problem is that the container wraps arbitrary content (which may include child containers)."><a href="#t1517410391000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">14:53:11</span>             cperrone </span><span>So the rule (I think) is the same. my-component should be able to “render” its content recursively. An input map with nested :children vector may work as well, if it makes it easier. The crux of the problem is that the container wraps arbitrary content (which may include child containers).</span></div><div id="t1517411075000605" t="2018-01-31 15:04:35 nathanmarz @cperrone this is pretty close to what you want:
 (defn my-component [node]
  `[:div ~(:val node) "><a href="#t1517411075000605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">15:04:35</span>           nathanmarz </span><span>@cperrone this is pretty close to what you want:
</span><pre>(defn my-component [node]
  `[:div ~(:val node) </pre></div><div id="t1517411160000685" t="2018-01-31 15:06:00 cperrone oh man, thank you so much. My kid just arrived, so I need to take a break, but I’ll definitely play with it later on."><a href="#t1517411160000685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">15:06:00</span>             cperrone </span><span>oh man, thank you so much. My kid just arrived, so I need to take a break, but I’ll definitely play with it later on.</span></div><div id="t1517411166000436" t="2018-01-31 15:06:06 nathanmarz sure thing"><a href="#t1517411166000436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">15:06:06</span>           nathanmarz </span><span>sure thing</span></div><div id="t1517411198000214" t="2018-01-31 15:06:38 nathanmarz the key is to have a consistent and regular structure to your data"><a href="#t1517411198000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">15:06:38</span>           nathanmarz </span><span>the key is to have a consistent and regular structure to your data</span></div><div id="t1517411292000465" t="2018-01-31 15:08:12 cperrone yes, indeed. I love how declarative specter is by the way. It’s easy to see what’s going on. Ok, gotta go, but thank you again!"><a href="#t1517411292000465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-31</span> <span class="t" onclick="H(this)">15:08:12</span>             cperrone </span><span>yes, indeed. I love how declarative specter is by the way. It’s easy to see what’s going on. Ok, gotta go, but thank you again!</span></div><div id="t1517703611000020" t="2018-02-04 00:20:11 justinlee I use specter to manipulate my state object in the front end.  I’m curious: is there a way to apply multiple specter transformations to an atom atomically?  If I were doing this with the normal  swap!  function I’d just wrap all the transformations in a  fn .  But I’m not sure how to do that with specter.  (I’m asking because I’m worried that applying multiple specter transformations to a reagent atom might cause me grief, given that components get re-rendered in response to updates.  So far, I’m not 100% this is a real problem, because I think reagent batches updates, but I’m still curious.)"><a href="#t1517703611000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:20:11</span>            justinlee </span><span>I use specter to manipulate my state object in the front end.  I’m curious: is there a way to apply multiple specter transformations to an atom atomically?  If I were doing this with the normal </span><code>swap!</code><span> function I’d just wrap all the transformations in a </span><code>fn</code><span>.  But I’m not sure how to do that with specter.  (I’m asking because I’m worried that applying multiple specter transformations to a reagent atom might cause me grief, given that components get re-rendered in response to updates.  So far, I’m not 100% this is a real problem, because I think reagent batches updates, but I’m still curious.)</span></div><div id="t1517704135000059" t="2018-02-04 00:28:55 nathanmarz @lee.justin.m yes you can use  multi-transform  for that"><a href="#t1517704135000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:28:55</span>           nathanmarz </span><span>@lee.justin.m yes you can use </span><code>multi-transform</code><span> for that</span></div><div id="t1517704170000044" t="2018-02-04 00:29:30 nathanmarz e.g.  (multi-transform [ATOM (multi-path [:a (terminal inc)] [:b (terminal dec)])] state-object)"><a href="#t1517704170000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:29:30</span>           nathanmarz </span><span>e.g. </span><code>(multi-transform [ATOM (multi-path [:a (terminal inc)] [:b (terminal dec)])] state-object)</code></div><div id="t1517704186000068" t="2018-02-04 00:29:46 justinlee @nathanmarz super thanks!"><a href="#t1517704186000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:29:46</span>            justinlee </span><span>@nathanmarz super thanks!</span></div><div id="t1517704271000084" t="2018-02-04 00:31:11 justinlee oh i hadn’t seen this list-of-macros page.  there are all kinds of goodies here."><a href="#t1517704271000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:31:11</span>            justinlee </span><span>oh i hadn’t seen this list-of-macros page.  there are all kinds of goodies here.</span></div><div id="t1517704548000053" t="2018-02-04 00:35:48 nathanmarz definitely worth skimming through the wiki"><a href="#t1517704548000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:35:48</span>           nathanmarz </span><span>definitely worth skimming through the wiki</span></div><div id="t1517704552000088" t="2018-02-04 00:35:52 nathanmarz it&apos;s mostly up to date nowadays"><a href="#t1517704552000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">00:35:52</span>           nathanmarz </span><span>it&apos;s mostly up to date nowadays</span></div><div id="t1517775803000151" t="2018-02-04 20:23:23 justinlee @nathanmarz Just following up on the example you just used in #clojure, could you explain this:  (def data 
  {:a [:x :y]
   :b [:x :y]})
(select [ALL (collect-one FIRST) LAST] data)
;; -&gt; [[:a [:x :y]] [:b [:x :y]]]

;; The next statement will distribute the :a and :b
(select [ALL (collect-one FIRST) LAST ALL] data)
;; -≥ [[:a :x] [:a :y] [:b :x] [:b :y]]

;; But this, which applies the same selector to the intermediate result, does not
(select [ALL] [[:a [:x :y]] [:b [:x :y]]])
;; -&gt; [[:a [:x :y]] [:b [:x :y]]]
"><a href="#t1517775803000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:23:23</span>            justinlee </span><span>@nathanmarz Just following up on the example you just used in #clojure, could you explain this: </span><pre>(def data 
  {:a [:x :y]
   :b [:x :y]})
(select [ALL (collect-one FIRST) LAST] data)
;; -&gt; [[:a [:x :y]] [:b [:x :y]]]

;; The next statement will distribute the :a and :b
(select [ALL (collect-one FIRST) LAST ALL] data)
;; -≥ [[:a :x] [:a :y] [:b :x] [:b :y]]

;; But this, which applies the same selector to the intermediate result, does not
(select [ALL] [[:a [:x :y]] [:b [:x :y]]])
;; -&gt; [[:a [:x :y]] [:b [:x :y]]]
</pre></div><div id="t1517776160000063" t="2018-02-04 20:29:20 schmee @justinlee collecting variables is a special thing, search for “collect” in the readme for an explanation:  https://github.com/nathanmarz/specter"><a href="#t1517776160000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:29:20</span>               schmee </span><span>@justinlee collecting variables is a special thing, search for “collect” in the readme for an explanation: </span><a href="https://github.com/nathanmarz/specter" target="_blank">https://github.com/nathanmarz/specter</a></div><div id="t1517776318000114" t="2018-02-04 20:31:58 justinlee @schmee thanks yea i read that and the docs for  collect  and  collect-one  but i can’t for the life of me figure out how they alter the  ALL  selector in the context of a  select"><a href="#t1517776318000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:31:58</span>            justinlee </span><span>@schmee thanks yea i read that and the docs for </span><code>collect</code><span> and </span><code>collect-one</code><span> but i can’t for the life of me figure out how they alter the </span><code>ALL</code><span> selector in the context of a </span><code>select</code></div><div id="t1517776375000114" t="2018-02-04 20:32:55 justinlee there is some reference to adding a value to the ‘collected values’ but I haven’t seen how the collected values are used in selectors like  ALL  (though I understand how they are used in the  transform  example when you need an argument to the transforming function"><a href="#t1517776375000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:32:55</span>            justinlee </span><span>there is some reference to adding a value to the ‘collected values’ but I haven’t seen how the collected values are used in selectors like </span><code>ALL</code><span> (though I understand how they are used in the </span><code>transform</code><span> example when you need an argument to the transforming function</span></div><div id="t1517776470000093" t="2018-02-04 20:34:30 schmee user=&gt; (select [ALL (collect-one FIRST) LAST] data)
[[:a [:x :y]] [:b [:x :y]]]
user=&gt; (select [ALL (collect-one FIRST) (collect-one FIRST) LAST] data)
[[:a :a [:x :y]] [:b :b [:x :y]]]
"><a href="#t1517776470000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:34:30</span>               schmee </span><pre>user=&gt; (select [ALL (collect-one FIRST) LAST] data)
[[:a [:x :y]] [:b [:x :y]]]
user=&gt; (select [ALL (collect-one FIRST) (collect-one FIRST) LAST] data)
[[:a :a [:x :y]] [:b :b [:x :y]]]
</pre></div><div id="t1517776495000039" t="2018-02-04 20:34:55 schmee looks to me like  select  just calls  vector  on the collected arguments + the value(s) you’ve navigated to"><a href="#t1517776495000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:34:55</span>               schmee </span><span>looks to me like </span><code>select</code><span> just calls </span><code>vector</code><span> on the collected arguments + the value(s) you’ve navigated to</span></div><div id="t1517776763000052" t="2018-02-04 20:39:23 justinlee Yea I guess that’s it.  I’m not sure why it does that.   🙂    com.rpl.specter=&gt; (select [(putval &quot;a&quot;) ALL] [1 2 3])
[[&quot;a&quot; 1] [&quot;a&quot; 2] [&quot;a&quot; 3]]
com.rpl.specter=&gt; (select [(putval &quot;a&quot;) FIRST] [1 2 3])
[[&quot;a&quot; 1]]
com.rpl.specter=&gt; (select [(putval &quot;a&quot;) (putval &quot;b&quot;) ALL] [1 2 3])
[[&quot;a&quot; &quot;b&quot; 1] [&quot;a&quot; &quot;b&quot; 2] [&quot;a&quot; &quot;b&quot; 3]]"><a href="#t1517776763000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">20:39:23</span>            justinlee </span><span>Yea I guess that’s it.  I’m not sure why it does that.  </span><b>🙂</b><span>  </span><pre>com.rpl.specter=&gt; (select [(putval &quot;a&quot;) ALL] [1 2 3])
[[&quot;a&quot; 1] [&quot;a&quot; 2] [&quot;a&quot; 3]]
com.rpl.specter=&gt; (select [(putval &quot;a&quot;) FIRST] [1 2 3])
[[&quot;a&quot; 1]]
com.rpl.specter=&gt; (select [(putval &quot;a&quot;) (putval &quot;b&quot;) ALL] [1 2 3])
[[&quot;a&quot; &quot;b&quot; 1] [&quot;a&quot; &quot;b&quot; 2] [&quot;a&quot; &quot;b&quot; 3]]</pre></div><div id="t1517778849000073" t="2018-02-04 21:14:09 nathanmarz @lee.justin.m this is the code that creates that behavior:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L294"><a href="#t1517778849000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">21:14:09</span>           nathanmarz </span><span>@lee.justin.m this is the code that creates that behavior: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L294" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L294</a></div><div id="t1517778903000038" t="2018-02-04 21:15:03 justinlee got it thanks.  that makes sense."><a href="#t1517778903000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-04</span> <span class="t" onclick="H(this)">21:15:03</span>            justinlee </span><span>got it thanks.  that makes sense.</span></div><div id="t1517853354000829" t="2018-02-05 17:55:54 phreed Which macro provides the ability to select nodes from a tree whose subpath matches a pattern?
e.g. Given 
(def foo {&quot;a1&quot; {:z :c1, :d &quot;e1&quot;}
               &quot;a2&quot; {:z :c2, :d &quot;e2&quot;}}) 
(select [ALL (magic [VAL :z :c1])] foo)
&gt; {&quot;a1&quot; {:z :c1, :d &quot;e1&quot;} }
What is the magic macro?
Should I be using transform instead of select?"><a href="#t1517853354000829" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">17:55:54</span>               phreed </span><span>Which macro provides the ability to select nodes from a tree whose subpath matches a pattern?
e.g. Given 
(def foo {&quot;a1&quot; {:z :c1, :d &quot;e1&quot;}
               &quot;a2&quot; {:z :c2, :d &quot;e2&quot;}}) 
(select [ALL (magic [VAL :z :c1])] foo)
&gt; {&quot;a1&quot; {:z :c1, :d &quot;e1&quot;} }
What is the magic macro?
Should I be using transform instead of select?</span></div><div id="t1517854159000150" t="2018-02-05 18:09:19 nathanmarz @phreed you&apos;re looking to filter submaps that don&apos;t contain a key-value pair  [:z :c1] ?"><a href="#t1517854159000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:09:19</span>           nathanmarz </span><span>@phreed you&apos;re looking to filter submaps that don&apos;t contain a key-value pair </span><code>[:z :c1]</code><span>?</span></div><div id="t1517854386000026" t="2018-02-05 18:13:06 phreed @nathanmarz yes, I think that is right."><a href="#t1517854386000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:13:06</span>               phreed </span><span>@nathanmarz yes, I think that is right.</span></div><div id="t1517854400000416" t="2018-02-05 18:13:20 nathanmarz the basic pattern for that is  (setval &lt;path&gt; NONE data)"><a href="#t1517854400000416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:13:20</span>           nathanmarz </span><span>the basic pattern for that is </span><code>(setval &lt;path&gt; NONE data)</code></div><div id="t1517854406000319" t="2018-02-05 18:13:26 nathanmarz in this case  (setval [MAP-VALS (not-selected? :z (pred= :c1))] NONE foo)"><a href="#t1517854406000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:13:26</span>           nathanmarz </span><span>in this case </span><code>(setval [MAP-VALS (not-selected? :z (pred= :c1))] NONE foo)</code></div><div id="t1517854430000285" t="2018-02-05 18:13:50 phreed yes, pruning the tree with setval does the trick."><a href="#t1517854430000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:13:50</span>               phreed </span><span>yes, pruning the tree with setval does the trick.</span></div><div id="t1517856652000675" t="2018-02-05 18:50:52 phreed I am looking at the documentation for  not-selected?  it appears to take only one argument, a path. What is going on here  (not-selected? :z (pred= :c1))  that looks like two arguments. Is it equivalent to  (not-selected? [:z (pred= :c1)])  ?"><a href="#t1517856652000675" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:50:52</span>               phreed </span><span>I am looking at the documentation for </span><code>not-selected?</code><span> it appears to take only one argument, a path. What is going on here </span><code>(not-selected? :z (pred= :c1))</code><span> that looks like two arguments. Is it equivalent to </span><code>(not-selected? [:z (pred= :c1)])</code><span> ?</span></div><div id="t1517857094000500" t="2018-02-05 18:58:14 nathanmarz @phreed yes, those are equivalent"><a href="#t1517857094000500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:58:14</span>           nathanmarz </span><span>@phreed yes, those are equivalent</span></div><div id="t1517857118000367" t="2018-02-05 18:58:38 nathanmarz similarly the path  [:a :b :c]  is the same as  [[:a] [[:b]] :c]"><a href="#t1517857118000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:58:38</span>           nathanmarz </span><span>similarly the path </span><code>[:a :b :c]</code><span> is the same as </span><code>[[:a] [[:b]] :c]</code></div><div id="t1517857178000029" t="2018-02-05 18:59:38 nathanmarz a path is just a composition of navigators"><a href="#t1517857178000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">18:59:38</span>           nathanmarz </span><span>a path is just a composition of navigators</span></div><div id="t1517857201000566" t="2018-02-05 19:00:01 nathanmarz a vector in a path is interpreted as a path"><a href="#t1517857201000566" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-05</span> <span class="t" onclick="H(this)">19:00:01</span>           nathanmarz </span><span>a vector in a path is interpreted as a path</span></div><div id="t1517933559000545" t="2018-02-06 16:12:39 jamescroft Hi, I have a nested data structure like in the snippet above.  I can select all the nodes of a specified type, but I’m having trouble updating them.  I want the index of the node I am updating within the transform function.  Any pointers on how to do this?  Thanks"><a href="#t1517933559000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:12:39</span>           jamescroft </span><span>Hi, I have a nested data structure like in the snippet above.  I can select all the nodes of a specified type, but I’m having trouble updating them.  I want the index of the node I am updating within the transform function.  Any pointers on how to do this?  Thanks</span></div><div id="t1517934833000079" t="2018-02-06 16:33:53 nathanmarz @jamescroft you can do that with  subselect  and a slightly modified  NODES"><a href="#t1517934833000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:33:53</span>           nathanmarz </span><span>@jamescroft you can do that with </span><code>subselect</code><span> and a slightly modified </span><code>NODES</code></div><div id="t1517934835000508" t="2018-02-06 16:33:55 nathanmarz (def NODES (recursive-path [] p (stay-then-continue (must :nodes) ALL p)))
(transform [(subselect NODES #(= &quot;a&quot; (:type %)) :index) (view count)] range data)
"><a href="#t1517934835000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:33:55</span>           nathanmarz </span><pre>(def NODES (recursive-path [] p (stay-then-continue (must :nodes) ALL p)))
(transform [(subselect NODES #(= &quot;a&quot; (:type %)) :index) (view count)] range data)
</pre></div><div id="t1517935296000553" t="2018-02-06 16:41:36 jamescroft @nathanmarz great thanks! I wouldn’t have got there on my own!"><a href="#t1517935296000553" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:41:36</span>           jamescroft </span><span>@nathanmarz great thanks! I wouldn’t have got there on my own!</span></div><div id="t1517935501000119" t="2018-02-06 16:45:01 nathanmarz sure thing"><a href="#t1517935501000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:45:01</span>           nathanmarz </span><span>sure thing</span></div><div id="t1517935524000027" t="2018-02-06 16:45:24 nathanmarz I highly recommend skimming through  https://github.com/nathanmarz/specter/wiki/List-of-Navigators  to learn what&apos;s available"><a href="#t1517935524000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-06</span> <span class="t" onclick="H(this)">16:45:24</span>           nathanmarz </span><span>I highly recommend skimming through </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators</a><span> to learn what&apos;s available</span></div><div id="t1518531331000371" t="2018-02-13 14:15:31 nathanmarz Handy cheat sheet contributed by @djebbz  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet"><a href="#t1518531331000371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">14:15:31</span>           nathanmarz </span><span>Handy cheat sheet contributed by @djebbz </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a></div><div id="t1518562261000519" t="2018-02-13 22:51:01 johanatan hi, if i&apos;m  transform  over  [specter/MAP-VALS :some-key]  and inside my transform i want/need to access the KEY-VAL corresponding to the particular MAP-VAL that i&apos;m in, is that possible? or do these cases always degenerate into a case of  [specter/ALL]  with drilling down required inside the transform-fn"><a href="#t1518562261000519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">22:51:01</span>            johanatan </span><span>hi, if i&apos;m </span><code>transform</code><span> over </span><code>[specter/MAP-VALS :some-key]</code><span> and inside my transform i want/need to access the KEY-VAL corresponding to the particular MAP-VAL that i&apos;m in, is that possible? or do these cases always degenerate into a case of </span><code>[specter/ALL]</code><span> with drilling down required inside the transform-fn</span></div><div id="t1518564602000318" t="2018-02-13 23:30:02 nathanmarz @johanatan accessing the key while transforming a map val is expressed as  (transform [ALL (collect-one FIRST) LAST] ...)"><a href="#t1518564602000318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">23:30:02</span>           nathanmarz </span><span>@johanatan accessing the key while transforming a map val is expressed as </span><code>(transform [ALL (collect-one FIRST) LAST] ...)</code></div><div id="t1518564628000063" t="2018-02-13 23:30:28 johanatan ah, nice. what would be the signature be for capturing the key and the value?"><a href="#t1518564628000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">23:30:28</span>            johanatan </span><span>ah, nice. what would be the signature be for capturing the key and the value?</span></div><div id="t1518564635000277" t="2018-02-13 23:30:35 johanatan just  [[k v]]  ?"><a href="#t1518564635000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">23:30:35</span>            johanatan </span><span>just </span><code>[[k v]]</code><span> ?</span></div><div id="t1518564666000085" t="2018-02-13 23:31:06 johanatan [the transform-fn signature that is]"><a href="#t1518564666000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">23:31:06</span>            johanatan </span><span>[the transform-fn signature that is]</span></div><div id="t1518564736000424" t="2018-02-13 23:32:16 johanatan and also can you have additional filters (such as the kwd in my example) after the  LAST  ?"><a href="#t1518564736000424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-13</span> <span class="t" onclick="H(this)">23:32:16</span>            johanatan </span><span>and also can you have additional filters (such as the kwd in my example) after the </span><code>LAST</code><span> ?</span></div><div id="t1518567459000243" t="2018-02-14 00:17:39 nathanmarz @johanatan of course, navigators are infinitely composable"><a href="#t1518567459000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">00:17:39</span>           nathanmarz </span><span>@johanatan of course, navigators are infinitely composable</span></div><div id="t1518567491000255" t="2018-02-14 00:18:11 nathanmarz will be easier to show you the most elegant approach if you give an example of the input and desired output"><a href="#t1518567491000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">00:18:11</span>           nathanmarz </span><span>will be easier to show you the most elegant approach if you give an example of the input and desired output</span></div><div id="t1518612369000227" t="2018-02-14 12:46:09 cperrone Hi @nathanmarz and all,  I’m beginning to use Specter everywhere  🙂 . I’m still struggling with some admittedly basic recursion/tree transformation though. For example, here’s my input:
 (def tree [0
                 [1]
                 [2 [3]]])
 
The tree is arbitrarily nested, each node is a vector of type  [root &amp; children]  (e.g. [0] is the tree root, [1] and [2] its immediate children, [1] and [2] are siblings). My goal is to transform the tree into the following structure. In other words, each node under the root becomes an :li item. Also if a node has children, I’d like to “wrap” them with a :ul container. It should be simple, but I can’t get my head around it yet. But maybe you can help me on this one?
 [:ul
       [:li {:id &quot;1&quot;}]
       [:li {:id &quot;2&quot;}
        [:ul
         [:li {:id &quot;3&quot;}]]]]"><a href="#t1518612369000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">12:46:09</span>             cperrone </span><span>Hi @nathanmarz and all,  I’m beginning to use Specter everywhere </span><b>🙂</b><span>. I’m still struggling with some admittedly basic recursion/tree transformation though. For example, here’s my input:
</span><pre>(def tree [0
                 [1]
                 [2 [3]]])
</pre><span>
The tree is arbitrarily nested, each node is a vector of type </span><pre>[root &amp; children]</pre><span> (e.g. [0] is the tree root, [1] and [2] its immediate children, [1] and [2] are siblings). My goal is to transform the tree into the following structure. In other words, each node under the root becomes an :li item. Also if a node has children, I’d like to “wrap” them with a :ul container. It should be simple, but I can’t get my head around it yet. But maybe you can help me on this one?
</span><pre>[:ul
       [:li {:id &quot;1&quot;}]
       [:li {:id &quot;2&quot;}
        [:ul
         [:li {:id &quot;3&quot;}]]]]</pre></div><div id="t1518617629000521" t="2018-02-14 14:13:49 nathanmarz @cperrone here&apos;s one way to do it:
 (def tree [0
            [1]
            [2 [3]]])

(def NODE-CHILDREN
  (path INDEXED-VALS #(not= 0 (first %)) LAST))

(def NODES (recursive-path [] p
             (continue-then-stay
              NODE-CHILDREN
              p)))

(defn wrap [children id _]
  (if (empty? children)
    [:li {:id id}]
    [:li {:id id} (setval BEFORE-ELEM :ul children)]
    )
  )

(nth
  (transform
    [NODES
     (collect NODE-CHILDREN)
     (collect-one FIRST)
     ]
    wrap
    tree
    )
  2)
"><a href="#t1518617629000521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">14:13:49</span>           nathanmarz </span><span>@cperrone here&apos;s one way to do it:
</span><pre>(def tree [0
            [1]
            [2 [3]]])

(def NODE-CHILDREN
  (path INDEXED-VALS #(not= 0 (first %)) LAST))

(def NODES (recursive-path [] p
             (continue-then-stay
              NODE-CHILDREN
              p)))

(defn wrap [children id _]
  (if (empty? children)
    [:li {:id id}]
    [:li {:id id} (setval BEFORE-ELEM :ul children)]
    )
  )

(nth
  (transform
    [NODES
     (collect NODE-CHILDREN)
     (collect-one FIRST)
     ]
    wrap
    tree
    )
  2)
</pre></div><div id="t1518619365000100" t="2018-02-14 14:42:45 cperrone ah brilliant, thank you @nathanmarz. I much appreciate it. I suspected I needed to collect values along the way, but I wasn’t sure how (I need to play more with that). Great answer. Would this be more typical of a zipper use, by the way? At some stage I wondered if walking with   (defn my-zipper [v]
  (z/zipper next rest my-make-node v))  (obviously then wrapped by the specter zipper :D) would have been easier for this case."><a href="#t1518619365000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">14:42:45</span>             cperrone </span><span>ah brilliant, thank you @nathanmarz. I much appreciate it. I suspected I needed to collect values along the way, but I wasn’t sure how (I need to play more with that). Great answer. Would this be more typical of a zipper use, by the way? At some stage I wondered if walking with  </span><pre>(defn my-zipper [v]
  (z/zipper next rest my-make-node v))</pre><span> (obviously then wrapped by the specter zipper :D) would have been easier for this case.</span></div><div id="t1518621727000466" t="2018-02-14 15:22:07 nathanmarz @cperrone zippers aren&apos;t needed in this case"><a href="#t1518621727000466" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:22:07</span>           nathanmarz </span><span>@cperrone zippers aren&apos;t needed in this case</span></div><div id="t1518621757000438" t="2018-02-14 15:22:37 nathanmarz it&apos;s best to avoid using zippers since they add a lot of overhead"><a href="#t1518621757000438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:22:37</span>           nathanmarz </span><span>it&apos;s best to avoid using zippers since they add a lot of overhead</span></div><div id="t1518621869000029" t="2018-02-14 15:24:29 cperrone I’m still studying your approach to the problem, in particular, I was surprised by the setval within the transform fn"><a href="#t1518621869000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:24:29</span>             cperrone </span><span>I’m still studying your approach to the problem, in particular, I was surprised by the setval within the transform fn</span></div><div id="t1518622046000359" t="2018-02-14 15:27:26 nathanmarz your use case does two things: wrap in  :li  and wrap in  :ul"><a href="#t1518622046000359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:27:26</span>           nathanmarz </span><span>your use case does two things: wrap in </span><code>:li</code><span> and wrap in </span><code>:ul</code></div><div id="t1518622076000896" t="2018-02-14 15:27:56 nathanmarz the inner setval prepends to a vector without changing the type (as  cons  would do)"><a href="#t1518622076000896" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:27:56</span>           nathanmarz </span><span>the inner setval prepends to a vector without changing the type (as </span><code>cons</code><span> would do)</span></div><div id="t1518622216000470" t="2018-02-14 15:30:16 cperrone yes. I guess I also need to check the result of the overall transform “before” you take the nth index."><a href="#t1518622216000470" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:30:16</span>             cperrone </span><span>yes. I guess I also need to check the result of the overall transform “before” you take the nth index.</span></div><div id="t1518622269000431" t="2018-02-14 15:31:09 nathanmarz yea, the handling of the root is special with how you laid out the problem"><a href="#t1518622269000431" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:31:09</span>           nathanmarz </span><span>yea, the handling of the root is special with how you laid out the problem</span></div><div id="t1518622436000452" t="2018-02-14 15:33:56 cperrone yes, maybe some slight tweaking on the input could help (as it’s often the case)"><a href="#t1518622436000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:33:56</span>             cperrone </span><span>yes, maybe some slight tweaking on the input could help (as it’s often the case)</span></div><div id="t1518622493000582" t="2018-02-14 15:34:53 nathanmarz if you have the control, then making the structure of the data as consistent as possible helps a lot"><a href="#t1518622493000582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:34:53</span>           nathanmarz </span><span>if you have the control, then making the structure of the data as consistent as possible helps a lot</span></div><div id="t1518622534000146" t="2018-02-14 15:35:34 cperrone eh eh I do. I though I was consistent though. [root children children] all the way no?"><a href="#t1518622534000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:35:34</span>             cperrone </span><span>eh eh I do. I though I was consistent though. [root children children] all the way no?</span></div><div id="t1518622565000512" t="2018-02-14 15:36:05 nathanmarz yea, in this case it&apos;s the output that&apos;s slightly inconsistent"><a href="#t1518622565000512" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:36:05</span>           nathanmarz </span><span>yea, in this case it&apos;s the output that&apos;s slightly inconsistent</span></div><div id="t1518622583000301" t="2018-02-14 15:36:23 cperrone true, the wrapping is slightly tricky"><a href="#t1518622583000301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:36:23</span>             cperrone </span><span>true, the wrapping is slightly tricky</span></div><div id="t1518622683000138" t="2018-02-14 15:38:03 cperrone i read somewhere that zippers are pretty lightweight by the way… I don’t particularly like the imperative navigation that it often leads to though."><a href="#t1518622683000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:38:03</span>             cperrone </span><span>i read somewhere that zippers are pretty lightweight by the way… I don’t particularly like the imperative navigation that it often leads to though.</span></div><div id="t1518622774000545" t="2018-02-14 15:39:34 nathanmarz &quot;lightweight&quot; is relative"><a href="#t1518622774000545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:39:34</span>           nathanmarz </span><span>&quot;lightweight&quot; is relative</span></div><div id="t1518622800000764" t="2018-02-14 15:40:00 nathanmarz compared to a straight  reduce  it&apos;s not"><a href="#t1518622800000764" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:40:00</span>           nathanmarz </span><span>compared to a straight </span><code>reduce</code><span> it&apos;s not</span></div><div id="t1518622822000626" t="2018-02-14 15:40:22 nathanmarz it&apos;s not just performance, they also add conceptual overhead"><a href="#t1518622822000626" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:40:22</span>           nathanmarz </span><span>it&apos;s not just performance, they also add conceptual overhead</span></div><div id="t1518622823000039" t="2018-02-14 15:40:23 cperrone ah ah I guess so, especially in clojurescript, everything counts, so it’s a matter of tradeoffs"><a href="#t1518622823000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:40:23</span>             cperrone </span><span>ah ah I guess so, especially in clojurescript, everything counts, so it’s a matter of tradeoffs</span></div><div id="t1518622832000051" t="2018-02-14 15:40:32 cperrone indeed"><a href="#t1518622832000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-14</span> <span class="t" onclick="H(this)">15:40:32</span>             cperrone </span><span>indeed</span></div><div id="t1518994021000108" t="2018-02-18 22:47:01 Peter Wilkins Hi @nathanmarz and all. I&apos;m stuck on a (probably) simple one. I have this xml:
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;
&lt;book&gt;
&lt;frontmatter/&gt;
&lt;chapter name=&quot;Introduction&quot;&gt;
    &lt;para&gt;Here is the intro&lt;/para&gt;
    &lt;para&gt;Another paragraph&lt;/para&gt;
&lt;/chapter&gt;
&lt;chapter name=&quot;Conclusion&quot;&gt;
    &lt;para&gt;All done now&lt;/para&gt;
&lt;/chapter&gt;
&lt;/book&gt;"><a href="#t1518994021000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-18</span> <span class="t" onclick="H(this)">22:47:01</span>        Peter Wilkins </span><span>Hi @nathanmarz and all. I&apos;m stuck on a (probably) simple one. I have this xml:
</span><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;
&lt;book&gt;
&lt;frontmatter/&gt;
&lt;chapter name=&quot;Introduction&quot;&gt;
    &lt;para&gt;Here is the intro&lt;/para&gt;
    &lt;para&gt;Another paragraph&lt;/para&gt;
&lt;/chapter&gt;
&lt;chapter name=&quot;Conclusion&quot;&gt;
    &lt;para&gt;All done now&lt;/para&gt;
&lt;/chapter&gt;
&lt;/book&gt;</pre></div><div id="t1518994049000055" t="2018-02-18 22:47:29 Peter Wilkins the Challenge is to get the string content from chapter elements with attr name = &quot;Introduction&quot;

; using thread last
 (time (-&gt;&gt; [doc]
           (mapcat :content)
           (filter #(= :chapter (:tag %)))
           (filter #(= &quot;Introduction&quot; (get-in % [:attrs :name])))
           (mapcat :content)
           (filter #(= :para (:tag %)))
           (mapcat :content)
           (filter string?))) 

; transducers and compose
 (time (eduction
        (comp
          (mapcat :content)
          (filter (comp (partial = :chapter) :tag))
          (filter (comp (partial = &quot;Introduction&quot;) :attrs :name))
          (mapcat :content)
          (filter (comp (partial = :para) :tag))
          (mapcat :content)
          (filter string?))
        [doc])) 

; specter: this isn&apos;t correct yet...
 (select [:content ALL
         (filterer :tag #(= % :chapter))
         (filterer :attrs :name #(= % &quot;Introduction&quot;))
         :content ALL
         (filterer :tag #(= % :para))
         :content ALL
         string?] doc)"><a href="#t1518994049000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-18</span> <span class="t" onclick="H(this)">22:47:29</span>        Peter Wilkins </span><span>the Challenge is to get the string content from chapter elements with attr name = &quot;Introduction&quot;

; using thread last
</span><pre>(time (-&gt;&gt; [doc]
           (mapcat :content)
           (filter #(= :chapter (:tag %)))
           (filter #(= &quot;Introduction&quot; (get-in % [:attrs :name])))
           (mapcat :content)
           (filter #(= :para (:tag %)))
           (mapcat :content)
           (filter string?)))</pre><span>

; transducers and compose
</span><pre>(time (eduction
        (comp
          (mapcat :content)
          (filter (comp (partial = :chapter) :tag))
          (filter (comp (partial = &quot;Introduction&quot;) :attrs :name))
          (mapcat :content)
          (filter (comp (partial = :para) :tag))
          (mapcat :content)
          (filter string?))
        [doc]))</pre><span>

; specter: this isn&apos;t correct yet...
</span><pre>(select [:content ALL
         (filterer :tag #(= % :chapter))
         (filterer :attrs :name #(= % &quot;Introduction&quot;))
         :content ALL
         (filterer :tag #(= % :para))
         :content ALL
         string?] doc)</pre></div><div id="t1518995039000067" t="2018-02-18 23:03:59 nathanmarz @poppetew I think you&apos;re looking for  selected?  rather than  filterer ?"><a href="#t1518995039000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-18</span> <span class="t" onclick="H(this)">23:03:59</span>           nathanmarz </span><span>@poppetew I think you&apos;re looking for </span><code>selected?</code><span> rather than </span><code>filterer</code><span>?</span></div><div id="t1518995043000064" t="2018-02-18 23:04:03 nathanmarz (select [:content
         ALL
         (selected? :tag (pred= :chapter))
         (selected? :attrs :name (pred= &quot;Introduction&quot;))
         :content
         ALL
         (selected? :tag (pred= :para))
         :content
         ALL
         string?]
  doc)
"><a href="#t1518995043000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-18</span> <span class="t" onclick="H(this)">23:04:03</span>           nathanmarz </span><pre>(select [:content
         ALL
         (selected? :tag (pred= :chapter))
         (selected? :attrs :name (pred= &quot;Introduction&quot;))
         :content
         ALL
         (selected? :tag (pred= :para))
         :content
         ALL
         string?]
  doc)
</pre></div><div id="t1518995068000098" t="2018-02-18 23:04:28 nathanmarz pred=  is also slightly nicer than doing  #(= % ...)"><a href="#t1518995068000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-18</span> <span class="t" onclick="H(this)">23:04:28</span>           nathanmarz </span><code>pred=</code><span> is also slightly nicer than doing </span><code>#(= % ...)</code></div><div id="t1519029721000363" t="2018-02-19 08:42:01 Peter Wilkins thanks:+1:"><a href="#t1519029721000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-19</span> <span class="t" onclick="H(this)">08:42:01</span>        Peter Wilkins </span><span>thanks:+1:</span></div><div id="t1519070210000284" t="2018-02-19 19:56:50 pepe selected?  is the navigator I was looking for, but was blind to see it. Thank you very much!"><a href="#t1519070210000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-19</span> <span class="t" onclick="H(this)">19:56:50</span>                 pepe </span><code>selected?</code><span> is the navigator I was looking for, but was blind to see it. Thank you very much!</span></div><div id="t1519213701000051" t="2018-02-21 11:48:21 Nikolay Artamonov Hi all! Is it possible to get removed (via  NONE ) element, for example:

 (sr/setval [:elems
            (sr/filterer (sr/must :id) (sr/pred= 1))
            sr/FIRST] sr/NONE {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
=&gt; {:elems [{:id 2, :name &quot;B&quot;}]}
 

I want to get not only whole structure but also removed one:  {:id 1 :name &quot;A&quot;} ."><a href="#t1519213701000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">11:48:21</span>    Nikolay Artamonov </span><span>Hi all! Is it possible to get removed (via </span><code>NONE</code><span>) element, for example:

</span><pre>(sr/setval [:elems
            (sr/filterer (sr/must :id) (sr/pred= 1))
            sr/FIRST] sr/NONE {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
=&gt; {:elems [{:id 2, :name &quot;B&quot;}]}
</pre><span>

I want to get not only whole structure but also removed one: </span><code>{:id 1 :name &quot;A&quot;}</code><span>.</span></div><div id="t1519219572000126" t="2018-02-21 13:26:12 schmee @nartamonov you can use transform instead, like this:
 user=&gt; (sr/transform
  #_=&gt;  [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
  #_=&gt;  (fn [x] (println x) sr/NONE)
  #_=&gt;  {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
{:id 1, :name A}
{:elems [{:id 2 :name &quot;B&quot;}]}"><a href="#t1519219572000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:26:12</span>               schmee </span><span>@nartamonov you can use transform instead, like this:
</span><pre>user=&gt; (sr/transform
  #_=&gt;  [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
  #_=&gt;  (fn [x] (println x) sr/NONE)
  #_=&gt;  {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
{:id 1, :name A}
{:elems [{:id 2 :name &quot;B&quot;}]}</pre></div><div id="t1519219612000321" t="2018-02-21 13:26:52 schmee if you return  NONE  from the transformation function it will remove the element just like setval"><a href="#t1519219612000321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:26:52</span>               schmee </span><span>if you return </span><code>NONE</code><span> from the transformation function it will remove the element just like setval</span></div><div id="t1519219730000139" t="2018-02-21 13:28:50 schmee also,  replace-in  might be of help:  https://github.com/nathanmarz/specter/wiki/List-of-Macros#replace-in"><a href="#t1519219730000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:28:50</span>               schmee </span><span>also, </span><code>replace-in</code><span> might be of help: </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#replace-in" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#replace-in</a></div><div id="t1519219881000378" t="2018-02-21 13:31:21 schmee actually,  replace-in  is perfect:
 user=&gt; (sr/replace-in
  #_=&gt;  [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
  #_=&gt;  (fn [x] [sr/NONE x])
  #_=&gt;  {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
[{:elems [{:id 2 :name &quot;B&quot;}]} ([:id 1] [:name &quot;A&quot;])]
"><a href="#t1519219881000378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:31:21</span>               schmee </span><span>actually, </span><code>replace-in</code><span> is perfect:
</span><pre>user=&gt; (sr/replace-in
  #_=&gt;  [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
  #_=&gt;  (fn [x] [sr/NONE x])
  #_=&gt;  {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
[{:elems [{:id 2 :name &quot;B&quot;}]} ([:id 1] [:name &quot;A&quot;])]
</pre></div><div id="t1519220163000171" t="2018-02-21 13:36:03 souenzzo @nartamonov  path  works equally in  select  and  setval , so you can do something like it:
 (let [data {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]}
      path [:elems ALL (if-path [:id #{1}] STAY)]]
  {:data    (setval path NONE data)
   :removed (select path data)})
 
 replace-in  is a option too"><a href="#t1519220163000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:36:03</span>             souenzzo </span><span>@nartamonov </span><code>path</code><span> works equally in </span><code>select</code><span> and </span><code>setval</code><span>, so you can do something like it:
</span><pre>(let [data {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]}
      path [:elems ALL (if-path [:id #{1}] STAY)]]
  {:data    (setval path NONE data)
   :removed (select path data)})
</pre><span>
</span><code>replace-in</code><span> is a option too</span></div><div id="t1519220896000361" t="2018-02-21 13:48:16 Nikolay Artamonov @schmee Thanks, it works almost as I want. If instead  x  we use  [x]  then we&apos;ll get exactly the same structure (hashmap) that was removed:

 (sr/replace-in
    [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
    (fn [x] [sr/NONE [x]])
    {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
=&gt; [{:elems [{:id 2, :name &quot;B&quot;}]} ({:id 1, :name &quot;A&quot;})]
 

Though, don&apos;t understand why..."><a href="#t1519220896000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:48:16</span>    Nikolay Artamonov </span><span>@schmee Thanks, it works almost as I want. If instead </span><code>x</code><span> we use </span><code>[x]</code><span> then we&apos;ll get exactly the same structure (hashmap) that was removed:

</span><pre>(sr/replace-in
    [:elems (sr/filterer (sr/must :id) (sr/pred= 1)) sr/FIRST]
    (fn [x] [sr/NONE [x]])
    {:elems [{:id 1 :name &quot;A&quot;} {:id 2 :name &quot;B&quot;}]})
=&gt; [{:elems [{:id 2, :name &quot;B&quot;}]} ({:id 1, :name &quot;A&quot;})]
</pre><span>

Though, don&apos;t understand why...</span></div><div id="t1519220974000270" t="2018-02-21 13:49:34 schmee ahh, sorry, I missed that the hash map changed into a seq, good that you found the solution"><a href="#t1519220974000270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:49:34</span>               schmee </span><span>ahh, sorry, I missed that the hash map changed into a seq, good that you found the solution</span></div><div id="t1519221065000334" t="2018-02-21 13:51:05 schmee the reason is that the second element in the vector gets added to a sequence of return values, so if you have just a hash map it will be changed into a seq first, ie:
 user=&gt; (seq {:id 1, :name &quot;A&quot;})
([:id 1] [:name &quot;A&quot;])
"><a href="#t1519221065000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:51:05</span>               schmee </span><span>the reason is that the second element in the vector gets added to a sequence of return values, so if you have just a hash map it will be changed into a seq first, ie:
</span><pre>user=&gt; (seq {:id 1, :name &quot;A&quot;})
([:id 1] [:name &quot;A&quot;])
</pre></div><div id="t1519221083000454" t="2018-02-21 13:51:23 schmee vs
 user=&gt; (seq [{:id 1, :name &quot;A&quot;}])
({:id 1 :name &quot;A&quot;})
"><a href="#t1519221083000454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:51:23</span>               schmee </span><span>vs
</span><pre>user=&gt; (seq [{:id 1, :name &quot;A&quot;}])
({:id 1 :name &quot;A&quot;})
</pre></div><div id="t1519221242000360" t="2018-02-21 13:54:02 Nikolay Artamonov Now I see, thank you!  🙂"><a href="#t1519221242000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">13:54:02</span>    Nikolay Artamonov </span><span>Now I see, thank you! </span><b>🙂</b></div><div id="t1519242670000461" t="2018-02-21 19:51:10 johanatan hi, is it possible to  specter/transform  a k/v pair in a map to another map and then have that merged with the original siblings?"><a href="#t1519242670000461" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">19:51:10</span>            johanatan </span><span>hi, is it possible to </span><code>specter/transform</code><span> a k/v pair in a map to another map and then have that merged with the original siblings?</span></div><div id="t1519242789000178" t="2018-02-21 19:53:09 nathanmarz @johanatan you can use the  submap  navigator for that"><a href="#t1519242789000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">19:53:09</span>           nathanmarz </span><span>@johanatan you can use the </span><code>submap</code><span> navigator for that</span></div><div id="t1519242800000174" t="2018-02-21 19:53:20 johanatan ah, ok. thx"><a href="#t1519242800000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">19:53:20</span>            johanatan </span><span>ah, ok. thx</span></div><div id="t1519253056000086" t="2018-02-21 22:44:16 spieden was just reaching for  clojure.walk  and learned  recursive-path  and  cond-path  instead — wasn’t disappointed =)"><a href="#t1519253056000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-21</span> <span class="t" onclick="H(this)">22:44:16</span>              spieden </span><span>was just reaching for </span><code>clojure.walk</code><span> and learned </span><code>recursive-path</code><span> and </span><code>cond-path</code><span> instead — wasn’t disappointed =)</span></div><div id="t1519262816000143" t="2018-02-22 01:26:56 steveb8n I’m struggling to understand  compact . in the example, shouldn’t the :c that has a value be left alone?"><a href="#t1519262816000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">01:26:56</span>             steveb8n </span><span>I’m struggling to understand </span><code>compact</code><span>. in the example, shouldn’t the :c that has a value be left alone?</span></div><div id="t1519262821000112" t="2018-02-22 01:27:01 steveb8n (setval [ALL :a (compact :c)] 
        NONE
        [{:a {:b 1 :c 2}}
         {:a {:b 1 :c nil}}]) 

=&gt; 
 [{:a {:b 1}} {:a {:b 1}}]"><a href="#t1519262821000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">01:27:01</span>             steveb8n </span><pre>(setval [ALL :a (compact :c)] 
        NONE
        [{:a {:b 1 :c 2}}
         {:a {:b 1 :c nil}}])</pre><span>

=&gt; 
</span><pre>[{:a {:b 1}} {:a {:b 1}}]</pre></div><div id="t1519262868000179" t="2018-02-22 01:27:48 steveb8n the docstring says that it only applies when the value is empty. that is exactly what I want but I’m missing how to make that work"><a href="#t1519262868000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">01:27:48</span>             steveb8n </span><span>the docstring says that it only applies when the value is empty. that is exactly what I want but I’m missing how to make that work</span></div><div id="t1519265491000247" t="2018-02-22 02:11:31 nathanmarz @steveb8n  compact  applies to the value being navigated on, in this case the submaps"><a href="#t1519265491000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:11:31</span>           nathanmarz </span><span>@steveb8n </span><code>compact</code><span> applies to the value being navigated on, in this case the submaps</span></div><div id="t1519265529000204" t="2018-02-22 02:12:09 nathanmarz e.g.
 (setval [ALL :a (compact :c)] 
        NONE
        [{:a {:c 2}}
         {:a {:b 1 :c nil}}])
;; =&gt; [{} {:a {:b 1}}]
"><a href="#t1519265529000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:12:09</span>           nathanmarz </span><span>e.g.
</span><pre>(setval [ALL :a (compact :c)] 
        NONE
        [{:a {:c 2}}
         {:a {:b 1 :c nil}}])
;; =&gt; [{} {:a {:b 1}}]
</pre></div><div id="t1519265755000020" t="2018-02-22 02:15:55 steveb8n That makes sense. Reading that expression it makes  sense that it unconditionally removes the value. "><a href="#t1519265755000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:15:55</span>             steveb8n </span><span>That makes sense. Reading that expression it makes  sense that it unconditionally removes the value. </span></div><div id="t1519265855000058" t="2018-02-22 02:17:35 steveb8n But what if I want to conditionally remove it i.e. when value is nil. Is there an idiomatic way to do that? The docstring suggests that behaviour, hence my confusion."><a href="#t1519265855000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:17:35</span>             steveb8n </span><span>But what if I want to conditionally remove it i.e. when value is nil. Is there an idiomatic way to do that? The docstring suggests that behaviour, hence my confusion.</span></div><div id="t1519266035000254" t="2018-02-22 02:20:35 steveb8n I can write a transform fn or conditional navigation but wonder if you would use compact or some other elegance for that as well?"><a href="#t1519266035000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:20:35</span>             steveb8n </span><span>I can write a transform fn or conditional navigation but wonder if you would use compact or some other elegance for that as well?</span></div><div id="t1519266092000208" t="2018-02-22 02:21:32 steveb8n And thanks  🙂  "><a href="#t1519266092000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:21:32</span>             steveb8n </span><span>And thanks </span><b>🙂</b><span> </span></div><div id="t1519266741000047" t="2018-02-22 02:32:21 nathanmarz @steveb8n it&apos;s just  (setval [ALL :a :c nil?] NONE data)"><a href="#t1519266741000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:32:21</span>           nathanmarz </span><span>@steveb8n it&apos;s just </span><code>(setval [ALL :a :c nil?] NONE data)</code></div><div id="t1519267112000226" t="2018-02-22 02:38:32 steveb8n Ok. That works. Thanks again"><a href="#t1519267112000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">02:38:32</span>             steveb8n </span><span>Ok. That works. Thanks again</span></div><div id="t1519321940000728" t="2018-02-22 17:52:20 sashton i’m just trying out specter.
what’s the best way to select-keys at various levels of a tree:
 ;; input
{:a {:aa 1 :ab 2 :ac 3}
 :b {:ba 10 :ba 11}
 :c {:ca 100}}

;; desired output
{:a {:aa 1 :ab 2}
 :c {:ca 100}}
"><a href="#t1519321940000728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">17:52:20</span>              sashton </span><span>i’m just trying out specter.
what’s the best way to select-keys at various levels of a tree:
</span><pre>;; input
{:a {:aa 1 :ab 2 :ac 3}
 :b {:ba 10 :ba 11}
 :c {:ca 100}}

;; desired output
{:a {:aa 1 :ab 2}
 :c {:ca 100}}
</pre></div><div id="t1519322145000612" t="2018-02-22 17:55:45 nathanmarz @sashton to maintain the structure of the input, select what to remove rather than what to keep:
 (setval (multi-path :b [:a :ac]) NONE data)
"><a href="#t1519322145000612" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">17:55:45</span>           nathanmarz </span><span>@sashton to maintain the structure of the input, select what to remove rather than what to keep:
</span><pre>(setval (multi-path :b [:a :ac]) NONE data)
</pre></div><div id="t1519322311000008" t="2018-02-22 17:58:31 sashton thanks @nathanmarz. is remove the only option? the data i’m looking at has lots of extra fields which i’m not interested in. while i could list all the fields to delete, it might get tedious."><a href="#t1519322311000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">17:58:31</span>              sashton </span><span>thanks @nathanmarz. is remove the only option? the data i’m looking at has lots of extra fields which i’m not interested in. while i could list all the fields to delete, it might get tedious.</span></div><div id="t1519322338000356" t="2018-02-22 17:58:58 nathanmarz there&apos;s also the  submap  navigator which for selects is equivalent to  select-keys"><a href="#t1519322338000356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">17:58:58</span>           nathanmarz </span><span>there&apos;s also the </span><code>submap</code><span> navigator which for selects is equivalent to </span><code>select-keys</code></div><div id="t1519322521000032" t="2018-02-22 18:02:01 nathanmarz though it currently changes sorted maps to unsorted maps if used in a  select   https://github.com/nathanmarz/specter/issues/235"><a href="#t1519322521000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">18:02:01</span>           nathanmarz </span><span>though it currently changes sorted maps to unsorted maps if used in a </span><code>select</code><span> </span><a href="https://github.com/nathanmarz/specter/issues/235" target="_blank">https://github.com/nathanmarz/specter/issues/235</a></div><div id="t1519322802000210" t="2018-02-22 18:06:42 nathanmarz this is how you could go about doing it with  submap :
 (defdynamicnav viewed [path viewnav]
  (transformed path (fn [s] (select-any viewnav s)))
  )

(select-any [(viewed :a (submap [:aa :ab])) (submap [:a :c])] data)
"><a href="#t1519322802000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">18:06:42</span>           nathanmarz </span><span>this is how you could go about doing it with </span><code>submap</code><span>:
</span><pre>(defdynamicnav viewed [path viewnav]
  (transformed path (fn [s] (select-any viewnav s)))
  )

(select-any [(viewed :a (submap [:aa :ab])) (submap [:a :c])] data)
</pre></div><div id="t1519330025000262" t="2018-02-22 20:07:05 sashton thanks again. that works"><a href="#t1519330025000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-22</span> <span class="t" onclick="H(this)">20:07:05</span>              sashton </span><span>thanks again. that works</span></div><div id="t1519455966000029" t="2018-02-24 07:06:06 kurt-o-sys I have a nested structure, combining vectors and maps like this:
 [{:__type &quot;some_type&quot;
  :mykey 1
  :date    #inst&quot;...&quot;
  :subs [{__type &quot;another_type&quot;
          :typekey &quot;value&quot;}
         {__type &quot;another_type&quot;}]
  :onesub {:__type &quot;random_type&quot;
           :subkey 2}]}
 
What I would like to do is tranform some keys of all maps of a certain type (the transformation is always the same). So, for example, what I would like to do something like (with the previous map as  m ):
 (resolve-values {&quot;some_type&quot; [:date :name] &quot;random_type&quot; [:another_key]} m) 
which would transform all  :date  and  :name  values of maps which have a  :__type &quot;some_type&quot;  entry and all  :another_key  values of maps which have a  :__type &quot;random_type  entry"><a href="#t1519455966000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">07:06:06</span>           kurt-o-sys </span><span>I have a nested structure, combining vectors and maps like this:
</span><pre>[{:__type &quot;some_type&quot;
  :mykey 1
  :date    #inst&quot;...&quot;
  :subs [{__type &quot;another_type&quot;
          :typekey &quot;value&quot;}
         {__type &quot;another_type&quot;}]
  :onesub {:__type &quot;random_type&quot;
           :subkey 2}]}
</pre><span>
What I would like to do is tranform some keys of all maps of a certain type (the transformation is always the same). So, for example, what I would like to do something like (with the previous map as </span><code>m</code><span>):
</span><code>(resolve-values {&quot;some_type&quot; [:date :name] &quot;random_type&quot; [:another_key]} m)</code><span>
which would transform all </span><code>:date</code><span> and </span><code>:name</code><span> values of maps which have a </span><code>:__type &quot;some_type&quot;</code><span> entry and all </span><code>:another_key</code><span> values of maps which have a </span><code>:__type &quot;random_type</code><span> entry</span></div><div id="t1519456004000050" t="2018-02-24 07:06:44 kurt-o-sys how would I do that using  specter  (I guess specter is the best way to do it  🙂  )"><a href="#t1519456004000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">07:06:44</span>           kurt-o-sys </span><span>how would I do that using </span><code>specter</code><span> (I guess specter is the best way to do it </span><b>🙂</b><span> )</span></div><div id="t1519456069000040" t="2018-02-24 07:07:49 kurt-o-sys it has to be some recursive path, but I can&apos;t really figure out how it would look like, so:
 (specter/transform [....?] resolve m)"><a href="#t1519456069000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">07:07:49</span>           kurt-o-sys </span><span>it has to be some recursive path, but I can&apos;t really figure out how it would look like, so:
</span><code>(specter/transform [....?] resolve m)</code></div><div id="t1519456102000017" t="2018-02-24 07:08:22 kurt-o-sys with  resolve  the function to apply to the values that have to be transformed, but what is  ...? ?"><a href="#t1519456102000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">07:08:22</span>           kurt-o-sys </span><span>with </span><code>resolve</code><span> the function to apply to the values that have to be transformed, but what is </span><code>...?</code><span>?</span></div><div id="t1519479995000057" t="2018-02-24 13:46:35 kurt-o-sys so, this is what I came up with so far for one type:
 (defn type-map-path [__type]
	(specter/recursive-path [] p
                        [(specter/walker #(= (:__type %) __type))
                         (specter/stay-then-continue [specter/ALL p])]))

(def SOME-TYPE-MAP-PATH (type-map-path &quot;some_type&quot;))
(def SOME-TYPE-KEYS-PATH (specter/multi-path :date :name))
"><a href="#t1519479995000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">13:46:35</span>           kurt-o-sys </span><span>so, this is what I came up with so far for one type:
</span><pre>(defn type-map-path [__type]
	(specter/recursive-path [] p
                        [(specter/walker #(= (:__type %) __type))
                         (specter/stay-then-continue [specter/ALL p])]))

(def SOME-TYPE-MAP-PATH (type-map-path &quot;some_type&quot;))
(def SOME-TYPE-KEYS-PATH (specter/multi-path :date :name))
</pre></div><div id="t1519480058000094" t="2018-02-24 13:47:38 kurt-o-sys Just wondering looping and walking several times would bring much benefit over trying to make  multi-path  work for different  __type s"><a href="#t1519480058000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">13:47:38</span>           kurt-o-sys </span><span>Just wondering looping and walking several times would bring much benefit over trying to make </span><code>multi-path</code><span> work for different </span><code>__type</code><span>s</span></div><div id="t1519483166000041" t="2018-02-24 14:39:26 nathanmarz @kurt-o-sys this is a better way to do it:
 (def MAPS
  (recursive-path [] p
    (cond-path
      map? (continue-then-stay MAP-VALS p)
      coll? [ALL p])
    ))

(transform [MAPS #(= (:__type %) &quot;another_type&quot;)] resolve data)
"><a href="#t1519483166000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">14:39:26</span>           nathanmarz </span><span>@kurt-o-sys this is a better way to do it:
</span><pre>(def MAPS
  (recursive-path [] p
    (cond-path
      map? (continue-then-stay MAP-VALS p)
      coll? [ALL p])
    ))

(transform [MAPS #(= (:__type %) &quot;another_type&quot;)] resolve data)
</pre></div><div id="t1519483201000090" t="2018-02-24 14:40:01 nathanmarz walker  is very wasteful in this case, since it traverses into map keys and key/value pairs"><a href="#t1519483201000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">14:40:01</span>           nathanmarz </span><code>walker</code><span> is very wasteful in this case, since it traverses into map keys and key/value pairs</span></div><div id="t1519483219000042" t="2018-02-24 14:40:19 nathanmarz this is a much more efficient way to navigate your data structure that leverages the structure of your data"><a href="#t1519483219000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">14:40:19</span>           nathanmarz </span><span>this is a much more efficient way to navigate your data structure that leverages the structure of your data</span></div><div id="t1519483766000059" t="2018-02-24 14:49:26 kurt-o-sys oh, nice, thx!"><a href="#t1519483766000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">14:49:26</span>           kurt-o-sys </span><span>oh, nice, thx!</span></div><div id="t1519487048000142" t="2018-02-24 15:44:08 kurt-o-sys I&apos;m starting to really fall in love with specter  😛"><a href="#t1519487048000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">15:44:08</span>           kurt-o-sys </span><span>I&apos;m starting to really fall in love with specter </span><b>😛</b></div><div id="t1519507501000079" t="2018-02-24 21:25:01 yogidevbear Hi everyone. I&apos;m trying to add Specter to a lein clojure project. I&apos;ve added  [com.rpl/specter &quot;1.1.0&quot;]  to my dependencies and  (:require [com.rpl.specter])  to my ns. I&apos;m getting the following error in my ns thought:  FileNotFoundException Could not locate com/rpl/specter__init.class or com/rpl/specter.clj on classpath.  clojure.lang.RT.load (RT.java:463) ."><a href="#t1519507501000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:25:01</span>          yogidevbear </span><span>Hi everyone. I&apos;m trying to add Specter to a lein clojure project. I&apos;ve added </span><code>[com.rpl/specter &quot;1.1.0&quot;]</code><span> to my dependencies and </span><code>(:require [com.rpl.specter])</code><span> to my ns. I&apos;m getting the following error in my ns thought: </span><code>FileNotFoundException Could not locate com/rpl/specter__init.class or com/rpl/specter.clj on classpath.  clojure.lang.RT.load (RT.java:463)</code><span>.</span></div><div id="t1519507767000074" t="2018-02-24 21:29:27 schmee @yogidevbear are you in a REPL?"><a href="#t1519507767000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:29:27</span>               schmee </span><span>@yogidevbear are you in a REPL?</span></div><div id="t1519508355000008" t="2018-02-24 21:39:15 yogidevbear I&apos;m working from within ProtoREPL doing inline evaluation inside atom io"><a href="#t1519508355000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:39:15</span>          yogidevbear </span><span>I&apos;m working from within ProtoREPL doing inline evaluation inside atom io</span></div><div id="t1519508993000047" t="2018-02-24 21:49:53 schmee okay, I don’t know how that works unfortunately"><a href="#t1519508993000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:49:53</span>               schmee </span><span>okay, I don’t know how that works unfortunately</span></div><div id="t1519509003000030" t="2018-02-24 21:50:03 schmee try running  lein deps  inside your project and see if that helps"><a href="#t1519509003000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:50:03</span>               schmee </span><span>try running </span><code>lein deps</code><span> inside your project and see if that helps</span></div><div id="t1519509079000037" t="2018-02-24 21:51:19 yogidevbear No luck"><a href="#t1519509079000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:51:19</span>          yogidevbear </span><span>No luck</span></div><div id="t1519509079000093" t="2018-02-24 21:51:19 nathanmarz @yogidevbear you&apos;re best off asking in #clojurescript"><a href="#t1519509079000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:51:19</span>           nathanmarz </span><span>@yogidevbear you&apos;re best off asking in #clojurescript</span></div><div id="t1519509098000070" t="2018-02-24 21:51:38 yogidevbear Hmmm, but I&apos;m not using ClojureScript"><a href="#t1519509098000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:51:38</span>          yogidevbear </span><span>Hmmm, but I&apos;m not using ClojureScript</span></div><div id="t1519509126000071" t="2018-02-24 21:52:06 nathanmarz oh sorry, misunderstood"><a href="#t1519509126000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:52:06</span>           nathanmarz </span><span>oh sorry, misunderstood</span></div><div id="t1519509143000022" t="2018-02-24 21:52:23 nathanmarz does it work from  lein repl ?"><a href="#t1519509143000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:52:23</span>           nathanmarz </span><span>does it work from </span><code>lein repl</code><span>?</span></div><div id="t1519509322000052" t="2018-02-24 21:55:22 yogidevbear Yup, seems to work if I do  (use &apos;com.rpl.specter)  from within  lein repl"><a href="#t1519509322000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:55:22</span>          yogidevbear </span><span>Yup, seems to work if I do </span><code>(use &apos;com.rpl.specter)</code><span> from within </span><code>lein repl</code></div><div id="t1519509339000066" t="2018-02-24 21:55:39 nathanmarz have you tried restarting protorepl?"><a href="#t1519509339000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:55:39</span>           nathanmarz </span><span>have you tried restarting protorepl?</span></div><div id="t1519509384000041" t="2018-02-24 21:56:24 yogidevbear I&apos;ll give that a try"><a href="#t1519509384000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:56:24</span>          yogidevbear </span><span>I&apos;ll give that a try</span></div><div id="t1519509399000088" t="2018-02-24 21:56:39 yogidevbear would it be worth clearing out my  .m2  folder too?"><a href="#t1519509399000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:56:39</span>          yogidevbear </span><span>would it be worth clearing out my </span><code>.m2</code><span> folder too?</span></div><div id="t1519509468000082" t="2018-02-24 21:57:48 nathanmarz doubtful given that it&apos;s working with a regular repl"><a href="#t1519509468000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">21:57:48</span>           nathanmarz </span><span>doubtful given that it&apos;s working with a regular repl</span></div><div id="t1519509605000133" t="2018-02-24 22:00:05 yogidevbear Fair point  🙂"><a href="#t1519509605000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-24</span> <span class="t" onclick="H(this)">22:00:05</span>          yogidevbear </span><span>Fair point </span><b>🙂</b></div><div id="t1520006534000510" t="2018-03-02 16:02:14 frenata If I want to select some substructure out of a nested map, rather than just the leaves, what&apos;s the best way to do that with specter?
IE, I have  {:foo 1 :bar {:baz 2 :bat 3}} , and I want to select out  {:bar {:baz 2}} .

New to the library and just poking around. Thought  subselect  or  filterer  might work, but at least the way I&apos;m using them they aren&apos;t quite right."><a href="#t1520006534000510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:02:14</span>              frenata </span><span>If I want to select some substructure out of a nested map, rather than just the leaves, what&apos;s the best way to do that with specter?
IE, I have </span><code>{:foo 1 :bar {:baz 2 :bat 3}}</code><span>, and I want to select out </span><code>{:bar {:baz 2}}</code><span>.

New to the library and just poking around. Thought </span><code>subselect</code><span> or </span><code>filterer</code><span> might work, but at least the way I&apos;m using them they aren&apos;t quite right.</span></div><div id="t1520007537000630" t="2018-03-02 16:18:57 nathanmarz @andrew354 it depends on the use case, but generally the most straightforward approach is to remove what you don&apos;t want"><a href="#t1520007537000630" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:18:57</span>           nathanmarz </span><span>@andrew354 it depends on the use case, but generally the most straightforward approach is to remove what you don&apos;t want</span></div><div id="t1520007541000511" t="2018-03-02 16:19:01 nathanmarz (setval (multi-path :foo [:bar :bat]) NONE data)
"><a href="#t1520007541000511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:19:01</span>           nathanmarz </span><pre>(setval (multi-path :foo [:bar :bat]) NONE data)
</pre></div><div id="t1520007641000451" t="2018-03-02 16:20:41 frenata Ah, so naming the paths of things you want to get rid of."><a href="#t1520007641000451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:20:41</span>              frenata </span><span>Ah, so naming the paths of things you want to get rid of.</span></div><div id="t1520007662000879" t="2018-03-02 16:21:02 frenata Unfortunately I think in my actual use-case, I want to keep a fairly small part of the structure, but I&apos;ll see if this approach will work."><a href="#t1520007662000879" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:21:02</span>              frenata </span><span>Unfortunately I think in my actual use-case, I want to keep a fairly small part of the structure, but I&apos;ll see if this approach will work.</span></div><div id="t1520007843000594" t="2018-03-02 16:24:03 nathanmarz @andrew354 another approach that explicitly selects the keys you want:"><a href="#t1520007843000594" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:24:03</span>           nathanmarz </span><span>@andrew354 another approach that explicitly selects the keys you want:</span></div><div id="t1520007850000586" t="2018-03-02 16:24:10 nathanmarz (defdynamicnav viewed [path viewnav]
  (transformed path #(select-any viewnav %)))

(select-any [(submap [:bar]) (viewed :bar (submap [:baz]))] data)
"><a href="#t1520007850000586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:24:10</span>           nathanmarz </span><pre>(defdynamicnav viewed [path viewnav]
  (transformed path #(select-any viewnav %)))

(select-any [(submap [:bar]) (viewed :bar (submap [:baz]))] data)
</pre></div><div id="t1520007928000267" t="2018-03-02 16:25:28 frenata Interesting. I may try both approaches and see what is most clear."><a href="#t1520007928000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:25:28</span>              frenata </span><span>Interesting. I may try both approaches and see what is most clear.</span></div><div id="t1520007939000531" t="2018-03-02 16:25:39 nathanmarz could make a helper that takes in a list of keyword paths and produces the navigation"><a href="#t1520007939000531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:25:39</span>           nathanmarz </span><span>could make a helper that takes in a list of keyword paths and produces the navigation</span></div><div id="t1520007960000488" t="2018-03-02 16:26:00 nathanmarz e.g.  (select-any (keep-keyword-paths [:bar :baz]) data)"><a href="#t1520007960000488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:26:00</span>           nathanmarz </span><span>e.g. </span><code>(select-any (keep-keyword-paths [:bar :baz]) data)</code></div><div id="t1520008139000147" t="2018-03-02 16:28:59 schmee I think that  viewed  with a bit of polish could go into specter core  🙂"><a href="#t1520008139000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-02</span> <span class="t" onclick="H(this)">16:28:59</span>               schmee </span><span>I think that </span><code>viewed</code><span> with a bit of polish could go into specter core </span><b>🙂</b></div><div id="t1520035708000305" t="2018-03-03 00:08:28 frenata btw, thanks @nathanmarz, the second approach worked out really nicely."><a href="#t1520035708000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-03</span> <span class="t" onclick="H(this)">00:08:28</span>              frenata </span><span>btw, thanks @nathanmarz, the second approach worked out really nicely.</span></div><div id="t1520431025000263" t="2018-03-07 13:57:05 hkjels Can I use specter to create a matrix from a tree? Meaning that the first column will be populated with duplicates for all childrens children and so on"><a href="#t1520431025000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-07</span> <span class="t" onclick="H(this)">13:57:05</span>               hkjels </span><span>Can I use specter to create a matrix from a tree? Meaning that the first column will be populated with duplicates for all childrens children and so on</span></div><div id="t1520432044000592" t="2018-03-07 14:14:04 nathanmarz @hkjels it would likely be helpful for traversing the tree in the order you want"><a href="#t1520432044000592" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-07</span> <span class="t" onclick="H(this)">14:14:04</span>           nathanmarz </span><span>@hkjels it would likely be helpful for traversing the tree in the order you want</span></div><div id="t1520432085000102" t="2018-03-07 14:14:45 nathanmarz the code would look something like  (reduce build-my-matrix empty-matrix (traverse &lt;path&gt; my-tree))"><a href="#t1520432085000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-07</span> <span class="t" onclick="H(this)">14:14:45</span>           nathanmarz </span><span>the code would look something like </span><code>(reduce build-my-matrix empty-matrix (traverse &lt;path&gt; my-tree))</code></div><div id="t1520432798000611" t="2018-03-07 14:26:38 hkjels Nice, I’ll give it a go"><a href="#t1520432798000611" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-07</span> <span class="t" onclick="H(this)">14:26:38</span>               hkjels </span><span>Nice, I’ll give it a go</span></div><div id="t1520608721000573" t="2018-03-09 15:18:41 razum2um is there a way to express this better?
 =&gt; (transform [(if-path [#(contains? % :loc)] [:loc ALL])] inc {:x 1})
{:x 1}
=&gt; (transform [(if-path [#(contains? % :loc)] [:loc ALL])] inc {:loc [1]})
{:loc [2]}
 
don’t want extra key after simple
 =&gt; (transform [:loc ALL] inc {:x 1})
{:x 1, :loc nil}
"><a href="#t1520608721000573" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">15:18:41</span>             razum2um </span><span>is there a way to express this better?
</span><pre>=&gt; (transform [(if-path [#(contains? % :loc)] [:loc ALL])] inc {:x 1})
{:x 1}
=&gt; (transform [(if-path [#(contains? % :loc)] [:loc ALL])] inc {:loc [1]})
{:loc [2]}
</pre><span>
don’t want extra key after simple
</span><pre>=&gt; (transform [:loc ALL] inc {:x 1})
{:x 1, :loc nil}
</pre></div><div id="t1520609231000702" t="2018-03-09 15:27:11 nathanmarz @razum2um 
 (transform [(must :loc) ALL] inc data)
"><a href="#t1520609231000702" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">15:27:11</span>           nathanmarz </span><span>@razum2um 
</span><pre>(transform [(must :loc) ALL] inc data)
</pre></div><div id="t1520609779000570" t="2018-03-09 15:36:19 razum2um thanks!"><a href="#t1520609779000570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">15:36:19</span>                  razum2um </span><span>thanks!</span></div><div id="t1520609909000525" t="2018-03-09 15:38:29 razum2um @nathanmarz btw, I had an idea about the vector as a forth program, did you think about this?"><a href="#t1520609909000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">15:38:29</span>             razum2um </span><span>@nathanmarz btw, I had an idea about the vector as a forth program, did you think about this?</span></div><div id="t1520611095000379" t="2018-03-09 15:58:15 nathanmarz @razum2um no, what do you mean?"><a href="#t1520611095000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">15:58:15</span>           nathanmarz </span><span>@razum2um no, what do you mean?</span></div><div id="t1520611275000414" t="2018-03-09 16:01:15 razum2um currently the library api interface looks convenient but adhoc, I feel there shoud be case out there which cannot fit into vector. I thought we could imagine the traversal as “bytecodes” steps to the lib (interpretator)"><a href="#t1520611275000414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:01:15</span>             razum2um </span><span>currently the library api interface looks convenient but adhoc, I feel there shoud be case out there which cannot fit into vector. I thought we could imagine the traversal as “bytecodes” steps to the lib (interpretator)</span></div><div id="t1520611383000347" t="2018-03-09 16:03:03 razum2um I understand implementing VM for data traversal is not easy  😅   but just wanted to share this"><a href="#t1520611383000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:03:03</span>             razum2um </span><span>I understand implementing VM for data traversal is not easy </span><b>😅</b><span>  but just wanted to share this</span></div><div id="t1520611423000442" t="2018-03-09 16:03:43 razum2um just on the spot: e.g. in this way we could even allow some recursion steps in traversal"><a href="#t1520611423000442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:03:43</span>             razum2um </span><span>just on the spot: e.g. in this way we could even allow some recursion steps in traversal</span></div><div id="t1520611613000587" t="2018-03-09 16:06:53 razum2um example2: my request above in this approach could look like  (transform [:loc &gt;nil? &lt;STOP ALL] inc {:x 1})  where  &gt;nil?  puts on stack if  loc  return value is nit  &lt;STOP  pops and shortcuts path if last val was true"><a href="#t1520611613000587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:06:53</span>             razum2um </span><span>example2: my request above in this approach could look like </span><code>(transform [:loc &gt;nil? &lt;STOP ALL] inc {:x 1})</code><span> where </span><code>&gt;nil?</code><span> puts on stack if </span><code>loc</code><span> return value is nit </span><code>&lt;STOP</code><span> pops and shortcuts path if last val was true</span></div><div id="t1520611667000320" t="2018-03-09 16:07:47 nathanmarz that would increase the complexity of specter by 1000x"><a href="#t1520611667000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:07:47</span>           nathanmarz </span><span>that would increase the complexity of specter by 1000x</span></div><div id="t1520611679000446" t="2018-03-09 16:07:59 razum2um yeah  🙂"><a href="#t1520611679000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:07:59</span>             razum2um </span><span>yeah </span><b>🙂</b></div><div id="t1520611690000853" t="2018-03-09 16:08:10 nathanmarz specter is not a language, it&apos;s just an interface and an efficient method for composing them"><a href="#t1520611690000853" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:08:10</span>           nathanmarz </span><span>specter is not a language, it&apos;s just an interface and an efficient method for composing them</span></div><div id="t1520611723000367" t="2018-03-09 16:08:43 nathanmarz there&apos;s no known use cases it doesn&apos;t handle, so there&apos;s no reason to do something like that"><a href="#t1520611723000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:08:43</span>           nathanmarz </span><span>there&apos;s no known use cases it doesn&apos;t handle, so there&apos;s no reason to do something like that</span></div><div id="t1520611725000313" t="2018-03-09 16:08:45 razum2um don’t push you, just wanted to hear your thoughts"><a href="#t1520611725000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:08:45</span>             razum2um </span><span>don’t push you, just wanted to hear your thoughts</span></div><div id="t1520611750000554" t="2018-03-09 16:09:10 razum2um thanks for your efforts btw  :+1:"><a href="#t1520611750000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:09:10</span>             razum2um </span><span>thanks for your efforts btw </span><b>:+1:</b></div><div id="t1520611789000135" t="2018-03-09 16:09:49 razum2um is it ok if I’ll PR to the readme.md with  must  example?"><a href="#t1520611789000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:09:49</span>             razum2um </span><span>is it ok if I’ll PR to the readme.md with </span><code>must</code><span> example?</span></div><div id="t1520611831000648" t="2018-03-09 16:10:31 nathanmarz sure thing"><a href="#t1520611831000648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:10:31</span>           nathanmarz </span><span>sure thing</span></div><div id="t1520611876000076" t="2018-03-09 16:11:16 nathanmarz not sure what to do with the readme, it&apos;s kind of just a random exploration of different kinds of manipulations"><a href="#t1520611876000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:11:16</span>           nathanmarz </span><span>not sure what to do with the readme, it&apos;s kind of just a random exploration of different kinds of manipulations</span></div><div id="t1520611942000125" t="2018-03-09 16:12:22 nathanmarz I don&apos;t think making that section longer than it already is will improve things"><a href="#t1520611942000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:12:22</span>           nathanmarz </span><span>I don&apos;t think making that section longer than it already is will improve things</span></div><div id="t1520611951000383" t="2018-03-09 16:12:31 nathanmarz the wiki is pretty good nowadays"><a href="#t1520611951000383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:12:31</span>           nathanmarz </span><span>the wiki is pretty good nowadays</span></div><div id="t1520611956000002" t="2018-03-09 16:12:36 nathanmarz so I just point people there"><a href="#t1520611956000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:12:36</span>           nathanmarz </span><span>so I just point people there</span></div><div id="t1520611989000768" t="2018-03-09 16:13:09 nathanmarz and to answer your question about recursion, see  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively"><a href="#t1520611989000768" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:13:09</span>           nathanmarz </span><span>and to answer your question about recursion, see </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively</a></div><div id="t1520612663000744" t="2018-03-09 16:24:23 razum2um hm, yes, I think now it’s quite too special example for readme..
but here is the point (from wiki)
&gt; Note that must stops navigation
I think there should be a list with such “stopping” things, wdyt?"><a href="#t1520612663000744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:24:23</span>             razum2um </span><span>hm, yes, I think now it’s quite too special example for readme..
but here is the point (from wiki)
&gt; Note that must stops navigation
I think there should be a list with such “stopping” things, wdyt?</span></div><div id="t1520612895000158" t="2018-03-09 16:28:15 razum2um still, here you are  https://github.com/nathanmarz/specter/pull/249"><a href="#t1520612895000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:28:15</span>             razum2um </span><span>still, here you are </span><a href="https://github.com/nathanmarz/specter/pull/249" target="_blank">https://github.com/nathanmarz/specter/pull/249</a></div><div id="t1520613110000372" t="2018-03-09 16:31:50 razum2um I think we have ~300 people here and readme should represent most common used cases. e.g. in same format as in clojuredocs (crowd-examples, maybe on same engine, afair it’s oss)"><a href="#t1520613110000372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:31:50</span>             razum2um </span><span>I think we have ~300 people here and readme should represent most common used cases. e.g. in same format as in clojuredocs (crowd-examples, maybe on same engine, afair it’s oss)</span></div><div id="t1520613899000172" t="2018-03-09 16:44:59 nathanmarz @razum2um this is the categorization I use when thinking of navigators:  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet"><a href="#t1520613899000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:44:59</span>           nathanmarz </span><span>@razum2um this is the categorization I use when thinking of navigators: </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a></div><div id="t1520613965000275" t="2018-03-09 16:46:05 razum2um yeah, saw it. is there any other stopping word like  must ?"><a href="#t1520613965000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:46:05</span>             razum2um </span><span>yeah, saw it. is there any other stopping word like </span><code>must</code><span>?</span></div><div id="t1520614008000497" t="2018-03-09 16:46:48 nathanmarz ALL ,  MAP-KEYS ,  MAP-VALS  will stop if there&apos;s nothing in the collection"><a href="#t1520614008000497" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:46:48</span>           nathanmarz </span><code>ALL</code><span>, </span><code>MAP-KEYS</code><span>, </span><code>MAP-VALS</code><span> will stop if there&apos;s nothing in the collection</span></div><div id="t1520614011000770" t="2018-03-09 16:46:51 nathanmarz STOP  explicitly stops"><a href="#t1520614011000770" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:46:51</span>           nathanmarz </span><code>STOP</code><span> explicitly stops</span></div><div id="t1520614019000737" t="2018-03-09 16:46:59 nathanmarz terminal  navigators explicitly stop"><a href="#t1520614019000737" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:46:59</span>           nathanmarz </span><code>terminal</code><span> navigators explicitly stop</span></div><div id="t1520614047000571" t="2018-03-09 16:47:27 nathanmarz set-elem  and  map-key  stop if the elem/key isn&apos;t there"><a href="#t1520614047000571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:47:27</span>           nathanmarz </span><code>set-elem</code><span> and </span><code>map-key</code><span> stop if the elem/key isn&apos;t there</span></div><div id="t1520614052000811" t="2018-03-09 16:47:32 razum2um ok, thanks  :+1:"><a href="#t1520614052000811" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:47:32</span>             razum2um </span><span>ok, thanks </span><b>:+1:</b></div><div id="t1520614071000257" t="2018-03-09 16:47:51 nathanmarz FIRST /`LAST` stop if the sequence is empty"><a href="#t1520614071000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-09</span> <span class="t" onclick="H(this)">16:47:51</span>           nathanmarz </span><code>FIRST</code><span>/`LAST` stop if the sequence is empty</span></div><div id="t1520871599000152" t="2018-03-12 16:19:59 mbjarland How would I go about selecting a specific node in a vector of vectors structure like the following: 
 [:html
 {}
 [:body
  {}
  [:table
   {}
   [:tr {} [:th {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} &quot;Task Name&quot;] [:th {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} &quot;Description&quot;]]
   [:tr
    {}
    [:td {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} [:a {:shape &quot;rect&quot;, :href &quot;Tasks/unpack.html&quot;} &quot;GUnzip/BUnzip2/UnXZ&quot;]]
    [:td {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} [:p {} &quot;Expands a file packed using GZip, BZip2 or XZ.&quot;]]]
 
i.e. I would like to check the  :href  value on the second to last row and if it matches a predicate, return the string on the last row. Mainly I&apos;m confused in general about how to write paths against vectors with some kind of predicate logic for which paths to traverse and which to not"><a href="#t1520871599000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">16:19:59</span>            mbjarland </span><span>How would I go about selecting a specific node in a vector of vectors structure like the following: 
</span><pre>[:html
 {}
 [:body
  {}
  [:table
   {}
   [:tr {} [:th {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} &quot;Task Name&quot;] [:th {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} &quot;Description&quot;]]
   [:tr
    {}
    [:td {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} [:a {:shape &quot;rect&quot;, :href &quot;Tasks/unpack.html&quot;} &quot;GUnzip/BUnzip2/UnXZ&quot;]]
    [:td {:colspan &quot;1&quot;, :rowspan &quot;1&quot;} [:p {} &quot;Expands a file packed using GZip, BZip2 or XZ.&quot;]]]
</pre><span>
i.e. I would like to check the </span><code>:href</code><span> value on the second to last row and if it matches a predicate, return the string on the last row. Mainly I&apos;m confused in general about how to write paths against vectors with some kind of predicate logic for which paths to traverse and which to not</span></div><div id="t1520871645000186" t="2018-03-12 16:20:45 mbjarland don&apos;t need a complete answer, just need to understand which navigator to use in a case like this"><a href="#t1520871645000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">16:20:45</span>            mbjarland </span><span>don&apos;t need a complete answer, just need to understand which navigator to use in a case like this</span></div><div id="t1520871786000183" t="2018-03-12 16:23:06 mbjarland somehow traverse to the first elems of vectors in the structure and if they match (in order)  :html ,  :body ,  :table   :tr  then check a predicate against the first  :td  and collect string from the second  :td  if predicate matches"><a href="#t1520871786000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">16:23:06</span>            mbjarland </span><span>somehow traverse to the first elems of vectors in the structure and if they match (in order) </span><code>:html</code><span>, </span><code>:body</code><span>, </span><code>:table</code><span> </span><code>:tr</code><span> then check a predicate against the first </span><code>:td</code><span> and collect string from the second </span><code>:td</code><span> if predicate matches</span></div><div id="t1520872234000440" t="2018-03-12 16:30:34 mbjarland ok figured out a solution, a tad ugly but it works: 
 (defn tag? [name]
  (fn [vec]
    (and (vector? vec) (= (first vec) name))))
 
and 
 (spctr/select 
  [spctr/ALL (tag? :body) spctr/ALL (tag? :table) spctr/ALL (tag? :tr) ... etc]
  data)
"><a href="#t1520872234000440" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">16:30:34</span>            mbjarland </span><span>ok figured out a solution, a tad ugly but it works: 
</span><pre>(defn tag? [name]
  (fn [vec]
    (and (vector? vec) (= (first vec) name))))
</pre><span>
and 
</span><pre>(spctr/select 
  [spctr/ALL (tag? :body) spctr/ALL (tag? :table) spctr/ALL (tag? :tr) ... etc]
  data)
</pre></div><div id="t1520874429000794" t="2018-03-12 17:07:09 nathanmarz @mbjarland you can capture more structure with this:
 (defdynamicnav tags-traversal [&amp; tags]
  (mapcat (fn [t] [ALL (tag? t)] tags))
  )
"><a href="#t1520874429000794" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">17:07:09</span>           nathanmarz </span><span>@mbjarland you can capture more structure with this:
</span><pre>(defdynamicnav tags-traversal [&amp; tags]
  (mapcat (fn [t] [ALL (tag? t)] tags))
  )
</pre></div><div id="t1520874458000585" t="2018-03-12 17:07:38 nathanmarz and then do  (select [(tags-traversal :body :table :tr) ...] data)"><a href="#t1520874458000585" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">17:07:38</span>           nathanmarz </span><span>and then do </span><code>(select [(tags-traversal :body :table :tr) ...] data)</code></div><div id="t1520882803000251" t="2018-03-12 19:26:43 mbjarland @nathanmarz : ) for once I wasn&apos;t far off then! Thanks, that is indeed cleaner"><a href="#t1520882803000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">19:26:43</span>            mbjarland </span><span>@nathanmarz : ) for once I wasn&apos;t far off then! Thanks, that is indeed cleaner</span></div><div id="t1520885559000126" t="2018-03-12 20:12:39 nathanmarz @mbjarland btw, here&apos;s a better way to implement those:
 (defn tag? [name]
  (pred
    (fn [vec]
      (and (vector? vec) (= (first vec) name)))))

(defdynamicnav tags-traversal [&amp; tags]
  (let [late-tag? (late-resolved-fn tag?)]
    (mapcat (fn [t] [ALL (late-tag? t)]) tags)
    ))
"><a href="#t1520885559000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">20:12:39</span>           nathanmarz </span><span>@mbjarland btw, here&apos;s a better way to implement those:
</span><pre>(defn tag? [name]
  (pred
    (fn [vec]
      (and (vector? vec) (= (first vec) name)))))

(defdynamicnav tags-traversal [&amp; tags]
  (let [late-tag? (late-resolved-fn tag?)]
    (mapcat (fn [t] [ALL (late-tag? t)]) tags)
    ))
</pre></div><div id="t1520885593000616" t="2018-03-12 20:13:13 nathanmarz adding  pred  to return of  tag?  increases performance by avoiding a runtime conversion from function to navigator"><a href="#t1520885593000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">20:13:13</span>           nathanmarz </span><span>adding </span><code>pred</code><span> to return of </span><code>tag?</code><span> increases performance by avoiding a runtime conversion from function to navigator</span></div><div id="t1520885635000507" t="2018-03-12 20:13:55 nathanmarz the  late-resolved-fn  call in  tags-traversal  allows that dynamicnav to handle dynamic parameters correctly (e.g.  (tags-traversal :html some-local) )"><a href="#t1520885635000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">20:13:55</span>           nathanmarz </span><span>the </span><code>late-resolved-fn</code><span> call in </span><code>tags-traversal</code><span> allows that dynamicnav to handle dynamic parameters correctly (e.g. </span><code>(tags-traversal :html some-local)</code><span>)</span></div><div id="t1520885706000699" t="2018-03-12 20:15:06 mbjarland ok well that brings us back to the normal cycle of “no there’s a much better way to do that” : ) 
many thanks, will noodle on this"><a href="#t1520885706000699" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">20:15:06</span>            mbjarland </span><span>ok well that brings us back to the normal cycle of “no there’s a much better way to do that” : ) 
many thanks, will noodle on this</span></div><div id="t1520887205000298" t="2018-03-12 20:40:05 mbjarland ok last one…how would I select the “rest” of a vector starting at an index…`srange` and  srange-dynamic  do not seem to do quite this from what I understand"><a href="#t1520887205000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">20:40:05</span>            mbjarland </span><span>ok last one…how would I select the “rest” of a vector starting at an index…`srange` and </span><code>srange-dynamic</code><span> do not seem to do quite this from what I understand</span></div><div id="t1520888879000547" t="2018-03-12 21:07:59 nathanmarz @mbjarland do you know the index before the  select  happens?"><a href="#t1520888879000547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">21:07:59</span>           nathanmarz </span><span>@mbjarland do you know the index before the </span><code>select</code><span> happens?</span></div><div id="t1520892334000406" t="2018-03-12 22:05:34 mbjarland yes"><a href="#t1520892334000406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">22:05:34</span>            mbjarland </span><span>yes</span></div><div id="t1520892339000068" t="2018-03-12 22:05:39 mbjarland index is fixed"><a href="#t1520892339000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">22:05:39</span>            mbjarland </span><span>index is fixed</span></div><div id="t1520892354000367" t="2018-03-12 22:05:54 mbjarland essentially it’s  (rest (rest coll))"><a href="#t1520892354000367" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">22:05:54</span>            mbjarland </span><span>essentially it’s </span><code>(rest (rest coll))</code></div><div id="t1520894522000364" t="2018-03-12 22:42:02 nathanmarz @mbjarland is this what you need?
 (defn subrest [i]
  (srange-dynamic (fn [_] i) (fn [s] (count s))))

(transform (subrest 2) reverse [1 2 3 4 5 6])
;; =&gt; [1 2 6 5 4 3]
"><a href="#t1520894522000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-12</span> <span class="t" onclick="H(this)">22:42:02</span>           nathanmarz </span><span>@mbjarland is this what you need?
</span><pre>(defn subrest [i]
  (srange-dynamic (fn [_] i) (fn [s] (count s))))

(transform (subrest 2) reverse [1 2 3 4 5 6])
;; =&gt; [1 2 6 5 4 3]
</pre></div><div id="t1520947281000236" t="2018-03-13 13:21:21 mbjarland @nathanmarz well I do believe that is exactly what I need. Thanks again!"><a href="#t1520947281000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-13</span> <span class="t" onclick="H(this)">13:21:21</span>            mbjarland </span><span>@nathanmarz well I do believe that is exactly what I need. Thanks again!</span></div><div id="t1521203680000172" t="2018-03-16 12:34:40 Marcus Pemer Hi - my first question to this channel, hope you all are doing well. I am processing some CSV input - fairly large file with four types of records in them. All records are grouped with a header line and they are separated with blank (empty) lines. I have come up with the following attempt to use Specter for the transformation:

 (let [data (-&gt;&gt;
            ;; my data comes in as text from a csv file
            (csv/parse-csv (slurp &quot;some-file-name.csv&quot;)
            ;; group by number of elements and remove group of empty rows
            (dissoc (group-by count csv) 1)
            ;; remove trailing empty cells within records
            (setval [MAP-VALS ALL LAST empty?] NONE)
            ;; prepare fields that will become map keys
            (transform [MAP-VALS FIRST ALL] keify)
            ;; turn the groups into maps
            (transform [MAP-VALS] sc/mappify)
            ;; lastly, read our data fields
            (transform [MAP-VALS ALL ALL] read-field)
            )]
  (def a-records (get data 6))
  (def b-records (get data 7))
  (def c-records (get data 11))
  (def d-records (get data 15)))
 

While this works for my immediate needs, I find myself navigating to MAP-VALS over and over again, thinking this can probably be done in a more elegant way. Is there a way in Specter to group the four transformations (setval + 3 transforms) into a sub-select of some sort? Should I even care about this type of optimization?"><a href="#t1521203680000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-16</span> <span class="t" onclick="H(this)">12:34:40</span>         Marcus Pemer </span><span>Hi - my first question to this channel, hope you all are doing well. I am processing some CSV input - fairly large file with four types of records in them. All records are grouped with a header line and they are separated with blank (empty) lines. I have come up with the following attempt to use Specter for the transformation:

</span><pre>(let [data (-&gt;&gt;
            ;; my data comes in as text from a csv file
            (csv/parse-csv (slurp &quot;some-file-name.csv&quot;)
            ;; group by number of elements and remove group of empty rows
            (dissoc (group-by count csv) 1)
            ;; remove trailing empty cells within records
            (setval [MAP-VALS ALL LAST empty?] NONE)
            ;; prepare fields that will become map keys
            (transform [MAP-VALS FIRST ALL] keify)
            ;; turn the groups into maps
            (transform [MAP-VALS] sc/mappify)
            ;; lastly, read our data fields
            (transform [MAP-VALS ALL ALL] read-field)
            )]
  (def a-records (get data 6))
  (def b-records (get data 7))
  (def c-records (get data 11))
  (def d-records (get data 15)))
</pre><span>

While this works for my immediate needs, I find myself navigating to MAP-VALS over and over again, thinking this can probably be done in a more elegant way. Is there a way in Specter to group the four transformations (setval + 3 transforms) into a sub-select of some sort? Should I even care about this type of optimization?</span></div><div id="t1521204298000060" t="2018-03-16 12:44:58 drowsy @marcus165 There is multi-transform with multi-path to group setval and transform together.  (multi-transform [MAP-VALS (multi-path [ALL LAST empty? (terminal-val NONE)]
                                       [FIRST ALL (terminal keify)]
                                       [(terminal sc/mappify)]
                                       [ALL ALL (terminal read-file)])])"><a href="#t1521204298000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-16</span> <span class="t" onclick="H(this)">12:44:58</span>               drowsy </span><span>@marcus165 There is multi-transform with multi-path to group setval and transform together. </span><pre>(multi-transform [MAP-VALS (multi-path [ALL LAST empty? (terminal-val NONE)]
                                       [FIRST ALL (terminal keify)]
                                       [(terminal sc/mappify)]
                                       [ALL ALL (terminal read-file)])])</pre></div><div id="t1521204512000168" t="2018-03-16 12:48:32 Marcus Pemer awesome - thank you @drowsy!"><a href="#t1521204512000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-16</span> <span class="t" onclick="H(this)">12:48:32</span>         Marcus Pemer </span><span>awesome - thank you @drowsy!</span></div><div id="t1521501687000018" t="2018-03-19 23:21:27 phreed I want to navigate through a data structure having at the top a hash-map. What is the best way to start off a  traverse-all  into such a structure?
  (into [] (sr/traverse-all [:foo sr/ALL :bar]) [{:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5}])
Enclosing the object in a vector seems to work. Is that the recommended way to handle this?"><a href="#t1521501687000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-19</span> <span class="t" onclick="H(this)">23:21:27</span>               phreed </span><span>I want to navigate through a data structure having at the top a hash-map. What is the best way to start off a </span><code>traverse-all</code><span> into such a structure?
  (into [] (sr/traverse-all [:foo sr/ALL :bar]) [{:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5}])
Enclosing the object in a vector seems to work. Is that the recommended way to handle this?</span></div><div id="t1521508039000196" t="2018-03-20 01:07:19 nathanmarz @phreed  traverse-all  is for integrating specter with transducers, which is not what you want in this case"><a href="#t1521508039000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">01:07:19</span>           nathanmarz </span><span>@phreed </span><code>traverse-all</code><span> is for integrating specter with transducers, which is not what you want in this case</span></div><div id="t1521508058000334" t="2018-03-20 01:07:38 nathanmarz that can just be done with  select :  (select [:foo ALL :bar] {:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5})"><a href="#t1521508058000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">01:07:38</span>           nathanmarz </span><span>that can just be done with </span><code>select</code><span>: </span><code>(select [:foo ALL :bar] {:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5})</code></div><div id="t1521508109000079" t="2018-03-20 01:08:29 nathanmarz traverse  is useful when you want a non-vector data structure back without materializing any intermediate data structure, e.g.:
 (into #{} (traverse [:foo ALL :bar] {:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5}))
"><a href="#t1521508109000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">01:08:29</span>           nathanmarz </span><code>traverse</code><span> is useful when you want a non-vector data structure back without materializing any intermediate data structure, e.g.:
</span><pre>(into #{} (traverse [:foo ALL :bar] {:foo [{:bar &quot;one&quot; :baz &quot;two&quot;} {:bar &quot;three&quot; :biz &quot;four&quot;} ] :bing 5}))
</pre></div><div id="t1521555393000885" t="2018-03-20 14:16:33 phreed Actually I do want to integrate with other transducers, the example I gave is contrived. I guess the issue is what does it mean to take a step with a single record?"><a href="#t1521555393000885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">14:16:33</span>               phreed </span><span>Actually I do want to integrate with other transducers, the example I gave is contrived. I guess the issue is what does it mean to take a step with a single record?</span></div><div id="t1521556245000362" t="2018-03-20 14:30:45 nathanmarz @phreed transducers operate over collections"><a href="#t1521556245000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">14:30:45</span>           nathanmarz </span><span>@phreed transducers operate over collections</span></div><div id="t1521556324000460" t="2018-03-20 14:32:04 nathanmarz if you show a more complete example of your use case would be easier to help"><a href="#t1521556324000460" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-20</span> <span class="t" onclick="H(this)">14:32:04</span>           nathanmarz </span><span>if you show a more complete example of your use case would be easier to help</span></div><div id="t1521689916000084" t="2018-03-22 03:38:36 pablore how would i write a deep-merge-right with specter?"><a href="#t1521689916000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-22</span> <span class="t" onclick="H(this)">03:38:36</span>              pablore </span><span>how would i write a deep-merge-right with specter?</span></div><div id="t1521696156000003" t="2018-03-22 05:22:36 nathanmarz @pablore that&apos;s outside the scope of specter"><a href="#t1521696156000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-22</span> <span class="t" onclick="H(this)">05:22:36</span>           nathanmarz </span><span>@pablore that&apos;s outside the scope of specter</span></div><div id="t1521738147000179" t="2018-03-22 17:02:27 pablore Thats too bad. I have a very ugly solution and thought maybe with specter I could get a more readable one"><a href="#t1521738147000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-22</span> <span class="t" onclick="H(this)">17:02:27</span>                   pablore </span><span>Thats too bad. I have a very ugly solution and thought maybe with specter I could get a more readable one</span></div><div id="t1521805186000008" t="2018-03-23 11:39:46 Peter Wilkins Hello - noob question. I&apos;m trying to use transform to reverse the values in a map:
 (transform [ALL :average]
   reverse
            [{:average 0.14479934967087002}
             {:average 0.7736362292522883}
             {:average 0.6189089834018306}
             {:average 0.6188565442780262}]) 
but I get Don&apos;t know how to create ISeq from: java.lang.Double"><a href="#t1521805186000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-23</span> <span class="t" onclick="H(this)">11:39:46</span>        Peter Wilkins </span><span>Hello - noob question. I&apos;m trying to use transform to reverse the values in a map:
</span><pre>(transform [ALL :average]
   reverse
            [{:average 0.14479934967087002}
             {:average 0.7736362292522883}
             {:average 0.6189089834018306}
             {:average 0.6188565442780262}])</pre><span>
but I get Don&apos;t know how to create ISeq from: java.lang.Double</span></div><div id="t1521807826000339" t="2018-03-23 12:23:46 nathanmarz @poppetew that&apos; because you&apos;re navigating to the individual values, so  reverse  is being applied to each of them"><a href="#t1521807826000339" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-23</span> <span class="t" onclick="H(this)">12:23:46</span>           nathanmarz </span><span>@poppetew that&apos; because you&apos;re navigating to the individual values, so </span><code>reverse</code><span> is being applied to each of them</span></div><div id="t1521807832000486" t="2018-03-23 12:23:52 nathanmarz the correct way to do that is:
 (transform (subselect ALL :average)
   reverse
   [{:average 0.14479934967087002}
    {:average 0.7736362292522883}
    {:average 0.6189089834018306}
    {:average 0.6188565442780262}])
"><a href="#t1521807832000486" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-23</span> <span class="t" onclick="H(this)">12:23:52</span>           nathanmarz </span><span>the correct way to do that is:
</span><pre>(transform (subselect ALL :average)
   reverse
   [{:average 0.14479934967087002}
    {:average 0.7736362292522883}
    {:average 0.6189089834018306}
    {:average 0.6188565442780262}])
</pre></div><div id="t1521807847000180" t="2018-03-23 12:24:07 nathanmarz subselect  lets you manipulate an arbitrary selection as a sequence, with changes applied at the original locations"><a href="#t1521807847000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-23</span> <span class="t" onclick="H(this)">12:24:07</span>           nathanmarz </span><code>subselect</code><span> lets you manipulate an arbitrary selection as a sequence, with changes applied at the original locations</span></div><div id="t1521809068000350" t="2018-03-23 12:44:28 Peter Wilkins magic - thanks"><a href="#t1521809068000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-23</span> <span class="t" onclick="H(this)">12:44:28</span>        Peter Wilkins </span><span>magic - thanks</span></div><div id="t1522239258000092" t="2018-03-28 12:14:18 axrs Hi all  🙂  
Is it possible to transform a collection and update in-place? For a simplified example, say I have a vector of  [1 2 3 4 5 ...] . 
The first iteration happens on index 0 first (`value 1 in this case`)  and adds 10 to the value to give 11 and updates the collection  [11 2 3 4 5...] .
The second iteration happens on index 1 (value  2 ), but uses an updated collection, i.e.  [11 2 3 4 5 ...] ."><a href="#t1522239258000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">12:14:18</span>                 axrs </span><span>Hi all </span><b>🙂</b><span> 
Is it possible to transform a collection and update in-place? For a simplified example, say I have a vector of </span><code>[1 2 3 4 5 ...]</code><span>. 
The first iteration happens on index 0 first (`value 1 in this case`)  and adds 10 to the value to give 11 and updates the collection </span><code>[11 2 3 4 5...]</code><span>.
The second iteration happens on index 1 (value </span><code>2</code><span>), but uses an updated collection, i.e. </span><code>[11 2 3 4 5 ...]</code><span>.</span></div><div id="t1522240461000491" t="2018-03-28 12:34:21 axrs I suppose what I need is a transient transform"><a href="#t1522240461000491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">12:34:21</span>                 axrs </span><span>I suppose what I need is a transient transform</span></div><div id="t1522257875000414" t="2018-03-28 17:24:35 nathanmarz @axrs not sure what you mean"><a href="#t1522257875000414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">17:24:35</span>           nathanmarz </span><span>@axrs not sure what you mean</span></div><div id="t1522257922000002" t="2018-03-28 17:25:22 nathanmarz you want the entire collection passed to the update function?"><a href="#t1522257922000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">17:25:22</span>           nathanmarz </span><span>you want the entire collection passed to the update function?</span></div><div id="t1522275129000201" t="2018-03-28 22:12:09 axrs hmm. Not quite. using sp/VAL I can get the entire collection. I&apos;m updating a single key for each map in a vector. As the transformation moves through the maps, they use values from a previous map entry to perform a calculation and provide a result.

 (def col [{:a 1} {:a 5} {:a 9}]) 

My transformation for each map entry would be
1. Get the previous map value for :a
2. Multiply that by 2 and add 8
3. Add to the current map value for :a
4. persist back into collection"><a href="#t1522275129000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:12:09</span>                 axrs </span><span>hmm. Not quite. using sp/VAL I can get the entire collection. I&apos;m updating a single key for each map in a vector. As the transformation moves through the maps, they use values from a previous map entry to perform a calculation and provide a result.

</span><code>(def col [{:a 1} {:a 5} {:a 9}])</code><span>

My transformation for each map entry would be
1. Get the previous map value for :a
2. Multiply that by 2 and add 8
3. Add to the current map value for :a
4. persist back into collection</span></div><div id="t1522275291000016" t="2018-03-28 22:14:51 axrs As a rough approximation. The actual calculation for the new value is more involved, but it requires an updated  col  as the transformation moves through"><a href="#t1522275291000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:14:51</span>                 axrs </span><span>As a rough approximation. The actual calculation for the new value is more involved, but it requires an updated </span><code>col</code><span> as the transformation moves through</span></div><div id="t1522276193000120" t="2018-03-28 22:29:53 nathanmarz @axrs that&apos;s a perfect use case for zipper navigators"><a href="#t1522276193000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:29:53</span>           nathanmarz </span><span>@axrs that&apos;s a perfect use case for zipper navigators</span></div><div id="t1522276196000453" t="2018-03-28 22:29:56 nathanmarz (require &apos;[com.rpl.specter.zipper :as z])
(transform
  [z/VECTOR-ZIP
   z/DOWN
   z/NEXT
   z/NEXT-WALK
   (collect-one z/PREV z/NODE :a)
   z/NODE
   :a]
  (fn [v curr]
    (+ curr (* 2 v) 8))
  col)
"><a href="#t1522276196000453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:29:56</span>           nathanmarz </span><pre>(require &apos;[com.rpl.specter.zipper :as z])
(transform
  [z/VECTOR-ZIP
   z/DOWN
   z/NEXT
   z/NEXT-WALK
   (collect-one z/PREV z/NODE :a)
   z/NODE
   :a]
  (fn [v curr]
    (+ curr (* 2 v) 8))
  col)
</pre></div><div id="t1522276451000171" t="2018-03-28 22:34:11 axrs Ooo. That&apos;s a lot to consume, but looks like it would do the job. Thanks @nathanmarz, I&apos;ll have a look into it"><a href="#t1522276451000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:34:11</span>                 axrs </span><span>Ooo. That&apos;s a lot to consume, but looks like it would do the job. Thanks @nathanmarz, I&apos;ll have a look into it</span></div><div id="t1522276563000134" t="2018-03-28 22:36:03 nathanmarz this will be helpful for you  https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1522276563000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-28</span> <span class="t" onclick="H(this)">22:36:03</span>           nathanmarz </span><span>this will be helpful for you </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1522447413000098" t="2018-03-30 22:03:33 spieden trying to recursively remove map entries with nil values. here’s a start on the path:  (def nil-map-entries
  (spr/recursive-path [] p
    (spr/cond-path
      #(and (instance? MapEntry %)
            (nil? (val %)))
      spr/STAY

      #(coll? %)
      [spr/ALL p])))
  although i can select them with this, transforming doesn’t seem to match on them:  (spr/select [nil-map-entries] {:foo nil :bar :bam})
=&gt; [[:foo nil]]
(spr/transform [nil-map-entries] (constantly spr/NONE) {:foo nil :bar :bam})
=&gt; {:foo nil, :bar :bam}  never experienced this kind of incongruity"><a href="#t1522447413000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:03:33</span>              spieden </span><span>trying to recursively remove map entries with nil values. here’s a start on the path: </span><pre>(def nil-map-entries
  (spr/recursive-path [] p
    (spr/cond-path
      #(and (instance? MapEntry %)
            (nil? (val %)))
      spr/STAY

      #(coll? %)
      [spr/ALL p])))
</pre><span> although i can select them with this, transforming doesn’t seem to match on them: </span><pre>(spr/select [nil-map-entries] {:foo nil :bar :bam})
=&gt; [[:foo nil]]
(spr/transform [nil-map-entries] (constantly spr/NONE) {:foo nil :bar :bam})
=&gt; {:foo nil, :bar :bam}</pre><span> never experienced this kind of incongruity</span></div><div id="t1522448458000082" t="2018-03-30 22:20:58 nathanmarz @spieden specter navigates to vector for map entries on transform, not  MapEntry  object"><a href="#t1522448458000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:20:58</span>           nathanmarz </span><span>@spieden specter navigates to vector for map entries on transform, not </span><code>MapEntry</code><span> object</span></div><div id="t1522448522000192" t="2018-03-30 22:22:02 nathanmarz I suggest handling maps separately from other collections in your path, which will make navigation more explicit and remove the need to check the type"><a href="#t1522448522000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:22:02</span>           nathanmarz </span><span>I suggest handling maps separately from other collections in your path, which will make navigation more explicit and remove the need to check the type</span></div><div id="t1522449682000068" t="2018-03-30 22:41:22 spieden ahh"><a href="#t1522449682000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:41:22</span>              spieden </span><span>ahh</span></div><div id="t1522449694000048" t="2018-03-30 22:41:34 spieden ok thanks! @nathanmarz"><a href="#t1522449694000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:41:34</span>              spieden </span><span>ok thanks! @nathanmarz</span></div><div id="t1522450155000265" t="2018-03-30 22:49:15 spieden here’s what i wound up with, for posterity:  (def nil-map-entries
  (spr/recursive-path [] p
    (spr/cond-path
      map?
      [spr/ALL (spr/if-path #(nil? (second %))
                            spr/STAY
                            p)]

      #(coll? %)
      [spr/ALL p])))   (spr/transform [nil-map-entries] (constantly spr/NONE) {:foo {:baz nil} :bar :bam})
=&gt; {:foo {}, :bar :bam}"><a href="#t1522450155000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-30</span> <span class="t" onclick="H(this)">22:49:15</span>              spieden </span><span>here’s what i wound up with, for posterity: </span><pre>(def nil-map-entries
  (spr/recursive-path [] p
    (spr/cond-path
      map?
      [spr/ALL (spr/if-path #(nil? (second %))
                            spr/STAY
                            p)]

      #(coll? %)
      [spr/ALL p])))</pre><span> </span><pre>(spr/transform [nil-map-entries] (constantly spr/NONE) {:foo {:baz nil} :bar :bam})
=&gt; {:foo {}, :bar :bam}</pre></div><div id="t1522470239000077" t="2018-03-31 04:23:59 nathanmarz @spieden this is a more flexible way to approach that:
 (def MAP-NODES
  (recursive-path [] p
    (cond-path
      map? (stay-then-continue MAP-VALS p)
      coll? [ALL p]
      )))

(setval [MAP-NODES MAP-VALS nil?] NONE {:foo {:baz nil} :bar :bam})
"><a href="#t1522470239000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-31</span> <span class="t" onclick="H(this)">04:23:59</span>           nathanmarz </span><span>@spieden this is a more flexible way to approach that:
</span><pre>(def MAP-NODES
  (recursive-path [] p
    (cond-path
      map? (stay-then-continue MAP-VALS p)
      coll? [ALL p]
      )))

(setval [MAP-NODES MAP-VALS nil?] NONE {:foo {:baz nil} :bar :bam})
</pre></div><div id="t1522470282000039" t="2018-03-31 04:24:42 nathanmarz MAP-NODES  could then be used for other things besides nil filtering"><a href="#t1522470282000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-31</span> <span class="t" onclick="H(this)">04:24:42</span>           nathanmarz </span><code>MAP-NODES</code><span> could then be used for other things besides nil filtering</span></div><div id="t1522470550000007" t="2018-03-31 04:29:10 spieden indeed! thanks"><a href="#t1522470550000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-31</span> <span class="t" onclick="H(this)">04:29:10</span>              spieden </span><span>indeed! thanks</span></div><div id="t1522749466000370" t="2018-04-03 09:57:46 Marcus Pemer I came across an interesting cunundrum this weekend and my initial attempts to find answers in the documentation has come up short. Hopefully someone on this channel will have a better grasp on things than I do.

Suppose I had a three-layer data structure of maps. I would like to run a transformation on the leaves, similar to this:
 (transform [MAP-VALS MAP-VALS :b] str/capitalize
           {:top-key-a
            {:middle-key-aa {:a &quot;a&quot; :b &quot;b&quot; :c &quot;c&quot;}
             :middle-key-ab {:a &quot;a&quot; :b &quot;b&quot; :c &quot;c&quot;}}
            :top-key-b
            {:middle-key-ba {:a &quot;x&quot; :b &quot;y&quot; :c &quot;z&quot;}
             :middle-key-bb {:a &quot;u&quot; :b &quot;v&quot; :c &quot;w&quot;}}})
 
Which yields:
 {:top-key-a
 {:middle-key-aa {:a &quot;a&quot;, :b &quot;B&quot;, :c &quot;c&quot;},
  :middle-key-ab {:a &quot;a&quot;, :b &quot;B&quot;, :c &quot;c&quot;}},
 :top-key-b
 {:middle-key-ba {:a &quot;z&quot;, :b &quot;Y&quot;, :c &quot;z&quot;},
  :middle-key-bb {:a &quot;u&quot;, :b &quot;V&quot;, :c &quot;w&quot;}}}
 

Now, suppose I want to run a slightly more complex transformation on the leaves. Instead of running  str/capitalize , which only takes the element itself as input, I would like to run my own custom function that takes the element to be transformed along with the ancestor keys following the path to the element. In this case I would like my transformation function to take  :top-key-n  and  :middle-key-xy . The actual invocations of my transform function would then look something like this:
 (my-xform :top-key-a :middle-key-aa :b &quot;b&quot;)
(my-xform :top-key-a :middle-key-ab :b &quot;b&quot;)
(my-xform :top-key-b :middle-key-ba :b &quot;y&quot;)
(my-xform :top-key-b :middle-key-bb :b &quot;v&quot;)
 
Is there an idiomatic way to achieve this in Specter? Any advice appreciated."><a href="#t1522749466000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">09:57:46</span>         Marcus Pemer </span><span>I came across an interesting cunundrum this weekend and my initial attempts to find answers in the documentation has come up short. Hopefully someone on this channel will have a better grasp on things than I do.

Suppose I had a three-layer data structure of maps. I would like to run a transformation on the leaves, similar to this:
</span><pre>(transform [MAP-VALS MAP-VALS :b] str/capitalize
           {:top-key-a
            {:middle-key-aa {:a &quot;a&quot; :b &quot;b&quot; :c &quot;c&quot;}
             :middle-key-ab {:a &quot;a&quot; :b &quot;b&quot; :c &quot;c&quot;}}
            :top-key-b
            {:middle-key-ba {:a &quot;x&quot; :b &quot;y&quot; :c &quot;z&quot;}
             :middle-key-bb {:a &quot;u&quot; :b &quot;v&quot; :c &quot;w&quot;}}})
</pre><span>
Which yields:
</span><pre>{:top-key-a
 {:middle-key-aa {:a &quot;a&quot;, :b &quot;B&quot;, :c &quot;c&quot;},
  :middle-key-ab {:a &quot;a&quot;, :b &quot;B&quot;, :c &quot;c&quot;}},
 :top-key-b
 {:middle-key-ba {:a &quot;z&quot;, :b &quot;Y&quot;, :c &quot;z&quot;},
  :middle-key-bb {:a &quot;u&quot;, :b &quot;V&quot;, :c &quot;w&quot;}}}
</pre><span>

Now, suppose I want to run a slightly more complex transformation on the leaves. Instead of running </span><code>str/capitalize</code><span>, which only takes the element itself as input, I would like to run my own custom function that takes the element to be transformed along with the ancestor keys following the path to the element. In this case I would like my transformation function to take </span><code>:top-key-n</code><span> and </span><code>:middle-key-xy</code><span>. The actual invocations of my transform function would then look something like this:
</span><pre>(my-xform :top-key-a :middle-key-aa :b &quot;b&quot;)
(my-xform :top-key-a :middle-key-ab :b &quot;b&quot;)
(my-xform :top-key-b :middle-key-ba :b &quot;y&quot;)
(my-xform :top-key-b :middle-key-bb :b &quot;v&quot;)
</pre><span>
Is there an idiomatic way to achieve this in Specter? Any advice appreciated.</span></div><div id="t1522757667000256" t="2018-04-03 12:14:27 drowsy @marcus165 not sure if it&apos;s the most idiomatic way, but you can use  collect  /  collect-one  to collect the keys on the way."><a href="#t1522757667000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">12:14:27</span>               drowsy </span><span>@marcus165 not sure if it&apos;s the most idiomatic way, but you can use </span><code>collect</code><span> / </span><code>collect-one</code><span> to collect the keys on the way.</span></div><div id="t1522757695000125" t="2018-04-03 12:14:55 drowsy You can even use a recursive path here to climb down arbitrary nested maps"><a href="#t1522757695000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">12:14:55</span>               drowsy </span><span>You can even use a recursive path here to climb down arbitrary nested maps</span></div><div id="t1522757738000499" t="2018-04-03 12:15:38 drowsy (def MAP-KV-NODES
  (recursive-path [] p
     (cond-path
       map? [ALL (collect-one FIRST) LAST p]
       :else STAY)))
(transform [MAP-KV-NODES] myx-form data)"><a href="#t1522757738000499" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">12:15:38</span>               drowsy </span><pre>(def MAP-KV-NODES
  (recursive-path [] p
     (cond-path
       map? [ALL (collect-one FIRST) LAST p]
       :else STAY)))
(transform [MAP-KV-NODES] myx-form data)</pre></div><div id="t1522757848000305" t="2018-04-03 12:17:28 drowsy slightly tricky part is, that you need to navigate to the key/value pairs of a map using  ALL , collect the key with  FIRST  and navigate to its val with  LAST"><a href="#t1522757848000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">12:17:28</span>               drowsy </span><span>slightly tricky part is, that you need to navigate to the key/value pairs of a map using </span><code>ALL</code><span>, collect the key with </span><code>FIRST</code><span> and navigate to its val with </span><code>LAST</code></div><div id="t1522760322000644" t="2018-04-03 12:58:42 nathanmarz @marcus165 @drowsy yes, value collection is the idiomatic way to do that"><a href="#t1522760322000644" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">12:58:42</span>           nathanmarz </span><span>@marcus165 @drowsy yes, value collection is the idiomatic way to do that</span></div><div id="t1522760485000386" t="2018-04-03 13:01:25 nathanmarz can easily make a wrapper around  [ALL (collect-one FIRST) LAST]  so you can do  (transform [MY-MAP-VALS MY-MAP-VALS MAP-VALS] (fn [top middle v] ...) data)"><a href="#t1522760485000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">13:01:25</span>           nathanmarz </span><span>can easily make a wrapper around </span><code>[ALL (collect-one FIRST) LAST]</code><span> so you can do </span><code>(transform [MY-MAP-VALS MY-MAP-VALS MAP-VALS] (fn [top middle v] ...) data)</code></div><div id="t1522761141000007" t="2018-04-03 13:12:21 Marcus Pemer Thank you @drowsy and @nathanmarz - that helped; I am now both enlightened and unblocked."><a href="#t1522761141000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">13:12:21</span>         Marcus Pemer </span><span>Thank you @drowsy and @nathanmarz - that helped; I am now both enlightened and unblocked.</span></div><div id="t1522761871000345" t="2018-04-03 13:24:31 nathanmarz @marcus784 take a look at &quot;Value Collection&quot; under  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet  to see all the things you can do with collected values"><a href="#t1522761871000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-03</span> <span class="t" onclick="H(this)">13:24:31</span>           nathanmarz </span><span>@marcus784 take a look at &quot;Value Collection&quot; under </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a><span> to see all the things you can do with collected values</span></div><div id="t1522828972000279" t="2018-04-04 08:02:52 Marcus Pemer Thank you @nathanmarz - after looking at the main readme.md I found a section that clearly documents this as well - this paragraph says it all:

&gt; When doing more involved transformations, you often find you lose context when navigating deep within a data structure and need information &quot;up&quot; the data structure to perform the transformation. Specter solves this problem by allowing you to collect values during navigation to use in the transform function.

In retrospect I don&apos;t know how I missed it. Thanks again."><a href="#t1522828972000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">08:02:52</span>         Marcus Pemer </span><span>Thank you @nathanmarz - after looking at the main readme.md I found a section that clearly documents this as well - this paragraph says it all:

&gt; When doing more involved transformations, you often find you lose context when navigating deep within a data structure and need information &quot;up&quot; the data structure to perform the transformation. Specter solves this problem by allowing you to collect values during navigation to use in the transform function.

In retrospect I don&apos;t know how I missed it. Thanks again.</span></div><div id="t1522868895000146" t="2018-04-04 19:08:15 levitanong @nathanmarz is there any plan to publish 1.1.1-SNAPSHOT in clojars?"><a href="#t1522868895000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">19:08:15</span>           levitanong </span><span>@nathanmarz is there any plan to publish 1.1.1-SNAPSHOT in clojars?</span></div><div id="t1522869930000168" t="2018-04-04 19:25:30 nathanmarz @levitanong just published it"><a href="#t1522869930000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">19:25:30</span>           nathanmarz </span><span>@levitanong just published it</span></div><div id="t1522869993000393" t="2018-04-04 19:26:33 levitanong Thanks @nathanmarz !"><a href="#t1522869993000393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">19:26:33</span>           levitanong </span><span>Thanks @nathanmarz !</span></div><div id="t1522880604000205" t="2018-04-04 22:23:24 justinlee I’m having an issue in my reagent project where I’m getting atom updates unexpectedly.  I tried to debug this issue by creating an Error object in my add-watch and printing out the stack trace, but the stack bottoms out at this line:  com.rpl.specter.impl.combine_two_navs.com.rpl.specter.impl.t_com$rpl$specter$$rpl$specter$protocols$RichNavigator$transform_STAR_$arity$4 ()   Any idea why I’m losing stack context beyond this line?  I’d really like to figure out where in my code I’m calling specter that is doing this, but it is hard.  I wasn’t expecting specter to be async."><a href="#t1522880604000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:23:24</span>            justinlee </span><span>I’m having an issue in my reagent project where I’m getting atom updates unexpectedly.  I tried to debug this issue by creating an Error object in my add-watch and printing out the stack trace, but the stack bottoms out at this line: </span><pre>com.rpl.specter.impl.combine_two_navs.com.rpl.specter.impl.t_com$rpl$specter$$rpl$specter$protocols$RichNavigator$transform_STAR_$arity$4 ()</pre><span>  Any idea why I’m losing stack context beyond this line?  I’d really like to figure out where in my code I’m calling specter that is doing this, but it is hard.  I wasn’t expecting specter to be async.</span></div><div id="t1522881250000436" t="2018-04-04 22:34:10 nathanmarz @lee.justin.m there&apos;s nothing async or lazy about specter"><a href="#t1522881250000436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:34:10</span>           nathanmarz </span><span>@lee.justin.m there&apos;s nothing async or lazy about specter</span></div><div id="t1522881291000379" t="2018-04-04 22:34:51 nathanmarz whenever i have an error with an unexpected stack trace I look to see if I&apos;m inadvertently using laziness somewhere"><a href="#t1522881291000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:34:51</span>           nathanmarz </span><span>whenever i have an error with an unexpected stack trace I look to see if I&apos;m inadvertently using laziness somewhere</span></div><div id="t1522881327000076" t="2018-04-04 22:35:27 nathanmarz e.g. if you&apos;re doing  (map #(transform ...) aseq)  and not realizing the result until later on"><a href="#t1522881327000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:35:27</span>           nathanmarz </span><span>e.g. if you&apos;re doing </span><code>(map #(transform ...) aseq)</code><span> and not realizing the result until later on</span></div><div id="t1522881553000003" t="2018-04-04 22:39:13 justinlee thanks @nathanmarz.  i’m probably misunderstanding something about laziness, but wouldn’t i see the lazy function at the bottom of the stack instead of seeing specter at the bottom?  that’s the part that is confusing me."><a href="#t1522881553000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:39:13</span>            justinlee </span><span>thanks @nathanmarz.  i’m probably misunderstanding something about laziness, but wouldn’t i see the lazy function at the bottom of the stack instead of seeing specter at the bottom?  that’s the part that is confusing me.</span></div><div id="t1522881579000175" t="2018-04-04 22:39:39 justinlee hm, now that i’m saying this out loud, maybe its because i’m in a go block?  that can shear stack traces."><a href="#t1522881579000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:39:39</span>            justinlee </span><span>hm, now that i’m saying this out loud, maybe its because i’m in a go block?  that can shear stack traces.</span></div><div id="t1522882033000267" t="2018-04-04 22:47:13 nathanmarz not sure, I don&apos;t use core.async"><a href="#t1522882033000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:47:13</span>           nathanmarz </span><span>not sure, I don&apos;t use core.async</span></div><div id="t1522882704000076" t="2018-04-04 22:58:24 justinlee ah yea that was it.  the one piece of async code that doesn’t log. too bad my little stacktrace trick doesn’t work across async boundaries.  sorry for the noise."><a href="#t1522882704000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-04</span> <span class="t" onclick="H(this)">22:58:24</span>            justinlee </span><span>ah yea that was it.  the one piece of async code that doesn’t log. too bad my little stacktrace trick doesn’t work across async boundaries.  sorry for the noise.</span></div><div id="t1522946416000289" t="2018-04-05 16:40:16 frenata Having a weird issue where specter is failing only inside a cljs cider repl connection. Fine everywhere else: in the browser, in clj cider connections, and in a figwheel repl. Entirely possible this isn&apos;t especially specter related but I&apos;m stumped."><a href="#t1522946416000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-05</span> <span class="t" onclick="H(this)">16:40:16</span>              frenata </span><span>Having a weird issue where specter is failing only inside a cljs cider repl connection. Fine everywhere else: in the browser, in clj cider connections, and in a figwheel repl. Entirely possible this isn&apos;t especially specter related but I&apos;m stumped.</span></div><div id="t1523043663000349" t="2018-04-06 19:41:03 justinlee are there any tricks to bringing the size of specter down?  it adds 178k before gzipping, which is a bit painful"><a href="#t1523043663000349" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:41:03</span>            justinlee </span><span>are there any tricks to bringing the size of specter down?  it adds 178k before gzipping, which is a bit painful</span></div><div id="t1523044529000354" t="2018-04-06 19:55:29 nathanmarz @lee.justin.m the navigators are completely independent from each other, so you could fork the project and remove any navigators you don&apos;t use"><a href="#t1523044529000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:55:29</span>           nathanmarz </span><span>@lee.justin.m the navigators are completely independent from each other, so you could fork the project and remove any navigators you don&apos;t use</span></div><div id="t1523044575000557" t="2018-04-06 19:56:15 justinlee @nathanmarz ah cool that’s good to know down the line.  i’ll still use it even it if is 178k  🙂"><a href="#t1523044575000557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:56:15</span>            justinlee </span><span>@nathanmarz ah cool that’s good to know down the line.  i’ll still use it even it if is 178k </span><b>🙂</b></div><div id="t1523044606000263" t="2018-04-06 19:56:46 nathanmarz I don&apos;t really use cljs, but I was under the impression it did that kind of dead code elimination automatically"><a href="#t1523044606000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:56:46</span>           nathanmarz </span><span>I don&apos;t really use cljs, but I was under the impression it did that kind of dead code elimination automatically</span></div><div id="t1523044639000469" t="2018-04-06 19:57:19 justinlee DCE is a black art.  hard to say what it is doing"><a href="#t1523044639000469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:57:19</span>            justinlee </span><span>DCE is a black art.  hard to say what it is doing</span></div><div id="t1523044656000217" t="2018-04-06 19:57:36 justinlee maybe it already is doing dce"><a href="#t1523044656000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-06</span> <span class="t" onclick="H(this)">19:57:36</span>            justinlee </span><span>maybe it already is doing dce</span></div><div id="t1523065297000119" t="2018-04-07 01:41:37 zlrth I have a datastructure that&apos;s a combination of maps and vectors, with various amounts of nesting:
 [{:user &quot;matt&quot;
  :docs [{:fulltext &quot;the text&quot;
          :url &quot;&quot;
          :fragments []}
         ;; more docs
         ]}
 ;; more maps
 ] 

I want to update the data structure like so

 [{:user &quot;matt&quot;
  :docs [{:fulltext &quot;the text&quot;
          :url &quot;&quot;
          :fragments [{:date &quot;2018&quot; :text &quot;the &quot;}
                      {:date &quot;2017&quot; :text &quot;text&quot;}]}
         ;; more docs
         ]}
 ;; more maps
 ] 

I want to do: &quot;select the map with the key-value pair  :user  and  &quot;matt&quot; , then in the  :doc  vector, select the map with the kv pair  :fulltext  and  &quot;the text&quot;  and conj these two maps&quot;"><a href="#t1523065297000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-07</span> <span class="t" onclick="H(this)">01:41:37</span>                zlrth </span><span>I have a datastructure that&apos;s a combination of maps and vectors, with various amounts of nesting:
</span><pre>[{:user &quot;matt&quot;
  :docs [{:fulltext &quot;the text&quot;
          :url &quot;&quot;
          :fragments []}
         ;; more docs
         ]}
 ;; more maps
 ]</pre><span>

I want to update the data structure like so

</span><pre>[{:user &quot;matt&quot;
  :docs [{:fulltext &quot;the text&quot;
          :url &quot;&quot;
          :fragments [{:date &quot;2018&quot; :text &quot;the &quot;}
                      {:date &quot;2017&quot; :text &quot;text&quot;}]}
         ;; more docs
         ]}
 ;; more maps
 ]</pre><span>

I want to do: &quot;select the map with the key-value pair </span><code>:user</code><span> and </span><code>&quot;matt&quot;</code><span>, then in the </span><code>:doc</code><span> vector, select the map with the kv pair </span><code>:fulltext</code><span> and </span><code>&quot;the text&quot;</code><span> and conj these two maps&quot;</span></div><div id="t1523065946000039" t="2018-04-07 01:52:26 zlrth I skimmed the Navigators docs, and couldn&apos;t find &quot;select the map containing the kv-pair.&quot; I suspect that I&apos;m trying to do something not idiomatic. In theory, I could make this data structure entirely out of nested maps--then this would be trivial--but i don&apos;t know if i can guarantee that a map will have a unique key."><a href="#t1523065946000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-07</span> <span class="t" onclick="H(this)">01:52:26</span>                zlrth </span><span>I skimmed the Navigators docs, and couldn&apos;t find &quot;select the map containing the kv-pair.&quot; I suspect that I&apos;m trying to do something not idiomatic. In theory, I could make this data structure entirely out of nested maps--then this would be trivial--but i don&apos;t know if i can guarantee that a map will have a unique key.</span></div><div id="t1523074193000068" t="2018-04-07 04:09:53 nathanmarz @mfm looks like this:
 (defn map-with-kv [k v]
  (path ALL #(= v (get % k))))

(setval
  [(map-with-kv :user &quot;matt&quot;)
   :docs
   (map-with-kv :fulltext &quot;the text&quot;)
   :fragments
   END
   ]
  [{:date &quot;2018&quot; :text &quot;the &quot;}
   {:date &quot;2017&quot; :text &quot;text&quot;}]
  data)
"><a href="#t1523074193000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-07</span> <span class="t" onclick="H(this)">04:09:53</span>           nathanmarz </span><span>@mfm looks like this:
</span><pre>(defn map-with-kv [k v]
  (path ALL #(= v (get % k))))

(setval
  [(map-with-kv :user &quot;matt&quot;)
   :docs
   (map-with-kv :fulltext &quot;the text&quot;)
   :fragments
   END
   ]
  [{:date &quot;2018&quot; :text &quot;the &quot;}
   {:date &quot;2017&quot; :text &quot;text&quot;}]
  data)
</pre></div><div id="t1523103436000028" t="2018-04-07 12:17:16 zlrth ah, thank you @nathanmarz!"><a href="#t1523103436000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-07</span> <span class="t" onclick="H(this)">12:17:16</span>                zlrth </span><span>ah, thank you @nathanmarz!</span></div><div id="t1523839544000138" t="2018-04-16 00:45:44 steveh2018 Nathan, new to clojure, needed  get-in but will now pursue specter. Can it navigate through ref boundaries in deeply nested combos of maps and vectors?"><a href="#t1523839544000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">00:45:44</span>           steveh2018 </span><span>Nathan, new to clojure, needed  get-in but will now pursue specter. Can it navigate through ref boundaries in deeply nested combos of maps and vectors?</span></div><div id="t1523841512000162" t="2018-04-16 01:18:32 nathanmarz @steveh2009 yes, no problem"><a href="#t1523841512000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">01:18:32</span>           nathanmarz </span><span>@steveh2009 yes, no problem</span></div><div id="t1523841554000045" t="2018-04-16 01:19:14 nathanmarz for navigating into refs you&apos;d need to make your own navigator, but that is very easy – just use  ATOM  as an example:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1081"><a href="#t1523841554000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">01:19:14</span>           nathanmarz </span><span>for navigating into refs you&apos;d need to make your own navigator, but that is very easy – just use </span><code>ATOM</code><span> as an example: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1081" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1081</a></div><div id="t1523841811000042" t="2018-04-16 01:23:31 steveh2018 Fantastic. Off to YouTube to see your talks."><a href="#t1523841811000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">01:23:31</span>           steveh2018 </span><span>Fantastic. Off to YouTube to see your talks.</span></div><div id="t1523911227000124" t="2018-04-16 20:40:27 tanzoniteblack Is there a way I can implement take-while via specter? Specifically, I (eventually down a path) have a sequence of items, and I want to take every item up to (and including) a certain value.

Example:
 [{:id :a} {:id :b} {:id :c} {:id :d}]
;; up to (&amp; including) index: :c
;; ==&gt; [{:id :a} {:id :b} {:id :c}]
 

current implementation using  split-with :

 (let [[steps-before steps-after] (split-with #(not= (:id %) :c) [{:id :a} {:id :b} {:id :c} {:id :d}])]
     (concat steps-before (take 1 steps-after)))
"><a href="#t1523911227000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">20:40:27</span>       tanzoniteblack </span><span>Is there a way I can implement take-while via specter? Specifically, I (eventually down a path) have a sequence of items, and I want to take every item up to (and including) a certain value.

Example:
</span><pre>[{:id :a} {:id :b} {:id :c} {:id :d}]
;; up to (&amp; including) index: :c
;; ==&gt; [{:id :a} {:id :b} {:id :c}]
</pre><span>

current implementation using </span><code>split-with</code><span>:

</span><pre>(let [[steps-before steps-after] (split-with #(not= (:id %) :c) [{:id :a} {:id :b} {:id :c} {:id :d}])]
     (concat steps-before (take 1 steps-after)))
</pre></div><div id="t1523911512000148" t="2018-04-16 20:45:12 nathanmarz @tanzoniteblack you could do it with  srange-dynamic"><a href="#t1523911512000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">20:45:12</span>           nathanmarz </span><span>@tanzoniteblack you could do it with </span><code>srange-dynamic</code></div><div id="t1523911542000277" t="2018-04-16 20:45:42 tanzoniteblack thanks"><a href="#t1523911542000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">20:45:42</span>       tanzoniteblack </span><span>thanks</span></div><div id="t1523911943000595" t="2018-04-16 20:52:23 nathanmarz @tanzoniteblack with  https://github.com/nathanmarz/specter/issues/236  it could be done more efficiently/directly"><a href="#t1523911943000595" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span> <span class="t" onclick="H(this)">20:52:23</span>           nathanmarz </span><span>@tanzoniteblack with </span><a href="https://github.com/nathanmarz/specter/issues/236" target="_blank">https://github.com/nathanmarz/specter/issues/236</a><span> it could be done more efficiently/directly</span></div><div id="t1524084808000556" t="2018-04-18 20:53:28 spieden is there a way to splice a sequence into another starting at a specific index with specter? e.g.  (spr/setval [(spr/before-index 1)] [:a :b] [:x :y])
=&gt; [:x [:a :b] :y]
; want: [:x :a :b :y]"><a href="#t1524084808000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">20:53:28</span>              spieden </span><span>is there a way to splice a sequence into another starting at a specific index with specter? e.g. </span><pre>(spr/setval [(spr/before-index 1)] [:a :b] [:x :y])
=&gt; [:x [:a :b] :y]
; want: [:x :a :b :y]</pre></div><div id="t1524085473000368" t="2018-04-18 21:04:33 drowsy @spieden you can use  srange  to navigate to a subcollection."><a href="#t1524085473000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:04:33</span>               drowsy </span><span>@spieden you can use </span><code>srange</code><span> to navigate to a subcollection.</span></div><div id="t1524085478000277" t="2018-04-18 21:04:38 drowsy (setval [(srange 1 1)] [:a :b] [:x :y]) =&gt; [:x :a :b :y]"><a href="#t1524085478000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:04:38</span>               drowsy </span><pre>(setval [(srange 1 1)] [:a :b] [:x :y]) =&gt; [:x :a :b :y]</pre></div><div id="t1524085496000413" t="2018-04-18 21:04:56 spieden cool thanks! @drowsy"><a href="#t1524085496000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:04:56</span>              spieden </span><span>cool thanks! @drowsy</span></div><div id="t1524085539000361" t="2018-04-18 21:05:39 drowsy in this case you are navigating to an empty subcollection in the middle and replacing it with something nonempty"><a href="#t1524085539000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:05:39</span>               drowsy </span><span>in this case you are navigating to an empty subcollection in the middle and replacing it with something nonempty</span></div><div id="t1524085794000233" t="2018-04-18 21:09:54 spieden yes i had that idea in my head from using sets at some point but didn’t know to look for"><a href="#t1524085794000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:09:54</span>              spieden </span><span>yes i had that idea in my head from using sets at some point but didn’t know to look for</span></div><div id="t1524085808000400" t="2018-04-18 21:10:08 spieden s/to/what to/"><a href="#t1524085808000400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">21:10:08</span>              spieden </span><span>s/to/what to/</span></div><div id="t1524209460000501" t="2018-04-20 07:31:00 levitanong @nathanmarz  https://github.com/nathanmarz/specter/blob/0ceda2115120cbe99ac9b600fce8d94e4575d236/src/clj/com/rpl/specter/impl.cljc#L910 
It seems that this line can’t get deadcode eliminated, so any project that includes specter will always be including  cljs.pprint  in advanced optimization. Any chance this can be handled differently?"><a href="#t1524209460000501" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span> <span class="t" onclick="H(this)">07:31:00</span>           levitanong </span><span>@nathanmarz </span><a href="https://github.com/nathanmarz/specter/blob/0ceda2115120cbe99ac9b600fce8d94e4575d236/src/clj/com/rpl/specter/impl.cljc#L910" target="_blank">https://github.com/nathanmarz/specter/blob/0ceda2115120cbe99ac9b600fce8d94e4575d236/src/clj/com/rpl/specter/impl.cljc#L910</a><span>
It seems that this line can’t get deadcode eliminated, so any project that includes specter will always be including </span><code>cljs.pprint</code><span> in advanced optimization. Any chance this can be handled differently?</span></div><div id="t1524240180000299" t="2018-04-20 16:03:00 nathanmarz @levitanong I&apos;ll have to think about that one"><a href="#t1524240180000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span> <span class="t" onclick="H(this)">16:03:00</span>           nathanmarz </span><span>@levitanong I&apos;ll have to think about that one</span></div><div id="t1524240184000188" t="2018-04-20 16:03:04 nathanmarz can you open an issue for it?"><a href="#t1524240184000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span> <span class="t" onclick="H(this)">16:03:04</span>           nathanmarz </span><span>can you open an issue for it?</span></div><div id="t1524240959000489" t="2018-04-20 16:15:59 levitanong @nathanmarz Will do!"><a href="#t1524240959000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span> <span class="t" onclick="H(this)">16:15:59</span>           levitanong </span><span>@nathanmarz Will do!</span></div><div id="t1524241144000074" t="2018-04-20 16:19:04 levitanong @nathanmarz done  https://github.com/nathanmarz/specter/issues/254"><a href="#t1524241144000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span> <span class="t" onclick="H(this)">16:19:04</span>           levitanong </span><span>@nathanmarz done </span><a href="https://github.com/nathanmarz/specter/issues/254" target="_blank">https://github.com/nathanmarz/specter/issues/254</a></div><div id="t1524497486000212" t="2018-04-23 15:31:26 nathanmarz Released Specter 1.1.1  https://github.com/nathanmarz/specter/blob/master/CHANGES.md"><a href="#t1524497486000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-23</span> <span class="t" onclick="H(this)">15:31:26</span>           nathanmarz </span><span>Released Specter 1.1.1 </span><a href="https://github.com/nathanmarz/specter/blob/master/CHANGES.md" target="_blank">https://github.com/nathanmarz/specter/blob/master/CHANGES.md</a></div><div id="t1524673532000426" t="2018-04-25 16:25:32 souenzzo There is something like  (if-not-path test-path get-path)"><a href="#t1524673532000426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-25</span> <span class="t" onclick="H(this)">16:25:32</span>             souenzzo </span><span>There is something like </span><code>(if-not-path test-path get-path)</code></div><div id="t1524673816000469" t="2018-04-25 16:30:16 nathanmarz @souenzzo 
 (defdynamicnav if-not-path [cond-path path]
  (if-path cond-path STOP path))
"><a href="#t1524673816000469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-25</span> <span class="t" onclick="H(this)">16:30:16</span>           nathanmarz </span><span>@souenzzo 
</span><pre>(defdynamicnav if-not-path [cond-path path]
  (if-path cond-path STOP path))
</pre></div><div id="t1525399370000033" t="2018-05-04 02:02:50 soulflyer I&apos;m trying to use  specter/zipper  to create a custom zipper. I have the  clojure.zip/zipper  working ok, but when I attempt to wrap it using specter/zipper I get this error:
 anh-front.tree&gt; (def tz (specter-tree-zip test-tree))
#object[TypeError TypeError: anh_front.tree.specter_tree_zip.call is not a function]
nil 
Heres the code, I have  clojure.zip  required as  zip  and  specter.zip  required as  sz 
 (defn tree-zip
  &quot;Returns a zipper for tree elements given a root element&quot;
  [root]
  (zip/zipper (complement string?)
              (fn [node] (if (:expanded node)
                           (seq (:children node))))
              (fn [node children]
                (assoc node :children (and children (apply vector children))))
              root))

(def specter-tree-zip (sz/zipper tree-zip)) 
Any idea what I have done wrong?"><a href="#t1525399370000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-04</span> <span class="t" onclick="H(this)">02:02:50</span>            soulflyer </span><span>I&apos;m trying to use </span><code>specter/zipper</code><span> to create a custom zipper. I have the </span><code>clojure.zip/zipper</code><span> working ok, but when I attempt to wrap it using specter/zipper I get this error:
</span><pre>anh-front.tree&gt; (def tz (specter-tree-zip test-tree))
#object[TypeError TypeError: anh_front.tree.specter_tree_zip.call is not a function]
nil</pre><span>
Heres the code, I have </span><code>clojure.zip</code><span> required as </span><code>zip</code><span> and </span><code>specter.zip</code><span> required as </span><code>sz</code><span>
</span><pre>(defn tree-zip
  &quot;Returns a zipper for tree elements given a root element&quot;
  [root]
  (zip/zipper (complement string?)
              (fn [node] (if (:expanded node)
                           (seq (:children node))))
              (fn [node children]
                (assoc node :children (and children (apply vector children))))
              root))

(def specter-tree-zip (sz/zipper tree-zip))</pre><span>
Any idea what I have done wrong?</span></div><div id="t1525400165000023" t="2018-05-04 02:16:05 nathanmarz @soulflyer  sz/zipper  returns a navigator, not a function"><a href="#t1525400165000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-04</span> <span class="t" onclick="H(this)">02:16:05</span>           nathanmarz </span><span>@soulflyer </span><code>sz/zipper</code><span> returns a navigator, not a function</span></div><div id="t1525400175000156" t="2018-05-04 02:16:15 nathanmarz you use it in a path to navigate to the zipper object"><a href="#t1525400175000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-04</span> <span class="t" onclick="H(this)">02:16:15</span>           nathanmarz </span><span>you use it in a path to navigate to the zipper object</span></div><div id="t1525400197000088" t="2018-05-04 02:16:37 nathanmarz e.g.  (transform [specter-tree-zip sz/DOWN ..."><a href="#t1525400197000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-04</span> <span class="t" onclick="H(this)">02:16:37</span>           nathanmarz </span><span>e.g. </span><code>(transform [specter-tree-zip sz/DOWN ...</code></div><div id="t1525400545000084" t="2018-05-04 02:22:25 soulflyer ah, that makes sense. I wrongly assumed I could just drop it in where I had used  clojure.zip/zipper  Thanks!"><a href="#t1525400545000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-04</span> <span class="t" onclick="H(this)">02:22:25</span>            soulflyer </span><span>ah, that makes sense. I wrongly assumed I could just drop it in where I had used </span><code>clojure.zip/zipper</code><span> Thanks!</span></div><div id="t1525479892000093" t="2018-05-05 00:24:52 chromalchemy I am trying to do this:
 (select (srange 0 3) (select [ALL (selected? pred)] collection)) 
Is there a way to pop back up to a view of the collection before selecting each node through ALL, idiomatically in one path, instead of using two functions and nesting one? I&apos;m assuming there would be a transducer-like performance benefit to this, am I right?

Alternatively, can  srange  be used after  ALL  to still filter the root nodes in the collection?"><a href="#t1525479892000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">00:24:52</span>         chromalchemy </span><span>I am trying to do this:
</span><pre>(select (srange 0 3) (select [ALL (selected? pred)] collection))</pre><span>
Is there a way to pop back up to a view of the collection before selecting each node through ALL, idiomatically in one path, instead of using two functions and nesting one? I&apos;m assuming there would be a transducer-like performance benefit to this, am I right?

Alternatively, can </span><code>srange</code><span> be used after </span><code>ALL</code><span> to still filter the root nodes in the collection?</span></div><div id="t1525480204000106" t="2018-05-05 00:30:04 chromalchemy Also, is there a way to do side effects in the middle of a compound path like  [path1 (side-effect-fn) path2]  Or would it better to collect the necessary value for the side effect, then use a transform fn:  (transform [path1 collect path2] #(do (side-effect-fn %1) (main-fn %2)) collection)"><a href="#t1525480204000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">00:30:04</span>         chromalchemy </span><span>Also, is there a way to do side effects in the middle of a compound path like </span><code>[path1 (side-effect-fn) path2]</code><span> Or would it better to collect the necessary value for the side effect, then use a transform fn: </span><pre>(transform [path1 collect path2] #(do (side-effect-fn %1) (main-fn %2)) collection)</pre></div><div id="t1525482706000034" t="2018-05-05 01:11:46 nathanmarz @chromalchemy that first path is best written as  (select-any [(filterer pred) (srange 0 3)] collection)"><a href="#t1525482706000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">01:11:46</span>           nathanmarz </span><span>@chromalchemy that first path is best written as </span><code>(select-any [(filterer pred) (srange 0 3)] collection)</code></div><div id="t1525482734000121" t="2018-05-05 01:12:14 nathanmarz the definition of  filterer  is instructive:  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1137"><a href="#t1525482734000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">01:12:14</span>           nathanmarz </span><span>the definition of </span><code>filterer</code><span> is instructive: </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1137" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1137</a></div><div id="t1525482850000099" t="2018-05-05 01:14:10 nathanmarz you could do side effects in a path with something like:
 (defn side-effect [f]
  (view (fn [v] (f v) v)))
"><a href="#t1525482850000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">01:14:10</span>           nathanmarz </span><span>you could do side effects in a path with something like:
</span><pre>(defn side-effect [f]
  (view (fn [v] (f v) v)))
</pre></div><div id="t1525482860000141" t="2018-05-05 01:14:20 nathanmarz seems weird to me though to do something like that"><a href="#t1525482860000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">01:14:20</span>           nathanmarz </span><span>seems weird to me though to do something like that</span></div><div id="t1525486659000096" t="2018-05-05 02:17:39 chromalchemy @nathanmarz Thank you. I will get to know  subselect  and  select-any ."><a href="#t1525486659000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-05</span> <span class="t" onclick="H(this)">02:17:39</span>         chromalchemy </span><span>@nathanmarz Thank you. I will get to know </span><code>subselect</code><span> and </span><code>select-any</code><span>.</span></div><div id="t1525650235000052" t="2018-05-06 23:43:55 jfntn Can specter do a recursive map traversal, collecting every value and its path?"><a href="#t1525650235000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-06</span> <span class="t" onclick="H(this)">23:43:55</span>                jfntn </span><span>Can specter do a recursive map traversal, collecting every value and its path?</span></div><div id="t1525658904000024" t="2018-05-07 02:08:24 nathanmarz @jfntn yes there&apos;s an example of that on  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure"><a href="#t1525658904000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-07</span> <span class="t" onclick="H(this)">02:08:24</span>           nathanmarz </span><span>@jfntn yes there&apos;s an example of that on </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#find-the-index-route-of-a-value-within-a-data-structure</a></div><div id="t1525663132000141" t="2018-05-07 03:18:52 jfntn Thank you, I should have seen that! Handed up rolling my own it will be interesting to compare perf here"><a href="#t1525663132000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-07</span> <span class="t" onclick="H(this)">03:18:52</span>                     jfntn </span><span>Thank you, I should have seen that! Handed up rolling my own it will be interesting to compare perf here</span></div><div id="t1525794321000155" t="2018-05-08 15:45:21 jjttjj I have a vector of maps:  [{:a 1} {:b 2 :d 4} {:c 3} {:d 4}]  and I want to find the map where :c = 3 and insert another map {:x 100} before it, resulting in  [{:a 1} {:b 2 :d 4} {:x 100} {:c 3} {:d 4}]  What&apos;s the best way to accomplish this in specter?"><a href="#t1525794321000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">15:45:21</span>               jjttjj </span><span>I have a vector of maps: </span><pre>[{:a 1} {:b 2 :d 4} {:c 3} {:d 4}]</pre><span> and I want to find the map where :c = 3 and insert another map {:x 100} before it, resulting in </span><pre>[{:a 1} {:b 2 :d 4} {:x 100} {:c 3} {:d 4}]</pre><span> What&apos;s the best way to accomplish this in specter?</span></div><div id="t1525794403000239" t="2018-05-08 15:46:43 jjttjj (I don&apos;t know the index I need to insert at, just the keys in the map I need to insert before )"><a href="#t1525794403000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">15:46:43</span>               jjttjj </span><span>(I don&apos;t know the index I need to insert at, just the keys in the map I need to insert before )</span></div><div id="t1525794559000765" t="2018-05-08 15:49:19 jjttjj I&apos;ve been messing with INDEXED-VALS and trying to collect the index and then insert the new map, but I&apos;m having trouble getting this to work and am not sure this is the right line of thinking or if there&apos;s a better way"><a href="#t1525794559000765" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">15:49:19</span>               jjttjj </span><span>I&apos;ve been messing with INDEXED-VALS and trying to collect the index and then insert the new map, but I&apos;m having trouble getting this to work and am not sure this is the right line of thinking or if there&apos;s a better way</span></div><div id="t1525795533000325" t="2018-05-08 16:05:33 nathanmarz @jjttjj I would do that with a select followed by a transform:

 (if-let [i (select-first [INDEXED-VALS (selected? LAST :c (pred= 3)) FIRST)] data)]
  (setval (before-index i) {:x 100} data))
"><a href="#t1525795533000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">16:05:33</span>           nathanmarz </span><span>@jjttjj I would do that with a select followed by a transform:

</span><pre>(if-let [i (select-first [INDEXED-VALS (selected? LAST :c (pred= 3)) FIRST)] data)]
  (setval (before-index i) {:x 100} data))
</pre></div><div id="t1525795561000077" t="2018-05-08 16:06:01 nathanmarz you can also do it in a single operation using zippers"><a href="#t1525795561000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">16:06:01</span>           nathanmarz </span><span>you can also do it in a single operation using zippers</span></div><div id="t1525795601000093" t="2018-05-08 16:06:41 nathanmarz https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1525795601000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">16:06:41</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1525795604000088" t="2018-05-08 16:06:44 jjttjj cool, that one works, thanks!"><a href="#t1525795604000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-08</span> <span class="t" onclick="H(this)">16:06:44</span>               jjttjj </span><span>cool, that one works, thanks!</span></div><div id="t1525845264000143" t="2018-05-09 05:54:24 soulflyer I&apos;m seeing a difference in the behaviour of a specter  recursive-path  example (found on stack overflow) in the  clojure repl  and the  clojurescript repl . It works as expected in clojure but throws an error in clojurescript. In clojure I get this:
 user&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]}) 
#&apos;user/data
user&gt; (require &apos;[com.rpl.specter :as specter])
nil
user&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
[&quot;Washing machine&quot; &quot;Ballast&quot; &quot;Hull&quot;]
user&gt; user&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]})
#&apos;user/data
user&gt; (require &apos;[com.rpl.specter :as specter])
nil
user&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
[&quot;Washing machine&quot; &quot;Ballast&quot; &quot;Hull&quot;]
user&gt;  
whereas the same code tried under clojurescript throws an error  Unable to resolve var p :
 anh-front.tree&gt; (require &apos;[com.rpl.specter :as specter])
nil
anh-front.tree&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]})
#&apos;anh-front.tree/data
anh-front.tree&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
----  Could not Analyze  &lt;cljs form&gt;   line:1  column:1  ----

  Unable to resolve var: p in this context at line 1 &lt;cljs repl&gt;

  1                (specter/select
                   ^--- 
  2  [(specter/recursive-path [] p
  3     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
  4   :name]
  5  data)

----  Analysis Error  ----
nil
anh-front.tree&gt;  
Is there something special needed to get recursive-path to play nicely with clojurescript?"><a href="#t1525845264000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-09</span> <span class="t" onclick="H(this)">05:54:24</span>            soulflyer </span><span>I&apos;m seeing a difference in the behaviour of a specter </span><code>recursive-path</code><span> example (found on stack overflow) in the </span><code>clojure repl</code><span> and the </span><code>clojurescript repl</code><span>. It works as expected in clojure but throws an error in clojurescript. In clojure I get this:
</span><pre>user&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]}) 
#&apos;user/data
user&gt; (require &apos;[com.rpl.specter :as specter])
nil
user&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
[&quot;Washing machine&quot; &quot;Ballast&quot; &quot;Hull&quot;]
user&gt; user&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]})
#&apos;user/data
user&gt; (require &apos;[com.rpl.specter :as specter])
nil
user&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
[&quot;Washing machine&quot; &quot;Ballast&quot; &quot;Hull&quot;]
user&gt; </pre><span>
whereas the same code tried under clojurescript throws an error </span><code>Unable to resolve var p</code><span>:
</span><pre>anh-front.tree&gt; (require &apos;[com.rpl.specter :as specter])
nil
anh-front.tree&gt; (def data
  {:items [{:name &quot;Washing machine&quot;
            :subparts [{:name &quot;Ballast&quot; :weight 1}
                       {:name &quot;Hull&quot; :weight 2}]}]})
#&apos;anh-front.tree/data
anh-front.tree&gt; (specter/select
  [(specter/recursive-path [] p
     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
   :name]
  data)
----  Could not Analyze  &lt;cljs form&gt;   line:1  column:1  ----

  Unable to resolve var: p in this context at line 1 &lt;cljs repl&gt;

  1                (specter/select
                   ^--- 
  2  [(specter/recursive-path [] p
  3     [(specter/walker :name) (specter/stay-then-continue [:subparts p])])
  4   :name]
  5  data)

----  Analysis Error  ----
nil
anh-front.tree&gt; </pre><span>
Is there something special needed to get recursive-path to play nicely with clojurescript?</span></div><div id="t1525845322000056" t="2018-05-09 05:55:22 soulflyer example pulled from:  https://stackoverflow.com/questions/42889373/recursive-map-query-using-specter"><a href="#t1525845322000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-09</span> <span class="t" onclick="H(this)">05:55:22</span>                 soulflyer </span><span>example pulled from: </span><a href="https://stackoverflow.com/questions/42889373/recursive-map-query-using-specter" target="_blank">https://stackoverflow.com/questions/42889373/recursive-map-query-using-specter</a></div><div id="t1525868970000345" t="2018-05-09 12:29:30 nathanmarz @soulflyer does it work if you refactor the recursive-path definition out of the select with a let or def?"><a href="#t1525868970000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-09</span> <span class="t" onclick="H(this)">12:29:30</span>           nathanmarz </span><span>@soulflyer does it work if you refactor the recursive-path definition out of the select with a let or def?</span></div><div id="t1525872115000068" t="2018-05-09 13:21:55 souenzzo Doing a cljsbuild with advanced
 May 09, 2018 1:13:26 PM com.google.javascript.jscomp.LoggerErrorManager printSummary
WARNING: 1 error(s), 0 warning(s)
ERROR: JSC_DUPLICATE_PARAM. Parse error. Duplicate parameter name &quot;G__13210_13216&quot; at /workspace/my-cool-project/target/cljsbuild-compiler-0/com/rpl/specter/impl.js line 543 : 32
[31mCompiling [&quot;resources/public/javascript/main.js&quot;] failed.[0m
java.lang.Exception: Closure compilation failed
 
It&apos;s a random error. Tryied to build again and it passes. Has anyone else ever had this problem?
Using:  [com.rpl/specter &quot;1.1.0&quot;] [org.clojure/clojurescript &quot;1.10.238&quot;] 
 https://github.com/nathanmarz/specter/blob/1.1.0/src/clj/com/rpl/specter/impl.cljc#L543"><a href="#t1525872115000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-09</span> <span class="t" onclick="H(this)">13:21:55</span>             souenzzo </span><span>Doing a cljsbuild with advanced
</span><pre>May 09, 2018 1:13:26 PM com.google.javascript.jscomp.LoggerErrorManager printSummary
WARNING: 1 error(s), 0 warning(s)
ERROR: JSC_DUPLICATE_PARAM. Parse error. Duplicate parameter name &quot;G__13210_13216&quot; at /workspace/my-cool-project/target/cljsbuild-compiler-0/com/rpl/specter/impl.js line 543 : 32
[31mCompiling [&quot;resources/public/javascript/main.js&quot;] failed.[0m
java.lang.Exception: Closure compilation failed
</pre><span>
It&apos;s a random error. Tryied to build again and it passes. Has anyone else ever had this problem?
Using: </span><code>[com.rpl/specter &quot;1.1.0&quot;] [org.clojure/clojurescript &quot;1.10.238&quot;]</code><span>
</span><a href="https://github.com/nathanmarz/specter/blob/1.1.0/src/clj/com/rpl/specter/impl.cljc#L543" target="_blank">https://github.com/nathanmarz/specter/blob/1.1.0/src/clj/com/rpl/specter/impl.cljc#L543</a></div><div id="t1525872381000643" t="2018-05-09 13:26:21 soulflyer @nathanmarz yes, seems to work fine if I use  def ."><a href="#t1525872381000643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-09</span> <span class="t" onclick="H(this)">13:26:21</span>            soulflyer </span><span>@nathanmarz yes, seems to work fine if I use </span><code>def</code><span>.</span></div><div id="t1525933461000005" t="2018-05-10 06:24:21 soulflyer I&apos;m having trouble figuring out how to navigate to an entry that could have a variable number of steps. An individual navigate/transform  is easy enough and looks something like this: (sp/transform [(node-named &quot;2002&quot;) :children (node-named &quot;01&quot;) :expanded] invert test-tree) 
However I need to be able to provide a path that could have from 1 to 4 entries. In the above example it would be  [&quot;2002&quot; &quot;01&quot;] . What would be the best way to approach this?
I tried building the navigator with  for  in a  let  statement like this: (defn toggle [tree path]
  (let [nav (conj
              (vec
                (interpose :children (for [p path] (conj (seq [p]) &apos;node-named ))))
              :expanded)]
    (sp/transform nav invert tree)))
 
But although this gives me a value for  nav  that looks exactly right, running it throws  Not a navigator  errors"><a href="#t1525933461000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">06:24:21</span>            soulflyer </span><span>I&apos;m having trouble figuring out how to navigate to an entry that could have a variable number of steps. An individual navigate/transform  is easy enough and looks something like this:</span><pre>(sp/transform [(node-named &quot;2002&quot;) :children (node-named &quot;01&quot;) :expanded] invert test-tree)</pre><span>
However I need to be able to provide a path that could have from 1 to 4 entries. In the above example it would be </span><code>[&quot;2002&quot; &quot;01&quot;]</code><span>. What would be the best way to approach this?
I tried building the navigator with </span><code>for</code><span> in a </span><code>let</code><span> statement like this:</span><pre>(defn toggle [tree path]
  (let [nav (conj
              (vec
                (interpose :children (for [p path] (conj (seq [p]) &apos;node-named ))))
              :expanded)]
    (sp/transform nav invert tree)))
</pre><span>
But although this gives me a value for </span><code>nav</code><span> that looks exactly right, running it throws </span><code>Not a navigator</code><span> errors</span></div><div id="t1525933461000005" t="2018-05-10 06:24:21 soulflyer I&apos;m having trouble figuring out how to navigate to an entry that could have a variable number of steps. An individual navigate/transform  is easy enough and looks something like this: (sp/transform [(node-named &quot;2002&quot;) :children (node-named &quot;01&quot;) :expanded] invert test-tree) 
However I need to be able to provide a path that could have from 1 to 4 entries. In the above example it would be  [&quot;2002&quot; &quot;01&quot;] . What would be the best way to approach this?
I tried building the navigator with  for  in a  let  statement like this: (defn toggle [tree path]
  (let [nav (conj
              (vec
                (interpose :children (for [p path] (conj (seq [p]) &apos;node-named ))))
              :expanded)]
    (sp/transform nav invert tree)))
 
But although this gives me a value for  nav  that looks exactly right, running it throws  Not a navigator  errors"><a href="#t1525933461000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">06:24:21</span>            soulflyer </span><span>I&apos;m having trouble figuring out how to navigate to an entry that could have a variable number of steps. An individual navigate/transform  is easy enough and looks something like this:</span><pre>(sp/transform [(node-named &quot;2002&quot;) :children (node-named &quot;01&quot;) :expanded] invert test-tree)</pre><span>
However I need to be able to provide a path that could have from 1 to 4 entries. In the above example it would be </span><code>[&quot;2002&quot; &quot;01&quot;]</code><span>. What would be the best way to approach this?
I tried building the navigator with </span><code>for</code><span> in a </span><code>let</code><span> statement like this:</span><pre>(defn toggle [tree path]
  (let [nav (conj
              (vec
                (interpose :children (for [p path] (conj (seq [p]) &apos;node-named ))))
              :expanded)]
    (sp/transform nav invert tree)))
</pre><span>
But although this gives me a value for </span><code>nav</code><span> that looks exactly right, running it throws </span><code>Not a navigator</code><span> errors</span></div><div id="t1525933607000072" t="2018-05-10 06:26:47 soulflyer where  node-named   invert  and  test-tree  are: (defn node-named [n]
  (sp/walker #(= (:name %) n)))

(defn invert [b]
  (if b false true))

(def test-tree
  {:name &quot;root&quot;
   :focus [&quot;root&quot;]
   :expanded true
   :children [{:name &quot;2000&quot;
               :expanded true
               :children [{:name &quot;01&quot;
                           :expanded true
                           :children [{:name &quot;project-1&quot;}
                                      {:name &quot;project-2&quot;}]}
                          {:name &quot;02&quot;
                           :expanded true
                           :children [{:name &quot;project-5&quot;}
                                      {:name &quot;project-6&quot;}]}]}
              {:name &quot;2002&quot;
               :expanded false
               :children [{:name &quot;01&quot;
                           :expanded false
                           :children []}]}]})"><a href="#t1525933607000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">06:26:47</span>                 soulflyer </span><span>where </span><code>node-named</code><span> </span><code>invert</code><span> and </span><code>test-tree</code><span> are:</span><pre>(defn node-named [n]
  (sp/walker #(= (:name %) n)))

(defn invert [b]
  (if b false true))

(def test-tree
  {:name &quot;root&quot;
   :focus [&quot;root&quot;]
   :expanded true
   :children [{:name &quot;2000&quot;
               :expanded true
               :children [{:name &quot;01&quot;
                           :expanded true
                           :children [{:name &quot;project-1&quot;}
                                      {:name &quot;project-2&quot;}]}
                          {:name &quot;02&quot;
                           :expanded true
                           :children [{:name &quot;project-5&quot;}
                                      {:name &quot;project-6&quot;}]}]}
              {:name &quot;2002&quot;
               :expanded false
               :children [{:name &quot;01&quot;
                           :expanded false
                           :children []}]}]})</pre></div><div id="t1525939292000207" t="2018-05-10 08:01:32 schmee try something like this: 
 (defn navigator [strs]
  (path (mapcat (fn [s] [:children ALL #(= (:name %) s)]) strs)))
"><a href="#t1525939292000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">08:01:32</span>                    schmee </span><span>try something like this: 
</span><pre>(defn navigator [strs]
  (path (mapcat (fn [s] [:children ALL #(= (:name %) s)]) strs)))
</pre></div><div id="t1525939620000140" t="2018-05-10 08:07:00 schmee also, the  invert  function can be replaced with the core function  not   🙂"><a href="#t1525939620000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">08:07:00</span>                    schmee </span><span>also, the </span><code>invert</code><span> function can be replaced with the core function </span><code>not</code><span> </span><b>🙂</b></div><div id="t1525941542000143" t="2018-05-10 08:39:02 soulflyer @U3L6TFEJF That looks promising, thanks. I&apos;m getting the right node back now. Just got to massage it a bit to toggle :expanded. Which I will do with  not 😳"><a href="#t1525941542000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">08:39:02</span>                 soulflyer </span><span>@U3L6TFEJF That looks promising, thanks. I&apos;m getting the right node back now. Just got to massage it a bit to toggle :expanded. Which I will do with </span><code>not</code><b>😳</b></div><div id="t1525941592000246" t="2018-05-10 08:39:52 schmee remember that you can compose paths with a simple vector:  (transform [(navigator [&quot;2000&quot; &quot;01&quot;]) :expanded] not test-tree)"><a href="#t1525941592000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">08:39:52</span>                    schmee </span><span>remember that you can compose paths with a simple vector: </span><pre>(transform [(navigator [&quot;2000&quot; &quot;01&quot;]) :expanded] not test-tree)</pre></div><div id="t1525942217000005" t="2018-05-10 08:50:17 soulflyer yup, got it working now. Still waiting for the ah-ha moment with specter, but it is doing some useful things even though often I&apos;m not entirely sure why...."><a href="#t1525942217000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">08:50:17</span>                 soulflyer </span><span>yup, got it working now. Still waiting for the ah-ha moment with specter, but it is doing some useful things even though often I&apos;m not entirely sure why....</span></div><div id="t1525945030000077" t="2018-05-10 09:37:10 schmee stick with it!  🙂  like anything worth learning it takes practice but the payoff is worth it IMO"><a href="#t1525945030000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">09:37:10</span>                    schmee </span><span>stick with it! </span><b>🙂</b><span> like anything worth learning it takes practice but the payoff is worth it IMO</span></div><div id="t1525945042000354" t="2018-05-10 09:37:22 schmee you can always ask here if you get stuck  :+1:"><a href="#t1525945042000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-10</span> <span class="t" onclick="H(this)">09:37:22</span>                    schmee </span><span>you can always ask here if you get stuck </span><b>:+1:</b></div><div id="t1526458197000084" t="2018-05-16 08:09:57 montanonic I&apos;m new to Specter and trying to figure out how to express finding all of the numbers in deeply nested data, except for those that are nested within maps (at any depth) containing a particular value.

Finding all the numbers is totally easy,  (traverse (walker number?) data) , it&apos;s the filtering out part that I&apos;m struggling with."><a href="#t1526458197000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">08:09:57</span>           montanonic </span><span>I&apos;m new to Specter and trying to figure out how to express finding all of the numbers in deeply nested data, except for those that are nested within maps (at any depth) containing a particular value.

Finding all the numbers is totally easy, </span><code>(traverse (walker number?) data)</code><span>, it&apos;s the filtering out part that I&apos;m struggling with.</span></div><div id="t1526478924000721" t="2018-05-16 13:55:24 nathanmarz @montanonic if you truly want to do a blind walk (including into map keys, key/value pairs) then you can do it like this:
 (def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [(not-selected? :key (pred= :val)) ALL p]
               coll? [ALL p]
               )))
"><a href="#t1526478924000721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">13:55:24</span>           nathanmarz </span><span>@montanonic if you truly want to do a blind walk (including into map keys, key/value pairs) then you can do it like this:
</span><pre>(def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [(not-selected? :key (pred= :val)) ALL p]
               coll? [ALL p]
               )))
</pre></div><div id="t1526478978000599" t="2018-05-16 13:56:18 nathanmarz if you have any structure to your data, I highly recommend making a path tailored as such"><a href="#t1526478978000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">13:56:18</span>           nathanmarz </span><span>if you have any structure to your data, I highly recommend making a path tailored as such</span></div><div id="t1526497573000696" t="2018-05-16 19:06:13 montanonic The problem I&apos;m solving is just a for-fun code challenge with a pathologically nested data set; I&apos;m not sure how &quot;structured&quot; it is. Thanks for your help! I&apos;m going to need to spend a bit of time to understand what&apos;s going on there, particularly  map? [(not-selected? :key (pred= :val)) ALL p]"><a href="#t1526497573000696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:06:13</span>           montanonic </span><span>The problem I&apos;m solving is just a for-fun code challenge with a pathologically nested data set; I&apos;m not sure how &quot;structured&quot; it is. Thanks for your help! I&apos;m going to need to spend a bit of time to understand what&apos;s going on there, particularly </span><code>map? [(not-selected? :key (pred= :val)) ALL p]</code></div><div id="t1526498320000618" t="2018-05-16 19:18:40 montanonic @nathanmarz Can you elaborate more on  :key  and  :val  in that code? Did you intend them to just be stand-ins?

I also don&apos;t, in this case, need to consider map keys, only values."><a href="#t1526498320000618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:18:40</span>           montanonic </span><span>@nathanmarz Can you elaborate more on </span><code>:key</code><span> and </span><code>:val</code><span> in that code? Did you intend them to just be stand-ins?

I also don&apos;t, in this case, need to consider map keys, only values.</span></div><div id="t1526498502000424" t="2018-05-16 19:21:42 nathanmarz @montanonic yes, those are stand-ins"><a href="#t1526498502000424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:21:42</span>           nathanmarz </span><span>@montanonic yes, those are stand-ins</span></div><div id="t1526498511000127" t="2018-05-16 19:21:51 nathanmarz this is better:
 (def my-walker
  (recursive-path [afn avoid-key avoid-value] p
    (cond-path (pred afn) STAY
               map? [(not-selected? (keypath avoid-key) (pred= avoid-value)) MAP-VALS p]
               coll? [ALL p]
               )))
"><a href="#t1526498511000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:21:51</span>           nathanmarz </span><span>this is better:
</span><pre>(def my-walker
  (recursive-path [afn avoid-key avoid-value] p
    (cond-path (pred afn) STAY
               map? [(not-selected? (keypath avoid-key) (pred= avoid-value)) MAP-VALS p]
               coll? [ALL p]
               )))
</pre></div><div id="t1526498550000549" t="2018-05-16 19:22:30 nathanmarz avoiding parts of data structures that are irrelevant makes a big impact on performance, and also avoids bugs"><a href="#t1526498550000549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:22:30</span>           nathanmarz </span><span>avoiding parts of data structures that are irrelevant makes a big impact on performance, and also avoids bugs</span></div><div id="t1526498574000727" t="2018-05-16 19:22:54 nathanmarz https://github.com/nathanmarz/specter/wiki/Cheat-Sheet  is a good resource for learning what those navigators are"><a href="#t1526498574000727" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:22:54</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a><span> is a good resource for learning what those navigators are</span></div><div id="t1526498581000640" t="2018-05-16 19:23:01 montanonic Since I&apos;m not concerned about the values of the keys themselves, would"><a href="#t1526498581000640" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:23:01</span>           montanonic </span><span>Since I&apos;m not concerned about the values of the keys themselves, would</span></div><div id="t1526498588000686" t="2018-05-16 19:23:08 montanonic [(not-selected? (pred= avoid-value)) MAP-VALS p]"><a href="#t1526498588000686" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:23:08</span>           montanonic </span><code>[(not-selected? (pred= avoid-value)) MAP-VALS p]</code></div><div id="t1526498594000731" t="2018-05-16 19:23:14 montanonic also work? sans   (keypath avoid-key)"><a href="#t1526498594000731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:23:14</span>           montanonic </span><span>also work? sans </span><code> (keypath avoid-key)</code></div><div id="t1526498627000459" t="2018-05-16 19:23:47 montanonic Thanks for that resource! I&apos;ve been reading all the wiki pages repeatedly; they are very good; I just found my use-case to be one of the ones that was harder to figure out from them"><a href="#t1526498627000459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:23:47</span>           montanonic </span><span>Thanks for that resource! I&apos;ve been reading all the wiki pages repeatedly; they are very good; I just found my use-case to be one of the ones that was harder to figure out from them</span></div><div id="t1526498649000583" t="2018-05-16 19:24:09 nathanmarz if you&apos;re avoiding maps which contain a specific value for any key, then do  [(not-selected? MAP-VALS (pred= avoid-value)) MAP-VALS p]"><a href="#t1526498649000583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:24:09</span>           nathanmarz </span><span>if you&apos;re avoiding maps which contain a specific value for any key, then do </span><code>[(not-selected? MAP-VALS (pred= avoid-value)) MAP-VALS p]</code></div><div id="t1526498691000188" t="2018-05-16 19:24:51 montanonic Okay, wonderful. Thank you!"><a href="#t1526498691000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:24:51</span>           montanonic </span><span>Okay, wonderful. Thank you!</span></div><div id="t1526498707000275" t="2018-05-16 19:25:07 montanonic I think that makes total sense"><a href="#t1526498707000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:25:07</span>           montanonic </span><span>I think that makes total sense</span></div><div id="t1526498734000678" t="2018-05-16 19:25:34 nathanmarz with practice this becomes very easy"><a href="#t1526498734000678" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:25:34</span>           nathanmarz </span><span>with practice this becomes very easy</span></div><div id="t1526498831000402" t="2018-05-16 19:27:11 montanonic Wow, totally works. That&apos;s super great. I was struggling to figure out how to filter values, but I can see how  selected  and  not-selected?  help with that. Super!"><a href="#t1526498831000402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">19:27:11</span>           montanonic </span><span>Wow, totally works. That&apos;s super great. I was struggling to figure out how to filter values, but I can see how </span><code>selected</code><span> and </span><code>not-selected?</code><span> help with that. Super!</span></div><div id="t1526505815000061" t="2018-05-16 21:23:35 montanonic Is there a better way to collect multiple keys than:  [ALL (collect-one :a) (collect-one :b) (collect-one :c)] , etc..?"><a href="#t1526505815000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:23:35</span>           montanonic </span><span>Is there a better way to collect multiple keys than: </span><code>[ALL (collect-one :a) (collect-one :b) (collect-one :c)]</code><span>, etc..?</span></div><div id="t1526505994000478" t="2018-05-16 21:26:34 tanzoniteblack @montanonic  (specter/collect (specter/multi-path :a :b :c))"><a href="#t1526505994000478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:26:34</span>       tanzoniteblack </span><span>@montanonic </span><code>(specter/collect (specter/multi-path :a :b :c))</code></div><div id="t1526506008000351" t="2018-05-16 21:26:48 montanonic Great! thanks  🙂"><a href="#t1526506008000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:26:48</span>           montanonic </span><span>Great! thanks </span><b>🙂</b></div><div id="t1526506028000220" t="2018-05-16 21:27:08 tanzoniteblack (specter/select [specter/ALL (specter/collect (specter/multi-path :a :b :c))]
                [{:a &quot;cat&quot; :b &quot;dog&quot; :c &quot;c&quot;}
                 {:a 1 :b 2 :c 3}])  ==&gt;  [[[&quot;cat&quot; &quot;dog&quot; &quot;c&quot;] {:a &quot;cat&quot;, :b &quot;dog&quot;, :c &quot;c&quot;}]
 [[1 2 3] {:a 1, :b 2, :c 3}]]"><a href="#t1526506028000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:27:08</span>       tanzoniteblack </span><pre>(specter/select [specter/ALL (specter/collect (specter/multi-path :a :b :c))]
                [{:a &quot;cat&quot; :b &quot;dog&quot; :c &quot;c&quot;}
                 {:a 1 :b 2 :c 3}])</pre><span> ==&gt; </span><pre>[[[&quot;cat&quot; &quot;dog&quot; &quot;c&quot;] {:a &quot;cat&quot;, :b &quot;dog&quot;, :c &quot;c&quot;}]
 [[1 2 3] {:a 1, :b 2, :c 3}]]</pre></div><div id="t1526506044000245" t="2018-05-16 21:27:24 tanzoniteblack thanks for asking, I&apos;d never actually tried that before"><a href="#t1526506044000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:27:24</span>       tanzoniteblack </span><span>thanks for asking, I&apos;d never actually tried that before</span></div><div id="t1526507157000389" t="2018-05-16 21:45:57 nathanmarz @montanonic @tanzoniteblack can also use  eachnav :
 (select-any [((eachnav collect-one) :a :b :c) :d] {:a 1 :b 2 :c 3 :d 4})
;; =&gt; [1 2 3 4]
"><a href="#t1526507157000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">21:45:57</span>           nathanmarz </span><span>@montanonic @tanzoniteblack can also use </span><code>eachnav</code><span>:
</span><pre>(select-any [((eachnav collect-one) :a :b :c) :d] {:a 1 :b 2 :c 3 :d 4})
;; =&gt; [1 2 3 4]
</pre></div><div id="t1526514103000152" t="2018-05-16 23:41:43 montanonic Is there a more efficient or idiomatic way to do this with specter?

 (every? #(= 2 %) (select [MAP-VALS] coll)) 

That is: tell me if all of the values in a  coll  that is a map are equal to some value, in this case  2 ."><a href="#t1526514103000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-16</span> <span class="t" onclick="H(this)">23:41:43</span>           montanonic </span><span>Is there a more efficient or idiomatic way to do this with specter?

</span><code>(every? #(= 2 %) (select [MAP-VALS] coll))</code><span>

That is: tell me if all of the values in a </span><code>coll</code><span> that is a map are equal to some value, in this case </span><code>2</code><span>.</span></div><div id="t1526515919000331" t="2018-05-17 00:11:59 nathanmarz you could make it slightly more efficient with a version of  every?  that uses reduce"><a href="#t1526515919000331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">00:11:59</span>           nathanmarz </span><span>you could make it slightly more efficient with a version of </span><code>every?</code><span> that uses reduce</span></div><div id="t1526515945000142" t="2018-05-17 00:12:25 nathanmarz then you could use  traverse :  (every-reduce? #(= 2 %) (traverse [MAP-VALS] coll))"><a href="#t1526515945000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">00:12:25</span>           nathanmarz </span><span>then you could use </span><code>traverse</code><span>: </span><code>(every-reduce? #(= 2 %) (traverse [MAP-VALS] coll))</code></div><div id="t1526515958000076" t="2018-05-17 00:12:38 nathanmarz traverse  doesn&apos;t materialize any intermediate data structure"><a href="#t1526515958000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">00:12:38</span>           nathanmarz </span><code>traverse</code><span> doesn&apos;t materialize any intermediate data structure</span></div><div id="t1526516045000096" t="2018-05-17 00:14:05 nathanmarz on second thought this is a much better approach:
 (not (selected-any? [MAP-VALS #(not= 2 %)] coll))
"><a href="#t1526516045000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">00:14:05</span>           nathanmarz </span><span>on second thought this is a much better approach:
</span><pre>(not (selected-any? [MAP-VALS #(not= 2 %)] coll))
</pre></div><div id="t1526516574000029" t="2018-05-17 00:22:54 montanonic ahhh, nice. That&apos;s a good one"><a href="#t1526516574000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">00:22:54</span>           montanonic </span><span>ahhh, nice. That&apos;s a good one</span></div><div id="t1526565392000273" t="2018-05-17 13:56:32 Casey Are there any projects with source available that use specter heavily? Would like to see how specter is used at large in a project"><a href="#t1526565392000273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">13:56:32</span>                Casey </span><span>Are there any projects with source available that use specter heavily? Would like to see how specter is used at large in a project</span></div><div id="t1526566749000346" t="2018-05-17 14:19:09 nathanmarz @ramblurr not that I&apos;m aware of, but at the end of this presentation I showed some of the ways I use it in production for manipulating dags  https://www.youtube.com/watch?v=VTCy_DkAJGk]"><a href="#t1526566749000346" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">14:19:09</span>           nathanmarz </span><span>@ramblurr not that I&apos;m aware of, but at the end of this presentation I showed some of the ways I use it in production for manipulating dags </span><a href="https://www.youtube.com/watch?v=VTCy_DkAJGk]" target="_blank">https://www.youtube.com/watch?v=VTCy_DkAJGk]</a></div><div id="t1526567903000636" t="2018-05-17 14:38:23 Casey thanks @nathanmarz"><a href="#t1526567903000636" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-17</span> <span class="t" onclick="H(this)">14:38:23</span>                Casey </span><span>thanks @nathanmarz</span></div><div id="t1526683102000311" t="2018-05-18 22:38:22 sophiago Question: I have a simple  transform  expression with a recursive navigator very similar to the one in the example that I&apos;m using in a macro to navigate to every symbol in an AST and replace parts of certain ones (unfortunately converting to and from strings and using regex since I only need to replace part of these symbols). I&apos;d also like it to jump one level up in the AST from each match, or more precisely group of matches with the same substring, and wrap it in a list at that point. Can anyone recommend a starting point for thinking about defining a relative path with specter like this? I would ideally like to avoid the perf overhead of two separate  transform s."><a href="#t1526683102000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:38:22</span>             sophiago </span><span>Question: I have a simple </span><code>transform</code><span> expression with a recursive navigator very similar to the one in the example that I&apos;m using in a macro to navigate to every symbol in an AST and replace parts of certain ones (unfortunately converting to and from strings and using regex since I only need to replace part of these symbols). I&apos;d also like it to jump one level up in the AST from each match, or more precisely group of matches with the same substring, and wrap it in a list at that point. Can anyone recommend a starting point for thinking about defining a relative path with specter like this? I would ideally like to avoid the perf overhead of two separate </span><code>transform</code><span>s.</span></div><div id="t1526683764000311" t="2018-05-18 22:49:24 sophiago Oh, and this also ignores the issue of wanting to group together multiple occurrences of the same substring. So the symbol added in the second  transform  should only ever be one, but the predicate would have to be modified to match on the collection above all other collections that contain that exact substring."><a href="#t1526683764000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:49:24</span>             sophiago </span><span>Oh, and this also ignores the issue of wanting to group together multiple occurrences of the same substring. So the symbol added in the second </span><code>transform</code><span> should only ever be one, but the predicate would have to be modified to match on the collection above all other collections that contain that exact substring.</span></div><div id="t1526684025000256" t="2018-05-18 22:53:45 nathanmarz @sophiago that first one can be simplified to  (setval [TREE NAME #&quot;p[1-9]&quot;] &quot;p&quot; (macroexpand x))"><a href="#t1526684025000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:53:45</span>           nathanmarz </span><span>@sophiago that first one can be simplified to </span><code>(setval [TREE NAME #&quot;p[1-9]&quot;] &quot;p&quot; (macroexpand x))</code></div><div id="t1526684086000021" t="2018-05-18 22:54:46 sophiago @nathanmarz ah, thanks. I wrote this very late last night and was thinking I should have been able to do something like that"><a href="#t1526684086000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:54:46</span>             sophiago </span><span>@nathanmarz ah, thanks. I wrote this very late last night and was thinking I should have been able to do something like that</span></div><div id="t1526684124000156" t="2018-05-18 22:55:24 sophiago I just posted an example of what that  transform  does with what I hope is a slightly better description of what I&apos;d like to add to it"><a href="#t1526684124000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:55:24</span>             sophiago </span><span>I just posted an example of what that </span><code>transform</code><span> does with what I hope is a slightly better description of what I&apos;d like to add to it</span></div><div id="t1526684197000225" t="2018-05-18 22:56:37 sophiago (I also omitted mentioning I&apos;m using a fork of the compiler where the result would actually be valid...i.e. nested function literals where  %  shadow one another if necessary)"><a href="#t1526684197000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:56:37</span>             sophiago </span><span>(I also omitted mentioning I&apos;m using a fork of the compiler where the result would actually be valid...i.e. nested function literals where </span><code>%</code><span> shadow one another if necessary)</span></div><div id="t1526684236000063" t="2018-05-18 22:57:16 nathanmarz not understanding what you&apos;re trying to do with that second transform"><a href="#t1526684236000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:57:16</span>           nathanmarz </span><span>not understanding what you&apos;re trying to do with that second transform</span></div><div id="t1526684264000144" t="2018-05-18 22:57:44 sophiago Let me provide a more succinct and precise example"><a href="#t1526684264000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:57:44</span>             sophiago </span><span>Let me provide a more succinct and precise example</span></div><div id="t1526684326000217" t="2018-05-18 22:58:46 sophiago There&apos;s one place in the macroexpansion above where the bound variable occurs twice:  (*&apos;(long (. Math pow 10 (first p__13958#))) (second p__13958#))"><a href="#t1526684326000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:58:46</span>             sophiago </span><span>There&apos;s one place in the macroexpansion above where the bound variable occurs twice: </span><code>(*&apos;(long (. Math pow 10 (first p__13958#))) (second p__13958#))</code></div><div id="t1526684383000016" t="2018-05-18 22:59:43 sophiago So, ideally in the same  transform , I&apos;d like that to become:  (fn* [p__13958#] (*&apos;(long (. Math pow 10 (first p__13958#))) (second p__13958#))"><a href="#t1526684383000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">22:59:43</span>             sophiago </span><span>So, ideally in the same </span><code>transform</code><span>, I&apos;d like that to become: </span><code>(fn* [p__13958#] (*&apos;(long (. Math pow 10 (first p__13958#))) (second p__13958#))</code></div><div id="t1526684441000221" t="2018-05-18 23:00:41 sophiago The cases where the bound variables only appear once are simpler, although I&apos;m still unsure how to handle them in one pass with Specter"><a href="#t1526684441000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:00:41</span>             sophiago </span><span>The cases where the bound variables only appear once are simpler, although I&apos;m still unsure how to handle them in one pass with Specter</span></div><div id="t1526684466000116" t="2018-05-18 23:01:06 nathanmarz so you want to collect every unique symbol starting with &quot;p&quot; and wrap the expression with  (fn* [&lt;collected p&apos;s&gt;] ...) ?"><a href="#t1526684466000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:01:06</span>           nathanmarz </span><span>so you want to collect every unique symbol starting with &quot;p&quot; and wrap the expression with </span><code>(fn* [&lt;collected p&apos;s&gt;] ...)</code><span>?</span></div><div id="t1526684576000295" t="2018-05-18 23:02:56 sophiago Yes, but only wrap the deepest subexpression where the symbols are exactly the same. But the numerals will never repeat in the input, so saying exact substrings is good enough."><a href="#t1526684576000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:02:56</span>             sophiago </span><span>Yes, but only wrap the deepest subexpression where the symbols are exactly the same. But the numerals will never repeat in the input, so saying exact substrings is good enough.</span></div><div id="t1526684630000049" t="2018-05-18 23:03:50 nathanmarz for wrapping once you identify the subexpression you can do it like:
 (transform (collect TREE symbol? (selected? NAME #&quot;p[1-9]&quot;))
  (fn [psyms expr]
    `(fn* ["><a href="#t1526684630000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:03:50</span>           nathanmarz </span><span>for wrapping once you identify the subexpression you can do it like:
</span><pre>(transform (collect TREE symbol? (selected? NAME #&quot;p[1-9]&quot;))
  (fn [psyms expr]
    `(fn* [</pre></div><div id="t1526684645000212" t="2018-05-18 23:04:05 nathanmarz assuming  TREE  goes to every leaf"><a href="#t1526684645000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:04:05</span>           nathanmarz </span><span>assuming </span><code>TREE</code><span> goes to every leaf</span></div><div id="t1526684662000156" t="2018-05-18 23:04:22 sophiago TREE  goes to every coll currently"><a href="#t1526684662000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:04:22</span>             sophiago </span><code>TREE</code><span> goes to every coll currently</span></div><div id="t1526684675000038" t="2018-05-18 23:04:35 nathanmarz as for &quot;deepest subexpression where the symbols are exactly the same&quot; that sounds like a more involved algorithm"><a href="#t1526684675000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:04:35</span>           nathanmarz </span><span>as for &quot;deepest subexpression where the symbols are exactly the same&quot; that sounds like a more involved algorithm</span></div><div id="t1526684695000255" t="2018-05-18 23:04:55 nathanmarz the same &quot;p&quot; symbol could exist deeply nested across multiple branches"><a href="#t1526684695000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:04:55</span>           nathanmarz </span><span>the same &quot;p&quot; symbol could exist deeply nested across multiple branches</span></div><div id="t1526684702000004" t="2018-05-18 23:05:02 sophiago Right, that&apos;s much more involved than simple one list up."><a href="#t1526684702000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:05:02</span>             sophiago </span><span>Right, that&apos;s much more involved than simple one list up.</span></div><div id="t1526684821000128" t="2018-05-18 23:07:01 sophiago I can make some assumptions based on what would constitute valid input. For example, how px_foo means foo will always be the same for every x. Similarly, for each x: they&apos;ll be grouped together as far as depth in the entire AST (not sure whether that makes sense)."><a href="#t1526684821000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:07:01</span>             sophiago </span><span>I can make some assumptions based on what would constitute valid input. For example, how px_foo means foo will always be the same for every x. Similarly, for each x: they&apos;ll be grouped together as far as depth in the entire AST (not sure whether that makes sense).</span></div><div id="t1526684905000067" t="2018-05-18 23:08:25 nathanmarz not really"><a href="#t1526684905000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:08:25</span>           nathanmarz </span><span>not really</span></div><div id="t1526684907000183" t="2018-05-18 23:08:27 sophiago So both those in the example I pulled out started with p3. There would never be a p3 at a higher level of nesting or below the level where there&apos;s a p4. I&apos;m struggling for language to describe that. Like the &quot;x&quot; in &quot;px&quot; is monotonic with AST depth?"><a href="#t1526684907000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:08:27</span>             sophiago </span><span>So both those in the example I pulled out started with p3. There would never be a p3 at a higher level of nesting or below the level where there&apos;s a p4. I&apos;m struggling for language to describe that. Like the &quot;x&quot; in &quot;px&quot; is monotonic with AST depth?</span></div><div id="t1526684976000004" t="2018-05-18 23:09:36 nathanmarz you mean the depth of the root of the subexpression containing all instances of pn is monotonic with n?"><a href="#t1526684976000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:09:36</span>           nathanmarz </span><span>you mean the depth of the root of the subexpression containing all instances of pn is monotonic with n?</span></div><div id="t1526684977000135" t="2018-05-18 23:09:37 sophiago So when you mentioned multiple branches, I can actually ignore that. It&apos;s only a matter of variance in the number of lists you&apos;d need to jump up for the symbols to be in the same one."><a href="#t1526684977000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:09:37</span>             sophiago </span><span>So when you mentioned multiple branches, I can actually ignore that. It&apos;s only a matter of variance in the number of lists you&apos;d need to jump up for the symbols to be in the same one.</span></div><div id="t1526685027000225" t="2018-05-18 23:10:27 sophiago &quot;depth of the root of the subexpression containing all instances of pn is monotonic with n&quot; =&gt; I believe this is exactly what I&apos;m stating"><a href="#t1526685027000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:10:27</span>             sophiago </span><span>&quot;depth of the root of the subexpression containing all instances of pn is monotonic with n&quot; =&gt; I believe this is exactly what I&apos;m stating</span></div><div id="t1526685057000150" t="2018-05-18 23:10:57 sophiago Just some confusion over your use of the term &quot;root&quot;"><a href="#t1526685057000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:10:57</span>             sophiago </span><span>Just some confusion over your use of the term &quot;root&quot;</span></div><div id="t1526685126000102" t="2018-05-18 23:12:06 nathanmarz the difference between:
 [:a [1 [2]] [1 [2]]]

[:a [1 1] [[2] [2]]]
"><a href="#t1526685126000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:12:06</span>           nathanmarz </span><span>the difference between:
</span><pre>[:a [1 [2]] [1 [2]]]

[:a [1 1] [[2] [2]]]
</pre></div><div id="t1526685144000002" t="2018-05-18 23:12:24 nathanmarz in the first, the root for both is  [:a [1 [2]] [1 [2]]]"><a href="#t1526685144000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:12:24</span>           nathanmarz </span><span>in the first, the root for both is </span><code>[:a [1 [2]] [1 [2]]]</code></div><div id="t1526685163000239" t="2018-05-18 23:12:43 nathanmarz in the second, the root for &quot;1&quot; is  [1 1]  and for &quot;2&quot;  [[2] [2]]"><a href="#t1526685163000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:12:43</span>           nathanmarz </span><span>in the second, the root for &quot;1&quot; is </span><code>[1 1]</code><span> and for &quot;2&quot; </span><code>[[2] [2]]</code></div><div id="t1526685169000125" t="2018-05-18 23:12:49 nathanmarz is that what you&apos;re getting at?"><a href="#t1526685169000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:12:49</span>           nathanmarz </span><span>is that what you&apos;re getting at?</span></div><div id="t1526685185000041" t="2018-05-18 23:13:05 sophiago Yes. You can assume it&apos;s like your second example."><a href="#t1526685185000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:13:05</span>             sophiago </span><span>Yes. You can assume it&apos;s like your second example.</span></div><div id="t1526685256000252" t="2018-05-18 23:14:16 sophiago To backtrack a bit (no pun intended) in  (setval [TREE NAME #&quot;p[1-9]&quot;] &quot;p&quot; (macroexpand x))  will &quot;p&quot; be made into a symbol or do I need to add that?"><a href="#t1526685256000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:14:16</span>             sophiago </span><span>To backtrack a bit (no pun intended) in </span><code>(setval [TREE NAME #&quot;p[1-9]&quot;] &quot;p&quot; (macroexpand x))</code><span> will &quot;p&quot; be made into a symbol or do I need to add that?</span></div><div id="t1526685281000169" t="2018-05-18 23:14:41 sophiago I hate treating symbols as strings, but seems unavoidable here  😕"><a href="#t1526685281000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:14:41</span>             sophiago </span><span>I hate treating symbols as strings, but seems unavoidable here </span><b>😕</b></div><div id="t1526685365000138" t="2018-05-18 23:16:05 sophiago To be clear, the transformation at that level is p3__13962# =&gt; p__13962#"><a href="#t1526685365000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:16:05</span>             sophiago </span><span>To be clear, the transformation at that level is p3__13962# =&gt; p__13962#</span></div><div id="t1526685716000042" t="2018-05-18 23:21:56 nathanmarz it replaces the substring within the symbol"><a href="#t1526685716000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:21:56</span>           nathanmarz </span><span>it replaces the substring within the symbol</span></div><div id="t1526685732000136" t="2018-05-18 23:22:12 nathanmarz behind the scenes  NAME  is extracting the string for the symbol&apos;s name, manipulating it, and then reconstructing the symbol"><a href="#t1526685732000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:22:12</span>           nathanmarz </span><span>behind the scenes </span><code>NAME</code><span> is extracting the string for the symbol&apos;s name, manipulating it, and then reconstructing the symbol</span></div><div id="t1526685778000214" t="2018-05-18 23:22:58 sophiago Oh, that&apos;s awesome. Such a common pain point."><a href="#t1526685778000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:22:58</span>             sophiago </span><span>Oh, that&apos;s awesome. Such a common pain point.</span></div><div id="t1526685830000140" t="2018-05-18 23:23:50 nathanmarz as for the subexpression identification part, that seems more involved"><a href="#t1526685830000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:23:50</span>           nathanmarz </span><span>as for the subexpression identification part, that seems more involved</span></div><div id="t1526685836000230" t="2018-05-18 23:23:56 sophiago Also, in your second example, shouldn&apos;t  [  be either  {:tag :a, :attrs {:href &quot;/cdn-cgi/l/email-protection&quot;, :class &quot;__cf_email__&quot;, :data-cfemail &quot;f38db3&quot;}, :content (&quot;[email protected]&quot;)}  or  {:tag :a, :attrs {:href &quot;/cdn-cgi/l/email-protection&quot;, :class &quot;__cf_email__&quot;, :data-cfemail &quot;403e00&quot;}, :content (&quot;[email protected]&quot;)} ?"><a href="#t1526685836000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:23:56</span>             sophiago </span><span>Also, in your second example, shouldn&apos;t </span><code>[</code><span> be either </span><code>{:tag :a, :attrs {:href &quot;/cdn-cgi/l/email-protection&quot;, :class &quot;__cf_email__&quot;, :data-cfemail &quot;f38db3&quot;}, :content (&quot;[email protected]&quot;)}</code><span> or </span><code>{:tag :a, :attrs {:href &quot;/cdn-cgi/l/email-protection&quot;, :class &quot;__cf_email__&quot;, :data-cfemail &quot;403e00&quot;}, :content (&quot;[email protected]&quot;)}</code><span>?</span></div><div id="t1526685870000133" t="2018-05-18 23:24:30 sophiago into  or  vec , I&apos;d have to look"><a href="#t1526685870000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:24:30</span>             sophiago </span><code>into</code><span> or </span><code>vec</code><span>, I&apos;d have to look</span></div><div id="t1526685885000175" t="2018-05-18 23:24:45 nathanmarz /cdn-cgi/l/email-protection  within  []  uniques and puts all the symbols into a vector"><a href="#t1526685885000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:24:45</span>           nathanmarz </span><a href="/cdn-cgi/l/email-protection" target="_blank">/cdn-cgi/l/email-protection</a><span> within </span><code>[]</code><span> uniques and puts all the symbols into a vector</span></div><div id="t1526685915000281" t="2018-05-18 23:25:15 sophiago Oh, I assumed you&apos;d end up with a set inside a vector"><a href="#t1526685915000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:25:15</span>             sophiago </span><span>Oh, I assumed you&apos;d end up with a set inside a vector</span></div><div id="t1526685928000008" t="2018-05-18 23:25:28 nathanmarz that would be if you did  ~psyms"><a href="#t1526685928000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:25:28</span>           nathanmarz </span><span>that would be if you did </span><code>~psyms</code></div><div id="t1526686094000041" t="2018-05-18 23:28:14 sophiago I don&apos;t want to belabor that point, but you&apos;re saying  psyms  would evaluate to a set? My assumption was it would be like:  [(set [&quot;foo&quot; &quot;foo&quot;])]  =&gt;  [#{&quot;foo&quot;}]"><a href="#t1526686094000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:28:14</span>             sophiago </span><span>I don&apos;t want to belabor that point, but you&apos;re saying </span><code>psyms</code><span> would evaluate to a set? My assumption was it would be like: </span><code>[(set [&quot;foo&quot; &quot;foo&quot;])]</code><span> =&gt; </span><code>[#{&quot;foo&quot;}]</code></div><div id="t1526686281000100" t="2018-05-18 23:31:21 sophiago Also, I think depending on how your navigator in the second example works I may just be able to just apply another  transform  on  TREE  to  expr  to replace the values and that&apos;s all I need."><a href="#t1526686281000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:31:21</span>             sophiago </span><span>Also, I think depending on how your navigator in the second example works I may just be able to just apply another </span><code>transform</code><span> on </span><code>TREE</code><span> to </span><code>expr</code><span> to replace the values and that&apos;s all I need.</span></div><div id="t1526686435000099" t="2018-05-18 23:33:55 nathanmarz oops meant to write  ~(set psyms)"><a href="#t1526686435000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:33:55</span>           nathanmarz </span><span>oops meant to write </span><code>~(set psyms)</code></div><div id="t1526686463000214" t="2018-05-18 23:34:23 sophiago Oh, okay. That makes more sense"><a href="#t1526686463000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:34:23</span>             sophiago </span><span>Oh, okay. That makes more sense</span></div><div id="t1526686504000060" t="2018-05-18 23:35:04 sophiago I&apos;m thinking through what a navigator for even this example would need to look like. It is a bit more involved than I initially assumed"><a href="#t1526686504000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:35:04</span>             sophiago </span><span>I&apos;m thinking through what a navigator for even this example would need to look like. It is a bit more involved than I initially assumed</span></div><div id="t1526686644000067" t="2018-05-18 23:37:24 sophiago For it to work top-down in one traversal, it would have to backtrack after it either reaches the next x in depth or the bottom of the tree. That&apos;s the only way to make sure it adds in each symbol in a  fn* [..]  at the correct level."><a href="#t1526686644000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:37:24</span>             sophiago </span><span>For it to work top-down in one traversal, it would have to backtrack after it either reaches the next x in depth or the bottom of the tree. That&apos;s the only way to make sure it adds in each symbol in a </span><code>fn* [..]</code><span> at the correct level.</span></div><div id="t1526686680000184" t="2018-05-18 23:38:00 nathanmarz I&apos;ve done similar things with dags before"><a href="#t1526686680000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:38:00</span>           nathanmarz </span><span>I&apos;ve done similar things with dags before</span></div><div id="t1526686709000014" t="2018-05-18 23:38:29 sophiago This all comes down to me not understanding Specter well enough to hack it out at this level of complexity"><a href="#t1526686709000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:38:29</span>             sophiago </span><span>This all comes down to me not understanding Specter well enough to hack it out at this level of complexity</span></div><div id="t1526686737000145" t="2018-05-18 23:38:57 nathanmarz in that algorithm each node has an id, and I look at the list of node ids to the root from everything I&apos;m trying to find the lowest common root for"><a href="#t1526686737000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:38:57</span>           nathanmarz </span><span>in that algorithm each node has an id, and I look at the list of node ids to the root from everything I&apos;m trying to find the lowest common root for</span></div><div id="t1526686798000107" t="2018-05-18 23:39:58 sophiago I can&apos;t tell whether that means it would work for my purposes as stands or not"><a href="#t1526686798000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:39:58</span>             sophiago </span><span>I can&apos;t tell whether that means it would work for my purposes as stands or not</span></div><div id="t1526686843000179" t="2018-05-18 23:40:43 nathanmarz you could do it with multiple passes by annotating a generated id metadata to all subexpressions, then find the path of ids to each instance of &quot;p&quot; symbols"><a href="#t1526686843000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:40:43</span>           nathanmarz </span><span>you could do it with multiple passes by annotating a generated id metadata to all subexpressions, then find the path of ids to each instance of &quot;p&quot; symbols</span></div><div id="t1526686864000038" t="2018-05-18 23:41:04 nathanmarz then with the paths its easy to identify which subexpressions to target in another pass"><a href="#t1526686864000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:41:04</span>           nathanmarz </span><span>then with the paths its easy to identify which subexpressions to target in another pass</span></div><div id="t1526686886000123" t="2018-05-18 23:41:26 sophiago Oh, the problem with your example is when to stop recursing on  expr  because if I replace all the way down I&apos;ll screw up the next match"><a href="#t1526686886000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:41:26</span>             sophiago </span><span>Oh, the problem with your example is when to stop recursing on </span><code>expr</code><span> because if I replace all the way down I&apos;ll screw up the next match</span></div><div id="t1526686999000072" t="2018-05-18 23:43:19 sophiago It does seem like multiple passes might be a good start. Then I can refactor to combine them. It&apos;s much easier if I can just have the navigator stop at the next px it sees."><a href="#t1526686999000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:43:19</span>             sophiago </span><span>It does seem like multiple passes might be a good start. Then I can refactor to combine them. It&apos;s much easier if I can just have the navigator stop at the next px it sees.</span></div><div id="t1526687071000219" t="2018-05-18 23:44:31 sophiago Another way to break it down would be to apply the second  transform  before the first and use just two passes. Then it can add in the bindings at common roots and eliminate the numerals in symbols in the next pass."><a href="#t1526687071000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:44:31</span>             sophiago </span><span>Another way to break it down would be to apply the second </span><code>transform</code><span> before the first and use just two passes. Then it can add in the bindings at common roots and eliminate the numerals in symbols in the next pass.</span></div><div id="t1526687089000027" t="2018-05-18 23:44:49 sophiago That seems to make the most sense from how I&apos;m grokking it now"><a href="#t1526687089000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-18</span> <span class="t" onclick="H(this)">23:44:49</span>             sophiago </span><span>That seems to make the most sense from how I&apos;m grokking it now</span></div><div id="t1526690938000163" t="2018-05-19 00:48:58 sophiago I&apos;m just trying to get a feel for picking out the roots by applying it to input that just uses literal variables, e.g.  %1 , rather than an actual literal. But having it also expand  -&gt;&gt;  is making me unsure whether I&apos;m placing all the functions correctly. Regardless, they definitely should not be all stacked at the top in order of the  transform  calls like that."><a href="#t1526690938000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">00:48:58</span>             sophiago </span><span>I&apos;m just trying to get a feel for picking out the roots by applying it to input that just uses literal variables, e.g. </span><code>%1</code><span>, rather than an actual literal. But having it also expand </span><code>-&gt;&gt;</code><span> is making me unsure whether I&apos;m placing all the functions correctly. Regardless, they definitely should not be all stacked at the top in order of the </span><code>transform</code><span> calls like that.</span></div><div id="t1526691871000086" t="2018-05-19 01:04:31 nathanmarz it doesn&apos;t identify common roots"><a href="#t1526691871000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">01:04:31</span>           nathanmarz </span><span>it doesn&apos;t identify common roots</span></div><div id="t1526691913000057" t="2018-05-19 01:05:13 nathanmarz that snippet was just to show doing a transformation that wraps after identifying the expression to wrap"><a href="#t1526691913000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">01:05:13</span>           nathanmarz </span><span>that snippet was just to show doing a transformation that wraps after identifying the expression to wrap</span></div><div id="t1526692684000097" t="2018-05-19 01:18:04 sophiago Okay, gotcha. I would think the way I&apos;m recursing on it would at least update at the next level up, though. Right now they&apos;re at the top-level. I may just be confused by the expanded  -&gt;&gt;  though..."><a href="#t1526692684000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">01:18:04</span>             sophiago </span><span>Okay, gotcha. I would think the way I&apos;m recursing on it would at least update at the next level up, though. Right now they&apos;re at the top-level. I may just be confused by the expanded </span><code>-&gt;&gt;</code><span> though...</span></div><div id="t1526693040000083" t="2018-05-19 01:24:00 sophiago Yup, it&apos;s the expansion of  -&gt;&gt;  that&apos;s throwing me. I&apos;ll pay around with this and probably come back when I have something that works but seems could be more efficient. Thanks, @nathanmarz !"><a href="#t1526693040000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">01:24:00</span>             sophiago </span><span>Yup, it&apos;s the expansion of </span><code>-&gt;&gt;</code><span> that&apos;s throwing me. I&apos;ll pay around with this and probably come back when I have something that works but seems could be more efficient. Thanks, @nathanmarz !</span></div><div id="t1526752664000011" t="2018-05-19 17:57:44 sophiago I&apos;m still a bit confused about a navigator for this. I&apos;m currently calling  transform  in multiple passes for each pattern and figure I can bypass having to find common root bindings by enforcing linearity but, e.g.  (subselect TREE symbol? (selected? NAME pattern)) , navigates to a vector containing the first symbol matching the pattern rather than the coll containing that symbol."><a href="#t1526752664000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">17:57:44</span>             sophiago </span><span>I&apos;m still a bit confused about a navigator for this. I&apos;m currently calling </span><code>transform</code><span> in multiple passes for each pattern and figure I can bypass having to find common root bindings by enforcing linearity but, e.g. </span><code>(subselect TREE symbol? (selected? NAME pattern))</code><span>, navigates to a vector containing the first symbol matching the pattern rather than the coll containing that symbol.</span></div><div id="t1526752959000021" t="2018-05-19 18:02:39 nathanmarz subselect  navigates to the result of running  select  on that path"><a href="#t1526752959000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:02:39</span>           nathanmarz </span><code>subselect</code><span> navigates to the result of running </span><code>select</code><span> on that path</span></div><div id="t1526752961000106" t="2018-05-19 18:02:41 nathanmarz (select-any (subselect ALL :a even?) [{:a 1} {:a 2} {:a 4}])
;; =&gt; [2 4]

(transform (subselect ALL :a even?) reverse [{:a 1} {:a 2} {:a 4}])
;; =&gt; [{:a 1} {:a 4} {:a 2}]
"><a href="#t1526752961000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:02:41</span>           nathanmarz </span><pre>(select-any (subselect ALL :a even?) [{:a 1} {:a 2} {:a 4}])
;; =&gt; [2 4]

(transform (subselect ALL :a even?) reverse [{:a 1} {:a 2} {:a 4}])
;; =&gt; [{:a 1} {:a 4} {:a 2}]
</pre></div><div id="t1526753086000074" t="2018-05-19 18:04:46 sophiago Sorry, seems I misread the docs. Is there a navigator that will act like  contains?  on lists?"><a href="#t1526753086000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:04:46</span>             sophiago </span><span>Sorry, seems I misread the docs. Is there a navigator that will act like </span><code>contains?</code><span> on lists?</span></div><div id="t1526753136000084" t="2018-05-19 18:05:36 nathanmarz contains?  doesn&apos;t work on lists"><a href="#t1526753136000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:05:36</span>           nathanmarz </span><code>contains?</code><span> doesn&apos;t work on lists</span></div><div id="t1526753140000118" t="2018-05-19 18:05:40 nathanmarz since it&apos;s not keyed"><a href="#t1526753140000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:05:40</span>           nathanmarz </span><span>since it&apos;s not keyed</span></div><div id="t1526753167000103" t="2018-05-19 18:06:07 sophiago I know. I suppose like  some"><a href="#t1526753167000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:06:07</span>             sophiago </span><span>I know. I suppose like </span><code>some</code></div><div id="t1526753180000126" t="2018-05-19 18:06:20 nathanmarz you mean something like  (selected? ALL even?)  ?"><a href="#t1526753180000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:06:20</span>           nathanmarz </span><span>you mean something like </span><code>(selected? ALL even?)</code><span> ?</span></div><div id="t1526753288000086" t="2018-05-19 18:08:08 sophiago I suppose if I could replace  even?  with a pattern and then navigate to top-most coll containing the pattern?"><a href="#t1526753288000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:08:08</span>             sophiago </span><span>I suppose if I could replace </span><code>even?</code><span> with a pattern and then navigate to top-most coll containing the pattern?</span></div><div id="t1526753326000024" t="2018-05-19 18:08:46 sophiago I&apos;m realizing using  let  bindings for linearity throws a wrench in that, but I should be able to figure it out. Seems easier than finding common roots."><a href="#t1526753326000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:08:46</span>             sophiago </span><span>I&apos;m realizing using </span><code>let</code><span> bindings for linearity throws a wrench in that, but I should be able to figure it out. Seems easier than finding common roots.</span></div><div id="t1526753533000052" t="2018-05-19 18:12:13 sophiago I would think I could just do  (collect TREE (selected? symbol? NAME pattern))  where  TREE  navigates to every coll, but then it just stops at the top level every time."><a href="#t1526753533000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:12:13</span>             sophiago </span><span>I would think I could just do </span><code>(collect TREE (selected? symbol? NAME pattern))</code><span> where </span><code>TREE</code><span> navigates to every coll, but then it just stops at the top level every time.</span></div><div id="t1526754402000101" t="2018-05-19 18:26:42 nathanmarz if  TREE  navigates to collections, then that  selected?  clause will always fail"><a href="#t1526754402000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:26:42</span>           nathanmarz </span><span>if </span><code>TREE</code><span> navigates to collections, then that </span><code>selected?</code><span> clause will always fail</span></div><div id="t1526754486000049" t="2018-05-19 18:28:06 sophiago Ah, well that does seem to be what&apos;s happening. You&apos;re implying I could have it navigate to every item? I was thinking maybe I should just use a zipper and then could specify relative paths once a pattern is matched."><a href="#t1526754486000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:28:06</span>             sophiago </span><span>Ah, well that does seem to be what&apos;s happening. You&apos;re implying I could have it navigate to every item? I was thinking maybe I should just use a zipper and then could specify relative paths once a pattern is matched.</span></div><div id="t1526754492000136" t="2018-05-19 18:28:12 nathanmarz user=&gt; (setval (selected? symbol?) :replaced [&apos;a 2 &apos;b])
[a 2 b]
user=&gt; (setval (selected? ALL symbol?) :replaced [&apos;a 2 &apos;b])
:replaced
"><a href="#t1526754492000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:28:12</span>           nathanmarz </span><pre>user=&gt; (setval (selected? symbol?) :replaced [&apos;a 2 &apos;b])
[a 2 b]
user=&gt; (setval (selected? ALL symbol?) :replaced [&apos;a 2 &apos;b])
:replaced
</pre></div><div id="t1526754627000038" t="2018-05-19 18:30:27 sophiago If I can combine zipper navigators with regular ones then it would seem something like  [TREE symbol? NAME pattern z/UP]  might be the simplest way to do this."><a href="#t1526754627000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:30:27</span>             sophiago </span><span>If I can combine zipper navigators with regular ones then it would seem something like </span><code>[TREE symbol? NAME pattern z/UP]</code><span> might be the simplest way to do this.</span></div><div id="t1526754911000081" t="2018-05-19 18:35:11 nathanmarz https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers"><a href="#t1526754911000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:35:11</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-With-Zippers</a></div><div id="t1526754982000036" t="2018-05-19 18:36:22 sophiago Yup, reading now."><a href="#t1526754982000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:36:22</span>             sophiago </span><span>Yup, reading now.</span></div><div id="t1526755279000075" t="2018-05-19 18:41:19 sophiago I&apos;m just uncertain whether zipper navigators can be combined with regular ones. It&apos;d be much easier in this case than using predfns."><a href="#t1526755279000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:41:19</span>             sophiago </span><span>I&apos;m just uncertain whether zipper navigators can be combined with regular ones. It&apos;d be much easier in this case than using predfns.</span></div><div id="t1526755366000103" t="2018-05-19 18:42:46 sophiago The answer would seem to be no based on the examples"><a href="#t1526755366000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">18:42:46</span>             sophiago </span><span>The answer would seem to be no based on the examples</span></div><div id="t1526756756000053" t="2018-05-19 19:05:56 nathanmarz zipper navigators operate on zipper data structures"><a href="#t1526756756000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:05:56</span>           nathanmarz </span><span>zipper navigators operate on zipper data structures</span></div><div id="t1526756792000109" t="2018-05-19 19:06:32 nathanmarz use navigators like  VECTOR-ZIP  and  NODE  to navigate in and out of zippers"><a href="#t1526756792000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:06:32</span>           nathanmarz </span><span>use navigators like </span><code>VECTOR-ZIP</code><span> and </span><code>NODE</code><span> to navigate in and out of zippers</span></div><div id="t1526757524000064" t="2018-05-19 19:18:44 sophiago The structure that zippers return doesn&apos;t seem to make them ideal for use with  transform  though. I&apos;m having some luck with  [ALL seq? (fn [x] some #(= % (symbol pattern)) x)] : on the first pass it at least matches the  seq  immediately above the pattern."><a href="#t1526757524000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:18:44</span>             sophiago </span><span>The structure that zippers return doesn&apos;t seem to make them ideal for use with </span><code>transform</code><span> though. I&apos;m having some luck with </span><code>[ALL seq? (fn [x] some #(= % (symbol pattern)) x)]</code><span>: on the first pass it at least matches the </span><code>seq</code><span> immediately above the pattern.</span></div><div id="t1526758093000044" t="2018-05-19 19:28:13 nathanmarz you generally don&apos;t navigate to a zipper data structure for the transform fn, you use  NODE  to navigate into the value the zipper is currently pointing at"><a href="#t1526758093000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:28:13</span>           nathanmarz </span><span>you generally don&apos;t navigate to a zipper data structure for the transform fn, you use </span><code>NODE</code><span> to navigate into the value the zipper is currently pointing at</span></div><div id="t1526758397000079" t="2018-05-19 19:33:17 sophiago If I use  NODE  then it again locates the pattern rather than the  seq  containing the pattern, though."><a href="#t1526758397000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:33:17</span>             sophiago </span><span>If I use </span><code>NODE</code><span> then it again locates the pattern rather than the </span><code>seq</code><span> containing the pattern, though.</span></div><div id="t1526758432000012" t="2018-05-19 19:33:52 sophiago So  (select [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) NODE] (list (list &apos;% &apos;foo)))  =&gt;  [%]  rather than  (% foo)"><a href="#t1526758432000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:33:52</span>             sophiago </span><span>So </span><code>(select [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) NODE] (list (list &apos;% &apos;foo)))</code><span> =&gt; </span><code>[%]</code><span> rather than </span><code>(% foo)</code></div><div id="t1526758546000107" t="2018-05-19 19:35:46 sophiago And if I use  (select [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP] (list (list &apos;% &apos;foo)))  then it&apos;s not really in a form that I can call  transform  on."><a href="#t1526758546000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:35:46</span>             sophiago </span><span>And if I use </span><code>(select [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP] (list (list &apos;% &apos;foo)))</code><span> then it&apos;s not really in a form that I can call </span><code>transform</code><span> on.</span></div><div id="t1526758625000123" t="2018-05-19 19:37:05 sophiago I really just want something like  [TREE symbol? NAME #&quot;%&quot;]  except navigating to the seq containing the pattern."><a href="#t1526758625000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:37:05</span>             sophiago </span><span>I really just want something like </span><code>[TREE symbol? NAME #&quot;%&quot;]</code><span> except navigating to the seq containing the pattern.</span></div><div id="t1526758818000013" t="2018-05-19 19:40:18 sophiago Obviously I can call  ffirst  on the zipper version, but that doesn&apos;t really help if I want to transform it preserving the structure it&apos;s in."><a href="#t1526758818000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">19:40:18</span>             sophiago </span><span>Obviously I can call </span><code>ffirst</code><span> on the zipper version, but that doesn&apos;t really help if I want to transform it preserving the structure it&apos;s in.</span></div><div id="t1526763562000081" t="2018-05-19 20:59:22 nathanmarz @sophiago how is  [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP NODE]  not exactly what you want?"><a href="#t1526763562000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">20:59:22</span>           nathanmarz </span><span>@sophiago how is </span><code>[SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP NODE]</code><span> not exactly what you want?</span></div><div id="t1526763572000091" t="2018-05-19 20:59:32 nathanmarz it navigates to  (% foo)"><a href="#t1526763572000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">20:59:32</span>           nathanmarz </span><span>it navigates to </span><code>(% foo)</code></div><div id="t1526763667000016" t="2018-05-19 21:01:07 nathanmarz user=&gt; (transform [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP NODE]
  #_=&gt;   (fn [expr]
  #_=&gt;     `(:wrapped ~expr))
  #_=&gt;   &apos;(+ 1 (% foo)))
(+ 1 (:wrapped (% foo)))
"><a href="#t1526763667000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:01:07</span>           nathanmarz </span><pre>user=&gt; (transform [SEQ-ZIP (find-first #(= % (symbol &quot;%&quot;))) UP NODE]
  #_=&gt;   (fn [expr]
  #_=&gt;     `(:wrapped ~expr))
  #_=&gt;   &apos;(+ 1 (% foo)))
(+ 1 (:wrapped (% foo)))
</pre></div><div id="t1526763710000081" t="2018-05-19 21:01:50 sophiago I think I neglected to try that combination  😕"><a href="#t1526763710000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:01:50</span>             sophiago </span><span>I think I neglected to try that combination </span><b>😕</b></div><div id="t1526763719000030" t="2018-05-19 21:01:59 sophiago One sec, I&apos;m trying it in the  transform"><a href="#t1526763719000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:01:59</span>             sophiago </span><span>One sec, I&apos;m trying it in the </span><code>transform</code></div><div id="t1526763906000085" t="2018-05-19 21:05:06 sophiago I think that&apos;s it  🙂"><a href="#t1526763906000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:05:06</span>             sophiago </span><span>I think that&apos;s it </span><b>🙂</b></div><div id="t1526763995000006" t="2018-05-19 21:06:35 sophiago Oh, it&apos;s missing patterns inside let bindings. I knew that would be an issue when I decided on linearity"><a href="#t1526763995000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:06:35</span>             sophiago </span><span>Oh, it&apos;s missing patterns inside let bindings. I knew that would be an issue when I decided on linearity</span></div><div id="t1526764278000067" t="2018-05-19 21:11:18 sophiago I think it may just work out that the bindings are at common roots as long as I call  setval  separately instead of from inside  transform"><a href="#t1526764278000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:11:18</span>             sophiago </span><span>I think it may just work out that the bindings are at common roots as long as I call </span><code>setval</code><span> separately instead of from inside </span><code>transform</code></div><div id="t1526764625000093" t="2018-05-19 21:17:05 nathanmarz fyi you can rewrite the  transform  like this:
 (transform
  [SEQ-ZIP
   (find-first #(= % (symbol pattern)))
   UP
   NODE
   (transformed [TREE symbol? NAME (re-pattern pattern)]
     (fn [_] (str fresh-var)))]
  #(list `fn* [fresh-var] %)
  x)
"><a href="#t1526764625000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:17:05</span>           nathanmarz </span><span>fyi you can rewrite the </span><code>transform</code><span> like this:
</span><pre>(transform
  [SEQ-ZIP
   (find-first #(= % (symbol pattern)))
   UP
   NODE
   (transformed [TREE symbol? NAME (re-pattern pattern)]
     (fn [_] (str fresh-var)))]
  #(list `fn* [fresh-var] %)
  x)
</pre></div><div id="t1526765531000028" t="2018-05-19 21:32:11 sophiago Yeah, the common roots issue is difficult and I can&apos;t get around it by using let bindings with linearity. But there&apos;s something deeper to say about what structures allow this navigator to finds them anyway and structures that cause trouble. Like I have one where a bound variable repeats and it&apos;s wrapped correctly and one where it&apos;s not. I tend to think the latter could be solved with destructuring in the example."><a href="#t1526765531000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:32:11</span>             sophiago </span><span>Yeah, the common roots issue is difficult and I can&apos;t get around it by using let bindings with linearity. But there&apos;s something deeper to say about what structures allow this navigator to finds them anyway and structures that cause trouble. Like I have one where a bound variable repeats and it&apos;s wrapped correctly and one where it&apos;s not. I tend to think the latter could be solved with destructuring in the example.</span></div><div id="t1526765804000026" t="2018-05-19 21:36:44 sophiago I think it actually comes down to currying. The one where it doesn&apos;t naturally find a root needs to be a binary function for  map-indexed . Calling  first  and  second  after interleaving and partitioning to use plain  map  creates the same type of structure."><a href="#t1526765804000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-19</span> <span class="t" onclick="H(this)">21:36:44</span>             sophiago </span><span>I think it actually comes down to currying. The one where it doesn&apos;t naturally find a root needs to be a binary function for </span><code>map-indexed</code><span>. Calling </span><code>first</code><span> and </span><code>second</code><span> after interleaving and partitioning to use plain </span><code>map</code><span> creates the same type of structure.</span></div><div id="t1526993315000455" t="2018-05-22 12:48:35 flowthing So I have a map like this:  {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}} . I need to transform  &quot;foo&quot; , but I need to collect some of the map keys (`&quot;2018-05-22&quot;` and  :A ) along the way for the transformation function and I can&apos;t quite figure out how to do it."><a href="#t1526993315000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">12:48:35</span>            flowthing </span><span>So I have a map like this: </span><code>{&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}}</code><span>. I need to transform </span><code>&quot;foo&quot;</code><span>, but I need to collect some of the map keys (`&quot;2018-05-22&quot;` and </span><code>:A</code><span>) along the way for the transformation function and I can&apos;t quite figure out how to do it.</span></div><div id="t1526998732000070" t="2018-05-22 14:18:52 nathanmarz @flowthing How do you need to navigate to &quot;foo&quot;? Recursively?"><a href="#t1526998732000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:18:52</span>           nathanmarz </span><span>@flowthing How do you need to navigate to &quot;foo&quot;? Recursively?</span></div><div id="t1526998972000816" t="2018-05-22 14:22:52 flowthing With  MAP-VALS . Basically, I&apos;m doing something like this:

 (specter/transform [specter/MAP-VALS specter/MAP-VALS specter/MAP-VALS] (fn [&amp; args] ,,,) {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
 

And I&apos;m wondering whether I can write the path such that the transformation fn gets  &quot;2018-05-22&quot;  and  :A  as arguments (in addition to  &quot;foo&quot; )."><a href="#t1526998972000816" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:22:52</span>            flowthing </span><span>With </span><code>MAP-VALS</code><span>. Basically, I&apos;m doing something like this:

</span><pre>(specter/transform [specter/MAP-VALS specter/MAP-VALS specter/MAP-VALS] (fn [&amp; args] ,,,) {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
</pre><span>

And I&apos;m wondering whether I can write the path such that the transformation fn gets </span><code>&quot;2018-05-22&quot;</code><span> and </span><code>:A</code><span> as arguments (in addition to </span><code>&quot;foo&quot;</code><span>).</span></div><div id="t1526999151000309" t="2018-05-22 14:25:51 nathanmarz @flowthing yes, you want to make use of collection navigators"><a href="#t1526999151000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:25:51</span>           nathanmarz </span><span>@flowthing yes, you want to make use of collection navigators</span></div><div id="t1526999153000347" t="2018-05-22 14:25:53 nathanmarz (def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS+ MAP-VALS+ MAP-VALS]
  (fn [k1 k2 v]
    [k1 k2 v]
    )
  {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
"><a href="#t1526999153000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:25:53</span>           nathanmarz </span><pre>(def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS+ MAP-VALS+ MAP-VALS]
  (fn [k1 k2 v]
    [k1 k2 v]
    )
  {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
</pre></div><div id="t1526999821000139" t="2018-05-22 14:37:01 flowthing Perfect, thank you!"><a href="#t1526999821000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:37:01</span>            flowthing </span><span>Perfect, thank you!</span></div><div id="t1526999883000334" t="2018-05-22 14:38:03 flowthing I couldn&apos;t figure out how to compose  MAP-VALS+  myself."><a href="#t1526999883000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:38:03</span>            flowthing </span><span>I couldn&apos;t figure out how to compose </span><code>MAP-VALS+</code><span> myself.</span></div><div id="t1527033801000205" t="2018-05-23 00:03:21 sophiago @nathanmarz ironically enough I needed to also write a version of the macro I was struggling with over the weekend that does just stack the lambda bindings at the top of the AST and replaces all instances of corresponding locals. I did this as before by calling  setval  from inside  transform , which I get the sense is not an ideal way to use Specter, but don&apos;t fully understand how you rewrote it to use  transformed  inside the navigator."><a href="#t1527033801000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">00:03:21</span>             sophiago </span><span>@nathanmarz ironically enough I needed to also write a version of the macro I was struggling with over the weekend that does just stack the lambda bindings at the top of the AST and replaces all instances of corresponding locals. I did this as before by calling </span><code>setval</code><span> from inside </span><code>transform</code><span>, which I get the sense is not an ideal way to use Specter, but don&apos;t fully understand how you rewrote it to use </span><code>transformed</code><span> inside the navigator.</span></div><div id="t1527042259000034" t="2018-05-23 02:24:19 nathanmarz @sophiago it&apos;ll be easier to understand the navigators if you play with them on toy examples"><a href="#t1527042259000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">02:24:19</span>           nathanmarz </span><span>@sophiago it&apos;ll be easier to understand the navigators if you play with them on toy examples</span></div><div id="t1527042905000145" t="2018-05-23 02:35:05 sophiago True. I tell myself I&apos;m testing these on the simplest functions, but they&apos;re still macros doing fairly heavy source transformation. It seems clear the issue here is that I&apos;m trying to apply  transformed  directly to a symbol, and only the first one that matches as well, rather than in example you gave where it&apos;s one level up from the node in a zipper."><a href="#t1527042905000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">02:35:05</span>             sophiago </span><span>True. I tell myself I&apos;m testing these on the simplest functions, but they&apos;re still macros doing fairly heavy source transformation. It seems clear the issue here is that I&apos;m trying to apply </span><code>transformed</code><span> directly to a symbol, and only the first one that matches as well, rather than in example you gave where it&apos;s one level up from the node in a zipper.</span></div><div id="t1527043124000153" t="2018-05-23 02:38:44 sophiago I suppose it&apos;s just the combination of learning what&apos;s essentially a whole DSL and wanting to use it immediately given how well it fits so many of my problems. For example, it would seem calling  setval  from inside  transform  as in the first example shouldn&apos;t cause a significant hit in perf, but I&apos;d have to actually look at your macros or at least reread the wiki page about caching to make that judgment for sure. At least your docs are quite good  🙂"><a href="#t1527043124000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">02:38:44</span>             sophiago </span><span>I suppose it&apos;s just the combination of learning what&apos;s essentially a whole DSL and wanting to use it immediately given how well it fits so many of my problems. For example, it would seem calling </span><code>setval</code><span> from inside </span><code>transform</code><span> as in the first example shouldn&apos;t cause a significant hit in perf, but I&apos;d have to actually look at your macros or at least reread the wiki page about caching to make that judgment for sure. At least your docs are quite good </span><b>🙂</b></div><div id="t1527106169000109" t="2018-05-23 20:09:29 huthayfa hello guys, I am new to specter library. does anyone of you know which function is used to navigate the entire data structure tree and manipulate specific key"><a href="#t1527106169000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:09:29</span>             huthayfa </span><span>hello guys, I am new to specter library. does anyone of you know which function is used to navigate the entire data structure tree and manipulate specific key</span></div><div id="t1527106280000319" t="2018-05-23 20:11:20 huthayfa without providing a path to the key"><a href="#t1527106280000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:11:20</span>             huthayfa </span><span>without providing a path to the key</span></div><div id="t1527106287000125" t="2018-05-23 20:11:27 tanzoniteblack @huthayfa.ainqawi that&apos;s a little vague, can you give a minimal example of what you&apos;re working with and what you&apos;re trying to get to?"><a href="#t1527106287000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:11:27</span>       tanzoniteblack </span><span>@huthayfa.ainqawi that&apos;s a little vague, can you give a minimal example of what you&apos;re working with and what you&apos;re trying to get to?</span></div><div id="t1527106335000722" t="2018-05-23 20:12:15 huthayfa {
            &quot;key&quot;: &quot;hsq.contentjsonsample.sampleKey&quot;,
            &quot;value&quot;: {
               &quot;links&quot;:[{&quot;text&quot;:&quot;anytext&quot;,&quot;url&quot;:&quot; http://nowhere.com &quot;,&quot;precedence&quot;:&quot;1&quot;},{&quot;text&quot;:&quot;anytext&quot;,&quot;url&quot;:&quot; http://nowhere.com &quot;,&quot;precedence&quot;:&quot;2&quot;}],
               &quot;misc&quot;:[{&quot;key&quot;:&quot;keyName&quot;,&quot;value&quot;:&quot;valuessssssss&quot;},{&quot;key&quot;:&quot;keyName&quot;,&quot;value&quot;:&quot;valuessssssss&quot;}],
               &quot;assets&quot;:[{&quot;name&quot;:&quot;facebooklogo&quot;,&quot;location&quot;:&quot;/s3/cmb/facebooklogo.png&quot;,&quot;type&quot;:&quot;image&quot;},{&quot;name&quot;:&quot;mypdf&quot;,&quot;location&quot;:&quot;/pdfLocation&quot;,&quot;type&quot;:&quot;pdf&quot;}],
             },
            &quot;language&quot;:&quot;EN&quot;,
            &quot;shortName&quot;: &quot;my Sample Json key&quot;,
            &quot;description&quot;: &quot;my Sample Json key explain why this key&quot;
          }"><a href="#t1527106335000722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:12:15</span>             huthayfa </span><span>{
            &quot;key&quot;: &quot;hsq.contentjsonsample.sampleKey&quot;,
            &quot;value&quot;: {
               &quot;links&quot;:[{&quot;text&quot;:&quot;anytext&quot;,&quot;url&quot;:&quot;</span><a href="http://nowhere.com" target="_blank">http://nowhere.com</a><span>&quot;,&quot;precedence&quot;:&quot;1&quot;},{&quot;text&quot;:&quot;anytext&quot;,&quot;url&quot;:&quot;</span><a href="http://nowhere.com" target="_blank">http://nowhere.com</a><span>&quot;,&quot;precedence&quot;:&quot;2&quot;}],
               &quot;misc&quot;:[{&quot;key&quot;:&quot;keyName&quot;,&quot;value&quot;:&quot;valuessssssss&quot;},{&quot;key&quot;:&quot;keyName&quot;,&quot;value&quot;:&quot;valuessssssss&quot;}],
               &quot;assets&quot;:[{&quot;name&quot;:&quot;facebooklogo&quot;,&quot;location&quot;:&quot;/s3/cmb/facebooklogo.png&quot;,&quot;type&quot;:&quot;image&quot;},{&quot;name&quot;:&quot;mypdf&quot;,&quot;location&quot;:&quot;/pdfLocation&quot;,&quot;type&quot;:&quot;pdf&quot;}],
             },
            &quot;language&quot;:&quot;EN&quot;,
            &quot;shortName&quot;: &quot;my Sample Json key&quot;,
            &quot;description&quot;: &quot;my Sample Json key explain why this key&quot;
          }</span></div><div id="t1527106366000369" t="2018-05-23 20:12:46 huthayfa wherever there is assets key, I want to manipulate it"><a href="#t1527106366000369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:12:46</span>             huthayfa </span><span>wherever there is assets key, I want to manipulate it</span></div><div id="t1527106379000773" t="2018-05-23 20:12:59 tanzoniteblack I suspect you want  https://github.com/nathanmarz/specter/wiki/List-of-Navigators#walker"><a href="#t1527106379000773" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:12:59</span>       tanzoniteblack </span><span>I suspect you want </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Navigators#walker" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Navigators#walker</a></div><div id="t1527106484000626" t="2018-05-23 20:14:44 tanzoniteblack that said,  walker  is generally something I consider a &quot;I have no idea what data&apos;s coming in, and I have no control over the format, and I&apos;m ok with accidentally manipulating other keys that just happen to be called that&quot;, which is pretty heavy handed &amp; crude"><a href="#t1527106484000626" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:14:44</span>       tanzoniteblack </span><span>that said, </span><code>walker</code><span> is generally something I consider a &quot;I have no idea what data&apos;s coming in, and I have no control over the format, and I&apos;m ok with accidentally manipulating other keys that just happen to be called that&quot;, which is pretty heavy handed &amp; crude</span></div><div id="t1527106529000410" t="2018-05-23 20:15:29 tanzoniteblack so if you can narrow your path down to more (like,  assets  will always be inside a map stored at  links , or something) it can help to prevent random bugs"><a href="#t1527106529000410" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:15:29</span>       tanzoniteblack </span><span>so if you can narrow your path down to more (like, </span><code>assets</code><span> will always be inside a map stored at </span><code>links</code><span>, or something) it can help to prevent random bugs</span></div><div id="t1527106544000616" t="2018-05-23 20:15:44 schmee you don’t need specter for this, you can use  update  from core:  (update your-map :assets update-fn)"><a href="#t1527106544000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:15:44</span>               schmee </span><span>you don’t need specter for this, you can use </span><code>update</code><span> from core: </span><code>(update your-map :assets update-fn)</code></div><div id="t1527106577000314" t="2018-05-23 20:16:17 tanzoniteblack @schmee  update  will only do it if you are directly manipulating a map, not if you need to find a map nested in a bigger data structure"><a href="#t1527106577000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:16:17</span>       tanzoniteblack </span><span>@schmee </span><code>update</code><span> will only do it if you are directly manipulating a map, not if you need to find a map nested in a bigger data structure</span></div><div id="t1527106589000276" t="2018-05-23 20:16:29 huthayfa @schmee does update do a nested map search"><a href="#t1527106589000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:16:29</span>             huthayfa </span><span>@schmee does update do a nested map search</span></div><div id="t1527106589000356" t="2018-05-23 20:16:29 tanzoniteblack (or multiple maps nested in a bigger structure)"><a href="#t1527106589000356" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:16:29</span>       tanzoniteblack </span><span>(or multiple maps nested in a bigger structure)</span></div><div id="t1527106646000316" t="2018-05-23 20:17:26 schmee well, you need to specify what this larger data structure looks like in order to get a sensible answer"><a href="#t1527106646000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:17:26</span>               schmee </span><span>well, you need to specify what this larger data structure looks like in order to get a sensible answer</span></div><div id="t1527106683000551" t="2018-05-23 20:18:03 huthayfa I don&apos;t know where the assets happen in the structure, maybe at second or third level"><a href="#t1527106683000551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:18:03</span>             huthayfa </span><span>I don&apos;t know where the assets happen in the structure, maybe at second or third level</span></div><div id="t1527106690000623" t="2018-05-23 20:18:10 huthayfa it depends on the jsonSchema"><a href="#t1527106690000623" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:18:10</span>             huthayfa </span><span>it depends on the jsonSchema</span></div><div id="t1527107099000658" t="2018-05-23 20:24:59 nathanmarz @huthayfa.ainqawi this code will run on every nested assets key with a walk that descends into all collections and map values (but not map keys):
 (def NESTED-MAPS
  (recursive-path [] p
    (cond-path map? (continue-then-stay MAP-VALS p)
               coll? [ALL p]
               )))

(transform [NESTED-MAPS (must &quot;assets&quot;)] my-transform-fn data)
"><a href="#t1527107099000658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:24:59</span>           nathanmarz </span><span>@huthayfa.ainqawi this code will run on every nested assets key with a walk that descends into all collections and map values (but not map keys):
</span><pre>(def NESTED-MAPS
  (recursive-path [] p
    (cond-path map? (continue-then-stay MAP-VALS p)
               coll? [ALL p]
               )))

(transform [NESTED-MAPS (must &quot;assets&quot;)] my-transform-fn data)
</pre></div><div id="t1527107289000709" t="2018-05-23 20:28:09 huthayfa so the value returned from the NESTED-MAPS will replace the current value, right ?"><a href="#t1527107289000709" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:28:09</span>             huthayfa </span><span>so the value returned from the NESTED-MAPS will replace the current value, right ?</span></div><div id="t1527107336000678" t="2018-05-23 20:28:56 huthayfa @nathanmarz"><a href="#t1527107336000678" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:28:56</span>             huthayfa </span><span>@nathanmarz</span></div><div id="t1527107450000307" t="2018-05-23 20:30:50 huthayfa oh sorry, I didn&apos;t see my-transform-fn"><a href="#t1527107450000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:30:50</span>             huthayfa </span><span>oh sorry, I didn&apos;t see my-transform-fn</span></div><div id="t1527107465000720" t="2018-05-23 20:31:05 huthayfa @nathanmarz thank you so much"><a href="#t1527107465000720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-23</span> <span class="t" onclick="H(this)">20:31:05</span>             huthayfa </span><span>@nathanmarz thank you so much</span></div><div id="t1527196608000406" t="2018-05-24 21:16:48 huthayfa is there a function to collect the path to a given key"><a href="#t1527196608000406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:16:48</span>             huthayfa </span><span>is there a function to collect the path to a given key</span></div><div id="t1527196928000080" t="2018-05-24 21:22:08 huthayfa if i have map like this {&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}, I want to collect the path to target-key which is [properties assets target-key]"><a href="#t1527196928000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:22:08</span>             huthayfa </span><span>if i have map like this {&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}, I want to collect the path to target-key which is [properties assets target-key]</span></div><div id="t1527196944000634" t="2018-05-24 21:22:24 huthayfa is there a function in specter that does this"><a href="#t1527196944000634" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:22:24</span>             huthayfa </span><span>is there a function in specter that does this</span></div><div id="t1527199122000222" t="2018-05-24 21:58:42 nathanmarz @huthayfa.ainqawi use the  collect  navigators"><a href="#t1527199122000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:58:42</span>           nathanmarz </span><span>@huthayfa.ainqawi use the </span><code>collect</code><span> navigators</span></div><div id="t1527199155000449" t="2018-05-24 21:59:15 nathanmarz someone just asked this recently"><a href="#t1527199155000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:59:15</span>           nathanmarz </span><span>someone just asked this recently</span></div><div id="t1527199164000417" t="2018-05-24 21:59:24 nathanmarz here&apos;s a code example:
 (def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS+ MAP-VALS+ MAP-VALS]
  (fn [k1 k2 v]
    [k1 k2 v]
    )
  {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
"><a href="#t1527199164000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">21:59:24</span>           nathanmarz </span><span>here&apos;s a code example:
</span><pre>(def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS+ MAP-VALS+ MAP-VALS]
  (fn [k1 k2 v]
    [k1 k2 v]
    )
  {&quot;2018-05-22&quot; {:A {123 &quot;foo&quot;}}})
</pre></div><div id="t1527201154000350" t="2018-05-24 22:32:34 huthayfa @nathanmarz how do I select the target key"><a href="#t1527201154000350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">22:32:34</span>             huthayfa </span><span>@nathanmarz how do I select the target key</span></div><div id="t1527208411000081" t="2018-05-25 00:33:31 nathanmarz @huthayfa.ainqawi it&apos;ll be easier to help you if you give an example of the input and output you want"><a href="#t1527208411000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">00:33:31</span>           nathanmarz </span><span>@huthayfa.ainqawi it&apos;ll be easier to help you if you give an example of the input and output you want</span></div><div id="t1527213654000288" t="2018-05-25 02:00:54 huthayfa @nathanmarz input  {&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}  output: [properties assets target-key]"><a href="#t1527213654000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">02:00:54</span>             huthayfa </span><span>@nathanmarz input  {&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}  output: [properties assets target-key]</span></div><div id="t1527213690000068" t="2018-05-25 02:01:30 huthayfa input  ({&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}, target-key)   output: [properties assets target-key]"><a href="#t1527213690000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">02:01:30</span>             huthayfa </span><span>input  ({&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot;}}}, target-key)   output: [properties assets target-key]</span></div><div id="t1527216147000243" t="2018-05-25 02:42:27 nathanmarz @huthayfa.ainqawi that input isn&apos;t well formed"><a href="#t1527216147000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">02:42:27</span>           nathanmarz </span><span>@huthayfa.ainqawi that input isn&apos;t well formed</span></div><div id="t1527218427000175" t="2018-05-25 03:20:27 huthayfa input  ({&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot; &quot;value&quot;}}}, target-key) nested map"><a href="#t1527218427000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">03:20:27</span>             huthayfa </span><span>input  ({&quot;properties&quot;: { &quot;assets&quot;: {&quot;target-key&quot; &quot;value&quot;}}}, target-key) nested map</span></div><div id="t1527252214000546" t="2018-05-25 12:43:34 fmn Hi, how do you navigate data structures with specter lazily? What I&apos;m trying to do is select the first item with matching predicate like this:

 (-&gt;&gt; very-long-vector
     (transform [ALL] my-fn)
     (select-first [ALL my-pred?]))
 

I believe doing that won&apos;t be very efficient since specter will &quot;realize&quot; each step"><a href="#t1527252214000546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">12:43:34</span>                  fmn </span><span>Hi, how do you navigate data structures with specter lazily? What I&apos;m trying to do is select the first item with matching predicate like this:

</span><pre>(-&gt;&gt; very-long-vector
     (transform [ALL] my-fn)
     (select-first [ALL my-pred?]))
</pre><span>

I believe doing that won&apos;t be very efficient since specter will &quot;realize&quot; each step</span></div><div id="t1527254580000445" t="2018-05-25 13:23:00 nathanmarz @funyako.funyao156 there is no lazy computation with specter"><a href="#t1527254580000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">13:23:00</span>           nathanmarz </span><span>@funyako.funyao156 there is no lazy computation with specter</span></div><div id="t1527254614000252" t="2018-05-25 13:23:34 nathanmarz but if you do  (select-first [ALL (view my-fn) my-pred?] very-long-vector)  it will stop traversing the vector as soon as  my-pred?  is satisfied"><a href="#t1527254614000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">13:23:34</span>           nathanmarz </span><span>but if you do </span><code>(select-first [ALL (view my-fn) my-pred?] very-long-vector)</code><span> it will stop traversing the vector as soon as </span><code>my-pred?</code><span> is satisfied</span></div><div id="t1527255791000397" t="2018-05-25 13:43:11 fmn @nathanmarz so the  select-first  behave similar to  (first (filter pred ...))  in terms of &quot;lazy like&quot; ? Thanks!"><a href="#t1527255791000397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">13:43:11</span>                  fmn </span><span>@nathanmarz so the </span><code>select-first</code><span> behave similar to </span><code>(first (filter pred ...))</code><span> in terms of &quot;lazy like&quot; ? Thanks!</span></div><div id="t1527258007000186" t="2018-05-25 14:20:07 nathanmarz @funyako.funyao156 it works via early termination"><a href="#t1527258007000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:20:07</span>           nathanmarz </span><span>@funyako.funyao156 it works via early termination</span></div><div id="t1527258041000006" t="2018-05-25 14:20:41 nathanmarz it uses  reduced /`reduced?` under the hood"><a href="#t1527258041000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:20:41</span>           nathanmarz </span><span>it uses </span><code>reduced</code><span>/`reduced?` under the hood</span></div><div id="t1527258152000149" t="2018-05-25 14:22:32 fmn @nathanmarz Thanks alot for answering me! Last one, sorry if I ask a lot. How do you return default value using  select-first  if no matching element found, for example:

 (select-first [ALL keyword? (nil-&gt;val :foo/bar)] [1 2 3])
 

That still return a nil."><a href="#t1527258152000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:22:32</span>                  fmn </span><span>@nathanmarz Thanks alot for answering me! Last one, sorry if I ask a lot. How do you return default value using </span><code>select-first</code><span> if no matching element found, for example:

</span><pre>(select-first [ALL keyword? (nil-&gt;val :foo/bar)] [1 2 3])
</pre><span>

That still return a nil.</span></div><div id="t1527258481000535" t="2018-05-25 14:28:01 nathanmarz that code never gets to the  nil-&gt;val  navigator since  keyword?  filters everything out"><a href="#t1527258481000535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:28:01</span>           nathanmarz </span><span>that code never gets to the </span><code>nil-&gt;val</code><span> navigator since </span><code>keyword?</code><span> filters everything out</span></div><div id="t1527258501000254" t="2018-05-25 14:28:21 nathanmarz you can just do  (or (select-first [ALL keyword?] [1 2 3]) :foo/bar)"><a href="#t1527258501000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:28:21</span>           nathanmarz </span><span>you can just do </span><code>(or (select-first [ALL keyword?] [1 2 3]) :foo/bar)</code></div><div id="t1527258548000807" t="2018-05-25 14:29:08 fmn Right, silly me. Sorry I ask alot! Thanks again!"><a href="#t1527258548000807" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:29:08</span>                  fmn </span><span>Right, silly me. Sorry I ask alot! Thanks again!</span></div><div id="t1527258624000846" t="2018-05-25 14:30:24 nathanmarz no problem, that&apos;s what this channel is for"><a href="#t1527258624000846" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:30:24</span>           nathanmarz </span><span>no problem, that&apos;s what this channel is for</span></div><div id="t1527258764000345" t="2018-05-25 14:32:44 nathanmarz @huthayfa.ainqawi 
 user=&gt; (def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
#&apos;user/MAP-VALS+
user=&gt; (select-any [MAP-VALS+ MAP-VALS+ MAP-KEYS] {&quot;properties&quot; { &quot;assets&quot; {&quot;target-key&quot; &quot;value&quot;}}})
[&quot;properties&quot; &quot;assets&quot; &quot;target-key&quot;]
"><a href="#t1527258764000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">14:32:44</span>           nathanmarz </span><span>@huthayfa.ainqawi 
</span><pre>user=&gt; (def MAP-VALS+ (path ALL (collect-one FIRST) LAST))
#&apos;user/MAP-VALS+
user=&gt; (select-any [MAP-VALS+ MAP-VALS+ MAP-KEYS] {&quot;properties&quot; { &quot;assets&quot; {&quot;target-key&quot; &quot;value&quot;}}})
[&quot;properties&quot; &quot;assets&quot; &quot;target-key&quot;]
</pre></div><div id="t1527709062000249" t="2018-05-30 19:37:42 johanatan has anyone tried 1.1.1 w/ deps.edn and lumo ?"><a href="#t1527709062000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">19:37:42</span>            johanatan </span><span>has anyone tried 1.1.1 w/ deps.edn and lumo ?</span></div><div id="t1527709081000291" t="2018-05-30 19:38:01 johanatan I am getting:

 Could not require com.rpl.specter.navs in file com/rpl/specter.cljc
	 (new)
	 Function.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2024:72)
	 Function.cljs.analyzer.error.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2639:92)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5954:145)
	 Function.cljs.js.load_deps.cljs$core$IFn$_invoke$arity$7 (NO_SOURCE_FILE &lt;embedded&gt;:5965:119)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5965:570)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5943:1)
	 Function.cljs.js.load_deps.cljs$core$IFn$_invoke$arity$7 (NO_SOURCE_FILE &lt;embedded&gt;:5965:119)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5965:570)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5943:1)

Maximum call stack size exceeded
	 (NO_SOURCE_FILE &lt;embedded&gt;:6625:177)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6120:138)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6010:425)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6024:218)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5968:270)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5947:36)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6120:138)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6010:425)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6024:218)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5968:270)
 

when I do so."><a href="#t1527709081000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">19:38:01</span>            johanatan </span><span>I am getting:

</span><pre>Could not require com.rpl.specter.navs in file com/rpl/specter.cljc
	 (new)
	 Function.cljs.core.ex_info.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2024:72)
	 Function.cljs.analyzer.error.cljs$core$IFn$_invoke$arity$3 (NO_SOURCE_FILE &lt;embedded&gt;:2639:92)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5954:145)
	 Function.cljs.js.load_deps.cljs$core$IFn$_invoke$arity$7 (NO_SOURCE_FILE &lt;embedded&gt;:5965:119)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5965:570)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5943:1)
	 Function.cljs.js.load_deps.cljs$core$IFn$_invoke$arity$7 (NO_SOURCE_FILE &lt;embedded&gt;:5965:119)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5965:570)
	 Function.cljs.js.require.cljs$core$IFn$_invoke$arity$5 (NO_SOURCE_FILE &lt;embedded&gt;:5943:1)

Maximum call stack size exceeded
	 (NO_SOURCE_FILE &lt;embedded&gt;:6625:177)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6120:138)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6010:425)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6024:218)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5968:270)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5947:36)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6120:138)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6010:425)
	 (NO_SOURCE_FILE &lt;embedded&gt;:6024:218)
	 (NO_SOURCE_FILE &lt;embedded&gt;:5968:270)
</pre><span>

when I do so.</span></div><div id="t1527711727000192" t="2018-05-30 20:22:07 nathanmarz @johanatan don&apos;t see how that would have anything to do with specter, #tools-deps is probably a better place to ask"><a href="#t1527711727000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:22:07</span>           nathanmarz </span><span>@johanatan don&apos;t see how that would have anything to do with specter, #tools-deps is probably a better place to ask</span></div><div id="t1527711760000505" t="2018-05-30 20:22:40 johanatan well specter is the only dep that this method is failing for"><a href="#t1527711760000505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:22:40</span>            johanatan </span><span>well specter is the only dep that this method is failing for</span></div><div id="t1527711767000562" t="2018-05-30 20:22:47 johanatan have you tried it?"><a href="#t1527711767000562" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:22:47</span>            johanatan </span><span>have you tried it?</span></div><div id="t1527711783000002" t="2018-05-30 20:23:03 johanatan apparently the lib needs to be cljs self-host compatible (not sure if specter is)"><a href="#t1527711783000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:23:03</span>            johanatan </span><span>apparently the lib needs to be cljs self-host compatible (not sure if specter is)</span></div><div id="t1527711923000262" t="2018-05-30 20:25:23 nathanmarz ah, well that would explain it"><a href="#t1527711923000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:25:23</span>           nathanmarz </span><span>ah, well that would explain it</span></div><div id="t1527711937000210" t="2018-05-30 20:25:37 nathanmarz https://github.com/nathanmarz/specter/issues/136"><a href="#t1527711937000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:25:37</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/issues/136" target="_blank">https://github.com/nathanmarz/specter/issues/136</a></div><div id="t1527712707000355" t="2018-05-30 20:38:27 johanatan @nathanmarz thx!"><a href="#t1527712707000355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:38:27</span>            johanatan </span><span>@nathanmarz thx!</span></div><div id="t1527712724000563" t="2018-05-30 20:38:44 johanatan do you have any plan to fix it? should I create an issue to track it?"><a href="#t1527712724000563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">20:38:44</span>            johanatan </span><span>do you have any plan to fix it? should I create an issue to track it?</span></div><div id="t1527714517000616" t="2018-05-30 21:08:37 nathanmarz that is the issue to track it"><a href="#t1527714517000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">21:08:37</span>           nathanmarz </span><span>that is the issue to track it</span></div><div id="t1527714529000707" t="2018-05-30 21:08:49 nathanmarz no plans to fix it since I don&apos;t use clojurescript"><a href="#t1527714529000707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">21:08:49</span>           nathanmarz </span><span>no plans to fix it since I don&apos;t use clojurescript</span></div><div id="t1527714544000231" t="2018-05-30 21:09:04 nathanmarz a pull request for it would be welcome though"><a href="#t1527714544000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">21:09:04</span>           nathanmarz </span><span>a pull request for it would be welcome though</span></div><div id="t1527717812000113" t="2018-05-30 22:03:32 johanatan oh, sorry. i thought that was on the planck project (didn&apos;t look at the url)"><a href="#t1527717812000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">22:03:32</span>            johanatan </span><span>oh, sorry. i thought that was on the planck project (didn&apos;t look at the url)</span></div><div id="t1527948246000101" t="2018-06-02 14:04:06 punit-naik Hi Guys! I was just starting out with Specter. I had a few questions.
1. Are there error-handling functions implemented inside specter? Can I get errors as to where my navigator failed?
2. Can it work with lazy seqs? Will the laziness be preserved?
3. Can we use reducers in  setval ?"><a href="#t1527948246000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:04:06</span>           punit-naik </span><span>Hi Guys! I was just starting out with Specter. I had a few questions.
1. Are there error-handling functions implemented inside specter? Can I get errors as to where my navigator failed?
2. Can it work with lazy seqs? Will the laziness be preserved?
3. Can we use reducers in </span><code>setval</code><span>?</span></div><div id="t1527948582000094" t="2018-06-02 14:09:42 nathanmarz @punit-naik there&apos;s no particular error handling done by specter"><a href="#t1527948582000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:09:42</span>           nathanmarz </span><span>@punit-naik there&apos;s no particular error handling done by specter</span></div><div id="t1527948594000100" t="2018-06-02 14:09:54 nathanmarz I can usually tell where I messed up a path by looking at the stack trace"><a href="#t1527948594000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:09:54</span>           nathanmarz </span><span>I can usually tell where I messed up a path by looking at the stack trace</span></div><div id="t1527950024000121" t="2018-06-02 14:33:44 punit-naik So when I run  (transform [ALL :a] inc [{:a 1 :b 2} {:a 2 :b 1} {:b 3}]) , I get a very simple  Nullpointer exception  which is because the  nil  case is not handled by the  inc  fn. But don&apos;t you think one should get a more detailed exception like  :a key not found at index 2 ?"><a href="#t1527950024000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:33:44</span>                punit-naik </span><span>So when I run </span><code>(transform [ALL :a] inc [{:a 1 :b 2} {:a 2 :b 1} {:b 3}])</code><span>, I get a very simple </span><code>Nullpointer exception</code><span> which is because the </span><code>nil</code><span> case is not handled by the </span><code>inc</code><span> fn. But don&apos;t you think one should get a more detailed exception like </span><code>:a key not found at index 2</code><span>?</span></div><div id="t1527948642000044" t="2018-06-02 14:10:42 nathanmarz specter will never produce a lazy output"><a href="#t1527948642000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:10:42</span>           nathanmarz </span><span>specter will never produce a lazy output</span></div><div id="t1527951659000124" t="2018-06-02 15:00:59 punit-naik I tried running  (def x (lazy-seq [1 2 3 4])) (time (cons (inc (first x)) (rest x)))  and  (time (transform FIRST inc x))  and the running times for them were  0.08 msecs  and  0.5 msecs . Is this a considerable enough difference? So is specter indeed evaluating the entire lazy list?"><a href="#t1527951659000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:00:59</span>                punit-naik </span><span>I tried running </span><code>(def x (lazy-seq [1 2 3 4])) (time (cons (inc (first x)) (rest x)))</code><span> and </span><code>(time (transform FIRST inc x))</code><span> and the running times for them were </span><code>0.08 msecs</code><span> and </span><code>0.5 msecs</code><span>. Is this a considerable enough difference? So is specter indeed evaluating the entire lazy list?</span></div><div id="t1527948687000115" t="2018-06-02 14:11:27 nathanmarz though using  select-first  can accomplish many of the same things since it terminates navigation as soon as it encounters a matching value"><a href="#t1527948687000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:11:27</span>           nathanmarz </span><span>though using </span><code>select-first</code><span> can accomplish many of the same things since it terminates navigation as soon as it encounters a matching value</span></div><div id="t1527948695000052" t="2018-06-02 14:11:35 nathanmarz don&apos;t know what you mean by #3"><a href="#t1527948695000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:11:35</span>           nathanmarz </span><span>don&apos;t know what you mean by #3</span></div><div id="t1527948695000052" t="2018-06-02 14:11:35 nathanmarz don&apos;t know what you mean by #3"><a href="#t1527948695000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">14:11:35</span>           nathanmarz </span><span>don&apos;t know what you mean by #3</span></div><div id="t1527951816000121" t="2018-06-02 15:03:36 punit-naik What I meant was, is there a way to perform  reduce  using  navigators? I am thinking of using  select  for this. Am I correct?"><a href="#t1527951816000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:03:36</span>                punit-naik </span><span>What I meant was, is there a way to perform </span><code>reduce</code><span> using  navigators? I am thinking of using </span><code>select</code><span> for this. Am I correct?</span></div><div id="t1527952478000009" t="2018-06-02 15:14:38 nathanmarz @punit-naik the most efficient way to reduce over navigated values is with  traverse"><a href="#t1527952478000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:14:38</span>           nathanmarz </span><span>@punit-naik the most efficient way to reduce over navigated values is with </span><code>traverse</code></div><div id="t1527952496000086" t="2018-06-02 15:14:56 nathanmarz https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse"><a href="#t1527952496000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:14:56</span>           nathanmarz </span><a href="https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse" target="_blank">https://github.com/nathanmarz/specter/wiki/List-of-Macros#traverse</a></div><div id="t1527952542000144" t="2018-06-02 15:15:42 nathanmarz timing a single invocation tells you absolutely nothing, since neither specter nor the jvm have had a chance to optimize that callsite"><a href="#t1527952542000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:15:42</span>           nathanmarz </span><span>timing a single invocation tells you absolutely nothing, since neither specter nor the jvm have had a chance to optimize that callsite</span></div><div id="t1527952561000016" t="2018-06-02 15:16:01 nathanmarz use criterium for benchmarking"><a href="#t1527952561000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:16:01</span>           nathanmarz </span><span>use criterium for benchmarking</span></div><div id="t1527952614000121" t="2018-06-02 15:16:54 nathanmarz I think you want  (transform [ALL (must :a)] inc [{:a 1 :b 2} {:a 2 :b 1} {:b 3}])  for that code"><a href="#t1527952614000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:16:54</span>           nathanmarz </span><span>I think you want </span><code>(transform [ALL (must :a)] inc [{:a 1 :b 2} {:a 2 :b 1} {:b 3}])</code><span> for that code</span></div><div id="t1527952858000057" t="2018-06-02 15:20:58 punit-naik Okay but I if I just forget to use  must . The error stack-trace seems pretty unhelpful in that case no?"><a href="#t1527952858000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:20:58</span>                punit-naik </span><span>Okay but I if I just forget to use </span><code>must</code><span>. The error stack-trace seems pretty unhelpful in that case no?</span></div><div id="t1527952873000095" t="2018-06-02 15:21:13 nathanmarz your path says to navigate to that key"><a href="#t1527952873000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:21:13</span>           nathanmarz </span><span>your path says to navigate to that key</span></div><div id="t1527952894000044" t="2018-06-02 15:21:34 nathanmarz it&apos;s doing exactly what you instructed"><a href="#t1527952894000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:21:34</span>           nathanmarz </span><span>it&apos;s doing exactly what you instructed</span></div><div id="t1527952948000132" t="2018-06-02 15:22:28 nathanmarz it&apos;s like doing  (update {} :a inc)"><a href="#t1527952948000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:22:28</span>           nathanmarz </span><span>it&apos;s like doing </span><code>(update {} :a inc)</code></div><div id="t1527953076000039" t="2018-06-02 15:24:36 punit-naik okay."><a href="#t1527953076000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-02</span> <span class="t" onclick="H(this)">15:24:36</span>           punit-naik </span><span>okay.</span></div><div id="t1528000547000072" t="2018-06-03 04:35:47 montanonic If I have a map, how would I transform  MAP-VALS  but also passing the key corresponding to the val to the function? The issue is that if I just use  ALL , it also transforms the keys, which I don&apos;t want; but if I use  MAP-VALS , then I lose the context of the key. I realize that with I can just use  map  to achieve this without Specter, but then I&apos;d have to use  (into {})  to get it back to a map. I&apos;m transforming the map a lot, so this is undesirable."><a href="#t1528000547000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-03</span> <span class="t" onclick="H(this)">04:35:47</span>           montanonic </span><span>If I have a map, how would I transform </span><code>MAP-VALS</code><span> but also passing the key corresponding to the val to the function? The issue is that if I just use </span><code>ALL</code><span>, it also transforms the keys, which I don&apos;t want; but if I use </span><code>MAP-VALS</code><span>, then I lose the context of the key. I realize that with I can just use </span><code>map</code><span> to achieve this without Specter, but then I&apos;d have to use </span><code>(into {})</code><span> to get it back to a map. I&apos;m transforming the map a lot, so this is undesirable.</span></div><div id="t1528001445000038" t="2018-06-03 04:50:45 nathanmarz @montanonic the pattern for that is  (transform [ALL (collect-one FIRST) LAST] (fn [k v] ...) data)"><a href="#t1528001445000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-03</span> <span class="t" onclick="H(this)">04:50:45</span>           nathanmarz </span><span>@montanonic the pattern for that is </span><code>(transform [ALL (collect-one FIRST) LAST] (fn [k v] ...) data)</code></div><div id="t1528001500000023" t="2018-06-03 04:51:40 montanonic Ahh, nice. Thanks!"><a href="#t1528001500000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-03</span> <span class="t" onclick="H(this)">04:51:40</span>           montanonic </span><span>Ahh, nice. Thanks!</span></div><div id="t1528208122000829" t="2018-06-05 14:15:22 daveliepmann Hi folks. I have a map and want to  transform  it to a nested map by applying a function to the key. A contrived example would be  {&quot;ab&quot; 5, &quot;az&quot; 10}  would become  {&quot;a&quot; {&quot;b&quot; 5, &quot;z 10} . I don&apos;t see a way to do this with  transform —am I missing something?"><a href="#t1528208122000829" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-05</span> <span class="t" onclick="H(this)">14:15:22</span>         daveliepmann </span><span>Hi folks. I have a map and want to </span><code>transform</code><span> it to a nested map by applying a function to the key. A contrived example would be </span><code>{&quot;ab&quot; 5, &quot;az&quot; 10}</code><span> would become </span><code>{&quot;a&quot; {&quot;b&quot; 5, &quot;z 10}</code><span>. I don&apos;t see a way to do this with </span><code>transform</code><span>—am I missing something?</span></div><div id="t1528208470000281" t="2018-06-05 14:21:10 nathanmarz @daveliepmann that&apos;s a restructure of the entire data structure, so specter won&apos;t be better than just doing it without"><a href="#t1528208470000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-05</span> <span class="t" onclick="H(this)">14:21:10</span>           nathanmarz </span><span>@daveliepmann that&apos;s a restructure of the entire data structure, so specter won&apos;t be better than just doing it without</span></div><div id="t1528208540000769" t="2018-06-05 14:22:20 nathanmarz specter lets you target a precise part of a data structure and only change that part, which isn&apos;t the case here"><a href="#t1528208540000769" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-05</span> <span class="t" onclick="H(this)">14:22:20</span>           nathanmarz </span><span>specter lets you target a precise part of a data structure and only change that part, which isn&apos;t the case here</span></div><div id="t1528208580000311" t="2018-06-05 14:23:00 daveliepmann I had that suspicion, but it helps to hear it from the source. Thanks!  🙂"><a href="#t1528208580000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-05</span> <span class="t" onclick="H(this)">14:23:00</span>         daveliepmann </span><span>I had that suspicion, but it helps to hear it from the source. Thanks! </span><b>🙂</b></div><div id="t1528306057000034" t="2018-06-06 17:27:37 jeremyraines hi folks, wondering if someone can help me understand why the following are not equivalent"><a href="#t1528306057000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:27:37</span>         jeremyraines </span><span>hi folks, wondering if someone can help me understand why the following are not equivalent</span></div><div id="t1528306133000059" t="2018-06-06 17:28:53 jeremyraines where the contents of the atom  foo  are exactly the vec returned from the first expression"><a href="#t1528306133000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:28:53</span>         jeremyraines </span><span>where the contents of the atom </span><code>foo</code><span> are exactly the vec returned from the first expression</span></div><div id="t1528306270000710" t="2018-06-06 17:31:10 nathanmarz @jeremyraines  filterer  takes in a subpath and keeps elements for which that path navigates to at least one value"><a href="#t1528306270000710" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:31:10</span>           nathanmarz </span><span>@jeremyraines </span><code>filterer</code><span> takes in a subpath and keeps elements for which that path navigates to at least one value</span></div><div id="t1528306277000481" t="2018-06-06 17:31:17 nathanmarz :bar  always navigates"><a href="#t1528306277000481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:31:17</span>           nathanmarz </span><code>:bar</code><span> always navigates</span></div><div id="t1528306297000548" t="2018-06-06 17:31:37 nathanmarz you can do  (sp/select [sp/ATOM (sp/filterer (pred :bar)) sp/ALL] foo)"><a href="#t1528306297000548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:31:37</span>           nathanmarz </span><span>you can do </span><code>(sp/select [sp/ATOM (sp/filterer (pred :bar)) sp/ALL] foo)</code></div><div id="t1528306321000332" t="2018-06-06 17:32:01 jeremyraines ah, got it.  Thank you!"><a href="#t1528306321000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:32:01</span>         jeremyraines </span><span>ah, got it.  Thank you!</span></div><div id="t1528307713000347" t="2018-06-06 17:55:13 currentoor @nathanmarz I just started playing with specter, it’s been on my list for a while. I’m mad at myself for not using this work of art sooner! Just wanted to say thanks for making this and you’re doing God’s work!  😄"><a href="#t1528307713000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:55:13</span>           currentoor </span><span>@nathanmarz I just started playing with specter, it’s been on my list for a while. I’m mad at myself for not using this work of art sooner! Just wanted to say thanks for making this and you’re doing God’s work! </span><b>😄</b></div><div id="t1528307884000333" t="2018-06-06 17:58:04 nathanmarz @currentoor thanks :)"><a href="#t1528307884000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:58:04</span>           nathanmarz </span><span>@currentoor thanks :)</span></div><div id="t1528307913000043" t="2018-06-06 17:58:33 currentoor dealing the salesforce API just got a whole lot easier (and more fun)!"><a href="#t1528307913000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">17:58:33</span>           currentoor </span><span>dealing the salesforce API just got a whole lot easier (and more fun)!</span></div><div id="t1528320559000134" t="2018-06-06 21:29:19 sophiago I modified the  map-key-walker  example from the wiki page on recursive navigators so that it will look inside vectors as well as maps, but ideally i&apos;d like to navigate to the inverse so I can delete all other key-value pairs and leave the ones selected with the structure they were nested in."><a href="#t1528320559000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">21:29:19</span>             sophiago </span><span>I modified the </span><code>map-key-walker</code><span> example from the wiki page on recursive navigators so that it will look inside vectors as well as maps, but ideally i&apos;d like to navigate to the inverse so I can delete all other key-value pairs and leave the ones selected with the structure they were nested in.</span></div><div id="t1528327104000153" t="2018-06-06 23:18:24 nathanmarz @sophiago you&apos;re trying to do too much in those paths"><a href="#t1528327104000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:18:24</span>           nathanmarz </span><span>@sophiago you&apos;re trying to do too much in those paths</span></div><div id="t1528327141000105" t="2018-06-06 23:19:01 nathanmarz don&apos;t navigate to both all the recursive maps and to a specific key in the same path"><a href="#t1528327141000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:19:01</span>           nathanmarz </span><span>don&apos;t navigate to both all the recursive maps and to a specific key in the same path</span></div><div id="t1528327154000014" t="2018-06-06 23:19:14 nathanmarz have one path that navigates to all the maps and then navigate to the key from there"><a href="#t1528327154000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:19:14</span>           nathanmarz </span><span>have one path that navigates to all the maps and then navigate to the key from there</span></div><div id="t1528327175000031" t="2018-06-06 23:19:35 nathanmarz (def data {:baz &quot;qux&quot;, :locals [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (continue-then-stay MAP-VALS p)
              coll? [ALL p]
              )))

(transform MAP-NODES #(select-keys % [:locals]) data)
"><a href="#t1528327175000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:19:35</span>           nathanmarz </span><pre>(def data {:baz &quot;qux&quot;, :locals [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (continue-then-stay MAP-VALS p)
              coll? [ALL p]
              )))

(transform MAP-NODES #(select-keys % [:locals]) data)
</pre></div><div id="t1528327185000017" t="2018-06-06 23:19:45 nathanmarz not sure what you mean by &quot;inverse&quot;"><a href="#t1528327185000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:19:45</span>           nathanmarz </span><span>not sure what you mean by &quot;inverse&quot;</span></div><div id="t1528327210000166" t="2018-06-06 23:20:10 nathanmarz you mean get rid of all &quot;:locals&quot; keys in all maps?"><a href="#t1528327210000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:20:10</span>           nathanmarz </span><span>you mean get rid of all &quot;:locals&quot; keys in all maps?</span></div><div id="t1528327362000204" t="2018-06-06 23:22:42 sophiago No, I meant select for every k-v pair where the key is not the one specified. I figured using a navigator like that with  (setval [..] NONE ..)  would be the easiest way to preserve structure."><a href="#t1528327362000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:22:42</span>             sophiago </span><span>No, I meant select for every k-v pair where the key is not the one specified. I figured using a navigator like that with </span><code>(setval [..] NONE ..)</code><span> would be the easiest way to preserve structure.</span></div><div id="t1528327404000345" t="2018-06-06 23:23:24 nathanmarz that&apos;s just  [ALL (selected? FIRST #(not= % k)) LAST]"><a href="#t1528327404000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:23:24</span>           nathanmarz </span><span>that&apos;s just </span><code>[ALL (selected? FIRST #(not= % k)) LAST]</code></div><div id="t1528327476000243" t="2018-06-06 23:24:36 sophiago Ah. Okay, thanks. I don&apos;t think that&apos;s even necessary now, though. I was fairly close to your solution in some of the navigators I tried, but not quite  😛"><a href="#t1528327476000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:24:36</span>             sophiago </span><span>Ah. Okay, thanks. I don&apos;t think that&apos;s even necessary now, though. I was fairly close to your solution in some of the navigators I tried, but not quite </span><b>😛</b></div><div id="t1528327636000178" t="2018-06-06 23:27:16 sophiago I&apos;m still having trouble with your version of  MAP-NODES  and a full ast from  tools.analyzer.jvm  though"><a href="#t1528327636000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:27:16</span>             sophiago </span><span>I&apos;m still having trouble with your version of </span><code>MAP-NODES</code><span> and a full ast from </span><code>tools.analyzer.jvm</code><span> though</span></div><div id="t1528327780000048" t="2018-06-06 23:29:40 sophiago Right, it still doesn&apos;t search bottom-up meaning it will prune branches that still contain the keys I&apos;m looking for, e.g.  (def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})  returns an empty map."><a href="#t1528327780000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:29:40</span>             sophiago </span><span>Right, it still doesn&apos;t search bottom-up meaning it will prune branches that still contain the keys I&apos;m looking for, e.g. </span><code>(def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})</code><span> returns an empty map.</span></div><div id="t1528327845000018" t="2018-06-06 23:30:45 sophiago So that works as well as my second example above, but still fails on the same case"><a href="#t1528327845000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:30:45</span>             sophiago </span><span>So that works as well as my second example above, but still fails on the same case</span></div><div id="t1528327912000302" t="2018-06-06 23:31:52 sophiago I&apos;m realizing just how difficult it is to do breadth-first search in Clojure  😕"><a href="#t1528327912000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:31:52</span>             sophiago </span><span>I&apos;m realizing just how difficult it is to do breadth-first search in Clojure </span><b>😕</b></div><div id="t1528327986000137" t="2018-06-06 23:33:06 sophiago I mean, I can return the elements of a tree in breadth-first order but can&apos;t figure out how to transform it in that order."><a href="#t1528327986000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:33:06</span>             sophiago </span><span>I mean, I can return the elements of a tree in breadth-first order but can&apos;t figure out how to transform it in that order.</span></div><div id="t1528328755000309" t="2018-06-06 23:45:55 sophiago This is what I&apos;m going for with a lengthy example you&apos;d want to pretty-print:  https://gist.github.com/Sophia-Gold/d48be3ec125a453de7cec2033a465ef8"><a href="#t1528328755000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:45:55</span>             sophiago </span><span>This is what I&apos;m going for with a lengthy example you&apos;d want to pretty-print: </span><a href="https://gist.github.com/Sophia-Gold/d48be3ec125a453de7cec2033a465ef8" target="_blank">https://gist.github.com/Sophia-Gold/d48be3ec125a453de7cec2033a465ef8</a></div><div id="t1528328823000102" t="2018-06-06 23:47:03 sophiago But really, the tiny examples in my second paste above cover the problem. In case it wasn&apos;t clear, it was working on the first structure and failing on the second."><a href="#t1528328823000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-06</span> <span class="t" onclick="H(this)">23:47:03</span>             sophiago </span><span>But really, the tiny examples in my second paste above cover the problem. In case it wasn&apos;t clear, it was working on the first structure and failing on the second.</span></div><div id="t1528333649000054" t="2018-06-07 01:07:29 nathanmarz @sophiago it&apos;s a lot easier if your maps have more information about what they represent"><a href="#t1528333649000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:07:29</span>           nathanmarz </span><span>@sophiago it&apos;s a lot easier if your maps have more information about what they represent</span></div><div id="t1528333670000220" t="2018-06-07 01:07:50 nathanmarz this would be a way to do it, though it&apos;s not very efficient:
 (def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot; :k &quot;v&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (stay-then-continue MAP-VALS p)
              coll? [ALL p]
              )))

(transform
  [MAP-NODES
   (not-selected?
     MAP-VALS
     MAP-NODES
     (must :locals))]
  #(select-keys % [:locals])
  data)
"><a href="#t1528333670000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:07:50</span>           nathanmarz </span><span>this would be a way to do it, though it&apos;s not very efficient:
</span><pre>(def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot; :k &quot;v&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (stay-then-continue MAP-VALS p)
              coll? [ALL p]
              )))

(transform
  [MAP-NODES
   (not-selected?
     MAP-VALS
     MAP-NODES
     (must :locals))]
  #(select-keys % [:locals])
  data)
</pre></div><div id="t1528333822000021" t="2018-06-07 01:10:22 sophiago Unfortunately, I don&apos;t have control over data representation in this case. But I think we&apos;re converging on something similar. I&apos;m trying something like this:  (setval [MAP-NODES #(and (not= :locals (first %)) (not (coll? (second %))))] NONE {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})"><a href="#t1528333822000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:10:22</span>             sophiago </span><span>Unfortunately, I don&apos;t have control over data representation in this case. But I think we&apos;re converging on something similar. I&apos;m trying something like this: </span><code>(setval [MAP-NODES #(and (not= :locals (first %)) (not (coll? (second %))))] NONE {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})</code></div><div id="t1528334127000065" t="2018-06-07 01:15:27 nathanmarz this is a cleaner way to write that:
 (setval
  [MAP-NODES
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
"><a href="#t1528334127000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:15:27</span>           nathanmarz </span><span>this is a cleaner way to write that:
</span><pre>(setval
  [MAP-NODES
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
</pre></div><div id="t1528334178000130" t="2018-06-07 01:16:18 nathanmarz if you want to get rid of the empty map you can do this:
 (def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot; :k &quot;v&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (stay-then-continue MAP-VALS p)
              coll? [(compact ALL p)]
              )))

(setval
  [MAP-NODES
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
"><a href="#t1528334178000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:16:18</span>           nathanmarz </span><span>if you want to get rid of the empty map you can do this:
</span><pre>(def data {:baz &quot;qux&quot;, :env [{:locals &quot;foo&quot; :k &quot;v&quot;} {:locals &quot;bar&quot;} {:baz &quot;qux&quot;}]})

(def MAP-NODES
  (recursive-path [] p
   (cond-path map? (stay-then-continue MAP-VALS p)
              coll? [(compact ALL p)]
              )))

(setval
  [MAP-NODES
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
</pre></div><div id="t1528334265000209" t="2018-06-07 01:17:45 sophiago Nice. I think this might be what I&apos;m looking for"><a href="#t1528334265000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:17:45</span>             sophiago </span><span>Nice. I think this might be what I&apos;m looking for</span></div><div id="t1528334594000065" t="2018-06-07 01:23:14 sophiago Okay, yeah I think that&apos;s good enough I can follow it from here.  compact  is being called on a keyword at some point in the traversal of a full ast, but I probably want to clean up the results further. Thanks yet again, @nathanmarz"><a href="#t1528334594000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:23:14</span>             sophiago </span><span>Okay, yeah I think that&apos;s good enough I can follow it from here. </span><code>compact</code><span> is being called on a keyword at some point in the traversal of a full ast, but I probably want to clean up the results further. Thanks yet again, @nathanmarz</span></div><div id="t1528334731000175" t="2018-06-07 01:25:31 sophiago I should probably think about contributing to your docs if you think this is a common enough use case. I would think Specter is ideal for working with  tools.analyzer  and in fact there was one Jira ticket for the latter related to Ridley."><a href="#t1528334731000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-07</span> <span class="t" onclick="H(this)">01:25:31</span>             sophiago </span><span>I should probably think about contributing to your docs if you think this is a common enough use case. I would think Specter is ideal for working with </span><code>tools.analyzer</code><span> and in fact there was one Jira ticket for the latter related to Ridley.</span></div><div id="t1528491920000463" t="2018-06-08 21:05:20 sophiago @nathanmarz sorry, one more thing I&apos;m stuck on with the navigators above: I&apos;d like the macros that call them to stop at any keys in  not-selected? ,  :locals  in this example, rather than just skipping them and navigating deeper. It would seem I just need to move the  not-selected?  navigators into  recursive-path  so navigation stops there and  setval  will only apply the other predicates to elements above it, but that doesn&apos;t seem to be working for me, even using separate macros."><a href="#t1528491920000463" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:05:20</span>             sophiago </span><span>@nathanmarz sorry, one more thing I&apos;m stuck on with the navigators above: I&apos;d like the macros that call them to stop at any keys in </span><code>not-selected?</code><span>, </span><code>:locals</code><span> in this example, rather than just skipping them and navigating deeper. It would seem I just need to move the </span><code>not-selected?</code><span> navigators into </span><code>recursive-path</code><span> so navigation stops there and </span><code>setval</code><span> will only apply the other predicates to elements above it, but that doesn&apos;t seem to be working for me, even using separate macros.</span></div><div id="t1528492584000102" t="2018-06-08 21:16:24 nathanmarz @sophiago you want it to stop navigation at map values whose key is not  :locals ?"><a href="#t1528492584000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:16:24</span>           nathanmarz </span><span>@sophiago you want it to stop navigation at map values whose key is not </span><code>:locals</code><span>?</span></div><div id="t1528492647000389" t="2018-06-08 21:17:27 sophiago The opposite. Stop recursive navigation into the value of that key."><a href="#t1528492647000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:17:27</span>             sophiago </span><span>The opposite. Stop recursive navigation into the value of that key.</span></div><div id="t1528492660000275" t="2018-06-08 21:17:40 nathanmarz so stop navigation at any map?"><a href="#t1528492660000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:17:40</span>           nathanmarz </span><span>so stop navigation at any map?</span></div><div id="t1528492675000039" t="2018-06-08 21:17:55 nathanmarz or stop navigation at maps with a  :locals  key?"><a href="#t1528492675000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:17:55</span>           nathanmarz </span><span>or stop navigation at maps with a </span><code>:locals</code><span> key?</span></div><div id="t1528492800000427" t="2018-06-08 21:20:00 sophiago So if I have  {:foo &quot;bar&quot; :env [{:locals &quot;baz&quot;} {:locals {:baz &quot;qux&quot;}}]}  I can use a macro like  setval  above and not have it delete  {:baz &quot;qux&quot;}"><a href="#t1528492800000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:20:00</span>             sophiago </span><span>So if I have </span><code>{:foo &quot;bar&quot; :env [{:locals &quot;baz&quot;} {:locals {:baz &quot;qux&quot;}}]}</code><span> I can use a macro like </span><code>setval</code><span> above and not have it delete </span><code>{:baz &quot;qux&quot;}</code></div><div id="t1528492839000017" t="2018-06-08 21:20:39 sophiago I&apos;ve been playing with it and it seems to come down to how I compose predicates in recursive paths"><a href="#t1528492839000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:20:39</span>             sophiago </span><span>I&apos;ve been playing with it and it seems to come down to how I compose predicates in recursive paths</span></div><div id="t1528492872000536" t="2018-06-08 21:21:12 nathanmarz ok, so basically don&apos;t recurse into  :locals"><a href="#t1528492872000536" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:21:12</span>           nathanmarz </span><span>ok, so basically don&apos;t recurse into </span><code>:locals</code></div><div id="t1528492892000379" t="2018-06-08 21:21:32 sophiago Yes"><a href="#t1528492892000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:21:32</span>             sophiago </span><span>Yes</span></div><div id="t1528492908000185" t="2018-06-08 21:21:48 sophiago And more generally, I just want to decouple the recursion from the predicates I&apos;m composing"><a href="#t1528492908000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:21:48</span>             sophiago </span><span>And more generally, I just want to decouple the recursion from the predicates I&apos;m composing</span></div><div id="t1528493012000086" t="2018-06-08 21:23:32 nathanmarz (def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (if-path (must k)
                      STAY
                      (stay-then-continue MAP-VALS p))
               coll? (compact ALL p)
               )))

(setval
  [(maps-with-key-stop :locals)
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
"><a href="#t1528493012000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:23:32</span>           nathanmarz </span><pre>(def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (if-path (must k)
                      STAY
                      (stay-then-continue MAP-VALS p))
               coll? (compact ALL p)
               )))

(setval
  [(maps-with-key-stop :locals)
   ALL
   (not-selected? FIRST (pred= :locals))
   LAST
   (complement coll?)]
  NONE
  data)
</pre></div><div id="t1528493046000224" t="2018-06-08 21:24:06 sophiago Oh, I did not try something like that"><a href="#t1528493046000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:24:06</span>             sophiago </span><span>Oh, I did not try something like that</span></div><div id="t1528493052000403" t="2018-06-08 21:24:12 sophiago Let me give it a test"><a href="#t1528493052000403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:24:12</span>             sophiago </span><span>Let me give it a test</span></div><div id="t1528493139000417" t="2018-06-08 21:25:39 nathanmarz actually you probably want
 (def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred= k))
                      LAST
                      p)
               coll? (compact ALL p)
               )))
"><a href="#t1528493139000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:25:39</span>           nathanmarz </span><span>actually you probably want
</span><pre>(def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred= k))
                      LAST
                      p)
               coll? (compact ALL p)
               )))
</pre></div><div id="t1528493176000157" t="2018-06-08 21:26:16 sophiago That looks more like what I was trying"><a href="#t1528493176000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:26:16</span>             sophiago </span><span>That looks more like what I was trying</span></div><div id="t1528493356000135" t="2018-06-08 21:29:16 sophiago I think I actually want this: (def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred= k))
                      ALL
                      p)
               coll? [ALL p])))"><a href="#t1528493356000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:29:16</span>             sophiago </span><span>I think I actually want this:</span><pre>(def maps-with-key-stop
  (recursive-path [k] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred= k))
                      ALL
                      p)
               coll? [ALL p])))</pre></div><div id="t1528493614000257" t="2018-06-08 21:33:34 sophiago Except I&apos;m trying to get the  k  to be a collection and  apply  isn&apos;t giving the same results"><a href="#t1528493614000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:33:34</span>             sophiago </span><span>Except I&apos;m trying to get the </span><code>k</code><span> to be a collection and </span><code>apply</code><span> isn&apos;t giving the same results</span></div><div id="t1528493727000283" t="2018-06-08 21:35:27 sophiago Oh, that&apos;s what  eachnav  is for, right?"><a href="#t1528493727000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">21:35:27</span>             sophiago </span><span>Oh, that&apos;s what </span><code>eachnav</code><span> is for, right?</span></div><div id="t1528499094000019" t="2018-06-08 23:04:54 nathanmarz that&apos;s not what  eachnav  is for"><a href="#t1528499094000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">23:04:54</span>           nathanmarz </span><span>that&apos;s not what </span><code>eachnav</code><span> is for</span></div><div id="t1528499137000056" t="2018-06-08 23:05:37 nathanmarz @sophiago I think you want:
 (def maps-with-key-stop
  (recursive-path [kset] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred kset))
                      LAST
                      p)
               coll? [ALL p]
               )))
"><a href="#t1528499137000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">23:05:37</span>           nathanmarz </span><span>@sophiago I think you want:
</span><pre>(def maps-with-key-stop
  (recursive-path [kset] p
    (cond-path map? (stay-then-continue
                      ALL
                      (not-selected? FIRST (pred kset))
                      LAST
                      p)
               coll? [ALL p]
               )))
</pre></div><div id="t1528499560000236" t="2018-06-08 23:12:40 sophiago Thanks, that works! Just a bit more verbose when I call it. I still have the first issue where it doesn&apos;t seem to be recursing inside other colls, though."><a href="#t1528499560000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">23:12:40</span>             sophiago </span><span>Thanks, that works! Just a bit more verbose when I call it. I still have the first issue where it doesn&apos;t seem to be recursing inside other colls, though.</span></div><div id="t1528499697000287" t="2018-06-08 23:14:57 sophiago And I have to delete the extra predicate argument from the first cond or none of these have worked. That seems to make sense to me: I don&apos;t actually want  (complement coll?)  added to the path if the key does match."><a href="#t1528499697000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-08</span> <span class="t" onclick="H(this)">23:14:57</span>             sophiago </span><span>And I have to delete the extra predicate argument from the first cond or none of these have worked. That seems to make sense to me: I don&apos;t actually want </span><code>(complement coll?)</code><span> added to the path if the key does match.</span></div><div id="t1528727056000723" t="2018-06-11 14:24:16 ben.mumford what is the more elegant way to extract a value from a nested data structure and then apply a transform to it?"><a href="#t1528727056000723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">14:24:16</span>          ben.mumford </span><span>what is the more elegant way to extract a value from a nested data structure and then apply a transform to it?</span></div><div id="t1528727143000591" t="2018-06-11 14:25:43 ben.mumford my use case is that i have lots of different types of input data structures and i want to normalise them so that i can compose and compare them"><a href="#t1528727143000591" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">14:25:43</span>          ben.mumford </span><span>my use case is that i have lots of different types of input data structures and i want to normalise them so that i can compose and compare them</span></div><div id="t1528727410000568" t="2018-06-11 14:30:10 ben.mumford so what i&apos;m doing is for each input object creating a new output object where each field is calculated using a select then a transform (so i guess question 2 is does this make specter a good fit for my use case as i&apos;m not modifying a pre-existing data structure)"><a href="#t1528727410000568" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">14:30:10</span>          ben.mumford </span><span>so what i&apos;m doing is for each input object creating a new output object where each field is calculated using a select then a transform (so i guess question 2 is does this make specter a good fit for my use case as i&apos;m not modifying a pre-existing data structure)</span></div><div id="t1528732274000467" t="2018-06-11 15:51:14 nathanmarz @ben.mumford620 you can use  view  or  transformed  at the end of the path to the select operation"><a href="#t1528732274000467" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">15:51:14</span>           nathanmarz </span><span>@ben.mumford620 you can use </span><code>view</code><span> or </span><code>transformed</code><span> at the end of the path to the select operation</span></div><div id="t1528734457000177" t="2018-06-11 16:27:37 jsa-aerial Would spectre be the &apos;natural/goto&apos; thing for taking a nested data structure and a &apos;key&apos; and replace any occurance of it with a value?  Where &apos;key&apos; would most probably be literally a keyword (or possibly string)?"><a href="#t1528734457000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">16:27:37</span>           jsa-aerial </span><span>Would spectre be the &apos;natural/goto&apos; thing for taking a nested data structure and a &apos;key&apos; and replace any occurance of it with a value?  Where &apos;key&apos; would most probably be literally a keyword (or possibly string)?</span></div><div id="t1528737378000579" t="2018-06-11 17:16:18 nathanmarz @jsa-aerial yes, that&apos;s a bread and butter use case"><a href="#t1528737378000579" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">17:16:18</span>           nathanmarz </span><span>@jsa-aerial yes, that&apos;s a bread and butter use case</span></div><div id="t1528737426000533" t="2018-06-11 17:17:06 nathanmarz walker  is the lazy way to do that, but if your data has any structure to it whatsoever it&apos;s better to make a precise path"><a href="#t1528737426000533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">17:17:06</span>           nathanmarz </span><code>walker</code><span> is the lazy way to do that, but if your data has any structure to it whatsoever it&apos;s better to make a precise path</span></div><div id="t1528737449000446" t="2018-06-11 17:17:29 nathanmarz much higher performance + much less bug prone"><a href="#t1528737449000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">17:17:29</span>           nathanmarz </span><span>much higher performance + much less bug prone</span></div><div id="t1528741522000310" t="2018-06-11 18:25:22 jsa-aerial @nathanmarz OK, sounds promising. The data will have quite a lot of structure and the &apos;paths&apos; (there will typically be several such &apos;keys&apos;) will basically not be known ahead of time. So, this basically involves &apos;search&apos; and replace. Why would non precise path and  walker  tend to be more &apos;bug prone&apos;??"><a href="#t1528741522000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:25:22</span>           jsa-aerial </span><span>@nathanmarz OK, sounds promising. The data will have quite a lot of structure and the &apos;paths&apos; (there will typically be several such &apos;keys&apos;) will basically not be known ahead of time. So, this basically involves &apos;search&apos; and replace. Why would non precise path and </span><code>walker</code><span> tend to be more &apos;bug prone&apos;??</span></div><div id="t1528742166000510" t="2018-06-11 18:36:06 nathanmarz walker  will descend everywhere including places you don&apos;t expect, like records, map keys, etc."><a href="#t1528742166000510" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:36:06</span>           nathanmarz </span><code>walker</code><span> will descend everywhere including places you don&apos;t expect, like records, map keys, etc.</span></div><div id="t1528742262000618" t="2018-06-11 18:37:42 jsa-aerial But if the &apos;key&apos; can basically be anywhere, that would seem to be the &apos;right thing&apos;, correct?"><a href="#t1528742262000618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:37:42</span>                jsa-aerial </span><span>But if the &apos;key&apos; can basically be anywhere, that would seem to be the &apos;right thing&apos;, correct?</span></div><div id="t1528742177000701" t="2018-06-11 18:36:17 jsa-aerial Actually, ALL almost looks like exactly what is needed here. Except it returns [k v] for map elements"><a href="#t1528742177000701" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:36:17</span>           jsa-aerial </span><span>Actually, ALL almost looks like exactly what is needed here. Except it returns [k v] for map elements</span></div><div id="t1528742269000386" t="2018-06-11 18:37:49 nathanmarz here&apos;s a variation of  walker  that doesn&apos;t descend into map keys / key/value pairs
 (def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [MAP-VALS p]
               coll? [ALL p]
               )))
"><a href="#t1528742269000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:37:49</span>           nathanmarz </span><span>here&apos;s a variation of </span><code>walker</code><span> that doesn&apos;t descend into map keys / key/value pairs
</span><pre>(def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [MAP-VALS p]
               coll? [ALL p]
               )))
</pre></div><div id="t1528742306000759" t="2018-06-11 18:38:26 nathanmarz if your data is truly completely unstructured, then  walker  is more appropriate"><a href="#t1528742306000759" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:38:26</span>           nathanmarz </span><span>if your data is truly completely unstructured, then </span><code>walker</code><span> is more appropriate</span></div><div id="t1528742323000333" t="2018-06-11 18:38:43 nathanmarz though even then, it&apos;s better to make a variation that doesn&apos;t navigate to key/value pairs"><a href="#t1528742323000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:38:43</span>           nathanmarz </span><span>though even then, it&apos;s better to make a variation that doesn&apos;t navigate to key/value pairs</span></div><div id="t1528742354000360" t="2018-06-11 18:39:14 nathanmarz e.g.
 (def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [(multi-path MAP-VALS MAP-KEYS) p]
               coll? [ALL p]
               )))
"><a href="#t1528742354000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:39:14</span>           nathanmarz </span><span>e.g.
</span><pre>(def my-walker
  (recursive-path [afn] p
    (cond-path (pred afn) STAY
               map? [(multi-path MAP-VALS MAP-KEYS) p]
               coll? [ALL p]
               )))
</pre></div><div id="t1528742357000793" t="2018-06-11 18:39:17 jsa-aerial I think we have a semantic issue here - you are using &apos;structured&apos; in a special way - not just to indicate a lot of structure in the data"><a href="#t1528742357000793" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:39:17</span>           jsa-aerial </span><span>I think we have a semantic issue here - you are using &apos;structured&apos; in a special way - not just to indicate a lot of structure in the data</span></div><div id="t1528742393000643" t="2018-06-11 18:39:53 nathanmarz by structure I mean that the organization of the data is precise and well-understood"><a href="#t1528742393000643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:39:53</span>           nathanmarz </span><span>by structure I mean that the organization of the data is precise and well-understood</span></div><div id="t1528742430000479" t="2018-06-11 18:40:30 jsa-aerial Something like this {:a ::some-key ....} can occur and should become {:a &lt;the-value-for-::some-key&gt; ...}"><a href="#t1528742430000479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:40:30</span>           jsa-aerial </span><span>Something like this {:a ::some-key ....} can occur and should become {:a &lt;the-value-for-::some-key&gt; ...}</span></div><div id="t1528742524000265" t="2018-06-11 18:42:04 jsa-aerial It&apos;s precise, it is just not fully known up front. And these &apos;keys&apos; can occur in all sorts of places. Basically, these structures will be &quot;parameterized&quot; vega-lite specifications."><a href="#t1528742524000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:42:04</span>           jsa-aerial </span><span>It&apos;s precise, it is just not fully known up front. And these &apos;keys&apos; can occur in all sorts of places. Basically, these structures will be &quot;parameterized&quot; vega-lite specifications.</span></div><div id="t1528742557000663" t="2018-06-11 18:42:37 nathanmarz if the paths to what you care about aren&apos;t known in advance, then I would call it unstructured"><a href="#t1528742557000663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:42:37</span>           nathanmarz </span><span>if the paths to what you care about aren&apos;t known in advance, then I would call it unstructured</span></div><div id="t1528742589000189" t="2018-06-11 18:43:09 nathanmarz if you know it will never occur in a map key, then it&apos;s best your path reflect that"><a href="#t1528742589000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:43:09</span>           nathanmarz </span><span>if you know it will never occur in a map key, then it&apos;s best your path reflect that</span></div><div id="t1528742603000619" t="2018-06-11 18:43:23 nathanmarz or if you know any other constraints, those should be included in the path"><a href="#t1528742603000619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:43:23</span>           nathanmarz </span><span>or if you know any other constraints, those should be included in the path</span></div><div id="t1528742604000494" t="2018-06-11 18:43:24 jsa-aerial OK, that is fine - now I know what you mean by that, it would seem  walker  is the way to go"><a href="#t1528742604000494" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:43:24</span>           jsa-aerial </span><span>OK, that is fine - now I know what you mean by that, it would seem </span><code>walker</code><span> is the way to go</span></div><div id="t1528742690000161" t="2018-06-11 18:44:50 jsa-aerial Yeah, those sorts of constraints and assumptions cannot be relied upon in this sort of scenario."><a href="#t1528742690000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:44:50</span>           jsa-aerial </span><span>Yeah, those sorts of constraints and assumptions cannot be relied upon in this sort of scenario.</span></div><div id="t1528742846000596" t="2018-06-11 18:47:26 jsa-aerial There are constraints and requirements in vega-lite data specs, but here the idea is to use a basic layout as a template which will have these &apos;keys&apos; replaced by values for specific cases and these &apos;keys&apos; could be standing in for both VL keys and/or values."><a href="#t1528742846000596" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:47:26</span>           jsa-aerial </span><span>There are constraints and requirements in vega-lite data specs, but here the idea is to use a basic layout as a template which will have these &apos;keys&apos; replaced by values for specific cases and these &apos;keys&apos; could be standing in for both VL keys and/or values.</span></div><div id="t1528743046000695" t="2018-06-11 18:50:46 jsa-aerial Hmmmm ALL maybe could still work if it is just called recursively on any [k v] pair returned"><a href="#t1528743046000695" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">18:50:46</span>           jsa-aerial </span><span>Hmmmm ALL maybe could still work if it is just called recursively on any [k v] pair returned</span></div><div id="t1528757888000151" t="2018-06-11 22:58:08 currentoor is it generally frowned upon to use  setval  inside of a  transform-fn  in a transform call?"><a href="#t1528757888000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-11</span> <span class="t" onclick="H(this)">22:58:08</span>           currentoor </span><span>is it generally frowned upon to use </span><code>setval</code><span> inside of a </span><code>transform-fn</code><span> in a transform call?</span></div><div id="t1528807974000658" t="2018-06-12 12:52:54 nathanmarz @currentoor when that comes up I find that there&apos;s usually a better way to express the overall computation, though not always"><a href="#t1528807974000658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-12</span> <span class="t" onclick="H(this)">12:52:54</span>           nathanmarz </span><span>@currentoor when that comes up I find that there&apos;s usually a better way to express the overall computation, though not always</span></div><div id="t1528842435000362" t="2018-06-12 22:27:15 currentoor thanks!"><a href="#t1528842435000362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-12</span> <span class="t" onclick="H(this)">22:27:15</span>           currentoor </span><span>thanks!</span></div><div id="t1528946585000160" t="2018-06-14 03:23:05 nathanmarz @jsa-aerial with  walker  it&apos;s:
 (let [replacements {:b 77 :x :xxx}]
  (transform [(walker (complement coll?)) #(contains? replacements %)]
    replacements
    data
    ))
"><a href="#t1528946585000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">03:23:05</span>           nathanmarz </span><span>@jsa-aerial with </span><code>walker</code><span> it&apos;s:
</span><pre>(let [replacements {:b 77 :x :xxx}]
  (transform [(walker (complement coll?)) #(contains? replacements %)]
    replacements
    data
    ))
</pre></div><div id="t1528946600000213" t="2018-06-14 03:23:20 nathanmarz better than doing recursion manually in my opinion"><a href="#t1528946600000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">03:23:20</span>           nathanmarz </span><span>better than doing recursion manually in my opinion</span></div><div id="t1528952990000235" t="2018-06-14 05:09:50 jsa-aerial 💯  ah..."><a href="#t1528952990000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">05:09:50</span>           jsa-aerial </span><b>💯</b><span> ah...</span></div><div id="t1528989860001015" t="2018-06-14 15:24:20 lispyclouds Hello, I have the following structure"><a href="#t1528989860001015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:24:20</span>          lispyclouds </span><span>Hello, I have the following structure</span></div><div id="t1528989935000629" t="2018-06-14 15:25:35 lispyclouds and a function  (get-details)  which does  url -&gt; [detailed-url1, detailed-url2 …]"><a href="#t1528989935000629" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:25:35</span>          lispyclouds </span><span>and a function </span><code>(get-details)</code><span> which does </span><code>url -&gt; [detailed-url1, detailed-url2 …]</code></div><div id="t1528989953000249" t="2018-06-14 15:25:53 lispyclouds What i need is the following"><a href="#t1528989953000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:25:53</span>          lispyclouds </span><span>What i need is the following</span></div><div id="t1528990019000325" t="2018-06-14 15:26:59 lispyclouds This is what Im using currently
 (defn categorized-urls []
  (-&gt;&gt; (input)
       (transform [ALL MAP-VALS ALL MAP-VALS ALL] get-details)
       (transform [ALL MAP-VALS ALL MAP-VALS] flatten)))
"><a href="#t1528990019000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:26:59</span>          lispyclouds </span><span>This is what Im using currently
</span><pre>(defn categorized-urls []
  (-&gt;&gt; (input)
       (transform [ALL MAP-VALS ALL MAP-VALS ALL] get-details)
       (transform [ALL MAP-VALS ALL MAP-VALS] flatten)))
</pre></div><div id="t1528990036000992" t="2018-06-14 15:27:16 lispyclouds Is there a better way?"><a href="#t1528990036000992" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:27:16</span>          lispyclouds </span><span>Is there a better way?</span></div><div id="t1528990181000645" t="2018-06-14 15:29:41 lispyclouds The input structure is pretty huge and its taking a while to execute this. Was wondering there might be a better way than twice transforms."><a href="#t1528990181000645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:29:41</span>          lispyclouds </span><span>The input structure is pretty huge and its taking a while to execute this. Was wondering there might be a better way than twice transforms.</span></div><div id="t1528990979000789" t="2018-06-14 15:42:59 nathanmarz @rahul080327 this will speed it up:
 (defn categorized-urls [input]
  (multi-transform
    [ALL
     MAP-VALS
     ALL
     MAP-VALS
     (multi-path
       [ALL (terminal get-details)]
       (terminal #(into [] (mapcat identity) %)))]
    input))
"><a href="#t1528990979000789" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:42:59</span>           nathanmarz </span><span>@rahul080327 this will speed it up:
</span><pre>(defn categorized-urls [input]
  (multi-transform
    [ALL
     MAP-VALS
     ALL
     MAP-VALS
     (multi-path
       [ALL (terminal get-details)]
       (terminal #(into [] (mapcat identity) %)))]
    input))
</pre></div><div id="t1528990994000836" t="2018-06-14 15:43:14 nathanmarz traverses the data structure once instead of twice"><a href="#t1528990994000836" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:43:14</span>           nathanmarz </span><span>traverses the data structure once instead of twice</span></div><div id="t1528991290000143" t="2018-06-14 15:48:10 lispyclouds Ahan thanks a lot @nathanmarz superb  😃"><a href="#t1528991290000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-14</span> <span class="t" onclick="H(this)">15:48:10</span>          lispyclouds </span><span>Ahan thanks a lot @nathanmarz superb </span><b>😃</b></div><div id="t1529275017000048" t="2018-06-17 22:36:57 luke.defeo Hello, am i able to use spectres navigation to define what im looking for  but return a structure several layers up, say for example i have the following data

 (def ctx [
          {
           :id    &quot;blah&quot;
           :name  &quot;News2&quot;
           :rules [[&quot;&quot; &quot;sport&quot; &quot;sport&quot;]
                   [&quot;&quot; &quot;messages&quot;]]}
          {
           :name  &quot;News&quot;
           :rules [[&quot;&quot; &quot;sport&quot;]
                   [&quot;&quot; &quot;messages&quot;]]}
          {
           :name  &quot;monitoring&quot;
           :rules [[&quot;new-relic&quot;]
                   [&quot;stack driver&quot;]]}])
 
 And navigation :
 (select-first [ALL :rules ALL ALL #(= % &quot;stack driver&quot;)] ctx)
 

This will return the string “stack driver” is possible it returns its outer record 
 {
           :name  &quot;monitoring&quot;
           :rules [[&quot;new-relic&quot;]
                   [&quot;stack driver&quot;]]}
"><a href="#t1529275017000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:36:57</span>           luke.defeo </span><span>Hello, am i able to use spectres navigation to define what im looking for  but return a structure several layers up, say for example i have the following data

</span><pre>(def ctx [
          {
           :id    &quot;blah&quot;
           :name  &quot;News2&quot;
           :rules [[&quot;&quot; &quot;sport&quot; &quot;sport&quot;]
                   [&quot;&quot; &quot;messages&quot;]]}
          {
           :name  &quot;News&quot;
           :rules [[&quot;&quot; &quot;sport&quot;]
                   [&quot;&quot; &quot;messages&quot;]]}
          {
           :name  &quot;monitoring&quot;
           :rules [[&quot;new-relic&quot;]
                   [&quot;stack driver&quot;]]}])
</pre><span>
 And navigation :
</span><pre>(select-first [ALL :rules ALL ALL #(= % &quot;stack driver&quot;)] ctx)
</pre><span>

This will return the string “stack driver” is possible it returns its outer record 
</span><pre>{
           :name  &quot;monitoring&quot;
           :rules [[&quot;new-relic&quot;]
                   [&quot;stack driver&quot;]]}
</pre></div><div id="t1529275621000110" t="2018-06-17 22:47:01 manas_marthi Hi Nathan, are there any sample data sets to try select and transform"><a href="#t1529275621000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:47:01</span>         manas_marthi </span><span>Hi Nathan, are there any sample data sets to try select and transform</span></div><div id="t1529275757000082" t="2018-06-17 22:49:17 nathanmarz @luke.defeo use  selected?  for that"><a href="#t1529275757000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:49:17</span>           nathanmarz </span><span>@luke.defeo use </span><code>selected?</code><span> for that</span></div><div id="t1529275759000074" t="2018-06-17 22:49:19 nathanmarz (select-first [ALL (selected? :rules ALL ALL #(= % &quot;stack driver&quot;))] ctx)"><a href="#t1529275759000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:49:19</span>           nathanmarz </span><code>(select-first [ALL (selected? :rules ALL ALL #(= % &quot;stack driver&quot;))] ctx)</code></div><div id="t1529275824000086" t="2018-06-17 22:50:24 nathanmarz @manas.marthi you can use anything"><a href="#t1529275824000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:50:24</span>           nathanmarz </span><span>@manas.marthi you can use anything</span></div><div id="t1529275842000009" t="2018-06-17 22:50:42 nathanmarz e.g. parse some html into a clojure data structure"><a href="#t1529275842000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:50:42</span>           nathanmarz </span><span>e.g. parse some html into a clojure data structure</span></div><div id="t1529275867000070" t="2018-06-17 22:51:07 nathanmarz or just make up small toy examples like in the documentation"><a href="#t1529275867000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">22:51:07</span>           nathanmarz </span><span>or just make up small toy examples like in the documentation</span></div><div id="t1529276577000015" t="2018-06-17 23:02:57 luke.defeo @nathanmarz thanks a lot"><a href="#t1529276577000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">23:02:57</span>           luke.defeo </span><span>@nathanmarz thanks a lot</span></div><div id="t1529276943000085" t="2018-06-17 23:09:03 manas_marthi @nathanmarz thank you!"><a href="#t1529276943000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-17</span> <span class="t" onclick="H(this)">23:09:03</span>         manas_marthi </span><span>@nathanmarz thank you!</span></div><div id="t1529533354000277" t="2018-06-20 22:22:34 montanonic Any one-liner that can &quot;explode&quot; values while keeping things flat? Roughly speaking, like flatmap.

Example: turning  {:a 1 :b 2}  into  {:a 1 :b 2 &quot;a&quot; 1 &quot;b&quot; 2 &apos;a 1 &apos;b 2} , the keys get mapped to a set of new keys, but retain their original values, and the whole is returned as a single flat map."><a href="#t1529533354000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-20</span> <span class="t" onclick="H(this)">22:22:34</span>           montanonic </span><span>Any one-liner that can &quot;explode&quot; values while keeping things flat? Roughly speaking, like flatmap.

Example: turning </span><code>{:a 1 :b 2}</code><span> into </span><code>{:a 1 :b 2 &quot;a&quot; 1 &quot;b&quot; 2 &apos;a 1 &apos;b 2}</code><span>, the keys get mapped to a set of new keys, but retain their original values, and the whole is returned as a single flat map.</span></div><div id="t1529534982000032" t="2018-06-20 22:49:42 montanonic https://github.com/nathanmarz/specter/issues/82#issuecomment-215098107  is close, but not structure-preserving, and passes the arguments inside of an additional vector (which is fine but ideally should be left an implementation detail)."><a href="#t1529534982000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-20</span> <span class="t" onclick="H(this)">22:49:42</span>           montanonic </span><a href="https://github.com/nathanmarz/specter/issues/82#issuecomment-215098107" target="_blank">https://github.com/nathanmarz/specter/issues/82#issuecomment-215098107</a><span> is close, but not structure-preserving, and passes the arguments inside of an additional vector (which is fine but ideally should be left an implementation detail).</span></div><div id="t1529542620000135" t="2018-06-21 00:57:00 nathanmarz @montanonic you would need a new navigator for that"><a href="#t1529542620000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-21</span> <span class="t" onclick="H(this)">00:57:00</span>           nathanmarz </span><span>@montanonic you would need a new navigator for that</span></div><div id="t1529542681000110" t="2018-06-21 00:58:01 nathanmarz fleshing out  ALL-ELEM-SEQ  from that issue to be structure preserving would work"><a href="#t1529542681000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-21</span> <span class="t" onclick="H(this)">00:58:01</span>           nathanmarz </span><span>fleshing out </span><code>ALL-ELEM-SEQ</code><span> from that issue to be structure preserving would work</span></div><div id="t1529850164000109" t="2018-06-24 14:22:44 pepe Hello, I have this data: 

 [{:id 0}
 {:id 1}
 {:id 2 :parent-id 1 :val 1}
 {:id 3 :parent-id 1 :val 1}
 {:id 4 :parent-id 2 :val 2}
 {:id 5 :parent-id 3 :val 2}
 {:id 6 :parent-id 3 :val 2}
 {:id 7 :parent-id 0 :val 100}
 {:id 8 :parent-id 7 :val 200}
 {:id 9 :parent-id 6 :val 3}] 

And I would like to traverse all the :val for :id = 1 and all its descendants. Is it possible with specter?"><a href="#t1529850164000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">14:22:44</span>                 pepe </span><span>Hello, I have this data: 

</span><pre>[{:id 0}
 {:id 1}
 {:id 2 :parent-id 1 :val 1}
 {:id 3 :parent-id 1 :val 1}
 {:id 4 :parent-id 2 :val 2}
 {:id 5 :parent-id 3 :val 2}
 {:id 6 :parent-id 3 :val 2}
 {:id 7 :parent-id 0 :val 100}
 {:id 8 :parent-id 7 :val 200}
 {:id 9 :parent-id 6 :val 3}]</pre><span>

And I would like to traverse all the :val for :id = 1 and all its descendants. Is it possible with specter?</span></div><div id="t1529854161000036" t="2018-06-24 15:29:21 nathanmarz @pepe yes, you can do it with zippers"><a href="#t1529854161000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:29:21</span>           nathanmarz </span><span>@pepe yes, you can do it with zippers</span></div><div id="t1529854203000017" t="2018-06-24 15:30:03 pepe Is it that I have to first compose the tree first then?"><a href="#t1529854203000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:30:03</span>                 pepe </span><span>Is it that I have to first compose the tree first then?</span></div><div id="t1529854341000004" t="2018-06-24 15:32:21 nathanmarz no"><a href="#t1529854341000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:32:21</span>           nathanmarz </span><span>no</span></div><div id="t1529854343000057" t="2018-06-24 15:32:23 nathanmarz one sec I&apos;ll show you"><a href="#t1529854343000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:32:23</span>           nathanmarz </span><span>one sec I&apos;ll show you</span></div><div id="t1529854653000102" t="2018-06-24 15:37:33 nathanmarz @pepe
 (use &apos;com.rpl.specter)
(require &apos;[com.rpl.specter.zipper :as z])

(def data
  [{:id 0}
   {:id 1}
   {:id 2 :parent-id 1 :val 1}
   {:id 3 :parent-id 1 :val 1}
   {:id 4 :parent-id 2 :val 2}
   {:id 5 :parent-id 3 :val 2}
   {:id 6 :parent-id 3 :val 2}
   {:id 7 :parent-id 0 :val 100}
   {:id 8 :parent-id 7 :val 200}
   {:id 9 :parent-id 6 :val 3}])

(def TO-GRAPH (path z/VECTOR-ZIP z/DOWN))
(defn to-node [id]
  (z/find-first #(= (:id %) id))
  )

(def CHILDREN
  (path
    (collect-one z/NODE :id)
    z/LEFTMOST
    z/NEXT-WALK
    (collect-one z/NODE :parent-id)
    (collected? [id1 id2] (= id1 id2))
    DISPENSE
    ))

(def DESCENDANTS (recursive-path [] p (stay-then-continue CHILDREN p)))

(select [TO-GRAPH (to-node 1) DESCENDANTS z/NODE (must :val)] data)
"><a href="#t1529854653000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:37:33</span>           nathanmarz </span><span>@pepe
</span><pre>(use &apos;com.rpl.specter)
(require &apos;[com.rpl.specter.zipper :as z])

(def data
  [{:id 0}
   {:id 1}
   {:id 2 :parent-id 1 :val 1}
   {:id 3 :parent-id 1 :val 1}
   {:id 4 :parent-id 2 :val 2}
   {:id 5 :parent-id 3 :val 2}
   {:id 6 :parent-id 3 :val 2}
   {:id 7 :parent-id 0 :val 100}
   {:id 8 :parent-id 7 :val 200}
   {:id 9 :parent-id 6 :val 3}])

(def TO-GRAPH (path z/VECTOR-ZIP z/DOWN))
(defn to-node [id]
  (z/find-first #(= (:id %) id))
  )

(def CHILDREN
  (path
    (collect-one z/NODE :id)
    z/LEFTMOST
    z/NEXT-WALK
    (collect-one z/NODE :parent-id)
    (collected? [id1 id2] (= id1 id2))
    DISPENSE
    ))

(def DESCENDANTS (recursive-path [] p (stay-then-continue CHILDREN p)))

(select [TO-GRAPH (to-node 1) DESCENDANTS z/NODE (must :val)] data)
</pre></div><div id="t1529854667000061" t="2018-06-24 15:37:47 nathanmarz that said, it&apos;s a really bad representation for a tree"><a href="#t1529854667000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:37:47</span>           nathanmarz </span><span>that said, it&apos;s a really bad representation for a tree</span></div><div id="t1529854831000013" t="2018-06-24 15:40:31 pepe You mean my data? Yeah, some legacy stuff. I will try it and report back. Thank you very much for help!"><a href="#t1529854831000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">15:40:31</span>                      pepe </span><span>You mean my data? Yeah, some legacy stuff. I will try it and report back. Thank you very much for help!</span></div><div id="t1529856422000108" t="2018-06-24 16:07:02 pepe On some bigger trees I am getting  Maximum call stack size exceeded in CLJS. Indeed this representation is bad  😞"><a href="#t1529856422000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">16:07:02</span>                      pepe </span><span>On some bigger trees I am getting  Maximum call stack size exceeded in CLJS. Indeed this representation is bad </span><b>😞</b></div><div id="t1529858183000127" t="2018-06-24 16:36:23 pepe The thing as always, is that those data I am receiving from API. The call stack is exceeded in the recursive-path"><a href="#t1529858183000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">16:36:23</span>                 pepe </span><span>The thing as always, is that those data I am receiving from API. The call stack is exceeded in the recursive-path</span></div><div id="t1529866559000079" t="2018-06-24 18:55:59 nathanmarz @pepe you can do better with custom navigators rather than zippers"><a href="#t1529866559000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">18:55:59</span>           nathanmarz </span><span>@pepe you can do better with custom navigators rather than zippers</span></div><div id="t1529866623000030" t="2018-06-24 18:57:03 nathanmarz see  defnav"><a href="#t1529866623000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">18:57:03</span>           nathanmarz </span><span>see </span><code>defnav</code></div><div id="t1529866683000002" t="2018-06-24 18:58:03 nathanmarz navigate to pair of  [list-of-nodes index] , and then make custom  CHILDREN  navigator that does the search for indices that are direct children of currently navigated index"><a href="#t1529866683000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-24</span> <span class="t" onclick="H(this)">18:58:03</span>           nathanmarz </span><span>navigate to pair of </span><code>[list-of-nodes index]</code><span>, and then make custom </span><code>CHILDREN</code><span> navigator that does the search for indices that are direct children of currently navigated index</span></div><div id="t1529907296000227" t="2018-06-25 06:14:56 pepe Thank you very much! I think it is little bit over my Specter-fu, but I will try."><a href="#t1529907296000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">06:14:56</span>                      pepe </span><span>Thank you very much! I think it is little bit over my Specter-fu, but I will try.</span></div><div id="t1529925507000309" t="2018-06-25 11:18:27 nathanmarz @pepe looks like
 (use &apos;com.rpl.specter)

(def data
  [{:id 0}
   {:id 1}
   {:id 2 :parent-id 1 :val 1}
   {:id 3 :parent-id 1 :val 1}
   {:id 4 :parent-id 2 :val 2}
   {:id 5 :parent-id 3 :val 2}
   {:id 6 :parent-id 3 :val 2}
   {:id 7 :parent-id 0 :val 100}
   {:id 8 :parent-id 7 :val 200}
   {:id 9 :parent-id 6 :val 3}])

(defn- node-index [graph id]
  (select-first
    [INDEXED-VALS
     (selected? LAST :id (pred= id))
     FIRST]
    graph
    ))

(defnav to-node [id]
  (select* [this graph next-fn]
    (if-let [i (node-index graph id)]
      (next-fn [graph i])
      NONE
      ))
  (transform* [this graph next-fn]
    (if-let [i (node-index graph id)]
      (first (next-fn [graph i]))
      graph
      )))

(defn- child-indices [graph id]
  (select
    [INDEXED-VALS
     (selected? LAST :parent-id (pred= id))
     FIRST]
    graph
    ))

(defnav CHILDREN []
  (select* [this [graph i] next-fn]
    (let [id (-&gt; graph (nth i) :id)
          child-i (child-indices graph id)]
      (if (empty? child-i)
        NONE
        (doseq [i child-i]
          (next-fn [graph i])
          ))))
  (transform* [this [graph i] next-fn]
    (let [id (-&gt; graph (nth i) :id)
          child-i (child-indices graph id)]
      (if (empty? child-i)
        [graph i]
        [(reduce
          (fn [graph ci] (first (next-fn [graph ci])))
          graph
          child-i
          )
         i]
         ))))

(defnav NODE []
  (select* [this [graph i] next-fn]
    (next-fn (nth graph i))
    )
  (transform* [this [graph i] next-fn]
    [(transform (nthpath i) next-fn graph) i]
    ))

(def DESCENDANTS (recursive-path [] p (stay-then-continue CHILDREN p)))
"><a href="#t1529925507000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">11:18:27</span>           nathanmarz </span><span>@pepe looks like
</span><pre>(use &apos;com.rpl.specter)

(def data
  [{:id 0}
   {:id 1}
   {:id 2 :parent-id 1 :val 1}
   {:id 3 :parent-id 1 :val 1}
   {:id 4 :parent-id 2 :val 2}
   {:id 5 :parent-id 3 :val 2}
   {:id 6 :parent-id 3 :val 2}
   {:id 7 :parent-id 0 :val 100}
   {:id 8 :parent-id 7 :val 200}
   {:id 9 :parent-id 6 :val 3}])

(defn- node-index [graph id]
  (select-first
    [INDEXED-VALS
     (selected? LAST :id (pred= id))
     FIRST]
    graph
    ))

(defnav to-node [id]
  (select* [this graph next-fn]
    (if-let [i (node-index graph id)]
      (next-fn [graph i])
      NONE
      ))
  (transform* [this graph next-fn]
    (if-let [i (node-index graph id)]
      (first (next-fn [graph i]))
      graph
      )))

(defn- child-indices [graph id]
  (select
    [INDEXED-VALS
     (selected? LAST :parent-id (pred= id))
     FIRST]
    graph
    ))

(defnav CHILDREN []
  (select* [this [graph i] next-fn]
    (let [id (-&gt; graph (nth i) :id)
          child-i (child-indices graph id)]
      (if (empty? child-i)
        NONE
        (doseq [i child-i]
          (next-fn [graph i])
          ))))
  (transform* [this [graph i] next-fn]
    (let [id (-&gt; graph (nth i) :id)
          child-i (child-indices graph id)]
      (if (empty? child-i)
        [graph i]
        [(reduce
          (fn [graph ci] (first (next-fn [graph ci])))
          graph
          child-i
          )
         i]
         ))))

(defnav NODE []
  (select* [this [graph i] next-fn]
    (next-fn (nth graph i))
    )
  (transform* [this [graph i] next-fn]
    [(transform (nthpath i) next-fn graph) i]
    ))

(def DESCENDANTS (recursive-path [] p (stay-then-continue CHILDREN p)))
</pre></div><div id="t1529931150000399" t="2018-06-25 12:52:30 pepe @U173SEFUN thank you very much for your time. I can&apos;t imagine coming with something like this myself. I will report back, how it works for me."><a href="#t1529931150000399" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">12:52:30</span>                      pepe </span><span>@U173SEFUN thank you very much for your time. I can&apos;t imagine coming with something like this myself. I will report back, how it works for me.</span></div><div id="t1530012911000170" t="2018-06-26 11:35:11 pepe I got to try it today and it again gives me Maximum call stack exceeded on around 1000 nodes. It seems I have to go recursive  🙂 . Still thank you very much, I have learned a lot from your code!"><a href="#t1530012911000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span> <span class="t" onclick="H(this)">11:35:11</span>                      pepe </span><span>I got to try it today and it again gives me Maximum call stack exceeded on around 1000 nodes. It seems I have to go recursive </span><b>🙂</b><span>. Still thank you very much, I have learned a lot from your code!</span></div><div id="t1529932554000085" t="2018-06-25 13:15:54 firstclassfunc Morning. I am trying to convert the  hiccup  output from  instaparse  into an associative structure. Is  specter  a good solution for converting  [:entity
 ([:name &quot;J&quot;]
  [:locations
   ([:address [:slot &quot;slot0&quot;] [:port &quot;1&quot;]]
    [:address [:slot &quot;slot1&quot;] [:port &quot;2&quot;]]
    [:address [:slot &quot;slot2&quot;] [:port &quot;3&quot;]]
    [:address [:slot &quot;slot3&quot;] [:port &quot;4&quot;]]
    [:address [:slot &quot;slot4&quot;] [:port &quot;5&quot;]]
    [:address [:slot &quot;slot5&quot;] [:port &quot;6&quot;]])])]   into  {:entity 
   [{:name &quot;J&quot;}
    {:locations 
     [{:address {:slot &quot;slot0&quot; :port &quot;1&quot;}} 
      {:address {:slot &quot;slot1&quot; :port &quot;2&quot;}}
      {:address {:slot &quot;slot2&quot; :port &quot;3&quot;}}
      {:address {:slot &quot;slot3&quot; :port &quot;4&quot;}}
      {:address {:slot &quot;slot4&quot; :port &quot;5&quot;}}
      {:address {:slot &quot;slot5&quot; :port &quot;6&quot;}}]}]} ?"><a href="#t1529932554000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:15:54</span>       firstclassfunc </span><span>Morning. I am trying to convert the </span><code>hiccup</code><span> output from </span><code>instaparse</code><span> into an associative structure. Is </span><code>specter</code><span> a good solution for converting </span><pre>[:entity
 ([:name &quot;J&quot;]
  [:locations
   ([:address [:slot &quot;slot0&quot;] [:port &quot;1&quot;]]
    [:address [:slot &quot;slot1&quot;] [:port &quot;2&quot;]]
    [:address [:slot &quot;slot2&quot;] [:port &quot;3&quot;]]
    [:address [:slot &quot;slot3&quot;] [:port &quot;4&quot;]]
    [:address [:slot &quot;slot4&quot;] [:port &quot;5&quot;]]
    [:address [:slot &quot;slot5&quot;] [:port &quot;6&quot;]])])]</pre><span>  into </span><pre>{:entity 
   [{:name &quot;J&quot;}
    {:locations 
     [{:address {:slot &quot;slot0&quot; :port &quot;1&quot;}} 
      {:address {:slot &quot;slot1&quot; :port &quot;2&quot;}}
      {:address {:slot &quot;slot2&quot; :port &quot;3&quot;}}
      {:address {:slot &quot;slot3&quot; :port &quot;4&quot;}}
      {:address {:slot &quot;slot4&quot; :port &quot;5&quot;}}
      {:address {:slot &quot;slot5&quot; :port &quot;6&quot;}}]}]}</pre><span>?</span></div><div id="t1529932832000800" t="2018-06-25 13:20:32 nathanmarz @firstclassfunc is the transformation vector -&gt; map and list -&gt; vector for all reachable vectors and lists?"><a href="#t1529932832000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:20:32</span>           nathanmarz </span><span>@firstclassfunc is the transformation vector -&gt; map and list -&gt; vector for all reachable vectors and lists?</span></div><div id="t1529932861000526" t="2018-06-25 13:21:01 firstclassfunc yes"><a href="#t1529932861000526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:21:01</span>       firstclassfunc </span><span>yes</span></div><div id="t1529933352000172" t="2018-06-25 13:29:12 nathanmarz oh it&apos;s a little more complicated"><a href="#t1529933352000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:29:12</span>           nathanmarz </span><span>oh it&apos;s a little more complicated</span></div><div id="t1529933387000049" t="2018-06-25 13:29:47 nathanmarz since the  :slot  and  :port  vectors get combined into a single map"><a href="#t1529933387000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:29:47</span>           nathanmarz </span><span>since the </span><code>:slot</code><span> and </span><code>:port</code><span> vectors get combined into a single map</span></div><div id="t1529933406000770" t="2018-06-25 13:30:06 firstclassfunc ok well it can be done in multiple steps.."><a href="#t1529933406000770" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:30:06</span>       firstclassfunc </span><span>ok well it can be done in multiple steps..</span></div><div id="t1529933428000310" t="2018-06-25 13:30:28 nathanmarz but the general structure is
 (def NODES
  (recursive-path [] p
    (if-path coll?
      (continue-then-stay ALL p)
      )))

(multi-transform
  [NODES
   (if-path vector?
     (terminal vec-&gt;map)
     (terminal vec)
     )]
  data
  )
"><a href="#t1529933428000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:30:28</span>           nathanmarz </span><span>but the general structure is
</span><pre>(def NODES
  (recursive-path [] p
    (if-path coll?
      (continue-then-stay ALL p)
      )))

(multi-transform
  [NODES
   (if-path vector?
     (terminal vec-&gt;map)
     (terminal vec)
     )]
  data
  )
</pre></div><div id="t1529933436000556" t="2018-06-25 13:30:36 nathanmarz you fill in the  vec-&gt;map  function"><a href="#t1529933436000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:30:36</span>           nathanmarz </span><span>you fill in the </span><code>vec-&gt;map</code><span> function</span></div><div id="t1529933450000040" t="2018-06-25 13:30:50 firstclassfunc ah cool. Thanks so much (y)"><a href="#t1529933450000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-25</span> <span class="t" onclick="H(this)">13:30:50</span>       firstclassfunc </span><span>ah cool. Thanks so much (y)</span></div><div id="t1529983930000066" t="2018-06-26 03:32:10 vigilancetech Can anyone tell me why I&apos;m getting: WARNING: Use of undeclared Var hello-world.core/ALL....??   Here&apos;s a repo that demos the error for me:

 https://github.com/vigilancetech-com/hello-world"><a href="#t1529983930000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span> <span class="t" onclick="H(this)">03:32:10</span>        vigilancetech </span><span>Can anyone tell me why I&apos;m getting: WARNING: Use of undeclared Var hello-world.core/ALL....??   Here&apos;s a repo that demos the error for me:

</span><a href="https://github.com/vigilancetech-com/hello-world" target="_blank">https://github.com/vigilancetech-com/hello-world</a></div><div id="t1530001434000569" t="2018-06-26 08:23:54 pepe Both ALL and END needs to have namespace so in your case sp/ALL sp/END"><a href="#t1530001434000569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span> <span class="t" onclick="H(this)">08:23:54</span>                      pepe </span><span>Both ALL and END needs to have namespace so in your case sp/ALL sp/END</span></div><div id="t1530023933000035" t="2018-06-26 14:38:53 vigilancetech ah!   That&apos;s it!   Thank you!  It was my misperception that the leading macro (select, transform, setval, etc...) processed those kind of like keywords and not that they were functions in and of themselves."><a href="#t1530023933000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span> <span class="t" onclick="H(this)">14:38:53</span>             vigilancetech </span><span>ah!   That&apos;s it!   Thank you!  It was my misperception that the leading macro (select, transform, setval, etc...) processed those kind of like keywords and not that they were functions in and of themselves.</span></div><div id="t1530192636000262" t="2018-06-28 13:30:36 zalky Hi all, can anyone help explain the difference between  selected?  and  filterer ? Bit hazy on the difference."><a href="#t1530192636000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-28</span> <span class="t" onclick="H(this)">13:30:36</span>                zalky </span><span>Hi all, can anyone help explain the difference between </span><code>selected?</code><span> and </span><code>filterer</code><span>? Bit hazy on the difference.</span></div><div id="t1530193131000408" t="2018-06-28 13:38:51 zalky Oh, hmm... nm, I think I figured it out."><a href="#t1530193131000408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-28</span> <span class="t" onclick="H(this)">13:38:51</span>                zalky </span><span>Oh, hmm... nm, I think I figured it out.</span></div><div id="t1530297233000336" t="2018-06-29 18:33:53 Bravi why isn’t this library in core?  😄"><a href="#t1530297233000336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-29</span> <span class="t" onclick="H(this)">18:33:53</span>                Bravi </span><span>why isn’t this library in core? </span><b>😄</b></div><div id="t1530297240000126" t="2018-06-29 18:34:00 Bravi this is so powerful!"><a href="#t1530297240000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-29</span> <span class="t" onclick="H(this)">18:34:00</span>                Bravi </span><span>this is so powerful!</span></div><div id="t1530297343000304" t="2018-06-29 18:35:43 Bravi something I would have written in JS like this:
 userGroups
  .map(group =&gt; ({
    ...group,
    users: group.users
      .map( user =&gt;  &amp;&amp; user.profileViews &amp;&amp; user.profileViews.count &gt; 0
            ? ({...user,
                profileViews: {
                  ...user.profileViews,
                  count: user.profileViews.count + 1,
                }})
            : user
          )
  }));
 
managed to write using specter like this
 (transform [ALL :users ALL #(:online %) :profile-views :count (partial &lt; 0)] inc)
"><a href="#t1530297343000304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-29</span> <span class="t" onclick="H(this)">18:35:43</span>                Bravi </span><span>something I would have written in JS like this:
</span><pre>userGroups
  .map(group =&gt; ({
    ...group,
    users: group.users
      .map( user =&gt;  &amp;&amp; user.profileViews &amp;&amp; user.profileViews.count &gt; 0
            ? ({...user,
                profileViews: {
                  ...user.profileViews,
                  count: user.profileViews.count + 1,
                }})
            : user
          )
  }));
</pre><span>
managed to write using specter like this
</span><pre>(transform [ALL :users ALL #(:online %) :profile-views :count (partial &lt; 0)] inc)
</pre></div><div id="t1530628940000133" t="2018-07-03 14:42:20 pepe And you only scratched the surface in your example. I am doing things with it, I strongly believe are almost impossible in other langs/libs. And I still consider myself Specter newbie  🙂"><a href="#t1530628940000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-03</span> <span class="t" onclick="H(this)">14:42:20</span>                      pepe </span><span>And you only scratched the surface in your example. I am doing things with it, I strongly believe are almost impossible in other langs/libs. And I still consider myself Specter newbie </span><b>🙂</b></div><div id="t1530714318000327" t="2018-07-04 14:25:18 Bravi would you mind posting some examples please? I’m struggling to find some good examples / solutions to problems"><a href="#t1530714318000327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-04</span> <span class="t" onclick="H(this)">14:25:18</span>                     Bravi </span><span>would you mind posting some examples please? I’m struggling to find some good examples / solutions to problems</span></div><div id="t1530298838000392" t="2018-06-29 19:00:38 nathanmarz @bravilogy  https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:date/clojure/qN1UPMVQmaM/uVUYENF6BwAJ"><a href="#t1530298838000392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-29</span> <span class="t" onclick="H(this)">19:00:38</span>           nathanmarz </span><span>@bravilogy </span><a href="https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:date/clojure/qN1UPMVQmaM/uVUYENF6BwAJ" target="_blank">https://groups.google.com/forum/#!searchin/clojure/contribute$20specter%7Csort:date/clojure/qN1UPMVQmaM/uVUYENF6BwAJ</a></div><div id="t1530395164000062" t="2018-06-30 21:46:04 jsa-aerial say you have a map { ... K V} and you are transforming the map via ALL with a transform function which returns NONE for V, strictly speaking you return [K NONE]. This seems to remove the [K V] pair entirely (exactly what I would like) but I can&apos;t find anything in the documentation indicating that this is the intended behavior. There are things addressing map KEYS being xformed to NONE for removal, but nothing about values. Is this intended behavior that can be counted on in future?"><a href="#t1530395164000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-30</span> <span class="t" onclick="H(this)">21:46:04</span>           jsa-aerial </span><span>say you have a map { ... K V} and you are transforming the map via ALL with a transform function which returns NONE for V, strictly speaking you return [K NONE]. This seems to remove the [K V] pair entirely (exactly what I would like) but I can&apos;t find anything in the documentation indicating that this is the intended behavior. There are things addressing map KEYS being xformed to NONE for removal, but nothing about values. Is this intended behavior that can be counted on in future?</span></div><div id="t1530407091000037" t="2018-07-01 01:04:51 nathanmarz @jsa-aerial yes, that&apos;s intended behavior"><a href="#t1530407091000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span> <span class="t" onclick="H(this)">01:04:51</span>           nathanmarz </span><span>@jsa-aerial yes, that&apos;s intended behavior</span></div><div id="t1530890688000423" t="2018-07-06 15:24:48 jsa-aerial suppose you do not have a fixed (literal) path for things like setval, transform, etc. So, you have something like  (transform [ATOM (apply keypath ks)] inc db) . Does the &apos;This macro will do inline compilation and caching of the path.&apos; still apply in this sort of situation? If not, is it still comparable in performance to update-in?"><a href="#t1530890688000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span> <span class="t" onclick="H(this)">15:24:48</span>           jsa-aerial </span><span>suppose you do not have a fixed (literal) path for things like setval, transform, etc. So, you have something like </span><code>(transform [ATOM (apply keypath ks)] inc db)</code><span>. Does the &apos;This macro will do inline compilation and caching of the path.&apos; still apply in this sort of situation? If not, is it still comparable in performance to update-in?</span></div><div id="t1530890711000452" t="2018-07-06 15:25:11 jsa-aerial @nathanmarz ^^^"><a href="#t1530890711000452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span> <span class="t" onclick="H(this)">15:25:11</span>           jsa-aerial </span><span>@nathanmarz ^^^</span></div><div id="t1530898649000012" t="2018-07-06 17:37:29 nathanmarz @jsa-aerial since  ks  is not static, you pay the cost of the  apply  and the  keypath  expansion on every invocation"><a href="#t1530898649000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span> <span class="t" onclick="H(this)">17:37:29</span>           nathanmarz </span><span>@jsa-aerial since </span><code>ks</code><span> is not static, you pay the cost of the </span><code>apply</code><span> and the </span><code>keypath</code><span> expansion on every invocation</span></div><div id="t1530898699000105" t="2018-07-06 17:38:19 nathanmarz not sure how it will compare to  update-in  but there will be a noticeable performance hit"><a href="#t1530898699000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span> <span class="t" onclick="H(this)">17:38:19</span>           nathanmarz </span><span>not sure how it will compare to </span><code>update-in</code><span> but there will be a noticeable performance hit</span></div><div id="t1531181532000083" t="2018-07-10 00:12:12 jsa-aerial Adventures in CLJS now... I require  [com.rpl.specter :as sp]  and require-macros  [com.rpl.specter.macros :refer [select-one transform setval]] .  When trying to compile, the following is issued: &apos;Invalid :refer, macro com.rpl.specter.macros/setval does not exist&apos;."><a href="#t1531181532000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">00:12:12</span>           jsa-aerial </span><span>Adventures in CLJS now... I require </span><code>[com.rpl.specter :as sp]</code><span> and require-macros </span><code>[com.rpl.specter.macros :refer [select-one transform setval]]</code><span>.  When trying to compile, the following is issued: &apos;Invalid :refer, macro com.rpl.specter.macros/setval does not exist&apos;.</span></div><div id="t1531181548000114" t="2018-07-10 00:12:28 jsa-aerial I am using figwheel"><a href="#t1531181548000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">00:12:28</span>           jsa-aerial </span><span>I am using figwheel</span></div><div id="t1531181577000115" t="2018-07-10 00:12:57 jsa-aerial Anyone using Specter in CLJS land have any ideas?"><a href="#t1531181577000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">00:12:57</span>           jsa-aerial </span><span>Anyone using Specter in CLJS land have any ideas?</span></div><div id="t1531181724000066" t="2018-07-10 00:15:24 jsa-aerial OK, it looking further in the doc, I see the CLJS incantation. Let me try that and see if it makes this go away."><a href="#t1531181724000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">00:15:24</span>           jsa-aerial </span><span>OK, it looking further in the doc, I see the CLJS incantation. Let me try that and see if it makes this go away.</span></div><div id="t1531181897000038" t="2018-07-10 00:18:17 jsa-aerial Yes, that fixes it. Sorry for the noise."><a href="#t1531181897000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">00:18:17</span>           jsa-aerial </span><span>Yes, that fixes it. Sorry for the noise.</span></div><div id="t1531223656000276" t="2018-07-10 11:54:16 souenzzo Require from com.rpl.specter. this namespace .macros is not used anymore"><a href="#t1531223656000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">11:54:16</span>             souenzzo </span><span>Require from com.rpl.specter. this namespace .macros is not used anymore</span></div><div id="t1531226615000364" t="2018-07-10 12:43:35 Bravi @jsa-aerial I always use  sp/select-one ,  sp/ALL  and etc"><a href="#t1531226615000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">12:43:35</span>                Bravi </span><span>@jsa-aerial I always use </span><code>sp/select-one</code><span>, </span><code>sp/ALL</code><span> and etc</span></div><div id="t1531226619000348" t="2018-07-10 12:43:39 Bravi in cljs"><a href="#t1531226619000348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">12:43:39</span>                Bravi </span><span>in cljs</span></div><div id="t1531232150000361" t="2018-07-10 14:15:50 jsa-aerial @bravilogy That&apos;s what I do in CLJ - always namspace qualified for everything. But I thought you needed to explicitly name the macros in a require-macros or :refer-macros them for them to be available in CLJS land. Since macros are expanded and such in the JVM (well unless you are using self hosted) I admit I don&apos;t really understand the implementation details of how they are made available in CLJS."><a href="#t1531232150000361" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">14:15:50</span>           jsa-aerial </span><span>@bravilogy That&apos;s what I do in CLJ - always namspace qualified for everything. But I thought you needed to explicitly name the macros in a require-macros or :refer-macros them for them to be available in CLJS land. Since macros are expanded and such in the JVM (well unless you are using self hosted) I admit I don&apos;t really understand the implementation details of how they are made available in CLJS.</span></div><div id="t1531232684000561" t="2018-07-10 14:24:44 Bravi yeah I was just implying the fact that specter works differently in cljs, hence I don’t investigate any further than that  😄  haha. i just namespace them all"><a href="#t1531232684000561" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">14:24:44</span>                Bravi </span><span>yeah I was just implying the fact that specter works differently in cljs, hence I don’t investigate any further than that </span><b>😄</b><span> haha. i just namespace them all</span></div><div id="t1531234366000023" t="2018-07-10 14:52:46 jsa-aerial Well, other than pulling in the macro stuff (which is anything in cljs land) all the specter code I am using works exactly as in clojure. Very cool!"><a href="#t1531234366000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">14:52:46</span>           jsa-aerial </span><span>Well, other than pulling in the macro stuff (which is anything in cljs land) all the specter code I am using works exactly as in clojure. Very cool!</span></div><div id="t1531234386000092" t="2018-07-10 14:53:06 jsa-aerial No &apos;porting&apos; at all - just use!"><a href="#t1531234386000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-10</span> <span class="t" onclick="H(this)">14:53:06</span>           jsa-aerial </span><span>No &apos;porting&apos; at all - just use!</span></div><div id="t1531343002000515" t="2018-07-11 21:03:22 funkrider hi - as a cljs noob I want to try out specter at the repl. I am using  (require &apos;[com.rpl.specter :as sp])  and then if i try to invoke a test using:  (sp/select [sp/ALL] [1 2])    i get a big nasty error about  No protocol method ImplicitNav.implicit-nav defined for type com.rpl.specter/t_com$specter79300: [object Object]]"><a href="#t1531343002000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:03:22</span>            funkrider </span><span>hi - as a cljs noob I want to try out specter at the repl. I am using </span><code>(require &apos;[com.rpl.specter :as sp])</code><span> and then if i try to invoke a test using: </span><code>(sp/select [sp/ALL] [1 2])</code><span>   i get a big nasty error about </span><code>No protocol method ImplicitNav.implicit-nav defined for type com.rpl.specter/t_com$specter79300: [object Object]]</code></div><div id="t1531343011000450" t="2018-07-11 21:03:31 funkrider Any help would be most appreciated"><a href="#t1531343011000450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:03:31</span>            funkrider </span><span>Any help would be most appreciated</span></div><div id="t1531343590000075" t="2018-07-11 21:13:10 nathanmarz @ian.davies works fine for me"><a href="#t1531343590000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:13:10</span>           nathanmarz </span><span>@ian.davies works fine for me</span></div><div id="t1531343653000057" t="2018-07-11 21:14:13 nathanmarz try doing it from a checkout of specter from github"><a href="#t1531343653000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:14:13</span>           nathanmarz </span><span>try doing it from a checkout of specter from github</span></div><div id="t1531343672000450" t="2018-07-11 21:14:32 nathanmarz run  ./scripts/cljs-repl.sh"><a href="#t1531343672000450" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:14:32</span>           nathanmarz </span><span>run </span><code>./scripts/cljs-repl.sh</code></div><div id="t1531381492000098" t="2018-07-12 07:44:52 pepe I did not know about this. It is cool."><a href="#t1531381492000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">07:44:52</span>                      pepe </span><span>I did not know about this. It is cool.</span></div><div id="t1531344386000143" t="2018-07-11 21:26:26 funkrider oh ok ill give it a go. Thanks @nathanmarz"><a href="#t1531344386000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-11</span> <span class="t" onclick="H(this)">21:26:26</span>            funkrider </span><span>oh ok ill give it a go. Thanks @nathanmarz</span></div><div id="t1531406365000047" t="2018-07-12 14:39:25 vigilancetech I got this strange situation:  I&apos;m using specter from clojurescript (hoplon) to build up a map in a function which when I feed it by hand works fine, but when I map values into it, it munges the map up.   Is mapping it making it try and do the operations in parallel somehow?   If so, how would I serialize them?"><a href="#t1531406365000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">14:39:25</span>        vigilancetech </span><span>I got this strange situation:  I&apos;m using specter from clojurescript (hoplon) to build up a map in a function which when I feed it by hand works fine, but when I map values into it, it munges the map up.   Is mapping it making it try and do the operations in parallel somehow?   If so, how would I serialize them?</span></div><div id="t1531406986000538" t="2018-07-12 14:49:46 nathanmarz @vigilancetech can you show the code?"><a href="#t1531406986000538" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">14:49:46</span>           nathanmarz </span><span>@vigilancetech can you show the code?</span></div><div id="t1531407131000556" t="2018-07-12 14:52:11 vigilancetech (defn stow-effect! [dev effect]
  (let [x (sp/setval [:lights (id-&gt;type dev) (id-&gt;key dev)] effect (:root @ui-state))
        y (sp/setval [:lights :all (id-&gt;key dev)] effect x)]
    ;(s/set-ui-state! @conn y)
    ;; there&apos;s some kind of issue with multi-processing here
    (reset! ui-state (sp/setval [:root] y @ui-state))))
"><a href="#t1531407131000556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">14:52:11</span>        vigilancetech </span><pre>(defn stow-effect! [dev effect]
  (let [x (sp/setval [:lights (id-&gt;type dev) (id-&gt;key dev)] effect (:root @ui-state))
        y (sp/setval [:lights :all (id-&gt;key dev)] effect x)]
    ;(s/set-ui-state! @conn y)
    ;; there&apos;s some kind of issue with multi-processing here
    (reset! ui-state (sp/setval [:root] y @ui-state))))
</pre></div><div id="t1531407153000207" t="2018-07-12 14:52:33 vigilancetech (defn checkbox-checked [device-type]
  (let [x (map vals (sp/select [(n-device-records device-type) (sp/submap [:id :effect])] @data))]
    (map #(apply stow-effect! %) x)
    x))
"><a href="#t1531407153000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">14:52:33</span>        vigilancetech </span><pre>(defn checkbox-checked [device-type]
  (let [x (map vals (sp/select [(n-device-records device-type) (sp/submap [:id :effect])] @data))]
    (map #(apply stow-effect! %) x)
    x))
</pre></div><div id="t1531407328000646" t="2018-07-12 14:55:28 vigilancetech when I feed it with the second function it makes multiple :root tags, but when I feed it by hand it works properly making only one"><a href="#t1531407328000646" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">14:55:28</span>        vigilancetech </span><span>when I feed it with the second function it makes multiple :root tags, but when I feed it by hand it works properly making only one</span></div><div id="t1531407704000458" t="2018-07-12 15:01:44 nathanmarz what is  n-device-records ,  id-&gt;type ,  id-&gt;key ?"><a href="#t1531407704000458" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:01:44</span>           nathanmarz </span><span>what is </span><code>n-device-records</code><span>, </span><code>id-&gt;type</code><span>, </span><code>id-&gt;key</code><span>?</span></div><div id="t1531407806000142" t="2018-07-12 15:03:26 nathanmarz and what do you mean by &quot;makes multiple :root tags&quot;?"><a href="#t1531407806000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:03:26</span>           nathanmarz </span><span>and what do you mean by &quot;makes multiple :root tags&quot;?</span></div><div id="t1531408557000604" t="2018-07-12 15:15:57 nathanmarz doesn&apos;t look like  (map #(apply stow-effect! %) x)  will do anything"><a href="#t1531408557000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:15:57</span>           nathanmarz </span><span>doesn&apos;t look like </span><code>(map #(apply stow-effect! %) x)</code><span> will do anything</span></div><div id="t1531408562000527" t="2018-07-12 15:16:02 nathanmarz since  map  is lazy"><a href="#t1531408562000527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:16:02</span>           nathanmarz </span><span>since </span><code>map</code><span> is lazy</span></div><div id="t1531408937000282" t="2018-07-12 15:22:17 vigilancetech cljs.user&gt; (s/set-ui-state! @d/conn nil )
nil
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (d/checkbox-checked :fan)
((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;))
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (d/stow-effect! &quot;Fan 0&quot; &quot;roll&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}}
cljs.user&gt; @d/ui-state
{:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Fan 1&quot; &quot;static_color&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Fan 2&quot; &quot;none&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Strip 0&quot; &quot;police&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Strip_0 &quot;police&quot;}, :strip {:Strip_0 &quot;police&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}}
cljs.user&gt; (s/set-ui-state! @d/conn nil )
nil
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (map #(apply d/stow-effect! %) &apos;((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;)))
({:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_5 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_5 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}})
cljs.user&gt; 
"><a href="#t1531408937000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:22:17</span>        vigilancetech </span><pre>cljs.user&gt; (s/set-ui-state! @d/conn nil )
nil
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (d/checkbox-checked :fan)
((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;))
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (d/stow-effect! &quot;Fan 0&quot; &quot;roll&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}}
cljs.user&gt; @d/ui-state
{:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Fan 1&quot; &quot;static_color&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Fan 2&quot; &quot;none&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}}
cljs.user&gt; (d/stow-effect! &quot;Strip 0&quot; &quot;police&quot;)
{:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Strip_0 &quot;police&quot;}, :strip {:Strip_0 &quot;police&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}}
cljs.user&gt; (s/set-ui-state! @d/conn nil )
nil
cljs.user&gt; (s/get-ui-state @d/conn)
nil
cljs.user&gt; @d/ui-state
{:root nil}
cljs.user&gt; (map #(apply d/stow-effect! %) &apos;((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;)))
({:root {:lights {:all {:Fan_0 &quot;roll&quot;}, :fan {:Fan_0 &quot;roll&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}} {:root {:lights {:all {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_5 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}, :fan {:Fan_0 &quot;roll&quot;, :Fan_1 &quot;static_color&quot;, :Fan_2 &quot;none&quot;, :Fan_5 &quot;none&quot;, :Fan_4 &quot;none&quot;, :Fan_3 &quot;none&quot;}}}})
cljs.user&gt; 
</pre></div><div id="t1531408996000616" t="2018-07-12 15:23:16 nathanmarz the repl realizes lazy sequences when it prints it"><a href="#t1531408996000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:23:16</span>           nathanmarz </span><span>the repl realizes lazy sequences when it prints it</span></div><div id="t1531409037000210" t="2018-07-12 15:23:57 nathanmarz the way you wrote  checkbox-checked  will not"><a href="#t1531409037000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:23:57</span>           nathanmarz </span><span>the way you wrote </span><code>checkbox-checked</code><span> will not</span></div><div id="t1531409055000020" t="2018-07-12 15:24:15 nathanmarz better to write that sort of code with  doseq"><a href="#t1531409055000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:24:15</span>           nathanmarz </span><span>better to write that sort of code with </span><code>doseq</code></div><div id="t1531409126000599" t="2018-07-12 15:25:26 vigilancetech ah, okay"><a href="#t1531409126000599" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:25:26</span>        vigilancetech </span><span>ah, okay</span></div><div id="t1531409139000458" t="2018-07-12 15:25:39 vigilancetech think that&apos;ll fix the multiple :root tag thing?"><a href="#t1531409139000458" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:25:39</span>        vigilancetech </span><span>think that&apos;ll fix the multiple :root tag thing?</span></div><div id="t1531409202000240" t="2018-07-12 15:26:42 nathanmarz don&apos;t know what you mean by that"><a href="#t1531409202000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:26:42</span>           nathanmarz </span><span>don&apos;t know what you mean by that</span></div><div id="t1531409223000229" t="2018-07-12 15:27:03 nathanmarz or what those other function references are"><a href="#t1531409223000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:27:03</span>           nathanmarz </span><span>or what those other function references are</span></div><div id="t1531409338000563" t="2018-07-12 15:28:58 vigilancetech (defn n-device-records [type] [:lights sp/ALL #(= (:type %) type)])"><a href="#t1531409338000563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:28:58</span>        vigilancetech </span><span>(defn n-device-records [type] [:lights sp/ALL #(= (:type %) type)])</span></div><div id="t1531409367000627" t="2018-07-12 15:29:27 vigilancetech (defn id-&gt;key [id] (keyword (st/replace id \space \_)))"><a href="#t1531409367000627" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:29:27</span>        vigilancetech </span><span>(defn id-&gt;key [id] (keyword (st/replace id \space \_)))</span></div><div id="t1531409413000389" t="2018-07-12 15:30:13 vigilancetech (defn id-&gt;type [id] (let [x (st/split (st/lower-case id) #&quot; &quot;)]
                      (keyword (if (&gt; (count x) 2)
                                 (str (first x) \_ (second x))
                                 (first x)))))

"><a href="#t1531409413000389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:30:13</span>        vigilancetech </span><pre>(defn id-&gt;type [id] (let [x (st/split (st/lower-case id) #&quot; &quot;)]
                      (keyword (if (&gt; (count x) 2)
                                 (str (first x) \_ (second x))
                                 (first x)))))

</pre></div><div id="t1531409473000458" t="2018-07-12 15:31:13 vigilancetech n-device-records navigates to all the records for a certain type of device.  The others just convert from a string to a (spaceless) tag"><a href="#t1531409473000458" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:31:13</span>        vigilancetech </span><span>n-device-records navigates to all the records for a certain type of device.  The others just convert from a string to a (spaceless) tag</span></div><div id="t1531409542000104" t="2018-07-12 15:32:22 vigilancetech thing is when I feed stow-effect! by hand, it builds ui-state properly with only one root tag, but when I map the values in, it screws it up, appending multiple root tags"><a href="#t1531409542000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:32:22</span>        vigilancetech </span><span>thing is when I feed stow-effect! by hand, it builds ui-state properly with only one root tag, but when I map the values in, it screws it up, appending multiple root tags</span></div><div id="t1531409825000166" t="2018-07-12 15:37:05 vigilancetech could that be a specter thing?  Or does that have something to do with map parallelizing the operation?"><a href="#t1531409825000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:37:05</span>        vigilancetech </span><span>could that be a specter thing?  Or does that have something to do with map parallelizing the operation?</span></div><div id="t1531409894000206" t="2018-07-12 15:38:14 alexyakushev In fact, map can&apos;t &quot;parallelize&quot; anything."><a href="#t1531409894000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:38:14</span>         alexyakushev </span><span>In fact, map can&apos;t &quot;parallelize&quot; anything.</span></div><div id="t1531409908000571" t="2018-07-12 15:38:28 alexyakushev Try replacing  map  with  mapv , would it work?"><a href="#t1531409908000571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:38:28</span>         alexyakushev </span><span>Try replacing </span><code>map</code><span> with </span><code>mapv</code><span>, would it work?</span></div><div id="t1531410070000279" t="2018-07-12 15:41:10 vigilancetech nope, same thing"><a href="#t1531410070000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:41:10</span>        vigilancetech </span><span>nope, same thing</span></div><div id="t1531410831000147" t="2018-07-12 15:53:51 nathanmarz where is it appending multiple root tags?"><a href="#t1531410831000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:53:51</span>           nathanmarz </span><span>where is it appending multiple root tags?</span></div><div id="t1531410877000422" t="2018-07-12 15:54:37 vigilancetech when I do:
 (mapv #(apply d/stow-effect! %) &apos;((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;)))
"><a href="#t1531410877000422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:54:37</span>        vigilancetech </span><span>when I do:
</span><pre>(mapv #(apply d/stow-effect! %) &apos;((&quot;Fan 0&quot; &quot;roll&quot;) (&quot;Fan 1&quot; &quot;static_color&quot;) (&quot;Fan 2&quot; &quot;none&quot;) (&quot;Fan 3&quot; &quot;none&quot;) (&quot;Fan 4&quot; &quot;none&quot;) (&quot;Fan 5&quot; &quot;none&quot;)))
</pre></div><div id="t1531410899000307" t="2018-07-12 15:54:59 vigilancetech the result has multiple root tags, but if I feed those values in by hand, it works correctly, with only one root tag"><a href="#t1531410899000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:54:59</span>        vigilancetech </span><span>the result has multiple root tags, but if I feed those values in by hand, it works correctly, with only one root tag</span></div><div id="t1531410978000193" t="2018-07-12 15:56:18 vigilancetech its supposed to be {:root {:lights {:all {all records} {:fan {fan devices} :strip {strip devices.}}}}}"><a href="#t1531410978000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:56:18</span>        vigilancetech </span><span>its supposed to be {:root {:lights {:all {all records} {:fan {fan devices} :strip {strip devices.}}}}}</span></div><div id="t1531411047000604" t="2018-07-12 15:57:27 nathanmarz by result you mean the value of the atom  ui-state ?"><a href="#t1531411047000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:57:27</span>           nathanmarz </span><span>by result you mean the value of the atom </span><code>ui-state</code><span>?</span></div><div id="t1531411060000457" t="2018-07-12 15:57:40 vigilancetech yes"><a href="#t1531411060000457" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:57:40</span>        vigilancetech </span><span>yes</span></div><div id="t1531411089000170" t="2018-07-12 15:58:09 nathanmarz what does it look like before and after?"><a href="#t1531411089000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:58:09</span>           nathanmarz </span><span>what does it look like before and after?</span></div><div id="t1531411110000355" t="2018-07-12 15:58:30 vigilancetech the results are in the code display above."><a href="#t1531411110000355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:58:30</span>        vigilancetech </span><span>the results are in the code display above.</span></div><div id="t1531411177000017" t="2018-07-12 15:59:37 nathanmarz I think you&apos;re reading the repl wrong"><a href="#t1531411177000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:59:37</span>           nathanmarz </span><span>I think you&apos;re reading the repl wrong</span></div><div id="t1531411183000007" t="2018-07-12 15:59:43 nathanmarz the sequence there is the result of  map"><a href="#t1531411183000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:59:43</span>           nathanmarz </span><span>the sequence there is the result of </span><code>map</code></div><div id="t1531411195000192" t="2018-07-12 15:59:55 nathanmarz which is showing the iterative changes to  ui-state"><a href="#t1531411195000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">15:59:55</span>           nathanmarz </span><span>which is showing the iterative changes to </span><code>ui-state</code></div><div id="t1531411202000473" t="2018-07-12 16:00:02 nathanmarz the final value in that sequence is the final value of  ui-state"><a href="#t1531411202000473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:00:02</span>           nathanmarz </span><span>the final value in that sequence is the final value of </span><code>ui-state</code></div><div id="t1531411217000145" t="2018-07-12 16:00:17 alexyakushev I&apos;d suggest you minimize the reproducible case, it&apos;s really hard to follow without the context and the CLJS at hand."><a href="#t1531411217000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:00:17</span>         alexyakushev </span><span>I&apos;d suggest you minimize the reproducible case, it&apos;s really hard to follow without the context and the CLJS at hand.</span></div><div id="t1531411255000190" t="2018-07-12 16:00:55 vigilancetech oh, so maybe it IS working and the repl is just printing out intermediate results"><a href="#t1531411255000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:00:55</span>        vigilancetech </span><span>oh, so maybe it IS working and the repl is just printing out intermediate results</span></div><div id="t1531411298000581" t="2018-07-12 16:01:38 nathanmarz just do  @ui-state"><a href="#t1531411298000581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:01:38</span>           nathanmarz </span><span>just do </span><code>@ui-state</code></div><div id="t1531411301000325" t="2018-07-12 16:01:41 vigilancetech yup, you&apos;re right.   When I check ui-state its correct.   Thanks.  That had me baffled"><a href="#t1531411301000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:01:41</span>        vigilancetech </span><span>yup, you&apos;re right.   When I check ui-state its correct.   Thanks.  That had me baffled</span></div><div id="t1531411333000480" t="2018-07-12 16:02:13 vigilancetech seems like most (lisp) repls I&apos;ve used before only show the final return value"><a href="#t1531411333000480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:02:13</span>        vigilancetech </span><span>seems like most (lisp) repls I&apos;ve used before only show the final return value</span></div><div id="t1531411362000243" t="2018-07-12 16:02:42 alexyakushev Since you are doing  map , you get the list of values anyway."><a href="#t1531411362000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:02:42</span>         alexyakushev </span><span>Since you are doing </span><code>map</code><span>, you get the list of values anyway.</span></div><div id="t1531411396000531" t="2018-07-12 16:03:16 alexyakushev The final form of  stow-effect!  is a  reset!  call"><a href="#t1531411396000531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:03:16</span>         alexyakushev </span><span>The final form of </span><code>stow-effect!</code><span> is a </span><code>reset!</code><span> call</span></div><div id="t1531411413000091" t="2018-07-12 16:03:33 alexyakushev reset!  sets a new value for an atom and returns that value too"><a href="#t1531411413000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:03:33</span>         alexyakushev </span><code>reset!</code><span> sets a new value for an atom and returns that value too</span></div><div id="t1531411475000574" t="2018-07-12 16:04:35 vigilancetech so that&apos;s where the accumulation is happening; yeah, makes sense now, since I&apos;m taking the side effect of that map rather than its result"><a href="#t1531411475000574" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:04:35</span>        vigilancetech </span><span>so that&apos;s where the accumulation is happening; yeah, makes sense now, since I&apos;m taking the side effect of that map rather than its result</span></div><div id="t1531411484000236" t="2018-07-12 16:04:44 alexyakushev Yep"><a href="#t1531411484000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:04:44</span>         alexyakushev </span><span>Yep</span></div><div id="t1531411498000180" t="2018-07-12 16:04:58 alexyakushev Also, if you need  map  for side effects only, you can use  run!  instead"><a href="#t1531411498000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:04:58</span>         alexyakushev </span><span>Also, if you need </span><code>map</code><span> for side effects only, you can use </span><code>run!</code><span> instead</span></div><div id="t1531411510000386" t="2018-07-12 16:05:10 alexyakushev That&apos;s like  mapc  in Lisp"><a href="#t1531411510000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:05:10</span>         alexyakushev </span><span>That&apos;s like </span><code>mapc</code><span> in Lisp</span></div><div id="t1531411513000591" t="2018-07-12 16:05:13 nathanmarz btw, you can clean up this code with  ATOM  and  view  navigators"><a href="#t1531411513000591" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:05:13</span>           nathanmarz </span><span>btw, you can clean up this code with </span><code>ATOM</code><span> and </span><code>view</code><span> navigators</span></div><div id="t1531411559000518" t="2018-07-12 16:05:59 vigilancetech yeah, I&apos;m a total noob to specter (and only slightly less so to clojure)"><a href="#t1531411559000518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:05:59</span>        vigilancetech </span><span>yeah, I&apos;m a total noob to specter (and only slightly less so to clojure)</span></div><div id="t1531411618000148" t="2018-07-12 16:06:58 vigilancetech thanks guys!   Really loving this tool"><a href="#t1531411618000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-12</span> <span class="t" onclick="H(this)">16:06:58</span>        vigilancetech </span><span>thanks guys!   Really loving this tool</span></div><div id="t1531440605000124" t="2018-07-13 00:10:05 idiomancy hi!"><a href="#t1531440605000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:10:05</span>            idiomancy </span><span>hi!</span></div><div id="t1531441003000168" t="2018-07-13 00:16:43 idiomancy I picked up specter to play with hiccup, and I&apos;m trying to form compound keys by grabbing the keys of sub elements within the data.

essentially, given
 [[:div.row
  [:div.column {:key &quot;A&quot;}]
  [:div.column {:key &quot;B&quot;}]]
 [:div.row
  [:div.culumn {:key &quot;C&quot;}]
  [:div.column {:key &quot;D&quot;}]]]
 

I want

 [[:div.row {:key &quot;AB&quot;}
  [:div.column {:key &quot;A&quot;}]
  [:div.column {:key &quot;B&quot;}]]
 [:div.row {:key &quot;CD&quot;}
  [:div.culumn {:key &quot;C&quot;}]
  [:div.column {:key &quot;D&quot;}]]]
 

I&apos;ll be working on this myself, but if anyone has any ideas, this is effing crazy to write with handrolled clojure, and it seems like the perfect specter magic trick from what I&apos;ve seen in the videos"><a href="#t1531441003000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:16:43</span>            idiomancy </span><span>I picked up specter to play with hiccup, and I&apos;m trying to form compound keys by grabbing the keys of sub elements within the data.

essentially, given
</span><pre>[[:div.row
  [:div.column {:key &quot;A&quot;}]
  [:div.column {:key &quot;B&quot;}]]
 [:div.row
  [:div.culumn {:key &quot;C&quot;}]
  [:div.column {:key &quot;D&quot;}]]]
</pre><span>

I want

</span><pre>[[:div.row {:key &quot;AB&quot;}
  [:div.column {:key &quot;A&quot;}]
  [:div.column {:key &quot;B&quot;}]]
 [:div.row {:key &quot;CD&quot;}
  [:div.culumn {:key &quot;C&quot;}]
  [:div.column {:key &quot;D&quot;}]]]
</pre><span>

I&apos;ll be working on this myself, but if anyone has any ideas, this is effing crazy to write with handrolled clojure, and it seems like the perfect specter magic trick from what I&apos;ve seen in the videos</span></div><div id="t1531443029000130" t="2018-07-13 00:50:29 nathanmarz @idiomancy 
 (def data
  [[:div.row
    [:div.column {:key &quot;A&quot;}]
    [:div.column {:key &quot;B&quot;}]]
   [:div.row
    [:div.culumn {:key &quot;C&quot;}]
    [:div.column {:key &quot;D&quot;}]]])

(transform
  [ALL
   (collect ALL coll? (nthpath 1) :key)
   (before-index 1)]
  (fn [keys _] {:key (apply str keys)})
  data
  )
"><a href="#t1531443029000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:50:29</span>           nathanmarz </span><span>@idiomancy 
</span><pre>(def data
  [[:div.row
    [:div.column {:key &quot;A&quot;}]
    [:div.column {:key &quot;B&quot;}]]
   [:div.row
    [:div.culumn {:key &quot;C&quot;}]
    [:div.column {:key &quot;D&quot;}]]])

(transform
  [ALL
   (collect ALL coll? (nthpath 1) :key)
   (before-index 1)]
  (fn [keys _] {:key (apply str keys)})
  data
  )
</pre></div><div id="t1531443058000036" t="2018-07-13 00:50:58 idiomancy oooh, man.  No way."><a href="#t1531443058000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:50:58</span>            idiomancy </span><span>oooh, man.  No way.</span></div><div id="t1531443132000041" t="2018-07-13 00:52:12 idiomancy It was gonna take me a while to figure out that &quot;collect&quot; navigator, I think  😆"><a href="#t1531443132000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:52:12</span>            idiomancy </span><span>It was gonna take me a while to figure out that &quot;collect&quot; navigator, I think </span><b>😆</b></div><div id="t1531443136000198" t="2018-07-13 00:52:16 idiomancy that&apos;s amazing!"><a href="#t1531443136000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:52:16</span>            idiomancy </span><span>that&apos;s amazing!</span></div><div id="t1531443191000003" t="2018-07-13 00:53:11 nathanmarz the cheat sheet is handy for finding navigators you need  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet"><a href="#t1531443191000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:53:11</span>           nathanmarz </span><span>the cheat sheet is handy for finding navigators you need </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a></div><div id="t1531443193000129" t="2018-07-13 00:53:13 idiomancy let me spend a couple hours reverse engineering this.  thanks, @nathanmarz"><a href="#t1531443193000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">00:53:13</span>            idiomancy </span><span>let me spend a couple hours reverse engineering this.  thanks, @nathanmarz</span></div><div id="t1531493324000153" t="2018-07-13 14:48:44 denik I asked this in the #clojure channel and wondering if specter could be a solution:  https://clojurians.slack.com/archives/C03S1KBA2/p1531346207000010"><a href="#t1531493324000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">14:48:44</span>                denik </span><span>I asked this in the #clojure channel and wondering if specter could be a solution: </span><a href="https://clojurians.slack.com/archives/C03S1KBA2/p1531346207000010" target="_blank">https://clojurians.slack.com/archives/C03S1KBA2/p1531346207000010</a></div><div id="t1531493415000288" t="2018-07-13 14:50:15 denik the reason clojure.spec doesn’t work for this case is because spec tries to conform everything. The ebooks I looked at are highly inconsistent. I think what I’m looking for more like a data matcher, rather than a parser"><a href="#t1531493415000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">14:50:15</span>                denik </span><span>the reason clojure.spec doesn’t work for this case is because spec tries to conform everything. The ebooks I looked at are highly inconsistent. I think what I’m looking for more like a data matcher, rather than a parser</span></div><div id="t1531494239000332" t="2018-07-13 15:03:59 nathanmarz @denik don&apos;t understand the output you&apos;re looking for"><a href="#t1531494239000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:03:59</span>           nathanmarz </span><span>@denik don&apos;t understand the output you&apos;re looking for</span></div><div id="t1531494278000128" t="2018-07-13 15:04:38 nathanmarz {:class &quot;indent&quot; :content &quot;key lesson 1&quot;}  does not match  {:class &quot;indent&quot; :content &quot;key lesson 1&quot;}"><a href="#t1531494278000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:04:38</span>           nathanmarz </span><code>{:class &quot;indent&quot; :content &quot;key lesson 1&quot;}</code><span> does not match </span><code>{:class &quot;indent&quot; :content &quot;key lesson 1&quot;}</code></div><div id="t1531494288000233" t="2018-07-13 15:04:48 nathanmarz and there&apos;s no  &quot;key lesson 3&quot;  in your input"><a href="#t1531494288000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:04:48</span>           nathanmarz </span><span>and there&apos;s no </span><code>&quot;key lesson 3&quot;</code><span> in your input</span></div><div id="t1531494379000427" t="2018-07-13 15:06:19 denik @nathanmarz start at “START HERE” and match multiple  :class  fields, in this case  indent  and  indent1  but ignore these items before( and after with the stop condition  to  )"><a href="#t1531494379000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:06:19</span>                denik </span><span>@nathanmarz start at “START HERE” and match multiple </span><code>:class</code><span> fields, in this case </span><code>indent</code><span> and </span><code>indent1</code><span> but ignore these items before( and after with the stop condition </span><code>to</code><span> )</span></div><div id="t1531494444000375" t="2018-07-13 15:07:24 nathanmarz and you only want to keep items that match the  :filter  predicate?"><a href="#t1531494444000375" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:07:24</span>           nathanmarz </span><span>and you only want to keep items that match the </span><code>:filter</code><span> predicate?</span></div><div id="t1531494506000363" t="2018-07-13 15:08:26 denik yes, but only when they were found between  from  and  to  sequentially"><a href="#t1531494506000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:08:26</span>                denik </span><span>yes, but only when they were found between </span><code>from</code><span> and </span><code>to</code><span> sequentially</span></div><div id="t1531494797000333" t="2018-07-13 15:13:17 nathanmarz you can do it with specter like this:
 (defn start-index [data]
    ;; fill in
  )

(def end-index
  (end-fn [data start-index]
    ;; fill in
    ))


(select
  [(srange-dynamic start-index end-index)
   ALL
   (selected?
    (multi-path
      #(= &quot;START HERE&quot; (:class %))
      #(= &quot;bl&quot; (:class %))
      ))
   ]
  data)
"><a href="#t1531494797000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:13:17</span>           nathanmarz </span><span>you can do it with specter like this:
</span><pre>(defn start-index [data]
    ;; fill in
  )

(def end-index
  (end-fn [data start-index]
    ;; fill in
    ))


(select
  [(srange-dynamic start-index end-index)
   ALL
   (selected?
    (multi-path
      #(= &quot;START HERE&quot; (:class %))
      #(= &quot;bl&quot; (:class %))
      ))
   ]
  data)
</pre></div><div id="t1531494807000165" t="2018-07-13 15:13:27 nathanmarz but really this is better done with a parser"><a href="#t1531494807000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:13:27</span>           nathanmarz </span><span>but really this is better done with a parser</span></div><div id="t1531494841000474" t="2018-07-13 15:14:01 nathanmarz I&apos;m not very familiar with what spec is capable of, but this is real easy with monadic parser"><a href="#t1531494841000474" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:14:01</span>           nathanmarz </span><span>I&apos;m not very familiar with what spec is capable of, but this is real easy with monadic parser</span></div><div id="t1531494942000209" t="2018-07-13 15:15:42 denik thank you!"><a href="#t1531494942000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:15:42</span>                     denik </span><span>thank you!</span></div><div id="t1531494951000247" t="2018-07-13 15:15:51 denik here’s what that looks like in spec
 (require &apos;[clojure.spec.alpha :as s]
         &apos;[clojure.pprint :as pp])

(def ebook
  [{:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;START HERE&quot; :content &quot;Key Lessons&quot;}
   {:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;indent1&quot; :content &quot;ignore&quot;}
   {:class &quot;bl&quot; :content &quot;key lesson 1&quot;}
   {:class &quot;bl&quot; :content &quot;key lesson 2&quot;}
   {:class &quot;indent3&quot; :content &quot;ignore&quot;}])

(s/def
  ::ebook-tree
  (s/and
    (s/cat
     :ignore (s/* (s/and map? #(= &quot;ignore&quot; (:content %))))
     :start (s/and map? #(= (:class %) &quot;START HERE&quot;))
     :body (s/* (s/alt
                 :ignore (s/and map? #(= &quot;ignore&quot; (:content %)))
                 :item (s/and map? #(= &quot;bl&quot; (:class %)))))
     :end (s/and map? #(= &quot;indent3&quot; (:class %))))
    (s/conformer
     (fn [{:keys [start body]}]
       (assoc start :children (for [[tag item] body
                                    :when (not= tag :ignore)]
                                item))))))

(pp/pprint
 (s/conform ::ebook-tree ebook))
"><a href="#t1531494951000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:15:51</span>                     denik </span><span>here’s what that looks like in spec
</span><pre>(require &apos;[clojure.spec.alpha :as s]
         &apos;[clojure.pprint :as pp])

(def ebook
  [{:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;START HERE&quot; :content &quot;Key Lessons&quot;}
   {:class &quot;indent&quot; :content &quot;ignore&quot;}
   {:class &quot;indent1&quot; :content &quot;ignore&quot;}
   {:class &quot;bl&quot; :content &quot;key lesson 1&quot;}
   {:class &quot;bl&quot; :content &quot;key lesson 2&quot;}
   {:class &quot;indent3&quot; :content &quot;ignore&quot;}])

(s/def
  ::ebook-tree
  (s/and
    (s/cat
     :ignore (s/* (s/and map? #(= &quot;ignore&quot; (:content %))))
     :start (s/and map? #(= (:class %) &quot;START HERE&quot;))
     :body (s/* (s/alt
                 :ignore (s/and map? #(= &quot;ignore&quot; (:content %)))
                 :item (s/and map? #(= &quot;bl&quot; (:class %)))))
     :end (s/and map? #(= &quot;indent3&quot; (:class %))))
    (s/conformer
     (fn [{:keys [start body]}]
       (assoc start :children (for [[tag item] body
                                    :when (not= tag :ignore)]
                                item))))))

(pp/pprint
 (s/conform ::ebook-tree ebook))
</pre></div><div id="t1531495027000489" t="2018-07-13 15:17:07 nathanmarz with  https://github.com/nathanmarz/specter/issues/236  you could do it more easily with specter"><a href="#t1531495027000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:17:07</span>           nathanmarz </span><span>with </span><a href="https://github.com/nathanmarz/specter/issues/236" target="_blank">https://github.com/nathanmarz/specter/issues/236</a><span> you could do it more easily with specter</span></div><div id="t1531496774000423" t="2018-07-13 15:46:14 denik @nathanmarz I think that’s exactly what I’m looking for."><a href="#t1531496774000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-13</span> <span class="t" onclick="H(this)">15:46:14</span>                denik </span><span>@nathanmarz I think that’s exactly what I’m looking for.</span></div><div id="t1531670969000026" t="2018-07-15 16:09:29 igrishaev Hi! In specter, is there a possibility to perform an upsert operation? For example, I’ve got a vector of maps like this:
 [{:id 1 :name &quot;John&quot;}
 {:id 2 :name &quot;Jim&quot;}
 {:id 3 :name &quot;Jane&quot;}]
 
Now a new map arrives and, depending on its id I need either to update (merge) it with an existing map or append it to the end of the vector. I now how to implement both insert/update separately, but a single  transform/setval  api call would be much more preferable."><a href="#t1531670969000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-15</span> <span class="t" onclick="H(this)">16:09:29</span>            igrishaev </span><span>Hi! In specter, is there a possibility to perform an upsert operation? For example, I’ve got a vector of maps like this:
</span><pre>[{:id 1 :name &quot;John&quot;}
 {:id 2 :name &quot;Jim&quot;}
 {:id 3 :name &quot;Jane&quot;}]
</pre><span>
Now a new map arrives and, depending on its id I need either to update (merge) it with an existing map or append it to the end of the vector. I now how to implement both insert/update separately, but a single </span><code>transform/setval</code><span> api call would be much more preferable.</span></div><div id="t1531671048000033" t="2018-07-15 16:10:48 igrishaev As I see it, the only thing I don’t understand is how to compose a transformation path."><a href="#t1531671048000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-15</span> <span class="t" onclick="H(this)">16:10:48</span>            igrishaev </span><span>As I see it, the only thing I don’t understand is how to compose a transformation path.</span></div><div id="t1531683306000068" t="2018-07-15 19:35:06 nathanmarz @igrishaev you can do it with a single path with zippers;
 (require &apos;[com.rpl.specter.zipper :as z])

(def truefn (constantly true))

(def target
  (recursive-path [id] p
    (cond-path
      [z/NODE #(= (:id %) id)]
      [z/NODE (submap nil)]

      (not-selected? z/NEXT)
      [z/INNER-RIGHT AFTER-ELEM]

      truefn
      [z/NEXT p]
      )))

(defn upsert [data n]
  (setval [z/VECTOR-ZIP z/DOWN (target (:id n))] n data))

(upsert data {:id 1 :name &quot;Joze&quot;})
;; =&gt; [{:id 1, :name &quot;Joze&quot;} {:id 2, :name &quot;Jim&quot;} {:id 3, :name &quot;Jane&quot;}]
(upsert data {:id 0 :name &quot;Joze&quot;})
;; =&gt; [{:id 1, :name &quot;John&quot;} {:id 2, :name &quot;Jim&quot;} {:id 3, :name &quot;Jane&quot;} {:id 0, :name &quot;Joze&quot;}]
"><a href="#t1531683306000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-15</span> <span class="t" onclick="H(this)">19:35:06</span>           nathanmarz </span><span>@igrishaev you can do it with a single path with zippers;
</span><pre>(require &apos;[com.rpl.specter.zipper :as z])

(def truefn (constantly true))

(def target
  (recursive-path [id] p
    (cond-path
      [z/NODE #(= (:id %) id)]
      [z/NODE (submap nil)]

      (not-selected? z/NEXT)
      [z/INNER-RIGHT AFTER-ELEM]

      truefn
      [z/NEXT p]
      )))

(defn upsert [data n]
  (setval [z/VECTOR-ZIP z/DOWN (target (:id n))] n data))

(upsert data {:id 1 :name &quot;Joze&quot;})
;; =&gt; [{:id 1, :name &quot;Joze&quot;} {:id 2, :name &quot;Jim&quot;} {:id 3, :name &quot;Jane&quot;}]
(upsert data {:id 0 :name &quot;Joze&quot;})
;; =&gt; [{:id 1, :name &quot;John&quot;} {:id 2, :name &quot;Jim&quot;} {:id 3, :name &quot;Jane&quot;} {:id 0, :name &quot;Joze&quot;}]
</pre></div><div id="t1531683326000033" t="2018-07-15 19:35:26 nathanmarz but I would do it like this:
 (defn upsert [data n]
  (let [[data2 new] (replace-in [ALL #(= (:id %) (:id n)) (submap nil)]
                      (fn [_] [n nil])
                      data)]
    (if (nil? new)
      (setval AFTER-ELEM n data)
      data2
      )))
"><a href="#t1531683326000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-15</span> <span class="t" onclick="H(this)">19:35:26</span>           nathanmarz </span><span>but I would do it like this:
</span><pre>(defn upsert [data n]
  (let [[data2 new] (replace-in [ALL #(= (:id %) (:id n)) (submap nil)]
                      (fn [_] [n nil])
                      data)]
    (if (nil? new)
      (setval AFTER-ELEM n data)
      data2
      )))
</pre></div><div id="t1531726308000078" t="2018-07-16 07:31:48 igrishaev thank you @nathanmarz, this combo looks solid!"><a href="#t1531726308000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">07:31:48</span>            igrishaev </span><span>thank you @nathanmarz, this combo looks solid!</span></div><div id="t1531733087000099" t="2018-07-16 09:24:47 igrishaev here is my final version to upsert into the re-frame database:
 (defn upsert [db path key-eq new]
  (letfn [(map-eq? [old] (= (get new key-eq) (get old key-eq)))
          (updater [old] [(merge old new)])]
    (let [full-path (conj path s/ALL map-eq?)
          [db2 updated?] (s/replace-in full-path updater db)]
      (if updated?
        db2
        (s/setval (conj path s/AFTER-ELEM) new db)))))
"><a href="#t1531733087000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">09:24:47</span>            igrishaev </span><span>here is my final version to upsert into the re-frame database:
</span><pre>(defn upsert [db path key-eq new]
  (letfn [(map-eq? [old] (= (get new key-eq) (get old key-eq)))
          (updater [old] [(merge old new)])]
    (let [full-path (conj path s/ALL map-eq?)
          [db2 updated?] (s/replace-in full-path updater db)]
      (if updated?
        db2
        (s/setval (conj path s/AFTER-ELEM) new db)))))
</pre></div><div id="t1531743431000310" t="2018-07-16 12:17:11 alexyakushev @igrishaev FWIW, I had a problem very similar to yours, and for it I implemented a simple custom data structure that keeps values in a vector and a map simultaneously. It implements all IPersistentMap methods, and  assoc  works as the upsert."><a href="#t1531743431000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:17:11</span>         alexyakushev </span><span>@igrishaev FWIW, I had a problem very similar to yours, and for it I implemented a simple custom data structure that keeps values in a vector and a map simultaneously. It implements all IPersistentMap methods, and </span><code>assoc</code><span> works as the upsert.</span></div><div id="t1531744669000060" t="2018-07-16 12:37:49 nathanmarz @igrishaev fyi, use the  path  macro for composing paths instead of  conj"><a href="#t1531744669000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:37:49</span>           nathanmarz </span><span>@igrishaev fyi, use the </span><code>path</code><span> macro for composing paths instead of </span><code>conj</code></div><div id="t1531744672000298" t="2018-07-16 12:37:52 nathanmarz will be much faster"><a href="#t1531744672000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:37:52</span>           nathanmarz </span><span>will be much faster</span></div><div id="t1531744716000283" t="2018-07-16 12:38:36 igrishaev thank you, will check that out"><a href="#t1531744716000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:38:36</span>            igrishaev </span><span>thank you, will check that out</span></div><div id="t1531744771000254" t="2018-07-16 12:39:31 igrishaev in my case,  path  is a vector to the actual data subset, say  [:tasks :completed]"><a href="#t1531744771000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:39:31</span>            igrishaev </span><span>in my case, </span><code>path</code><span> is a vector to the actual data subset, say </span><code>[:tasks :completed]</code></div><div id="t1531744953000137" t="2018-07-16 12:42:33 nathanmarz yea, you should pass that in as  (path :tasks :completed)"><a href="#t1531744953000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:42:33</span>           nathanmarz </span><span>yea, you should pass that in as </span><code>(path :tasks :completed)</code></div><div id="t1531745015000067" t="2018-07-16 12:43:35 nathanmarz path  uses inline caching to minimize runtime compilation of paths"><a href="#t1531745015000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:43:35</span>           nathanmarz </span><code>path</code><span> uses inline caching to minimize runtime compilation of paths</span></div><div id="t1531745090000223" t="2018-07-16 12:44:50 igrishaev If I have a vector like  [:foo :bar] , how can I apply it the the  path  macro then?"><a href="#t1531745090000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">12:44:50</span>            igrishaev </span><span>If I have a vector like </span><code>[:foo :bar]</code><span>, how can I apply it the the </span><code>path</code><span> macro then?</span></div><div id="t1531746164000010" t="2018-07-16 13:02:44 nathanmarz (path :foo :bar)"><a href="#t1531746164000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:02:44</span>           nathanmarz </span><code>(path :foo :bar)</code></div><div id="t1531747093000152" t="2018-07-16 13:18:13 igrishaev sure, but what if both foo and bar come as a vector?"><a href="#t1531747093000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:18:13</span>            igrishaev </span><span>sure, but what if both foo and bar come as a vector?</span></div><div id="t1531747120000171" t="2018-07-16 13:18:40 igrishaev as a func argument in my case"><a href="#t1531747120000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:18:40</span>            igrishaev </span><span>as a func argument in my case</span></div><div id="t1531747206000144" t="2018-07-16 13:20:06 nathanmarz if it&apos;s dynamic, then declare them using  path , not as a vector"><a href="#t1531747206000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:20:06</span>           nathanmarz </span><span>if it&apos;s dynamic, then declare them using </span><code>path</code><span>, not as a vector</span></div><div id="t1531747227000515" t="2018-07-16 13:20:27 nathanmarz (upsert db (path :foo :bar) ...)"><a href="#t1531747227000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:20:27</span>           nathanmarz </span><code>(upsert db (path :foo :bar) ...)</code></div><div id="t1531747322000063" t="2018-07-16 13:22:02 igrishaev the problem is I don’t know in advance what subset of the main db will be used."><a href="#t1531747322000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:22:02</span>            igrishaev </span><span>the problem is I don’t know in advance what subset of the main db will be used.</span></div><div id="t1531747383000245" t="2018-07-16 13:23:03 igrishaev I supposed a user passes an initial path as a vector, then I build the full transformation path"><a href="#t1531747383000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:23:03</span>            igrishaev </span><span>I supposed a user passes an initial path as a vector, then I build the full transformation path</span></div><div id="t1531748255000292" t="2018-07-16 13:37:35 nathanmarz ultimately it&apos;s an optimization"><a href="#t1531748255000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:37:35</span>           nathanmarz </span><span>ultimately it&apos;s an optimization</span></div><div id="t1531748274000423" t="2018-07-16 13:37:54 nathanmarz if your users declare their paths using  path  it will be faster, but if they use vectors it will still work"><a href="#t1531748274000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:37:54</span>           nathanmarz </span><span>if your users declare their paths using </span><code>path</code><span> it will be faster, but if they use vectors it will still work</span></div><div id="t1531748450000372" t="2018-07-16 13:40:50 igrishaev ok, so if a user passes smth like  (path :foo :bar)  as an initial path, how can I extend it?"><a href="#t1531748450000372" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:40:50</span>            igrishaev </span><span>ok, so if a user passes smth like </span><code>(path :foo :bar)</code><span> as an initial path, how can I extend it?</span></div><div id="t1531748567000421" t="2018-07-16 13:42:47 nathanmarz with  path"><a href="#t1531748567000421" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:42:47</span>           nathanmarz </span><span>with </span><code>path</code></div><div id="t1531748595000199" t="2018-07-16 13:43:15 nathanmarz e.g.  (path passed-in-user-path ALL)"><a href="#t1531748595000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:43:15</span>           nathanmarz </span><span>e.g. </span><code>(path passed-in-user-path ALL)</code></div><div id="t1531748617000148" t="2018-07-16 13:43:37 igrishaev oh, I see now, thanks"><a href="#t1531748617000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-16</span> <span class="t" onclick="H(this)">13:43:37</span>            igrishaev </span><span>oh, I see now, thanks</span></div><div id="t1531816126000045" t="2018-07-17 08:28:46 roklenarcic I often have to transform map&apos;s values but I need value&apos;s key to do the transformation, so  MAP-VALS  doesn&apos;t cut it"><a href="#t1531816126000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">08:28:46</span>          roklenarcic </span><span>I often have to transform map&apos;s values but I need value&apos;s key to do the transformation, so </span><code>MAP-VALS</code><span> doesn&apos;t cut it</span></div><div id="t1531816132000360" t="2018-07-17 08:28:52 roklenarcic How do I solve this?"><a href="#t1531816132000360" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">08:28:52</span>          roklenarcic </span><span>How do I solve this?</span></div><div id="t1531816168000354" t="2018-07-17 08:29:28 roklenarcic ALL (collect FIRST) LAST ?"><a href="#t1531816168000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">08:29:28</span>          roklenarcic </span><code>ALL (collect FIRST) LAST</code><span>?</span></div><div id="t1531816688000025" t="2018-07-17 08:38:08 roklenarcic This case comes up all the time. I want to decide which path to take based on key, but I want to transform value."><a href="#t1531816688000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">08:38:08</span>          roklenarcic </span><span>This case comes up all the time. I want to decide which path to take based on key, but I want to transform value.</span></div><div id="t1531817751000100" t="2018-07-17 08:55:51 pepe @roklenarcic ALL returns [k v] vector on map so  (transform ALL (fn [[k v]] (if (= k :a) [k (inc v)] [k (dec v)])) {:a 1 :b 2})  works"><a href="#t1531817751000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">08:55:51</span>                 pepe </span><span>@roklenarcic ALL returns [k v] vector on map so </span><code>(transform ALL (fn [[k v]] (if (= k :a) [k (inc v)] [k (dec v)])) {:a 1 :b 2})</code><span> works</span></div><div id="t1531820160000015" t="2018-07-17 09:36:00 roklenarcic I know that one, but I hoped for a shorter solution."><a href="#t1531820160000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">09:36:00</span>          roklenarcic </span><span>I know that one, but I hoped for a shorter solution.</span></div><div id="t1531823266000069" t="2018-07-17 10:27:46 pepe Ok. Have you looked at if-path cond-path?"><a href="#t1531823266000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">10:27:46</span>                 pepe </span><span>Ok. Have you looked at if-path cond-path?</span></div><div id="t1531834132000141" t="2018-07-17 13:28:52 roklenarcic that&apos;s about the same amount of code"><a href="#t1531834132000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">13:28:52</span>          roklenarcic </span><span>that&apos;s about the same amount of code</span></div><div id="t1531834202000178" t="2018-07-17 13:30:02 nathanmarz @roklenarcic it will be easier to help you if you show the input/output of the transformation you want to do"><a href="#t1531834202000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">13:30:02</span>           nathanmarz </span><span>@roklenarcic it will be easier to help you if you show the input/output of the transformation you want to do</span></div><div id="t1531834370000420" t="2018-07-17 13:32:50 roklenarcic Already solved it"><a href="#t1531834370000420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">13:32:50</span>          roklenarcic </span><span>Already solved it</span></div><div id="t1531834414000423" t="2018-07-17 13:33:34 roklenarcic (transform [ALL (collect-one FIRST) LAST ALL] map-fn result-of-group-by)"><a href="#t1531834414000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">13:33:34</span>          roklenarcic </span><code>(transform [ALL (collect-one FIRST) LAST ALL] map-fn result-of-group-by)</code></div><div id="t1531834453000173" t="2018-07-17 13:34:13 roklenarcic allows me to have map-fn of two arguments that processes lists in group-by map-of-vectors"><a href="#t1531834453000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-17</span> <span class="t" onclick="H(this)">13:34:13</span>          roklenarcic </span><span>allows me to have map-fn of two arguments that processes lists in group-by map-of-vectors</span></div><div id="t1532356811000314" t="2018-07-23 14:40:11 roklenarcic what&apos;s the fastest way to drop certain indexes in a vector? e.g. given vector  [:a :b :c :d]  and indexes  [0 2]  I should get  [:b :d]"><a href="#t1532356811000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:40:11</span>          roklenarcic </span><span>what&apos;s the fastest way to drop certain indexes in a vector? e.g. given vector </span><code>[:a :b :c :d]</code><span> and indexes </span><code>[0 2]</code><span> I should get </span><code>[:b :d]</code></div><div id="t1532357364000033" t="2018-07-23 14:49:24 nathanmarz @roklenarcic you&apos;re best off doing that with a reduce"><a href="#t1532357364000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:49:24</span>           nathanmarz </span><span>@roklenarcic you&apos;re best off doing that with a reduce</span></div><div id="t1532357395000255" t="2018-07-23 14:49:55 nathanmarz each  (setval (nthpath i) NONE data)  invocation is O(n), and  INDEXED-VALS  doesn&apos;t currently support removal via  NONE"><a href="#t1532357395000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:49:55</span>           nathanmarz </span><span>each </span><code>(setval (nthpath i) NONE data)</code><span> invocation is O(n), and </span><code>INDEXED-VALS</code><span> doesn&apos;t currently support removal via </span><code>NONE</code></div><div id="t1532357413000130" t="2018-07-23 14:50:13 roklenarcic since you&apos;re here, how important is precompiling routes now?"><a href="#t1532357413000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:50:13</span>          roklenarcic </span><span>since you&apos;re here, how important is precompiling routes now?</span></div><div id="t1532357462000053" t="2018-07-23 14:51:02 nathanmarz completely unnecessary"><a href="#t1532357462000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:51:02</span>           nathanmarz </span><span>completely unnecessary</span></div><div id="t1532357469000554" t="2018-07-23 14:51:09 nathanmarz the inline compiler handles all cases"><a href="#t1532357469000554" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:51:09</span>           nathanmarz </span><span>the inline compiler handles all cases</span></div><div id="t1532357511000261" t="2018-07-23 14:51:51 roklenarcic thx"><a href="#t1532357511000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-23</span> <span class="t" onclick="H(this)">14:51:51</span>          roklenarcic </span><span>thx</span></div><div id="t1532415336000098" t="2018-07-24 06:55:36 steveb8n anyone ever seen an error like this before at compile time?  java.lang.StackOverflowError, compiling:(com/rpl/specter/util_macros.clj:61:29  I’m seeing it when using Specter in Datomic Ions"><a href="#t1532415336000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">06:55:36</span>             steveb8n </span><span>anyone ever seen an error like this before at compile time? </span><code>java.lang.StackOverflowError, compiling:(com/rpl/specter/util_macros.clj:61:29</code><span> I’m seeing it when using Specter in Datomic Ions</span></div><div id="t1532417142000109" t="2018-07-24 07:25:42 steveb8n scratch that. It appears to be a side-effect of a dependencies problem"><a href="#t1532417142000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">07:25:42</span>             steveb8n </span><span>scratch that. It appears to be a side-effect of a dependencies problem</span></div><div id="t1532426365000334" t="2018-07-24 09:59:25 Petrus Theron I&apos;m learning Specter and trying to parse an XML response I got from Twilio. I&apos;m not super-familiar with Clojure zippers in general, but I suspect it&apos;ll be cleaner &amp; faster with Specter. I&apos;ve stumbled onto the  S/collect  function, but I&apos;m having a hard time fetching &quot;sibling&quot; nodes when dealing with a shape like this:

 {:tag :TwilioResponse,
 :attrs nil,
 :content [{:tag :Call,
            :attrs nil,
            :content [{:tag :AnsweredBy, :attrs nil, :content nil}
                      {:tag :PriceUnit, :attrs nil, :content [&quot;USD&quot;]}
                      {:tag :From, :attrs nil, :content [&quot;+2787...&quot;]}
                      {:tag :To, :attrs nil, :content [&quot;+2776...&quot;]}
}]}]}
 

How do I ask Specter to collect the deepest  :tag  and  :content  values in the structure, but only if the parent  :tag  is :TwilioResponse, with a  :Call  parent under :tag?

I managed to get what I want by doing the following, but it feels like there must be a cleaner way to refer to parents/siblings:
 (-&gt;&gt; my-parsed-xml (S/select-one [(S/collect-one :content S/FIRST :content)
                        :tag (S/pred= :TwilioResponse)])
         first
         (map (juxt :tag (comp first :content))))
"><a href="#t1532426365000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">09:59:25</span>        Petrus Theron </span><span>I&apos;m learning Specter and trying to parse an XML response I got from Twilio. I&apos;m not super-familiar with Clojure zippers in general, but I suspect it&apos;ll be cleaner &amp; faster with Specter. I&apos;ve stumbled onto the </span><code>S/collect</code><span> function, but I&apos;m having a hard time fetching &quot;sibling&quot; nodes when dealing with a shape like this:

</span><pre>{:tag :TwilioResponse,
 :attrs nil,
 :content [{:tag :Call,
            :attrs nil,
            :content [{:tag :AnsweredBy, :attrs nil, :content nil}
                      {:tag :PriceUnit, :attrs nil, :content [&quot;USD&quot;]}
                      {:tag :From, :attrs nil, :content [&quot;+2787...&quot;]}
                      {:tag :To, :attrs nil, :content [&quot;+2776...&quot;]}
}]}]}
</pre><span>

How do I ask Specter to collect the deepest </span><code>:tag</code><span> and </span><code>:content</code><span> values in the structure, but only if the parent </span><code>:tag</code><span> is :TwilioResponse, with a </span><code>:Call</code><span> parent under :tag?

I managed to get what I want by doing the following, but it feels like there must be a cleaner way to refer to parents/siblings:
</span><pre>(-&gt;&gt; my-parsed-xml (S/select-one [(S/collect-one :content S/FIRST :content)
                        :tag (S/pred= :TwilioResponse)])
         first
         (map (juxt :tag (comp first :content))))
</pre></div><div id="t1532436243000266" t="2018-07-24 12:44:03 nathanmarz @petrus not totally clear on what you want"><a href="#t1532436243000266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">12:44:03</span>           nathanmarz </span><span>@petrus not totally clear on what you want</span></div><div id="t1532451566000172" t="2018-07-24 16:59:26 Petrus Theron if I restructure the response as a nested map (assuming no dupes)  {:TwilioResponse {:Call {:AnsweredBy nil :PriceUnit [&quot;USD&quot;] ...}}  I&apos;d be done with a  (get-in [:TwilioResponse :Call]]) , which I can do with with a few functions, but I&apos;m hoping this can be cleanly done with a Specter select and XML zippers."><a href="#t1532451566000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">16:59:26</span>             Petrus Theron </span><span>if I restructure the response as a nested map (assuming no dupes) </span><code>{:TwilioResponse {:Call {:AnsweredBy nil :PriceUnit [&quot;USD&quot;] ...}}</code><span> I&apos;d be done with a </span><code>(get-in [:TwilioResponse :Call]])</code><span>, which I can do with with a few functions, but I&apos;m hoping this can be cleanly done with a Specter select and XML zippers.</span></div><div id="t1532436272000114" t="2018-07-24 12:44:32 nathanmarz you want nodes in this tree that have a parent tag of  :Call  and grandparent tag of  :TwilioResponse ?"><a href="#t1532436272000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">12:44:32</span>           nathanmarz </span><span>you want nodes in this tree that have a parent tag of </span><code>:Call</code><span> and grandparent tag of </span><code>:TwilioResponse</code><span>?</span></div><div id="t1532436305000030" t="2018-07-24 12:45:05 nathanmarz can this substructure exist at any depth, or only starting at the root?"><a href="#t1532436305000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">12:45:05</span>           nathanmarz </span><span>can this substructure exist at any depth, or only starting at the root?</span></div><div id="t1532451912000216" t="2018-07-24 17:05:12 nathanmarz @petrus is this what you&apos;re looking for?
 (select-first
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content]
  data)
"><a href="#t1532451912000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:05:12</span>           nathanmarz </span><span>@petrus is this what you&apos;re looking for?
</span><pre>(select-first
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content]
  data)
</pre></div><div id="t1532452048000491" t="2018-07-24 17:07:28 nathanmarz or this?
 (select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   (collect-one :tag)
   :content
   (view first)]
  data)
"><a href="#t1532452048000491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:07:28</span>           nathanmarz </span><span>or this?
</span><pre>(select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   (collect-one :tag)
   :content
   (view first)]
  data)
</pre></div><div id="t1532452241000114" t="2018-07-24 17:10:41 Petrus Theron yes, thanks @U173SEFUN!  🙂  exactly right after a call to  (into {} ...)  (assume no duplicate tags).

Is there a cleaner way to &quot;walk&quot; the XML tree  {:tag .. :content ...}  layout so that  {:tag :x :content :y}  becomes  [:x :y]  or  {:x :y} ?"><a href="#t1532452241000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:10:41</span>             Petrus Theron </span><span>yes, thanks @U173SEFUN! </span><b>🙂</b><span> exactly right after a call to </span><code>(into {} ...)</code><span> (assume no duplicate tags).

Is there a cleaner way to &quot;walk&quot; the XML tree </span><code>{:tag .. :content ...}</code><span> layout so that </span><code>{:tag :x :content :y}</code><span> becomes </span><code>[:x :y]</code><span> or </span><code>{:x :y}</code><span>?</span></div><div id="t1532452616000261" t="2018-07-24 17:16:56 nathanmarz you can factor out any composition of navigators as its own navigator"><a href="#t1532452616000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:16:56</span>           nathanmarz </span><span>you can factor out any composition of navigators as its own navigator</span></div><div id="t1532452626000355" t="2018-07-24 17:17:06 nathanmarz e.g.
 (def tag+content
  (path
    (collect-one :tag)
    :content
    (view first)))

(select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   tag+content]
  data)
"><a href="#t1532452626000355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:17:06</span>           nathanmarz </span><span>e.g.
</span><pre>(def tag+content
  (path
    (collect-one :tag)
    :content
    (view first)))

(select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   tag+content]
  data)
</pre></div><div id="t1532452811000030" t="2018-07-24 17:20:11 Petrus Theron Would a  recursive-path  walker be cleaner for transforming the general  {:tag :content [{:tag ... :content [...]]}  shape returned by  clojure.xml/parse  in general, then selecting a simpler nested path from there?"><a href="#t1532452811000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:20:11</span>             Petrus Theron </span><span>Would a </span><code>recursive-path</code><span> walker be cleaner for transforming the general </span><code>{:tag :content [{:tag ... :content [...]]}</code><span> shape returned by </span><code>clojure.xml/parse</code><span> in general, then selecting a simpler nested path from there?</span></div><div id="t1532452720000118" t="2018-07-24 17:18:40 nathanmarz if you want to navigate to the pair, you can use subselect + multi-path"><a href="#t1532452720000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:18:40</span>           nathanmarz </span><span>if you want to navigate to the pair, you can use subselect + multi-path</span></div><div id="t1532452730000280" t="2018-07-24 17:18:50 nathanmarz (select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   (subselect (multi-path :tag [:content (view first)]))]
  data)
"><a href="#t1532452730000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:18:50</span>           nathanmarz </span><pre>(select
  [#(= :TwilioResponse (:tag %))
   :content
   ALL
   #(= :Call (:tag %))
   :content
   ALL
   (subselect (multi-path :tag [:content (view first)]))]
  data)
</pre></div><div id="t1532452870000167" t="2018-07-24 17:21:10 nathanmarz if you want to maintain the general structure, then yes"><a href="#t1532452870000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-24</span> <span class="t" onclick="H(this)">17:21:10</span>           nathanmarz </span><span>if you want to maintain the general structure, then yes</span></div><div id="t1532517772000017" t="2018-07-25 11:22:52 Petrus Theron Thanks for feedback @nathanmarz. I sent your Specter talk to a friend and he commented: &quot;I didn&apos;t know Vin Diesel was into Clojure.&quot;  😄"><a href="#t1532517772000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-25</span> <span class="t" onclick="H(this)">11:22:52</span>        Petrus Theron </span><span>Thanks for feedback @nathanmarz. I sent your Specter talk to a friend and he commented: &quot;I didn&apos;t know Vin Diesel was into Clojure.&quot; </span><b>😄</b></div><div id="t1532524510000305" t="2018-07-25 13:15:10 nathanmarz 😂"><a href="#t1532524510000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-25</span> <span class="t" onclick="H(this)">13:15:10</span>           nathanmarz </span><b>😂</b></div><div id="t1532632069000222" t="2018-07-26 19:07:49 roklenarcic I have a double nested map like  {:a {:b 1}}  and I need  get all tuples key1, key2, value where value fits a predicate"><a href="#t1532632069000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:07:49</span>          roklenarcic </span><span>I have a double nested map like </span><code>{:a {:b 1}}</code><span> and I need  get all tuples key1, key2, value where value fits a predicate</span></div><div id="t1532632086000275" t="2018-07-26 19:08:06 roklenarcic Is there some way I can do this?"><a href="#t1532632086000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:08:06</span>          roklenarcic </span><span>Is there some way I can do this?</span></div><div id="t1532633690000255" t="2018-07-26 19:34:50 nathanmarz @roklenarcic 
 (def m {:a {:b 1 :c 2} :d {:e 3 :f 4}})
(def VALS-WITH-KEY (path ALL (collect-one FIRST) LAST))
(select [VALS-WITH-KEY VALS-WITH-KEY even?] m)
"><a href="#t1532633690000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:34:50</span>           nathanmarz </span><span>@roklenarcic 
</span><pre>(def m {:a {:b 1 :c 2} :d {:e 3 :f 4}})
(def VALS-WITH-KEY (path ALL (collect-one FIRST) LAST))
(select [VALS-WITH-KEY VALS-WITH-KEY even?] m)
</pre></div><div id="t1532634267000129" t="2018-07-26 19:44:27 roklenarcic hm I really need to experiment with subpaths more"><a href="#t1532634267000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:44:27</span>          roklenarcic </span><span>hm I really need to experiment with subpaths more</span></div><div id="t1532634285000423" t="2018-07-26 19:44:45 roklenarcic thanks"><a href="#t1532634285000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:44:45</span>          roklenarcic </span><span>thanks</span></div><div id="t1532634442000451" t="2018-07-26 19:47:22 roklenarcic using path operator is good for performance?"><a href="#t1532634442000451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:47:22</span>          roklenarcic </span><span>using path operator is good for performance?</span></div><div id="t1532634955000526" t="2018-07-26 19:55:55 nathanmarz yes"><a href="#t1532634955000526" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-26</span> <span class="t" onclick="H(this)">19:55:55</span>           nathanmarz </span><span>yes</span></div><div id="t1532712887000253" t="2018-07-27 17:34:47 alexisvincent Hi there, was wondering if you have a way of selecting a submap with a predicate on map keys or value. Perhaps something like the reverse of ALL for map entries?"><a href="#t1532712887000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">17:34:47</span>        alexisvincent </span><span>Hi there, was wondering if you have a way of selecting a submap with a predicate on map keys or value. Perhaps something like the reverse of ALL for map entries?</span></div><div id="t1532713102000261" t="2018-07-27 17:38:22 alexisvincent For example  (select [ALL (comp even? second)] {:a 1 :b 2 :c 3})  in this case to get back the submap {:b 2} rather then the list of entries. But as a path, so that it can be composed"><a href="#t1532713102000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">17:38:22</span>        alexisvincent </span><span>For example </span><pre>(select [ALL (comp even? second)] {:a 1 :b 2 :c 3})</pre><span> in this case to get back the submap {:b 2} rather then the list of entries. But as a path, so that it can be composed</span></div><div id="t1532714270000338" t="2018-07-27 17:57:50 nathanmarz @alexisvincent one common way to do that would be to do the inverse using  setval , e.g.  (setval [MAP-VALS odd?] NONE {:a 1 :b 2 :c 3})"><a href="#t1532714270000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">17:57:50</span>           nathanmarz </span><span>@alexisvincent one common way to do that would be to do the inverse using </span><code>setval</code><span>, e.g. </span><code>(setval [MAP-VALS odd?] NONE {:a 1 :b 2 :c 3})</code></div><div id="t1532714348000424" t="2018-07-27 17:59:08 alexisvincent Thanks Nathan! But what I’m really trying to achieve is to construct a path, that I can compose to access deeper things in the map."><a href="#t1532714348000424" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">17:59:08</span>        alexisvincent </span><span>Thanks Nathan! But what I’m really trying to achieve is to construct a path, that I can compose to access deeper things in the map.</span></div><div id="t1532714520000156" t="2018-07-27 18:02:00 alexisvincent Is it possible for instance to make a navigator that takes a list of entries and transforms it to a map, such that it still works with the reconstruction process?"><a href="#t1532714520000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">18:02:00</span>        alexisvincent </span><span>Is it possible for instance to make a navigator that takes a list of entries and transforms it to a map, such that it still works with the reconstruction process?</span></div><div id="t1532714984000150" t="2018-07-27 18:09:44 nathanmarz not sure what you mean by that"><a href="#t1532714984000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">18:09:44</span>           nathanmarz </span><span>not sure what you mean by that</span></div><div id="t1532714991000181" t="2018-07-27 18:09:51 nathanmarz do you have a representative example?"><a href="#t1532714991000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">18:09:51</span>           nathanmarz </span><span>do you have a representative example?</span></div><div id="t1532727258000071" t="2018-07-27 21:34:18 razum2um Hi, I started using  collect  but find it a bit awkward, passing 2 args into modify-fn:
 (def data {18 [{:rate 30} {:rate 15}], 50 [{:rate 35}]})
(transform [MAP-VALS (collect ALL :rate)] (fn [xs _] (average xs)) data) ;; ok
(transform [MAP-VALS (collect ALL :rate)] average data)
ArityException Wrong number of args (2) passed to: user/average
 
is there a more concise version of 2nd line (dont want to change average arity only for specter)?"><a href="#t1532727258000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">21:34:18</span>             razum2um </span><span>Hi, I started using </span><code>collect</code><span> but find it a bit awkward, passing 2 args into modify-fn:
</span><pre>(def data {18 [{:rate 30} {:rate 15}], 50 [{:rate 35}]})
(transform [MAP-VALS (collect ALL :rate)] (fn [xs _] (average xs)) data) ;; ok
(transform [MAP-VALS (collect ALL :rate)] average data)
ArityException Wrong number of args (2) passed to: user/average
</pre><span>
is there a more concise version of 2nd line (dont want to change average arity only for specter)?</span></div><div id="t1532728438000163" t="2018-07-27 21:53:58 nathanmarz @razum2um no, that&apos;s pretty idiomatic"><a href="#t1532728438000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-27</span> <span class="t" onclick="H(this)">21:53:58</span>           nathanmarz </span><span>@razum2um no, that&apos;s pretty idiomatic</span></div><div id="t1533182206000093" t="2018-08-02 03:56:46 vigilancetech so now with the latest version of specter, what is one supposed to do regarding using path, comp-paths, etc..?   I think I&apos;m having problems with its and javelin&apos;s macros not playing well together."><a href="#t1533182206000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">03:56:46</span>        vigilancetech </span><span>so now with the latest version of specter, what is one supposed to do regarding using path, comp-paths, etc..?   I think I&apos;m having problems with its and javelin&apos;s macros not playing well together.</span></div><div id="t1533208610000153" t="2018-08-02 11:16:50 nathanmarz @vigilancetech just use  path"><a href="#t1533208610000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">11:16:50</span>           nathanmarz </span><span>@vigilancetech just use </span><code>path</code></div><div id="t1533300887000177" t="2018-08-03 12:54:47 miikka So I&apos;m pretty new to Specter, but I&apos;m trying to navigate a vector like  [{:id 1, :value 2} {:id 2, :value 1}]  by  :id . (I know that this would be ideally a map, but it&apos;s not for now.)  [MAP-VALS #(= x (:id %))]  seems to work, but how do I define a navigator so that it&apos;s reusable?"><a href="#t1533300887000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">12:54:47</span>               miikka </span><span>So I&apos;m pretty new to Specter, but I&apos;m trying to navigate a vector like </span><code>[{:id 1, :value 2} {:id 2, :value 1}]</code><span> by </span><code>:id</code><span>. (I know that this would be ideally a map, but it&apos;s not for now.) </span><code>[MAP-VALS #(= x (:id %))]</code><span> seems to work, but how do I define a navigator so that it&apos;s reusable?</span></div><div id="t1533300912000151" t="2018-08-03 12:55:12 miikka Is this the right way to do it?
 (defn by-id [id] (specter/path [specter/MAP-VALS #(= (:id %) id)]))
"><a href="#t1533300912000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">12:55:12</span>               miikka </span><span>Is this the right way to do it?
</span><pre>(defn by-id [id] (specter/path [specter/MAP-VALS #(= (:id %) id)]))
</pre></div><div id="t1533301621000219" t="2018-08-03 13:07:01 miikka uh, that should be  ALL , not  MAP-VALS"><a href="#t1533301621000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">13:07:01</span>               miikka </span><span>uh, that should be </span><code>ALL</code><span>, not </span><code>MAP-VALS</code></div><div id="t1533309562000314" t="2018-08-03 15:19:22 nathanmarz @miikka yes, that&apos;s exactly right"><a href="#t1533309562000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">15:19:22</span>           nathanmarz </span><span>@miikka yes, that&apos;s exactly right</span></div><div id="t1533335174000090" t="2018-08-03 22:26:14 vigilancetech anyone have an idea why I&apos;d be getting this error in 1.1.1 but not 1.1.0?

 WARNING: Use of undeclared Var cljs.core/MapEntry at line 84 /home/kevin/.boot/cache/tmp/home/kevin/0work/jbog/guardian-dashboard/cul/v9pufs/index.html.out/com/rpl/specter/navs.cljc
 

I just erased .boot/cache and recompiled and the same error is there"><a href="#t1533335174000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">22:26:14</span>        vigilancetech </span><span>anyone have an idea why I&apos;d be getting this error in 1.1.1 but not 1.1.0?

</span><pre>WARNING: Use of undeclared Var cljs.core/MapEntry at line 84 /home/kevin/.boot/cache/tmp/home/kevin/0work/jbog/guardian-dashboard/cul/v9pufs/index.html.out/com/rpl/specter/navs.cljc
</pre><span>

I just erased .boot/cache and recompiled and the same error is there</span></div><div id="t1533337571000103" t="2018-08-03 23:06:11 nathanmarz @vigilancetech that&apos;s related to a change in ClojureScript 1.10"><a href="#t1533337571000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">23:06:11</span>           nathanmarz </span><span>@vigilancetech that&apos;s related to a change in ClojureScript 1.10</span></div><div id="t1533337575000065" t="2018-08-03 23:06:15 nathanmarz you should upgrade your cljs"><a href="#t1533337575000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-03</span> <span class="t" onclick="H(this)">23:06:15</span>           nathanmarz </span><span>you should upgrade your cljs</span></div><div id="t1533740380000293" t="2018-08-08 14:59:40 souenzzo I need to add a item(  :NEW  ) before a pred (  map?  ) just on first match.
exaple:   [:foo :bar {} {}]  into  [:foo :bar :NEW {} {}]  
I&apos;m using mapcat and a  atom  to say if it&apos;s the first match.
There is a simpler way to do that?"><a href="#t1533740380000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">14:59:40</span>             souenzzo </span><span>I need to add a item( </span><code>:NEW</code><span> ) before a pred ( </span><code>map?</code><span> ) just on first match.
exaple:  </span><code>[:foo :bar {} {}]</code><span> into </span><code>[:foo :bar :NEW {} {}]</code><span> 
I&apos;m using mapcat and a </span><code>atom</code><span> to say if it&apos;s the first match.
There is a simpler way to do that?</span></div><div id="t1533740867000100" t="2018-08-08 15:07:47 souenzzo There is  BEFORE-ELEM  but can&apos;t understand how to compose it."><a href="#t1533740867000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">15:07:47</span>             souenzzo </span><span>There is </span><code>BEFORE-ELEM</code><span> but can&apos;t understand how to compose it.</span></div><div id="t1533740884000058" t="2018-08-08 15:08:04 nathanmarz @souenzzo you can do something like:
 (defn index-matching [p]
  (fn [s]
    (select-first [INDEXED-VALS (selected? LAST (pred p)) FIRST] s)
    ))

(setval
  [(srange-dynamic (index-matching map?) (end-fn [_ i] i))
   BEFORE-ELEM]
  :NEW
  [:foo :bar {} {}]
  )
"><a href="#t1533740884000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">15:08:04</span>           nathanmarz </span><span>@souenzzo you can do something like:
</span><pre>(defn index-matching [p]
  (fn [s]
    (select-first [INDEXED-VALS (selected? LAST (pred p)) FIRST] s)
    ))

(setval
  [(srange-dynamic (index-matching map?) (end-fn [_ i] i))
   BEFORE-ELEM]
  :NEW
  [:foo :bar {} {}]
  )
</pre></div><div id="t1533740921000065" t="2018-08-08 15:08:41 nathanmarz probably want to modify it a little to handle the case where nothing matches the predicate"><a href="#t1533740921000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">15:08:41</span>           nathanmarz </span><span>probably want to modify it a little to handle the case where nothing matches the predicate</span></div><div id="t1533757421000064" t="2018-08-08 19:43:41 jsa-aerial suppose, you have a transform ALL function which makes substitutions that may themselves need to have substitutions and so reapply the transform on result until no more substitutions involved. Is the obvious soln such as  (-&gt;&gt; x (iterate xform) (drop-while (comp not test)) first)  still the &apos;right&apos; way to do this with specter? Or is there an even more idiomatic way?"><a href="#t1533757421000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">19:43:41</span>           jsa-aerial </span><span>suppose, you have a transform ALL function which makes substitutions that may themselves need to have substitutions and so reapply the transform on result until no more substitutions involved. Is the obvious soln such as </span><code>(-&gt;&gt; x (iterate xform) (drop-while (comp not test)) first)</code><span> still the &apos;right&apos; way to do this with specter? Or is there an even more idiomatic way?</span></div><div id="t1533758185000260" t="2018-08-08 19:56:25 nathanmarz @jsa-aerial you could always do something like:
 (def iterated-path
  (recursive-path [test] p
    (stay-then-continue
      (pred test)
      p
      )))
(transform (iterated-path #(&lt; % 10)) inc 1)
;; =&gt; 10
"><a href="#t1533758185000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">19:56:25</span>           nathanmarz </span><span>@jsa-aerial you could always do something like:
</span><pre>(def iterated-path
  (recursive-path [test] p
    (stay-then-continue
      (pred test)
      p
      )))
(transform (iterated-path #(&lt; % 10)) inc 1)
;; =&gt; 10
</pre></div><div id="t1533759047000106" t="2018-08-08 20:10:47 jsa-aerial @nathanmarz that looks very interesting - let me take a hack with that. Thanks!"><a href="#t1533759047000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:10:47</span>           jsa-aerial </span><span>@nathanmarz that looks very interesting - let me take a hack with that. Thanks!</span></div><div id="t1533759384000351" t="2018-08-08 20:16:24 jsa-aerial Hmmmm, actually the test needs the last two values. Basically let x1 and x2 be the last two values, iterate until (= x1 x2)."><a href="#t1533759384000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:16:24</span>           jsa-aerial </span><span>Hmmmm, actually the test needs the last two values. Basically let x1 and x2 be the last two values, iterate until (= x1 x2).</span></div><div id="t1533760014000370" t="2018-08-08 20:26:54 nathanmarz @jsa-aerial 
 (def FIXED-POINT-PATH
  (recursive-path [] p
    [(collect-one STAY)
     (multi-path
       [DISPENSE STAY]
       [(collect-one STAY)
        (if-path (collected? [a b] (= a b))
          STOP
          [DISPENSE p]
          )])
     ]))

(defn f [a] (min (inc a) 10))
(transform [:a FIXED-POINT-PATH] f {:a 1 :b 2})
;; =&gt; {:a 10 :b 2}
"><a href="#t1533760014000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:26:54</span>           nathanmarz </span><span>@jsa-aerial 
</span><pre>(def FIXED-POINT-PATH
  (recursive-path [] p
    [(collect-one STAY)
     (multi-path
       [DISPENSE STAY]
       [(collect-one STAY)
        (if-path (collected? [a b] (= a b))
          STOP
          [DISPENSE p]
          )])
     ]))

(defn f [a] (min (inc a) 10))
(transform [:a FIXED-POINT-PATH] f {:a 1 :b 2})
;; =&gt; {:a 10 :b 2}
</pre></div><div id="t1533760038000170" t="2018-08-08 20:27:18 nathanmarz that&apos;s an interesting one"><a href="#t1533760038000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:27:18</span>           nathanmarz </span><span>that&apos;s an interesting one</span></div><div id="t1533760117000197" t="2018-08-08 20:28:37 nathanmarz actually can shorten the definition like this:
 (def FIXED-POINT-PATH
  (recursive-path [] p
    [(collect-one STAY)
     (multi-path
       [DISPENSE STAY]
       [(collect-one STAY)
        (if-path (collected? [a b] (not= a b))
          [DISPENSE p]
          )])
     ]))
"><a href="#t1533760117000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:28:37</span>           nathanmarz </span><span>actually can shorten the definition like this:
</span><pre>(def FIXED-POINT-PATH
  (recursive-path [] p
    [(collect-one STAY)
     (multi-path
       [DISPENSE STAY]
       [(collect-one STAY)
        (if-path (collected? [a b] (not= a b))
          [DISPENSE p]
          )])
     ]))
</pre></div><div id="t1533760236000105" t="2018-08-08 20:30:36 nathanmarz I&apos;d probably just write that in regular clojure though"><a href="#t1533760236000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:30:36</span>           nathanmarz </span><span>I&apos;d probably just write that in regular clojure though</span></div><div id="t1533760253000322" t="2018-08-08 20:30:53 nathanmarz using  loop"><a href="#t1533760253000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:30:53</span>           nathanmarz </span><span>using </span><code>loop</code></div><div id="t1533760860000319" t="2018-08-08 20:41:00 jsa-aerial I think it will be instructive to study these two - even though for the particular case in question the solution actually looks simpler in straight clojure"><a href="#t1533760860000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:41:00</span>           jsa-aerial </span><span>I think it will be instructive to study these two - even though for the particular case in question the solution actually looks simpler in straight clojure</span></div><div id="t1533760978000187" t="2018-08-08 20:42:58 nathanmarz for sure"><a href="#t1533760978000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-08</span> <span class="t" onclick="H(this)">20:42:58</span>           nathanmarz </span><span>for sure</span></div><div id="t1533942033000173" t="2018-08-10 23:00:33 blak3mill3r Does anyone know of any extant attempts at a  specter  visualization tool?"><a href="#t1533942033000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-10</span> <span class="t" onclick="H(this)">23:00:33</span>          blak3mill3r </span><span>Does anyone know of any extant attempts at a </span><code>specter</code><span> visualization tool?</span></div><div id="t1533942052000172" t="2018-08-10 23:00:52 blak3mill3r I want one and I think I have a good idea for how to do it..."><a href="#t1533942052000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-10</span> <span class="t" onclick="H(this)">23:00:52</span>          blak3mill3r </span><span>I want one and I think I have a good idea for how to do it...</span></div><div id="t1533950285000053" t="2018-08-11 01:18:05 nathanmarz @blak3mill3r what do you have in mind?"><a href="#t1533950285000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-11</span> <span class="t" onclick="H(this)">01:18:05</span>           nathanmarz </span><span>@blak3mill3r what do you have in mind?</span></div><div id="t1534018734000074" t="2018-08-11 20:18:54 blak3mill3r @nathanmarz an  electron  window that pretty-prints some data and highlights the parts that a path selects, combined with some repl tools along the lines of  https://github.com/dgrnbrg/spyscope  ... so you would eval  #s/show (select [ALL :a MAP-VALS] something)  and then see  something  pretty-printed with some parts of it highlighted"><a href="#t1534018734000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-11</span> <span class="t" onclick="H(this)">20:18:54</span>          blak3mill3r </span><span>@nathanmarz an </span><code>electron</code><span> window that pretty-prints some data and highlights the parts that a path selects, combined with some repl tools along the lines of </span><a href="https://github.com/dgrnbrg/spyscope" target="_blank">https://github.com/dgrnbrg/spyscope</a><span> ... so you would eval </span><code>#s/show (select [ALL :a MAP-VALS] something)</code><span> and then see </span><code>something</code><span> pretty-printed with some parts of it highlighted</span></div><div id="t1534019410000127" t="2018-08-11 20:30:10 nathanmarz @blak3mill3r that would be cool, especially if it showed the sequence of steps in a path in an interactive way"><a href="#t1534019410000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-11</span> <span class="t" onclick="H(this)">20:30:10</span>           nathanmarz </span><span>@blak3mill3r that would be cool, especially if it showed the sequence of steps in a path in an interactive way</span></div><div id="t1534500031000100" t="2018-08-17 10:00:31 mmer Simple question - I want to collect a set of keys from a nested map (but not all the keys - is there a simple way to do this?"><a href="#t1534500031000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">10:00:31</span>                 mmer </span><span>Simple question - I want to collect a set of keys from a nested map (but not all the keys - is there a simple way to do this?</span></div><div id="t1534510547000100" t="2018-08-17 12:55:47 nathanmarz @mmer if you just want to filter by a predicate you can do  (select [MAP-KEYS even?] {1 :a 2 :b 3 :c 4 :d}) ;; =&gt; [2 4]"><a href="#t1534510547000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">12:55:47</span>           nathanmarz </span><span>@mmer if you just want to filter by a predicate you can do </span><code>(select [MAP-KEYS even?] {1 :a 2 :b 3 :c 4 :d}) ;; =&gt; [2 4]</code></div><div id="t1534512322000100" t="2018-08-17 13:25:22 mmer Thanks"><a href="#t1534512322000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">13:25:22</span>                 mmer </span><span>Thanks</span></div><div id="t1534512518000100" t="2018-08-17 13:28:38 mmer As always happens with this - getting back into using after a while can be brain twisting - I want to do a conditional collect.  I want to collect something based on a child map containing a certain key"><a href="#t1534512518000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">13:28:38</span>                 mmer </span><span>As always happens with this - getting back into using after a while can be brain twisting - I want to do a conditional collect.  I want to collect something based on a child map containing a certain key</span></div><div id="t1534512636000100" t="2018-08-17 13:30:36 mmer Also is there an easy way to select a map entry that has a certain key no matter where in a deeply nested data structure it is?"><a href="#t1534512636000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">13:30:36</span>                 mmer </span><span>Also is there an easy way to select a map entry that has a certain key no matter where in a deeply nested data structure it is?</span></div><div id="t1534514047000100" t="2018-08-17 13:54:07 nathanmarz @mmer do you have specific examples of what you&apos;re trying to do? It varies depending on the specifics"><a href="#t1534514047000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">13:54:07</span>           nathanmarz </span><span>@mmer do you have specific examples of what you&apos;re trying to do? It varies depending on the specifics</span></div><div id="t1534514497000100" t="2018-08-17 14:01:37 mmer I am working over a yaml datastructure.  I would like collect the name of the yaml item if the structure contains an item called &quot;tag&quot; ,  I also need the content of the tag."><a href="#t1534514497000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:01:37</span>                 mmer </span><span>I am working over a yaml datastructure.  I would like collect the name of the yaml item if the structure contains an item called &quot;tag&quot; ,  I also need the content of the tag.</span></div><div id="t1534514579000100" t="2018-08-17 14:02:59 mmer Interesting side point - until you asked this question I was unaware of the nastiness of the extra vectors as inmost case specter just did what I expected! --fantastic.  Just these odd cases"><a href="#t1534514579000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:02:59</span>                 mmer </span><span>Interesting side point - until you asked this question I was unaware of the nastiness of the extra vectors as inmost case specter just did what I expected! --fantastic.  Just these odd cases</span></div><div id="t1534515063000100" t="2018-08-17 14:11:03 nathanmarz @mmer is that map in the input supposed to be a vector?"><a href="#t1534515063000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:11:03</span>           nathanmarz </span><span>@mmer is that map in the input supposed to be a vector?</span></div><div id="t1534515089000100" t="2018-08-17 14:11:29 nathanmarz and by nested anywhere inside, you mean any one of those inner vectors could repeat the top-level structure?"><a href="#t1534515089000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:11:29</span>           nathanmarz </span><span>and by nested anywhere inside, you mean any one of those inner vectors could repeat the top-level structure?</span></div><div id="t1534515232000100" t="2018-08-17 14:13:52 mmer The input structure could be contained anywhere in a larger structure and yes that should be a map - sorry"><a href="#t1534515232000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:13:52</span>                 mmer </span><span>The input structure could be contained anywhere in a larger structure and yes that should be a map - sorry</span></div><div id="t1534517480000100" t="2018-08-17 14:51:20 nathanmarz @mmer do you have an example of a more deeply nested structure?"><a href="#t1534517480000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:51:20</span>           nathanmarz </span><span>@mmer do you have an example of a more deeply nested structure?</span></div><div id="t1534517631000100" t="2018-08-17 14:53:51 mmer Not sure I can share that - don&apos;t worry about it I will keep going.  I am making progress in other areas.  Thanks."><a href="#t1534517631000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-17</span> <span class="t" onclick="H(this)">14:53:51</span>                 mmer </span><span>Not sure I can share that - don&apos;t worry about it I will keep going.  I am making progress in other areas.  Thanks.</span></div><div id="t1535114633000100" t="2018-08-24 12:43:53 roklenarcic I tend to use keywords as navigators for maps:  (transform [:a :b ... . It works but is it correct? Are there downsides to this"><a href="#t1535114633000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">12:43:53</span>          roklenarcic </span><span>I tend to use keywords as navigators for maps: </span><code>(transform [:a :b ...</code><span>. It works but is it correct? Are there downsides to this</span></div><div id="t1535163103000100" t="2018-08-25 02:11:43 idiomancy hoookay, trying to make a navigator path that selects the first value of every vector in a nested map of vectors like"><a href="#t1535163103000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:11:43</span>            idiomancy </span><span>hoookay, trying to make a navigator path that selects the first value of every vector in a nested map of vectors like</span></div><div id="t1535163110000100" t="2018-08-25 02:11:50 idiomancy"><a href="#t1535163110000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:11:50</span>            idiomancy </span></div><div id="t1535163162000100" t="2018-08-25 02:12:42 idiomancy i gather that I need a recursive path, and its straight blowin my mind"><a href="#t1535163162000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:12:42</span>            idiomancy </span><span>i gather that I need a recursive path, and its straight blowin my mind</span></div><div id="t1535163895000100" t="2018-08-25 02:24:55 idiomancy hmm"><a href="#t1535163895000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:24:55</span>            idiomancy </span><span>hmm</span></div><div id="t1535163932000100" t="2018-08-25 02:25:32 idiomancy"><a href="#t1535163932000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:25:32</span>            idiomancy </span></div><div id="t1535164471000100" t="2018-08-25 02:34:31 idiomancy damn.  thought this would work"><a href="#t1535164471000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:34:31</span>            idiomancy </span><span>damn.  thought this would work</span></div><div id="t1535164526000100" t="2018-08-25 02:35:26 idiomancy"><a href="#t1535164526000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:35:26</span>            idiomancy </span></div><div id="t1535164537000100" t="2018-08-25 02:35:37 idiomancy but it just blows up and says it exceeds recursion depth"><a href="#t1535164537000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">02:35:37</span>            idiomancy </span><span>but it just blows up and says it exceeds recursion depth</span></div><div id="t1535179777000100" t="2018-08-25 06:49:37 nathanmarz @roklenarcic if you want to navigate to the value for a keyword, then that&apos;s always the best way"><a href="#t1535179777000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">06:49:37</span>           nathanmarz </span><span>@roklenarcic if you want to navigate to the value for a keyword, then that&apos;s always the best way</span></div><div id="t1535179824000100" t="2018-08-25 06:50:24 nathanmarz there is also  must  which only navigates if the key exists"><a href="#t1535179824000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">06:50:24</span>           nathanmarz </span><span>there is also </span><code>must</code><span> which only navigates if the key exists</span></div><div id="t1535179990000100" t="2018-08-25 06:53:10 nathanmarz @idiomancy change VECTOR-NODES to ALL in the definition"><a href="#t1535179990000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-25</span> <span class="t" onclick="H(this)">06:53:10</span>           nathanmarz </span><span>@idiomancy change VECTOR-NODES to ALL in the definition</span></div><div id="t1535314654000100" t="2018-08-26 20:17:34 idiomancy sorry for the delayed response but omg it works!  thanks @nathanmarz!"><a href="#t1535314654000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-26</span> <span class="t" onclick="H(this)">20:17:34</span>            idiomancy </span><span>sorry for the delayed response but omg it works!  thanks @nathanmarz!</span></div><div id="t1535334910000100" t="2018-08-27 01:55:10 euccastro I just want to say specter is amazing.  After seeing a couple examples and just trying out wild guesses in a pet project everything is working as I expected"><a href="#t1535334910000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-27</span> <span class="t" onclick="H(this)">01:55:10</span>            euccastro </span><span>I just want to say specter is amazing.  After seeing a couple examples and just trying out wild guesses in a pet project everything is working as I expected</span></div><div id="t1535487003000100" t="2018-08-28 20:10:03 jose I&apos;m trying to write a recursive navigator and I don&apos;t understand why this it&apos;s not working:
 (s/transform (s/recursive-path [] p (s/cond-path
                                        string? s/STAY
                                        map-entry? [s/ALL p]
                                        map? [s/ALL p]))
               keyword
               {&quot;A&quot; {&quot;B&quot; &quot;C&quot;} &quot;X&quot; 1})
"><a href="#t1535487003000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-28</span> <span class="t" onclick="H(this)">20:10:03</span>                 jose </span><span>I&apos;m trying to write a recursive navigator and I don&apos;t understand why this it&apos;s not working:
</span><pre>(s/transform (s/recursive-path [] p (s/cond-path
                                        string? s/STAY
                                        map-entry? [s/ALL p]
                                        map? [s/ALL p]))
               keyword
               {&quot;A&quot; {&quot;B&quot; &quot;C&quot;} &quot;X&quot; 1})
</pre></div><div id="t1535495312000100" t="2018-08-28 22:28:32 jose by not working, I mean that nothing is transformed, but if instead of  transform  I use  select  I get
 [&quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;X&quot;]
 
as I was expecting"><a href="#t1535495312000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-28</span> <span class="t" onclick="H(this)">22:28:32</span>                 jose </span><span>by not working, I mean that nothing is transformed, but if instead of </span><code>transform</code><span> I use </span><code>select</code><span> I get
</span><pre>[&quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;X&quot;]
</pre><span>
as I was expecting</span></div><div id="t1535518951000100" t="2018-08-29 05:02:31 nathanmarz @jlle  ALL  on maps during transform navigates to vectors for map entries"><a href="#t1535518951000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">05:02:31</span>           nathanmarz </span><span>@jlle </span><code>ALL</code><span> on maps during transform navigates to vectors for map entries</span></div><div id="t1535518987000100" t="2018-08-29 05:03:07 nathanmarz replace map? and map-entry? lines with coll? to fix it"><a href="#t1535518987000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">05:03:07</span>           nathanmarz </span><span>replace map? and map-entry? lines with coll? to fix it</span></div><div id="t1535540962000100" t="2018-08-29 11:09:22 jose @nathanmarz that was the piece I was missing, thanks for the info"><a href="#t1535540962000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">11:09:22</span>                 jose </span><span>@nathanmarz that was the piece I was missing, thanks for the info</span></div><div id="t1535540969000100" t="2018-08-29 11:09:29 jose My transformation is a bit more complex, what I&apos;m trying to do is to transform all the string to keywords, except for the map values where the map key matches some condition. Easier to understand with an example:"><a href="#t1535540969000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">11:09:29</span>                 jose </span><span>My transformation is a bit more complex, what I&apos;m trying to do is to transform all the string to keywords, except for the map values where the map key matches some condition. Easier to understand with an example:</span></div><div id="t1535541013000100" t="2018-08-29 11:10:13 jose"><a href="#t1535541013000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">11:10:13</span>                 jose </span></div><div id="t1535541045000100" t="2018-08-29 11:10:45 jose which returns  {:X &quot;Y&quot;, :Z 1, :I {:X &quot;Z&quot;}} 
I found that the transformation fails in cases like this:  {&quot;X&quot; &quot;Y&quot; &quot;I&quot; [&quot;X&quot; &quot;Z&quot;]} 
so I updated the transformation function to:"><a href="#t1535541045000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">11:10:45</span>                 jose </span><span>which returns </span><code>{:X &quot;Y&quot;, :Z 1, :I {:X &quot;Z&quot;}}</code><span>
I found that the transformation fails in cases like this: </span><code>{&quot;X&quot; &quot;Y&quot; &quot;I&quot; [&quot;X&quot; &quot;Z&quot;]}</code><span>
so I updated the transformation function to:</span></div><div id="t1535541080000100" t="2018-08-29 11:11:20 jose"><a href="#t1535541080000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">11:11:20</span>                 jose </span></div><div id="t1535561846000100" t="2018-08-29 16:57:26 nathanmarz @jlle don&apos;t handle the map entry case separately, hande it on map? case as  [ALL (if-path [FIRST (pred= &quot;X&quot;)] FIRST ALL) p]"><a href="#t1535561846000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">16:57:26</span>           nathanmarz </span><span>@jlle don&apos;t handle the map entry case separately, hande it on map? case as </span><code>[ALL (if-path [FIRST (pred= &quot;X&quot;)] FIRST ALL) p]</code></div><div id="t1535569637000200" t="2018-08-29 19:07:17 jose right, that&apos;s a better solution, thanks a lot for the tip"><a href="#t1535569637000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-29</span> <span class="t" onclick="H(this)">19:07:17</span>                 jose </span><span>right, that&apos;s a better solution, thanks a lot for the tip</span></div><div id="t1535729364000100" t="2018-08-31 15:29:24 benzap I figured it out!"><a href="#t1535729364000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">15:29:24</span>               benzap </span><span>I figured it out!</span></div><div id="t1535751820000100" t="2018-08-31 21:43:40 idiomancy hmm, interesting.  I&apos;m trying to select the meta from some objects and use that in a transformation step.  It seems like when I put meta in the path, it acts as an identity function, returning the same values"><a href="#t1535751820000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">21:43:40</span>            idiomancy </span><span>hmm, interesting.  I&apos;m trying to select the meta from some objects and use that in a transformation step.  It seems like when I put meta in the path, it acts as an identity function, returning the same values</span></div><div id="t1535752022000100" t="2018-08-31 21:47:02 idiomancy oh, I see.  there&apos;s a specific  META  navigator"><a href="#t1535752022000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">21:47:02</span>            idiomancy </span><span>oh, I see.  there&apos;s a specific </span><code>META</code><span> navigator</span></div><div id="t1535754514000100" t="2018-08-31 22:28:34 idiomancy Okay.  So, for each element in this collection, I want to take its metadata key if it has metadata, or the key will be in a map as the second element of the list.

so, data looks like this:
 [^{:key &quot;hello&quot;} [:div]
                          [:div {:key &quot;world&quot;}]
                          [:div [:subdiv]]]
 

I want to select the keys, if they exist, for each.  So, something like
 (s/select 
  [s/ALL
   (s/if-path [s/META :key]
              [s/META :key]
              [#(&lt; 1 (count %)) (s/nthpath 1) map? :key])]
  [^{:key &quot;hello&quot;} [:div] 
                   [:div {:key &quot;world&quot;}]
                   [:div [:subdiv]]])
=&gt; [&quot;hello&quot; &quot;world&quot; nil]
 

but if-path isn&apos;t doing what I thought.  if-path tests the first element, and if it succeeds, uses that path for all of the elements.

How do I do what I&apos;m trying to do?"><a href="#t1535754514000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">22:28:34</span>            idiomancy </span><span>Okay.  So, for each element in this collection, I want to take its metadata key if it has metadata, or the key will be in a map as the second element of the list.

so, data looks like this:
</span><pre>[^{:key &quot;hello&quot;} [:div]
                          [:div {:key &quot;world&quot;}]
                          [:div [:subdiv]]]
</pre><span>

I want to select the keys, if they exist, for each.  So, something like
</span><pre>(s/select 
  [s/ALL
   (s/if-path [s/META :key]
              [s/META :key]
              [#(&lt; 1 (count %)) (s/nthpath 1) map? :key])]
  [^{:key &quot;hello&quot;} [:div] 
                   [:div {:key &quot;world&quot;}]
                   [:div [:subdiv]]])
=&gt; [&quot;hello&quot; &quot;world&quot; nil]
</pre><span>

but if-path isn&apos;t doing what I thought.  if-path tests the first element, and if it succeeds, uses that path for all of the elements.

How do I do what I&apos;m trying to do?</span></div><div id="t1535755498000100" t="2018-08-31 22:44:58 idiomancy I ended up doing it with a multi-path and a filter for now... is there a better way?"><a href="#t1535755498000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">22:44:58</span>            idiomancy </span><span>I ended up doing it with a multi-path and a filter for now... is there a better way?</span></div><div id="t1535755592000100" t="2018-08-31 22:46:32 idiomancy [s/ALL
 (s/multi-path [s/META :key]
               [#(&lt; 1 (count %))
                (s/nthpath 1)
                map? :key])
 some?]
 

and then I just manually select the first element of the path returned collect, because I don&apos;t know how to bring it back to a single element  😂"><a href="#t1535755592000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-31</span> <span class="t" onclick="H(this)">22:46:32</span>            idiomancy </span><pre>[s/ALL
 (s/multi-path [s/META :key]
               [#(&lt; 1 (count %))
                (s/nthpath 1)
                map? :key])
 some?]
</pre><span>

and then I just manually select the first element of the path returned collect, because I don&apos;t know how to bring it back to a single element </span><b>😂</b></div><div id="t1535782792000100" t="2018-09-01 06:19:52 nathanmarz @idiomancy if-path&apos;s condition is true if the path selects at least one element"><a href="#t1535782792000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-01</span> <span class="t" onclick="H(this)">06:19:52</span>           nathanmarz </span><span>@idiomancy if-path&apos;s condition is true if the path selects at least one element</span></div><div id="t1535782824000100" t="2018-09-01 06:20:24 nathanmarz since META and keywords always navigate to exactly one value, your condition is always true"><a href="#t1535782824000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-01</span> <span class="t" onclick="H(this)">06:20:24</span>           nathanmarz </span><span>since META and keywords always navigate to exactly one value, your condition is always true</span></div><div id="t1535782873000100" t="2018-09-01 06:21:13 nathanmarz you want the condition path  [META (must :key)]"><a href="#t1535782873000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-01</span> <span class="t" onclick="H(this)">06:21:13</span>           nathanmarz </span><span>you want the condition path </span><code>[META (must :key)]</code></div><div id="t1535804668000100" t="2018-09-01 12:24:28 idiomancy Thanks!  And thanks for the incredible library  :star-struck:   I&apos;m so addicted!"><a href="#t1535804668000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-01</span> <span class="t" onclick="H(this)">12:24:28</span>            idiomancy </span><span>Thanks!  And thanks for the incredible library </span><b>:star-struck:</b><span>  I&apos;m so addicted!</span></div><div id="t1535940639000100" t="2018-09-03 02:10:39 unbalanced specific and general question.
General question: where does one go to level up in specter?  I feel like I&apos;ve already tapped out on talks/tutorials and I know I&apos;m only scratching the surface.  Case in point --
Specific question:

given

 (def contrived-data {:time 1535940129129
                       :data [{:a [{:start 389
                                    :stop  456}]}
                              {:b [{:start 113
                                    :stop  889}]}]}) 

I&apos;m attempting to sort by  :start .  It&apos;s blessedly simple to select the values via

 (sm/select [:data s/ALL s/MAP-VALS s/ALL :start] contrived-data) 

my intuition to do the operation would be

 (sm/transform [:data s/ALL s/MAP-VALS s/ALL :start] sort contrived-data) 

but I realized my thinking may have gone awry somewhere along the way"><a href="#t1535940639000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:10:39</span>           unbalanced </span><span>specific and general question.
General question: where does one go to level up in specter?  I feel like I&apos;ve already tapped out on talks/tutorials and I know I&apos;m only scratching the surface.  Case in point --
Specific question:

given

</span><pre>(def contrived-data {:time 1535940129129
                       :data [{:a [{:start 389
                                    :stop  456}]}
                              {:b [{:start 113
                                    :stop  889}]}]})</pre><span>

I&apos;m attempting to sort by </span><code>:start</code><span>.  It&apos;s blessedly simple to select the values via

</span><pre>(sm/select [:data s/ALL s/MAP-VALS s/ALL :start] contrived-data)</pre><span>

my intuition to do the operation would be

</span><pre>(sm/transform [:data s/ALL s/MAP-VALS s/ALL :start] sort contrived-data)</pre><span>

but I realized my thinking may have gone awry somewhere along the way</span></div><div id="t1535940832000100" t="2018-09-03 02:13:52 nathanmarz @goomba what do you want the result of that transform to be?"><a href="#t1535940832000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:13:52</span>           nathanmarz </span><span>@goomba what do you want the result of that transform to be?</span></div><div id="t1535940979000100" t="2018-09-03 02:16:19 unbalanced"><a href="#t1535940979000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:16:19</span>           unbalanced </span></div><div id="t1535940984000100" t="2018-09-03 02:16:24 unbalanced sorry, should&apos;ve posted that"><a href="#t1535940984000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:16:24</span>           unbalanced </span><span>sorry, should&apos;ve posted that</span></div><div id="t1535941002000200" t="2018-09-03 02:16:42 unbalanced as in,  :b  should come first because its  :start  value is lower"><a href="#t1535941002000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:16:42</span>           unbalanced </span><span>as in, </span><code>:b</code><span> should come first because its </span><code>:start</code><span> value is lower</span></div><div id="t1535941056000200" t="2018-09-03 02:17:36 nathanmarz what if the inner collection has multiple  :start  values?"><a href="#t1535941056000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:17:36</span>           nathanmarz </span><span>what if the inner collection has multiple </span><code>:start</code><span> values?</span></div><div id="t1535941063000100" t="2018-09-03 02:17:43 nathanmarz use the lowest?"><a href="#t1535941063000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:17:43</span>           nathanmarz </span><span>use the lowest?</span></div><div id="t1535941078000100" t="2018-09-03 02:17:58 unbalanced sure  😅"><a href="#t1535941078000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:17:58</span>           unbalanced </span><span>sure </span><b>😅</b></div><div id="t1535941092000100" t="2018-09-03 02:18:12 unbalanced hadn&apos;t thought that far ahead with my contrived example"><a href="#t1535941092000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:18:12</span>           unbalanced </span><span>hadn&apos;t thought that far ahead with my contrived example</span></div><div id="t1535941132000100" t="2018-09-03 02:18:52 unbalanced it&apos;s the fact that the keys  :a  and  :b  &quot;pre-fix&quot; the data makes any sort of normal  update-in /`sort-by` completely unusable, at least with any sort of elegance/performance"><a href="#t1535941132000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:18:52</span>           unbalanced </span><span>it&apos;s the fact that the keys </span><code>:a</code><span> and </span><code>:b</code><span> &quot;pre-fix&quot; the data makes any sort of normal </span><code>update-in</code><span>/`sort-by` completely unusable, at least with any sort of elegance/performance</span></div><div id="t1535941152000100" t="2018-09-03 02:19:12 unbalanced but I encounter this problem all the time"><a href="#t1535941152000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:19:12</span>           unbalanced </span><span>but I encounter this problem all the time</span></div><div id="t1535941338000100" t="2018-09-03 02:22:18 nathanmarz you can use something like  (fn [m] (reduce min (traverse [MAP-VALS ALL :start] m))  for a &quot;keyfn&quot; to  sort-by"><a href="#t1535941338000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:22:18</span>           nathanmarz </span><span>you can use something like </span><code>(fn [m] (reduce min (traverse [MAP-VALS ALL :start] m))</code><span> for a &quot;keyfn&quot; to </span><code>sort-by</code></div><div id="t1535941396000100" t="2018-09-03 02:23:16 nathanmarz and then  (transform :data #(sort-by keyfn %) data)"><a href="#t1535941396000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:23:16</span>           nathanmarz </span><span>and then </span><code>(transform :data #(sort-by keyfn %) data)</code></div><div id="t1535941495000100" t="2018-09-03 02:24:55 nathanmarz beware that  sort-by  will change that vector to a list"><a href="#t1535941495000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:24:55</span>           nathanmarz </span><span>beware that </span><code>sort-by</code><span> will change that vector to a list</span></div><div id="t1535941515000100" t="2018-09-03 02:25:15 unbalanced ohhhh mannn that is cooooolllllll  😄"><a href="#t1535941515000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:25:15</span>           unbalanced </span><span>ohhhh mannn that is cooooolllllll </span><b>😄</b></div><div id="t1535941631000100" t="2018-09-03 02:27:11 unbalanced thank you! how did you... well, I guess because you wrote it, I would&apos;ve thought to use  select  instead of  traverse"><a href="#t1535941631000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:27:11</span>           unbalanced </span><span>thank you! how did you... well, I guess because you wrote it, I would&apos;ve thought to use </span><code>select</code><span> instead of </span><code>traverse</code></div><div id="t1535941689000100" t="2018-09-03 02:28:09 nathanmarz always use  traverse  if all you&apos;ll be doing is a  reduce  over the result"><a href="#t1535941689000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:28:09</span>           nathanmarz </span><span>always use </span><code>traverse</code><span> if all you&apos;ll be doing is a </span><code>reduce</code><span> over the result</span></div><div id="t1535941714000100" t="2018-09-03 02:28:34 nathanmarz more efficient since no intermediate list is materialized"><a href="#t1535941714000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:28:34</span>           nathanmarz </span><span>more efficient since no intermediate list is materialized</span></div><div id="t1535941805000100" t="2018-09-03 02:30:05 unbalanced 🙏  fantastic.  Thanks again."><a href="#t1535941805000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-03</span> <span class="t" onclick="H(this)">02:30:05</span>           unbalanced </span><b>🙏</b><span> fantastic.  Thanks again.</span></div><div id="t1536020268000100" t="2018-09-04 00:17:48 unbalanced forgive the neophyte inquiriry, I&apos;m attempting to emulate
 (update-in {} [:a :b :c] (fnil concat [])  [1 2 3])"><a href="#t1536020268000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">00:17:48</span>           unbalanced </span><span>forgive the neophyte inquiriry, I&apos;m attempting to emulate
</span><pre>(update-in {} [:a :b :c] (fnil concat [])  [1 2 3])</pre></div><div id="t1536020284000200" t="2018-09-04 00:18:04 unbalanced for practice I&apos;m just trying it on one nested value"><a href="#t1536020284000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">00:18:04</span>           unbalanced </span><span>for practice I&apos;m just trying it on one nested value</span></div><div id="t1536020301000100" t="2018-09-04 00:18:21 unbalanced (setval [:a NIL-&gt;VECTOR END] [1 2 3] {})"><a href="#t1536020301000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">00:18:21</span>           unbalanced </span><pre>(setval [:a NIL-&gt;VECTOR END] [1 2 3] {})</pre></div><div id="t1536021833000100" t="2018-09-04 00:43:53 unbalanced ah I see... so the above is working it&apos;s when I&apos;m dealing with a vector-as-a-key that it&apos;s an issue"><a href="#t1536021833000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">00:43:53</span>           unbalanced </span><span>ah I see... so the above is working it&apos;s when I&apos;m dealing with a vector-as-a-key that it&apos;s an issue</span></div><div id="t1536021852000100" t="2018-09-04 00:44:12 unbalanced (setval [:a (must [:b :c]) NIL-&gt;VECTOR END] [1 2 3] {:a {}})"><a href="#t1536021852000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">00:44:12</span>           unbalanced </span><pre>(setval [:a (must [:b :c]) NIL-&gt;VECTOR END] [1 2 3] {:a {}})</pre></div><div id="t1536023568000100" t="2018-09-04 01:12:48 unbalanced current working work around... not pretty but it works"><a href="#t1536023568000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">01:12:48</span>           unbalanced </span><span>current working work around... not pretty but it works</span></div><div id="t1536023610000100" t="2018-09-04 01:13:30 unbalanced"><a href="#t1536023610000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">01:13:30</span>           unbalanced </span></div><div id="t1536039253000100" t="2018-09-04 05:34:13 nathanmarz @goomba I think you want  (must :b :c)  or  (apply must [:b :c])"><a href="#t1536039253000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">05:34:13</span>           nathanmarz </span><span>@goomba I think you want </span><code>(must :b :c)</code><span> or </span><code>(apply must [:b :c])</code></div><div id="t1536094253000100" t="2018-09-04 20:50:53 unbalanced hmm well no luck so far but my guess is in general I&apos;m still not a high enough level specter yet"><a href="#t1536094253000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:50:53</span>           unbalanced </span><span>hmm well no luck so far but my guess is in general I&apos;m still not a high enough level specter yet</span></div><div id="t1536094289000100" t="2018-09-04 20:51:29 unbalanced you don&apos;t happen to know @nathanmarz of any open source projects that are making good use of your library do you?  Would love to see more examples"><a href="#t1536094289000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:51:29</span>           unbalanced </span><span>you don&apos;t happen to know @nathanmarz of any open source projects that are making good use of your library do you?  Would love to see more examples</span></div><div id="t1536094349000100" t="2018-09-04 20:52:29 unbalanced I&apos;m always getting so close to what I want to do but just always missing a piece"><a href="#t1536094349000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:52:29</span>           unbalanced </span><span>I&apos;m always getting so close to what I want to do but just always missing a piece</span></div><div id="t1536094357000100" t="2018-09-04 20:52:37 unbalanced for instance, navigating to the maximum of a set of elements"><a href="#t1536094357000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:52:37</span>           unbalanced </span><span>for instance, navigating to the maximum of a set of elements</span></div><div id="t1536094435000100" t="2018-09-04 20:53:55 unbalanced (select [MAP-VALS :index MAX] {:a {:index 0} :b {:index 1}})  ... I should be able to write or figure out  MAX  but sadly just not there yet"><a href="#t1536094435000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:53:55</span>           unbalanced </span><pre>(select [MAP-VALS :index MAX] {:a {:index 0} :b {:index 1}})</pre><span> ... I should be able to write or figure out </span><code>MAX</code><span> but sadly just not there yet</span></div><div id="t1536094504000200" t="2018-09-04 20:55:04 unbalanced of course that&apos;s simple enough to do with other functions but just trying to learn to think in specter haha"><a href="#t1536094504000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">20:55:04</span>           unbalanced </span><span>of course that&apos;s simple enough to do with other functions but just trying to learn to think in specter haha</span></div><div id="t1536096442000100" t="2018-09-04 21:27:22 nathanmarz @goomba I don&apos;t really keep track of how specter is used by other open source projects"><a href="#t1536096442000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">21:27:22</span>           nathanmarz </span><span>@goomba I don&apos;t really keep track of how specter is used by other open source projects</span></div><div id="t1536096464000100" t="2018-09-04 21:27:44 nathanmarz you can try doing a github search"><a href="#t1536096464000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">21:27:44</span>           nathanmarz </span><span>you can try doing a github search</span></div><div id="t1536096473000100" t="2018-09-04 21:27:53 unbalanced no problemo... working through some of your examples"><a href="#t1536096473000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">21:27:53</span>           unbalanced </span><span>no problemo... working through some of your examples</span></div><div id="t1536096500000100" t="2018-09-04 21:28:20 nathanmarz MAX  would have to be done with  defnav"><a href="#t1536096500000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-04</span> <span class="t" onclick="H(this)">21:28:20</span>           nathanmarz </span><code>MAX</code><span> would have to be done with </span><code>defnav</code></div><div id="t1536238512000100" t="2018-09-06 12:55:12 roklenarcic Hm, I have two predicates and sequence. I would like to select items starting with an element that satisfies predicate1, up to an element that specifies predicate2."><a href="#t1536238512000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">12:55:12</span>          roklenarcic </span><span>Hm, I have two predicates and sequence. I would like to select items starting with an element that satisfies predicate1, up to an element that specifies predicate2.</span></div><div id="t1536238551000100" t="2018-09-06 12:55:51 roklenarcic I&apos;m a bit of a newbie when it comes to working subsequences with specter"><a href="#t1536238551000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">12:55:51</span>          roklenarcic </span><span>I&apos;m a bit of a newbie when it comes to working subsequences with specter</span></div><div id="t1536239181000100" t="2018-09-06 13:06:21 nathanmarz @roklenarcic you would need  https://github.com/nathanmarz/specter/issues/236  to do that"><a href="#t1536239181000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">13:06:21</span>           nathanmarz </span><span>@roklenarcic you would need </span><a href="https://github.com/nathanmarz/specter/issues/236" target="_blank">https://github.com/nathanmarz/specter/issues/236</a><span> to do that</span></div><div id="t1536239242000100" t="2018-09-06 13:07:22 nathanmarz you could make your own version of continuous-subseqs with the generalized behavior, it&apos;s not very complicated"><a href="#t1536239242000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">13:07:22</span>           nathanmarz </span><span>you could make your own version of continuous-subseqs with the generalized behavior, it&apos;s not very complicated</span></div><div id="t1536239287000100" t="2018-09-06 13:08:07 roklenarcic Fortunately this isn&apos;t nested in some other selector so I&apos;ll just use drop-while, take-while"><a href="#t1536239287000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">13:08:07</span>          roklenarcic </span><span>Fortunately this isn&apos;t nested in some other selector so I&apos;ll just use drop-while, take-while</span></div><div id="t1536247576000100" t="2018-09-06 15:26:16 bruno.bonacci Hi,
is there any way in Specter to have a something like a  mapcat ??
For example I’d like to denormalize a map like this:
 {:a 1 :b [&quot;a&quot; &quot;b&quot;]}
 
into
 {:a 1 :b &quot;a&quot;}
{:a 1 :b &quot;b&quot;}
 

same as

 (mapcat (fn [{:keys [b] :as m}]
          (map #(assoc m :b %) b))
        [{:a 1 :b [&quot;a&quot; &quot;b&quot;]} {:a 2 :b [&quot;c&quot; &quot;d&quot;]}])
;;=&gt; &apos;({:a 1, :b &quot;a&quot;} {:a 1, :b &quot;b&quot;} {:a 2, :b &quot;c&quot;} {:a 2, :b &quot;d&quot;})
 
But I havent found a way to concatenate the result and remove
the extra ’() in one step.

 (transform [ALL]
           (fn [{:keys [b] :as m}]
             (map #(assoc m :b %) b))
           [{:a 1 :b [&quot;a&quot; &quot;b&quot;]} {:a 2 :b [&quot;c&quot; &quot;d&quot;]}])
;;=&gt; [({:a 1, :b &quot;a&quot;} {:a 1, :b &quot;b&quot;})
;;    ({:a 2, :b &quot;c&quot;} {:a 2, :b &quot;d&quot;})]

"><a href="#t1536247576000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">15:26:16</span>        bruno.bonacci </span><span>Hi,
is there any way in Specter to have a something like a </span><code>mapcat</code><span>??
For example I’d like to denormalize a map like this:
</span><pre>{:a 1 :b [&quot;a&quot; &quot;b&quot;]}
</pre><span>
into
</span><pre>{:a 1 :b &quot;a&quot;}
{:a 1 :b &quot;b&quot;}
</pre><span>

same as

</span><pre>(mapcat (fn [{:keys [b] :as m}]
          (map #(assoc m :b %) b))
        [{:a 1 :b [&quot;a&quot; &quot;b&quot;]} {:a 2 :b [&quot;c&quot; &quot;d&quot;]}])
;;=&gt; &apos;({:a 1, :b &quot;a&quot;} {:a 1, :b &quot;b&quot;} {:a 2, :b &quot;c&quot;} {:a 2, :b &quot;d&quot;})
</pre><span>
But I havent found a way to concatenate the result and remove
the extra ’() in one step.

</span><pre>(transform [ALL]
           (fn [{:keys [b] :as m}]
             (map #(assoc m :b %) b))
           [{:a 1 :b [&quot;a&quot; &quot;b&quot;]} {:a 2 :b [&quot;c&quot; &quot;d&quot;]}])
;;=&gt; [({:a 1, :b &quot;a&quot;} {:a 1, :b &quot;b&quot;})
;;    ({:a 2, :b &quot;c&quot;} {:a 2, :b &quot;d&quot;})]

</pre></div><div id="t1536247583000100" t="2018-09-06 15:26:23 bruno.bonacci any idea?"><a href="#t1536247583000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">15:26:23</span>        bruno.bonacci </span><span>any idea?</span></div><div id="t1536254578000100" t="2018-09-06 17:22:58 nathanmarz @bruno.bonacci you can do something like:
 (transform ALL
  (fn [[m b]] (assoc m :b b))
  (select [ALL VAL :b ALL] data))
"><a href="#t1536254578000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:22:58</span>           nathanmarz </span><span>@bruno.bonacci you can do something like:
</span><pre>(transform ALL
  (fn [[m b]] (assoc m :b b))
  (select [ALL VAL :b ALL] data))
</pre></div><div id="t1536254635000100" t="2018-09-06 17:23:55 nathanmarz having two ALL&apos;s in a select can act like mapcat"><a href="#t1536254635000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:23:55</span>           nathanmarz </span><span>having two ALL&apos;s in a select can act like mapcat</span></div><div id="t1536254801000100" t="2018-09-06 17:26:41 bruno.bonacci ok, I understand what you are doing here. The  select  is creating a projection with the info and the  transform  is producing the final maps."><a href="#t1536254801000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:26:41</span>        bruno.bonacci </span><span>ok, I understand what you are doing here. The </span><code>select</code><span> is creating a projection with the info and the </span><code>transform</code><span> is producing the final maps.</span></div><div id="t1536254839000100" t="2018-09-06 17:27:19 bruno.bonacci interesting approach, thanks."><a href="#t1536254839000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:27:19</span>        bruno.bonacci </span><span>interesting approach, thanks.</span></div><div id="t1536254875000100" t="2018-09-06 17:27:55 nathanmarz with a modified  view  you could do it in a single  select"><a href="#t1536254875000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:27:55</span>           nathanmarz </span><span>with a modified </span><code>view</code><span> you could do it in a single </span><code>select</code></div><div id="t1536254951000100" t="2018-09-06 17:29:11 nathanmarz just by passing the collected vals into the view fn"><a href="#t1536254951000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:29:11</span>           nathanmarz </span><span>just by passing the collected vals into the view fn</span></div><div id="t1536255027000100" t="2018-09-06 17:30:27 bruno.bonacci got it, thanks"><a href="#t1536255027000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:30:27</span>        bruno.bonacci </span><span>got it, thanks</span></div><div id="t1536255837000100" t="2018-09-06 17:43:57 bruno.bonacci Sorry,  view  doesn’t seem to be affected by the collection of values"><a href="#t1536255837000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:43:57</span>        bruno.bonacci </span><span>Sorry, </span><code>view</code><span> doesn’t seem to be affected by the collection of values</span></div><div id="t1536255876000100" t="2018-09-06 17:44:36 bruno.bonacci (select [ALL VAL (view pr-str)] (range 5)) =&gt; [[0 &quot;0&quot;] [1 &quot;1&quot;] [2 &quot;2&quot;] [3 &quot;3&quot;] [4 &quot;4&quot;]]"><a href="#t1536255876000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:44:36</span>        bruno.bonacci </span><code>(select [ALL VAL (view pr-str)] (range 5)) =&gt; [[0 &quot;0&quot;] [1 &quot;1&quot;] [2 &quot;2&quot;] [3 &quot;3&quot;] [4 &quot;4&quot;]]</code></div><div id="t1536255922000100" t="2018-09-06 17:45:22 bruno.bonacci i was expecting that the  view  function would receive also the collected values"><a href="#t1536255922000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:45:22</span>        bruno.bonacci </span><span>i was expecting that the </span><code>view</code><span> function would receive also the collected values</span></div><div id="t1536255968000100" t="2018-09-06 17:46:08 bruno.bonacci here it appears it only receives the value in the navigation path"><a href="#t1536255968000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:46:08</span>        bruno.bonacci </span><span>here it appears it only receives the value in the navigation path</span></div><div id="t1536256247000100" t="2018-09-06 17:50:47 nathanmarz that&apos;s correct, that&apos;s why I said with a modified  view"><a href="#t1536256247000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:50:47</span>           nathanmarz </span><span>that&apos;s correct, that&apos;s why I said with a modified </span><code>view</code></div><div id="t1536256487000100" t="2018-09-06 17:54:47 nathanmarz (defrichnav cview [afn]
  (select* [this vals structure next-fn]
    (next-fn vals (apply afn (conj vals structure))))
  (transform* [this vals structure next-fn]
    (next-fn vals (apply afn (conj vals structure)))))
"><a href="#t1536256487000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:54:47</span>           nathanmarz </span><pre>(defrichnav cview [afn]
  (select* [this vals structure next-fn]
    (next-fn vals (apply afn (conj vals structure))))
  (transform* [this vals structure next-fn]
    (next-fn vals (apply afn (conj vals structure)))))
</pre></div><div id="t1536256549000100" t="2018-09-06 17:55:49 bruno.bonacci :+1:  Thanks"><a href="#t1536256549000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-06</span> <span class="t" onclick="H(this)">17:55:49</span>        bruno.bonacci </span><b>:+1:</b><span> Thanks</span></div><div id="t1536671025000100" t="2018-09-11 13:03:45 miikka When should I use  nthpath  and when  index-nav ?"><a href="#t1536671025000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-11</span> <span class="t" onclick="H(this)">13:03:45</span>               miikka </span><span>When should I use </span><code>nthpath</code><span> and when </span><code>index-nav</code><span>?</span></div><div id="t1536672989000100" t="2018-09-11 13:36:29 nathanmarz @miikka  nthpath  navigates to the value for the index,  index-nav  navigates to the actual index"><a href="#t1536672989000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-11</span> <span class="t" onclick="H(this)">13:36:29</span>           nathanmarz </span><span>@miikka </span><code>nthpath</code><span> navigates to the value for the index, </span><code>index-nav</code><span> navigates to the actual index</span></div><div id="t1536672999000100" t="2018-09-11 13:36:39 nathanmarz take a look at the examples on the wiki"><a href="#t1536672999000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-11</span> <span class="t" onclick="H(this)">13:36:39</span>           nathanmarz </span><span>take a look at the examples on the wiki</span></div><div id="t1536673000000100" t="2018-09-11 13:36:40 miikka Ah"><a href="#t1536673000000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-11</span> <span class="t" onclick="H(this)">13:36:40</span>               miikka </span><span>Ah</span></div><div id="t1536863450000100" t="2018-09-13 18:30:50 idiomancy does anyone know how I would select a slice of elements within a sequence between two values?

I&apos;m slicing a datomic query, and I want everything between  :find  and  :when , so:

 [:find ?id . :where [?id :app/type :type/form]]
=&gt; [?id .]

[:find  [?tid ...] :where [?tid :app/type :type/task]]
=&gt; [[?tid ...]]
"><a href="#t1536863450000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-13</span> <span class="t" onclick="H(this)">18:30:50</span>            idiomancy </span><span>does anyone know how I would select a slice of elements within a sequence between two values?

I&apos;m slicing a datomic query, and I want everything between </span><code>:find</code><span> and </span><code>:when</code><span>, so:

</span><pre>[:find ?id . :where [?id :app/type :type/form]]
=&gt; [?id .]

[:find  [?tid ...] :where [?tid :app/type :type/task]]
=&gt; [[?tid ...]]
</pre></div><div id="t1536863625000100" t="2018-09-13 18:33:45 idiomancy I guess I could use srange-dynamic"><a href="#t1536863625000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-13</span> <span class="t" onclick="H(this)">18:33:45</span>            idiomancy </span><span>I guess I could use srange-dynamic</span></div><div id="t1536896556000100" t="2018-09-14 03:42:36 nathanmarz @idiomancy yes, srange-dynamic would work for that"><a href="#t1536896556000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">03:42:36</span>           nathanmarz </span><span>@idiomancy yes, srange-dynamic would work for that</span></div><div id="t1536924737000100" t="2018-09-14 11:32:17 mpenet how would you write a transform that modifies every string value in a tree? I have yet to check the doc but I figured I might just ask here in the meanwhile  😛"><a href="#t1536924737000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">11:32:17</span>               mpenet </span><span>how would you write a transform that modifies every string value in a tree? I have yet to check the doc but I figured I might just ask here in the meanwhile </span><b>😛</b></div><div id="t1536924825000100" t="2018-09-14 11:33:45 schmee (transform (walker string?) your-fn your-coll)"><a href="#t1536924825000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">11:33:45</span>               schmee </span><code>(transform (walker string?) your-fn your-coll)</code></div><div id="t1536924839000100" t="2018-09-14 11:33:59 schmee not the most efficient way but gets the job done"><a href="#t1536924839000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">11:33:59</span>               schmee </span><span>not the most efficient way but gets the job done</span></div><div id="t1536924879000100" t="2018-09-14 11:34:39 schmee if you need performance, write your own recursive navigator:  https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#a-basic-example"><a href="#t1536924879000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">11:34:39</span>               schmee </span><span>if you need performance, write your own recursive navigator: </span><a href="https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#a-basic-example" target="_blank">https://github.com/nathanmarz/specter/wiki/Using-Specter-Recursively#a-basic-example</a></div><div id="t1536924897000100" t="2018-09-14 11:34:57 mpenet reading that at the moment, that seems like what I am looking for indeed. thanks"><a href="#t1536924897000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">11:34:57</span>               mpenet </span><span>reading that at the moment, that seems like what I am looking for indeed. thanks</span></div><div id="t1536927010000100" t="2018-09-14 12:10:10 Petrus Theron Has anyone used Specter for Matrix algebra? I&apos;m dealing with Kalman filtering N streams of data, and I have to do all this ceremony around assigning an index to each sensor value, multiplying some matrixes together that are really about (premature) index-based optimization, then I have to un-index them again - basically, lensing."><a href="#t1536927010000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">12:10:10</span>        Petrus Theron </span><span>Has anyone used Specter for Matrix algebra? I&apos;m dealing with Kalman filtering N streams of data, and I have to do all this ceremony around assigning an index to each sensor value, multiplying some matrixes together that are really about (premature) index-based optimization, then I have to un-index them again - basically, lensing.</span></div><div id="t1536929470000100" t="2018-09-14 12:51:10 nathanmarz @petrus I&apos;ve done some stuff with matrices"><a href="#t1536929470000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">12:51:10</span>           nathanmarz </span><span>@petrus I&apos;ve done some stuff with matrices</span></div><div id="t1536929546000100" t="2018-09-14 12:52:26 nathanmarz you&apos;ll want custom navigators for them to do anything sophisticated"><a href="#t1536929546000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">12:52:26</span>           nathanmarz </span><span>you&apos;ll want custom navigators for them to do anything sophisticated</span></div><div id="t1536929588000100" t="2018-09-14 12:53:08 nathanmarz e.g. a &quot;submat&quot; navigator that navigates to an arbitrary sub-matrix"><a href="#t1536929588000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">12:53:08</span>           nathanmarz </span><span>e.g. a &quot;submat&quot; navigator that navigates to an arbitrary sub-matrix</span></div><div id="t1536929609000100" t="2018-09-14 12:53:29 nathanmarz &quot;row&quot; and &quot;col&quot; navigators can be useful too"><a href="#t1536929609000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-14</span> <span class="t" onclick="H(this)">12:53:29</span>           nathanmarz </span><span>&quot;row&quot; and &quot;col&quot; navigators can be useful too</span></div><div id="t1537458429000100" t="2018-09-20 15:47:09 okocim I’m a complete novice with specter (fired it up about a day ago), but I’m liking it so far.  One thing that strikes me about the library is that it lends itself very well when you’re trying to simulate an “update in place” of a complex data structure. However, when I’m trying to completely change the shape of one data structure into a different structure (e.g. for transformation at a contract boundary), I find myself fighting with it a bit more.

Am I right in my thinking that this is more suited for changing values in an existing data structure, or was this library also intended to help reshape data structures, and I’m not yet understanding which of the helpers are used for that.

What I’ve been doing to date is calling  select  and collecting the values that I’m interested in, and then simply arranging the collected values into whatever shape I need. Is that the right approach?"><a href="#t1537458429000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">15:47:09</span>               okocim </span><span>I’m a complete novice with specter (fired it up about a day ago), but I’m liking it so far.  One thing that strikes me about the library is that it lends itself very well when you’re trying to simulate an “update in place” of a complex data structure. However, when I’m trying to completely change the shape of one data structure into a different structure (e.g. for transformation at a contract boundary), I find myself fighting with it a bit more.

Am I right in my thinking that this is more suited for changing values in an existing data structure, or was this library also intended to help reshape data structures, and I’m not yet understanding which of the helpers are used for that.

What I’ve been doing to date is calling </span><code>select</code><span> and collecting the values that I’m interested in, and then simply arranging the collected values into whatever shape I need. Is that the right approach?</span></div><div id="t1537463128000100" t="2018-09-20 17:05:28 nathanmarz @okocim you have it right, specter excels at doing partial changes of a data structure"><a href="#t1537463128000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">17:05:28</span>           nathanmarz </span><span>@okocim you have it right, specter excels at doing partial changes of a data structure</span></div><div id="t1537463155000100" t="2018-09-20 17:05:55 nathanmarz if you&apos;re restructuring the whole thing, specter probably won&apos;t help that much"><a href="#t1537463155000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">17:05:55</span>           nathanmarz </span><span>if you&apos;re restructuring the whole thing, specter probably won&apos;t help that much</span></div><div id="t1537468338000100" t="2018-09-20 18:32:18 okocim @nathanmarz Thanks for confirming, and thanks for the library. The partial update use-case is the one that I primarily used this for, and it really does feel like you’re providing a piece that’s missing in core clojure  👍"><a href="#t1537468338000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">18:32:18</span>               okocim </span><span>@nathanmarz Thanks for confirming, and thanks for the library. The partial update use-case is the one that I primarily used this for, and it really does feel like you’re providing a piece that’s missing in core clojure </span><b>👍</b></div><div id="t1537720314000100" t="2018-09-23 16:31:54 suskeyhose Hey, so I&apos;m working with specter a bit, and one problem that I&apos;ve noticed has come up several times which I feel has to have a normal solution, is that when I use  transform  there&apos;s no way to set the value if there is none already there. The solution I&apos;ve had to use on several occasions is this:
 (let [value (select-first [:path :to :val] structure)
      value (update-fn value)
      structure (setval [:path :to :val] value structure)]
  structure)
 
And this feels wrong on many levels, not the least of which because if  structure  is an atom, and I use  ATOM  in the path, that means that the operation is no longer atomic."><a href="#t1537720314000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:31:54</span>           suskeyhose </span><span>Hey, so I&apos;m working with specter a bit, and one problem that I&apos;ve noticed has come up several times which I feel has to have a normal solution, is that when I use </span><code>transform</code><span> there&apos;s no way to set the value if there is none already there. The solution I&apos;ve had to use on several occasions is this:
</span><pre>(let [value (select-first [:path :to :val] structure)
      value (update-fn value)
      structure (setval [:path :to :val] value structure)]
  structure)
</pre><span>
And this feels wrong on many levels, not the least of which because if </span><code>structure</code><span> is an atom, and I use </span><code>ATOM</code><span> in the path, that means that the operation is no longer atomic.</span></div><div id="t1537720519000100" t="2018-09-23 16:35:19 suskeyhose Everything else I&apos;ve used in specter always feels like a great addition to Clojure, but this one hiccup is something that I&apos;ve run into enough times that it almost makes me want to express this instead using a normal  swap!"><a href="#t1537720519000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:35:19</span>           suskeyhose </span><span>Everything else I&apos;ve used in specter always feels like a great addition to Clojure, but this one hiccup is something that I&apos;ve run into enough times that it almost makes me want to express this instead using a normal </span><code>swap!</code></div><div id="t1537721607000100" t="2018-09-23 16:53:27 jsa-aerial I&apos;m a bit confused. This sort of thing  (sp/transform [sp/ATOM key-path] update-fn db))  works just fine for me whether the final key exists or not. Also there is sp/BEGINNING and friends, which all work fine as well."><a href="#t1537721607000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:53:27</span>           jsa-aerial </span><span>I&apos;m a bit confused. This sort of thing </span><code>(sp/transform [sp/ATOM key-path] update-fn db))</code><span> works just fine for me whether the final key exists or not. Also there is sp/BEGINNING and friends, which all work fine as well.</span></div><div id="t1537721629000100" t="2018-09-23 16:53:49 jsa-aerial @suskeyhose ^^^^"><a href="#t1537721629000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:53:49</span>           jsa-aerial </span><span>@suskeyhose ^^^^</span></div><div id="t1537721668000100" t="2018-09-23 16:54:28 suskeyhose Really? I&apos;m not getting the function called at all with an example. Just a moment and I can give you the example that I&apos;m running."><a href="#t1537721668000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:54:28</span>           suskeyhose </span><span>Really? I&apos;m not getting the function called at all with an example. Just a moment and I can give you the example that I&apos;m running.</span></div><div id="t1537721747000100" t="2018-09-23 16:55:47 jsa-aerial Yeah, works great - if it didn&apos;t, I would be hurting"><a href="#t1537721747000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:55:47</span>           jsa-aerial </span><span>Yeah, works great - if it didn&apos;t, I would be hurting</span></div><div id="t1537721761000100" t="2018-09-23 16:56:01 suskeyhose Hmm. Well now it&apos;s working on the small example. Curious why it&apos;s not working in my larger code."><a href="#t1537721761000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:56:01</span>           suskeyhose </span><span>Hmm. Well now it&apos;s working on the small example. Curious why it&apos;s not working in my larger code.</span></div><div id="t1537721781000100" t="2018-09-23 16:56:21 jsa-aerial likely something else is happening"><a href="#t1537721781000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:56:21</span>           jsa-aerial </span><span>likely something else is happening</span></div><div id="t1537721885000100" t="2018-09-23 16:58:05 jsa-aerial Further, yielding sp/NONE for the value removes the element (for example, k/v pair in a map) which is really wonderful"><a href="#t1537721885000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">16:58:05</span>           jsa-aerial </span><span>Further, yielding sp/NONE for the value removes the element (for example, k/v pair in a map) which is really wonderful</span></div><div id="t1537722255000100" t="2018-09-23 17:04:15 suskeyhose Yeah, I&apos;ve used that a few times, which is fantastic"><a href="#t1537722255000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:04:15</span>           suskeyhose </span><span>Yeah, I&apos;ve used that a few times, which is fantastic</span></div><div id="t1537722877000100" t="2018-09-23 17:14:37 suskeyhose Okay, so the example in my code which this is working with is like this:
 (transform [ATOM
            ::ds/rate-limits
            ::ds/endpoint-specific-rate-limits
            {::ds/action :create-message
             ::ds/major-variable {::ds/major-variable-type ::ds/channel-id
                                  ::ds/major-variable-value &quot;286241942356885504&quot;}}]
           #(println %)
           (atom #:discljord.specs{:rate-limits #:discljord.specs{:endpoint-specific-rate-limits {}}, :channel (a/chan 100), :token &quot;TOKEN&quot;}))
 
The println doesn&apos;t get called at all"><a href="#t1537722877000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:14:37</span>           suskeyhose </span><span>Okay, so the example in my code which this is working with is like this:
</span><pre>(transform [ATOM
            ::ds/rate-limits
            ::ds/endpoint-specific-rate-limits
            {::ds/action :create-message
             ::ds/major-variable {::ds/major-variable-type ::ds/channel-id
                                  ::ds/major-variable-value &quot;286241942356885504&quot;}}]
           #(println %)
           (atom #:discljord.specs{:rate-limits #:discljord.specs{:endpoint-specific-rate-limits {}}, :channel (a/chan 100), :token &quot;TOKEN&quot;}))
</pre><span>
The println doesn&apos;t get called at all</span></div><div id="t1537722933000200" t="2018-09-23 17:15:33 suskeyhose (transform [:key {:doesnt-exist :blah}] #(do (println %) :blah) {:key {}})
 
here&apos;s a minimal example"><a href="#t1537722933000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:15:33</span>           suskeyhose </span><pre>(transform [:key {:doesnt-exist :blah}] #(do (println %) :blah) {:key {}})
</pre><span>
here&apos;s a minimal example</span></div><div id="t1537722941000100" t="2018-09-23 17:15:41 suskeyhose so apparently I can&apos;t use a map as a key and have it work"><a href="#t1537722941000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:15:41</span>           suskeyhose </span><span>so apparently I can&apos;t use a map as a key and have it work</span></div><div id="t1537723154000100" t="2018-09-23 17:19:14 suskeyhose user&gt; (select-first [{:blah :blah}] {{:blah :blah} :blah})
nil
user&gt; (transform [{:blah :blah}] #(do (println %) :blah2) {{:blah :blah} :blah})
{{:blah :blah} :blah}
 
Here&apos;s some more stuff from my repl session which shows a more minimal case of failure."><a href="#t1537723154000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:19:14</span>           suskeyhose </span><pre>user&gt; (select-first [{:blah :blah}] {{:blah :blah} :blah})
nil
user&gt; (transform [{:blah :blah}] #(do (println %) :blah2) {{:blah :blah} :blah})
{{:blah :blah} :blah}
</pre><span>
Here&apos;s some more stuff from my repl session which shows a more minimal case of failure.</span></div><div id="t1537723395000100" t="2018-09-23 17:23:15 schmee AFAIK using maps as paths doesn’t do anything"><a href="#t1537723395000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:23:15</span>               schmee </span><span>AFAIK using maps as paths doesn’t do anything</span></div><div id="t1537723496000100" t="2018-09-23 17:24:56 suskeyhose Yeah, that&apos;s the problem. I have need of using a map as a key, and if specter can&apos;t select or transform paths with maps, then I&apos;m kind of screwed."><a href="#t1537723496000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:24:56</span>           suskeyhose </span><span>Yeah, that&apos;s the problem. I have need of using a map as a key, and if specter can&apos;t select or transform paths with maps, then I&apos;m kind of screwed.</span></div><div id="t1537723504000100" t="2018-09-23 17:25:04 suskeyhose And just have to go back to traditional data manipulation"><a href="#t1537723504000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:25:04</span>           suskeyhose </span><span>And just have to go back to traditional data manipulation</span></div><div id="t1537724035000100" t="2018-09-23 17:33:55 jsa-aerial Well, you could try sp/map-key which maybe will work - but you are still not screwed. But you will need to create a custom navigator :  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet#custom-navigators"><a href="#t1537724035000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:33:55</span>           jsa-aerial </span><span>Well, you could try sp/map-key which maybe will work - but you are still not screwed. But you will need to create a custom navigator : </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet#custom-navigators" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet#custom-navigators</a></div><div id="t1537724047000100" t="2018-09-23 17:34:07 jsa-aerial @suskeyhose ^^^"><a href="#t1537724047000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:34:07</span>           jsa-aerial </span><span>@suskeyhose ^^^</span></div><div id="t1537724089000100" t="2018-09-23 17:34:49 suskeyhose Okay, thanks. I&apos;ll take a look at it"><a href="#t1537724089000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:34:49</span>           suskeyhose </span><span>Okay, thanks. I&apos;ll take a look at it</span></div><div id="t1537725595000100" t="2018-09-23 17:59:55 nathanmarz @suskeyhose if you want to use a map as a key wrap it in  keypath"><a href="#t1537725595000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">17:59:55</span>           nathanmarz </span><span>@suskeyhose if you want to use a map as a key wrap it in </span><code>keypath</code></div><div id="t1537725603000100" t="2018-09-23 18:00:03 suskeyhose oh, thanks!"><a href="#t1537725603000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:00:03</span>           suskeyhose </span><span>oh, thanks!</span></div><div id="t1537725630000100" t="2018-09-23 18:00:30 nathanmarz keypath  is the navigator that&apos;s implicitly used by keywords in paths"><a href="#t1537725630000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:00:30</span>           nathanmarz </span><code>keypath</code><span> is the navigator that&apos;s implicitly used by keywords in paths</span></div><div id="t1537725665000100" t="2018-09-23 18:01:05 suskeyhose Ah, okay. Well that&apos;s exactly the behavior that I&apos;d wanted, so that&apos;s exactly it. Thanks so much!"><a href="#t1537725665000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:01:05</span>           suskeyhose </span><span>Ah, okay. Well that&apos;s exactly the behavior that I&apos;d wanted, so that&apos;s exactly it. Thanks so much!</span></div><div id="t1537726498000100" t="2018-09-23 18:14:58 schmee out of curiosity, is it possible to provide custom implicit navigators?"><a href="#t1537726498000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:14:58</span>               schmee </span><span>out of curiosity, is it possible to provide custom implicit navigators?</span></div><div id="t1537727891000100" t="2018-09-23 18:38:11 nathanmarz @schmee yes, through the  ImplicitNav  protocol"><a href="#t1537727891000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:38:11</span>           nathanmarz </span><span>@schmee yes, through the </span><code>ImplicitNav</code><span> protocol</span></div><div id="t1537727919000100" t="2018-09-23 18:38:39 nathanmarz see  https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1188"><a href="#t1537727919000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-23</span> <span class="t" onclick="H(this)">18:38:39</span>           nathanmarz </span><span>see </span><a href="https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1188" target="_blank">https://github.com/nathanmarz/specter/blob/master/src/clj/com/rpl/specter.cljc#L1188</a></div><div id="t1537976325000100" t="2018-09-26 15:38:45 Logan Powell 👋  new guy here. I hope my question is simple: I&apos;m looking for a way to map a function to a specific set of indices within a collection. For example:
 (transform [ALL MAP-VALS [1 3 5]] inc [0 1 2 3 4 5 6])
;; wishful thinking =&gt; [0 2 2 4 4 6 6]
 
is such a thing straight-forward in  specter ?"><a href="#t1537976325000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">15:38:45</span>         Logan Powell </span><b>👋</b><span> new guy here. I hope my question is simple: I&apos;m looking for a way to map a function to a specific set of indices within a collection. For example:
</span><pre>(transform [ALL MAP-VALS [1 3 5]] inc [0 1 2 3 4 5 6])
;; wishful thinking =&gt; [0 2 2 4 4 6 6]
</pre><span>
is such a thing straight-forward in </span><code>specter</code><span>?</span></div><div id="t1537980627000100" t="2018-09-26 16:50:27 drowsy @loganpowell something like  (transform [INDEXED-VALS (selected? FIRST #{1 3 5}) LAST] inc [0 1 2 3 4 5 6])  works. Not sure if it&apos;s the best solution though."><a href="#t1537980627000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">16:50:27</span>               drowsy </span><span>@loganpowell something like </span><code>(transform [INDEXED-VALS (selected? FIRST #{1 3 5}) LAST] inc [0 1 2 3 4 5 6])</code><span> works. Not sure if it&apos;s the best solution though.</span></div><div id="t1537981601000100" t="2018-09-26 17:06:41 Logan Powell @drowsy Thank you thank you"><a href="#t1537981601000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">17:06:41</span>         Logan Powell </span><span>@drowsy Thank you thank you</span></div><div id="t1537982764000100" t="2018-09-26 17:26:04 Logan Powell works like a charm!"><a href="#t1537982764000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">17:26:04</span>         Logan Powell </span><span>works like a charm!</span></div><div id="t1537983558000100" t="2018-09-26 17:39:18 schmee @loganpowell shorter and faster version:
 user=&gt; (transform (multi-path 1 3 5) inc [0 1 2 3 4 5 6])
[0 2 2 4 4 6 6]
"><a href="#t1537983558000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">17:39:18</span>               schmee </span><span>@loganpowell shorter and faster version:
</span><pre>user=&gt; (transform (multi-path 1 3 5) inc [0 1 2 3 4 5 6])
[0 2 2 4 4 6 6]
</pre></div><div id="t1537983588000100" t="2018-09-26 17:39:48 Logan Powell @schmee Boom! Thank you!"><a href="#t1537983588000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-26</span> <span class="t" onclick="H(this)">17:39:48</span>         Logan Powell </span><span>@schmee Boom! Thank you!</span></div><div id="t1538015210000100" t="2018-09-27 02:26:50 idiomancy is there a version of nil-&gt;val that also responds to  :com.rpl.specter.impl/NONE ?  The navigator I&apos;m building is &quot;if element 1is a hash-map, select that.  if not, insert a hash-map between element 0 and element 1 and select that&quot;"><a href="#t1538015210000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-27</span> <span class="t" onclick="H(this)">02:26:50</span>            idiomancy </span><span>is there a version of nil-&gt;val that also responds to </span><code>:com.rpl.specter.impl/NONE</code><span>?  The navigator I&apos;m building is &quot;if element 1is a hash-map, select that.  if not, insert a hash-map between element 0 and element 1 and select that&quot;</span></div><div id="t1538045947000100" t="2018-09-27 10:59:07 nathanmarz @idiomancy that path can be expressed like:
 (transform 
  (if-path [1 map?]
    1
    [(before-index 1) (view (constantly {}))]
    )
  transform-fn
  data)
"><a href="#t1538045947000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-27</span> <span class="t" onclick="H(this)">10:59:07</span>           nathanmarz </span><span>@idiomancy that path can be expressed like:
</span><pre>(transform 
  (if-path [1 map?]
    1
    [(before-index 1) (view (constantly {}))]
    )
  transform-fn
  data)
</pre></div><div id="t1538046924000100" t="2018-09-27 11:15:24 idiomancy holy crap that works."><a href="#t1538046924000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-27</span> <span class="t" onclick="H(this)">11:15:24</span>            idiomancy </span><span>holy crap that works.</span></div><div id="t1538046947000100" t="2018-09-27 11:15:47 idiomancy man, thats crazy,  was landing on like 30 variations of that that didn&apos;t work"><a href="#t1538046947000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-27</span> <span class="t" onclick="H(this)">11:15:47</span>            idiomancy </span><span>man, thats crazy,  was landing on like 30 variations of that that didn&apos;t work</span></div><div id="t1538431424000100" t="2018-10-01 22:03:44 schmee I have two selects that only differ in the argument to  must :  (select [ALL ALL (selected? (must x))] board) , where  x  is  :color  and  :robot"><a href="#t1538431424000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:03:44</span>               schmee </span><span>I have two selects that only differ in the argument to </span><code>must</code><span>: </span><code>(select [ALL ALL (selected? (must x))] board)</code><span>, where </span><code>x</code><span> is </span><code>:color</code><span> and </span><code>:robot</code></div><div id="t1538431477000100" t="2018-10-01 22:04:37 schmee any way to combine the two into one or should I just do them separately?"><a href="#t1538431477000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:04:37</span>               schmee </span><span>any way to combine the two into one or should I just do them separately?</span></div><div id="t1538432113000100" t="2018-10-01 22:15:13 tanzoniteblack if you want to do 1 call that returns both, you could probably do  (selected? (multi-path (must :color) (must :robot))) ?"><a href="#t1538432113000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:15:13</span>       tanzoniteblack </span><span>if you want to do 1 call that returns both, you could probably do </span><code>(selected? (multi-path (must :color) (must :robot)))</code><span>?</span></div><div id="t1538432235000100" t="2018-10-01 22:17:15 tanzoniteblack probably could also do  (must (multi-path :color :robot)) ?"><a href="#t1538432235000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:17:15</span>       tanzoniteblack </span><span>probably could also do </span><code>(must (multi-path :color :robot))</code><span>?</span></div><div id="t1538432400000100" t="2018-10-01 22:20:00 schmee oh sorry, I forgot to mention that I would like to get the results in two different arrays, sort of like this:
 user=&gt; (select [(multi-path (filterer odd?) (filterer even?))] (range 10))
[[1 3 5 7 9] [0 2 4 6 8]]
"><a href="#t1538432400000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:20:00</span>               schmee </span><span>oh sorry, I forgot to mention that I would like to get the results in two different arrays, sort of like this:
</span><pre>user=&gt; (select [(multi-path (filterer odd?) (filterer even?))] (range 10))
[[1 3 5 7 9] [0 2 4 6 8]]
</pre></div><div id="t1538432549000100" t="2018-10-01 22:22:29 schmee I have a vague recollection that I’ve asked this question before, and that the answer was no  😄"><a href="#t1538432549000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:22:29</span>               schmee </span><span>I have a vague recollection that I’ve asked this question before, and that the answer was no </span><b>😄</b></div><div id="t1538433415000100" t="2018-10-01 22:36:55 nathanmarz @schmee yea, there&apos;s no way to do that"><a href="#t1538433415000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:36:55</span>           nathanmarz </span><span>@schmee yea, there&apos;s no way to do that</span></div><div id="t1538433456000100" t="2018-10-01 22:37:36 nathanmarz besides doing  (multi-path (subselect ...) (subselect ...)) , but that&apos;s no more efficient than just doing two  select &apos;s"><a href="#t1538433456000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:37:36</span>           nathanmarz </span><span>besides doing </span><code>(multi-path (subselect ...) (subselect ...))</code><span>, but that&apos;s no more efficient than just doing two </span><code>select</code><span>&apos;s</span></div><div id="t1538433983000200" t="2018-10-01 22:46:23 idiomancy hmm. can anyone think of a way to say &quot;every element after the first element&quot; without knowing the length of the sequence in advance?  like a  rest  or  drop 1  navigator?"><a href="#t1538433983000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:46:23</span>            idiomancy </span><span>hmm. can anyone think of a way to say &quot;every element after the first element&quot; without knowing the length of the sequence in advance?  like a </span><code>rest</code><span> or </span><code>drop 1</code><span> navigator?</span></div><div id="t1538434128000100" t="2018-10-01 22:48:48 idiomancy hmm, maybe something with  not-selected"><a href="#t1538434128000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:48:48</span>            idiomancy </span><span>hmm, maybe something with </span><code>not-selected</code></div><div id="t1538434632000100" t="2018-10-01 22:57:12 nathanmarz @idiomancy you can do that with  srange-dynamic  or  INDEXED-VALS"><a href="#t1538434632000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:57:12</span>           nathanmarz </span><span>@idiomancy you can do that with </span><code>srange-dynamic</code><span> or </span><code>INDEXED-VALS</code></div><div id="t1538434657000100" t="2018-10-01 22:57:37 idiomancy gotcha, yeah that makes sense"><a href="#t1538434657000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:57:37</span>            idiomancy </span><span>gotcha, yeah that makes sense</span></div><div id="t1538434782000100" t="2018-10-01 22:59:42 idiomancy so something like  (def REST [(spr/srange-dynamic #(do 1) #(count %)) spr/ALL])"><a href="#t1538434782000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">22:59:42</span>            idiomancy </span><span>so something like </span><code>(def REST [(spr/srange-dynamic #(do 1) #(count %)) spr/ALL])</code></div><div id="t1538436473000100" t="2018-10-01 23:27:53 nathanmarz @idiomancy yes"><a href="#t1538436473000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:27:53</span>           nathanmarz </span><span>@idiomancy yes</span></div><div id="t1538436517000100" t="2018-10-01 23:28:37 nathanmarz actually  (def REST (path (srange-dynamic #(do 1) count) ALL))  is better"><a href="#t1538436517000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:28:37</span>           nathanmarz </span><span>actually </span><code>(def REST (path (srange-dynamic #(do 1) count) ALL))</code><span> is better</span></div><div id="t1538436556000200" t="2018-10-01 23:29:16 nathanmarz more efficient to use when constructing paths dynamically"><a href="#t1538436556000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:29:16</span>           nathanmarz </span><span>more efficient to use when constructing paths dynamically</span></div><div id="t1538436605000100" t="2018-10-01 23:30:05 idiomancy huh, interesting!  Thanks for the tip!  So, what do you mean by &quot;dynamically&quot; here?  Is there some way to construct them at compile time instead?"><a href="#t1538436605000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:30:05</span>            idiomancy </span><span>huh, interesting!  Thanks for the tip!  So, what do you mean by &quot;dynamically&quot; here?  Is there some way to construct them at compile time instead?</span></div><div id="t1538436729000100" t="2018-10-01 23:32:09 idiomancy nvm, referring to the documentation now"><a href="#t1538436729000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:32:09</span>            idiomancy </span><span>nvm, referring to the documentation now</span></div><div id="t1538436737000100" t="2018-10-01 23:32:17 idiomancy again, thanks!"><a href="#t1538436737000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-01</span> <span class="t" onclick="H(this)">23:32:17</span>            idiomancy </span><span>again, thanks!</span></div><div id="t1538823480000100" t="2018-10-06 10:58:00 kingcode I am trying to set values at different indexes within a flat vector in once call, e.g. [0 0 0 0] =&gt; [0 1 0 3]. I tried
 (setval [(nthpath 1)(nthpath 3)] [1 3] [0 0 0 0]) 
but got a runtime exc….What should I use instead?
Thanks in advance.."><a href="#t1538823480000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">10:58:00</span>             kingcode </span><span>I am trying to set values at different indexes within a flat vector in once call, e.g. [0 0 0 0] =&gt; [0 1 0 3]. I tried
</span><code>(setval [(nthpath 1)(nthpath 3)] [1 3] [0 0 0 0])</code><span>
but got a runtime exc….What should I use instead?
Thanks in advance..</span></div><div id="t1538829743000100" t="2018-10-06 12:42:23 nathanmarz @kingcode there&apos;s two approaches:
 (setval (subselect (multi-path 1 3)) [1 3] [0 0 0 0])
 
or
 (multi-transform
  (multi-path
    [1 (terminal-val 1)]
    [3 (terminal-val 3)])
  [0 0 0 0])
"><a href="#t1538829743000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">12:42:23</span>           nathanmarz </span><span>@kingcode there&apos;s two approaches:
</span><pre>(setval (subselect (multi-path 1 3)) [1 3] [0 0 0 0])
</pre><span>
or
</span><pre>(multi-transform
  (multi-path
    [1 (terminal-val 1)]
    [3 (terminal-val 3)])
  [0 0 0 0])
</pre></div><div id="t1538829743000100" t="2018-10-06 12:42:23 nathanmarz @kingcode there&apos;s two approaches:
 (setval (subselect (multi-path 1 3)) [1 3] [0 0 0 0])
 
or
 (multi-transform
  (multi-path
    [1 (terminal-val 1)]
    [3 (terminal-val 3)])
  [0 0 0 0])
"><a href="#t1538829743000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">12:42:23</span>           nathanmarz </span><span>@kingcode there&apos;s two approaches:
</span><pre>(setval (subselect (multi-path 1 3)) [1 3] [0 0 0 0])
</pre><span>
or
</span><pre>(multi-transform
  (multi-path
    [1 (terminal-val 1)]
    [3 (terminal-val 3)])
  [0 0 0 0])
</pre></div><div id="t1539014607000100" t="2018-10-08 16:03:27 manas_marthi Hi Nathan, if I have a vector of vectors with index &amp; new-values,or a vector of maps with index &amp; new-value pairs, then how do I rewrite the above. please advise.. thank you"><a href="#t1539014607000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-08</span> <span class="t" onclick="H(this)">16:03:27</span>              manas_marthi </span><span>Hi Nathan, if I have a vector of vectors with index &amp; new-values,or a vector of maps with index &amp; new-value pairs, then how do I rewrite the above. please advise.. thank you</span></div><div id="t1539025991000100" t="2018-10-08 19:13:11 nathanmarz do you have an example input/output of what you&apos;re trying to do?"><a href="#t1539025991000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-08</span> <span class="t" onclick="H(this)">19:13:11</span>                nathanmarz </span><span>do you have an example input/output of what you&apos;re trying to do?</span></div><div id="t1539089080000100" t="2018-10-09 12:44:40 manas_marthi I am thinking of this data
 input vec: [:a  :b  :c ... :m ... :z]

A map of indices and new values
{
 2 :c2
 12 :m2
 25 :z2
}
Or a map of old value new value pairs
{
 :c :c2
 :m :m2
 :z :z2
}

output vec: [:a  :b  :c2 ... :m2 ... :z2] "><a href="#t1539089080000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-09</span> <span class="t" onclick="H(this)">12:44:40</span>              manas_marthi </span><span>I am thinking of this data
</span><pre>input vec: [:a  :b  :c ... :m ... :z]

A map of indices and new values
{
 2 :c2
 12 :m2
 25 :z2
}
Or a map of old value new value pairs
{
 :c :c2
 :m :m2
 :z :z2
}

output vec: [:a  :b  :c2 ... :m2 ... :z2] </pre></div><div id="t1539090336000100" t="2018-10-09 13:05:36 manas_marthi Essentially how to deal with the scenario when I have a lot of values to be replaced and not just a handful of indices that can be hardcoded in the multipath selector expression.."><a href="#t1539090336000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-09</span> <span class="t" onclick="H(this)">13:05:36</span>              manas_marthi </span><span>Essentially how to deal with the scenario when I have a lot of values to be replaced and not just a handful of indices that can be hardcoded in the multipath selector expression..</span></div><div id="t1539101201000100" t="2018-10-09 16:06:41 nathanmarz for the latter you can do  (transform [ALL #(contains? replacements %)] replacements data)"><a href="#t1539101201000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-09</span> <span class="t" onclick="H(this)">16:06:41</span>                nathanmarz </span><span>for the latter you can do </span><code>(transform [ALL #(contains? replacements %)] replacements data)</code></div><div id="t1539101223000100" t="2018-10-09 16:07:03 nathanmarz for the first I would just do that with a  reduce"><a href="#t1539101223000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-09</span> <span class="t" onclick="H(this)">16:07:03</span>                nathanmarz </span><span>for the first I would just do that with a </span><code>reduce</code></div><div id="t1539167572000100" t="2018-10-10 10:32:52 manas_marthi Noted thank you"><a href="#t1539167572000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-10</span> <span class="t" onclick="H(this)">10:32:52</span>              manas_marthi </span><span>Noted thank you</span></div><div id="t1538829762000100" t="2018-10-06 12:42:42 nathanmarz the second is more efficient"><a href="#t1538829762000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">12:42:42</span>           nathanmarz </span><span>the second is more efficient</span></div><div id="t1538829768000100" t="2018-10-06 12:42:48 kingcode Thank you @nathanmarz!"><a href="#t1538829768000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">12:42:48</span>             kingcode </span><span>Thank you @nathanmarz!</span></div><div id="t1538829799000100" t="2018-10-06 12:43:19 kingcode Looking forward to learn and use more of this great library:)"><a href="#t1538829799000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-06</span> <span class="t" onclick="H(this)">12:43:19</span>             kingcode </span><span>Looking forward to learn and use more of this great library:)</span></div><div id="t1539007626000100" t="2018-10-08 14:07:06 darwin Hi, I&apos;m probably being bitten by  https://github.com/nathanmarz/specter/commit/e7abb2b5384b0b64d871fb347be7c34a15473eb2 
any ideas how to rewrite this to work around the issue?
 https://github.com/binaryage/dirac/blob/master/src/implant/dirac/implant/automation/reps.cljs#L46-L51"><a href="#t1539007626000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-08</span> <span class="t" onclick="H(this)">14:07:06</span>               darwin </span><span>Hi, I&apos;m probably being bitten by </span><a href="https://github.com/nathanmarz/specter/commit/e7abb2b5384b0b64d871fb347be7c34a15473eb2" target="_blank">https://github.com/nathanmarz/specter/commit/e7abb2b5384b0b64d871fb347be7c34a15473eb2</a><span>
any ideas how to rewrite this to work around the issue?
</span><a href="https://github.com/binaryage/dirac/blob/master/src/implant/dirac/implant/automation/reps.cljs#L46-L51" target="_blank">https://github.com/binaryage/dirac/blob/master/src/implant/dirac/implant/automation/reps.cljs#L46-L51</a></div><div id="t1539008029000100" t="2018-10-08 14:13:49 darwin confirmed, running with specter from master resolved the issue"><a href="#t1539008029000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-08</span> <span class="t" onclick="H(this)">14:13:49</span>               darwin </span><span>confirmed, running with specter from master resolved the issue</span></div><div id="t1539616221000100" t="2018-10-15 15:10:21 Logan Powell How might I pull the key/value pairs out of a map like this?"><a href="#t1539616221000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-15</span> <span class="t" onclick="H(this)">15:10:21</span>         Logan Powell </span><span>How might I pull the key/value pairs out of a map like this?</span></div><div id="t1539617227000100" t="2018-10-15 15:27:07 Logan Powell Is there some sort of &quot;lift&quot; functionality?"><a href="#t1539617227000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-15</span> <span class="t" onclick="H(this)">15:27:07</span>         Logan Powell </span><span>Is there some sort of &quot;lift&quot; functionality?</span></div><div id="t1539617439000100" t="2018-10-15 15:30:39 Logan Powell Figured it out!"><a href="#t1539617439000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-15</span> <span class="t" onclick="H(this)">15:30:39</span>         Logan Powell </span><span>Figured it out!</span></div><div id="t1539617702000100" t="2018-10-15 15:35:02 nathanmarz @loganpowell this is a more efficient and more concise way to express that subexpression:  (into {} (traverse [:g MAP-VALS] mix-me-in))"><a href="#t1539617702000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-15</span> <span class="t" onclick="H(this)">15:35:02</span>           nathanmarz </span><span>@loganpowell this is a more efficient and more concise way to express that subexpression: </span><code>(into {} (traverse [:g MAP-VALS] mix-me-in))</code></div><div id="t1539617780000100" t="2018-10-15 15:36:20 Logan Powell Thank you @nathanmarz  🙏  and thank you for Specter!  😍"><a href="#t1539617780000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-15</span> <span class="t" onclick="H(this)">15:36:20</span>         Logan Powell </span><span>Thank you @nathanmarz </span><b>🙏</b><span> and thank you for Specter! </span><b>😍</b></div><div id="t1539804686000100" t="2018-10-17 19:31:26 Logan Powell 👋  I&apos;m assuming this isn&apos;t the most elegant solution, but I&apos;m trying to compose multiple  specter  functions together..."><a href="#t1539804686000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">19:31:26</span>         Logan Powell </span><b>👋</b><span> I&apos;m assuming this isn&apos;t the most elegant solution, but I&apos;m trying to compose multiple </span><code>specter</code><span> functions together...</span></div><div id="t1539804733000100" t="2018-10-17 19:32:13 Logan Powell The reason for all the map manipulation is due to how  go  contexts rearrange  PersistentArrayMap"><a href="#t1539804733000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">19:32:13</span>         Logan Powell </span><span>The reason for all the map manipulation is due to how </span><code>go</code><span> contexts rearrange </span><code>PersistentArrayMap</code></div><div id="t1539804772000100" t="2018-10-17 19:32:52 Logan Powell btw, this works, but I was wondering if I&apos;m &quot;doing it wrong&quot;"><a href="#t1539804772000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">19:32:52</span>         Logan Powell </span><span>btw, this works, but I was wondering if I&apos;m &quot;doing it wrong&quot;</span></div><div id="t1539814383000100" t="2018-10-17 22:13:03 nathanmarz @loganpowell would be more elegant with  multi-transform"><a href="#t1539814383000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">22:13:03</span>           nathanmarz </span><span>@loganpowell would be more elegant with </span><code>multi-transform</code></div><div id="t1539814490000100" t="2018-10-17 22:14:50 nathanmarz though I don&apos;t understand the point of the  #(into {} %)  part"><a href="#t1539814490000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">22:14:50</span>           nathanmarz </span><span>though I don&apos;t understand the point of the </span><code>#(into {} %)</code><span> part</span></div><div id="t1539814506000100" t="2018-10-17 22:15:06 nathanmarz why use linked maps in the first place if you&apos;re just going to convert to a regular map?"><a href="#t1539814506000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">22:15:06</span>           nathanmarz </span><span>why use linked maps in the first place if you&apos;re just going to convert to a regular map?</span></div><div id="t1539814831000100" t="2018-10-17 22:20:31 Logan Powell Thank you! I&apos;ll look into mult-transform. The map manipulation is a necessary evil in the black-magic of a go block"><a href="#t1539814831000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-17</span> <span class="t" onclick="H(this)">22:20:31</span>         Logan Powell </span><span>Thank you! I&apos;ll look into mult-transform. The map manipulation is a necessary evil in the black-magic of a go block</span></div><div id="t1540556209000900" t="2018-10-26 12:16:49 roklenarcic here&apos;s a simple transformation: I want to delete all map entries where value is empty string"><a href="#t1540556209000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-26</span> <span class="t" onclick="H(this)">12:16:49</span>          roklenarcic </span><span>here&apos;s a simple transformation: I want to delete all map entries where value is empty string</span></div><div id="t1540556233001500" t="2018-10-26 12:17:13 roklenarcic tried with compact and transform function that transforms &quot;&quot; values to nil"><a href="#t1540556233001500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-26</span> <span class="t" onclick="H(this)">12:17:13</span>          roklenarcic </span><span>tried with compact and transform function that transforms &quot;&quot; values to nil</span></div><div id="t1540556239001700" t="2018-10-26 12:17:19 roklenarcic but that doesn&apos;t remove the key"><a href="#t1540556239001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-26</span> <span class="t" onclick="H(this)">12:17:19</span>          roklenarcic </span><span>but that doesn&apos;t remove the key</span></div><div id="t1540556427002200" t="2018-10-26 12:20:27 roklenarcic nvm figured it out:  (setval [MAP-VALS (pred= &quot;&quot;)] NONE {:a &quot;&quot; :b 5})"><a href="#t1540556427002200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-26</span> <span class="t" onclick="H(this)">12:20:27</span>          roklenarcic </span><span>nvm figured it out: </span><code>(setval [MAP-VALS (pred= &quot;&quot;)] NONE {:a &quot;&quot; :b 5})</code></div><div id="t1540633712003300" t="2018-10-27 09:48:32 fmn What is the efficient way to do reduction after some transformation?

Currently I&apos;m doing it like this:  (reduce merge {} (traverse (view to-map-fn) xs))"><a href="#t1540633712003300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-27</span> <span class="t" onclick="H(this)">09:48:32</span>                  fmn </span><span>What is the efficient way to do reduction after some transformation?

Currently I&apos;m doing it like this: </span><code>(reduce merge {} (traverse (view to-map-fn) xs))</code></div><div id="t1540646531003900" t="2018-10-27 13:22:11 nathanmarz @funyako.funyao156  traverse  is efficient way to do reduction of a selection of subvalues"><a href="#t1540646531003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-27</span> <span class="t" onclick="H(this)">13:22:11</span>           nathanmarz </span><span>@funyako.funyao156 </span><code>traverse</code><span> is efficient way to do reduction of a selection of subvalues</span></div><div id="t1540646567004600" t="2018-10-27 13:22:47 nathanmarz that particular snippet doesn&apos;t really do anything, it&apos;s the same as  (merge {} (to-map-fn xs))"><a href="#t1540646567004600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-27</span> <span class="t" onclick="H(this)">13:22:47</span>           nathanmarz </span><span>that particular snippet doesn&apos;t really do anything, it&apos;s the same as </span><code>(merge {} (to-map-fn xs))</code></div><div id="t1540653737006400" t="2018-10-27 15:22:17 fmn @nathanmarz Thank you!"><a href="#t1540653737006400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-27</span> <span class="t" onclick="H(this)">15:22:17</span>                  fmn </span><span>@nathanmarz Thank you!</span></div><div id="t1540884496007400" t="2018-10-30 07:28:16 schmee is there a better way to construct this path? maybe something involving  recursive-path ?
 (defn tag-path [&amp; tag-names]
  (apply
    concat
    (interpose
      [ALL]
      (map
        #(vector (selected? :tag (pred= %)) :value)
        tag-names))))
"><a href="#t1540884496007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">07:28:16</span>               schmee </span><span>is there a better way to construct this path? maybe something involving </span><code>recursive-path</code><span>?
</span><pre>(defn tag-path [&amp; tag-names]
  (apply
    concat
    (interpose
      [ALL]
      (map
        #(vector (selected? :tag (pred= %)) :value)
        tag-names))))
</pre></div><div id="t1540884611008400" t="2018-10-30 07:30:11 schmee (tag-path &quot;EA&quot; &quot;C1&quot;) =&gt; [(selected? :tag (pred= &quot;EA&quot;)) :value ALL (selected? :tag (pred= &quot;C1&quot;)) :value]
"><a href="#t1540884611008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">07:30:11</span>               schmee </span><pre>(tag-path &quot;EA&quot; &quot;C1&quot;) =&gt; [(selected? :tag (pred= &quot;EA&quot;)) :value ALL (selected? :tag (pred= &quot;C1&quot;)) :value]
</pre></div><div id="t1540904148009300" t="2018-10-30 12:55:48 nathanmarz @schmee dynamic navs will dramatically increase performance when  tag-path  is called with dynamic params (eg. a local variable)"><a href="#t1540904148009300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:55:48</span>           nathanmarz </span><span>@schmee dynamic navs will dramatically increase performance when </span><code>tag-path</code><span> is called with dynamic params (eg. a local variable)</span></div><div id="t1540904152009500" t="2018-10-30 12:55:52 nathanmarz (defdynamicnav tag-path [&amp; tag-names]
  (let [late-pred= (late-resolved-fn pred=)]
    (apply
      concat
      (interpose
        [ALL]
        (map
          #(vector (selected? :tag (late-pred= %)) :value)
          tag-names)
          ))))
"><a href="#t1540904152009500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:55:52</span>           nathanmarz </span><pre>(defdynamicnav tag-path [&amp; tag-names]
  (let [late-pred= (late-resolved-fn pred=)]
    (apply
      concat
      (interpose
        [ALL]
        (map
          #(vector (selected? :tag (late-pred= %)) :value)
          tag-names)
          ))))
</pre></div><div id="t1540904211009800" t="2018-10-30 12:56:51 nathanmarz things like this are where you get huge speedup:
 (defn f [a data]
  (select (tag-path a &quot;b&quot;) data)
  )
"><a href="#t1540904211009800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:56:51</span>           nathanmarz </span><span>things like this are where you get huge speedup:
</span><pre>(defn f [a data]
  (select (tag-path a &quot;b&quot;) data)
  )
</pre></div><div id="t1540904295010300" t="2018-10-30 12:58:15 schmee nice! I haven’t delved into dynamic navs yet, I’ll check them out!"><a href="#t1540904295010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:58:15</span>               schmee </span><span>nice! I haven’t delved into dynamic navs yet, I’ll check them out!</span></div><div id="t1540904311010900" t="2018-10-30 12:58:31 schmee but would you say that is an OK way to write the  tag-path  function?"><a href="#t1540904311010900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:58:31</span>               schmee </span><span>but would you say that is an OK way to write the </span><code>tag-path</code><span> function?</span></div><div id="t1540904332011200" t="2018-10-30 12:58:52 schmee with all the interpose and apply and whatnot…"><a href="#t1540904332011200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:58:52</span>               schmee </span><span>with all the interpose and apply and whatnot…</span></div><div id="t1540904339011300" t="2018-10-30 12:58:59 nathanmarz not very much documentation on them, just this  https://github.com/nathanmarz/specter/wiki/Specter%27s-inline-caching-implementation"><a href="#t1540904339011300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:58:59</span>           nathanmarz </span><span>not very much documentation on them, just this </span><a href="https://github.com/nathanmarz/specter/wiki/Specter%27s-inline-caching-implementation" target="_blank">https://github.com/nathanmarz/specter/wiki/Specter%27s-inline-caching-implementation</a></div><div id="t1540904350011500" t="2018-10-30 12:59:10 nathanmarz yes, it&apos;s fine"><a href="#t1540904350011500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:59:10</span>           nathanmarz </span><span>yes, it&apos;s fine</span></div><div id="t1540904363011900" t="2018-10-30 12:59:23 nathanmarz all that logic only ever executes once per callsite"><a href="#t1540904363011900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:59:23</span>           nathanmarz </span><span>all that logic only ever executes once per callsite</span></div><div id="t1540904366012100" t="2018-10-30 12:59:26 nathanmarz because of dynamicnav"><a href="#t1540904366012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:59:26</span>           nathanmarz </span><span>because of dynamicnav</span></div><div id="t1540904387012400" t="2018-10-30 12:59:47 schmee excellent, thanks for the help as always"><a href="#t1540904387012400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">12:59:47</span>               schmee </span><span>excellent, thanks for the help as always</span></div><div id="t1540904449012800" t="2018-10-30 13:00:49 nathanmarz you&apos;ve now delved into the most advanced part of specter ;)"><a href="#t1540904449012800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">13:00:49</span>           nathanmarz </span><span>you&apos;ve now delved into the most advanced part of specter ;)</span></div><div id="t1540904459013100" t="2018-10-30 13:00:59 nathanmarz let me know if you have questions"><a href="#t1540904459013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">13:00:59</span>           nathanmarz </span><span>let me know if you have questions</span></div><div id="t1540904478013300" t="2018-10-30 13:01:18 schmee will do!"><a href="#t1540904478013300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">13:01:18</span>               schmee </span><span>will do!</span></div><div id="t1540935474013900" t="2018-10-30 21:37:54 schmee is there any way to get access to collected values in  view ?"><a href="#t1540935474013900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">21:37:54</span>               schmee </span><span>is there any way to get access to collected values in </span><code>view</code><span>?</span></div><div id="t1540936939014300" t="2018-10-30 22:02:19 nathanmarz @schmee no, but it&apos;s easy to make a custom navigator with that functionality"><a href="#t1540936939014300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">22:02:19</span>           nathanmarz </span><span>@schmee no, but it&apos;s easy to make a custom navigator with that functionality</span></div><div id="t1540936943014500" t="2018-10-30 22:02:23 nathanmarz see  defrichnav"><a href="#t1540936943014500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">22:02:23</span>           nathanmarz </span><span>see </span><code>defrichnav</code></div><div id="t1540939009014800" t="2018-10-30 22:36:49 schmee 👍"><a href="#t1540939009014800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-30</span> <span class="t" onclick="H(this)">22:36:49</span>               schmee </span><b>👍</b></div><div id="t1540995537016500" t="2018-10-31 14:18:57 npetryk Hey @nathanmarz, in a few of your blog posts you mention using specter for some pretty interesting graph stuff. I was interested in making specialized navigators for  https://jsonapi.org/  and thought some examples of defining navigators for &quot;specialized&quot; domains might be helpful. Do you have any more information / examples about your graph implementation?"><a href="#t1540995537016500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:18:57</span>              npetryk </span><span>Hey @nathanmarz, in a few of your blog posts you mention using specter for some pretty interesting graph stuff. I was interested in making specialized navigators for </span><a href="https://jsonapi.org/" target="_blank">https://jsonapi.org/</a><span> and thought some examples of defining navigators for &quot;specialized&quot; domains might be helpful. Do you have any more information / examples about your graph implementation?</span></div><div id="t1540995613017700" t="2018-10-31 14:20:13 npetryk IDK if ur familiar with the spec but the most kludgey thing it requires me to do is to hold onto the top level document, or some kind of id -&gt; entity index, while I&apos;m navigating through the tree structure w/ specter"><a href="#t1540995613017700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:20:13</span>              npetryk </span><span>IDK if ur familiar with the spec but the most kludgey thing it requires me to do is to hold onto the top level document, or some kind of id -&gt; entity index, while I&apos;m navigating through the tree structure w/ specter</span></div><div id="t1540995707018700" t="2018-10-31 14:21:47 npetryk I&apos;m handling that by attaching metadata onto the things I&apos;m navigating into, but like I said, its a little kludgy"><a href="#t1540995707018700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:21:47</span>              npetryk </span><span>I&apos;m handling that by attaching metadata onto the things I&apos;m navigating into, but like I said, its a little kludgy</span></div><div id="t1540996495019100" t="2018-10-31 14:34:55 nathanmarz @npetryk my graph navigators are specifically for dag&apos;s"><a href="#t1540996495019100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:34:55</span>           nathanmarz </span><span>@npetryk my graph navigators are specifically for dag&apos;s</span></div><div id="t1540996511019500" t="2018-10-31 14:35:11 nathanmarz TOPSORT  is like  ALL  but visits nodes in topological order"><a href="#t1540996511019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:35:11</span>           nathanmarz </span><code>TOPSORT</code><span> is like </span><code>ALL</code><span> but visits nodes in topological order</span></div><div id="t1541000519025200" t="2018-10-31 15:41:59 jsa-aerial Wow. This looks to be exactly what I will be needing in rewriting a DAG transformer! Specter is awesome!  💯"><a href="#t1541000519025200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">15:41:59</span>                jsa-aerial </span><span>Wow. This looks to be exactly what I will be needing in rewriting a DAG transformer! Specter is awesome! </span><b>💯</b></div><div id="t1540996546020000" t="2018-10-31 14:35:46 nathanmarz REVERSE-TOPSORT  is the same but opposite order"><a href="#t1540996546020000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:35:46</span>           nathanmarz </span><code>REVERSE-TOPSORT</code><span> is the same but opposite order</span></div><div id="t1540996559020300" t="2018-10-31 14:35:59 nathanmarz CHILDREN  goes from node to all children"><a href="#t1540996559020300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:35:59</span>           nathanmarz </span><code>CHILDREN</code><span> goes from node to all children</span></div><div id="t1540996567020600" t="2018-10-31 14:36:07 nathanmarz likewise  PARENTS ,  DESCENDANTS"><a href="#t1540996567020600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:36:07</span>           nathanmarz </span><span>likewise </span><code>PARENTS</code><span>, </span><code>DESCENDANTS</code></div><div id="t1540996591021000" t="2018-10-31 14:36:31 nathanmarz NODE  goes from a pointer to a node (which the aforementioned ones navigate you to) to the value for that node"><a href="#t1540996591021000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:36:31</span>           nathanmarz </span><code>NODE</code><span> goes from a pointer to a node (which the aforementioned ones navigate you to) to the value for that node</span></div><div id="t1540996616021300" t="2018-10-31 14:36:56 nathanmarz node-nav  navigates to a specific node"><a href="#t1540996616021300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:36:56</span>           nathanmarz </span><code>node-nav</code><span> navigates to a specific node</span></div><div id="t1540996678022100" t="2018-10-31 14:37:58 nathanmarz and then a couple navigators for navigating to sub-dag&apos;s, with metadata and ids on nodes used to determine how to attach the transformed sub-dag into the parent dag"><a href="#t1540996678022100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:37:58</span>           nathanmarz </span><span>and then a couple navigators for navigating to sub-dag&apos;s, with metadata and ids on nodes used to determine how to attach the transformed sub-dag into the parent dag</span></div><div id="t1540996729022500" t="2018-10-31 14:38:49 nathanmarz there&apos;s a few more but those are the main ones"><a href="#t1540996729022500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:38:49</span>           nathanmarz </span><span>there&apos;s a few more but those are the main ones</span></div><div id="t1540996830023100" t="2018-10-31 14:40:30 nathanmarz for navigating a tree you probably don&apos;t need custom navigator implementations, just a few composite navigators using  recursive-path"><a href="#t1540996830023100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:40:30</span>           nathanmarz </span><span>for navigating a tree you probably don&apos;t need custom navigator implementations, just a few composite navigators using </span><code>recursive-path</code></div><div id="t1540996835023300" t="2018-10-31 14:40:35 nathanmarz if you have some examples I can walk you through it"><a href="#t1540996835023300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">14:40:35</span>           nathanmarz </span><span>if you have some examples I can walk you through it</span></div><div id="t1540998612025000" t="2018-10-31 15:10:12 npetryk Thanks!  https://github.com/nathanmarz/specter/issues/241  also gave me some insight. It looks like that instead of passing  [graph node-id]  around I can just pass my tree &quot;context&quot; as metadata on individual nodes. The bit about reducing in the transform is also helpful for when I need to make updates to my tree"><a href="#t1540998612025000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-31</span> <span class="t" onclick="H(this)">15:10:12</span>              npetryk </span><span>Thanks! </span><a href="https://github.com/nathanmarz/specter/issues/241" target="_blank">https://github.com/nathanmarz/specter/issues/241</a><span> also gave me some insight. It looks like that instead of passing </span><code>[graph node-id]</code><span> around I can just pass my tree &quot;context&quot; as metadata on individual nodes. The bit about reducing in the transform is also helpful for when I need to make updates to my tree</span></div><div id="t1541062823025900" t="2018-11-01 09:00:23 miikka FYI, I&apos;m getting &quot;Maximum call stack exceeded&quot; from specter&apos;s Subvec coerce-path implementation"><a href="#t1541062823025900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">09:00:23</span>               miikka </span><span>FYI, I&apos;m getting &quot;Maximum call stack exceeded&quot; from specter&apos;s Subvec coerce-path implementation</span></div><div id="t1541062862026200" t="2018-11-01 09:01:02 miikka Hmm, looking at the changelog, maybe I should try 1.1.2-SNAPSHOT"><a href="#t1541062862026200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">09:01:02</span>               miikka </span><span>Hmm, looking at the changelog, maybe I should try 1.1.2-SNAPSHOT</span></div><div id="t1541063125026400" t="2018-11-01 09:05:25 miikka Yeah that helps."><a href="#t1541063125026400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">09:05:25</span>               miikka </span><span>Yeah that helps.</span></div><div id="t1541063679027900" t="2018-11-01 09:14:39 miikka What&apos;s missing from the above is that the problem happened with latest ClojureScript master but not with the latest release (1.10.339)."><a href="#t1541063679027900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">09:14:39</span>               miikka </span><span>What&apos;s missing from the above is that the problem happened with latest ClojureScript master but not with the latest release (1.10.339).</span></div><div id="t1541063828029800" t="2018-11-01 09:17:08 miikka @nathanmarz Could you do a release soon with the subvec fix? So that I can easily update to the next ClojureScript release once it&apos;s out?  😎"><a href="#t1541063828029800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">09:17:08</span>               miikka </span><span>@nathanmarz Could you do a release soon with the subvec fix? So that I can easily update to the next ClojureScript release once it&apos;s out? </span><b>😎</b></div><div id="t1541122915030400" t="2018-11-02 01:41:55 nathanmarz ok, released 1.1.2  https://clojars.org/com.rpl/specter"><a href="#t1541122915030400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-02</span> <span class="t" onclick="H(this)">01:41:55</span>           nathanmarz </span><span>ok, released 1.1.2 </span><a href="https://clojars.org/com.rpl/specter" target="_blank">https://clojars.org/com.rpl/specter</a></div><div id="t1541142812031000" t="2018-11-02 07:13:32 miikka thanks!"><a href="#t1541142812031000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-02</span> <span class="t" onclick="H(this)">07:13:32</span>               miikka </span><span>thanks!</span></div><div id="t1541577450032800" t="2018-11-07 07:57:30 pepe Hello. With latest shadow-cljs and clojurescript I am getting theese warnings:
 ------ WARNING #1 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1275:19
--------------------------------------------------------------------------------
1272 |           ns (namespace structure)]
1273 |       (cond (keyword? structure) (keyword ns new-name)
1274 |             (symbol? structure) (symbol ns new-name)
1275 |             :else (i/throw-illegal &quot;NAME can only be used on symbols or keywords - &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1276 |             ))))
1277 | 
1278 | (defnav ^{:doc &quot;Navigates to the namespace portion of the keyword or symbol&quot;}
1279 |   NAMESPACE
--------------------------------------------------------------------------------

------ WARNING #2 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1288:19
--------------------------------------------------------------------------------
1285 |           new-ns (next-fn (namespace structure))]
1286 |       (cond (keyword? structure) (keyword new-ns name)
1287 |             (symbol? structure) (symbol new-ns name)
1288 |             :else (i/throw-illegal &quot;NAMESPACE can only be used on symbols or keywords - &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1289 |             ))))
1290 | 
1291 | (defdynamicnav
1292 |   ^{:doc &quot;Adds the result of running select with the given path on the
--------------------------------------------------------------------------------
"><a href="#t1541577450032800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">07:57:30</span>                 pepe </span><span>Hello. With latest shadow-cljs and clojurescript I am getting theese warnings:
</span><pre>------ WARNING #1 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1275:19
--------------------------------------------------------------------------------
1272 |           ns (namespace structure)]
1273 |       (cond (keyword? structure) (keyword ns new-name)
1274 |             (symbol? structure) (symbol ns new-name)
1275 |             :else (i/throw-illegal &quot;NAME can only be used on symbols or keywords - &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1276 |             ))))
1277 | 
1278 | (defnav ^{:doc &quot;Navigates to the namespace portion of the keyword or symbol&quot;}
1279 |   NAMESPACE
--------------------------------------------------------------------------------

------ WARNING #2 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1288:19
--------------------------------------------------------------------------------
1285 |           new-ns (next-fn (namespace structure))]
1286 |       (cond (keyword? structure) (keyword new-ns name)
1287 |             (symbol? structure) (symbol new-ns name)
1288 |             :else (i/throw-illegal &quot;NAMESPACE can only be used on symbols or keywords - &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1289 |             ))))
1290 | 
1291 | (defdynamicnav
1292 |   ^{:doc &quot;Adds the result of running select with the given path on the
--------------------------------------------------------------------------------
</pre></div><div id="t1541577510034000" t="2018-11-07 07:58:30 pepe I had some warnings about  js  in my project, so I think it is connected to the new type interence in latest clojurescript"><a href="#t1541577510034000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">07:58:30</span>                 pepe </span><span>I had some warnings about </span><code>js</code><span> in my project, so I think it is connected to the new type interence in latest clojurescript</span></div><div id="t1541597242034400" t="2018-11-07 13:27:22 nathanmarz @pepe the cljs  throw-illegal  is:
 (defn throw-illegal [&amp; args]
     (throw (js/Error. (apply str args)))))
"><a href="#t1541597242034400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">13:27:22</span>           nathanmarz </span><span>@pepe the cljs </span><code>throw-illegal</code><span> is:
</span><pre>(defn throw-illegal [&amp; args]
     (throw (js/Error. (apply str args)))))
</pre></div><div id="t1541597262034800" t="2018-11-07 13:27:42 nathanmarz there&apos;s no var named  java  in the specter source"><a href="#t1541597262034800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">13:27:42</span>           nathanmarz </span><span>there&apos;s no var named </span><code>java</code><span> in the specter source</span></div><div id="t1541597264035000" t="2018-11-07 13:27:44 nathanmarz sounds like a cljs issue"><a href="#t1541597264035000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">13:27:44</span>           nathanmarz </span><span>sounds like a cljs issue</span></div><div id="t1541597750036100" t="2018-11-07 13:35:50 pepe I was looking into the code also, and have not found anything. Thank you! I will try to investigate it."><a href="#t1541597750036100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-07</span> <span class="t" onclick="H(this)">13:35:50</span>                 pepe </span><span>I was looking into the code also, and have not found anything. Thank you! I will try to investigate it.</span></div><div id="t1541689207037800" t="2018-11-08 15:00:07 lxsli Hi, I have this:
 (transform [ALL] (fn [[k v]] [k (transform [ALL] (fn [[k1 v1]] [k1 (resolver-key k k1)]) v)]) rs)) 

With rs like:
 {:Entry {:foo _ :bar _} ...} 

I get my result:
 {:Entry {:foo :Entry-foo :bar :Entry-bar} ...}"><a href="#t1541689207037800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-08</span> <span class="t" onclick="H(this)">15:00:07</span>                lxsli </span><span>Hi, I have this:
</span><pre>(transform [ALL] (fn [[k v]] [k (transform [ALL] (fn [[k1 v1]] [k1 (resolver-key k k1)]) v)]) rs))</pre><span>

With rs like:
</span><pre>{:Entry {:foo _ :bar _} ...}</pre><span>

I get my result:
</span><pre>{:Entry {:foo :Entry-foo :bar :Entry-bar} ...}</pre></div><div id="t1541689259038800" t="2018-11-08 15:00:59 lxsli It feels like if there was a way to use MAP-VALS but collect the key as I did so, that would be easier?"><a href="#t1541689259038800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-08</span> <span class="t" onclick="H(this)">15:00:59</span>                lxsli </span><span>It feels like if there was a way to use MAP-VALS but collect the key as I did so, that would be easier?</span></div><div id="t1541689492039300" t="2018-11-08 15:04:52 nathanmarz @lxsi you want to use value collection for this:
 (def MAP-VALS-WITH-KEY (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS-WITH-KEY MAP-VALS-WITH-KEY] (fn [k1 k2 _] (resolver-key k1 k2)) data)
"><a href="#t1541689492039300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-08</span> <span class="t" onclick="H(this)">15:04:52</span>           nathanmarz </span><span>@lxsi you want to use value collection for this:
</span><pre>(def MAP-VALS-WITH-KEY (path ALL (collect-one FIRST) LAST))
(transform [MAP-VALS-WITH-KEY MAP-VALS-WITH-KEY] (fn [k1 k2 _] (resolver-key k1 k2)) data)
</pre></div><div id="t1541689522039500" t="2018-11-08 15:05:22 lxsli Sweet, thank you!"><a href="#t1541689522039500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-08</span> <span class="t" onclick="H(this)">15:05:22</span>                lxsli </span><span>Sweet, thank you!</span></div><div id="t1541770517040900" t="2018-11-09 13:35:17 wilkerlucio @nathanmarz we can check by the output that its using the clj version, so its a fact that the JS out is using the CLJ version, macros sometimes are confusing on CLJS side, IME what works best is separate clj and cljs macros in different namespaces (both been  .clj ) and conditionally import then, this usually works with the least surprises"><a href="#t1541770517040900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">13:35:17</span>          wilkerlucio </span><span>@nathanmarz we can check by the output that its using the clj version, so its a fact that the JS out is using the CLJ version, macros sometimes are confusing on CLJS side, IME what works best is separate clj and cljs macros in different namespaces (both been </span><code>.clj</code><span>) and conditionally import then, this usually works with the least surprises</span></div><div id="t1541770548041200" t="2018-11-09 13:35:48 wilkerlucio example code in pathom doing this:  https://github.com/wilkerlucio/pathom/blob/master/src/com/wsscode/pathom/connect.cljc#L9-L12"><a href="#t1541770548041200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">13:35:48</span>          wilkerlucio </span><span>example code in pathom doing this: </span><a href="https://github.com/wilkerlucio/pathom/blob/master/src/com/wsscode/pathom/connect.cljc#L9-L12" target="_blank">https://github.com/wilkerlucio/pathom/blob/master/src/com/wsscode/pathom/connect.cljc#L9-L12</a></div><div id="t1541786583042000" t="2018-11-09 18:03:03 Logan Powell 👋  Hi everyone, can anyone tell me how to  :require  individual navigators? (e.g.,  MAP-KEYS )"><a href="#t1541786583042000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:03:03</span>         Logan Powell </span><b>👋</b><span> Hi everyone, can anyone tell me how to </span><code>:require</code><span> individual navigators? (e.g., </span><code>MAP-KEYS</code><span>)</span></div><div id="t1541786594042200" t="2018-11-09 18:03:14 Logan Powell in clojurescript"><a href="#t1541786594042200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:03:14</span>         Logan Powell </span><span>in clojurescript</span></div><div id="t1541787738043300" t="2018-11-09 18:22:18 Logan Powell It seems to work using
 (:require [com.rpl.specter   :refer [MAP-VALS MAP-KEYS]  :refer-macros [select transform traverse setval]])
 
but Intellij no likey, no big deal as long as I&apos;m not &quot;doing it wrong&quot;  ™"><a href="#t1541787738043300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:22:18</span>         Logan Powell </span><span>It seems to work using
</span><pre>(:require [com.rpl.specter   :refer [MAP-VALS MAP-KEYS]  :refer-macros [select transform traverse setval]])
</pre><span>
but Intellij no likey, no big deal as long as I&apos;m not &quot;doing it wrong&quot; </span><b>™</b></div><div id="t1541788039045300" t="2018-11-09 18:27:19 jsa-aerial Are you doing this in Clojure or ClojureScript? If the former the :refer-macros does not make sense. If the latter (cljs), then this looks correct. In Clojure you can just refer the macros in the :refer vector."><a href="#t1541788039045300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:27:19</span>           jsa-aerial </span><span>Are you doing this in Clojure or ClojureScript? If the former the :refer-macros does not make sense. If the latter (cljs), then this looks correct. In Clojure you can just refer the macros in the :refer vector.</span></div><div id="t1541788052045600" t="2018-11-09 18:27:32 Logan Powell cljs, yes"><a href="#t1541788052045600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:27:32</span>         Logan Powell </span><span>cljs, yes</span></div><div id="t1541788085046200" t="2018-11-09 18:28:05 jsa-aerial Not sure how intellij (Cursive??) works with CLJS..."><a href="#t1541788085046200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:05</span>           jsa-aerial </span><span>Not sure how intellij (Cursive??) works with CLJS...</span></div><div id="t1541788093046400" t="2018-11-09 18:28:13 Logan Powell Cursive, yes"><a href="#t1541788093046400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:13</span>         Logan Powell </span><span>Cursive, yes</span></div><div id="t1541788116047000" t="2018-11-09 18:28:36 jsa-aerial I don&apos;t use Cursive, but in emacs I do that sort of thing all the time with no problems"><a href="#t1541788116047000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:36</span>           jsa-aerial </span><span>I don&apos;t use Cursive, but in emacs I do that sort of thing all the time with no problems</span></div><div id="t1541788124047200" t="2018-11-09 18:28:44 Logan Powell sweet"><a href="#t1541788124047200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:44</span>         Logan Powell </span><span>sweet</span></div><div id="t1541788127047400" t="2018-11-09 18:28:47 Logan Powell in cljs?"><a href="#t1541788127047400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:47</span>         Logan Powell </span><span>in cljs?</span></div><div id="t1541788132047600" t="2018-11-09 18:28:52 jsa-aerial Yes, in cljs"><a href="#t1541788132047600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:52</span>           jsa-aerial </span><span>Yes, in cljs</span></div><div id="t1541788136047800" t="2018-11-09 18:28:56 Logan Powell thank you sir"><a href="#t1541788136047800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:28:56</span>         Logan Powell </span><span>thank you sir</span></div><div id="t1541788161048300" t="2018-11-09 18:29:21 jsa-aerial So, it probably is some limitation / issue with Cursive and CLJS"><a href="#t1541788161048300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:29:21</span>           jsa-aerial </span><span>So, it probably is some limitation / issue with Cursive and CLJS</span></div><div id="t1541788180048700" t="2018-11-09 18:29:40 Logan Powell yep, no worries, as long as I&apos;m not doing it incorrectly  😉"><a href="#t1541788180048700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-09</span> <span class="t" onclick="H(this)">18:29:40</span>         Logan Powell </span><span>yep, no worries, as long as I&apos;m not doing it incorrectly </span><b>😉</b></div><div id="t1542452845050600" t="2018-11-17 11:07:25 martinklepsch are there any known issues with specter and CLJS? Getting the following when running cljs.analyzer on the specter code:

 com/rpl/specter.cljc - root cause: clojure.lang.ExceptionInfo Unable to resolve var: coll? in this context at line 1449 specter/com/rpl/specter.cljc
"><a href="#t1542452845050600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">11:07:25</span>        martinklepsch </span><span>are there any known issues with specter and CLJS? Getting the following when running cljs.analyzer on the specter code:

</span><pre>com/rpl/specter.cljc - root cause: clojure.lang.ExceptionInfo Unable to resolve var: coll? in this context at line 1449 specter/com/rpl/specter.cljc
</pre></div><div id="t1542467458051100" t="2018-11-17 15:10:58 nathanmarz @martinklepsch there&apos;s currently this issue but I think it&apos;s unrelated  https://github.com/nathanmarz/specter/issues/267"><a href="#t1542467458051100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">15:10:58</span>           nathanmarz </span><span>@martinklepsch there&apos;s currently this issue but I think it&apos;s unrelated </span><a href="https://github.com/nathanmarz/specter/issues/267" target="_blank">https://github.com/nathanmarz/specter/issues/267</a></div><div id="t1542470749054600" t="2018-11-17 16:05:49 jsa-aerial @martinklepsch Is cljdoc on using cljs later than 1.10.238?  That is the version I am using and that code works just fine. I just checked and the current release is 1.10.439(!!) The one I&apos;m using is only a few months old. Seems to be changing at a crazy rate. Let me see what happens if I try the newest version."><a href="#t1542470749054600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:05:49</span>           jsa-aerial </span><span>@martinklepsch Is cljdoc on using cljs later than 1.10.238?  That is the version I am using and that code works just fine. I just checked and the current release is 1.10.439(!!) The one I&apos;m using is only a few months old. Seems to be changing at a crazy rate. Let me see what happens if I try the newest version.</span></div><div id="t1542471717057500" t="2018-11-17 16:21:57 jsa-aerial @nathanmarz @martinklepsch OK, somewhere along the line in those 201 new releases something has changed and causes regressions. Using the latest cljs the code compiles ok (no errors / warning and signals successful completion) but fails immediately when trying to run it with this:"><a href="#t1542471717057500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:21:57</span>           jsa-aerial </span><span>@nathanmarz @martinklepsch OK, somewhere along the line in those 201 new releases something has changed and causes regressions. Using the latest cljs the code compiles ok (no errors / warning and signals successful completion) but fails immediately when trying to run it with this:</span></div><div id="t1542471732057800" t="2018-11-17 16:22:12 jsa-aerial #object[RangeError RangeError: Maximum call stack size exceeded]
   cljs.core/build-subvec (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5908:25)
   cljs$core$IWithMeta$_with_meta$arity$2 (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5793:28)
   cljs.core/-with-meta (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:686:21)
   cljs.core/with-meta (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:2059:8)
   cljs.core/vec (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5662:6)
   com$rpl$specter$impl$CoercePath$coerce_path$arity$1 (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:180:27)
   com.rpl.specter.impl/coerce-path (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:155:17)
   com$rpl$specter$impl$CoercePath$coerce_path$arity$1 (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:180:14)
   com$rpl$specter$impl$coerce_path (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:155:17)
aerial.hanami.core&gt; 
"><a href="#t1542471732057800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:22:12</span>           jsa-aerial </span><pre>#object[RangeError RangeError: Maximum call stack size exceeded]
   cljs.core/build-subvec (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5908:25)
   cljs$core$IWithMeta$_with_meta$arity$2 (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5793:28)
   cljs.core/-with-meta (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:686:21)
   cljs.core/with-meta (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:2059:8)
   cljs.core/vec (jar:file:/home/jsa/.m2/repository/org/clojure/clojurescript/1.10.439/clojurescript-1.10.439.jar!/cljs/core.cljs:5662:6)
   com$rpl$specter$impl$CoercePath$coerce_path$arity$1 (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:180:27)
   com.rpl.specter.impl/coerce-path (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:155:17)
   com$rpl$specter$impl$CoercePath$coerce_path$arity$1 (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:180:14)
   com$rpl$specter$impl$coerce_path (jar:file:/home/jsa/.m2/repository/com/rpl/specter/1.1.1/specter-1.1.1.jar!/com/rpl/specter/impl.cljc:155:17)
aerial.hanami.core&gt; 
</pre></div><div id="t1542471842059000" t="2018-11-17 16:24:02 jsa-aerial I think I will try a mini binary search to try to pin point in which release cljs was broken (or less likely, &apos;fixed&apos; something that was broken but causes regressions)"><a href="#t1542471842059000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:24:02</span>           jsa-aerial </span><span>I think I will try a mini binary search to try to pin point in which release cljs was broken (or less likely, &apos;fixed&apos; something that was broken but causes regressions)</span></div><div id="t1542472497061400" t="2018-11-17 16:34:57 jsa-aerial OK, didn&apos;t take long. Despite a couple hundred point increments, the releases go from 1.10.439 to 1.10.339 as a first jump. 1.10.339 works fine. So, 1.10.439 is what is broken. It has a very large number of differences across &apos;changes&apos;, &apos;enhancements&apos;, and &apos;fixes&apos;. So, it is not too surprising it went off the rails..."><a href="#t1542472497061400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:34:57</span>           jsa-aerial </span><span>OK, didn&apos;t take long. Despite a couple hundred point increments, the releases go from 1.10.439 to 1.10.339 as a first jump. 1.10.339 works fine. So, 1.10.439 is what is broken. It has a very large number of differences across &apos;changes&apos;, &apos;enhancements&apos;, and &apos;fixes&apos;. So, it is not too surprising it went off the rails...</span></div><div id="t1542472915062900" t="2018-11-17 16:41:55 jsa-aerial Just to finish, the actual releases go 1.10.238 -&gt; 1.10.312 (a lot of &apos;fixes&apos;) -&gt; 1.10.329 (a few &apos;fixes&apos;) -&gt; 1.10.339 (just a transit-clj version bump) -&gt; 1.10.439"><a href="#t1542472915062900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:41:55</span>           jsa-aerial </span><span>Just to finish, the actual releases go 1.10.238 -&gt; 1.10.312 (a lot of &apos;fixes&apos;) -&gt; 1.10.329 (a few &apos;fixes&apos;) -&gt; 1.10.339 (just a transit-clj version bump) -&gt; 1.10.439</span></div><div id="t1542473054064600" t="2018-11-17 16:44:14 jsa-aerial Likely &apos;goats&apos;/culprits:  CLJS-2805: Bump tools.reader to 1.3.0 ,  Align ClojureScript AST to tools.analyzer ,  CLJS-2442: set and vec performance enhancements .  Those last two definitely smell bad given where the problems here are manifesting..."><a href="#t1542473054064600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:44:14</span>           jsa-aerial </span><span>Likely &apos;goats&apos;/culprits: </span><code>CLJS-2805: Bump tools.reader to 1.3.0</code><span>, </span><code>Align ClojureScript AST to tools.analyzer</code><span>, </span><code>CLJS-2442: set and vec performance enhancements</code><span>.  Those last two definitely smell bad given where the problems here are manifesting...</span></div><div id="t1542473245065100" t="2018-11-17 16:47:25 martinklepsch @jsa-aerial that&apos;s very interesting, thanks for digging in"><a href="#t1542473245065100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:47:25</span>        martinklepsch </span><span>@jsa-aerial that&apos;s very interesting, thanks for digging in</span></div><div id="t1542473435066700" t="2018-11-17 16:50:35 martinklepsch I previously had another problem with the analyzer (turned out it was my fault) but I think if you could create a minimal repro how the analyzer fails with specter that would be very interesting to #cljs-dev"><a href="#t1542473435066700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:50:35</span>        martinklepsch </span><span>I previously had another problem with the analyzer (turned out it was my fault) but I think if you could create a minimal repro how the analyzer fails with specter that would be very interesting to #cljs-dev</span></div><div id="t1542473445066900" t="2018-11-17 16:50:45 martinklepsch https://gist.github.com/martinklepsch/9f885feb061ec3f03f365e22d0d9bf5b#old-description-ignore-this"><a href="#t1542473445066900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:50:45</span>        martinklepsch </span><a href="https://gist.github.com/martinklepsch/9f885feb061ec3f03f365e22d0d9bf5b#old-description-ignore-this" target="_blank">https://gist.github.com/martinklepsch/9f885feb061ec3f03f365e22d0d9bf5b#old-description-ignore-this</a></div><div id="t1542473465067400" t="2018-11-17 16:51:05 martinklepsch ☝️  you can take a look at this for how this could look"><a href="#t1542473465067400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:51:05</span>        martinklepsch </span><b>☝️</b><span> you can take a look at this for how this could look</span></div><div id="t1542473527068300" t="2018-11-17 16:52:07 martinklepsch the analyze-file call would need to be pointed at  com/rpl/specter.cljc  and you&apos;d need to add specter to the  :deps  map."><a href="#t1542473527068300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:52:07</span>        martinklepsch </span><span>the analyze-file call would need to be pointed at </span><code>com/rpl/specter.cljc</code><span> and you&apos;d need to add specter to the </span><code>:deps</code><span> map.</span></div><div id="t1542473853068700" t="2018-11-17 16:57:33 martinklepsch btw, I also get the  coll?  issue in 1.10.339"><a href="#t1542473853068700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">16:57:33</span>        martinklepsch </span><span>btw, I also get the </span><code>coll?</code><span> issue in 1.10.339</span></div><div id="t1542474226072100" t="2018-11-17 17:03:46 jsa-aerial @martinklepsch just to be clear - I do not get any analyzer problem in my code with any of those releases. So, I can&apos;t make that repo. So, if it is still happening with 1.10.339 I would suggest going back further to try to isolate that. For me, the error happens at runtime and since it occurs in  vec , I would guess those &apos;enhancements&apos; to  set  and  vec  for performance are the problem."><a href="#t1542474226072100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">17:03:46</span>           jsa-aerial </span><span>@martinklepsch just to be clear - I do not get any analyzer problem in my code with any of those releases. So, I can&apos;t make that repo. So, if it is still happening with 1.10.339 I would suggest going back further to try to isolate that. For me, the error happens at runtime and since it occurs in </span><code>vec</code><span>, I would guess those &apos;enhancements&apos; to </span><code>set</code><span> and </span><code>vec</code><span> for performance are the problem.</span></div><div id="t1542474369073800" t="2018-11-17 17:06:09 jsa-aerial @martinklepsch one other thing of note: I have another repo (Saite) which uses Hanami (the one causing cljdoc bogus analyzer error) which sails through cljdoc just fine. So, maybe there is something wrong in the way cljdoc sets up the analyzer for this?"><a href="#t1542474369073800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">17:06:09</span>           jsa-aerial </span><span>@martinklepsch one other thing of note: I have another repo (Saite) which uses Hanami (the one causing cljdoc bogus analyzer error) which sails through cljdoc just fine. So, maybe there is something wrong in the way cljdoc sets up the analyzer for this?</span></div><div id="t1542474439074700" t="2018-11-17 17:07:19 jsa-aerial To be clear: Both of those use the specter lib in question, and both use it in exactly the same way."><a href="#t1542474439074700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">17:07:19</span>           jsa-aerial </span><span>To be clear: Both of those use the specter lib in question, and both use it in exactly the same way.</span></div><div id="t1542494582075300" t="2018-11-17 22:43:02 martinklepsch Interesting, can you provide dependency coordinates for both of these projects so I can compare?  🙂"><a href="#t1542494582075300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-17</span> <span class="t" onclick="H(this)">22:43:02</span>        martinklepsch </span><span>Interesting, can you provide dependency coordinates for both of these projects so I can compare? </span><b>🙂</b></div><div id="t1542566253075500" t="2018-11-18 18:37:33 jsa-aerial Not sure what &apos;dependency coordinates&apos; means. Maybe the repo URLs?"><a href="#t1542566253075500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-18</span> <span class="t" onclick="H(this)">18:37:33</span>                jsa-aerial </span><span>Not sure what &apos;dependency coordinates&apos; means. Maybe the repo URLs?</span></div><div id="t1542566285075700" t="2018-11-18 18:38:05 jsa-aerial https://github.com/jsa-aerial/hanami"><a href="#t1542566285075700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-18</span> <span class="t" onclick="H(this)">18:38:05</span>                jsa-aerial </span><a href="https://github.com/jsa-aerial/hanami" target="_blank">https://github.com/jsa-aerial/hanami</a></div><div id="t1542566311076000" t="2018-11-18 18:38:31 jsa-aerial https://github.com/jsa-aerial/saite"><a href="#t1542566311076000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-18</span> <span class="t" onclick="H(this)">18:38:31</span>                jsa-aerial </span><a href="https://github.com/jsa-aerial/saite" target="_blank">https://github.com/jsa-aerial/saite</a></div><div id="t1543414897079400" t="2018-11-28 14:21:37 Marc O&apos;Morain 👋 

Hi there. I’m looking for a way to author a specter path that can select a string or vector of strings.

My data looks like this: (emails for the  postal  library).

 (def m1 {:to [&quot; 

I want to collect all email addresses in the message, using  specter/select"><a href="#t1543414897079400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-28</span> <span class="t" onclick="H(this)">14:21:37</span>        Marc O'Morain </span><b>👋</b><span>

Hi there. I’m looking for a way to author a specter path that can select a string or vector of strings.

My data looks like this: (emails for the </span><code>postal</code><span> library).

</span><pre>(def m1 {:to [&quot;</pre><span>

I want to collect all email addresses in the message, using </span><code>specter/select</code></div><div id="t1543415411079900" t="2018-11-28 14:30:11 Marc O&apos;Morain I ended up with:

 (defn- has-recipients?
  &quot;True if this email has any recipients&quot;
  [message]
  (s/selected-any? [(s/multi-path :to :cc :bcc)
                    (s/if-path sequential? s/ALL some?)]
                   message))
"><a href="#t1543415411079900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-28</span> <span class="t" onclick="H(this)">14:30:11</span>        Marc O'Morain </span><span>I ended up with:

</span><pre>(defn- has-recipients?
  &quot;True if this email has any recipients&quot;
  [message]
  (s/selected-any? [(s/multi-path :to :cc :bcc)
                    (s/if-path sequential? s/ALL some?)]
                   message))
</pre></div><div id="t1543419881080200" t="2018-11-28 15:44:41 nathanmarz @marc-omorain that&apos;s perfect"><a href="#t1543419881080200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-28</span> <span class="t" onclick="H(this)">15:44:41</span>           nathanmarz </span><span>@marc-omorain that&apos;s perfect</span></div><div id="t1543419915080400" t="2018-11-28 15:45:15 Marc O&apos;Morain Thanks!"><a href="#t1543419915080400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-28</span> <span class="t" onclick="H(this)">15:45:15</span>        Marc O'Morain </span><span>Thanks!</span></div><div id="t1544788328003500" t="2018-12-14 11:52:08 Timo Freiberg hey everyone, i&apos;m trying to use specter to build a tree-structure of nested maps and struggling with what kinds of values are allowed in the path in  setval"><a href="#t1544788328003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:52:08</span>        Timo Freiberg </span><span>hey everyone, i&apos;m trying to use specter to build a tree-structure of nested maps and struggling with what kinds of values are allowed in the path in </span><code>setval</code></div><div id="t1544788419005000" t="2018-12-14 11:53:39 Timo Freiberg my pre-specter implementation just uses  (update-in tree [:field1 field1-val ...] (fnil conj #{}) key-of-entity)"><a href="#t1544788419005000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:53:39</span>        Timo Freiberg </span><span>my pre-specter implementation just uses </span><code>(update-in tree [:field1 field1-val ...] (fnil conj #{}) key-of-entity)</code></div><div id="t1544788549006000" t="2018-12-14 11:55:49 Timo Freiberg so in the end i get a big map like
 {:field1 {&quot;1&quot; {:field2 {nil {:field3 {&quot;B&quot; {..}}}}}
          &quot;2&quot; {:field2 {nil {:field3 {&quot;C&quot; {..}}}}}}}
"><a href="#t1544788549006000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:55:49</span>        Timo Freiberg </span><span>so in the end i get a big map like
</span><pre>{:field1 {&quot;1&quot; {:field2 {nil {:field3 {&quot;B&quot; {..}}}}}
          &quot;2&quot; {:field2 {nil {:field3 {&quot;C&quot; {..}}}}}}}
</pre></div><div id="t1544788606006900" t="2018-12-14 11:56:46 Timo Freiberg my problem is that some values are  nil  and some values are hashmaps themselves. and specter doesn&apos;t seem to use  nil  and hashmaps in the path of  setval"><a href="#t1544788606006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:56:46</span>        Timo Freiberg </span><span>my problem is that some values are </span><code>nil</code><span> and some values are hashmaps themselves. and specter doesn&apos;t seem to use </span><code>nil</code><span> and hashmaps in the path of </span><code>setval</code></div><div id="t1544788618007300" t="2018-12-14 11:56:58 Timo Freiberg i already replaced  nil  with a  :empty , that solved that problem"><a href="#t1544788618007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:56:58</span>        Timo Freiberg </span><span>i already replaced </span><code>nil</code><span> with a </span><code>:empty</code><span>, that solved that problem</span></div><div id="t1544788707008800" t="2018-12-14 11:58:27 Timo Freiberg but i rely on the hashmap values for equality. my current plan for a workaround is represent that data as a sorted string and hope i can get a canonical representation working"><a href="#t1544788707008800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">11:58:27</span>        Timo Freiberg </span><span>but i rely on the hashmap values for equality. my current plan for a workaround is represent that data as a sorted string and hope i can get a canonical representation working</span></div><div id="t1544788833010000" t="2018-12-14 12:00:33 Timo Freiberg maybe someone can help me with this problem or confirm that specter doesn&apos;t use  nil  or hashmaps/hashsets as map keys in  setval ?"><a href="#t1544788833010000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">12:00:33</span>        Timo Freiberg </span><span>maybe someone can help me with this problem or confirm that specter doesn&apos;t use </span><code>nil</code><span> or hashmaps/hashsets as map keys in </span><code>setval</code><span>?</span></div><div id="t1544789049011100" t="2018-12-14 12:04:09 Timo Freiberg example:
 (S/setval [:field1 &quot;1&quot;
           :field2 :empty
           :field3 &quot;A&quot;
           :field4 (S/multi-path
                    :c
                    #{:a :b}
                    {:a #{:b :c}})]
          &quot;ID&quot;
          {})
;; =&gt; {:field1 {&quot;1&quot; {:field2 {:empty {:field3 {&quot;A&quot; {:field4 {:c &quot;ID&quot;}}}}}}}}
 

I&apos;d like for the paths  #{:a :b}  and  {:a #{:b :c}}  to also be created"><a href="#t1544789049011100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">12:04:09</span>        Timo Freiberg </span><span>example:
</span><pre>(S/setval [:field1 &quot;1&quot;
           :field2 :empty
           :field3 &quot;A&quot;
           :field4 (S/multi-path
                    :c
                    #{:a :b}
                    {:a #{:b :c}})]
          &quot;ID&quot;
          {})
;; =&gt; {:field1 {&quot;1&quot; {:field2 {:empty {:field3 {&quot;A&quot; {:field4 {:c &quot;ID&quot;}}}}}}}}
</pre><span>

I&apos;d like for the paths </span><code>#{:a :b}</code><span> and </span><code>{:a #{:b :c}}</code><span> to also be created</span></div><div id="t1544801596011700" t="2018-12-14 15:33:16 nathanmarz @timo.freiberg if you want to use a map as a key, wrap it in the  keypath  navigator"><a href="#t1544801596011700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">15:33:16</span>           nathanmarz </span><span>@timo.freiberg if you want to use a map as a key, wrap it in the </span><code>keypath</code><span> navigator</span></div><div id="t1544801630012400" t="2018-12-14 15:33:50 nathanmarz only basic types like keywords, strings, and numbers are automatically inferred use  keypath  navigation"><a href="#t1544801630012400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">15:33:50</span>           nathanmarz </span><span>only basic types like keywords, strings, and numbers are automatically inferred use </span><code>keypath</code><span> navigation</span></div><div id="t1544801641012700" t="2018-12-14 15:34:01 nathanmarz see this for a complete listing of navigators available to you:  https://github.com/nathanmarz/specter/wiki/Cheat-Sheet"><a href="#t1544801641012700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">15:34:01</span>           nathanmarz </span><span>see this for a complete listing of navigators available to you: </span><a href="https://github.com/nathanmarz/specter/wiki/Cheat-Sheet" target="_blank">https://github.com/nathanmarz/specter/wiki/Cheat-Sheet</a></div><div id="t1544803324013000" t="2018-12-14 16:02:04 Timo Freiberg awesome, that did it"><a href="#t1544803324013000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-14</span> <span class="t" onclick="H(this)">16:02:04</span>        Timo Freiberg </span><span>awesome, that did it</span></div><div id="t1545057357016100" t="2018-12-17 14:35:57 ro6 Today I found myself using  assoc-in  on the  ex-data  inside an exception while keeping the rest of the info the same, then re-forming and re-throwing. It definitely felt like a &quot;Specter-shaped&quot; problem. Is this the sort of thing Specter could do (or already does)? If so, what would be the approach to implementing a navigator for a closed data object like an  IExceptionInfo ?"><a href="#t1545057357016100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-17</span> <span class="t" onclick="H(this)">14:35:57</span>                  ro6 </span><span>Today I found myself using </span><code>assoc-in</code><span> on the </span><code>ex-data</code><span> inside an exception while keeping the rest of the info the same, then re-forming and re-throwing. It definitely felt like a &quot;Specter-shaped&quot; problem. Is this the sort of thing Specter could do (or already does)? If so, what would be the approach to implementing a navigator for a closed data object like an </span><code>IExceptionInfo</code><span>?</span></div><div id="t1545057493016400" t="2018-12-17 14:38:13 nathanmarz @robert.mather.rmm you can make customer navigators with  defnav"><a href="#t1545057493016400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-17</span> <span class="t" onclick="H(this)">14:38:13</span>           nathanmarz </span><span>@robert.mather.rmm you can make customer navigators with </span><code>defnav</code></div><div id="t1545057538016800" t="2018-12-17 14:38:58 nathanmarz though for that i think the best approach would be something like the new datafy stuff"><a href="#t1545057538016800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-17</span> <span class="t" onclick="H(this)">14:38:58</span>           nathanmarz </span><span>though for that i think the best approach would be something like the new datafy stuff</span></div><div id="t1545057569017200" t="2018-12-17 14:39:29 nathanmarz where you can turn the closed object into regular clojure data, navigate it normally, and then at the end convert it back"><a href="#t1545057569017200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-17</span> <span class="t" onclick="H(this)">14:39:29</span>           nathanmarz </span><span>where you can turn the closed object into regular clojure data, navigate it normally, and then at the end convert it back</span></div><div id="t1545057623018200" t="2018-12-17 14:40:23 nathanmarz so something like this would be ideal:  (transform [DATAFY :some-field ALL] inc some-obj) , where  DATAFY  would do the conversion both ways"><a href="#t1545057623018200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-17</span> <span class="t" onclick="H(this)">14:40:23</span>           nathanmarz </span><span>so something like this would be ideal: </span><code>(transform [DATAFY :some-field ALL] inc some-obj)</code><span>, where </span><code>DATAFY</code><span> would do the conversion both ways</span></div><div id="t1545290109019000" t="2018-12-20 07:15:09 puzzler Is there a protocol that &quot;goes the other way&quot; for datafy?  I agree that&apos;s a good idea, if so."><a href="#t1545290109019000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">07:15:09</span>              puzzler </span><span>Is there a protocol that &quot;goes the other way&quot; for datafy?  I agree that&apos;s a good idea, if so.</span></div><div id="t1545310377019900" t="2018-12-20 12:52:57 nathanmarz @puzzler doesn&apos;t look like it, so it would have to be independently defined"><a href="#t1545310377019900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">12:52:57</span>           nathanmarz </span><span>@puzzler doesn&apos;t look like it, so it would have to be independently defined</span></div><div id="t1545340632021200" t="2018-12-20 21:17:12 aaelony If anyone is looking for a nasty data structure to play with Specter, I think I’ve found one here: “ https://pricing.us-east-1.amazonaws.com/offers/v1.0/aws/AmazonEC2/current/index.json ”"><a href="#t1545340632021200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">21:17:12</span>              aaelony </span><span>If anyone is looking for a nasty data structure to play with Specter, I think I’ve found one here: “</span><a href="https://pricing.us-east-1.amazonaws.com/offers/v1.0/aws/AmazonEC2/current/index.json" target="_blank">https://pricing.us-east-1.amazonaws.com/offers/v1.0/aws/AmazonEC2/current/index.json</a><span>”</span></div><div id="t1545342230023600" t="2018-12-20 21:43:50 idiomancy Alright so I have a hell of a difficult one and specter would be perfect for this... but it is a bear.

so AWS&apos;s nosql, DynamoDB, stores records in this wonky schema&apos;d format.

Heres an example.   The key indicates how the record should be transformed.  Essentially the leaf values are S and N, for strings and numbers respectively.
I want to traverse recursively and replace the {:type-key val} with just the val.  which involves crazy collection between recursed layers  😮"><a href="#t1545342230023600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">21:43:50</span>            idiomancy </span><span>Alright so I have a hell of a difficult one and specter would be perfect for this... but it is a bear.

so AWS&apos;s nosql, DynamoDB, stores records in this wonky schema&apos;d format.

Heres an example.   The key indicates how the record should be transformed.  Essentially the leaf values are S and N, for strings and numbers respectively.
I want to traverse recursively and replace the {:type-key val} with just the val.  which involves crazy collection between recursed layers </span><b>😮</b></div><div id="t1545342246023700" t="2018-12-20 21:44:06 idiomancy"><a href="#t1545342246023700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">21:44:06</span>            idiomancy </span></div><div id="t1545342400024100" t="2018-12-20 21:46:40 idiomancy is that even possible?"><a href="#t1545342400024100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">21:46:40</span>            idiomancy </span><span>is that even possible?</span></div><div id="t1545344647024400" t="2018-12-20 22:24:07 idiomancy I ended up just doing it with regular recursion"><a href="#t1545344647024400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">22:24:07</span>            idiomancy </span><span>I ended up just doing it with regular recursion</span></div><div id="t1545344662024700" t="2018-12-20 22:24:22 idiomancy it recursively called specter"><a href="#t1545344662024700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-20</span> <span class="t" onclick="H(this)">22:24:22</span>            idiomancy </span><span>it recursively called specter</span></div><div id="t1545350437025400" t="2018-12-21 00:00:37 nathanmarz @idiomancy you could use  walker"><a href="#t1545350437025400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-21</span> <span class="t" onclick="H(this)">00:00:37</span>           nathanmarz </span><span>@idiomancy you could use </span><code>walker</code></div><div id="t1545350459025800" t="2018-12-21 00:00:59 nathanmarz (defn target? [o] (and (map? o) (= 1 (count o)) (#{:S :N} (-&gt; o first first))))
(transform (walker target?) #(-&gt; % last last) data)
"><a href="#t1545350459025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-21</span> <span class="t" onclick="H(this)">00:00:59</span>           nathanmarz </span><pre>(defn target? [o] (and (map? o) (= 1 (count o)) (#{:S :N} (-&gt; o first first))))
(transform (walker target?) #(-&gt; % last last) data)
</pre></div><div id="t1545350557026800" t="2018-12-21 00:02:37 idiomancy hahaha, you bloody wizard you!  let me try it out"><a href="#t1545350557026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-21</span> <span class="t" onclick="H(this)">00:02:37</span>            idiomancy </span><span>hahaha, you bloody wizard you!  let me try it out</span></div><div id="t1545350723027100" t="2018-12-21 00:05:23 nathanmarz using  cond-path  you could do it more precisely"><a href="#t1545350723027100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-21</span> <span class="t" onclick="H(this)">00:05:23</span>           nathanmarz </span><span>using </span><code>cond-path</code><span> you could do it more precisely</span></div><div id="t1545350727027300" t="2018-12-21 00:05:27 nathanmarz definitely an annoying data format"><a href="#t1545350727027300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-21</span> <span class="t" onclick="H(this)">00:05:27</span>           nathanmarz </span><span>definitely an annoying data format</span></div><div id="t1545759070012100" t="2018-12-25 17:31:10 nlessa Hi, I found an old discussion about defining a nav like this. But it seems something wrong with the GROUP-BY definition."><a href="#t1545759070012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-25</span> <span class="t" onclick="H(this)">17:31:10</span>               nlessa </span><span>Hi, I found an old discussion about defining a nav like this. But it seems something wrong with the GROUP-BY definition.</span></div><div id="t1545759254013300" t="2018-12-25 17:34:14 nlessa"><a href="#t1545759254013300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-25</span> <span class="t" onclick="H(this)">17:34:14</span>               nlessa </span></div><div id="t1545761757014100" t="2018-12-25 18:15:57 nathanmarz @nlessa it hasn&apos;t been possible to compile path without parameters since 0.13.0"><a href="#t1545761757014100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-25</span> <span class="t" onclick="H(this)">18:15:57</span>           nathanmarz </span><span>@nlessa it hasn&apos;t been possible to compile path without parameters since 0.13.0</span></div><div id="t1545761790014700" t="2018-12-25 18:16:30 nathanmarz now you would do  (defn group-by-nav [f] (path (group-by-view f) ALL LAST)))"><a href="#t1545761790014700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-25</span> <span class="t" onclick="H(this)">18:16:30</span>           nathanmarz </span><span>now you would do </span><code>(defn group-by-nav [f] (path (group-by-view f) ALL LAST)))</code></div><div id="t1545761847015200" t="2018-12-25 18:17:27 nlessa Hum, OK. thanks @nathanmarz!!"><a href="#t1545761847015200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-12-25</span> <span class="t" onclick="H(this)">18:17:27</span>               nlessa </span><span>Hum, OK. thanks @nathanmarz!!</span></div><div id="t1546291527016300" t="2019-12-31 21:25:27 johanatan hi, is it possible to  collect  two levels of map keys in the process of navigating to a third level in a nested map ?"><a href="#t1546291527016300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-31</span> <span class="t" onclick="H(this)">21:25:27</span>            johanatan </span><span>hi, is it possible to </span><code>collect</code><span> two levels of map keys in the process of navigating to a third level in a nested map ?</span></div><div id="t1546291569017200" t="2019-12-31 21:26:09 johanatan so, i have  {:a {:b {:c :d}}}  and i want to  map /`transform` over  {:c :d}  but while retaining the context  [:a :b] ."><a href="#t1546291569017200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-31</span> <span class="t" onclick="H(this)">21:26:09</span>            johanatan </span><span>so, i have </span><code>{:a {:b {:c :d}}}</code><span> and i want to </span><code>map</code><span>/`transform` over </span><code>{:c :d}</code><span> but while retaining the context </span><code>[:a :b]</code><span>.</span></div><div id="t1546291608017900" t="2019-12-31 21:26:48 johanatan (specter/collect specter/MAP-KEYS specter/MAP-KEYS)  gives the error &quot;Don&apos;t know how to create ISeq from clojure.lang.Keyword&quot;."><a href="#t1546291608017900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-31</span> <span class="t" onclick="H(this)">21:26:48</span>            johanatan </span><code>(specter/collect specter/MAP-KEYS specter/MAP-KEYS)</code><span> gives the error &quot;Don&apos;t know how to create ISeq from clojure.lang.Keyword&quot;.</span></div><div id="t1546291628018100" t="2019-12-31 21:27:08 johanatan thanks in advance!"><a href="#t1546291628018100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-31</span> <span class="t" onclick="H(this)">21:27:08</span>            johanatan </span><span>thanks in advance!</span></div><div id="t1546378643018900" t="2019-01-01 21:37:23 nathanmarz @johanatan just use multiple collect calls:
 (select [ALL (collect-one FIRST) LAST ALL (collect-one FIRST) LAST] {:a {:b {:c :d}}})
;; =&gt; [[:a :b {:c :d}]]
"><a href="#t1546378643018900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">21:37:23</span>           nathanmarz </span><span>@johanatan just use multiple collect calls:
</span><pre>(select [ALL (collect-one FIRST) LAST ALL (collect-one FIRST) LAST] {:a {:b {:c :d}}})
;; =&gt; [[:a :b {:c :d}]]
</pre></div><div id="t1546378702019500" t="2019-01-01 21:38:22 johanatan Ah, I guess I’m confused why you can’t use MAP-KEYS?"><a href="#t1546378702019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">21:38:22</span>            johanatan </span><span>Ah, I guess I’m confused why you can’t use MAP-KEYS?</span></div><div id="t1546378745019900" t="2019-01-01 21:39:05 johanatan (For either the collection or the navigation)"><a href="#t1546378745019900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">21:39:05</span>            johanatan </span><span>(For either the collection or the navigation)</span></div><div id="t1546380064020500" t="2019-01-01 22:01:04 nathanmarz MAP-KEYS  navigates you to each key of the map"><a href="#t1546380064020500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">22:01:04</span>           nathanmarz </span><code>MAP-KEYS</code><span> navigates you to each key of the map</span></div><div id="t1546380077020900" t="2019-01-01 22:01:17 nathanmarz so navigating  MAP-KEYS  again will navigate you to the keys of the keys"><a href="#t1546380077020900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">22:01:17</span>           nathanmarz </span><span>so navigating </span><code>MAP-KEYS</code><span> again will navigate you to the keys of the keys</span></div><div id="t1546380096021400" t="2019-01-01 22:01:36 nathanmarz since the first set of keys are keywords you get that error"><a href="#t1546380096021400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-01</span> <span class="t" onclick="H(this)">22:01:36</span>           nathanmarz </span><span>since the first set of keys are keywords you get that error</span></div><div id="t1546451253022300" t="2019-01-02 17:47:33 johanatan Oh, I meant MAP-VALS instead of ALL/LAST in your example "><a href="#t1546451253022300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-02</span> <span class="t" onclick="H(this)">17:47:33</span>            johanatan </span><span>Oh, I meant MAP-VALS instead of ALL/LAST in your example </span></div><div id="t1546456711022600" t="2019-01-02 19:18:31 nathanmarz @johanatan because it needs to collect the key"><a href="#t1546456711022600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-02</span> <span class="t" onclick="H(this)">19:18:31</span>           nathanmarz </span><span>@johanatan because it needs to collect the key</span></div><div id="t1546456963022900" t="2019-01-02 19:22:43 johanatan Ah, got it. Thx "><a href="#t1546456963022900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-02</span> <span class="t" onclick="H(this)">19:22:43</span>            johanatan </span><span>Ah, got it. Thx </span></div><div id="t1546804993025800" t="2019-01-06 20:03:13 zlrth i have some xml:
 &apos;({:tag :CategoryName_1, :attrs {}, :content (&quot;cats&quot;)}
  {:tag :CategoryId_1, :attrs {}, :content (&quot;cat260062&quot;)}
  {:tag :Items,
   :attrs {},
   :content
   ({:tag :ItemId, :attrs {}, :content (&quot;1000388464506500&quot;)}
    {:tag :ItemId, :attrs {}, :content (&quot;1000388464506405&quot;)})})
 
that i&apos;d like to turn into into this map:
 {:CategoryName_1 &quot;cats&quot;, :CategoryId_1 &quot;cat260062&quot;, :Items [&quot;1000388464506500&quot; &quot;1000388464506405&quot;]}
 
that is, for recursive  :content s, i&apos;d like them collected into a vector, and for non-recursive, their tags and contents are key value pairs"><a href="#t1546804993025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-06</span> <span class="t" onclick="H(this)">20:03:13</span>                zlrth </span><span>i have some xml:
</span><pre>&apos;({:tag :CategoryName_1, :attrs {}, :content (&quot;cats&quot;)}
  {:tag :CategoryId_1, :attrs {}, :content (&quot;cat260062&quot;)}
  {:tag :Items,
   :attrs {},
   :content
   ({:tag :ItemId, :attrs {}, :content (&quot;1000388464506500&quot;)}
    {:tag :ItemId, :attrs {}, :content (&quot;1000388464506405&quot;)})})
</pre><span>
that i&apos;d like to turn into into this map:
</span><pre>{:CategoryName_1 &quot;cats&quot;, :CategoryId_1 &quot;cat260062&quot;, :Items [&quot;1000388464506500&quot; &quot;1000388464506405&quot;]}
</pre><span>
that is, for recursive </span><code>:content</code><span>s, i&apos;d like them collected into a vector, and for non-recursive, their tags and contents are key value pairs</span></div><div id="t1546805085026800" t="2019-01-06 20:04:45 zlrth the following works, but i&apos;m using glue code to compensate for my lack of specter experience:
 (let [top-level-tags [:CategoryName_1 :CategoryId_1]
      xml &apos;({:tag :CategoryName_1, :attrs {}, :content (&quot;cats&quot;)}
            {:tag :CategoryId_1, :attrs {}, :content (&quot;cat260062&quot;)}
            {:tag :Items,
             :attrs {},
             :content
             ({:tag :ItemId, :attrs {}, :content (&quot;1000388464506500&quot;)}
              {:tag :ItemId, :attrs {}, :content (&quot;1000388464506405&quot;)})})
      map-by-tags (group-by :tag xml)
      top-level (sp/transform
                  [sp/MAP-VALS]
                  (fn [v] (-&gt; v first :content first))
                  (select-keys map-by-tags top-level-tags))
      Items (sp/select
             [:Items sp/ALL :content sp/ALL :content sp/FIRST]
             map-by-tags)]
  (merge top-level {:Items Items}))
"><a href="#t1546805085026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-06</span> <span class="t" onclick="H(this)">20:04:45</span>                zlrth </span><span>the following works, but i&apos;m using glue code to compensate for my lack of specter experience:
</span><pre>(let [top-level-tags [:CategoryName_1 :CategoryId_1]
      xml &apos;({:tag :CategoryName_1, :attrs {}, :content (&quot;cats&quot;)}
            {:tag :CategoryId_1, :attrs {}, :content (&quot;cat260062&quot;)}
            {:tag :Items,
             :attrs {},
             :content
             ({:tag :ItemId, :attrs {}, :content (&quot;1000388464506500&quot;)}
              {:tag :ItemId, :attrs {}, :content (&quot;1000388464506405&quot;)})})
      map-by-tags (group-by :tag xml)
      top-level (sp/transform
                  [sp/MAP-VALS]
                  (fn [v] (-&gt; v first :content first))
                  (select-keys map-by-tags top-level-tags))
      Items (sp/select
             [:Items sp/ALL :content sp/ALL :content sp/FIRST]
             map-by-tags)]
  (merge top-level {:Items Items}))
</pre></div><div id="t1546805295028800" t="2019-01-06 20:08:15 zlrth i didn&apos;t find an example in the docs of &quot;collecting a deeper value and putting it upward&quot;, but that could be my user error. i would thank you very much for tips!"><a href="#t1546805295028800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-06</span> <span class="t" onclick="H(this)">20:08:15</span>                zlrth </span><span>i didn&apos;t find an example in the docs of &quot;collecting a deeper value and putting it upward&quot;, but that could be my user error. i would thank you very much for tips!</span></div><div id="t1546812127029600" t="2019-01-06 22:02:07 zlrth ok i have something i&apos;m happier with via  cond-path  and  collect . why is the third element of the  :Items  vector the complete  {:tag :Items ...  map?"><a href="#t1546812127029600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-06</span> <span class="t" onclick="H(this)">22:02:07</span>                zlrth </span><span>ok i have something i&apos;m happier with via </span><code>cond-path</code><span> and </span><code>collect</code><span>. why is the third element of the </span><code>:Items</code><span> vector the complete </span><code>{:tag :Items ...</code><span> map?</span></div><div id="t1546870633030400" t="2019-01-07 14:17:13 nathanmarz @mfm you can do that like this:
 (def CONTENT-WALKER
  (recursive-path [] p
    [ALL
     (if-path map?
       [:content p]
       STAY
       )]))

(into {}
  (select
    [ALL
     (collect-one :tag)
     :content
     (subselect CONTENT-WALKER)
     (if-path #(= 1 (count %)) FIRST STAY)
     ]
    data)
    )
"><a href="#t1546870633030400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-07</span> <span class="t" onclick="H(this)">14:17:13</span>           nathanmarz </span><span>@mfm you can do that like this:
</span><pre>(def CONTENT-WALKER
  (recursive-path [] p
    [ALL
     (if-path map?
       [:content p]
       STAY
       )]))

(into {}
  (select
    [ALL
     (collect-one :tag)
     :content
     (subselect CONTENT-WALKER)
     (if-path #(= 1 (count %)) FIRST STAY)
     ]
    data)
    )
</pre></div><div id="t1546870661030600" t="2019-01-07 14:17:41 zlrth thank you!"><a href="#t1546870661030600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-07</span> <span class="t" onclick="H(this)">14:17:41</span>                zlrth </span><span>thank you!</span></div><div id="t1547120473031900" t="2019-01-10 11:41:13 roklenarcic I&apos;m having problems expressing the following: I want to find an element in the vector, and edit that, but if it doesn&apos;t exist I want to add a default element to the vector"><a href="#t1547120473031900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-10</span> <span class="t" onclick="H(this)">11:41:13</span>          roklenarcic </span><span>I&apos;m having problems expressing the following: I want to find an element in the vector, and edit that, but if it doesn&apos;t exist I want to add a default element to the vector</span></div><div id="t1547135577032200" t="2019-01-10 15:52:57 nathanmarz @roklenarcic you can do this:
 (multi-transform
  [(if-path [ALL (pred= :a)]
     [ALL (pred= :a) (terminal-val :c)]
     [AFTER-ELEM (terminal-val :DEFAULT)]
     )]
  [:b :a :b])
"><a href="#t1547135577032200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-10</span> <span class="t" onclick="H(this)">15:52:57</span>           nathanmarz </span><span>@roklenarcic you can do this:
</span><pre>(multi-transform
  [(if-path [ALL (pred= :a)]
     [ALL (pred= :a) (terminal-val :c)]
     [AFTER-ELEM (terminal-val :DEFAULT)]
     )]
  [:b :a :b])
</pre></div><div id="t1547135586032500" t="2019-01-10 15:53:06 nathanmarz can probably do it more efficiently with a custom navigator"><a href="#t1547135586032500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-10</span> <span class="t" onclick="H(this)">15:53:06</span>           nathanmarz </span><span>can probably do it more efficiently with a custom navigator</span></div><div id="t1547505633033800" t="2019-01-14 22:40:33 lexwin Wow @nathanmarz, I came here looking for exactly this answer."><a href="#t1547505633033800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-14</span> <span class="t" onclick="H(this)">22:40:33</span>               lexwin </span><span>Wow @nathanmarz, I came here looking for exactly this answer.</span></div><div id="t1547510368034600" t="2019-01-14 23:59:28 souenzzo (select-one ALL [:a :b])

Execution error (IllegalArgumentException) at com.rpl.specter.impl/compiled-select-one*$result-fn (impl.cljc:375).
More than one element found in structure: :b
(select-one ALL [:a nil])

Execution error (IllegalArgumentException) at com.rpl.specter.impl/compiled-select-one*$result-fn (impl.cljc:375).
More than one element found in structure:
 
 https://github.com/nathanmarz/specter/blob/7790213b163b07ef830fdbb1745fffcda61d40f6/src/clj/com/rpl/specter/impl.cljc#L379 
Here should be  (pr-str structure)  to better error messages."><a href="#t1547510368034600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-14</span> <span class="t" onclick="H(this)">23:59:28</span>             souenzzo </span><pre>(select-one ALL [:a :b])

Execution error (IllegalArgumentException) at com.rpl.specter.impl/compiled-select-one*$result-fn (impl.cljc:375).
More than one element found in structure: :b
(select-one ALL [:a nil])

Execution error (IllegalArgumentException) at com.rpl.specter.impl/compiled-select-one*$result-fn (impl.cljc:375).
More than one element found in structure:
</pre><span>
</span><a href="https://github.com/nathanmarz/specter/blob/7790213b163b07ef830fdbb1745fffcda61d40f6/src/clj/com/rpl/specter/impl.cljc#L379" target="_blank">https://github.com/nathanmarz/specter/blob/7790213b163b07ef830fdbb1745fffcda61d40f6/src/clj/com/rpl/specter/impl.cljc#L379</a><span>
Here should be </span><code>(pr-str structure)</code><span> to better error messages.</span></div><div id="t1547511641034900" t="2019-01-15 00:20:41 fmn How do you translate this vanilla clj function to a specter one?

 (defn web-server-config
  [config]
  (let [{:keys [port] :as config} (:web-server config)
        port                      (if (pos-int? port) port 8080)]
    (assoc config :port port)))
 

I can easily got it working with this, but I&apos;m just wondering if there&apos;s a better way to do it with specter:

 (defn web-server-config
  [config]
  (-&gt;&gt; config
       (sp/transform [:web-server :port] #(if (pos-int? %) % 8080))
       (sp/select-one [:web-server (sp/nil-&gt;val {})])))
"><a href="#t1547511641034900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-15</span> <span class="t" onclick="H(this)">00:20:41</span>                  fmn </span><span>How do you translate this vanilla clj function to a specter one?

</span><pre>(defn web-server-config
  [config]
  (let [{:keys [port] :as config} (:web-server config)
        port                      (if (pos-int? port) port 8080)]
    (assoc config :port port)))
</pre><span>

I can easily got it working with this, but I&apos;m just wondering if there&apos;s a better way to do it with specter:

</span><pre>(defn web-server-config
  [config]
  (-&gt;&gt; config
       (sp/transform [:web-server :port] #(if (pos-int? %) % 8080))
       (sp/select-one [:web-server (sp/nil-&gt;val {})])))
</pre></div><div id="t1547529975035400" t="2019-01-15 05:26:15 nathanmarz @funyako.funyao156 you can do it in one line like this:
 (select-any
  [:web-server
   (nil-&gt;val {})
   (transformed [:port (complement pos-int?)] (fn [_] 8000))
   ]
  config)
"><a href="#t1547529975035400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-15</span> <span class="t" onclick="H(this)">05:26:15</span>           nathanmarz </span><span>@funyako.funyao156 you can do it in one line like this:
</span><pre>(select-any
  [:web-server
   (nil-&gt;val {})
   (transformed [:port (complement pos-int?)] (fn [_] 8000))
   ]
  config)
</pre></div><div id="t1547529979035600" t="2019-01-15 05:26:19 nathanmarz not a big difference"><a href="#t1547529979035600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-15</span> <span class="t" onclick="H(this)">05:26:19</span>           nathanmarz </span><span>not a big difference</span></div><div id="t1547631099036000" t="2019-01-16 09:31:39 fmn @nathanmarz thank you!"><a href="#t1547631099036000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-16</span> <span class="t" onclick="H(this)">09:31:39</span>                  fmn </span><span>@nathanmarz thank you!</span></div><div id="t1548162865038900" t="2019-01-22 13:14:25 phil Hey, all. In discovery phase and stuck on one already: given  [[&quot;1&quot; &quot;2&quot;] [&quot;3&quot; &quot;4&quot;] [nil &quot;6&quot;]] , how would I get back 6? In other words find seq where the first value is  nil  and return the second value?"><a href="#t1548162865038900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-22</span> <span class="t" onclick="H(this)">13:14:25</span>                 phil </span><span>Hey, all. In discovery phase and stuck on one already: given </span><code>[[&quot;1&quot; &quot;2&quot;] [&quot;3&quot; &quot;4&quot;] [nil &quot;6&quot;]]</code><span>, how would I get back 6? In other words find seq where the first value is </span><code>nil</code><span> and return the second value?</span></div><div id="t1548163234039300" t="2019-01-22 13:20:34 schmee @phil here is one way to do it:
 user=&gt; a
[[&quot;1&quot; &quot;2&quot;] [&quot;3&quot; &quot;4&quot;] [nil &quot;6&quot;]]

user=&gt; (select-one [ALL (selected? FIRST (pred= nil)) 1] a)
&quot;6&quot;"><a href="#t1548163234039300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-22</span> <span class="t" onclick="H(this)">13:20:34</span>               schmee </span><span>@phil here is one way to do it:
</span><pre>user=&gt; a
[[&quot;1&quot; &quot;2&quot;] [&quot;3&quot; &quot;4&quot;] [nil &quot;6&quot;]]

user=&gt; (select-one [ALL (selected? FIRST (pred= nil)) 1] a)
&quot;6&quot;</pre></div><div id="t1548163313039500" t="2019-01-22 13:21:53 phil @schmee Thanks."><a href="#t1548163313039500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-22</span> <span class="t" onclick="H(this)">13:21:53</span>                 phil </span><span>@schmee Thanks.</span></div><div id="t1548247804041000" t="2019-01-23 12:50:04 phil Is moving stuff within a complex structure generally something you would do in one op or in a fetch, delete, insert treo?"><a href="#t1548247804041000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-23</span> <span class="t" onclick="H(this)">12:50:04</span>                 phil </span><span>Is moving stuff within a complex structure generally something you would do in one op or in a fetch, delete, insert treo?</span></div><div id="t1548253110041600" t="2019-01-23 14:18:30 nathanmarz @phil probably the latter, but depends on the use case"><a href="#t1548253110041600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-23</span> <span class="t" onclick="H(this)">14:18:30</span>           nathanmarz </span><span>@phil probably the latter, but depends on the use case</span></div><div id="t1548360785043300" t="2019-01-24 20:13:05 okocim Question about updating a list of lists:

If I have the following structure:
 [[?x :a/b ?y]
 [?y :b/c ?z]
 ;; I WANT TO NAVIGATE HERE FOR INSERTION
 [?z :d/e ?a]]
 
where I want to insert:
 [[?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]]
 

resulting in:
 [[?x :a/b ?y]
 [?y :b/c ?z]
 [?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]
 [?z :d/e ?a]]
 

What is the path, and does that require transform? or replace-in?
I’m trying to use

 [S/ALL
 (S/pred= &apos;[?y :b/c ?z])
 S/AFTER-ELEM]
 

for my path with a transform But that’s not working.
I can’t assure the  index of the insertion point will always be the same"><a href="#t1548360785043300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span> <span class="t" onclick="H(this)">20:13:05</span>               okocim </span><span>Question about updating a list of lists:

If I have the following structure:
</span><pre>[[?x :a/b ?y]
 [?y :b/c ?z]
 ;; I WANT TO NAVIGATE HERE FOR INSERTION
 [?z :d/e ?a]]
</pre><span>
where I want to insert:
</span><pre>[[?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]]
</pre><span>

resulting in:
</span><pre>[[?x :a/b ?y]
 [?y :b/c ?z]
 [?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]
 [?z :d/e ?a]]
</pre><span>

What is the path, and does that require transform? or replace-in?
I’m trying to use

</span><pre>[S/ALL
 (S/pred= &apos;[?y :b/c ?z])
 S/AFTER-ELEM]
</pre><span>

for my path with a transform But that’s not working.
I can’t assure the  index of the insertion point will always be the same</span></div><div id="t1548362406044000" t="2019-01-24 20:40:06 schmee @okocim here’s a kludgy two-step solution:
 user=&gt; a
[[?x :a/b ?y] [?y :b/c ?z] [?z :d/e ?a]]

user=&gt; b
[[?z :x/y &quot;FOO&quot;] [?z :x/k &quot;BAR&quot;]]

user=&gt; (def i (select-one [INDEXED-VALS (selected? LAST (pred= &apos;[?y :b/c ?z])) FIRST] a))
#&apos;user/i

user=&gt; (setval [(srange i (inc i)) END] b a)
[[?x :a/b ?y]
 [?y :b/c ?z]
 [?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]
 [?z :d/e ?a]]"><a href="#t1548362406044000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span> <span class="t" onclick="H(this)">20:40:06</span>               schmee </span><span>@okocim here’s a kludgy two-step solution:
</span><pre>user=&gt; a
[[?x :a/b ?y] [?y :b/c ?z] [?z :d/e ?a]]

user=&gt; b
[[?z :x/y &quot;FOO&quot;] [?z :x/k &quot;BAR&quot;]]

user=&gt; (def i (select-one [INDEXED-VALS (selected? LAST (pred= &apos;[?y :b/c ?z])) FIRST] a))
#&apos;user/i

user=&gt; (setval [(srange i (inc i)) END] b a)
[[?x :a/b ?y]
 [?y :b/c ?z]
 [?z :x/y &quot;FOO&quot;]
 [?z :x/k &quot;BAR&quot;]
 [?z :d/e ?a]]</pre></div><div id="t1548362548045000" t="2019-01-24 20:42:28 okocim Thanks, I’ll take it for now. It is a bit fumbly, but I think I can cordon that off until I can come up with something better"><a href="#t1548362548045000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span> <span class="t" onclick="H(this)">20:42:28</span>               okocim </span><span>Thanks, I’ll take it for now. It is a bit fumbly, but I think I can cordon that off until I can come up with something better</span></div><div id="t1548363424045400" t="2019-01-24 20:57:04 schmee If you find something cleaner post it here!"><a href="#t1548363424045400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span> <span class="t" onclick="H(this)">20:57:04</span>               schmee </span><span>If you find something cleaner post it here!</span></div><div id="t1548363488046600" t="2019-01-24 20:58:08 okocim I will. I was headed down the path of doing the two steps (find the index and splice-in) when you posted this, so thank you.  I will be happy to return the favor if I can."><a href="#t1548363488046600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span> <span class="t" onclick="H(this)">20:58:08</span>               okocim </span><span>I will. I was headed down the path of doing the two steps (find the index and splice-in) when you posted this, so thank you.  I will be happy to return the favor if I can.</span></div><div id="t1548411518046900" t="2019-01-25 10:18:38 twashing I have a set of nested records.

In my structure, I want to STAY on the i. the value nodes with :bar keys, that are ii. not seqable? and iii. not of type myns.Foo.

But I can’t seem to get the recursive navigator correctly. Any ideas here?

 (def a #myns.Foo{:bar #myns.Foo{:bar (#myns.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

(def b (recursive-path
         [] p
         (cond-path
           seqable? [ALL p]
           [:matcher (comp clojure.core/not parser-combinator?)] (continue-then-stay ALL p)
           [:matcher (comp clojure.core/not seqable?)] [ALL p])))

(select b a)
"><a href="#t1548411518046900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">10:18:38</span>             twashing </span><span>I have a set of nested records.

In my structure, I want to STAY on the i. the value nodes with :bar keys, that are ii. not seqable? and iii. not of type myns.Foo.

But I can’t seem to get the recursive navigator correctly. Any ideas here?

</span><pre>(def a #myns.Foo{:bar #myns.Foo{:bar (#myns.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

(def b (recursive-path
         [] p
         (cond-path
           seqable? [ALL p]
           [:matcher (comp clojure.core/not parser-combinator?)] (continue-then-stay ALL p)
           [:matcher (comp clojure.core/not seqable?)] [ALL p])))

(select b a)
</pre></div><div id="t1548429836047900" t="2019-01-25 15:23:56 nathanmarz @twashing it would be more clear if you showed desired input and output"><a href="#t1548429836047900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">15:23:56</span>           nathanmarz </span><span>@twashing it would be more clear if you showed desired input and output</span></div><div id="t1548452635048400" t="2019-01-25 21:43:55 twashing Hey @nathanmarz, absolutely. So I’m trying to find the  recursive-path  that gives me the output in *B, given the input from A*."><a href="#t1548452635048400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">21:43:55</span>             twashing </span><span>Hey @nathanmarz, absolutely. So I’m trying to find the </span><code>recursive-path</code><span> that gives me the output in *B, given the input from A*.</span></div><div id="t1548452636048600" t="2019-01-25 21:43:56 twashing ;; A input structure
(defrecord Foo [bar])
(def a #user.Foo{:bar #user.Foo{:bar &apos;(#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

;; B output 
:a ;; (the i. the value nodes with :bar keys, that are ii. not seqable? and iii. not of type myns.Foo)
"><a href="#t1548452636048600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">21:43:56</span>             twashing </span><pre>;; A input structure
(defrecord Foo [bar])
(def a #user.Foo{:bar #user.Foo{:bar &apos;(#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

;; B output 
:a ;; (the i. the value nodes with :bar keys, that are ii. not seqable? and iii. not of type myns.Foo)
</pre></div><div id="t1548455437049000" t="2019-01-25 22:30:37 nathanmarz @twashing is this what you&apos;re looking for?
 (def MY-WALKER
  (recursive-path [] p
    (cond-path
      #(instance? Foo %) [:bar p]
      seqable? [ALL #(instance? Foo %) p]
      STAY STAY
      )))
"><a href="#t1548455437049000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">22:30:37</span>           nathanmarz </span><span>@twashing is this what you&apos;re looking for?
</span><pre>(def MY-WALKER
  (recursive-path [] p
    (cond-path
      #(instance? Foo %) [:bar p]
      seqable? [ALL #(instance? Foo %) p]
      STAY STAY
      )))
</pre></div><div id="t1548455919049300" t="2019-01-25 22:38:39 twashing @nathanmarz Hmm, if I put this into my repl, I get an empty result set."><a href="#t1548455919049300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">22:38:39</span>             twashing </span><span>@nathanmarz Hmm, if I put this into my repl, I get an empty result set.</span></div><div id="t1548455948049800" t="2019-01-25 22:39:08 twashing (use &apos;com.rpl.specter)

(defrecord Foo [bar])

(def a #user.Foo{:bar #user.Foo{:bar &apos;(#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

(def MY-WALKER
  (recursive-path [] p
    (cond-path
      #(instance? Foo %) [:bar p]
      seqable? [ALL #(instance? Foo %) p]
      STAY STAY)))

(select MY-WALKER a)

;; [] - empty result set returned
"><a href="#t1548455948049800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">22:39:08</span>             twashing </span><pre>(use &apos;com.rpl.specter)

(defrecord Foo [bar])

(def a #user.Foo{:bar #user.Foo{:bar &apos;(#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})

(def MY-WALKER
  (recursive-path [] p
    (cond-path
      #(instance? Foo %) [:bar p]
      seqable? [ALL #(instance? Foo %) p]
      STAY STAY)))

(select MY-WALKER a)

;; [] - empty result set returned
</pre></div><div id="t1548455959050000" t="2019-01-25 22:39:19 twashing It’s a tricky one."><a href="#t1548455959050000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">22:39:19</span>             twashing </span><span>It’s a tricky one.</span></div><div id="t1548457236050400" t="2019-01-25 23:00:36 nathanmarz @twashing probably because you meant to do  (def a #user.Foo{:bar #user.Foo{:bar (#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})  ?"><a href="#t1548457236050400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:00:36</span>           nathanmarz </span><span>@twashing probably because you meant to do </span><code>(def a #user.Foo{:bar #user.Foo{:bar (#user.Foo{:bar :a :x 1 :y 2} :b :c :d)}})</code><span> ?</span></div><div id="t1548457586051400" t="2019-01-25 23:06:26 twashing Ah ok."><a href="#t1548457586051400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:06:26</span>             twashing </span><span>Ah ok.</span></div><div id="t1548457611052000" t="2019-01-25 23:06:51 twashing Didn’t realise the reader macro stopped the list from being eval’d… Cool."><a href="#t1548457611052000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:06:51</span>             twashing </span><span>Didn’t realise the reader macro stopped the list from being eval’d… Cool.</span></div><div id="t1548457767052800" t="2019-01-25 23:09:27 twashing Cheers mate. I think I have a better understanding of the semantics of  if-path  and  cond-path ."><a href="#t1548457767052800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:09:27</span>             twashing </span><span>Cheers mate. I think I have a better understanding of the semantics of </span><code>if-path</code><span> and </span><code>cond-path</code><span>.</span></div><div id="t1548457859053900" t="2019-01-25 23:10:59 twashing Although  STAY STAY  (to capture the leaves) is still a bit foggy.. used as both a predicate and navigator."><a href="#t1548457859053900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:10:59</span>             twashing </span><span>Although </span><code>STAY STAY</code><span> (to capture the leaves) is still a bit foggy.. used as both a predicate and navigator.</span></div><div id="t1548457872054200" t="2019-01-25 23:11:12 twashing Thanks for a great library!"><a href="#t1548457872054200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:11:12</span>             twashing </span><span>Thanks for a great library!</span></div><div id="t1548459275054700" t="2019-01-25 23:34:35 nathanmarz @twashing An  if-path /`cond-path` condition is &quot;true&quot; if it navigates to at least one value"><a href="#t1548459275054700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:34:35</span>           nathanmarz </span><span>@twashing An </span><code>if-path</code><span>/`cond-path` condition is &quot;true&quot; if it navigates to at least one value</span></div><div id="t1548459283055000" t="2019-01-25 23:34:43 nathanmarz so  STAY  is the navigation equivalent of  true"><a href="#t1548459283055000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:34:43</span>           nathanmarz </span><span>so </span><code>STAY</code><span> is the navigation equivalent of </span><code>true</code></div><div id="t1548459365055400" t="2019-01-25 23:36:05 twashing Gotcha  👍 :skin-tone-5:"><a href="#t1548459365055400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span> <span class="t" onclick="H(this)">23:36:05</span>             twashing </span><span>Gotcha </span><b>👍</b><b>:skin-tone-5:</b></div><div id="t1548906162056300" t="2019-01-31 03:42:42 steveb8n I’m having trouble with a recursive requirement. Here’s the example:
 (-&gt;&gt; {:gender :male
        :type    :person
        :name    &quot;Luke&quot;
        :mother  {:gender :female
                  :type :person
                  :name &quot;Padme&quot;}
        :friends [{:gender :male
                   :type :person
                   :name &quot;Han&quot;}
                  {:gender :male
                   :type :person
                   :name &quot;Chewbacca&quot;}]
        :mentors {:type   :group
                  :people [{:gender :male
                            :type :person
                            :name &quot;Obiwan&quot;}
                           {:gender :male
                            :type :person
                            :name &quot;Yoda&quot;}]}}
       (select [(recursive-path [] p
                                (if-path (fn [v] (and (map? v) (:gender v)))
                                         (continue-then-stay (multi-path [(must :friends) ALL]
                                                                         [MAP-VALS #(:gender %)])
                                                             p)))]))
 
=&gt;
 [{:gender :male, :type :person, :name &quot;Han&quot;}
 {:gender :male, :type :person, :name &quot;Chewbacca&quot;}
 {:gender :female, :type :person, :name &quot;Padme&quot;}
 {:gender :male,
  :type :person,
  :name &quot;Luke&quot;,
  :mother {:gender :female, :type :person, :name &quot;Padme&quot;},
  :friends [{:gender :male, :type :person, :name &quot;Han&quot;} {:gender :male, :type :person, :name &quot;Chewbacca&quot;}],
  :mentors {:type :group,
            :people [{:gender :male, :type :person, :name &quot;Obiwan&quot;} {:gender :male, :type :person, :name &quot;Yoda&quot;}]}}]
 

How can I get it to also return the mentors? They are :persons as well"><a href="#t1548906162056300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">03:42:42</span>             steveb8n </span><span>I’m having trouble with a recursive requirement. Here’s the example:
</span><pre>(-&gt;&gt; {:gender :male
        :type    :person
        :name    &quot;Luke&quot;
        :mother  {:gender :female
                  :type :person
                  :name &quot;Padme&quot;}
        :friends [{:gender :male
                   :type :person
                   :name &quot;Han&quot;}
                  {:gender :male
                   :type :person
                   :name &quot;Chewbacca&quot;}]
        :mentors {:type   :group
                  :people [{:gender :male
                            :type :person
                            :name &quot;Obiwan&quot;}
                           {:gender :male
                            :type :person
                            :name &quot;Yoda&quot;}]}}
       (select [(recursive-path [] p
                                (if-path (fn [v] (and (map? v) (:gender v)))
                                         (continue-then-stay (multi-path [(must :friends) ALL]
                                                                         [MAP-VALS #(:gender %)])
                                                             p)))]))
</pre><span>
=&gt;
</span><pre>[{:gender :male, :type :person, :name &quot;Han&quot;}
 {:gender :male, :type :person, :name &quot;Chewbacca&quot;}
 {:gender :female, :type :person, :name &quot;Padme&quot;}
 {:gender :male,
  :type :person,
  :name &quot;Luke&quot;,
  :mother {:gender :female, :type :person, :name &quot;Padme&quot;},
  :friends [{:gender :male, :type :person, :name &quot;Han&quot;} {:gender :male, :type :person, :name &quot;Chewbacca&quot;}],
  :mentors {:type :group,
            :people [{:gender :male, :type :person, :name &quot;Obiwan&quot;} {:gender :male, :type :person, :name &quot;Yoda&quot;}]}}]
</pre><span>

How can I get it to also return the mentors? They are :persons as well</span></div><div id="t1548906362057700" t="2019-01-31 03:46:02 steveb8n multi-path only seems to support 2 variations. I guess another way of asking this is how can I combine the selections of 3 paths into 1?"><a href="#t1548906362057700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">03:46:02</span>             steveb8n </span><span>multi-path only seems to support 2 variations. I guess another way of asking this is how can I combine the selections of 3 paths into 1?</span></div><div id="t1548914227060000" t="2019-01-31 05:57:07 steveb8n One way would be to use a clojure.walk to extract all :person maps and wrap that in a specter nav (maybe view). I can’t use specter/walker because it stops on matches in each branch so it would only return 1 mentor. ideally I’d like some specter native nav composition but can’t see how."><a href="#t1548914227060000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">05:57:07</span>             steveb8n </span><span>One way would be to use a clojure.walk to extract all :person maps and wrap that in a specter nav (maybe view). I can’t use specter/walker because it stops on matches in each branch so it would only return 1 mentor. ideally I’d like some specter native nav composition but can’t see how.</span></div><div id="t1548920080060600" t="2019-01-31 07:34:40 nathanmarz @steveb8n I think you&apos;re looking for:
 (def PEOPLE
  (recursive-path [] p
    (continue-then-stay
      (multi-path
        (must :mother)
        (must :father)
        [(must :friends) ALL]
        [(must :mentors) :people ALL]
        )
      p
      )))
"><a href="#t1548920080060600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">07:34:40</span>           nathanmarz </span><span>@steveb8n I think you&apos;re looking for:
</span><pre>(def PEOPLE
  (recursive-path [] p
    (continue-then-stay
      (multi-path
        (must :mother)
        (must :father)
        [(must :friends) ALL]
        [(must :mentors) :people ALL]
        )
      p
      )))
</pre></div><div id="t1548920110060700" t="2019-01-31 07:35:10 steveb8n thanks. let me try that"><a href="#t1548920110060700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">07:35:10</span>                  steveb8n </span><span>thanks. let me try that</span></div><div id="t1548920216060900" t="2019-01-31 07:36:56 steveb8n awesome. works like a charm."><a href="#t1548920216060900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-31</span> <span class="t" onclick="H(this)">07:36:56</span>                  steveb8n </span><span>awesome. works like a charm.</span></div><div id="t1550297424000600" t="2019-02-16 06:10:24 vigilancetech any idea why I&apos;d be getting this?

 ------ WARNING #1 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1275:19
--------------------------------------------------------------------------------
1272 |           ns (namespace structure)]
1273 |       (cond (keyword? structure) (keyword ns new-name)
1274 |             (symbol? structure) (symbol ns new-name)
1275 |             :else (i/throw-illegal &quot;NAME can only be used on symbols or keywords - &quot; st
ructure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1276 |             ))))
1277 |
1278 | (defnav ^{:doc &quot;Navigates to the namespace portion of the keyword or symbol&quot;}
1279 |   NAMESPACE
--------------------------------------------------------------------------------

------ WARNING #2 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1288:19
--------------------------------------------------------------------------------
1285 |           new-ns (next-fn (namespace structure))]
1286 |       (cond (keyword? structure) (keyword new-ns name)
1287 |             (symbol? structure) (symbol new-ns name)
1288 |             :else (i/throw-illegal &quot;NAMESPACE can only be used on symbols or keywords -
 &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1289 |             ))))
1290 |
1291 | (defdynamicnav
1292 |   ^{:doc &quot;Adds the result of running select with the given path on the
--------------------------------------------------------------------------------
"><a href="#t1550297424000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-16</span> <span class="t" onclick="H(this)">06:10:24</span>        vigilancetech </span><span>any idea why I&apos;d be getting this?

</span><pre>------ WARNING #1 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1275:19
--------------------------------------------------------------------------------
1272 |           ns (namespace structure)]
1273 |       (cond (keyword? structure) (keyword ns new-name)
1274 |             (symbol? structure) (symbol ns new-name)
1275 |             :else (i/throw-illegal &quot;NAME can only be used on symbols or keywords - &quot; st
ructure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1276 |             ))))
1277 |
1278 | (defnav ^{:doc &quot;Navigates to the namespace portion of the keyword or symbol&quot;}
1279 |   NAMESPACE
--------------------------------------------------------------------------------

------ WARNING #2 --------------------------------------------------------------
 File: com/rpl/specter.cljc:1288:19
--------------------------------------------------------------------------------
1285 |           new-ns (next-fn (namespace structure))]
1286 |       (cond (keyword? structure) (keyword new-ns name)
1287 |             (symbol? structure) (symbol new-ns name)
1288 |             :else (i/throw-illegal &quot;NAMESPACE can only be used on symbols or keywords -
 &quot; structure)
-------------------------^------------------------------------------------------
 Use of undeclared Var com.rpl.specter/java
--------------------------------------------------------------------------------
1289 |             ))))
1290 |
1291 | (defdynamicnav
1292 |   ^{:doc &quot;Adds the result of running select with the given path on the
--------------------------------------------------------------------------------
</pre></div><div id="t1550297463000900" t="2019-02-16 06:11:03 vigilancetech this is a project under shadow-cljs"><a href="#t1550297463000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-16</span> <span class="t" onclick="H(this)">06:11:03</span>        vigilancetech </span><span>this is a project under shadow-cljs</span></div><div id="t1550303780001700" t="2019-02-16 07:56:20 vigilancetech okay, I got it to go away by running the latest snapshot.   Any idea when that version will be un-snapshotted so my program doesn&apos;t break again here in a few weeks?"><a href="#t1550303780001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-16</span> <span class="t" onclick="H(this)">07:56:20</span>        vigilancetech </span><span>okay, I got it to go away by running the latest snapshot.   Any idea when that version will be un-snapshotted so my program doesn&apos;t break again here in a few weeks?</span></div><div id="t1550543636002500" t="2019-02-19 02:33:56 axrs Is it possible to insert a value after a predicate match with specter? I thought  AFTER-ELEM  would work, but it converts map to a sequence  ([:spec :test-2] :inserted) 

Something like:
 (sp/setval 
  [sp/ALL (comp (partial = :test-2) :spec) sp/AFTER] 
  :inserted 
  [{:spec :test} {:spec :test-2} {:spec :test-3}])
 
I&apos;m looking for the result to be:
 [{:spec :test} {:spec :test-2} :inserted {:spec :test-3}]"><a href="#t1550543636002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-19</span> <span class="t" onclick="H(this)">02:33:56</span>                 axrs </span><span>Is it possible to insert a value after a predicate match with specter? I thought </span><code>AFTER-ELEM</code><span> would work, but it converts map to a sequence </span><code>([:spec :test-2] :inserted)</code><span>

Something like:
</span><pre>(sp/setval 
  [sp/ALL (comp (partial = :test-2) :spec) sp/AFTER] 
  :inserted 
  [{:spec :test} {:spec :test-2} {:spec :test-3}])
</pre><span>
I&apos;m looking for the result to be:
</span><code>[{:spec :test} {:spec :test-2} :inserted {:spec :test-3}]</code></div><div id="t1550582437003100" t="2019-02-19 13:20:37 nathanmarz @axrs  ALL  navigates you into the value, so you&apos;re no longer in the context of the sequence"><a href="#t1550582437003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-19</span> <span class="t" onclick="H(this)">13:20:37</span>           nathanmarz </span><span>@axrs </span><code>ALL</code><span> navigates you into the value, so you&apos;re no longer in the context of the sequence</span></div><div id="t1550582461003700" t="2019-02-19 13:21:01 nathanmarz you can accomplish your goal by using the zipper navigators"><a href="#t1550582461003700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-19</span> <span class="t" onclick="H(this)">13:21:01</span>           nathanmarz </span><span>you can accomplish your goal by using the zipper navigators</span></div><div id="t1550749704000700" t="2019-02-21 11:48:24 roklenarcic Is there some way to say  STAY if SUBPATH 1 and SUBPATH 2 match"><a href="#t1550749704000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">11:48:24</span>          roklenarcic </span><span>Is there some way to say </span><code>STAY if SUBPATH 1 and SUBPATH 2 match</code></div><div id="t1550749723001200" t="2019-02-21 11:48:43 roklenarcic I cannot find a way to check if two subpaths are both present"><a href="#t1550749723001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">11:48:43</span>          roklenarcic </span><span>I cannot find a way to check if two subpaths are both present</span></div><div id="t1550749756001800" t="2019-02-21 11:49:16 roklenarcic to implement collecting an item if prop1 = x and prop2 = y"><a href="#t1550749756001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">11:49:16</span>          roklenarcic </span><span>to implement collecting an item if prop1 = x and prop2 = y</span></div><div id="t1550750653002200" t="2019-02-21 12:04:13 roklenarcic used multiple  selected?  to accomplish that"><a href="#t1550750653002200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">12:04:13</span>          roklenarcic </span><span>used multiple </span><code>selected?</code><span> to accomplish that</span></div><div id="t1550788186004500" t="2019-02-21 22:29:46 eoliphant hi I’m trying to figure out how exactly INDEXED-VALS works.  Like the example .  For say  [0 1 2 3 4] , I want to move say the 3 at index 3, to say the 0th or some other index.  The select is clear to me, basically like  map-indexed .  But I’m not quite grokking what’s happening in the  setval  example.

This looks like it would do something like set all the indicies to 0.    (sp/setval [sp/INDEXED-VALS sp/FIRST] 0 [0 1 2 3 4])   but say  (sp/setval [sp/INDEXED-VALS sp/FIRST 2] 0 [0 1 2 3 4])  would move 2 to the front of the list.  That’s obviously not how it works lol"><a href="#t1550788186004500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">22:29:46</span>            eoliphant </span><span>hi I’m trying to figure out how exactly INDEXED-VALS works.  Like the example .  For say </span><code>[0 1 2 3 4]</code><span>, I want to move say the 3 at index 3, to say the 0th or some other index.  The select is clear to me, basically like </span><code>map-indexed</code><span>.  But I’m not quite grokking what’s happening in the </span><code>setval</code><span> example.

This looks like it would do something like set all the indicies to 0.   </span><code>(sp/setval [sp/INDEXED-VALS sp/FIRST] 0 [0 1 2 3 4])</code><span>  but say </span><code>(sp/setval [sp/INDEXED-VALS sp/FIRST 2] 0 [0 1 2 3 4])</code><span> would move 2 to the front of the list.  That’s obviously not how it works lol</span></div><div id="t1550789866005300" t="2019-02-21 22:57:46 nathanmarz it traverses the values in order, so it moves them all to index 0 in order, having the effect of reversing the vector"><a href="#t1550789866005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">22:57:46</span>           nathanmarz </span><span>it traverses the values in order, so it moves them all to index 0 in order, having the effect of reversing the vector</span></div><div id="t1550789877005600" t="2019-02-21 22:57:57 nathanmarz you can move just one particular value like this:
 user=&gt; (setval [INDEXED-VALS (selected? LAST (pred= 3)) FIRST] 0 [0 1 2 3 4])
[3 0 1 2 4]
"><a href="#t1550789877005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">22:57:57</span>           nathanmarz </span><span>you can move just one particular value like this:
</span><pre>user=&gt; (setval [INDEXED-VALS (selected? LAST (pred= 3)) FIRST] 0 [0 1 2 3 4])
[3 0 1 2 4]
</pre></div><div id="t1550789912006100" t="2019-02-21 22:58:32 nathanmarz but  index-nav  is better for moving one value at a specific position:
 user=&gt; (setval (index-nav 3) 0 [0 1 2 3 4])
[3 0 1 2 4]
"><a href="#t1550789912006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span> <span class="t" onclick="H(this)">22:58:32</span>           nathanmarz </span><span>but </span><code>index-nav</code><span> is better for moving one value at a specific position:
</span><pre>user=&gt; (setval (index-nav 3) 0 [0 1 2 3 4])
[3 0 1 2 4]
</pre></div><div id="t1550794692006700" t="2019-02-22 00:18:12 eoliphant gotcha that makes sense., thanks!"><a href="#t1550794692006700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-22</span> <span class="t" onclick="H(this)">00:18:12</span>            eoliphant </span><span>gotcha that makes sense., thanks!</span></div><div id="t1551174468008700" t="2019-02-26 09:47:48 miikka We tried to use  (transiorm [ALL] ...)  with Instaparse&apos;s AutoFlattenSeq, but the results are in reverse order – probably because if you  into  into an empty AutoFlattenSeq, it behaves like a linked list and the results are in the reverse order."><a href="#t1551174468008700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span> <span class="t" onclick="H(this)">09:47:48</span>               miikka </span><span>We tried to use </span><code>(transiorm [ALL] ...)</code><span> with Instaparse&apos;s AutoFlattenSeq, but the results are in reverse order – probably because if you </span><code>into</code><span> into an empty AutoFlattenSeq, it behaves like a linked list and the results are in the reverse order.</span></div><div id="t1551174529010000" t="2019-02-26 09:48:49 miikka We solved it by making  a custom navigator with  (transform* [this structure next-fn] (map next-fn structure))  – we do not care about preserving the type – but I&apos;m wondering if there&apos;s a way to make  ALL  work with AutoFlattenSeq?"><a href="#t1551174529010000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span> <span class="t" onclick="H(this)">09:48:49</span>               miikka </span><span>We solved it by making  a custom navigator with </span><code>(transform* [this structure next-fn] (map next-fn structure))</code><span> – we do not care about preserving the type – but I&apos;m wondering if there&apos;s a way to make </span><code>ALL</code><span> work with AutoFlattenSeq?</span></div><div id="t1551183998010300" t="2019-02-26 12:26:38 nathanmarz @miikka yes, you can extend  com.rpl.specter.navs/AllTransformProtocol"><a href="#t1551183998010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span> <span class="t" onclick="H(this)">12:26:38</span>           nathanmarz </span><span>@miikka yes, you can extend </span><code>com.rpl.specter.navs/AllTransformProtocol</code></div><div id="t1551197018010500" t="2019-02-26 16:03:38 miikka Ah, thanks"><a href="#t1551197018010500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span> <span class="t" onclick="H(this)">16:03:38</span>               miikka </span><span>Ah, thanks</span></div><div id="t1551437844000400" t="2019-03-01 10:57:24 lxsli Nathan are you writing a book on how to use Specter? Because I&apos;d buy the hell out of that"><a href="#t1551437844000400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-01</span> <span class="t" onclick="H(this)">10:57:24</span>                lxsli </span><span>Nathan are you writing a book on how to use Specter? Because I&apos;d buy the hell out of that</span></div><div id="t1551454781000900" t="2019-03-01 15:39:41 nathanmarz @alee thanks, but I&apos;m done writing books for awhile..."><a href="#t1551454781000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-01</span> <span class="t" onclick="H(this)">15:39:41</span>           nathanmarz </span><span>@alee thanks, but I&apos;m done writing books for awhile...</span></div><div id="t1551665502002000" t="2019-03-04 02:11:42 idiomancy any libraries out there for navigating core.async channels with specter?"><a href="#t1551665502002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">02:11:42</span>            idiomancy </span><span>any libraries out there for navigating core.async channels with specter?</span></div><div id="t1551702953002700" t="2019-03-04 12:35:53 akond does specter handle refs the way it handles atoms?"><a href="#t1551702953002700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">12:35:53</span>                akond </span><span>does specter handle refs the way it handles atoms?</span></div><div id="t1551702976003000" t="2019-03-04 12:36:16 akond i mean how do i change a ref?"><a href="#t1551702976003000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">12:36:16</span>                akond </span><span>i mean how do i change a ref?</span></div><div id="t1551704146003800" t="2019-03-04 12:55:46 akond (dosync
    (alter storage #(setval [...] (merge-with + field offset) %))) 
does the job, but maybe there is a nicer way to do this?"><a href="#t1551704146003800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">12:55:46</span>                akond </span><pre>(dosync
    (alter storage #(setval [...] (merge-with + field offset) %)))</pre><span>
does the job, but maybe there is a nicer way to do this?</span></div><div id="t1551739788004200" t="2019-03-04 22:49:48 nathanmarz @akond there&apos;s no built-in navigator for refs"><a href="#t1551739788004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">22:49:48</span>           nathanmarz </span><span>@akond there&apos;s no built-in navigator for refs</span></div><div id="t1551739791004400" t="2019-03-04 22:49:51 nathanmarz you&apos;d have to make your own"><a href="#t1551739791004400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-04</span> <span class="t" onclick="H(this)">22:49:51</span>           nathanmarz </span><span>you&apos;d have to make your own</span></div><div id="t1551761781005400" t="2019-03-05 04:56:21 akond is there a reason for not having one or it just happend?"><a href="#t1551761781005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">04:56:21</span>                akond </span><span>is there a reason for not having one or it just happend?</span></div><div id="t1551776015006100" t="2019-03-05 08:53:35 sogaiu @alee perhaps you are already familiar with the following?   https://leanpub.com/specter/read"><a href="#t1551776015006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">08:53:35</span>               sogaiu </span><span>@alee perhaps you are already familiar with the following?  </span><a href="https://leanpub.com/specter/read" target="_blank">https://leanpub.com/specter/read</a></div><div id="t1551776163007100" t="2019-03-05 08:56:03 lxsli @sogaiu yes, I&apos;m afraid I didn&apos;t find it very useful. It&apos;s not finished by any stretch - it doesn&apos;t cover many of the navigators or even the macros"><a href="#t1551776163007100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">08:56:03</span>                lxsli </span><span>@sogaiu yes, I&apos;m afraid I didn&apos;t find it very useful. It&apos;s not finished by any stretch - it doesn&apos;t cover many of the navigators or even the macros</span></div><div id="t1551776211007600" t="2019-03-05 08:56:51 lxsli I&apos;m unconvinced that digging into the internals is the best way to understand it either"><a href="#t1551776211007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">08:56:51</span>                lxsli </span><span>I&apos;m unconvinced that digging into the internals is the best way to understand it either</span></div><div id="t1551776459010900" t="2019-03-05 09:00:59 lxsli I&apos;m most interested in a cookbook. For example one of my questions is &quot;how much should I do in one Specter call?&quot;. I&apos;ve had more luck composing calls than building super-paths so far.
Dynamic paths seem very powerful, I&apos;d like to see some examples of those. Same for multi-path.
I have yet to figure out when to use STAY, CONTINUE etc. Just about getting the hang of collection."><a href="#t1551776459010900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">09:00:59</span>                lxsli </span><span>I&apos;m most interested in a cookbook. For example one of my questions is &quot;how much should I do in one Specter call?&quot;. I&apos;ve had more luck composing calls than building super-paths so far.
Dynamic paths seem very powerful, I&apos;d like to see some examples of those. Same for multi-path.
I have yet to figure out when to use STAY, CONTINUE etc. Just about getting the hang of collection.</span></div><div id="t1551780463015500" t="2019-03-05 10:07:43 sogaiu @alee when working on a port to clojure clr, i found that the tests were quite extensive.  have you had a look at those?  fwiw, i&apos;m definitely not a seasoned specter user :)"><a href="#t1551780463015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">10:07:43</span>               sogaiu </span><span>@alee when working on a port to clojure clr, i found that the tests were quite extensive.  have you had a look at those?  fwiw, i&apos;m definitely not a seasoned specter user :)</span></div><div id="t1551780589015800" t="2019-03-05 10:09:49 lxsli I&apos;ll check them out when I have time, good idea"><a href="#t1551780589015800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-05</span> <span class="t" onclick="H(this)">10:09:49</span>                lxsli </span><span>I&apos;ll check them out when I have time, good idea</span></div><div id="t1555053697000900" t="2019-04-12 07:21:37 lxsli java.lang.UnsupportedOperationException: Can&apos;t create empty: user_api.records.FrobRec
	at user_api.records.FrobRec.empty(records.clj:367)
	at clojure.core$empty.invokeStatic(core.clj:5247)
	at clojure.core$empty.invoke(core.clj:5241)
	at com.rpl.specter.navs$eval2165$fn__2170.invoke(navs.cljc:372)
	at com.rpl.specter.navs$eval2099$fn__2113$G__2090__2120.invoke(navs.cljc:222)
	at com.rpl.specter$reify__2852.transform_STAR_(specter.cljc:718)
    ... 

Anything that can be done about this? For now I&apos;m just passing  (into {} rec)  instead of simply  rec"><a href="#t1555053697000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-12</span> <span class="t" onclick="H(this)">07:21:37</span>                lxsli </span><pre>java.lang.UnsupportedOperationException: Can&apos;t create empty: user_api.records.FrobRec
	at user_api.records.FrobRec.empty(records.clj:367)
	at clojure.core$empty.invokeStatic(core.clj:5247)
	at clojure.core$empty.invoke(core.clj:5241)
	at com.rpl.specter.navs$eval2165$fn__2170.invoke(navs.cljc:372)
	at com.rpl.specter.navs$eval2099$fn__2113$G__2090__2120.invoke(navs.cljc:222)
	at com.rpl.specter$reify__2852.transform_STAR_(specter.cljc:718)
    ...</pre><span>

Anything that can be done about this? For now I&apos;m just passing </span><code>(into {} rec)</code><span> instead of simply </span><code>rec</code></div><div id="t1555088261001300" t="2019-04-12 16:57:41 nathanmarz what&apos;s your path?"><a href="#t1555088261001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-12</span> <span class="t" onclick="H(this)">16:57:41</span>           nathanmarz </span><span>what&apos;s your path?</span></div><div id="t1557115377003700" t="2019-05-06 04:02:57 theeternalpulse If I am doing a transform with multi/path how can I refer to the las tthing selected before that path for example
 (multi-transform [LAST
                    (multi-path [:a (terminal #_something-here-to-reference-LAST-object)]
                                [:b (terminal dec)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}])"><a href="#t1557115377003700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">04:02:57</span>      theeternalpulse </span><span>If I am doing a transform with multi/path how can I refer to the las tthing selected before that path for example
</span><pre>(multi-transform [LAST
                    (multi-path [:a (terminal #_something-here-to-reference-LAST-object)]
                                [:b (terminal dec)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}])</pre></div><div id="t1557115409004400" t="2019-05-06 04:03:29 theeternalpulse how can In the terminal statement can I say &quot;give me the LAST from the previous selector before I started branching off&quot;"><a href="#t1557115409004400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">04:03:29</span>      theeternalpulse </span><span>how can In the terminal statement can I say &quot;give me the LAST from the previous selector before I started branching off&quot;</span></div><div id="t1557115986005000" t="2019-05-06 04:13:06 theeternalpulse do I have ot just have a path that is like  [(terminal #(update % :a some-fn (:c %)...)"><a href="#t1557115986005000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">04:13:06</span>      theeternalpulse </span><span>do I have ot just have a path that is like </span><code>[(terminal #(update % :a some-fn (:c %)...)</code></div><div id="t1557116151005400" t="2019-05-06 04:15:51 theeternalpulse (multi-transform [LAST
                    (multi-path [(terminal #(update % :a + (:b %)))]
                                [:b (terminal dec)]
                                [:c (terminal-val 123)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}]) 
seems to work but wonder if there&apos;s a more specter way of doing that"><a href="#t1557116151005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">04:15:51</span>           theeternalpulse </span><pre>(multi-transform [LAST
                    (multi-path [(terminal #(update % :a + (:b %)))]
                                [:b (terminal dec)]
                                [:c (terminal-val 123)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}])</pre><span>
seems to work but wonder if there&apos;s a more specter way of doing that</span></div><div id="t1557148796006200" t="2019-05-06 13:19:56 nathanmarz @theeternalpulse use one of the value collection navs, like  collect  or  collect-one"><a href="#t1557148796006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">13:19:56</span>           nathanmarz </span><span>@theeternalpulse use one of the value collection navs, like </span><code>collect</code><span> or </span><code>collect-one</code></div><div id="t1557152528006800" t="2019-05-06 14:22:08 theeternalpulse Ah I see, now that makes the subsequent multipath fns have to take two arguments"><a href="#t1557152528006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">14:22:08</span>      theeternalpulse </span><span>Ah I see, now that makes the subsequent multipath fns have to take two arguments</span></div><div id="t1557154955007600" t="2019-05-06 15:02:35 theeternalpulse no I tried it, nice solution, need to read through these again,  (multi-transform [LAST
                    (multi-path
                     [(collect-one :b) :a (terminal +)]
                     [:b (terminal dec)]
                     [:c (terminal-val 123)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}])"><a href="#t1557154955007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-06</span> <span class="t" onclick="H(this)">15:02:35</span>      theeternalpulse </span><span>no I tried it, nice solution, need to read through these again, </span><pre>(multi-transform [LAST
                    (multi-path
                     [(collect-one :b) :a (terminal +)]
                     [:b (terminal dec)]
                     [:c (terminal-val 123)])]
                   [1 2 3 4 5 {:a 1 :b 5 :c nil}])</pre></div><div id="t1558890665002700" t="2019-05-26 17:11:05 suskeyhose Is there an equivalent to select-keys? I&apos;m currently trying to translate some of my vanilla clojure code to using specter (great library by the way, I use it in almost all my projects), and trying to navigate to a view of all the values in a map where the key for it is contained in some collection seems to me to be a not-uncommon usecase. I&apos;ve tried a couple of solutions for it, from using  (apply multi-path (map keypath coll))  to  (filterer (comp set-name first))  and no matter what I do, the performance is always at least twice as poor as just calling  select-keys . I&apos;ve been perusing the docs, but nothing is jumping out at me."><a href="#t1558890665002700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-26</span> <span class="t" onclick="H(this)">17:11:05</span>           suskeyhose </span><span>Is there an equivalent to select-keys? I&apos;m currently trying to translate some of my vanilla clojure code to using specter (great library by the way, I use it in almost all my projects), and trying to navigate to a view of all the values in a map where the key for it is contained in some collection seems to me to be a not-uncommon usecase. I&apos;ve tried a couple of solutions for it, from using </span><code>(apply multi-path (map keypath coll))</code><span> to </span><code>(filterer (comp set-name first))</code><span> and no matter what I do, the performance is always at least twice as poor as just calling </span><code>select-keys</code><span>. I&apos;ve been perusing the docs, but nothing is jumping out at me.</span></div><div id="t1558891897003000" t="2019-05-26 17:31:37 suskeyhose I see that  submap  is what I was looking for"><a href="#t1558891897003000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-26</span> <span class="t" onclick="H(this)">17:31:37</span>           suskeyhose </span><span>I see that </span><code>submap</code><span> is what I was looking for</span></div><div id="t1558892017003800" t="2019-05-26 17:33:37 suskeyhose submap  has much more acceptable performance, being only slightly slower than the  select-keys  implementation. Again, thanks for the library!"><a href="#t1558892017003800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-26</span> <span class="t" onclick="H(this)">17:33:37</span>           suskeyhose </span><code>submap</code><span> has much more acceptable performance, being only slightly slower than the </span><code>select-keys</code><span> implementation. Again, thanks for the library!</span></div><div id="t1559002056004200" t="2019-05-28 00:07:36 nathanmarz @suskeyhose thanks, glad you&apos;re finding it useful"><a href="#t1559002056004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-28</span> <span class="t" onclick="H(this)">00:07:36</span>           nathanmarz </span><span>@suskeyhose thanks, glad you&apos;re finding it useful</span></div><div id="t1559766329001000" t="2019-06-05 20:25:29 lvh Is there a way to run specter but without eval being called ever (I&apos;m trying to get it working under Graal -- and for my recursive path, closed-code still ends up getting called, and that relies on eval even when using  select* )"><a href="#t1559766329001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-05</span> <span class="t" onclick="H(this)">20:25:29</span>                  lvh </span><span>Is there a way to run specter but without eval being called ever (I&apos;m trying to get it working under Graal -- and for my recursive path, closed-code still ends up getting called, and that relies on eval even when using </span><code>select*</code><span>)</span></div><div id="t1559767596001600" t="2019-06-05 20:46:36 nathanmarz @lvh if you avoid all the macros eval won&apos;t be called"><a href="#t1559767596001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-05</span> <span class="t" onclick="H(this)">20:46:36</span>           nathanmarz </span><span>@lvh if you avoid all the macros eval won&apos;t be called</span></div><div id="t1559767601001800" t="2019-06-05 20:46:41 nathanmarz recursive-path  calls down to  path"><a href="#t1559767601001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-05</span> <span class="t" onclick="H(this)">20:46:41</span>           nathanmarz </span><code>recursive-path</code><span> calls down to </span><code>path</code></div><div id="t1559767613002100" t="2019-06-05 20:46:53 nathanmarz which is what generates code that calls eval"><a href="#t1559767613002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-05</span> <span class="t" onclick="H(this)">20:46:53</span>           nathanmarz </span><span>which is what generates code that calls eval</span></div><div id="t1559767706003100" t="2019-06-05 20:48:26 nathanmarz recursive-path  is just a helper, so you could probably construct a recursive path with no dynamic parameters by making your own helper"><a href="#t1559767706003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-05</span> <span class="t" onclick="H(this)">20:48:26</span>           nathanmarz </span><code>recursive-path</code><span> is just a helper, so you could probably construct a recursive path with no dynamic parameters by making your own helper</span></div><div id="t1560886499006000" t="2019-06-18 19:34:59 lvh Is there a way to &quot;prime&quot; a navigator applied to a data structure? Context: I have a data structure which I&apos;ll be calling setval on a pile of times, always with different values but always at the same locations, so I&apos;m wondering if there are efficiency gains to be had by only navigating once and then reusing that. Disclaimer: I don&apos;t understand the caching magic at all so maybe specter is essentially already doing that?"><a href="#t1560886499006000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-18</span> <span class="t" onclick="H(this)">19:34:59</span>                  lvh </span><span>Is there a way to &quot;prime&quot; a navigator applied to a data structure? Context: I have a data structure which I&apos;ll be calling setval on a pile of times, always with different values but always at the same locations, so I&apos;m wondering if there are efficiency gains to be had by only navigating once and then reusing that. Disclaimer: I don&apos;t understand the caching magic at all so maybe specter is essentially already doing that?</span></div><div id="t1560898069007300" t="2019-06-18 22:47:49 nathanmarz @lvh the inline compiler is already ensuring that the most optimal path possible is used for all runs of the callsite after the first"><a href="#t1560898069007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-18</span> <span class="t" onclick="H(this)">22:47:49</span>           nathanmarz </span><span>@lvh the inline compiler is already ensuring that the most optimal path possible is used for all runs of the callsite after the first</span></div><div id="t1560898121007600" t="2019-06-18 22:48:41 nathanmarz you can tighten things up for certain cases by using  ^:direct-nav"><a href="#t1560898121007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-18</span> <span class="t" onclick="H(this)">22:48:41</span>           nathanmarz </span><span>you can tighten things up for certain cases by using </span><code>^:direct-nav</code></div><div id="t1560902038008000" t="2019-06-18 23:53:58 lvh Awesome, thanks :)"><a href="#t1560902038008000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-18</span> <span class="t" onclick="H(this)">23:53:58</span>                  lvh </span><span>Awesome, thanks :)</span></div><div id="t1562423725008400" t="2019-07-06 14:35:25 oskarkv I don&apos;t understand  compact .  😛"><a href="#t1562423725008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-06</span> <span class="t" onclick="H(this)">14:35:25</span>              oskarkv </span><span>I don&apos;t understand </span><code>compact</code><span>. </span><b>😛</b></div><div id="t1562425255009400" t="2019-07-06 15:00:55 oskarkv Can anyone explain this?
 &gt; (s/setval (s/regex-nav #&quot;(?&lt;=( |^))[a-z]&quot;) &quot;_&quot; &quot;hello world&quot;)
&quot;_ello _orld&quot;
&gt; (s/select (s/regex-nav #&quot;(?&lt;=( |^))[a-z]&quot;) &quot;hello world&quot;)
[[&quot;h&quot; &quot;&quot;] [&quot;e&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;o&quot; &quot;&quot;] [&quot;w&quot; &quot; &quot;] [&quot;o&quot; &quot;&quot;] [&quot;r&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;d&quot; &quot;&quot;]]
"><a href="#t1562425255009400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-06</span> <span class="t" onclick="H(this)">15:00:55</span>              oskarkv </span><span>Can anyone explain this?
</span><pre>&gt; (s/setval (s/regex-nav #&quot;(?&lt;=( |^))[a-z]&quot;) &quot;_&quot; &quot;hello world&quot;)
&quot;_ello _orld&quot;
&gt; (s/select (s/regex-nav #&quot;(?&lt;=( |^))[a-z]&quot;) &quot;hello world&quot;)
[[&quot;h&quot; &quot;&quot;] [&quot;e&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;o&quot; &quot;&quot;] [&quot;w&quot; &quot; &quot;] [&quot;o&quot; &quot;&quot;] [&quot;r&quot; &quot;&quot;] [&quot;l&quot; &quot;&quot;] [&quot;d&quot; &quot;&quot;]]
</pre></div><div id="t1562426324010100" t="2019-07-06 15:18:44 oskarkv Oh, it&apos;s because  re-seq  looks at &quot;hello world&quot;, then &quot;ello world&quot;, etc."><a href="#t1562426324010100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-06</span> <span class="t" onclick="H(this)">15:18:44</span>              oskarkv </span><span>Oh, it&apos;s because </span><code>re-seq</code><span> looks at &quot;hello world&quot;, then &quot;ello world&quot;, etc.</span></div><div id="t1562437326010600" t="2019-07-06 18:22:06 currentoor what can you do with the result of  traverse  that you can’t do with the result of  select ?"><a href="#t1562437326010600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-06</span> <span class="t" onclick="H(this)">18:22:06</span>           currentoor </span><span>what can you do with the result of </span><code>traverse</code><span> that you can’t do with the result of </span><code>select</code><span>?</span></div><div id="t1562521732011500" t="2019-07-07 17:48:52 currentoor also, is there a simple way, given a sequence, to remove the first match and leave the rest?"><a href="#t1562521732011500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">17:48:52</span>           currentoor </span><span>also, is there a simple way, given a sequence, to remove the first match and leave the rest?</span></div><div id="t1562521750011700" t="2019-07-07 17:49:10 currentoor (specter/setval [specter/ALL (specter/pred= 1)] specter/NONE [1 2 1 3])"><a href="#t1562521750011700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">17:49:10</span>           currentoor </span><code>(specter/setval [specter/ALL (specter/pred= 1)] specter/NONE [1 2 1 3])</code></div><div id="t1562521757012000" t="2019-07-07 17:49:17 currentoor this removes all the matches"><a href="#t1562521757012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">17:49:17</span>           currentoor </span><span>this removes all the matches</span></div><div id="t1562526392012500" t="2019-07-07 19:06:32 oskarkv @currentoor In that case you can do  (s/setval [(s/filterer (s/pred= 1)) s/FIRST] s/NONE [1 2 1 3])"><a href="#t1562526392012500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:06:32</span>              oskarkv </span><span>@currentoor In that case you can do </span><code>(s/setval [(s/filterer (s/pred= 1)) s/FIRST] s/NONE [1 2 1 3])</code></div><div id="t1562526406012700" t="2019-07-07 19:06:46 currentoor cool thanks!"><a href="#t1562526406012700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:06:46</span>           currentoor </span><span>cool thanks!</span></div><div id="t1562526502013100" t="2019-07-07 19:08:22 oskarkv Or, hm it doesn&apos;t work as I expected"><a href="#t1562526502013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:08:22</span>              oskarkv </span><span>Or, hm it doesn&apos;t work as I expected</span></div><div id="t1562526759013600" t="2019-07-07 19:12:39 oskarkv game.core&gt; (s/setval [(s/filterer (s/pred= 1)) s/FIRST] s/NONE [1 2 1 3])
[1 2 3]
 
I would expect  [2 1 3]  out"><a href="#t1562526759013600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:12:39</span>              oskarkv </span><pre>game.core&gt; (s/setval [(s/filterer (s/pred= 1)) s/FIRST] s/NONE [1 2 1 3])
[1 2 3]
</pre><span>
I would expect </span><code>[2 1 3]</code><span> out</span></div><div id="t1562526774014000" t="2019-07-07 19:12:54 oskarkv @currentoor Did you notice?"><a href="#t1562526774014000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:12:54</span>              oskarkv </span><span>@currentoor Did you notice?</span></div><div id="t1562526868014200" t="2019-07-07 19:14:28 currentoor yeah i would too"><a href="#t1562526868014200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:14:28</span>           currentoor </span><span>yeah i would too</span></div><div id="t1562526892015000" t="2019-07-07 19:14:52 currentoor but actually i just need to remove one occurrence of an element"><a href="#t1562526892015000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:14:52</span>           currentoor </span><span>but actually i just need to remove one occurrence of an element</span></div><div id="t1562526896015200" t="2019-07-07 19:14:56 currentoor so this works"><a href="#t1562526896015200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:14:56</span>           currentoor </span><span>so this works</span></div><div id="t1562526899015400" t="2019-07-07 19:14:59 oskarkv hehe"><a href="#t1562526899015400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-07</span> <span class="t" onclick="H(this)">19:14:59</span>              oskarkv </span><span>hehe</span></div><div id="t1562549711016000" t="2019-07-08 01:35:11 nathanmarz @currentoor  traverse  is more efficient than  select  if you just want to reduce over the navigated values"><a href="#t1562549711016000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-08</span> <span class="t" onclick="H(this)">01:35:11</span>           nathanmarz </span><span>@currentoor </span><code>traverse</code><span> is more efficient than </span><code>select</code><span> if you just want to reduce over the navigated values</span></div><div id="t1562851234017600" t="2019-07-11 13:20:34 ben.mumford given a nested data structure (values could be strings, nil, vectors of maps or maps) what is the best way to prune the tree so that nil entries, empty map entries, empty vectors are removed?"><a href="#t1562851234017600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">13:20:34</span>          ben.mumford </span><span>given a nested data structure (values could be strings, nil, vectors of maps or maps) what is the best way to prune the tree so that nil entries, empty map entries, empty vectors are removed?</span></div><div id="t1562851309018500" t="2019-07-11 13:21:49 ben.mumford (do-something {:a {:aa 1}                                             
     :b {:ba -1                                             
         :bb 2                                              
         :bc nil
         :bd &quot;&quot;
         :be []
         :bf {}
         :bg {:bga nil}
         :bh [nil]
         :bi [{}]
         :bj [{:bja nil}]}
     :c nil
     :d &quot;&quot;
     :e []
     :f {}
     :g {:ga nil}
     :h [nil]
     :i [{}]
     :j [{:ja nil}]}
=&gt;
{:a {:aa 1} 
     :b {:ba -1 
         :bb 2}}
"><a href="#t1562851309018500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">13:21:49</span>          ben.mumford </span><pre>(do-something {:a {:aa 1}                                             
     :b {:ba -1                                             
         :bb 2                                              
         :bc nil
         :bd &quot;&quot;
         :be []
         :bf {}
         :bg {:bga nil}
         :bh [nil]
         :bi [{}]
         :bj [{:bja nil}]}
     :c nil
     :d &quot;&quot;
     :e []
     :f {}
     :g {:ga nil}
     :h [nil]
     :i [{}]
     :j [{:ja nil}]}
=&gt;
{:a {:aa 1} 
     :b {:ba -1 
         :bb 2}}
</pre></div><div id="t1562851369019000" t="2019-07-11 13:22:49 ben.mumford any help would be much appreciated  🙂"><a href="#t1562851369019000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">13:22:49</span>          ben.mumford </span><span>any help would be much appreciated </span><b>🙂</b></div><div id="t1562869459019500" t="2019-07-11 18:24:19 nathanmarz @ben.mumford620 here&apos;s how to do that:
 (def COMPACTED-VALS-PATH
  (recursive-path [] p
    (continue-then-stay
      (cond-path
        map? [(compact MAP-VALS) p]
        vector? [(compact ALL) p]
        ))))
        
(setval [COMPACTED-VALS-PATH #(or (nil? %) (= &quot;&quot; %))] NONE data)
"><a href="#t1562869459019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">18:24:19</span>           nathanmarz </span><span>@ben.mumford620 here&apos;s how to do that:
</span><pre>(def COMPACTED-VALS-PATH
  (recursive-path [] p
    (continue-then-stay
      (cond-path
        map? [(compact MAP-VALS) p]
        vector? [(compact ALL) p]
        ))))
        
(setval [COMPACTED-VALS-PATH #(or (nil? %) (= &quot;&quot; %))] NONE data)
</pre></div><div id="t1562916366021000" t="2019-07-12 07:26:06 ben.mumford cheers pal"><a href="#t1562916366021000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-12</span> <span class="t" onclick="H(this)">07:26:06</span>               ben.mumford </span><span>cheers pal</span></div><div id="t1562869556020400" t="2019-07-11 18:25:56 nathanmarz you can insert a  MAP-VALS  at the start of the path to make sure the top-level data structure stays an empty map instead of becoming NONE if everything gets compacted"><a href="#t1562869556020400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">18:25:56</span>           nathanmarz </span><span>you can insert a </span><code>MAP-VALS</code><span> at the start of the path to make sure the top-level data structure stays an empty map instead of becoming NONE if everything gets compacted</span></div><div id="t1562869673020700" t="2019-07-11 18:27:53 dharrigan that&apos;s pretty awesome"><a href="#t1562869673020700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-11</span> <span class="t" onclick="H(this)">18:27:53</span>            dharrigan </span><span>that&apos;s pretty awesome</span></div><div id="t1563360405028600" t="2019-07-17 10:46:45 donavan Hi, just started using Specter and so far it&apos;s been amazing. Replaced my naive handwritten code in less lines and it was faster!

One issue I&apos;m having though relates to CLJS not supporting  apply  with more than 21 args for  IFn  here:  https://github.com/clojure/clojurescript/blob/master/src/main/cljs/cljs/core.cljs#L2054  and  defdynamicnav  via  multi-path  whose var has meta (though I suspect the  IFn  limitation would be hit without  MetaFn  anyway).

So this is maybe an abuse of  multi-path  but I would like to dynamically create a collection of paths that may be bigger than the 21 count limit. Before I manually chunk the paths and apply them in stages I was wondering if anyone had noticed this before and had a simple workaround. Or maybe chunking the paths is the simple workaround..."><a href="#t1563360405028600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-17</span> <span class="t" onclick="H(this)">10:46:45</span>              donavan </span><span>Hi, just started using Specter and so far it&apos;s been amazing. Replaced my naive handwritten code in less lines and it was faster!

One issue I&apos;m having though relates to CLJS not supporting </span><code>apply</code><span> with more than 21 args for </span><code>IFn</code><span> here: </span><a href="https://github.com/clojure/clojurescript/blob/master/src/main/cljs/cljs/core.cljs#L2054" target="_blank">https://github.com/clojure/clojurescript/blob/master/src/main/cljs/cljs/core.cljs#L2054</a><span> and </span><code>defdynamicnav</code><span> via </span><code>multi-path</code><span> whose var has meta (though I suspect the </span><code>IFn</code><span> limitation would be hit without </span><code>MetaFn</code><span> anyway).

So this is maybe an abuse of </span><code>multi-path</code><span> but I would like to dynamically create a collection of paths that may be bigger than the 21 count limit. Before I manually chunk the paths and apply them in stages I was wondering if anyone had noticed this before and had a simple workaround. Or maybe chunking the paths is the simple workaround...</span></div><div id="t1563361090028800" t="2019-07-17 10:58:10 donavan Actually I can just reduce over the paths as that is what would happen with  (apply multi-path...  anyway!"><a href="#t1563361090028800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-17</span> <span class="t" onclick="H(this)">10:58:10</span>                   donavan </span><span>Actually I can just reduce over the paths as that is what would happen with </span><code>(apply multi-path...</code><span> anyway!</span></div><div id="t1563890114002900" t="2019-07-23 13:55:14 oskarkv I want to make a function that is kind of like  merge-with , but recursive, i.e. if I call this function, let&apos;s call it  f , like
 (f + {:a {:b 1 :c 2} :b {:d 4 :e 5}} {:a {:b 3 :c 3} :b {:d 5 :e 5}}) 
I want the output  {:a {:b 4 :c 5} :b {:d 9 :e 10}} 
Can specter help with that? I don&apos;t see how, but it&apos;s very possible I&apos;m wrong."><a href="#t1563890114002900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-23</span> <span class="t" onclick="H(this)">13:55:14</span>              oskarkv </span><span>I want to make a function that is kind of like </span><code>merge-with</code><span>, but recursive, i.e. if I call this function, let&apos;s call it </span><code>f</code><span>, like
</span><pre>(f + {:a {:b 1 :c 2} :b {:d 4 :e 5}} {:a {:b 3 :c 3} :b {:d 5 :e 5}})</pre><span>
I want the output </span><code>{:a {:b 4 :c 5} :b {:d 9 :e 10}}</code><span>
Can specter help with that? I don&apos;t see how, but it&apos;s very possible I&apos;m wrong.</span></div><div id="t1563891772003700" t="2019-07-23 14:22:52 oskarkv It was not too hard to write without specter, so I doubt specter will help much either way  😛"><a href="#t1563891772003700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-23</span> <span class="t" onclick="H(this)">14:22:52</span>              oskarkv </span><span>It was not too hard to write without specter, so I doubt specter will help much either way </span><b>😛</b></div><div id="t1563894823004600" t="2019-07-23 15:13:43 oskarkv It would be cool if  transform  could take several structures, like map does, and apply the function to all the elements of all the structures."><a href="#t1563894823004600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-23</span> <span class="t" onclick="H(this)">15:13:43</span>              oskarkv </span><span>It would be cool if </span><code>transform</code><span> could take several structures, like map does, and apply the function to all the elements of all the structures.</span></div><div id="t1563895059004900" t="2019-07-23 15:17:39 oskarkv Then my function would be trivial with specter  😛"><a href="#t1563895059004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-23</span> <span class="t" onclick="H(this)">15:17:39</span>              oskarkv </span><span>Then my function would be trivial with specter </span><b>😛</b></div><div id="t1565109577006200" t="2019-08-06 16:39:37 jsa-aerial I think I&apos;m confused."><a href="#t1565109577006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:39:37</span>           jsa-aerial </span><span>I think I&apos;m confused.</span></div><div id="t1565110540007100" t="2019-08-06 16:55:40 nathanmarz filterer  navigates to a sequence of all &quot;locations&quot; in the sequence matching the predicate"><a href="#t1565110540007100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:55:40</span>           nathanmarz </span><code>filterer</code><span> navigates to a sequence of all &quot;locations&quot; in the sequence matching the predicate</span></div><div id="t1565110553007500" t="2019-08-06 16:55:53 nathanmarz with index 0 being the first location, index 1 being the second, and so on"><a href="#t1565110553007500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:55:53</span>           nathanmarz </span><span>with index 0 being the first location, index 1 being the second, and so on</span></div><div id="t1565110572007900" t="2019-08-06 16:56:12 nathanmarz transformations to the sequence navigated to by  filterer  can only affect those locations"><a href="#t1565110572007900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:56:12</span>           nathanmarz </span><span>transformations to the sequence navigated to by </span><code>filterer</code><span> can only affect those locations</span></div><div id="t1565110611008400" t="2019-08-06 16:56:51 nathanmarz increasing the size of the sequence just causes indexes past the last location to be ignored"><a href="#t1565110611008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:56:51</span>           nathanmarz </span><span>increasing the size of the sequence just causes indexes past the last location to be ignored</span></div><div id="t1565110646009100" t="2019-08-06 16:57:26 nathanmarz there&apos;s a special case for when you reduce the size of the sequence to set the removed locations to  NONE"><a href="#t1565110646009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">16:57:26</span>           nathanmarz </span><span>there&apos;s a special case for when you reduce the size of the sequence to set the removed locations to </span><code>NONE</code></div><div id="t1565111741011600" t="2019-08-06 17:15:41 jsa-aerial Hmmmm, OK. So, there is no &apos;obvious / out of the box&apos; way to insert? Using a combo of  index-vals  and  before-index  works fine, is that the &apos;right way&apos; to do this?"><a href="#t1565111741011600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">17:15:41</span>           jsa-aerial </span><span>Hmmmm, OK. So, there is no &apos;obvious / out of the box&apos; way to insert? Using a combo of </span><code>index-vals</code><span> and </span><code>before-index</code><span> works fine, is that the &apos;right way&apos; to do this?</span></div><div id="t1565112583012000" t="2019-08-06 17:29:43 nathanmarz zipper navigators are good for this use case"><a href="#t1565112583012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">17:29:43</span>           nathanmarz </span><span>zipper navigators are good for this use case</span></div><div id="t1565112609012200" t="2019-08-06 17:30:09 nathanmarz com.rpl.specter.zipper"><a href="#t1565112609012200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">17:30:09</span>           nathanmarz </span><code>com.rpl.specter.zipper</code></div><div id="t1565112808012400" t="2019-08-06 17:33:28 nathanmarz user=&gt; (setval [z/VECTOR-ZIP (z/find-first #(= &quot;b&quot; %)) z/INNER-LEFT] [77] [&quot;a&quot; &quot;b&quot; &quot;c&quot;])
[&quot;a&quot; 77 &quot;b&quot; &quot;c&quot;]
"><a href="#t1565112808012400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">17:33:28</span>           nathanmarz </span><pre>user=&gt; (setval [z/VECTOR-ZIP (z/find-first #(= &quot;b&quot; %)) z/INNER-LEFT] [77] [&quot;a&quot; &quot;b&quot; &quot;c&quot;])
[&quot;a&quot; 77 &quot;b&quot; &quot;c&quot;]
</pre></div><div id="t1565114369012600" t="2019-08-06 17:59:29 jsa-aerial 😮"><a href="#t1565114369012600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">17:59:29</span>           jsa-aerial </span><b>😮</b></div><div id="t1565114442013000" t="2019-08-06 18:00:42 jsa-aerial Presumably that is much more efficient as well?"><a href="#t1565114442013000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">18:00:42</span>           jsa-aerial </span><span>Presumably that is much more efficient as well?</span></div><div id="t1565117954013200" t="2019-08-06 18:59:14 nathanmarz unclear"><a href="#t1565117954013200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">18:59:14</span>           nathanmarz </span><span>unclear</span></div><div id="t1565117968013500" t="2019-08-06 18:59:28 nathanmarz zippers do have overhead"><a href="#t1565117968013500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">18:59:28</span>           nathanmarz </span><span>zippers do have overhead</span></div><div id="t1565118005014300" t="2019-08-06 19:00:05 nathanmarz the  com.rpl.specter.zipper  namespace is not totally fleshed out, so there are other navigators that could be added to make it more efficient"><a href="#t1565118005014300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">19:00:05</span>           nathanmarz </span><span>the </span><code>com.rpl.specter.zipper</code><span> namespace is not totally fleshed out, so there are other navigators that could be added to make it more efficient</span></div><div id="t1565118030014900" t="2019-08-06 19:00:30 nathanmarz such as the zipper equivalent of  before-index  instead of doing  INNER-LEFT"><a href="#t1565118030014900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">19:00:30</span>           nathanmarz </span><span>such as the zipper equivalent of </span><code>before-index</code><span> instead of doing </span><code>INNER-LEFT</code></div><div id="t1565118354016200" t="2019-08-06 19:05:54 lellis Hi All, i have a question. Why when use this symbol ’[?e :a  true] inside a select nav its resolve to [?e :a  G__161070]? ex:  (select [ALL (pred #(= (log/spy %) (log/spy &apos;[?e true])))]  [&apos;[?e true]])  return []."><a href="#t1565118354016200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-06</span> <span class="t" onclick="H(this)">19:05:54</span>               lellis </span><span>Hi All, i have a question. Why when use this symbol ’[?e :a  true] inside a select nav its resolve to [?e :a  G__161070]? ex: </span><code>(select [ALL (pred #(= (log/spy %) (log/spy &apos;[?e true])))]  [&apos;[?e true]])</code><span> return [].</span></div><div id="t1565736635017900" t="2019-08-13 22:50:35 puzzler Is there a variant of select that returns a lazy sequence instead of a vector? I&apos;ve tried things like (sequence (traverse ...)) but that doesn&apos;t work."><a href="#t1565736635017900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-13</span> <span class="t" onclick="H(this)">22:50:35</span>              puzzler </span><span>Is there a variant of select that returns a lazy sequence instead of a vector? I&apos;ve tried things like (sequence (traverse ...)) but that doesn&apos;t work.</span></div><div id="t1565738665020100" t="2019-08-13 23:24:25 puzzler No, I need a lazy sequence because I&apos;m producing a potentially large return value for a library API, and I don&apos;t know how people will consume it. But thanks for the info. I didn&apos;t realize select-first had early termination, since doc says it is no more efficient that select."><a href="#t1565738665020100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-13</span> <span class="t" onclick="H(this)">23:24:25</span>              puzzler </span><span>No, I need a lazy sequence because I&apos;m producing a potentially large return value for a library API, and I don&apos;t know how people will consume it. But thanks for the info. I didn&apos;t realize select-first had early termination, since doc says it is no more efficient that select.</span></div><div id="t1565739049021100" t="2019-08-13 23:30:49 puzzler For use case where you are substituting an existing get-in call where you want  a nil return value, would you use select-first, select-one, or would you use select-any and then call its return value with a function to convert NONE to nil?"><a href="#t1565739049021100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-13</span> <span class="t" onclick="H(this)">23:30:49</span>              puzzler </span><span>For use case where you are substituting an existing get-in call where you want  a nil return value, would you use select-first, select-one, or would you use select-any and then call its return value with a function to convert NONE to nil?</span></div><div id="t1565740000021600" t="2019-08-13 23:46:40 puzzler Or maybe just use select-any and stick (nil-&gt;val nil) at the end of the navigator?"><a href="#t1565740000021600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-13</span> <span class="t" onclick="H(this)">23:46:40</span>              puzzler </span><span>Or maybe just use select-any and stick (nil-&gt;val nil) at the end of the navigator?</span></div><div id="t1565740297022000" t="2019-08-13 23:51:37 puzzler Ah, select-any returns nil in that particular case anyway. Never mind."><a href="#t1565740297022000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-13</span> <span class="t" onclick="H(this)">23:51:37</span>              puzzler </span><span>Ah, select-any returns nil in that particular case anyway. Never mind.</span></div><div id="t1565742794022800" t="2019-08-14 00:33:14 nathanmarz @puzzler  select-one  is the same as  select-first  except it enforces that your path navigates to at most one value"><a href="#t1565742794022800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">00:33:14</span>           nathanmarz </span><span>@puzzler </span><code>select-one</code><span> is the same as </span><code>select-first</code><span> except it enforces that your path navigates to at most one value</span></div><div id="t1565742994023200" t="2019-08-14 00:36:34 nathanmarz corrected the wiki entry on  select-first , thanks for letting me know"><a href="#t1565742994023200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">00:36:34</span>           nathanmarz </span><span>corrected the wiki entry on </span><code>select-first</code><span>, thanks for letting me know</span></div><div id="t1565743122023500" t="2019-08-14 00:38:42 nathanmarz you probably want  select-one  for your use case"><a href="#t1565743122023500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">00:38:42</span>           nathanmarz </span><span>you probably want </span><code>select-one</code><span> for your use case</span></div><div id="t1565758920025000" t="2019-08-14 05:02:00 puzzler I recall a time when you sketched out a navigator for transforming a nested map in such a way that on the way out, it would recursively delete any keys with empty maps. I can&apos;t find it in the slack logs. Do you by any chance have a handy pointer to that?"><a href="#t1565758920025000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">05:02:00</span>              puzzler </span><span>I recall a time when you sketched out a navigator for transforming a nested map in such a way that on the way out, it would recursively delete any keys with empty maps. I can&apos;t find it in the slack logs. Do you by any chance have a handy pointer to that?</span></div><div id="t1565770202025600" t="2019-08-14 08:10:02 ben.mumford i asked a similar question here and on SO and posted nathan&apos;s answer:  https://stackoverflow.com/a/57002777/1185536"><a href="#t1565770202025600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">08:10:02</span>          ben.mumford </span><span>i asked a similar question here and on SO and posted nathan&apos;s answer: </span><a href="https://stackoverflow.com/a/57002777/1185536" target="_blank">https://stackoverflow.com/a/57002777/1185536</a></div><div id="t1565770334027000" t="2019-08-14 08:12:14 puzzler I saw that, but it looks like the answers are all about scanning through a whole nested map structure removing nil leaves. That&apos;s not really what I want. I want things to get removed if the output of the transformation is NONE, and that causes its map to be empty, and so on."><a href="#t1565770334027000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">08:12:14</span>              puzzler </span><span>I saw that, but it looks like the answers are all about scanning through a whole nested map structure removing nil leaves. That&apos;s not really what I want. I want things to get removed if the output of the transformation is NONE, and that causes its map to be empty, and so on.</span></div><div id="t1565770448028900" t="2019-08-14 08:14:08 puzzler So something like: (setval (keypath-remove-empties :a :c :d) NONE {:b 1, :a {:c {:d 0}}}) gives back {:b 1}"><a href="#t1565770448028900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">08:14:08</span>              puzzler </span><span>So something like: (setval (keypath-remove-empties :a :c :d) NONE {:b 1, :a {:c {:d 0}}}) gives back {:b 1}</span></div><div id="t1565773135029400" t="2019-08-14 08:58:55 schmee @puzzler I believe you’re looking for  compact ?
 user=&gt; (sp/setval (sp/compact :a :c :d) sp/NONE {:b 1, :a {:c {:d 0}}})
{:b 1}
"><a href="#t1565773135029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">08:58:55</span>               schmee </span><span>@puzzler I believe you’re looking for </span><code>compact</code><span>?
</span><pre>user=&gt; (sp/setval (sp/compact :a :c :d) sp/NONE {:b 1, :a {:c {:d 0}}})
{:b 1}
</pre></div><div id="t1565782054029700" t="2019-08-14 11:27:34 puzzler @schmee Yes, thanks!"><a href="#t1565782054029700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">11:27:34</span>              puzzler </span><span>@schmee Yes, thanks!</span></div><div id="t1565786929030900" t="2019-08-14 12:48:49 nathanmarz you probably don&apos;t want to return NONE if the top-level structure becomes empty, so something like  (setval [:a (compact :c :d)] NONE data)  is generally the pattern to use"><a href="#t1565786929030900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">12:48:49</span>           nathanmarz </span><span>you probably don&apos;t want to return NONE if the top-level structure becomes empty, so something like </span><code>(setval [:a (compact :c :d)] NONE data)</code><span> is generally the pattern to use</span></div><div id="t1565792334031700" t="2019-08-14 14:18:54 lxsli I&apos;ve finally figured out why I can&apos;t use  filterer  after MAP-KEYS; it expects a sequence where MAP-KEYS navigates to a view of many keyword (for me) elements"><a href="#t1565792334031700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">14:18:54</span>                lxsli </span><span>I&apos;ve finally figured out why I can&apos;t use </span><code>filterer</code><span> after MAP-KEYS; it expects a sequence where MAP-KEYS navigates to a view of many keyword (for me) elements</span></div><div id="t1565792414033300" t="2019-08-14 14:20:14 lxsli Which is better:  (setval [MAP-KEYS #(#{&quot;a&quot;} (namespace %))] NONE mymap) 
or:  (setval [(filterer [FIRST NAMESPACE #{&quot;a&quot;}]) MAP-KEYS] NONE mymap)  please?"><a href="#t1565792414033300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">14:20:14</span>                lxsli </span><span>Which is better: </span><code>(setval [MAP-KEYS #(#{&quot;a&quot;} (namespace %))] NONE mymap)</code><span>
or: </span><code>(setval [(filterer [FIRST NAMESPACE #{&quot;a&quot;}]) MAP-KEYS] NONE mymap)</code><span> please?</span></div><div id="t1565792430033500" t="2019-08-14 14:20:30 lxsli or y&apos;know something else"><a href="#t1565792430033500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">14:20:30</span>                lxsli </span><span>or y&apos;know something else</span></div><div id="t1565792741034600" t="2019-08-14 14:25:41 lxsli The difference seems more substantial when using  select ; the latter form allows me to get the whole entries whereas the former has irrevocably descended to the keys"><a href="#t1565792741034600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">14:25:41</span>                lxsli </span><span>The difference seems more substantial when using </span><code>select</code><span>; the latter form allows me to get the whole entries whereas the former has irrevocably descended to the keys</span></div><div id="t1565792788035400" t="2019-08-14 14:26:28 lxsli My initial attempt btw was something like  (setval [MAP-KEYS (filterer NAMESPACE #{&quot;a&quot;})] NONE mymap)"><a href="#t1565792788035400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">14:26:28</span>                lxsli </span><span>My initial attempt btw was something like </span><code>(setval [MAP-KEYS (filterer NAMESPACE #{&quot;a&quot;})] NONE mymap)</code></div><div id="t1565797375035900" t="2019-08-14 15:42:55 nathanmarz @alee you can also do  (setval [MAP-KEYS (selected? NAMESPACE (pred= &quot;a&quot;))] NONE mymap)"><a href="#t1565797375035900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-14</span> <span class="t" onclick="H(this)">15:42:55</span>           nathanmarz </span><span>@alee you can also do </span><code>(setval [MAP-KEYS (selected? NAMESPACE (pred= &quot;a&quot;))] NONE mymap)</code></div><div id="t1565853350036100" t="2019-08-15 07:15:50 lxsli Cracking, thank you!"><a href="#t1565853350036100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-15</span> <span class="t" onclick="H(this)">07:15:50</span>                lxsli </span><span>Cracking, thank you!</span></div><div id="t1566217831037000" t="2019-08-19 12:30:31 Pragyan Tripathi I am trying to write a merge method to generate CSS styles dynamically. This method should take breakpoints, and styles param and generates a map which can be used for styling using stylefy.

I am trying to do this using specter, but unable to get desired results. The method should work as follows:

 (def breakpoints [320 600 1280])
(def style {:padding-top [&quot;20px&quot; &quot;30px&quot; &quot;40px&quot; &quot;50px&quot;]
            :margin &quot;30px&quot;
           })

(merge-style breakpoints style)
 
The output should look like the following:

 {:padding-top &quot;20px&quot;
 :margin &quot;30px&quot;
 ::stylefy/media {{:min-width &quot;320px&quot;} {:padding-top &quot;30px&quot;}
                  {:min-width &quot;600px&quot;} {:padding-top &quot;40px&quot;}
                  {:min-width &quot;1280px&quot;} {:padding-top &quot;50px&quot;}}
 }
"><a href="#t1566217831037000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">12:30:31</span>     Pragyan Tripathi </span><span>I am trying to write a merge method to generate CSS styles dynamically. This method should take breakpoints, and styles param and generates a map which can be used for styling using stylefy.

I am trying to do this using specter, but unable to get desired results. The method should work as follows:

</span><pre>(def breakpoints [320 600 1280])
(def style {:padding-top [&quot;20px&quot; &quot;30px&quot; &quot;40px&quot; &quot;50px&quot;]
            :margin &quot;30px&quot;
           })

(merge-style breakpoints style)
</pre><span>
The output should look like the following:

</span><pre>{:padding-top &quot;20px&quot;
 :margin &quot;30px&quot;
 ::stylefy/media {{:min-width &quot;320px&quot;} {:padding-top &quot;30px&quot;}
                  {:min-width &quot;600px&quot;} {:padding-top &quot;40px&quot;}
                  {:min-width &quot;1280px&quot;} {:padding-top &quot;50px&quot;}}
 }
</pre></div><div id="t1566219430037700" t="2019-08-19 12:57:10 Pragyan Tripathi The code I have written till now is as follows:
 (defn merge-style
  [breakpoints style]
  (let [media-queries (s/transform [s/ALL] #(hash-map :min-width (str %1 &quot;px&quot;)) breakpoints)]
  breakpoints))
"><a href="#t1566219430037700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">12:57:10</span>     Pragyan Tripathi </span><span>The code I have written till now is as follows:
</span><pre>(defn merge-style
  [breakpoints style]
  (let [media-queries (s/transform [s/ALL] #(hash-map :min-width (str %1 &quot;px&quot;)) breakpoints)]
  breakpoints))
</pre></div><div id="t1566369135041800" t="2019-08-21 06:32:15 Pragyan Tripathi @U3L6TFEJF Thanks a lot for the suggestions. I have been able to solve the problem I had with following method:
 (defn- get-media-queries
  [breakpoints styles]
  (let [base-style (s/transform [s/MAP-VALS] #(%1 0) styles)
        styles-maps (s/setval [s/MAP-VALS empty?] s/NONE (s/setval [s/MAP-VALS s/FIRST] s/NONE styles))
        styles-list (map (fn [[key val]] (map #(hash-map key %1) val)) styles-maps)
        styles-final (apply vdu/merge-maps styles-list)
        breaks (map #(hash-map :min-width %1) breakpoints)
        styles-merged (into {} (mapv vector breaks styles-final))
        ]
    (assoc base-style ::stylefy/media styles-merged)))
"><a href="#t1566369135041800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span> <span class="t" onclick="H(this)">06:32:15</span>          Pragyan Tripathi </span><span>@U3L6TFEJF Thanks a lot for the suggestions. I have been able to solve the problem I had with following method:
</span><pre>(defn- get-media-queries
  [breakpoints styles]
  (let [base-style (s/transform [s/MAP-VALS] #(%1 0) styles)
        styles-maps (s/setval [s/MAP-VALS empty?] s/NONE (s/setval [s/MAP-VALS s/FIRST] s/NONE styles))
        styles-list (map (fn [[key val]] (map #(hash-map key %1) val)) styles-maps)
        styles-final (apply vdu/merge-maps styles-list)
        breaks (map #(hash-map :min-width %1) breakpoints)
        styles-merged (into {} (mapv vector breaks styles-final))
        ]
    (assoc base-style ::stylefy/media styles-merged)))
</pre></div><div id="t1566219492038700" t="2019-08-19 12:58:12 Pragyan Tripathi As I am a beginner in clojurescript. I am finding it hard to solve this in functional way using specter."><a href="#t1566219492038700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">12:58:12</span>     Pragyan Tripathi </span><span>As I am a beginner in clojurescript. I am finding it hard to solve this in functional way using specter.</span></div><div id="t1566220042039700" t="2019-08-19 13:07:22 schmee creating new data structures out of two existing ones it not really something Specter is suited for, it is better suited for transformations of an existing data structure"><a href="#t1566220042039700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">13:07:22</span>               schmee </span><span>creating new data structures out of two existing ones it not really something Specter is suited for, it is better suited for transformations of an existing data structure</span></div><div id="t1566220057040200" t="2019-08-19 13:07:37 schmee this is probably easier to solve with regular Clojure code"><a href="#t1566220057040200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">13:07:37</span>               schmee </span><span>this is probably easier to solve with regular Clojure code</span></div><div id="t1566220561041700" t="2019-08-19 13:16:01 Pragyan Tripathi got it. I am trying to learn specter so may be that’s why I thinking in those terms all the time. Will figure out a way to in normal clojure code. Thanks."><a href="#t1566220561041700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-19</span> <span class="t" onclick="H(this)">13:16:01</span>     Pragyan Tripathi </span><span>got it. I am trying to learn specter so may be that’s why I thinking in those terms all the time. Will figure out a way to in normal clojure code. Thanks.</span></div><div id="t1566467177044100" t="2019-08-22 09:46:17 Petrus Theron Can Specter emit reductions over a lensed collection? E.g.  (something-specter [ALL :amount (reducer +)] [{:amount 10.0M} {:amount 20.0M} ...]) =&gt; [{:amount 10.0M} {:amount 30.0M} ...]"><a href="#t1566467177044100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">09:46:17</span>        Petrus Theron </span><span>Can Specter emit reductions over a lensed collection? E.g. </span><code>(something-specter [ALL :amount (reducer +)] [{:amount 10.0M} {:amount 20.0M} ...]) =&gt; [{:amount 10.0M} {:amount 30.0M} ...]</code></div><div id="t1566467224044400" t="2019-08-22 09:47:04 Petrus Theron E.g. w/o Specter:
 (reductions
    (fn [[latest acc] [when amount]]
      [when (+ acc amount)])
    [0 0.0M]
    (zipmap (range 10) (range 10)))
=&gt; ([0 0.0M] [0 0.0M] [7 7.0M] [1 8.0M] [4 12.0M] [6 18.0M] [3 21.0M] [2 23.0M] [9 32.0M] [5 37.0M] [8 45.0M])
"><a href="#t1566467224044400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">09:47:04</span>        Petrus Theron </span><span>E.g. w/o Specter:
</span><pre>(reductions
    (fn [[latest acc] [when amount]]
      [when (+ acc amount)])
    [0 0.0M]
    (zipmap (range 10) (range 10)))
=&gt; ([0 0.0M] [0 0.0M] [7 7.0M] [1 8.0M] [4 12.0M] [6 18.0M] [3 21.0M] [2 23.0M] [9 32.0M] [5 37.0M] [8 45.0M])
</pre></div><div id="t1566474904044800" t="2019-08-22 11:55:04 lxsli @petrus Could  traversed  be what you&apos;re after?"><a href="#t1566474904044800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">11:55:04</span>                lxsli </span><span>@petrus Could </span><code>traversed</code><span> be what you&apos;re after?</span></div><div id="t1566477572045500" t="2019-08-22 12:39:32 Petrus Theron Thanks @U9MDWLP5Y  traversed  looks like it might work  🙂   (select-any (traversed ALL +) [1 2 3 4])"><a href="#t1566477572045500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">12:39:32</span>             Petrus Theron </span><span>Thanks @U9MDWLP5Y </span><code>traversed</code><span> looks like it might work </span><b>🙂</b><span> </span><code>(select-any (traversed ALL +) [1 2 3 4])</code></div><div id="t1566474945045100" t="2019-08-22 11:55:45 lxsli Alternatively you might get mileage out of  collect"><a href="#t1566474945045100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">11:55:45</span>                lxsli </span><span>Alternatively you might get mileage out of </span><code>collect</code></div><div id="t1566474967045400" t="2019-08-22 11:56:07 lxsli Not an expert myself so no promises"><a href="#t1566474967045400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span> <span class="t" onclick="H(this)">11:56:07</span>                lxsli </span><span>Not an expert myself so no promises</span></div><div id="t1567103740004200" t="2019-08-29 18:35:40 jvtrigueros I&apos;m trying to use specter to help me generate a map structure that can be converted to an XML string using  clojure.data.xml . With a map function, I can do this:
 (mapv (fn [[k v]] {:tag k :content [v]})
      {:A 1
       :B 2
       :C 3})
;; =&gt; [{:tag :A, :content [1]} {:tag :B, :content [2]} {:tag :C, :content [3]}]
 
I tried to do something similar with  transform :
 (r/transform
  r/ALL
  (fn [[k v]] {:tag k :content [v]})
  {:A 1
   :B 2
   :C 3})
;; Execution error (UnsupportedOperationException) at com.rpl.specter.navs/eval18222$fn (navs.cljc:124).
nth not supported on this type: PersistentArrayMap
 
I don&apos;t understand the error that specter is giving me. Is it possible to do what I want to do with specter?"><a href="#t1567103740004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">18:35:40</span>          jvtrigueros </span><span>I&apos;m trying to use specter to help me generate a map structure that can be converted to an XML string using </span><code>clojure.data.xml</code><span>. With a map function, I can do this:
</span><pre>(mapv (fn [[k v]] {:tag k :content [v]})
      {:A 1
       :B 2
       :C 3})
;; =&gt; [{:tag :A, :content [1]} {:tag :B, :content [2]} {:tag :C, :content [3]}]
</pre><span>
I tried to do something similar with </span><code>transform</code><span>:
</span><pre>(r/transform
  r/ALL
  (fn [[k v]] {:tag k :content [v]})
  {:A 1
   :B 2
   :C 3})
;; Execution error (UnsupportedOperationException) at com.rpl.specter.navs/eval18222$fn (navs.cljc:124).
nth not supported on this type: PersistentArrayMap
</pre><span>
I don&apos;t understand the error that specter is giving me. Is it possible to do what I want to do with specter?</span></div><div id="t1567107553004600" t="2019-08-29 19:39:13 nathanmarz @jvtrigueros transform replaces navigated vals and otherwise leaves the structure the same"><a href="#t1567107553004600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">19:39:13</span>           nathanmarz </span><span>@jvtrigueros transform replaces navigated vals and otherwise leaves the structure the same</span></div><div id="t1567107575005100" t="2019-08-29 19:39:35 nathanmarz since you are navigating to key/value pairs, it&apos;s expecting you to replace the key/value pairs with key/value pairs"><a href="#t1567107575005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">19:39:35</span>           nathanmarz </span><span>since you are navigating to key/value pairs, it&apos;s expecting you to replace the key/value pairs with key/value pairs</span></div><div id="t1567107583005300" t="2019-08-29 19:39:43 jvtrigueros I see"><a href="#t1567107583005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">19:39:43</span>          jvtrigueros </span><span>I see</span></div><div id="t1567107599005600" t="2019-08-29 19:39:59 nathanmarz for this particular use case specter isn&apos;t really relevant"><a href="#t1567107599005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">19:39:59</span>           nathanmarz </span><span>for this particular use case specter isn&apos;t really relevant</span></div><div id="t1567107775007300" t="2019-08-29 19:42:55 jvtrigueros I understand, I&apos;m using specter to select values in a deeply nested XML tree which worked great. I was trying to use it to generate the XML map datastructure as well.

I can simply do the  mapv  operation as the input map is fairly flat."><a href="#t1567107775007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-29</span> <span class="t" onclick="H(this)">19:42:55</span>          jvtrigueros </span><span>I understand, I&apos;m using specter to select values in a deeply nested XML tree which worked great. I was trying to use it to generate the XML map datastructure as well.

I can simply do the </span><code>mapv</code><span> operation as the input map is fairly flat.</span></div><div id="t1571957952001800" t="2019-10-24 22:59:12 Ani Banerjee Does specter work with integer valued keys in int-map? Any issues to expect compared to keyword based maps?"><a href="#t1571957952001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-24</span> <span class="t" onclick="H(this)">22:59:12</span>         Ani Banerjee </span><span>Does specter work with integer valued keys in int-map? Any issues to expect compared to keyword based maps?</span></div><div id="t1571958082003900" t="2019-10-24 23:01:22 Ani Banerjee More context: I have a map of entities, which are all indexed by an integer id. The value is a map with attributes
 {1 {:name &quot;foo&quot; :type &quot;a&quot;} 
  2 {:name &quot;bar&quot; :type &quot;b&quot;}}"><a href="#t1571958082003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-24</span> <span class="t" onclick="H(this)">23:01:22</span>         Ani Banerjee </span><span>More context: I have a map of entities, which are all indexed by an integer id. The value is a map with attributes
</span><pre>{1 {:name &quot;foo&quot; :type &quot;a&quot;} 
  2 {:name &quot;bar&quot; :type &quot;b&quot;}}</pre></div><div id="t1571970941005100" t="2019-10-25 02:35:41 nathanmarz @eerjree yes, it works fine"><a href="#t1571970941005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-25</span> <span class="t" onclick="H(this)">02:35:41</span>           nathanmarz </span><span>@eerjree yes, it works fine</span></div><div id="t1572111423005600" t="2019-10-26 17:37:03 Trevor Hi folks, what would be the best way to change this:

 [
{:name &quot;a&quot; :args [1 2 3]}
{:name &quot;a&quot; :args [5 6 7]}
{:name &quot;b&quot; :args [1]}
]
 

into this:
 {
:name &quot;a&quot; :arg-list [ [1 2 3] [5 6 7]]
:name &quot;b&quot; :arg-list [[1]]
}
 

I want to take a vector of maps which have a bunch of duplicate  :name  values with different vectors of  :args  and map the  :names  to a vector of vectors of their args.

I&apos;m using Spectre for most of the json transformations, but I&apos;m new to clojure and this transformation is non-obvious to me."><a href="#t1572111423005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-26</span> <span class="t" onclick="H(this)">17:37:03</span>               Trevor </span><span>Hi folks, what would be the best way to change this:

</span><pre>[
{:name &quot;a&quot; :args [1 2 3]}
{:name &quot;a&quot; :args [5 6 7]}
{:name &quot;b&quot; :args [1]}
]
</pre><span>

into this:
</span><pre>{
:name &quot;a&quot; :arg-list [ [1 2 3] [5 6 7]]
:name &quot;b&quot; :arg-list [[1]]
}
</pre><span>

I want to take a vector of maps which have a bunch of duplicate </span><code>:name</code><span> values with different vectors of </span><code>:args</code><span> and map the </span><code>:names</code><span> to a vector of vectors of their args.

I&apos;m using Spectre for most of the json transformations, but I&apos;m new to clojure and this transformation is non-obvious to me.</span></div><div id="t1572183964005900" t="2019-10-27 13:46:04 nathanmarz @trevor670 that&apos;s best done with a reduce"><a href="#t1572183964005900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">13:46:04</span>           nathanmarz </span><span>@trevor670 that&apos;s best done with a reduce</span></div><div id="t1572183972006200" t="2019-10-27 13:46:12 nathanmarz specter can help with the reducing function"><a href="#t1572183972006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">13:46:12</span>           nathanmarz </span><span>specter can help with the reducing function</span></div><div id="t1572183974006400" t="2019-10-27 13:46:14 nathanmarz (reduce
 (fn [res m]
  (setval [(keypath (:name m))
           :args-list
           NIL-&gt;VECTOR
           AFTER-ELEM]
    (:args m)
    res))
  {}
  data)
"><a href="#t1572183974006400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">13:46:14</span>           nathanmarz </span><pre>(reduce
 (fn [res m]
  (setval [(keypath (:name m))
           :args-list
           NIL-&gt;VECTOR
           AFTER-ELEM]
    (:args m)
    res))
  {}
  data)
</pre></div><div id="t1572208554011700" t="2019-10-27 20:35:54 Trevor Thanks @nathanmarz! I&apos;m really new to clojure and found it so surprising that (map fn coll) doesnt preserve the original map! changes vectors to lists and lazy sequences! Very confusing for a beginner! While it might lead to some gaps in understanding idiomatic clojure, I&apos;ve been finding spectre a lot easier to read and understand (from the perspective of a new learner) and things behave how I would expect them too! Thanks for making Spectre!"><a href="#t1572208554011700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">20:35:54</span>               Trevor </span><span>Thanks @nathanmarz! I&apos;m really new to clojure and found it so surprising that (map fn coll) doesnt preserve the original map! changes vectors to lists and lazy sequences! Very confusing for a beginner! While it might lead to some gaps in understanding idiomatic clojure, I&apos;ve been finding spectre a lot easier to read and understand (from the perspective of a new learner) and things behave how I would expect them too! Thanks for making Spectre!</span></div><div id="t1572216544014100" t="2019-10-27 22:49:04 sogaiu @trevor670 fwiw, i also experienced confusion initially, but once i focused on the distinction between collections and sequences, things started to make a lot more sense to me."><a href="#t1572216544014100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">22:49:04</span>               sogaiu </span><span>@trevor670 fwiw, i also experienced confusion initially, but once i focused on the distinction between collections and sequences, things started to make a lot more sense to me.</span></div><div id="t1572221217015600" t="2019-10-28 00:06:57 Trevor Interesting, I&apos;ll keep that in mind!"><a href="#t1572221217015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-28</span> <span class="t" onclick="H(this)">00:06:57</span>                    Trevor </span><span>Interesting, I&apos;ll keep that in mind!</span></div><div id="t1572217768015100" t="2019-10-27 23:09:28 Ani Banerjee @nathanmarz Need some help with a recursive query: I have a map of maps which which stores top-level entities and entity details:
 (def process-db {:process {:p1 {:name &quot;P1&quot;} :p2 {:name &quot;P2&quot;}}
                 :process-flow {:pf1 {:process_id :p1} :pf2 {:process_id :p2}}})
 
I want to get the process :name navigating from a process-flow-id.
 (select [:process-flow MAP-VALS :process_id] process-db)
=&gt; [:p1 :p2]
 
How do I write a select query that &quot;loops back&quot; to process-db, and does a lookup on  [:process MAP-VALS :name]"><a href="#t1572217768015100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-27</span> <span class="t" onclick="H(this)">23:09:28</span>         Ani Banerjee </span><span>@nathanmarz Need some help with a recursive query: I have a map of maps which which stores top-level entities and entity details:
</span><pre>(def process-db {:process {:p1 {:name &quot;P1&quot;} :p2 {:name &quot;P2&quot;}}
                 :process-flow {:pf1 {:process_id :p1} :pf2 {:process_id :p2}}})
</pre><span>
I want to get the process :name navigating from a process-flow-id.
</span><pre>(select [:process-flow MAP-VALS :process_id] process-db)
=&gt; [:p1 :p2]
</pre><span>
How do I write a select query that &quot;loops back&quot; to process-db, and does a lookup on </span><pre>[:process MAP-VALS :name]</pre></div><div id="t1574196048017100" t="2019-11-19 20:40:48 mikerod When navigating within a structure is there any way to get access to the “current path” you are navigated to?"><a href="#t1574196048017100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-19</span> <span class="t" onclick="H(this)">20:40:48</span>              mikerod </span><span>When navigating within a structure is there any way to get access to the “current path” you are navigated to?</span></div><div id="t1574196063017500" t="2019-11-19 20:41:03 mikerod I’ve found plenty of sort of related topics, but nothing I’m sure is the same thing I’m looking for"><a href="#t1574196063017500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-19</span> <span class="t" onclick="H(this)">20:41:03</span>              mikerod </span><span>I’ve found plenty of sort of related topics, but nothing I’m sure is the same thing I’m looking for</span></div><div id="t1574196166018100" t="2019-11-19 20:42:46 nathanmarz no, that&apos;s currently not possible"><a href="#t1574196166018100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-19</span> <span class="t" onclick="H(this)">20:42:46</span>           nathanmarz </span><span>no, that&apos;s currently not possible</span></div><div id="t1574196196018600" t="2019-11-19 20:43:16 mikerod thanks, that’s what I was thinking based on related issues I have found"><a href="#t1574196196018600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-19</span> <span class="t" onclick="H(this)">20:43:16</span>              mikerod </span><span>thanks, that’s what I was thinking based on related issues I have found</span></div><div id="t1574694992020600" t="2019-11-25 15:16:32 wegi Hi, when I use specter in emacs with the cider-repl all macros like transform and select are marked as &quot;unable to resolve symbol&quot;. I used :refer :all in the require call. It works when i evaluate it, but the lines with the functions are still marked by cider."><a href="#t1574694992020600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-25</span> <span class="t" onclick="H(this)">15:16:32</span>                 wegi </span><span>Hi, when I use specter in emacs with the cider-repl all macros like transform and select are marked as &quot;unable to resolve symbol&quot;. I used :refer :all in the require call. It works when i evaluate it, but the lines with the functions are still marked by cider.</span></div><div id="t1574694999020900" t="2019-11-25 15:16:39 wegi Maybe somebody else had the same problem."><a href="#t1574694999020900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-25</span> <span class="t" onclick="H(this)">15:16:39</span>                 wegi </span><span>Maybe somebody else had the same problem.</span></div><div id="t1574783206022800" t="2019-11-26 15:46:46 jsa-aerial Never had any problem like that.  I never  :refer :all   always use  :as sp  for the require so don&apos;t know if that is the issue"><a href="#t1574783206022800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-26</span> <span class="t" onclick="H(this)">15:46:46</span>           jsa-aerial </span><span>Never had any problem like that.  I never </span><code>:refer :all</code><span>  always use </span><code>:as sp</code><span> for the require so don&apos;t know if that is the issue</span></div><div id="t1575283969023800" t="2019-12-02 10:52:49 lxsli I have a similar issue with clojure-lsp in vim because many of Specter&apos;s macros are defined with macros. Not a Specter issue but tooling."><a href="#t1575283969023800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-02</span> <span class="t" onclick="H(this)">10:52:49</span>                lxsli </span><span>I have a similar issue with clojure-lsp in vim because many of Specter&apos;s macros are defined with macros. Not a Specter issue but tooling.</span></div><div id="t1575283988024000" t="2019-12-02 10:53:08 lxsli @wegi"><a href="#t1575283988024000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-02</span> <span class="t" onclick="H(this)">10:53:08</span>                lxsli </span><span>@wegi</span></div><div id="t1575284463025100" t="2019-12-02 11:01:03 wegi Jeah thanks. Figured as much. If you use emacs you can define the known macros in the.jokerrc"><a href="#t1575284463025100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-02</span> <span class="t" onclick="H(this)">11:01:03</span>                 wegi </span><span>Jeah thanks. Figured as much. If you use emacs you can define the known macros in the.jokerrc</span></div><div id="t1576678105001200" t="2019-12-18 14:08:25 roklenarcic hm here;’s a question, let’s say you have a predicate that will, given 2 values (key and value) tell you if you need to remove this map entry, how would you transform a map to drop those entries"><a href="#t1576678105001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">14:08:25</span>          roklenarcic </span><span>hm here;’s a question, let’s say you have a predicate that will, given 2 values (key and value) tell you if you need to remove this map entry, how would you transform a map to drop those entries</span></div><div id="t1576678130001500" t="2019-12-18 14:08:50 roklenarcic I tried `
 [(collect-one MAP-KEYS) MAP-VALS] 
"><a href="#t1576678130001500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">14:08:50</span>          roklenarcic </span><span>I tried `
</span><pre>[(collect-one MAP-KEYS) MAP-VALS]</pre><span>
</span></div><div id="t1576678158002100" t="2019-12-18 14:09:18 roklenarcic but that doesn’t work since collect-one’s select must return a single value"><a href="#t1576678158002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">14:09:18</span>          roklenarcic </span><span>but that doesn’t work since collect-one’s select must return a single value</span></div><div id="t1576705909003000" t="2019-12-18 21:51:49 nathanmarz @roklenarcic the pattern for that is  (setval [ALL (fn [[k v]] ...)] NONE my-map)"><a href="#t1576705909003000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">21:51:49</span>           nathanmarz </span><span>@roklenarcic the pattern for that is </span><code>(setval [ALL (fn [[k v]] ...)] NONE my-map)</code></div><div id="t1576706474003900" t="2019-12-18 22:01:14 roklenarcic so any function can act as predicate in path? What’s the difference between that and using  pred"><a href="#t1576706474003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">22:01:14</span>          roklenarcic </span><span>so any function can act as predicate in path? What’s the difference between that and using </span><code>pred</code></div><div id="t1576706629004300" t="2019-12-18 22:03:49 nathanmarz a function in a path implicitly uses  pred"><a href="#t1576706629004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">22:03:49</span>           nathanmarz </span><span>a function in a path implicitly uses </span><code>pred</code></div><div id="t1576706647004700" t="2019-12-18 22:04:07 nathanmarz you can use  pred  manually for something like  (pred :a)"><a href="#t1576706647004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">22:04:07</span>           nathanmarz </span><span>you can use </span><code>pred</code><span> manually for something like </span><code>(pred :a)</code></div><div id="t1576706679005300" t="2019-12-18 22:04:39 nathanmarz :a  by itself would navigate to  :a , whereas  (pred :a)  would filter based on the value of  :a"><a href="#t1576706679005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">22:04:39</span>           nathanmarz </span><code>:a</code><span> by itself would navigate to </span><code>:a</code><span>, whereas </span><code>(pred :a)</code><span> would filter based on the value of </span><code>:a</code></div><div id="t1576712055005500" t="2019-12-18 23:34:15 roklenarcic ok thank you"><a href="#t1576712055005500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-18</span> <span class="t" onclick="H(this)">23:34:15</span>          roklenarcic </span><span>ok thank you</span></div><div id="t1576764964000700" t="2019-12-19 14:16:04 donavan Has a form of collection that collects into a map been considered?"><a href="#t1576764964000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-19</span> <span class="t" onclick="H(this)">14:16:04</span>              donavan </span><span>Has a form of collection that collects into a map been considered?</span></div><div id="t1576771147001600" t="2019-12-19 15:59:07 nathanmarz @donavan I&apos;ve thought about that a little, but it would complicate the API and I don&apos;t really have any use cases for it"><a href="#t1576771147001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-19</span> <span class="t" onclick="H(this)">15:59:07</span>           nathanmarz </span><span>@donavan I&apos;ve thought about that a little, but it would complicate the API and I don&apos;t really have any use cases for it</span></div><div id="t1576774670001700" t="2019-12-19 16:57:50 donavan Good points. The only cases where I have wanted it are covered by  with-fresh-collected  I guess."><a href="#t1576774670001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-19</span> <span class="t" onclick="H(this)">16:57:50</span>                   donavan </span><span>Good points. The only cases where I have wanted it are covered by </span><code>with-fresh-collected</code><span> I guess.</span></div><div id="t1577824051004300" t="2020-12-31 20:27:31 donavan This question  https://github.com/redplanetlabs/specter/issues/287  got me thinking about how to solve the problem in the general case and I thought it would be nice to have a subselect like nav that allowed transformation to multiple values like srange. While this implementation is broken it better illustrates what I mean:

 (sp/defdynamicnav seqsubselect
  [&amp; path]
  (sp/late-bound-nav
   [late (sp/late-path path)]

   (select*
    [this structure next-fn]
    (next-fn (sp/compiled-select late structure)))

   (transform*
    [this structure next-fn]
    (let [select-result (sp/compiled-select late structure)]
      (reduce
       (fn [structure s]
         (i/srange-transform* structure s (inc s) next-fn))
       structure
       (map #(.indexOf structure %) (reverse select-result)))))))

(sp/transform
 [(seqsubselect
   [sp/ALL
    vector?])]
 (fn [structure]
   (mapcat
    (fn [x]
      (concat
       (filter odd? x)
       [(into [] (filter even? x))]))
    structure))
 [:a [2 4 6] :b [5 6 7 8] :c [3 5 7] :d [1 2 3 4]])

;; =&gt; [:a [2 4 6] :b 5 7 [6 8] :c 3 5 7 [] :d 1 3 [2 4]]"><a href="#t1577824051004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-12-31</span> <span class="t" onclick="H(this)">20:27:31</span>              donavan </span><span>This question </span><a href="https://github.com/redplanetlabs/specter/issues/287" target="_blank">https://github.com/redplanetlabs/specter/issues/287</a><span> got me thinking about how to solve the problem in the general case and I thought it would be nice to have a subselect like nav that allowed transformation to multiple values like srange. While this implementation is broken it better illustrates what I mean:

</span><pre>(sp/defdynamicnav seqsubselect
  [&amp; path]
  (sp/late-bound-nav
   [late (sp/late-path path)]

   (select*
    [this structure next-fn]
    (next-fn (sp/compiled-select late structure)))

   (transform*
    [this structure next-fn]
    (let [select-result (sp/compiled-select late structure)]
      (reduce
       (fn [structure s]
         (i/srange-transform* structure s (inc s) next-fn))
       structure
       (map #(.indexOf structure %) (reverse select-result)))))))

(sp/transform
 [(seqsubselect
   [sp/ALL
    vector?])]
 (fn [structure]
   (mapcat
    (fn [x]
      (concat
       (filter odd? x)
       [(into [] (filter even? x))]))
    structure))
 [:a [2 4 6] :b [5 6 7 8] :c [3 5 7] :d [1 2 3 4]])

;; =&gt; [:a [2 4 6] :b 5 7 [6 8] :c 3 5 7 [] :d 1 3 [2 4]]</pre></div><div id="t1579548520002000" t="2020-01-20 19:28:40 theeternalpulse Is there a general naming pattern for paths.  For example I have this recursive path function
 (defn node-finder
  &quot;Generates a recursive-path finder that visits
  matching `pred-fn`&quot;
  [pred-fn]
  (recursive-path
    [] p
    (specter/cond-path
      pred-fn STAY
      map? [MAP-VALS p]
      vector? [ALL p]))) 
That generates a path that finds a key-value that matches a certain pattern.  I&apos;m thinking node-finder should be node-path, should then the result be bound to something like FUNCTION-VALUE or FUNCTION-PATH?  I&apos;m guessing the former seems more consistent with the naming of the core paths."><a href="#t1579548520002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-20</span> <span class="t" onclick="H(this)">19:28:40</span>      theeternalpulse </span><span>Is there a general naming pattern for paths.  For example I have this recursive path function
</span><pre>(defn node-finder
  &quot;Generates a recursive-path finder that visits
  matching `pred-fn`&quot;
  [pred-fn]
  (recursive-path
    [] p
    (specter/cond-path
      pred-fn STAY
      map? [MAP-VALS p]
      vector? [ALL p])))</pre><span>
That generates a path that finds a key-value that matches a certain pattern.  I&apos;m thinking node-finder should be node-path, should then the result be bound to something like FUNCTION-VALUE or FUNCTION-PATH?  I&apos;m guessing the former seems more consistent with the naming of the core paths.</span></div><div id="t1579552158002300" t="2020-01-20 20:29:18 nathanmarz I would call something like that  matching-nodes"><a href="#t1579552158002300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-20</span> <span class="t" onclick="H(this)">20:29:18</span>           nathanmarz </span><span>I would call something like that </span><code>matching-nodes</code></div><div id="t1579574035002600" t="2020-01-21 02:33:55 theeternalpulse the function or the bound resulting path"><a href="#t1579574035002600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-21</span> <span class="t" onclick="H(this)">02:33:55</span>      theeternalpulse </span><span>the function or the bound resulting path</span></div><div id="t1579612407002800" t="2020-01-21 13:13:27 nathanmarz the function"><a href="#t1579612407002800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-21</span> <span class="t" onclick="H(this)">13:13:27</span>           nathanmarz </span><span>the function</span></div><div id="t1579612435003300" t="2020-01-21 13:13:55 nathanmarz so it reads like  (select [ALL (matching-nodes even?)] data)"><a href="#t1579612435003300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-21</span> <span class="t" onclick="H(this)">13:13:55</span>           nathanmarz </span><span>so it reads like </span><code>(select [ALL (matching-nodes even?)] data)</code></div><div id="t1579642616003600" t="2020-01-21 21:36:56 theeternalpulse ah, great idea."><a href="#t1579642616003600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-21</span> <span class="t" onclick="H(this)">21:36:56</span>      theeternalpulse </span><span>ah, great idea.</span></div><div id="t1579862702005500" t="2020-01-24 10:45:02 akond the documentation says i can have additional params to  declarepath , but i can only see declarepath with only one param."><a href="#t1579862702005500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-24</span> <span class="t" onclick="H(this)">10:45:02</span>                akond </span><span>the documentation says i can have additional params to </span><code>declarepath</code><span>, but i can only see declarepath with only one param.</span></div><div id="t1579862730005800" t="2020-01-24 10:45:30 akond (defmacro declarepath [name]
  `(def ~name (i/local-declarepath))) 
where is the other one?"><a href="#t1579862730005800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-24</span> <span class="t" onclick="H(this)">10:45:30</span>                akond </span><pre>(defmacro declarepath [name]
  `(def ~name (i/local-declarepath)))</pre><span>
where is the other one?</span></div><div id="t1579888622006200" t="2020-01-24 17:57:02 nathanmarz @akond that wiki page was out of date"><a href="#t1579888622006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-24</span> <span class="t" onclick="H(this)">17:57:02</span>           nathanmarz </span><span>@akond that wiki page was out of date</span></div><div id="t1579888631006500" t="2020-01-24 17:57:11 nathanmarz those params are unnecessary now"><a href="#t1579888631006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-24</span> <span class="t" onclick="H(this)">17:57:11</span>           nathanmarz </span><span>those params are unnecessary now</span></div><div id="t1580022394008800" t="2020-01-26 07:06:34 akond @nathanmarz understood. is it possible then to create a parametrized navigator for say something like  [:rations s/ALL (fn-&gt; :id (= id)) :day-rations]  so that it looks like  [(new-nav id)]  instead?"><a href="#t1580022394008800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-26</span> <span class="t" onclick="H(this)">07:06:34</span>                akond </span><span>@nathanmarz understood. is it possible then to create a parametrized navigator for say something like </span><code>[:rations s/ALL (fn-&gt; :id (= id)) :day-rations]</code><span> so that it looks like </span><code>[(new-nav id)]</code><span> instead?</span></div><div id="t1580055545009000" t="2020-01-26 16:19:05 nathanmarz sure"><a href="#t1580055545009000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-26</span> <span class="t" onclick="H(this)">16:19:05</span>           nathanmarz </span><span>sure</span></div><div id="t1580055551009300" t="2020-01-26 16:19:11 nathanmarz (defn new-nav [id]
  (path :rations s/ALL (fn-&gt; :id (= id)) :day-rations))"><a href="#t1580055551009300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-26</span> <span class="t" onclick="H(this)">16:19:11</span>           nathanmarz </span><pre>(defn new-nav [id]
  (path :rations s/ALL (fn-&gt; :id (= id)) :day-rations))</pre></div><div id="t1580122051010300" t="2020-01-27 10:47:31 akond thank you very much. i see that  path  is also undocumented."><a href="#t1580122051010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-27</span> <span class="t" onclick="H(this)">10:47:31</span>                akond </span><span>thank you very much. i see that </span><code>path</code><span> is also undocumented.</span></div><div id="t1580405973015000" t="2020-01-30 17:39:33 joshkh is this an okay place to ask for help with an example? i have a simple tree, and i would like to collect a value from each parent and combine it with a value on its direct descendants. for example:
 (def tree {:id       1
           :value    &quot;one&quot;
           :children [{:id    2
                       :value &quot;two&quot;}
                      {:id       3
                       :value    &quot;three&quot;
                       :children [{:id    4
                                   :value &quot;four&quot;}]}]}) 
where after a transformation, each child gets a  :parent+myvalue  key which is equal to  (str (:value parent) (:value self)) 
 (s/transform [...path] xfn tree)

{:id       1
 :value    &quot;one&quot;
 :children [{:id             2
             :value          &quot;two&quot;
             :parent+myvalue &quot;onetwo&quot;}
            {:id             3
             :value          &quot;three&quot;
             :parent+myvalue &quot;onethree&quot;
             :children       [{:id             4
                               :value          &quot;four&quot;
                               :parent+myvalue &quot;threefour&quot;}]}]} 
is Specter well suited for this, or should i just use core walk functions?"><a href="#t1580405973015000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">17:39:33</span>               joshkh </span><span>is this an okay place to ask for help with an example? i have a simple tree, and i would like to collect a value from each parent and combine it with a value on its direct descendants. for example:
</span><pre>(def tree {:id       1
           :value    &quot;one&quot;
           :children [{:id    2
                       :value &quot;two&quot;}
                      {:id       3
                       :value    &quot;three&quot;
                       :children [{:id    4
                                   :value &quot;four&quot;}]}]})</pre><span>
where after a transformation, each child gets a </span><code>:parent+myvalue</code><span> key which is equal to </span><code>(str (:value parent) (:value self))</code><span>
</span><pre>(s/transform [...path] xfn tree)

{:id       1
 :value    &quot;one&quot;
 :children [{:id             2
             :value          &quot;two&quot;
             :parent+myvalue &quot;onetwo&quot;}
            {:id             3
             :value          &quot;three&quot;
             :parent+myvalue &quot;onethree&quot;
             :children       [{:id             4
                               :value          &quot;four&quot;
                               :parent+myvalue &quot;threefour&quot;}]}]}</pre><span>
is Specter well suited for this, or should i just use core walk functions?</span></div><div id="t1580406110015500" t="2020-01-30 17:41:50 joshkh i suspect  s/collect  comes into play"><a href="#t1580406110015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">17:41:50</span>               joshkh </span><span>i suspect </span><code>s/collect</code><span> comes into play</span></div><div id="t1580407970016000" t="2020-01-30 18:12:50 nathanmarz @joshkh this is the kind of stuff specter is very good at"><a href="#t1580407970016000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">18:12:50</span>           nathanmarz </span><span>@joshkh this is the kind of stuff specter is very good at</span></div><div id="t1580407979016300" t="2020-01-30 18:12:59 nathanmarz (def CHILDREN (path (must :children) ALL))
(def VALUE+CHILDREN (path (collect-one :value) CHILDREN))

(def WALKER
  (recursive-path [] p
    (continue-then-stay
      DISPENSE
      VALUE+CHILDREN
      )))

(transform [VALUE+CHILDREN WALKER (collect-one :value) :parent+myvalue]
  (fn [parent-value my-value _]
    (str parent-value my-value))
  tree)"><a href="#t1580407979016300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">18:12:59</span>           nathanmarz </span><pre>(def CHILDREN (path (must :children) ALL))
(def VALUE+CHILDREN (path (collect-one :value) CHILDREN))

(def WALKER
  (recursive-path [] p
    (continue-then-stay
      DISPENSE
      VALUE+CHILDREN
      )))

(transform [VALUE+CHILDREN WALKER (collect-one :value) :parent+myvalue]
  (fn [parent-value my-value _]
    (str parent-value my-value))
  tree)</pre></div><div id="t1580407986016500" t="2020-01-30 18:13:06 nathanmarz that&apos;s one way to solve it"><a href="#t1580407986016500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">18:13:06</span>           nathanmarz </span><span>that&apos;s one way to solve it</span></div><div id="t1580408107017700" t="2020-01-30 18:15:07 joshkh aha, thanks for the working example. i always come back to specter after just long enough away to forget its paradigms  🙂"><a href="#t1580408107017700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-30</span> <span class="t" onclick="H(this)">18:15:07</span>               joshkh </span><span>aha, thanks for the working example. i always come back to specter after just long enough away to forget its paradigms </span><b>🙂</b></div><div id="t1580846820025100" t="2020-02-04 20:07:00 richiardiandrea Hi specter folks it&apos;s been a while and I am rusty  😄 

How do I navigate to all the vectors and makes sure that if they have only one element I unwrap it?"><a href="#t1580846820025100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-04</span> <span class="t" onclick="H(this)">20:07:00</span>      richiardiandrea </span><span>Hi specter folks it&apos;s been a while and I am rusty </span><b>😄</b><span>

How do I navigate to all the vectors and makes sure that if they have only one element I unwrap it?</span></div><div id="t1580846847025700" t="2020-02-04 20:07:27 richiardiandrea so from
 (xf/one-item-vector-&gt;map {:data {:a [1 2 3] :b [{:foo :bar}]}}) 
to
 (xf/one-item-vector-&gt;map {:data {:a [1 2 3] :b {:foo :bar}}})"><a href="#t1580846847025700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-04</span> <span class="t" onclick="H(this)">20:07:27</span>      richiardiandrea </span><span>so from
</span><pre>(xf/one-item-vector-&gt;map {:data {:a [1 2 3] :b [{:foo :bar}]}})</pre><span>
to
</span><pre>(xf/one-item-vector-&gt;map {:data {:a [1 2 3] :b {:foo :bar}}})</pre></div><div id="t1580847193026200" t="2020-02-04 20:13:13 richiardiandrea I think I am kind of missing how to drill down any map of maps"><a href="#t1580847193026200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-04</span> <span class="t" onclick="H(this)">20:13:13</span>      richiardiandrea </span><span>I think I am kind of missing how to drill down any map of maps</span></div><div id="t1580847200026400" t="2020-02-04 20:13:20 richiardiandrea like in  clojure.walk"><a href="#t1580847200026400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-04</span> <span class="t" onclick="H(this)">20:13:20</span>      richiardiandrea </span><span>like in </span><code>clojure.walk</code></div><div id="t1580885902026600" t="2020-02-05 06:58:22 akond (let [data {:data {:a [1 2 3] :b [{:foo :bar}]}}]
 (is (= (s/transform (s/walker (every-pred vector? (fn-&gt; count (= 1)) )) first data)
      {:data {:a [1 2 3] :b {:foo :bar}}}))) 
"><a href="#t1580885902026600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-05</span> <span class="t" onclick="H(this)">06:58:22</span>                akond </span><pre>(let [data {:data {:a [1 2 3] :b [{:foo :bar}]}}]
 (is (= (s/transform (s/walker (every-pred vector? (fn-&gt; count (= 1)) )) first data)
      {:data {:a [1 2 3] :b {:foo :bar}}})))</pre><span>
</span></div><div id="t1581225469030000" t="2020-02-09 05:17:49 richiardiandrea thanks a lot for answering!"><a href="#t1581225469030000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-09</span> <span class="t" onclick="H(this)">05:17:49</span>           richiardiandrea </span><span>thanks a lot for answering!</span></div><div id="t1580942365029200" t="2020-02-05 22:39:25 steveb8n @akond thanks, I learned from that example too. a couple of questions: 1/ which lib does fn-&gt; come from? 2/ the docs for walker imply it stops navigation when the predicate is satisfied once but, when I add another match, it transforms that too. this is what I want but it seems to contradict the docstring. what am I missing?"><a href="#t1580942365029200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-05</span> <span class="t" onclick="H(this)">22:39:25</span>             steveb8n </span><span>@akond thanks, I learned from that example too. a couple of questions: 1/ which lib does fn-&gt; come from? 2/ the docs for walker imply it stops navigation when the predicate is satisfied once but, when I add another match, it transforms that too. this is what I want but it seems to contradict the docstring. what am I missing?</span></div><div id="t1580970334029300" t="2020-02-06 06:25:34 akond fn-&gt; comes from plumbing:  https://plumatic.github.io/plumbing/plumbing.core.html#var-fn-.3E"><a href="#t1580970334029300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-06</span> <span class="t" onclick="H(this)">06:25:34</span>                     akond </span><span>fn-&gt; comes from plumbing: </span><a href="https://plumatic.github.io/plumbing/plumbing.core.html#var-fn-.3E" target="_blank">https://plumatic.github.io/plumbing/plumbing.core.html#var-fn-.3E</a></div><div id="t1580970378029500" t="2020-02-06 06:26:18 akond docs might be not up to date"><a href="#t1580970378029500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-06</span> <span class="t" onclick="H(this)">06:26:18</span>                     akond </span><span>docs might be not up to date</span></div><div id="t1582456257000600" t="2020-02-23 11:10:57 jimi Can someone help me translates this function into a specter one?
 (defn get-component!
  [system component-key]
  (or (get system component-key)
      (-&gt;&gt; system
           (filter (fn [[current-key]]
                     (and (vector? current-key)
                          (= 2 (count current-key))
                          (= component-key (second current-key)))))
           (map val)
           (first))
      (throw (ex-info &quot;missing component&quot; {:tag ::get-component!
                                           :component component-key}))))"><a href="#t1582456257000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-23</span> <span class="t" onclick="H(this)">11:10:57</span>                 jimi </span><span>Can someone help me translates this function into a specter one?
</span><pre>(defn get-component!
  [system component-key]
  (or (get system component-key)
      (-&gt;&gt; system
           (filter (fn [[current-key]]
                     (and (vector? current-key)
                          (= 2 (count current-key))
                          (= component-key (second current-key)))))
           (map val)
           (first))
      (throw (ex-info &quot;missing component&quot; {:tag ::get-component!
                                           :component component-key}))))</pre></div><div id="t1584487928003600" t="2020-03-17 23:32:08 aengelberg Is there a navigator that navigates to the singleton subsequence containing each element of a collection? This would give the transformer the opportunity to turn one element into many elements, and “splice” them back into the parent collection."><a href="#t1584487928003600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-17</span> <span class="t" onclick="H(this)">23:32:08</span>           aengelberg </span><span>Is there a navigator that navigates to the singleton subsequence containing each element of a collection? This would give the transformer the opportunity to turn one element into many elements, and “splice” them back into the parent collection.</span></div><div id="t1584487971004100" t="2020-03-17 23:32:51 aengelberg in other words, it would navigate to  (srange 0 1) , then  (srange 1 2) , etc"><a href="#t1584487971004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-17</span> <span class="t" onclick="H(this)">23:32:51</span>           aengelberg </span><span>in other words, it would navigate to </span><code>(srange 0 1)</code><span>, then </span><code>(srange 1 2)</code><span>, etc</span></div><div id="t1584488344004900" t="2020-03-17 23:39:04 aengelberg continuous-subseqs  is close to what I want, but I want the subseqs to not be continuous"><a href="#t1584488344004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-17</span> <span class="t" onclick="H(this)">23:39:04</span>           aengelberg </span><code>continuous-subseqs</code><span> is close to what I want, but I want the subseqs to not be continuous</span></div><div id="t1584517205005400" t="2020-03-18 07:40:05 nathanmarz @aengelberg this issue would let you do that with  continuous-subseqs   https://github.com/redplanetlabs/specter/issues/236"><a href="#t1584517205005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-18</span> <span class="t" onclick="H(this)">07:40:05</span>           nathanmarz </span><span>@aengelberg this issue would let you do that with </span><code>continuous-subseqs</code><span> </span><a href="https://github.com/redplanetlabs/specter/issues/236" target="_blank">https://github.com/redplanetlabs/specter/issues/236</a></div><div id="t1584517215005800" t="2020-03-18 07:40:15 nathanmarz otherwise you&apos;d have to write a custom navigator"><a href="#t1584517215005800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-18</span> <span class="t" onclick="H(this)">07:40:15</span>           nathanmarz </span><span>otherwise you&apos;d have to write a custom navigator</span></div><div id="t1586133881001300" t="2020-04-06 00:44:41 stuartrexking When navigating how do you ignore the first element? I&apos;m transforming a CSV and I want to ignore the header line."><a href="#t1586133881001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-06</span> <span class="t" onclick="H(this)">00:44:41</span>        stuartrexking </span><span>When navigating how do you ignore the first element? I&apos;m transforming a CSV and I want to ignore the header line.</span></div><div id="t1586153943001700" t="2020-04-06 06:19:03 stuartrexking Answered here  https://github.com/redplanetlabs/specter/issues/288#issuecomment-609547864"><a href="#t1586153943001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-06</span> <span class="t" onclick="H(this)">06:19:03</span>        stuartrexking </span><span>Answered here </span><a href="https://github.com/redplanetlabs/specter/issues/288#issuecomment-609547864" target="_blank">https://github.com/redplanetlabs/specter/issues/288#issuecomment-609547864</a></div><div id="t1586268926003800" t="2020-04-07 14:15:26 narkisr Hi Specter team I&apos;m looking for a way to collect values in a multi-path:

 (select [MAP-VALS ATOM (multi-path MAP-KEYS [MAP-VALS MAP-VALS :ttl])] results)       
I&apos;m getting back:

 [&quot;4fcb9fdd4ef847aa9b0a906e3effcf3b&quot;                                                                             
 1586267405166
 1586267416251
 &quot;31a915847bff41a788c1c34521ffe7a9&quot;
 1586265826511
 &quot;5a6c3fc3a587437baf497f9c80c858ca&quot;
 1586266864089
 1586266891300] 
And id like to group the [MAP-VALS MAP-VALS :ttl] into a vector:

 [&quot;4fcb9fdd4ef847aa9b0a906e3effcf3b&quot;                                                                             
 [1586267405166 1586267416251]
 &quot;31a915847bff41a788c1c34521ffe7a9&quot;
 [1586265826511]
 &quot;5a6c3fc3a587437baf497f9c80c858ca&quot;
 [1586266864089 1586266891300]] 
This is probably simple but using collect/VAL etc didn&apos;t work, what am I missing?  🙂"><a href="#t1586268926003800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-07</span> <span class="t" onclick="H(this)">14:15:26</span>              narkisr </span><span>Hi Specter team I&apos;m looking for a way to collect values in a multi-path:

</span><pre>(select [MAP-VALS ATOM (multi-path MAP-KEYS [MAP-VALS MAP-VALS :ttl])] results)      </pre><span>
I&apos;m getting back:

</span><pre>[&quot;4fcb9fdd4ef847aa9b0a906e3effcf3b&quot;                                                                             
 1586267405166
 1586267416251
 &quot;31a915847bff41a788c1c34521ffe7a9&quot;
 1586265826511
 &quot;5a6c3fc3a587437baf497f9c80c858ca&quot;
 1586266864089
 1586266891300]</pre><span>
And id like to group the [MAP-VALS MAP-VALS :ttl] into a vector:

</span><pre>[&quot;4fcb9fdd4ef847aa9b0a906e3effcf3b&quot;                                                                             
 [1586267405166 1586267416251]
 &quot;31a915847bff41a788c1c34521ffe7a9&quot;
 [1586265826511]
 &quot;5a6c3fc3a587437baf497f9c80c858ca&quot;
 [1586266864089 1586266891300]]</pre><span>
This is probably simple but using collect/VAL etc didn&apos;t work, what am I missing? </span><b>🙂</b></div><div id="t1586289018004100" t="2020-04-07 19:50:18 nathanmarz @narkisr you can use  subselect"><a href="#t1586289018004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-07</span> <span class="t" onclick="H(this)">19:50:18</span>           nathanmarz </span><span>@narkisr you can use </span><code>subselect</code></div><div id="t1586358482004500" t="2020-04-08 15:08:02 narkisr That worked thank you @nathanmarz"><a href="#t1586358482004500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-08</span> <span class="t" onclick="H(this)">15:08:02</span>              narkisr </span><span>That worked thank you @nathanmarz</span></div><div id="t1586359455006400" t="2020-04-08 15:24:15 thom What&apos;s an efficient way to find a value that comes after (in a vector) something matched by a  walker ? Should I just be matching one level up instead? For example, in  [:foo [:bar [:arbitrarily-nested-stuff [:baz 42]]]  if I was interested in the value 42 next to that deeply nested :baz?"><a href="#t1586359455006400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-08</span> <span class="t" onclick="H(this)">15:24:15</span>                 thom </span><span>What&apos;s an efficient way to find a value that comes after (in a vector) something matched by a </span><code>walker</code><span>? Should I just be matching one level up instead? For example, in </span><code>[:foo [:bar [:arbitrarily-nested-stuff [:baz 42]]]</code><span> if I was interested in the value 42 next to that deeply nested :baz?</span></div><div id="t1586364754006700" t="2020-04-08 16:52:34 nathanmarz @thom704 yea, you would want to match one level higher"><a href="#t1586364754006700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-08</span> <span class="t" onclick="H(this)">16:52:34</span>           nathanmarz </span><span>@thom704 yea, you would want to match one level higher</span></div><div id="t1586364811007100" t="2020-04-08 16:53:31 thom I think I had a slightly wrong-headed zippers way of thinking about it where I could get to somewhere and then just navigate around arbitrarily"><a href="#t1586364811007100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-08</span> <span class="t" onclick="H(this)">16:53:31</span>                 thom </span><span>I think I had a slightly wrong-headed zippers way of thinking about it where I could get to somewhere and then just navigate around arbitrarily</span></div><div id="t1586749652008700" t="2020-04-13 03:47:32 nonrecursive hey hey  🙂  How would I return a map where all paths that don’t terminate in an integer have been pruned?

Given:
 {:a {:b {:c 10
         :d &quot;&quot;}}
 :f 5
 :k [10]
 :m &quot;&quot;
 :x {:y {:z &quot;&quot;}}} 
I want:
 {:a {:b {:c 10}}
 :f 5
 :k [10]}"><a href="#t1586749652008700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-13</span> <span class="t" onclick="H(this)">03:47:32</span>         nonrecursive </span><span>hey hey </span><b>🙂</b><span> How would I return a map where all paths that don’t terminate in an integer have been pruned?

Given:
</span><pre>{:a {:b {:c 10
         :d &quot;&quot;}}
 :f 5
 :k [10]
 :m &quot;&quot;
 :x {:y {:z &quot;&quot;}}}</pre><span>
I want:
</span><pre>{:a {:b {:c 10}}
 :f 5
 :k [10]}</pre></div><div id="t1586817384009700" t="2020-04-13 22:36:24 nathanmarz @nonrecursive you can do that with a custom walker and  compact  :
 (def COMPACTING-WALKER
  (recursive-path [] p
    (cond-path map? [(compact MAP-VALS) p]
               coll? [(compact ALL) p]
               STAY STAY
               )))

(setval [COMPACTING-WALKER (complement number?)]
  NONE
  data
  ) 
"><a href="#t1586817384009700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-13</span> <span class="t" onclick="H(this)">22:36:24</span>           nathanmarz </span><span>@nonrecursive you can do that with a custom walker and </span><code>compact</code><span> :
</span><pre>(def COMPACTING-WALKER
  (recursive-path [] p
    (cond-path map? [(compact MAP-VALS) p]
               coll? [(compact ALL) p]
               STAY STAY
               )))

(setval [COMPACTING-WALKER (complement number?)]
  NONE
  data
  )</pre><span>
</span></div><div id="t1586878435010400" t="2020-04-14 15:33:55 nonrecursive @nathan that worked beautifully, thanks for your help!"><a href="#t1586878435010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-14</span> <span class="t" onclick="H(this)">15:33:55</span>         nonrecursive </span><span>@nathan that worked beautifully, thanks for your help!</span></div><div id="t1587147899015400" t="2020-04-17 18:24:59 lvh What I have:

 (def m (-&gt; {} (assoc-in [:a :b :c :d] 1) (assoc-in [:x :y :z] 2)))

(def INDEXED
  &quot;A path that visits v and collects k in [[k v], ...].&quot;
  [sr/ALL (sr/putval  sr/FIRST) sr/LAST])

(def INDEXED-SEQ
  &quot;A selector that visits all elements of a seq, and collects their indices.&quot;
  [(sr/view #(map-indexed vector %)) INDEXED])

(def NESTED-PATHS
  (sr/recursive-path
   [] p
   (sr/cond-path
    map? [INDEXED p]
    coll? [INDEXED-SEQ p]
    sr/STAY sr/STAY)))

(sr/select [NESTED-PATHS] m)
;; =&gt; [[:a :b :c :d 1] [:x :y :z 2]] 
What I would like (so I can peek/pop to destructure, since the &quot;path&quot; is separate from the final value):

 [[[:a :b :c :d] 1] [[:x :y :z] 2]] 

Of course I can just do that with last &amp; butlast but if there was a more efficient/elegant/different version I&apos;d love to know"><a href="#t1587147899015400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-17</span> <span class="t" onclick="H(this)">18:24:59</span>                  lvh </span><span>What I have:

</span><pre>(def m (-&gt; {} (assoc-in [:a :b :c :d] 1) (assoc-in [:x :y :z] 2)))

(def INDEXED
  &quot;A path that visits v and collects k in [[k v], ...].&quot;
  [sr/ALL (sr/putval  sr/FIRST) sr/LAST])

(def INDEXED-SEQ
  &quot;A selector that visits all elements of a seq, and collects their indices.&quot;
  [(sr/view #(map-indexed vector %)) INDEXED])

(def NESTED-PATHS
  (sr/recursive-path
   [] p
   (sr/cond-path
    map? [INDEXED p]
    coll? [INDEXED-SEQ p]
    sr/STAY sr/STAY)))

(sr/select [NESTED-PATHS] m)
;; =&gt; [[:a :b :c :d 1] [:x :y :z 2]]</pre><span>
What I would like (so I can peek/pop to destructure, since the &quot;path&quot; is separate from the final value):

</span><pre>[[[:a :b :c :d] 1] [[:x :y :z] 2]]</pre><span>

Of course I can just do that with last &amp; butlast but if there was a more efficient/elegant/different version I&apos;d love to know</span></div><div id="t1587148728016000" t="2020-04-17 18:38:48 lvh i could also solve this problem if I had a version of  view   that showed me the currently collected values"><a href="#t1587148728016000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-17</span> <span class="t" onclick="H(this)">18:38:48</span>                  lvh </span><span>i could also solve this problem if I had a version of </span><code>view</code><span>  that showed me the currently collected values</span></div><div id="t1587322155017400" t="2020-04-19 18:49:15 lvh Subtle variant of that:

 (def path-finder
  &quot;Finds the first entry matching `pred` in a deeply nested structure of maps
  and vectors, and collects the path on the way there.&quot;
  (sr/recursive-path
   [term-pred] p
   (sr/cond-path
    (sr/pred term-pred) sr/STAY
    map? [INDEXED p]
    coll? [INDEXED-SEQ p]))) 
(basically the same thing but with a predicate). This works fine (as expected when selecting):

 (sr/select
 (path-finder string?)
 {:a [&quot;x&quot;] :b {:c :d}})
;; =&gt; [[:a 0 &quot;x&quot;]] 
But when transforming I get this unexpected behavior:

 (= (sr/transform
    [(path-finder string?)]
    (fn [&amp; path-and-val] (-&gt; path-and-val last str/upper-case))
    {:a [&quot;x&quot;] :b {:c :d}})
   (sr/transform
    [NESTED-PATHS string?]
    (fn [&amp; path-and-val] (-&gt; path-and-val last str/upper-case))
    {:a [&quot;x&quot;] :b {:c :d}})
   {:a &apos;([0 &quot;X&quot;]), :b {:c :d}}) 
Why is that zero there all of a sudden and how do I fix that?"><a href="#t1587322155017400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-19</span> <span class="t" onclick="H(this)">18:49:15</span>                  lvh </span><span>Subtle variant of that:

</span><pre>(def path-finder
  &quot;Finds the first entry matching `pred` in a deeply nested structure of maps
  and vectors, and collects the path on the way there.&quot;
  (sr/recursive-path
   [term-pred] p
   (sr/cond-path
    (sr/pred term-pred) sr/STAY
    map? [INDEXED p]
    coll? [INDEXED-SEQ p])))</pre><span>
(basically the same thing but with a predicate). This works fine (as expected when selecting):

</span><pre>(sr/select
 (path-finder string?)
 {:a [&quot;x&quot;] :b {:c :d}})
;; =&gt; [[:a 0 &quot;x&quot;]]</pre><span>
But when transforming I get this unexpected behavior:

</span><pre>(= (sr/transform
    [(path-finder string?)]
    (fn [&amp; path-and-val] (-&gt; path-and-val last str/upper-case))
    {:a [&quot;x&quot;] :b {:c :d}})
   (sr/transform
    [NESTED-PATHS string?]
    (fn [&amp; path-and-val] (-&gt; path-and-val last str/upper-case))
    {:a [&quot;x&quot;] :b {:c :d}})
   {:a &apos;([0 &quot;X&quot;]), :b {:c :d}})</pre><span>
Why is that zero there all of a sudden and how do I fix that?</span></div><div id="t1588778966022300" t="2020-05-06 15:29:26 Alex Ragone Hi everyone! I am trying to navigate a 4D array and would like to get all the indicies (the path to get there). How do I do that? So far I have the following
 (transform [ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS)]
             (fn [d1 d2 d3 d4 item]
                 ...))
             4d-array)) 
But I don’t quite understand how the collect function works? Can anyone please help me?  🙂  Thank you."><a href="#t1588778966022300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">15:29:26</span>          Alex Ragone </span><span>Hi everyone! I am trying to navigate a 4D array and would like to get all the indicies (the path to get there). How do I do that? So far I have the following
</span><pre>(transform [ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS FIRST)
              ALL (collect-one INDEXED-VALS)]
             (fn [d1 d2 d3 d4 item]
                 ...))
             4d-array))</pre><span>
But I don’t quite understand how the collect function works? Can anyone please help me? </span><b>🙂</b><span> Thank you.</span></div><div id="t1588794894023100" t="2020-05-06 19:54:54 nathanmarz @ragonedk you want something more like:
 (transform [INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            ]
  (fn [d1 d2 d3 d4 item]
    )
  4d-arr
  )"><a href="#t1588794894023100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">19:54:54</span>           nathanmarz </span><span>@ragonedk you want something more like:
</span><pre>(transform [INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            INDEXED-VALS
            (collect-one FIRST)
            LAST
            ]
  (fn [d1 d2 d3 d4 item]
    )
  4d-arr
  )</pre></div><div id="t1588794957023400" t="2020-05-06 19:55:57 nathanmarz you can shorten that like this:
 (def ALL-AND-COLLECT-INDEX (path INDEXED-VALS (collect-one FIRST) LAST))

(transform [ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX]
  (fn [d1 d2 d3 d4 item]
    )
  4d-arr
  )"><a href="#t1588794957023400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">19:55:57</span>           nathanmarz </span><span>you can shorten that like this:
</span><pre>(def ALL-AND-COLLECT-INDEX (path INDEXED-VALS (collect-one FIRST) LAST))

(transform [ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX
            ALL-AND-COLLECT-INDEX]
  (fn [d1 d2 d3 d4 item]
    )
  4d-arr
  )</pre></div><div id="t1588795035024100" t="2020-05-06 19:57:15 Alex Ragone Awesome, that worked! Thank you :)"><a href="#t1588795035024100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">19:57:15</span>          Alex Ragone </span><span>Awesome, that worked! Thank you :)</span></div><div id="t1588803134029400" t="2020-05-06 22:12:14 Joe Hello, I have a 9x9 matrix using nested vectors, and I want to pull out the top left &apos;subsquare&apos; , i.e. elements at [0-2, 0-2]. I got the results I wanted with  (select [(srange 0 3) ALL (srange 0 3)] data)  , but I don&apos;t understand the need for the  ALL  inbetween the two  sranges . I was thinking the first srange would grab the first 3 vectors, and the second would grab the first 3 elements from each of them - what&apos;s the concept I&apos;m missing that means you need the  ALL  in the middle?
Here&apos;s the data:
 (def data
  [[5 3 0 0 7 0 0 0 0]
   [6 0 0 1 9 5 0 0 0]
   [0 9 8 0 0 0 0 6 0]
   [8 0 0 0 6 0 0 0 3]
   [4 0 0 8 0 3 0 0 1]
   [7 0 0 0 2 0 0 0 6]
   [0 6 0 0 0 0 2 8 0]
   [0 0 0 4 1 9 0 0 5]
   [0 0 0 0 8 0 0 7 9]]) "><a href="#t1588803134029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">22:12:14</span>                  Joe </span><span>Hello, I have a 9x9 matrix using nested vectors, and I want to pull out the top left &apos;subsquare&apos; , i.e. elements at [0-2, 0-2]. I got the results I wanted with </span><code>(select [(srange 0 3) ALL (srange 0 3)] data)</code><span> , but I don&apos;t understand the need for the </span><code>ALL</code><span> inbetween the two </span><code>sranges</code><span>. I was thinking the first srange would grab the first 3 vectors, and the second would grab the first 3 elements from each of them - what&apos;s the concept I&apos;m missing that means you need the </span><code>ALL</code><span> in the middle?
Here&apos;s the data:
</span><pre>(def data
  [[5 3 0 0 7 0 0 0 0]
   [6 0 0 1 9 5 0 0 0]
   [0 9 8 0 0 0 0 6 0]
   [8 0 0 0 6 0 0 0 3]
   [4 0 0 8 0 3 0 0 1]
   [7 0 0 0 2 0 0 0 6]
   [0 6 0 0 0 0 2 8 0]
   [0 0 0 4 1 9 0 0 5]
   [0 0 0 0 8 0 0 7 9]]) </pre></div><div id="t1588804625029900" t="2020-05-06 22:37:05 nathanmarz @allaboutthatmace1789  srange  navigates to a single subsequence,  ALL  navigates to each element"><a href="#t1588804625029900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">22:37:05</span>           nathanmarz </span><span>@allaboutthatmace1789 </span><code>srange</code><span> navigates to a single subsequence, </span><code>ALL</code><span> navigates to each element</span></div><div id="t1588805542033400" t="2020-05-06 22:52:22 Joe So the first  srange  gets to  [[1 2 3 ,,,] [1 2 3 ,,,] [1 2 3 ,,,]] , you need the  ALL  to tell it grab every element  [1 2 3 ,,,] [1 2 3 ,,,] [1 2 3 ,,,] , then for each of those elements the second  srange  gets the subseq of first 3 elements  [1 2 3] [1 2 3] [1 2 3]  - then wraps everything back up again?"><a href="#t1588805542033400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-06</span> <span class="t" onclick="H(this)">22:52:22</span>                  Joe </span><span>So the first </span><code>srange</code><span> gets to </span><code>[[1 2 3 ,,,] [1 2 3 ,,,] [1 2 3 ,,,]]</code><span>, you need the </span><code>ALL</code><span> to tell it grab every element </span><code>[1 2 3 ,,,] [1 2 3 ,,,] [1 2 3 ,,,]</code><span>, then for each of those elements the second </span><code>srange</code><span> gets the subseq of first 3 elements </span><code>[1 2 3] [1 2 3] [1 2 3]</code><span> - then wraps everything back up again?</span></div><div id="t1588819496033700" t="2020-05-07 02:44:56 nathanmarz in a select that would just return the individual elements"><a href="#t1588819496033700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-07</span> <span class="t" onclick="H(this)">02:44:56</span>           nathanmarz </span><span>in a select that would just return the individual elements</span></div><div id="t1588819522034200" t="2020-05-07 02:45:22 nathanmarz in a transform it would change the values in their locations in which you navigated to them"><a href="#t1588819522034200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-07</span> <span class="t" onclick="H(this)">02:45:22</span>           nathanmarz </span><span>in a transform it would change the values in their locations in which you navigated to them</span></div><div id="t1589816742040700" t="2020-05-18 15:45:42 mmer Hi a simple question but one that I have struggled to find an answer:  I have a vector of maps and I want to return all the maps that contains a map entry that matches a particular value, for example all maps where :lang contains &quot;EN&quot;."><a href="#t1589816742040700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">15:45:42</span>                 mmer </span><span>Hi a simple question but one that I have struggled to find an answer:  I have a vector of maps and I want to return all the maps that contains a map entry that matches a particular value, for example all maps where :lang contains &quot;EN&quot;.</span></div><div id="t1589817714041500" t="2020-05-18 16:01:54 spieden @mmer I believe  (spr/select [spr/ALL #(= &quot;EN&quot; (:lang %))] v-of-m)  should do it"><a href="#t1589817714041500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:01:54</span>              spieden </span><span>@mmer I believe </span><code>(spr/select [spr/ALL #(= &quot;EN&quot; (:lang %))] v-of-m)</code><span> should do it</span></div><div id="t1589817771042700" t="2020-05-18 16:02:51 mmer So obvious when you see it in front of you!  Thanks @spieden"><a href="#t1589817771042700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:02:51</span>                 mmer </span><span>So obvious when you see it in front of you!  Thanks @spieden</span></div><div id="t1589817901045700" t="2020-05-18 16:05:01 spieden @nathanmarz I&apos;m having an interesting issue combining  transform  and  stay-then-continue  . I&apos;m replacing a map with a string via transform, and then specter seems to try to navigate the new value like it&apos;s still a map and I get  class java.lang.String cannot be cast to class clojure.lang.Associative  from  do-keypath-transform  . Does that sound familiar at all?"><a href="#t1589817901045700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:05:01</span>              spieden </span><span>@nathanmarz I&apos;m having an interesting issue combining </span><code>transform</code><span> and </span><code>stay-then-continue</code><span> . I&apos;m replacing a map with a string via transform, and then specter seems to try to navigate the new value like it&apos;s still a map and I get </span><code>class java.lang.String cannot be cast to class clojure.lang.Associative</code><span> from </span><code>do-keypath-transform</code><span> . Does that sound familiar at all?</span></div><div id="t1589920068052400" t="2020-05-19 20:27:48 lvh I&apos;m confused: isn&apos;t that what stay then continue is supposed to do?"><a href="#t1589920068052400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:27:48</span>                       lvh </span><span>I&apos;m confused: isn&apos;t that what stay then continue is supposed to do?</span></div><div id="t1589920104052600" t="2020-05-19 20:28:24 lvh how do you want to transform the map if you&apos;ve already stringified its contents? do you have a more complete toy example?"><a href="#t1589920104052600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:28:24</span>                       lvh </span><span>how do you want to transform the map if you&apos;ve already stringified its contents? do you have a more complete toy example?</span></div><div id="t1589920113052800" t="2020-05-19 20:28:33 lvh i&apos;d assume you want postorder there"><a href="#t1589920113052800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:28:33</span>                       lvh </span><span>i&apos;d assume you want postorder there</span></div><div id="t1589920126053000" t="2020-05-19 20:28:46 lvh ugh, sorry, I just read the backlog"><a href="#t1589920126053000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:28:46</span>                       lvh </span><span>ugh, sorry, I just read the backlog</span></div><div id="t1589920129053200" t="2020-05-19 20:28:49 spieden Yeah that&apos;s what I ended up doing  ⬇️"><a href="#t1589920129053200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:28:49</span>                   spieden </span><span>Yeah that&apos;s what I ended up doing </span><b>⬇️</b></div><div id="t1589920132053400" t="2020-05-19 20:28:52 spieden :)"><a href="#t1589920132053400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-19</span> <span class="t" onclick="H(this)">20:28:52</span>                   spieden </span><span>:)</span></div><div id="t1589817954046400" t="2020-05-18 16:05:54 mmer There is another step to this:  I have a vector of pairs of vectors.  I want to add a value to the first vector based on a property in the second vector.  Again a simple use case, and probably has a simple answer"><a href="#t1589817954046400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:05:54</span>                 mmer </span><span>There is another step to this:  I have a vector of pairs of vectors.  I want to add a value to the first vector based on a property in the second vector.  Again a simple use case, and probably has a simple answer</span></div><div id="t1589818335047100" t="2020-05-18 16:12:15 spieden @mmer You&apos;d probably just handle all that inside your transform function"><a href="#t1589818335047100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:12:15</span>              spieden </span><span>@mmer You&apos;d probably just handle all that inside your transform function</span></div><div id="t1589818419048200" t="2020-05-18 16:13:39 mmer @spieden thanks,  I was expecting to be able to pass the first vector to the transform function without having selected it based on the values in the second function."><a href="#t1589818419048200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:13:39</span>                 mmer </span><span>@spieden thanks,  I was expecting to be able to pass the first vector to the transform function without having selected it based on the values in the second function.</span></div><div id="t1589818481049000" t="2020-05-18 16:14:41 spieden Ah hrm, well you can pass the whole tuple to the transform based on a value in the second"><a href="#t1589818481049000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:14:41</span>              spieden </span><span>Ah hrm, well you can pass the whole tuple to the transform based on a value in the second</span></div><div id="t1589818494049300" t="2020-05-18 16:14:54 spieden .. and then just transform the first vector in it and leave the other alone"><a href="#t1589818494049300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:14:54</span>              spieden </span><span>.. and then just transform the first vector in it and leave the other alone</span></div><div id="t1589818523049800" t="2020-05-18 16:15:23 mmer That makes sense"><a href="#t1589818523049800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:15:23</span>                 mmer </span><span>That makes sense</span></div><div id="t1589818568050800" t="2020-05-18 16:16:08 spieden (spr/transform [spr/ALL #(fn [[_ v2]] (pred? v2)] transform-v1 vs)"><a href="#t1589818568050800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:16:08</span>              spieden </span><code>(spr/transform [spr/ALL #(fn [[_ v2]] (pred? v2)] transform-v1 vs)</code></div><div id="t1589818707051000" t="2020-05-18 16:18:27 mmer Thanks"><a href="#t1589818707051000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:18:27</span>                 mmer </span><span>Thanks</span></div><div id="t1589820070051600" t="2020-05-18 16:41:10 spieden @nathanmarz Looks like switching to postorder via  continue-then-stay  did the trick!"><a href="#t1589820070051600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:41:10</span>              spieden </span><span>@nathanmarz Looks like switching to postorder via </span><code>continue-then-stay</code><span> did the trick!</span></div><div id="t1589820094052000" t="2020-05-18 16:41:34 spieden Many thanks for specter, as always -- not sure how I&apos;d accomplish this work I&apos;m doing without it"><a href="#t1589820094052000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-18</span> <span class="t" onclick="H(this)">16:41:34</span>              spieden </span><span>Many thanks for specter, as always -- not sure how I&apos;d accomplish this work I&apos;m doing without it</span></div><div id="t1590140081054500" t="2020-05-22 09:34:41 Endre Bakken Stovner How do I select multiple things at different levels?

 "><a href="#t1590140081054500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-22</span> <span class="t" onclick="H(this)">09:34:41</span> Endre Bakken Stovner </span><span>How do I select multiple things at different levels?

</span><pre></pre></div><div id="t1590140201056500" t="2020-05-22 09:36:41 Endre Bakken Stovner Test data:

 (def testrules {:plot-quals {:out {:graph &quot;quals.svg&quot; :data &quot;quals.tsv&quot;},},
                :samtools-index {:out &quot;bam/sorted.bam.bai&quot;,},
                :samtools-sort {:out &quot;bam/sorted.bam&quot;}}) 
I want to get the first key and value of out. Was thinking it would start something like

 (select [(collect-one KEY) ALL ALL :out] testrules)"><a href="#t1590140201056500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-22</span> <span class="t" onclick="H(this)">09:36:41</span> Endre Bakken Stovner </span><span>Test data:

</span><pre>(def testrules {:plot-quals {:out {:graph &quot;quals.svg&quot; :data &quot;quals.tsv&quot;},},
                :samtools-index {:out &quot;bam/sorted.bam.bai&quot;,},
                :samtools-sort {:out &quot;bam/sorted.bam&quot;}})</pre><span>
I want to get the first key and value of out. Was thinking it would start something like

</span><pre>(select [(collect-one KEY) ALL ALL :out] testrules)</pre></div><div id="t1590140353057300" t="2020-05-22 09:39:13 Endre Bakken Stovner (select [(collect ALL) ALL :out] testrules) 
got me closer."><a href="#t1590140353057300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-22</span> <span class="t" onclick="H(this)">09:39:13</span>      Endre Bakken Stovner </span><pre>(select [(collect ALL) ALL :out] testrules)</pre><span>
got me closer.</span></div><div id="t1590157924057500" t="2020-05-22 14:32:04 mmer (select [(collect-one FIRST FIRST)  ALL LAST :out] testrules)  yields  [[:plot-quals {:graph &quot;quals.svg&quot;, :data &quot;quals.tsv&quot;}] 
  [:plot-quals &quot;bam/sorted.bam.bai&quot;] 
  [:plot-quals &quot;bam/sorted.bam&quot;]]"><a href="#t1590157924057500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-22</span> <span class="t" onclick="H(this)">14:32:04</span>                      mmer </span><code>(select [(collect-one FIRST FIRST)  ALL LAST :out] testrules)</code><span> yields </span><code>[[:plot-quals {:graph &quot;quals.svg&quot;, :data &quot;quals.tsv&quot;}]</code><span>
 </span><code>[:plot-quals &quot;bam/sorted.bam.bai&quot;]</code><span>
 </span><code>[:plot-quals &quot;bam/sorted.bam&quot;]]</code></div><div id="t1590405657057800" t="2020-05-25 11:20:57 Endre Bakken Stovner Working through the tutorials now, but thanks for helping me solve some immediate problems :)"><a href="#t1590405657057800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-25</span> <span class="t" onclick="H(this)">11:20:57</span>      Endre Bakken Stovner </span><span>Working through the tutorials now, but thanks for helping me solve some immediate problems :)</span></div><div id="t1591399618059200" t="2020-06-05 23:26:58 dadair Can I use spectre to recursively transform java.util.HashMap of java.util.HashMaps to regular clojure maps?"><a href="#t1591399618059200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-05</span> <span class="t" onclick="H(this)">23:26:58</span>               dadair </span><span>Can I use spectre to recursively transform java.util.HashMap of java.util.HashMaps to regular clojure maps?</span></div><div id="t1591400677059800" t="2020-06-05 23:44:37 dadair I&apos;m basically trying to go from the top here, where all the maps are java.util.HashMap, to the bottom, where all maps are IAssociative:

 {&quot;name&quot; &quot;foo&quot;
 &quot;children&quot; {&quot;bar&quot; {&quot;name&quot; &quot;bar&quot;
                    &quot;children&quot; {}}
             &quot;baz&quot; {&quot;name&quot; &quot;baz&quot;
                    &quot;children&quot; {&quot;quux&quot; {&quot;name&quot; &quot;quux&quot;
                                        &quot;children&quot; {}}}}}}

;;=&gt; (addition of `ref`, keywordize the keys, make standard IAssociative)

{:name &quot;foo&quot;
 :children {:bar {:name &quot;bar&quot;
                  :children {}
                  :ref &quot;foo/bar&quot;}
            :baz {:name &quot;baz&quot;
                  :children {:quux {:name &quot;quux&quot;
                                    :children {}
                                    :ref &quot;foo/baz/quux&quot;}}
                  :ref &quot;foo/baz&quot;}}
 :ref &quot;foo&quot;}"><a href="#t1591400677059800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-05</span> <span class="t" onclick="H(this)">23:44:37</span>               dadair </span><span>I&apos;m basically trying to go from the top here, where all the maps are java.util.HashMap, to the bottom, where all maps are IAssociative:

</span><pre>{&quot;name&quot; &quot;foo&quot;
 &quot;children&quot; {&quot;bar&quot; {&quot;name&quot; &quot;bar&quot;
                    &quot;children&quot; {}}
             &quot;baz&quot; {&quot;name&quot; &quot;baz&quot;
                    &quot;children&quot; {&quot;quux&quot; {&quot;name&quot; &quot;quux&quot;
                                        &quot;children&quot; {}}}}}}

;;=&gt; (addition of `ref`, keywordize the keys, make standard IAssociative)

{:name &quot;foo&quot;
 :children {:bar {:name &quot;bar&quot;
                  :children {}
                  :ref &quot;foo/bar&quot;}
            :baz {:name &quot;baz&quot;
                  :children {:quux {:name &quot;quux&quot;
                                    :children {}
                                    :ref &quot;foo/baz/quux&quot;}}
                  :ref &quot;foo/baz&quot;}}
 :ref &quot;foo&quot;}</pre></div><div id="t1591400705060200" t="2020-06-05 23:45:05 dadair Had an implementation using both clojure.walk and spectre, but want to do it in 1 pass, if possible"><a href="#t1591400705060200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-05</span> <span class="t" onclick="H(this)">23:45:05</span>               dadair </span><span>Had an implementation using both clojure.walk and spectre, but want to do it in 1 pass, if possible</span></div><div id="t1591401102060800" t="2020-06-05 23:51:42 dadair I can select each with:
 (def HASH-MAPS
    (sp/recursive-path
     []
     p
     (sp/stay-then-continue
      (sp/must &quot;children&quot;)
      sp/MAP-VALS
      p)))

  (clojure.pprint/pprint
   (sp/select
    [:root HASH-MAPS]
    {:root hm}))"><a href="#t1591401102060800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-05</span> <span class="t" onclick="H(this)">23:51:42</span>               dadair </span><span>I can select each with:
</span><pre>(def HASH-MAPS
    (sp/recursive-path
     []
     p
     (sp/stay-then-continue
      (sp/must &quot;children&quot;)
      sp/MAP-VALS
      p)))

  (clojure.pprint/pprint
   (sp/select
    [:root HASH-MAPS]
    {:root hm}))</pre></div><div id="t1591401115061200" t="2020-06-05 23:51:55 dadair It&apos;s the transform in one pass that&apos;s getting me confused &gt;.&lt;"><a href="#t1591401115061200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-05</span> <span class="t" onclick="H(this)">23:51:55</span>               dadair </span><span>It&apos;s the transform in one pass that&apos;s getting me confused &gt;.&lt;</span></div><div id="t1591793361064500" t="2020-06-10 12:49:21 mmer @dadair I was going to answer your question thinking it was simple, but then I realise the issue is that you need the name of parent key to be able to construct the ref.  I had a similar issue when traversing a tree.  It is as if you need to collect it on your way but I could never understand how to reference the collected value."><a href="#t1591793361064500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-10</span> <span class="t" onclick="H(this)">12:49:21</span>                 mmer </span><span>@dadair I was going to answer your question thinking it was simple, but then I realise the issue is that you need the name of parent key to be able to construct the ref.  I had a similar issue when traversing a tree.  It is as if you need to collect it on your way but I could never understand how to reference the collected value.</span></div><div id="t1591923291064900" t="2020-06-12 00:54:51 dadair I have a working solution if you’re interested,"><a href="#t1591923291064900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">00:54:51</span>               dadair </span><span>I have a working solution if you’re interested,</span></div><div id="t1591923348066600" t="2020-06-12 00:55:48 dadair It was more involved than I thought, but not so bad. Had to extend IKVReduce for Java.util.HashMaps and the map-vals spectre protocols, but all in all it’s pretty succinct code "><a href="#t1591923348066600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">00:55:48</span>               dadair </span><span>It was more involved than I thought, but not so bad. Had to extend IKVReduce for Java.util.HashMaps and the map-vals spectre protocols, but all in all it’s pretty succinct code </span></div><div id="t1591923392067700" t="2020-06-12 00:56:32 dadair I can post a gist maybe tomorrow "><a href="#t1591923392067700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">00:56:32</span>               dadair </span><span>I can post a gist maybe tomorrow </span></div><div id="t1591928632068800" t="2020-06-12 02:23:52 fmn Is there any performance benefit of using  select-first   over  select-one  ? My use case is to select the first one matching the path without considering if there&apos;s any duplicate in the collection."><a href="#t1591928632068800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">02:23:52</span>                  fmn </span><span>Is there any performance benefit of using </span><code>select-first</code><span>  over </span><code>select-one</code><span> ? My use case is to select the first one matching the path without considering if there&apos;s any duplicate in the collection.</span></div><div id="t1591978541069300" t="2020-06-12 16:15:41 nathanmarz @funyako.funyao156 select-first will terminate navigation early if relevant"><a href="#t1591978541069300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">16:15:41</span>           nathanmarz </span><span>@funyako.funyao156 select-first will terminate navigation early if relevant</span></div><div id="t1591978564069800" t="2020-06-12 16:16:04 nathanmarz e.g.  (select-first [ALL even?] data)  will be faster than  (select-one [ALL even?] data)"><a href="#t1591978564069800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-12</span> <span class="t" onclick="H(this)">16:16:04</span>           nathanmarz </span><span>e.g. </span><code>(select-first [ALL even?] data)</code><span> will be faster than </span><code>(select-one [ALL even?] data)</code></div><div id="t1592009417070100" t="2020-06-13 00:50:17 fmn Thank you"><a href="#t1592009417070100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-13</span> <span class="t" onclick="H(this)">00:50:17</span>                  fmn </span><span>Thank you</span></div><div id="t1592918834072000" t="2020-06-23 13:27:14 Casey hey folks, given a vector of vectors of integers, and a separate vector of integers to remove, how can I remove all integers from the sub-vectors that are in the separate vector?

 (def to-remove [ 4 5 6 ])
(def coll [ [1 2 4] [3 5 8 ] [6] [] ])
(specter/transform [(specter/filterer not-empty) specter/ALL ..?.. ] specter/NONE coll)

;; =&gt; [ [1 2] [3 8] [] [] ]"><a href="#t1592918834072000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">13:27:14</span>                Casey </span><span>hey folks, given a vector of vectors of integers, and a separate vector of integers to remove, how can I remove all integers from the sub-vectors that are in the separate vector?

</span><pre>(def to-remove [ 4 5 6 ])
(def coll [ [1 2 4] [3 5 8 ] [6] [] ])
(specter/transform [(specter/filterer not-empty) specter/ALL ..?.. ] specter/NONE coll)

;; =&gt; [ [1 2] [3 8] [] [] ]</pre></div><div id="t1592919594073300" t="2020-06-23 13:39:54 Casey Seems like this works, is there a more efficient way to write it?

 (specter/setval [specter/ALL specter/ALL (fn [val]  (some #(= val %) to-remove))] specter/NONE coll)"><a href="#t1592919594073300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">13:39:54</span>                Casey </span><span>Seems like this works, is there a more efficient way to write it?

</span><pre>(specter/setval [specter/ALL specter/ALL (fn [val]  (some #(= val %) to-remove))] specter/NONE coll)</pre></div><div id="t1592932007074700" t="2020-06-23 17:06:47 jsa-aerial Might be nicer if you made  to-remove  a set, then it is just  (to-remove val)  or replace  fn  form with  #(to-remove %)"><a href="#t1592932007074700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">17:06:47</span>           jsa-aerial </span><span>Might be nicer if you made </span><code>to-remove</code><span> a set, then it is just </span><code>(to-remove val)</code><span> or replace </span><code>fn</code><span> form with </span><code>#(to-remove %)</code></div><div id="t1592935258075800" t="2020-06-23 18:00:58 avi Hi, sorry if this is a FAQ, but how can I navigate to a map, and then filter the entries in the map, based on certain nested values in the values?"><a href="#t1592935258075800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:00:58</span>                  avi </span><span>Hi, sorry if this is a FAQ, but how can I navigate to a map, and then filter the entries in the map, based on certain nested values in the values?</span></div><div id="t1592935283075900" t="2020-06-23 18:01:23 avi Here’s what I’m doing in “plain old Clojure” (plus Medley) that I’m curious how to translate to Specter:

 (-&gt;&gt; (db/read &quot;db&quot;)
     (:technologies)
     (medley/filter-vals
       (fn [tech] (some (fn [rec] (rec &quot;ratified&quot;))
                        (get tech &quot;recommendations&quot;)))))"><a href="#t1592935283075900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:01:23</span>                       avi </span><span>Here’s what I’m doing in “plain old Clojure” (plus Medley) that I’m curious how to translate to Specter:

</span><pre>(-&gt;&gt; (db/read &quot;db&quot;)
     (:technologies)
     (medley/filter-vals
       (fn [tech] (some (fn [rec] (rec &quot;ratified&quot;))
                        (get tech &quot;recommendations&quot;)))))</pre></div><div id="t1592935286076100" t="2020-06-23 18:01:26 avi Thanks!"><a href="#t1592935286076100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:01:26</span>                       avi </span><span>Thanks!</span></div><div id="t1592935462076600" t="2020-06-23 18:04:22 phronmophobic not sure it&apos;s the most straightforward approach, but you could probably use:
 [:technology MAP-VALS] 
for the path. in your transform function:
• return the original value to keep it
• return spec/NONE to remove a value"><a href="#t1592935462076600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:04:22</span>             phronmophobic </span><span>not sure it&apos;s the most straightforward approach, but you could probably use:
</span><pre>[:technology MAP-VALS]</pre><span>
for the path. in your transform function:
• return the original value to keep it
• return spec/NONE to remove a value</span></div><div id="t1592935488076800" t="2020-06-23 18:04:48 avi Thanks! But I’m not looking to transform, just to query."><a href="#t1592935488076800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:04:48</span>                       avi </span><span>Thanks! But I’m not looking to transform, just to query.</span></div><div id="t1592935506077100" t="2020-06-23 18:05:06 phronmophobic oh"><a href="#t1592935506077100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:05:06</span>             phronmophobic </span><span>oh</span></div><div id="t1592935532077300" t="2020-06-23 18:05:32 avi Yeah, I left if off but when I ran the above code, the last form in the thread-last form was  keys"><a href="#t1592935532077300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:05:32</span>                       avi </span><span>Yeah, I left if off but when I ran the above code, the last form in the thread-last form was </span><code>keys</code></div><div id="t1592935601077500" t="2020-06-23 18:06:41 phronmophobic [:technology MAP-VALS (fn [tech] (some (fn [rec] (rec &quot;ratified&quot;))
                        (get tech &quot;recommendations&quot;)))] 
"><a href="#t1592935601077500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:06:41</span>             phronmophobic </span><pre>[:technology MAP-VALS (fn [tech] (some (fn [rec] (rec &quot;ratified&quot;))
                        (get tech &quot;recommendations&quot;)))]</pre><span>
</span></div><div id="t1592935621077800" t="2020-06-23 18:07:01 avi interesting, I thought I tried that… I’ll try again, brb!"><a href="#t1592935621077800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:07:01</span>                       avi </span><span>interesting, I thought I tried that… I’ll try again, brb!</span></div><div id="t1592935653078000" t="2020-06-23 18:07:33 phronmophobic i&apos;m not specter expert either ¯\(ツ)/¯"><a href="#t1592935653078000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:07:33</span>             phronmophobic </span><span>i&apos;m not specter expert either ¯\(ツ)/¯</span></div><div id="t1592935689078400" t="2020-06-23 18:08:09 avi Wait… that’ll navigate to the results of the predicate, right? But I want the map under  :technologies , just filtered"><a href="#t1592935689078400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:08:09</span>                       avi </span><span>Wait… that’ll navigate to the results of the predicate, right? But I want the map under </span><code>:technologies</code><span>, just filtered</span></div><div id="t1592935821078600" t="2020-06-23 18:10:21 avi I’m very new to Specter but I’d think it’d have something roughly equivalent to Medley’s  filter-vals  (which filters a map by applying a predicate to the vals in the map, and returns a map containing the matching entries)"><a href="#t1592935821078600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:10:21</span>                       avi </span><span>I’m very new to Specter but I’d think it’d have something roughly equivalent to Medley’s </span><code>filter-vals</code><span> (which filters a map by applying a predicate to the vals in the map, and returns a map containing the matching entries)</span></div><div id="t1592935845078800" t="2020-06-23 18:10:45 avi (Or something equivalent to  filter  that I could use to the same effect)"><a href="#t1592935845078800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:10:45</span>                       avi </span><span>(Or something equivalent to </span><code>filter</code><span> that I could use to the same effect)</span></div><div id="t1592935873079000" t="2020-06-23 18:11:13 phronmophobic https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#filterer"><a href="#t1592935873079000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:11:13</span>             phronmophobic </span><a href="https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#filterer" target="_blank">https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#filterer</a></div><div id="t1592935904079200" t="2020-06-23 18:11:44 avi Right! I tried that but had trouble with it. Thought maybe I just didn’t understand it. I’ll try again… brb"><a href="#t1592935904079200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:11:44</span>                       avi </span><span>Right! I tried that but had trouble with it. Thought maybe I just didn’t understand it. I’ll try again… brb</span></div><div id="t1592935932079400" t="2020-06-23 18:12:12 phronmophobic imo, specter is much more useful if you&apos;re transforming or setting data in a deeply nested data structure. if you&apos;re just drilling into a nested data structure, I usually just use the normal clojure functions"><a href="#t1592935932079400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:12:12</span>             phronmophobic </span><span>imo, specter is much more useful if you&apos;re transforming or setting data in a deeply nested data structure. if you&apos;re just drilling into a nested data structure, I usually just use the normal clojure functions</span></div><div id="t1592935952079700" t="2020-06-23 18:12:32 avi that makes sense."><a href="#t1592935952079700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:12:32</span>                       avi </span><span>that makes sense.</span></div><div id="t1592935974079900" t="2020-06-23 18:12:54 avi But I’d like to build up my own intuition as to when to use Specter, by seeing what it’s like to use it in cases like this"><a href="#t1592935974079900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:12:54</span>                       avi </span><span>But I’d like to build up my own intuition as to when to use Specter, by seeing what it’s like to use it in cases like this</span></div><div id="t1592936000080100" t="2020-06-23 18:13:20 phronmophobic 👍"><a href="#t1592936000080100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:13:20</span>             phronmophobic </span><b>👍</b></div><div id="t1592936026080300" t="2020-06-23 18:13:46 avi Also, I had to walk a Clojure newbie through the above code and it was non-trivial to explain. I think the path concept could maybe be much more straightforward for folks new to Clojure and Lisps."><a href="#t1592936026080300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:13:46</span>                       avi </span><span>Also, I had to walk a Clojure newbie through the above code and it was non-trivial to explain. I think the path concept could maybe be much more straightforward for folks new to Clojure and Lisps.</span></div><div id="t1592936053080500" t="2020-06-23 18:14:13 phronmophobic i&apos;m only a specter novice, so there&apos;s probably a very straightforward way to do it that I don&apos;t know about"><a href="#t1592936053080500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:14:13</span>             phronmophobic </span><span>i&apos;m only a specter novice, so there&apos;s probably a very straightforward way to do it that I don&apos;t know about</span></div><div id="t1592936241080700" t="2020-06-23 18:17:21 avi I hear ya, I have the same suspicion"><a href="#t1592936241080700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:17:21</span>                       avi </span><span>I hear ya, I have the same suspicion</span></div><div id="t1592936278080900" t="2020-06-23 18:17:58 avi Trying this:

 (select [:technologies
         (filterer MAP-VALS &quot;recommendations&quot; ALL &quot;ratified&quot;)
         MAP-KEYS]
        db) 
getting:  java.lang.ClassCastException:  &quot;class java.lang.String cannot be cast to class java.util.Map$Entry…"><a href="#t1592936278080900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:17:58</span>                       avi </span><span>Trying this:

</span><pre>(select [:technologies
         (filterer MAP-VALS &quot;recommendations&quot; ALL &quot;ratified&quot;)
         MAP-KEYS]
        db)</pre><span>
getting: </span><code>java.lang.ClassCastException:  &quot;class java.lang.String cannot be cast to class java.util.Map$Entry…</code></div><div id="t1592936323081100" t="2020-06-23 18:18:43 phronmophobic specter doesn&apos;t recognize strings as map keys like it does for keywords"><a href="#t1592936323081100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:18:43</span>             phronmophobic </span><span>specter doesn&apos;t recognize strings as map keys like it does for keywords</span></div><div id="t1592936335081300" t="2020-06-23 18:18:55 avi really?"><a href="#t1592936335081300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:18:55</span>                       avi </span><span>really?</span></div><div id="t1592936341081500" t="2020-06-23 18:19:01 phronmophobic I think &quot;recommendations&quot; needs to be (keypath &quot;recommendations&quot;)"><a href="#t1592936341081500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:19:01</span>             phronmophobic </span><span>I think &quot;recommendations&quot; needs to be (keypath &quot;recommendations&quot;)</span></div><div id="t1592936344081700" t="2020-06-23 18:19:04 avi I thought i saw that work, one sec…"><a href="#t1592936344081700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:19:04</span>                       avi </span><span>I thought i saw that work, one sec…</span></div><div id="t1592936379081900" t="2020-06-23 18:19:39 phronmophobic hmmm, maybe it does"><a href="#t1592936379081900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:19:39</span>             phronmophobic </span><span>hmmm, maybe it does</span></div><div id="t1592936386082100" t="2020-06-23 18:19:46 avi Yeah, this works:  (select [:technologies MAP-VALS &quot;recommendations&quot; ALL] db)"><a href="#t1592936386082100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:19:46</span>                       avi </span><span>Yeah, this works: </span><code>(select [:technologies MAP-VALS &quot;recommendations&quot; ALL] db)</code></div><div id="t1592937943084700" t="2020-06-23 18:45:43 phronmophobic filterer is complaining because it&apos;s turning the map into a sequence"><a href="#t1592937943084700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:45:43</span>             phronmophobic </span><span>filterer is complaining because it&apos;s turning the map into a sequence</span></div><div id="t1592937950084900" t="2020-06-23 18:45:50 phronmophobic maybe something like:
 (spec/select [:technologies
              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot;)
              ALL
              (spec/nthpath 0)]
        db)"><a href="#t1592937950084900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:45:50</span>             phronmophobic </span><span>maybe something like:
</span><pre>(spec/select [:technologies
              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot;)
              ALL
              (spec/nthpath 0)]
        db)</pre></div><div id="t1592938007085100" t="2020-06-23 18:46:47 avi huh, that’s surprising. I wonder why it’s doing that. I’d think that’d be antithetical to Specter’s general behavior of leaving types as-is"><a href="#t1592938007085100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:46:47</span>                       avi </span><span>huh, that’s surprising. I wonder why it’s doing that. I’d think that’d be antithetical to Specter’s general behavior of leaving types as-is</span></div><div id="t1592938018085300" t="2020-06-23 18:46:58 avi also: thank you!"><a href="#t1592938018085300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:46:58</span>                       avi </span><span>also: thank you!</span></div><div id="t1592938113085500" t="2020-06-23 18:48:33 avi interesting… this “works”, but the result is incorrect:

 (select [:technologies
         (filterer (nthpath 1) &quot;recommendations&quot; ALL &quot;ratified&quot;)
         MAP-KEYS]
        db)"><a href="#t1592938113085500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:48:33</span>                       avi </span><span>interesting… this “works”, but the result is incorrect:

</span><pre>(select [:technologies
         (filterer (nthpath 1) &quot;recommendations&quot; ALL &quot;ratified&quot;)
         MAP-KEYS]
        db)</pre></div><div id="t1592938268085700" t="2020-06-23 18:51:08 phronmophobic shoot"><a href="#t1592938268085700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:51:08</span>             phronmophobic </span><span>shoot</span></div><div id="t1592938302085900" t="2020-06-23 18:51:42 phronmophobic &gt; with the path yields anything other than an empty sequence."><a href="#t1592938302085900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:51:42</span>             phronmophobic </span><span>&gt; with the path yields anything other than an empty sequence.</span></div><div id="t1592938308086100" t="2020-06-23 18:51:48 phronmophobic the path is probably yielding false"><a href="#t1592938308086100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:51:48</span>             phronmophobic </span><span>the path is probably yielding false</span></div><div id="t1592938324086300" t="2020-06-23 18:52:04 avi the path in  filterer  ?"><a href="#t1592938324086300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:04</span>                       avi </span><span>the path in </span><code>filterer</code><span> ?</span></div><div id="t1592938329086500" t="2020-06-23 18:52:09 phronmophobic right"><a href="#t1592938329086500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:09</span>             phronmophobic </span><span>right</span></div><div id="t1592938332086700" t="2020-06-23 18:52:12 avi I wouldn’t think so…?"><a href="#t1592938332086700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:12</span>                       avi </span><span>I wouldn’t think so…?</span></div><div id="t1592938338086900" t="2020-06-23 18:52:18 avi why would it yield false?"><a href="#t1592938338086900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:18</span>                       avi </span><span>why would it yield false?</span></div><div id="t1592938348087100" t="2020-06-23 18:52:28 avi I thought any path to something that doesn’t exist yields nil?"><a href="#t1592938348087100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:28</span>                       avi </span><span>I thought any path to something that doesn’t exist yields nil?</span></div><div id="t1592938349087300" t="2020-06-23 18:52:29 phronmophobic or whatever is in the ratified key"><a href="#t1592938349087300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:29</span>             phronmophobic </span><span>or whatever is in the ratified key</span></div><div id="t1592938372087500" t="2020-06-23 18:52:52 phronmophobic does the ratified key exist even for unratified recommendations?"><a href="#t1592938372087500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:52:52</span>             phronmophobic </span><span>does the ratified key exist even for unratified recommendations?</span></div><div id="t1592938402087700" t="2020-06-23 18:53:22 avi right. but most of the maps in the sequences that correspond to the &quot;recommendations&quot; keys do not have the key &quot;ratified&quot;; only a few do. I’m trying to find those technologies that have recommendations that have been ratified"><a href="#t1592938402087700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:53:22</span>                       avi </span><span>right. but most of the maps in the sequences that correspond to the &quot;recommendations&quot; keys do not have the key &quot;ratified&quot;; only a few do. I’m trying to find those technologies that have recommendations that have been ratified</span></div><div id="t1592938457087900" t="2020-06-23 18:54:17 phronmophobic this seems to work:
 (def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies

              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; identity)
              spec/MAP-KEYS
              ;; ALL
              ;;(spec/nthpath 0)
              ]
             data)"><a href="#t1592938457087900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:54:17</span>             phronmophobic </span><span>this seems to work:
</span><pre>(def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies

              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; identity)
              spec/MAP-KEYS
              ;; ALL
              ;;(spec/nthpath 0)
              ]
             data)</pre></div><div id="t1592938493088100" t="2020-06-23 18:54:53 phronmophobic the above will return [0]"><a href="#t1592938493088100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:54:53</span>             phronmophobic </span><span>the above will return [0]</span></div><div id="t1592938500088300" t="2020-06-23 18:55:00 avi it does!"><a href="#t1592938500088300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:55:00</span>                       avi </span><span>it does!</span></div><div id="t1592938507088500" t="2020-06-23 18:55:07 avi I don’t get it though  🙃"><a href="#t1592938507088500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:55:07</span>                       avi </span><span>I don’t get it though </span><b>🙃</b></div><div id="t1592938536088700" t="2020-06-23 18:55:36 avi why is the  identity  needed? what is it doing?"><a href="#t1592938536088700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:55:36</span>                       avi </span><span>why is the </span><code>identity</code><span> needed? what is it doing?</span></div><div id="t1592938587088900" t="2020-06-23 18:56:27 phronmophobic so without identity and removing filterer:
 (def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies
              ALL
              (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; 
              ;; spec/MAP-KEYS
              ;; ALL
              ;;(spec/nthpath 0)
              ]
             data)"><a href="#t1592938587088900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:56:27</span>             phronmophobic </span><span>so without identity and removing filterer:
</span><pre>(def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies
              ALL
              (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; 
              ;; spec/MAP-KEYS
              ;; ALL
              ;;(spec/nthpath 0)
              ]
             data)</pre></div><div id="t1592938596089100" t="2020-06-23 18:56:36 phronmophobic you get [true false]"><a href="#t1592938596089100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:56:36</span>             phronmophobic </span><span>you get [true false]</span></div><div id="t1592938630089400" t="2020-06-23 18:57:10 avi That’s not what I’m getting"><a href="#t1592938630089400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:10</span>                       avi </span><span>That’s not what I’m getting</span></div><div id="t1592938630089600" t="2020-06-23 18:57:10 phronmophobic basically, it can navigate to the &quot;ratified&quot; key"><a href="#t1592938630089600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:10</span>             phronmophobic </span><span>basically, it can navigate to the &quot;ratified&quot; key</span></div><div id="t1592938637089800" t="2020-06-23 18:57:17 avi oh wait…"><a href="#t1592938637089800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:17</span>                       avi </span><span>oh wait…</span></div><div id="t1592938642090000" t="2020-06-23 18:57:22 phronmophobic I also removed the filterer"><a href="#t1592938642090000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:22</span>             phronmophobic </span><span>I also removed the filterer</span></div><div id="t1592938649090200" t="2020-06-23 18:57:29 avi ah interesting"><a href="#t1592938649090200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:29</span>                       avi </span><span>ah interesting</span></div><div id="t1592938653090400" t="2020-06-23 18:57:33 phronmophobic and the path exists if it can navigate there"><a href="#t1592938653090400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:33</span>             phronmophobic </span><span>and the path exists if it can navigate there</span></div><div id="t1592938665090600" t="2020-06-23 18:57:45 avi I see, you did that as a way to debug the filterer path?"><a href="#t1592938665090600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:57:45</span>                       avi </span><span>I see, you did that as a way to debug the filterer path?</span></div><div id="t1592938684090900" t="2020-06-23 18:58:04 phronmophobic so filterer will keep paths that it can navigate to, even if the value it navigates to is falsey"><a href="#t1592938684090900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:04</span>             phronmophobic </span><span>so filterer will keep paths that it can navigate to, even if the value it navigates to is falsey</span></div><div id="t1592938686091100" t="2020-06-23 18:58:06 avi cool, that’s clever, makes sense!"><a href="#t1592938686091100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:06</span>                       avi </span><span>cool, that’s clever, makes sense!</span></div><div id="t1592938694091300" t="2020-06-23 18:58:14 avi that’s… surprising"><a href="#t1592938694091300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:14</span>                       avi </span><span>that’s… surprising</span></div><div id="t1592938697091500" t="2020-06-23 18:58:17 avi but, so be it"><a href="#t1592938697091500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:17</span>                       avi </span><span>but, so be it</span></div><div id="t1592938705091700" t="2020-06-23 18:58:25 phronmophobic so identity is the simplest function that I can think of to filter based on truthiness"><a href="#t1592938705091700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:25</span>             phronmophobic </span><span>so identity is the simplest function that I can think of to filter based on truthiness</span></div><div id="t1592938736091900" t="2020-06-23 18:58:56 phronmophobic I think filterer has the right design, but it is a little surprising at first"><a href="#t1592938736091900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:58:56</span>             phronmophobic </span><span>I think filterer has the right design, but it is a little surprising at first</span></div><div id="t1592938751092100" t="2020-06-23 18:59:11 avi some?  ?"><a href="#t1592938751092100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:59:11</span>                       avi </span><code>some?</code><span> ?</span></div><div id="t1592938789092300" t="2020-06-23 18:59:49 phronmophobic (some? false)  =&gt; true"><a href="#t1592938789092300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:59:49</span>             phronmophobic </span><code>(some? false)</code><span> =&gt; true</span></div><div id="t1592938815092500" t="2020-06-23 19:00:15 phronmophobic actually,  boolean  is probably clearer"><a href="#t1592938815092500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:00:15</span>             phronmophobic </span><span>actually, </span><code>boolean</code><span> is probably clearer</span></div><div id="t1592938836092700" t="2020-06-23 19:00:36 avi 😵"><a href="#t1592938836092700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:00:36</span>                       avi </span><b>😵</b></div><div id="t1592938839092900" t="2020-06-23 19:00:39 phronmophobic (def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies
              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; boolean)
              spec/MAP-KEYS
              ]
             data)"><a href="#t1592938839092900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:00:39</span>             phronmophobic </span><pre>(def data {:technologies
           {0 {&quot;recommendations&quot; [{&quot;ratified&quot; true}]}
            1 {&quot;recommendations&quot; [{&quot;ratified&quot; false}]}
            2 {&quot;recommendations&quot; []}}})

(spec/select [:technologies
              (spec/filterer  (spec/nthpath 1) &quot;recommendations&quot; spec/ALL &quot;ratified&quot; boolean)
              spec/MAP-KEYS
              ]
             data)</pre></div><div id="t1592938897093100" t="2020-06-23 19:01:37 phronmophobic some? &apos;s doc string is correct:
 clojure.core/some?
 [x]
Added in 1.6
  Returns true if x is not nil, false otherwise."><a href="#t1592938897093100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:01:37</span>             phronmophobic </span><code>some?</code><span>&apos;s doc string is correct:
</span><pre>clojure.core/some?
 [x]
Added in 1.6
  Returns true if x is not nil, false otherwise.</pre></div><div id="t1592938948093300" t="2020-06-23 19:02:28 avi So  some?  is equivalent to  (complement nil?)    …. ?"><a href="#t1592938948093300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:02:28</span>                       avi </span><span>So </span><code>some?</code><span> is equivalent to </span><code>(complement nil?)</code><span>   …. ?</span></div><div id="t1592938988093500" t="2020-06-23 19:03:08 avi Anyway, I still don’t quite get  filterer  — but a prerequisite to getting it is seeing what works. Which I’ve got now. Thank you so much!"><a href="#t1592938988093500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">19:03:08</span>                       avi </span><span>Anyway, I still don’t quite get </span><code>filterer</code><span> — but a prerequisite to getting it is seeing what works. Which I’ve got now. Thank you so much!</span></div><div id="t1592936998083000" t="2020-06-23 18:29:58 Casey Is there away to setval on a path but only set the first matching value?"><a href="#t1592936998083000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:29:58</span>                Casey </span><span>Is there away to setval on a path but only set the first matching value?</span></div><div id="t1592937265083900" t="2020-06-23 18:34:25 Casey Using my example from before, if coll was  (def coll [ [1 2 4] [3 5 8 4] [6] [] ])    I&apos;d like the result to be  ;; =&gt; [ [1 2] [3 8 4] [] [] ]   (that is, the 4 is only removed once)"><a href="#t1592937265083900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:34:25</span>                Casey </span><span>Using my example from before, if coll was </span><code>(def coll [ [1 2 4] [3 5 8 4] [6] [] ])</code><span>   I&apos;d like the result to be </span><code>;; =&gt; [ [1 2] [3 8 4] [] [] ]</code><span>  (that is, the 4 is only removed once)</span></div><div id="t1592937324084600" t="2020-06-23 18:35:24 Casey If I add a  FIRST  after the  (fn ...)  in the path, I get a  Error: 4 is not ISeqable"><a href="#t1592937324084600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-06-23</span> <span class="t" onclick="H(this)">18:35:24</span>                Casey </span><span>If I add a </span><code>FIRST</code><span> after the </span><code>(fn ...)</code><span> in the path, I get a </span><code>Error: 4 is not ISeqable</code></div><div id="t1595853735099600" t="2020-07-27 12:42:15 Vincent Cantin Hi. I am trying to collect all values which are associated to a keyword  :tags  in a hierarchy of maps. Is there an easy way to do that using Specter?"><a href="#t1595853735099600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-27</span> <span class="t" onclick="H(this)">12:42:15</span>       Vincent Cantin </span><span>Hi. I am trying to collect all values which are associated to a keyword </span><code>:tags</code><span> in a hierarchy of maps. Is there an easy way to do that using Specter?</span></div><div id="t1595855579101000" t="2020-07-27 13:12:59 Vincent Cantin I tried this, but it does not walk into maps which have  :tags :
 (s/select [(s/walker #(and (map? %) (contains? % :tags))) :tags s/ALL]
          {:a {:tags [1 {:tags [2]}]}
           :b {:tags [3]}})
; =&gt; [1 {:tags [2]} 3]"><a href="#t1595855579101000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-27</span> <span class="t" onclick="H(this)">13:12:59</span>       Vincent Cantin </span><span>I tried this, but it does not walk into maps which have </span><code>:tags</code><span>:
</span><pre>(s/select [(s/walker #(and (map? %) (contains? % :tags))) :tags s/ALL]
          {:a {:tags [1 {:tags [2]}]}
           :b {:tags [3]}})
; =&gt; [1 {:tags [2]} 3]</pre></div><div id="t1595876002102400" t="2020-07-27 18:53:22 nathanmarz @vincent.cantin easy to do with  recursive-path 
 user=&gt; (def data
  #_=&gt;   {:a {:tags [1 {:tags [2]}]}
  #_=&gt;    :b {:tags [3]}})
#&apos;user/data
user=&gt; 

user=&gt; (def MY-WALKER
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (continue-then-stay
  #_=&gt;       (cond-path map? MAP-VALS
  #_=&gt;                  sequential? ALL)
  #_=&gt;       p
  #_=&gt;       )))
#&apos;user/MY-WALKER
user=&gt; 

user=&gt; (select [MY-WALKER map? (must :tags) ALL] data)
[2 1 {:tags [2]} 3] 
"><a href="#t1595876002102400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-27</span> <span class="t" onclick="H(this)">18:53:22</span>           nathanmarz </span><span>@vincent.cantin easy to do with </span><code>recursive-path</code><span>
</span><pre>user=&gt; (def data
  #_=&gt;   {:a {:tags [1 {:tags [2]}]}
  #_=&gt;    :b {:tags [3]}})
#&apos;user/data
user=&gt; 

user=&gt; (def MY-WALKER
  #_=&gt;   (recursive-path [] p
  #_=&gt;     (continue-then-stay
  #_=&gt;       (cond-path map? MAP-VALS
  #_=&gt;                  sequential? ALL)
  #_=&gt;       p
  #_=&gt;       )))
#&apos;user/MY-WALKER
user=&gt; 

user=&gt; (select [MY-WALKER map? (must :tags) ALL] data)
[2 1 {:tags [2]} 3]</pre><span>
</span></div><div id="t1595899775103300" t="2020-07-28 01:29:35 Vincent Cantin @nathanmarz Thx"><a href="#t1595899775103300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-28</span> <span class="t" onclick="H(this)">01:29:35</span>       Vincent Cantin </span><span>@nathanmarz Thx</span></div><div id="t1597674113106600" t="2020-08-17 14:21:53 mbertheau Hi! How would I go about sorting a sequence in specter, letting specter worry about creating the same sequence type?"><a href="#t1597674113106600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-17</span> <span class="t" onclick="H(this)">14:21:53</span>            mbertheau </span><span>Hi! How would I go about sorting a sequence in specter, letting specter worry about creating the same sequence type?</span></div><div id="t1597675137108200" t="2020-08-17 14:38:57 phronmophobic how nested is your data? you might be able to get away with  (into (empty coll) (sort coll))"><a href="#t1597675137108200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-17</span> <span class="t" onclick="H(this)">14:38:57</span>             phronmophobic </span><span>how nested is your data? you might be able to get away with </span><code>(into (empty coll) (sort coll))</code></div><div id="t1597771966110300" t="2020-08-18 17:32:46 Vincent Cantin Assuming that we have a vector of hashmaps containing addresses, how to use specter to group them by  :country , then by  :city  ?
(I could do it without specter, but I am curious)"><a href="#t1597771966110300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-18</span> <span class="t" onclick="H(this)">17:32:46</span>       Vincent Cantin </span><span>Assuming that we have a vector of hashmaps containing addresses, how to use specter to group them by </span><code>:country</code><span>, then by </span><code>:city</code><span> ?
(I could do it without specter, but I am curious)</span></div><div id="t1597773926110400" t="2020-08-18 18:05:26 isak (specter/select [(specter/transformed [] (partial group-by :country))
                   (specter/transformed [specter/MAP-VALS] (partial group-by :city))]
                  addresses)"><a href="#t1597773926110400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-18</span> <span class="t" onclick="H(this)">18:05:26</span>                      isak </span><pre>(specter/select [(specter/transformed [] (partial group-by :country))
                   (specter/transformed [specter/MAP-VALS] (partial group-by :city))]
                  addresses)</pre></div><div id="t1597773945110600" t="2020-08-18 18:05:45 isak (i&apos;m kind of new, so maybe there is a smarter way)"><a href="#t1597773945110600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-18</span> <span class="t" onclick="H(this)">18:05:45</span>                      isak </span><span>(i&apos;m kind of new, so maybe there is a smarter way)</span></div><div id="t1598189671000100" t="2020-08-23 13:34:31 Vincent Cantin I noticed the  s/view  that could be used instead of  s/transformed"><a href="#t1598189671000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-23</span> <span class="t" onclick="H(this)">13:34:31</span>            Vincent Cantin </span><span>I noticed the </span><code>s/view</code><span> that could be used instead of </span><code>s/transformed</code></div><div id="t1598474703004600" t="2020-08-26 20:45:03 fredmonroe im trying to make this:
 (def cells {:4 {:2 {:text &quot;fred&quot;, :datatype nil}}, :5 {:4 {:text &quot;bob&quot;, :datatype nil}}, :8 {:1 {:text &quot;fred&quot;, :datatype nil}}) 

become:
 [{:row 5 :col 5 :text &quot;bob&quot; :datattype nil}] 

so far i have this nav:
 (defn bob? [x] (= (:text x) &quot;bob&quot;)) 

 (s/select [s/MAP-VALS s/MAP-VALS bob?]  cells) 

which gives:
 [{:text &quot;bob&quot;, :datatype nil} 

i can&apos;t seem to figure out collect-*, putval and friends well enough to grab the keys along the path, appreciate any guidance anybody might have thank you"><a href="#t1598474703004600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-26</span> <span class="t" onclick="H(this)">20:45:03</span>           fredmonroe </span><span>im trying to make this:
</span><code>(def cells {:4 {:2 {:text &quot;fred&quot;, :datatype nil}}, :5 {:4 {:text &quot;bob&quot;, :datatype nil}}, :8 {:1 {:text &quot;fred&quot;, :datatype nil}})</code><span>

become:
</span><code>[{:row 5 :col 5 :text &quot;bob&quot; :datattype nil}]</code><span>

so far i have this nav:
</span><code>(defn bob? [x] (= (:text x) &quot;bob&quot;))</code><span>

</span><code>(s/select [s/MAP-VALS s/MAP-VALS bob?]  cells)</code><span>

which gives:
</span><code>[{:text &quot;bob&quot;, :datatype nil}</code><span>

i can&apos;t seem to figure out collect-*, putval and friends well enough to grab the keys along the path, appreciate any guidance anybody might have thank you</span></div><div id="t1598478954005100" t="2020-08-26 21:55:54 arwakode Does this help?

 (sp/select [ALL (sp/collect-one [FIRST]) LAST
              ALL (sp/collect-one [FIRST]) LAST
              bob?] cells) 
"><a href="#t1598478954005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-26</span> <span class="t" onclick="H(this)">21:55:54</span>             arwakode </span><span>Does this help?

</span><pre>(sp/select [ALL (sp/collect-one [FIRST]) LAST
              ALL (sp/collect-one [FIRST]) LAST
              bob?] cells)</pre><span>
</span></div><div id="t1598479003006100" t="2020-08-26 21:56:43 arwakode I use  ALL (sp/collect-one [FIRST]) LAST  pattern to collect keys and continue on traversing."><a href="#t1598479003006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-26</span> <span class="t" onclick="H(this)">21:56:43</span>             arwakode </span><span>I use </span><code>ALL (sp/collect-one [FIRST]) LAST</code><span> pattern to collect keys and continue on traversing.</span></div><div id="t1598479073007200" t="2020-08-26 21:57:53 arwakode You get  [[:5 :4 {:text &quot;bob&quot;, :datatype nil}]]  which then i then guess you have to  (map)  to something to integrate into the the map at the third slot."><a href="#t1598479073007200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-26</span> <span class="t" onclick="H(this)">21:57:53</span>             arwakode </span><span>You get </span><code>[[:5 :4 {:text &quot;bob&quot;, :datatype nil}]]</code><span> which then i then guess you have to </span><code>(map)</code><span> to something to integrate into the the map at the third slot.</span></div><div id="t1598480240009100" t="2020-08-26 22:17:20 fredmonroe YES thank you, you gave me a great insight there - by using MAP-VALS i was effectively stripping off access to the keys i needed to collect - i like the way you indented everything too - helps make clear how it works. thank you!"><a href="#t1598480240009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-26</span> <span class="t" onclick="H(this)">22:17:20</span>           fredmonroe </span><span>YES thank you, you gave me a great insight there - by using MAP-VALS i was effectively stripping off access to the keys i needed to collect - i like the way you indented everything too - helps make clear how it works. thank you!</span></div><div id="t1599506171005400" t="2020-09-07 19:16:11 Daniel Craig @nathanmarz Hi would you be interesting in presenting Specter for our meetup group?  We’re the #mid-cities-meetup group based in Southlake Texas.  We meet online every first Monday of the month and @johnjelinek and I are interested in learning about what Specter can do"><a href="#t1599506171005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-07</span> <span class="t" onclick="H(this)">19:16:11</span>         Daniel Craig </span><span>@nathanmarz Hi would you be interesting in presenting Specter for our meetup group?  We’re the #mid-cities-meetup group based in Southlake Texas.  We meet online every first Monday of the month and @johnjelinek and I are interested in learning about what Specter can do</span></div><div id="t1599517901006100" t="2020-09-07 22:31:41 nathanmarz @danielmartincraig don&apos;t have time unfortunately"><a href="#t1599517901006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-07</span> <span class="t" onclick="H(this)">22:31:41</span>           nathanmarz </span><span>@danielmartincraig don&apos;t have time unfortunately</span></div><div id="t1599525335006500" t="2020-09-08 00:35:35 Daniel Craig Ok thanks anyways"><a href="#t1599525335006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-08</span> <span class="t" onclick="H(this)">00:35:35</span>         Daniel Craig </span><span>Ok thanks anyways</span></div><div id="t1599598993007400" t="2020-09-08 21:03:13 Jeff Evans Is there any appetite for incorporating  spec  into Specter?  Setting aside the tongue-twistedness of that combination…"><a href="#t1599598993007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-08</span> <span class="t" onclick="H(this)">21:03:13</span>           Jeff Evans </span><span>Is there any appetite for incorporating </span><code>spec</code><span> into Specter?  Setting aside the tongue-twistedness of that combination…</span></div><div id="t1599623430007600" t="2020-09-09 03:50:30 nathanmarz how so?"><a href="#t1599623430007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-09</span> <span class="t" onclick="H(this)">03:50:30</span>           nathanmarz </span><span>how so?</span></div><div id="t1599655307009900" t="2020-09-09 12:41:47 Petrus Theron How can I transform a nested data structure lazily and recursively with Specter, e.g. to recursively build out a tree with children given some roots?

I read through the docs on Using Specter Recursively, but it&apos;s not obvious to me how to &quot;inject&quot; new values into the data structure while navigating."><a href="#t1599655307009900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-09</span> <span class="t" onclick="H(this)">12:41:47</span>        Petrus Theron </span><span>How can I transform a nested data structure lazily and recursively with Specter, e.g. to recursively build out a tree with children given some roots?

I read through the docs on Using Specter Recursively, but it&apos;s not obvious to me how to &quot;inject&quot; new values into the data structure while navigating.</span></div><div id="t1599668670010400" t="2020-09-09 16:24:30 Jeff Evans Re: spec, was just thinking in terms of validating arguments to the macros.  Although, that’s already happening in some places via:  https://github.com/redplanetlabs/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L379"><a href="#t1599668670010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-09</span> <span class="t" onclick="H(this)">16:24:30</span>           Jeff Evans </span><span>Re: spec, was just thinking in terms of validating arguments to the macros.  Although, that’s already happening in some places via: </span><a href="https://github.com/redplanetlabs/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L379" target="_blank">https://github.com/redplanetlabs/specter/blob/master/src/clj/com/rpl/specter/impl.cljc#L379</a></div><div id="t1599750408011800" t="2020-09-10 15:06:48 unbalanced Hiya @nathanmarz!  I was inspired by your recent hackernews article to try and jump into Specter again.  I&apos;ve tried a few times in the path and... well, I&apos;m kind of thick, I think.  Is there a most recent &quot;best way&quot; to learn Specter from the ground up?"><a href="#t1599750408011800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">15:06:48</span>           unbalanced </span><span>Hiya @nathanmarz!  I was inspired by your recent hackernews article to try and jump into Specter again.  I&apos;ve tried a few times in the path and... well, I&apos;m kind of thick, I think.  Is there a most recent &quot;best way&quot; to learn Specter from the ground up?</span></div><div id="t1599751698011900" t="2020-09-10 15:28:18 Jeff Evans did you see all the stuff listed here?   https://github.com/redplanetlabs/specter"><a href="#t1599751698011900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">15:28:18</span>                Jeff Evans </span><span>did you see all the stuff listed here?  </span><a href="https://github.com/redplanetlabs/specter" target="_blank">https://github.com/redplanetlabs/specter</a></div><div id="t1599767043014000" t="2020-09-10 19:44:03 Jeff Evans Just noticed something interesting today.  Having a dangling  selected?  (i.e. no more paths after it) works in  clj  but fails in  cljs  .
 (require &apos;[com.rpl.specter :as sp])
(sp/select [sp/ALL even? sp/selected?] [1 3 5])
# in clj
=&gt; []
# in cljs
Error: No protocol method ImplicitNav.implicit-nav defined for type cljs.core/MetaFn: [object Object]"><a href="#t1599767043014000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">19:44:03</span>           Jeff Evans </span><span>Just noticed something interesting today.  Having a dangling </span><code>selected?</code><span> (i.e. no more paths after it) works in </span><code>clj</code><span> but fails in </span><code>cljs</code><span> .
</span><pre>(require &apos;[com.rpl.specter :as sp])
(sp/select [sp/ALL even? sp/selected?] [1 3 5])
# in clj
=&gt; []
# in cljs
Error: No protocol method ImplicitNav.implicit-nav defined for type cljs.core/MetaFn: [object Object]</pre></div><div id="t1599775045015500" t="2020-09-10 21:57:25 nathanmarz @goomba the Learn Specter section on the github page is probably best place to start"><a href="#t1599775045015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">21:57:25</span>           nathanmarz </span><span>@goomba the Learn Specter section on the github page is probably best place to start</span></div><div id="t1599775181016600" t="2020-09-10 21:59:41 nathanmarz @jeffrey.wayne.evans I guess  MetaFn  in cljs is not a  function"><a href="#t1599775181016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">21:59:41</span>           nathanmarz </span><span>@jeffrey.wayne.evans I guess </span><code>MetaFn</code><span> in cljs is not a </span><code>function</code></div><div id="t1599775186016800" t="2020-09-10 21:59:46 nathanmarz so the implicit nav doesn&apos;t kick in"><a href="#t1599775186016800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-10</span> <span class="t" onclick="H(this)">21:59:46</span>           nathanmarz </span><span>so the implicit nav doesn&apos;t kick in</span></div><div id="t1600190715018100" t="2020-09-15 17:25:15 jsabeaudry Which predicate to use to only transform if the key is present? for example  (transform [:a ?] inc {:b 2})"><a href="#t1600190715018100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-15</span> <span class="t" onclick="H(this)">17:25:15</span>           jsabeaudry </span><span>Which predicate to use to only transform if the key is present? for example </span><code>(transform [:a ?] inc {:b 2})</code></div><div id="t1600191552018500" t="2020-09-15 17:39:12 phronmophobic must  ?  https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#must"><a href="#t1600191552018500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-15</span> <span class="t" onclick="H(this)">17:39:12</span>        phronmophobic </span><code>must</code><span> ? </span><a href="https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#must" target="_blank">https://github.com/redplanetlabs/specter/wiki/List-of-Navigators#must</a></div><div id="t1600193493019000" t="2020-09-15 18:11:33 jsabeaudry Yup, exactly! Thank you!"><a href="#t1600193493019000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-15</span> <span class="t" onclick="H(this)">18:11:33</span>                jsabeaudry </span><span>Yup, exactly! Thank you!</span></div><div id="t1600191668018900" t="2020-09-15 17:41:08 phronmophobic &gt; (spec/transform [spec/ALL (spec/must :a)] inc [{:b 2}
                                                 {:a 2}])
[{:b 2} {:a 3}]"><a href="#t1600191668018900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-15</span> <span class="t" onclick="H(this)">17:41:08</span>        phronmophobic </span><pre>&gt; (spec/transform [spec/ALL (spec/must :a)] inc [{:b 2}
                                                 {:a 2}])
[{:b 2} {:a 3}]</pre></div><div id="t1600992553000900" t="2020-09-25 00:09:13 Jeff Evans Has anyone managed to use Specter in self-hosted CLJS?"><a href="#t1600992553000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-25</span> <span class="t" onclick="H(this)">00:09:13</span>           Jeff Evans </span><span>Has anyone managed to use Specter in self-hosted CLJS?</span></div><div id="t1601037322001100" t="2020-09-25 12:35:22 nathanmarz there&apos;s some tickets open for that"><a href="#t1601037322001100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-25</span> <span class="t" onclick="H(this)">12:35:22</span>           nathanmarz </span><span>there&apos;s some tickets open for that</span></div><div id="t1601037349001500" t="2020-09-25 12:35:49 nathanmarz from what I recall there&apos;s some changes needed to the inline caching implementation to support bootstrap"><a href="#t1601037349001500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-25</span> <span class="t" onclick="H(this)">12:35:49</span>           nathanmarz </span><span>from what I recall there&apos;s some changes needed to the inline caching implementation to support bootstrap</span></div><div id="t1601037354001700" t="2020-09-25 12:35:54 nathanmarz https://github.com/redplanetlabs/specter/issues/72"><a href="#t1601037354001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-25</span> <span class="t" onclick="H(this)">12:35:54</span>           nathanmarz </span><a href="https://github.com/redplanetlabs/specter/issues/72" target="_blank">https://github.com/redplanetlabs/specter/issues/72</a></div><div id="t1601345025003200" t="2020-09-29 02:03:45 jeaye Is there a more efficient way to do this (while keeping the recursive abilities)?

 (def ALL-RECURSIVE (recursive-path [] p
                                   (cond-path
                                     map? (stay-then-continue MAP-VALS p)
                                     coll? (stay-then-continue ALL p))))
(transform [ALL-RECURSIVE MAP-VALS (pred #(and (map? %) (contains? % :foo)))]
           :foo
           {:a {:foo :b}}) ; =&gt; {:a :b}"><a href="#t1601345025003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">02:03:45</span>                jeaye </span><span>Is there a more efficient way to do this (while keeping the recursive abilities)?

</span><pre>(def ALL-RECURSIVE (recursive-path [] p
                                   (cond-path
                                     map? (stay-then-continue MAP-VALS p)
                                     coll? (stay-then-continue ALL p))))
(transform [ALL-RECURSIVE MAP-VALS (pred #(and (map? %) (contains? % :foo)))]
           :foo
           {:a {:foo :b}}) ; =&gt; {:a :b}</pre></div><div id="t1601345762003600" t="2020-09-29 02:16:02 Lucy Wang using walker?
 (transform [(walker (clojure.core/every-pred map? :foo))]
           :foo
           {:a {:foo :b}})"><a href="#t1601345762003600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">02:16:02</span>            Lucy Wang </span><span>using walker?
</span><pre>(transform [(walker (clojure.core/every-pred map? :foo))]
           :foo
           {:a {:foo :b}})</pre></div><div id="t1601346661003800" t="2020-09-29 02:31:01 jeaye I&apos;ll benchmark it."><a href="#t1601346661003800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">02:31:01</span>                jeaye </span><span>I&apos;ll benchmark it.</span></div><div id="t1601346868005400" t="2020-09-29 02:34:28 jeaye A bit slower, it seems. Mine was  [:attrs nil] 13µs. I&apos;m doing some other things in the benchmark, which is why the numbers are higher than just benchmarking that one transform, but those things are constant across both tests."><a href="#t1601346868005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">02:34:28</span>                jeaye </span><span>A bit slower, it seems. Mine was </span><del>11µs. With the walker, it&apos;s </del><span>13µs. I&apos;m doing some other things in the benchmark, which is why the numbers are higher than just benchmarking that one transform, but those things are constant across both tests.</span></div><div id="t1601347056005900" t="2020-09-29 02:37:36 jeaye Seems like your usage of  every-pred  is marginally faster than my  and , though.  🙂"><a href="#t1601347056005900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">02:37:36</span>                jeaye </span><span>Seems like your usage of </span><code>every-pred</code><span> is marginally faster than my </span><code>and</code><span>, though. </span><b>🙂</b></div><div id="t1601362253006400" t="2020-09-29 06:50:53 Lucy Wang Or use meander
 (require &apos;[meander.epsilon :as m]
         &apos;[meander.strategy.epsilon :as m*])

(def replace-foo
  (m*/rewrite
   {:foo (m/some ?xs)} ?xs))

(def replace-all-foos
  (m*/until =
    (m*/bottom-up
     (m*/attempt replace-foo))))

(replace-all-foos {:a {:foo :b}}) 
"><a href="#t1601362253006400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span> <span class="t" onclick="H(this)">06:50:53</span>            Lucy Wang </span><span>Or use meander
</span><pre>(require &apos;[meander.epsilon :as m]
         &apos;[meander.strategy.epsilon :as m*])

(def replace-foo
  (m*/rewrite
   {:foo (m/some ?xs)} ?xs))

(def replace-all-foos
  (m*/until =
    (m*/bottom-up
     (m*/attempt replace-foo))))

(replace-all-foos {:a {:foo :b}})</pre><span>
</span></div><div id="t1601875329009100" t="2020-10-05 05:22:09 Patrick Farwick Is there a good way to get the value of a key that is the most deeply nested in a map? The map could have any level of nesting.
So if I have  {:a {:a 1 :b {:c 2 :d {:a {:e 4}}}}} 
I want  {:e 4}  but am having trouble getting there. Thanks"><a href="#t1601875329009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-05</span> <span class="t" onclick="H(this)">05:22:09</span>      Patrick Farwick </span><span>Is there a good way to get the value of a key that is the most deeply nested in a map? The map could have any level of nesting.
So if I have </span><code>{:a {:a 1 :b {:c 2 :d {:a {:e 4}}}}}</code><span>
I want </span><code>{:e 4}</code><span> but am having trouble getting there. Thanks</span></div><div id="t1601914683009500" t="2020-10-05 16:18:03 Jeff Evans you can use recursion.
 (def GET-E [(s/recursive-path [] p
                    (s/if-path map?
                               (s/if-path (s/must :e) (s/continue-then-stay [s/MAP-VALS p]) [s/MAP-VALS p]) s/STOP)) (s/submap [:e])])

(s/select GET-E {:a {:a 1 :b {:c 2 :d {:a {:e 4 :l 5}}}}})
=&gt; [{:e 4}]"><a href="#t1601914683009500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-05</span> <span class="t" onclick="H(this)">16:18:03</span>           Jeff Evans </span><span>you can use recursion.
</span><pre>(def GET-E [(s/recursive-path [] p
                    (s/if-path map?
                               (s/if-path (s/must :e) (s/continue-then-stay [s/MAP-VALS p]) [s/MAP-VALS p]) s/STOP)) (s/submap [:e])])

(s/select GET-E {:a {:a 1 :b {:c 2 :d {:a {:e 4 :l 5}}}}})
=&gt; [{:e 4}]</pre></div><div id="t1602062645012100" t="2020-10-07 09:24:05 Petrus Theron How can I transform a map based on the key? E.g.
 (let [key-&gt;xf {:a inc, :b :dec}]
  (S/transform [?] key-&gt;xf {:a 10, :b 20, :c 30}))
=&gt; {:a 11, :b 19, :c 30} 
I suspect I can use  view  or  transformed  for this, but not sure how. I found a  FIND-KEYS  navigator on SO that navigates to the values of matching keys, but it isn’t quite what I’m looking for:
 (def FIND-KEYS
  &quot;Like clojure.walk/postwalk but for Specter.
  Use as [FIND-KEYS (S/must :key)].&quot;
  (S/recursive-path [] p
    (S/cond-path map?
      (S/continue-then-stay [S/MAP-VALS p])
      vector? [S/ALL p]
      S/STAY))) 
E.g.
 (S/select [FIND-KEYS (S/must :c)] {:a 123 :b {:c 456}})
=&gt; 456 
I guess I can do it with a plain-old reduce-kv, but hoping I could do it with Specter:
 (defn transform-map
  [mappings m]
  (reduce-kv
    (fn [acc k vf]
      (if (contains? acc k)
        (update acc k vf)
        acc)) m mappings))

(transform-map {:a inc, :b dec} {:a 10, :b 20})
=&gt; {:a 11, :b 19}"><a href="#t1602062645012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span> <span class="t" onclick="H(this)">09:24:05</span>        Petrus Theron </span><span>How can I transform a map based on the key? E.g.
</span><pre>(let [key-&gt;xf {:a inc, :b :dec}]
  (S/transform [?] key-&gt;xf {:a 10, :b 20, :c 30}))
=&gt; {:a 11, :b 19, :c 30}</pre><span>
I suspect I can use </span><code>view</code><span> or </span><code>transformed</code><span> for this, but not sure how. I found a </span><code>FIND-KEYS</code><span> navigator on SO that navigates to the values of matching keys, but it isn’t quite what I’m looking for:
</span><pre>(def FIND-KEYS
  &quot;Like clojure.walk/postwalk but for Specter.
  Use as [FIND-KEYS (S/must :key)].&quot;
  (S/recursive-path [] p
    (S/cond-path map?
      (S/continue-then-stay [S/MAP-VALS p])
      vector? [S/ALL p]
      S/STAY)))</pre><span>
E.g.
</span><pre>(S/select [FIND-KEYS (S/must :c)] {:a 123 :b {:c 456}})
=&gt; 456</pre><span>
I guess I can do it with a plain-old reduce-kv, but hoping I could do it with Specter:
</span><pre>(defn transform-map
  [mappings m]
  (reduce-kv
    (fn [acc k vf]
      (if (contains? acc k)
        (update acc k vf)
        acc)) m mappings))

(transform-map {:a inc, :b dec} {:a 10, :b 20})
=&gt; {:a 11, :b 19}</pre></div><div id="t1602082300012800" t="2020-10-07 14:51:40 Jeff Evans (def key-&gt;xf {:a inc :b dec :c identity})
(s/transform [s/ALL] (fn [entry] (let [[k v] entry] [k ((k key-&gt;xf) v)])) {:a 10, :b 20, :c 30})
=&gt; {:a 11, :b 19, :c 30}"><a href="#t1602082300012800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span> <span class="t" onclick="H(this)">14:51:40</span>           Jeff Evans </span><pre>(def key-&gt;xf {:a inc :b dec :c identity})
(s/transform [s/ALL] (fn [entry] (let [[k v] entry] [k ((k key-&gt;xf) v)])) {:a 10, :b 20, :c 30})
=&gt; {:a 11, :b 19, :c 30}</pre></div><div id="t1602082337013100" t="2020-10-07 14:52:17 Jeff Evans (`ALL` gives you key/value pairs in a vec)"><a href="#t1602082337013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span> <span class="t" onclick="H(this)">14:52:17</span>           Jeff Evans </span><span>(`ALL` gives you key/value pairs in a vec)</span></div><div id="t1602147585014400" t="2020-10-08 08:59:45 Lucy Wang ☝️  IMHO the above code already lost the expressiveness people want to achieve by using specter"><a href="#t1602147585014400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-08</span> <span class="t" onclick="H(this)">08:59:45</span>            Lucy Wang </span><b>☝️</b><span> IMHO the above code already lost the expressiveness people want to achieve by using specter</span></div><div id="t1602626414014800" t="2020-10-13 22:00:14 cjmurphy I also want to find particular keys and change their values, but in a recursive data structure. Here  data  just gets returned. Wanting to see the value  [{:d 1} {:e 1}]  be replaced by  {:COUNTED 2} ."><a href="#t1602626414014800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-13</span> <span class="t" onclick="H(this)">22:00:14</span>             cjmurphy </span><span>I also want to find particular keys and change their values, but in a recursive data structure. Here </span><code>data</code><span> just gets returned. Wanting to see the value </span><code>[{:d 1} {:e 1}]</code><span> be replaced by </span><code>{:COUNTED 2}</code><span>.</span></div><div id="t1602646719015300" t="2020-10-14 03:38:39 Lucy Wang (def map-walker
    (recursive-path [] p
      (cond-path
       map?
       [ALL p]

       [vector? FIRST #(= % :c)]
       LAST

       [vector?]
       [ALL p]
       )))

(let [data {:a 1
            :b [{:z 1 :c [1 2 3]}
                {:c [{:d 1} {:e 1}]}]}]
  (transform [map-walker] #(array-map :COUNTED (count %)) data)) 
"><a href="#t1602646719015300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">03:38:39</span>            Lucy Wang </span><pre>(def map-walker
    (recursive-path [] p
      (cond-path
       map?
       [ALL p]

       [vector? FIRST #(= % :c)]
       LAST

       [vector?]
       [ALL p]
       )))

(let [data {:a 1
            :b [{:z 1 :c [1 2 3]}
                {:c [{:d 1} {:e 1}]}]}]
  (transform [map-walker] #(array-map :COUNTED (count %)) data))</pre><span>
</span></div><div id="t1602649063015600" t="2020-10-14 04:17:43 Lucy Wang The only downside is it would also transform a vector whose first element is :c as well"><a href="#t1602649063015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">04:17:43</span>                 Lucy Wang </span><span>The only downside is it would also transform a vector whose first element is :c as well</span></div><div id="t1602657176015800" t="2020-10-14 06:32:56 cjmurphy In reality there would never be such an element, because every vector has entities (maps) in it. Seems tricky compared to a solution not using specter. I honestly though the solution would be more straightforward than that. I just used  being-counted-attributes  rather than  #(= % :c)  , so  #{:c}  . Thank you @UP90Q48J3."><a href="#t1602657176015800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">06:32:56</span>                  cjmurphy </span><span>In reality there would never be such an element, because every vector has entities (maps) in it. Seems tricky compared to a solution not using specter. I honestly though the solution would be more straightforward than that. I just used </span><code>being-counted-attributes</code><span> rather than </span><code>#(= % :c)</code><span> , so </span><code>#{:c}</code><span> . Thank you @UP90Q48J3.</span></div><div id="t1602677707016100" t="2020-10-14 12:15:07 Lucy Wang Yeah, for such cases you can simply write a recursive function instead of using specter, or combine specter with a recursive helper function."><a href="#t1602677707016100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">12:15:07</span>                 Lucy Wang </span><span>Yeah, for such cases you can simply write a recursive function instead of using specter, or combine specter with a recursive helper function.</span></div><div id="t1602646724015500" t="2020-10-14 03:38:44 Lucy Wang @cjmurphy"><a href="#t1602646724015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">03:38:44</span>            Lucy Wang </span><span>@cjmurphy</span></div><div id="t1602704091016600" t="2020-10-14 19:34:51 Jeff Evans well, I think I finally managed to get Specter working in cljs bootstrap:  https://github.com/redplanetlabs/specter/issues/72"><a href="#t1602704091016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span> <span class="t" onclick="H(this)">19:34:51</span>           Jeff Evans </span><span>well, I think I finally managed to get Specter working in cljs bootstrap: </span><a href="https://github.com/redplanetlabs/specter/issues/72" target="_blank">https://github.com/redplanetlabs/specter/issues/72</a></div><div id="t1603288873017600" t="2020-10-21 14:01:13 abdullahibra Hi everyone,"><a href="#t1603288873017600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:01:13</span>         abdullahibra </span><span>Hi everyone,</span></div><div id="t1603288917018600" t="2020-10-21 14:01:57 abdullahibra if i have a tree of nested lists with all keyword data type, what is the efficient pattern to select all sublists that start with specific keyword ?"><a href="#t1603288917018600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:01:57</span>         abdullahibra </span><span>if i have a tree of nested lists with all keyword data type, what is the efficient pattern to select all sublists that start with specific keyword ?</span></div><div id="t1603288944018900" t="2020-10-21 14:02:24 idiomancy can you give an example input output?"><a href="#t1603288944018900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:02:24</span>            idiomancy </span><span>can you give an example input output?</span></div><div id="t1603289180019700" t="2020-10-21 14:06:20 abdullahibra (:a
  (:x
   (:x :xoo) 
   (:y (:ya :yay))
   (:z (:t :till)
        (:y (:v :hello) (:h :world)))))"><a href="#t1603289180019700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:06:20</span>         abdullahibra </span><pre>(:a
  (:x
   (:x :xoo) 
   (:y (:ya :yay))
   (:z (:t :till)
        (:y (:v :hello) (:h :world)))))</pre></div><div id="t1603289196020100" t="2020-10-21 14:06:36 abdullahibra need to select all lists that starts with :y"><a href="#t1603289196020100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:06:36</span>         abdullahibra </span><span>need to select all lists that starts with :y</span></div><div id="t1603289248020800" t="2020-10-21 14:07:28 abdullahibra output
 (:y (:ya :yay))
(:y (:v :hello) (:h :world))"><a href="#t1603289248020800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">14:07:28</span>         abdullahibra </span><span>output
</span><pre>(:y (:ya :yay))
(:y (:v :hello) (:h :world))</pre></div><div id="t1603296151021100" t="2020-10-21 16:02:31 schmee @abdullahibra
 (def LISTS
    (recursive-path [] p
      (if-path list?
        (stay-then-continue ALL p)
        STOP)))

  user=&gt; (select [LISTS (selected? FIRST (pred= :y))] your-list)
  [(:y (:ya :yay)) (:y (:v :hello) (:h :world))])"><a href="#t1603296151021100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">16:02:31</span>               schmee </span><span>@abdullahibra
</span><pre>(def LISTS
    (recursive-path [] p
      (if-path list?
        (stay-then-continue ALL p)
        STOP)))

  user=&gt; (select [LISTS (selected? FIRST (pred= :y))] your-list)
  [(:y (:ya :yay)) (:y (:v :hello) (:h :world))])</pre></div><div id="t1603297053021500" t="2020-10-21 16:17:33 Lucy Wang or use walker
 (select [(walker (fn [x]
                   (and (list? x)
                        (= (first x) :y))))]
        &apos;(:a
         (:x
          (:x :xoo)
          (:y (:ya :yay))
          (:z (:t :till)
           (:y (:v :hello) (:h :world))))))
;; =&gt; [(:y (:ya :yay)) (:y (:v :hello) (:h :world))] 
"><a href="#t1603297053021500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">16:17:33</span>            Lucy Wang </span><span>or use walker
</span><pre>(select [(walker (fn [x]
                   (and (list? x)
                        (= (first x) :y))))]
        &apos;(:a
         (:x
          (:x :xoo)
          (:y (:ya :yay))
          (:z (:t :till)
           (:y (:v :hello) (:h :world))))))
;; =&gt; [(:y (:ya :yay)) (:y (:v :hello) (:h :world))]</pre><span>
</span></div><div id="t1603297137022100" t="2020-10-21 16:18:57 abdullahibra i have used tree-seq and filter based on some conditions and it&apos;s working, but it&apos;s worth to try those approaches too"><a href="#t1603297137022100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-21</span> <span class="t" onclick="H(this)">16:18:57</span>         abdullahibra </span><span>i have used tree-seq and filter based on some conditions and it&apos;s working, but it&apos;s worth to try those approaches too</span></div><div id="t1603821850025100" t="2020-10-27 18:04:10 mathpunk I think I&apos;ve got a use case that specter might help, but I&apos;m brand new to it. I&apos;ve got data that looks like this:
 {:name &quot;Conditional Sections E2E Workflow&quot;
 :application {:name &quot;Conditional Sections&quot;
               :id &quot;someId&quot;}}  
There&apos;s nested maps, and any time there&apos;s an  :id  key in the map, I need to look up the value of  :id  in another map, and assoc that value in place."><a href="#t1603821850025100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:04:10</span>             mathpunk </span><span>I think I&apos;ve got a use case that specter might help, but I&apos;m brand new to it. I&apos;ve got data that looks like this:
</span><pre>{:name &quot;Conditional Sections E2E Workflow&quot;
 :application {:name &quot;Conditional Sections&quot;
               :id &quot;someId&quot;}} </pre><span>
There&apos;s nested maps, and any time there&apos;s an </span><code>:id</code><span> key in the map, I need to look up the value of </span><code>:id</code><span> in another map, and assoc that value in place.</span></div><div id="t1603822171025800" t="2020-10-27 18:09:31 mathpunk I&apos;m reading about navigators now... if y&apos;all have a pointer to the one/ones I need, I&apos;d appreciate it"><a href="#t1603822171025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:09:31</span>             mathpunk </span><span>I&apos;m reading about navigators now... if y&apos;all have a pointer to the one/ones I need, I&apos;d appreciate it</span></div><div id="t1603822295027700" t="2020-10-27 18:11:35 idiomancy usually the best way to get help around here is to give a sample input and output.  Someone will invariably take up the challenge as a little brain teaser to occupy themselves while they wait for their next meeting to start and post the answer"><a href="#t1603822295027700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:11:35</span>            idiomancy </span><span>usually the best way to get help around here is to give a sample input and output.  Someone will invariably take up the challenge as a little brain teaser to occupy themselves while they wait for their next meeting to start and post the answer</span></div><div id="t1603822346028000" t="2020-10-27 18:12:26 mathpunk I can do that, I&apos;ll find a good one"><a href="#t1603822346028000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:12:26</span>             mathpunk </span><span>I can do that, I&apos;ll find a good one</span></div><div id="t1603823259029300" t="2020-10-27 18:27:39 mathpunk Okay, suppose there is a map called  state  floating about, like shown. Here&apos;s the given data, and the desired data:
 {:state {&quot;FzPIxXKk&quot; {:name &quot;Conditional Sections E2E Workflow&quot;
                          :id &quot;var&quot;}}
      :given {:name &quot;Conditional Sections E2E Workflow&quot;
              :application {:name &quot;Conditional Sections&quot;
                            :id &quot;FzPIxXKk&quot;}}
      :desired {:name &quot;Conditional Sections E2E Workflow&quot;
                :application {:name &quot;Conditional Sections&quot;
                              :id &quot;var&quot;}}} 
"><a href="#t1603823259029300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:27:39</span>             mathpunk </span><span>Okay, suppose there is a map called </span><code>state</code><span> floating about, like shown. Here&apos;s the given data, and the desired data:
</span><pre>{:state {&quot;FzPIxXKk&quot; {:name &quot;Conditional Sections E2E Workflow&quot;
                          :id &quot;var&quot;}}
      :given {:name &quot;Conditional Sections E2E Workflow&quot;
              :application {:name &quot;Conditional Sections&quot;
                            :id &quot;FzPIxXKk&quot;}}
      :desired {:name &quot;Conditional Sections E2E Workflow&quot;
                :application {:name &quot;Conditional Sections&quot;
                              :id &quot;var&quot;}}}</pre><span>
</span></div><div id="t1603823363030000" t="2020-10-27 18:29:23 mathpunk For reference, here is the brittle &quot;let&apos;s hope we got all the cases&quot; code I have for doing this:
 (defn return-with-id [exchange state]
  (assoc-in exchange [:required :id] (get (get state (get-in exchange [:required :id])) :id)))

(defn return-with-application [exchange state]
  (assoc-in exchange [:required :application :id] (get (get state (get-in exchange [:required :application :id])) :id)))

(defn return-with-parent [exchange state]
  (assoc-in exchange [:required :parent :id] (get (get state (get-in exchange [:required :parent :id])) :id)))

(defn return-with-target [exchange state]
  (assoc-in exchange [:required :target :id] (get (get state (get-in exchange [:required :target :id])) :id)))

(defn return [state exchange]
  (if (seq? exchange)
    (throw (Exception. &quot;Multiple requirements needed, invalidating my assumption about our data&quot;))
    (cond-&gt; exchange
      (get state (get-in exchange [:required :id])) (return-with-id state)
      (get state (get-in exchange [:required :application :id])) (return-with-application state)
      (get state (get-in exchange [:required :target :id])) (return-with-target state)
      (get state (get-in exchange [:required :parent :id])) (return-with-parent state))))"><a href="#t1603823363030000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:29:23</span>             mathpunk </span><span>For reference, here is the brittle &quot;let&apos;s hope we got all the cases&quot; code I have for doing this:
</span><pre>(defn return-with-id [exchange state]
  (assoc-in exchange [:required :id] (get (get state (get-in exchange [:required :id])) :id)))

(defn return-with-application [exchange state]
  (assoc-in exchange [:required :application :id] (get (get state (get-in exchange [:required :application :id])) :id)))

(defn return-with-parent [exchange state]
  (assoc-in exchange [:required :parent :id] (get (get state (get-in exchange [:required :parent :id])) :id)))

(defn return-with-target [exchange state]
  (assoc-in exchange [:required :target :id] (get (get state (get-in exchange [:required :target :id])) :id)))

(defn return [state exchange]
  (if (seq? exchange)
    (throw (Exception. &quot;Multiple requirements needed, invalidating my assumption about our data&quot;))
    (cond-&gt; exchange
      (get state (get-in exchange [:required :id])) (return-with-id state)
      (get state (get-in exchange [:required :application :id])) (return-with-application state)
      (get state (get-in exchange [:required :target :id])) (return-with-target state)
      (get state (get-in exchange [:required :parent :id])) (return-with-parent state))))</pre></div><div id="t1603823408031000" t="2020-10-27 18:30:08 mathpunk I could replace those copypasta functions with one function that takes a path -- but it would still be, explicit paths."><a href="#t1603823408031000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:30:08</span>             mathpunk </span><span>I could replace those copypasta functions with one function that takes a path -- but it would still be, explicit paths.</span></div><div id="t1603824150031500" t="2020-10-27 18:42:30 mathpunk Then I&apos;d have,
 (defn update-with-path [state exchange path]
  (cond-&gt; exchange
    (get state (get-in exchange (concat [:required] path)))
    (assoc-in (concat [:required] path) (get (get state (get-in exchange (concat [:required] path))) :id))))

(defn return [state exchange]
  (if (seq? exchange)
    (throw (Exception. &quot;Multiple requirements needed, invalidating my assumption about our data&quot;))
    (let [update-fn (partial update-with-path state)]
      (-&gt; exchange
          (update-fn [:id])
          (update-fn [:application :id])
          (update-fn [:target :id])
          (update-fn [:parent :id])))))"><a href="#t1603824150031500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:42:30</span>             mathpunk </span><span>Then I&apos;d have,
</span><pre>(defn update-with-path [state exchange path]
  (cond-&gt; exchange
    (get state (get-in exchange (concat [:required] path)))
    (assoc-in (concat [:required] path) (get (get state (get-in exchange (concat [:required] path))) :id))))

(defn return [state exchange]
  (if (seq? exchange)
    (throw (Exception. &quot;Multiple requirements needed, invalidating my assumption about our data&quot;))
    (let [update-fn (partial update-with-path state)]
      (-&gt; exchange
          (update-fn [:id])
          (update-fn [:application :id])
          (update-fn [:target :id])
          (update-fn [:parent :id])))))</pre></div><div id="t1603824215032000" t="2020-10-27 18:43:35 mathpunk And hey, that does work:
 {:state {&quot;FzPIxXKk&quot; {:name &quot;Conditional Sections E2E Workflow&quot;
                     :id &quot;var&quot;}}
 :given {:method &quot;POST&quot;
         :url &quot;&quot;
         :required {:name &quot;Conditional Sections E2E Workflow&quot;
                    :application {:name &quot;Conditional Sections&quot;
                                  :id &quot;FzPIxXKk&quot;}}} ;; &lt;-- needs updating
 :result {:method &quot;POST&quot;
          :url &quot;&quot;
          :required {:name &quot;Conditional Sections E2E Workflow&quot;
                     :application {:name &quot;Conditional Sections&quot;
                                   :id &quot;var&quot;}}}} ;; &lt;-- updated"><a href="#t1603824215032000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:43:35</span>             mathpunk </span><span>And hey, that does work:
</span><pre>{:state {&quot;FzPIxXKk&quot; {:name &quot;Conditional Sections E2E Workflow&quot;
                     :id &quot;var&quot;}}
 :given {:method &quot;POST&quot;
         :url &quot;&quot;
         :required {:name &quot;Conditional Sections E2E Workflow&quot;
                    :application {:name &quot;Conditional Sections&quot;
                                  :id &quot;FzPIxXKk&quot;}}} ;; &lt;-- needs updating
 :result {:method &quot;POST&quot;
          :url &quot;&quot;
          :required {:name &quot;Conditional Sections E2E Workflow&quot;
                     :application {:name &quot;Conditional Sections&quot;
                                   :id &quot;var&quot;}}}} ;; &lt;-- updated</pre></div><div id="t1603824237032300" t="2020-10-27 18:43:57 mathpunk but like i said, not generic, seems brittle, gotta know what paths to :id&apos;s exist in order to explicitly supply them"><a href="#t1603824237032300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">18:43:57</span>             mathpunk </span><span>but like i said, not generic, seems brittle, gotta know what paths to :id&apos;s exist in order to explicitly supply them</span></div><div id="t1603826040033000" t="2020-10-27 19:14:00 nathanmarz @mathpunk take a look at  recursive-path ,  MAP-VALS , and  stay-then-continue"><a href="#t1603826040033000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">19:14:00</span>           nathanmarz </span><span>@mathpunk take a look at </span><code>recursive-path</code><span>, </span><code>MAP-VALS</code><span>, and </span><code>stay-then-continue</code></div><div id="t1603826057033500" t="2020-10-27 19:14:17 nathanmarz you can define a navigator that goes to every nested map, and then from there do your lookup of the id"><a href="#t1603826057033500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">19:14:17</span>           nathanmarz </span><span>you can define a navigator that goes to every nested map, and then from there do your lookup of the id</span></div><div id="t1603826107034500" t="2020-10-27 19:15:07 nathanmarz e.g.  (transform [ALL-MAPS (must :id)] (fn [id] (lookup-val-for-id id)) data)"><a href="#t1603826107034500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">19:15:07</span>           nathanmarz </span><span>e.g. </span><code>(transform [ALL-MAPS (must :id)] (fn [id] (lookup-val-for-id id)) data)</code></div><div id="t1603826275034800" t="2020-10-27 19:17:55 mathpunk great, thank you!"><a href="#t1603826275034800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-27</span> <span class="t" onclick="H(this)">19:17:55</span>             mathpunk </span><span>great, thank you!</span></div></body>