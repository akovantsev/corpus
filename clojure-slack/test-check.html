<!DOCTYPE html>
<head><title>test-check</title><meta charset="UTF-8" /><style type="text/css">body {
    font-family: Monaco, Menlo, Consolas, "Courier New", sans-serif;
    font-size: 12px;
    margin: 15px;
}
h2 {text-align: center}
pre,
code {
    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
    color: #333;
}
code {
    /*line-height: 1.2;*/
    white-space: normal;
    color: #c25;
    background-color: #f7f7f9;
    border: 1px solid #e1e1e8;
}
pre {
    margin: .5rem 0 .2rem;
    font-size: .75rem;
    /*line-height: 1.15rem;*/
    background: #fbfaf8;
    padding: .5rem;
    word-break: normal;
    display: block;
    border: 1px solid rgba(0, 0, 0, .15);
    white-space: pre-wrap;
    word-wrap: break-word;
    border-radius: 4px;
}
span {
    white-space: pre-wrap;
}
span.u {
    margin-top: 3px;
    /*margin-left: 10px;*/
    margin-right: 10px;
    background-color: lavender;
}
span.t:hover {
    text-decoration: underline;
    color: blue;
    cursor: pointer
}
div[t]:target > span.u {
    background-color: aquamarine
}

#filters-container {
    position: fixed;
    left: 50px;
    z-index: 1;
}
#filters-container > input {
    /*column:*/
    display: block;
    outline-color: aquamarine;
}

div[t] > a:first-child {
    text-decoration: none;
    color: blue;
    position: absolute;
    left: 3px;
}

div[t] > a:first-child:hover {
    text-decoration: underline;
    color: aquamarine;
}


</style></head><body><style id="css-text-filter"></style><style id="css-date-filter"></style><style id="css-filter-override"></style><p id="filters-container"><input id="text-filter" onkeyup="debtextfilter(this.value)" placeholder="filter text" type="string" /><button hidden="hidden" id="date-filter" onclick="cleardatefilter()"></button></p><h2>#test-check</h2><pre><i>generated UTC: 2020-11-20 18:43:19</i><i>
latest data: <a href="https://clojurians-log.clojureverse.org/test-check/2020-10-14">https://clojurians-log.clojureverse.org/test-check/2020-10-14</a></i>
pro tips:
* Double click on text to filter by it. (doubleclick + cmd-f for extra points).
* Click on date to keep day visible regardless of filter.
* Click on time to keep hour visible regardless of filter.</pre><script>const textFilterInput = document.getElementById("text-filter");
const dateFilterInput = document.getElementById("date-filter");
const filterTextStyle = document.getElementById("css-text-filter");
const filterDateStyle = document.getElementById("css-date-filter");
const filterStyleOverride = document.getElementById("css-filter-override");

function textFilter(text) {
    var style = '';
    if (text.trim() !== '') {
        text.split(' ').forEach(function (t) {
            if (t !== '') {
                style = style + "div[t]:not([t*='" + t + "' i]) {display: none; opacity: 0.6}";
            }
        });
    }
    filterTextStyle.innerHTML = style;
}


function filterSelection (e) {
    let sel = document.getSelection();
    let txt = sel.toString();
    textFilterInput.value = (txt || "");
    textFilter(txt);
}
function debounce1(callback, delay) {
    let timeout;
    return function(arg) {
        clearTimeout(timeout);
        timeout = setTimeout(callback, delay, arg);
    }
}

function keyUp (e) {
    if (e.code === "KeyF" && e.ctrlKey) {
        let txt = document.getSelection().toString();
        if (txt.length > 0) {
            textFilterInput.value = (txt || "");
            textFilter(txt);
        }
    }
}


function showDateTimes (el, datestr) {
    dateFilterInput.innerText = "clear: " + datestr;
    dateFilterInput.hidden = false;
    let ids = [];
    const clicked = el.parentElement.parentElement;  // el = div#id/span.u/span.t
    ids.push(clicked.id);
    // var idbefore, idafter;
    let cursor = clicked;
    function nextCursor (cursor) {
        const id = (cursor && cursor.id);
        const t = (cursor && cursor.getAttribute("t"))
        if (id) {
            ids.push(id); //includes 1st next-id not matching date.
        } else {
            cursor = null;
        }
        if (t && t.startsWith(datestr)) {
        } else {
            cursor = null;
        }
        return cursor;
    }
    while (cursor) {
        cursor = nextCursor(cursor.previousElementSibling);
    }

    cursor = clicked;

    while (cursor) {
        cursor = nextCursor(cursor.nextElementSibling);
    }


    var style1 = '';
    var style2 = '';
    var content;
    if (datestr.includes(" ")) { //hour
        content = "*";
    } else {
        content = "**";
    }
    ids.forEach(function (id) {
        if (id) {
            style1 = style1 + ", #" + id;
            style2 = style2 + ", #" + id + " span.t:nth-child(2):after";
        }
    })
    if (style1) {
        style1 = style1.substring(1) + " {display: block !important}";
    }
    if (style2) {
        style2 = style2.substring(1) + " {content: \"" + content + "\"; position: absolute}"
    }
    filterDateStyle.innerHTML = style1 + "\n" + style2;
}

function filterDay (el) {
    showDateTimes(el, el.textContent);
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function filterHours (el) {
    showDateTimes(el,el.previousElementSibling.textContent + " " + el.textContent.substring(0, 2));
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function forceShowSelected (el) {
    var id = el.parentElement.id
    if (id) {
        filterStyleOverride.innerHTML = ""
            + "#" + id
            + " {display: block !important;}"
            + "#" + id + " span.t:nth-child(2):after"
            + " {content: \"*\"; position: absolute}"

    } else {
        filterStyleOverride.innerHTML = "";
    }
}


function cleardatefilter () {
    dateFilterInput.hidden = true;
    dateFilterInput.innerText = "";
    filterDateStyle.innerHTML = "";
}

const D = filterDay;
const H = filterHours;
const S = forceShowSelected;
const debtextfilter = debounce1(textFilter, 200);

function doubleClick (e) {
    if (e.target.tagName !== "INPUT") {
        filterSelection();
        e.target.scrollIntoView({behavior: "auto", block: "center", inline: "start"});
    }
}

document.ondblclick = doubleClick;
document.onkeyup = keyUp;
textFilterInput.focus();
</script><div><div id="t1454010239000003" t="2016-01-28 19:43:59 paulspencerwilliams Hi all."><a href="#t1454010239000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-28</span>Â <span class="t" onclick="H(this)">19:43:59</span>Â paulspencerwilliamsÂ </span><span>Hi all.</span></div><div id="t1454050299000004" t="2016-01-29 06:51:39 lucasbradstreet Howdy"><a href="#t1454050299000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">06:51:39</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Howdy</span></div><div id="t1454055121000005" t="2016-01-29 08:12:01 paulspencerwilliams Hi @lucasbradstreet."><a href="#t1454055121000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:12:01</span>Â paulspencerwilliamsÂ </span><span>Hi @lucasbradstreet.</span></div><div id="t1454056270000006" t="2016-01-29 08:31:10 paulspencerwilliams So I was hoping to get some advice about the properties I could test for the convert function found at  https://github.com/paulspencerwilliams/gormanic/blob/master/src/gormanic/core.clj"><a href="#t1454056270000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:31:10</span>Â paulspencerwilliamsÂ </span><span>So I was hoping to get some advice about the properties I could test for the convert function found at </span><a href="https://github.com/paulspencerwilliams/gormanic/blob/master/src/gormanic/core.clj" target="_blank">https://github.com/paulspencerwilliams/gormanic/blob/master/src/gormanic/core.clj</a></div><div id="t1454056713000008" t="2016-01-29 08:38:33 lucasbradstreet testing the string generated by convert will be a bit annoying"><a href="#t1454056713000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:38:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>testing the string generated by convert will be a bit annoying</span></div><div id="t1454056718000009" t="2016-01-29 08:38:38 lucasbradstreet but you could test the functions that it uses"><a href="#t1454056718000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:38:38</span>Â Â Â Â Â lucasbradstreetÂ </span><span>but you could test the functions that it uses</span></div><div id="t1454056737000010" t="2016-01-29 08:38:57 lucasbradstreet some easy ones, do any of them return a negative month, day, year"><a href="#t1454056737000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:38:57</span>Â Â Â Â Â lucasbradstreetÂ </span><span>some easy ones, do any of them return a negative month, day, year</span></div><div id="t1454056757000011" t="2016-01-29 08:39:17 lucasbradstreet or a month larger than 12 (or 11 if 0 indexed), day greater than 31, tec"><a href="#t1454056757000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:39:17</span>Â Â Â Â Â lucasbradstreetÂ </span><span>or a month larger than 12 (or 11 if 0 indexed), day greater than 31, tec</span></div><div id="t1454056758000012" t="2016-01-29 08:39:18 lucasbradstreet etc"><a href="#t1454056758000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:39:18</span>Â Â Â Â Â lucasbradstreetÂ </span><span>etc</span></div><div id="t1454056881000013" t="2016-01-29 08:41:21 paulspencerwilliams okay."><a href="#t1454056881000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:41:21</span>Â paulspencerwilliamsÂ </span><span>okay.</span></div><div id="t1454056959000014" t="2016-01-29 08:42:39 paulspencerwilliams I understand testing the boundaries arenâ€™t crossed like you mentioned. If I returning a map rather than string, with day, month and year keys, it would be easier to â€˜parseâ€™ and thus test. Would quickcheck style testing help then?"><a href="#t1454056959000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:42:39</span>Â paulspencerwilliamsÂ </span><span>I understand testing the boundaries arenâ€™t crossed like you mentioned. If I returning a map rather than string, with day, month and year keys, it would be easier to â€˜parseâ€™ and thus test. Would quickcheck style testing help then?</span></div><div id="t1454057067000015" t="2016-01-29 08:44:27 paulspencerwilliams Would I use it to test the function actually returns the correct resultant date? I was thinking that I would have to model the gormanic calendar in the test, and for a random set of input dates, ensure convert would return the appropriate gormanic date. But this would be in effect duplicating SUT code in the test?"><a href="#t1454057067000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:44:27</span>Â paulspencerwilliamsÂ </span><span>Would I use it to test the function actually returns the correct resultant date? I was thinking that I would have to model the gormanic calendar in the test, and for a random set of input dates, ensure convert would return the appropriate gormanic date. But this would be in effect duplicating SUT code in the test?</span></div><div id="t1454057139000016" t="2016-01-29 08:45:39 paulspencerwilliams Apologies, if Iâ€™ve asked a common question, Iâ€™ve watched a few videos etc but many properties seem abstract, or away from the concrete problem if that makes sense?"><a href="#t1454057139000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:45:39</span>Â paulspencerwilliamsÂ </span><span>Apologies, if Iâ€™ve asked a common question, Iâ€™ve watched a few videos etc but many properties seem abstract, or away from the concrete problem if that makes sense?</span></div><div id="t1454057297000017" t="2016-01-29 08:48:17 lucasbradstreet Yeah, a map definitely seems easier"><a href="#t1454057297000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:48:17</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, a map definitely seems easier</span></div><div id="t1454057361000018" t="2016-01-29 08:49:21 lucasbradstreet I donâ€™t know enough about the gormanic calender to provide some good properties there  ğŸ˜•"><a href="#t1454057361000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:49:21</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I donâ€™t know enough about the gormanic calender to provide some good properties there </span><b>ğŸ˜•</b></div><div id="t1454057456000019" t="2016-01-29 08:50:56 lucasbradstreet The wikipedia page isnâ€™t all that much help, heh"><a href="#t1454057456000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:50:56</span>Â Â Â Â Â lucasbradstreetÂ </span><span>The wikipedia page isnâ€™t all that much help, heh</span></div><div id="t1454057718000020" t="2016-01-29 08:55:18 lucasbradstreet One idea is if you could provide a comparator function for both date types, and make sure that if one random date is greater than another random date in the gregorian calender, then itâ€™s also greater in the calculated gormanic calender date."><a href="#t1454057718000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:55:18</span>Â Â Â Â Â lucasbradstreetÂ </span><span>One idea is if you could provide a comparator function for both date types, and make sure that if one random date is greater than another random date in the gregorian calender, then itâ€™s also greater in the calculated gormanic calender date.</span></div><div id="t1454057893000021" t="2016-01-29 08:58:13 paulspencerwilliams hehe, oh sorry, the gormanic calendar is made up for a kata. okay, I need to think about your idea for the comparator function. If I developed one, would you not simply say that for all inputs, the output compares exactly to the input?"><a href="#t1454057893000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:58:13</span>Â paulspencerwilliamsÂ </span><span>hehe, oh sorry, the gormanic calendar is made up for a kata. okay, I need to think about your idea for the comparator function. If I developed one, would you not simply say that for all inputs, the output compares exactly to the input?</span></div><div id="t1454057917000022" t="2016-01-29 08:58:37 lucasbradstreet Exactly"><a href="#t1454057917000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">08:58:37</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Exactly</span></div><div id="t1454058007000023" t="2016-01-29 09:00:07 paulspencerwilliams okay. Cheers, let me think about that and Iâ€™ll have a play."><a href="#t1454058007000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-29</span>Â <span class="t" onclick="H(this)">09:00:07</span>Â paulspencerwilliamsÂ </span><span>okay. Cheers, let me think about that and Iâ€™ll have a play.</span></div><div id="t1455005722000027" t="2016-02-09 08:15:22 lucasbradstreet @paulspencerwilliams: what solution did you end up with, and were you satisfied with the result?"><a href="#t1455005722000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-09</span>Â <span class="t" onclick="H(this)">08:15:22</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@paulspencerwilliams: what solution did you end up with, and were you satisfied with the result?</span></div><div id="t1455006049000028" t="2016-02-09 08:20:49 paulspencerwilliams Hi @lucasbradstreet, in the end, I used a combination of roundtripping tests for majority of coverage backed by example based tests for confidence. I will reduce these examples to a couple when I get back to tidying the code. I promised a blog post, and one is in draft although it maybe the weekend before I get chance to revisit it but I really enjoyed the exercise.  Satified? I&apos;m not sure, I liked the example based backups atm, but I think that will dissappear as I start to explore more. I can imagine using test.check more as I move my workflow from TDD, to repl driven. 
  https://github.com/paulspencerwilliams/gormanic/blob/master/test/gormanic/core_test.clj"><a href="#t1455006049000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-09</span>Â <span class="t" onclick="H(this)">08:20:49</span>Â paulspencerwilliamsÂ </span><span>Hi @lucasbradstreet, in the end, I used a combination of roundtripping tests for majority of coverage backed by example based tests for confidence. I will reduce these examples to a couple when I get back to tidying the code. I promised a blog post, and one is in draft although it maybe the weekend before I get chance to revisit it but I really enjoyed the exercise.  Satified? I&apos;m not sure, I liked the example based backups atm, but I think that will dissappear as I start to explore more. I can imagine using test.check more as I move my workflow from TDD, to repl driven. 
 </span><a href="https://github.com/paulspencerwilliams/gormanic/blob/master/test/gormanic/core_test.clj" target="_blank">https://github.com/paulspencerwilliams/gormanic/blob/master/test/gormanic/core_test.clj</a></div><div id="t1455006129000030" t="2016-02-09 08:22:09 lucasbradstreet  Cool. Was curious "><a href="#t1455006129000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-09</span>Â <span class="t" onclick="H(this)">08:22:09</span>Â Â Â Â Â lucasbradstreetÂ </span><span> Cool. Was curious </span></div><div id="t1455006144000031" t="2016-02-09 08:22:24 lucasbradstreet I usually pepper in a few example based tests as a sanity check"><a href="#t1455006144000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-09</span>Â <span class="t" onclick="H(this)">08:22:24</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I usually pepper in a few example based tests as a sanity check</span></div><div id="t1462887460000003" t="2016-05-10 13:37:40 lucasbradstreet Good article on different types of properties  https://fsharpforfunandprofit.com/posts/property-based-testing-2/"><a href="#t1462887460000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-10</span>Â <span class="t" onclick="H(this)">13:37:40</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Good article on different types of properties </span><a href="https://fsharpforfunandprofit.com/posts/property-based-testing-2/" target="_blank">https://fsharpforfunandprofit.com/posts/property-based-testing-2/</a></div><div id="t1464657935000007" t="2016-05-31 01:25:35 lgastako Is there an idiomatic way to test that a function returns nil when given any value of any type other than the expected type? Or in general to generate something like â€œany value of any type exception this oneâ€?"><a href="#t1464657935000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span>Â <span class="t" onclick="H(this)">01:25:35</span>Â Â Â Â Â Â Â Â Â Â Â Â lgastakoÂ </span><span>Is there an idiomatic way to test that a function returns nil when given any value of any type other than the expected type? Or in general to generate something like â€œany value of any type exception this oneâ€?</span></div><div id="t1464680656000008" t="2016-05-31 07:44:16 lucasbradstreet lgastako: you can feed it gen/any, but itâ€™ll be limited in the types that it can emit and youâ€™d still need to test whether it sometimes returns a value when given the correct type. It doesnâ€™t feel like the sort of thing Iâ€™d property test though."><a href="#t1464680656000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-05-31</span>Â <span class="t" onclick="H(this)">07:44:16</span>Â Â Â Â Â lucasbradstreetÂ </span><span>lgastako: you can feed it gen/any, but itâ€™ll be limited in the types that it can emit and youâ€™d still need to test whether it sometimes returns a value when given the correct type. It doesnâ€™t feel like the sort of thing Iâ€™d property test though.</span></div><div id="t1465393875000004" t="2016-06-08 13:51:15 wilkerlucio hello"><a href="#t1465393875000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">13:51:15</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>hello</span></div><div id="t1465393898000005" t="2016-06-08 13:51:38 wilkerlucio is it possible to run async code into a  (props/for-all) ?"><a href="#t1465393898000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">13:51:38</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>is it possible to run async code into a </span><code>(props/for-all)</code><span>?</span></div><div id="t1465393914000006" t="2016-06-08 13:51:54 wilkerlucio I would like to test some cljs code that requires to be async, any ideas on how to do that?"><a href="#t1465393914000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">13:51:54</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>I would like to test some cljs code that requires to be async, any ideas on how to do that?</span></div><div id="t1465394494000007" t="2016-06-08 14:01:34 lucasbradstreet @wilkerlucio: Iâ€™ve used property testing with core.async before. The only real way I could figure out to do it to make sure that thereâ€™s some kind of terminator on the channel (this could be that the channel was closed), and that youâ€™ve hit it. You could also add a big enough sleep to make sure that everything should have finished, but thatâ€™s super hacky and will limit how many examples you can run in a given time"><a href="#t1465394494000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">14:01:34</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@wilkerlucio: Iâ€™ve used property testing with core.async before. The only real way I could figure out to do it to make sure that thereâ€™s some kind of terminator on the channel (this could be that the channel was closed), and that youâ€™ve hit it. You could also add a big enough sleep to make sure that everything should have finished, but thatâ€™s super hacky and will limit how many examples you can run in a given time</span></div><div id="t1465394674000008" t="2016-06-08 14:04:34 lucasbradstreet @wilkerlucio: you may also find  https://github.com/czan/stateful-check  helpful"><a href="#t1465394674000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">14:04:34</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@wilkerlucio: you may also find </span><a href="https://github.com/czan/stateful-check" target="_blank">https://github.com/czan/stateful-check</a><span> helpful</span></div><div id="t1465394777000010" t="2016-06-08 14:06:17 wilkerlucio hi Lucas, sorry, I didn&apos;t understand the idea you told me to use core.async, can you show me a code example of it please?"><a href="#t1465394777000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">14:06:17</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>hi Lucas, sorry, I didn&apos;t understand the idea you told me to use core.async, can you show me a code example of it please?</span></div><div id="t1465394880000011" t="2016-06-08 14:08:00 lucasbradstreet Sorry, I donâ€™t really have an example handy. It really depends on what youâ€™re trying to do"><a href="#t1465394880000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">14:08:00</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Sorry, I donâ€™t really have an example handy. It really depends on what youâ€™re trying to do</span></div><div id="t1465397554000012" t="2016-06-08 14:52:34 wilkerlucio thats fine, on my case I don&apos;t really need the for-all, I&apos;m doing ok just sampling and testing from it, thanks for the assistance"><a href="#t1465397554000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">14:52:34</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>thats fine, on my case I don&apos;t really need the for-all, I&apos;m doing ok just sampling and testing from it, thanks for the assistance</span></div><div id="t1465412003000013" t="2016-06-08 18:53:23 gfredericks lucasbradstreet: &quot;big enough sleep&quot; â‡ are you talking about clj-jvm instead of cljs?"><a href="#t1465412003000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:53:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>lucasbradstreet: &quot;big enough sleep&quot; â‡ are you talking about clj-jvm instead of cljs?</span></div><div id="t1465412022000014" t="2016-06-08 18:53:42 gfredericks wilkerlucio: I was just wondering about async tests myself like two days ago; I think you&apos;d need a separate test runner"><a href="#t1465412022000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:53:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>wilkerlucio: I was just wondering about async tests myself like two days ago; I think you&apos;d need a separate test runner</span></div><div id="t1465412037000015" t="2016-06-08 18:53:57 gfredericks i.e., would have to modify clojure.test.check/quick-check"><a href="#t1465412037000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:53:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., would have to modify clojure.test.check/quick-check</span></div><div id="t1465412044000016" t="2016-06-08 18:54:04 lucasbradstreet Oh yeah, I am"><a href="#t1465412044000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:54:04</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Oh yeah, I am</span></div><div id="t1465412097000017" t="2016-06-08 18:54:57 gfredericks wilkerlucio: you&apos;d have to rewrite quick-check to listen for results on a core.async channel I think"><a href="#t1465412097000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:54:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>wilkerlucio: you&apos;d have to rewrite quick-check to listen for results on a core.async channel I think</span></div><div id="t1465412125000018" t="2016-06-08 18:55:25 gfredericks it&apos;d probably be one of those &quot;quick-check returns a channel that will eventually receive the result&quot; sort of situations"><a href="#t1465412125000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:55:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;d probably be one of those &quot;quick-check returns a channel that will eventually receive the result&quot; sort of situations</span></div><div id="t1465412174000019" t="2016-06-08 18:56:14 lucasbradstreet Yeah, thatâ€™s basically along the lines of what I was trying to get across"><a href="#t1465412174000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:56:14</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, thatâ€™s basically along the lines of what I was trying to get across</span></div><div id="t1465412256000020" t="2016-06-08 18:57:36 gfredericks and then would need to rewrite prop/for-all to supply a channel for the body to write to somehow, or something"><a href="#t1465412256000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">18:57:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and then would need to rewrite prop/for-all to supply a channel for the body to write to somehow, or something</span></div><div id="t1465415402000021" t="2016-06-08 19:50:02 wilkerlucio yeah, seems a lot of fun doing it, just need some time to learn how test.check works, hehe"><a href="#t1465415402000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">19:50:02</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>yeah, seems a lot of fun doing it, just need some time to learn how test.check works, hehe</span></div><div id="t1465415434000022" t="2016-06-08 19:50:34 gfredericks I&apos;m happy to advise"><a href="#t1465415434000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-08</span>Â <span class="t" onclick="H(this)">19:50:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m happy to advise</span></div><div id="t1465494049000025" t="2016-06-09 17:40:49 ag if I have something like this:
 (defn uuid-gen []
  (g/return (-&gt; g/uuid g/generate str)))

{:table &quot;my-table&quot;
    :key   (uuid-gen)
    :rows  (-&gt; (g/hash-map
                 :id                    (uuid-gen)
                 :external-reference-id g/string-alphanumeric)
             (g/vector 1000) g/not-empty g/generate)}
 
how can I ensure that uuids generated for  :key  and  :id  are always unique?"><a href="#t1465494049000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:40:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>if I have something like this:
</span><pre>(defn uuid-gen []
  (g/return (-&gt; g/uuid g/generate str)))

{:table &quot;my-table&quot;
    :key   (uuid-gen)
    :rows  (-&gt; (g/hash-map
                 :id                    (uuid-gen)
                 :external-reference-id g/string-alphanumeric)
             (g/vector 1000) g/not-empty g/generate)}
</pre><span>
how can I ensure that uuids generated for </span><code>:key</code><span> and </span><code>:id</code><span> are always unique?</span></div><div id="t1465494344000027" t="2016-06-09 17:45:44 ag I think I need to use something like  gen/let ?"><a href="#t1465494344000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:45:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I think I need to use something like </span><code>gen/let</code><span>?</span></div><div id="t1465494573000028" t="2016-06-09 17:49:33 lucasbradstreet @ag in cases where I wanted my uuids to be unique, and â€¦ thus uuidâ€™y, Iâ€™ve just cheated by doing something like this:  (gen/no-shrink (gen/fmap (fn [_] (java.util.UUID/randomUUID)) gen/int))"><a href="#t1465494573000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:49:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@ag in cases where I wanted my uuids to be unique, and â€¦ thus uuidâ€™y, Iâ€™ve just cheated by doing something like this: </span><code>(gen/no-shrink (gen/fmap (fn [_] (java.util.UUID/randomUUID)) gen/int))</code></div><div id="t1465494614000029" t="2016-06-09 17:50:14 lucasbradstreet the gen/int bit is especially more cheaty. There may be a nicer way to do it"><a href="#t1465494614000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:50:14</span>Â Â Â Â Â lucasbradstreetÂ </span><span>the gen/int bit is especially more cheaty. There may be a nicer way to do it</span></div><div id="t1465494698000030" t="2016-06-09 17:51:38 ag @lucasbradstreet: trying that, thanks"><a href="#t1465494698000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:51:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>@lucasbradstreet: trying that, thanks</span></div><div id="t1465495017000032" t="2016-06-09 17:56:57 ag excuse my complete noob question (Iâ€™m lazy). what is shrinking?"><a href="#t1465495017000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">17:56:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>excuse my complete noob question (Iâ€™m lazy). what is shrinking?</span></div><div id="t1465495335000033" t="2016-06-09 18:02:15 lucasbradstreet test.check will shrink down your test cases so that it can find the smallest failing case e.g. integers might shrink from 232323976 to 0, a vector might shrink from a many element vector to a small one"><a href="#t1465495335000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:02:15</span>Â Â Â Â Â lucasbradstreetÂ </span><span>test.check will shrink down your test cases so that it can find the smallest failing case e.g. integers might shrink from 232323976 to 0, a vector might shrink from a many element vector to a small one</span></div><div id="t1465495354000034" t="2016-06-09 18:02:34 lucasbradstreet since all weâ€™re doing is generating a UUID, and not using the int generated by gen/int, thereâ€™s no point in shrinking this case"><a href="#t1465495354000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:02:34</span>Â Â Â Â Â lucasbradstreetÂ </span><span>since all weâ€™re doing is generating a UUID, and not using the int generated by gen/int, thereâ€™s no point in shrinking this case</span></div><div id="t1465495453000035" t="2016-06-09 18:04:13 lucasbradstreet Oh, I can see what your problem is in that example"><a href="#t1465495453000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:04:13</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Oh, I can see what your problem is in that example</span></div><div id="t1465495469000036" t="2016-06-09 18:04:29 lucasbradstreet Hmm, maybe not"><a href="#t1465495469000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:04:29</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Hmm, maybe not</span></div><div id="t1465495529000037" t="2016-06-09 18:05:29 lucasbradstreet what youâ€™re doing wrong is actually generating a uuid sample via g/generate"><a href="#t1465495529000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:05:29</span>Â Â Â Â Â lucasbradstreetÂ </span><span>what youâ€™re doing wrong is actually generating a uuid sample via g/generate</span></div><div id="t1465495532000038" t="2016-06-09 18:05:32 lucasbradstreet and then using gen/return"><a href="#t1465495532000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:05:32</span>Â Â Â Â Â lucasbradstreetÂ </span><span>and then using gen/return</span></div><div id="t1465495542000039" t="2016-06-09 18:05:42 lucasbradstreet try (gen/fmap str gen/uuid)"><a href="#t1465495542000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:05:42</span>Â Â Â Â Â lucasbradstreetÂ </span><span>try (gen/fmap str gen/uuid)</span></div><div id="t1465495560000040" t="2016-06-09 18:06:00 lucasbradstreet Thatâ€™ll give you a uuid str generator"><a href="#t1465495560000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:06:00</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Thatâ€™ll give you a uuid str generator</span></div><div id="t1465495611000041" t="2016-06-09 18:06:51 lucasbradstreet Your problem was that you were essentially going (gen/return &quot;5813d2ec-c486-4428-833d-e8373910ae14â€)"><a href="#t1465495611000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:06:51</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Your problem was that you were essentially going (gen/return &quot;5813d2ec-c486-4428-833d-e8373910ae14â€)</span></div><div id="t1465495619000042" t="2016-06-09 18:06:59 lucasbradstreet which will, of course, always return the same value"><a href="#t1465495619000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:06:59</span>Â Â Â Â Â lucasbradstreetÂ </span><span>which will, of course, always return the same value</span></div><div id="t1465495754000043" t="2016-06-09 18:09:14 ag Thank you for enabling my laziness and explaining in great detail  ğŸ™‚"><a href="#t1465495754000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:09:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>Thank you for enabling my laziness and explaining in great detail </span><b>ğŸ™‚</b></div><div id="t1465495824000044" t="2016-06-09 18:10:24 lucasbradstreet happy to help spread the love and the word of the church of property test"><a href="#t1465495824000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:10:24</span>Â Â Â Â Â lucasbradstreetÂ </span><span>happy to help spread the love and the word of the church of property test</span></div><div id="t1465496881000045" t="2016-06-09 18:28:01 gfredericks ag: lucasbradstreet: this might not be in the docstring but gen/uuid generates unique uuids"><a href="#t1465496881000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:28:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ag: lucasbradstreet: this might not be in the docstring but gen/uuid generates unique uuids</span></div><div id="t1465496910000046" t="2016-06-09 18:28:30 gfredericks it&apos;s sort of in the docstring. It could be more clear."><a href="#t1465496910000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:28:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s sort of in the docstring. It could be more clear.</span></div><div id="t1465496972000047" t="2016-06-09 18:29:32 ag @gfredericks: yeah I think Iâ€™m doing something totally wacky hereâ€¦ no one to blame but myself."><a href="#t1465496972000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:29:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>@gfredericks: yeah I think Iâ€™m doing something totally wacky hereâ€¦ no one to blame but myself.</span></div><div id="t1465496977000048" t="2016-06-09 18:29:37 ag still learning"><a href="#t1465496977000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:29:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>still learning</span></div><div id="t1465497590000049" t="2016-06-09 18:39:50 lucasbradstreet Yeah. I realised this which is why I investigated why the original solution didn&apos;t work. Thanks for saying that  "><a href="#t1465497590000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:39:50</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah. I realised this which is why I investigated why the original solution didn&apos;t work. Thanks for saying that  </span></div><div id="t1465497668000050" t="2016-06-09 18:41:08 gfredericks I should also add things to the docstring for generate saying it&apos;s just a dev tool"><a href="#t1465497668000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:41:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I should also add things to the docstring for generate saying it&apos;s just a dev tool</span></div><div id="t1465497671000051" t="2016-06-09 18:41:11 gfredericks ag: â‡‘"><a href="#t1465497671000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:41:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ag: â‡‘</span></div><div id="t1465497696000052" t="2016-06-09 18:41:36 gfredericks I bet people use it for real generators more often than I was expecting"><a href="#t1465497696000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:41:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I bet people use it for real generators more often than I was expecting</span></div><div id="t1465497741000053" t="2016-06-09 18:42:21 lucasbradstreet The improved suggestion will be more reproducible than the one that I suggested. The original one will give different results when you use the same seed"><a href="#t1465497741000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:42:21</span>Â Â Â Â Â lucasbradstreetÂ </span><span>The improved suggestion will be more reproducible than the one that I suggested. The original one will give different results when you use the same seed</span></div><div id="t1465497791000054" t="2016-06-09 18:43:11 lucasbradstreet It&apos;s easy enough to do starting out. Try some stuff out, and then you need a generator again so you go and stick it into return or elements without realising "><a href="#t1465497791000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:43:11</span>Â Â Â Â Â lucasbradstreetÂ </span><span>It&apos;s easy enough to do starting out. Try some stuff out, and then you need a generator again so you go and stick it into return or elements without realising </span></div><div id="t1465497808000055" t="2016-06-09 18:43:28 gfredericks yeah :/"><a href="#t1465497808000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:43:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah :/</span></div><div id="t1465497841000056" t="2016-06-09 18:44:01 lucasbradstreet gen/sample does sound more devvy than gen/generate. I could see how people could get confused there"><a href="#t1465497841000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:44:01</span>Â Â Â Â Â lucasbradstreetÂ </span><span>gen/sample does sound more devvy than gen/generate. I could see how people could get confused there</span></div><div id="t1465497889000057" t="2016-06-09 18:44:49 lucasbradstreet A docstring note would be good anyway"><a href="#t1465497889000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:44:49</span>Â Â Â Â Â lucasbradstreetÂ </span><span>A docstring note would be good anyway</span></div><div id="t1465497909000058" t="2016-06-09 18:45:09 gfredericks yeah, probably on both of them"><a href="#t1465497909000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-09</span>Â <span class="t" onclick="H(this)">18:45:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah, probably on both of them</span></div><div id="t1469224751000005" t="2016-07-22 21:59:11 zane Why is  clojure.test.check.generators/make-gen  private?"><a href="#t1469224751000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span>Â <span class="t" onclick="H(this)">21:59:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>Why is </span><code>clojure.test.check.generators/make-gen</code><span> private?</span></div><div id="t1469224759000006" t="2016-07-22 21:59:19 zane What&apos;s the official way to make a generator from a thunk?"><a href="#t1469224759000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-22</span>Â <span class="t" onclick="H(this)">21:59:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>What&apos;s the official way to make a generator from a thunk?</span></div><div id="t1469310033000009" t="2016-07-23 21:40:33 gfredericks zane: what&apos;s the relationships between the thunk and the resulting generator?"><a href="#t1469310033000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-23</span>Â <span class="t" onclick="H(this)">21:40:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>zane: what&apos;s the relationships between the thunk and the resulting generator?</span></div><div id="t1469318809000010" t="2016-07-24 00:06:49 gfredericks if you just want to write your own (fn [rnd size] ...), the reason make-gen isn&apos;t public is that in most cases doing something so low-level isn&apos;t necessary"><a href="#t1469318809000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span>Â <span class="t" onclick="H(this)">00:06:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you just want to write your own (fn [rnd size] ...), the reason make-gen isn&apos;t public is that in most cases doing something so low-level isn&apos;t necessary</span></div><div id="t1469318836000011" t="2016-07-24 00:07:16 gfredericks so I&apos;m interested in what that function is doing so I can see if there&apos;s some higher-level way to accomplish the same thing"><a href="#t1469318836000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-24</span>Â <span class="t" onclick="H(this)">00:07:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so I&apos;m interested in what that function is doing so I can see if there&apos;s some higher-level way to accomplish the same thing</span></div><div id="t1469462925000012" t="2016-07-25 16:08:45 zane @gfredericks: The thunk is literally producing the generated value. e.g.  (fn [&amp; _] (java.util.UUID/randomUUID)) ."><a href="#t1469462925000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:08:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>@gfredericks: The thunk is literally producing the generated value. e.g. </span><code>(fn [&amp; _] (java.util.UUID/randomUUID))</code><span>.</span></div><div id="t1469462954000013" t="2016-07-25 16:09:14 zane I see now that  make-gen  doesn&apos;t take a thunk (my bad!) but I&apos;m still wondering what the right way to go about this is."><a href="#t1469462954000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:09:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>I see now that </span><code>make-gen</code><span> doesn&apos;t take a thunk (my bad!) but I&apos;m still wondering what the right way to go about this is.</span></div><div id="t1469463015000014" t="2016-07-25 16:10:15 zane The best thing we could come up with was:  (clojure.test.check.generators/fmap (fn [_] (java.util.UUID/randomUUID)) (clojure.test.check.generators/return nil))"><a href="#t1469463015000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:10:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>The best thing we could come up with was: </span><code>(clojure.test.check.generators/fmap (fn [_] (java.util.UUID/randomUUID)) (clojure.test.check.generators/return nil))</code></div><div id="t1469463025000015" t="2016-07-25 16:10:25 zane But that obviously feels pretty gross since the work of  clojure.test.check.generators/return  is discarded."><a href="#t1469463025000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:10:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>But that obviously feels pretty gross since the work of </span><code>clojure.test.check.generators/return</code><span> is discarded.</span></div><div id="t1469463419000017" t="2016-07-25 16:16:59 gfredericks @zane: would gen/uuid work for you or are you doing something else?"><a href="#t1469463419000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:16:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@zane: would gen/uuid work for you or are you doing something else?</span></div><div id="t1469463441000018" t="2016-07-25 16:17:21 zane Ah, I don&apos;t think  gen/uuid  exists in the alpha we&apos;re using."><a href="#t1469463441000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:17:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>Ah, I don&apos;t think </span><code>gen/uuid</code><span> exists in the alpha we&apos;re using.</span></div><div id="t1469463461000019" t="2016-07-25 16:17:41 zane Assuming it doesn&apos;t, what would the right workaround be?"><a href="#t1469463461000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:17:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>Assuming it doesn&apos;t, what would the right workaround be?</span></div><div id="t1469463488000020" t="2016-07-25 16:18:08 zane (Maybe the answer is: Update your alpha.  ğŸ˜„ )"><a href="#t1469463488000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:18:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>(Maybe the answer is: Update your alpha. </span><b>ğŸ˜„</b><span>)</span></div><div id="t1469463507000021" t="2016-07-25 16:18:27 gfredericks You could generate a collection of hex characters and use gen/fmap to convert then to a uuid"><a href="#t1469463507000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:18:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You could generate a collection of hex characters and use gen/fmap to convert then to a uuid</span></div><div id="t1469463551000022" t="2016-07-25 16:19:11 zane Eek."><a href="#t1469463551000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:19:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zaneÂ </span><span>Eek.</span></div><div id="t1469463589000023" t="2016-07-25 16:19:49 lucasbradstreet You can also generate two longs and build a uuid with it"><a href="#t1469463589000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:19:49</span>Â Â Â Â Â lucasbradstreetÂ </span><span>You can also generate two longs and build a uuid with it</span></div><div id="t1469463601000024" t="2016-07-25 16:20:01 gfredericks In general you want to use the randomness of the framework, not calling any random functions yourself, else you lose determinism and shrinking"><a href="#t1469463601000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:20:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In general you want to use the randomness of the framework, not calling any random functions yourself, else you lose determinism and shrinking</span></div><div id="t1469463619000025" t="2016-07-25 16:20:19 lucasbradstreet Ah, my strategy doesnâ€™t ensure uniqueness"><a href="#t1469463619000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:20:19</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Ah, my strategy doesnâ€™t ensure uniqueness</span></div><div id="t1469463633000026" t="2016-07-25 16:20:33 gfredericks Neither does mine"><a href="#t1469463633000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:20:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Neither does mine</span></div><div id="t1469463669000027" t="2016-07-25 16:21:09 lucasbradstreet This is what youâ€™d use if you donâ€™t need uniqueness  https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#UUID(long,%20long)"><a href="#t1469463669000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:21:09</span>Â Â Â Â Â lucasbradstreetÂ </span><span>This is what youâ€™d use if you donâ€™t need uniqueness </span><a href="https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#UUID(long,%20long)" target="_blank">https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#UUID(long,%20long)</a></div><div id="t1469463705000028" t="2016-07-25 16:21:45 lucasbradstreet Iâ€™ve also used with-redefs to override my internal random uuid generation function, and I just generated the seed via test.check"><a href="#t1469463705000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:21:45</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Iâ€™ve also used with-redefs to override my internal random uuid generation function, and I just generated the seed via test.check</span></div><div id="t1469463751000029" t="2016-07-25 16:22:31 lucasbradstreet A bit hacky, but it saved me from having to pass down a UUID seed and changing a lot of code"><a href="#t1469463751000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:22:31</span>Â Â Â Â Â lucasbradstreetÂ </span><span>A bit hacky, but it saved me from having to pass down a UUID seed and changing a lot of code</span></div><div id="t1469463845000030" t="2016-07-25 16:24:05 gfredericks I&apos;d just copy the code from master probably"><a href="#t1469463845000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:24:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d just copy the code from master probably</span></div><div id="t1469464196000031" t="2016-07-25 16:29:56 lucasbradstreet mmm"><a href="#t1469464196000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-25</span>Â <span class="t" onclick="H(this)">16:29:56</span>Â Â Â Â Â lucasbradstreetÂ </span><span>mmm</span></div><div id="t1469567004000032" t="2016-07-26 21:03:24 ag can someone help me with creating a generator, that generates a map that contains keys like this
 {
 :amount-debit  (gen/pos-int)
 :amount-credit (gen/pos-int)
}
 
The problem is it has to be either debit or credit, and never both. And always one of them should have a value, they can&apos;t be null both at the same time"><a href="#t1469567004000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:03:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>can someone help me with creating a generator, that generates a map that contains keys like this
</span><pre>{
 :amount-debit  (gen/pos-int)
 :amount-credit (gen/pos-int)
}
</pre><span>
The problem is it has to be either debit or credit, and never both. And always one of them should have a value, they can&apos;t be null both at the same time</span></div><div id="t1469567892000033" t="2016-07-26 21:18:12 metametadata @ag like this?
 (def gen-card (gen/let
                [card-type (gen/elements [:amount-credit :amount-debit])
                 value gen/s-pos-int]
                (hash-map card-type value)))

(println &quot;Sample:&quot; (gen/sample gen-card 5))
;; Sample: ({:amount-debit 1} {:amount-debit 1} {:amount-credit 1} {:amount-debit 3} {:amount-credit 2})
"><a href="#t1469567892000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:18:12</span>Â Â Â Â Â Â Â Â metametadataÂ </span><span>@ag like this?
</span><pre>(def gen-card (gen/let
                [card-type (gen/elements [:amount-credit :amount-debit])
                 value gen/s-pos-int]
                (hash-map card-type value)))

(println &quot;Sample:&quot; (gen/sample gen-card 5))
;; Sample: ({:amount-debit 1} {:amount-debit 1} {:amount-credit 1} {:amount-debit 3} {:amount-credit 2})
</pre></div><div id="t1469568056000034" t="2016-07-26 21:20:56 ag @metametadata: hmmm interesting, my current code is slightly different, but I see what youâ€™re suggesting. Iâ€™ll try to see if I can use this style without having to refactor a lot"><a href="#t1469568056000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:20:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>@metametadata: hmmm interesting, my current code is slightly different, but I see what youâ€™re suggesting. Iâ€™ll try to see if I can use this style without having to refactor a lot</span></div><div id="t1469568078000035" t="2016-07-26 21:21:18 ag thanks"><a href="#t1469568078000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:21:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>thanks</span></div><div id="t1469569092000036" t="2016-07-26 21:38:12 ag Although it should generate a map with both debit and credit, yet only one of them should have a value"><a href="#t1469569092000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:38:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>Although it should generate a map with both debit and credit, yet only one of them should have a value</span></div><div id="t1469569183000037" t="2016-07-26 21:39:43 ag I started with  gen/let  where Iâ€™m using  is-debit gen/boolean  and then I think I want to try to use something like   :amount-debit          (g/such-that (fn [_] (= is-debit true)) g/pos-int)"><a href="#t1469569183000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:39:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I started with </span><code>gen/let</code><span> where Iâ€™m using </span><code>is-debit gen/boolean</code><span> and then I think I want to try to use something like </span><code> :amount-debit          (g/such-that (fn [_] (= is-debit true)) g/pos-int)</code></div><div id="t1469569208000038" t="2016-07-26 21:40:08 ag but this fails with  Couldnâ€™t satisfy such-that predicate after 10 tries"><a href="#t1469569208000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:40:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>but this fails with </span><code>Couldnâ€™t satisfy such-that predicate after 10 tries</code></div><div id="t1469569586000039" t="2016-07-26 21:46:26 ag ah nevermind using regular  if  fork with pos-int and return 0 seems worked"><a href="#t1469569586000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">21:46:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>ah nevermind using regular </span><code>if</code><span> fork with pos-int and return 0 seems worked</span></div><div id="t1469570609000040" t="2016-07-26 22:03:29 ag eh, actually it didnâ€™t, I need a need to have a  let  block scoped insid  gen/hash-map  block"><a href="#t1469570609000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:03:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>eh, actually it didnâ€™t, I need a need to have a </span><code>let</code><span> block scoped insid </span><code>gen/hash-map</code><span> block</span></div><div id="t1469570693000041" t="2016-07-26 22:04:53 ag or I have to  assoc  two  gen/hash-maps  somehow"><a href="#t1469570693000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:04:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>or I have to </span><code>assoc</code><span> two </span><code>gen/hash-maps</code><span> somehow</span></div><div id="t1469570864000042" t="2016-07-26 22:07:44 ag is there a way to â€œmergeâ€ multiple  hash-map  generators?"><a href="#t1469570864000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:07:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>is there a way to â€œmergeâ€ multiple </span><code>hash-map</code><span> generators?</span></div><div id="t1469572167000043" t="2016-07-26 22:29:27 ag so this: 
 (g/let [debit? g/boolean]
  (g/hash-map
    :created-at            (timestamp-gen)
    :amount-debit          (g/fmap #(when debit? %) g/pos-int)
    :amount-credit         (g/fmap #(when-not debit? %) g/pos-int)))
 
does not work  ğŸ˜"><a href="#t1469572167000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:29:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>so this: 
</span><pre>(g/let [debit? g/boolean]
  (g/hash-map
    :created-at            (timestamp-gen)
    :amount-debit          (g/fmap #(when debit? %) g/pos-int)
    :amount-credit         (g/fmap #(when-not debit? %) g/pos-int)))
</pre><span>
does not work </span><b>ğŸ˜</b></div><div id="t1469573359000045" t="2016-07-26 22:49:19 gfredericks um"><a href="#t1469573359000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:49:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>um</span></div><div id="t1469573370000046" t="2016-07-26 22:49:30 gfredericks I would do"><a href="#t1469573370000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:49:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I would do</span></div><div id="t1469573479000047" t="2016-07-26 22:51:19 gfredericks (g/fmap (fn [[amount key created-at]] (assoc {:amount-debit nil :amount-credit nil :created-at created-at} key amount)) (g/tuple g/pos-int (g/elements [:amount-debit :amount-credit]) (timestamp-gen)))"><a href="#t1469573479000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:51:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(g/fmap (fn [[amount key created-at]] (assoc {:amount-debit nil :amount-credit nil :created-at created-at} key amount)) (g/tuple g/pos-int (g/elements [:amount-debit :amount-credit]) (timestamp-gen)))</code></div><div id="t1469573482000048" t="2016-07-26 22:51:22 gfredericks @ag â†‘"><a href="#t1469573482000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-26</span>Â <span class="t" onclick="H(this)">22:51:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ag â†‘</span></div><div id="t1469585603000049" t="2016-07-27 02:13:23 metametadata @ag @gfredericks your snippets both seem to work and produce similar results"><a href="#t1469585603000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:13:23</span>Â Â Â Â Â Â Â Â metametadataÂ </span><span>@ag @gfredericks your snippets both seem to work and produce similar results</span></div><div id="t1469587631000051" t="2016-07-27 02:47:11 metametadata refactoring @ag&apos;s version I came up with this (extracted  amount  and  gen-when ):

 (defn gen-when
  [x gen]
  (gen/let
    [x (gen/return x)]
    (when x gen)))

(def gen-card
  (gen/let
    [debit? gen/boolean
     amount gen/pos-int]
    (gen/hash-map
      :created-at gen/pos-int
      :amount-debit (gen-when debit? amount)
      :amount-credit (gen-when (not debit?) amount))))
 

Sample:
 ({:created-at 0, :amount-debit 0, :amount-credit nil}
 {:created-at 0, :amount-debit nil, :amount-credit 0}
 {:created-at 0, :amount-debit nil, :amount-credit 2}
 {:created-at 2, :amount-debit 3, :amount-credit nil}
 {:created-at 4, :amount-debit nil, :amount-credit 0})
 

I tend to eliminate  bind  and  fmap  because for me they&apos;re harder to read than  let .
I also like here how using  gen/hash-map  allows to &quot;inline&quot;  :created-at  generator."><a href="#t1469587631000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:47:11</span>Â Â Â Â Â Â Â Â metametadataÂ </span><span>refactoring @ag&apos;s version I came up with this (extracted </span><code>amount</code><span> and </span><code>gen-when</code><span>):

</span><pre>(defn gen-when
  [x gen]
  (gen/let
    [x (gen/return x)]
    (when x gen)))

(def gen-card
  (gen/let
    [debit? gen/boolean
     amount gen/pos-int]
    (gen/hash-map
      :created-at gen/pos-int
      :amount-debit (gen-when debit? amount)
      :amount-credit (gen-when (not debit?) amount))))
</pre><span>

Sample:
</span><pre>({:created-at 0, :amount-debit 0, :amount-credit nil}
 {:created-at 0, :amount-debit nil, :amount-credit 0}
 {:created-at 0, :amount-debit nil, :amount-credit 2}
 {:created-at 2, :amount-debit 3, :amount-credit nil}
 {:created-at 4, :amount-debit nil, :amount-credit 0})
</pre><span>

I tend to eliminate </span><code>bind</code><span> and </span><code>fmap</code><span> because for me they&apos;re harder to read than </span><code>let</code><span>.
I also like here how using </span><code>gen/hash-map</code><span> allows to &quot;inline&quot; </span><code>:created-at</code><span> generator.</span></div><div id="t1469587816000052" t="2016-07-27 02:50:16 gfredericks @metametadata: your  gen-when  ignores its first argument"><a href="#t1469587816000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:50:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@metametadata: your </span><code>gen-when</code><span> ignores its first argument</span></div><div id="t1469587835000053" t="2016-07-27 02:50:35 gfredericks oh I take it back"><a href="#t1469587835000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:50:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh I take it back</span></div><div id="t1469587957000054" t="2016-07-27 02:52:37 gfredericks okay so if you want to use let then I think  (gen/let [debit? gen/boolean, amount gen/pos-int, created-at gen/pos-int] {:created-at created-at :amount-debit (when debit? amount) :amount-credit (when-not debit? amount)})  would be a bit more direct"><a href="#t1469587957000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:52:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay so if you want to use let then I think </span><code>(gen/let [debit? gen/boolean, amount gen/pos-int, created-at gen/pos-int] {:created-at created-at :amount-debit (when debit? amount) :amount-credit (when-not debit? amount)})</code><span> would be a bit more direct</span></div><div id="t1469588118000055" t="2016-07-27 02:55:18 gfredericks you don&apos;t get to inline the created-at generator but on the other hand you don&apos;t have to create wrapper generators for credit/debit"><a href="#t1469588118000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:55:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you don&apos;t get to inline the created-at generator but on the other hand you don&apos;t have to create wrapper generators for credit/debit</span></div><div id="t1469588171000056" t="2016-07-27 02:56:11 metametadata yeah, agree. I guess the approach will depend on the number of additional fields in the card map"><a href="#t1469588171000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:56:11</span>Â Â Â Â Â Â Â Â metametadataÂ </span><span>yeah, agree. I guess the approach will depend on the number of additional fields in the card map</span></div><div id="t1469588245000057" t="2016-07-27 02:57:25 metametadata ie if there are a lot of  fields similar to  created-at  than &quot;inlining&quot; is more preferable"><a href="#t1469588245000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">02:57:25</span>Â Â Â Â Â Â Â Â metametadataÂ </span><span>ie if there are a lot of  fields similar to </span><code>created-at</code><span> than &quot;inlining&quot; is more preferable</span></div><div id="t1469588719000058" t="2016-07-27 03:05:19 ag actually my thing worked, I didn&apos;t know it. My ui was broken, I couldn&apos;t see it :)"><a href="#t1469588719000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">03:05:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>actually my thing worked, I didn&apos;t know it. My ui was broken, I couldn&apos;t see it :)</span></div><div id="t1469589939000059" t="2016-07-27 03:25:39 gfredericks @metametadata: you can also do both -- make two maps and merge them together"><a href="#t1469589939000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">03:25:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@metametadata: you can also do both -- make two maps and merge them together</span></div><div id="t1469656186000061" t="2016-07-27 21:49:46 mattly has anyone written about reducing generation time for creating large tree structures in test.check ?"><a href="#t1469656186000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:49:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>has anyone written about reducing generation time for creating large tree structures in test.check ?</span></div><div id="t1469656234000062" t="2016-07-27 21:50:34 mattly I added a new branch in my structure recently and it tripled the test run time"><a href="#t1469656234000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:50:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I added a new branch in my structure recently and it tripled the test run time</span></div><div id="t1469656294000063" t="2016-07-27 21:51:34 mattly the branch is basically  (gen/list-distinct-by :name (gen/hash-map :name gen/string-alphanumeric))  and gets fmapped over with some other stuff"><a href="#t1469656294000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:51:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>the branch is basically </span><code>(gen/list-distinct-by :name (gen/hash-map :name gen/string-alphanumeric))</code><span> and gets fmapped over with some other stuff</span></div><div id="t1469656305000064" t="2016-07-27 21:51:45 mattly the actual value of the string isn&apos;t important so much as that it&apos;s distinct"><a href="#t1469656305000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:51:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>the actual value of the string isn&apos;t important so much as that it&apos;s distinct</span></div><div id="t1469656343000065" t="2016-07-27 21:52:23 mattly so I&apos;m looking at strategies for getting rid of the distinct clause in the list generator and making the value distinct some other way"><a href="#t1469656343000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:52:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so I&apos;m looking at strategies for getting rid of the distinct clause in the list generator and making the value distinct some other way</span></div><div id="t1469656414000066" t="2016-07-27 21:53:34 mattly I&apos;d also love to know if there&apos;s a way to peek a bit better at which parts of my tree are taking the most time generate"><a href="#t1469656414000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">21:53:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;d also love to know if there&apos;s a way to peek a bit better at which parts of my tree are taking the most time generate</span></div><div id="t1469659998000067" t="2016-07-27 22:53:18 gfredericks mattly: have you checked if the runtime increase roughly corresponds to an increase in the size of the generated data?"><a href="#t1469659998000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:53:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>mattly: have you checked if the runtime increase roughly corresponds to an increase in the size of the generated data?</span></div><div id="t1469660022000068" t="2016-07-27 22:53:42 mattly gfredericks: working on it"><a href="#t1469660022000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:53:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>gfredericks: working on it</span></div><div id="t1469660029000069" t="2016-07-27 22:53:49 mattly but I think it does"><a href="#t1469660029000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:53:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but I think it does</span></div><div id="t1469660033000070" t="2016-07-27 22:53:53 gfredericks if it does correspond, then my initial reaction would be &quot;that sounds reasonable&quot;; if not, then that could potentially be a problem worth looking into"><a href="#t1469660033000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:53:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if it does correspond, then my initial reaction would be &quot;that sounds reasonable&quot;; if not, then that could potentially be a problem worth looking into</span></div><div id="t1469660050000071" t="2016-07-27 22:54:10 gfredericks unless I&apos;m misunderstanding your question"><a href="#t1469660050000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:54:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>unless I&apos;m misunderstanding your question</span></div><div id="t1469660080000072" t="2016-07-27 22:54:40 mattly I don&apos;t think it&apos;s a problem of test.check per-se so much as the data structure I&apos;m creating with it"><a href="#t1469660080000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:54:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I don&apos;t think it&apos;s a problem of test.check per-se so much as the data structure I&apos;m creating with it</span></div><div id="t1469660105000073" t="2016-07-27 22:55:05 gfredericks mattly: how familiar are you with test.check&apos;s general sizing mechanism?"><a href="#t1469660105000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:55:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>mattly: how familiar are you with test.check&apos;s general sizing mechanism?</span></div><div id="t1469660140000074" t="2016-07-27 22:55:40 mattly gfredericks: I&apos;ve dug into the code a bit but haven&apos;t tried writing my own generator beyond composing from primitives"><a href="#t1469660140000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:55:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>gfredericks: I&apos;ve dug into the code a bit but haven&apos;t tried writing my own generator beyond composing from primitives</span></div><div id="t1469660155000075" t="2016-07-27 22:55:55 gfredericks you shouldn&apos;t need to normally"><a href="#t1469660155000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:55:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you shouldn&apos;t need to normally</span></div><div id="t1469660160000076" t="2016-07-27 22:56:00 mattly yeah"><a href="#t1469660160000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:56:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah</span></div><div id="t1469660205000077" t="2016-07-27 22:56:45 gfredericks I suppose I&apos;m just wondering if you understand it well enough to know why  (gen/vector (gen/vector (gen/vector (gen/vector (gen/vector gen/nat)))))  would OOM"><a href="#t1469660205000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:56:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose I&apos;m just wondering if you understand it well enough to know why </span><code>(gen/vector (gen/vector (gen/vector (gen/vector (gen/vector gen/nat)))))</code><span> would OOM</span></div><div id="t1469660214000078" t="2016-07-27 22:56:54 mattly I&apos;m pretty sure the problem stems from the need for distinct values where the value doesn&apos;t actually matter at a low point in the tree, and then having to generate all the child branches"><a href="#t1469660214000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:56:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m pretty sure the problem stems from the need for distinct values where the value doesn&apos;t actually matter at a low point in the tree, and then having to generate all the child branches</span></div><div id="t1469660219000079" t="2016-07-27 22:56:59 mattly ah"><a href="#t1469660219000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:56:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>ah</span></div><div id="t1469660221000080" t="2016-07-27 22:57:01 mattly yeah I do"><a href="#t1469660221000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:57:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah I do</span></div><div id="t1469660230000081" t="2016-07-27 22:57:10 mattly I&apos;ve run into that quite a bit on Circle  ğŸ˜„"><a href="#t1469660230000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:57:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;ve run into that quite a bit on Circle </span><b>ğŸ˜„</b></div><div id="t1469660254000082" t="2016-07-27 22:57:34 mattly most of my lists / vectors anymore I put max-elements on"><a href="#t1469660254000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:57:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>most of my lists / vectors anymore I put max-elements on</span></div><div id="t1469660303000083" t="2016-07-27 22:58:23 gfredericks I think the distinct generator is highly unlikely to be slow without also throwing exceptions"><a href="#t1469660303000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:58:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the distinct generator is highly unlikely to be slow without also throwing exceptions</span></div><div id="t1469660310000084" t="2016-07-27 22:58:30 mattly ok"><a href="#t1469660310000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:58:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>ok</span></div><div id="t1469660336000085" t="2016-07-27 22:58:56 gfredericks i.e., if you think the problem is that it has to throw away a bunch of stuff because of collisions"><a href="#t1469660336000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:58:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., if you think the problem is that it has to throw away a bunch of stuff because of collisions</span></div><div id="t1469660348000086" t="2016-07-27 22:59:08 mattly that was my guess"><a href="#t1469660348000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:59:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>that was my guess</span></div><div id="t1469660358000087" t="2016-07-27 22:59:18 gfredericks it&apos;ll throw an exception if it can&apos;t generate a unique thing after ~10 tries"><a href="#t1469660358000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:59:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;ll throw an exception if it can&apos;t generate a unique thing after ~10 tries</span></div><div id="t1469660368000088" t="2016-07-27 22:59:28 gfredericks so it&apos;s hard to imagine a scenario where it expends much effort on this without hitting 10 occasionally"><a href="#t1469660368000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:59:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so it&apos;s hard to imagine a scenario where it expends much effort on this without hitting 10 occasionally</span></div><div id="t1469660376000089" t="2016-07-27 22:59:36 mattly fair point"><a href="#t1469660376000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">22:59:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>fair point</span></div><div id="t1469663938000090" t="2016-07-27 23:58:58 mattly I got some instrumentation up around the generators and my test runs"><a href="#t1469663938000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">23:58:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I got some instrumentation up around the generators and my test runs</span></div><div id="t1469663957000091" t="2016-07-27 23:59:17 mattly eliminating the need to generate distinct values on one branch of my tree cut the test run time in half"><a href="#t1469663957000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">23:59:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>eliminating the need to generate distinct values on one branch of my tree cut the test run time in half</span></div><div id="t1469663982000092" t="2016-07-27 23:59:42 mattly I&apos;m basically putting those values in now after-the-fact similar to how you might do serial ids"><a href="#t1469663982000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-27</span>Â <span class="t" onclick="H(this)">23:59:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m basically putting those values in now after-the-fact similar to how you might do serial ids</span></div><div id="t1469664005000093" t="2016-07-28 00:00:05 mattly I found a few other places in the actual generation of things where I&apos;m being wasteful"><a href="#t1469664005000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:00:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I found a few other places in the actual generation of things where I&apos;m being wasteful</span></div><div id="t1469664046000094" t="2016-07-28 00:00:46 mattly but cutting that out wasn&apos;t nearly quite as effective as getting rid of distinct requirement"><a href="#t1469664046000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:00:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but cutting that out wasn&apos;t nearly quite as effective as getting rid of distinct requirement</span></div><div id="t1469664181000095" t="2016-07-28 00:03:01 mattly btw, thanks for all the work on test.chuck,  checking  and  subsequence  are invaluable tools in my toolbox these days"><a href="#t1469664181000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:03:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>btw, thanks for all the work on test.chuck, </span><code>checking</code><span> and </span><code>subsequence</code><span> are invaluable tools in my toolbox these days</span></div><div id="t1469664226000096" t="2016-07-28 00:03:46 gfredericks :)"><a href="#t1469664226000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:03:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>:)</span></div><div id="t1469664243000097" t="2016-07-28 00:04:03 gfredericks I don&apos;t quite understand what you mean by &quot;putting those values in now after-the-fact&quot;"><a href="#t1469664243000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:04:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t quite understand what you mean by &quot;putting those values in now after-the-fact&quot;</span></div><div id="t1469664249000098" t="2016-07-28 00:04:09 mattly hm"><a href="#t1469664249000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:04:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>hm</span></div><div id="t1469664292000099" t="2016-07-28 00:04:52 mattly I&apos;ll do an example"><a href="#t1469664292000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:04:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;ll do an example</span></div><div id="t1469664349000100" t="2016-07-28 00:05:49 gfredericks FYI distinct collections are generated by maintaining the elements in a transient set:  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L546"><a href="#t1469664349000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:05:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>FYI distinct collections are generated by maintaining the elements in a transient set: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L546" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L546</a></div><div id="t1469664359000102" t="2016-07-28 00:05:59 mattly oh interesting"><a href="#t1469664359000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:05:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>oh interesting</span></div><div id="t1469664395000103" t="2016-07-28 00:06:35 gfredericks so it&apos;s not inconceivable that the overhead of adding and looking up elements is slowing things down"><a href="#t1469664395000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:06:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so it&apos;s not inconceivable that the overhead of adding and looking up elements is slowing things down</span></div><div id="t1469664416000104" t="2016-07-28 00:06:56 gfredericks if that&apos;s really your issue I have a hard time imagining how to make it faster"><a href="#t1469664416000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:06:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if that&apos;s really your issue I have a hard time imagining how to make it faster</span></div><div id="t1469664436000105" t="2016-07-28 00:07:16 mattly (gen/fmap (fn [things] (map #(assoc %2 :name (str %1 &quot;-&quot; (:name %2))) (range) things)) (gen/list (gen/hash-map :name gen/string-alphanumeric)))"><a href="#t1469664436000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:07:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><code>(gen/fmap (fn [things] (map #(assoc %2 :name (str %1 &quot;-&quot; (:name %2))) (range) things)) (gen/list (gen/hash-map :name gen/string-alphanumeric)))</code></div><div id="t1469664444000106" t="2016-07-28 00:07:24 mattly yeah"><a href="#t1469664444000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:07:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah</span></div><div id="t1469664482000107" t="2016-07-28 00:08:02 mattly I get that, and really for me and my use case it comes down to, am I using the generator for actual values I want to test or just random input?"><a href="#t1469664482000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:08:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I get that, and really for me and my use case it comes down to, am I using the generator for actual values I want to test or just random input?</span></div><div id="t1469664500000108" t="2016-07-28 00:08:20 mattly and in the case of these names, it&apos;s just random input that needs to be distinct"><a href="#t1469664500000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:08:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and in the case of these names, it&apos;s just random input that needs to be distinct</span></div><div id="t1469664543000109" t="2016-07-28 00:09:03 gfredericks I suppose you probably have to compute hash values for the data when you wouldn&apos;t otherwise"><a href="#t1469664543000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:09:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose you probably have to compute hash values for the data when you wouldn&apos;t otherwise</span></div><div id="t1469664545000110" t="2016-07-28 00:09:05 mattly I won&apos;t get much value of shrinking"><a href="#t1469664545000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:09:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I won&apos;t get much value of shrinking</span></div><div id="t1469664641000111" t="2016-07-28 00:10:41 mattly where I get the value of shrinking here is the number and depth of branches and the leaf values"><a href="#t1469664641000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:10:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>where I get the value of shrinking here is the number and depth of branches and the leaf values</span></div><div id="t1469664650000112" t="2016-07-28 00:10:50 mattly but not the id"><a href="#t1469664650000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:10:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but not the id</span></div><div id="t1469664750000113" t="2016-07-28 00:12:30 gfredericks FYI gen/uuid is evenly distributed and doesn&apos;t shrink, so you could use that for uniqueness without needing to check"><a href="#t1469664750000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:12:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>FYI gen/uuid is evenly distributed and doesn&apos;t shrink, so you could use that for uniqueness without needing to check</span></div><div id="t1469664788000114" t="2016-07-28 00:13:08 mattly yeah, that occurred to me as well"><a href="#t1469664788000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:13:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah, that occurred to me as well</span></div><div id="t1469664830000115" t="2016-07-28 00:13:50 mattly but this works better for my use-case"><a href="#t1469664830000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:13:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but this works better for my use-case</span></div><div id="t1469664839000116" t="2016-07-28 00:13:59 mattly it&apos;s... complicated"><a href="#t1469664839000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:13:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>it&apos;s... complicated</span></div><div id="t1469664886000117" t="2016-07-28 00:14:46 mattly I&apos;m working on a system to let people do self-serve analytics on a data warehouse, but with a complicated permissions structure on top of it"><a href="#t1469664886000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:14:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m working on a system to let people do self-serve analytics on a data warehouse, but with a complicated permissions structure on top of it</span></div><div id="t1469664958000118" t="2016-07-28 00:15:58 mattly from my experience doing similar things in the past, i know that scenario-based testing has its own set of gotchas"><a href="#t1469664958000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:15:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>from my experience doing similar things in the past, i know that scenario-based testing has its own set of gotchas</span></div><div id="t1469665019000119" t="2016-07-28 00:16:59 mattly so I&apos;m basically generating the dimension/fact graph and putting that into our data store, which, well, it&apos;s not what I would have chose"><a href="#t1469665019000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:16:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so I&apos;m basically generating the dimension/fact graph and putting that into our data store, which, well, it&apos;s not what I would have chose</span></div><div id="t1469665075000120" t="2016-07-28 00:17:55 mattly property-based testing of it though has helped me catch a ton of bugs in the prototype I&apos;m replacing that I don&apos;t think anyone would have ever thought to look for"><a href="#t1469665075000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">00:17:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>property-based testing of it though has helped me catch a ton of bugs in the prototype I&apos;m replacing that I don&apos;t think anyone would have ever thought to look for</span></div><div id="t1469685884000121" t="2016-07-28 06:04:44 mattly having gotten rid of the distinct name requirements across my entire gen&apos;d tree, and doing some other things around the frequency of size and depth of branches, I cut the run for my test suite down to 1/10th of what it was before"><a href="#t1469685884000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">06:04:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>having gotten rid of the distinct name requirements across my entire gen&apos;d tree, and doing some other things around the frequency of size and depth of branches, I cut the run for my test suite down to 1/10th of what it was before</span></div><div id="t1469685897000122" t="2016-07-28 06:04:57 mattly and it still shrinks awesomely"><a href="#t1469685897000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">06:04:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and it still shrinks awesomely</span></div><div id="t1469685933000123" t="2016-07-28 06:05:33 mattly I also included in the trunk generator some flags to turn off certain branches of the tree if they&apos;re not needed for a test"><a href="#t1469685933000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">06:05:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I also included in the trunk generator some flags to turn off certain branches of the tree if they&apos;re not needed for a test</span></div><div id="t1469716654000124" t="2016-07-28 14:37:34 gfredericks @mattly do you think parallelizing tests and/or generators would help out?"><a href="#t1469716654000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:37:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly do you think parallelizing tests and/or generators would help out?</span></div><div id="t1469717097000125" t="2016-07-28 14:44:57 gfredericks I&apos;ve worked on parallelizing tests before, but it just occurred to me that slow generators could be parallelized even if the tests themselves can&apos;t"><a href="#t1469717097000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:44:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve worked on parallelizing tests before, but it just occurred to me that slow generators could be parallelized even if the tests themselves can&apos;t</span></div><div id="t1469717153000126" t="2016-07-28 14:45:53 gfredericks E.g., during the test run you have one or more background threads doing the generating while the main thread does the actual tests"><a href="#t1469717153000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:45:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>E.g., during the test run you have one or more background threads doing the generating while the main thread does the actual tests</span></div><div id="t1469717300000127" t="2016-07-28 14:48:20 mattly I&apos;m not sure, tbh"><a href="#t1469717300000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:48:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m not sure, tbh</span></div><div id="t1469717369000128" t="2016-07-28 14:49:29 mattly One thing I&apos;m looking into now, after a deeper branch ends up with 100k+ nodes when it starts to fail, is exponential scaling of the size of nodes"><a href="#t1469717369000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:49:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>One thing I&apos;m looking into now, after a deeper branch ends up with 100k+ nodes when it starts to fail, is exponential scaling of the size of nodes</span></div><div id="t1469717451000129" t="2016-07-28 14:50:51 mattly which would actually fit the shape of the data I&apos;m trying to model well"><a href="#t1469717451000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">14:50:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>which would actually fit the shape of the data I&apos;m trying to model well</span></div><div id="t1469722420000130" t="2016-07-28 16:13:40 gfredericks You&apos;re saying you like it being so large? "><a href="#t1469722420000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">16:13:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;re saying you like it being so large? </span></div><div id="t1469726212000131" t="2016-07-28 17:16:52 mattly eh, well, that&apos;s the count of something akin to  (gen/vector (gen/vector (gen/vector gen/int)))  but flattened; and I&apos;ve found a few bugs that have only manifested when the node size gets that large"><a href="#t1469726212000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">17:16:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>eh, well, that&apos;s the count of something akin to </span><code>(gen/vector (gen/vector (gen/vector gen/int)))</code><span> but flattened; and I&apos;ve found a few bugs that have only manifested when the node size gets that large</span></div><div id="t1469726240000132" t="2016-07-28 17:17:20 mattly shrinking, of course, will end up narrowing that down to like the 2 or 3 end nodes that cause the failure"><a href="#t1469726240000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">17:17:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>shrinking, of course, will end up narrowing that down to like the 2 or 3 end nodes that cause the failure</span></div><div id="t1469726263000133" t="2016-07-28 17:17:43 mattly and really it&apos;s more due to the nature of the data I&apos;m working with / replicating, and the complex query sets I have to run on top of them"><a href="#t1469726263000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">17:17:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and really it&apos;s more due to the nature of the data I&apos;m working with / replicating, and the complex query sets I have to run on top of them</span></div><div id="t1469726464000134" t="2016-07-28 17:21:04 mattly as I find specific cases like that I tend to break out specific tests for that data scenario"><a href="#t1469726464000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-28</span>Â <span class="t" onclick="H(this)">17:21:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>as I find specific cases like that I tend to break out specific tests for that data scenario</span></div><div id="t1470142742000136" t="2016-08-02 12:59:02 rickmoynihan is there a good resource to help understand shrinking; how it works, what to consider etc..."><a href="#t1470142742000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">12:59:02</span>Â Â Â Â Â Â Â Â rickmoynihanÂ </span><span>is there a good resource to help understand shrinking; how it works, what to consider etc...</span></div><div id="t1470142775000137" t="2016-08-02 12:59:35 rickmoynihan it seems like quite an involved topic"><a href="#t1470142775000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">12:59:35</span>Â Â Â Â Â Â Â Â rickmoynihanÂ </span><span>it seems like quite an involved topic</span></div><div id="t1470144558000138" t="2016-08-02 13:29:18 lucasbradstreet Iâ€™m interested in this. I have a reasonable intuition about it, but Iâ€™d like something in more detail"><a href="#t1470144558000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">13:29:18</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Iâ€™m interested in this. I have a reasonable intuition about it, but Iâ€™d like something in more detail</span></div><div id="t1470146464000139" t="2016-08-02 14:01:04 gfredericks well I can answer specific questions about it at least"><a href="#t1470146464000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">14:01:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>well I can answer specific questions about it at least</span></div><div id="t1470146508000140" t="2016-08-02 14:01:48 gfredericks for the most part the shrinking strategy mirrors the structure of your generator"><a href="#t1470146508000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">14:01:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>for the most part the shrinking strategy mirrors the structure of your generator</span></div><div id="t1470146541000141" t="2016-08-02 14:02:21 gfredericks e.g., tuple shrinks by shrinking its elements; collections shrink by deleting elements and shrinking elements"><a href="#t1470146541000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">14:02:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., tuple shrinks by shrinking its elements; collections shrink by deleting elements and shrinking elements</span></div><div id="t1470146559000142" t="2016-08-02 14:02:39 gfredericks fmap shrinks by shrinking the underlying element and running it through the function again"><a href="#t1470146559000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">14:02:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>fmap shrinks by shrinking the underlying element and running it through the function again</span></div><div id="t1470146995000143" t="2016-08-02 14:09:55 gfredericks bind is a little weird though, and therefore so is gen/let"><a href="#t1470146995000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">14:09:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>bind is a little weird though, and therefore so is gen/let</span></div><div id="t1470150251000144" t="2016-08-02 15:04:11 gfredericks @alexmiller: regarding the test.check issue described in CLJ-1997, I&apos;m considering pasting all the relevant code from riddley into test.check as the most practical option. I&apos;m wondering if you see any problems with doing something like that for a contrib library."><a href="#t1470150251000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">15:04:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller: regarding the test.check issue described in CLJ-1997, I&apos;m considering pasting all the relevant code from riddley into test.check as the most practical option. I&apos;m wondering if you see any problems with doing something like that for a contrib library.</span></div><div id="t1470160458000145" t="2016-08-02 17:54:18 mattly I&apos;ve started moving away from generators like  gen/frequency  that don&apos;t shrink in favor of those that provide predictable shrinking behavior such as  gen/one-of"><a href="#t1470160458000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:54:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;ve started moving away from generators like </span><code>gen/frequency</code><span> that don&apos;t shrink in favor of those that provide predictable shrinking behavior such as </span><code>gen/one-of</code></div><div id="t1470160510000146" t="2016-08-02 17:55:10 mattly the idea being that when there are multiple possible values that require different generators, it will shrink along an axis of my choosing"><a href="#t1470160510000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:55:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>the idea being that when there are multiple possible values that require different generators, it will shrink along an axis of my choosing</span></div><div id="t1470160652000147" t="2016-08-02 17:57:32 mattly for example, I have a node on the tree structure I generate where most of the time the value is an element from a collection, but sometimes it&apos;s not â€“Â however for most of the  problems I encounter, that doesn&apos;t matter"><a href="#t1470160652000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:57:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>for example, I have a node on the tree structure I generate where most of the time the value is an element from a collection, but sometimes it&apos;s not â€“Â however for most of the  problems I encounter, that doesn&apos;t matter</span></div><div id="t1470160658000148" t="2016-08-02 17:57:38 mattly so I setup the generator like so:"><a href="#t1470160658000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:57:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so I setup the generator like so:</span></div><div id="t1470160717000150" t="2016-08-02 17:58:37 mattly instead of using  gen/frequency  to mimic the structure of my inputs"><a href="#t1470160717000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:58:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>instead of using </span><code>gen/frequency</code><span> to mimic the structure of my inputs</span></div><div id="t1470160749000151" t="2016-08-02 17:59:09 mattly it will definitely test the case where there&apos;s a thing, but will shrink towards there not being a thing"><a href="#t1470160749000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:59:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>it will definitely test the case where there&apos;s a thing, but will shrink towards there not being a thing</span></div><div id="t1470160760000152" t="2016-08-02 17:59:20 mattly which reduces the noise I have to contend with when troubleshooting a failure"><a href="#t1470160760000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">17:59:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>which reduces the noise I have to contend with when troubleshooting a failure</span></div><div id="t1470160856000153" t="2016-08-02 18:00:56 mattly in some cases where  things  is a fixed size, I actually use  gen/one-of  to force a shrinking preference, since  gen/elements  is always random; you&apos;d have to shrink the size of the input if you wanted predictability"><a href="#t1470160856000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:00:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>in some cases where </span><code>things</code><span> is a fixed size, I actually use </span><code>gen/one-of</code><span> to force a shrinking preference, since </span><code>gen/elements</code><span> is always random; you&apos;d have to shrink the size of the input if you wanted predictability</span></div><div id="t1470160903000154" t="2016-08-02 18:01:43 mattly (and feel free to correct me if I&apos;m wrong â€“ I&apos;m going off of observation from usage and cursory readings of the code)"><a href="#t1470160903000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:01:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>(and feel free to correct me if I&apos;m wrong â€“ I&apos;m going off of observation from usage and cursory readings of the code)</span></div><div id="t1470161468000155" t="2016-08-02 18:11:08 gfredericks @mattly: what makes you say  gen/frequency  doesn&apos;t shrink?"><a href="#t1470161468000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:11:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly: what makes you say </span><code>gen/frequency</code><span> doesn&apos;t shrink?</span></div><div id="t1470161521000156" t="2016-08-02 18:12:01 gfredericks oh I see; I&apos;m inclined to say that&apos;s a bug"><a href="#t1470161521000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:12:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh I see; I&apos;m inclined to say that&apos;s a bug</span></div><div id="t1470161534000157" t="2016-08-02 18:12:14 mattly @gfredericks: my experience of using it, that example before, the frequencies didn&apos;t seem to matter when shrinking"><a href="#t1470161534000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:12:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>@gfredericks: my experience of using it, that example before, the frequencies didn&apos;t seem to matter when shrinking</span></div><div id="t1470161564000158" t="2016-08-02 18:12:44 gfredericks I would think it should shrink toward earlier generators like  one-of  does"><a href="#t1470161564000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:12:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I would think it should shrink toward earlier generators like </span><code>one-of</code><span> does</span></div><div id="t1470161577000159" t="2016-08-02 18:12:57 mattly so f.e.  [[3 (gen/return nil)] [1 (gen/elements things)]]  it&apos;ll still pick gen/elements"><a href="#t1470161577000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:12:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so f.e. </span><code>[[3 (gen/return nil)] [1 (gen/elements things)]]</code><span> it&apos;ll still pick gen/elements</span></div><div id="t1470161580000160" t="2016-08-02 18:13:00 mattly that&apos;d be even better"><a href="#t1470161580000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:13:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>that&apos;d be even better</span></div><div id="t1470161618000161" t="2016-08-02 18:13:38 gfredericks would you like to file the bug or shall I?"><a href="#t1470161618000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:13:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>would you like to file the bug or shall I?</span></div><div id="t1470161649000162" t="2016-08-02 18:14:09 mattly go for it, i don&apos;t think I have an account on the jira"><a href="#t1470161649000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:14:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>go for it, i don&apos;t think I have an account on the jira</span></div><div id="t1470161654000163" t="2016-08-02 18:14:14 mattly I probably should"><a href="#t1470161654000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:14:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I probably should</span></div><div id="t1470161663000164" t="2016-08-02 18:14:23 mattly and you&apos;d know more about what to say about it  ğŸ˜„"><a href="#t1470161663000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:14:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and you&apos;d know more about what to say about it </span><b>ğŸ˜„</b></div><div id="t1470161883000165" t="2016-08-02 18:18:03 gfredericks @mattly:  http://dev.clojure.org/jira/browse/TCHECK-114"><a href="#t1470161883000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:18:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly: </span><a href="http://dev.clojure.org/jira/browse/TCHECK-114" target="_blank">http://dev.clojure.org/jira/browse/TCHECK-114</a></div><div id="t1470161922000166" t="2016-08-02 18:18:42 mattly I&apos;m planning to do a writeup on my usage of test.check and property-based testing on the system I&apos;m working on"><a href="#t1470161922000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:18:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m planning to do a writeup on my usage of test.check and property-based testing on the system I&apos;m working on</span></div><div id="t1470161959000167" t="2016-08-02 18:19:19 mattly there&apos;s a lot of material out there on what it is, but very little on how to use it effectively"><a href="#t1470161959000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:19:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>there&apos;s a lot of material out there on what it is, but very little on how to use it effectively</span></div><div id="t1470162060000168" t="2016-08-02 18:21:00 mattly this has been such a success on my system, I&apos;m teaching our QA guy how to write generators"><a href="#t1470162060000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:21:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>this has been such a success on my system, I&apos;m teaching our QA guy how to write generators</span></div><div id="t1470162166000169" t="2016-08-02 18:22:46 gfredericks nice"><a href="#t1470162166000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-02</span>Â <span class="t" onclick="H(this)">18:22:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>nice</span></div><div id="t1470204254000170" t="2016-08-03 06:04:14 lucasbradstreet @mattly cool, let me know if you want some eyes on it before you release it  ğŸ™‚"><a href="#t1470204254000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-03</span>Â <span class="t" onclick="H(this)">06:04:14</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@mattly cool, let me know if you want some eyes on it before you release it </span><b>ğŸ™‚</b></div><div id="t1470320559000171" t="2016-08-04 14:22:39 gfredericks @alexmiller: bumping the question above about pasting riddley into test.check"><a href="#t1470320559000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">14:22:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller: bumping the question above about pasting riddley into test.check</span></div><div id="t1470320634000172" t="2016-08-04 14:23:54 gfredericks I just looked at the source and it&apos;s just a few hundred lines. I&apos;m guessing licensing/CA issues would be the biggest thing?"><a href="#t1470320634000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">14:23:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just looked at the source and it&apos;s just a few hundred lines. I&apos;m guessing licensing/CA issues would be the biggest thing?</span></div><div id="t1470341270000174" t="2016-08-04 20:07:50 alexmiller sorry, I didnâ€™t belong to this channel so didnâ€™t get any notifications"><a href="#t1470341270000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:07:50</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>sorry, I didnâ€™t belong to this channel so didnâ€™t get any notifications</span></div><div id="t1470341629000175" t="2016-08-04 20:13:49 alexmiller havenâ€™t read all the back chat yet but pulling riddley into test-check would require some things wrt license and contribution"><a href="#t1470341629000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:13:49</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>havenâ€™t read all the back chat yet but pulling riddley into test-check would require some things wrt license and contribution</span></div><div id="t1470341644000176" t="2016-08-04 20:14:04 alexmiller maybe this isnâ€™t a problem you should be solving in test.check"><a href="#t1470341644000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:14:04</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>maybe this isnâ€™t a problem you should be solving in test.check</span></div><div id="t1470341684000177" t="2016-08-04 20:14:44 gfredericks yeah, that&apos;s why I opened CLJ-1997; I&apos;d rather not solve it :)"><a href="#t1470341684000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:14:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah, that&apos;s why I opened CLJ-1997; I&apos;d rather not solve it :)</span></div><div id="t1470341706000178" t="2016-08-04 20:15:06 gfredericks unless you&apos;re just objecting to it being a problem"><a href="#t1470341706000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:15:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>unless you&apos;re just objecting to it being a problem</span></div><div id="t1470341716000179" t="2016-08-04 20:15:16 gfredericks (the  gen/let  thing in particular)"><a href="#t1470341716000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:15:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(the </span><code>gen/let</code><span> thing in particular)</span></div><div id="t1470341825000180" t="2016-08-04 20:17:05 alexmiller if I read all this correctly, let allows you to handle both dependent and independent generators but because it canâ€™t tell the difference it performs the more complicated dependent expansion"><a href="#t1470341825000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:17:05</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>if I read all this correctly, let allows you to handle both dependent and independent generators but because it canâ€™t tell the difference it performs the more complicated dependent expansion</span></div><div id="t1470341889000181" t="2016-08-04 20:18:09 gfredericks right"><a href="#t1470341889000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:18:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>right</span></div><div id="t1470341891000182" t="2016-08-04 20:18:11 alexmiller to which maybe I would suggest that you should add something that just lets you do the independent generator case with the less complicated expansion rather than trying to detect the difference"><a href="#t1470341891000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:18:11</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>to which maybe I would suggest that you should add something that just lets you do the independent generator case with the less complicated expansion rather than trying to detect the difference</span></div><div id="t1470341913000183" t="2016-08-04 20:18:33 alexmiller and/or to let users tell you which is which"><a href="#t1470341913000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:18:33</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and/or to let users tell you which is which</span></div><div id="t1470341919000184" t="2016-08-04 20:18:39 gfredericks I suggested a much more complex macro a while back (analagous to  for ) but reid didn&apos;t like it :)"><a href="#t1470341919000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:18:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suggested a much more complex macro a while back (analagous to </span><code>for</code><span>) but reid didn&apos;t like it :)</span></div><div id="t1470341927000185" t="2016-08-04 20:18:47 gfredericks so I agree with you actually"><a href="#t1470341927000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:18:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so I agree with you actually</span></div><div id="t1470341940000186" t="2016-08-04 20:19:00 alexmiller sounds like a quorum to me :)"><a href="#t1470341940000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:19:00</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>sounds like a quorum to me :)</span></div><div id="t1470341945000187" t="2016-08-04 20:19:05 gfredericks haha"><a href="#t1470341945000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:19:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>haha</span></div><div id="t1470341958000188" t="2016-08-04 20:19:18 alexmiller see how easy that was? :)"><a href="#t1470341958000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:19:18</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>see how easy that was? :)</span></div><div id="t1470341974000189" t="2016-08-04 20:19:34 gfredericks @alexmiller: do you think a fully-featured analog to  clojure.core/for  would be a good fit?"><a href="#t1470341974000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:19:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller: do you think a fully-featured analog to </span><code>clojure.core/for</code><span> would be a good fit?</span></div><div id="t1470342005000190" t="2016-08-04 20:20:05 gfredericks (examples here:  https://github.com/gfredericks/test.chuck#for )"><a href="#t1470342005000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:20:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(examples here: </span><a href="https://github.com/gfredericks/test.chuck#for" target="_blank">https://github.com/gfredericks/test.chuck#for</a><span>)</span></div><div id="t1470342031000192" t="2016-08-04 20:20:31 gfredericks the recomendation would then be &quot;if you care about optimizing shrinking, use  for  instead of  let &quot;"><a href="#t1470342031000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:20:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the recomendation would then be &quot;if you care about optimizing shrinking, use </span><code>for</code><span> instead of </span><code>let</code><span>&quot;</span></div><div id="t1470342040000193" t="2016-08-04 20:20:40 alexmiller yeah, Iâ€™ve looked at it in the past"><a href="#t1470342040000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:20:40</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah, Iâ€™ve looked at it in the past</span></div><div id="t1470342062000194" t="2016-08-04 20:21:02 alexmiller it seems fine, but I canâ€™t say  for  as a name had much resonance for me"><a href="#t1470342062000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:21:02</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>it seems fine, but I canâ€™t say </span><code>for</code><span> as a name had much resonance for me</span></div><div id="t1470342076000195" t="2016-08-04 20:21:16 gfredericks ah yeah; I was just making the analogy to  clojure.core/for  I guess"><a href="#t1470342076000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:21:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ah yeah; I was just making the analogy to </span><code>clojure.core/for</code><span> I guess</span></div><div id="t1470342090000196" t="2016-08-04 20:21:30 gfredericks monads and whatnot :)"><a href="#t1470342090000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:21:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>monads and whatnot :)</span></div><div id="t1470342116000197" t="2016-08-04 20:21:56 gfredericks let+"><a href="#t1470342116000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:21:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>let+</code></div><div id="t1470342127000198" t="2016-08-04 20:22:07 alexmiller over"><a href="#t1470342127000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:22:07</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><code>over</code></div><div id="t1470342135000199" t="2016-08-04 20:22:15 gfredericks o_O"><a href="#t1470342135000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:22:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>o_O</span></div><div id="t1470342164000200" t="2016-08-04 20:22:44 alexmiller Iâ€™m not known for being very successful at suggesting good names :)"><a href="#t1470342164000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:22:44</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Iâ€™m not known for being very successful at suggesting good names :)</span></div><div id="t1470342183000201" t="2016-08-04 20:23:03 alexmiller but I would prefer something thatâ€™s not a variant of  let"><a href="#t1470342183000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:23:03</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>but I would prefer something thatâ€™s not a variant of </span><code>let</code></div><div id="t1470342220000202" t="2016-08-04 20:23:40 alexmiller and I think itâ€™s different enough from clojure.core/for that Iâ€™d be a little leery of overlapping that name"><a href="#t1470342220000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:23:40</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and I think itâ€™s different enough from clojure.core/for that Iâ€™d be a little leery of overlapping that name</span></div><div id="t1470342233000203" t="2016-08-04 20:23:53 gfredericks what sort of difference are you thinking of?"><a href="#t1470342233000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:23:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what sort of difference are you thinking of?</span></div><div id="t1470342238000204" t="2016-08-04 20:23:58 alexmiller but maybe I could be convinced"><a href="#t1470342238000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:23:58</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>but maybe I could be convinced</span></div><div id="t1470342273000205" t="2016-08-04 20:24:33 gfredericks :parallel  is an extra feature; but I think every aspect of  clojure.core/for  has an analog"><a href="#t1470342273000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:24:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>:parallel</code><span> is an extra feature; but I think every aspect of </span><code>clojure.core/for</code><span> has an analog</span></div><div id="t1470342312000206" t="2016-08-04 20:25:12 alexmiller what does parallel do again?"><a href="#t1470342312000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:25:12</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>what does parallel do again?</span></div><div id="t1470342327000207" t="2016-08-04 20:25:27 gfredericks it&apos;s exactly the thing you use to solve the problem with  let"><a href="#t1470342327000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:25:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s exactly the thing you use to solve the problem with </span><code>let</code></div><div id="t1470342333000208" t="2016-08-04 20:25:33 alexmiller just independent"><a href="#t1470342333000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:25:33</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>just independent</span></div><div id="t1470342333000209" t="2016-08-04 20:25:33 gfredericks it&apos;s how you say &quot;these are independent&quot;"><a href="#t1470342333000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:25:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s how you say &quot;these are independent&quot;</span></div><div id="t1470342336000210" t="2016-08-04 20:25:36 gfredericks yeah"><a href="#t1470342336000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:25:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah</span></div><div id="t1470342360000211" t="2016-08-04 20:26:00 gfredericks you could imagine  clojure.core/for  having something analogous that would let you iterate over two seqs in parallel"><a href="#t1470342360000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:26:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could imagine </span><code>clojure.core/for</code><span> having something analogous that would let you iterate over two seqs in parallel</span></div><div id="t1470342488000212" t="2016-08-04 20:28:08 alexmiller I guess putting on my Rich hair, I would say: what problem are we trying to solve and what are some alternatives and tradeoffs between them?"><a href="#t1470342488000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:28:08</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I guess putting on my Rich hair, I would say: what problem are we trying to solve and what are some alternatives and tradeoffs between them?</span></div><div id="t1470342497000213" t="2016-08-04 20:28:17 alexmiller this is one option"><a href="#t1470342497000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:28:17</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>this is one option</span></div><div id="t1470342500000214" t="2016-08-04 20:28:20 alexmiller what are some others"><a href="#t1470342500000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:28:20</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>what are some others</span></div><div id="t1470342532000215" t="2016-08-04 20:28:52 gfredericks the problem is that  gen/let  is very easy to use and expressing parallelism is comparably difficult (`gen/tuple` and destructuring)"><a href="#t1470342532000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:28:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the problem is that </span><code>gen/let</code><span> is very easy to use and expressing parallelism is comparably difficult (`gen/tuple` and destructuring)</span></div><div id="t1470342558000216" t="2016-08-04 20:29:18 gfredericks and so people will either naively use  gen/let  or else be grumpy that they can&apos;t"><a href="#t1470342558000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:29:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and so people will either naively use </span><code>gen/let</code><span> or else be grumpy that they can&apos;t</span></div><div id="t1470342611000217" t="2016-08-04 20:30:11 alexmiller thereâ€™s a lot packed into for (some might argue too much :) - is there some way to take it apart into reusable pieces?"><a href="#t1470342611000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:30:11</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>thereâ€™s a lot packed into for (some might argue too much :) - is there some way to take it apart into reusable pieces?</span></div><div id="t1470342646000218" t="2016-08-04 20:30:46 gfredericks it&apos;s also possible to backwards-compatibly just add  :parallel  to  gen/let"><a href="#t1470342646000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:30:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s also possible to backwards-compatibly just add </span><code>:parallel</code><span> to </span><code>gen/let</code></div><div id="t1470342669000220" t="2016-08-04 20:31:09 gfredericks I literally read &quot;hat&quot;"><a href="#t1470342669000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:31:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I literally read &quot;hat&quot;</span></div><div id="t1470342683000221" t="2016-08-04 20:31:23 gfredericks so I needed you to point it out but now I enjoy it"><a href="#t1470342683000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:31:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so I needed you to point it out but now I enjoy it</span></div><div id="t1470342688000222" t="2016-08-04 20:31:28 alexmiller good, thanks :)"><a href="#t1470342688000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:31:28</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>good, thanks :)</span></div><div id="t1470342702000223" t="2016-08-04 20:31:42 alexmiller hereby trademarking that"><a href="#t1470342702000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:31:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>hereby trademarking that</span></div><div id="t1470342746000224" t="2016-08-04 20:32:26 alexmiller unfortunately, I have to go pick up my dog right now, but I think itâ€™s worth considering the tradeoffs of adding :parallel to let"><a href="#t1470342746000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:32:26</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>unfortunately, I have to go pick up my dog right now, but I think itâ€™s worth considering the tradeoffs of adding :parallel to let</span></div><div id="t1470342760000225" t="2016-08-04 20:32:40 gfredericks yeah I like that idea more now that you&apos;ve made me think about it"><a href="#t1470342760000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:32:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah I like that idea more now that you&apos;ve made me think about it</span></div><div id="t1470342786000226" t="2016-08-04 20:33:06 alexmiller pulling in either riddley or tools.analyzer seems like a large step so I would try to avoid it if possible"><a href="#t1470342786000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:33:06</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>pulling in either riddley or tools.analyzer seems like a large step so I would try to avoid it if possible</span></div><div id="t1470342795000227" t="2016-08-04 20:33:15 gfredericks ACK"><a href="#t1470342795000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-04</span>Â <span class="t" onclick="H(this)">20:33:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ACK</span></div><div id="t1470585908000229" t="2016-08-07 16:05:08 gfredericks I&apos;m taking a twitter poll on options for independent bindings in gen/let:  https://mobile.twitter.com/gfredericks_/status/762311329470447616"><a href="#t1470585908000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-07</span>Â <span class="t" onclick="H(this)">16:05:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m taking a twitter poll on options for independent bindings in gen/let: </span><a href="https://mobile.twitter.com/gfredericks_/status/762311329470447616" target="_blank">https://mobile.twitter.com/gfredericks_/status/762311329470447616</a></div><div id="t1470585944000231" t="2016-08-07 16:05:44 gfredericks So far people like the map syntax, which surprised me /cc @alexmiller "><a href="#t1470585944000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-07</span>Â <span class="t" onclick="H(this)">16:05:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So far people like the map syntax, which surprised me /cc @alexmiller </span></div><div id="t1471306696000234" t="2016-08-16 00:18:16 gfredericks going to try to tackle parallel tests once and for all"><a href="#t1471306696000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-16</span>Â <span class="t" onclick="H(this)">00:18:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>going to try to tackle parallel tests once and for all</span></div><div id="t1471402322000235" t="2016-08-17 02:52:02 lvh woop woop  ğŸ™‚"><a href="#t1471402322000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">02:52:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>woop woop </span><b>ğŸ™‚</b></div><div id="t1471402512000236" t="2016-08-17 02:55:12 gfredericks it&apos;s more of a headache than it should be :("><a href="#t1471402512000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">02:55:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s more of a headache than it should be :(</span></div><div id="t1471444873000237" t="2016-08-17 14:41:13 lucasbradstreet @gfredericks: re our twitter conversation, whatâ€™s your solution for generators with high variance? I think maybe itâ€™s ok, because the common case where youâ€™re using parallel testing will be tests passing"><a href="#t1471444873000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:41:13</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@gfredericks: re our twitter conversation, whatâ€™s your solution for generators with high variance? I think maybe itâ€™s ok, because the common case where youâ€™re using parallel testing will be tests passing</span></div><div id="t1471444947000238" t="2016-08-17 14:42:27 lucasbradstreet if your tests are failing often, then generally parallelism isnâ€™t really all that helpful anyway. Most of the time when I run test.check running overnight in #core JVMs, I do not expect to catch anything"><a href="#t1471444947000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:42:27</span>Â Â Â Â Â lucasbradstreetÂ </span><span>if your tests are failing often, then generally parallelism isnâ€™t really all that helpful anyway. Most of the time when I run test.check running overnight in #core JVMs, I do not expect to catch anything</span></div><div id="t1471445236000239" t="2016-08-17 14:47:16 gfredericks It can slow down even in the passing case"><a href="#t1471445236000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:47:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It can slow down even in the passing case</span></div><div id="t1471445249000240" t="2016-08-17 14:47:29 gfredericks Oh I forgot another goal"><a href="#t1471445249000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:47:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh I forgot another goal</span></div><div id="t1471445261000241" t="2016-08-17 14:47:41 gfredericks Given a seed, the result should be deterministic"><a href="#t1471445261000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:47:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Given a seed, the result should be deterministic</span></div><div id="t1471445306000242" t="2016-08-17 14:48:26 gfredericks So if you&apos;re preallocating work you have to give n/t trials to each thread"><a href="#t1471445306000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:48:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So if you&apos;re preallocating work you have to give n/t trials to each thread</span></div><div id="t1471445307000243" t="2016-08-17 14:48:27 lucasbradstreet Yeah, I agree with that goal. Thatâ€™s why I was saying that you have to partition the space and check whether all threads have passed X, where X is a failing iteration"><a href="#t1471445307000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:48:27</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, I agree with that goal. Thatâ€™s why I was saying that you have to partition the space and check whether all threads have passed X, where X is a failing iteration</span></div><div id="t1471445325000244" t="2016-08-17 14:48:45 lucasbradstreet I can see how itâ€™ll slow down passing cases though"><a href="#t1471445325000244" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:48:45</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I can see how itâ€™ll slow down passing cases though</span></div><div id="t1471445332000245" t="2016-08-17 14:48:52 gfredericks If one thread has lots of slow trials the others will be idle while it finished"><a href="#t1471445332000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:48:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>If one thread has lots of slow trials the others will be idle while it finished</span></div><div id="t1471445339000246" t="2016-08-17 14:48:59 lucasbradstreet Yeah, thatâ€™s troublesome"><a href="#t1471445339000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:48:59</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, thatâ€™s troublesome</span></div><div id="t1471445348000247" t="2016-08-17 14:49:08 lucasbradstreet Especially if you have a bunch of tests to run through"><a href="#t1471445348000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:49:08</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Especially if you have a bunch of tests to run through</span></div><div id="t1471445354000248" t="2016-08-17 14:49:14 gfredericks So my alg has a queue of trials to run"><a href="#t1471445354000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:49:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So my alg has a queue of trials to run</span></div><div id="t1471445362000249" t="2016-08-17 14:49:22 lucasbradstreet Generally Iâ€™m just running one test overnight, on X cores"><a href="#t1471445362000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:49:22</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Generally Iâ€™m just running one test overnight, on X cores</span></div><div id="t1471445373000250" t="2016-08-17 14:49:33 lucasbradstreet So this isnâ€™t a problem, but I see where itâ€™s a problem for a test suite"><a href="#t1471445373000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:49:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>So this isnâ€™t a problem, but I see where itâ€™s a problem for a test suite</span></div><div id="t1471445405000251" t="2016-08-17 14:50:05 gfredericks And the threads just pull them off the queue"><a href="#t1471445405000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:50:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And the threads just pull them off the queue</span></div><div id="t1471445419000252" t="2016-08-17 14:50:19 lucasbradstreet I was going to say, a priority queue might be the answer"><a href="#t1471445419000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:50:19</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I was going to say, a priority queue might be the answer</span></div><div id="t1471445430000253" t="2016-08-17 14:50:30 gfredericks Priority? "><a href="#t1471445430000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:50:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Priority? </span></div><div id="t1471445436000254" t="2016-08-17 14:50:36 lucasbradstreet Maybe you donâ€™t even need to prioritise, now that I think about it"><a href="#t1471445436000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:50:36</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Maybe you donâ€™t even need to prioritise, now that I think about it</span></div><div id="t1471445440000255" t="2016-08-17 14:50:40 gfredericks Yeah"><a href="#t1471445440000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:50:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah</span></div><div id="t1471445476000256" t="2016-08-17 14:51:16 gfredericks The other problem I have is deciding how to manage the threads"><a href="#t1471445476000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:51:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The other problem I have is deciding how to manage the threads</span></div><div id="t1471445498000257" t="2016-08-17 14:51:38 gfredericks I suppose I could have it just use N futures...?"><a href="#t1471445498000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:51:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose I could have it just use N futures...?</span></div><div id="t1471445506000258" t="2016-08-17 14:51:46 lucasbradstreet You also need to ID the test cases, in case there is some variance in when the cases finish?"><a href="#t1471445506000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:51:46</span>Â Â Â Â Â lucasbradstreetÂ </span><span>You also need to ID the test cases, in case there is some variance in when the cases finish?</span></div><div id="t1471445507000259" t="2016-08-17 14:51:47 gfredericks Maybe that&apos;s best actually"><a href="#t1471445507000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:51:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Maybe that&apos;s best actually</span></div><div id="t1471445518000260" t="2016-08-17 14:51:58 gfredericks Yes they&apos;re ordered"><a href="#t1471445518000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:51:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yes they&apos;re ordered</span></div><div id="t1471445560000261" t="2016-08-17 14:52:40 gfredericks So a lot of complexity comes from when you find the first failure but have to wait for all earlier jobs to finish first"><a href="#t1471445560000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:52:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So a lot of complexity comes from when you find the first failure but have to wait for all earlier jobs to finish first</span></div><div id="t1471445571000262" t="2016-08-17 14:52:51 lucasbradstreet Yep, I can see that"><a href="#t1471445571000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:52:51</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yep, I can see that</span></div><div id="t1471445645000263" t="2016-08-17 14:54:05 lucasbradstreet If you use futures, make sure to check for (Thread/interrupted) in the processing loop, so you can cancel the thread reliably after the test is done"><a href="#t1471445645000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:54:05</span>Â Â Â Â Â lucasbradstreetÂ </span><span>If you use futures, make sure to check for (Thread/interrupted) in the processing loop, so you can cancel the thread reliably after the test is done</span></div><div id="t1471445872000264" t="2016-08-17 14:57:52 gfredericks yeah cancelling things is a big deal too"><a href="#t1471445872000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:57:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah cancelling things is a big deal too</span></div><div id="t1471445888000265" t="2016-08-17 14:58:08 gfredericks I don&apos;t know how bad it is to  .stop  a thread"><a href="#t1471445888000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:58:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t know how bad it is to </span><code>.stop</code><span> a thread</span></div><div id="t1471445911000266" t="2016-08-17 14:58:31 lucasbradstreet Yeah, it doesnâ€™t really work well"><a href="#t1471445911000266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:58:31</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, it doesnâ€™t really work well</span></div><div id="t1471445921000267" t="2016-08-17 14:58:41 lucasbradstreet Itâ€™s really up to the thread to behave well"><a href="#t1471445921000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:58:41</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Itâ€™s really up to the thread to behave well</span></div><div id="t1471445947000268" t="2016-08-17 14:59:07 lucasbradstreet if you check whether youâ€™ve been interrupted in between test iterations, youâ€™ll be fine with just (future-cancel fut)"><a href="#t1471445947000268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:59:07</span>Â Â Â Â Â lucasbradstreetÂ </span><span>if you check whether youâ€™ve been interrupted in between test iterations, youâ€™ll be fine with just (future-cancel fut)</span></div><div id="t1471445958000269" t="2016-08-17 14:59:18 gfredericks C-c in nrepl calls .stop I think"><a href="#t1471445958000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:59:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>C-c in nrepl calls .stop I think</span></div><div id="t1471445989000270" t="2016-08-17 14:59:49 lucasbradstreet future-cancel may do too, but itâ€™s really up to the thread to behave properly"><a href="#t1471445989000270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">14:59:49</span>Â Â Â Â Â lucasbradstreetÂ </span><span>future-cancel may do too, but itâ€™s really up to the thread to behave properly</span></div><div id="t1471446047000271" t="2016-08-17 15:00:47 lucasbradstreet pretty sure thread.stop has been deprecated too"><a href="#t1471446047000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:00:47</span>Â Â Â Â Â lucasbradstreetÂ </span><span>pretty sure thread.stop has been deprecated too</span></div><div id="t1471446075000272" t="2016-08-17 15:01:15 lucasbradstreet yep,  https://stackoverflow.com/questions/16504140/thread-stop-deprecated"><a href="#t1471446075000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:01:15</span>Â Â Â Â Â lucasbradstreetÂ </span><span>yep, </span><a href="https://stackoverflow.com/questions/16504140/thread-stop-deprecated" target="_blank">https://stackoverflow.com/questions/16504140/thread-stop-deprecated</a></div><div id="t1471446104000274" t="2016-08-17 15:01:44 gfredericks yeah that&apos;s the entire reason for my hesitation"><a href="#t1471446104000274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:01:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah that&apos;s the entire reason for my hesitation</span></div><div id="t1471446129000275" t="2016-08-17 15:02:09 gfredericks it&apos;s tough in this case to ensure the thread behaves properly though since it&apos;s running user code, and so might hang"><a href="#t1471446129000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:02:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s tough in this case to ensure the thread behaves properly though since it&apos;s running user code, and so might hang</span></div><div id="t1471446167000276" t="2016-08-17 15:02:47 gfredericks so if I don&apos;t call thread.stop, the caveat to users is &quot;if your test or your generator hangs, you&apos;re just going to have an extra thread on your jvm until you restart it, sorry&quot;"><a href="#t1471446167000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:02:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so if I don&apos;t call thread.stop, the caveat to users is &quot;if your test or your generator hangs, you&apos;re just going to have an extra thread on your jvm until you restart it, sorry&quot;</span></div><div id="t1471446183000277" t="2016-08-17 15:03:03 lucasbradstreet if user code hangs, itâ€™s not your problem in my opinion"><a href="#t1471446183000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:03:03</span>Â Â Â Â Â lucasbradstreetÂ </span><span>if user code hangs, itâ€™s not your problem in my opinion</span></div><div id="t1471446190000278" t="2016-08-17 15:03:10 lucasbradstreet best you can do is exit between iterations"><a href="#t1471446190000278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:03:10</span>Â Â Â Â Â lucasbradstreetÂ </span><span>best you can do is exit between iterations</span></div><div id="t1471446201000279" t="2016-08-17 15:03:21 gfredericks sure, but users have the expectation that they can C-c their tests and everything stops"><a href="#t1471446201000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:03:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>sure, but users have the expectation that they can C-c their tests and everything stops</span></div><div id="t1471446215000280" t="2016-08-17 15:03:35 gfredericks what is &quot;exit between iterations&quot;?"><a href="#t1471446215000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:03:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what is &quot;exit between iterations&quot;?</span></div><div id="t1471446240000281" t="2016-08-17 15:04:00 lucasbradstreet I agree, but thereâ€™s nothing you can do to guarantee that. User code can always cause situations where that is not true"><a href="#t1471446240000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:04:00</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I agree, but thereâ€™s nothing you can do to guarantee that. User code can always cause situations where that is not true</span></div><div id="t1471446266000282" t="2016-08-17 15:04:26 lucasbradstreet I mean, a thread will, at minimum, stop between an test iteration"><a href="#t1471446266000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:04:26</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I mean, a thread will, at minimum, stop between an test iteration</span></div><div id="t1471446342000283" t="2016-08-17 15:05:42 lucasbradstreet as far as I know, there may be other situations where their code can bail safely, but there can always be other situations where things are blocked and C-c is never going to help"><a href="#t1471446342000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:05:42</span>Â Â Â Â Â lucasbradstreetÂ </span><span>as far as I know, there may be other situations where their code can bail safely, but there can always be other situations where things are blocked and C-c is never going to help</span></div><div id="t1471446372000285" t="2016-08-17 15:06:12 gfredericks that&apos;s true when users are explicitly using threading constructs"><a href="#t1471446372000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:06:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s true when users are explicitly using threading constructs</span></div><div id="t1471446386000286" t="2016-08-17 15:06:26 lucasbradstreet when I say â€œmayâ€, I mean, it depends on their code"><a href="#t1471446386000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:06:26</span>Â Â Â Â Â lucasbradstreetÂ </span><span>when I say â€œmayâ€, I mean, it depends on their code</span></div><div id="t1471446392000287" t="2016-08-17 15:06:32 gfredericks but for user code on the main thread I think it&apos;s always true that C-c in nrepl stops it"><a href="#t1471446392000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:06:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but for user code on the main thread I think it&apos;s always true that C-c in nrepl stops it</span></div><div id="t1471446431000288" t="2016-08-17 15:07:11 gfredericks I suppose this discussion overlaps with the &quot;should tests run in parallel by default?&quot; question"><a href="#t1471446431000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:07:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose this discussion overlaps with the &quot;should tests run in parallel by default?&quot; question</span></div><div id="t1471446565000289" t="2016-08-17 15:09:25 lucasbradstreet Ah yes, I can see how that is important "><a href="#t1471446565000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:09:25</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Ah yes, I can see how that is important </span></div><div id="t1471447061000290" t="2016-08-17 15:17:41 gfredericks I think using futures and using an atom to aggregate the results will simplify that code a lot"><a href="#t1471447061000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:17:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think using futures and using an atom to aggregate the results will simplify that code a lot</span></div><div id="t1471447103000291" t="2016-08-17 15:18:23 gfredericks so I&apos;m glad about that; "><a href="#t1471447103000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:18:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so I&apos;m glad about that; </span></div><div id="t1471447142000292" t="2016-08-17 15:19:02 gfredericks I&apos;m a little grumpy about how this interacts with the reporter-fn, since I think that has to be nondeterministic now"><a href="#t1471447142000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:19:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m a little grumpy about how this interacts with the reporter-fn, since I think that has to be nondeterministic now</span></div><div id="t1471447179000293" t="2016-08-17 15:19:39 gfredericks and the behavior when the reporter-fn throws an exception is potentially weirder"><a href="#t1471447179000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">15:19:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and the behavior when the reporter-fn throws an exception is potentially weirder</span></div><div id="t1471459647000294" t="2016-08-17 18:47:27 alexmiller calling .stop on a thread is bad - it frees all monitors which can badly impact others using them"><a href="#t1471459647000294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">18:47:27</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>calling .stop on a thread is bad - it frees all monitors which can badly impact others using them</span></div><div id="t1471459681000295" t="2016-08-17 18:48:01 alexmiller much preferred to interrupt"><a href="#t1471459681000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">18:48:01</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>much preferred to interrupt</span></div><div id="t1471464469000296" t="2016-08-17 20:07:49 gfredericks @alexmiller: do you think it&apos;s a problem that nrepl does it on ctrl-c?"><a href="#t1471464469000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:07:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller: do you think it&apos;s a problem that nrepl does it on ctrl-c?</span></div><div id="t1471464508000297" t="2016-08-17 20:08:28 gfredericks should we be resigned to forcing repl users to restart their jvm if they execute an infinite loop?"><a href="#t1471464508000297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:08:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>should we be resigned to forcing repl users to restart their jvm if they execute an infinite loop?</span></div><div id="t1471464593000298" t="2016-08-17 20:09:53 gfredericks I see ctrl-c at the builtin clojure repl just kills the whole jvm"><a href="#t1471464593000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:09:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I see ctrl-c at the builtin clojure repl just kills the whole jvm</span></div><div id="t1471464686000299" t="2016-08-17 20:11:26 gfredericks I&apos;m also curious if you have any sense for how realistic the monitor problem is to a user who isn&apos;t explicitly using monitors"><a href="#t1471464686000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:11:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m also curious if you have any sense for how realistic the monitor problem is to a user who isn&apos;t explicitly using monitors</span></div><div id="t1471465686000300" t="2016-08-17 20:28:06 alexmiller I donâ€™t know that there is any better solution for nrepl, but that doesnâ€™t make it good"><a href="#t1471465686000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:28:06</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I donâ€™t know that there is any better solution for nrepl, but that doesnâ€™t make it good</span></div><div id="t1471465775000301" t="2016-08-17 20:29:35 alexmiller the thread stop thing is a real problem, which is why its deprecated. any code that uses Java locks will be affected and that includes code that is calling into the Clojure runtime in places where synchronization is used (every lazy seq uses synchronization)."><a href="#t1471465775000301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:29:35</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>the thread stop thing is a real problem, which is why its deprecated. any code that uses Java locks will be affected and that includes code that is calling into the Clojure runtime in places where synchronization is used (every lazy seq uses synchronization).</span></div><div id="t1471465870000303" t="2016-08-17 20:31:10 alexmiller that said, typically at the repl, the person typing is the one likely to be affected and they will probably just start over with (mostly) fresh resources"><a href="#t1471465870000303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:31:10</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>that said, typically at the repl, the person typing is the one likely to be affected and they will probably just start over with (mostly) fresh resources</span></div><div id="t1471465962000304" t="2016-08-17 20:32:42 alexmiller Java Concurrency in Practice is probably the best resource on these problems and their recommended alternatives"><a href="#t1471465962000304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">20:32:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Java Concurrency in Practice is probably the best resource on these problems and their recommended alternatives</span></div><div id="t1471470256000305" t="2016-08-17 21:44:16 gfredericks Yeah that&apos;s about what I thought. Seems like there&apos;s not much you can do in a general context where you don&apos;t control all the code. I&apos;m surprised it hasn&apos;t been worth fixing (or is too hard to fix) on modern jvms"><a href="#t1471470256000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-17</span>Â <span class="t" onclick="H(this)">21:44:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah that&apos;s about what I thought. Seems like there&apos;s not much you can do in a general context where you don&apos;t control all the code. I&apos;m surprised it hasn&apos;t been worth fixing (or is too hard to fix) on modern jvms</span></div><div id="t1471572188000306" t="2016-08-19 02:03:08 lvh Whatâ€™s the generator equivalent of â€œrepeatedlyâ€? I know  return  is  constantly . Use case is: generate nested data structure with random (but no-shrink, because they donâ€™t affect execution) byte arrays"><a href="#t1471572188000306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:03:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>Whatâ€™s the generator equivalent of â€œrepeatedlyâ€? I know </span><code>return</code><span> is </span><code>constantly</code><span>. Use case is: generate nested data structure with random (but no-shrink, because they donâ€™t affect execution) byte arrays</span></div><div id="t1471572295000307" t="2016-08-19 02:04:55 lvh I think the answer is  (defn frepeatedly [f] (fmap #(f) (return nil)))"><a href="#t1471572295000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:04:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I think the answer is </span><code>(defn frepeatedly [f] (fmap #(f) (return nil)))</code></div><div id="t1471572299000308" t="2016-08-19 02:04:59 lvh or something"><a href="#t1471572299000308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:04:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>or something</span></div><div id="t1471572639000309" t="2016-08-19 02:10:39 gfredericks um"><a href="#t1471572639000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:10:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>um</span></div><div id="t1471572665000310" t="2016-08-19 02:11:05 gfredericks you just want to generate collections of byte arrays?"><a href="#t1471572665000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:11:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you just want to generate collections of byte arrays?</span></div><div id="t1471572702000311" t="2016-08-19 02:11:42 gfredericks it sounds like you just described  (gen/list (gen/no-shrink gen/bytes))  maybe?"><a href="#t1471572702000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:11:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it sounds like you just described </span><code>(gen/list (gen/no-shrink gen/bytes))</code><span> maybe?</span></div><div id="t1471573036000312" t="2016-08-19 02:17:16 gfredericks @lvh â‡‘"><a href="#t1471573036000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:17:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@lvh â‡‘</span></div><div id="t1471573199000313" t="2016-08-19 02:19:59 lvh @gfredericks: Well, sorta. I want byte arrays of a specific size (theyâ€™re cryptographic keys) â€” I already have a function for doing that, hence the phrasing of the question"><a href="#t1471573199000313" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:19:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>@gfredericks: Well, sorta. I want byte arrays of a specific size (theyâ€™re cryptographic keys) â€” I already have a function for doing that, hence the phrasing of the question</span></div><div id="t1471573225000314" t="2016-08-19 02:20:25 lvh I donâ€™t actually care that theyâ€™re cryptographically random for these tests, but have a mild preference for just using the same tool"><a href="#t1471573225000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:20:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I donâ€™t actually care that theyâ€™re cryptographically random for these tests, but have a mild preference for just using the same tool</span></div><div id="t1471573303000315" t="2016-08-19 02:21:43 gfredericks if you don&apos;t use test.check&apos;s randomness then you won&apos;t have the reproducibility you normally have"><a href="#t1471573303000315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:21:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you don&apos;t use test.check&apos;s randomness then you won&apos;t have the reproducibility you normally have</span></div><div id="t1471573333000316" t="2016-08-19 02:22:13 gfredericks but if you&apos;re convinced it won&apos;t affect your tests and don&apos;t want to bother reimplementing as a generator, I&apos;d just &quot;generate&quot; that stuff as part of running your test and not in the generator"><a href="#t1471573333000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:22:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but if you&apos;re convinced it won&apos;t affect your tests and don&apos;t want to bother reimplementing as a generator, I&apos;d just &quot;generate&quot; that stuff as part of running your test and not in the generator</span></div><div id="t1471573351000317" t="2016-08-19 02:22:31 gfredericks fixed-length byte arrays wouldn&apos;t be hard to implement though"><a href="#t1471573351000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:22:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>fixed-length byte arrays wouldn&apos;t be hard to implement though</span></div><div id="t1471573567000318" t="2016-08-19 02:26:07 gfredericks e.g.,  (gen/fmap byte-array (gen/vector (gen/choose -128 127) 12))"><a href="#t1471573567000318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:26:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., </span><code>(gen/fmap byte-array (gen/vector (gen/choose -128 127) 12))</code></div><div id="t1471573578000319" t="2016-08-19 02:26:18 gfredericks that should give you a uniform distribution"><a href="#t1471573578000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:26:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that should give you a uniform distribution</span></div><div id="t1471573597000320" t="2016-08-19 02:26:37 lvh OK, thanks  ğŸ™‚  For clarity, the value doesnâ€™t matter, but the length does; any byte array that isnâ€™t exactly this length is wrong and wonâ€™t work"><a href="#t1471573597000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:26:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>OK, thanks </span><b>ğŸ™‚</b><span> For clarity, the value doesnâ€™t matter, but the length does; any byte array that isnâ€™t exactly this length is wrong and wonâ€™t work</span></div><div id="t1471573742000321" t="2016-08-19 02:29:02 gfredericks (gen/return (byte-array (repeat 12 0)))  :P"><a href="#t1471573742000321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:29:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(gen/return (byte-array (repeat 12 0)))</code><span> :P</span></div><div id="t1471573887000322" t="2016-08-19 02:31:27 lvh I do want them to be different; because Iâ€™m deriving keys, so seeing the value that got produced (if the inputs are different) tells me what really happened"><a href="#t1471573887000322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:31:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I do want them to be different; because Iâ€™m deriving keys, so seeing the value that got produced (if the inputs are different) tells me what really happened</span></div><div id="t1471573941000323" t="2016-08-19 02:32:21 lvh (opaquely, of course :))"><a href="#t1471573941000323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:32:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>(opaquely, of course :))</span></div><div id="t1471573997000324" t="2016-08-19 02:33:17 gfredericks ah"><a href="#t1471573997000324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:33:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ah</span></div><div id="t1471573998000325" t="2016-08-19 02:33:18 lvh I think I might go with the approach you suggested of just generating them separately; or using test.check to generate steps rather than doing the operations directly  ğŸ™‚"><a href="#t1471573998000325" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span>Â <span class="t" onclick="H(this)">02:33:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I think I might go with the approach you suggested of just generating them separately; or using test.check to generate steps rather than doing the operations directly </span><b>ğŸ™‚</b></div><div id="t1471995743000326" t="2016-08-23 23:42:23 gfredericks discussing parallelizing test.check on twitter is hard"><a href="#t1471995743000326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-23</span>Â <span class="t" onclick="H(this)">23:42:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>discussing parallelizing test.check on twitter is hard</span></div><div id="t1472008190000327" t="2016-08-24 03:09:50 alexmiller s/test.check/anything/"><a href="#t1472008190000327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-24</span>Â <span class="t" onclick="H(this)">03:09:50</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>s/test.check/anything/</span></div><div id="t1472490417000002" t="2016-08-29 17:06:57 lvh Is there something in test.check for producing equal-but-internally-different data structures? (Trying to check if a serialization format is deterministic)."><a href="#t1472490417000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">17:06:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>Is there something in test.check for producing equal-but-internally-different data structures? (Trying to check if a serialization format is deterministic).</span></div><div id="t1472497043000003" t="2016-08-29 18:57:23 lucasbradstreet @lvh where two data structures are equal but will serialize/deserialize to something equal but distinct? e.g. clojure maps and records can be equal, but a record should round trip back to a record"><a href="#t1472497043000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">18:57:23</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@lvh where two data structures are equal but will serialize/deserialize to something equal but distinct? e.g. clojure maps and records can be equal, but a record should round trip back to a record</span></div><div id="t1472497130000004" t="2016-08-29 18:58:50 lvh Oh, right â€” thatâ€™s a good point  ğŸ™‚"><a href="#t1472497130000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">18:58:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>Oh, right â€” thatâ€™s a good point </span><b>ğŸ™‚</b></div><div id="t1472497167000005" t="2016-08-29 18:59:27 lvh I guess Iâ€™m mostly thinking of issues like map key order or set order"><a href="#t1472497167000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">18:59:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I guess Iâ€™m mostly thinking of issues like map key order or set order</span></div><div id="t1472497348000006" t="2016-08-29 19:02:28 lucasbradstreet Ah. Those two are interesting although, at least in clojure, I donâ€™t think/donâ€™t count them as part of the contract"><a href="#t1472497348000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">19:02:28</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Ah. Those two are interesting although, at least in clojure, I donâ€™t think/donâ€™t count them as part of the contract</span></div><div id="t1472497407000007" t="2016-08-29 19:03:27 lucasbradstreet https://github.com/ztellman/collection-check  might be handy if youâ€™re interested in stuff like maps/sets/etc, though it wasnâ€™t really built for what you want"><a href="#t1472497407000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">19:03:27</span>Â Â Â Â Â lucasbradstreetÂ </span><a href="https://github.com/ztellman/collection-check" target="_blank">https://github.com/ztellman/collection-check</a><span> might be handy if youâ€™re interested in stuff like maps/sets/etc, though it wasnâ€™t really built for what you want</span></div><div id="t1472502188000009" t="2016-08-29 20:23:08 alexmiller maps and sets are not ordered - equality does not consider them (and there are no guarantees around it)"><a href="#t1472502188000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">20:23:08</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>maps and sets are not ordered - equality does not consider them (and there are no guarantees around it)</span></div><div id="t1472502853000010" t="2016-08-29 20:34:13 lucasbradstreet I remember from the google groups discussion that the order of keys and the order of vals, on an identical? map, are guaranteed to be in the same order, but that was it"><a href="#t1472502853000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">20:34:13</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I remember from the google groups discussion that the order of keys and the order of vals, on an identical? map, are guaranteed to be in the same order, but that was it</span></div><div id="t1472513088000011" t="2016-08-29 23:24:48 gfredericks @lvh I think if you could enumerate the sort of distinctions you&apos;re aiming at it wouldn&apos;t be hard to put together yourself "><a href="#t1472513088000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">23:24:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@lvh I think if you could enumerate the sort of distinctions you&apos;re aiming at it wouldn&apos;t be hard to put together yourself </span></div><div id="t1472513112000012" t="2016-08-29 23:25:12 gfredericks (defn gen-tweak &quot;Returns a generator of variants of x such that (= x x&apos;)&quot; [x] ...)"><a href="#t1472513112000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span>Â <span class="t" onclick="H(this)">23:25:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(defn gen-tweak &quot;Returns a generator of variants of x such that (= x x&apos;)&quot; [x] ...)</span></div><div id="t1472518635000013" t="2016-08-30 00:57:15 lvh Yeah; I was hoping that was implemented already because Iâ€™ll probably miss a bunch  ğŸ™‚"><a href="#t1472518635000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">00:57:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>Yeah; I was hoping that was implemented already because Iâ€™ll probably miss a bunch </span><b>ğŸ™‚</b></div><div id="t1472519061000014" t="2016-08-30 01:04:21 gfredericks it&apos;d be a weird thing to include, because it&apos;s open-ended and also inherently suspicious of clojure itself"><a href="#t1472519061000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:04:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;d be a weird thing to include, because it&apos;s open-ended and also inherently suspicious of clojure itself</span></div><div id="t1472519409000015" t="2016-08-30 01:10:09 lvh yeah"><a href="#t1472519409000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:10:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>yeah</span></div><div id="t1472519420000016" t="2016-08-30 01:10:20 lvh canonical serialization is desirable in a lot of cases though  ğŸ™‚"><a href="#t1472519420000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:10:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>canonical serialization is desirable in a lot of cases though </span><b>ğŸ™‚</b></div><div id="t1472519438000017" t="2016-08-30 01:10:38 lvh Fortunately I can mostly deal with just local storage, so I donâ€™t really need it"><a href="#t1472519438000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:10:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>Fortunately I can mostly deal with just local storage, so I donâ€™t really need it</span></div><div id="t1472519517000018" t="2016-08-30 01:11:57 gfredericks also it depends on clojure impl details"><a href="#t1472519517000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:11:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>also it depends on clojure impl details</span></div><div id="t1472519556000019" t="2016-08-30 01:12:36 lvh right; which is why I want it as a test and not as some manual verification"><a href="#t1472519556000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:12:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>right; which is why I want it as a test and not as some manual verification</span></div><div id="t1472519567000020" t="2016-08-30 01:12:47 lvh I want a computer to tell me when it stops being true before it matters  ğŸ™‚"><a href="#t1472519567000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:12:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I want a computer to tell me when it stops being true before it matters </span><b>ğŸ™‚</b></div><div id="t1472519732000021" t="2016-08-30 01:15:32 gfredericks feel free to add something to test.chuck"><a href="#t1472519732000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span>Â <span class="t" onclick="H(this)">01:15:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>feel free to add something to test.chuck</span></div><div id="t1472934769000002" t="2016-09-03 20:32:49 gfredericks writing a quickcheck is hard"><a href="#t1472934769000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-03</span>Â <span class="t" onclick="H(this)">20:32:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>writing a quickcheck is hard</span></div><div id="t1473105977000003" t="2016-09-05 20:06:17 lvh hm"><a href="#t1473105977000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:06:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>hm</span></div><div id="t1473106090000004" t="2016-09-05 20:08:10 lvh I have a seq of generators; Iâ€™d like a generator that concats the seqs; how do I do that while keeping shrinking?"><a href="#t1473106090000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:08:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>I have a seq of generators; Iâ€™d like a generator that concats the seqs; how do I do that while keeping shrinking?</span></div><div id="t1473106097000005" t="2016-09-05 20:08:17 lvh (IIUC sample would work, but would break shrinking.)"><a href="#t1473106097000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:08:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>(IIUC sample would work, but would break shrinking.)</span></div><div id="t1473106194000006" t="2016-09-05 20:09:54 lucasbradstreet Can you just do (gen/fmap #(reduce into [] %) (apply gen/tuple seq-of-generators)"><a href="#t1473106194000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:09:54</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Can you just do (gen/fmap #(reduce into [] %) (apply gen/tuple seq-of-generators)</span></div><div id="t1473106241000007" t="2016-09-05 20:10:41 lvh (I also just realized that I can just make the generator later; i.e. first compute the concatâ€™d thing, then chuck.gen/subsequence from that)"><a href="#t1473106241000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:10:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>(I also just realized that I can just make the generator later; i.e. first compute the concatâ€™d thing, then chuck.gen/subsequence from that)</span></div><div id="t1473106257000008" t="2016-09-05 20:10:57 lucasbradstreet Yeah, that would also work"><a href="#t1473106257000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:10:57</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, that would also work</span></div><div id="t1473106314000009" t="2016-09-05 20:11:54 lvh thanks  ğŸ™‚  that was stumping me until I wrote it out  ğŸ™‚"><a href="#t1473106314000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:11:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>thanks </span><b>ğŸ™‚</b><span> that was stumping me until I wrote it out </span><b>ğŸ™‚</b></div><div id="t1473106329000010" t="2016-09-05 20:12:09 lucasbradstreet :duck:"><a href="#t1473106329000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:12:09</span>Â Â Â Â Â lucasbradstreetÂ </span><b>:duck:</b></div><div id="t1473106354000011" t="2016-09-05 20:12:34 lvh exactly"><a href="#t1473106354000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-05</span>Â <span class="t" onclick="H(this)">20:12:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lvhÂ </span><span>exactly</span></div><div id="t1473971487000016" t="2016-09-15 20:31:27 aengelberg Is there a way to get a variant of  gen/any  that does not return  NaN ?"><a href="#t1473971487000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">20:31:27</span>Â Â Â Â Â Â Â Â Â Â aengelbergÂ </span><span>Is there a way to get a variant of </span><code>gen/any</code><span> that does not return </span><code>NaN</code><span>?</span></div><div id="t1473971569000017" t="2016-09-15 20:32:49 aengelberg My use case is that I want to do an operation on two different types of datastructures and verify that the two results are equal. The problem is that, when the outputs are structurally equal but both have  NaN  deeply nested inside of them,  =  will return false."><a href="#t1473971569000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">20:32:49</span>Â Â Â Â Â Â Â Â Â Â aengelbergÂ </span><span>My use case is that I want to do an operation on two different types of datastructures and verify that the two results are equal. The problem is that, when the outputs are structurally equal but both have </span><code>NaN</code><span> deeply nested inside of them, </span><code>=</code><span> will return false.</span></div><div id="t1473971642000018" t="2016-09-15 20:34:02 aengelberg So, the generator can&apos;t just not return NaN, I would need it to not return NaN at any level of nesting."><a href="#t1473971642000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">20:34:02</span>Â Â Â Â Â Â Â Â Â Â aengelbergÂ </span><span>So, the generator can&apos;t just not return NaN, I would need it to not return NaN at any level of nesting.</span></div><div id="t1473982133000019" t="2016-09-15 23:28:53 gfredericks man I needed that for test.check itself"><a href="#t1473982133000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:28:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>man I needed that for test.check itself</span></div><div id="t1473982148000020" t="2016-09-15 23:29:08 gfredericks I wonder what I did"><a href="#t1473982148000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:29:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I wonder what I did</span></div><div id="t1473982186000021" t="2016-09-15 23:29:46 gfredericks https://github.com/clojure/test.check/blob/master/src/test/clojure/clojure/test/check/test.cljc#L1083"><a href="#t1473982186000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:29:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://github.com/clojure/test.check/blob/master/src/test/clojure/clojure/test/check/test.cljc#L1083" target="_blank">https://github.com/clojure/test.check/blob/master/src/test/clojure/clojure/test/check/test.cljc#L1083</a></div><div id="t1473982212000023" t="2016-09-15 23:30:12 gfredericks looks like I used a custom recursive generator"><a href="#t1473982212000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:30:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>looks like I used a custom recursive generator</span></div><div id="t1473982376000024" t="2016-09-15 23:32:56 gfredericks It was oriented at edn which afaik can&apos;t handle infinities either"><a href="#t1473982376000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:32:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It was oriented at edn which afaik can&apos;t handle infinities either</span></div><div id="t1473982402000025" t="2016-09-15 23:33:22 gfredericks But NaN is pretty poisonous "><a href="#t1473982402000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:33:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But NaN is pretty poisonous </span></div><div id="t1473982426000026" t="2016-09-15 23:33:46 gfredericks You could add something to test.chuck if you&apos;d find that useful"><a href="#t1473982426000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-15</span>Â <span class="t" onclick="H(this)">23:33:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You could add something to test.chuck if you&apos;d find that useful</span></div><div id="t1474483144000028" t="2016-09-21 18:39:04 alexmiller @gfredericks curious if these failures are meaningful to you  http://dev.clojure.org/jira/browse/CLJ-2026"><a href="#t1474483144000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span>Â <span class="t" onclick="H(this)">18:39:04</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>@gfredericks curious if these failures are meaningful to you </span><a href="http://dev.clojure.org/jira/browse/CLJ-2026" target="_blank">http://dev.clojure.org/jira/browse/CLJ-2026</a></div><div id="t1474483156000029" t="2016-09-21 18:39:16 alexmiller in particular, if they are known things fixed since 0.9"><a href="#t1474483156000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-21</span>Â <span class="t" onclick="H(this)">18:39:16</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>in particular, if they are known things fixed since 0.9</span></div><div id="t1475170348000032" t="2016-09-29 17:32:28 ag hey guysâ€¦ does anyone know why 
 (defspec foo-test 100 
  (prop/for-all [m (s/gen ::bool-kv)] ,,, 

 is failing when run in clojurescript with lein-doo in phantomjs? throws this:
 ERROR in (foo-test) (clojure$test$check$"><a href="#t1475170348000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:32:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>hey guysâ€¦ does anyone know why 
</span><pre>(defspec foo-test 100 
  (prop/for-all [m (s/gen ::bool-kv)] ,,,</pre><span>

 is failing when run in clojurescript with lein-doo in phantomjs? throws this:
</span><pre>ERROR in (foo-test) (clojure$test$check$</pre></div><div id="t1475171651000035" t="2016-09-29 17:54:11 lucasbradstreet @ag my work mate had a similar problem to that and it was due to not requiring something"><a href="#t1475171651000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:54:11</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@ag my work mate had a similar problem to that and it was due to not requiring something</span></div><div id="t1475171668000036" t="2016-09-29 17:54:28 lucasbradstreet I was surprised that cljsbuild didnâ€™t warn about it"><a href="#t1475171668000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:54:28</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I was surprised that cljsbuild didnâ€™t warn about it</span></div><div id="t1475171680000037" t="2016-09-29 17:54:40 lucasbradstreet Your mileage may vary, but itâ€™s worth checking"><a href="#t1475171680000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:54:40</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Your mileage may vary, but itâ€™s worth checking</span></div><div id="t1475171718000038" t="2016-09-29 17:55:18 ag actually same code works when compiled javascript directly passed to karma (without using lein-doo)"><a href="#t1475171718000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:55:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>actually same code works when compiled javascript directly passed to karma (without using lein-doo)</span></div><div id="t1475171725000039" t="2016-09-29 17:55:25 ag I want to use lein-doo though"><a href="#t1475171725000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">17:55:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I want to use lein-doo though</span></div><div id="t1475172343000040" t="2016-09-29 18:05:43 lucasbradstreet Are they using different compiler modes? i.e. advanced vs none?"><a href="#t1475172343000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:05:43</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Are they using different compiler modes? i.e. advanced vs none?</span></div><div id="t1475172466000042" t="2016-09-29 18:07:46 ag it completely breaks with :simple.  java.lang.AssertionError: Assert failed: No file for namespace my-app.test-runner exists"><a href="#t1475172466000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:07:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>it completely breaks with :simple. </span><pre>java.lang.AssertionError: Assert failed: No file for namespace my-app.test-runner exists</pre></div><div id="t1475172549000043" t="2016-09-29 18:09:09 ag with :whitespace it fails with a different error:
 Error: Cannot find module &apos;function (f) {if(typeof exports===&quot;object&quot;&amp;&amp;typeof module!==&quot;undefined&quot;){module.exports=f()}else if(typeof define===&quot;function&quot;&amp;&amp;define.amd){define([],f)}else{var g;if(typeof window!==&quot;undefined&quot;){g=window}else if(typeof global!==&quot;undefined&quot;){g=global}else if(typeof self!==&quot;undefined&quot;){g=self}else{g=this}g.React = f()}}â€™
"><a href="#t1475172549000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:09:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>with :whitespace it fails with a different error:
</span><pre>Error: Cannot find module &apos;function (f) {if(typeof exports===&quot;object&quot;&amp;&amp;typeof module!==&quot;undefined&quot;){module.exports=f()}else if(typeof define===&quot;function&quot;&amp;&amp;define.amd){define([],f)}else{var g;if(typeof window!==&quot;undefined&quot;){g=window}else if(typeof global!==&quot;undefined&quot;){g=global}else if(typeof self!==&quot;undefined&quot;){g=self}else{g=this}g.React = f()}}â€™
</pre></div><div id="t1475172625000044" t="2016-09-29 18:10:25 lucasbradstreet Seems like a require error, but I donâ€™t know too much more"><a href="#t1475172625000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:10:25</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Seems like a require error, but I donâ€™t know too much more</span></div><div id="t1475172695000045" t="2016-09-29 18:11:35 ag I have created issue  https://github.com/bensu/doo/issues/118"><a href="#t1475172695000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:11:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I have created issue </span><a href="https://github.com/bensu/doo/issues/118" target="_blank">https://github.com/bensu/doo/issues/118</a></div><div id="t1475172805000048" t="2016-09-29 18:13:25 lucasbradstreet I think itâ€™s quite likely not to be a doo error"><a href="#t1475172805000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:13:25</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I think itâ€™s quite likely not to be a doo error</span></div><div id="t1475172873000049" t="2016-09-29 18:14:33 lucasbradstreet Try requiring clojure.test.check.generators"><a href="#t1475172873000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:14:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Try requiring clojure.test.check.generators</span></div><div id="t1475172901000050" t="2016-09-29 18:15:01 lucasbradstreet Possibly shouldnâ€™t need to, but I think it might be a bug in the cljs compiler if itâ€™s not warning about it"><a href="#t1475172901000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:15:01</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Possibly shouldnâ€™t need to, but I think it might be a bug in the cljs compiler if itâ€™s not warning about it</span></div><div id="t1475173000000052" t="2016-09-29 18:16:40 ag still the same  ğŸ˜"><a href="#t1475173000000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:16:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>still the same </span><b>ğŸ˜</b></div><div id="t1475173019000053" t="2016-09-29 18:16:59 lucasbradstreet I asked my co-worker and his was clojure.test.check.properties"><a href="#t1475173019000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:16:59</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I asked my co-worker and his was clojure.test.check.properties</span></div><div id="t1475173044000054" t="2016-09-29 18:17:24 ag I do have that require"><a href="#t1475173044000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:17:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I do have that require</span></div><div id="t1475173047000055" t="2016-09-29 18:17:27 ag [clojure.test.check.properties :as prop]"><a href="#t1475173047000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:17:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><code>[clojure.test.check.properties :as prop]</code></div><div id="t1475173105000056" t="2016-09-29 18:18:25 lucasbradstreet OK, Iâ€™ve got nothing then  ğŸ™‚"><a href="#t1475173105000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:18:25</span>Â Â Â Â Â lucasbradstreetÂ </span><span>OK, Iâ€™ve got nothing then </span><b>ğŸ™‚</b></div><div id="t1475173175000057" t="2016-09-29 18:19:35 ag so Iâ€™m wondering if it has something to do with how I require clojure.spec.generators?"><a href="#t1475173175000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:19:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>so Iâ€™m wondering if it has something to do with how I require clojure.spec.generators?</span></div><div id="t1475173244000058" t="2016-09-29 18:20:44 ag so hereâ€™s the thing to require clojure spec, in clojurescript you can either do  require &apos;[cljs.spec,,,  or  require &apos;[clojure.spec,,,"><a href="#t1475173244000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:20:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>so hereâ€™s the thing to require clojure spec, in clojurescript you can either do </span><code>require &apos;[cljs.spec,,,</code><span> or </span><code>require &apos;[clojure.spec,,,</code></div><div id="t1475173258000059" t="2016-09-29 18:20:58 ag but when it comes to generators itâ€™s not that smart"><a href="#t1475173258000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:20:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>but when it comes to generators itâ€™s not that smart</span></div><div id="t1475173277000060" t="2016-09-29 18:21:17 ag you canâ€™t do  require &apos;[clojure.spec.generators]"><a href="#t1475173277000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:21:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>you canâ€™t do </span><code>require &apos;[clojure.spec.generators]</code></div><div id="t1475173289000061" t="2016-09-29 18:21:29 lucasbradstreet Maybe"><a href="#t1475173289000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:21:29</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Maybe</span></div><div id="t1475173305000062" t="2016-09-29 18:21:45 ag I found a way to include them like this  [cljs.spec.impl.gen :as gen]"><a href="#t1475173305000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:21:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I found a way to include them like this </span><code>[cljs.spec.impl.gen :as gen]</code></div><div id="t1475173316000063" t="2016-09-29 18:21:56 ag but maybe thatâ€™s not completely right?"><a href="#t1475173316000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:21:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>but maybe thatâ€™s not completely right?</span></div><div id="t1475173348000064" t="2016-09-29 18:22:28 ag but then why the same code compiled and run outside of doo works fine?"><a href="#t1475173348000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-29</span>Â <span class="t" onclick="H(this)">18:22:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>but then why the same code compiled and run outside of doo works fine?</span></div><div id="t1475259275000066" t="2016-09-30 18:14:35 liamd i was wondering how to write good properties for property based testing"><a href="#t1475259275000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">18:14:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â liamdÂ </span><span>i was wondering how to write good properties for property based testing</span></div><div id="t1475259291000067" t="2016-09-30 18:14:51 liamd for instance i have this function:
 (defn pixel-&gt;tile [position tile-size]
  {:x (Math/floor (/ (:x position) tile-size))
   :y (Math/floor (/ (:y position) tile-size))})
"><a href="#t1475259291000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">18:14:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â liamdÂ </span><span>for instance i have this function:
</span><pre>(defn pixel-&gt;tile [position tile-size]
  {:x (Math/floor (/ (:x position) tile-size))
   :y (Math/floor (/ (:y position) tile-size))})
</pre></div><div id="t1475259299000068" t="2016-09-30 18:14:59 liamd which is pretty simple"><a href="#t1475259299000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">18:14:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â liamdÂ </span><span>which is pretty simple</span></div><div id="t1475259350000069" t="2016-09-30 18:15:50 liamd i suppose iâ€™d want to check that the output is non-nil and &gt; 0? but that doesnâ€™t seem to ensure the logic of it"><a href="#t1475259350000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">18:15:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â liamdÂ </span><span>i suppose iâ€™d want to check that the output is non-nil and &gt; 0? but that doesnâ€™t seem to ensure the logic of it</span></div><div id="t1475259356000070" t="2016-09-30 18:15:56 liamd is this too simple for property based testing?"><a href="#t1475259356000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">18:15:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â liamdÂ </span><span>is this too simple for property based testing?</span></div><div id="t1475267096000071" t="2016-09-30 20:24:56 lucasbradstreet Itâ€™s a pretty simple function, so it might be hard to come up with something much better. You could check whether the returned x is &lt;= to the position x"><a href="#t1475267096000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">20:24:56</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Itâ€™s a pretty simple function, so it might be hard to come up with something much better. You could check whether the returned x is &lt;= to the position x</span></div><div id="t1475273857000072" t="2016-09-30 22:17:37 gfredericks you could probably come up with a distance-scaling property"><a href="#t1475273857000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">22:17:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could probably come up with a distance-scaling property</span></div><div id="t1475273874000073" t="2016-09-30 22:17:54 gfredericks a relationship between (distance p1 p2) and (distance (f p1) (f p2))"><a href="#t1475273874000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">22:17:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a relationship between (distance p1 p2) and (distance (f p1) (f p2))</span></div><div id="t1475273915000074" t="2016-09-30 22:18:35 gfredericks or more generally the 2d-vector representing the offset between them"><a href="#t1475273915000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-09-30</span>Â <span class="t" onclick="H(this)">22:18:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>or more generally the 2d-vector representing the offset between them</span></div><div id="t1475334956000075" t="2016-10-01 15:15:56 gfredericks another idea: &quot;adjacent pixels are mapped to the same or adjacent tiles&quot;"><a href="#t1475334956000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-01</span>Â <span class="t" onclick="H(this)">15:15:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>another idea: &quot;adjacent pixels are mapped to the same or adjacent tiles&quot;</span></div><div id="t1477320340000081" t="2016-10-24 14:45:40 nwjsmith Has anyone had experience adding &apos;famous&apos; examples to their test.check runs?"><a href="#t1477320340000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">14:45:40</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Has anyone had experience adding &apos;famous&apos; examples to their test.check runs?</span></div><div id="t1477320423000082" t="2016-10-24 14:47:03 nwjsmith I think it would be valuable for regression testing, but I suppose that&apos;s what clojure.test is for."><a href="#t1477320423000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">14:47:03</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I think it would be valuable for regression testing, but I suppose that&apos;s what clojure.test is for.</span></div><div id="t1477322918000083" t="2016-10-24 15:28:38 hiredman I think the same thing that would let you do that, also makes it easier to run you test over and over again with a given set of inputs if you do hit a failure, which is useful when you do find a failure"><a href="#t1477322918000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">15:28:38</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>I think the same thing that would let you do that, also makes it easier to run you test over and over again with a given set of inputs if you do hit a failure, which is useful when you do find a failure</span></div><div id="t1477322961000084" t="2016-10-24 15:29:21 hiredman the way to do that, I think, is to have your, uh, assertions, as separate functions"><a href="#t1477322961000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">15:29:21</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>the way to do that, I think, is to have your, uh, assertions, as separate functions</span></div><div id="t1477322981000085" t="2016-10-24 15:29:41 hiredman which you can call from properties or other tests"><a href="#t1477322981000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">15:29:41</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>which you can call from properties or other tests</span></div><div id="t1477323085000086" t="2016-10-24 15:31:25 nwjsmith That would work"><a href="#t1477323085000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">15:31:25</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>That would work</span></div><div id="t1477323362000087" t="2016-10-24 15:36:02 nwjsmith I&apos;m experimenting with using spec/test.check to do TDD. It&apos;s proving more challenging than I thought it would be. Often it&apos;s easier to come up with an example than a property/invariant."><a href="#t1477323362000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">15:36:02</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;m experimenting with using spec/test.check to do TDD. It&apos;s proving more challenging than I thought it would be. Often it&apos;s easier to come up with an example than a property/invariant.</span></div><div id="t1477334614000088" t="2016-10-24 18:43:34 gfredericks writing properties takes practice"><a href="#t1477334614000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">18:43:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>writing properties takes practice</span></div><div id="t1477334632000089" t="2016-10-24 18:43:52 gfredericks &quot;I don&apos;t know what properties to write&quot; is a common problem people run into at first"><a href="#t1477334632000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">18:43:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&quot;I don&apos;t know what properties to write&quot; is a common problem people run into at first</span></div><div id="t1477334727000090" t="2016-10-24 18:45:27 alexmiller the only hard parts of property testing are the generators and the properties"><a href="#t1477334727000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">18:45:27</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>the only hard parts of property testing are the generators and the properties</span></div><div id="t1477334747000091" t="2016-10-24 18:45:47 alexmiller ;)"><a href="#t1477334747000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">18:45:47</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>;)</span></div><div id="t1477335412000092" t="2016-10-24 18:56:52 nwjsmith I better get practicing then  ğŸ™‚  Hopefully in a few years, there will be much more guidance on how to do property-based testing. There&apos;s so much out there on example-based now."><a href="#t1477335412000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-24</span>Â <span class="t" onclick="H(this)">18:56:52</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I better get practicing then </span><b>ğŸ™‚</b><span> Hopefully in a few years, there will be much more guidance on how to do property-based testing. There&apos;s so much out there on example-based now.</span></div><div id="t1477575100000095" t="2016-10-27 13:31:40 Yehonathan Sharvit https://twitter.com/viebel/status/791633195016003584"><a href="#t1477575100000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">13:31:40</span>Â Â Yehonathan SharvitÂ </span><a href="https://twitter.com/viebel/status/791633195016003584" target="_blank">https://twitter.com/viebel/status/791633195016003584</a></div><div id="t1477575132000097" t="2016-10-27 13:32:12 Yehonathan Sharvit what do you guys think of this interactive tutorial? Did you learn something about  test.check ?"><a href="#t1477575132000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">13:32:12</span>Â Â Yehonathan SharvitÂ </span><span>what do you guys think of this interactive tutorial? Did you learn something about </span><code>test.check</code><span>?</span></div><div id="t1477576008000098" t="2016-10-27 13:46:48 lucasbradstreet @viebel: oh sweet!  :+1: I&apos;ll give it a go when I get home and will let you know if I have any comments "><a href="#t1477576008000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">13:46:48</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@viebel: oh sweet! </span><b>:+1:</b><span>I&apos;ll give it a go when I get home and will let you know if I have any comments </span></div><div id="t1477576091000099" t="2016-10-27 13:48:11 Yehonathan Sharvit @lucasbradstreet  Itâ€™s kind of the same idea as the onyx tutorial @michaeldrogalis shared on #onyx but it has much more content. Itâ€™s all about Code Interactivity in the browser."><a href="#t1477576091000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">13:48:11</span>Â Â Yehonathan SharvitÂ </span><span>@lucasbradstreet  Itâ€™s kind of the same idea as the onyx tutorial @michaeldrogalis shared on #onyx but it has much more content. Itâ€™s all about Code Interactivity in the browser.</span></div><div id="t1477596721000100" t="2016-10-27 19:32:01 Yehonathan Sharvit @lucasbradstreet test.check official doc with klipse will look like this"><a href="#t1477596721000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">19:32:01</span>Â Â Yehonathan SharvitÂ </span><span>@lucasbradstreet test.check official doc with klipse will look like this</span></div><div id="t1477596740000101" t="2016-10-27 19:32:20 Yehonathan Sharvit https://viebel.github.io/klipse/examples/test.check/doc/generator-examples.html 

 https://viebel.github.io/klipse/examples/test.check/doc/clojure.test.check.html#var-quick-check"><a href="#t1477596740000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span>Â <span class="t" onclick="H(this)">19:32:20</span>Â Â Yehonathan SharvitÂ </span><a href="https://viebel.github.io/klipse/examples/test.check/doc/generator-examples.html" target="_blank">https://viebel.github.io/klipse/examples/test.check/doc/generator-examples.html</a><span>

</span><a href="https://viebel.github.io/klipse/examples/test.check/doc/clojure.test.check.html#var-quick-check" target="_blank">https://viebel.github.io/klipse/examples/test.check/doc/clojure.test.check.html#var-quick-check</a></div><div id="t1477635303000102" t="2016-10-28 06:15:03 lucasbradstreet @viebel so great!"><a href="#t1477635303000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">06:15:03</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@viebel so great!</span></div><div id="t1477635347000103" t="2016-10-28 06:15:47 Yehonathan Sharvit @lucasbradstreet  which one? the blog post or the interactive doc?"><a href="#t1477635347000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">06:15:47</span>Â Â Yehonathan SharvitÂ </span><span>@lucasbradstreet  which one? the blog post or the interactive doc?</span></div><div id="t1477635573000105" t="2016-10-28 06:19:33 lucasbradstreet Both are great. I love the docs versions with inline testable examples though. I want it everywhere  ğŸ˜„"><a href="#t1477635573000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">06:19:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Both are great. I love the docs versions with inline testable examples though. I want it everywhere </span><b>ğŸ˜„</b></div><div id="t1477635691000106" t="2016-10-28 06:21:31 lucasbradstreet In the example where the property is incorrect i.e. 
(let [s (sort v)]
  (&lt; (first s) (last s)))))
it might be useful to say that both properties and the code they test can be incorrect. Usually youâ€™re trying to start from a correct property and find a bug in your code, but sometimes your code ends up testing your properties instead. Iâ€™m not sure how obvious itâ€™ll be to a new user"><a href="#t1477635691000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">06:21:31</span>Â Â Â Â Â lucasbradstreetÂ </span><span>In the example where the property is incorrect i.e. 
(let [s (sort v)]
  (&lt; (first s) (last s)))))
it might be useful to say that both properties and the code they test can be incorrect. Usually youâ€™re trying to start from a correct property and find a bug in your code, but sometimes your code ends up testing your properties instead. Iâ€™m not sure how obvious itâ€™ll be to a new user</span></div><div id="t1477656881000107" t="2016-10-28 12:14:41 Yehonathan Sharvit good input"><a href="#t1477656881000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">12:14:41</span>Â Â Yehonathan SharvitÂ </span><span>good input</span></div><div id="t1477656889000108" t="2016-10-28 12:14:49 Yehonathan Sharvit how would you fix it @lucasbradstreet ?"><a href="#t1477656889000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">12:14:49</span>Â Â Yehonathan SharvitÂ </span><span>how would you fix it @lucasbradstreet ?</span></div><div id="t1477656981000109" t="2016-10-28 12:16:21 Yehonathan Sharvit @lucasbradstreet you can live interactive doc with the codox klipse  theme. Itâ€™s super easy to integrate in any lib that is cljs ported"><a href="#t1477656981000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">12:16:21</span>Â Â Yehonathan SharvitÂ </span><span>@lucasbradstreet you can live interactive doc with the codox klipse  theme. Itâ€™s super easy to integrate in any lib that is cljs ported</span></div><div id="t1477656996000110" t="2016-10-28 12:16:36 Yehonathan Sharvit https://github.com/viebel/codox-klipse-theme"><a href="#t1477656996000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-28</span>Â <span class="t" onclick="H(this)">12:16:36</span>Â Â Yehonathan SharvitÂ </span><a href="https://github.com/viebel/codox-klipse-theme" target="_blank">https://github.com/viebel/codox-klipse-theme</a></div><div id="t1478380741000116" t="2016-11-05 21:19:01 gfredericks I&apos;m messing around with a protocol for returning data with a trial:  https://github.com/clojure/test.check/commit/a7860f25a4d6755e71d5fc13907279e16059c1f5"><a href="#t1478380741000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-05</span>Â <span class="t" onclick="H(this)">21:19:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m messing around with a protocol for returning data with a trial: </span><a href="https://github.com/clojure/test.check/commit/a7860f25a4d6755e71d5fc13907279e16059c1f5" target="_blank">https://github.com/clojure/test.check/commit/a7860f25a4d6755e71d5fc13907279e16059c1f5</a></div><div id="t1478636318000117" t="2016-11-08 20:18:38 mattly is there any way to tell test.check to give up and just show me the smallest failing result so far after a certain number of iterations?"><a href="#t1478636318000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">20:18:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>is there any way to tell test.check to give up and just show me the smallest failing result so far after a certain number of iterations?</span></div><div id="t1478636337000118" t="2016-11-08 20:18:57 mattly I&apos;ve got one failure that I&apos;m having a really hard time tracking down, but it&apos;ll run for 100k iterations without settling"><a href="#t1478636337000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">20:18:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;ve got one failure that I&apos;m having a really hard time tracking down, but it&apos;ll run for 100k iterations without settling</span></div><div id="t1478640558000119" t="2016-11-08 21:29:18 gfredericks @mattly there are a couple tickets surrounding that"><a href="#t1478640558000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:29:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly there are a couple tickets surrounding that</span></div><div id="t1478640610000120" t="2016-11-08 21:30:10 gfredericks @mattly there is also a callback function you can register on the master branch, that would let you &quot;listen&quot; for things as it&apos;s shrinking"><a href="#t1478640610000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:30:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly there is also a callback function you can register on the master branch, that would let you &quot;listen&quot; for things as it&apos;s shrinking</span></div><div id="t1478640674000121" t="2016-11-08 21:31:14 gfredericks there&apos;s a ticket for a max-shrink-time option, and for capturing C-c interruptions and returning the smallest value so far"><a href="#t1478640674000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:31:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a ticket for a max-shrink-time option, and for capturing C-c interruptions and returning the smallest value so far</span></div><div id="t1478640694000122" t="2016-11-08 21:31:34 gfredericks I think the latter one is hairy though so I don&apos;t know if it will get implemented :/"><a href="#t1478640694000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:31:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the latter one is hairy though so I don&apos;t know if it will get implemented :/</span></div><div id="t1478640755000123" t="2016-11-08 21:32:35 gfredericks C-c  would probably be the most useful, so if it turns out to be straightforward I would love to add it"><a href="#t1478640755000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:32:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>C-c</code><span> would probably be the most useful, so if it turns out to be straightforward I would love to add it</span></div><div id="t1478640802000124" t="2016-11-08 21:33:22 gfredericks if it&apos;s hairy it&apos;s probably because of varying details in different repls vs. unix signals when running test processes and that sort of thing"><a href="#t1478640802000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:33:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if it&apos;s hairy it&apos;s probably because of varying details in different repls vs. unix signals when running test processes and that sort of thing</span></div><div id="t1478641898000125" t="2016-11-08 21:51:38 mattly oh fun"><a href="#t1478641898000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-08</span>Â <span class="t" onclick="H(this)">21:51:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>oh fun</span></div><div id="t1478680346000126" t="2016-11-09 08:32:26 lucasbradstreet max-shrink-time would be nice. I sometimes resort to dumping the first shrink and then manually shrinking it via other strategies for some of my tests. The callback function would be awesome though - even selectively printing the failures as it shrinks would be helpful"><a href="#t1478680346000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">08:32:26</span>Â Â Â Â Â lucasbradstreetÂ </span><span>max-shrink-time would be nice. I sometimes resort to dumping the first shrink and then manually shrinking it via other strategies for some of my tests. The callback function would be awesome though - even selectively printing the failures as it shrinks would be helpful</span></div><div id="t1478697611000127" t="2016-11-09 13:20:11 gfredericks I figured max-shrink time would be useful for CI"><a href="#t1478697611000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:20:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I figured max-shrink time would be useful for CI</span></div><div id="t1478697655000128" t="2016-11-09 13:20:55 lucasbradstreet Absolutely"><a href="#t1478697655000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:20:55</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Absolutely</span></div><div id="t1478697681000129" t="2016-11-09 13:21:21 lucasbradstreet Even just printing the seed before a shrink would be helpful, to be honest."><a href="#t1478697681000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:21:21</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Even just printing the seed before a shrink would be helpful, to be honest.</span></div><div id="t1478697711000130" t="2016-11-09 13:21:51 lucasbradstreet Or giving us a way to do so. The callback idea would work though."><a href="#t1478697711000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:21:51</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Or giving us a way to do so. The callback idea would work though.</span></div><div id="t1478698402000131" t="2016-11-09 13:33:22 gfredericks Well the callback is already implemented  simple_smile  "><a href="#t1478698402000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:33:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Well the callback is already implemented </span><b>simple_smile</b><span> </span></div><div id="t1478698710000132" t="2016-11-09 13:38:30 lucasbradstreet Looking forward to trying it"><a href="#t1478698710000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-09</span>Â <span class="t" onclick="H(this)">13:38:30</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Looking forward to trying it</span></div><div id="t1478843849000133" t="2016-11-11 05:57:29 mattly I have a wrapper around test.chuck&apos;s  checking  that prints iteration count as it goes solely to prevent CI from timing out  ğŸ˜„"><a href="#t1478843849000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span>Â <span class="t" onclick="H(this)">05:57:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I have a wrapper around test.chuck&apos;s </span><code>checking</code><span> that prints iteration count as it goes solely to prevent CI from timing out </span><b>ğŸ˜„</b></div><div id="t1478843861000134" t="2016-11-11 05:57:41 mattly well, and a nice guide for me"><a href="#t1478843861000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span>Â <span class="t" onclick="H(this)">05:57:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>well, and a nice guide for me</span></div><div id="t1478863460000135" t="2016-11-11 11:24:20 lucasbradstreet Cool"><a href="#t1478863460000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span>Â <span class="t" onclick="H(this)">11:24:20</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Cool</span></div><div id="t1478874064000136" t="2016-11-11 14:21:04 gfredericks ha"><a href="#t1478874064000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span>Â <span class="t" onclick="H(this)">14:21:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ha</span></div><div id="t1478874079000137" t="2016-11-11 14:21:19 gfredericks I hadn&apos;t thought about a CI that times out only when you stop printing"><a href="#t1478874079000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-11</span>Â <span class="t" onclick="H(this)">14:21:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I hadn&apos;t thought about a CI that times out only when you stop printing</span></div><div id="t1479127355000138" t="2016-11-14 12:42:35 gfredericks I&apos;m trying to figure out if  prop/for-all  could be changed to support  clojure.test  assertions without breaking anything"><a href="#t1479127355000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">12:42:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m trying to figure out if </span><code>prop/for-all</code><span> could be changed to support </span><code>clojure.test</code><span> assertions without breaking anything</span></div><div id="t1479127372000139" t="2016-11-14 12:42:52 gfredericks either all the time, or only when using  defspec  (not sure which of those is better to aim for)"><a href="#t1479127372000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">12:42:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>either all the time, or only when using </span><code>defspec</code><span> (not sure which of those is better to aim for)</span></div><div id="t1479128204000140" t="2016-11-14 12:56:44 nberger That would be awesome. At first glance I&apos;d say that having it in  defspec  and providing an easy way to use it when not in  defspec  should be enough"><a href="#t1479128204000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">12:56:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>That would be awesome. At first glance I&apos;d say that having it in </span><code>defspec</code><span> and providing an easy way to use it when not in </span><code>defspec</code><span> should be enough</span></div><div id="t1479128660000141" t="2016-11-14 13:04:20 gfredericks I was hoping to make it just start working, without adding any new functions/macros"><a href="#t1479128660000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:04:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I was hoping to make it just start working, without adding any new functions/macros</span></div><div id="t1479128686000142" t="2016-11-14 13:04:46 gfredericks i.e., if you put assertions in the body of your  prop/for-all , it bases pass/failure on that instead of the expression return value"><a href="#t1479128686000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:04:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., if you put assertions in the body of your </span><code>prop/for-all</code><span>, it bases pass/failure on that instead of the expression return value</span></div><div id="t1479128744000143" t="2016-11-14 13:05:44 gfredericks if new functions/macros are okay, then just adding a  clojure.test.check.clojure-test/for-all  would work"><a href="#t1479128744000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:05:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if new functions/macros are okay, then just adding a </span><code>clojure.test.check.clojure-test/for-all</code><span> would work</span></div><div id="t1479128864000144" t="2016-11-14 13:07:44 gfredericks actually I just thought about it a bit, and the edge cases involved in having both behaviors in the same macro are kind of nasty"><a href="#t1479128864000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:07:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>actually I just thought about it a bit, and the edge cases involved in having both behaviors in the same macro are kind of nasty</span></div><div id="t1479128906000145" t="2016-11-14 13:08:26 gfredericks edge cases meaning how things play out if you accidentally do or don&apos;t include assertions"><a href="#t1479128906000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:08:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>edge cases meaning how things play out if you accidentally do or don&apos;t include assertions</span></div><div id="t1479128924000146" t="2016-11-14 13:08:44 gfredericks I may have just talked myself out of it"><a href="#t1479128924000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-14</span>Â <span class="t" onclick="H(this)">13:08:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I may have just talked myself out of it</span></div><div id="t1479212892000147" t="2016-11-15 12:28:12 gfredericks @nberger I&apos;m curious if there&apos;s a cleaner way to implement statistics using this:  https://github.com/clojure/test.check/commit/4450152532eeaace449ca9241673428a19448eba"><a href="#t1479212892000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:28:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nberger I&apos;m curious if there&apos;s a cleaner way to implement statistics using this: </span><a href="https://github.com/clojure/test.check/commit/4450152532eeaace449ca9241673428a19448eba" target="_blank">https://github.com/clojure/test.check/commit/4450152532eeaace449ca9241673428a19448eba</a></div><div id="t1479213234000148" t="2016-11-15 12:33:54 nberger @gfredericks I think so. I&apos;ll play with it in the next few days. I already started rebasing the stats branch to the current master, playing with this will be my next task"><a href="#t1479213234000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:33:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks I think so. I&apos;ll play with it in the next few days. I already started rebasing the stats branch to the current master, playing with this will be my next task</span></div><div id="t1479213773000149" t="2016-11-15 12:42:53 nberger but not &quot;as is&quot;: we need a way to carry the labels over the quick check loop, but result is not passed over on passing trials (neither to the recur or to the  reporter-fn :trial ). I&apos;m looking at  https://github.com/clojure/test.check/blob/4450152532eeaace449ca9241673428a19448eba/src/main/clojure/clojure/test/check.cljc#L101-L105"><a href="#t1479213773000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:42:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>but not &quot;as is&quot;: we need a way to carry the labels over the quick check loop, but result is not passed over on passing trials (neither to the recur or to the </span><code>reporter-fn :trial</code><span>). I&apos;m looking at </span><a href="https://github.com/clojure/test.check/blob/4450152532eeaace449ca9241673428a19448eba/src/main/clojure/clojure/test/check.cljc#L101-L105" target="_blank">https://github.com/clojure/test.check/blob/4450152532eeaace449ca9241673428a19448eba/src/main/clojure/clojure/test/check.cljc#L101-L105</a></div><div id="t1479213964000151" t="2016-11-15 12:46:04 nberger We especially need to pass it in some way in that recur call. But passing  result  doesn&apos;t make much sense to me"><a href="#t1479213964000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:46:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>We especially need to pass it in some way in that recur call. But passing </span><code>result</code><span> doesn&apos;t make much sense to me</span></div><div id="t1479214078000152" t="2016-11-15 12:47:58 gfredericks right"><a href="#t1479214078000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:47:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>right</span></div><div id="t1479214102000153" t="2016-11-15 12:48:22 gfredericks it might not make any sense"><a href="#t1479214102000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:48:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it might not make any sense</span></div><div id="t1479214108000154" t="2016-11-15 12:48:28 gfredericks just struck me as a somewhat overlapping bit of functionality"><a href="#t1479214108000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:48:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>just struck me as a somewhat overlapping bit of functionality</span></div><div id="t1479214131000155" t="2016-11-15 12:48:51 nberger yeah"><a href="#t1479214131000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:48:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>yeah</span></div><div id="t1479214783000156" t="2016-11-15 12:59:43 nberger @gfredericks have you thought of turning the quickcheck loop into a reduce, where some &quot;bigger&quot; state is carried over, including the rng-state, the labels, test count... well all the state that is passed over in the recur but in a way that it would be easier to add stuff like the stats labels?"><a href="#t1479214783000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">12:59:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks have you thought of turning the quickcheck loop into a reduce, where some &quot;bigger&quot; state is carried over, including the rng-state, the labels, test count... well all the state that is passed over in the recur but in a way that it would be easier to add stuff like the stats labels?</span></div><div id="t1479215123000157" t="2016-11-15 13:05:23 nberger I&apos;ve been thinking around that idea for some time, but never got to play with it. At first sight seems like it should work.
I think haskell&apos;s quickcheck works that way, I&apos;m looking at  https://github.com/nick8325/quickcheck/blob/master/Test/QuickCheck/Property.hs#L370 . Even though my haskell fu is very limited, and that the function is called  mapTotalResult , I think it&apos;s a reduce  ğŸ™‚"><a href="#t1479215123000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">13:05:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I&apos;ve been thinking around that idea for some time, but never got to play with it. At first sight seems like it should work.
I think haskell&apos;s quickcheck works that way, I&apos;m looking at </span><a href="https://github.com/nick8325/quickcheck/blob/master/Test/QuickCheck/Property.hs#L370" target="_blank">https://github.com/nick8325/quickcheck/blob/master/Test/QuickCheck/Property.hs#L370</a><span>. Even though my haskell fu is very limited, and that the function is called </span><code>mapTotalResult</code><span>, I think it&apos;s a reduce </span><b>ğŸ™‚</b></div><div id="t1479215234000159" t="2016-11-15 13:07:14 nberger For anyone wondering what statistics are we talking about, it&apos;s on  http://dev.clojure.org/jira/browse/TCHECK-87"><a href="#t1479215234000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">13:07:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>For anyone wondering what statistics are we talking about, it&apos;s on </span><a href="http://dev.clojure.org/jira/browse/TCHECK-87" target="_blank">http://dev.clojure.org/jira/browse/TCHECK-87</a></div><div id="t1479215287000160" t="2016-11-15 13:08:07 gfredericks I was monkeying with the quickcheck loop when I was trying to do parallel tests"><a href="#t1479215287000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">13:08:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I was monkeying with the quickcheck loop when I was trying to do parallel tests</span></div><div id="t1479215300000161" t="2016-11-15 13:08:20 gfredericks which changes the linearity of the reduce"><a href="#t1479215300000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">13:08:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which changes the linearity of the reduce</span></div><div id="t1479215309000162" t="2016-11-15 13:08:29 gfredericks but I think it is a reduce, yeah"><a href="#t1479215309000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-15</span>Â <span class="t" onclick="H(this)">13:08:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but I think it is a reduce, yeah</span></div><div id="t1479389597000163" t="2016-11-17 13:33:17 nberger @gfredericks I just uploaded an updated patch for TCHECK-87 which is basically the old patch rebased to the current master + some polishing. Definitely not a final patch but in a better shape to experiment with it. And here&apos;s a nice diff:  https://github.com/clojure/test.check/compare/master...nberger:stats-generator   ğŸ™‚"><a href="#t1479389597000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span>Â <span class="t" onclick="H(this)">13:33:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks I just uploaded an updated patch for TCHECK-87 which is basically the old patch rebased to the current master + some polishing. Definitely not a final patch but in a better shape to experiment with it. And here&apos;s a nice diff: </span><a href="https://github.com/clojure/test.check/compare/master...nberger:stats-generator" target="_blank">https://github.com/clojure/test.check/compare/master...nberger:stats-generator</a><span> </span><b>ğŸ™‚</b></div><div id="t1479390229000165" t="2016-11-17 13:43:49 gfredericks @nberger you&apos;re not coming to the conj, are you? "><a href="#t1479390229000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span>Â <span class="t" onclick="H(this)">13:43:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nberger you&apos;re not coming to the conj, are you? </span></div><div id="t1479392812000166" t="2016-11-17 14:26:52 nberger @gfredericks I don&apos;t think so..."><a href="#t1479392812000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span>Â <span class="t" onclick="H(this)">14:26:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks I don&apos;t think so...</span></div><div id="t1479399755000167" t="2016-11-17 16:22:35 gfredericks :/"><a href="#t1479399755000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-17</span>Â <span class="t" onclick="H(this)">16:22:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>:/</span></div><div id="t1479733113000168" t="2016-11-21 12:58:33 gfredericks just added the result-data feature to master:  https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179"><a href="#t1479733113000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">12:58:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>just added the result-data feature to master: </span><a href="https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179" target="_blank">https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179</a></div><div id="t1479733284000169" t="2016-11-21 13:01:24 gfredericks @alexmiller â‡‘ that should allow clojure.spec to not need to wrap failure data in an exception"><a href="#t1479733284000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">13:01:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller â‡‘ that should allow clojure.spec to not need to wrap failure data in an exception</span></div><div id="t1479733642000170" t="2016-11-21 13:07:22 gfredericks actually taking advantage of that would mean that clojure.spec requires the next release of test.check; so I&apos;m curious A) if that&apos;s reasonable, and B) if so, whether it&apos;s time for me to start panicking about finishing a test.check release before clojure-1.9 is ready"><a href="#t1479733642000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">13:07:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>actually taking advantage of that would mean that clojure.spec requires the next release of test.check; so I&apos;m curious A) if that&apos;s reasonable, and B) if so, whether it&apos;s time for me to start panicking about finishing a test.check release before clojure-1.9 is ready</span></div><div id="t1479738627000171" t="2016-11-21 14:30:27 alexmiller to be discussed"><a href="#t1479738627000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">14:30:27</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>to be discussed</span></div><div id="t1479738691000172" t="2016-11-21 14:31:31 alexmiller Iâ€™m working hard on the build server right now, hoping to get it up to the point where I can actually build test.check normally again"><a href="#t1479738691000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">14:31:31</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Iâ€™m working hard on the build server right now, hoping to get it up to the point where I can actually build test.check normally again</span></div><div id="t1479738710000173" t="2016-11-21 14:31:50 alexmiller itâ€™s not like 1.9 is imminent or anything"><a href="#t1479738710000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">14:31:50</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>itâ€™s not like 1.9 is imminent or anything</span></div><div id="t1479739302000174" t="2016-11-21 14:41:42 gfredericks Ok, I won&apos;t want to build anything for at least a week; I&apos;m thinking of doing an alpha first, so people can use new stuff with the clojure 1.9 alphas"><a href="#t1479739302000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">14:41:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Ok, I won&apos;t want to build anything for at least a week; I&apos;m thinking of doing an alpha first, so people can use new stuff with the clojure 1.9 alphas</span></div><div id="t1479739579000175" t="2016-11-21 14:46:19 alexmiller are you going to be at the conj?"><a href="#t1479739579000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">14:46:19</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>are you going to be at the conj?</span></div><div id="t1479742374000176" t="2016-11-21 15:32:54 gfredericks @alexmiller yep"><a href="#t1479742374000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">15:32:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller yep</span></div><div id="t1479742921000177" t="2016-11-21 15:42:01 alexmiller cool, we should chat at some point"><a href="#t1479742921000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">15:42:01</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>cool, we should chat at some point</span></div><div id="t1479744911000178" t="2016-11-21 16:15:11 gfredericks I&apos;ll make sure that happens"><a href="#t1479744911000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">16:15:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll make sure that happens</span></div><div id="t1479756304000179" t="2016-11-21 19:25:04 dangit Are people using test.check and midje together? Putting a  tc/defspec  instead a  midje/fact  doesnâ€™t seem to do much."><a href="#t1479756304000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:25:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â dangitÂ </span><span>Are people using test.check and midje together? Putting a </span><code>tc/defspec</code><span> instead a </span><code>midje/fact</code><span> doesnâ€™t seem to do much.</span></div><div id="t1479756763000180" t="2016-11-21 19:32:43 gfredericks @dangit could you share some code? I can&apos;t tell what you mean exactly"><a href="#t1479756763000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:32:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@dangit could you share some code? I can&apos;t tell what you mean exactly</span></div><div id="t1479756793000181" t="2016-11-21 19:33:13 gfredericks I dont&apos; know how midje integrates with clojure.test, but presumably you could intermingle those integrations"><a href="#t1479756793000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:33:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I dont&apos; know how midje integrates with clojure.test, but presumably you could intermingle those integrations</span></div><div id="t1479756809000182" t="2016-11-21 19:33:29 gfredericks defspec looks just like a regular  clojure.test/deftest  from clojure.test&apos;s perspective"><a href="#t1479756809000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:33:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>defspec looks just like a regular </span><code>clojure.test/deftest</code><span> from clojure.test&apos;s perspective</span></div><div id="t1479757291000183" t="2016-11-21 19:41:31 dangit Yeah, Iâ€™m a bit of a newb, shoving a deftest inside a midje fact was just a guess. I tried this:
 (facts &quot;about numbers&quot;
  (fact &quot;a number is anything&quot;
    4 =&gt; anything)
  (defspec inc-test
    100
    (prop/for-all [v gen/int]
                  (= (inc v) (+ 2 v)))))
 
hoping midje would figure out what was going on but the result is:
 &gt;&gt;&gt; Output from clojure.test tests:

FAIL in (inc-test) (clojure_test.cljc:21)
expected: result
  actual: false

1 failures, 0 errors.
&gt;&gt;&gt; Midje summary:
All checks (1) succeeded.
Subprocess failed 

So the failure triggers, but midje thinks everything is fine."><a href="#t1479757291000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:41:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â dangitÂ </span><span>Yeah, Iâ€™m a bit of a newb, shoving a deftest inside a midje fact was just a guess. I tried this:
</span><pre>(facts &quot;about numbers&quot;
  (fact &quot;a number is anything&quot;
    4 =&gt; anything)
  (defspec inc-test
    100
    (prop/for-all [v gen/int]
                  (= (inc v) (+ 2 v)))))
</pre><span>
hoping midje would figure out what was going on but the result is:
</span><pre>&gt;&gt;&gt; Output from clojure.test tests:

FAIL in (inc-test) (clojure_test.cljc:21)
expected: result
  actual: false

1 failures, 0 errors.
&gt;&gt;&gt; Midje summary:
All checks (1) succeeded.
Subprocess failed</pre><span>

So the failure triggers, but midje thinks everything is fine.</span></div><div id="t1479757921000184" t="2016-11-21 19:52:01 gfredericks defspec will only work at the top level; I don&apos;t know whether your test-runner is just clojure.test or if it&apos;s midje-specific, and that would determine whether your top-level defspec actually gets runs"><a href="#t1479757921000184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:52:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>defspec will only work at the top level; I don&apos;t know whether your test-runner is just clojure.test or if it&apos;s midje-specific, and that would determine whether your top-level defspec actually gets runs</span></div><div id="t1479757950000185" t="2016-11-21 19:52:30 gfredericks but if you like the nesting there&apos;s probably some way to run a generative test inside the  facts  macro"><a href="#t1479757950000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:52:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but if you like the nesting there&apos;s probably some way to run a generative test inside the </span><code>facts</code><span> macro</span></div><div id="t1479757960000186" t="2016-11-21 19:52:40 gfredericks maybe by calling  clojure.test.check/quick-check  directly"><a href="#t1479757960000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:52:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>maybe by calling </span><code>clojure.test.check/quick-check</code><span> directly</span></div><div id="t1479758017000187" t="2016-11-21 19:53:37 gfredericks I don&apos;t know midje but I assume in the worst case you could do something like  (fact &quot;this property holds&quot; (boolean (:result (quick-check 100 (prop/for-all ...)))) =&gt; true)"><a href="#t1479758017000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:53:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t know midje but I assume in the worst case you could do something like </span><code>(fact &quot;this property holds&quot; (boolean (:result (quick-check 100 (prop/for-all ...)))) =&gt; true)</code></div><div id="t1479758032000188" t="2016-11-21 19:53:52 gfredericks so the only question is what&apos;s the best way to make that less tedious"><a href="#t1479758032000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:53:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so the only question is what&apos;s the best way to make that less tedious</span></div><div id="t1479758048000189" t="2016-11-21 19:54:08 gfredericks which I can&apos;t guess at, not knowing midje"><a href="#t1479758048000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:54:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which I can&apos;t guess at, not knowing midje</span></div><div id="t1479758049000190" t="2016-11-21 19:54:09 dangit Iâ€™m just running lein midje/using midjeâ€™s autotest. The test is definitely getting run, it just seems like a hack what Iâ€™m doing now. Calling quick-check directly is a sane idea.  ğŸ™‚"><a href="#t1479758049000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:54:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â dangitÂ </span><span>Iâ€™m just running lein midje/using midjeâ€™s autotest. The test is definitely getting run, it just seems like a hack what Iâ€™m doing now. Calling quick-check directly is a sane idea. </span><b>ğŸ™‚</b></div><div id="t1479758091000191" t="2016-11-21 19:54:51 dangit Yeah, ok, thanks! Iâ€™ll play around with it a bit more."><a href="#t1479758091000191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:54:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â dangitÂ </span><span>Yeah, ok, thanks! Iâ€™ll play around with it a bit more.</span></div><div id="t1479758102000192" t="2016-11-21 19:55:02 gfredericks np"><a href="#t1479758102000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-21</span>Â <span class="t" onclick="H(this)">19:55:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>np</span></div><div id="t1480428296000193" t="2016-11-29 14:04:56 nberger I just created a ticket with a patch proposing a refactor to the quick-check loop that includes a clean way to provide feedback during the test run and also to augment/modify the state carried over during the process, making it easy to implement things like early abort, calculating statistics, adding timestamps at different steps of the process, etc. Feel free to give your feedback in  http://dev.clojure.org/jira/browse/TCHECK-126"><a href="#t1480428296000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">14:04:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I just created a ticket with a patch proposing a refactor to the quick-check loop that includes a clean way to provide feedback during the test run and also to augment/modify the state carried over during the process, making it easy to implement things like early abort, calculating statistics, adding timestamps at different steps of the process, etc. Feel free to give your feedback in </span><a href="http://dev.clojure.org/jira/browse/TCHECK-126" target="_blank">http://dev.clojure.org/jira/browse/TCHECK-126</a></div><div id="t1480431007000195" t="2016-11-29 14:50:07 gfredericks That would be an interesting extension point for users"><a href="#t1480431007000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">14:50:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That would be an interesting extension point for users</span></div><div id="t1480431155000196" t="2016-11-29 14:52:35 gfredericks transducers might have something to do with this"><a href="#t1480431155000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">14:52:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>transducers might have something to do with this</span></div><div id="t1480437937000197" t="2016-11-29 16:45:37 nberger I&apos;d like to hear more about your transducers idea :)"><a href="#t1480437937000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">16:45:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I&apos;d like to hear more about your transducers idea :)</span></div><div id="t1480441349000198" t="2016-11-29 17:42:29 gfredericks It might be thwarted by the irregularity of the shrinking phase"><a href="#t1480441349000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">17:42:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It might be thwarted by the irregularity of the shrinking phase</span></div><div id="t1480441428000199" t="2016-11-29 17:43:48 gfredericks But transducers are maybe related in that they separate the sequence processing logic from the orchestration, so that you can do things like swap in async orchestration"><a href="#t1480441428000199" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">17:43:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But transducers are maybe related in that they separate the sequence processing logic from the orchestration, so that you can do things like swap in async orchestration</span></div><div id="t1480441462000200" t="2016-11-29 17:44:22 gfredericks It would be cool if parallelism where swappinable too, but I don&apos;t think transducers are amenable to that"><a href="#t1480441462000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">17:44:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It would be cool if parallelism where swappinable too, but I don&apos;t think transducers are amenable to that</span></div><div id="t1480442547000201" t="2016-11-29 18:02:27 alexmiller not currently"><a href="#t1480442547000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">18:02:27</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>not currently</span></div><div id="t1480443686000202" t="2016-11-29 18:21:26 gfredericks I spent a lot of braintime trying to figure out how to do something transducerlike with the test.check shrink-tree but I think it seemed to hard to do while allowing the shrinking algorithm to do whatever it wanted"><a href="#t1480443686000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">18:21:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I spent a lot of braintime trying to figure out how to do something transducerlike with the test.check shrink-tree but I think it seemed to hard to do while allowing the shrinking algorithm to do whatever it wanted</span></div><div id="t1480443722000203" t="2016-11-29 18:22:02 gfredericks I forget what problem I was trying to solve exactly; probably just vague performance"><a href="#t1480443722000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-29</span>Â <span class="t" onclick="H(this)">18:22:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I forget what problem I was trying to solve exactly; probably just vague performance</span></div><div id="t1481212770000002" t="2016-12-08 15:59:30 nwjsmith Is there a way to observe how a generator shrinks?"><a href="#t1481212770000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">15:59:30</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Is there a way to observe how a generator shrinks?</span></div><div id="t1481212798000003" t="2016-12-08 15:59:58 nwjsmith Like  sample , but starting from a â€œbigâ€ generated value and then shrinking down?"><a href="#t1481212798000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">15:59:58</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Like </span><code>sample</code><span>, but starting from a â€œbigâ€ generated value and then shrinking down?</span></div><div id="t1481222753000004" t="2016-12-08 18:45:53 gfredericks theoretically yes, there&apos;s just not an easy function included that does this"><a href="#t1481222753000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">18:45:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>theoretically yes, there&apos;s just not an easy function included that does this</span></div><div id="t1481222782000005" t="2016-12-08 18:46:22 gfredericks I&apos;ve written it once or twice, it&apos;s only a few lines; I probably don&apos;t have one handy though"><a href="#t1481222782000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">18:46:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve written it once or twice, it&apos;s only a few lines; I probably don&apos;t have one handy though</span></div><div id="t1481222817000006" t="2016-12-08 18:46:57 gfredericks your request can be interpreted a couple of different ways though"><a href="#t1481222817000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">18:46:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>your request can be interpreted a couple of different ways though</span></div><div id="t1481223090000007" t="2016-12-08 18:51:30 gfredericks default shrinks are going to be less interesting; e.g., if your generator is  (gen/vector gen-some-big-hairy-data-structure) , then the easiest way of shrinking it consists of taking one step to  []"><a href="#t1481223090000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">18:51:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>default shrinks are going to be less interesting; e.g., if your generator is </span><code>(gen/vector gen-some-big-hairy-data-structure)</code><span>, then the easiest way of shrinking it consists of taking one step to </span><code>[]</code></div><div id="t1481224277000008" t="2016-12-08 19:11:17 nwjsmith Maybe a version of sample that returns  small ,  medium ,  big ,  medium ,  small , so that itâ€™s easy to see how a value grows then shrinks?"><a href="#t1481224277000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:11:17</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Maybe a version of sample that returns </span><code>small</code><span>, </span><code>medium</code><span>, </span><code>big</code><span>, </span><code>medium</code><span>, </span><code>small</code><span>, so that itâ€™s easy to see how a value grows then shrinks?</span></div><div id="t1481224299000009" t="2016-12-08 19:11:39 gfredericks that might be weirder than it sounds"><a href="#t1481224299000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:11:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that might be weirder than it sounds</span></div><div id="t1481224313000010" t="2016-12-08 19:11:53 nwjsmith I should probably get a much better understanding of test.checkâ€™s shrinking before bugging you furthur"><a href="#t1481224313000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:11:53</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I should probably get a much better understanding of test.checkâ€™s shrinking before bugging you furthur</span></div><div id="t1481224322000011" t="2016-12-08 19:12:02 gfredericks it&apos;s tempting to think that the growing you see in  sample  and in a test run is related to the shrinking you get in a failure, but they&apos;re almost entirely unrelated processes"><a href="#t1481224322000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:12:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s tempting to think that the growing you see in </span><code>sample</code><span> and in a test run is related to the shrinking you get in a failure, but they&apos;re almost entirely unrelated processes</span></div><div id="t1481224349000012" t="2016-12-08 19:12:29 gfredericks I don&apos;t mind discussing it, the whole thing is currently underdocumented so I deserve to have to explain things live :)"><a href="#t1481224349000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:12:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t mind discussing it, the whole thing is currently underdocumented so I deserve to have to explain things live :)</span></div><div id="t1481224388000013" t="2016-12-08 19:13:08 gfredericks another thing you could implement without too much trouble is a random shrink"><a href="#t1481224388000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:13:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>another thing you could implement without too much trouble is a random shrink</span></div><div id="t1481224406000014" t="2016-12-08 19:13:26 gfredericks it might not resemble too closely what would happen in a real test, but it could at least give you an idea of what sorts of steps are possible"><a href="#t1481224406000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:13:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it might not resemble too closely what would happen in a real test, but it could at least give you an idea of what sorts of steps are possible</span></div><div id="t1481224612000015" t="2016-12-08 19:16:52 gfredericks @nwjsmith this part of this talk introduces the idea of a shrink tree, which is most of what you need to know to understand the shrinking mechanics:  https://youtu.be/u0t-6lUvXHo?t=11m6s"><a href="#t1481224612000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:16:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith this part of this talk introduces the idea of a shrink tree, which is most of what you need to know to understand the shrinking mechanics: </span><a href="https://youtu.be/u0t-6lUvXHo?t=11m6s" target="_blank">https://youtu.be/u0t-6lUvXHo?t=11m6s</a></div><div id="t1481224647000016" t="2016-12-08 19:17:27 nwjsmith Oh, excellent. Thanks!"><a href="#t1481224647000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:17:27</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Oh, excellent. Thanks!</span></div><div id="t1481225245000017" t="2016-12-08 19:27:25 gfredericks I suppose it&apos;s a rather steep introduction, but it&apos;s at least better than me typing stuff "><a href="#t1481225245000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-08</span>Â <span class="t" onclick="H(this)">19:27:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose it&apos;s a rather steep introduction, but it&apos;s at least better than me typing stuff </span></div><div id="t1481815181000018" t="2016-12-15 15:19:41 gfredericks I think I figured out how to use transducers in the shrink trees"><a href="#t1481815181000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-15</span>Â <span class="t" onclick="H(this)">15:19:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think I figured out how to use transducers in the shrink trees</span></div><div id="t1481815349000019" t="2016-12-15 15:22:29 gfredericks It would save a lot of intermediate lazy seq allocations, but I think it would only apply when shrinking, so it&apos;s not obviously worth the effort. "><a href="#t1481815349000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-15</span>Â <span class="t" onclick="H(this)">15:22:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It would save a lot of intermediate lazy seq allocations, but I think it would only apply when shrinking, so it&apos;s not obviously worth the effort. </span></div><div id="t1481816750000020" t="2016-12-15 15:45:50 nberger Nice!"><a href="#t1481816750000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-15</span>Â <span class="t" onclick="H(this)">15:45:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Nice!</span></div><div id="t1482064849000022" t="2016-12-18 12:40:49 nberger Uploaded an alternative patch to  http://dev.clojure.org/jira/browse/TCHECK-126  (Refactor c.t.c/quick-check as a state machine to provide more extension points). The new patch refactors c.t.c/quick-check &quot;in-place&quot;, instead of introducing a separate namespace like in the old patch.
Most important change is that it replaces the  reporter-fn  with a  step-fn  which allows feeding back the quick-check loop to drive/augment it by returning a modified quick-check state (for example, adding a timestamp, or dynamically changing the number of tests left).  reporter-fn  was for side-effects only,  step-fn  allows to do the side-effects AND modify the qc state.
I understand this is not a breaking change because the  reporter-fn  has not been part of a release yet AFAIK"><a href="#t1482064849000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:40:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Uploaded an alternative patch to </span><a href="http://dev.clojure.org/jira/browse/TCHECK-126" target="_blank">http://dev.clojure.org/jira/browse/TCHECK-126</a><span> (Refactor c.t.c/quick-check as a state machine to provide more extension points). The new patch refactors c.t.c/quick-check &quot;in-place&quot;, instead of introducing a separate namespace like in the old patch.
Most important change is that it replaces the </span><code>reporter-fn</code><span> with a </span><code>step-fn</code><span> which allows feeding back the quick-check loop to drive/augment it by returning a modified quick-check state (for example, adding a timestamp, or dynamically changing the number of tests left). </span><code>reporter-fn</code><span> was for side-effects only, </span><code>step-fn</code><span> allows to do the side-effects AND modify the qc state.
I understand this is not a breaking change because the </span><code>reporter-fn</code><span> has not been part of a release yet AFAIK</span></div><div id="t1482065324000023" t="2016-12-18 12:48:44 gfredericks so  step-fn  is part of the public API then?"><a href="#t1482065324000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:48:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so </span><code>step-fn</code><span> is part of the public API then?</span></div><div id="t1482065586000024" t="2016-12-18 12:53:06 nberger yes, through the new  step-fn  option that replaces  reporter-fn . There&apos;s also a  c.t.c.clojure-test/default-step-fn  now"><a href="#t1482065586000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:53:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>yes, through the new </span><code>step-fn</code><span> option that replaces </span><code>reporter-fn</code><span>. There&apos;s also a </span><code>c.t.c.clojure-test/default-step-fn</code><span> now</span></div><div id="t1482065619000025" t="2016-12-18 12:53:39 nberger here&apos;s the new  default-step-fn :  https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-fb4b33c15ed48f22f9f6c3655f16da02R29"><a href="#t1482065619000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:53:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>here&apos;s the new </span><code>default-step-fn</code><span>: </span><a href="https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-fb4b33c15ed48f22f9f6c3655f16da02R29" target="_blank">https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-fb4b33c15ed48f22f9f6c3655f16da02R29</a></div><div id="t1482065654000027" t="2016-12-18 12:54:14 gfredericks hm"><a href="#t1482065654000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:54:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>hm</span></div><div id="t1482065680000028" t="2016-12-18 12:54:40 gfredericks I&apos;d want to be sure that creating a well-behaved and useful  step-fn  isn&apos;t more difficult than a  reporter-fn"><a href="#t1482065680000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:54:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d want to be sure that creating a well-behaved and useful </span><code>step-fn</code><span> isn&apos;t more difficult than a </span><code>reporter-fn</code></div><div id="t1482065837000029" t="2016-12-18 12:57:17 nberger yeah, that&apos;s a risk... we could check for nil, but not sure if much more than that... maybe check that we get a map with certain keys back? But I don&apos;t know, passing a  step-fn  is a bit of &quot;advanced usage&quot;, and reading a little bit about it or seeing an example is not such a big expectation, maybe... Here&apos;s an example of a step-fn:  https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R985"><a href="#t1482065837000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:57:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>yeah, that&apos;s a risk... we could check for nil, but not sure if much more than that... maybe check that we get a map with certain keys back? But I don&apos;t know, passing a </span><code>step-fn</code><span> is a bit of &quot;advanced usage&quot;, and reading a little bit about it or seeing an example is not such a big expectation, maybe... Here&apos;s an example of a step-fn: </span><a href="https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R985" target="_blank">https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R985</a></div><div id="t1482065870000031" t="2016-12-18 12:57:50 nberger and here&apos;s a more useful one:  https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R1042"><a href="#t1482065870000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:57:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>and here&apos;s a more useful one: </span><a href="https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R1042" target="_blank">https://github.com/clojure/test.check/compare/master...nberger:test.check2-reporter-fn#diff-5eb045ad9cf20dd057f8344a877abd89R1042</a></div><div id="t1482065921000033" t="2016-12-18 12:58:41 nberger perhaps we could provide some specs for the step-fn..."><a href="#t1482065921000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">12:58:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>perhaps we could provide some specs for the step-fn...</span></div><div id="t1482066179000034" t="2016-12-18 13:02:59 nberger another option is to keep separate functions for the side-effecty part (`reporter-fn`) and the modify-qc-state part (`step-fn`? will need help with the names  ğŸ˜„  )"><a href="#t1482066179000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:02:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>another option is to keep separate functions for the side-effecty part (`reporter-fn`) and the modify-qc-state part (`step-fn`? will need help with the names </span><b>ğŸ˜„</b><span> )</span></div><div id="t1482066270000035" t="2016-12-18 13:04:30 nberger but I don&apos;t know... maybe that&apos;s more appropriate for a layer over this (a  step-fn  that composes a reporter-fn and a change-qc-state-fn or whatever)"><a href="#t1482066270000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:04:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>but I don&apos;t know... maybe that&apos;s more appropriate for a layer over this (a </span><code>step-fn</code><span> that composes a reporter-fn and a change-qc-state-fn or whatever)</span></div><div id="t1482066993000036" t="2016-12-18 13:16:33 gfredericks what uses do you imagine a user having for a  step-fn  that aren&apos;t possible with  reporter-fn ?"><a href="#t1482066993000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:16:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what uses do you imagine a user having for a </span><code>step-fn</code><span> that aren&apos;t possible with </span><code>reporter-fn</code><span>?</span></div><div id="t1482067895000037" t="2016-12-18 13:31:35 nberger 1. implementing the stats feature
2. add timestamps at different stages of the quick-check test
3. dynamically change for how long the test should run (by changing the num-tests key, or by introducing a new  abort?  key in the future)
4. bound tests and shrinks in time (maybe this goes under the previous item, but it&apos;s a long-standing request in TCHECK-8 and this way it could be implemented as an extension)"><a href="#t1482067895000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:31:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>1. implementing the stats feature
2. add timestamps at different stages of the quick-check test
3. dynamically change for how long the test should run (by changing the num-tests key, or by introducing a new </span><code>abort?</code><span> key in the future)
4. bound tests and shrinks in time (maybe this goes under the previous item, but it&apos;s a long-standing request in TCHECK-8 and this way it could be implemented as an extension)</span></div><div id="t1482068083000038" t="2016-12-18 13:34:43 nberger and others that users will come up with  ğŸ™‚ . Another benefit IMO is that it the qc state has the same shape at all stages of the quick-check run (except for added keys during shrink that don&apos;t make sense before it starts, for example), so it should make it marginally easier for say an editor to integrate with this to provide live status of the test.check progress"><a href="#t1482068083000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:34:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>and others that users will come up with </span><b>ğŸ™‚</b><span>. Another benefit IMO is that it the qc state has the same shape at all stages of the quick-check run (except for added keys during shrink that don&apos;t make sense before it starts, for example), so it should make it marginally easier for say an editor to integrate with this to provide live status of the test.check progress</span></div><div id="t1482069101000039" t="2016-12-18 13:51:41 nberger Not sure if it gives any benefit for clojure.spec, that&apos;s something to be explored..."><a href="#t1482069101000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:51:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Not sure if it gives any benefit for clojure.spec, that&apos;s something to be explored...</span></div><div id="t1482069173000040" t="2016-12-18 13:52:53 nberger Another benefit: the periodic reporter could be re implemented to not use a global atom quite easily"><a href="#t1482069173000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">13:52:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Another benefit: the periodic reporter could be re implemented to not use a global atom quite easily</span></div><div id="t1482105318000041" t="2016-12-18 23:55:18 gfredericks I keep wondering if a rewrite of the  generators  namespace could result in a more coherent notion of  size ; it seems hard to come up with one"><a href="#t1482105318000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:55:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I keep wondering if a rewrite of the </span><code>generators</code><span> namespace could result in a more coherent notion of </span><code>size</code><span>; it seems hard to come up with one</span></div><div id="t1482105382000042" t="2016-12-18 23:56:22 gfredericks an initial thought is that sizing generators could be easier to understand if they tried to interpret  size  as a suggested value for  (comp count pr-str)"><a href="#t1482105382000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:56:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>an initial thought is that sizing generators could be easier to understand if they tried to interpret </span><code>size</code><span> as a suggested value for </span><code>(comp count pr-str)</code></div><div id="t1482105405000043" t="2016-12-18 23:56:45 gfredericks or a suggested maximum value"><a href="#t1482105405000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:56:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>or a suggested maximum value</span></div><div id="t1482105432000044" t="2016-12-18 23:57:12 gfredericks but there are lots of cases where that&apos;s not a useful default, so users would have to be more involved with sizing to get what they want"><a href="#t1482105432000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:57:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but there are lots of cases where that&apos;s not a useful default, so users would have to be more involved with sizing to get what they want</span></div><div id="t1482105466000045" t="2016-12-18 23:57:46 gfredericks and it would also be hard to pull off, especially for combining collection generators with custom generators using  gen/bind"><a href="#t1482105466000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:57:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and it would also be hard to pull off, especially for combining collection generators with custom generators using </span><code>gen/bind</code></div><div id="t1482105489000046" t="2016-12-18 23:58:09 gfredericks it&apos;d be useful to know how well the other quickchecks do at this"><a href="#t1482105489000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:58:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;d be useful to know how well the other quickchecks do at this</span></div><div id="t1482105599000048" t="2016-12-18 23:59:59 gfredericks I don&apos;t like that clojure.spec needed to do some weird depth-tracking thing"><a href="#t1482105599000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-18</span>Â <span class="t" onclick="H(this)">23:59:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t like that clojure.spec needed to do some weird depth-tracking thing</span></div><div id="t1482347167000050" t="2016-12-21 19:06:07 ag How could I generate data based on concrete collection. e.g. I have a predefined list of accounts, need a generator that would generate data for each of the account in that list. e.g.  (for [a accounts] (-&gt; :account/spec s/gen gen/generate (merge a)))  - where  :account/spec  is a spec of map. This snippet does not return a generator though, and I need a generator"><a href="#t1482347167000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">19:06:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>How could I generate data based on concrete collection. e.g. I have a predefined list of accounts, need a generator that would generate data for each of the account in that list. e.g. </span><code>(for [a accounts] (-&gt; :account/spec s/gen gen/generate (merge a)))</code><span> - where </span><code>:account/spec</code><span> is a spec of map. This snippet does not return a generator though, and I need a generator</span></div><div id="t1482356630000052" t="2016-12-21 21:43:50 ag can I run multiple assertions in  defspec  ?"><a href="#t1482356630000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">21:43:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>can I run multiple assertions in </span><code>defspec</code><span> ?</span></div><div id="t1482356651000053" t="2016-12-21 21:44:11 ag I know, I probably shouldnâ€™t, but..."><a href="#t1482356651000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">21:44:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>I know, I probably shouldnâ€™t, but...</span></div><div id="t1482356655000054" t="2016-12-21 21:44:15 ag what if?"><a href="#t1482356655000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">21:44:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>what if?</span></div><div id="t1482356720000055" t="2016-12-21 21:45:20 ag should I just use  and  ?"><a href="#t1482356720000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">21:45:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â agÂ </span><span>should I just use </span><code>and</code><span> ?</span></div><div id="t1482357869000057" t="2016-12-21 22:04:29 gfredericks yep"><a href="#t1482357869000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">22:04:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yep</span></div><div id="t1482357884000058" t="2016-12-21 22:04:44 gfredericks which obscures which leg failed when something fails"><a href="#t1482357884000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">22:04:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which obscures which leg failed when something fails</span></div><div id="t1482357902000059" t="2016-12-21 22:05:02 gfredericks that sort of thing might improve in the future"><a href="#t1482357902000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-21</span>Â <span class="t" onclick="H(this)">22:05:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that sort of thing might improve in the future</span></div><div id="t1483387727000062" t="2017-01-02 20:08:47 paulspencerwilliams Hi. Iâ€™ve a question about property based testing and test.check and their suitability to the following integration validation. If I wanted to check that function  (first-available-timeslot {:attendees 3 :starts 2017-02-03 :ends 2017-02-03 :duration 60})  returns the first 1 hour slot not conflicting with a generated set of random meetings in the same calendar. The properties in english would be â€œresult doesnâ€™t overlap with other meetingsâ€, â€œtime slot is in a meeting room with at least a capacity of :attendees&quot; and somehow â€œthe result is the first suitable result. Am I thinking about this the right way?"><a href="#t1483387727000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:08:47</span>Â paulspencerwilliamsÂ </span><span>Hi. Iâ€™ve a question about property based testing and test.check and their suitability to the following integration validation. If I wanted to check that function </span><pre>(first-available-timeslot {:attendees 3 :starts 2017-02-03 :ends 2017-02-03 :duration 60})</pre><span> returns the first 1 hour slot not conflicting with a generated set of random meetings in the same calendar. The properties in english would be â€œresult doesnâ€™t overlap with other meetingsâ€, â€œtime slot is in a meeting room with at least a capacity of :attendees&quot; and somehow â€œthe result is the first suitable result. Am I thinking about this the right way?</span></div><div id="t1483390307000066" t="2017-01-02 20:51:47 gfredericks I assume the function can fail if the constraints aren&apos;t satisfiable"><a href="#t1483390307000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:51:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I assume the function can fail if the constraints aren&apos;t satisfiable</span></div><div id="t1483390430000067" t="2017-01-02 20:53:50 gfredericks Are you planning on just testing with that piece of example data you showed, or generating that input as well?"><a href="#t1483390430000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:53:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Are you planning on just testing with that piece of example data you showed, or generating that input as well?</span></div><div id="t1483390459000068" t="2017-01-02 20:54:19 paulspencerwilliams Correct, and generating input also."><a href="#t1483390459000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:54:19</span>Â paulspencerwilliamsÂ </span><span>Correct, and generating input also.</span></div><div id="t1483390502000069" t="2017-01-02 20:55:02 gfredericks I think the first two properties are good"><a href="#t1483390502000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:55:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the first two properties are good</span></div><div id="t1483390530000070" t="2017-01-02 20:55:30 gfredericks The third has slightly more of the &quot;duplicating the business logic&quot; flavor"><a href="#t1483390530000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:55:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The third has slightly more of the &quot;duplicating the business logic&quot; flavor</span></div><div id="t1483390555000071" t="2017-01-02 20:55:55 gfredericks But might be easy enough as to be worth it"><a href="#t1483390555000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:55:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But might be easy enough as to be worth it</span></div><div id="t1483390602000072" t="2017-01-02 20:56:42 paulspencerwilliams okay. Iâ€™ll have a bash. My concern was that integration tests are expensive, and having many tests with large datasets even more so, although they obviously offer far more confidence."><a href="#t1483390602000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:56:42</span>Â paulspencerwilliamsÂ </span><span>okay. Iâ€™ll have a bash. My concern was that integration tests are expensive, and having many tests with large datasets even more so, although they obviously offer far more confidence.</span></div><div id="t1483390636000073" t="2017-01-02 20:57:16 gfredericks Expensive meaning dev time? Waiting for tests? "><a href="#t1483390636000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:57:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Expensive meaning dev time? Waiting for tests? </span></div><div id="t1483390692000074" t="2017-01-02 20:58:12 paulspencerwilliams Waiting for tests. Further, the query might operate against a db, or possibly google calendars api so thereâ€™s timeouts and error conditions complicating things."><a href="#t1483390692000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:58:12</span>Â paulspencerwilliamsÂ </span><span>Waiting for tests. Further, the query might operate against a db, or possibly google calendars api so thereâ€™s timeouts and error conditions complicating things.</span></div><div id="t1483390734000075" t="2017-01-02 20:58:54 gfredericks I would try to mock out things you don&apos;t control"><a href="#t1483390734000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:58:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I would try to mock out things you don&apos;t control</span></div><div id="t1483390763000076" t="2017-01-02 20:59:23 gfredericks Unreliable tests are even more annoying in PBT"><a href="#t1483390763000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:59:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Unreliable tests are even more annoying in PBT</span></div><div id="t1483390788000077" t="2017-01-02 20:59:48 gfredericks Shrinking can be almost meaningless"><a href="#t1483390788000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">20:59:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Shrinking can be almost meaningless</span></div><div id="t1483390844000078" t="2017-01-02 21:00:44 paulspencerwilliams Yeah, thatâ€™s what I was thinking. I actually wonder whether syncing a copy of the calendar into a clojure owned data structure before querying might allow better reasonability. Itâ€™s only a small dataset."><a href="#t1483390844000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:00:44</span>Â paulspencerwilliamsÂ </span><span>Yeah, thatâ€™s what I was thinking. I actually wonder whether syncing a copy of the calendar into a clojure owned data structure before querying might allow better reasonability. Itâ€™s only a small dataset.</span></div><div id="t1483390901000079" t="2017-01-02 21:01:41 gfredericks Or generate the calendar"><a href="#t1483390901000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:01:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Or generate the calendar</span></div><div id="t1483390984000080" t="2017-01-02 21:03:04 gfredericks A property I just thought of that is a corollary of the &quot;earliest time slot&quot; requirement: "><a href="#t1483390984000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:03:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>A property I just thought of that is a corollary of the &quot;earliest time slot&quot; requirement: </span></div><div id="t1483391068000081" t="2017-01-02 21:04:28 gfredericks &quot;Given two reservation requests where the first is strictly easier to satisfy than the second, processing them in order should never result in the second being scheduled before the first"><a href="#t1483391068000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:04:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&quot;Given two reservation requests where the first is strictly easier to satisfy than the second, processing them in order should never result in the second being scheduled before the first</span></div><div id="t1483391122000082" t="2017-01-02 21:05:22 gfredericks Meaning they should have the same date range, and the second should involve at least as many people and minutes"><a href="#t1483391122000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:05:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Meaning they should have the same date range, and the second should involve at least as many people and minutes</span></div><div id="t1483391172000083" t="2017-01-02 21:06:12 paulspencerwilliams Just parsing that..."><a href="#t1483391172000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:06:12</span>Â paulspencerwilliamsÂ </span><span>Just parsing that...</span></div><div id="t1483391219000084" t="2017-01-02 21:06:59 paulspencerwilliams Got it, yes. Itâ€™s these property identifications that make it difficult, and require a lot of experience."><a href="#t1483391219000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:06:59</span>Â paulspencerwilliamsÂ </span><span>Got it, yes. Itâ€™s these property identifications that make it difficult, and require a lot of experience.</span></div><div id="t1483391229000085" t="2017-01-02 21:07:09 gfredericks Yep"><a href="#t1483391229000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:07:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yep</span></div><div id="t1483391280000086" t="2017-01-02 21:08:00 gfredericks I&apos;m about to sacrifice my phone for the sake of providing entertainment to my offspring, so that may be all the pondering I can do for now "><a href="#t1483391280000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:08:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m about to sacrifice my phone for the sake of providing entertainment to my offspring, so that may be all the pondering I can do for now </span></div><div id="t1483391307000087" t="2017-01-02 21:08:27 paulspencerwilliams @gfredericks thanks for the help. I will explore this further tomorrow and enjoy the rest of your evening!"><a href="#t1483391307000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:08:27</span>Â paulspencerwilliamsÂ </span><span>@gfredericks thanks for the help. I will explore this further tomorrow and enjoy the rest of your evening!</span></div><div id="t1483393039000088" t="2017-01-02 21:37:19 mattly is there any way to instrument a set of generators for a test to track performance?"><a href="#t1483393039000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:37:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>is there any way to instrument a set of generators for a test to track performance?</span></div><div id="t1483393080000089" t="2017-01-02 21:38:00 mattly I&apos;ve got what, to me, seems like a relatively simple generation set that takes 20+ seconds per iteration for some reason"><a href="#t1483393080000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:38:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;ve got what, to me, seems like a relatively simple generation set that takes 20+ seconds per iteration for some reason</span></div><div id="t1483393126000090" t="2017-01-02 21:38:46 mattly there&apos;s no recursion, and the only  such-that  checks that a basic keyword produces something not part of a previously-generated set"><a href="#t1483393126000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:38:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>there&apos;s no recursion, and the only </span><code>such-that</code><span> checks that a basic keyword produces something not part of a previously-generated set</span></div><div id="t1483393256000091" t="2017-01-02 21:40:56 mattly hm"><a href="#t1483393256000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:40:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>hm</span></div><div id="t1483393680000092" t="2017-01-02 21:48:00 hiredman that definitely will slow things down"><a href="#t1483393680000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:48:00</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>that definitely will slow things down</span></div><div id="t1483393943000093" t="2017-01-02 21:52:23 hiredman depending on what you are doing, you could generate a set, then use fmap to remove an element and return a tuple of [removed-element set] to get a similar effect without thrashing such-that"><a href="#t1483393943000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">21:52:23</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>depending on what you are doing, you could generate a set, then use fmap to remove an element and return a tuple of [removed-element set] to get a similar effect without thrashing such-that</span></div><div id="t1483394616000094" t="2017-01-02 22:03:36 mattly that could work"><a href="#t1483394616000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:03:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>that could work</span></div><div id="t1483394634000095" t="2017-01-02 22:03:54 mattly as it is I&apos;m using a modified version of test.chuck&apos;s  testing  that will output things on each iteration"><a href="#t1483394634000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:03:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>as it is I&apos;m using a modified version of test.chuck&apos;s </span><code>testing</code><span> that will output things on each iteration</span></div><div id="t1483394643000096" t="2017-01-02 22:04:03 mattly I&apos;m modifying that to display gen vs. test times"><a href="#t1483394643000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:04:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I&apos;m modifying that to display gen vs. test times</span></div><div id="t1483394699000097" t="2017-01-02 22:04:59 mattly and then doing simple one-off tests with each of my generators"><a href="#t1483394699000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:04:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and then doing simple one-off tests with each of my generators</span></div><div id="t1483396802000098" t="2017-01-02 22:40:02 gfredericks I doubt thrashing such-that would have such severe consequences unless you manually raised the iteration limit"><a href="#t1483396802000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:40:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I doubt thrashing such-that would have such severe consequences unless you manually raised the iteration limit</span></div><div id="t1483396812000099" t="2017-01-02 22:40:12 gfredericks It gives up after 10 tries"><a href="#t1483396812000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:40:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It gives up after 10 tries</span></div><div id="t1483397001000100" t="2017-01-02 22:43:21 mattly yeah, it&apos;s not that so far as I can tell"><a href="#t1483397001000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">22:43:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah, it&apos;s not that so far as I can tell</span></div><div id="t1483400087000101" t="2017-01-02 23:34:47 mattly heh, as usual, my takeaway is &quot;don&apos;t use generators for things you don&apos;t need to test the properties of&quot;"><a href="#t1483400087000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:34:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>heh, as usual, my takeaway is &quot;don&apos;t use generators for things you don&apos;t need to test the properties of&quot;</span></div><div id="t1483400232000102" t="2017-01-02 23:37:12 mattly replacing  (gen/map gen/keyword some-other-gen {:min-elements 1 :max-elements 20})  with"><a href="#t1483400232000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:37:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>replacing </span><code>(gen/map gen/keyword some-other-gen {:min-elements 1 :max-elements 20})</code><span> with</span></div><div id="t1483400400000105" t="2017-01-02 23:40:00 gfredericks :slightly_frowning_face:  "><a href="#t1483400400000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:40:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:slightly_frowning_face:</b><span> </span></div><div id="t1483400406000106" t="2017-01-02 23:40:06 mattly reduced the time spent running generators to about an eighth of the origional"><a href="#t1483400406000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:40:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>reduced the time spent running generators to about an eighth of the origional</span></div><div id="t1483400414000107" t="2017-01-02 23:40:14 gfredericks That&apos;s unfortunate"><a href="#t1483400414000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:40:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That&apos;s unfortunate</span></div><div id="t1483400425000108" t="2017-01-02 23:40:25 mattly yeah"><a href="#t1483400425000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:40:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah</span></div><div id="t1483400429000109" t="2017-01-02 23:40:29 gfredericks But sounds plausible"><a href="#t1483400429000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:40:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But sounds plausible</span></div><div id="t1483400486000110" t="2017-01-02 23:41:26 mattly the keys don&apos;t really have any special properties here, it&apos;s mostly, I&apos;m testing the map of  some-other-gen  here and how that effects the code I&apos;m testing"><a href="#t1483400486000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:41:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>the keys don&apos;t really have any special properties here, it&apos;s mostly, I&apos;m testing the map of </span><code>some-other-gen</code><span> here and how that effects the code I&apos;m testing</span></div><div id="t1483400509000111" t="2017-01-02 23:41:49 mattly but it literally went from"><a href="#t1483400509000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:41:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but it literally went from</span></div><div id="t1483400583000114" t="2017-01-02 23:43:03 mattly ...this being the output of my runner"><a href="#t1483400583000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:43:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>...this being the output of my runner</span></div><div id="t1483400674000115" t="2017-01-02 23:44:34 mattly I have another project where I did something similar"><a href="#t1483400674000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:44:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I have another project where I did something similar</span></div><div id="t1483400701000116" t="2017-01-02 23:45:01 mattly it&apos;s a parser of sorts and I needed a bunch of word-looking text"><a href="#t1483400701000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:45:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>it&apos;s a parser of sorts and I needed a bunch of word-looking text</span></div><div id="t1483400753000117" t="2017-01-02 23:45:53 mattly I started with  (gen/not-empty (gen/string-alphanumeric))  and ended up switching to  (gen/elements a-set-of-words-from-lorem-text)  because it was a similar magnitude faster"><a href="#t1483400753000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:45:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I started with </span><code>(gen/not-empty (gen/string-alphanumeric))</code><span> and ended up switching to </span><code>(gen/elements a-set-of-words-from-lorem-text)</code><span> because it was a similar magnitude faster</span></div><div id="t1483400863000118" t="2017-01-02 23:47:43 mattly so I&apos;ve started having to ask on these things, ok, what am I actually testing the properties of here?"><a href="#t1483400863000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:47:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so I&apos;ve started having to ask on these things, ok, what am I actually testing the properties of here?</span></div><div id="t1483400876000119" t="2017-01-02 23:47:56 mattly and what can I get away with not generating"><a href="#t1483400876000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-02</span>Â <span class="t" onclick="H(this)">23:47:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and what can I get away with not generating</span></div><div id="t1483403379000121" t="2017-01-03 00:29:39 gfredericks This is all about faster feedback? "><a href="#t1483403379000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:29:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This is all about faster feedback? </span></div><div id="t1483403447000122" t="2017-01-03 00:30:47 gfredericks Sometimes I wish we had better tools for running a few choice tests to get fast feedback, and doing the heavy PBT via some async workflow"><a href="#t1483403447000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:30:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Sometimes I wish we had better tools for running a few choice tests to get fast feedback, and doing the heavy PBT via some async workflow</span></div><div id="t1483403548000123" t="2017-01-03 00:32:28 gfredericks It might be possible to optimize the string/keyword generators by avoiding the intermediate vectors. Would be interesting to try, and would speed up a lot of people&apos;s tests if it works"><a href="#t1483403548000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:32:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It might be possible to optimize the string/keyword generators by avoiding the intermediate vectors. Would be interesting to try, and would speed up a lot of people&apos;s tests if it works</span></div><div id="t1483404382000124" t="2017-01-03 00:46:22 mattly yes and no"><a href="#t1483404382000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:46:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yes and no</span></div><div id="t1483404406000125" t="2017-01-03 00:46:46 mattly ...but mostly yes"><a href="#t1483404406000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:46:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>...but mostly yes</span></div><div id="t1483404434000126" t="2017-01-03 00:47:14 mattly when 100 iterations of tests takes 10 minutes versus 30 seconds, I think that goes beyond &quot;faster feedback&quot;"><a href="#t1483404434000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:47:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>when 100 iterations of tests takes 10 minutes versus 30 seconds, I think that goes beyond &quot;faster feedback&quot;</span></div><div id="t1483404836000127" t="2017-01-03 00:53:56 gfredericks test.chuck has a mechanism for varying how many tests are run"><a href="#t1483404836000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:53:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.chuck has a mechanism for varying how many tests are run</span></div><div id="t1483404854000128" t="2017-01-03 00:54:14 mattly yeah, I use that on our CI"><a href="#t1483404854000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:54:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>yeah, I use that on our CI</span></div><div id="t1483404916000129" t="2017-01-03 00:55:16 mattly but overall it gets into other factors especially with the CI"><a href="#t1483404916000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:55:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but overall it gets into other factors especially with the CI</span></div><div id="t1483404934000130" t="2017-01-03 00:55:34 mattly Circle has a time limit for any given test run of 2 hours"><a href="#t1483404934000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:55:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>Circle has a time limit for any given test run of 2 hours</span></div><div id="t1483404951000131" t="2017-01-03 00:55:51 mattly which I was hitting a lot in the early days of this project"><a href="#t1483404951000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">00:55:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>which I was hitting a lot in the early days of this project</span></div><div id="t1483409101000132" t="2017-01-03 02:05:01 gfredericks @mattly is this jvm or js? I&apos;ll probably do some profiling"><a href="#t1483409101000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-03</span>Â <span class="t" onclick="H(this)">02:05:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly is this jvm or js? I&apos;ll probably do some profiling</span></div><div id="t1483534262000133" t="2017-01-04 12:51:02 gfredericks @mattly I&apos;m playing around with keyword/string perf, but am not seeing anything super egregious so it would help to have more details about your &quot;100 iterations takes 10 minutes&quot; case"><a href="#t1483534262000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span>Â <span class="t" onclick="H(this)">12:51:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mattly I&apos;m playing around with keyword/string perf, but am not seeing anything super egregious so it would help to have more details about your &quot;100 iterations takes 10 minutes&quot; case</span></div><div id="t1483534384000134" t="2017-01-04 12:53:04 gfredericks I have some ideas for speeding things up, but I can generate several keywords/strings in a millisecond so I can&apos;t get that to add up to 10 minutes"><a href="#t1483534384000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span>Â <span class="t" onclick="H(this)">12:53:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I have some ideas for speeding things up, but I can generate several keywords/strings in a millisecond so I can&apos;t get that to add up to 10 minutes</span></div><div id="t1483558218000135" t="2017-01-04 19:30:18 mattly @gfredericks js; I&apos;ll get you a code sample in a bit"><a href="#t1483558218000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span>Â <span class="t" onclick="H(this)">19:30:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>@gfredericks js; I&apos;ll get you a code sample in a bit</span></div><div id="t1483558243000137" t="2017-01-04 19:30:43 mattly (derp, forgot this was a test against my client-side code)"><a href="#t1483558243000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span>Â <span class="t" onclick="H(this)">19:30:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>(derp, forgot this was a test against my client-side code)</span></div><div id="t1483561502000138" t="2017-01-04 20:25:02 gfredericks Ok, I was trying jvm this morning. It&apos;s possible js has some comparative perf problems"><a href="#t1483561502000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-04</span>Â <span class="t" onclick="H(this)">20:25:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Ok, I was trying jvm this morning. It&apos;s possible js has some comparative perf problems</span></div><div id="t1484053577000140" t="2017-01-10 13:06:17 gfredericks @nberger do you know whether your refactoring of the quick-check function would make it easier to support asynchronous tests?"><a href="#t1484053577000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">13:06:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nberger do you know whether your refactoring of the quick-check function would make it easier to support asynchronous tests?</span></div><div id="t1484053582000141" t="2017-01-10 13:06:22 gfredericks apologies if I&apos;ve asked that before"><a href="#t1484053582000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">13:06:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>apologies if I&apos;ve asked that before</span></div><div id="t1484063905000142" t="2017-01-10 15:58:25 nberger @gfredericks: I&apos;m not sure what&apos;s the issue with asynchronous tests, do you have more context? An example or something to read?"><a href="#t1484063905000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">15:58:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks: I&apos;m not sure what&apos;s the issue with asynchronous tests, do you have more context? An example or something to read?</span></div><div id="t1484063968000143" t="2017-01-10 15:59:28 nberger I do think it should help with running tests in parallel, maybe with a bit more refactoring"><a href="#t1484063968000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">15:59:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I do think it should help with running tests in parallel, maybe with a bit more refactoring</span></div><div id="t1484065555000144" t="2017-01-10 16:25:55 gfredericks @nberger basic use case is wanting to test browser stuff in cljs; if you need to pause the thread to let the browser render things, you can&apos;t have a test that just returns pass/fail"><a href="#t1484065555000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:25:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nberger basic use case is wanting to test browser stuff in cljs; if you need to pause the thread to let the browser render things, you can&apos;t have a test that just returns pass/fail</span></div><div id="t1484065608000145" t="2017-01-10 16:26:48 gfredericks you could e.g. return a future or a channel; but that means the quickcheck loop cannot just examine the result, it has to also pause somehow or another until the result is available; traditionally that would mean it would have to shove the rest of the computation into a callback"><a href="#t1484065608000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:26:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could e.g. return a future or a channel; but that means the quickcheck loop cannot just examine the result, it has to also pause somehow or another until the result is available; traditionally that would mean it would have to shove the rest of the computation into a callback</span></div><div id="t1484065661000146" t="2017-01-10 16:27:41 gfredericks this is why core.async is so complex, to allow you to pretend your code is synchronous, and the  go  macro twists it all into a knot so you don&apos;t have to"><a href="#t1484065661000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:27:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>this is why core.async is so complex, to allow you to pretend your code is synchronous, and the </span><code>go</code><span> macro twists it all into a knot so you don&apos;t have to</span></div><div id="t1484065702000147" t="2017-01-10 16:28:22 gfredericks but unless you&apos;re already programming with this kind of thing in mind it&apos;s usually a big pain to rework the program"><a href="#t1484065702000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:28:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but unless you&apos;re already programming with this kind of thing in mind it&apos;s usually a big pain to rework the program</span></div><div id="t1484065711000148" t="2017-01-10 16:28:31 gfredericks so test.check just doesn&apos;t support that kind of test at the moment"><a href="#t1484065711000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:28:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so test.check just doesn&apos;t support that kind of test at the moment</span></div><div id="t1484066074000149" t="2017-01-10 16:34:34 nberger @gfredericks: got it. Thought it was something like that but wanted to confirm. Have you seen the async macro in cljs.test? It&apos;s definitely not perfect (doesn&apos;t play well with  with-redefs  for example) but it&apos;s a start"><a href="#t1484066074000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:34:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks: got it. Thought it was something like that but wanted to confirm. Have you seen the async macro in cljs.test? It&apos;s definitely not perfect (doesn&apos;t play well with </span><code>with-redefs</code><span> for example) but it&apos;s a start</span></div><div id="t1484066109000150" t="2017-01-10 16:35:09 gfredericks no"><a href="#t1484066109000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:35:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no</span></div><div id="t1484066370000151" t="2017-01-10 16:39:30 gfredericks I&apos;m asking about your changes because if you tried to take the current code and refactor it to be async, the  loop s would have to be transformed into something more abstract; I wasn&apos;t sure if your restructuring had already accomplished that"><a href="#t1484066370000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">16:39:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m asking about your changes because if you tried to take the current code and refactor it to be async, the </span><code>loop</code><span>s would have to be transformed into something more abstract; I wasn&apos;t sure if your restructuring had already accomplished that</span></div><div id="t1484067946000152" t="2017-01-10 17:05:46 nberger I see. I didn&apos;t take it that far"><a href="#t1484067946000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">17:05:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I see. I didn&apos;t take it that far</span></div><div id="t1484070214000153" t="2017-01-10 17:43:34 nberger I&apos;m also not 100% sure in that the loop would have to be transformed. Using an approach similar to the cljs.test  async  macro or how some core.async tests are written, which is basically using a &quot;latch&quot; (with countdown or not), the loop can be used as is, even without the refactoring. I&apos;ll try to come up with an example next week "><a href="#t1484070214000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">17:43:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I&apos;m also not 100% sure in that the loop would have to be transformed. Using an approach similar to the cljs.test </span><code>async</code><span> macro or how some core.async tests are written, which is basically using a &quot;latch&quot; (with countdown or not), the loop can be used as is, even without the refactoring. I&apos;ll try to come up with an example next week </span></div><div id="t1484074039000155" t="2017-01-10 18:47:19 gfredericks that would surprise me"><a href="#t1484074039000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">18:47:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that would surprise me</span></div><div id="t1484075727000156" t="2017-01-10 19:15:27 nberger Yeah, thinking more about it, a different abstraction would be needed. I&apos;ll hopefully have some time to play with it next week"><a href="#t1484075727000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-10</span>Â <span class="t" onclick="H(this)">19:15:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Yeah, thinking more about it, a different abstraction would be needed. I&apos;ll hopefully have some time to play with it next week</span></div><div id="t1484363214000157" t="2017-01-14 03:06:54 gfredericks Nothing like a good tweet about test.check  https://twitter.com/SirFashinaTaiwo/status/819973439469416448"><a href="#t1484363214000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-14</span>Â <span class="t" onclick="H(this)">03:06:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Nothing like a good tweet about test.check </span><a href="https://twitter.com/SirFashinaTaiwo/status/819973439469416448" target="_blank">https://twitter.com/SirFashinaTaiwo/status/819973439469416448</a></div><div id="t1484363255000159" t="2017-01-14 03:07:35 lucasbradstreet Hah"><a href="#t1484363255000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-14</span>Â <span class="t" onclick="H(this)">03:07:35</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Hah</span></div><div id="t1484363264000160" t="2017-01-14 03:07:44 lucasbradstreet test.check politics please"><a href="#t1484363264000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-14</span>Â <span class="t" onclick="H(this)">03:07:44</span>Â Â Â Â Â lucasbradstreetÂ </span><span>test.check politics please</span></div><div id="t1484579359000162" t="2017-01-16 15:09:19 danstone I want to write a generator that zipmaps values in coll-a to values in coll-b, but with the restriction that each entry in coll-a will be present in keys of the resulting map. Is this possible?"><a href="#t1484579359000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">15:09:19</span>Â Â Â Â Â Â Â Â Â Â Â Â danstoneÂ </span><span>I want to write a generator that zipmaps values in coll-a to values in coll-b, but with the restriction that each entry in coll-a will be present in keys of the resulting map. Is this possible?</span></div><div id="t1484579822000163" t="2017-01-16 15:17:02 danstone I&apos;ve got something like this
 (let [a [1 2 3]
           b [:foo :bar]]
       (gen/fmap (partial apply zipmap)
                 (gen/tuple
                   (gen/shuffle a)
                   (gen/return (cycle b)))))
"><a href="#t1484579822000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">15:17:02</span>Â Â Â Â Â Â Â Â Â Â Â Â danstoneÂ </span><span>I&apos;ve got something like this
</span><pre>(let [a [1 2 3]
           b [:foo :bar]]
       (gen/fmap (partial apply zipmap)
                 (gen/tuple
                   (gen/shuffle a)
                   (gen/return (cycle b)))))
</pre></div><div id="t1484579838000164" t="2017-01-16 15:17:18 danstone not sure if there is a better way to do it"><a href="#t1484579838000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">15:17:18</span>Â Â Â Â Â Â Â Â Â Â Â Â danstoneÂ </span><span>not sure if there is a better way to do it</span></div><div id="t1484583047000167" t="2017-01-16 16:10:47 gfredericks how about  (let [a [1 2 3], b [:foo :bar]] (gen/let [vals (gen/vector (gen/elements b) (count a))] (zipmap a vals)))  @danstone"><a href="#t1484583047000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">16:10:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>how about </span><code>(let [a [1 2 3], b [:foo :bar]] (gen/let [vals (gen/vector (gen/elements b) (count a))] (zipmap a vals)))</code><span> @danstone</span></div><div id="t1484583423000168" t="2017-01-16 16:17:03 danstone Thats great - thanks @gfredericks"><a href="#t1484583423000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">16:17:03</span>Â Â Â Â Â Â Â Â Â Â Â Â danstoneÂ </span><span>Thats great - thanks @gfredericks</span></div><div id="t1484583643000169" t="2017-01-16 16:20:43 gfredericks np"><a href="#t1484583643000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-01-16</span>Â <span class="t" onclick="H(this)">16:20:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>np</span></div><div id="t1486644052000173" t="2017-02-09 12:40:52 gfredericks I think test.check should have builtin generators for uniform doubles and uniform integers"><a href="#t1486644052000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:40:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think test.check should have builtin generators for uniform doubles and uniform integers</span></div><div id="t1486644084000174" t="2017-02-09 12:41:24 gfredericks since those can be useful tools for building other generators"><a href="#t1486644084000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:41:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>since those can be useful tools for building other generators</span></div><div id="t1486644095000175" t="2017-02-09 12:41:35 gfredericks each is a bit tricky though"><a href="#t1486644095000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:41:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>each is a bit tricky though</span></div><div id="t1486644119000176" t="2017-02-09 12:41:59 gfredericks A) for uniform doubles, should the value shrink? how exactly?"><a href="#t1486644119000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:41:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>A) for uniform doubles, should the value shrink? how exactly?</span></div><div id="t1486644173000177" t="2017-02-09 12:42:53 gfredericks B) for uniform integers, how should the clj and cljs versions relate? clj could provide arbitrary ranges of integers, while cljs is natively limited to Â±2^53"><a href="#t1486644173000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:42:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>B) for uniform integers, how should the clj and cljs versions relate? clj could provide arbitrary ranges of integers, while cljs is natively limited to Â±2^53</span></div><div id="t1486644233000178" t="2017-02-09 12:43:53 gfredericks cljs could do something fancy where it allows goog integers as well as native integers and if you give it bounds outside of native integers it generates googs"><a href="#t1486644233000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:43:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>cljs could do something fancy where it allows goog integers as well as native integers and if you give it bounds outside of native integers it generates googs</span></div><div id="t1486644271000179" t="2017-02-09 12:44:31 gfredericks (or would it be more correct to generate types based on the types you pass in? so if you give it a couple small googs for the range it still generates googs)"><a href="#t1486644271000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:44:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(or would it be more correct to generate types based on the types you pass in? so if you give it a couple small googs for the range it still generates googs)</span></div><div id="t1486644291000180" t="2017-02-09 12:44:51 gfredericks now that I&apos;ve said &quot;goog&quot; so many times out loud I realize that a reasonable cljs approach is just to only support the native range"><a href="#t1486644291000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:44:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>now that I&apos;ve said &quot;goog&quot; so many times out loud I realize that a reasonable cljs approach is just to only support the native range</span></div><div id="t1486644310000181" t="2017-02-09 12:45:10 gfredericks and have the generator constructor throw if you try to do anything else"><a href="#t1486644310000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">12:45:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and have the generator constructor throw if you try to do anything else</span></div><div id="t1486645203000182" t="2017-02-09 13:00:03 gfredericks okay I think I will do that.  (gen/uniform-integer min-inclusive max-exclusive)  and  gen/uniform-double"><a href="#t1486645203000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-09</span>Â <span class="t" onclick="H(this)">13:00:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay I think I will do that. </span><code>(gen/uniform-integer min-inclusive max-exclusive)</code><span> and </span><code>gen/uniform-double</code></div><div id="t1486823425000185" t="2017-02-11 14:30:25 mss hey all, new to property based testing so forgive me if this is a pretty simplistic question. 

whatâ€™s the idiomatic way to apply filtering functions to keys and values of generated maps? 

seems I could use  fmap  as a filtering function or  such-that  w a predicate, but I wanted to know if there are ramifications to using one over another"><a href="#t1486823425000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span>Â <span class="t" onclick="H(this)">14:30:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>hey all, new to property based testing so forgive me if this is a pretty simplistic question. 

whatâ€™s the idiomatic way to apply filtering functions to keys and values of generated maps? 

seems I could use </span><code>fmap</code><span> as a filtering function or </span><code>such-that</code><span> w a predicate, but I wanted to know if there are ramifications to using one over another</span></div><div id="t1486830303000186" t="2017-02-11 16:25:03 alexmiller I think such-that is the preferred tool, assuming most of your generated values pass the filter"><a href="#t1486830303000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span>Â <span class="t" onclick="H(this)">16:25:03</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I think such-that is the preferred tool, assuming most of your generated values pass the filter</span></div><div id="t1486830346000187" t="2017-02-11 16:25:46 alexmiller As such-that will give up after a fixed number of attempts "><a href="#t1486830346000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-11</span>Â <span class="t" onclick="H(this)">16:25:46</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>As such-that will give up after a fixed number of attempts </span></div><div id="t1486912476000188" t="2017-02-12 15:14:36 mss that makes sense. and if Iâ€™m having trouble getting  such-that  to satisfy the predicate within a certain number of attempts,  fmap  still produces shrinkable generators correct?"><a href="#t1486912476000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-12</span>Â <span class="t" onclick="H(this)">15:14:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>that makes sense. and if Iâ€™m having trouble getting </span><code>such-that</code><span> to satisfy the predicate within a certain number of attempts, </span><code>fmap</code><span> still produces shrinkable generators correct?</span></div><div id="t1486913497000189" t="2017-02-12 15:31:37 gfredericks @mss definitely; anything with  fmap  is likely more efficient than  such-that  as well, since it doesn&apos;t need to generate extra stuff"><a href="#t1486913497000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-12</span>Â <span class="t" onclick="H(this)">15:31:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mss definitely; anything with </span><code>fmap</code><span> is likely more efficient than </span><code>such-that</code><span> as well, since it doesn&apos;t need to generate extra stuff</span></div><div id="t1486916227000190" t="2017-02-12 16:17:07 mss awesome, thank you"><a href="#t1486916227000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-12</span>Â <span class="t" onclick="H(this)">16:17:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>awesome, thank you</span></div><div id="t1488060494000192" t="2017-02-25 22:08:14 mss hey all, newbie test.check question. 

how would I go about creating a generator for something like java date objects? 

Iâ€™ve found obv clojure.data.generators/date, which produces random date objects. 

Iâ€™m missing how to utilize that fn to produce a generator I could use in e.g. specs"><a href="#t1488060494000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">22:08:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>hey all, newbie test.check question. 

how would I go about creating a generator for something like java date objects? 

Iâ€™ve found obv clojure.data.generators/date, which produces random date objects. 

Iâ€™m missing how to utilize that fn to produce a generator I could use in e.g. specs</span></div><div id="t1488061831000193" t="2017-02-25 22:30:31 mss I can use  return  but from what I can tell from the documentation, the value returned by the call should always be the same, as opposed to something randomized"><a href="#t1488061831000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">22:30:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>I can use </span><code>return</code><span> but from what I can tell from the documentation, the value returned by the call should always be the same, as opposed to something randomized</span></div><div id="t1488064042000194" t="2017-02-25 23:07:22 gfredericks @mss you can&apos;t use things in clojure.data.generators for test.check"><a href="#t1488064042000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">23:07:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mss you can&apos;t use things in clojure.data.generators for test.check</span></div><div id="t1488064066000195" t="2017-02-25 23:07:46 gfredericks a super easy option is  (gen/fmap #(java.util.Date. %) gen/large-integer)"><a href="#t1488064066000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">23:07:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a super easy option is </span><code>(gen/fmap #(java.util.Date. %) gen/large-integer)</code></div><div id="t1488064076000196" t="2017-02-25 23:07:56 gfredericks if you don&apos;t care about the distribution at all that will suffice"><a href="#t1488064076000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">23:07:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you don&apos;t care about the distribution at all that will suffice</span></div><div id="t1488064213000197" t="2017-02-25 23:10:13 mss wonderful, thanks for the feedback"><a href="#t1488064213000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">23:10:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â mssÂ </span><span>wonderful, thanks for the feedback</span></div><div id="t1488064218000198" t="2017-02-25 23:10:18 gfredericks np"><a href="#t1488064218000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-25</span>Â <span class="t" onclick="H(this)">23:10:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>np</span></div><div id="t1488411987000200" t="2017-03-01 23:46:27 andrea.crotti I was wondering, if I have some constraints I want to apply with  such-that"><a href="#t1488411987000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span>Â <span class="t" onclick="H(this)">23:46:27</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>I was wondering, if I have some constraints I want to apply with </span><code>such-that</code></div><div id="t1488412007000201" t="2017-03-01 23:46:47 andrea.crotti should they be as early as possible in the generator definition or as late as possible?"><a href="#t1488412007000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span>Â <span class="t" onclick="H(this)">23:46:47</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>should they be as early as possible in the generator definition or as late as possible?</span></div><div id="t1488412020000202" t="2017-03-01 23:47:00 andrea.crotti I would guess better to cut early to avoid extra computation"><a href="#t1488412020000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span>Â <span class="t" onclick="H(this)">23:47:00</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>I would guess better to cut early to avoid extra computation</span></div><div id="t1488412053000203" t="2017-03-01 23:47:33 andrea.crotti creating some generators for this pet project  https://github.com/AndreaCrotti/scrabble/blob/master/test/clj/scrabble/core_test.clj#L114"><a href="#t1488412053000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span>Â <span class="t" onclick="H(this)">23:47:33</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>creating some generators for this pet project </span><a href="https://github.com/AndreaCrotti/scrabble/blob/master/test/clj/scrabble/core_test.clj#L114" target="_blank">https://github.com/AndreaCrotti/scrabble/blob/master/test/clj/scrabble/core_test.clj#L114</a></div><div id="t1488412062000205" t="2017-03-01 23:47:42 andrea.crotti (and it&apos;s pretty awesome actually I have to say)"><a href="#t1488412062000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-01</span>Â <span class="t" onclick="H(this)">23:47:42</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>(and it&apos;s pretty awesome actually I have to say)</span></div><div id="t1488418010000206" t="2017-03-02 01:26:50 gfredericks @andrea.crotti yep, earlier is better as you say"><a href="#t1488418010000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">01:26:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@andrea.crotti yep, earlier is better as you say</span></div><div id="t1488446401000207" t="2017-03-02 09:20:01 andrea.crotti cool thanks @gfredericks"><a href="#t1488446401000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">09:20:01</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>cool thanks @gfredericks</span></div><div id="t1488446423000208" t="2017-03-02 09:20:23 andrea.crotti another thing, suppose I have a bag with a limited number of objects in it per type"><a href="#t1488446423000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">09:20:23</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>another thing, suppose I have a bag with a limited number of objects in it per type</span></div><div id="t1488446469000209" t="2017-03-02 09:21:09 andrea.crotti at the moment what I&apos;m doing is to generate sequences picking random types and applying constraints to be sure there are never too many of a certain type"><a href="#t1488446469000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">09:21:09</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>at the moment what I&apos;m doing is to generate sequences picking random types and applying constraints to be sure there are never too many of a certain type</span></div><div id="t1488446514000210" t="2017-03-02 09:21:54 andrea.crotti I guess there is probably a more efficient way?
in theory it&apos;s just a random selection in a list, removing the element selected each time"><a href="#t1488446514000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">09:21:54</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>I guess there is probably a more efficient way?
in theory it&apos;s just a random selection in a list, removing the element selected each time</span></div><div id="t1488446535000211" t="2017-03-02 09:22:15 andrea.crotti any more idiomatic way to do that with test.check @gfredericks ?"><a href="#t1488446535000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">09:22:15</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>any more idiomatic way to do that with test.check @gfredericks ?</span></div><div id="t1488450038000212" t="2017-03-02 10:20:38 andrea.crotti btw it looks like it&apos;s not possible to file an issue  here  https://github.com/clojure/test.check"><a href="#t1488450038000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">10:20:38</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>btw it looks like it&apos;s not possible to file an issue  here </span><a href="https://github.com/clojure/test.check" target="_blank">https://github.com/clojure/test.check</a></div><div id="t1488450056000214" t="2017-03-02 10:20:56 andrea.crotti and there is no mention in the readme about how to do that either"><a href="#t1488450056000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">10:20:56</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>and there is no mention in the readme about how to do that either</span></div><div id="t1488465121000215" t="2017-03-02 14:32:01 gfredericks @andrea.crotti clojure and all the contribs are managed on  http://dev.clojure.org/jira"><a href="#t1488465121000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:32:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@andrea.crotti clojure and all the contribs are managed on </span><a href="http://dev.clojure.org/jira" target="_blank">http://dev.clojure.org/jira</a></div><div id="t1488465181000216" t="2017-03-02 14:33:01 gfredericks This is mentioned in the readme under Contributing"><a href="#t1488465181000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:33:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This is mentioned in the readme under Contributing</span></div><div id="t1488465295000217" t="2017-03-02 14:34:55 gfredericks I don&apos;t quite understand the requirements for your bag of limited number of objects question -- it would help if you could share the code you have that does that"><a href="#t1488465295000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:34:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t quite understand the requirements for your bag of limited number of objects question -- it would help if you could share the code you have that does that</span></div><div id="t1488465298000218" t="2017-03-02 14:34:58 andrea.crotti Ah sorry my bad "><a href="#t1488465298000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:34:58</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>Ah sorry my bad </span></div><div id="t1488465322000219" t="2017-03-02 14:35:22 andrea.crotti It&apos;s the link I shared yesterday "><a href="#t1488465322000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:35:22</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>It&apos;s the link I shared yesterday </span></div><div id="t1488465343000220" t="2017-03-02 14:35:43 andrea.crotti Just the usual scrabble bag of letters "><a href="#t1488465343000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:35:43</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>Just the usual scrabble bag of letters </span></div><div id="t1488465388000221" t="2017-03-02 14:36:28 gfredericks Oh so the main constraint is you can&apos;t have too many of each letter? "><a href="#t1488465388000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:36:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh so the main constraint is you can&apos;t have too many of each letter? </span></div><div id="t1488465406000222" t="2017-03-02 14:36:46 andrea.crotti Yes, there is a max quantity for each "><a href="#t1488465406000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:36:46</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>Yes, there is a max quantity for each </span></div><div id="t1488465429000223" t="2017-03-02 14:37:09 andrea.crotti And applying constraints would work but I bet it&apos;s not really efficient "><a href="#t1488465429000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:37:09</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>And applying constraints would work but I bet it&apos;s not really efficient </span></div><div id="t1488465444000224" t="2017-03-02 14:37:24 gfredericks Do you care about distribution/shrinking?"><a href="#t1488465444000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:37:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Do you care about distribution/shrinking?</span></div><div id="t1488465446000225" t="2017-03-02 14:37:26 andrea.crotti Maybe I can write my own generator "><a href="#t1488465446000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:37:26</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>Maybe I can write my own generator </span></div><div id="t1488465475000226" t="2017-03-02 14:37:55 andrea.crotti Potentially yes "><a href="#t1488465475000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:37:55</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>Potentially yes </span></div><div id="t1488465579000227" t="2017-03-02 14:39:39 gfredericks One idea is to generate a size (gen/nat) and a shuffling of a complete collection of letters,  and then fmap with (take size shuffled)"><a href="#t1488465579000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:39:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>One idea is to generate a size (gen/nat) and a shuffling of a complete collection of letters,  and then fmap with (take size shuffled)</span></div><div id="t1488465601000228" t="2017-03-02 14:40:01 gfredericks gen/shuffle for doing the shuffling"><a href="#t1488465601000228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:40:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gen/shuffle for doing the shuffling</span></div><div id="t1488465658000229" t="2017-03-02 14:40:58 gfredericks That still does some throwaway work but it&apos;s at least conceptually simple and easy to tweak"><a href="#t1488465658000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:40:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That still does some throwaway work but it&apos;s at least conceptually simple and easy to tweak</span></div><div id="t1488465684000230" t="2017-03-02 14:41:24 gfredericks And gives you a realistic distribution in a certain sense"><a href="#t1488465684000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">14:41:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And gives you a realistic distribution in a certain sense</span></div><div id="t1488470804000231" t="2017-03-02 16:06:44 andrea.crotti ah cool yes I can check"><a href="#t1488470804000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:06:44</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>ah cool yes I can check</span></div><div id="t1488470810000232" t="2017-03-02 16:06:50 andrea.crotti thanks for the idea"><a href="#t1488470810000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:06:50</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>thanks for the idea</span></div><div id="t1488470822000233" t="2017-03-02 16:07:02 andrea.crotti writing your own generator would be problematic?"><a href="#t1488470822000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:07:02</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>writing your own generator would be problematic?</span></div><div id="t1488470863000234" t="2017-03-02 16:07:43 andrea.crotti about the issue I wanted to raise, I just wanted to say that now both &quot;generators&quot; and &quot;combinators&quot; are both in the same namespace"><a href="#t1488470863000234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:07:43</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>about the issue I wanted to raise, I just wanted to say that now both &quot;generators&quot; and &quot;combinators&quot; are both in the same namespace</span></div><div id="t1488470893000235" t="2017-03-02 16:08:13 andrea.crotti and even have the same prefixed name, even if they have two quite different roles from my undertanding"><a href="#t1488470893000235" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:08:13</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>and even have the same prefixed name, even if they have two quite different roles from my undertanding</span></div><div id="t1488470922000236" t="2017-03-02 16:08:42 andrea.crotti that&apos;s all I wanted to mention really"><a href="#t1488470922000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:08:42</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>that&apos;s all I wanted to mention really</span></div><div id="t1488473154000237" t="2017-03-02 16:45:54 gfredericks @andrea.crotti what do you mean by &quot;writing your own generator&quot;? I would call what I just described writing your own generator"><a href="#t1488473154000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:45:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@andrea.crotti what do you mean by &quot;writing your own generator&quot;? I would call what I just described writing your own generator</span></div><div id="t1488473206000238" t="2017-03-02 16:46:46 andrea.crotti ah ok but if it&apos;s just built using the &quot;official&quot; combinators and generators"><a href="#t1488473206000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:46:46</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>ah ok but if it&apos;s just built using the &quot;official&quot; combinators and generators</span></div><div id="t1488473211000239" t="2017-03-02 16:46:51 andrea.crotti does it count as my custom generator?"><a href="#t1488473211000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:46:51</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>does it count as my custom generator?</span></div><div id="t1488473300000240" t="2017-03-02 16:48:20 gfredericks @andrea.crotti test.check is designed so that you shouldn&apos;t need to go beyond those"><a href="#t1488473300000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:48:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@andrea.crotti test.check is designed so that you shouldn&apos;t need to go beyond those</span></div><div id="t1488473315000241" t="2017-03-02 16:48:35 gfredericks so we don&apos;t usually talk about anything more custom than that"><a href="#t1488473315000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:48:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so we don&apos;t usually talk about anything more custom than that</span></div><div id="t1488473550000242" t="2017-03-02 16:52:30 gfredericks if you have something you think you can&apos;t do with the combinators I&apos;d be happy to look at it"><a href="#t1488473550000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">16:52:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you have something you think you can&apos;t do with the combinators I&apos;d be happy to look at it</span></div><div id="t1488475149000243" t="2017-03-02 17:19:09 andrea.crotti ok great thanks"><a href="#t1488475149000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-02</span>Â <span class="t" onclick="H(this)">17:19:09</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>ok great thanks</span></div><div id="t1488817076000246" t="2017-03-06 16:17:56 peeja Is there any way to generate a value (or a sequence of values) from a generator using a custom seed? It looks to me like the only place you can set the seed (that&apos;s a public interface) is in  quick-check  itself."><a href="#t1488817076000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">16:17:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Is there any way to generate a value (or a sequence of values) from a generator using a custom seed? It looks to me like the only place you can set the seed (that&apos;s a public interface) is in </span><code>quick-check</code><span> itself.</span></div><div id="t1488820273000247" t="2017-03-06 17:11:13 peeja It looks like  gen/vector  with a min/max length ignores  size . That is, I expected  (gen/generate (gen/vector gen/string 0 10) 0)  to generate an empty vector, but it doesn&apos;t (any more often than it would with no  size  given)."><a href="#t1488820273000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:11:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>It looks like </span><code>gen/vector</code><span> with a min/max length ignores </span><code>size</code><span>. That is, I expected </span><code>(gen/generate (gen/vector gen/string 0 10) 0)</code><span> to generate an empty vector, but it doesn&apos;t (any more often than it would with no </span><code>size</code><span> given).</span></div><div id="t1488820281000248" t="2017-03-06 17:11:21 peeja Is my expectation wrong, or is that a bug?"><a href="#t1488820281000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:11:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Is my expectation wrong, or is that a bug?</span></div><div id="t1488820717000249" t="2017-03-06 17:18:37 gfredericks @peeja ignores size when picking the vector size, probably; it doesn&apos;t ignore size entirely since it&apos;ll use it when generating elements from the passed-in generator"><a href="#t1488820717000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:18:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@peeja ignores size when picking the vector size, probably; it doesn&apos;t ignore size entirely since it&apos;ll use it when generating elements from the passed-in generator</span></div><div id="t1488820726000250" t="2017-03-06 17:18:46 gfredericks I think you could call it a half-bug"><a href="#t1488820726000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:18:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think you could call it a half-bug</span></div><div id="t1488820731000251" t="2017-03-06 17:18:51 peeja Yeah, that&apos;s what I mean"><a href="#t1488820731000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:18:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Yeah, that&apos;s what I mean</span></div><div id="t1488820740000252" t="2017-03-06 17:19:00 gfredericks I&apos;d be happy to have a ticket about it if it&apos;s a problem for you"><a href="#t1488820740000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:19:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d be happy to have a ticket about it if it&apos;s a problem for you</span></div><div id="t1488820747000253" t="2017-03-06 17:19:07 gfredericks trying to think of a workaround"><a href="#t1488820747000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:19:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>trying to think of a workaround</span></div><div id="t1488820748000254" t="2017-03-06 17:19:08 peeja Awesome, will do."><a href="#t1488820748000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:19:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Awesome, will do.</span></div><div id="t1488820803000255" t="2017-03-06 17:20:03 gfredericks @peeja w.r.t. custom seeds, you&apos;d have to resort to not-quite-public-API calls such as  (rose/root (gen/call-gen g (random/make-random seed) size))"><a href="#t1488820803000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:20:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@peeja w.r.t. custom seeds, you&apos;d have to resort to not-quite-public-API calls such as </span><code>(rose/root (gen/call-gen g (random/make-random seed) size))</code></div><div id="t1488820821000256" t="2017-03-06 17:20:21 gfredericks I would consider making something like that first-class if there was a compelling general need for it"><a href="#t1488820821000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:20:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I would consider making something like that first-class if there was a compelling general need for it</span></div><div id="t1488820948000257" t="2017-03-06 17:22:28 peeja In my case, I&apos;m trying to determine whether a keyword&apos;s spec specifies a sequence or not by generating the simplest (cheapest) value I can and asking if it&apos;s  sequential? .  clojure.spec/every &apos;s generator uses a max/min even if you don&apos;t give it one, which means I&apos;m always generating elements. Generating an empty vector/list would be better, but it&apos;s not a dealbreaker, considering the size still keeps the complexity of what it generates pretty low."><a href="#t1488820948000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:22:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>In my case, I&apos;m trying to determine whether a keyword&apos;s spec specifies a sequence or not by generating the simplest (cheapest) value I can and asking if it&apos;s </span><code>sequential?</code><span>. </span><code>clojure.spec/every</code><span>&apos;s generator uses a max/min even if you don&apos;t give it one, which means I&apos;m always generating elements. Generating an empty vector/list would be better, but it&apos;s not a dealbreaker, considering the size still keeps the complexity of what it generates pretty low.</span></div><div id="t1488820971000258" t="2017-03-06 17:22:51 peeja And for the custom seed, thanks, I&apos;ll try that!"><a href="#t1488820971000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:22:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>And for the custom seed, thanks, I&apos;ll try that!</span></div><div id="t1488821029000259" t="2017-03-06 17:23:49 gfredericks every  can&apos;t generate an empty collection? that sounds like a spec bug"><a href="#t1488821029000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:23:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>every</code><span> can&apos;t generate an empty collection? that sounds like a spec bug</span></div><div id="t1488821136000260" t="2017-03-06 17:25:36 peeja It can, but I can&apos;t force it to"><a href="#t1488821136000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:25:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>It can, but I can&apos;t force it to</span></div><div id="t1488821174000261" t="2017-03-06 17:26:14 peeja I&apos;d like  (gen/generate (s/every string?) 0)  to always be empty"><a href="#t1488821174000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:26:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I&apos;d like </span><code>(gen/generate (s/every string?) 0)</code><span> to always be empty</span></div><div id="t1488821442000262" t="2017-03-06 17:30:42 gfredericks Oh I see. Spec does some manual sizing that I&apos;m not sure is justified in every case, and this might be an example of that"><a href="#t1488821442000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">17:30:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh I see. Spec does some manual sizing that I&apos;m not sure is justified in every case, and this might be an example of that</span></div><div id="t1488826731000263" t="2017-03-06 18:58:51 gfredericks the question of a better distribution for  gen/vector  is interesting, since users could say something like  (gen/vector g 0 40000)  and it&apos;d seem weird to only give them relatively small vectors"><a href="#t1488826731000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">18:58:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the question of a better distribution for </span><code>gen/vector</code><span> is interesting, since users could say something like </span><code>(gen/vector g 0 40000)</code><span> and it&apos;d seem weird to only give them relatively small vectors</span></div><div id="t1488826748000264" t="2017-03-06 18:59:08 gfredericks I&apos;m reworking the distribution of  gen/large-integer  and I think something based on that could work"><a href="#t1488826748000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-06</span>Â <span class="t" onclick="H(this)">18:59:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m reworking the distribution of </span><code>gen/large-integer</code><span> and I think something based on that could work</span></div><div id="t1489063707498194" t="2017-03-09 12:48:27 jmglov I&apos;m sorry if I&apos;m repeating an oft-asked and answered question, but I&apos;m really struggling with how to write properties to test my functionality without re-implementing the code I&apos;m testing. Does anyone have a solid resource with some nice examples that could lead me out of the wilderness here?"><a href="#t1489063707498194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">12:48:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â jmglovÂ </span><span>I&apos;m sorry if I&apos;m repeating an oft-asked and answered question, but I&apos;m really struggling with how to write properties to test my functionality without re-implementing the code I&apos;m testing. Does anyone have a solid resource with some nice examples that could lead me out of the wilderness here?</span></div><div id="t1489072558952044" t="2017-03-09 15:15:58 nwjsmith @jmglov  https://fsharpforfunandprofit.com/posts/property-based-testing-2/"><a href="#t1489072558952044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">15:15:58</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@jmglov </span><a href="https://fsharpforfunandprofit.com/posts/property-based-testing-2/" target="_blank">https://fsharpforfunandprofit.com/posts/property-based-testing-2/</a></div><div id="t1489074778440024" t="2017-03-09 15:52:58 alexmiller @jmglov I like to say that generative testing is easy - the only hard parts are the generators and the properties"><a href="#t1489074778440024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">15:52:58</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>@jmglov I like to say that generative testing is easy - the only hard parts are the generators and the properties</span></div><div id="t1489074856458936" t="2017-03-09 15:54:16 alexmiller I took a stab at this topic of finding good properties in Clojure Applied, ch 8"><a href="#t1489074856458936" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">15:54:16</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I took a stab at this topic of finding good properties in Clojure Applied, ch 8</span></div><div id="t1489074895467652" t="2017-03-09 15:54:55 alexmiller I havenâ€™t seen that link from @nwjsmith before but seems like generally good advice"><a href="#t1489074895467652" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">15:54:55</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I havenâ€™t seen that link from @nwjsmith before but seems like generally good advice</span></div><div id="t1489076646877547" t="2017-03-09 16:24:06 nwjsmith Iâ€™ve been working on a tool that can help with finding properties."><a href="#t1489076646877547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:24:06</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Iâ€™ve been working on a tool that can help with finding properties.</span></div><div id="t1489076701890097" t="2017-03-09 16:25:01 nwjsmith It will take a set of properties, and the arg and return generators (e.g. from specâ€™s  fdef ), and generate a mutation of the function under test"><a href="#t1489076701890097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:25:01</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>It will take a set of properties, and the arg and return generators (e.g. from specâ€™s </span><code>fdef</code><span>), and generate a mutation of the function under test</span></div><div id="t1489076735897953" t="2017-03-09 16:25:35 nwjsmith Then it will run the mutant through the properties. If the mutant passes, then the tool reports an error."><a href="#t1489076735897953" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:25:35</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Then it will run the mutant through the properties. If the mutant passes, then the tool reports an error.</span></div><div id="t1489076800913934" t="2017-03-09 16:26:40 nwjsmith It presents the mutant, which is usually very simple, and that can guide you to your next property. You play â€œwhack-a-mutantâ€ until no mutants pass."><a href="#t1489076800913934" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:26:40</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>It presents the mutant, which is usually very simple, and that can guide you to your next property. You play â€œwhack-a-mutantâ€ until no mutants pass.</span></div><div id="t1489076905939885" t="2017-03-09 16:28:25 nwjsmith An example: letâ€™s say weâ€™re writing properties for  sort , you might start with the property that the input and output lists have the same count"><a href="#t1489076905939885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:28:25</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>An example: letâ€™s say weâ€™re writing properties for </span><code>sort</code><span>, you might start with the property that the input and output lists have the same count</span></div><div id="t1489076984959453" t="2017-03-09 16:29:44 nwjsmith This tool will generate a really simple mutant that passes all the properties, like  (fn [x] (if (= x [1]) [2] (sort x)))"><a href="#t1489076984959453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:29:44</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>This tool will generate a really simple mutant that passes all the properties, like </span><code>(fn [x] (if (= x [1]) [2] (sort x)))</code></div><div id="t1489077069980511" t="2017-03-09 16:31:09 nwjsmith We want to whack this mutant (which isnâ€™t our  sort  function). So we write a property that the input and output lists have to have the same elements. Our tool finds a new mutant that passes our properties  (fn [x] (if (= x [1 2]) [2 1] (sort x)))"><a href="#t1489077069980511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:31:09</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>We want to whack this mutant (which isnâ€™t our </span><code>sort</code><span> function). So we write a property that the input and output lists have to have the same elements. Our tool finds a new mutant that passes our properties </span><code>(fn [x] (if (= x [1 2]) [2 1] (sort x)))</code></div><div id="t1489077193011650" t="2017-03-09 16:33:13 nwjsmith Finally, we write a property that says the elements of the return list should be in ascending order, and the tool reports no new mutants. This means weâ€™ve written a complete set of properties"><a href="#t1489077193011650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:33:13</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Finally, we write a property that says the elements of the return list should be in ascending order, and the tool reports no new mutants. This means weâ€™ve written a complete set of properties</span></div><div id="t1489077327043232" t="2017-03-09 16:35:27 nwjsmith (itâ€™s based on  https://github.com/rudymatela/fitspec )"><a href="#t1489077327043232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span>Â <span class="t" onclick="H(this)">16:35:27</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>(itâ€™s based on </span><a href="https://github.com/rudymatela/fitspec" target="_blank">https://github.com/rudymatela/fitspec</a><span>)</span></div><div id="t1489104994244270" t="2017-03-10 00:16:34 gfredericks that&apos;s really cool"><a href="#t1489104994244270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span>Â <span class="t" onclick="H(this)">00:16:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s really cool</span></div><div id="t1489138623261496" t="2017-03-10 09:37:03 jmglov @alexmiller I have &quot;Clojure Applied&quot;, and really love it.  ğŸ™‚"><a href="#t1489138623261496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span>Â <span class="t" onclick="H(this)">09:37:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â jmglovÂ </span><span>@alexmiller I have &quot;Clojure Applied&quot;, and really love it. </span><b>ğŸ™‚</b></div><div id="t1489138833293541" t="2017-03-10 09:40:33 jmglov I&apos;ll re-read that section of chapter 8. So far, the issue I&apos;ve had with existing resources on property-based testing is that the examples have to be small enough to fit in a chapter or blog post, and thus don&apos;t cover the complexity of the type of business logic that exists in production systems."><a href="#t1489138833293541" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span>Â <span class="t" onclick="H(this)">09:40:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â jmglovÂ </span><span>I&apos;ll re-read that section of chapter 8. So far, the issue I&apos;ve had with existing resources on property-based testing is that the examples have to be small enough to fit in a chapter or blog post, and thus don&apos;t cover the complexity of the type of business logic that exists in production systems.</span></div><div id="t1489138880300402" t="2017-03-10 09:41:20 jmglov I feel like I&apos;m so close to enlightenment with property-based testing, but haven&apos;t had the &quot;a-ha!&quot; moment yet."><a href="#t1489138880300402" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span>Â <span class="t" onclick="H(this)">09:41:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â jmglovÂ </span><span>I feel like I&apos;m so close to enlightenment with property-based testing, but haven&apos;t had the &quot;a-ha!&quot; moment yet.</span></div><div id="t1489138961312774" t="2017-03-10 09:42:41 jmglov @nwjsmith Thanks for the link! I&apos;m really looking forward to seeing the tool you&apos;re working on, as well.  ğŸ™‚"><a href="#t1489138961312774" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-10</span>Â <span class="t" onclick="H(this)">09:42:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â jmglovÂ </span><span>@nwjsmith Thanks for the link! I&apos;m really looking forward to seeing the tool you&apos;re working on, as well. </span><b>ğŸ™‚</b></div><div id="t1491338667378294" t="2017-04-04 20:44:27 johanatan hi, is there an equivalent of  listOfN ?  list-distinct  comes close (with its  :num-elements  param) but I don&apos;t want to forbid duplicates."><a href="#t1491338667378294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">20:44:27</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>hi, is there an equivalent of </span><code>listOfN</code><span>? </span><code>list-distinct</code><span> comes close (with its </span><code>:num-elements</code><span> param) but I don&apos;t want to forbid duplicates.</span></div><div id="t1491338701388636" t="2017-04-04 20:45:01 johanatan also, is there a function to convert a list of generators to a generator of a list?"><a href="#t1491338701388636" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">20:45:01</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>also, is there a function to convert a list of generators to a generator of a list?</span></div><div id="t1491338734399071" t="2017-04-04 20:45:34 johanatan i suppose  apply gen/tuple  could do the latter"><a href="#t1491338734399071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">20:45:34</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>i suppose </span><code>apply gen/tuple</code><span> could do the latter</span></div><div id="t1491339705705981" t="2017-04-04 21:01:45 johanatan actually yes  apply gen/tuple  definitely answers my second question"><a href="#t1491339705705981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">21:01:45</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>actually yes </span><code>apply gen/tuple</code><span> definitely answers my second question</span></div><div id="t1491343252646843" t="2017-04-04 22:00:52 gfredericks @johanatan gen/vector can do it too."><a href="#t1491343252646843" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">22:00:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@johanatan gen/vector can do it too.</span></div><div id="t1491343920792187" t="2017-04-04 22:12:00 johanatan @gfredericks what about  listOfN ?"><a href="#t1491343920792187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">22:12:00</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>@gfredericks what about </span><code>listOfN</code><span>?</span></div><div id="t1491344112832033" t="2017-04-04 22:15:12 gfredericks @johanatan does that mean a fixed length list? That&apos;s what I&apos;m saying gen/vector can do, if you pass a length arg"><a href="#t1491344112832033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">22:15:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@johanatan does that mean a fixed length list? That&apos;s what I&apos;m saying gen/vector can do, if you pass a length arg</span></div><div id="t1491346185232090" t="2017-04-04 22:49:45 johanatan Oh I see. Yes a fixed length list "><a href="#t1491346185232090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">22:49:45</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>Oh I see. Yes a fixed length list </span></div><div id="t1491346188232551" t="2017-04-04 22:49:48 johanatan Thx!"><a href="#t1491346188232551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-04</span>Â <span class="t" onclick="H(this)">22:49:48</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>Thx!</span></div><div id="t1492308386449742" t="2017-04-16 02:06:26 nberger @jfntn one way is using  gen/let :
 (defn gen-with-index-and-count-using-let
    &quot;Return a generator that will return tuples of:
    [&lt;value from coll-gen&gt;
    [&lt;valid index in coll&gt;
    &lt;count within bounds of index to end of coll&gt;].&quot;
    [coll-gen]
    (gen/let [coll coll-gen
              index (gen/choose 0 (max 0 (dec (count coll))))
              bounded-count (gen/choose 0 (- (count coll) index))]
      [coll [index bounded-count]]))
"><a href="#t1492308386449742" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-16</span>Â <span class="t" onclick="H(this)">02:06:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@jfntn one way is using </span><code>gen/let</code><span>:
</span><pre>(defn gen-with-index-and-count-using-let
    &quot;Return a generator that will return tuples of:
    [&lt;value from coll-gen&gt;
    [&lt;valid index in coll&gt;
    &lt;count within bounds of index to end of coll&gt;].&quot;
    [coll-gen]
    (gen/let [coll coll-gen
              index (gen/choose 0 (max 0 (dec (count coll))))
              bounded-count (gen/choose 0 (- (count coll) index))]
      [coll [index bounded-count]]))
</pre></div><div id="t1492308537456658" t="2017-04-16 02:08:57 nberger makes it much easier to read to my eyes  ğŸ™‚"><a href="#t1492308537456658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-16</span>Â <span class="t" onclick="H(this)">02:08:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>makes it much easier to read to my eyes </span><b>ğŸ™‚</b></div><div id="t1492318938917519" t="2017-04-16 05:02:18 jfntn Ooh monads  ğŸ˜„  very nice, didnâ€™t know about this let, thank you"><a href="#t1492318938917519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-16</span>Â <span class="t" onclick="H(this)">05:02:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â jfntnÂ </span><span>Ooh monads </span><b>ğŸ˜„</b><span> very nice, didnâ€™t know about this let, thank you</span></div><div id="t1492365779135940" t="2017-04-16 18:02:59 nberger Hehe yeah, it&apos;s a macro that takes those bindings and transform them to use gen/bind so it&apos;s probably generating something similar to your original generator"><a href="#t1492365779135940" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-16</span>Â <span class="t" onclick="H(this)">18:02:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Hehe yeah, it&apos;s a macro that takes those bindings and transform them to use gen/bind so it&apos;s probably generating something similar to your original generator</span></div><div id="t1493075963545053" t="2017-04-24 23:19:23 kenny Oooo, super simple  ğŸ™‚ 
 (gen/vector-distinct gen/double {:min-elements 2
                                               :max-elements 10})
"><a href="#t1493075963545053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-24</span>Â <span class="t" onclick="H(this)">23:19:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Oooo, super simple </span><b>ğŸ™‚</b><span>
</span><pre>(gen/vector-distinct gen/double {:min-elements 2
                                               :max-elements 10})
</pre></div><div id="t1493210772804335" t="2017-04-26 12:46:12 gfredericks I&apos;m working on a biginteger generator for test.check, presumably to be used by spec as well (directly or indirectly); the main decision to make is what the distribution should be. Here&apos;s what I&apos;ve got so far, interested in any comments.

 https://gist.github.com/gfredericks/b6b59f1c531dc36017e45f2f0beeff9e"><a href="#t1493210772804335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">12:46:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m working on a biginteger generator for test.check, presumably to be used by spec as well (directly or indirectly); the main decision to make is what the distribution should be. Here&apos;s what I&apos;ve got so far, interested in any comments.

</span><a href="https://gist.github.com/gfredericks/b6b59f1c531dc36017e45f2f0beeff9e" target="_blank">https://gist.github.com/gfredericks/b6b59f1c531dc36017e45f2f0beeff9e</a></div><div id="t1493231971548604" t="2017-04-26 18:39:31 bbloom letâ€™s say i want to test some stateful thing by generating a sequence of actions to perform"><a href="#t1493231971548604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:39:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>letâ€™s say i want to test some stateful thing by generating a sequence of actions to perform</span></div><div id="t1493231982552292" t="2017-04-26 18:39:42 bbloom how do i use state to inform future generated actions?"><a href="#t1493231982552292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:39:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>how do i use state to inform future generated actions?</span></div><div id="t1493232066582422" t="2017-04-26 18:41:06 bbloom simple example: letâ€™s say i want to test a growable array class with three methods:  getLength, append, and getNth"><a href="#t1493232066582422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:41:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>simple example: letâ€™s say i want to test a growable array class with three methods:  getLength, append, and getNth</span></div><div id="t1493232084588647" t="2017-04-26 18:41:24 bbloom that was easy to test, but as soon as i wanted to test setNth, i was at a loss"><a href="#t1493232084588647" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:41:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>that was easy to test, but as soon as i wanted to test setNth, i was at a loss</span></div><div id="t1493232100594331" t="2017-04-26 18:41:40 bbloom how do i make it so that setNth can check getLength first?"><a href="#t1493232100594331" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:41:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>how do i make it so that setNth can check getLength first?</span></div><div id="t1493232142609723" t="2017-04-26 18:42:22 bbloom my current hack is to just do modulo math at the time of applying the action - but that only works for this simple example &amp; i have more complex stuff i want to test"><a href="#t1493232142609723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:42:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>my current hack is to just do modulo math at the time of applying the action - but that only works for this simple example &amp; i have more complex stuff i want to test</span></div><div id="t1493232306669351" t="2017-04-26 18:45:06 bbloom my best guest is to try defining generators recursively, deferred by an fmap or bind or something - but wasnâ€™t sure if that was a hack or recommended or what"><a href="#t1493232306669351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:45:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>my best guest is to try defining generators recursively, deferred by an fmap or bind or something - but wasnâ€™t sure if that was a hack or recommended or what</span></div><div id="t1493232344683343" t="2017-04-26 18:45:44 bbloom ie parameterize them based on a model of the state"><a href="#t1493232344683343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:45:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ie parameterize them based on a model of the state</span></div><div id="t1493232400704242" t="2017-04-26 18:46:40 alexmiller the general approach is to first build a (random) model, then produce the action list via fmap/bind"><a href="#t1493232400704242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:46:40</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>the general approach is to first build a (random) model, then produce the action list via fmap/bind</span></div><div id="t1493232464727291" t="2017-04-26 18:47:44 bbloom not 100% sure i follow. is there a super simple example somewhere?"><a href="#t1493232464727291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:47:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>not 100% sure i follow. is there a super simple example somewhere?</span></div><div id="t1493232568764887" t="2017-04-26 18:49:28 gfredericks There&apos;s a whole lib for this kind of thing I think"><a href="#t1493232568764887" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:49:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There&apos;s a whole lib for this kind of thing I think</span></div><div id="t1493232594774350" t="2017-04-26 18:49:54 gfredericks https://github.com/czan/stateful-check"><a href="#t1493232594774350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:49:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://github.com/czan/stateful-check" target="_blank">https://github.com/czan/stateful-check</a></div><div id="t1493232600776714" t="2017-04-26 18:50:00 bbloom iâ€™m looking at two such libraries now, trying to see if they clarify things for me: stateful-check and states"><a href="#t1493232600776714" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:50:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m looking at two such libraries now, trying to see if they clarify things for me: stateful-check and states</span></div><div id="t1493232619783549" t="2017-04-26 18:50:19 gfredericks I haven&apos;t used either, but I&apos;ve reviewed stateful-check a bit and it seems solid"><a href="#t1493232619783549" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:50:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I haven&apos;t used either, but I&apos;ve reviewed stateful-check a bit and it seems solid</span></div><div id="t1493232763835892" t="2017-04-26 18:52:43 bbloom thereâ€™s a non-trivial amount of code in this lib. iâ€™ll study it, but iâ€™m hoping to identify the essence of it."><a href="#t1493232763835892" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:52:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>thereâ€™s a non-trivial amount of code in this lib. iâ€™ll study it, but iâ€™m hoping to identify the essence of it.</span></div><div id="t1493232880878136" t="2017-04-26 18:54:40 gfredericks @bbloom do you understand the idea of modeling the whole interaction ahead of time?"><a href="#t1493232880878136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:54:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@bbloom do you understand the idea of modeling the whole interaction ahead of time?</span></div><div id="t1493232921892286" t="2017-04-26 18:55:21 alexmiller itâ€™s been a while since Iâ€™ve looked at collection-check but I know it does a lot of this operation kind of thing (canâ€™t remember if itâ€™s stateful though)"><a href="#t1493232921892286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:55:21</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>itâ€™s been a while since Iâ€™ve looked at collection-check but I know it does a lot of this operation kind of thing (canâ€™t remember if itâ€™s stateful though)</span></div><div id="t1493232998921093" t="2017-04-26 18:56:38 bbloom so i havenâ€™t used test-check in anger at all, but i did successfully roll my own generative/simulation testing thing in go for a wire protocol. but that was a hierarchical temporal marckov model, i didnâ€™t do shrinking, and i did all the validation later on the log file - worked mostly as a stress test for a long running system"><a href="#t1493232998921093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:56:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so i havenâ€™t used test-check in anger at all, but i did successfully roll my own generative/simulation testing thing in go for a wire protocol. but that was a hierarchical temporal marckov model, i didnâ€™t do shrinking, and i did all the validation later on the log file - worked mostly as a stress test for a long running system</span></div><div id="t1493233048939617" t="2017-04-26 18:57:28 bbloom to get multiple tests, i didnâ€™t have a backtracking generator type thing - instead just ran a bunch in parallel, since they were also testing limited hardware resources (ie physical devices)"><a href="#t1493233048939617" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:57:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>to get multiple tests, i didnâ€™t have a backtracking generator type thing - instead just ran a bunch in parallel, since they were also testing limited hardware resources (ie physical devices)</span></div><div id="t1493233061944120" t="2017-04-26 18:57:41 gfredericks I think the shrinking model is the biggest reason that the generate-everything-up-front approach works best"><a href="#t1493233061944120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:57:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the shrinking model is the biggest reason that the generate-everything-up-front approach works best</span></div><div id="t1493233061944563" t="2017-04-26 18:57:41 bbloom so i have a bit of a grasp on the concepts, but no knowledge of the specific apis"><a href="#t1493233061944563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:57:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so i have a bit of a grasp on the concepts, but no knowledge of the specific apis</span></div><div id="t1493233083952347" t="2017-04-26 18:58:03 bbloom sooo now back to your question: iâ€™m not sure what you mean â€œmodeling the whole itneraction ahead of timeâ€"><a href="#t1493233083952347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:58:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>sooo now back to your question: iâ€™m not sure what you mean â€œmodeling the whole itneraction ahead of timeâ€</span></div><div id="t1493233091955111" t="2017-04-26 18:58:11 gfredericks the only viable alternative I&apos;ve seen is the python/hypothesis approach which is extremely imperative and wildly different"><a href="#t1493233091955111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:58:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the only viable alternative I&apos;ve seen is the python/hypothesis approach which is extremely imperative and wildly different</span></div><div id="t1493233096956851" t="2017-04-26 18:58:16 bbloom @alexmiller: iâ€™m looking at collection-check, as what iâ€™m doing is quite similar. thanks"><a href="#t1493233096956851" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:58:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>@alexmiller: iâ€™m looking at collection-check, as what iâ€™m doing is quite similar. thanks</span></div><div id="t1493233159980384" t="2017-04-26 18:59:19 gfredericks @bbloom I mean the generator generates the entire intended interaction, e.g.

- insert a
- insert b
- read 0, expect a
- read 1, expect b
- etc."><a href="#t1493233159980384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:59:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@bbloom I mean the generator generates the entire intended interaction, e.g.

- insert a
- insert b
- read 0, expect a
- read 1, expect b
- etc.</span></div><div id="t1493233172985088" t="2017-04-26 18:59:32 gfredericks I believe this is essentially the idea behind stateful-check"><a href="#t1493233172985088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:59:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I believe this is essentially the idea behind stateful-check</span></div><div id="t1493233184989957" t="2017-04-26 18:59:44 gfredericks it does all the wiring-up for you"><a href="#t1493233184989957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">18:59:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it does all the wiring-up for you</span></div><div id="t1493233210999881" t="2017-04-26 19:00:10 bbloom yeah, so iâ€™m trying to test some java code that is stateful &amp; iâ€™m successfully generating a sequence of actions &amp; applying them"><a href="#t1493233210999881" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:00:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>yeah, so iâ€™m trying to test some java code that is stateful &amp; iâ€™m successfully generating a sequence of actions &amp; applying them</span></div><div id="t1493233244012844" t="2017-04-26 19:00:44 bbloom the tricky bit is the bit that stateful-check seems to address: using the state of the model in order inform the generators"><a href="#t1493233244012844" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:00:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the tricky bit is the bit that stateful-check seems to address: using the state of the model in order inform the generators</span></div><div id="t1493233308036461" t="2017-04-26 19:01:48 gfredericks &quot;Why can&apos;t I call generators in the middle of my test?&quot; is a common thing people run into; currently test.check doesn&apos;t try to give you a way to do that, but I&apos;m not 100% convinced it can&apos;t be done"><a href="#t1493233308036461" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:01:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&quot;Why can&apos;t I call generators in the middle of my test?&quot; is a common thing people run into; currently test.check doesn&apos;t try to give you a way to do that, but I&apos;m not 100% convinced it can&apos;t be done</span></div><div id="t1493233320040623" t="2017-04-26 19:02:00 gfredericks I&apos;ve thought about it a lot; the shrinking is the hard part"><a href="#t1493233320040623" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:02:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve thought about it a lot; the shrinking is the hard part</span></div><div id="t1493233358054483" t="2017-04-26 19:02:38 bbloom the fact that itâ€™s asked for a lot leads me to wonder: is it a misunderstanding that leads to it being wanted? or it just hard to provide?"><a href="#t1493233358054483" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:02:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the fact that itâ€™s asked for a lot leads me to wonder: is it a misunderstanding that leads to it being wanted? or it just hard to provide?</span></div><div id="t1493233364056933" t="2017-04-26 19:02:44 bbloom ie should i be thinking about it differently?"><a href="#t1493233364056933" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:02:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ie should i be thinking about it differently?</span></div><div id="t1493233412073995" t="2017-04-26 19:03:32 alexmiller We&apos;ve done a number of sim testing projects at Cognitect that pushed this kind of thing really far"><a href="#t1493233412073995" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:03:32</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>We&apos;ve done a number of sim testing projects at Cognitect that pushed this kind of thing really far</span></div><div id="t1493233445085563" t="2017-04-26 19:04:05 alexmiller But there you don&apos;t really care about shrinking at all"><a href="#t1493233445085563" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:04:05</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>But there you don&apos;t really care about shrinking at all</span></div><div id="t1493233491101795" t="2017-04-26 19:04:51 bbloom glad to hear that - since i had no use for shrinking in my sim test and wondered if i was just missing out"><a href="#t1493233491101795" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:04:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>glad to hear that - since i had no use for shrinking in my sim test and wondered if i was just missing out</span></div><div id="t1493233515110330" t="2017-04-26 19:05:15 alexmiller I&apos;d ask @luke about some of those ideas - he has some libs that I think are oss that do statistical / stateful generative stuff"><a href="#t1493233515110330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:05:15</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I&apos;d ask @luke about some of those ideas - he has some libs that I think are oss that do statistical / stateful generative stuff</span></div><div id="t1493233522112577" t="2017-04-26 19:05:22 bbloom this is the first time i wanted to test something that felt complex enough to justify test check and not complex enough to justify distributed sim testing"><a href="#t1493233522112577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:05:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>this is the first time i wanted to test something that felt complex enough to justify test check and not complex enough to justify distributed sim testing</span></div><div id="t1493233525113776" t="2017-04-26 19:05:25 gfredericks it should be possible to write a thingamajigger to call generators in the test deterministically, without doing any shrinking"><a href="#t1493233525113776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:05:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it should be possible to write a thingamajigger to call generators in the test deterministically, without doing any shrinking</span></div><div id="t1493233662160522" t="2017-04-26 19:07:42 alexmiller In general with sim testing you want some simple (ish) model how users use the system such that you can generate realistic (ish) streams of random activity"><a href="#t1493233662160522" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:07:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>In general with sim testing you want some simple (ish) model how users use the system such that you can generate realistic (ish) streams of random activity</span></div><div id="t1493233707175975" t="2017-04-26 19:08:27 bbloom yeah - in my case, i simulated a police officer on patrol. turning cameras on and off, watching videos, driving to and from places with or without wifi, etc"><a href="#t1493233707175975" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:08:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>yeah - in my case, i simulated a police officer on patrol. turning cameras on and off, watching videos, driving to and from places with or without wifi, etc</span></div><div id="t1493233719179744" t="2017-04-26 19:08:39 bbloom worked nicely"><a href="#t1493233719179744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:08:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>worked nicely</span></div><div id="t1493233740187176" t="2017-04-26 19:09:00 alexmiller Yeah, exactly"><a href="#t1493233740187176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:09:00</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Yeah, exactly</span></div><div id="t1493233757192722" t="2017-04-26 19:09:17 alexmiller Our domains were a lot more complicated :)"><a href="#t1493233757192722" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:09:17</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Our domains were a lot more complicated :)</span></div><div id="t1493233769196922" t="2017-04-26 19:09:29 bbloom iâ€™d imagine"><a href="#t1493233769196922" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:09:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™d imagine</span></div><div id="t1493233794205299" t="2017-04-26 19:09:54 alexmiller Cognitect does arch consult gigs, just saying :)"><a href="#t1493233794205299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:09:54</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Cognitect does arch consult gigs, just saying :)</span></div><div id="t1493233821214698" t="2017-04-26 19:10:21 bbloom ğŸ™‚"><a href="#t1493233821214698" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:10:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><b>ğŸ™‚</b></div><div id="t1493233843221791" t="2017-04-26 19:10:43 gfredericks ...arch?"><a href="#t1493233843221791" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:10:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>...arch?</span></div><div id="t1493233887236824" t="2017-04-26 19:11:27 alexmiller architecture"><a href="#t1493233887236824" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:11:27</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>architecture</span></div><div id="t1493233905242653" t="2017-04-26 19:11:45 gfredericks like...CPU chips? big buildings?"><a href="#t1493233905242653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:11:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>like...CPU chips? big buildings?</span></div><div id="t1493233913245394" t="2017-04-26 19:11:53 gfredericks large-scale computer systems?"><a href="#t1493233913245394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:11:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>large-scale computer systems?</span></div><div id="t1493233919247167" t="2017-04-26 19:11:59 alexmiller That"><a href="#t1493233919247167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:11:59</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>That</span></div><div id="t1493233932251350" t="2017-04-26 19:12:12 alexmiller Really any scale :)"><a href="#t1493233932251350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:12:12</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Really any scale :)</span></div><div id="t1493233943255414" t="2017-04-26 19:12:23 alexmiller Architecture review "><a href="#t1493233943255414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:12:23</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Architecture review </span></div><div id="t1493234033284572" t="2017-04-26 19:13:53 bbloom i donâ€™t work on that any more, but the team seems quite happy with the architecture i built for them - which is largely clojure/hickey-inspired, thank you very much  ğŸ˜‰"><a href="#t1493234033284572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:13:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i donâ€™t work on that any more, but the team seems quite happy with the architecture i built for them - which is largely clojure/hickey-inspired, thank you very much </span><b>ğŸ˜‰</b></div><div id="t1493234173328304" t="2017-04-26 19:16:13 bbloom @gfredericks i donâ€™t quite understand the api well enough yet to know if that code is useful to me"><a href="#t1493234173328304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:16:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>@gfredericks i donâ€™t quite understand the api well enough yet to know if that code is useful to me</span></div><div id="t1493234186332268" t="2017-04-26 19:16:26 gfredericks @bbloom I added an example"><a href="#t1493234186332268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:16:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@bbloom I added an example</span></div><div id="t1493234204338113" t="2017-04-26 19:16:44 gfredericks the idea is you generate one of these  f s and then you can call it from the body of your property as many times as you want with arbitrary generators"><a href="#t1493234204338113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:16:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the idea is you generate one of these </span><code>f</code><span>s and then you can call it from the body of your property as many times as you want with arbitrary generators</span></div><div id="t1493234255354413" t="2017-04-26 19:17:35 gfredericks it&apos;s a stateful function, whose state is randomness derived from the normal test.check source of randomness, so the whole thing should be deterministic as long as you don&apos;t call the function in nondeterministic ways"><a href="#t1493234255354413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:17:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s a stateful function, whose state is randomness derived from the normal test.check source of randomness, so the whole thing should be deterministic as long as you don&apos;t call the function in nondeterministic ways</span></div><div id="t1493234292366392" t="2017-04-26 19:18:12 bbloom iâ€™m not sure i need something that sophisticated"><a href="#t1493234292366392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:18:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m not sure i need something that sophisticated</span></div><div id="t1493234370392723" t="2017-04-26 19:19:30 gfredericks so e.g., if you have your stateful java collection and want to generate a valid index, you&apos;d call  (f (gen/choose 0 (dec (.getLength thingamajig))))"><a href="#t1493234370392723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:19:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so e.g., if you have your stateful java collection and want to generate a valid index, you&apos;d call </span><code>(f (gen/choose 0 (dec (.getLength thingamajig))))</code></div><div id="t1493234400402933" t="2017-04-26 19:20:00 gfredericks and that call would return an index between  0  and  (dec (.getLength thingamajig))"><a href="#t1493234400402933" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:20:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and that call would return an index between </span><code>0</code><span> and </span><code>(dec (.getLength thingamajig))</code></div><div id="t1493234418409355" t="2017-04-26 19:20:18 gfredericks the sophistication is mostly to satisfy my own ideals of reproducibility"><a href="#t1493234418409355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:20:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the sophistication is mostly to satisfy my own ideals of reproducibility</span></div><div id="t1493234440416608" t="2017-04-26 19:20:40 gfredericks if you couldn&apos;t care less about that you can just call  gen/generate  and not bother with any of this"><a href="#t1493234440416608" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:20:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you couldn&apos;t care less about that you can just call </span><code>gen/generate</code><span> and not bother with any of this</span></div><div id="t1493234710507121" t="2017-04-26 19:25:10 bbloom so i donâ€™t actually need to call .getLength on the real stateful object during test execution"><a href="#t1493234710507121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:25:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so i donâ€™t actually need to call .getLength on the real stateful object during test execution</span></div><div id="t1493234719510650" t="2017-04-26 19:25:19 bbloom i just want to track some state in the model &amp; use that to inform which actions to generate"><a href="#t1493234719510650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:25:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i just want to track some state in the model &amp; use that to inform which actions to generate</span></div><div id="t1493234751521240" t="2017-04-26 19:25:51 bbloom looking at collection-check, they seem to use clojureâ€™s types as a model"><a href="#t1493234751521240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:25:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>looking at collection-check, they seem to use clojureâ€™s types as a model</span></div><div id="t1493234775528782" t="2017-04-26 19:26:15 bbloom but zach does basically what i mentioned earlier: he generates wild indexes for nth/assoc and then fixes them up during execution"><a href="#t1493234775528782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:26:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but zach does basically what i mentioned earlier: he generates wild indexes for nth/assoc and then fixes them up during execution</span></div><div id="t1493234880563694" t="2017-04-26 19:28:00 bbloom how much am i expected to know about the rose tree stuff in order to make effective use of test-check? this stateful-check thing manipulates it quite a bit, plus has some gen-do monadic bind syntax etc that seems redundant w/ fmap, gen/let, etc"><a href="#t1493234880563694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:28:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>how much am i expected to know about the rose tree stuff in order to make effective use of test-check? this stateful-check thing manipulates it quite a bit, plus has some gen-do monadic bind syntax etc that seems redundant w/ fmap, gen/let, etc</span></div><div id="t1493234921576994" t="2017-04-26 19:28:41 gfredericks users don&apos;t normally need to care about the rose tree"><a href="#t1493234921576994" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:28:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>users don&apos;t normally need to care about the rose tree</span></div><div id="t1493234968592746" t="2017-04-26 19:29:28 gfredericks my guess is that stateful-check&apos;s low-level internals are an attempt to shrink better than the naive shrinking you get by making a pile of binds"><a href="#t1493234968592746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:29:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>my guess is that stateful-check&apos;s low-level internals are an attempt to shrink better than the naive shrinking you get by making a pile of binds</span></div><div id="t1493234986598551" t="2017-04-26 19:29:46 gfredericks gen/bind  is pretty dumb about shrinking"><a href="#t1493234986598551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:29:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>gen/bind</code><span> is pretty dumb about shrinking</span></div><div id="t1493235011606907" t="2017-04-26 19:30:11 gfredericks and stateful-check might be able to make assumptions that  bind  can&apos;t"><a href="#t1493235011606907" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:30:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and stateful-check might be able to make assumptions that </span><code>bind</code><span> can&apos;t</span></div><div id="t1493235053621434" t="2017-04-26 19:30:53 gfredericks maybe a simple example of generating a model with actions would be helpful"><a href="#t1493235053621434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:30:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>maybe a simple example of generating a model with actions would be helpful</span></div><div id="t1493235088633335" t="2017-04-26 19:31:28 gfredericks gimme a minute"><a href="#t1493235088633335" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:31:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gimme a minute</span></div><div id="t1493235103638354" t="2017-04-26 19:31:43 bbloom thanks for your help. greatly appreciated"><a href="#t1493235103638354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:31:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>thanks for your help. greatly appreciated</span></div><div id="t1493235107639425" t="2017-04-26 19:31:47 bbloom you too @alexmiller"><a href="#t1493235107639425" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:31:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>you too @alexmiller</span></div><div id="t1493235245685354" t="2017-04-26 19:34:05 bbloom iâ€™m still reading and trying to make sense of stateful-check, but some things concern me"><a href="#t1493235245685354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:34:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m still reading and trying to make sense of stateful-check, but some things concern me</span></div><div id="t1493235269693413" t="2017-04-26 19:34:29 bbloom for example, command argument generation seems to attempt to implicitly and recursively lift values to be generators"><a href="#t1493235269693413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:34:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>for example, command argument generation seems to attempt to implicitly and recursively lift values to be generators</span></div><div id="t1493235285698776" t="2017-04-26 19:34:45 bbloom which seems like magic i donâ€™t want, at least not before i am comfortable w/ the monadic api"><a href="#t1493235285698776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:34:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>which seems like magic i donâ€™t want, at least not before i am comfortable w/ the monadic api</span></div><div id="t1493235320710656" t="2017-04-26 19:35:20 bbloom meanwhile, iâ€™m failing to extract the essence from the core of the generate-commands* routine"><a href="#t1493235320710656" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:35:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>meanwhile, iâ€™m failing to extract the essence from the core of the generate-commands* routine</span></div><div id="t1493235424745365" t="2017-04-26 19:37:04 gfredericks yeah I&apos;ve never liked the values-can-be-generators idea"><a href="#t1493235424745365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:37:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah I&apos;ve never liked the values-can-be-generators idea</span></div><div id="t1493235443751369" t="2017-04-26 19:37:23 gfredericks in practice it&apos;s probably not too confusing"><a href="#t1493235443751369" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:37:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>in practice it&apos;s probably not too confusing</span></div><div id="t1493235461757342" t="2017-04-26 19:37:41 gfredericks ....maybe"><a href="#t1493235461757342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:37:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>....maybe</span></div><div id="t1493235476762276" t="2017-04-26 19:37:56 bbloom â€¦.maybe with a type system?  ğŸ˜›"><a href="#t1493235476762276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:37:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>â€¦.maybe with a type system? </span><b>ğŸ˜›</b></div><div id="t1493235487765838" t="2017-04-26 19:38:07 gfredericks yeah  ğŸ™‚"><a href="#t1493235487765838" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:38:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah </span><b>ğŸ™‚</b></div><div id="t1493235660823637" t="2017-04-26 19:41:00 gfredericks could fancy it up to add the intermediate state at each step, or generate random assertions if you don&apos;t want to just compare the whole map"><a href="#t1493235660823637" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:41:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>could fancy it up to add the intermediate state at each step, or generate random assertions if you don&apos;t want to just compare the whole map</span></div><div id="t1493235672827521" t="2017-04-26 19:41:12 gfredericks note that the  gen/let s are where  bind  is happening"><a href="#t1493235672827521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:41:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>note that the </span><code>gen/let</code><span>s are where </span><code>bind</code><span> is happening</span></div><div id="t1493235732847616" t="2017-04-26 19:42:12 gfredericks there might be stack problems with this; maybe that&apos;s another reason for stateful-check&apos;s complexity"><a href="#t1493235732847616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:42:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there might be stack problems with this; maybe that&apos;s another reason for stateful-check&apos;s complexity</span></div><div id="t1493235746852946" t="2017-04-26 19:42:26 gfredericks e.g., if you wanted to generate 10000 actions you might have problems"><a href="#t1493235746852946" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:42:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., if you wanted to generate 10000 actions you might have problems</span></div><div id="t1493235753855297" t="2017-04-26 19:42:33 bbloom yeah - so i tried something like this and got a stackoverflow"><a href="#t1493235753855297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:42:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>yeah - so i tried something like this and got a stackoverflow</span></div><div id="t1493235779864147" t="2017-04-26 19:42:59 bbloom but thanks, this example is much closer to my intuition"><a href="#t1493235779864147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:42:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but thanks, this example is much closer to my intuition</span></div><div id="t1493235800870992" t="2017-04-26 19:43:20 gfredericks I just generated 20,000 of these up to the normal max-size of  200  and got no exceptions"><a href="#t1493235800870992" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:43:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just generated 20,000 of these up to the normal max-size of </span><code>200</code><span> and got no exceptions</span></div><div id="t1493235829880193" t="2017-04-26 19:43:49 gfredericks looks like the sizes don&apos;t get above 20 though"><a href="#t1493235829880193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:43:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>looks like the sizes don&apos;t get above 20 though</span></div><div id="t1493235832881338" t="2017-04-26 19:43:52 gfredericks so that might be bad"><a href="#t1493235832881338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:43:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so that might be bad</span></div><div id="t1493235874895503" t="2017-04-26 19:44:34 gfredericks that&apos;s probably why it&apos;s not SOing  ğŸ™‚"><a href="#t1493235874895503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:44:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s probably why it&apos;s not SOing </span><b>ğŸ™‚</b></div><div id="t1493235884898604" t="2017-04-26 19:44:44 bbloom ğŸ˜›"><a href="#t1493235884898604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:44:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><b>ğŸ˜›</b></div><div id="t1493235890900820" t="2017-04-26 19:44:50 gfredericks to get larger you&apos;d use  gen/frequency  instead of  gen/one-of  and tweak the weights"><a href="#t1493235890900820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:44:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>to get larger you&apos;d use </span><code>gen/frequency</code><span> instead of </span><code>gen/one-of</code><span> and tweak the weights</span></div><div id="t1493235902904525" t="2017-04-26 19:45:02 gfredericks alternately you could generate a size up front and pass that through the recursion"><a href="#t1493235902904525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:45:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>alternately you could generate a size up front and pass that through the recursion</span></div><div id="t1493235902904694" t="2017-04-26 19:45:02 bbloom well you had equal assoc/dissoc frequency"><a href="#t1493235902904694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:45:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>well you had equal assoc/dissoc frequency</span></div><div id="t1493235907906438" t="2017-04-26 19:45:07 bbloom yeah"><a href="#t1493235907906438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:45:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>yeah</span></div><div id="t1493235925912581" t="2017-04-26 19:45:25 bbloom i wasnâ€™t doing any dissoc to reduce the size, so it grew faster"><a href="#t1493235925912581" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:45:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i wasnâ€™t doing any dissoc to reduce the size, so it grew faster</span></div><div id="t1493235962924858" t="2017-04-26 19:46:02 gfredericks I think stack problems would be related to action-count, not the size of the state"><a href="#t1493235962924858" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:46:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think stack problems would be related to action-count, not the size of the state</span></div><div id="t1493235996935823" t="2017-04-26 19:46:36 bbloom oh, hmm thatâ€™s right"><a href="#t1493235996935823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:46:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>oh, hmm thatâ€™s right</span></div><div id="t1493236007939696" t="2017-04-26 19:46:47 bbloom not sure what i did, since itâ€™s like 5000 undos ago  ğŸ™‚"><a href="#t1493236007939696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:46:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>not sure what i did, since itâ€™s like 5000 undos ago </span><b>ğŸ™‚</b></div><div id="t1493236090966917" t="2017-04-26 19:48:10 bbloom with respect to shrinking: how well does that work as things grow more complex?"><a href="#t1493236090966917" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:48:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>with respect to shrinking: how well does that work as things grow more complex?</span></div><div id="t1493236115975437" t="2017-04-26 19:48:35 bbloom iâ€™m somewhat skeptical it can work well for stateful tests - since each removed operation can potentially invalidate the remainder of the operations"><a href="#t1493236115975437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:48:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m somewhat skeptical it can work well for stateful tests - since each removed operation can potentially invalidate the remainder of the operations</span></div><div id="t1493236122977981" t="2017-04-26 19:48:42 gfredericks that&apos;s exactly the problem"><a href="#t1493236122977981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:48:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s exactly the problem</span></div><div id="t1493236155989074" t="2017-04-26 19:49:15 gfredericks if you&apos;re using the naive bind structure in my example, what would happen is if test.check tries to shrink an earlier action it will generate a totally new set of following actions"><a href="#t1493236155989074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:49:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you&apos;re using the naive bind structure in my example, what would happen is if test.check tries to shrink an earlier action it will generate a totally new set of following actions</span></div><div id="t1493236168993631" t="2017-04-26 19:49:28 gfredericks it might be that in practice this isn&apos;t as bad as it sounds"><a href="#t1493236168993631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:49:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it might be that in practice this isn&apos;t as bad as it sounds</span></div><div id="t1493236184999060" t="2017-04-26 19:49:44 gfredericks I get almost 0 complaints about this"><a href="#t1493236184999060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:49:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I get almost 0 complaints about this</span></div><div id="t1493236230015033" t="2017-04-26 19:50:30 bbloom which of course could mean 1) itâ€™s perfect 2) no body is using it or 3) people donâ€™t understand it well enough to complain about it without embarassing themselves like iâ€™m doing now  ğŸ™‚"><a href="#t1493236230015033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:50:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>which of course could mean 1) itâ€™s perfect 2) no body is using it or 3) people donâ€™t understand it well enough to complain about it without embarassing themselves like iâ€™m doing now </span><b>ğŸ™‚</b></div><div id="t1493236231015112" t="2017-04-26 19:50:31 gfredericks I made a ticket about it at least, but don&apos;t know if it will lead anywhere  https://dev.clojure.org/jira/browse/TCHECK-112"><a href="#t1493236231015112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:50:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I made a ticket about it at least, but don&apos;t know if it will lead anywhere </span><a href="https://dev.clojure.org/jira/browse/TCHECK-112" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-112</a></div><div id="t1493236243019436" t="2017-04-26 19:50:43 gfredericks yeah exactly"><a href="#t1493236243019436" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:50:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah exactly</span></div><div id="t1493236257024050" t="2017-04-26 19:50:57 gfredericks 2 isn&apos;t plausible; people are definitely using  bind , at least via  gen/let"><a href="#t1493236257024050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:50:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>2 isn&apos;t plausible; people are definitely using </span><code>bind</code><span>, at least via </span><code>gen/let</code></div><div id="t1493236268027810" t="2017-04-26 19:51:08 gfredericks in fact  gen/let  tends to encourage over using  bind"><a href="#t1493236268027810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:51:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>in fact </span><code>gen/let</code><span> tends to encourage over using </span><code>bind</code></div><div id="t1493236301038743" t="2017-04-26 19:51:41 gfredericks i.e., using  bind  to combine two independent generators in a way that you could do with  gen/tuple"><a href="#t1493236301038743" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:51:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., using </span><code>bind</code><span> to combine two independent generators in a way that you could do with </span><code>gen/tuple</code></div><div id="t1493236343052676" t="2017-04-26 19:52:23 bbloom does tuple do â€œparallelâ€ bind? ie it shrinks from any position fairly?"><a href="#t1493236343052676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:52:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>does tuple do â€œparallelâ€ bind? ie it shrinks from any position fairly?</span></div><div id="t1493236359058352" t="2017-04-26 19:52:39 bbloom and bind is â€œleft biasedâ€?"><a href="#t1493236359058352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:52:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>and bind is â€œleft biasedâ€?</span></div><div id="t1493236382066162" t="2017-04-26 19:53:02 gfredericks that...might be right"><a href="#t1493236382066162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that...might be right</span></div><div id="t1493236388067994" t="2017-04-26 19:53:08 gfredericks tuple  shrinks each thing independently"><a href="#t1493236388067994" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>tuple</code><span> shrinks each thing independently</span></div><div id="t1493236399071834" t="2017-04-26 19:53:19 gfredericks you can always rewrite  tuple  with  bind  but not vice versa"><a href="#t1493236399071834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can always rewrite </span><code>tuple</code><span> with </span><code>bind</code><span> but not vice versa</span></div><div id="t1493236402072739" t="2017-04-26 19:53:22 bbloom gotcha - so tuple is applicative"><a href="#t1493236402072739" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>gotcha - so tuple is applicative</span></div><div id="t1493236412076380" t="2017-04-26 19:53:32 gfredericks that&apos;s probably true"><a href="#t1493236412076380" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s probably true</span></div><div id="t1493236438084731" t="2017-04-26 19:53:58 bbloom ok - so i guess iâ€™ve confirmed 1) i understand this and 2) i still have no idea how to use the API  ğŸ˜›  thanks"><a href="#t1493236438084731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:53:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ok - so i guess iâ€™ve confirmed 1) i understand this and 2) i still have no idea how to use the API </span><b>ğŸ˜›</b><span> thanks</span></div><div id="t1493236451088748" t="2017-04-26 19:54:11 bbloom iâ€™ll keep playing with it"><a href="#t1493236451088748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:54:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™ll keep playing with it</span></div><div id="t1493236461092255" t="2017-04-26 19:54:21 bbloom will let you know how it turns out"><a href="#t1493236461092255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:54:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>will let you know how it turns out</span></div><div id="t1493236464093322" t="2017-04-26 19:54:24 gfredericks oh well; do let me know if you have more questions or accusations"><a href="#t1493236464093322" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:54:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh well; do let me know if you have more questions or accusations</span></div><div id="t1493236509107480" t="2017-04-26 19:55:09 bbloom heh, i hope the accusations thing was a joke and/or not about me. let me know if i failed to politely convey my gratitude!"><a href="#t1493236509107480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:55:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>heh, i hope the accusations thing was a joke and/or not about me. let me know if i failed to politely convey my gratitude!</span></div><div id="t1493236533115382" t="2017-04-26 19:55:33 gfredericks oh yeah sorry, definitely a joke"><a href="#t1493236533115382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">19:55:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh yeah sorry, definitely a joke</span></div><div id="t1493238965936535" t="2017-04-26 20:36:05 bbloom so shrinking only removes elements from the reproduction, right? no rewriting in any way?"><a href="#t1493238965936535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">20:36:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so shrinking only removes elements from the reproduction, right? no rewriting in any way?</span></div><div id="t1493239190009704" t="2017-04-26 20:39:50 bbloom iâ€™m attempting a â€œlooseâ€ approach to action generation - will leave state out of that part &amp; use state in the code that â€œrunsâ€ the actions. that will screw up shrinking probably, but iâ€™ll deal with that when i have trouble pinpointing an issue in the future"><a href="#t1493239190009704" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">20:39:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m attempting a â€œlooseâ€ approach to action generation - will leave state out of that part &amp; use state in the code that â€œrunsâ€ the actions. that will screw up shrinking probably, but iâ€™ll deal with that when i have trouble pinpointing an issue in the future</span></div><div id="t1493239316051420" t="2017-04-26 20:41:56 bbloom so like if i were testing that random access stack example from before, actions may just be like â€œdo 5 pushes, then randomly swap elements 8 times, then do two pops, etcâ€¦.â€"><a href="#t1493239316051420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">20:41:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so like if i were testing that random access stack example from before, actions may just be like â€œdo 5 pushes, then randomly swap elements 8 times, then do two pops, etcâ€¦.â€</span></div><div id="t1493239320052645" t="2017-04-26 20:42:00 bbloom and see how that does for me"><a href="#t1493239320052645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">20:42:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>and see how that does for me</span></div><div id="t1493240537461422" t="2017-04-26 21:02:17 bbloom is there a generator that will (with high likelihood?) test boundary cases such as max/min integers? - the large-integer generator doesnâ€™t seem to explicitly select those, so i guess i need to just use one-of or frequency to ensure those cases get covered (which is relevant to me b/c the code under test does some low level binary fiddling sometimes &amp; i want to make sure it doesnâ€™t screw that up)"><a href="#t1493240537461422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:02:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>is there a generator that will (with high likelihood?) test boundary cases such as max/min integers? - the large-integer generator doesnâ€™t seem to explicitly select those, so i guess i need to just use one-of or frequency to ensure those cases get covered (which is relevant to me b/c the code under test does some low level binary fiddling sometimes &amp; i want to make sure it doesnâ€™t screw that up)</span></div><div id="t1493243686351973" t="2017-04-26 21:54:46 bbloom iâ€™ve gotta say - the learning curve is relatively steep with this stuff"><a href="#t1493243686351973" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:54:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™ve gotta say - the learning curve is relatively steep with this stuff</span></div><div id="t1493243714359124" t="2017-04-26 21:55:14 bbloom but that might just be b/c iâ€™m not comfortable using stuff w/o understanding it - and the monadic stuff makes it a bit opaque"><a href="#t1493243714359124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:55:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but that might just be b/c iâ€™m not comfortable using stuff w/o understanding it - and the monadic stuff makes it a bit opaque</span></div><div id="t1493243877401278" t="2017-04-26 21:57:57 bbloom for example, it wasnâ€™t immediately clear what a â€œpropertyâ€ really was under the hood (just a generator that produces a particular shape of data) or that it was safe to use side effecting asserts in such a property"><a href="#t1493243877401278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:57:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>for example, it wasnâ€™t immediately clear what a â€œpropertyâ€ really was under the hood (just a generator that produces a particular shape of data) or that it was safe to use side effecting asserts in such a property</span></div><div id="t1493243892404585" t="2017-04-26 21:58:12 bbloom the readme shows an example that returns a boolean"><a href="#t1493243892404585" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:58:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the readme shows an example that returns a boolean</span></div><div id="t1493243910409487" t="2017-04-26 21:58:30 bbloom but if i tested each property individually, my tests would be far too slow"><a href="#t1493243910409487" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">21:58:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but if i tested each property individually, my tests would be far too slow</span></div><div id="t1493245999867135" t="2017-04-26 22:33:19 bbloom spotted  http://blog.colinwilliams.name/blog/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check/  - which seems like an improvement"><a href="#t1493245999867135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">22:33:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>spotted </span><a href="http://blog.colinwilliams.name/blog/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check/" target="_blank">http://blog.colinwilliams.name/blog/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check/</a><span> - which seems like an improvement</span></div><div id="t1493246025872153" t="2017-04-26 22:33:45 bbloom while iâ€™m rambling to myself (or whoever is listening?):"><a href="#t1493246025872153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">22:33:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>while iâ€™m rambling to myself (or whoever is listening?):</span></div><div id="t1493246067881050" t="2017-04-26 22:34:27 bbloom iâ€™m not quite happy with my attempts to generate action sequences yet - iâ€™m getting more variability in parameters and less variability in the sequence of actions - iâ€™m not sure how to influence that properly yet"><a href="#t1493246067881050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">22:34:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m not quite happy with my attempts to generate action sequences yet - iâ€™m getting more variability in parameters and less variability in the sequence of actions - iâ€™m not sure how to influence that properly yet</span></div><div id="t1493246099888237" t="2017-04-26 22:34:59 bbloom to use the stack example again, iâ€™m getting a lot of tests that try just using different elements to push on the stack, but really what i want is a lot more tests that have longer sequences of pushes/pops/etc"><a href="#t1493246099888237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">22:34:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>to use the stack example again, iâ€™m getting a lot of tests that try just using different elements to push on the stack, but really what i want is a lot more tests that have longer sequences of pushes/pops/etc</span></div><div id="t1493246328932883" t="2017-04-26 22:38:48 bbloom the internal generation strategy doesnâ€™t appear to be documented anywhere. is it a top-down strategy? or a bottom-up one? or some hybrid? i canâ€™t really tell easily, nor what the implications of that would be"><a href="#t1493246328932883" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">22:38:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the internal generation strategy doesnâ€™t appear to be documented anywhere. is it a top-down strategy? or a bottom-up one? or some hybrid? i canâ€™t really tell easily, nor what the implications of that would be</span></div><div id="t1493247807209956" t="2017-04-26 23:03:27 gfredericks Hi"><a href="#t1493247807209956" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:03:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Hi</span></div><div id="t1493247916229023" t="2017-04-26 23:05:16 gfredericks https://clojurians.slack.com/archives/C0JKW8K62/p1493238965936535 

If you&apos;re talking about something like the event modeling code I shared earlier, new events CAN be generated during shrinking"><a href="#t1493247916229023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:05:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://clojurians.slack.com/archives/C0JKW8K62/p1493238965936535" target="_blank">https://clojurians.slack.com/archives/C0JKW8K62/p1493238965936535</a><span>

If you&apos;re talking about something like the event modeling code I shared earlier, new events CAN be generated during shrinking</span></div><div id="t1493247947234527" t="2017-04-26 23:05:47 bbloom how does that work?"><a href="#t1493247947234527" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:05:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>how does that work?</span></div><div id="t1493248008245155" t="2017-04-26 23:06:48 gfredericks So bind generates a value from one generator, then uses the user supplied function to create a new generator and generates a value from that"><a href="#t1493248008245155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:06:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So bind generates a value from one generator, then uses the user supplied function to create a new generator and generates a value from that</span></div><div id="t1493248017246868" t="2017-04-26 23:06:57 gfredericks That much is straightforward? "><a href="#t1493248017246868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:06:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That much is straightforward? </span></div><div id="t1493248021247489" t="2017-04-26 23:07:01 bbloom yeah"><a href="#t1493248021247489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:07:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>yeah</span></div><div id="t1493248035249720" t="2017-04-26 23:07:15 gfredericks There are two ways to shrink from there"><a href="#t1493248035249720" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:07:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There are two ways to shrink from there</span></div><div id="t1493248066255163" t="2017-04-26 23:07:46 gfredericks You can shrink the thing generated in the second step - that&apos;s the easy way"><a href="#t1493248066255163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:07:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You can shrink the thing generated in the second step - that&apos;s the easy way</span></div><div id="t1493248144267929" t="2017-04-26 23:09:04 gfredericks The hard way is to shrink the thing generated in the first step, because then you&apos;re obligated to call the user function with the new smaller value, which returns a potentiality entirely new generator that may have nothing to do with the original second-step value"><a href="#t1493248144267929" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:09:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The hard way is to shrink the thing generated in the first step, because then you&apos;re obligated to call the user function with the new smaller value, which returns a potentiality entirely new generator that may have nothing to do with the original second-step value</span></div><div id="t1493248158270386" t="2017-04-26 23:09:18 gfredericks In any case you can&apos;t assume they&apos;re related"><a href="#t1493248158270386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:09:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In any case you can&apos;t assume they&apos;re related</span></div><div id="t1493248202277957" t="2017-04-26 23:10:02 gfredericks So the only way to proceed is to generate something entirely new and probably unrelated from that new generator"><a href="#t1493248202277957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:10:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So the only way to proceed is to generate something entirely new and probably unrelated from that new generator</span></div><div id="t1493248250286158" t="2017-04-26 23:10:50 gfredericks I suppose you could at least use the same randomness, just in case that helps. I think test.check already does that"><a href="#t1493248250286158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:10:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose you could at least use the same randomness, just in case that helps. I think test.check already does that</span></div><div id="t1493248284291775" t="2017-04-26 23:11:24 bbloom i guess i donâ€™t understand the shrinking process at all then - b/c what youâ€™re saying here doesnâ€™t make sense to me"><a href="#t1493248284291775" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:11:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i guess i donâ€™t understand the shrinking process at all then - b/c what youâ€™re saying here doesnâ€™t make sense to me</span></div><div id="t1493248326298646" t="2017-04-26 23:12:06 bbloom is it just that shrinking re-runs the generators in some â€œshrink modeâ€ and can do whatever the hell it wants?"><a href="#t1493248326298646" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:12:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>is it just that shrinking re-runs the generators in some â€œshrink modeâ€ and can do whatever the hell it wants?</span></div><div id="t1493248333299619" t="2017-04-26 23:12:13 gfredericks So shrinking is not an independent operation on generated values -- it&apos;s essentially done at generation time, by each generator in the composition"><a href="#t1493248333299619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:12:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So shrinking is not an independent operation on generated values -- it&apos;s essentially done at generation time, by each generator in the composition</span></div><div id="t1493248362304459" t="2017-04-26 23:12:42 gfredericks This is a difference from haskell as I understand it"><a href="#t1493248362304459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:12:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This is a difference from haskell as I understand it</span></div><div id="t1493248398310521" t="2017-04-26 23:13:18 bbloom so is shrinking just â€œre-generate, but smallerâ€?"><a href="#t1493248398310521" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:13:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so is shrinking just â€œre-generate, but smallerâ€?</span></div><div id="t1493248405311738" t="2017-04-26 23:13:25 gfredericks No"><a href="#t1493248405311738" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:13:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>No</span></div><div id="t1493248409312327" t="2017-04-26 23:13:29 bbloom i would have expected generate &amp; shrink to be two methods on a protocol"><a href="#t1493248409312327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:13:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i would have expected generate &amp; shrink to be two methods on a protocol</span></div><div id="t1493248435316734" t="2017-04-26 23:13:55 gfredericks It&apos;s not - a generator returns a Very Large lazy tree of values"><a href="#t1493248435316734" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:13:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s not - a generator returns a Very Large lazy tree of values</span></div><div id="t1493248462321406" t="2017-04-26 23:14:22 gfredericks The root is the generated value; each node&apos;s children are ways to shrink from the value at that node"><a href="#t1493248462321406" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:14:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The root is the generated value; each node&apos;s children are ways to shrink from the value at that node</span></div><div id="t1493248472323041" t="2017-04-26 23:14:32 gfredericks The shrinking algorithm walks that tree"><a href="#t1493248472323041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:14:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The shrinking algorithm walks that tree</span></div><div id="t1493248494326582" t="2017-04-26 23:14:54 gfredericks Higher order generators combine these trees"><a href="#t1493248494326582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:14:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Higher order generators combine these trees</span></div><div id="t1493248510329348" t="2017-04-26 23:15:10 gfredericks E.g., gen/fmap calls rose/fmap"><a href="#t1493248510329348" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:15:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>E.g., gen/fmap calls rose/fmap</span></div><div id="t1493248515330225" t="2017-04-26 23:15:15 bbloom ah, see, my mental model was one of producer/consumer"><a href="#t1493248515330225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:15:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ah, see, my mental model was one of producer/consumer</span></div><div id="t1493248520331174" t="2017-04-26 23:15:20 bbloom emitting generated values"><a href="#t1493248520331174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:15:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>emitting generated values</span></div><div id="t1493248528332287" t="2017-04-26 23:15:28 bbloom totally wrong apparently  ğŸ˜›"><a href="#t1493248528332287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:15:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>totally wrong apparently </span><b>ğŸ˜›</b></div><div id="t1493248559337676" t="2017-04-26 23:15:59 gfredericks I can&apos;t remember if reid came up with it himself, but people don&apos;t seem to expect it"><a href="#t1493248559337676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:15:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I can&apos;t remember if reid came up with it himself, but people don&apos;t seem to expect it</span></div><div id="t1493248577340618" t="2017-04-26 23:16:17 gfredericks I think maybe he guessed the impl based on erlang&apos;s API"><a href="#t1493248577340618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:16:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think maybe he guessed the impl based on erlang&apos;s API</span></div><div id="t1493248611345959" t="2017-04-26 23:16:51 gfredericks So perhaps john hughes is the source"><a href="#t1493248611345959" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:16:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So perhaps john hughes is the source</span></div><div id="t1493248686357902" t="2017-04-26 23:18:06 gfredericks My talk Purely Random is about a lot of these details and about how I  converted test.check to use an immutable rng"><a href="#t1493248686357902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:18:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>My talk Purely Random is about a lot of these details and about how I  converted test.check to use an immutable rng</span></div><div id="t1493248700360206" t="2017-04-26 23:18:20 bbloom i might have to watch that"><a href="#t1493248700360206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:18:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i might have to watch that</span></div><div id="t1493248758369684" t="2017-04-26 23:19:18 gfredericks I wish I knew how to get slack to notify me of any activity in this channel"><a href="#t1493248758369684" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:19:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I wish I knew how to get slack to notify me of any activity in this channel</span></div><div id="t1493248783373810" t="2017-04-26 23:19:43 gfredericks Maybe I just did that"><a href="#t1493248783373810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:19:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Maybe I just did that</span></div><div id="t1493248791375196" t="2017-04-26 23:19:51 bbloom so if i do (gen/sample (gen/list gen/int)) for a large sample size - and take the max of the lengths of the lists, it seems to stop at 99"><a href="#t1493248791375196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:19:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>so if i do (gen/sample (gen/list gen/int)) for a large sample size - and take the max of the lengths of the lists, it seems to stop at 99</span></div><div id="t1493248795375828" t="2017-04-26 23:19:55 bbloom i have no idea what controls that value"><a href="#t1493248795375828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:19:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i have no idea what controls that value</span></div><div id="t1493248801376712" t="2017-04-26 23:20:01 bbloom and i have no idea how to go about figuring it out lol"><a href="#t1493248801376712" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:20:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>and i have no idea how to go about figuring it out lol</span></div><div id="t1493248831381879" t="2017-04-26 23:20:31 gfredericks There&apos;s a doc page in the repo on growth and shrinking"><a href="#t1493248831381879" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:20:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There&apos;s a doc page in the repo on growth and shrinking</span></div><div id="t1493248875389165" t="2017-04-26 23:21:15 gfredericks The other thing people don&apos;t usually expect is that growth and shrinking are not related"><a href="#t1493248875389165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:21:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The other thing people don&apos;t usually expect is that growth and shrinking are not related</span></div><div id="t1493248912395388" t="2017-04-26 23:21:52 bbloom the word â€œgrowâ€ does not appear in any of the .md files in the doc directory  ğŸ˜›"><a href="#t1493248912395388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:21:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the word â€œgrowâ€ does not appear in any of the .md files in the doc directory </span><b>ğŸ˜›</b></div><div id="t1493248928398040" t="2017-04-26 23:22:08 gfredericks Should be in one of the titles"><a href="#t1493248928398040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:22:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Should be in one of the titles</span></div><div id="t1493248939400095" t="2017-04-26 23:22:19 gfredericks Growth"><a href="#t1493248939400095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:22:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Growth</span></div><div id="t1493248964404116" t="2017-04-26 23:22:44 bbloom nope - maybe itâ€™s somewhere else? iâ€™ve read all the docs in the repo that i could find, heh"><a href="#t1493248964404116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:22:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>nope - maybe itâ€™s somewhere else? iâ€™ve read all the docs in the repo that i could find, heh</span></div><div id="t1493248971405318" t="2017-04-26 23:22:51 gfredericks Um"><a href="#t1493248971405318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:22:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Um</span></div><div id="t1493248975405886" t="2017-04-26 23:22:55 gfredericks I&apos;ll find it"><a href="#t1493248975405886" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:22:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll find it</span></div><div id="t1493249014412464" t="2017-04-26 23:23:34 gfredericks https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md"><a href="#t1493249014412464" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:23:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md" target="_blank">https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md</a></div><div id="t1493249021413559" t="2017-04-26 23:23:41 gfredericks It&apos;s new, maybe you didn&apos;t have it locally"><a href="#t1493249021413559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:23:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s new, maybe you didn&apos;t have it locally</span></div><div id="t1493249056419362" t="2017-04-26 23:24:16 bbloom ah, sorry - my bad. my last pull failed, i have code from december"><a href="#t1493249056419362" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:24:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ah, sorry - my bad. my last pull failed, i have code from december</span></div><div id="t1493249073422470" t="2017-04-26 23:24:33 bbloom will read that"><a href="#t1493249073422470" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:24:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>will read that</span></div><div id="t1493249133431979" t="2017-04-26 23:25:33 bbloom lol, i had code checked out from ~2 days before you added that"><a href="#t1493249133431979" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:25:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>lol, i had code checked out from ~2 days before you added that</span></div><div id="t1493249141433292" t="2017-04-26 23:25:41 gfredericks Haha"><a href="#t1493249141433292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:25:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Haha</span></div><div id="t1493249635514577" t="2017-04-26 23:33:55 bbloom ok - that doc gave me a much better idea of how growth &amp; size works. thank you!"><a href="#t1493249635514577" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:33:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ok - that doc gave me a much better idea of how growth &amp; size works. thank you!</span></div><div id="t1493249643515821" t="2017-04-26 23:34:03 bbloom however, it didnâ€™t give me much insight in to shrinking"><a href="#t1493249643515821" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:34:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>however, it didnâ€™t give me much insight in to shrinking</span></div><div id="t1493249656517655" t="2017-04-26 23:34:16 bbloom other than the fact that shrinking is unrelated to growth  ğŸ˜›"><a href="#t1493249656517655" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:34:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>other than the fact that shrinking is unrelated to growth </span><b>ğŸ˜›</b></div><div id="t1493249765535262" t="2017-04-26 23:36:05 bbloom also, iâ€™m still not clear on how size is related to whether or not a generator is run"><a href="#t1493249765535262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:36:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>also, iâ€™m still not clear on how size is related to whether or not a generator is run</span></div><div id="t1493249772536146" t="2017-04-26 23:36:12 bbloom for example, if i do this:    (gen/sample (gen/vector (gen/resize 0 gen/int)))"><a href="#t1493249772536146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:36:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>for example, if i do this:    (gen/sample (gen/vector (gen/resize 0 gen/int)))</span></div><div id="t1493249797540172" t="2017-04-26 23:36:37 bbloom i get stuff like [0] multiple times, which iâ€™d expect - but it suggests that the frequency of generator execution is unrelated to the size of the range of the generator"><a href="#t1493249797540172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:36:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i get stuff like [0] multiple times, which iâ€™d expect - but it suggests that the frequency of generator execution is unrelated to the size of the range of the generator</span></div><div id="t1493249965566253" t="2017-04-26 23:39:25 bbloom in order to have any confidenceâ€¦ i guess iâ€™m going to need to understand this rose tree thingâ€¦."><a href="#t1493249965566253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:39:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>in order to have any confidenceâ€¦ i guess iâ€™m going to need to understand this rose tree thingâ€¦.</span></div><div id="t1493250112588764" t="2017-04-26 23:41:52 bbloom found this explanation:  http://reiddraper.com/writing-simple-check/"><a href="#t1493250112588764" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:41:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>found this explanation: </span><a href="http://reiddraper.com/writing-simple-check/" target="_blank">http://reiddraper.com/writing-simple-check/</a></div><div id="t1493250262612665" t="2017-04-26 23:44:22 gfredericks gen/generate can give you better control than sample for playing with sizing"><a href="#t1493250262612665" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:44:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gen/generate can give you better control than sample for playing with sizing</span></div><div id="t1493250373629842" t="2017-04-26 23:46:13 bbloom ok, i think i understand the rose tree / shrinking nowâ€¦."><a href="#t1493250373629842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:46:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ok, i think i understand the rose tree / shrinking nowâ€¦.</span></div><div id="t1493250410635902" t="2017-04-26 23:46:50 bbloom Reidâ€™s rationale suggests getting a shrinker â€œfor freeâ€ from the generator, but iâ€™m skeptical of that approach vs the two-method approach that apparently haskell uses"><a href="#t1493250410635902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:46:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>Reidâ€™s rationale suggests getting a shrinker â€œfor freeâ€ from the generator, but iâ€™m skeptical of that approach vs the two-method approach that apparently haskell uses</span></div><div id="t1493250566659744" t="2017-04-26 23:49:26 gfredericks You&apos;re thinking a generator is an implementation of a protocol with one method for generating a value and another for shrinking it?"><a href="#t1493250566659744" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:49:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;re thinking a generator is an implementation of a protocol with one method for generating a value and another for shrinking it?</span></div><div id="t1493250589663207" t="2017-04-26 23:49:49 bbloom i did think that, which is apparently true in QuickCheck according to Reidâ€™s blog post"><a href="#t1493250589663207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:49:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i did think that, which is apparently true in QuickCheck according to Reidâ€™s blog post</span></div><div id="t1493250626668902" t="2017-04-26 23:50:26 gfredericks Consider how to implement fmap then"><a href="#t1493250626668902" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:50:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Consider how to implement fmap then</span></div><div id="t1493250655673324" t="2017-04-26 23:50:55 gfredericks (gen/fmap str gen/nat), e.g."><a href="#t1493250655673324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:50:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(gen/fmap str gen/nat), e.g.</span></div><div id="t1493250693678959" t="2017-04-26 23:51:33 gfredericks How do you shrink &quot;42&quot; given a function that can shrink 42"><a href="#t1493250693678959" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:51:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>How do you shrink &quot;42&quot; given a function that can shrink 42</span></div><div id="t1493250801695107" t="2017-04-26 23:53:21 bbloom same way it does now? seems like it just divides by two in some complex round-about fashion"><a href="#t1493250801695107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:53:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>same way it does now? seems like it just divides by two in some complex round-about fashion</span></div><div id="t1493250815697273" t="2017-04-26 23:53:35 gfredericks It&apos;s a string, not a number"><a href="#t1493250815697273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:53:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s a string, not a number</span></div><div id="t1493250835700276" t="2017-04-26 23:53:55 bbloom ah"><a href="#t1493250835700276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:53:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>ah</span></div><div id="t1493250846701966" t="2017-04-26 23:54:06 bbloom sorry, i misread"><a href="#t1493250846701966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:54:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>sorry, i misread</span></div><div id="t1493250926714292" t="2017-04-26 23:55:26 bbloom (defn fmap [f x] (reify IGenerator (gen [this ctx] (f (gen x ctx))) (shrink [this ctx value] (f (shrink x ctx))))"><a href="#t1493250926714292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:55:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>(defn fmap [f x] (reify IGenerator (gen [this ctx] (f (gen x ctx))) (shrink [this ctx value] (f (shrink x ctx))))</span></div><div id="t1493250940716619" t="2017-04-26 23:55:40 bbloom ğŸ˜›"><a href="#t1493250940716619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:55:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><b>ğŸ˜›</b></div><div id="t1493251020728584" t="2017-04-26 23:57:00 bbloom er sub that second value with x"><a href="#t1493251020728584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:57:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>er sub that second value with x</span></div><div id="t1493251025729382" t="2017-04-26 23:57:05 bbloom or second x with value"><a href="#t1493251025729382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:57:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>or second x with value</span></div><div id="t1493251028729662" t="2017-04-26 23:57:08 bbloom you get the idea"><a href="#t1493251028729662" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:57:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>you get the idea</span></div><div id="t1493251040731540" t="2017-04-26 23:57:20 bbloom but yeah, i get my intuition doesnâ€™t match reality"><a href="#t1493251040731540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:57:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but yeah, i get my intuition doesnâ€™t match reality</span></div><div id="t1493251092738990" t="2017-04-26 23:58:12 bbloom but as far as i can tell, the public API of test.check doesnâ€™t expose the rose tree stuff"><a href="#t1493251092738990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:58:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but as far as i can tell, the public API of test.check doesnâ€™t expose the rose tree stuff</span></div><div id="t1493251102740540" t="2017-04-26 23:58:22 bbloom all the constructors for generators assume you return a value, not a rose tree"><a href="#t1493251102740540" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:58:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>all the constructors for generators assume you return a value, not a rose tree</span></div><div id="t1493251145746570" t="2017-04-26 23:59:05 bbloom which i guess that explains why stateful-check mucks around with internals a bit"><a href="#t1493251145746570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-26</span>Â <span class="t" onclick="H(this)">23:59:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>which i guess that explains why stateful-check mucks around with internals a bit</span></div><div id="t1493251245763616" t="2017-04-27 00:00:45 gfredericks Yeah, test.check hopes that the public API is sufficient"><a href="#t1493251245763616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:00:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah, test.check hopes that the public API is sufficient</span></div><div id="t1493251276768819" t="2017-04-27 00:01:16 gfredericks I assume you see the bug in your code? "><a href="#t1493251276768819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:01:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I assume you see the bug in your code? </span></div><div id="t1493251318775755" t="2017-04-27 00:01:58 gfredericks Or, why that function doesn&apos;t/ can&apos;t work"><a href="#t1493251318775755" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:01:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Or, why that function doesn&apos;t/ can&apos;t work</span></div><div id="t1493251361782448" t="2017-04-27 00:02:41 bbloom other than my typo with the wrong variable? and the lack of the â€œAST interpreterâ€ that would drive that protocol? no, not really"><a href="#t1493251361782448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:02:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>other than my typo with the wrong variable? and the lack of the â€œAST interpreterâ€ that would drive that protocol? no, not really</span></div><div id="t1493251368783598" t="2017-04-27 00:02:48 bbloom at least i assume you have some insight iâ€™m missing"><a href="#t1493251368783598" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:02:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>at least i assume you have some insight iâ€™m missing</span></div><div id="t1493251411790582" t="2017-04-27 00:03:31 gfredericks In the fmap str example, you&apos;ll be passing a string to a shrinker that expects integers"><a href="#t1493251411790582" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:03:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In the fmap str example, you&apos;ll be passing a string to a shrinker that expects integers</span></div><div id="t1493251449796403" t="2017-04-27 00:04:09 gfredericks value is a string,  (shrink x ...) wants an integer"><a href="#t1493251449796403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:04:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>value is a string,  (shrink x ...) wants an integer</span></div><div id="t1493251517806317" t="2017-04-27 00:05:17 bbloom i was thinking the value would be whatever value was being wrapped"><a href="#t1493251517806317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:05:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i was thinking the value would be whatever value was being wrapped</span></div><div id="t1493251520807041" t="2017-04-27 00:05:20 gfredericks Somebody somewhere will have to parse the string"><a href="#t1493251520807041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:05:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Somebody somewhere will have to parse the string</span></div><div id="t1493251520807092" t="2017-04-27 00:05:20 bbloom not the generated value"><a href="#t1493251520807092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:05:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>not the generated value</span></div><div id="t1493251538809617" t="2017-04-27 00:05:38 bbloom i youâ€™d have a tree of alternating generate/shrink calls"><a href="#t1493251538809617" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:05:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i youâ€™d have a tree of alternating generate/shrink calls</span></div><div id="t1493251577815631" t="2017-04-27 00:06:17 bbloom the idea was that fmap wouldnâ€™t do any shrinking at all"><a href="#t1493251577815631" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:06:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the idea was that fmap wouldnâ€™t do any shrinking at all</span></div><div id="t1493251583816557" t="2017-04-27 00:06:23 bbloom or at least no extra shrinking"><a href="#t1493251583816557" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:06:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>or at least no extra shrinking</span></div><div id="t1493251589817461" t="2017-04-27 00:06:29 bbloom beyond what the wrapped generator does"><a href="#t1493251589817461" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:06:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>beyond what the wrapped generator does</span></div><div id="t1493251672829110" t="2017-04-27 00:07:52 gfredericks That&apos;s ideal, I&apos;m just not sure how you wrap this up into the test runner in an arbitrarily composable way"><a href="#t1493251672829110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:07:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That&apos;s ideal, I&apos;m just not sure how you wrap this up into the test runner in an arbitrarily composable way</span></div><div id="t1493251691831661" t="2017-04-27 00:08:11 bbloom iâ€™m not even convinced that it makes sense to combine generating and shrinking one-to-one like this"><a href="#t1493251691831661" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:08:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m not even convinced that it makes sense to combine generating and shrinking one-to-one like this</span></div><div id="t1493251823850621" t="2017-04-27 00:10:23 bbloom i just assumed that shrinking would be simpler than generating in that the tree would be a subset of the generator tree"><a href="#t1493251823850621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:10:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>i just assumed that shrinking would be simpler than generating in that the tree would be a subset of the generator tree</span></div><div id="t1493251835852621" t="2017-04-27 00:10:35 bbloom and only isomorphic to it if most of the nodes were the identity-shrinker"><a href="#t1493251835852621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:10:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>and only isomorphic to it if most of the nodes were the identity-shrinker</span></div><div id="t1493251862856531" t="2017-04-27 00:11:02 bbloom for example if you generate an arbitrary number and then filter the even ones, you only want one number shrinker, not two"><a href="#t1493251862856531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:11:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>for example if you generate an arbitrary number and then filter the even ones, you only want one number shrinker, not two</span></div><div id="t1493251891860590" t="2017-04-27 00:11:31 bbloom similarly, for the stateful testing case with shrinking, you almost only want to remove actions, not actually alter the contents of any of those actions"><a href="#t1493251891860590" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:11:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>similarly, for the stateful testing case with shrinking, you almost only want to remove actions, not actually alter the contents of any of those actions</span></div><div id="t1493251982873533" t="2017-04-27 00:13:02 bbloom way beyond just generative testing, iâ€™m not a fan of monadic apis in generalâ€¦. iâ€™d much rather build a generator out of transparent data and then interpret (or compile) that - especially so that i could add more methods beyond just generate/shrinkâ€¦."><a href="#t1493251982873533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:13:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>way beyond just generative testing, iâ€™m not a fan of monadic apis in generalâ€¦. iâ€™d much rather build a generator out of transparent data and then interpret (or compile) that - especially so that i could add more methods beyond just generate/shrinkâ€¦.</span></div><div id="t1493252060884370" t="2017-04-27 00:14:20 bbloom but this is way off topic, my apologies"><a href="#t1493252060884370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:14:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but this is way off topic, my apologies</span></div><div id="t1493252638962997" t="2017-04-27 00:23:58 gfredericks I&apos;m not even sure what sort of tree you&apos;re imagining"><a href="#t1493252638962997" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:23:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m not even sure what sort of tree you&apos;re imagining</span></div><div id="t1493252684969426" t="2017-04-27 00:24:44 bbloom the tree of generators that is returning a pure value (that is, of course, tree shaped)"><a href="#t1493252684969426" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:24:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>the tree of generators that is returning a pure value (that is, of course, tree shaped)</span></div><div id="t1493252720974408" t="2017-04-27 00:25:20 gfredericks The shape of generator composition doesn&apos;t necessarily mirror the shape of the data"><a href="#t1493252720974408" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:25:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The shape of generator composition doesn&apos;t necessarily mirror the shape of the data</span></div><div id="t1493252762979943" t="2017-04-27 00:26:02 bbloom sure, itâ€™s not 1-to-1, but it has some similarity in general, no?"><a href="#t1493252762979943" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:26:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>sure, itâ€™s not 1-to-1, but it has some similarity in general, no?</span></div><div id="t1493252776981810" t="2017-04-27 00:26:16 gfredericks I&apos;ve thought about generators-as-data, but seems hard to do bind"><a href="#t1493252776981810" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:26:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve thought about generators-as-data, but seems hard to do bind</span></div><div id="t1493252790983872" t="2017-04-27 00:26:30 bbloom bind (well, lexical scope in general) is always the hard part"><a href="#t1493252790983872" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:26:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>bind (well, lexical scope in general) is always the hard part</span></div><div id="t1493252849991543" t="2017-04-27 00:27:29 gfredericks So test.check has an approach where bind at least works  ğŸ˜›  "><a href="#t1493252849991543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:27:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So test.check has an approach where bind at least works </span><b>ğŸ˜›</b><span> </span></div><div id="t1493252948005131" t="2017-04-27 00:29:08 gfredericks So you&apos;re imagining that the user-facing API for your generators is the protocol of two functions? If so I&apos;m still not seeing how you get around the fmap problem"><a href="#t1493252948005131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:29:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So you&apos;re imagining that the user-facing API for your generators is the protocol of two functions? If so I&apos;m still not seeing how you get around the fmap problem</span></div><div id="t1493252975008868" t="2017-04-27 00:29:35 bbloom iâ€™m not trying to propose a new solution"><a href="#t1493252975008868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:29:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m not trying to propose a new solution</span></div><div id="t1493252988010647" t="2017-04-27 00:29:48 bbloom iâ€™m saying that it didnâ€™t match my intuition - which has now been corrected"><a href="#t1493252988010647" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:29:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m saying that it didnâ€™t match my intuition - which has now been corrected</span></div><div id="t1493253008013520" t="2017-04-27 00:30:08 bbloom but the larger problem i have is that, even understanding how it works, iâ€™m not sure how to make effective use of it"><a href="#t1493253008013520" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:30:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>but the larger problem i have is that, even understanding how it works, iâ€™m not sure how to make effective use of it</span></div><div id="t1493253020015381" t="2017-04-27 00:30:20 bbloom letâ€™s take the stack example again"><a href="#t1493253020015381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:30:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>letâ€™s take the stack example again</span></div><div id="t1493253061020981" t="2017-04-27 00:31:01 bbloom if i have random push/pop operations and itâ€™s going to do shrinking, itâ€™s going to waste a bunch of time pushing or popping smaller integers, when really i want to try fewer pops or fewer pushes"><a href="#t1493253061020981" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:31:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>if i have random push/pop operations and itâ€™s going to do shrinking, itâ€™s going to waste a bunch of time pushing or popping smaller integers, when really i want to try fewer pops or fewer pushes</span></div><div id="t1493253062021221" t="2017-04-27 00:31:02 bbloom right?"><a href="#t1493253062021221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:31:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>right?</span></div><div id="t1493253092025210" t="2017-04-27 00:31:32 gfredericks Somewhat"><a href="#t1493253092025210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:31:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Somewhat</span></div><div id="t1493253104026724" t="2017-04-27 00:31:44 gfredericks It will shrink each integer straight to 0"><a href="#t1493253104026724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:31:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It will shrink each integer straight to 0</span></div><div id="t1493253109027283" t="2017-04-27 00:31:49 gfredericks In one step"><a href="#t1493253109027283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:31:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In one step</span></div><div id="t1493253125029416" t="2017-04-27 00:32:05 gfredericks Only if that doesn&apos;t work does it try other things"><a href="#t1493253125029416" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:32:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Only if that doesn&apos;t work does it try other things</span></div><div id="t1493253134030434" t="2017-04-27 00:32:14 gfredericks So N steps total to accomplish that"><a href="#t1493253134030434" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:32:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So N steps total to accomplish that</span></div><div id="t1493253148032601" t="2017-04-27 00:32:28 gfredericks But it could also try removing things first, I&apos;m not sure"><a href="#t1493253148032601" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:32:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But it could also try removing things first, I&apos;m not sure</span></div><div id="t1493253186037531" t="2017-04-27 00:33:06 gfredericks That depends on which step bind tries first "><a href="#t1493253186037531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:33:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That depends on which step bind tries first </span></div><div id="t1493253264048059" t="2017-04-27 00:34:24 gfredericks One downside to this structure is you can&apos;t give shrink hints"><a href="#t1493253264048059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:34:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>One downside to this structure is you can&apos;t give shrink hints</span></div><div id="t1493253308053525" t="2017-04-27 00:35:08 gfredericks I think shrinking efficiency is only an issue when generating really large compositions"><a href="#t1493253308053525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:35:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think shrinking efficiency is only an issue when generating really large compositions</span></div><div id="t1493253405066665" t="2017-04-27 00:36:45 gfredericks I suppose I shouldn&apos;t say there&apos;s no way to give hints; for your example, if it was a problem, you could wrap the integer generator in  gen/no-shrink"><a href="#t1493253405066665" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:36:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose I shouldn&apos;t say there&apos;s no way to give hints; for your example, if it was a problem, you could wrap the integer generator in </span><code>gen/no-shrink</code></div><div id="t1493253455073386" t="2017-04-27 00:37:35 gfredericks test.check does this itself for the builtin UUID generator, on the assumption that there&apos;s not much to be gained from shrinking a UUID"><a href="#t1493253455073386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:37:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.check does this itself for the builtin UUID generator, on the assumption that there&apos;s not much to be gained from shrinking a UUID</span></div><div id="t1493253541084550" t="2017-04-27 00:39:01 gfredericks w.r.t. the earlier question on large-integer boundary testing, that&apos;s a more general issue I&apos;m aware of but haven&apos;t been sure how clever it should try to be"><a href="#t1493253541084550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:39:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>w.r.t. the earlier question on large-integer boundary testing, that&apos;s a more general issue I&apos;m aware of but haven&apos;t been sure how clever it should try to be</span></div><div id="t1493253616094049" t="2017-04-27 00:40:16 gfredericks I&apos;ve considered rebooting the generators namespace to clean up the API; maybe there could be a partition into lower-level generators and higher-level clever ones"><a href="#t1493253616094049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:40:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve considered rebooting the generators namespace to clean up the API; maybe there could be a partition into lower-level generators and higher-level clever ones</span></div><div id="t1493253649098537" t="2017-04-27 00:40:49 gfredericks the low level ones do simple easy to understand things, the high level ones do lots of ad-hoc stuff to try to break your code"><a href="#t1493253649098537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:40:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the low level ones do simple easy to understand things, the high level ones do lots of ad-hoc stuff to try to break your code</span></div><div id="t1493253656099397" t="2017-04-27 00:40:56 gfredericks Â¯\(ãƒ„)/Â¯"><a href="#t1493253656099397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:40:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Â¯\(ãƒ„)/Â¯</span></div><div id="t1493253952137272" t="2017-04-27 00:45:52 bbloom interesting"><a href="#t1493253952137272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:45:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>interesting</span></div><div id="t1493253959138104" t="2017-04-27 00:45:59 bbloom iâ€™m gonna have a think on all this"><a href="#t1493253959138104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:45:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>iâ€™m gonna have a think on all this</span></div><div id="t1493253979140823" t="2017-04-27 00:46:19 bbloom thanks again"><a href="#t1493253979140823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">00:46:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbloomÂ </span><span>thanks again</span></div><div id="t1493258665749269" t="2017-04-27 02:04:25 nberger Hey guys, great discussion here.
I think the announcement of hedgehog, a new quickcheck-like library for haskell is very relevant:  https://www.reddit.com/r/haskell/comments/646k3d/ann_hedgehog_property_testing/ . One of its selling points is that it &quot;uses integrated shrinking, so shrinks obey the invariants of generated values by construction [...] an approach to property testing which is also used by QuiviQ&apos;s Erlang QuickCheck, Hypothesis, and test.check&quot;"><a href="#t1493258665749269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:04:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Hey guys, great discussion here.
I think the announcement of hedgehog, a new quickcheck-like library for haskell is very relevant: </span><a href="https://www.reddit.com/r/haskell/comments/646k3d/ann_hedgehog_property_testing/" target="_blank">https://www.reddit.com/r/haskell/comments/646k3d/ann_hedgehog_property_testing/</a><span>. One of its selling points is that it &quot;uses integrated shrinking, so shrinks obey the invariants of generated values by construction [...] an approach to property testing which is also used by QuiviQ&apos;s Erlang QuickCheck, Hypothesis, and test.check&quot;</span></div><div id="t1493258838771404" t="2017-04-27 02:07:18 gfredericks Oh nice - I forgot about that"><a href="#t1493258838771404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:07:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh nice - I forgot about that</span></div><div id="t1493259027795733" t="2017-04-27 02:10:27 nberger I see references to a shrink tree in the code. But can&apos;t say much more  ğŸ™‚"><a href="#t1493259027795733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:10:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I see references to a shrink tree in the code. But can&apos;t say much more </span><b>ğŸ™‚</b></div><div id="t1493259780885682" t="2017-04-27 02:23:00 nberger @gfredericks: btw I made some progress on the async quick-check. I pushed a draft to my repo today:  https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async . I&apos;m working on a  defspec-async  macro now that would use that stuff and would make the tests much easier to write (for example it &quot;knows&quot; when to call the  done  from cljs.test/async, which is on :succeeded or :shrunk) so the :step-fn that I&apos;m using in the tests would be gone"><a href="#t1493259780885682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:23:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks: btw I made some progress on the async quick-check. I pushed a draft to my repo today: </span><a href="https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async" target="_blank">https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async</a><span>. I&apos;m working on a </span><code>defspec-async</code><span> macro now that would use that stuff and would make the tests much easier to write (for example it &quot;knows&quot; when to call the </span><code>done</code><span> from cljs.test/async, which is on :succeeded or :shrunk) so the :step-fn that I&apos;m using in the tests would be gone</span></div><div id="t1493260315949511" t="2017-04-27 02:31:55 gfredericks @nberger someone made a ticket asking for that"><a href="#t1493260315949511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:31:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nberger someone made a ticket asking for that</span></div><div id="t1493260449965258" t="2017-04-27 02:34:09 nberger yep, saw it. I&apos;ve been thinking about this for a long time, the ticket made me go to the keyboard and try to make it work, and I&apos;m quite happy with the result so far"><a href="#t1493260449965258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:34:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>yep, saw it. I&apos;ve been thinking about this for a long time, the ticket made me go to the keyboard and try to make it work, and I&apos;m quite happy with the result so far</span></div><div id="t1493260487969515" t="2017-04-27 02:34:47 nberger I&apos;m hoping to have a more rounded version soon"><a href="#t1493260487969515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:34:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>I&apos;m hoping to have a more rounded version soon</span></div><div id="t1493260497970659" t="2017-04-27 02:34:57 gfredericks cool, let me know and I&apos;ll take a look"><a href="#t1493260497970659" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:34:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>cool, let me know and I&apos;ll take a look</span></div><div id="t1493260503971391" t="2017-04-27 02:35:03 nberger will do"><a href="#t1493260503971391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-27</span>Â <span class="t" onclick="H(this)">02:35:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>will do</span></div><div id="t1493407445216997" t="2017-04-28 19:24:05 nberger @gfredericks: I added a  defspec-async  macro in that branch, it would be great if you could take a look and tell me how it looks to you. This async stuff is done over the refactoring that I started a while ago, so here&apos;s the diff based on that refactoring:  https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async 
And here&apos;s the refactor itself:  https://github.com/clojure/test.check/compare/master...nberger:test.check.refactor  (it&apos;s the same diff as in the current TCHECK-126 patch)"><a href="#t1493407445216997" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-28</span>Â <span class="t" onclick="H(this)">19:24:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@gfredericks: I added a </span><code>defspec-async</code><span> macro in that branch, it would be great if you could take a look and tell me how it looks to you. This async stuff is done over the refactoring that I started a while ago, so here&apos;s the diff based on that refactoring: </span><a href="https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async" target="_blank">https://github.com/nberger/test.check/compare/test.check.refactor...refactor-allow-async</a><span>
And here&apos;s the refactor itself: </span><a href="https://github.com/clojure/test.check/compare/master...nberger:test.check.refactor" target="_blank">https://github.com/clojure/test.check/compare/master...nberger:test.check.refactor</a><span> (it&apos;s the same diff as in the current TCHECK-126 patch)</span></div><div id="t1493407658279294" t="2017-04-28 19:27:38 nberger There&apos;s some level of duplication between  quick-check /`async-quick-check` and also  shrink /`async-shrink` but maybe it&apos;s better this way (than refactoring it further so they share some parts but it could end being less readable)"><a href="#t1493407658279294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-28</span>Â <span class="t" onclick="H(this)">19:27:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>There&apos;s some level of duplication between </span><code>quick-check</code><span>/`async-quick-check` and also </span><code>shrink</code><span>/`async-shrink` but maybe it&apos;s better this way (than refactoring it further so they share some parts but it could end being less readable)</span></div><div id="t1493409403789805" t="2017-04-28 19:56:43 gfredericks okay, I&apos;ll take a look in the next few days; thanks!"><a href="#t1493409403789805" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-28</span>Â <span class="t" onclick="H(this)">19:56:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay, I&apos;ll take a look in the next few days; thanks!</span></div><div id="t1493410981244138" t="2017-04-28 20:23:01 nberger Thanks to you!"><a href="#t1493410981244138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-28</span>Â <span class="t" onclick="H(this)">20:23:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>Thanks to you!</span></div><div id="t1494334832331388" t="2017-05-09 13:00:32 gfredericks wow; this 10,000 message limit gets hit pretty fast"><a href="#t1494334832331388" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-09</span>Â <span class="t" onclick="H(this)">13:00:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>wow; this 10,000 message limit gets hit pretty fast</span></div><div id="t1494336099694915" t="2017-05-09 13:21:39 gfredericks Oh my mobile client still has old messages in this channel, but the web client doesn&apos;t. Slack is strange. "><a href="#t1494336099694915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-09</span>Â <span class="t" onclick="H(this)">13:21:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh my mobile client still has old messages in this channel, but the web client doesn&apos;t. Slack is strange. </span></div><div id="t1495559561804183" t="2017-05-23 17:12:41 alexmiller @gfredericks hey, I have a probably too broad question re test.check generators. There are a number of circumstances where random inputs can get â€œtoo bigâ€ (usually via either collection sizing or nesting) if you do enough tests. Surely this is an issue that quickcheck has already encountered - do they have generic ways to do thinning or something else? (I will do some of my own research but figured you might already know about it)"><a href="#t1495559561804183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">17:12:41</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>@gfredericks hey, I have a probably too broad question re test.check generators. There are a number of circumstances where random inputs can get â€œtoo bigâ€ (usually via either collection sizing or nesting) if you do enough tests. Surely this is an issue that quickcheck has already encountered - do they have generic ways to do thinning or something else? (I will do some of my own research but figured you might already know about it)</span></div><div id="t1495562203740758" t="2017-05-23 17:56:43 gfredericks @alexmiller you&apos;re asking about something more sophisticated than the normal  size  control techniques?"><a href="#t1495562203740758" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">17:56:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller you&apos;re asking about something more sophisticated than the normal </span><code>size</code><span> control techniques?</span></div><div id="t1495562327786110" t="2017-05-23 17:58:47 alexmiller wellâ€¦ kind of. this is really about controlling size at a higher level, which as Iâ€™ve been thinking about it more is really connected to controlling generation over a greater composite structure (which is the thing weâ€™re producing out of a composite spec)"><a href="#t1495562327786110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">17:58:47</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>wellâ€¦ kind of. this is really about controlling size at a higher level, which as Iâ€™ve been thinking about it more is really connected to controlling generation over a greater composite structure (which is the thing weâ€™re producing out of a composite spec)</span></div><div id="t1495562354795814" t="2017-05-23 17:59:14 alexmiller I went and looked at some of the quickcheck stuff more and it seems like there are all those knobs for size, scale, etc"><a href="#t1495562354795814" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">17:59:14</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I went and looked at some of the quickcheck stuff more and it seems like there are all those knobs for size, scale, etc</span></div><div id="t1495562361798423" t="2017-05-23 17:59:21 alexmiller but they assume pretty localized and intentional use"><a href="#t1495562361798423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">17:59:21</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>but they assume pretty localized and intentional use</span></div><div id="t1495562445830976" t="2017-05-23 18:00:45 alexmiller my real goal here is: how can we assure that an automatically created composite generator does not produce a value so big that it kills testing. and maybe the answer is really being smarter in spec about how we use test.check"><a href="#t1495562445830976" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:00:45</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>my real goal here is: how can we assure that an automatically created composite generator does not produce a value so big that it kills testing. and maybe the answer is really being smarter in spec about how we use test.check</span></div><div id="t1495562516858312" t="2017-05-23 18:01:56 alexmiller some more specific problem areas are: collection size, recursive/nesting size, and individual value size (for things that use variable memory like strings, keywords, symbols)"><a href="#t1495562516858312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:01:56</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>some more specific problem areas are: collection size, recursive/nesting size, and individual value size (for things that use variable memory like strings, keywords, symbols)</span></div><div id="t1495562552872145" t="2017-05-23 18:02:32 alexmiller really these are mostly easy to manage in isolation but are in some cases harder in combination"><a href="#t1495562552872145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:02:32</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>really these are mostly easy to manage in isolation but are in some cases harder in combination</span></div><div id="t1495562583883894" t="2017-05-23 18:03:03 alexmiller sorry, stepping away for a few"><a href="#t1495562583883894" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:03:03</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>sorry, stepping away for a few</span></div><div id="t1495562707929638" t="2017-05-23 18:05:07 gfredericks Yes definitely; sizing is one of the biggest headaches I&apos;ve encountered in maintaining test.check -- I&apos;ve kept wanting to redo the size parameter so that it has some kind of linear relationship to the (comp count pr-str) of the value generated"><a href="#t1495562707929638" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:05:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yes definitely; sizing is one of the biggest headaches I&apos;ve encountered in maintaining test.check -- I&apos;ve kept wanting to redo the size parameter so that it has some kind of linear relationship to the (comp count pr-str) of the value generated</span></div><div id="t1495562929009158" t="2017-05-23 18:08:49 gfredericks I thought about maybe having each generator have knowledge about the size of things it generates, but that doesn&apos;t work so well for  gen/one-of  or  gen/frequency , and not at all for  gen/bind"><a href="#t1495562929009158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:08:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I thought about maybe having each generator have knowledge about the size of things it generates, but that doesn&apos;t work so well for </span><code>gen/one-of</code><span> or </span><code>gen/frequency</code><span>, and not at all for </span><code>gen/bind</code></div><div id="t1495562933010575" t="2017-05-23 18:08:53 gfredericks even  gen/fmap  would be hard"><a href="#t1495562933010575" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:08:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>even </span><code>gen/fmap</code><span> would be hard</span></div><div id="t1495562977026133" t="2017-05-23 18:09:37 gfredericks so I think the only other approach to a general solution would be to have some sort of logical post-processing that prunes things when the whole structure is too big"><a href="#t1495562977026133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:09:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so I think the only other approach to a general solution would be to have some sort of logical post-processing that prunes things when the whole structure is too big</span></div><div id="t1495562981027794" t="2017-05-23 18:09:41 gfredericks I haven&apos;t thought about that one too much"><a href="#t1495562981027794" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:09:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I haven&apos;t thought about that one too much</span></div><div id="t1495563051052243" t="2017-05-23 18:10:51 gfredericks My guess is that this is the biggest sizing pitfall for spec:  https://dev.clojure.org/jira/browse/TCHECK-106"><a href="#t1495563051052243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:10:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>My guess is that this is the biggest sizing pitfall for spec: </span><a href="https://dev.clojure.org/jira/browse/TCHECK-106" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-106</a></div><div id="t1495563115074808" t="2017-05-23 18:11:55 gfredericks it&apos;s possible that solving that would be enough from spec&apos;s perspective"><a href="#t1495563115074808" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">18:11:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s possible that solving that would be enough from spec&apos;s perspective</span></div><div id="t1495567340544721" t="2017-05-23 19:22:20 alexmiller yes, I think that is the highest priority issue"><a href="#t1495567340544721" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:22:20</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yes, I think that is the highest priority issue</span></div><div id="t1495567378556990" t="2017-05-23 19:22:58 alexmiller Rich suggested that maybe there was some notion of â€œthinningâ€ that could be applied as you generate - reducing the scale as you get deeper in a structure"><a href="#t1495567378556990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:22:58</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Rich suggested that maybe there was some notion of â€œthinningâ€ that could be applied as you generate - reducing the scale as you get deeper in a structure</span></div><div id="t1495567512599663" t="2017-05-23 19:25:12 gfredericks @alexmiller yeah, that&apos;s something that the  recursive-gen  already does (else it&apos;d likely generate infinite structures)"><a href="#t1495567512599663" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:25:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller yeah, that&apos;s something that the </span><code>recursive-gen</code><span> already does (else it&apos;d likely generate infinite structures)</span></div><div id="t1495567577620889" t="2017-05-23 19:26:17 gfredericks I certainly considered it -- it had the feel of a breaking change, so I was probably hesitant on that count, but there might have been some more subtleties;

I&apos;ll give that some more thought and try it out"><a href="#t1495567577620889" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:26:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I certainly considered it -- it had the feel of a breaking change, so I was probably hesitant on that count, but there might have been some more subtleties;

I&apos;ll give that some more thought and try it out</span></div><div id="t1495567622635572" t="2017-05-23 19:27:02 gfredericks one approach I tried with  recursive-gen  was to take the current  size  and partition it up randomly among the elements of the collection to be generated"><a href="#t1495567622635572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:27:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>one approach I tried with </span><code>recursive-gen</code><span> was to take the current </span><code>size</code><span> and partition it up randomly among the elements of the collection to be generated</span></div><div id="t1495567634639503" t="2017-05-23 19:27:14 gfredericks I think that&apos;s a lot harder with  recursive-gen  than it would be with the regular collection generators"><a href="#t1495567634639503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:27:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think that&apos;s a lot harder with </span><code>recursive-gen</code><span> than it would be with the regular collection generators</span></div><div id="t1495567640641485" t="2017-05-23 19:27:20 gfredericks so maybe there is hope"><a href="#t1495567640641485" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:27:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so maybe there is hope</span></div><div id="t1495567723668430" t="2017-05-23 19:28:43 alexmiller yeah, I saw some interesting stuff in the quickcheck papers about the recursive gen aspects"><a href="#t1495567723668430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:28:43</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah, I saw some interesting stuff in the quickcheck papers about the recursive gen aspects</span></div><div id="t1495567747676532" t="2017-05-23 19:29:07 alexmiller and spec is doing some of its own things there as well"><a href="#t1495567747676532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:29:07</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and spec is doing some of its own things there as well</span></div><div id="t1495567773685278" t="2017-05-23 19:29:33 gfredericks yeah I noticed that and wasn&apos;t sure what I thought about it"><a href="#t1495567773685278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:29:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah I noticed that and wasn&apos;t sure what I thought about it</span></div><div id="t1495567841708639" t="2017-05-23 19:30:41 alexmiller heh"><a href="#t1495567841708639" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:30:41</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>heh</span></div><div id="t1495567844709723" t="2017-05-23 19:30:44 gfredericks I&apos;m not sure that there are any serious backwards-compatibility concerns about changing the sizing behavior, so I&apos;ll consider this a plausible solution"><a href="#t1495567844709723" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:30:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m not sure that there are any serious backwards-compatibility concerns about changing the sizing behavior, so I&apos;ll consider this a plausible solution</span></div><div id="t1495567859714850" t="2017-05-23 19:30:59 gfredericks do you have a guess about whether there will be other serious sizing issues remaining?"><a href="#t1495567859714850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:30:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>do you have a guess about whether there will be other serious sizing issues remaining?</span></div><div id="t1495567883722939" t="2017-05-23 19:31:23 alexmiller collection size and recursion seem to be at the root of the majority of issues I see"><a href="#t1495567883722939" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:31:23</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>collection size and recursion seem to be at the root of the majority of issues I see</span></div><div id="t1495567904729862" t="2017-05-23 19:31:44 gfredericks does spec use  recursive-gen  at all?"><a href="#t1495567904729862" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:31:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>does spec use </span><code>recursive-gen</code><span> at all?</span></div><div id="t1495567915733403" t="2017-05-23 19:31:55 alexmiller donâ€™t know"><a href="#t1495567915733403" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:31:55</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>donâ€™t know</span></div><div id="t1495567923736032" t="2017-05-23 19:32:03 gfredericks I think the biggest thing I noticed was that it didn&apos;t even with naturally recursive specs"><a href="#t1495567923736032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:32:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the biggest thing I noticed was that it didn&apos;t even with naturally recursive specs</span></div><div id="t1495567963749128" t="2017-05-23 19:32:43 alexmiller yeah, the gen namespace doesnâ€™t pull in recursive-gen so Iâ€™d guess nothing is using it"><a href="#t1495567963749128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:32:43</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah, the gen namespace doesnâ€™t pull in recursive-gen so Iâ€™d guess nothing is using it</span></div><div id="t1495567976753397" t="2017-05-23 19:32:56 gfredericks it might not be a good fit anyhow"><a href="#t1495567976753397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:32:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it might not be a good fit anyhow</span></div><div id="t1495567994759302" t="2017-05-23 19:33:14 alexmiller I donâ€™t know if that was a conscious choice or not (although with Rich I typically bet on the side of conscious choice)"><a href="#t1495567994759302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:33:14</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I donâ€™t know if that was a conscious choice or not (although with Rich I typically bet on the side of conscious choice)</span></div><div id="t1495568023768590" t="2017-05-23 19:33:43 alexmiller stepping away again, maybe for a while, sorry :)"><a href="#t1495568023768590" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:33:43</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>stepping away again, maybe for a while, sorry :)</span></div><div id="t1495568034772017" t="2017-05-23 19:33:54 gfredericks no problem"><a href="#t1495568034772017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-23</span>Â <span class="t" onclick="H(this)">19:33:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no problem</span></div><div id="t1495786142668696" t="2017-05-26 08:09:02 andrea.crotti I was trying to write a generator for a matrix of random elements, but with rows of equal length"><a href="#t1495786142668696" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:09:02</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>I was trying to write a generator for a matrix of random elements, but with rows of equal length</span></div><div id="t1495786149670268" t="2017-05-26 08:09:09 andrea.crotti so this actually works
 (defn gen-image
  [nrows ncols]
  (gen/vector (gen/vector
               (gen/elements core/COLOURS)
               ncols)
              nrows))

"><a href="#t1495786149670268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:09:09</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>so this actually works
</span><pre>(defn gen-image
  [nrows ncols]
  (gen/vector (gen/vector
               (gen/elements core/COLOURS)
               ncols)
              nrows))

</pre></div><div id="t1495786206680493" t="2017-05-26 08:10:06 andrea.crotti however now gen-image is a function, and also doing this is not possible
 (prop/for-all
 [nrows gen/pos-int
  ncols gen/pos-int
  mat (gen-image nrows ncols)])
"><a href="#t1495786206680493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:10:06</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>however now gen-image is a function, and also doing this is not possible
</span><pre>(prop/for-all
 [nrows gen/pos-int
  ncols gen/pos-int
  mat (gen-image nrows ncols)])
</pre></div><div id="t1495786216682614" t="2017-05-26 08:10:16 andrea.crotti because nrows and ncols are not defined at that point"><a href="#t1495786216682614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:10:16</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>because nrows and ncols are not defined at that point</span></div><div id="t1495786236686488" t="2017-05-26 08:10:36 andrea.crotti I also try to nest prop/for-all but while that doesn&apos;t fail it doesn&apos;t really seem to do anything useful"><a href="#t1495786236686488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:10:36</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>I also try to nest prop/for-all but while that doesn&apos;t fail it doesn&apos;t really seem to do anything useful</span></div><div id="t1495786245688083" t="2017-05-26 08:10:45 andrea.crotti any suggestion?"><a href="#t1495786245688083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">08:10:45</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>any suggestion?</span></div><div id="t1495799485172680" t="2017-05-26 11:51:25 andrea.crotti @gfredericks brilliant thanks"><a href="#t1495799485172680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">11:51:25</span>Â Â Â Â Â Â Â andrea.crottiÂ </span><span>@gfredericks brilliant thanks</span></div><div id="t1495824522513964" t="2017-05-26 18:48:42 nwjsmith err, wasn&apos;t there a guide for using  recursive-gen  somewhere?"><a href="#t1495824522513964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">18:48:42</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>err, wasn&apos;t there a guide for using </span><code>recursive-gen</code><span> somewhere?</span></div><div id="t1495824781588102" t="2017-05-26 18:53:01 nwjsmith Found it!  https://github.com/clojure/test.check/blob/master/doc/intro.md#recursive-generators"><a href="#t1495824781588102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">18:53:01</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Found it! </span><a href="https://github.com/clojure/test.check/blob/master/doc/intro.md#recursive-generators" target="_blank">https://github.com/clojure/test.check/blob/master/doc/intro.md#recursive-generators</a></div><div id="t1495828148467153" t="2017-05-26 19:49:08 nwjsmith Hrm. So I&apos;m a bit stuck trying to write a generator for a directed acyclic graph. This is what I would like to do:
 ;; generate a list of nodes
;; for each node x in the list
;;   generate a none-empty subset of nodes to the right of x in the list 
;;   for each node in the subset
;;     create an edge from x to the node
"><a href="#t1495828148467153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">19:49:08</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Hrm. So I&apos;m a bit stuck trying to write a generator for a directed acyclic graph. This is what I would like to do:
</span><pre>;; generate a list of nodes
;; for each node x in the list
;;   generate a none-empty subset of nodes to the right of x in the list 
;;   for each node in the subset
;;     create an edge from x to the node
</pre></div><div id="t1495829865878930" t="2017-05-26 20:17:45 nwjsmith (gen/bind (gen/list-distinct gen-node {:min-elements 2})
           (fn [[node &amp; possible-joins]]
             (gen/fmap (fn [adjacent-nodes]
                         (map (partial join-nodes node) adjacent-nodes))
                       (gen/set (gen/elements possible-joins)))))
"><a href="#t1495829865878930" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:17:45</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><pre>(gen/bind (gen/list-distinct gen-node {:min-elements 2})
           (fn [[node &amp; possible-joins]]
             (gen/fmap (fn [adjacent-nodes]
                         (map (partial join-nodes node) adjacent-nodes))
                       (gen/set (gen/elements possible-joins)))))
</pre></div><div id="t1495829957899407" t="2017-05-26 20:19:17 nwjsmith that&apos;s what I have so far. Generate some nodes, take the first one, generate a subset from the rest, and create edges between the node and each node in the subset"><a href="#t1495829957899407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:19:17</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>that&apos;s what I have so far. Generate some nodes, take the first one, generate a subset from the rest, and create edges between the node and each node in the subset</span></div><div id="t1495829986905687" t="2017-05-26 20:19:46 nwjsmith I&apos;m having trouble figuring out how to recur on the &quot;next&quot; node"><a href="#t1495829986905687" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:19:46</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;m having trouble figuring out how to recur on the &quot;next&quot; node</span></div><div id="t1495830319983492" t="2017-05-26 20:25:19 gfredericks you could make that work, but something simpler might be to just generate all the edges at once"><a href="#t1495830319983492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:25:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could make that work, but something simpler might be to just generate all the edges at once</span></div><div id="t1495830383998166" t="2017-05-26 20:26:23 gfredericks (gen/let [nodes (gen/vector-distinct gen-node {:min-elements 2}), edges (gen/vector-distinct (gen/vector-distinct (gen/elements nodes) {:num-elements 2}))] ... figure which direction the edges go based on the ordering of nodes...)"><a href="#t1495830383998166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:26:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(gen/let [nodes (gen/vector-distinct gen-node {:min-elements 2}), edges (gen/vector-distinct (gen/vector-distinct (gen/elements nodes) {:num-elements 2}))] ... figure which direction the edges go based on the ordering of nodes...)</code></div><div id="t1495830440010871" t="2017-05-26 20:27:20 gfredericks pardon my lack of line breaks"><a href="#t1495830440010871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:27:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>pardon my lack of line breaks</span></div><div id="t1495830581043469" t="2017-05-26 20:29:41 gfredericks @nwjsmith â‡‘"><a href="#t1495830581043469" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-05-26</span>Â <span class="t" onclick="H(this)">20:29:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith â‡‘</span></div><div id="t1496493223809937" t="2017-06-03 12:33:43 alex.ter.weele @nwjsmith: Iâ€™m working on a similar problem. My approach (which doesnâ€™t work yet) will be something like this:
Perform a random number of â€œroundsâ€
On each round, generate an arbitrary number of new nodes, then draw arbitrary edges from the already-existing nodes to new nodes.
Recur on the union of new nodes and existing nodes (i.e. add the new nodes to the already existing nodes)"><a href="#t1496493223809937" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span>Â <span class="t" onclick="H(this)">12:33:43</span>Â Â Â Â Â Â alex.ter.weeleÂ </span><span>@nwjsmith: Iâ€™m working on a similar problem. My approach (which doesnâ€™t work yet) will be something like this:
Perform a random number of â€œroundsâ€
On each round, generate an arbitrary number of new nodes, then draw arbitrary edges from the already-existing nodes to new nodes.
Recur on the union of new nodes and existing nodes (i.e. add the new nodes to the already existing nodes)</span></div><div id="t1496502827300511" t="2017-06-03 15:13:47 nwjsmith @alex.ter.weele I managed to figure out how to generate the DAG in the way I described:  https://gist.github.com/nwjsmith/0f4288db2f7c0be8b06e5237d6175b3d"><a href="#t1496502827300511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span>Â <span class="t" onclick="H(this)">15:13:47</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@alex.ter.weele I managed to figure out how to generate the DAG in the way I described: </span><a href="https://gist.github.com/nwjsmith/0f4288db2f7c0be8b06e5237d6175b3d" target="_blank">https://gist.github.com/nwjsmith/0f4288db2f7c0be8b06e5237d6175b3d</a></div><div id="t1496502928306479" t="2017-06-03 15:15:28 nwjsmith The magic happens in  gen-acyclic-edges , where we build up a list of generators of connecting edges, and call  gen/tuple  on it once we&apos;re finished"><a href="#t1496502928306479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span>Â <span class="t" onclick="H(this)">15:15:28</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>The magic happens in </span><code>gen-acyclic-edges</code><span>, where we build up a list of generators of connecting edges, and call </span><code>gen/tuple</code><span> on it once we&apos;re finished</span></div><div id="t1496503650347442" t="2017-06-03 15:27:30 alex.ter.weele OK, I get it! It took me a second to realize why  gen-acyclic-edges  will never create cycles--because edges only go forward in the list."><a href="#t1496503650347442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-03</span>Â <span class="t" onclick="H(this)">15:27:30</span>Â Â Â Â Â Â alex.ter.weeleÂ </span><span>OK, I get it! It took me a second to realize why </span><code>gen-acyclic-edges</code><span> will never create cycles--because edges only go forward in the list.</span></div><div id="t1497232098134135" t="2017-06-12 01:48:18 gfredericks @alexmiller I&apos;ll start poking around with a collection sizing overhaul this week"><a href="#t1497232098134135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-12</span>Â <span class="t" onclick="H(this)">01:48:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller I&apos;ll start poking around with a collection sizing overhaul this week</span></div><div id="t1497622196347445" t="2017-06-16 14:09:56 carocad hey guys, where could I submit a bug report of the test.check library?"><a href="#t1497622196347445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:09:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>hey guys, where could I submit a bug report of the test.check library?</span></div><div id="t1497622368411280" t="2017-06-16 14:12:48 gfredericks @carocad  http://dev.clojure.org/jira"><a href="#t1497622368411280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:12:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@carocad </span><a href="http://dev.clojure.org/jira" target="_blank">http://dev.clojure.org/jira</a></div><div id="t1497623726935820" t="2017-06-16 14:35:26 carocad @gfredericks thanks"><a href="#t1497623726935820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:35:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>@gfredericks thanks</span></div><div id="t1497623758948232" t="2017-06-16 14:35:58 carocad maybe you could help me?. I think I might be doing a stupic mistake but I dont see it  ğŸ˜•"><a href="#t1497623758948232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:35:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>maybe you could help me?. I think I might be doing a stupic mistake but I dont see it </span><b>ğŸ˜•</b></div><div id="t1497623803965329" t="2017-06-16 14:36:43 carocad the locals declared inside  prop/for-all  are not being recognized"><a href="#t1497623803965329" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:36:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>the locals declared inside </span><code>prop/for-all</code><span> are not being recognized</span></div><div id="t1497623816970161" t="2017-06-16 14:36:56 carocad I cannot even make the example in the README work"><a href="#t1497623816970161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:36:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>I cannot even make the example in the README work</span></div><div id="t1497625119481417" t="2017-06-16 14:58:39 carocad bug report submitted"><a href="#t1497625119481417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">14:58:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>bug report submitted</span></div><div id="t1497625552662260" t="2017-06-16 15:05:52 gfredericks @carocad that&apos;s pretty strange"><a href="#t1497625552662260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:05:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@carocad that&apos;s pretty strange</span></div><div id="t1497625668708255" t="2017-06-16 15:07:48 carocad yeap, I am still trying to make sense of it. I mean if it would be normal if would have popep up before the lib release"><a href="#t1497625668708255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:07:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>yeap, I am still trying to make sense of it. I mean if it would be normal if would have popep up before the lib release</span></div><div id="t1497625688716454" t="2017-06-16 15:08:08 gfredericks @carocad looking at the travis log, the problem seems to be using previous bindings in the for-all, which doesn&apos;t support that"><a href="#t1497625688716454" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:08:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@carocad looking at the travis log, the problem seems to be using previous bindings in the for-all, which doesn&apos;t support that</span></div><div id="t1497625699720905" t="2017-06-16 15:08:19 gfredericks The bindings are independent"><a href="#t1497625699720905" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:08:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The bindings are independent</span></div><div id="t1497625727731480" t="2017-06-16 15:08:47 gfredericks That doesn&apos;t explain your claim that the readme example doesn&apos;t work"><a href="#t1497625727731480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:08:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That doesn&apos;t explain your claim that the readme example doesn&apos;t work</span></div><div id="t1497625753741201" t="2017-06-16 15:09:13 carocad I can put it on my file and show you a travis fail if that helps"><a href="#t1497625753741201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:09:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>I can put it on my file and show you a travis fail if that helps</span></div><div id="t1497625777751173" t="2017-06-16 15:09:37 carocad btw, removing the previous binding didnt solve it in my case"><a href="#t1497625777751173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:09:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>btw, removing the previous binding didnt solve it in my case</span></div><div id="t1497625859782390" t="2017-06-16 15:10:59 gfredericks You&apos;d have to refactor it to one binding with gen/let and destructing, probably"><a href="#t1497625859782390" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:10:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;d have to refactor it to one binding with gen/let and destructing, probably</span></div><div id="t1497625875788871" t="2017-06-16 15:11:15 gfredericks The travis logs are helpful, yeah"><a href="#t1497625875788871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:11:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The travis logs are helpful, yeah</span></div><div id="t1497625894796118" t="2017-06-16 15:11:34 gfredericks Especially if the source is online too "><a href="#t1497625894796118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:11:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Especially if the source is online too </span></div><div id="t1497625908801525" t="2017-06-16 15:11:48 carocad it is. Currently a pr but it should be enough"><a href="#t1497625908801525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:11:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>it is. Currently a pr but it should be enough</span></div><div id="t1497626115882038" t="2017-06-16 15:15:15 carocad hmmm seems that I was wrong. The build is still failing but it doesnt show the same problem as before"><a href="#t1497626115882038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:15:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>hmmm seems that I was wrong. The build is still failing but it doesnt show the same problem as before</span></div><div id="t1497626121884876" t="2017-06-16 15:15:21 carocad https://travis-ci.org/n7a235/backend.routing/builds/243706150?utm_source=github_status&amp;amp;utm_medium=notification"><a href="#t1497626121884876" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:15:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><a href="https://travis-ci.org/n7a235/backend.routing/builds/243706150?utm_source=github_status&amp;amp;utm_medium=notification" target="_blank">https://travis-ci.org/n7a235/backend.routing/builds/243706150?utm_source=github_status&amp;amp;utm_medium=notification</a></div><div id="t1497626140892571" t="2017-06-16 15:15:40 carocad the pr is this if it helps:  https://github.com/n7a235/backend.routing/pull/3"><a href="#t1497626140892571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:15:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>the pr is this if it helps: </span><a href="https://github.com/n7a235/backend.routing/pull/3" target="_blank">https://github.com/n7a235/backend.routing/pull/3</a></div><div id="t1497626314960882" t="2017-06-16 15:18:34 gfredericks @carocad that looks like just an eastwood failure?"><a href="#t1497626314960882" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:18:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@carocad that looks like just an eastwood failure?</span></div><div id="t1497626356977187" t="2017-06-16 15:19:16 carocad yeah it seems like it. I just changed my code and the example from the repo worked locally. I am testing in travis"><a href="#t1497626356977187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:19:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>yeah it seems like it. I just changed my code and the example from the repo worked locally. I am testing in travis</span></div><div id="t1497626658095780" t="2017-06-16 15:24:18 carocad yeah it worked"><a href="#t1497626658095780" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:24:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>yeah it worked</span></div><div id="t1497626684106159" t="2017-06-16 15:24:44 carocad so the problem was the previous bindings  ğŸ˜„  sorry"><a href="#t1497626684106159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:24:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>so the problem was the previous bindings </span><b>ğŸ˜„</b><span> sorry</span></div><div id="t1497626718119782" t="2017-06-16 15:25:18 carocad I&apos;m closing the issue"><a href="#t1497626718119782" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:25:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>I&apos;m closing the issue</span></div><div id="t1497626761136728" t="2017-06-16 15:26:01 gfredericks cool, thanks"><a href="#t1497626761136728" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:26:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>cool, thanks</span></div><div id="t1497626890188394" t="2017-06-16 15:28:10 carocad oh it seems I cannot close the issue  ğŸ˜ 
I put a comment explaining it was my failure though"><a href="#t1497626890188394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:28:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>oh it seems I cannot close the issue </span><b>ğŸ˜</b><span>
I put a comment explaining it was my failure though</span></div><div id="t1497626940208381" t="2017-06-16 15:29:00 gfredericks huh, strange"><a href="#t1497626940208381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:29:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>huh, strange</span></div><div id="t1497626942209164" t="2017-06-16 15:29:02 gfredericks I&apos;ll close it"><a href="#t1497626942209164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:29:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll close it</span></div><div id="t1497627098272643" t="2017-06-16 15:31:38 carocad thanks  ğŸ‘"><a href="#t1497627098272643" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-16</span>Â <span class="t" onclick="H(this)">15:31:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â carocadÂ </span><span>thanks </span><b>ğŸ‘</b></div><div id="t1497878492788155" t="2017-06-19 13:21:32 gfredericks @alexmiller I have a branch with proposed changes to collection sizing:  https://github.com/clojure/test.check/tree/TCHECK-106"><a href="#t1497878492788155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">13:21:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller I have a branch with proposed changes to collection sizing: </span><a href="https://github.com/clojure/test.check/tree/TCHECK-106" target="_blank">https://github.com/clojure/test.check/tree/TCHECK-106</a></div><div id="t1497878526799660" t="2017-06-19 13:22:06 gfredericks I&apos;m not sure if you are interested in the subtleties or not, but let me know if you have any thoughts or any other way of testing whether it improves the situation with spec&apos;s usage"><a href="#t1497878526799660" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">13:22:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m not sure if you are interested in the subtleties or not, but let me know if you have any thoughts or any other way of testing whether it improves the situation with spec&apos;s usage</span></div><div id="t1497878568813532" t="2017-06-19 13:22:48 gfredericks I think the biggest &quot;risk&quot; is in severely reducing the coverage of existing tests that make assumptions about the old distributions"><a href="#t1497878568813532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">13:22:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the biggest &quot;risk&quot; is in severely reducing the coverage of existing tests that make assumptions about the old distributions</span></div><div id="t1497883928954949" t="2017-06-19 14:52:08 gfredericks could easily just release another alpha and see how it goes"><a href="#t1497883928954949" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">14:52:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>could easily just release another alpha and see how it goes</span></div><div id="t1497886671147496" t="2017-06-19 15:37:51 alexmiller I would love to take a look, but wonâ€™t be today"><a href="#t1497886671147496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">15:37:51</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I would love to take a look, but wonâ€™t be today</span></div><div id="t1497886859227276" t="2017-06-19 15:40:59 gfredericks :+1:  no rush"><a href="#t1497886859227276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-19</span>Â <span class="t" onclick="H(this)">15:40:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b><span> no rush</span></div><div id="t1497977362213176" t="2017-06-20 16:49:22 mfikes There is an evidently breaking change in the  0.10.0-alpha1  release, somehow related to the introduction of the result protocol ( https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179 ). Was it intentional that this be a breaking change (does it require clients to update?)
Here is a related ticket in the ClojureScript compiler regarding it:  https://dev.clojure.org/jira/browse/CLJS-2110"><a href="#t1497977362213176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:49:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>There is an evidently breaking change in the </span><code>0.10.0-alpha1</code><span> release, somehow related to the introduction of the result protocol (</span><a href="https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179" target="_blank">https://github.com/clojure/test.check/commit/95112167af9636a48d3174ddd03409e8ac752179</a><span>). Was it intentional that this be a breaking change (does it require clients to update?)
Here is a related ticket in the ClojureScript compiler regarding it: </span><a href="https://dev.clojure.org/jira/browse/CLJS-2110" target="_blank">https://dev.clojure.org/jira/browse/CLJS-2110</a></div><div id="t1497977565291740" t="2017-06-20 16:52:45 gfredericks @mfikes the issue is spec returning an exception object?"><a href="#t1497977565291740" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:52:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mfikes the issue is spec returning an exception object?</span></div><div id="t1497977591301601" t="2017-06-20 16:53:11 mfikes To be honest, I havenâ€™t sorted out why things are regressing."><a href="#t1497977591301601" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:53:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>To be honest, I havenâ€™t sorted out why things are regressing.</span></div><div id="t1497977633318097" t="2017-06-20 16:53:53 gfredericks So spec used a hacky workaround that the result protocol was meant to obviate"><a href="#t1497977633318097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:53:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So spec used a hacky workaround that the result protocol was meant to obviate</span></div><div id="t1497977638320191" t="2017-06-20 16:53:58 mfikes I only know empirically right now based on bisecting. Iâ€™ve read the code to at least attempt to grok why, but havenâ€™t gained comprehension yet."><a href="#t1497977638320191" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:53:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>I only know empirically right now based on bisecting. Iâ€™ve read the code to at least attempt to grok why, but havenâ€™t gained comprehension yet.</span></div><div id="t1497977676335548" t="2017-06-20 16:54:36 gfredericks So ideally spec should change to the better version, but I don&apos;t think I meant it to break. Though I might have"><a href="#t1497977676335548" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:54:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So ideally spec should change to the better version, but I don&apos;t think I meant it to break. Though I might have</span></div><div id="t1497977706347069" t="2017-06-20 16:55:06 mfikes (I also donâ€™t know if this affects Clojureâ€”my experience with it is with JVM and self-hosted ClojureScript, where it breaks in the same way for both.)"><a href="#t1497977706347069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:55:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>(I also donâ€™t know if this affects Clojureâ€”my experience with it is with JVM and self-hosted ClojureScript, where it breaks in the same way for both.)</span></div><div id="t1497977708347931" t="2017-06-20 16:55:08 gfredericks I don&apos;t have a sense for what parts are changing at what speed  ğŸ˜•  "><a href="#t1497977708347931" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:55:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t have a sense for what parts are changing at what speed </span><b>ğŸ˜•</b><span> </span></div><div id="t1497977749364021" t="2017-06-20 16:55:49 gfredericks And whether it would be bad for spec to require tc alpha"><a href="#t1497977749364021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:55:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And whether it would be bad for spec to require tc alpha</span></div><div id="t1497977749364210" t="2017-06-20 16:55:49 mfikes Cool. If there was no clear intent to be a breaking change, Iâ€™ll dig further to see if can suss out what is going on."><a href="#t1497977749364210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:55:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Cool. If there was no clear intent to be a breaking change, Iâ€™ll dig further to see if can suss out what is going on.</span></div><div id="t1497977840400492" t="2017-06-20 16:57:20 gfredericks I expect making it nonbreaking would consist of having t.c continue special-casing return values that are Exceptions"><a href="#t1497977840400492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:57:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I expect making it nonbreaking would consist of having t.c continue special-casing return values that are Exceptions</span></div><div id="t1497977996462955" t="2017-06-20 16:59:56 mfikes That helpsâ€¦ Iâ€™ll dig deeperâ€”t.c. 0.10.0 is still alpha, after all."><a href="#t1497977996462955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">16:59:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>That helpsâ€¦ Iâ€™ll dig deeperâ€”t.c. 0.10.0 is still alpha, after all.</span></div><div id="t1497978334603433" t="2017-06-20 17:05:34 alexmiller I would say itâ€™s possible that spec.alpha could depend on an alpha"><a href="#t1497978334603433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:05:34</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I would say itâ€™s possible that spec.alpha could depend on an alpha</span></div><div id="t1497978346608046" t="2017-06-20 17:05:46 alexmiller but that regardless of that, t.c shouldnâ€™t introduce a breaking change"><a href="#t1497978346608046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:05:46</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>but that regardless of that, t.c shouldnâ€™t introduce a breaking change</span></div><div id="t1497978369616999" t="2017-06-20 17:06:09 alexmiller and if the semantics need to change, it should have a new name"><a href="#t1497978369616999" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:06:09</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and if the semantics need to change, it should have a new name</span></div><div id="t1497980182330391" t="2017-06-20 17:36:22 mfikes FWIW, t.c  0.10.0-alpha1  has a breaking change for Clojure  1.9.0-alpha17  for this case as well:
 $ lein repl
nREPL server started on port 55971 on host 127.0.0.1 - 
REPL-y 0.3.7, nREPL 0.2.12
Clojure 1.9.0-alpha17
Java HotSpot(TM) 64-Bit Server VM 1.8.0_131-b11
    Docs: (doc function-name-here)
          (find-doc &quot;part-of-name-here&quot;)
  Source: (source function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
    Exit: Control+D or (exit) or (quit)
 Results: Stored in vars *1, *2, *3, an exception in *e

user=&gt; (require &apos;[clojure.spec.alpha :as s]
  #_=&gt;   &apos;[clojure.spec.test.alpha :as st])
nil
user=&gt; (defn ranged-rand [start end] 0)
#&apos;user/ranged-rand
user=&gt; (s/fdef ranged-rand
  #_=&gt;   :args (s/and (s/cat :start int? :end int?)
  #_=&gt;                #(&lt; (:start %) (:end %)))
  #_=&gt;   :ret int?
  #_=&gt;   :fn (s/and #(&gt;= (:ret %) (-&gt; % :args :start))
  #_=&gt;              #(&lt; (:ret %) (-&gt; % :args :end))))
user/ranged-rand
user=&gt; (st/check `ranged-rand)
({:spec #object[clojure.spec.alpha$fspec_impl$reify__1215 0x2af92bb9 &quot;"><a href="#t1497980182330391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:36:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>FWIW, t.c </span><code>0.10.0-alpha1</code><span> has a breaking change for Clojure </span><code>1.9.0-alpha17</code><span> for this case as well:
</span><pre>$ lein repl
nREPL server started on port 55971 on host 127.0.0.1 - 
REPL-y 0.3.7, nREPL 0.2.12
Clojure 1.9.0-alpha17
Java HotSpot(TM) 64-Bit Server VM 1.8.0_131-b11
    Docs: (doc function-name-here)
          (find-doc &quot;part-of-name-here&quot;)
  Source: (source function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
    Exit: Control+D or (exit) or (quit)
 Results: Stored in vars *1, *2, *3, an exception in *e

user=&gt; (require &apos;[clojure.spec.alpha :as s]
  #_=&gt;   &apos;[clojure.spec.test.alpha :as st])
nil
user=&gt; (defn ranged-rand [start end] 0)
#&apos;user/ranged-rand
user=&gt; (s/fdef ranged-rand
  #_=&gt;   :args (s/and (s/cat :start int? :end int?)
  #_=&gt;                #(&lt; (:start %) (:end %)))
  #_=&gt;   :ret int?
  #_=&gt;   :fn (s/and #(&gt;= (:ret %) (-&gt; % :args :start))
  #_=&gt;              #(&lt; (:ret %) (-&gt; % :args :end))))
user/ranged-rand
user=&gt; (st/check `ranged-rand)
({:spec #object[clojure.spec.alpha$fspec_impl$reify__1215 0x2af92bb9 &quot;</pre></div><div id="t1497980321385523" t="2017-06-20 17:38:41 alexmiller whatâ€™s the change?"><a href="#t1497980321385523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:38:41</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>whatâ€™s the change?</span></div><div id="t1497980362401885" t="2017-06-20 17:39:22 alexmiller at a glance I donâ€™t see anything amiss there"><a href="#t1497980362401885" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:39:22</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>at a glance I donâ€™t see anything amiss there</span></div><div id="t1497980411422277" t="2017-06-20 17:40:11 mfikes Right, it might not be a breaking change, but an internal bug. Here is what it used to doâ€¦"><a href="#t1497980411422277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:40:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Right, it might not be a breaking change, but an internal bug. Here is what it used to doâ€¦</span></div><div id="t1497980470445678" t="2017-06-20 17:41:10 mfikes Here is a gistâ€¦ it is too big to really paste:  https://gist.github.com/mfikes/1caa83751019495cfdda83e79ad7e3ed"><a href="#t1497980470445678" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:41:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Here is a gistâ€¦ it is too big to really paste: </span><a href="https://gist.github.com/mfikes/1caa83751019495cfdda83e79ad7e3ed" target="_blank">https://gist.github.com/mfikes/1caa83751019495cfdda83e79ad7e3ed</a></div><div id="t1497980597496005" t="2017-06-20 17:43:17 mfikes Internal bug because: It doesnâ€™t return a falsey  :result 
Breaking change because the  :result  used to be much richer than just a Boolean value, and clients might not know to look for  :result-data"><a href="#t1497980597496005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:43:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Internal bug because: It doesnâ€™t return a falsey </span><code>:result</code><span>
Breaking change because the </span><code>:result</code><span> used to be much richer than just a Boolean value, and clients might not know to look for </span><code>:result-data</code></div><div id="t1497980654518179" t="2017-06-20 17:44:14 alexmiller it just looks to me like it found a failing example in the old one but didnâ€™t in the new one"><a href="#t1497980654518179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:44:14</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>it just looks to me like it found a failing example in the old one but didnâ€™t in the new one</span></div><div id="t1497980677528027" t="2017-06-20 17:44:37 alexmiller which might just be due to what the random seed turned up, not a real difference"><a href="#t1497980677528027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:44:37</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>which might just be due to what the random seed turned up, not a real difference</span></div><div id="t1497980687531898" t="2017-06-20 17:44:47 mfikes Ahh. Right."><a href="#t1497980687531898" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:44:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Ahh. Right.</span></div><div id="t1497980703538547" t="2017-06-20 17:45:03 mfikes Iâ€™ll increase the number of tests to see what occurs."><a href="#t1497980703538547" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:45:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Iâ€™ll increase the number of tests to see what occurs.</span></div><div id="t1497980807580373" t="2017-06-20 17:46:47 alexmiller I guess maybe itâ€™s surprising that t.c found 1000 successful cases with a hard-coded result in the new one"><a href="#t1497980807580373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:46:47</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I guess maybe itâ€™s surprising that t.c found 1000 successful cases with a hard-coded result in the new one</span></div><div id="t1497980852599094" t="2017-06-20 17:47:32 mfikes True. Seems unlikely to have pulled that off  ğŸ™‚"><a href="#t1497980852599094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:47:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>True. Seems unlikely to have pulled that off </span><b>ğŸ™‚</b></div><div id="t1497980906620641" t="2017-06-20 17:48:26 alexmiller so maybe just looking at (gen/sample (s/gen (:args (s/get-spec user/ranged-rand))) 1000) might be interesting as a before / after"><a href="#t1497980906620641" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:48:26</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>so maybe just looking at (gen/sample (s/gen (:args (s/get-spec user/ranged-rand))) 1000) might be interesting as a before / after</span></div><div id="t1497981017664292" t="2017-06-20 17:50:17 mfikes user=&gt; (gen/sample (s/gen (:args (s/get-spec &apos;user/ranged-rand))) 10)
((0 1) (-1 0) (-1 2) (0 1) (-23 2) (1 3) (-16 -6) (-92 -10) (-1 2) (2 7))
"><a href="#t1497981017664292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:50:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><pre>user=&gt; (gen/sample (s/gen (:args (s/get-spec &apos;user/ranged-rand))) 10)
((0 1) (-1 0) (-1 2) (0 1) (-23 2) (1 3) (-16 -6) (-92 -10) (-1 2) (2 7))
</pre></div><div id="t1497981038672915" t="2017-06-20 17:50:38 mfikes (2 7)  should fail, right?"><a href="#t1497981038672915" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:50:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><code>(2 7)</code><span> should fail, right?</span></div><div id="t1497981050677798" t="2017-06-20 17:50:50 alexmiller yeah"><a href="#t1497981050677798" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:50:50</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah</span></div><div id="t1497981077689140" t="2017-06-20 17:51:17 alexmiller as should (-92 -10)"><a href="#t1497981077689140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:51:17</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>as should (-92 -10)</span></div><div id="t1497981090694445" t="2017-06-20 17:51:30 mfikes Yepâ€¦ many donâ€™t include 0"><a href="#t1497981090694445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:51:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Yepâ€¦ many donâ€™t include 0</span></div><div id="t1497981092694990" t="2017-06-20 17:51:32 alexmiller or (1 3)"><a href="#t1497981092694990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:51:32</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>or (1 3)</span></div><div id="t1497981104699819" t="2017-06-20 17:51:44 alexmiller or (-1 0) - which is the failing example in the old one"><a href="#t1497981104699819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:51:44</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>or (-1 0) - which is the failing example in the old one</span></div><div id="t1497981124707747" t="2017-06-20 17:52:04 alexmiller so the generator seems fine"><a href="#t1497981124707747" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:52:04</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>so the generator seems fine</span></div><div id="t1497981134712003" t="2017-06-20 17:52:14 alexmiller and next we should suspect the prop checking"><a href="#t1497981134712003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:52:14</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and next we should suspect the prop checking</span></div><div id="t1497981581895379" t="2017-06-20 17:59:41 mfikes I revised my  ranged-rand  to  prn  its args, and also revised the  :fn  part of the  fdef  to print its argument, and at least those parts look correct
 user=&gt; (st/check `ranged-rand {:clojure.spec.test.check/opts {:num-tests 2}})
-1 1
{:args {:start -1, :end 1}, :ret 0}
-4 -2
{:args {:start -4, :end -2}, :ret 0}
({:spec #object[clojure.spec.alpha$fspec_impl$reify__1215 0x77b18e9a &quot;"><a href="#t1497981581895379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">17:59:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>I revised my </span><code>ranged-rand</code><span> to </span><code>prn</code><span> its args, and also revised the </span><code>:fn</code><span> part of the </span><code>fdef</code><span> to print its argument, and at least those parts look correct
</span><pre>user=&gt; (st/check `ranged-rand {:clojure.spec.test.check/opts {:num-tests 2}})
-1 1
{:args {:start -1, :end 1}, :ret 0}
-4 -2
{:args {:start -4, :end -2}, :ret 0}
({:spec #object[clojure.spec.alpha$fspec_impl$reify__1215 0x77b18e9a &quot;</pre></div><div id="t1497982094104442" t="2017-06-20 18:08:14 gfredericks hi I&apos;m back"><a href="#t1497982094104442" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:08:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>hi I&apos;m back</span></div><div id="t1497982117113559" t="2017-06-20 18:08:37 mfikes TL;DR of the above is just reproing it in Clojure"><a href="#t1497982117113559" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:08:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>TL;DR of the above is just reproing it in Clojure</span></div><div id="t1497982230157955" t="2017-06-20 18:10:30 mfikes I suppose there is the twist that there might be an internal bug in t.c (disregarding any potential interface changes)"><a href="#t1497982230157955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:10:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>I suppose there is the twist that there might be an internal bug in t.c (disregarding any potential interface changes)</span></div><div id="t1497982261169645" t="2017-06-20 18:11:01 gfredericks @mfikes regarding the first issue, it definitely looks like I didn&apos;t retain the old behavior; an extra clause here should fix it:  https://github.com/clojure/test.check/blob/23e1fcc1bb7f3f2d0202ed99eee202a0b1f2c652/src/main/clojure/clojure/test/check/results.cljc#L18"><a href="#t1497982261169645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:11:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mfikes regarding the first issue, it definitely looks like I didn&apos;t retain the old behavior; an extra clause here should fix it: </span><a href="https://github.com/clojure/test.check/blob/23e1fcc1bb7f3f2d0202ed99eee202a0b1f2c652/src/main/clojure/clojure/test/check/results.cljc#L18" target="_blank">https://github.com/clojure/test.check/blob/23e1fcc1bb7f3f2d0202ed99eee202a0b1f2c652/src/main/clojure/clojure/test/check/results.cljc#L18</a></div><div id="t1497982284178542" t="2017-06-20 18:11:24 gfredericks I&apos;m assuming cljs has something like  Throwable  for extending error types, but maybe that&apos;s not true?"><a href="#t1497982284178542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:11:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m assuming cljs has something like </span><code>Throwable</code><span> for extending error types, but maybe that&apos;s not true?</span></div><div id="t1497982308188067" t="2017-06-20 18:11:48 mfikes It might be possible to extend js/Error or somesuch"><a href="#t1497982308188067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:11:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>It might be possible to extend js/Error or somesuch</span></div><div id="t1497982792378382" t="2017-06-20 18:19:52 mfikes @gfredericks Evidently you can. Not sure what the implications might be.
 cljs.user=&gt; (defprotocol Result
       #_=&gt;   (passing? [result])
       #_=&gt;   (result-data [result] &quot;A map of data about the trial.&quot;))
nil
cljs.user=&gt; (extend-protocol Result
       #_=&gt;   js/Error
       #_=&gt;   (passing? [this] false)
       #_=&gt;   (result-data [this] (ex-data this)))
#object[Function &quot;function (this$){
var this$__$1 = this;
return cljs.core.ex_data.call(null,this$__$1);
}&quot;]
cljs.user=&gt; (result-data (ex-info &quot;hi&quot; {:a 1}))
{:a 1}
"><a href="#t1497982792378382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:19:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>@gfredericks Evidently you can. Not sure what the implications might be.
</span><pre>cljs.user=&gt; (defprotocol Result
       #_=&gt;   (passing? [result])
       #_=&gt;   (result-data [result] &quot;A map of data about the trial.&quot;))
nil
cljs.user=&gt; (extend-protocol Result
       #_=&gt;   js/Error
       #_=&gt;   (passing? [this] false)
       #_=&gt;   (result-data [this] (ex-data this)))
#object[Function &quot;function (this$){
var this$__$1 = this;
return cljs.core.ex_data.call(null,this$__$1);
}&quot;]
cljs.user=&gt; (result-data (ex-info &quot;hi&quot; {:a 1}))
{:a 1}
</pre></div><div id="t1497982810385359" t="2017-06-20 18:20:10 mfikes ^ works in JVM and self-hosted ClojureScript"><a href="#t1497982810385359" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:20:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>^ works in JVM and self-hosted ClojureScript</span></div><div id="t1497982816387583" t="2017-06-20 18:20:16 gfredericks @mfikes does it work for  (throw &quot;some string&quot;) ?"><a href="#t1497982816387583" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:20:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mfikes does it work for </span><code>(throw &quot;some string&quot;)</code><span>?</span></div><div id="t1497982974451146" t="2017-06-20 18:22:54 mfikes @gfredericks If you extract using  ex-message :
 cljs.user=&gt; (extend-protocol Result
       #_=&gt;   js/Error
       #_=&gt;   (passing? [this] false)
       #_=&gt;   (result-data [this] (ex-message this)))
#object[Function &quot;function (this$){
var this$__$1 = this;
return cljs.core.ex_message.call(null,this$__$1);
}&quot;]
cljs.user=&gt; (result-data (js/Error. &quot;some string&quot;))
&quot;some string&quot;
"><a href="#t1497982974451146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:22:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>@gfredericks If you extract using </span><code>ex-message</code><span>:
</span><pre>cljs.user=&gt; (extend-protocol Result
       #_=&gt;   js/Error
       #_=&gt;   (passing? [this] false)
       #_=&gt;   (result-data [this] (ex-message this)))
#object[Function &quot;function (this$){
var this$__$1 = this;
return cljs.core.ex_message.call(null,this$__$1);
}&quot;]
cljs.user=&gt; (result-data (js/Error. &quot;some string&quot;))
&quot;some string&quot;
</pre></div><div id="t1497983083494418" t="2017-06-20 18:24:43 mfikes Iâ€™ll see what happens if I build a t.c that further extends  Result  to exceptions"><a href="#t1497983083494418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:24:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Iâ€™ll see what happens if I build a t.c that further extends </span><code>Result</code><span> to exceptions</span></div><div id="t1497983428632279" t="2017-06-20 18:30:28 gfredericks I was just concerned that if you throw a string, the thrown thing is not a  js/Error  and so wouldn&apos;t match that clause"><a href="#t1497983428632279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:30:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I was just concerned that if you throw a string, the thrown thing is not a </span><code>js/Error</code><span> and so wouldn&apos;t match that clause</span></div><div id="t1497983443638261" t="2017-06-20 18:30:43 mfikes Ahh"><a href="#t1497983443638261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:30:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Ahh</span></div><div id="t1497984228948732" t="2017-06-20 18:43:48 mfikes At least for the exception thrown for the case above, further extending does the trick"><a href="#t1497984228948732" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:43:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>At least for the exception thrown for the case above, further extending does the trick</span></div><div id="t1497984280968860" t="2017-06-20 18:44:40 mfikes cljs.user=&gt; (st/check `ranged-rand)
[{:spec #object[cljs.spec.alpha.t_cljs$spec$alpha5600],
  :clojure.test.check/ret {:result false,
                           :result-data {:a 1},
                           :seed 1497984200982,
                           :failing-size 0,
                           :num-tests 1,
                           :fail [(-1 0)],
                           :shrunk {:total-nodes-visited 0,
                                    :depth 0,
                                    :result false,
                                    :result-data {:a 1},
                                    :smallest [(-1 0)]}},
  :sym cljs.user/ranged-rand,
  :failure false}]
 

With this kind of extension:
 (passing? [this] false)
-  (result-data [this] {}))
+  (result-data [this] {})
+
+  #?(:clj Throwable :cljs js/Error)
+  (passing? [this] false)
+  (result-data [this] {:a 1}))
"><a href="#t1497984280968860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:44:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><pre>cljs.user=&gt; (st/check `ranged-rand)
[{:spec #object[cljs.spec.alpha.t_cljs$spec$alpha5600],
  :clojure.test.check/ret {:result false,
                           :result-data {:a 1},
                           :seed 1497984200982,
                           :failing-size 0,
                           :num-tests 1,
                           :fail [(-1 0)],
                           :shrunk {:total-nodes-visited 0,
                                    :depth 0,
                                    :result false,
                                    :result-data {:a 1},
                                    :smallest [(-1 0)]}},
  :sym cljs.user/ranged-rand,
  :failure false}]
</pre><span>

With this kind of extension:
</span><pre>(passing? [this] false)
-  (result-data [this] {}))
+  (result-data [this] {})
+
+  #?(:clj Throwable :cljs js/Error)
+  (passing? [this] false)
+  (result-data [this] {:a 1}))
</pre></div><div id="t1497984486052038" t="2017-06-20 18:48:06 mfikes Perhaps  :failure false  is not what youâ€™d want. Hrm."><a href="#t1497984486052038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">18:48:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Perhaps </span><code>:failure false</code><span> is not what youâ€™d want. Hrm.</span></div><div id="t1497989708988135" t="2017-06-20 20:15:08 mfikes Captured the above with  https://dev.clojure.org/jira/browse/TCHECK-131"><a href="#t1497989708988135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">20:15:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Captured the above with </span><a href="https://dev.clojure.org/jira/browse/TCHECK-131" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-131</a></div><div id="t1497994484633967" t="2017-06-20 21:34:44 gfredericks @mfikes great, thanks"><a href="#t1497994484633967" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">21:34:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@mfikes great, thanks</span></div><div id="t1497994519644144" t="2017-06-20 21:35:19 gfredericks I&apos;ll make sure to get another alpha out shortly"><a href="#t1497994519644144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">21:35:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll make sure to get another alpha out shortly</span></div><div id="t1497995025786820" t="2017-06-20 21:43:45 mfikes Thanks @gfredericks !"><a href="#t1497995025786820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-20</span>Â <span class="t" onclick="H(this)">21:43:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mfikesÂ </span><span>Thanks @gfredericks !</span></div><div id="t1498506244429145" t="2017-06-26 19:44:04 rabbitthirtyeight I&apos;m having trouble doing some seemingly basic stuff with test.check. Can someone point out where I&apos;m going wrong? 

Basically  bind  and  large-integer*  don&apos;t seem to be working as I expected. 

If I have the following in my property:
 (let  [greater (gen/large-integer* {:min 0 :max 10})
        lesser (gen/bind greater (fn [x] (gen/large-integer* {:min 0 :max x})))]


    (prop/for-all [less lesser
                   great greater]
                  (is (&lt;= less great)))
 
when I run the test I always get the following failure:
 expected: (&lt;= less great)
  actual: (not (&lt;= 1 0))
"><a href="#t1498506244429145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-26</span>Â <span class="t" onclick="H(this)">19:44:04</span>Â Â Â rabbitthirtyeightÂ </span><span>I&apos;m having trouble doing some seemingly basic stuff with test.check. Can someone point out where I&apos;m going wrong? 

Basically </span><code>bind</code><span> and </span><code>large-integer*</code><span> don&apos;t seem to be working as I expected. 

If I have the following in my property:
</span><pre>(let  [greater (gen/large-integer* {:min 0 :max 10})
        lesser (gen/bind greater (fn [x] (gen/large-integer* {:min 0 :max x})))]


    (prop/for-all [less lesser
                   great greater]
                  (is (&lt;= less great)))
</pre><span>
when I run the test I always get the following failure:
</span><pre>expected: (&lt;= less great)
  actual: (not (&lt;= 1 0))
</pre></div><div id="t1498508928384238" t="2017-06-26 20:28:48 gfredericks @rabbitthirtyeight I know what&apos;s wrong, but don&apos;t know enough about what you&apos;re really doing to recommend an alternative"><a href="#t1498508928384238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-26</span>Â <span class="t" onclick="H(this)">20:28:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@rabbitthirtyeight I know what&apos;s wrong, but don&apos;t know enough about what you&apos;re really doing to recommend an alternative</span></div><div id="t1498508942389324" t="2017-06-26 20:29:02 gfredericks the reason it isn&apos;t doing what you think is that there&apos;s a different  greater  being generated for each of  less  and  great"><a href="#t1498508942389324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-26</span>Â <span class="t" onclick="H(this)">20:29:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the reason it isn&apos;t doing what you think is that there&apos;s a different </span><code>greater</code><span> being generated for each of </span><code>less</code><span> and </span><code>great</code></div><div id="t1498538022546990" t="2017-06-27 04:33:42 rabbitthirtyeight @gfredericks ah. I see what you&apos;re saying. Thanks! Given that, I think I need to re-think what I was trying to do. If I&apos;m unable to figure it out I&apos;ll post back in here."><a href="#t1498538022546990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-27</span>Â <span class="t" onclick="H(this)">04:33:42</span>Â Â Â rabbitthirtyeightÂ </span><span>@gfredericks ah. I see what you&apos;re saying. Thanks! Given that, I think I need to re-think what I was trying to do. If I&apos;m unable to figure it out I&apos;ll post back in here.</span></div><div id="t1498567158270714" t="2017-06-27 12:39:18 gfredericks I&apos;m thinking of creating  prop/for-all2 , or  prop/for-all-2 , whichever name is better"><a href="#t1498567158270714" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-27</span>Â <span class="t" onclick="H(this)">12:39:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m thinking of creating </span><code>prop/for-all2</code><span>, or </span><code>prop/for-all-2</code><span>, whichever name is better</span></div><div id="t1498567212285143" t="2017-06-27 12:40:12 gfredericks differences:

- doesn&apos;t have the TCHECK-131 interpretation of returned exceptions
- uses sequential bindings like  gen/let , and has the map-binding syntax of  gen/let  as well for parallel bindings
- any other improvements anybody would want?"><a href="#t1498567212285143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-27</span>Â <span class="t" onclick="H(this)">12:40:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>differences:

- doesn&apos;t have the TCHECK-131 interpretation of returned exceptions
- uses sequential bindings like </span><code>gen/let</code><span>, and has the map-binding syntax of </span><code>gen/let</code><span> as well for parallel bindings
- any other improvements anybody would want?</span></div><div id="t1498570994577680" t="2017-06-27 13:43:14 gfredericks test.check version  0.10.0-alpha2  was just released; changelog here:  https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha2-2017-06-27"><a href="#t1498570994577680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-27</span>Â <span class="t" onclick="H(this)">13:43:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.check version </span><code>0.10.0-alpha2</code><span> was just released; changelog here: </span><a href="https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha2-2017-06-27" target="_blank">https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha2-2017-06-27</a></div><div id="t1499202931983266" t="2017-07-04 21:15:31 mattly so just as a testament to the power of property-based testing:"><a href="#t1499202931983266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:15:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so just as a testament to the power of property-based testing:</span></div><div id="t1499202977989504" t="2017-07-04 21:16:17 mattly the harness I have for testing calculations &amp; queries against the data warehouse I manage an application front-end for just caught a super-rare edge case"><a href="#t1499202977989504" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:16:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>the harness I have for testing calculations &amp; queries against the data warehouse I manage an application front-end for just caught a super-rare edge case</span></div><div id="t1499202984990477" t="2017-07-04 21:16:24 mattly doesn&apos;t actually happen against production data"><a href="#t1499202984990477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:16:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>doesn&apos;t actually happen against production data</span></div><div id="t1499202997992104" t="2017-07-04 21:16:37 mattly but it could"><a href="#t1499202997992104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:16:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but it could</span></div><div id="t1499203033996842" t="2017-07-04 21:17:13 mattly my test suite started running monday morning, and test.check generated this edge case, and cranked on it for over 30 hours, approx 200k iterations, until it isolated the problem"><a href="#t1499203033996842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:17:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>my test suite started running monday morning, and test.check generated this edge case, and cranked on it for over 30 hours, approx 200k iterations, until it isolated the problem</span></div><div id="t1499203051999551" t="2017-07-04 21:17:31 mattly and I look at it and go, oh, of course!"><a href="#t1499203051999551" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:17:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and I look at it and go, oh, of course!</span></div><div id="t1499203073002593" t="2017-07-04 21:17:53 mattly and it was like one of these little 2 character fixes"><a href="#t1499203073002593" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:17:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>and it was like one of these little 2 character fixes</span></div><div id="t1499203099006432" t="2017-07-04 21:18:19 mattly but had the problem occurred against production data, nobody ever would have known"><a href="#t1499203099006432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:18:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but had the problem occurred against production data, nobody ever would have known</span></div><div id="t1499203102006900" t="2017-07-04 21:18:22 mattly so, thanks"><a href="#t1499203102006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:18:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>so, thanks</span></div><div id="t1499203540065201" t="2017-07-04 21:25:40 gfredericks &gt; doesn&apos;t actually happen against production data

&gt; but had the problem occurred against production data, nobody ever would have known

So how do you know it didn&apos;t?"><a href="#t1499203540065201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-04</span>Â <span class="t" onclick="H(this)">21:25:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&gt; doesn&apos;t actually happen against production data

&gt; but had the problem occurred against production data, nobody ever would have known

So how do you know it didn&apos;t?</span></div><div id="t1499226996993099" t="2017-07-05 03:56:36 mattly I checked the source condition against our production set, it didn&apos;t exist"><a href="#t1499226996993099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span>Â <span class="t" onclick="H(this)">03:56:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>I checked the source condition against our production set, it didn&apos;t exist</span></div><div id="t1499227001993871" t="2017-07-05 03:56:41 mattly but it could have"><a href="#t1499227001993871" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span>Â <span class="t" onclick="H(this)">03:56:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>but it could have</span></div><div id="t1500066431143687" t="2017-07-14 21:07:11 peeja I don&apos;t suppose there&apos;s a core.async &quot;mode&quot; I can run  quick-check  in in ClojureScript, is there?"><a href="#t1500066431143687" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:07:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I don&apos;t suppose there&apos;s a core.async &quot;mode&quot; I can run </span><code>quick-check</code><span> in in ClojureScript, is there?</span></div><div id="t1500066467158247" t="2017-07-14 21:07:47 peeja Having the entire page lock up while test.check runs itself 100 times is crimping my style a bit"><a href="#t1500066467158247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:07:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Having the entire page lock up while test.check runs itself 100 times is crimping my style a bit</span></div><div id="t1500066495168758" t="2017-07-14 21:08:15 peeja I&apos;d love to get it to report its progress as it goes and let the page interrupt it"><a href="#t1500066495168758" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:08:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I&apos;d love to get it to report its progress as it goes and let the page interrupt it</span></div><div id="t1500066509174205" t="2017-07-14 21:08:29 gfredericks Async tests are a high priority; I have a hacky branch you could try if you like"><a href="#t1500066509174205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:08:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Async tests are a high priority; I have a hacky branch you could try if you like</span></div><div id="t1500066531182459" t="2017-07-14 21:08:51 peeja Ooh, I&apos;d love to take a look, at least"><a href="#t1500066531182459" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:08:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Ooh, I&apos;d love to take a look, at least</span></div><div id="t1500066572197802" t="2017-07-14 21:09:32 gfredericks It&apos;s called async-tests-POC on the main github repo"><a href="#t1500066572197802" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:09:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s called async-tests-POC on the main github repo</span></div><div id="t1500066602209184" t="2017-07-14 21:10:02 gfredericks Would be interested to know if it solves your problems"><a href="#t1500066602209184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:10:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Would be interested to know if it solves your problems</span></div><div id="t1500066630219657" t="2017-07-14 21:10:30 peeja I have a niggling feeling that there&apos;s a transducer in here somewhere"><a href="#t1500066630219657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:10:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I have a niggling feeling that there&apos;s a transducer in here somewhere</span></div><div id="t1500066655229174" t="2017-07-14 21:10:55 peeja That might abstract the testing itself from the synchrony choice"><a href="#t1500066655229174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:10:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>That might abstract the testing itself from the synchrony choice</span></div><div id="t1500066755267082" t="2017-07-14 21:12:35 gfredericks You should talk to @nberger about that, he&apos;s been working on refactoring the core algorithm"><a href="#t1500066755267082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:12:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You should talk to @nberger about that, he&apos;s been working on refactoring the core algorithm</span></div><div id="t1500066794281496" t="2017-07-14 21:13:14 gfredericks The shrink algorithm might resist transducing"><a href="#t1500066794281496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:13:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The shrink algorithm might resist transducing</span></div><div id="t1500066806286439" t="2017-07-14 21:13:26 peeja BTW, what&apos;s  future  in CLJS?"><a href="#t1500066806286439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:13:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>BTW, what&apos;s </span><code>future</code><span> in CLJS?</span></div><div id="t1500066835297064" t="2017-07-14 21:13:55 peeja That&apos;s not built in, is it?"><a href="#t1500066835297064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:13:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>That&apos;s not built in, is it?</span></div><div id="t1500066880313850" t="2017-07-14 21:14:40 gfredericks It is. I think it just does settimeout"><a href="#t1500066880313850" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:14:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It is. I think it just does settimeout</span></div><div id="t1500066894319239" t="2017-07-14 21:14:54 gfredericks ....I hope"><a href="#t1500066894319239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:14:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>....I hope</span></div><div id="t1500067048377546" t="2017-07-14 21:17:28 peeja I don&apos;t see it anywhereâ€¦"><a href="#t1500067048377546" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:17:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I don&apos;t see it anywhereâ€¦</span></div><div id="t1500067337485006" t="2017-07-14 21:22:17 gfredericks Are macros in a separate file?"><a href="#t1500067337485006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:22:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Are macros in a separate file?</span></div><div id="t1500068334843009" t="2017-07-14 21:38:54 peeja They are, but I don&apos;t see it there, and it&apos;s not documented"><a href="#t1500068334843009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:38:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>They are, but I don&apos;t see it there, and it&apos;s not documented</span></div><div id="t1500068389861993" t="2017-07-14 21:39:49 peeja Ah, looks like it&apos;s not out yet?"><a href="#t1500068389861993" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:39:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Ah, looks like it&apos;s not out yet?</span></div><div id="t1500068406867441" t="2017-07-14 21:40:06 peeja https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L6865-L6872"><a href="#t1500068406867441" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:40:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><a href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L6865-L6872" target="_blank">https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L6865-L6872</a></div><div id="t1500068436877407" t="2017-07-14 21:40:36 peeja No, that&apos;s clojureâ€¦"><a href="#t1500068436877407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:40:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>No, that&apos;s clojureâ€¦</span></div><div id="t1500068446880690" t="2017-07-14 21:40:46 peeja Not sure how I got crossed over there"><a href="#t1500068446880690" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:40:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Not sure how I got crossed over there</span></div><div id="t1500068460885572" t="2017-07-14 21:41:00 gfredericks Did you try running it?"><a href="#t1500068460885572" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:41:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Did you try running it?</span></div><div id="t1500068491896309" t="2017-07-14 21:41:31 peeja https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/core.cljc"><a href="#t1500068491896309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:41:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><a href="https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/core.cljc" target="_blank">https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/core.cljc</a></div><div id="t1500068503900288" t="2017-07-14 21:41:43 peeja Not yet"><a href="#t1500068503900288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:41:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Not yet</span></div><div id="t1500068520905923" t="2017-07-14 21:42:00 gfredericks Because I&apos;m not sure I did, in cljs  ğŸ˜¶  "><a href="#t1500068520905923" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:42:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Because I&apos;m not sure I did, in cljs </span><b>ğŸ˜¶</b><span> </span></div><div id="t1500068551915994" t="2017-07-14 21:42:31 peeja Heh"><a href="#t1500068551915994" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:42:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Heh</span></div><div id="t1500068641945724" t="2017-07-14 21:44:01 gfredericks So I take back everything i said about future"><a href="#t1500068641945724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:44:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So I take back everything i said about future</span></div><div id="t1500068732977123" t="2017-07-14 21:45:32 peeja I mean, it&apos;d be pretty sweet"><a href="#t1500068732977123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:45:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>I mean, it&apos;d be pretty sweet</span></div><div id="t1500069078091265" t="2017-07-14 21:51:18 gfredericks Easy to write"><a href="#t1500069078091265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">21:51:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Easy to write</span></div><div id="t1500073265182075" t="2017-07-14 23:01:05 gfredericks Sorry about the code being even less in shape than I thought"><a href="#t1500073265182075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-14</span>Â <span class="t" onclick="H(this)">23:01:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Sorry about the code being even less in shape than I thought</span></div><div id="t1501018193732355" t="2017-07-25 21:29:53 moxaj question: is there any way to control how a recursive generator shrinks? for example, the following can return  [[[[false]]]]  as the minimal failing example:
 (tc/quick-check 100
  (tc.prop/for-all [value (tc.gen/recursive-gen tc.gen/vector tc.gen/boolean)]
    (every? true? (flatten value))))
"><a href="#t1501018193732355" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:29:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â moxajÂ </span><span>question: is there any way to control how a recursive generator shrinks? for example, the following can return </span><code>[[[[false]]]]</code><span> as the minimal failing example:
</span><pre>(tc/quick-check 100
  (tc.prop/for-all [value (tc.gen/recursive-gen tc.gen/vector tc.gen/boolean)]
    (every? true? (flatten value))))
</pre></div><div id="t1501018279773954" t="2017-07-25 21:31:19 moxaj however, if a recursive generator could shrink towards the children of the actual compound generator, it could produce  [false]  as the minimal failing value"><a href="#t1501018279773954" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:31:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â moxajÂ </span><span>however, if a recursive generator could shrink towards the children of the actual compound generator, it could produce </span><code>[false]</code><span> as the minimal failing value</span></div><div id="t1501018284776298" t="2017-07-25 21:31:24 gfredericks there&apos;s a ticket for that"><a href="#t1501018284776298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:31:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a ticket for that</span></div><div id="t1501018294780879" t="2017-07-25 21:31:34 gfredericks I&apos;m not sure if it&apos;s an easy fix or not"><a href="#t1501018294780879" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:31:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m not sure if it&apos;s an easy fix or not</span></div><div id="t1501018330797492" t="2017-07-25 21:32:10 gfredericks https://dev.clojure.org/jira/browse/TCHECK-110?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel"><a href="#t1501018330797492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:32:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://dev.clojure.org/jira/browse/TCHECK-110?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-110?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel</a></div><div id="t1501018341802523" t="2017-07-25 21:32:21 gfredericks according to the comments, my past self wasn&apos;t sure either"><a href="#t1501018341802523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:32:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>according to the comments, my past self wasn&apos;t sure either</span></div><div id="t1501018363812587" t="2017-07-25 21:32:43 gfredericks my guess is that identifying subtrees in a generic way might be difficult or impossible"><a href="#t1501018363812587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:32:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>my guess is that identifying subtrees in a generic way might be difficult or impossible</span></div><div id="t1501018381820682" t="2017-07-25 21:33:01 gfredericks but I&apos;d be happy to be wrong about that"><a href="#t1501018381820682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:33:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but I&apos;d be happy to be wrong about that</span></div><div id="t1501018686959448" t="2017-07-25 21:38:06 moxaj I see"><a href="#t1501018686959448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">21:38:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â moxajÂ </span><span>I see</span></div><div id="t1501020112574883" t="2017-07-25 22:01:52 peeja When is  [:shrink :smallest]  not a vector of one element?"><a href="#t1501020112574883" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">22:01:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>When is </span><code>[:shrink :smallest]</code><span> not a vector of one element?</span></div><div id="t1501020119577711" t="2017-07-25 22:01:59 peeja Or: why is it a vector?"><a href="#t1501020119577711" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">22:01:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Or: why is it a vector?</span></div><div id="t1501020469716397" t="2017-07-25 22:07:49 gfredericks @peeja when the  prop/for-all  has multiple clauses, the vector has more elements"><a href="#t1501020469716397" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">22:07:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@peeja when the </span><code>prop/for-all</code><span> has multiple clauses, the vector has more elements</span></div><div id="t1501020484722065" t="2017-07-25 22:08:04 peeja Ah, that makes sense. Thanks!"><a href="#t1501020484722065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-25</span>Â <span class="t" onclick="H(this)">22:08:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â peejaÂ </span><span>Ah, that makes sense. Thanks!</span></div><div id="t1501079331372556" t="2017-07-26 14:28:51 nberger @peeja: I&apos;d love to help finding that transducer. I&apos;ve been working on a refactoring that might be of help. The main idea is to make it easier to see the quick-check loop as a state machine. I think we could be closer to extract a transducer from there. The changes are in the  test.check.refactor  branch in my fork, let me know if you have any questions or comments"><a href="#t1501079331372556" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span>Â <span class="t" onclick="H(this)">14:28:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@peeja: I&apos;d love to help finding that transducer. I&apos;ve been working on a refactoring that might be of help. The main idea is to make it easier to see the quick-check loop as a state machine. I think we could be closer to extract a transducer from there. The changes are in the </span><code>test.check.refactor</code><span> branch in my fork, let me know if you have any questions or comments</span></div><div id="t1501080247997658" t="2017-07-26 14:44:07 nberger -- that&apos;s related to your message from a few days ago  ğŸ™‚"><a href="#t1501080247997658" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-26</span>Â <span class="t" onclick="H(this)">14:44:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>-- that&apos;s related to your message from a few days ago </span><b>ğŸ™‚</b></div><div id="t1501706977497093" t="2017-08-02 20:49:37 cddr How might you go about writing a generator of sequences of numbers which add up to  n ?"><a href="#t1501706977497093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:49:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cddrÂ </span><span>How might you go about writing a generator of sequences of numbers which add up to </span><code>n</code><span>?</span></div><div id="t1501707085556987" t="2017-08-02 20:51:25 gfredericks @cddr depends what kind of distribution you want"><a href="#t1501707085556987" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:51:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@cddr depends what kind of distribution you want</span></div><div id="t1501707119575748" t="2017-08-02 20:51:59 gfredericks the easy dumb way to do it is to generate a sequence of numbers and then append  (- n sum)  to them"><a href="#t1501707119575748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:51:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the easy dumb way to do it is to generate a sequence of numbers and then append </span><code>(- n sum)</code><span> to them</span></div><div id="t1501707158597387" t="2017-08-02 20:52:38 gfredericks also depends on what kind of numbers you mean"><a href="#t1501707158597387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:52:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>also depends on what kind of numbers you mean</span></div><div id="t1501707249648143" t="2017-08-02 20:54:09 cddr This is related to my question over in #clojure-spec about a having relations between a top-level amount, and children that should add up to that amount

 https://clojurians.slack.com/archives/C1B1BB2Q3/p1501686285791508"><a href="#t1501707249648143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:54:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cddrÂ </span><span>This is related to my question over in #clojure-spec about a having relations between a top-level amount, and children that should add up to that amount

</span><a href="https://clojurians.slack.com/archives/C1B1BB2Q3/p1501686285791508" target="_blank">https://clojurians.slack.com/archives/C1B1BB2Q3/p1501686285791508</a></div><div id="t1501707294672886" t="2017-08-02 20:54:54 gfredericks would it be weird to not generate the top-level amount?"><a href="#t1501707294672886" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:54:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>would it be weird to not generate the top-level amount?</span></div><div id="t1501707309681126" t="2017-08-02 20:55:09 gfredericks generate just the children, then set the top-level to the sum?"><a href="#t1501707309681126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:55:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>generate just the children, then set the top-level to the sum?</span></div><div id="t1501707518798178" t="2017-08-02 20:58:38 cddr Yeah that was my first thought too. But then I thought I needed to solve this type of problem anyway but looking back at my code I can&apos;t remember why now  ğŸ™‚"><a href="#t1501707518798178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:58:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cddrÂ </span><span>Yeah that was my first thought too. But then I thought I needed to solve this type of problem anyway but looking back at my code I can&apos;t remember why now </span><b>ğŸ™‚</b></div><div id="t1501707575830176" t="2017-08-02 20:59:35 cddr In the actual example there are a few more relationships between the top-level and the children"><a href="#t1501707575830176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">20:59:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cddrÂ </span><span>In the actual example there are a few more relationships between the top-level and the children</span></div><div id="t1501708094112303" t="2017-08-02 21:08:14 gfredericks a very useful tactic as generating something related to what you want, and using  gen/fmap  to transform it"><a href="#t1501708094112303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">21:08:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a very useful tactic as generating something related to what you want, and using </span><code>gen/fmap</code><span> to transform it</span></div><div id="t1501708122126545" t="2017-08-02 21:08:42 gfredericks i.e., generate the information, then use  fmap  to get it into the right format"><a href="#t1501708122126545" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-02</span>Â <span class="t" onclick="H(this)">21:08:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., generate the information, then use </span><code>fmap</code><span> to get it into the right format</span></div><div id="t1502192682639477" t="2017-08-08 11:44:42 gfredericks I&apos;ve occasionally had the idea of mitigating the &quot;some things don&apos;t shrink very well&quot; problem by allowing users to provide a fallback shrink strategy, where you just supply a function from  x  to a collection of smaller  x s.

Interestingly it looks like hedgehog has exactly that feature:  https://hackage.haskell.org/package/hedgehog-0.5/docs/Hedgehog-Gen.html  (see the  shrink  function)"><a href="#t1502192682639477" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-08</span>Â <span class="t" onclick="H(this)">11:44:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve occasionally had the idea of mitigating the &quot;some things don&apos;t shrink very well&quot; problem by allowing users to provide a fallback shrink strategy, where you just supply a function from </span><code>x</code><span> to a collection of smaller </span><code>x</code><span>s.

Interestingly it looks like hedgehog has exactly that feature: </span><a href="https://hackage.haskell.org/package/hedgehog-0.5/docs/Hedgehog-Gen.html" target="_blank">https://hackage.haskell.org/package/hedgehog-0.5/docs/Hedgehog-Gen.html</a><span> (see the </span><code>shrink</code><span> function)</span></div><div id="t1502209686278503" t="2017-08-08 16:28:06 lucasbradstreet Cool"><a href="#t1502209686278503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-08</span>Â <span class="t" onclick="H(this)">16:28:06</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Cool</span></div><div id="t1502724083050189" t="2017-08-14 15:21:23 franquito Hi Frederick! Loved the lib, there&apos;s a couple of functions that I&apos;ve invented too for my project lol, but I think you took a much more clean approach."><a href="#t1502724083050189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:21:23</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Hi Frederick! Loved the lib, there&apos;s a couple of functions that I&apos;ve invented too for my project lol, but I think you took a much more clean approach.</span></div><div id="t1502724160098219" t="2017-08-14 15:22:40 franquito com.gfredericks.test.chuck.generators/string-from-regex  can only be used in the JVM scope, right?"><a href="#t1502724160098219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:22:40</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><code>com.gfredericks.test.chuck.generators/string-from-regex</code><span> can only be used in the JVM scope, right?</span></div><div id="t1502724223137957" t="2017-08-14 15:23:43 gfredericks @franquito yes -- you&apos;ll see a pull request for a clojurescript port; I can&apos;t remember if it&apos;s usable or not"><a href="#t1502724223137957" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:23:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@franquito yes -- you&apos;ll see a pull request for a clojurescript port; I can&apos;t remember if it&apos;s usable or not</span></div><div id="t1502724231143166" t="2017-08-14 15:23:51 gfredericks if you end up trying it out, do leave feedback on that PR about how it goes"><a href="#t1502724231143166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:23:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you end up trying it out, do leave feedback on that PR about how it goes</span></div><div id="t1502724246152818" t="2017-08-14 15:24:06 gfredericks I&apos;ve been meaning to review that PR for months now  ğŸ˜­"><a href="#t1502724246152818" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:24:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve been meaning to review that PR for months now </span><b>ğŸ˜­</b></div><div id="t1502724315196748" t="2017-08-14 15:25:15 franquito Oh, nice!"><a href="#t1502724315196748" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:25:15</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Oh, nice!</span></div><div id="t1502724379238225" t="2017-08-14 15:26:19 franquito Well, then I&apos;ll give it a try and see what happens, I just need a simple regexp"><a href="#t1502724379238225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:26:19</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Well, then I&apos;ll give it a try and see what happens, I just need a simple regexp</span></div><div id="t1502724429269925" t="2017-08-14 15:27:09 franquito Haha I see! Yeah, It must be a huge pain to maintain some open source project"><a href="#t1502724429269925" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:27:09</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Haha I see! Yeah, It must be a huge pain to maintain some open source project</span></div><div id="t1502724438274857" t="2017-08-14 15:27:18 franquito Apart from It&apos;s size"><a href="#t1502724438274857" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:27:18</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Apart from It&apos;s size</span></div><div id="t1502724452284255" t="2017-08-14 15:27:32 franquito Its*"><a href="#t1502724452284255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">15:27:32</span>Â Â Â Â Â Â Â Â Â Â Â franquitoÂ </span><span>Its*</span></div><div id="t1502736449326233" t="2017-08-14 18:47:29 lucasbradstreet @gfredericks did the fallback shrinking strategy end up going anywhere? Iâ€™ve actually used gen/return to prevent shrinking, and then shrunk manually myself in the past, so this is pretty interesting  ğŸ™‚"><a href="#t1502736449326233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:47:29</span>Â Â Â Â Â lucasbradstreetÂ </span><span>@gfredericks did the fallback shrinking strategy end up going anywhere? Iâ€™ve actually used gen/return to prevent shrinking, and then shrunk manually myself in the past, so this is pretty interesting </span><b>ğŸ™‚</b></div><div id="t1502736518366385" t="2017-08-14 18:48:38 gfredericks @lucasbradstreet you prevented shrinking because it would spend a long time without getting very far?"><a href="#t1502736518366385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:48:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@lucasbradstreet you prevented shrinking because it would spend a long time without getting very far?</span></div><div id="t1502736625428642" t="2017-08-14 18:50:25 lucasbradstreet Yeah, because testing my invariants was on the order of seconds, so I tried some more aggressive heuristics to reduce the search space."><a href="#t1502736625428642" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:50:25</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Yeah, because testing my invariants was on the order of seconds, so I tried some more aggressive heuristics to reduce the search space.</span></div><div id="t1502736641438365" t="2017-08-14 18:50:41 lucasbradstreet Maybe not a very typical example that you want to allow for though  ğŸ˜›"><a href="#t1502736641438365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:50:41</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Maybe not a very typical example that you want to allow for though </span><b>ğŸ˜›</b></div><div id="t1502736819540443" t="2017-08-14 18:53:39 gfredericks I&apos;ve been in that situation before, I don&apos;t want to disregard it"><a href="#t1502736819540443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:53:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve been in that situation before, I don&apos;t want to disregard it</span></div><div id="t1502736863566319" t="2017-08-14 18:54:23 gfredericks my initial thought is that a fallback shrink would never speed up shrinking since it would only try it after it&apos;s tried everything else"><a href="#t1502736863566319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:54:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>my initial thought is that a fallback shrink would never speed up shrinking since it would only try it after it&apos;s tried everything else</span></div><div id="t1502736880576340" t="2017-08-14 18:54:40 gfredericks but I suppose you could disable the default shrinking first, which you&apos;re already doing"><a href="#t1502736880576340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:54:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but I suppose you could disable the default shrinking first, which you&apos;re already doing</span></div><div id="t1502736886579949" t="2017-08-14 18:54:46 lucasbradstreet Ahhh. I missed that aspect of the word â€œfallbackâ€"><a href="#t1502736886579949" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:54:46</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Ahhh. I missed that aspect of the word â€œfallbackâ€</span></div><div id="t1502736909593505" t="2017-08-14 18:55:09 gfredericks @lucasbradstreet also FYI with a mild amount of assuming-implementation-details, you can do this already"><a href="#t1502736909593505" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:55:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@lucasbradstreet also FYI with a mild amount of assuming-implementation-details, you can do this already</span></div><div id="t1502736977632986" t="2017-08-14 18:56:17 gfredericks so if you want to try it out that would be informative for me"><a href="#t1502736977632986" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:56:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so if you want to try it out that would be informative for me</span></div><div id="t1502737114714635" t="2017-08-14 18:58:34 lucasbradstreet Can you point me to where I should look?"><a href="#t1502737114714635" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:58:34</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Can you point me to where I should look?</span></div><div id="t1502737130723418" t="2017-08-14 18:58:50 gfredericks @lucasbradstreet are you familiar with the idea of a shrink tree?"><a href="#t1502737130723418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:58:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@lucasbradstreet are you familiar with the idea of a shrink tree?</span></div><div id="t1502737139728966" t="2017-08-14 18:58:59 lucasbradstreet At a high level yes."><a href="#t1502737139728966" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">18:58:59</span>Â Â Â Â Â lucasbradstreetÂ </span><span>At a high level yes.</span></div><div id="t1502737220778044" t="2017-08-14 19:00:20 gfredericks the simpler thing is writing  replace-shrink , that takes  [g f]  where  f  is a function from  x  to  [x]"><a href="#t1502737220778044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:00:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the simpler thing is writing </span><code>replace-shrink</code><span>, that takes </span><code>[g f]</code><span> where </span><code>f</code><span> is a function from </span><code>x</code><span> to </span><code>[x]</code></div><div id="t1502737227782724" t="2017-08-14 19:00:27 lucasbradstreet Canâ€™t say Iâ€™ve looked into exactly how rose trees work though."><a href="#t1502737227782724" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:00:27</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Canâ€™t say Iâ€™ve looked into exactly how rose trees work though.</span></div><div id="t1502737255799379" t="2017-08-14 19:00:55 gfredericks it&apos;s just a tree of values; the root is the generated value, and the child of any node are the shrinks from that point"><a href="#t1502737255799379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:00:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s just a tree of values; the root is the generated value, and the child of any node are the shrinks from that point</span></div><div id="t1502737266806039" t="2017-08-14 19:01:06 gfredericks and it&apos;s lazy because it&apos;s huge"><a href="#t1502737266806039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:01:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and it&apos;s lazy because it&apos;s huge</span></div><div id="t1502737268806937" t="2017-08-14 19:01:08 lucasbradstreet OK"><a href="#t1502737268806937" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:01:08</span>Â Â Â Â Â lucasbradstreetÂ </span><span>OK</span></div><div id="t1502737299826330" t="2017-08-14 19:01:39 gfredericks so writing  replace-shrink  just involves figuring out the exact functions to call, and the algorithm that transforms  x  and  f  into a lazy tree"><a href="#t1502737299826330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:01:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so writing </span><code>replace-shrink</code><span> just involves figuring out the exact functions to call, and the algorithm that transforms </span><code>x</code><span> and </span><code>f</code><span> into a lazy tree</span></div><div id="t1502737357860319" t="2017-08-14 19:02:37 lucasbradstreet OK, with you up to here."><a href="#t1502737357860319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:02:37</span>Â Â Â Â Â lucasbradstreetÂ </span><span>OK, with you up to here.</span></div><div id="t1502737375870860" t="2017-08-14 19:02:55 gfredericks I&apos;ll spit something out real quick that will probably work"><a href="#t1502737375870860" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:02:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll spit something out real quick that will probably work</span></div><div id="t1502737473927036" t="2017-08-14 19:04:33 lucasbradstreet Cool. I can set aside some time later today to give it some testing "><a href="#t1502737473927036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:04:33</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Cool. I can set aside some time later today to give it some testing </span></div><div id="t1502737497940742" t="2017-08-14 19:04:57 gfredericks â‡‘ just off the top of my head, I didn&apos;t run it or compile it or parse it or anything"><a href="#t1502737497940742" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:04:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>â‡‘ just off the top of my head, I didn&apos;t run it or compile it or parse it or anything</span></div><div id="t1502737509947035" t="2017-08-14 19:05:09 lucasbradstreet Sure thing :)"><a href="#t1502737509947035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:05:09</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Sure thing :)</span></div><div id="t1502737521953807" t="2017-08-14 19:05:21 gfredericks but that should at least point you to the right functions, which would be the hard part otherwise"><a href="#t1502737521953807" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:05:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but that should at least point you to the right functions, which would be the hard part otherwise</span></div><div id="t1502737546967914" t="2017-08-14 19:05:46 gfredericks feel free to ping me if you try it and can&apos;t get it to work"><a href="#t1502737546967914" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:05:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>feel free to ping me if you try it and can&apos;t get it to work</span></div><div id="t1502737566978867" t="2017-08-14 19:06:06 lucasbradstreet Will do. Thanks!"><a href="#t1502737566978867" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-14</span>Â <span class="t" onclick="H(this)">19:06:06</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Will do. Thanks!</span></div><div id="t1503183572000032" t="2017-08-19 22:59:32 nwjsmith Is there a way to prevent test.check from printing to standard out on a clojure.test test run"><a href="#t1503183572000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span>Â <span class="t" onclick="H(this)">22:59:32</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Is there a way to prevent test.check from printing to standard out on a clojure.test test run</span></div><div id="t1503183573000012" t="2017-08-19 22:59:33 nwjsmith ?"><a href="#t1503183573000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span>Â <span class="t" onclick="H(this)">22:59:33</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>?</span></div><div id="t1503183745000058" t="2017-08-19 23:02:25 gfredericks There&apos;s a ticket for that, I can&apos;t remember what state its in. But until that&apos;s through, only monkey-patching"><a href="#t1503183745000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span>Â <span class="t" onclick="H(this)">23:02:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There&apos;s a ticket for that, I can&apos;t remember what state its in. But until that&apos;s through, only monkey-patching</span></div><div id="t1503183781000039" t="2017-08-19 23:03:01 nwjsmith ah, ok. Thanks Gary."><a href="#t1503183781000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span>Â <span class="t" onclick="H(this)">23:03:01</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>ah, ok. Thanks Gary.</span></div><div id="t1503183983000091" t="2017-08-19 23:06:23 gfredericks You&apos;ll see an obvious prn call at the top of the clojure-test ns"><a href="#t1503183983000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span>Â <span class="t" onclick="H(this)">23:06:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;ll see an obvious prn call at the top of the clojure-test ns</span></div><div id="t1504128154000417" t="2017-08-30 21:22:34 gfredericks I just realized you could parallelize the shrinking process using something like a branch predictor"><a href="#t1504128154000417" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span>Â <span class="t" onclick="H(this)">21:22:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just realized you could parallelize the shrinking process using something like a branch predictor</span></div><div id="t1504128325000363" t="2017-08-30 21:25:25 gfredericks but it could be more complex than a traditional branch predictor since you can execute multiple possibilities in parallel"><a href="#t1504128325000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span>Â <span class="t" onclick="H(this)">21:25:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but it could be more complex than a traditional branch predictor since you can execute multiple possibilities in parallel</span></div><div id="t1504128679000004" t="2017-08-30 21:31:19 gfredericks the search strategies used in chess programs seem a bit related too, though maybe not helpfully"><a href="#t1504128679000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span>Â <span class="t" onclick="H(this)">21:31:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the search strategies used in chess programs seem a bit related too, though maybe not helpfully</span></div><div id="t1504185170000384" t="2017-08-31 13:12:50 nberger That sounds pretty cool, parallel shrinking would be a neat feature"><a href="#t1504185170000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-31</span>Â <span class="t" onclick="H(this)">13:12:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>That sounds pretty cool, parallel shrinking would be a neat feature</span></div><div id="t1505300044000066" t="2017-09-13 10:54:04 thedavidmeister hey, is there something generated by  clojure.test.check.generators/any  that can break the output of the test runner?"><a href="#t1505300044000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:54:04</span>Â Â Â Â Â thedavidmeisterÂ </span><span>hey, is there something generated by </span><code>clojure.test.check.generators/any</code><span> that can break the output of the test runner?</span></div><div id="t1505300051000279" t="2017-09-13 10:54:11 thedavidmeister i got this fail"><a href="#t1505300051000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:54:11</span>Â Â Â Â Â thedavidmeisterÂ </span><span>i got this fail</span></div><div id="t1505300055000281" t="2017-09-13 10:54:15 thedavidmeister FAIL in (??round-trip) (:)
expected: (= e (parse (string d)))
  actual: (not (= [[&quot;_Iq1WSpRhKoq+0M?1?!CV-I+GD-ul?s**R?!*!6arO*hmmz!&quot; &quot;6KnÃ°Ã¥Ã³mÃ”(OD{hl$g\tÃ‰\&quot;Â²Ã…Â¹ÃË†ÃŸâ€™&quot; &quot;6
"><a href="#t1505300055000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:54:15</span>Â Â Â Â Â thedavidmeisterÂ </span><pre>FAIL in (??round-trip) (:)
expected: (= e (parse (string d)))
  actual: (not (= [[&quot;_Iq1WSpRhKoq+0M?1?!CV-I+GD-ul?s**R?!*!6arO*hmmz!&quot; &quot;6KnÃ°Ã¥Ã³mÃ”(OD{hl$g\tÃ‰\&quot;Â²Ã…Â¹ÃË†ÃŸâ€™&quot; &quot;6
</pre></div><div id="t1505300083000200" t="2017-09-13 10:54:43 thedavidmeister it&apos;s like the string somehow didn&apos;t finish or something"><a href="#t1505300083000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:54:43</span>Â Â Â Â Â thedavidmeisterÂ </span><span>it&apos;s like the string somehow didn&apos;t finish or something</span></div><div id="t1505300157000067" t="2017-09-13 10:55:57 gfredericks the string not finishing smells more like your output was truncated somehow"><a href="#t1505300157000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:55:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the string not finishing smells more like your output was truncated somehow</span></div><div id="t1505300193000128" t="2017-09-13 10:56:33 gfredericks the worst thing about  gen/any  that could cause problems is that it can generate  NaN s deep in the nested structure"><a href="#t1505300193000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:56:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the worst thing about </span><code>gen/any</code><span> that could cause problems is that it can generate </span><code>NaN</code><span>s deep in the nested structure</span></div><div id="t1505300216000033" t="2017-09-13 10:56:56 gfredericks which causes the whole thing to not equal itself, but maybe only under certain conditions"><a href="#t1505300216000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:56:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which causes the whole thing to not equal itself, but maybe only under certain conditions</span></div><div id="t1505300232000045" t="2017-09-13 10:57:12 thedavidmeister mmm"><a href="#t1505300232000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:57:12</span>Â Â Â Â Â thedavidmeisterÂ </span><span>mmm</span></div><div id="t1505300282000383" t="2017-09-13 10:58:02 thedavidmeister FAIL in (??round-trip) (:)expected: (= e (parse (string d)))  actual: (not (= [[&quot;_Iq1WSpRhKoq+0M?1?!CV-I+GD-ul?s**R?!*!6arO*hmmz!&quot; &quot;6KnÃ°Ã¥Ã³mÃ”(OD{hl$g\tÃ‰\&quot;Â²Ã…Â¹ÃË†ÃŸâ€™&quot; &quot;6Testing wheel.stylesheet.hoplon"><a href="#t1505300282000383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:58:02</span>Â Â Â Â Â thedavidmeisterÂ </span><code>FAIL in (??round-trip) (:)expected: (= e (parse (string d)))  actual: (not (= [[&quot;_Iq1WSpRhKoq+0M?1?!CV-I+GD-ul?s**R?!*!6arO*hmmz!&quot; &quot;6KnÃ°Ã¥Ã³mÃ”(OD{hl$g\tÃ‰\&quot;Â²Ã…Â¹ÃË†ÃŸâ€™&quot; &quot;6Testing wheel.stylesheet.hoplon</code></div><div id="t1505300287000208" t="2017-09-13 10:58:07 thedavidmeister it just stops..."><a href="#t1505300287000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:58:07</span>Â Â Â Â Â thedavidmeisterÂ </span><span>it just stops...</span></div><div id="t1505300295000006" t="2017-09-13 10:58:15 thedavidmeister and goes straight into the next test"><a href="#t1505300295000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:58:15</span>Â Â Â Â Â thedavidmeisterÂ </span><span>and goes straight into the next test</span></div><div id="t1505300336000211" t="2017-09-13 10:58:56 gfredericks you could bypass the test runner &amp; printing by calling  clojure.test.check/quick-check  directly with your property and inspecting the return value"><a href="#t1505300336000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:58:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could bypass the test runner &amp; printing by calling </span><code>clojure.test.check/quick-check</code><span> directly with your property and inspecting the return value</span></div><div id="t1505300383000046" t="2017-09-13 10:59:43 thedavidmeister yeah, also i think what you said about  NaN  is going to derail me anyway"><a href="#t1505300383000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">10:59:43</span>Â Â Â Â Â thedavidmeisterÂ </span><span>yeah, also i think what you said about </span><code>NaN</code><span> is going to derail me anyway</span></div><div id="t1505300415000133" t="2017-09-13 11:00:15 thedavidmeister i might need a different approach"><a href="#t1505300415000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-09-13</span>Â <span class="t" onclick="H(this)">11:00:15</span>Â Â Â Â Â thedavidmeisterÂ </span><span>i might need a different approach</span></div><div id="t1507254899000099" t="2017-10-06 01:54:59 nwjsmith How would one generate a byte array of a specific length?"><a href="#t1507254899000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span>Â <span class="t" onclick="H(this)">01:54:59</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>How would one generate a byte array of a specific length?</span></div><div id="t1507255145000109" t="2017-10-06 01:59:05 nwjsmith Iâ€™m a dingus, just found  byte ."><a href="#t1507255145000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-06</span>Â <span class="t" onclick="H(this)">01:59:05</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Iâ€™m a dingus, just found </span><code>byte</code><span>.</span></div><div id="t1507998527000016" t="2017-10-14 16:28:47 nwjsmith I have a function that takes as input a large set of uniformly distributed random numbers and a directed, acyclic graph. It returns a random topological ordering of the graph.

Iâ€™d like to hook this into  test.check  such that if I run  test.check/quick-check  twice with the same seed parameter then the same topological orderings will be generated."><a href="#t1507998527000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:28:47</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I have a function that takes as input a large set of uniformly distributed random numbers and a directed, acyclic graph. It returns a random topological ordering of the graph.

Iâ€™d like to hook this into </span><code>test.check</code><span> such that if I run </span><code>test.check/quick-check</code><span> twice with the same seed parameter then the same topological orderings will be generated.</span></div><div id="t1507998570000052" t="2017-10-14 16:29:30 nwjsmith As I understand it,  test.check â€™s generators and combinators are designed to keep me from having to see the underlying RNG"><a href="#t1507998570000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:29:30</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>As I understand it, </span><code>test.check</code><span>â€™s generators and combinators are designed to keep me from having to see the underlying RNG</span></div><div id="t1507998657000077" t="2017-10-14 16:30:57 nwjsmith and thatâ€™s worked really well until now, when I need a lot of uniformly distributed random numbers"><a href="#t1507998657000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:30:57</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>and thatâ€™s worked really well until now, when I need a lot of uniformly distributed random numbers</span></div><div id="t1507998742000006" t="2017-10-14 16:32:22 nwjsmith Is the  test.check.generators/-&gt;Generator  function considered part of the public API?"><a href="#t1507998742000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:32:22</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Is the </span><code>test.check.generators/-&gt;Generator</code><span> function considered part of the public API?</span></div><div id="t1507998810000077" t="2017-10-14 16:33:30 gfredericks @nwjsmith so if you had a generator for uniformly distributed random numbers, would that solve it?"><a href="#t1507998810000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:33:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith so if you had a generator for uniformly distributed random numbers, would that solve it?</span></div><div id="t1507998982000062" t="2017-10-14 16:36:22 nwjsmith @gfredericks yes, that would work beautifully"><a href="#t1507998982000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:36:22</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@gfredericks yes, that would work beautifully</span></div><div id="t1507999051000111" t="2017-10-14 16:37:31 nwjsmith Then I could do a  (gen/vector (gen/rand-int max) num-elements)  and  fmap  my  random-topological-ordering  over it"><a href="#t1507999051000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:37:31</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Then I could do a </span><code>(gen/vector (gen/rand-int max) num-elements)</code><span> and </span><code>fmap</code><span> my </span><code>random-topological-ordering</code><span> over it</span></div><div id="t1508000110000001" t="2017-10-14 16:55:10 nwjsmith (def gen-rand-double
  (gen/no-shrink
   (gen/-&gt;Generator
    (fn [rnd _size]
      (rose/pure (random/rand-double rnd))))))
 
?"><a href="#t1508000110000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:55:10</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><pre>(def gen-rand-double
  (gen/no-shrink
   (gen/-&gt;Generator
    (fn [rnd _size]
      (rose/pure (random/rand-double rnd))))))
</pre><span>
?</span></div><div id="t1508000285000085" t="2017-10-14 16:58:05 nwjsmith Ah, thereâ€™s  random/rand-long .

 (def gen-rand-long
  (gen/no-shrink
   (gen/-&gt;Generator
    (fn [rnd _size]
      (rose/pure (random/rand-long rnd))))))

(gen/generate (gen/vector gen-rand-long) 10 100) ;; =&gt; [6200754525179398429 -3542882520031353397]
(gen/generate (gen/vector gen-rand-long) 10 100) ;; =&gt; [6200754525179398429 -3542882520031353397]
"><a href="#t1508000285000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:58:05</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Ah, thereâ€™s </span><code>random/rand-long</code><span>.

</span><pre>(def gen-rand-long
  (gen/no-shrink
   (gen/-&gt;Generator
    (fn [rnd _size]
      (rose/pure (random/rand-long rnd))))))

(gen/generate (gen/vector gen-rand-long) 10 100) ;; =&gt; [6200754525179398429 -3542882520031353397]
(gen/generate (gen/vector gen-rand-long) 10 100) ;; =&gt; [6200754525179398429 -3542882520031353397]
</pre></div><div id="t1508000315000005" t="2017-10-14 16:58:35 nwjsmith That seems to do the trick"><a href="#t1508000315000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">16:58:35</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>That seems to do the trick</span></div><div id="t1508000475000019" t="2017-10-14 17:01:15 nwjsmith Iâ€™m not really sure what the effects of  no-shrink  are here, or what  rose/pure  is doing. Iâ€™ll have to watch youâ€™re old talk again to brush up on the internals."><a href="#t1508000475000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:01:15</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Iâ€™m not really sure what the effects of </span><code>no-shrink</code><span> are here, or what </span><code>rose/pure</code><span> is doing. Iâ€™ll have to watch youâ€™re old talk again to brush up on the internals.</span></div><div id="t1508000537000048" t="2017-10-14 17:02:17 nwjsmith Your talk from this week was fantastic by the way, really good guide to building custom generators."><a href="#t1508000537000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:02:17</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Your talk from this week was fantastic by the way, really good guide to building custom generators.</span></div><div id="t1508000641000043" t="2017-10-14 17:04:01 gfredericks (also, why do they have to be uniformly distributed?)"><a href="#t1508000641000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:04:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(also, why do they have to be uniformly distributed?)</span></div><div id="t1508000718000047" t="2017-10-14 17:05:18 nwjsmith http://alexander-karzanov.net/Publications/91_LEO11_N.pdf"><a href="#t1508000718000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:05:18</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><a href="http://alexander-karzanov.net/Publications/91_LEO11_N.pdf" target="_blank">http://alexander-karzanov.net/Publications/91_LEO11_N.pdf</a></div><div id="t1508000767000087" t="2017-10-14 17:06:07 nwjsmith the algorithm is on page 2. Iâ€™ve got to generate a large number of random swaps of a topological ordering."><a href="#t1508000767000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:06:07</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>the algorithm is on page 2. Iâ€™ve got to generate a large number of random swaps of a topological ordering.</span></div><div id="t1508000779000090" t="2017-10-14 17:06:19 nwjsmith (the bottom of page 2)"><a href="#t1508000779000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:06:19</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>(the bottom of page 2)</span></div><div id="t1508000866000060" t="2017-10-14 17:07:46 nwjsmith At first I tried  gen/choose , but I ended up with really bad distributions on the generator."><a href="#t1508000866000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:07:46</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>At first I tried </span><code>gen/choose</code><span>, but I ended up with really bad distributions on the generator.</span></div><div id="t1508000942000107" t="2017-10-14 17:09:02 gfredericks Choose is uniform, unlike most other builtin generators"><a href="#t1508000942000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:09:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Choose is uniform, unlike most other builtin generators</span></div><div id="t1508000975000050" t="2017-10-14 17:09:35 nwjsmith Hrm. Maybe I just thought Iâ€™d end up with really bad distributions"><a href="#t1508000975000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:09:35</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Hrm. Maybe I just thought Iâ€™d end up with really bad distributions</span></div><div id="t1508000990000027" t="2017-10-14 17:09:50 nwjsmith Iâ€™ll try choose again."><a href="#t1508000990000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:09:50</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Iâ€™ll try choose again.</span></div><div id="t1508000993000065" t="2017-10-14 17:09:53 gfredericks no-shrink is a noop in your code I believe"><a href="#t1508000993000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:09:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no-shrink is a noop in your code I believe</span></div><div id="t1508001072000084" t="2017-10-14 17:11:12 gfredericks You need uniform ints or doubles?"><a href="#t1508001072000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:11:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You need uniform ints or doubles?</span></div><div id="t1508001083000023" t="2017-10-14 17:11:23 nwjsmith ints"><a href="#t1508001083000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:11:23</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>ints</span></div><div id="t1508001092000144" t="2017-10-14 17:11:32 gfredericks What range?"><a href="#t1508001092000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:11:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>What range?</span></div><div id="t1508001166000031" t="2017-10-14 17:12:46 nwjsmith between 0 and 2n-1, where n is the number of nodes in the graph."><a href="#t1508001166000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:12:46</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>between 0 and 2n-1, where n is the number of nodes in the graph.</span></div><div id="t1508001185000056" t="2017-10-14 17:13:05 gfredericks Oooh, yeah, choose is bad for large n"><a href="#t1508001185000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:13:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oooh, yeah, choose is bad for large n</span></div><div id="t1508001263000070" t="2017-10-14 17:14:23 gfredericks Foolproof is (gen/vector (gen/choose 0 1) n), then fmap the bits to a bigint"><a href="#t1508001263000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:14:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Foolproof is (gen/vector (gen/choose 0 1) n), then fmap the bits to a bigint</span></div><div id="t1508001341000015" t="2017-10-14 17:15:41 gfredericks But even if the algorithm demands uniform, I&apos;m curious if testing with a nonuniform generator would actually be bad"><a href="#t1508001341000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:15:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But even if the algorithm demands uniform, I&apos;m curious if testing with a nonuniform generator would actually be bad</span></div><div id="t1508001576000071" t="2017-10-14 17:19:36 gfredericks But either way, there&apos;s no builtin bigint generator yet, which makes it harder for you :("><a href="#t1508001576000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:19:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But either way, there&apos;s no builtin bigint generator yet, which makes it harder for you :(</span></div><div id="t1508001807000087" t="2017-10-14 17:23:27 nwjsmith Putting it together with the approach you suggested should work though. Iâ€™m going to experiment a bit with all of the approaches above. Will report back."><a href="#t1508001807000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:23:27</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Putting it together with the approach you suggested should work though. Iâ€™m going to experiment a bit with all of the approaches above. Will report back.</span></div><div id="t1508001836000029" t="2017-10-14 17:23:56 nwjsmith BTW do you have a strategy for testing generators? Specifically how they shrink, their distribution, performance etc."><a href="#t1508001836000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:23:56</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>BTW do you have a strategy for testing generators? Specifically how they shrink, their distribution, performance etc.</span></div><div id="t1508001972000013" t="2017-10-14 17:26:12 nwjsmith Experimenting at the REPL has been working for me, but now I have all of these useful graph-related generators and Iâ€™m hoping to open source them. Might have to come up with my own strategy."><a href="#t1508001972000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:26:12</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Experimenting at the REPL has been working for me, but now I have all of these useful graph-related generators and Iâ€™m hoping to open source them. Might have to come up with my own strategy.</span></div><div id="t1508002897000006" t="2017-10-14 17:41:37 gfredericks No, that&apos;s an interesting idea. You can see examples in the tests of testing distribution &amp; shrinking a bit, but it&apos;s all ad-hoc"><a href="#t1508002897000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:41:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>No, that&apos;s an interesting idea. You can see examples in the tests of testing distribution &amp; shrinking a bit, but it&apos;s all ad-hoc</span></div><div id="t1508002908000049" t="2017-10-14 17:41:48 gfredericks Shrinking is particularly weird to test"><a href="#t1508002908000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:41:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Shrinking is particularly weird to test</span></div><div id="t1508002921000086" t="2017-10-14 17:42:01 gfredericks Maybe..."><a href="#t1508002921000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-10-14</span>Â <span class="t" onclick="H(this)">17:42:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Maybe...</span></div><div id="t1509641396000462" t="2017-11-02 16:49:56 ghadi Is there any relationship between procedural generation techniques for computer graphics and test check generators?  I&apos;m thinking in relation to stuff like Perlin noise"><a href="#t1509641396000462" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span>Â <span class="t" onclick="H(this)">16:49:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Is there any relationship between procedural generation techniques for computer graphics and test check generators?  I&apos;m thinking in relation to stuff like Perlin noise</span></div><div id="t1509665182000156" t="2017-11-02 23:26:22 gfredericks I&apos;ve generally been skeptical of using test.check generators for anything very far from testing (though I might be too deep into it to think more creatively)

The primary reason is that the distributions are generally skewed with edge-case heuristics"><a href="#t1509665182000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span>Â <span class="t" onclick="H(this)">23:26:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve generally been skeptical of using test.check generators for anything very far from testing (though I might be too deep into it to think more creatively)

The primary reason is that the distributions are generally skewed with edge-case heuristics</span></div><div id="t1509677006000104" t="2017-11-03 02:43:26 ghadi Oh, I meant the opposite: using techniques from procedural generation to inform the way generators explore the search space "><a href="#t1509677006000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span>Â <span class="t" onclick="H(this)">02:43:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Oh, I meant the opposite: using techniques from procedural generation to inform the way generators explore the search space </span></div><div id="t1509677089000049" t="2017-11-03 02:44:49 ghadi I know next to nothing about procgen, except that it is a large topic filled with interesting heuristics"><a href="#t1509677089000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span>Â <span class="t" onclick="H(this)">02:44:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>I know next to nothing about procgen, except that it is a large topic filled with interesting heuristics</span></div><div id="t1509677126000031" t="2017-11-03 02:45:26 ghadi Like making trees look realistic.  My coworker was describing Perlin noise today, and a lightbulb went off"><a href="#t1509677126000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-03</span>Â <span class="t" onclick="H(this)">02:45:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Like making trees look realistic.  My coworker was describing Perlin noise today, and a lightbulb went off</span></div><div id="t1509978209000351" t="2017-11-06 14:23:29 gfredericks How do folks feel about test.check printing success summaries?

I&apos;m processing a patch that makes this configurable, but didn&apos;t know whether it should stay on by default, since I don&apos;t know how many people like it."><a href="#t1509978209000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">14:23:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>How do folks feel about test.check printing success summaries?

I&apos;m processing a patch that makes this configurable, but didn&apos;t know whether it should stay on by default, since I don&apos;t know how many people like it.</span></div><div id="t1509990965000164" t="2017-11-06 17:56:05 lucasbradstreet I think Iâ€™d like it."><a href="#t1509990965000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">17:56:05</span>Â Â Â Â Â lucasbradstreetÂ </span><span>I think Iâ€™d like it.</span></div><div id="t1509992615000211" t="2017-11-06 18:23:35 gfredericks To be clear, it already does this."><a href="#t1509992615000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">18:23:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>To be clear, it already does this.</span></div><div id="t1509993005000256" t="2017-11-06 18:30:05 gfredericks And currently it&apos;s not configurable

I&apos;m trying to decide between
A) make it configurable, defaulting to on
B) make it configurable, defaulting to off"><a href="#t1509993005000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">18:30:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And currently it&apos;s not configurable

I&apos;m trying to decide between
A) make it configurable, defaulting to on
B) make it configurable, defaulting to off</span></div><div id="t1509993240000371" t="2017-11-06 18:34:00 lucasbradstreet Oh, you mean printing the current summaries? Ah, I misread it. I think I prefer defaulting to on, especially since itâ€™s the current behaviour."><a href="#t1509993240000371" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">18:34:00</span>Â Â Â Â Â lucasbradstreetÂ </span><span>Oh, you mean printing the current summaries? Ah, I misread it. I think I prefer defaulting to on, especially since itâ€™s the current behaviour.</span></div><div id="t1509994616000016" t="2017-11-06 18:56:56 mattly @gfredericks can you provide an example of what you mean? Iâ€™m not entirely clear by â€œsuccess sumariesâ€"><a href="#t1509994616000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">18:56:56</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>@gfredericks can you provide an example of what you mean? Iâ€™m not entirely clear by â€œsuccess sumariesâ€</span></div><div id="t1509995103000492" t="2017-11-06 19:05:03 gfredericks This is a  defspec  thing in particular

Right now when a  defspec  test runs, and passes, it prints something like:

 {:result true, :num-tests 500, :seed 1509994998441, :test-var &quot;the-name-of-my-test&quot;}
"><a href="#t1509995103000492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">19:05:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This is a </span><code>defspec</code><span> thing in particular

Right now when a </span><code>defspec</code><span> test runs, and passes, it prints something like:

</span><pre>{:result true, :num-tests 500, :seed 1509994998441, :test-var &quot;the-name-of-my-test&quot;}
</pre></div><div id="t1509995134000175" t="2017-11-06 19:05:34 gfredericks you can compare this to the behavior of a regular  clojure.test  test, which prints nothing on success"><a href="#t1509995134000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">19:05:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can compare this to the behavior of a regular </span><code>clojure.test</code><span> test, which prints nothing on success</span></div><div id="t1510003795000392" t="2017-11-06 21:29:55 mattly interesting. Is  defspec  new?"><a href="#t1510003795000392" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">21:29:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>interesting. Is </span><code>defspec</code><span> new?</span></div><div id="t1510007855000326" t="2017-11-06 22:37:35 gfredericks no,  defspec  is the standard  clojure.test  integration that&apos;s been around for quite a while"><a href="#t1510007855000326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">22:37:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no, </span><code>defspec</code><span> is the standard </span><code>clojure.test</code><span> integration that&apos;s been around for quite a while</span></div><div id="t1510011147000340" t="2017-11-06 23:32:27 mattly ah, I guess Iâ€™ve only really ever used test.check in the context of test.chuckâ€™s  checking"><a href="#t1510011147000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">23:32:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><span>ah, I guess Iâ€™ve only really ever used test.check in the context of test.chuckâ€™s </span><code>checking</code></div><div id="t1510011199000049" t="2017-11-06 23:33:19 gfredericks Try to say &quot;test.check in the context of test.chuck&apos;s checking&quot; five times fast"><a href="#t1510011199000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">23:33:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Try to say &quot;test.check in the context of test.chuck&apos;s checking&quot; five times fast</span></div><div id="t1510011278000036" t="2017-11-06 23:34:38 mattly ğŸ˜„"><a href="#t1510011278000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-06</span>Â <span class="t" onclick="H(this)">23:34:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â mattlyÂ </span><b>ğŸ˜„</b></div><div id="t1510014884000201" t="2017-11-07 00:34:44 aj taylor I&apos;d say default to on, but it may be just because I&apos;m used to it ha"><a href="#t1510014884000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-07</span>Â <span class="t" onclick="H(this)">00:34:44</span>Â Â Â Â Â Â Â Â Â Â Â aj taylorÂ </span><span>I&apos;d say default to on, but it may be just because I&apos;m used to it ha</span></div><div id="t1510015089000031" t="2017-11-07 00:38:09 aj taylor Also since each test is running multiple times it&apos;s nice to have an idea of what&apos;s currently being executed (even though I could just configure it I guess with that update)"><a href="#t1510015089000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-07</span>Â <span class="t" onclick="H(this)">00:38:09</span>Â Â Â Â Â Â Â Â Â Â Â aj taylorÂ </span><span>Also since each test is running multiple times it&apos;s nice to have an idea of what&apos;s currently being executed (even though I could just configure it I guess with that update)</span></div><div id="t1510015278000002" t="2017-11-07 00:41:18 gfredericks It&apos;s good to know that some people like it. I was mainly considering changing the default because I was assuming basically nobody liked it"><a href="#t1510015278000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-07</span>Â <span class="t" onclick="H(this)">00:41:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s good to know that some people like it. I was mainly considering changing the default because I was assuming basically nobody liked it</span></div><div id="t1510015302000150" t="2017-11-07 00:41:42 gfredericks If it&apos;s roughly split I&apos;ll probably keep the default since that&apos;s less confusing"><a href="#t1510015302000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-07</span>Â <span class="t" onclick="H(this)">00:41:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>If it&apos;s roughly split I&apos;ll probably keep the default since that&apos;s less confusing</span></div><div id="t1510318246000044" t="2017-11-10 12:50:46 borkdude How can I get a sequence of random numbers by providing a seed in clojure.test.check?"><a href="#t1510318246000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:50:46</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>How can I get a sequence of random numbers by providing a seed in clojure.test.check?</span></div><div id="t1510318351000120" t="2017-11-10 12:52:31 gfredericks what sort of numbers?"><a href="#t1510318351000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:52:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what sort of numbers?</span></div><div id="t1510318412000175" t="2017-11-10 12:53:32 gfredericks if you want to just use the raw RNG code it&apos;s pretty easy

 (map random/rand-long (random/split-n (random/make-random seed) 500))"><a href="#t1510318412000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:53:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you want to just use the raw RNG code it&apos;s pretty easy

</span><code>(map random/rand-long (random/split-n (random/make-random seed) 500))</code></div><div id="t1510318429000204" t="2017-11-10 12:53:49 borkdude thanks"><a href="#t1510318429000204" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:53:49</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>thanks</span></div><div id="t1510318463000465" t="2017-11-10 12:54:23 gfredericks if you are using this for PBT I would probably recommend using generators instead, or would be interested in why you can&apos;t"><a href="#t1510318463000465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:54:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you are using this for PBT I would probably recommend using generators instead, or would be interested in why you can&apos;t</span></div><div id="t1510318539000107" t="2017-11-10 12:55:39 borkdude I would like to use this for some graphical algorithm which needs random numbers, but I want to make it deterministic"><a href="#t1510318539000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:55:39</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I would like to use this for some graphical algorithm which needs random numbers, but I want to make it deterministic</span></div><div id="t1510318576000001" t="2017-11-10 12:56:16 gfredericks okay cool; yeah if it&apos;s not for testing then using the RNG directly is perfectly fine"><a href="#t1510318576000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">12:56:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay cool; yeah if it&apos;s not for testing then using the RNG directly is perfectly fine</span></div><div id="t1510330128000457" t="2017-11-10 16:08:48 borkdude Iâ€™m looking for examples online but canâ€™t find it. Is there a way that I can express that I want ints in a range using the generators + a custom seed?"><a href="#t1510330128000457" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:08:48</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Iâ€™m looking for examples online but canâ€™t find it. Is there a way that I can express that I want ints in a range using the generators + a custom seed?</span></div><div id="t1510330141000012" t="2017-11-10 16:09:01 borkdude or do I have to convert longs to a range myself, which is also possible"><a href="#t1510330141000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:09:01</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>or do I have to convert longs to a range myself, which is also possible</span></div><div id="t1510330422000648" t="2017-11-10 16:13:42 gfredericks the rng only generates raw uniform longs; if your range isn&apos;t close to 64 bits, I&apos;d just use  mod  to get what you want"><a href="#t1510330422000648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:13:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the rng only generates raw uniform longs; if your range isn&apos;t close to 64 bits, I&apos;d just use </span><code>mod</code><span> to get what you want</span></div><div id="t1510330474000287" t="2017-11-10 16:14:34 borkdude yeah, cool"><a href="#t1510330474000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:14:34</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yeah, cool</span></div><div id="t1510330683000131" t="2017-11-10 16:18:03 borkdude Is there a way to get around the fixed size 500 in 
 (map (comp #(mod % 1000) r/rand-long) (r/split-n (r/make-random 2) 500))  so I can get a lazy sequence of these numbers or do I need to specify this up front always?"><a href="#t1510330683000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:18:03</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Is there a way to get around the fixed size 500 in 
</span><code>(map (comp #(mod % 1000) r/rand-long) (r/split-n (r/make-random 2) 500))</code><span> so I can get a lazy sequence of these numbers or do I need to specify this up front always?</span></div><div id="t1510330770000286" t="2017-11-10 16:19:30 borkdude I guess I can calculate this up front"><a href="#t1510330770000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:19:30</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I guess I can calculate this up front</span></div><div id="t1510332307000439" t="2017-11-10 16:45:07 gfredericks you can make an infinite lazy seq"><a href="#t1510332307000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:45:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can make an infinite lazy seq</span></div><div id="t1510332319000076" t="2017-11-10 16:45:19 gfredericks there&apos;s a private(?) function in  generators.cljc  that does this"><a href="#t1510332319000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:45:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a private(?) function in </span><code>generators.cljc</code><span> that does this</span></div><div id="t1510332324000284" t="2017-11-10 16:45:24 gfredericks lazy-random-states  or something to that effect"><a href="#t1510332324000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:45:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>lazy-random-states</code><span> or something to that effect</span></div><div id="t1510332698000031" t="2017-11-10 16:51:38 borkdude Cool:  https://clojure.github.io/test.check/clojure.test.check.generators.html#var-lazy-random-states"><a href="#t1510332698000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:51:38</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Cool: </span><a href="https://clojure.github.io/test.check/clojure.test.check.generators.html#var-lazy-random-states" target="_blank">https://clojure.github.io/test.check/clojure.test.check.generators.html#var-lazy-random-states</a></div><div id="t1510332939000236" t="2017-11-10 16:55:39 borkdude So this would be it right?  (take 2 (map random/rand-long (gen/lazy-random-states (random/make-random 2))))"><a href="#t1510332939000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:55:39</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>So this would be it right? </span><code>(take 2 (map random/rand-long (gen/lazy-random-states (random/make-random 2))))</code></div><div id="t1510333009000103" t="2017-11-10 16:56:49 gfredericks yep"><a href="#t1510333009000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-10</span>Â <span class="t" onclick="H(this)">16:56:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yep</span></div><div id="t1510846057000420" t="2017-11-16 15:27:37 gfredericks if anybody is in the mood to do random tedious OSS work, I would like to upgrade the version of cljs that test.check depends on in its  project.clj  but doing it causes some failures due to changes in the cljs compiler API"><a href="#t1510846057000420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-16</span>Â <span class="t" onclick="H(this)">15:27:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if anybody is in the mood to do random tedious OSS work, I would like to upgrade the version of cljs that test.check depends on in its </span><code>project.clj</code><span> but doing it causes some failures due to changes in the cljs compiler API</span></div><div id="t1510846109000221" t="2017-11-16 15:28:29 gfredericks (if you plan to work on that, let me know so I don&apos;t do it too)"><a href="#t1510846109000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-16</span>Â <span class="t" onclick="H(this)">15:28:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(if you plan to work on that, let me know so I don&apos;t do it too)</span></div><div id="t1510846300000330" t="2017-11-16 15:31:40 nwjsmith @gfredericks I&apos;m in, will take a look later today"><a href="#t1510846300000330" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-16</span>Â <span class="t" onclick="H(this)">15:31:40</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@gfredericks I&apos;m in, will take a look later today</span></div><div id="t1510848817000758" t="2017-11-16 16:13:37 gfredericks @nwjsmith thanks!"><a href="#t1510848817000758" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-16</span>Â <span class="t" onclick="H(this)">16:13:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith thanks!</span></div><div id="t1510928254000378" t="2017-11-17 14:17:34 gfredericks @nwjsmith do you have a jira account?"><a href="#t1510928254000378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">14:17:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith do you have a jira account?</span></div><div id="t1510928427000064" t="2017-11-17 14:20:27 gfredericks In any case I just created  https://dev.clojure.org/jira/browse/TCHECK-135"><a href="#t1510928427000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">14:20:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In any case I just created </span><a href="https://dev.clojure.org/jira/browse/TCHECK-135" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-135</a></div><div id="t1510930935000604" t="2017-11-17 15:02:15 nwjsmith @gfredericks yes! I&apos;m  nwjsmith  in Clojure JIRA, and I&apos;ve signed the CLA"><a href="#t1510930935000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">15:02:15</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@gfredericks yes! I&apos;m </span><code>nwjsmith</code><span> in Clojure JIRA, and I&apos;ve signed the CLA</span></div><div id="t1510931236000404" t="2017-11-17 15:07:16 nwjsmith Feel free to assign that to me.

I got the tests running on the latest CLJS last night, but the approach I took might require a larger overhaul of how the tests are currently run. Do you mind if I make some substantial changes in that area?"><a href="#t1510931236000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">15:07:16</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Feel free to assign that to me.

I got the tests running on the latest CLJS last night, but the approach I took might require a larger overhaul of how the tests are currently run. Do you mind if I make some substantial changes in that area?</span></div><div id="t1510934550000478" t="2017-11-17 16:02:30 gfredericks @nwjsmith if you&apos;re confident that your changes are making the orchestration more idiomatic for lein-cljsbuild setups, then that&apos;s fine with me"><a href="#t1510934550000478" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:02:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith if you&apos;re confident that your changes are making the orchestration more idiomatic for lein-cljsbuild setups, then that&apos;s fine with me</span></div><div id="t1510934564000746" t="2017-11-17 16:02:44 gfredericks I don&apos;t use modern cljs much at all so I can&apos;t easily judge those things"><a href="#t1510934564000746" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:02:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t use modern cljs much at all so I can&apos;t easily judge those things</span></div><div id="t1510934686000571" t="2017-11-17 16:04:46 nwjsmith I&apos;m confident that&apos;s the case. Will be taking my lead from Om&apos;s test running and some stuff we have internally"><a href="#t1510934686000571" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:04:46</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;m confident that&apos;s the case. Will be taking my lead from Om&apos;s test running and some stuff we have internally</span></div><div id="t1510934690000051" t="2017-11-17 16:04:50 gfredericks @nwjsmith I see your user page, but the full-name-based dropdown that jira gives me on the ticket edit page does not have your name under &apos;Nate Smith&apos; or anything similar; seems like a bug, but perhaps you can assign it to yourself?

/cc @alexmiller"><a href="#t1510934690000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:04:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith I see your user page, but the full-name-based dropdown that jira gives me on the ticket edit page does not have your name under &apos;Nate Smith&apos; or anything similar; seems like a bug, but perhaps you can assign it to yourself?

/cc @alexmiller</span></div><div id="t1510934750000523" t="2017-11-17 16:05:50 nwjsmith Weird. Not sure if this helps but here&apos;s a ticket I&apos;m the reporter on:  https://dev.clojure.org/jira/browse/CLJ-2079"><a href="#t1510934750000523" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:05:50</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Weird. Not sure if this helps but here&apos;s a ticket I&apos;m the reporter on: </span><a href="https://dev.clojure.org/jira/browse/CLJ-2079" target="_blank">https://dev.clojure.org/jira/browse/CLJ-2079</a></div><div id="t1510934774000342" t="2017-11-17 16:06:14 nwjsmith Can&apos;t assign myself unfortunately."><a href="#t1510934774000342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:06:14</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Can&apos;t assign myself unfortunately.</span></div><div id="t1510934918000075" t="2017-11-17 16:08:38 gfredericks haha great"><a href="#t1510934918000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:08:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>haha great</span></div><div id="t1510934969000089" t="2017-11-17 16:09:29 gfredericks I&apos;ll just keep it assigned to myself Â¯\(ãƒ„)/Â¯"><a href="#t1510934969000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:09:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll just keep it assigned to myself Â¯\(ãƒ„)/Â¯</span></div><div id="t1510935712000215" t="2017-11-17 16:21:52 gfredericks @nwjsmith if there are any other contrib projects with cljs tests, those would be an interesting comparison point"><a href="#t1510935712000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:21:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith if there are any other contrib projects with cljs tests, those would be an interesting comparison point</span></div><div id="t1510935856000475" t="2017-11-17 16:24:16 nwjsmith Good call, looks like tools.reader is a good example"><a href="#t1510935856000475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:24:16</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Good call, looks like tools.reader is a good example</span></div><div id="t1510936065000455" t="2017-11-17 16:27:45 gfredericks core.async and spec.alpha sound plausible also"><a href="#t1510936065000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:27:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>core.async and spec.alpha sound plausible also</span></div><div id="t1510936171000034" t="2017-11-17 16:29:31 alexmiller @gfredericks @nwjsmith your user wasnâ€™t in the right groups to do edit/assign - I fixed and assigned that ticket"><a href="#t1510936171000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:29:31</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>@gfredericks @nwjsmith your user wasnâ€™t in the right groups to do edit/assign - I fixed and assigned that ticket</span></div><div id="t1510936188000087" t="2017-11-17 16:29:48 nwjsmith Thanks Alex!"><a href="#t1510936188000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:29:48</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Thanks Alex!</span></div><div id="t1510936212000334" t="2017-11-17 16:30:12 alexmiller re cljs tests, note that the official build file for all contrib projects is the pom.xml (as thatâ€™s what the CI build uses)"><a href="#t1510936212000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:30:12</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>re cljs tests, note that the official build file for all contrib projects is the pom.xml (as thatâ€™s what the CI build uses)</span></div><div id="t1510936249000624" t="2017-11-17 16:30:49 alexmiller and the pom.xml uses clojure-maven-plugin which doesnâ€™t know or understand cljs (at least in the version we are forced to use due to jvm and maven versions)"><a href="#t1510936249000624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:30:49</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and the pom.xml uses clojure-maven-plugin which doesnâ€™t know or understand cljs (at least in the version we are forced to use due to jvm and maven versions)</span></div><div id="t1510936281000604" t="2017-11-17 16:31:21 alexmiller many projects have parallel project.clj files which people use to run cljs tests locally"><a href="#t1510936281000604" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:31:21</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>many projects have parallel project.clj files which people use to run cljs tests locally</span></div><div id="t1510936305000037" t="2017-11-17 16:31:45 alexmiller a few projects have started to experiment with ways to integrate these - I think data.xml is the most robust example of that"><a href="#t1510936305000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:31:45</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>a few projects have started to experiment with ways to integrate these - I think data.xml is the most robust example of that</span></div><div id="t1510936354000407" t="2017-11-17 16:32:34 gfredericks :+1:  thanks @alexmiller "><a href="#t1510936354000407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:32:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b><span> thanks @alexmiller </span></div><div id="t1510936360000357" t="2017-11-17 16:32:40 alexmiller itâ€™s done by integrating the cljs tests into the clojure tests directly"><a href="#t1510936360000357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:32:40</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>itâ€™s done by integrating the cljs tests into the clojure tests directly</span></div><div id="t1510936385000097" t="2017-11-17 16:33:05 alexmiller in this area  https://github.com/clojure/data.xml/tree/master/src/test/clojurescript/clojure/data/xml"><a href="#t1510936385000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:33:05</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>in this area </span><a href="https://github.com/clojure/data.xml/tree/master/src/test/clojurescript/clojure/data/xml" target="_blank">https://github.com/clojure/data.xml/tree/master/src/test/clojurescript/clojure/data/xml</a></div><div id="t1510936410000482" t="2017-11-17 16:33:30 alexmiller uses nashorn I believe"><a href="#t1510936410000482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:33:30</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>uses nashorn I believe</span></div><div id="t1510936634000186" t="2017-11-17 16:37:14 gfredericks Oh interesting

@nwjsmith if you go the nashorn route I think it&apos;d be good to maintain the ability to easily run with node as well"><a href="#t1510936634000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:37:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh interesting

@nwjsmith if you go the nashorn route I think it&apos;d be good to maintain the ability to easily run with node as well</span></div><div id="t1510936696000610" t="2017-11-17 16:38:16 nwjsmith @alexmiller oops I think I got assigned to the wrong ticket, should be TCHECK-135"><a href="#t1510936696000610" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:38:16</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@alexmiller oops I think I got assigned to the wrong ticket, should be TCHECK-135</span></div><div id="t1510936755000446" t="2017-11-17 16:39:15 alexmiller oops! reading comprehension fail. fixed."><a href="#t1510936755000446" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:39:15</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>oops! reading comprehension fail. fixed.</span></div><div id="t1510936775000387" t="2017-11-17 16:39:35 nwjsmith Thanks"><a href="#t1510936775000387" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:39:35</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Thanks</span></div><div id="t1510936859000021" t="2017-11-17 16:40:59 nwjsmith I&apos;ll look into integrating the CLJS tests with the Clojure ones as well."><a href="#t1510936859000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:40:59</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;ll look into integrating the CLJS tests with the Clojure ones as well.</span></div><div id="t1510937075000187" t="2017-11-17 16:44:35 gfredericks getting the cljs tests to run via maven is a nice-to-have; if it&apos;s much harder, just getting clojurescript upgraded is fine"><a href="#t1510937075000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-17</span>Â <span class="t" onclick="H(this)">16:44:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>getting the cljs tests to run via maven is a nice-to-have; if it&apos;s much harder, just getting clojurescript upgraded is fine</span></div><div id="t1511029136000126" t="2017-11-18 18:18:56 nwjsmith @gfredericks 

The patch ended up being much smaller that I had thought  https://gist.github.com/nwjsmith/edd1ce97b9e5334ac3cbc49a77ffb339 

I&apos;m trying to track down the other part of that ticket though. I can&apos;t seem to find any reader conditionals related to  :/  in the tests. Did that already get fixed up?"><a href="#t1511029136000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:18:56</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@gfredericks 

The patch ended up being much smaller that I had thought </span><a href="https://gist.github.com/nwjsmith/edd1ce97b9e5334ac3cbc49a77ffb339" target="_blank">https://gist.github.com/nwjsmith/edd1ce97b9e5334ac3cbc49a77ffb339</a><span>

I&apos;m trying to track down the other part of that ticket though. I can&apos;t seem to find any reader conditionals related to </span><code>:/</code><span> in the tests. Did that already get fixed up?</span></div><div id="t1511029174000095" t="2017-11-18 18:19:34 gfredericks @nwjsmith do you have the latest master?"><a href="#t1511029174000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:19:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith do you have the latest master?</span></div><div id="t1511029237000027" t="2017-11-18 18:20:37 nwjsmith facepalm"><a href="#t1511029237000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:20:37</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><b>facepalm</b></div><div id="t1511029243000078" t="2017-11-18 18:20:43 nwjsmith I see it now"><a href="#t1511029243000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:20:43</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I see it now</span></div><div id="t1511030018000009" t="2017-11-18 18:33:38 nwjsmith I&apos;ve attached the patch to the ticket. Do I need to fiddle with the JIRA workflow of the ticket at all?"><a href="#t1511030018000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:33:38</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;ve attached the patch to the ticket. Do I need to fiddle with the JIRA workflow of the ticket at all?</span></div><div id="t1511030213000030" t="2017-11-18 18:36:53 gfredericks No -- you got both of the :/ things?"><a href="#t1511030213000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:36:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>No -- you got both of the :/ things?</span></div><div id="t1511030632000035" t="2017-11-18 18:43:52 nwjsmith Yeah, both of the  keyword-symbol-serialization-roundtrip  and  edn-roundtrips  tests"><a href="#t1511030632000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:43:52</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Yeah, both of the </span><code>keyword-symbol-serialization-roundtrip</code><span> and </span><code>edn-roundtrips</code><span> tests</span></div><div id="t1511030640000011" t="2017-11-18 18:44:00 nwjsmith and they both pass"><a href="#t1511030640000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">18:44:00</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>and they both pass</span></div><div id="t1511032398000018" t="2017-11-18 19:13:18 gfredericks cool, taking a look now"><a href="#t1511032398000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">19:13:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>cool, taking a look now</span></div><div id="t1511033127000050" t="2017-11-18 19:25:27 gfredericks @nwjsmith looks great! will push as soon as the tests pass on my end and then close the ticket

thanks again"><a href="#t1511033127000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">19:25:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith looks great! will push as soon as the tests pass on my end and then close the ticket

thanks again</span></div><div id="t1511033848000047" t="2017-11-18 19:37:28 nwjsmith No problem. Thanks for your help and let me know if there&apos;s anything else you&apos;d like me to take a crack at"><a href="#t1511033848000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">19:37:28</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>No problem. Thanks for your help and let me know if there&apos;s anything else you&apos;d like me to take a crack at</span></div><div id="t1511034098000155" t="2017-11-18 19:41:38 gfredericks TCHECK-125 looks manageable, if you&apos;re interested"><a href="#t1511034098000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">19:41:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>TCHECK-125 looks manageable, if you&apos;re interested</span></div><div id="t1511034157000054" t="2017-11-18 19:42:37 gfredericks I&apos;d wrap all the  defmethod s in an  if  that checks if  clojure.test/report  is a  MultiFn  or whatever that class is, and if it&apos;s not then just print a warning to  *err*"><a href="#t1511034157000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-18</span>Â <span class="t" onclick="H(this)">19:42:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d wrap all the </span><code>defmethod</code><span>s in an </span><code>if</code><span> that checks if </span><code>clojure.test/report</code><span> is a </span><code>MultiFn</code><span> or whatever that class is, and if it&apos;s not then just print a warning to </span><code>*err*</code></div><div id="t1511911665000317" t="2017-11-28 23:27:45 johanatan hi"><a href="#t1511911665000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:27:45</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>hi</span></div><div id="t1511911690000352" t="2017-11-28 23:28:10 johanatan have you considered the utility of a  gen/let  which allows either generators or plain values on the right hand side?"><a href="#t1511911690000352" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:28:10</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>have you considered the utility of a </span><code>gen/let</code><span> which allows either generators or plain values on the right hand side?</span></div><div id="t1511911900000108" t="2017-11-28 23:31:40 gfredericks there are a lot of places in the API where that sort of thing could be done; my feeling is that it would cause more confusion than it would add value; and the ambiguity of it (a generator is also a value, sort of) is off-putting to me

a general rant about that sort of thing here:  https://brehaut.net/blog/2013/duck_wrapping 

that said, I did do exactly that in the body of  gen/let"><a href="#t1511911900000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:31:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there are a lot of places in the API where that sort of thing could be done; my feeling is that it would cause more confusion than it would add value; and the ambiguity of it (a generator is also a value, sort of) is off-putting to me

a general rant about that sort of thing here: </span><a href="https://brehaut.net/blog/2013/duck_wrapping" target="_blank">https://brehaut.net/blog/2013/duck_wrapping</a><span>

that said, I did do exactly that in the body of </span><code>gen/let</code></div><div id="t1511911908000108" t="2017-11-28 23:31:48 gfredericks but I&apos;ve never liked it  ğŸ™‚"><a href="#t1511911908000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:31:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but I&apos;ve never liked it </span><b>ğŸ™‚</b></div><div id="t1511912015000027" t="2017-11-28 23:33:35 gfredericks the most useful thing I can imagine in this direction is being able to create a complex nested data structure where some of the leaves are generators and others aren&apos;t

but that sort of feature could be written as just a function that takes such a data structure and returns the generator you want, and calling an extra function wouldn&apos;t be much of a burden at than point since you by definition already have a big chunk of code"><a href="#t1511912015000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:33:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the most useful thing I can imagine in this direction is being able to create a complex nested data structure where some of the leaves are generators and others aren&apos;t

but that sort of feature could be written as just a function that takes such a data structure and returns the generator you want, and calling an extra function wouldn&apos;t be much of a burden at than point since you by definition already have a big chunk of code</span></div><div id="t1511912125000069" t="2017-11-28 23:35:25 johanatan i&apos;m not seeing how that feature could be written as just a function? since there can be dependencies between the nodes of the let"><a href="#t1511912125000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:35:25</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>i&apos;m not seeing how that feature could be written as just a function? since there can be dependencies between the nodes of the let</span></div><div id="t1511912145000222" t="2017-11-28 23:35:45 gfredericks not what you asked for exactly"><a href="#t1511912145000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:35:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>not what you asked for exactly</span></div><div id="t1511912151000493" t="2017-11-28 23:35:51 gfredericks I was talking about something else at that point"><a href="#t1511912151000493" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:35:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I was talking about something else at that point</span></div><div id="t1511912180000096" t="2017-11-28 23:36:20 gfredericks you&apos;d have to write a macro that expands to  gen/let  if you wanted to implement the feature yourself"><a href="#t1511912180000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:36:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you&apos;d have to write a macro that expands to </span><code>gen/let</code><span> if you wanted to implement the feature yourself</span></div><div id="t1511912211000078" t="2017-11-28 23:36:51 johanatan what was the something else you were talking about though? perhaps that would interest me if I understood it  ğŸ™‚"><a href="#t1511912211000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:36:51</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>what was the something else you were talking about though? perhaps that would interest me if I understood it </span><b>ğŸ™‚</b></div><div id="t1511912338000281" t="2017-11-28 23:38:58 gfredericks a function that you could use for your use case like so:

 (gen/let [x (generatorfy something)]
  ...)
 

which is no easier than writing  gen/return ; but it would have additional magical features so that you could also write  (generatorfy [:foo gen/nat 42])  and get a generator for things like  [:foo 12 42]  and  [:foo 19 42]  and etc."><a href="#t1511912338000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:38:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a function that you could use for your use case like so:

</span><pre>(gen/let [x (generatorfy something)]
  ...)
</pre><span>

which is no easier than writing </span><code>gen/return</code><span>; but it would have additional magical features so that you could also write </span><code>(generatorfy [:foo gen/nat 42])</code><span> and get a generator for things like </span><code>[:foo 12 42]</code><span> and </span><code>[:foo 19 42]</code><span> and etc.</span></div><div id="t1511912369000097" t="2017-11-28 23:39:29 gfredericks and you can imagine more complex examples where the generators are buried deep in some gnarly data structure"><a href="#t1511912369000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:39:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and you can imagine more complex examples where the generators are buried deep in some gnarly data structure</span></div><div id="t1511912428000338" t="2017-11-28 23:40:28 gfredericks btw if it would be useful for you to have anything of this sort in  https://github.com/gfredericks/test.chuck  so you don&apos;t have to maintain it yourself, I&apos;m happy to accept PRs"><a href="#t1511912428000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:40:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>btw if it would be useful for you to have anything of this sort in </span><a href="https://github.com/gfredericks/test.chuck" target="_blank">https://github.com/gfredericks/test.chuck</a><span> so you don&apos;t have to maintain it yourself, I&apos;m happy to accept PRs</span></div><div id="t1511912467000075" t="2017-11-28 23:41:07 johanatan ah, i see"><a href="#t1511912467000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:41:07</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ah, i see</span></div><div id="t1511912471000139" t="2017-11-28 23:41:11 johanatan makes sense."><a href="#t1511912471000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:41:11</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>makes sense.</span></div><div id="t1511912482000405" t="2017-11-28 23:41:22 johanatan for now i&apos;ll probably just use  gen/return  as my need isn&apos;t too complicated"><a href="#t1511912482000405" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-28</span>Â <span class="t" onclick="H(this)">23:41:22</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>for now i&apos;ll probably just use </span><code>gen/return</code><span> as my need isn&apos;t too complicated</span></div><div id="t1512078108000364" t="2017-11-30 21:41:48 johanatan @gfredericks are you aware that  gen/list  does not seem to be &quot;just like  gen/vector &quot; in the sense that min and max arguments are not accepted?"><a href="#t1512078108000364" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span>Â <span class="t" onclick="H(this)">21:41:48</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>@gfredericks are you aware that </span><code>gen/list</code><span> does not seem to be &quot;just like </span><code>gen/vector</code><span>&quot; in the sense that min and max arguments are not accepted?</span></div><div id="t1512078136000438" t="2017-11-30 21:42:16 johanatan also, why does  gen/double*  accept its  min  and  max  as keys in an opts map rather than flat args as  gen/vector  does ?"><a href="#t1512078136000438" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span>Â <span class="t" onclick="H(this)">21:42:16</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>also, why does </span><code>gen/double*</code><span> accept its </span><code>min</code><span> and </span><code>max</code><span> as keys in an opts map rather than flat args as </span><code>gen/vector</code><span> does ?</span></div><div id="t1512078247000573" t="2017-11-30 21:44:07 gfredericks 1) yes;  gen/list  is a bit second-class; I&apos;m happy to take a patch for the docstring if it&apos;s misleading. I&apos;d consider enhancing it to be like  gen/vector , but that gets to 
2) wherein the API is inconsistent, which is due to its being created in phases. I think opt maps everywhere would be ideal, and I suppose now that you have me thinking about it,  gen/vector  in particular could be evolved that way backwards compatibly"><a href="#t1512078247000573" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span>Â <span class="t" onclick="H(this)">21:44:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>1) yes; </span><code>gen/list</code><span> is a bit second-class; I&apos;m happy to take a patch for the docstring if it&apos;s misleading. I&apos;d consider enhancing it to be like </span><code>gen/vector</code><span>, but that gets to 
2) wherein the API is inconsistent, which is due to its being created in phases. I think opt maps everywhere would be ideal, and I suppose now that you have me thinking about it, </span><code>gen/vector</code><span> in particular could be evolved that way backwards compatibly</span></div><div id="t1512078866000107" t="2017-11-30 21:54:26 johanatan ok, cool. just wanted to make you aware (if not already)"><a href="#t1512078866000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span>Â <span class="t" onclick="H(this)">21:54:26</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ok, cool. just wanted to make you aware (if not already)</span></div><div id="t1512078887000270" t="2017-11-30 21:54:47 johanatan [not a huge deal to me personally but yea of course consistency is good where possible]"><a href="#t1512078887000270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span>Â <span class="t" onclick="H(this)">21:54:47</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[not a huge deal to me personally but yea of course consistency is good where possible]</span></div><div id="t1512087631000068" t="2017-12-01 00:20:31 johanatan btw, is it generally considered bad practice to call  gen/sample  oneself nested within a huge  gen/let  (or other combinator construct)?"><a href="#t1512087631000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:20:31</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>btw, is it generally considered bad practice to call </span><code>gen/sample</code><span> oneself nested within a huge </span><code>gen/let</code><span> (or other combinator construct)?</span></div><div id="t1512087660000381" t="2017-12-01 00:21:00 gfredericks Yes"><a href="#t1512087660000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:21:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yes</span></div><div id="t1512087669000209" t="2017-12-01 00:21:09 gfredericks Or in a generator at all"><a href="#t1512087669000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:21:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Or in a generator at all</span></div><div id="t1512087695000018" t="2017-12-01 00:21:35 gfredericks Same with gen/generate"><a href="#t1512087695000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:21:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Same with gen/generate</span></div><div id="t1512087700000157" t="2017-12-01 00:21:40 johanatan hmm, I have through discipline been able to almost always avoid this but sometimes things get so hairy that the way to avoid it is not easy to see."><a href="#t1512087700000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:21:40</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>hmm, I have through discipline been able to almost always avoid this but sometimes things get so hairy that the way to avoid it is not easy to see.</span></div><div id="t1512087716000041" t="2017-12-01 00:21:56 johanatan is there any standard/general procedure one can apply to help escape that situation?"><a href="#t1512087716000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:21:56</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>is there any standard/general procedure one can apply to help escape that situation?</span></div><div id="t1512087859000096" t="2017-12-01 00:24:19 gfredericks You&apos;re passing to sample a generator that&apos;s based on other things you generated?"><a href="#t1512087859000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:24:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;re passing to sample a generator that&apos;s based on other things you generated?</span></div><div id="t1512087864000340" t="2017-12-01 00:24:24 johanatan yep"><a href="#t1512087864000340" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:24:24</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>yep</span></div><div id="t1512087871000148" t="2017-12-01 00:24:31 alexmiller Use bind"><a href="#t1512087871000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:24:31</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Use bind</span></div><div id="t1512087872000345" t="2017-12-01 00:24:32 gfredericks I think it can be hard to talk about these things abstractly, but I&apos;m happy to look at whatever code you can share"><a href="#t1512087872000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:24:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think it can be hard to talk about these things abstractly, but I&apos;m happy to look at whatever code you can share</span></div><div id="t1512087891000187" t="2017-12-01 00:24:51 johanatan @alexmiller would  bind  work within a  gen/let  ?"><a href="#t1512087891000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:24:51</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>@alexmiller would </span><code>bind</code><span> work within a </span><code>gen/let</code><span> ?</span></div><div id="t1512087918000291" t="2017-12-01 00:25:18 johanatan ah, yep. that seems like it would work."><a href="#t1512087918000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:25:18</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ah, yep. that seems like it would work.</span></div><div id="t1512087919000160" t="2017-12-01 00:25:19 johanatan thx!"><a href="#t1512087919000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:25:19</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>thx!</span></div><div id="t1512087982000023" t="2017-12-01 00:26:22 gfredericks Nice"><a href="#t1512087982000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:26:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Nice</span></div><div id="t1512088367000351" t="2017-12-01 00:32:47 johanatan is there a function that goes from list of generators to generator of a list?"><a href="#t1512088367000351" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:32:47</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>is there a function that goes from list of generators to generator of a list?</span></div><div id="t1512088379000461" t="2017-12-01 00:32:59 johanatan [there should be but i&apos;m not seeing it]"><a href="#t1512088379000461" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:32:59</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[there should be but i&apos;m not seeing it]</span></div><div id="t1512088381000179" t="2017-12-01 00:33:01 gfredericks Tuple"><a href="#t1512088381000179" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:33:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Tuple</span></div><div id="t1512088385000219" t="2017-12-01 00:33:05 johanatan ah, cool. thx"><a href="#t1512088385000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:33:05</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ah, cool. thx</span></div><div id="t1512088392000010" t="2017-12-01 00:33:12 gfredericks Used with apply"><a href="#t1512088392000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:33:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Used with apply</span></div><div id="t1512088399000343" t="2017-12-01 00:33:19 johanatan right"><a href="#t1512088399000343" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">00:33:19</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>right</span></div><div id="t1512104714000023" t="2017-12-01 05:05:14 johanatan would it be possible to have a generator of an infinite/lazy sequence of arbitrary type?"><a href="#t1512104714000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:05:14</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>would it be possible to have a generator of an infinite/lazy sequence of arbitrary type?</span></div><div id="t1512104749000093" t="2017-12-01 05:05:49 johanatan [like  lazy-random-states  but with an arbitrary generator for the values]"><a href="#t1512104749000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:05:49</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[like </span><code>lazy-random-states</code><span> but with an arbitrary generator for the values]</span></div><div id="t1512104838000083" t="2017-12-01 05:07:18 johanatan [the reason i&apos;d like this is i have some logic deeply nested inside a gnarly structure of  gen/let ,  gen/bind ,  gen/fmap  et al and realized in the very innermost loop that i need to pull N (dynamically determined) values of a particular type]"><a href="#t1512104838000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:07:18</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[the reason i&apos;d like this is i have some logic deeply nested inside a gnarly structure of </span><code>gen/let</code><span>, </span><code>gen/bind</code><span>, </span><code>gen/fmap</code><span> et al and realized in the very innermost loop that i need to pull N (dynamically determined) values of a particular type]</span></div><div id="t1512104878000128" t="2017-12-01 05:07:58 johanatan it&apos;s probably possible to restructure the code to generate these on the outside but it&apos;s a bit difficult given that the amount to be generated is dynamic/ computed/ derived from other values"><a href="#t1512104878000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:07:58</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>it&apos;s probably possible to restructure the code to generate these on the outside but it&apos;s a bit difficult given that the amount to be generated is dynamic/ computed/ derived from other values</span></div><div id="t1512104972000020" t="2017-12-01 05:09:32 johanatan so, if i could at the outermost level  bind  to a lazy sequence, then inside the nests I could pull from that lazy sequence without violating &quot;thou shall not call  gen/sample  manually&quot;"><a href="#t1512104972000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:09:32</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>so, if i could at the outermost level </span><code>bind</code><span> to a lazy sequence, then inside the nests I could pull from that lazy sequence without violating &quot;thou shall not call </span><code>gen/sample</code><span> manually&quot;</span></div><div id="t1512105010000093" t="2017-12-01 05:10:10 johanatan pull via a regular  take  that is"><a href="#t1512105010000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">05:10:10</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>pull via a regular </span><code>take</code><span> that is</span></div><div id="t1512129851000213" t="2017-12-01 12:04:11 gfredericks I&apos;ve thought about use cases like that before

the trickiest part is thinking about how you shrink that structure"><a href="#t1512129851000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:04:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve thought about use cases like that before

the trickiest part is thinking about how you shrink that structure</span></div><div id="t1512129889000071" t="2017-12-01 12:04:49 gfredericks you could setup a generator of infinite lazy sequences using a recursive  gen/bind , but I think it would never stop shrinking"><a href="#t1512129889000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:04:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could setup a generator of infinite lazy sequences using a recursive </span><code>gen/bind</code><span>, but I think it would never stop shrinking</span></div><div id="t1512129951000155" t="2017-12-01 12:05:51 gfredericks and even with lower-level help from the library, it still needs to have a strategy for that

the tension comes from not easily being able to tell how much of the infinite source of data the user actually used"><a href="#t1512129951000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:05:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and even with lower-level help from the library, it still needs to have a strategy for that

the tension comes from not easily being able to tell how much of the infinite source of data the user actually used</span></div><div id="t1512130022000094" t="2017-12-01 12:07:02 gfredericks there are certainly hacky ways to try to do that, and that might be the best answer, but the &quot;hacky&quot; part has made me hesitant to commit to anything"><a href="#t1512130022000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:07:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there are certainly hacky ways to try to do that, and that might be the best answer, but the &quot;hacky&quot; part has made me hesitant to commit to anything</span></div><div id="t1512130106000381" t="2017-12-01 12:08:26 gfredericks one less hacky trade-off you can make is to relax the &quot;requirement&quot; that there actually be an infinite number of things generated -- e.g., if you generate a large vector of items and then use  (gen/fmap cycle ...)"><a href="#t1512130106000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:08:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>one less hacky trade-off you can make is to relax the &quot;requirement&quot; that there actually be an infinite number of things generated -- e.g., if you generate a large vector of items and then use </span><code>(gen/fmap cycle ...)</code></div><div id="t1512130137000168" t="2017-12-01 12:08:57 gfredericks then that will naturally shrink to an infinite repetition of one very small piece of data

so it only works if you can tolerate repeats"><a href="#t1512130137000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:08:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>then that will naturally shrink to an infinite repetition of one very small piece of data

so it only works if you can tolerate repeats</span></div><div id="t1512130163000162" t="2017-12-01 12:09:23 gfredericks I remember making this recommendation for spec when it generates function stubs"><a href="#t1512130163000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">12:09:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I remember making this recommendation for spec when it generates function stubs</span></div><div id="t1512153534000013" t="2017-12-01 18:38:54 johanatan ah, nice thoughts. would definitely be cool if something like this can be added in a not-too-hacky way but for now yea i&apos;ll go with a finite but repeating structure"><a href="#t1512153534000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">18:38:54</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ah, nice thoughts. would definitely be cool if something like this can be added in a not-too-hacky way but for now yea i&apos;ll go with a finite but repeating structure</span></div><div id="t1512155879000600" t="2017-12-01 19:17:59 johanatan if i were to attempt a  bind  to the  (gen/fmap cycle ...)  structure you mentioned, that would be an infinite loop yea?"><a href="#t1512155879000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">19:17:59</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>if i were to attempt a </span><code>bind</code><span> to the </span><code>(gen/fmap cycle ...)</code><span> structure you mentioned, that would be an infinite loop yea?</span></div><div id="t1512156053000220" t="2017-12-01 19:20:53 gfredericks no I don&apos;t think so"><a href="#t1512156053000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">19:20:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no I don&apos;t think so</span></div><div id="t1512156133000182" t="2017-12-01 19:22:13 gfredericks unless the function that accepts the infinite sequence needs to consume the whole thing before returning a generator"><a href="#t1512156133000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">19:22:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>unless the function that accepts the infinite sequence needs to consume the whole thing before returning a generator</span></div><div id="t1512168491000221" t="2017-12-01 22:48:11 johanatan i made these helpers to realize your idea above:
 (defn- repeating-seq
  ([gen] (repeating-seq gen 1000))
  ([gen size] (with-meta (gen/fmap cycle (gen/vector gen size size)) {:size size})))

(defn- take-repeating-seq [n seq]
  (gen/fmap #(take n (drop (%1 1) (%1 0))) (gen/tuple seq (gen/choose 1 ((meta seq) :size)))))
"><a href="#t1512168491000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">22:48:11</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>i made these helpers to realize your idea above:
</span><pre>(defn- repeating-seq
  ([gen] (repeating-seq gen 1000))
  ([gen size] (with-meta (gen/fmap cycle (gen/vector gen size size)) {:size size})))

(defn- take-repeating-seq [n seq]
  (gen/fmap #(take n (drop (%1 1) (%1 0))) (gen/tuple seq (gen/choose 1 ((meta seq) :size)))))
</pre></div><div id="t1512170631000186" t="2017-12-01 23:23:51 gfredericks Huh..."><a href="#t1512170631000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:23:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Huh...</span></div><div id="t1512170663000353" t="2017-12-01 23:24:23 gfredericks So you&apos;d use take-repeating-seq several times on the same generated sequence?"><a href="#t1512170663000353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:24:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So you&apos;d use take-repeating-seq several times on the same generated sequence?</span></div><div id="t1512171270000248" t="2017-12-01 23:34:30 johanatan yea"><a href="#t1512171270000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:34:30</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>yea</span></div><div id="t1512171426000031" t="2017-12-01 23:37:06 gfredericks You just don&apos;t know how many times you need to it until you&apos;re doing it?"><a href="#t1512171426000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:37:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You just don&apos;t know how many times you need to it until you&apos;re doing it?</span></div><div id="t1512171529000009" t="2017-12-01 23:38:49 johanatan mm, well actually i&apos;ve restructured the code since i did that so haven&apos;t had to use it yet. but i see it as a sort of escape hatch if one gets too deep"><a href="#t1512171529000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:38:49</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>mm, well actually i&apos;ve restructured the code since i did that so haven&apos;t had to use it yet. but i see it as a sort of escape hatch if one gets too deep</span></div><div id="t1512171685000167" t="2017-12-01 23:41:25 johanatan [of course i could be totally confused  ğŸ™‚  ] i always feel about halfway confused when deep in generator code"><a href="#t1512171685000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-01</span>Â <span class="t" onclick="H(this)">23:41:25</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[of course i could be totally confused </span><b>ğŸ™‚</b><span> ] i always feel about halfway confused when deep in generator code</span></div><div id="t1512173049000108" t="2017-12-02 00:04:09 johanatan the above code is obviously not very efficient given that  drop  is O(n) so yea probably better ways exist"><a href="#t1512173049000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-02</span>Â <span class="t" onclick="H(this)">00:04:09</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>the above code is obviously not very efficient given that </span><code>drop</code><span> is O(n) so yea probably better ways exist</span></div><div id="t1513002293000297" t="2017-12-11 14:24:53 gfredericks Does anybody have opinions about the idea of adding a  generators-2  namespace that attempts to address lots of confusion points and inconsistencies in the current namespace?

I assume one big downside is the new confusion caused by having two namespaces forever"><a href="#t1513002293000297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-11</span>Â <span class="t" onclick="H(this)">14:24:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Does anybody have opinions about the idea of adding a </span><code>generators-2</code><span> namespace that attempts to address lots of confusion points and inconsistencies in the current namespace?

I assume one big downside is the new confusion caused by having two namespaces forever</span></div><div id="t1513002413000777" t="2017-12-11 14:26:53 gfredericks And even more work required for a good release  ğŸ˜•  "><a href="#t1513002413000777" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-11</span>Â <span class="t" onclick="H(this)">14:26:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And even more work required for a good release </span><b>ğŸ˜•</b><span> </span></div><div id="t1513002850000465" t="2017-12-11 14:34:10 alexmiller Maybe start with a list of problems?"><a href="#t1513002850000465" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-11</span>Â <span class="t" onclick="H(this)">14:34:10</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Maybe start with a list of problems?</span></div><div id="t1513003801000834" t="2017-12-11 14:50:01 gfredericks yeah that&apos;s a good idea"><a href="#t1513003801000834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-11</span>Â <span class="t" onclick="H(this)">14:50:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah that&apos;s a good idea</span></div><div id="t1513139670000059" t="2017-12-13 04:34:30 johanatan does anyone know how to diagnose the following error?"><a href="#t1513139670000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span>Â <span class="t" onclick="H(this)">04:34:30</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>does anyone know how to diagnose the following error?</span></div><div id="t1513139740000131" t="2017-12-13 04:35:40 johanatan 1. Unhandled java.lang.IllegalArgumentException
   No implementation of method: :specize* of protocol:
   #&apos;clojure.spec.alpha/Specize found for class: nil

"><a href="#t1513139740000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span>Â <span class="t" onclick="H(this)">04:35:40</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><pre>1. Unhandled java.lang.IllegalArgumentException
   No implementation of method: :specize* of protocol:
   #&apos;clojure.spec.alpha/Specize found for class: nil

</pre></div><div id="t1513139825000002" t="2017-12-13 04:37:05 johanatan [sorry wrong channel. it&apos;s spec related; not test check related]"><a href="#t1513139825000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span>Â <span class="t" onclick="H(this)">04:37:05</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[sorry wrong channel. it&apos;s spec related; not test check related]</span></div><div id="t1513346832000129" t="2017-12-15 14:07:12 gfredericks As suggested, here is a list of problems that make me wonder about creating a  generators-2  namespace:

 https://dev.clojure.org/display/design/Generators+Reboot 

Apparently my original question has already been lost to the black hole of slack, so that&apos;s pretty good."><a href="#t1513346832000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span>Â <span class="t" onclick="H(this)">14:07:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>As suggested, here is a list of problems that make me wonder about creating a </span><code>generators-2</code><span> namespace:

</span><a href="https://dev.clojure.org/display/design/Generators+Reboot" target="_blank">https://dev.clojure.org/display/design/Generators+Reboot</a><span>

Apparently my original question has already been lost to the black hole of slack, so that&apos;s pretty good.</span></div><div id="t1516279476000233" t="2018-01-18 12:44:36 gfredericks I reverted the changed that added map-bindings to  gen/let"><a href="#t1516279476000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-18</span>Â <span class="t" onclick="H(this)">12:44:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I reverted the changed that added map-bindings to </span><code>gen/let</code></div><div id="t1516986281000082" t="2018-01-26 17:04:41 ghadi @gfredericks can you check in a deps.edn ?"><a href="#t1516986281000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:04:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>@gfredericks can you check in a deps.edn ?</span></div><div id="t1516986298000453" t="2018-01-26 17:04:58 ghadi I&apos;d like to use test.check directly from git"><a href="#t1516986298000453" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:04:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>I&apos;d like to use test.check directly from git</span></div><div id="t1516987345000842" t="2018-01-26 17:22:25 ghadi {:paths [&quot;src/main/clojure&quot;]
 :aliases {:test {:extra-paths [&quot;src/test/clojure&quot;]}}}
"><a href="#t1516987345000842" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:22:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><pre>{:paths [&quot;src/main/clojure&quot;]
 :aliases {:test {:extra-paths [&quot;src/test/clojure&quot;]}}}
</pre></div><div id="t1516987895000038" t="2018-01-26 17:31:35 alexmiller You donâ€™t need one"><a href="#t1516987895000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:31:35</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>You donâ€™t need one</span></div><div id="t1516987902000791" t="2018-01-26 17:31:42 alexmiller We support Pom manifests now"><a href="#t1516987902000791" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:31:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>We support Pom manifests now</span></div><div id="t1516987920000650" t="2018-01-26 17:32:00 alexmiller Although I guess youâ€™re missing :paths"><a href="#t1516987920000650" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:32:00</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Although I guess youâ€™re missing :paths</span></div><div id="t1516987925000525" t="2018-01-26 17:32:05 alexmiller Unfortunate"><a href="#t1516987925000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:32:05</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Unfortunate</span></div><div id="t1516987962000383" t="2018-01-26 17:32:42 alexmiller Iâ€™m going to add src/main/clojure automatically I think - then you wonâ€™t need one"><a href="#t1516987962000383" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">17:32:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Iâ€™m going to add src/main/clojure automatically I think - then you wonâ€™t need one</span></div><div id="t1516991811000508" t="2018-01-26 18:36:51 ghadi Fancy"><a href="#t1516991811000508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">18:36:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Fancy</span></div><div id="t1516991852000809" t="2018-01-26 18:37:32 ghadi We&apos;re beating Maven at its own game @alexmiller"><a href="#t1516991852000809" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-26</span>Â <span class="t" onclick="H(this)">18:37:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>We&apos;re beating Maven at its own game @alexmiller</span></div><div id="t1517020336000022" t="2018-01-27 02:32:16 gfredericks huhwhat?"><a href="#t1517020336000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-27</span>Â <span class="t" onclick="H(this)">02:32:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>huhwhat?</span></div><div id="t1517020351000087" t="2018-01-27 02:32:31 gfredericks like  src/main/clojure  is always on the path for every project and you can&apos;t turn it off?"><a href="#t1517020351000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-27</span>Â <span class="t" onclick="H(this)">02:32:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>like </span><code>src/main/clojure</code><span> is always on the path for every project and you can&apos;t turn it off?</span></div><div id="t1517056276000018" t="2018-01-27 12:31:16 alexmiller Just for git and local deps with a Pom manifest"><a href="#t1517056276000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-27</span>Â <span class="t" onclick="H(this)">12:31:16</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Just for git and local deps with a Pom manifest</span></div><div id="t1518058632000265" t="2018-02-08 02:57:12 wilkerlucio hello, I&apos;m trying to limit the recursion of a generator, the problem is that the recursion is not &quot;direct&quot;, it generates something, that generates something else, and ends up in circle, but this kind of recursion seems to not be detected by test.check recursion limit"><a href="#t1518058632000265" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:57:12</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>hello, I&apos;m trying to limit the recursion of a generator, the problem is that the recursion is not &quot;direct&quot;, it generates something, that generates something else, and ends up in circle, but this kind of recursion seems to not be detected by test.check recursion limit</span></div><div id="t1518058663000195" t="2018-02-08 02:57:43 wilkerlucio I was thinking about using some dynamic var to track how many times my generator was called, and stop if goes after a number in a call stack"><a href="#t1518058663000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:57:43</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>I was thinking about using some dynamic var to track how many times my generator was called, and stop if goes after a number in a call stack</span></div><div id="t1518058703000171" t="2018-02-08 02:58:23 wilkerlucio I was trying something like this:"><a href="#t1518058703000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:58:23</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>I was trying something like this:</span></div><div id="t1518058704000299" t="2018-02-08 02:58:24 wilkerlucio (s/def ::query-root
  (s/coll-of ::query-expr-root :kind vector?
    :gen #(if (&gt; *max-depth* 0)
            (binding [*max-depth* (dec *max-depth*)]
              (s/gen (s/coll-of ::query-expr-root :kind vector? :max-count 5)))
            (s/gen #{[]}))))"><a href="#t1518058704000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:58:24</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><pre>(s/def ::query-root
  (s/coll-of ::query-expr-root :kind vector?
    :gen #(if (&gt; *max-depth* 0)
            (binding [*max-depth* (dec *max-depth*)]
              (s/gen (s/coll-of ::query-expr-root :kind vector? :max-count 5)))
            (s/gen #{[]}))))</pre></div><div id="t1518058726000032" t="2018-02-08 02:58:46 wilkerlucio but this doesn&apos;t work, because the binding is running on the generator definition, and not when the actual gen is running"><a href="#t1518058726000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:58:46</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>but this doesn&apos;t work, because the binding is running on the generator definition, and not when the actual gen is running</span></div><div id="t1518058744000121" t="2018-02-08 02:59:04 wilkerlucio I was trying to find a way to wrap some generator with this logic, but can&apos;t figure how to hook it up"><a href="#t1518058744000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:59:04</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>I was trying to find a way to wrap some generator with this logic, but can&apos;t figure how to hook it up</span></div><div id="t1518058773000020" t="2018-02-08 02:59:33 wilkerlucio how can I make this? because otherwise my generator fail about 80% of the time because of stack overflow =/"><a href="#t1518058773000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">02:59:33</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>how can I make this? because otherwise my generator fail about 80% of the time because of stack overflow =/</span></div><div id="t1518100258000394" t="2018-02-08 14:30:58 gfredericks by &quot;test.check recursion limit&quot; you&apos;re referring to the mechanism in clojure.spec that&apos;s used when generating generators?"><a href="#t1518100258000394" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">14:30:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>by &quot;test.check recursion limit&quot; you&apos;re referring to the mechanism in clojure.spec that&apos;s used when generating generators?</span></div><div id="t1518100313000036" t="2018-02-08 14:31:53 gfredericks have you tried expressing the generator for the whole thing using  gen/recursive-gen ?"><a href="#t1518100313000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-08</span>Â <span class="t" onclick="H(this)">14:31:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>have you tried expressing the generator for the whole thing using </span><code>gen/recursive-gen</code><span>?</span></div><div id="t1518135296000060" t="2018-02-09 00:14:56 wilkerlucio @gfredericks sorry the delay, I&apos;m not sure I can use recursive-gen on this case"><a href="#t1518135296000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:14:56</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>@gfredericks sorry the delay, I&apos;m not sure I can use recursive-gen on this case</span></div><div id="t1518135300000028" t="2018-02-09 00:15:00 wilkerlucio but I was able to make it work"><a href="#t1518135300000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:15:00</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>but I was able to make it work</span></div><div id="t1518135319000370" t="2018-02-09 00:15:19 wilkerlucio this how it ended up:"><a href="#t1518135319000370" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:15:19</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>this how it ended up:</span></div><div id="t1518135322000224" t="2018-02-09 00:15:22 wilkerlucio (s/def ::query
  (s/coll-of ::query-expr :kind vector?
    :gen #(let [g (s/gen (s/coll-of ::query-expr :kind vector? :max-count 5))]
            (gen/-&gt;Generator
              (fn [rdn size]
                (if (&gt; *query-gen-max-depth* 0)
                  (binding [*query-gen-max-depth* (dec *query-gen-max-depth*)]
                    (gen/call-gen g rdn size))
                  (gen/call-gen (gen/return []) rdn size)))))))"><a href="#t1518135322000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:15:22</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><pre>(s/def ::query
  (s/coll-of ::query-expr :kind vector?
    :gen #(let [g (s/gen (s/coll-of ::query-expr :kind vector? :max-count 5))]
            (gen/-&gt;Generator
              (fn [rdn size]
                (if (&gt; *query-gen-max-depth* 0)
                  (binding [*query-gen-max-depth* (dec *query-gen-max-depth*)]
                    (gen/call-gen g rdn size))
                  (gen/call-gen (gen/return []) rdn size)))))))</pre></div><div id="t1518135351000312" t="2018-02-09 00:15:51 wilkerlucio this limits the depth of the generator by using a dynamic var, was the best solution I could find"><a href="#t1518135351000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:15:51</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>this limits the depth of the generator by using a dynamic var, was the best solution I could find</span></div><div id="t1518135609000252" t="2018-02-09 00:20:09 gfredericks yeah, I think it&apos;s technically possible with recursive-gen but maybe not easy

would definitely be better for spec to handle it without error"><a href="#t1518135609000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-09</span>Â <span class="t" onclick="H(this)">00:20:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah, I think it&apos;s technically possible with recursive-gen but maybe not easy

would definitely be better for spec to handle it without error</span></div><div id="t1519409150000376" t="2018-02-23 18:05:50 pablore Hi, how can I make a generator for a  clojure.lang.PersistentQueue ?"><a href="#t1519409150000376" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-23</span>Â <span class="t" onclick="H(this)">18:05:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>Hi, how can I make a generator for a </span><code>clojure.lang.PersistentQueue</code><span>?</span></div><div id="t1519409640000736" t="2018-02-23 18:14:00 pablore Already did it:
 (defn gen-queue
  [some-generator]
  (gen/bind  (gen/vector some-generator))
                     #(into (clojure.lang.PersistentQueue/EMPTY) %)))))
"><a href="#t1519409640000736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-23</span>Â <span class="t" onclick="H(this)">18:14:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>Already did it:
</span><pre>(defn gen-queue
  [some-generator]
  (gen/bind  (gen/vector some-generator))
                     #(into (clojure.lang.PersistentQueue/EMPTY) %)))))
</pre></div><div id="t1519410587000509" t="2018-02-23 18:29:47 gfredericks That shouldn&apos;t work"><a href="#t1519410587000509" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-23</span>Â <span class="t" onclick="H(this)">18:29:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That shouldn&apos;t work</span></div><div id="t1519410616000272" t="2018-02-23 18:30:16 gfredericks Should have to switch bind to fmap and swap the arg order"><a href="#t1519410616000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-02-23</span>Â <span class="t" onclick="H(this)">18:30:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Should have to switch bind to fmap and swap the arg order</span></div><div id="t1520271852000692" t="2018-03-05 17:44:12 ghadi @gfredericks what&apos;s going on with  https://dev.clojure.org/jira/browse/TCHECK-2  ? we just got bit by that"><a href="#t1520271852000692" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:44:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>@gfredericks what&apos;s going on with </span><a href="https://dev.clojure.org/jira/browse/TCHECK-2" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-2</a><span> ? we just got bit by that</span></div><div id="t1520271918000448" t="2018-03-05 17:45:18 gfredericks what&apos;s a good solution w.r.t. not breaking things? deprecate the old poorly named things and make new things with good names?"><a href="#t1520271918000448" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:45:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what&apos;s a good solution w.r.t. not breaking things? deprecate the old poorly named things and make new things with good names?</span></div><div id="t1520272088000443" t="2018-03-05 17:48:08 ghadi i guess i&apos;m confused on how it&apos;s poorly named vs broken"><a href="#t1520272088000443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:48:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>i guess i&apos;m confused on how it&apos;s poorly named vs broken</span></div><div id="t1520272127000834" t="2018-03-05 17:48:47 ghadi (pos-int? 0) =&gt; false"><a href="#t1520272127000834" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:48:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>(pos-int? 0) =&gt; false</span></div><div id="t1520272203000156" t="2018-03-05 17:50:03 ghadi IIRC it just so happens that spec filters out by doing (such-that pos-int? gen/pos-int) -- but if you use test.check directly you&apos;ll see 0"><a href="#t1520272203000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:50:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>IIRC it just so happens that spec filters out by doing (such-that pos-int? gen/pos-int) -- but if you use test.check directly you&apos;ll see 0</span></div><div id="t1520272542000105" t="2018-03-05 17:55:42 ghadi yeah:

 user&gt; (clojure.spec.gen.alpha/sample (clojure.spec.alpha/gen pos-int?))

(1 1 1 4 2 4 31 1 8 4)

user&gt; (clojure.test.check.generators/sample clojure.test.check.generators/pos-int)

(0 0 1 1 0 5 1 2 1 4)

"><a href="#t1520272542000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">17:55:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>yeah:

</span><pre>user&gt; (clojure.spec.gen.alpha/sample (clojure.spec.alpha/gen pos-int?))

(1 1 1 4 2 4 31 1 8 4)

user&gt; (clojure.test.check.generators/sample clojure.test.check.generators/pos-int)

(0 0 1 1 0 5 1 2 1 4)

</pre></div><div id="t1520273762000473" t="2018-03-05 18:16:02 gfredericks I think it was always a case of a bad name; I have no idea where those names came from, but I think the docstrings have reflected the actual behavior"><a href="#t1520273762000473" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:16:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think it was always a case of a bad name; I have no idea where those names came from, but I think the docstrings have reflected the actual behavior</span></div><div id="t1520273781000489" t="2018-03-05 18:16:21 gfredericks so changing the behavior &amp; docstrings to match the names would potentially break anybody using them"><a href="#t1520273781000489" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:16:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so changing the behavior &amp; docstrings to match the names would potentially break anybody using them</span></div><div id="t1520273790000455" t="2018-03-05 18:16:30 ghadi ugh"><a href="#t1520273790000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:16:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>ugh</span></div><div id="t1520273802000543" t="2018-03-05 18:16:42 ghadi what does the s in s-pos-int mean?"><a href="#t1520273802000543" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:16:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>what does the s in s-pos-int mean?</span></div><div id="t1520273830000455" t="2018-03-05 18:17:10 gfredericks &quot;strictly&quot; -- which points even more strongly to the bad names theory"><a href="#t1520273830000455" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:17:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&quot;strictly&quot; -- which points even more strongly to the bad names theory</span></div><div id="t1520273842000657" t="2018-03-05 18:17:22 ghadi lmao"><a href="#t1520273842000657" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:17:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>lmao</span></div><div id="t1520273895000090" t="2018-03-05 18:18:15 gfredericks there&apos;s a relevant section on integer generators here:  https://dev.clojure.org/display/design/Generators+Reboot"><a href="#t1520273895000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:18:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a relevant section on integer generators here: </span><a href="https://dev.clojure.org/display/design/Generators+Reboot" target="_blank">https://dev.clojure.org/display/design/Generators+Reboot</a></div><div id="t1520273922000296" t="2018-03-05 18:18:42 ghadi i see"><a href="#t1520273922000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:18:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>i see</span></div><div id="t1520274133000561" t="2018-03-05 18:22:13 ghadi in rich&apos;s compatibility algebra of provides and requires -- is not returning 0 a breaking change? Is it possible that certain random seeds never see 0?"><a href="#t1520274133000561" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:22:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>in rich&apos;s compatibility algebra of provides and requires -- is not returning 0 a breaking change? Is it possible that certain random seeds never see 0?</span></div><div id="t1520274164000606" t="2018-03-05 18:22:44 gfredericks I&apos;ve wondered about how the compatibility algebra applies to generators and distributions  ğŸ˜„"><a href="#t1520274164000606" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:22:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve wondered about how the compatibility algebra applies to generators and distributions </span><b>ğŸ˜„</b></div><div id="t1520274197000151" t="2018-03-05 18:23:17 gfredericks I do think reducing the distribution is a breaking thing"><a href="#t1520274197000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:23:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I do think reducing the distribution is a breaking thing</span></div><div id="t1520274205000763" t="2018-03-05 18:23:25 gfredericks you&apos;re silently causing users&apos; generators to test less than they used to"><a href="#t1520274205000763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:23:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you&apos;re silently causing users&apos; generators to test less than they used to</span></div><div id="t1520274212000584" t="2018-03-05 18:23:32 ghadi my 2c: this generator is busted and it&apos;s not that big of a deal to remove 0.

(There is an argument around people relying on behavior whether correct or not)"><a href="#t1520274212000584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:23:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>my 2c: this generator is busted and it&apos;s not that big of a deal to remove 0.

(There is an argument around people relying on behavior whether correct or not)</span></div><div id="t1520274251000800" t="2018-03-05 18:24:11 ghadi i can be persuaded either way -- but not for a crappy name like s-pos-int"><a href="#t1520274251000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:24:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>i can be persuaded either way -- but not for a crappy name like s-pos-int</span></div><div id="t1520274354000848" t="2018-03-05 18:25:54 gfredericks no I don&apos;t think &quot;leave everything as-is&quot; is a good solution"><a href="#t1520274354000848" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:25:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no I don&apos;t think &quot;leave everything as-is&quot; is a good solution</span></div><div id="t1520274399000525" t="2018-03-05 18:26:39 gfredericks given zero is such an important edge case a lot of the time, silently making people&apos;s tests less effective is also a bad idea I think"><a href="#t1520274399000525" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:26:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>given zero is such an important edge case a lot of the time, silently making people&apos;s tests less effective is also a bad idea I think</span></div><div id="t1520274448000597" t="2018-03-05 18:27:28 gfredericks I think the bigger question that needs deciding is the one from the link above -- whether to start a new namespace or improve things by deprecating individual generators"><a href="#t1520274448000597" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:27:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the bigger question that needs deciding is the one from the link above -- whether to start a new namespace or improve things by deprecating individual generators</span></div><div id="t1520274467000699" t="2018-03-05 18:27:47 gfredericks I feel like rich&apos;s paradigm could use some good deprecation tooling"><a href="#t1520274467000699" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">18:27:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I feel like rich&apos;s paradigm could use some good deprecation tooling</span></div><div id="t1520277275000603" t="2018-03-05 19:14:35 gfredericks woah the spec alias of the exact same name has different behavior?"><a href="#t1520277275000603" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:14:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>woah the spec alias of the exact same name has different behavior?</span></div><div id="t1520277285000260" t="2018-03-05 19:14:45 gfredericks gee willickers"><a href="#t1520277285000260" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:14:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gee willickers</span></div><div id="t1520277531000263" t="2018-03-05 19:18:51 ghadi yup"><a href="#t1520277531000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:18:51</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>yup</span></div><div id="t1520277563000133" t="2018-03-05 19:19:23 ghadi maybe we should ask Rich on the mailing list"><a href="#t1520277563000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:19:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>maybe we should ask Rich on the mailing list</span></div><div id="t1520277710000537" t="2018-03-05 19:21:50 gfredericks about deprecation or about generator aliasing?"><a href="#t1520277710000537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:21:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>about deprecation or about generator aliasing?</span></div><div id="t1520277816000082" t="2018-03-05 19:23:36 ghadi The former"><a href="#t1520277816000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:23:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>The former</span></div><div id="t1520278170000160" t="2018-03-05 19:29:30 gfredericks like whether deprecation is a good idea at all, or the specific question of how we should do it exactly?"><a href="#t1520278170000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:29:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>like whether deprecation is a good idea at all, or the specific question of how we should do it exactly?</span></div><div id="t1520278451000189" t="2018-03-05 19:34:11 ghadi what to do specifically"><a href="#t1520278451000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:34:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>what to do specifically</span></div><div id="t1520278465000091" t="2018-03-05 19:34:25 ghadi need a third set of eyes"><a href="#t1520278465000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-05</span>Â <span class="t" onclick="H(this)">19:34:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>need a third set of eyes</span></div><div id="t1522363870000138" t="2018-03-29 22:51:10 grumplet Is there a reasonably simple way to implement generative tests on an async function? It looks like this might be impossible without reimplementing test.check or clojure.spec.test.alpha/check?"><a href="#t1522363870000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">22:51:10</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>Is there a reasonably simple way to implement generative tests on an async function? It looks like this might be impossible without reimplementing test.check or clojure.spec.test.alpha/check?</span></div><div id="t1522364908000242" t="2018-03-29 23:08:28 hiredman it depends how you do your async functioning"><a href="#t1522364908000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:08:28</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>it depends how you do your async functioning</span></div><div id="t1522364962000323" t="2018-03-29 23:09:22 hiredman if you just call async functions with abandon, it is hard, if create a an Executor that you can shutdown and run them on that Executor it is pretty easy"><a href="#t1522364962000323" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:09:22</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>if you just call async functions with abandon, it is hard, if create a an Executor that you can shutdown and run them on that Executor it is pretty easy</span></div><div id="t1522365128000242" t="2018-03-29 23:12:08 hiredman basically, if you can put a function like interface on it, it doesn&apos;t matter if internally it does stuff asynchronously"><a href="#t1522365128000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:12:08</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>basically, if you can put a function like interface on it, it doesn&apos;t matter if internally it does stuff asynchronously</span></div><div id="t1522365667000119" t="2018-03-29 23:21:07 gfredericks For cljs it&apos;s impossible"><a href="#t1522365667000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:21:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>For cljs it&apos;s impossible</span></div><div id="t1522365759000022" t="2018-03-29 23:22:39 grumplet @gfredericks That&apos;s the conclusion I was coming to  ğŸ˜"><a href="#t1522365759000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:22:39</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>@gfredericks That&apos;s the conclusion I was coming to </span><b>ğŸ˜</b></div><div id="t1522365818000014" t="2018-03-29 23:23:38 gfredericks Yeah, it will take some work to add that"><a href="#t1522365818000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:23:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah, it will take some work to add that</span></div><div id="t1522365827000206" t="2018-03-29 23:23:47 gfredericks Definitely a priority"><a href="#t1522365827000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:23:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Definitely a priority</span></div><div id="t1522365843000152" t="2018-03-29 23:24:03 grumplet I&apos;m trying to test a remote call to R against a cljs call which should return the same values and was hoping to get test.check  style behaviour."><a href="#t1522365843000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:24:03</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>I&apos;m trying to test a remote call to R against a cljs call which should return the same values and was hoping to get test.check  style behaviour.</span></div><div id="t1522365865000133" t="2018-03-29 23:24:25 gfredericks remote call = ajax?"><a href="#t1522365865000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:24:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>remote call = ajax?</span></div><div id="t1522365869000091" t="2018-03-29 23:24:29 grumplet yep"><a href="#t1522365869000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:24:29</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>yep</span></div><div id="t1522365986000287" t="2018-03-29 23:26:26 gfredericks A couple heavy workarounds: test from clj, either by rewriting your logic in cljc or shelling out to node"><a href="#t1522365986000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:26:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>A couple heavy workarounds: test from clj, either by rewriting your logic in cljc or shelling out to node</span></div><div id="t1522365999000243" t="2018-03-29 23:26:39 gfredericks Neither of those are nice obviously"><a href="#t1522365999000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:26:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Neither of those are nice obviously</span></div><div id="t1522366047000065" t="2018-03-29 23:27:27 grumplet Interesting idea though. I suspect the stats model would port to clj without too many problems."><a href="#t1522366047000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:27:27</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>Interesting idea though. I suspect the stats model would port to clj without too many problems.</span></div><div id="t1522366081000248" t="2018-03-29 23:28:01 grumplet Thanks - I&apos;ll think about that approach."><a href="#t1522366081000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-03-29</span>Â <span class="t" onclick="H(this)">23:28:01</span>Â Â Â Â Â Â Â Â Â Â Â Â grumpletÂ </span><span>Thanks - I&apos;ll think about that approach.</span></div><div id="t1523220435000027" t="2018-04-08 20:47:15 gfredericks Would it be possible to have a generic test assertions library that plugs into both test.check and clojure.test and other testing libraries?"><a href="#t1523220435000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-08</span>Â <span class="t" onclick="H(this)">20:47:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Would it be possible to have a generic test assertions library that plugs into both test.check and clojure.test and other testing libraries?</span></div><div id="t1523220487000066" t="2018-04-08 20:48:07 gfredericks test.check and clojure.test both have an impoverishment of assertions, where testing-specific assertions are needed so that specific feedback can be given to the user about how it failed"><a href="#t1523220487000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-08</span>Â <span class="t" onclick="H(this)">20:48:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.check and clojure.test both have an impoverishment of assertions, where testing-specific assertions are needed so that specific feedback can be given to the user about how it failed</span></div><div id="t1523220510000107" t="2018-04-08 20:48:30 gfredericks and it would be sad for that problem to be addressed in one library without the other"><a href="#t1523220510000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-08</span>Â <span class="t" onclick="H(this)">20:48:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and it would be sad for that problem to be addressed in one library without the other</span></div><div id="t1523376249000063" t="2018-04-10 16:04:09 Joe Lane Is there an api in test.check to get the collection of inputs and outputs used when exercising a test?
For example, when running
 (defspec first-element-is-min-after-sorting ;; the name of the test
         100 ;; the number of iterations for test.check to test
         (prop/for-all [v (gen/not-empty (gen/vector gen/int))]
           (= (apply min v)
              (first (sort v)))))
 
getting a collection of 
 ({:input [1] :output [1]},
 {:input [2 1] :output [1 2]}
 ...
 

I suspect it the data Iâ€™m looking for is  :args  and  :result-data  or  :result  from the  quickcheck  function in  check.cljc . 
Is there a blessed way to get access to this information?"><a href="#t1523376249000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:04:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>Is there an api in test.check to get the collection of inputs and outputs used when exercising a test?
For example, when running
</span><pre>(defspec first-element-is-min-after-sorting ;; the name of the test
         100 ;; the number of iterations for test.check to test
         (prop/for-all [v (gen/not-empty (gen/vector gen/int))]
           (= (apply min v)
              (first (sort v)))))
</pre><span>
getting a collection of 
</span><pre>({:input [1] :output [1]},
 {:input [2 1] :output [1 2]}
 ...
</pre><span>

I suspect it the data Iâ€™m looking for is </span><code>:args</code><span> and </span><code>:result-data</code><span> or </span><code>:result</code><span> from the </span><code>quickcheck</code><span> function in </span><code>check.cljc</code><span>. 
Is there a blessed way to get access to this information?</span></div><div id="t1523376663000820" t="2018-04-10 16:11:03 ghadi you can recreate it using the random seed that quickcheck gives you"><a href="#t1523376663000820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:11:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>you can recreate it using the random seed that quickcheck gives you</span></div><div id="t1523377244000479" t="2018-04-10 16:20:44 Joe Lane @ghadi I can get the data literals using the seed? I know I can re-run the test again, iâ€™m curious about the data itself though"><a href="#t1523377244000479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:20:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>@ghadi I can get the data literals using the seed? I know I can re-run the test again, iâ€™m curious about the data itself though</span></div><div id="t1523377297000006" t="2018-04-10 16:21:37 ghadi right, I&apos;m not sure the exact process"><a href="#t1523377297000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:21:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>right, I&apos;m not sure the exact process</span></div><div id="t1523377313000198" t="2018-04-10 16:21:53 ghadi the seed is there so that you can get reproducibility"><a href="#t1523377313000198" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:21:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>the seed is there so that you can get reproducibility</span></div><div id="t1523377499000327" t="2018-04-10 16:24:59 nberger @lanejo01 may I ask what do you plan to do with that data? I&apos;m truly curious, mostly because a while ago I wanted to add a way to get a glimpse on what&apos;s the distribution of the generated values"><a href="#t1523377499000327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:24:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â nbergerÂ </span><span>@lanejo01 may I ask what do you plan to do with that data? I&apos;m truly curious, mostly because a while ago I wanted to add a way to get a glimpse on what&apos;s the distribution of the generated values</span></div><div id="t1523377973000097" t="2018-04-10 16:32:53 gfredericks args is the generated data"><a href="#t1523377973000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:32:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>args is the generated data</span></div><div id="t1523378016000530" t="2018-04-10 16:33:36 gfredericks The return value isn&apos;t given, you can just call your function yourself once you have the args"><a href="#t1523378016000530" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:33:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The return value isn&apos;t given, you can just call your function yourself once you have the args</span></div><div id="t1523378059000385" t="2018-04-10 16:34:19 ghadi @gfredericks can you do something like  sample-seq  while providing the seed?"><a href="#t1523378059000385" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:34:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>@gfredericks can you do something like </span><code>sample-seq</code><span> while providing the seed?</span></div><div id="t1523380013000736" t="2018-04-10 17:06:53 gfredericks It could exist, but might not be immediately useful since you couldn&apos;t easily pick out the failing args. Do you have another use case?"><a href="#t1523380013000736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">17:06:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It could exist, but might not be immediately useful since you couldn&apos;t easily pick out the failing args. Do you have another use case?</span></div><div id="t1523378085000233" t="2018-04-10 16:34:45 Joe Lane I had another instance of a recurring dream last night. The word cloud looks like this: clojure.spec generative testing + consumer driven contracts (like  http://pact.io ) except for libraries, not web apis + spec-ish type-system-ish code inspection/analysis (e.g.  (-&gt; (makes-random-int) expects-only-odds)  would be analyzed and the system would show there is a problem) + service for publishing specs to a public repository. 

The big thing here is consumer driven contracts for function apis. A library author could know the expectations of its consumers based on properties they provide, and then know if they make a breaking change or not."><a href="#t1523378085000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:34:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>I had another instance of a recurring dream last night. The word cloud looks like this: clojure.spec generative testing + consumer driven contracts (like </span><a href="http://pact.io" target="_blank">http://pact.io</a><span>) except for libraries, not web apis + spec-ish type-system-ish code inspection/analysis (e.g. </span><code>(-&gt; (makes-random-int) expects-only-odds)</code><span> would be analyzed and the system would show there is a problem) + service for publishing specs to a public repository. 

The big thing here is consumer driven contracts for function apis. A library author could know the expectations of its consumers based on properties they provide, and then know if they make a breaking change or not.</span></div><div id="t1523378119000754" t="2018-04-10 16:35:19 Joe Lane There are a LOT of conflated ideas here, please dont take this as a proper description of all goals."><a href="#t1523378119000754" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:35:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>There are a LOT of conflated ideas here, please dont take this as a proper description of all goals.</span></div><div id="t1523378353000016" t="2018-04-10 16:39:13 Joe Lane I suppose the ideas are 1. consumer driven contracts for public library functions 2. analysis of clojure programs using spec to determine areas for potential bugs 3. maven for specs."><a href="#t1523378353000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:39:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>I suppose the ideas are 1. consumer driven contracts for public library functions 2. analysis of clojure programs using spec to determine areas for potential bugs 3. maven for specs.</span></div><div id="t1523378435000586" t="2018-04-10 16:40:35 Joe Lane The reason Iâ€™m asking is about inputs and outputs is to create a system like haskellâ€™s hoogle ( https://www.haskell.org/hoogle/ ) with spec."><a href="#t1523378435000586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:40:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>The reason Iâ€™m asking is about inputs and outputs is to create a system like haskellâ€™s hoogle (</span><a href="https://www.haskell.org/hoogle/" target="_blank">https://www.haskell.org/hoogle/</a><span>) with spec.</span></div><div id="t1523378487000801" t="2018-04-10 16:41:27 Joe Lane Thanks @gfredericks!"><a href="#t1523378487000801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:41:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>Thanks @gfredericks!</span></div><div id="t1523379312000535" t="2018-04-10 16:55:12 grzm @lanejo01 The way something like that could work is if consumers published specs that the upstream author could consume, and those specs would have to be more constrained versions of the specs the author already publishes. The upstream author could swap those more specialized specs in their own tests. That reminds me of &quot;specialization by constraint&quot; in Date and Darwen&apos;s &quot;Databases, Types, and the Relational Model&quot;. I&apos;m not well-versed in type-theory in general, so it might have other names, but that&apos;s where I came across it."><a href="#t1523379312000535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:55:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grzmÂ </span><span>@lanejo01 The way something like that could work is if consumers published specs that the upstream author could consume, and those specs would have to be more constrained versions of the specs the author already publishes. The upstream author could swap those more specialized specs in their own tests. That reminds me of &quot;specialization by constraint&quot; in Date and Darwen&apos;s &quot;Databases, Types, and the Relational Model&quot;. I&apos;m not well-versed in type-theory in general, so it might have other names, but that&apos;s where I came across it.</span></div><div id="t1523379388000625" t="2018-04-10 16:56:28 grzm The idea there is that any proper subtype is only a subtype if it satisfies the definition of its parent type plus some additional specialization constraint."><a href="#t1523379388000625" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:56:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grzmÂ </span><span>The idea there is that any proper subtype is only a subtype if it satisfies the definition of its parent type plus some additional specialization constraint.</span></div><div id="t1523379431000052" t="2018-04-10 16:57:11 Joe Lane Thatâ€™s exactly how  http://pact.io  does it, except with json and regex, not something more expressive like spec + edn."><a href="#t1523379431000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">16:57:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>Thatâ€™s exactly how </span><a href="http://pact.io" target="_blank">http://pact.io</a><span> does it, except with json and regex, not something more expressive like spec + edn.</span></div><div id="t1523379704000333" t="2018-04-10 17:01:44 grzm How would &quot;maven for specs&quot; be different from maven (or similar tool) in general? Specs are code and just like when you use a library, you still need to know the names of the functions (or specs) once you have it."><a href="#t1523379704000333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">17:01:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â grzmÂ </span><span>How would &quot;maven for specs&quot; be different from maven (or similar tool) in general? Specs are code and just like when you use a library, you still need to know the names of the functions (or specs) once you have it.</span></div><div id="t1523380426000491" t="2018-04-10 17:13:46 Joe Lane It was a bit of a mischaracterization of what Iâ€™m going after ( which, is admittedly, a moving target). Itâ€™s more about a place for consumer â€œcontractsâ€ to be placed. In addition to that, the idea of a central place that I can look up what functions take this input and produce this output could be really exciting for a variety of reasons. Not so much maven for specs. Sorry for the confusion."><a href="#t1523380426000491" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-10</span>Â <span class="t" onclick="H(this)">17:13:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Joe LaneÂ </span><span>It was a bit of a mischaracterization of what Iâ€™m going after ( which, is admittedly, a moving target). Itâ€™s more about a place for consumer â€œcontractsâ€ to be placed. In addition to that, the idea of a central place that I can look up what functions take this input and produce this output could be really exciting for a variety of reasons. Not so much maven for specs. Sorry for the confusion.</span></div><div id="t1523728339000091" t="2018-04-14 17:52:19 nwjsmith I think I&apos;ve asked this before, but I&apos;m writing some (non-shrinking) generators that rely on generating uniformly random numbers. Is there any way to get a uniformly random number generated?"><a href="#t1523728339000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">17:52:19</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I think I&apos;ve asked this before, but I&apos;m writing some (non-shrinking) generators that rely on generating uniformly random numbers. Is there any way to get a uniformly random number generated?</span></div><div id="t1523728374000051" t="2018-04-14 17:52:54 nwjsmith Are any of the provided generators uniformly random? (i.e.  gen/bytes ?)"><a href="#t1523728374000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">17:52:54</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Are any of the provided generators uniformly random? (i.e. </span><code>gen/bytes</code><span>?)</span></div><div id="t1523728391000024" t="2018-04-14 17:53:11 nwjsmith If so, I might be able to  fmap  my way into a random number"><a href="#t1523728391000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">17:53:11</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>If so, I might be able to </span><code>fmap</code><span> my way into a random number</span></div><div id="t1523728715000107" t="2018-04-14 17:58:35 nwjsmith Err, never mind. I might not want a uniform random number here"><a href="#t1523728715000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">17:58:35</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Err, never mind. I might not want a uniform random number here</span></div><div id="t1523728871000051" t="2018-04-14 18:01:11 gfredericks In any case, gen/choose is such a thing, for smaller ranges"><a href="#t1523728871000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:01:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In any case, gen/choose is such a thing, for smaller ranges</span></div><div id="t1523728886000102" t="2018-04-14 18:01:26 gfredericks I&apos;ve thought about adding something more robust for integers and doubles"><a href="#t1523728886000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:01:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve thought about adding something more robust for integers and doubles</span></div><div id="t1523729174000001" t="2018-04-14 18:06:14 nwjsmith FWIW I&apos;m generating a probability between 0.0 and 1.0, a double."><a href="#t1523729174000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:06:14</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>FWIW I&apos;m generating a probability between 0.0 and 1.0, a double.</span></div><div id="t1523729308000056" t="2018-04-14 18:08:28 gfredericks But not uniform?"><a href="#t1523729308000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:08:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But not uniform?</span></div><div id="t1523729455000122" t="2018-04-14 18:10:55 nwjsmith I don&apos;t think it needs to be. It&apos;s a generator for a graph&apos;s adjacency matrix. It is the probability that one vertex is adjacent to another."><a href="#t1523729455000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:10:55</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I don&apos;t think it needs to be. It&apos;s a generator for a graph&apos;s adjacency matrix. It is the probability that one vertex is adjacent to another.</span></div><div id="t1523729480000091" t="2018-04-14 18:11:20 nwjsmith So an argument could be made that the most simple graph is the fully disconnected one"><a href="#t1523729480000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:11:20</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>So an argument could be made that the most simple graph is the fully disconnected one</span></div><div id="t1523729492000099" t="2018-04-14 18:11:32 nwjsmith (i.e. the probabilities are all 0.0"><a href="#t1523729492000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:11:32</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>(i.e. the probabilities are all 0.0</span></div><div id="t1523729494000033" t="2018-04-14 18:11:34 gfredericks Yeah that makes sense"><a href="#t1523729494000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:11:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah that makes sense</span></div><div id="t1523729518000074" t="2018-04-14 18:11:58 gfredericks I wonder what gen/double does in that range"><a href="#t1523729518000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:11:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I wonder what gen/double does in that range</span></div><div id="t1523729534000088" t="2018-04-14 18:12:14 gfredericks It might bias toward 1 at first"><a href="#t1523729534000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:12:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It might bias toward 1 at first</span></div><div id="t1523729574000048" t="2018-04-14 18:12:54 gfredericks If so you can fmap with #(- 1 %) to get the opposite"><a href="#t1523729574000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:12:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>If so you can fmap with #(- 1 %) to get the opposite</span></div><div id="t1523729682000111" t="2018-04-14 18:14:42 nwjsmith Yeah, with a sample of 1000 I get 101 occurrences of  1.0  and 19 occurrences of  0.0 ."><a href="#t1523729682000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:14:42</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Yeah, with a sample of 1000 I get 101 occurrences of </span><code>1.0</code><span> and 19 occurrences of </span><code>0.0</code><span>.</span></div><div id="t1523729730000054" t="2018-04-14 18:15:30 gfredericks That might be misleading"><a href="#t1523729730000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:15:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That might be misleading</span></div><div id="t1523729757000146" t="2018-04-14 18:15:57 gfredericks fmap to #(long (* 10 %)) and see what you get"><a href="#t1523729757000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:15:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>fmap to #(long (* 10 %)) and see what you get</span></div><div id="t1523729784000070" t="2018-04-14 18:16:24 gfredericks It probably considers 0 and 1 simpler than everything in between"><a href="#t1523729784000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:16:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It probably considers 0 and 1 simpler than everything in between</span></div><div id="t1523729819000092" t="2018-04-14 18:16:59 nwjsmith {1 39, 0 698}"><a href="#t1523729819000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:16:59</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><code>{1 39, 0 698}</code></div><div id="t1523729869000060" t="2018-04-14 18:17:49 gfredericks Nothing from 2 to 10?"><a href="#t1523729869000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:17:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Nothing from 2 to 10?</span></div><div id="t1523729894000069" t="2018-04-14 18:18:14 nwjsmith {0 700, 7 25, 1 39, 4 23, 6 14, 3 26, 2 31, 9 6, 5 36, 10 87, 8 13}"><a href="#t1523729894000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:18:14</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><code>{0 700, 7 25, 1 39, 4 23, 6 14, 3 26, 2 31, 9 6, 5 36, 10 87, 8 13}</code></div><div id="t1523729906000114" t="2018-04-14 18:18:26 nwjsmith Are the full frequencies"><a href="#t1523729906000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:18:26</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Are the full frequencies</span></div><div id="t1523729973000119" t="2018-04-14 18:19:33 gfredericks So mostly 0, because that&apos;s simpler, and next is 1.0, then 0.5, ..."><a href="#t1523729973000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:19:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So mostly 0, because that&apos;s simpler, and next is 1.0, then 0.5, ...</span></div><div id="t1523730041000081" t="2018-04-14 18:20:41 nwjsmith Looks like  gen/double*  will do just fine"><a href="#t1523730041000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:20:41</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Looks like </span><code>gen/double*</code><span> will do just fine</span></div><div id="t1523730464000136" t="2018-04-14 18:27:44 gfredericks Are you actually trying to generate probabilities, or trying to generate the graph itself?"><a href="#t1523730464000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">18:27:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Are you actually trying to generate probabilities, or trying to generate the graph itself?</span></div><div id="t1523735290000034" t="2018-04-14 19:48:10 nwjsmith Generate the graph itself. I generate an adjacency matrix like this:

 [[0.0 0.0 0.0 0.0]
 [P.1 0.0 0.0 0.0]
 [P.2 P.3 0.0 0.0]
 [P.4 P.5 P.6 0.0]]
"><a href="#t1523735290000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:48:10</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Generate the graph itself. I generate an adjacency matrix like this:

</span><pre>[[0.0 0.0 0.0 0.0]
 [P.1 0.0 0.0 0.0]
 [P.2 P.3 0.0 0.0]
 [P.4 P.5 P.6 0.0]]
</pre></div><div id="t1523735358000066" t="2018-04-14 19:49:18 nwjsmith Where  P1 -`P6` are probabilities. This adjacency matrix ends up representing a random DAG."><a href="#t1523735358000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:49:18</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Where </span><code>P1</code><span>-`P6` are probabilities. This adjacency matrix ends up representing a random DAG.</span></div><div id="t1523735430000076" t="2018-04-14 19:50:30 nwjsmith I map this probability matrix into a matrix where the values can be  true /`false` based on whether or not the probability is above  0.5"><a href="#t1523735430000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:50:30</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I map this probability matrix into a matrix where the values can be </span><code>true</code><span>/`false` based on whether or not the probability is above </span><code>0.5</code></div><div id="t1523735599000001" t="2018-04-14 19:53:19 nwjsmith I have another generator that takes a DAG and generates a random topological ordering from it. It&apos;s also based on random number generation using  gen/choose , but the range is small enough that it should be uniform."><a href="#t1523735599000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:53:19</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I have another generator that takes a DAG and generates a random topological ordering from it. It&apos;s also based on random number generation using </span><code>gen/choose</code><span>, but the range is small enough that it should be uniform.</span></div><div id="t1523735862000024" t="2018-04-14 19:57:42 nwjsmith Both are looking good:

 (let [g (gen/generate (gen-directed-acyclic-graph (seq &quot;ABCD&quot;)))
       t (frequencies (gen/sample (gen-topological-ordering g) 1000))]
   (when (not-empty g)
     (println t)
     ( (loom.graph/digraph g))))
 

Produced:  https://www.dropbox.com/s/q0rkqfy7z0vffs6/png223331814782198197.png?dl=0 

and the topological orderings:

 {[C B D A] 122,
 [D B A C] 117,
 [B D A C] 115,
 [D B C A] 127,
 [B D C A] 135,
 [C D B A] 132,
 [D C B A] 137,
 [B C D A] 115}
"><a href="#t1523735862000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:57:42</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>Both are looking good:

</span><pre>(let [g (gen/generate (gen-directed-acyclic-graph (seq &quot;ABCD&quot;)))
       t (frequencies (gen/sample (gen-topological-ordering g) 1000))]
   (when (not-empty g)
     (println t)
     ( (loom.graph/digraph g))))
</pre><span>

Produced: </span><a href="https://www.dropbox.com/s/q0rkqfy7z0vffs6/png223331814782198197.png?dl=0" target="_blank">https://www.dropbox.com/s/q0rkqfy7z0vffs6/png223331814782198197.png?dl=0</a><span>

and the topological orderings:

</span><pre>{[C B D A] 122,
 [D B A C] 117,
 [B D A C] 115,
 [D B C A] 127,
 [B D C A] 135,
 [C D B A] 132,
 [D C B A] 137,
 [B C D A] 115}
</pre></div><div id="t1523735993000084" t="2018-04-14 19:59:53 gfredericks Cool"><a href="#t1523735993000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-14</span>Â <span class="t" onclick="H(this)">19:59:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Cool</span></div><div id="t1523886859000068" t="2018-04-16 13:54:19 ghadi very cool. @nwjsmith could you share your code for the graph or topological-ordering?"><a href="#t1523886859000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span>Â <span class="t" onclick="H(this)">13:54:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>very cool. @nwjsmith could you share your code for the graph or topological-ordering?</span></div><div id="t1523886948000649" t="2018-04-16 13:55:48 nwjsmith @ghadi I&apos;ll try to get a repo up tonight or tomorrow, they should be fairly general-purpose. I&apos;ll ping you here when it&apos;s up"><a href="#t1523886948000649" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-16</span>Â <span class="t" onclick="H(this)">13:55:48</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@ghadi I&apos;ll try to get a repo up tonight or tomorrow, they should be fairly general-purpose. I&apos;ll ping you here when it&apos;s up</span></div><div id="t1523937250000024" t="2018-04-17 03:54:10 mathpunk I was trying to deal with this bug ( https://github.com/clojure-emacs/cider/issues/1841 ), and in investigating it I discovered that  test.check  refers to a namespace that it doesn&apos;t have in the definition of  test-context-stacktrace :  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/clojure_test/assertions.cljc#L12"><a href="#t1523937250000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">03:54:10</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I was trying to deal with this bug (</span><a href="https://github.com/clojure-emacs/cider/issues/1841" target="_blank">https://github.com/clojure-emacs/cider/issues/1841</a><span>), and in investigating it I discovered that </span><code>test.check</code><span> refers to a namespace that it doesn&apos;t have in the definition of </span><code>test-context-stacktrace</code><span>: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/clojure_test/assertions.cljc#L12" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/clojure_test/assertions.cljc#L12</a></div><div id="t1523937307000177" t="2018-04-17 03:55:07 mathpunk I commented that line out, and my problem went away. It&apos;s not clear to me how to contribute or report that so, I&apos;m mentioning it here"><a href="#t1523937307000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">03:55:07</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I commented that line out, and my problem went away. It&apos;s not clear to me how to contribute or report that so, I&apos;m mentioning it here</span></div><div id="t1523937477000104" t="2018-04-17 03:57:57 mathpunk As I look at it more closely, I doubt it&apos;s that exact spot that helped; but, there are definitely several references to a  clojure.test.check.clojure-test  namespace. I see only a  clojure_test  directory, but no namespace"><a href="#t1523937477000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">03:57:57</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>As I look at it more closely, I doubt it&apos;s that exact spot that helped; but, there are definitely several references to a </span><code>clojure.test.check.clojure-test</code><span> namespace. I see only a </span><code>clojure_test</code><span> directory, but no namespace</span></div><div id="t1523938733000141" t="2018-04-17 04:18:53 alexmiller thatâ€™s due to someone monkey-patching clojure.test"><a href="#t1523938733000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:18:53</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>thatâ€™s due to someone monkey-patching clojure.test</span></div><div id="t1523938737000055" t="2018-04-17 04:18:57 alexmiller leiningen does that"><a href="#t1523938737000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:18:57</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>leiningen does that</span></div><div id="t1523938740000130" t="2018-04-17 04:19:00 alexmiller maybe others"><a href="#t1523938740000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:19:00</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>maybe others</span></div><div id="t1523938805000257" t="2018-04-17 04:20:05 alexmiller https://github.com/technomancy/leiningen/issues/2173"><a href="#t1523938805000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:20:05</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><a href="https://github.com/technomancy/leiningen/issues/2173" target="_blank">https://github.com/technomancy/leiningen/issues/2173</a></div><div id="t1523938838000163" t="2018-04-17 04:20:38 alexmiller and  https://dev.clojure.org/jira/browse/TCHECK-113"><a href="#t1523938838000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:20:38</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>and </span><a href="https://dev.clojure.org/jira/browse/TCHECK-113" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-113</a></div><div id="t1523939343000087" t="2018-04-17 04:29:03 mathpunk While I did see this, I don&apos;t quiiiiite know what it means, nor what it implies about my project being a boot project"><a href="#t1523939343000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:29:03</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>While I did see this, I don&apos;t quiiiiite know what it means, nor what it implies about my project being a boot project</span></div><div id="t1523939424000134" t="2018-04-17 04:30:24 mathpunk I&apos;ve heard the term but only the context of 1) Ruby objects and 2) disapproval. Sometimes at once~"><a href="#t1523939424000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:30:24</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I&apos;ve heard the term but only the context of 1) Ruby objects and 2) disapproval. Sometimes at once~</span></div><div id="t1523939535000152" t="2018-04-17 04:32:15 alexmiller well this may be something similar but different, not sure. Leiningen reaches in and replaces the implementation of part of clojure.test, which breaks test.checkâ€™s expectation."><a href="#t1523939535000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:32:15</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>well this may be something similar but different, not sure. Leiningen reaches in and replaces the implementation of part of clojure.test, which breaks test.checkâ€™s expectation.</span></div><div id="t1523939551000120" t="2018-04-17 04:32:31 alexmiller thatâ€™s a pretty dirty trick imo :)"><a href="#t1523939551000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">04:32:31</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>thatâ€™s a pretty dirty trick imo :)</span></div><div id="t1523975968000008" t="2018-04-17 14:39:28 nwjsmith @ghadi  https://github.com/nwjsmith/generators.graph"><a href="#t1523975968000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">14:39:28</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>@ghadi </span><a href="https://github.com/nwjsmith/generators.graph" target="_blank">https://github.com/nwjsmith/generators.graph</a></div><div id="t1523976092000901" t="2018-04-17 14:41:32 ghadi Nice @nwjsmith. That will be very useful, also good learning material."><a href="#t1523976092000901" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">14:41:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Nice @nwjsmith. That will be very useful, also good learning material.</span></div><div id="t1523976160000537" t="2018-04-17 14:42:40 nwjsmith I&apos;ll try to spruce it up a bit this week. I think there&apos;s a ton of performance improvements available too, so I&apos;d like to get some benchmarks around it."><a href="#t1523976160000537" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-17</span>Â <span class="t" onclick="H(this)">14:42:40</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>I&apos;ll try to spruce it up a bit this week. I think there&apos;s a ton of performance improvements available too, so I&apos;d like to get some benchmarks around it.</span></div><div id="t1524254220000585" t="2018-04-20 19:57:00 devn If i want to generate a double with limited precision, how do?"><a href="#t1524254220000585" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">19:57:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â devnÂ </span><span>If i want to generate a double with limited precision, how do?</span></div><div id="t1524254446000130" t="2018-04-20 20:00:46 gfredericks Expressed in base 10 or base 2?"><a href="#t1524254446000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:00:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Expressed in base 10 or base 2?</span></div><div id="t1524254506000618" t="2018-04-20 20:01:46 gfredericks And do you mean precision relative to the fixed decimal point, or in the floating point sense?"><a href="#t1524254506000618" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:01:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And do you mean precision relative to the fixed decimal point, or in the floating point sense?</span></div><div id="t1524254529000338" t="2018-04-20 20:02:09 gfredericks (like is 1e-100 high precision?)"><a href="#t1524254529000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:02:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(like is 1e-100 high precision?)</span></div><div id="t1524254553000230" t="2018-04-20 20:02:33 devn yes, relative to the fixed decimal point"><a href="#t1524254553000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:02:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â devnÂ </span><span>yes, relative to the fixed decimal point</span></div><div id="t1524254555000338" t="2018-04-20 20:02:35 devn base 10"><a href="#t1524254555000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:02:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â devnÂ </span><span>base 10</span></div><div id="t1524254581000475" t="2018-04-20 20:03:01 gfredericks I&apos;d generate an integer and divide it by 100.0 probably"><a href="#t1524254581000475" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:03:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d generate an integer and divide it by 100.0 probably</span></div><div id="t1524254594000029" t="2018-04-20 20:03:14 gfredericks With fmap"><a href="#t1524254594000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:03:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>With fmap</span></div><div id="t1524254594000507" t="2018-04-20 20:03:14 devn thanks @gfredericks"><a href="#t1524254594000507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:03:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â devnÂ </span><span>thanks @gfredericks</span></div><div id="t1524254600000519" t="2018-04-20 20:03:20 gfredericks :+1:"><a href="#t1524254600000519" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:03:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b></div><div id="t1524254632000103" t="2018-04-20 20:03:52 gfredericks Obligatory warning about how doubles can&apos;t precisely represent most of those numbers"><a href="#t1524254632000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-20</span>Â <span class="t" onclick="H(this)">20:03:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Obligatory warning about how doubles can&apos;t precisely represent most of those numbers</span></div><div id="t1524327939000119" t="2018-04-21 16:25:39 mathpunk I found something unclear in the documentation for  test.chuck . I guess it could be a bug but I think it&apos;s more likely I&apos;m holding generators wrong. In particular, I&apos;m trying out the  checking  macro"><a href="#t1524327939000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:25:39</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I found something unclear in the documentation for </span><code>test.chuck</code><span>. I guess it could be a bug but I think it&apos;s more likely I&apos;m holding generators wrong. In particular, I&apos;m trying out the </span><code>checking</code><span> macro</span></div><div id="t1524327992000057" t="2018-04-21 16:26:32 mathpunk When I tested this myself---"><a href="#t1524327992000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:26:32</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>When I tested this myself---</span></div><div id="t1524328164000169" t="2018-04-21 16:29:24 mathpunk So the surprising bit is, why does it work fine if I get my generator with  (s/gen int?)  and fail if I get (what I think is) the same generator via  gen/int ?"><a href="#t1524328164000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:29:24</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>So the surprising bit is, why does it work fine if I get my generator with </span><code>(s/gen int?)</code><span> and fail if I get (what I think is) the same generator via </span><code>gen/int</code><span>?</span></div><div id="t1524328199000014" t="2018-04-21 16:29:59 gfredericks how does it fail?"><a href="#t1524328199000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:29:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>how does it fail?</span></div><div id="t1524328208000011" t="2018-04-21 16:30:08 gfredericks oh sorry"><a href="#t1524328208000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:30:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh sorry</span></div><div id="t1524328213000013" t="2018-04-21 16:30:13 gfredericks only saw the first five lines of the snippet"><a href="#t1524328213000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:30:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>only saw the first five lines of the snippet</span></div><div id="t1524328290000147" t="2018-04-21 16:31:30 gfredericks I&apos;m guessing  gen/  refers to  clojure.spec.gen.alpha  or something of that sort"><a href="#t1524328290000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:31:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m guessing </span><code>gen/</code><span> refers to </span><code>clojure.spec.gen.alpha</code><span> or something of that sort</span></div><div id="t1524328309000091" t="2018-04-21 16:31:49 gfredericks and that this is the inevitable confusion that stems from the fact that spec generally deals with 0-arg functions that return generators"><a href="#t1524328309000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:31:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and that this is the inevitable confusion that stems from the fact that spec generally deals with 0-arg functions that return generators</span></div><div id="t1524328326000032" t="2018-04-21 16:32:06 gfredericks while  http://test.ch[eu]ck  deals with vanilla generators"><a href="#t1524328326000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:32:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>while </span><a href="http://test.ch[eu]ck" target="_blank">http://test.ch[eu]ck</a><span> deals with vanilla generators</span></div><div id="t1524328332000036" t="2018-04-21 16:32:12 gfredericks try  (gen/int)"><a href="#t1524328332000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:32:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>try </span><code>(gen/int)</code></div><div id="t1524328355000157" t="2018-04-21 16:32:35 mathpunk yep, that did it"><a href="#t1524328355000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:32:35</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>yep, that did it</span></div><div id="t1524328425000122" t="2018-04-21 16:33:45 mathpunk i can attempt to fix that doc if you like, though I haven&apos;t forked-and-pulled much open source"><a href="#t1524328425000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:33:45</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>i can attempt to fix that doc if you like, though I haven&apos;t forked-and-pulled much open source</span></div><div id="t1524328462000119" t="2018-04-21 16:34:22 gfredericks which doc?"><a href="#t1524328462000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:34:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which doc?</span></div><div id="t1524328484000144" t="2018-04-21 16:34:44 gfredericks the  checking  docs are referring to the  clojure.test.check.generators  namespace"><a href="#t1524328484000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:34:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the </span><code>checking</code><span> docs are referring to the </span><code>clojure.test.check.generators</code><span> namespace</span></div><div id="t1524328495000118" t="2018-04-21 16:34:55 gfredericks if you used that namespace instead,  gen/int  would work and  (gen/int)  wouldn&apos;t"><a href="#t1524328495000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:34:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you used that namespace instead, </span><code>gen/int</code><span> would work and </span><code>(gen/int)</code><span> wouldn&apos;t</span></div><div id="t1524328642000114" t="2018-04-21 16:37:22 mathpunk I&apos;m looking here:  https://github.com/gfredericks/test.chuck/blob/master/src/com/gfredericks/test/chuck/clojure_test.cljc#L108"><a href="#t1524328642000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:37:22</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I&apos;m looking here: </span><a href="https://github.com/gfredericks/test.chuck/blob/master/src/com/gfredericks/test/chuck/clojure_test.cljc#L108" target="_blank">https://github.com/gfredericks/test.chuck/blob/master/src/com/gfredericks/test/chuck/clojure_test.cljc#L108</a></div><div id="t1524328709000104" t="2018-04-21 16:38:29 mathpunk Mind you I&apos;ve been working on untangling the differences among:
- clojure.test
- test.check
- test.chuck
- test.check.clojure-test
- clojure.spec.alpha.test
...so maybe I&apos;m confusing the hammers I should be using"><a href="#t1524328709000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:38:29</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>Mind you I&apos;ve been working on untangling the differences among:
- clojure.test
- test.check
- test.chuck
- test.check.clojure-test
- clojure.spec.alpha.test
...so maybe I&apos;m confusing the hammers I should be using</span></div><div id="t1524328899000086" t="2018-04-21 16:41:39 gfredericks the problem is that there are two different namespaces that you&apos;ll see aliased as  gen/"><a href="#t1524328899000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:41:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the problem is that there are two different namespaces that you&apos;ll see aliased as </span><code>gen/</code></div><div id="t1524328909000007" t="2018-04-21 16:41:49 gfredericks one in test.check and one in clojure.spec"><a href="#t1524328909000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:41:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>one in test.check and one in clojure.spec</span></div><div id="t1524328931000017" t="2018-04-21 16:42:11 gfredericks the namespace in clojure.spec mostly exists to alias the namespace in test.check"><a href="#t1524328931000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:42:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the namespace in clojure.spec mostly exists to alias the namespace in test.check</span></div><div id="t1524328955000091" t="2018-04-21 16:42:35 gfredericks with the added confusion that it has functions that return generators instead of generators"><a href="#t1524328955000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:42:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>with the added confusion that it has functions that return generators instead of generators</span></div><div id="t1524328995000071" t="2018-04-21 16:43:15 gfredericks I would alias the clojure.spec namespace as  sgen  just to keep things straight"><a href="#t1524328995000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:43:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I would alias the clojure.spec namespace as </span><code>sgen</code><span> just to keep things straight</span></div><div id="t1524329011000019" t="2018-04-21 16:43:31 gfredericks so  gen/int  is the same as  (sgen/int)"><a href="#t1524329011000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:43:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so </span><code>gen/int</code><span> is the same as </span><code>(sgen/int)</code></div><div id="t1524329377000083" t="2018-04-21 16:49:37 mathpunk I see. Do they have different purposes? Or is clojure.spec an alpha because it&apos;s absorbing test.check but hasn&apos;t fully digested it yet?"><a href="#t1524329377000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:49:37</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I see. Do they have different purposes? Or is clojure.spec an alpha because it&apos;s absorbing test.check but hasn&apos;t fully digested it yet?</span></div><div id="t1524329403000101" t="2018-04-21 16:50:03 gfredericks the purpose of the spec namespace is to lazily load test.check only when necessary, so you don&apos;t need to have it as a production dependency"><a href="#t1524329403000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:50:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the purpose of the spec namespace is to lazily load test.check only when necessary, so you don&apos;t need to have it as a production dependency</span></div><div id="t1524329420000104" t="2018-04-21 16:50:20 gfredericks that&apos;s also the reason for the functions-that-return-generators thing"><a href="#t1524329420000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:50:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s also the reason for the functions-that-return-generators thing</span></div><div id="t1524329422000114" t="2018-04-21 16:50:22 mathpunk ohhhhh huh, ok"><a href="#t1524329422000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:50:22</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>ohhhhh huh, ok</span></div><div id="t1524329447000027" t="2018-04-21 16:50:47 mathpunk because specs have some use in production code"><a href="#t1524329447000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:50:47</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>because specs have some use in production code</span></div><div id="t1524329587000076" t="2018-04-21 16:53:07 mathpunk Thanks--- there&apos;s a lot of polysemy going on in the terms  test   spec   gen  and  check  as I try and develop a sensible workflow for spec-driving"><a href="#t1524329587000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:53:07</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>Thanks--- there&apos;s a lot of polysemy going on in the terms </span><code>test</code><span> </span><code>spec</code><span> </span><code>gen</code><span> and </span><code>check</code><span> as I try and develop a sensible workflow for spec-driving</span></div><div id="t1524329663000103" t="2018-04-21 16:54:23 gfredericks it needs a good blog post or something"><a href="#t1524329663000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">16:54:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it needs a good blog post or something</span></div><div id="t1524330044000138" t="2018-04-21 17:00:44 mathpunk I may be able to contribute to the beginners&apos; end of the topic. The comments I&apos;m writing to myself may become a post on a repl-to-gen-tests workflow with  cognitect/transcriptor  and  test.chuck"><a href="#t1524330044000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">17:00:44</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>I may be able to contribute to the beginners&apos; end of the topic. The comments I&apos;m writing to myself may become a post on a repl-to-gen-tests workflow with </span><code>cognitect/transcriptor</code><span> and </span><code>test.chuck</code></div><div id="t1524330064000109" t="2018-04-21 17:01:04 mathpunk Not gonna touch when a gen is a gen and when a gen is a thunk"><a href="#t1524330064000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-21</span>Â <span class="t" onclick="H(this)">17:01:04</span>Â Â Â Â Â Â Â Â Â Â Â Â mathpunkÂ </span><span>Not gonna touch when a gen is a gen and when a gen is a thunk</span></div><div id="t1527140337000221" t="2018-05-24 05:38:57 flowthing Is there a better way to write this?

 (gen/fmap (partial reduce merge)
                          (gen/vector
                            (gen/let [id gen/uuid
                                      x  (gen/hash-map :name gen/string)]
                              {id (assoc x :id id)})))
 

That is, generate maps where the key is the same as the  :id  in the map in the value. That works fine and doesn&apos;t seem too bad to me â€” just wondering."><a href="#t1527140337000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span>Â <span class="t" onclick="H(this)">05:38:57</span>Â Â Â Â Â Â Â Â Â Â Â flowthingÂ </span><span>Is there a better way to write this?

</span><pre>(gen/fmap (partial reduce merge)
                          (gen/vector
                            (gen/let [id gen/uuid
                                      x  (gen/hash-map :name gen/string)]
                              {id (assoc x :id id)})))
</pre><span>

That is, generate maps where the key is the same as the </span><code>:id</code><span> in the map in the value. That works fine and doesn&apos;t seem too bad to me â€” just wondering.</span></div><div id="t1527158283000308" t="2018-05-24 10:38:03 gfredericks if it were me I would be using plumbing and so I&apos;d have this function around to make it slightly cleaner:  https://github.com/plumatic/plumbing/blob/6d713472f7324344545aa93597cb2a137b3404b3/src/plumbing/core.cljx#L91"><a href="#t1527158283000308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span>Â <span class="t" onclick="H(this)">10:38:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if it were me I would be using plumbing and so I&apos;d have this function around to make it slightly cleaner: </span><a href="https://github.com/plumatic/plumbing/blob/6d713472f7324344545aa93597cb2a137b3404b3/src/plumbing/core.cljx#L91" target="_blank">https://github.com/plumatic/plumbing/blob/6d713472f7324344545aa93597cb2a137b3404b3/src/plumbing/core.cljx#L91</a></div><div id="t1527158341000053" t="2018-05-24 10:39:01 gfredericks so it becomes  (gen/fmap #(map-from-vals :id %) (gen/vector gen-a-map-with-an-id))"><a href="#t1527158341000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span>Â <span class="t" onclick="H(this)">10:39:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so it becomes </span><code>(gen/fmap #(map-from-vals :id %) (gen/vector gen-a-map-with-an-id))</code></div><div id="t1527158511000261" t="2018-05-24 10:41:51 gfredericks which I guess means it also seems natural to me to pull out the map generator and give it a name"><a href="#t1527158511000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span>Â <span class="t" onclick="H(this)">10:41:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which I guess means it also seems natural to me to pull out the map generator and give it a name</span></div><div id="t1527455737000013" t="2018-05-27 21:15:37 gfredericks 0.10.0-alpha3  is out  https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha3-2018-05-27"><a href="#t1527455737000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span>Â <span class="t" onclick="H(this)">21:15:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>0.10.0-alpha3</code><span> is out </span><a href="https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha3-2018-05-27" target="_blank">https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown#0100-alpha3-2018-05-27</a></div><div id="t1527455755000001" t="2018-05-27 21:15:55 gfredericks it&apos;s crazy how much stuff can be done without doing any of the stuff I want to do"><a href="#t1527455755000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span>Â <span class="t" onclick="H(this)">21:15:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s crazy how much stuff can be done without doing any of the stuff I want to do</span></div><div id="t1527455806000052" t="2018-05-27 21:16:46 gfredericks thank you to everybody who&apos;s contributed"><a href="#t1527455806000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span>Â <span class="t" onclick="H(this)">21:16:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>thank you to everybody who&apos;s contributed</span></div><div id="t1530035395000363" t="2018-06-26 17:49:55 ghadi What&apos;s the most idiomatic way to make a generator from a source function (like a constructor)?"><a href="#t1530035395000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">17:49:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>What&apos;s the most idiomatic way to make a generator from a source function (like a constructor)?</span></div><div id="t1530037189000300" t="2018-06-26 18:19:49 ghadi (gen/fmap (fn [f] (f)) (gen/return some-constructor)) 
Seems oblique to say fmap &quot;apply thyself&quot;"><a href="#t1530037189000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:19:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><pre>(gen/fmap (fn [f] (f)) (gen/return some-constructor))</pre><span>
Seems oblique to say fmap &quot;apply thyself&quot;</span></div><div id="t1530037565000291" t="2018-06-26 18:26:05 gfredericks that example might be too simple to express your problem, because you can rewrite it as  (gen/return (some-constructor))"><a href="#t1530037565000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:26:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that example might be too simple to express your problem, because you can rewrite it as </span><code>(gen/return (some-constructor))</code></div><div id="t1530037574000515" t="2018-06-26 18:26:14 gfredericks unless the constructor is nondeterministic"><a href="#t1530037574000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:26:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>unless the constructor is nondeterministic</span></div><div id="t1530037588000680" t="2018-06-26 18:26:28 ghadi I want to generate fresh instances"><a href="#t1530037588000680" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:26:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>I want to generate fresh instances</span></div><div id="t1530037608000404" t="2018-06-26 18:26:48 ghadi (the constructor returns a reify)"><a href="#t1530037608000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:26:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>(the constructor returns a reify)</span></div><div id="t1530037615000278" t="2018-06-26 18:26:55 gfredericks is this with spec?"><a href="#t1530037615000278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:26:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>is this with spec?</span></div><div id="t1530037652000353" t="2018-06-26 18:27:32 ghadi yes"><a href="#t1530037652000353" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:27:32</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>yes</span></div><div id="t1530037686000338" t="2018-06-26 18:28:06 gfredericks in general it&apos;s not idiomatic in test.check to be generating non-values, so spec exposes a bit of a mismatch here"><a href="#t1530037686000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:28:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>in general it&apos;s not idiomatic in test.check to be generating non-values, so spec exposes a bit of a mismatch here</span></div><div id="t1530037698000873" t="2018-06-26 18:28:18 gfredericks but I suppose I&apos;ve heard similar things from alex about spec"><a href="#t1530037698000873" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:28:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but I suppose I&apos;ve heard similar things from alex about spec</span></div><div id="t1530037759000046" t="2018-06-26 18:29:19 gfredericks so due to all that, there&apos;s not a more idiomatic way to do what you&apos;re doing"><a href="#t1530037759000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:29:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so due to all that, there&apos;s not a more idiomatic way to do what you&apos;re doing</span></div><div id="t1530037789000819" t="2018-06-26 18:29:49 gfredericks you might even have to be careful about the same instance getting reused during shrinking"><a href="#t1530037789000819" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:29:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you might even have to be careful about the same instance getting reused during shrinking</span></div><div id="t1530037817000366" t="2018-06-26 18:30:17 gfredericks I&apos;m 87% sure that&apos;s what would happen if you compose this with other generators"><a href="#t1530037817000366" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:30:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m 87% sure that&apos;s what would happen if you compose this with other generators</span></div><div id="t1530037893000116" t="2018-06-26 18:31:33 ghadi Interesting.... Thanks Gary"><a href="#t1530037893000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:31:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>Interesting.... Thanks Gary</span></div><div id="t1530038000000073" t="2018-06-26 18:33:20 gfredericks :+1:  this might be an interesting thing to point out in the spec channel"><a href="#t1530038000000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-06-26</span>Â <span class="t" onclick="H(this)">18:33:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b><span> this might be an interesting thing to point out in the spec channel</span></div><div id="t1530437916000038" t="2018-07-01 09:38:36 jfacorro Hi  ğŸ™‚ . I&apos;ve been working on porting  test.check  to Clojure on Erlang VM. I&apos;m pretty much done but I was wondering what&apos;s the relationship between  test.check  and  test.generative . I&apos;ve noticed that  spec.alpha  uses  test.check  and that&apos;s partly why I ported the library (because I want to port  spec.alpha  as well), but  test.generative  seems to be used in tests for   clojure-1.9.0 ."><a href="#t1530437916000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">09:38:36</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>Hi </span><b>ğŸ™‚</b><span>. I&apos;ve been working on porting </span><code>test.check</code><span> to Clojure on Erlang VM. I&apos;m pretty much done but I was wondering what&apos;s the relationship between </span><code>test.check</code><span> and </span><code>test.generative</code><span>. I&apos;ve noticed that </span><code>spec.alpha</code><span> uses </span><code>test.check</code><span> and that&apos;s partly why I ported the library (because I want to port </span><code>spec.alpha</code><span> as well), but </span><code>test.generative</code><span> seems to be used in tests for  </span><code>clojure-1.9.0</code><span>.</span></div><div id="t1530437982000032" t="2018-07-01 09:39:42 jfacorro I guess what I&apos;m trying to ask is if  test.check  is a superset of  test.generative  (which I think it is) or if they are different in some fundamental way I&apos;m missing."><a href="#t1530437982000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">09:39:42</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>I guess what I&apos;m trying to ask is if </span><code>test.check</code><span> is a superset of </span><code>test.generative</code><span> (which I think it is) or if they are different in some fundamental way I&apos;m missing.</span></div><div id="t1530440733000029" t="2018-07-01 10:25:33 jfacorro I can see there is no shrinking in  test.generative"><a href="#t1530440733000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">10:25:33</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>I can see there is no shrinking in </span><code>test.generative</code></div><div id="t1530451292000023" t="2018-07-01 13:21:32 gfredericks tg predates tc"><a href="#t1530451292000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">13:21:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>tg predates tc</span></div><div id="t1530451304000040" t="2018-07-01 13:21:44 gfredericks I don&apos;t think tg is used much anymore"><a href="#t1530451304000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">13:21:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t think tg is used much anymore</span></div><div id="t1530456286000051" t="2018-07-01 14:44:46 jfacorro I see that  c.t.g  it is being used for tests in  clojure/clojure , so is  c.t.c  it seems"><a href="#t1530456286000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">14:44:46</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>I see that </span><code>c.t.g</code><span> it is being used for tests in </span><code>clojure/clojure</code><span>, so is </span><code>c.t.c</code><span> it seems</span></div><div id="t1530456288000035" t="2018-07-01 14:44:48 jfacorro Â¯\(ãƒ„)/Â¯"><a href="#t1530456288000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">14:44:48</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>Â¯\(ãƒ„)/Â¯</span></div><div id="t1530456853000005" t="2018-07-01 14:54:13 gfredericks yes, the tg tests were added before tc existed"><a href="#t1530456853000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">14:54:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yes, the tg tests were added before tc existed</span></div><div id="t1530456877000040" t="2018-07-01 14:54:37 gfredericks I expect those could be converted, but changes to the core codebase aren&apos;t normally accepted unless they provide a lot of value"><a href="#t1530456877000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">14:54:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I expect those could be converted, but changes to the core codebase aren&apos;t normally accepted unless they provide a lot of value</span></div><div id="t1530457506000068" t="2018-07-01 15:05:06 jfacorro I see, thank you  ğŸ™‚"><a href="#t1530457506000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-01</span>Â <span class="t" onclick="H(this)">15:05:06</span>Â Â Â Â Â Â Â Â Â Â Â Â jfacorroÂ </span><span>I see, thank you </span><b>ğŸ™‚</b></div><div id="t1530880149000302" t="2018-07-06 12:29:09 Hukka strgen helpfully mentions test.chuck for more comprehensive regex support. But is there then any reason to not use test.chuck always?"><a href="#t1530880149000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:29:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HukkaÂ </span><span>strgen helpfully mentions test.chuck for more comprehensive regex support. But is there then any reason to not use test.chuck always?</span></div><div id="t1530881281000368" t="2018-07-06 12:48:01 gfredericks test.chuck isn&apos;t an alternative to test.check, it&apos;s a pile of miscellaneous utilities to go with it"><a href="#t1530881281000368" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:48:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.chuck isn&apos;t an alternative to test.check, it&apos;s a pile of miscellaneous utilities to go with it</span></div><div id="t1530881305000309" t="2018-07-06 12:48:25 gfredericks so it&apos;s fine to have it around if you want, but if you&apos;re not using any of its parts then it&apos;s not providing any value"><a href="#t1530881305000309" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:48:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so it&apos;s fine to have it around if you want, but if you&apos;re not using any of its parts then it&apos;s not providing any value</span></div><div id="t1530881306000354" t="2018-07-06 12:48:26 Hukka Sure. I&apos;m mostly looking for helpers to generate the input"><a href="#t1530881306000354" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:48:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HukkaÂ </span><span>Sure. I&apos;m mostly looking for helpers to generate the input</span></div><div id="t1530881347000224" t="2018-07-06 12:49:07 Hukka strgen is purely for making strings based on regexes, but mentions that test.chuck has more comprehensive support. I was just wondering is there ever any reason to use that, instead of test.chuck"><a href="#t1530881347000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:49:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HukkaÂ </span><span>strgen is purely for making strings based on regexes, but mentions that test.chuck has more comprehensive support. I was just wondering is there ever any reason to use that, instead of test.chuck</span></div><div id="t1530881435000124" t="2018-07-06 12:50:35 gfredericks oh I&apos;m sorry"><a href="#t1530881435000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:50:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh I&apos;m sorry</span></div><div id="t1530881440000395" t="2018-07-06 12:50:40 gfredericks I missed the part about strgen"><a href="#t1530881440000395" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:50:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I missed the part about strgen</span></div><div id="t1530881501000011" t="2018-07-06 12:51:41 gfredericks it looks like strgen targets portability?"><a href="#t1530881501000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:51:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it looks like strgen targets portability?</span></div><div id="t1530881510000117" t="2018-07-06 12:51:50 gfredericks i.e., it probably works in cljs"><a href="#t1530881510000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:51:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>i.e., it probably works in cljs</span></div><div id="t1530881529000300" t="2018-07-06 12:52:09 gfredericks there&apos;s a half-pull-request in test.chuck for adding cljs support, but it needs some more work"><a href="#t1530881529000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:52:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a half-pull-request in test.chuck for adding cljs support, but it needs some more work</span></div><div id="t1530881651000155" t="2018-07-06 12:54:11 Hukka I see, thanks! Good to know â€“ though for now I&apos;m just speccing the backend code, there&apos;s plenty of fiddly data munging on the frontend too"><a href="#t1530881651000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">12:54:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HukkaÂ </span><span>I see, thanks! Good to know â€“ though for now I&apos;m just speccing the backend code, there&apos;s plenty of fiddly data munging on the frontend too</span></div><div id="t1530890081000422" t="2018-07-06 15:14:41 Hukka Not sure if this belongs here, as it&apos;s really a spec problem... but if running (stest/check) without any arguments gives an exception when check can&apos;t create any input that passes the input predicates, is there any way to know which specced function is causing problems?"><a href="#t1530890081000422" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">15:14:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HukkaÂ </span><span>Not sure if this belongs here, as it&apos;s really a spec problem... but if running (stest/check) without any arguments gives an exception when check can&apos;t create any input that passes the input predicates, is there any way to know which specced function is causing problems?</span></div><div id="t1530917108000161" t="2018-07-06 22:45:08 gfredericks lot more likely to be answered in the spec room I&apos;d wager"><a href="#t1530917108000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">22:45:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>lot more likely to be answered in the spec room I&apos;d wager</span></div><div id="t1530917117000040" t="2018-07-06 22:45:17 gfredericks they have over ten times more people"><a href="#t1530917117000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-06</span>Â <span class="t" onclick="H(this)">22:45:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>they have over ten times more people</span></div><div id="t1532104705000136" t="2018-07-20 16:38:25 ghadi https://twitter.com/smashthepast/status/1020347051589144578"><a href="#t1532104705000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-20</span>Â <span class="t" onclick="H(this)">16:38:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><a href="https://twitter.com/smashthepast/status/1020347051589144578" target="_blank">https://twitter.com/smashthepast/status/1020347051589144578</a></div><div id="t1532105005000430" t="2018-07-20 16:43:25 gfredericks :+1:"><a href="#t1532105005000430" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-20</span>Â <span class="t" onclick="H(this)">16:43:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b></div><div id="t1532110222000373" t="2018-07-20 18:10:22 gfredericks not to mention if you get a rare failure you&apos;ll have a hard time reproducing it unless you&apos;re logging the generated value"><a href="#t1532110222000373" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-07-20</span>Â <span class="t" onclick="H(this)">18:10:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>not to mention if you get a rare failure you&apos;ll have a hard time reproducing it unless you&apos;re logging the generated value</span></div><div id="t1537277458000100" t="2018-09-18 13:30:58 arohner Is there a good way to generate a lazy sequence? I want to  reduce  the seq until a specific condition is met"><a href="#t1537277458000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-18</span>Â <span class="t" onclick="H(this)">13:30:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Is there a good way to generate a lazy sequence? I want to </span><code>reduce</code><span> the seq until a specific condition is met</span></div><div id="t1537311677000100" t="2018-09-18 23:01:17 gfredericks what aspect of laziness is important to you in this case?"><a href="#t1537311677000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-18</span>Â <span class="t" onclick="H(this)">23:01:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what aspect of laziness is important to you in this case?</span></div><div id="t1537311699000100" t="2018-09-18 23:01:39 gfredericks you can make whatever you want with  gen/fmap"><a href="#t1537311699000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-18</span>Â <span class="t" onclick="H(this)">23:01:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can make whatever you want with </span><code>gen/fmap</code></div><div id="t1537311717000100" t="2018-09-18 23:01:57 gfredericks were you hoping for an infinitely random sequence?"><a href="#t1537311717000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-18</span>Â <span class="t" onclick="H(this)">23:01:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>were you hoping for an infinitely random sequence?</span></div><div id="t1539368326000100" t="2018-10-12 18:18:46 Kayla In this snippet,  frequency  evals  render  too early. I think I need mutually recursive generators, and donâ€™t want to lose the ability to shrink. If it actually ran it wouldnâ€™t go on forever, but instead it explodes the stack. Anybody have any ideas?
 (letfn [(render []
          (tcgen/frequency [[1 (gen/tuple (render))]
                            [15 (gen/return [])]]))]
  (gen/generate (render)))
"><a href="#t1539368326000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">18:18:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â KaylaÂ </span><span>In this snippet, </span><code>frequency</code><span> evals </span><code>render</code><span> too early. I think I need mutually recursive generators, and donâ€™t want to lose the ability to shrink. If it actually ran it wouldnâ€™t go on forever, but instead it explodes the stack. Anybody have any ideas?
</span><pre>(letfn [(render []
          (tcgen/frequency [[1 (gen/tuple (render))]
                            [15 (gen/return [])]]))]
  (gen/generate (render)))
</pre></div><div id="t1539371089000100" t="2018-10-12 19:04:49 hiredman the problem isn&apos;t frequency"><a href="#t1539371089000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">19:04:49</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>the problem isn&apos;t frequency</span></div><div id="t1539371120000100" t="2018-10-12 19:05:20 hiredman frequency is a function, so all the arguments are evaluated before the function is called"><a href="#t1539371120000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">19:05:20</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>frequency is a function, so all the arguments are evaluated before the function is called</span></div><div id="t1539371166000100" t="2018-10-12 19:06:06 taylor what kinda output are you hoping to get out of that. nested, empty vectors? @sean"><a href="#t1539371166000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">19:06:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â taylorÂ </span><span>what kinda output are you hoping to get out of that. nested, empty vectors? @sean</span></div><div id="t1539371168000100" t="2018-10-12 19:06:08 hiredman you may want to checkout gen/recursive-gen"><a href="#t1539371168000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">19:06:08</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>you may want to checkout gen/recursive-gen</span></div><div id="t1539374411000100" t="2018-10-12 20:00:11 Kayla @taylor I distilled my problem down to this.

I am generating a tree where any given nodeâ€™s childrenâ€™s generator is dependent on the node that produces it. Also, some nodes must have children, and some must not. Also some of the data in the child needs to be consistent with what was generated the parent. Then the thing that breaks it is some nodes can have children of the same type, which use the same generator.

I am trying to make a generator for the whole tree.

So a generator for a node might produce something like:  {:id 1 :parent-id 0 :type :foo} 
Nodes of type  :foo  can have children of types  :bar  and  :foo .
The generators for the potential children of this node would produce something that looks like:  {:id 2 :parent-id 1 :type :foo}  or  {:id 2 :parent-id 1 :type :bar :another-quality &quot;junk&quot;}"><a href="#t1539374411000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:00:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â KaylaÂ </span><span>@taylor I distilled my problem down to this.

I am generating a tree where any given nodeâ€™s childrenâ€™s generator is dependent on the node that produces it. Also, some nodes must have children, and some must not. Also some of the data in the child needs to be consistent with what was generated the parent. Then the thing that breaks it is some nodes can have children of the same type, which use the same generator.

I am trying to make a generator for the whole tree.

So a generator for a node might produce something like: </span><code>{:id 1 :parent-id 0 :type :foo}</code><span>
Nodes of type </span><code>:foo</code><span> can have children of types </span><code>:bar</code><span> and </span><code>:foo</code><span>.
The generators for the potential children of this node would produce something that looks like: </span><code>{:id 2 :parent-id 1 :type :foo}</code><span> or </span><code>{:id 2 :parent-id 1 :type :bar :another-quality &quot;junk&quot;}</code></div><div id="t1539375489000100" t="2018-10-12 20:18:09 taylor are the child nodes associated inside the parent nodes? or are they all in one big sequence and only correlated by  :id  and  :parent-id ?"><a href="#t1539375489000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:18:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â taylorÂ </span><span>are the child nodes associated inside the parent nodes? or are they all in one big sequence and only correlated by </span><code>:id</code><span> and </span><code>:parent-id</code><span>?</span></div><div id="t1539375509000100" t="2018-10-12 20:18:29 Kayla One big sequence "><a href="#t1539375509000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:18:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â KaylaÂ </span><span>One big sequence </span></div><div id="t1539374464000100" t="2018-10-12 20:01:04 Kayla :bar  nodes have no children."><a href="#t1539374464000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:01:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â KaylaÂ </span><code>:bar</code><span> nodes have no children.</span></div><div id="t1539375414000100" t="2018-10-12 20:16:54 gfredericks You could use recursive-gen to get the structure, then fmap the whole thing to fix up consistency issues"><a href="#t1539375414000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:16:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You could use recursive-gen to get the structure, then fmap the whole thing to fix up consistency issues</span></div><div id="t1539375583000100" t="2018-10-12 20:19:43 hiredman (defn type-foo [g]
  (gen/let [children (gen/vector g)]
    (gen/return
     {:id 1 :parent-id 0 :type :foo :children children})))

(defn type-bar [g]
  (gen/return
   {:id 2 :parent-id 1 :type :bar :another-quality &quot;junk&quot;}))


(defn foo-bar-tree [_]
  (gen/recursive
   (fn [g]
     (gen/one-of (type-foo g)
                 (type-bar g)))
   (type-bar nil)))
"><a href="#t1539375583000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:19:43</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><pre>(defn type-foo [g]
  (gen/let [children (gen/vector g)]
    (gen/return
     {:id 1 :parent-id 0 :type :foo :children children})))

(defn type-bar [g]
  (gen/return
   {:id 2 :parent-id 1 :type :bar :another-quality &quot;junk&quot;}))


(defn foo-bar-tree [_]
  (gen/recursive
   (fn [g]
     (gen/one-of (type-foo g)
                 (type-bar g)))
   (type-bar nil)))
</pre></div><div id="t1539376051000100" t="2018-10-12 20:27:31 hiredman I will say often times it is easier to generate instructions to build a complex datastructure then it is to generate the datastructure. so for example if you wanted a tree of files in directories, it might be easier to generate a list of create file, move file, create directory, delete, etc, then just interpret that list to get some tree, instead of generating the tree"><a href="#t1539376051000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:27:31</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>I will say often times it is easier to generate instructions to build a complex datastructure then it is to generate the datastructure. so for example if you wanted a tree of files in directories, it might be easier to generate a list of create file, move file, create directory, delete, etc, then just interpret that list to get some tree, instead of generating the tree</span></div><div id="t1539377707000100" t="2018-10-12 20:55:07 taylor @sean even though you want a flat sequence of maps, you could maybe do something like this with recursive-gen:
 (gen/sample
  (gen/recursive-gen
    (fn [g]
      (gen/let [{:keys [id type] :as m} (s/gen ::my-map)
                children (gen/vector g)]
        (if (= :bar type)
          m
          (update m :children concat (map #(assoc % :parent-id id) children)))))
    (s/gen ::my-map))
  100) 
then you could  fmap  over that generator to flatten and fix-up the ID relations:
 (gen/sample
  (gen/fmap
    (fn [m]
      (map #(dissoc % :children)
           (tree-seq #(seq (:children %)) :children m)))
    (gen/recursive-gen
      (fn [g]
        (gen/let [m (s/gen ::my-map)
                  children (gen/vector g)]
          (if (= :bar (:type m))
            m
            (update m :children concat (map #(assoc % :parent-id (:id m)) children)))))
      (s/gen ::my-map)))) 
although I think this still leaves you with a problem of non-unique IDs"><a href="#t1539377707000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:55:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â taylorÂ </span><span>@sean even though you want a flat sequence of maps, you could maybe do something like this with recursive-gen:
</span><pre>(gen/sample
  (gen/recursive-gen
    (fn [g]
      (gen/let [{:keys [id type] :as m} (s/gen ::my-map)
                children (gen/vector g)]
        (if (= :bar type)
          m
          (update m :children concat (map #(assoc % :parent-id id) children)))))
    (s/gen ::my-map))
  100)</pre><span>
then you could </span><code>fmap</code><span> over that generator to flatten and fix-up the ID relations:
</span><pre>(gen/sample
  (gen/fmap
    (fn [m]
      (map #(dissoc % :children)
           (tree-seq #(seq (:children %)) :children m)))
    (gen/recursive-gen
      (fn [g]
        (gen/let [m (s/gen ::my-map)
                  children (gen/vector g)]
          (if (= :bar (:type m))
            m
            (update m :children concat (map #(assoc % :parent-id (:id m)) children)))))
      (s/gen ::my-map))))</pre><span>
although I think this still leaves you with a problem of non-unique IDs</span></div><div id="t1539377781000100" t="2018-10-12 20:56:21 taylor oh and I used some specs for the map generator:
 (s/def ::id pos-int?)
(s/def ::type #{:foo :bar})
(s/def ::parent-id ::id)
(s/def ::my-map (s/keys :req-un [::id ::type ::parent-id]))
"><a href="#t1539377781000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">20:56:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â taylorÂ </span><span>oh and I used some specs for the map generator:
</span><pre>(s/def ::id pos-int?)
(s/def ::type #{:foo :bar})
(s/def ::parent-id ::id)
(s/def ::my-map (s/keys :req-un [::id ::type ::parent-id]))
</pre></div><div id="t1539379355000100" t="2018-10-12 21:22:35 Kayla Thanks Everybody for all the help. Iâ€™m signing off for the weekend. "><a href="#t1539379355000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-12</span>Â <span class="t" onclick="H(this)">21:22:35</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â KaylaÂ </span><span>Thanks Everybody for all the help. Iâ€™m signing off for the weekend. </span></div><div id="t1542079977001200" t="2018-11-13 03:32:57 steveb8n I find it tricky to quickly find the cause when I get â€œclojure.lang.ExceptionInfo: Couldnâ€™t satisfy such-that predicate after 100 tries. {}â€ back from generators. I can find it using binary search but is there a better technique for debugging these generator errors?"><a href="#t1542079977001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">03:32:57</span>Â Â Â Â Â Â Â Â Â Â Â Â steveb8nÂ </span><span>I find it tricky to quickly find the cause when I get â€œclojure.lang.ExceptionInfo: Couldnâ€™t satisfy such-that predicate after 100 tries. {}â€ back from generators. I can find it using binary search but is there a better technique for debugging these generator errors?</span></div><div id="t1542113536001600" t="2018-11-13 12:52:16 gfredericks @steveb8n is this a  (gen/such-that ...)  that you wrote yourself, or that spec wrote for you?"><a href="#t1542113536001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">12:52:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@steveb8n is this a </span><code>(gen/such-that ...)</code><span> that you wrote yourself, or that spec wrote for you?</span></div><div id="t1542142979003200" t="2018-11-13 21:02:59 steveb8n @gfredericks using gens from specs (I hardly ever use such-that gens). To me this is the hardest part of using generators so any tricks (or context data in the error) would help"><a href="#t1542142979003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:02:59</span>Â Â Â Â Â Â Â Â Â Â Â Â steveb8nÂ </span><span>@gfredericks using gens from specs (I hardly ever use such-that gens). To me this is the hardest part of using generators so any tricks (or context data in the error) would help</span></div><div id="t1542143723004100" t="2018-11-13 21:15:23 gfredericks @steveb8n there&apos;s a ticket somewhere describing that problem I think -- I added extra optional args to  gen/such-that  so that spec could add explanatory information to exceptions, but I don&apos;t believe that&apos;s been taken advantage of by spec."><a href="#t1542143723004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:15:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@steveb8n there&apos;s a ticket somewhere describing that problem I think -- I added extra optional args to </span><code>gen/such-that</code><span> so that spec could add explanatory information to exceptions, but I don&apos;t believe that&apos;s been taken advantage of by spec.</span></div><div id="t1542143735004500" t="2018-11-13 21:15:35 gfredericks and in any case it&apos;s only released in the alpha versions  ğŸ˜•"><a href="#t1542143735004500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:15:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and in any case it&apos;s only released in the alpha versions </span><b>ğŸ˜•</b></div><div id="t1542143750004900" t="2018-11-13 21:15:50 gfredericks someday I should just give up and release whatever&apos;s on master so at least there&apos;s not that problem anymore"><a href="#t1542143750004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:15:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>someday I should just give up and release whatever&apos;s on master so at least there&apos;s not that problem anymore</span></div><div id="t1542143987006900" t="2018-11-13 21:19:47 steveb8n hah, I thought this might be the case. I also thought that providing useful debug data would be tricky since specs can vary wildly. in lieu of that, how do you hunt these down? binary search (with knowledge of the specs to guide you) or some other cleverness?"><a href="#t1542143987006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:19:47</span>Â Â Â Â Â Â Â Â Â Â Â Â steveb8nÂ </span><span>hah, I thought this might be the case. I also thought that providing useful debug data would be tricky since specs can vary wildly. in lieu of that, how do you hunt these down? binary search (with knowledge of the specs to guide you) or some other cleverness?</span></div><div id="t1542144222007400" t="2018-11-13 21:23:42 gfredericks I haven&apos;t personally used spec a lot

I think knowing that  s/and  is the most likely culprit is usually helpful"><a href="#t1542144222007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:23:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I haven&apos;t personally used spec a lot

I think knowing that </span><code>s/and</code><span> is the most likely culprit is usually helpful</span></div><div id="t1542144314007700" t="2018-11-13 21:25:14 gfredericks and thinking about generation whenever you write  s/and  in the first place"><a href="#t1542144314007700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">21:25:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and thinking about generation whenever you write </span><code>s/and</code><span> in the first place</span></div><div id="t1542151427008300" t="2018-11-13 23:23:47 steveb8n true that. I am using s/and extensively. Iâ€™ll ponder that a little. Thanks."><a href="#t1542151427008300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-13</span>Â <span class="t" onclick="H(this)">23:23:47</span>Â Â Â Â Â Â Â Â Â Â Â Â steveb8nÂ </span><span>true that. I am using s/and extensively. Iâ€™ll ponder that a little. Thanks.</span></div><div id="t1547364949003100" t="2019-01-13 07:35:49 ho0man Hi everyone, is there a way I could fill the  :result-data  field in test reports?
(So when they fail I could have a structured failure report)"><a href="#t1547364949003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-13</span>Â <span class="t" onclick="H(this)">07:35:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>Hi everyone, is there a way I could fill the </span><code>:result-data</code><span> field in test reports?
(So when they fail I could have a structured failure report)</span></div><div id="t1547393449003800" t="2019-01-13 15:30:49 gfredericks @ho0man yes, you have to return something that implements the protocol in  clojure.test.check.results 

I think"><a href="#t1547393449003800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-13</span>Â <span class="t" onclick="H(this)">15:30:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ho0man yes, you have to return something that implements the protocol in </span><code>clojure.test.check.results</code><span>

I think</span></div><div id="t1547393464004100" t="2019-01-13 15:31:04 gfredericks you could use  (reify ...)  for that"><a href="#t1547393464004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-13</span>Â <span class="t" onclick="H(this)">15:31:04</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could use </span><code>(reify ...)</code><span> for that</span></div><div id="t1547396141004700" t="2019-01-13 16:15:41 ho0man @gfredericks , thanks Iâ€™ll try that"><a href="#t1547396141004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-13</span>Â <span class="t" onclick="H(this)">16:15:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>@gfredericks , thanks Iâ€™ll try that</span></div><div id="t1548358438005700" t="2019-01-24 19:33:58 pablore Hi. I need to generate some data based on a normal distribution. How can I do that with test.check?"><a href="#t1548358438005700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:33:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>Hi. I need to generate some data based on a normal distribution. How can I do that with test.check?</span></div><div id="t1548358630006300" t="2019-01-24 19:37:10 gfredericks @pablore you want to ignore the  size  parameter, I imagine?

any desired shrinking behavior?"><a href="#t1548358630006300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:37:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@pablore you want to ignore the </span><code>size</code><span> parameter, I imagine?

any desired shrinking behavior?</span></div><div id="t1548358664006600" t="2019-01-24 19:37:44 pablore I dont understand what you mean"><a href="#t1548358664006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:37:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>I dont understand what you mean</span></div><div id="t1548358697007100" t="2019-01-24 19:38:17 gfredericks size  controls how generated values start simple and get more complex as you run more trials"><a href="#t1548358697007100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:38:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>size</code><span> controls how generated values start simple and get more complex as you run more trials</span></div><div id="t1548358709007300" t="2019-01-24 19:38:29 gfredericks more details here:  https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md"><a href="#t1548358709007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:38:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>more details here: </span><a href="https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md" target="_blank">https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md</a></div><div id="t1548358781007800" t="2019-01-24 19:39:41 pablore Ok this is more complex than I thought xd. I&apos;ll give it a read, thanks!"><a href="#t1548358781007800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:39:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>Ok this is more complex than I thought xd. I&apos;ll give it a read, thanks!</span></div><div id="t1548358887009100" t="2019-01-24 19:41:27 gfredericks if you don&apos;t care all that much, I&apos;d say the easiest thing is to use  gen/choose  with  0  and  Integer/MAX_VALUE  and the  gen/fmap  with some function that converts a uniform distribution to a normal one"><a href="#t1548358887009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:41:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you don&apos;t care all that much, I&apos;d say the easiest thing is to use </span><code>gen/choose</code><span> with </span><code>0</code><span> and </span><code>Integer/MAX_VALUE</code><span> and the </span><code>gen/fmap</code><span> with some function that converts a uniform distribution to a normal one</span></div><div id="t1548358902009400" t="2019-01-24 19:41:42 gfredericks might help to divide by  Integer/MAX_VALUE  first I guess"><a href="#t1548358902009400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:41:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>might help to divide by </span><code>Integer/MAX_VALUE</code><span> first I guess</span></div><div id="t1548358906009600" t="2019-01-24 19:41:46 gfredericks to get it between 0 and 1"><a href="#t1548358906009600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:41:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>to get it between 0 and 1</span></div><div id="t1548358930009800" t="2019-01-24 19:42:10 pablore thanks"><a href="#t1548358930009800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:42:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â pabloreÂ </span><span>thanks</span></div><div id="t1548358964010400" t="2019-01-24 19:42:44 gfredericks (the fact that my initial questions don&apos;t have obvious answers is part of why this isn&apos;t built-in)"><a href="#t1548358964010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">19:42:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(the fact that my initial questions don&apos;t have obvious answers is part of why this isn&apos;t built-in)</span></div><div id="t1548365180016800" t="2019-01-24 21:26:20 aisamu Hi!
I&apos;m trying to integrate test.chuck&apos;s  checking  into a cljs.test project.
The readme points to a blog post where there is an example showing the full report on errors (vs. just one wrong result)
Was that ever integrated into the official checking macro? I can&apos;t seem to make it work here.
(The full report is terribly useful for fixing things that went wrong!)"><a href="#t1548365180016800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">21:26:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â aisamuÂ </span><span>Hi!
I&apos;m trying to integrate test.chuck&apos;s </span><code>checking</code><span> into a cljs.test project.
The readme points to a blog post where there is an example showing the full report on errors (vs. just one wrong result)
Was that ever integrated into the official checking macro? I can&apos;t seem to make it work here.
(The full report is terribly useful for fixing things that went wrong!)</span></div><div id="t1548366181017100" t="2019-01-24 21:43:01 gfredericks what do you mean by &quot;full report&quot;? I.e., what information is there?

(I&apos;m fuzzy on all this)"><a href="#t1548366181017100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">21:43:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>what do you mean by &quot;full report&quot;? I.e., what information is there?

(I&apos;m fuzzy on all this)</span></div><div id="t1548371509017200" t="2019-01-24 23:11:49 aisamu Oh, sorry for the delay!
Here&apos;s the linked page - on the section &quot;Including Results&quot; you can see an example:
  http://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html 

I&apos;m only getting the second kind of output, instead of both (or just the first)"><a href="#t1548371509017200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">23:11:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â aisamuÂ </span><span>Oh, sorry for the delay!
Here&apos;s the linked page - on the section &quot;Including Results&quot; you can see an example:
 </span><a href="http://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html" target="_blank">http://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html</a><span>

I&apos;m only getting the second kind of output, instead of both (or just the first)</span></div><div id="t1548371983017500" t="2019-01-24 23:19:43 gfredericks maybe this commit removed it by accident?  https://github.com/gfredericks/test.chuck/commit/b45fb4db83f66"><a href="#t1548371983017500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">23:19:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>maybe this commit removed it by accident? </span><a href="https://github.com/gfredericks/test.chuck/commit/b45fb4db83f66" target="_blank">https://github.com/gfredericks/test.chuck/commit/b45fb4db83f66</a></div><div id="t1548371997017700" t="2019-01-24 23:19:57 gfredericks it&apos;s probably easy to interpret the output as accidentally oververbose"><a href="#t1548371997017700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">23:19:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s probably easy to interpret the output as accidentally oververbose</span></div><div id="t1548372316018000" t="2019-01-24 23:25:16 gfredericks looking more closely, it&apos;s possible that the addition of the  not-falsey-or-exception?  call meant that the output originally intended wasn&apos;t happening at that point, so it really did look redundant"><a href="#t1548372316018000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">23:25:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>looking more closely, it&apos;s possible that the addition of the </span><code>not-falsey-or-exception?</code><span> call meant that the output originally intended wasn&apos;t happening at that point, so it really did look redundant</span></div><div id="t1548372398018200" t="2019-01-24 23:26:38 gfredericks I think a PR that adds it back in would be okay, but a PR that adds custom reporting so that there&apos;s only one  FAIL  line printed instead of two would be even better, probably"><a href="#t1548372398018200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-24</span>Â <span class="t" onclick="H(this)">23:26:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think a PR that adds it back in would be okay, but a PR that adds custom reporting so that there&apos;s only one </span><code>FAIL</code><span> line printed instead of two would be even better, probably</span></div><div id="t1548419139018400" t="2019-01-25 12:25:39 aisamu Great, thanks for the guidance!"><a href="#t1548419139018400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-25</span>Â <span class="t" onclick="H(this)">12:25:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â aisamuÂ </span><span>Great, thanks for the guidance!</span></div><div id="t1548595012021800" t="2019-01-27 13:16:52 dangercoder Do you guys use any external stateful things like a database (Redis) or do you create simulators for all of it? Lets say you want to create property based tests for a sequence of function calls that uses Redis."><a href="#t1548595012021800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">13:16:52</span>Â Â Â Â Â Â Â Â Â dangercoderÂ </span><span>Do you guys use any external stateful things like a database (Redis) or do you create simulators for all of it? Lets say you want to create property based tests for a sequence of function calls that uses Redis.</span></div><div id="t1548595081021900" t="2019-01-27 13:18:01 dangercoder I was thinking of just having a redis-test-instance and then I will &quot;Clean&quot; it after all tests are done running."><a href="#t1548595081021900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">13:18:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â dangercoderÂ </span><span>I was thinking of just having a redis-test-instance and then I will &quot;Clean&quot; it after all tests are done running.</span></div><div id="t1548596638022300" t="2019-01-27 13:43:58 gfredericks yeah you&apos;d want to effectively reset the database as part of your trial"><a href="#t1548596638022300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">13:43:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah you&apos;d want to effectively reset the database as part of your trial</span></div><div id="t1548596653022700" t="2019-01-27 13:44:13 gfredericks I&apos;ve certainly done that before

you can find bugs in your database that way  ğŸ™‚"><a href="#t1548596653022700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">13:44:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve certainly done that before

you can find bugs in your database that way </span><b>ğŸ™‚</b></div><div id="t1548596695023400" t="2019-01-27 13:44:55 gfredericks but having to reset something in a different process can definitely lead to fairly slow tests, so you have to have some tolerance for that"><a href="#t1548596695023400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">13:44:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but having to reset something in a different process can definitely lead to fairly slow tests, so you have to have some tolerance for that</span></div><div id="t1548608293026600" t="2019-01-27 16:58:13 hiredman a year (maybe two?) ago we switched out the redis library we used at work, and I took all the operations we did using an old redis library and defined them as a protocol, then implemented that protocol on a concurrent hashmap and on the new redis library, then I wrote the thunderdome, which would take a generated list of redis operations and two  things that satisfied the redis protocol and run those operations against them comparing the results."><a href="#t1548608293026600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">16:58:13</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>a year (maybe two?) ago we switched out the redis library we used at work, and I took all the operations we did using an old redis library and defined them as a protocol, then implemented that protocol on a concurrent hashmap and on the new redis library, then I wrote the thunderdome, which would take a generated list of redis operations and two  things that satisfied the redis protocol and run those operations against them comparing the results.</span></div><div id="t1548608409026800" t="2019-01-27 17:00:09 hiredman https://github.com/advancedtelematic/quickcheck-state-machine  is super interesting"><a href="#t1548608409026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">17:00:09</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><a href="https://github.com/advancedtelematic/quickcheck-state-machine" target="_blank">https://github.com/advancedtelematic/quickcheck-state-machine</a><span> is super interesting</span></div><div id="t1548610796027200" t="2019-01-27 17:39:56 gfredericks @hiredman did you find bugs in redis?"><a href="#t1548610796027200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">17:39:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@hiredman did you find bugs in redis?</span></div><div id="t1548612221030400" t="2019-01-27 18:03:41 hiredman I did not, I wasn&apos;t really exercising redis, the kind of api layer I pulled out, we aren&apos;t (weren&apos;t?) using redis all that much, but I wanted to make sure the operations behaved the same when moving from a higher level library (lots of built in serialization magic) to a lower level library (doing all the serialization ourselves). I think the protocol I ended up defining to encapsulate our redis use was maybe 4 functions"><a href="#t1548612221030400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-27</span>Â <span class="t" onclick="H(this)">18:03:41</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>I did not, I wasn&apos;t really exercising redis, the kind of api layer I pulled out, we aren&apos;t (weren&apos;t?) using redis all that much, but I wanted to make sure the operations behaved the same when moving from a higher level library (lots of built in serialization magic) to a lower level library (doing all the serialization ourselves). I think the protocol I ended up defining to encapsulate our redis use was maybe 4 functions</span></div><div id="t1548699036032600" t="2019-01-28 18:10:36 wilkerlucio hello people, I just like to share something that I done and found cool, its about how to setup complex configurable generators, in my case I did a generator setup for building random EQL queries (its like the datomic pull syntax), the way I done is by sending to generators thenselves a map environment so the user could replace parts of it when is needed, I posted some docs about it here  https://github.com/edn-query-language/eql#generation . @gfredericks I would love to know what you think about this approach, its you see as a good pattern or maybe you have a better way to do it, thanks all!"><a href="#t1548699036032600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:10:36</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>hello people, I just like to share something that I done and found cool, its about how to setup complex configurable generators, in my case I did a generator setup for building random EQL queries (its like the datomic pull syntax), the way I done is by sending to generators thenselves a map environment so the user could replace parts of it when is needed, I posted some docs about it here </span><a href="https://github.com/edn-query-language/eql#generation" target="_blank">https://github.com/edn-query-language/eql#generation</a><span>. @gfredericks I would love to know what you think about this approach, its you see as a good pattern or maybe you have a better way to do it, thanks all!</span></div><div id="t1548700205033100" t="2019-01-28 18:30:05 gfredericks @wilkerlucio what&apos;s the arg to those functions that&apos;s being ignored?"><a href="#t1548700205033100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:30:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@wilkerlucio what&apos;s the arg to those functions that&apos;s being ignored?</span></div><div id="t1548700314034200" t="2019-01-28 18:31:54 wilkerlucio @gfredericks you mean in the default generators? if the arg is ignored it means that generator is not relying on anything that can be customised, usually the leaves in the process, makes sense?"><a href="#t1548700314034200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:31:54</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>@gfredericks you mean in the default generators? if the arg is ignored it means that generator is not relying on anything that can be customised, usually the leaves in the process, makes sense?</span></div><div id="t1548700347034700" t="2019-01-28 18:32:27 gfredericks in the examples, you customize things with  (fn [_] ...)"><a href="#t1548700347034700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:32:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>in the examples, you customize things with </span><code>(fn [_] ...)</code></div><div id="t1548700365035000" t="2019-01-28 18:32:45 wilkerlucio ah, take a look this:  https://github.com/edn-query-language/eql/blob/master/src/edn_query_language/core.cljc#L10-L121"><a href="#t1548700365035000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:32:45</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>ah, take a look this: </span><a href="https://github.com/edn-query-language/eql/blob/master/src/edn_query_language/core.cljc#L10-L121" target="_blank">https://github.com/edn-query-language/eql/blob/master/src/edn_query_language/core.cljc#L10-L121</a></div><div id="t1548700372035300" t="2019-01-28 18:32:52 wilkerlucio here you can see some usages of the params"><a href="#t1548700372035300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:32:52</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>here you can see some usages of the params</span></div><div id="t1548700385035700" t="2019-01-28 18:33:05 wilkerlucio in case you wanted to re-use something on the map, you could pull it from that argument"><a href="#t1548700385035700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:33:05</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>in case you wanted to re-use something on the map, you could pull it from that argument</span></div><div id="t1548700433035900" t="2019-01-28 18:33:53 gfredericks ah I see"><a href="#t1548700433035900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:33:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ah I see</span></div><div id="t1548700460036500" t="2019-01-28 18:34:20 gfredericks I think you could use  (constantly ...)  instead of  (fn [_] ...) , which would be &quot;more performant&quot; in a maybe-doesn&apos;t-matter sense"><a href="#t1548700460036500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:34:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think you could use </span><code>(constantly ...)</code><span> instead of </span><code>(fn [_] ...)</code><span>, which would be &quot;more performant&quot; in a maybe-doesn&apos;t-matter sense</span></div><div id="t1548700487037100" t="2019-01-28 18:34:47 gfredericks depends on if the function gets called multiple times or not"><a href="#t1548700487037100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:34:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>depends on if the function gets called multiple times or not</span></div><div id="t1548700492037400" t="2019-01-28 18:34:52 gfredericks which I can&apos;t tell at a glance"><a href="#t1548700492037400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:34:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which I can&apos;t tell at a glance</span></div><div id="t1548700514038100" t="2019-01-28 18:35:14 wilkerlucio interesting, I didn&apos;t knew constantly was faster, but really this is only used to build the generators, which is a rather quick operation compared to how much takes to run (and you can cache the built generator if needed to)"><a href="#t1548700514038100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:35:14</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>interesting, I didn&apos;t knew constantly was faster, but really this is only used to build the generators, which is a rather quick operation compared to how much takes to run (and you can cache the built generator if needed to)</span></div><div id="t1548700518038300" t="2019-01-28 18:35:18 gfredericks but the general idea of passing a map of generator options down a whole tree of generators is a really good one I think, and one I&apos;ve thought about for test.check"><a href="#t1548700518038300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:35:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but the general idea of passing a map of generator options down a whole tree of generators is a really good one I think, and one I&apos;ve thought about for test.check</span></div><div id="t1548700544038900" t="2019-01-28 18:35:44 wilkerlucio yeah, I also found that to be a good way to control for depth, it worked quite well"><a href="#t1548700544038900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:35:44</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>yeah, I also found that to be a good way to control for depth, it worked quite well</span></div><div id="t1548700545039100" t="2019-01-28 18:35:45 gfredericks constantly just means that the return value gets created once, compared to a  fn  where it gets created every time"><a href="#t1548700545039100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:35:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>constantly just means that the return value gets created once, compared to a </span><code>fn</code><span> where it gets created every time</span></div><div id="t1548700648039500" t="2019-01-28 18:37:28 wilkerlucio ah, makes sense, so the generator will be only instantiated once per process"><a href="#t1548700648039500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:37:28</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>ah, makes sense, so the generator will be only instantiated once per process</span></div><div id="t1548700693040200" t="2019-01-28 18:38:13 wilkerlucio at same time it would be always instantiated, even if the user doesn&apos;t use anything, seems doesn&apos;t matter much in the end  :man-shrugging:"><a href="#t1548700693040200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:38:13</span>Â Â Â Â Â Â Â Â Â wilkerlucioÂ </span><span>at same time it would be always instantiated, even if the user doesn&apos;t use anything, seems doesn&apos;t matter much in the end </span><b>:man-shrugging:</b></div><div id="t1548701153040400" t="2019-01-28 18:45:53 gfredericks yep"><a href="#t1548701153040400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-01-28</span>Â <span class="t" onclick="H(this)">18:45:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yep</span></div><div id="t1549101864043700" t="2019-02-02 10:04:24 cheatex Hi. I try to write a test and stuck with generator/bind semantics. Say I want to write a test map&apos;s get (my actual goal is more complex, this one just a good showcase)."><a href="#t1549101864043700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:04:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Hi. I try to write a test and stuck with generator/bind semantics. Say I want to write a test map&apos;s get (my actual goal is more complex, this one just a good showcase).</span></div><div id="t1549101895044300" t="2019-02-02 10:04:55 cheatex Here is a generator for keys
 (defn keys-from [map]
  (gen/elements (keys map)))
"><a href="#t1549101895044300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:04:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Here is a generator for keys
</span><pre>(defn keys-from [map]
  (gen/elements (keys map)))
</pre></div><div id="t1549101925044700" t="2019-02-02 10:05:25 cheatex and i can use it like this
 (gen/sample (keys-from (gen/generate (gen/map gen/keyword gen/nat))))"><a href="#t1549101925044700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:05:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>and i can use it like this
</span><pre>(gen/sample (keys-from (gen/generate (gen/map gen/keyword gen/nat))))</pre></div><div id="t1549101978045100" t="2019-02-02 10:06:18 cheatex Now I can write a property
 (def prop-test
  (prop/for-all [map (gen/map gen/keyword gen/nat)
                 key (keys-from map)]
                (get map key)))
"><a href="#t1549101978045100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:06:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Now I can write a property
</span><pre>(def prop-test
  (prop/for-all [map (gen/map gen/keyword gen/nat)
                 key (keys-from map)]
                (get map key)))
</pre></div><div id="t1549102005045600" t="2019-02-02 10:06:45 cheatex But checking it fails, claiming  map  isn&apos;t a seq"><a href="#t1549102005045600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:06:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>But checking it fails, claiming </span><code>map</code><span> isn&apos;t a seq</span></div><div id="t1549102328046100" t="2019-02-02 10:12:08 cheatex More precisely:  https://gist.github.com/CheatEx/91659e49e5f6964aaf8a7a74529af287"><a href="#t1549102328046100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:12:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>More precisely: </span><a href="https://gist.github.com/CheatEx/91659e49e5f6964aaf8a7a74529af287" target="_blank">https://gist.github.com/CheatEx/91659e49e5f6964aaf8a7a74529af287</a></div><div id="t1549102490047000" t="2019-02-02 10:14:50 cheatex This from (defspec ..), (tc/quick-check 1 prop-test) yields completely different failure."><a href="#t1549102490047000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:14:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>This from (defspec ..), (tc/quick-check 1 prop-test) yields completely different failure.</span></div><div id="t1549103231047900" t="2019-02-02 10:27:11 cheatex My another attempt
 (defn keys-from-gen [map-gen]
  (gen/let [map (gen/such-that (complement empty?) map-gen)]
    (gen/elements (keys map))))

(gen/sample (keys-from-gen (gen/map gen/keyword gen/nat))) ; works well

(def prop-test-gen
  (prop/for-all [map (gen/map gen/keyword gen/nat)
                 key (keys-from-gen map)]
                (get map key)))

(defspec map-gen-test 2 prop-test-gen)
 
fails with
 Uncaught Error: Assert failed: Second arg to such-that must be a generator"><a href="#t1549103231047900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:27:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>My another attempt
</span><pre>(defn keys-from-gen [map-gen]
  (gen/let [map (gen/such-that (complement empty?) map-gen)]
    (gen/elements (keys map))))

(gen/sample (keys-from-gen (gen/map gen/keyword gen/nat))) ; works well

(def prop-test-gen
  (prop/for-all [map (gen/map gen/keyword gen/nat)
                 key (keys-from-gen map)]
                (get map key)))

(defspec map-gen-test 2 prop-test-gen)
</pre><span>
fails with
</span><pre>Uncaught Error: Assert failed: Second arg to such-that must be a generator</pre></div><div id="t1549103320049300" t="2019-02-02 10:28:40 cheatex So symbols in  for-all  bound to neither real values nor generators. I am totally confused. How do I write such property?"><a href="#t1549103320049300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">10:28:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>So symbols in </span><code>for-all</code><span> bound to neither real values nor generators. I am totally confused. How do I write such property?</span></div><div id="t1549119884050200" t="2019-02-02 15:04:44 gfredericks @cheatex the confusion comes from the fact that the binding names in  prop/for-all  aren&apos;t visible at all to the expressions for subsequent bindings"><a href="#t1549119884050200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:04:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@cheatex the confusion comes from the fact that the binding names in </span><code>prop/for-all</code><span> aren&apos;t visible at all to the expressions for subsequent bindings</span></div><div id="t1549119892050500" t="2019-02-02 15:04:52 gfredericks (i.e., they&apos;re all done &quot;in parallel&quot;)"><a href="#t1549119892050500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:04:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(i.e., they&apos;re all done &quot;in parallel&quot;)</span></div><div id="t1549119919051100" t="2019-02-02 15:05:19 gfredericks normally you&apos;d get whatever error you normally get when you use a name that&apos;s not visible, but in this case you&apos;re getting more confusing errors because you&apos;re happening to use the name  map , which already means  cljs.core/map"><a href="#t1549119919051100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:05:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>normally you&apos;d get whatever error you normally get when you use a name that&apos;s not visible, but in this case you&apos;re getting more confusing errors because you&apos;re happening to use the name </span><code>map</code><span>, which already means </span><code>cljs.core/map</code></div><div id="t1549119928051300" t="2019-02-02 15:05:28 gfredericks so you&apos;re passing the  map  function to  get"><a href="#t1549119928051300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:05:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so you&apos;re passing the </span><code>map</code><span> function to </span><code>get</code></div><div id="t1549119965051900" t="2019-02-02 15:06:05 gfredericks prop/for-all  doesn&apos;t have a way to get the  bind  semantics, so you have to do this with an additional generator to help you compose things"><a href="#t1549119965051900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:06:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>prop/for-all</code><span> doesn&apos;t have a way to get the </span><code>bind</code><span> semantics, so you have to do this with an additional generator to help you compose things</span></div><div id="t1549120008052600" t="2019-02-02 15:06:48 gfredericks (def gen-map-and-key (gen/let [m (gen/map gen/keyword gen/nat), k (keys-from-gen m)] {:map m :key k}))"><a href="#t1549120008052600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:06:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(def gen-map-and-key (gen/let [m (gen/map gen/keyword gen/nat), k (keys-from-gen m)] {:map m :key k}))</code></div><div id="t1549120660052900" t="2019-02-02 15:17:40 cheatex Thanks for the explanation."><a href="#t1549120660052900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:17:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Thanks for the explanation.</span></div><div id="t1549120788055300" t="2019-02-02 15:19:48 cheatex I&apos;ve made this kind of generator for my problem, but i&apos;m not perfectly happy with it. It basically needs to generate a huge data structure to create a key for it... and than throw it away and create a new one just to make another key."><a href="#t1549120788055300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:19:48</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>I&apos;ve made this kind of generator for my problem, but i&apos;m not perfectly happy with it. It basically needs to generate a huge data structure to create a key for it... and than throw it away and create a new one just to make another key.</span></div><div id="t1549120843056300" t="2019-02-02 15:20:43 gfredericks For each trial, you mean?"><a href="#t1549120843056300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:20:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>For each trial, you mean?</span></div><div id="t1549120846056400" t="2019-02-02 15:20:46 cheatex Is there a way to make few keys out of single generated map?"><a href="#t1549120846056400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:20:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Is there a way to make few keys out of single generated map?</span></div><div id="t1549120850056600" t="2019-02-02 15:20:50 cheatex Yes"><a href="#t1549120850056600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:20:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Yes</span></div><div id="t1549120910057400" t="2019-02-02 15:21:50 cheatex Probably, not sure of precise meaning of &quot;trial&quot; in test.check  ğŸ™‚"><a href="#t1549120910057400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:21:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Probably, not sure of precise meaning of &quot;trial&quot; in test.check </span><b>ğŸ™‚</b></div><div id="t1549121003059500" t="2019-02-02 15:23:23 cheatex I&apos;ve had idea of generating [map [&amp;keys]] but that would make properties to be a huge  and  and hard to find exact failing key."><a href="#t1549121003059500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:23:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>I&apos;ve had idea of generating [map [&amp;keys]] but that would make properties to be a huge </span><code>and</code><span> and hard to find exact failing key.</span></div><div id="t1549121069060200" t="2019-02-02 15:24:29 gfredericks you don&apos;t have to spell out the  and , you could use  every?"><a href="#t1549121069060200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:24:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you don&apos;t have to spell out the </span><code>and</code><span>, you could use </span><code>every?</code></div><div id="t1549121073060400" t="2019-02-02 15:24:33 gfredericks e.g., you could check every key"><a href="#t1549121073060400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:24:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., you could check every key</span></div><div id="t1549121089061000" t="2019-02-02 15:24:49 gfredericks and as long as the failing map entry is independent of the others, it should shrink to a singleton map"><a href="#t1549121089061000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:24:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and as long as the failing map entry is independent of the others, it should shrink to a singleton map</span></div><div id="t1549121288062200" t="2019-02-02 15:28:08 cheatex They won&apos;t be independent in my case."><a href="#t1549121288062200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:28:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>They won&apos;t be independent in my case.</span></div><div id="t1549121323062600" t="2019-02-02 15:28:43 gfredericks will it be somewhat independent? like should shrinking remove most of the entries?"><a href="#t1549121323062600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:28:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>will it be somewhat independent? like should shrinking remove most of the entries?</span></div><div id="t1549121427063000" t="2019-02-02 15:30:27 gfredericks if that&apos;s a big problem, you could use the  subsequence  generator from this library  https://github.com/gfredericks/test.chuck"><a href="#t1549121427063000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:30:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if that&apos;s a big problem, you could use the </span><code>subsequence</code><span> generator from this library </span><a href="https://github.com/gfredericks/test.chuck" target="_blank">https://github.com/gfredericks/test.chuck</a></div><div id="t1549121436063300" t="2019-02-02 15:30:36 gfredericks to get a subset of the keys"><a href="#t1549121436063300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:30:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>to get a subset of the keys</span></div><div id="t1549121445063700" t="2019-02-02 15:30:45 gfredericks and then that would shrink to a subset with only one failing key"><a href="#t1549121445063700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:30:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and then that would shrink to a subset with only one failing key</span></div><div id="t1549121793064100" t="2019-02-02 15:36:33 cheatex Looks like it could do the trick"><a href="#t1549121793064100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:36:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Looks like it could do the trick</span></div><div id="t1549122031066400" t="2019-02-02 15:40:31 cheatex But generally. Is it impossible to use some generated value to set up other generator, use both value and generator in a property and than go to new one?"><a href="#t1549122031066400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:40:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>But generally. Is it impossible to use some generated value to set up other generator, use both value and generator in a property and than go to new one?</span></div><div id="t1549122089066700" t="2019-02-02 15:41:29 gfredericks I&apos;m not sure what you mean by &quot;and than than go to new one&quot;"><a href="#t1549122089066700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:41:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m not sure what you mean by &quot;and than than go to new one&quot;</span></div><div id="t1549122144067300" t="2019-02-02 15:42:24 cheatex I mean new value and derived generator"><a href="#t1549122144067300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:42:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>I mean new value and derived generator</span></div><div id="t1549122278069100" t="2019-02-02 15:44:38 cheatex So in my example when I run property check with size 50 it (just sample numbers to show magnitudes) generates 5 maps and 10 keys for every map."><a href="#t1549122278069100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:44:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>So in my example when I run property check with size 50 it (just sample numbers to show magnitudes) generates 5 maps and 10 keys for every map.</span></div><div id="t1549122327069900" t="2019-02-02 15:45:27 cheatex e.g. number of calls to first generator &lt;&lt; than number of calls to derived"><a href="#t1549122327069900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:45:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>e.g. number of calls to first generator &lt;&lt; than number of calls to derived</span></div><div id="t1549122386070300" t="2019-02-02 15:46:26 gfredericks there&apos;s a lot of ways to control the size or complexity of a generator"><a href="#t1549122386070300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:46:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a lot of ways to control the size or complexity of a generator</span></div><div id="t1549122395070500" t="2019-02-02 15:46:35 gfredericks it might help to look at  https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md"><a href="#t1549122395070500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:46:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it might help to look at </span><a href="https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md" target="_blank">https://github.com/clojure/test.check/blob/master/doc/growth-and-shrinking.md</a></div><div id="t1549122439070900" t="2019-02-02 15:47:19 cheatex I&apos;ve seen it..."><a href="#t1549122439070900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:47:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>I&apos;ve seen it...</span></div><div id="t1549122459071400" t="2019-02-02 15:47:39 cheatex Probably I need to work out better example and problem statement."><a href="#t1549122459071400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:47:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Probably I need to work out better example and problem statement.</span></div><div id="t1549122500071900" t="2019-02-02 15:48:20 cheatex Thank you anyway!"><a href="#t1549122500071900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-02</span>Â <span class="t" onclick="H(this)">15:48:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â cheatexÂ </span><span>Thank you anyway!</span></div><div id="t1549313668073500" t="2019-02-04 20:54:28 dtsiedel Is there some sort of workaround to test private functions?"><a href="#t1549313668073500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span>Â <span class="t" onclick="H(this)">20:54:28</span>Â Â Â Â Â Â Â Â Â Â Â Â dtsiedelÂ </span><span>Is there some sort of workaround to test private functions?</span></div><div id="t1549313746073900" t="2019-02-04 20:55:46 gfredericks @dts.siedel  #&apos;  is the general workaround for that, not specific to test.check"><a href="#t1549313746073900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span>Â <span class="t" onclick="H(this)">20:55:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@dts.siedel </span><code>#&apos;</code><span> is the general workaround for that, not specific to test.check</span></div><div id="t1549313963074400" t="2019-02-04 20:59:23 dtsiedel Ah I was afraid of that, it is pretty hacky in my eyes. Thanks for quick response @gfredericks"><a href="#t1549313963074400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span>Â <span class="t" onclick="H(this)">20:59:23</span>Â Â Â Â Â Â Â Â Â Â Â Â dtsiedelÂ </span><span>Ah I was afraid of that, it is pretty hacky in my eyes. Thanks for quick response @gfredericks</span></div><div id="t1549657296076600" t="2019-02-08 20:21:36 nwjsmith If I upgrade test.check from 0.9.0 to 0.10.0, will the same seed still produce the same test values?"><a href="#t1549657296076600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">20:21:36</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>If I upgrade test.check from 0.9.0 to 0.10.0, will the same seed still produce the same test values?</span></div><div id="t1549657346077600" t="2019-02-08 20:22:26 nwjsmith (not specifically thinking about those versions, just checking my gut feeling. My gut feeling is that they wonâ€™t stay the same across test.check versions)"><a href="#t1549657346077600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">20:22:26</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>(not specifically thinking about those versions, just checking my gut feeling. My gut feeling is that they wonâ€™t stay the same across test.check versions)</span></div><div id="t1549662667078400" t="2019-02-08 21:51:07 gfredericks @nwjsmith that gut feeling is right, there&apos;s no attempt to preserve that, since sometimes changes involve improvements to a generator&apos;s distribution

but in this particular case I think a lot of the lower-level generators will stay the same"><a href="#t1549662667078400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">21:51:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@nwjsmith that gut feeling is right, there&apos;s no attempt to preserve that, since sometimes changes involve improvements to a generator&apos;s distribution

but in this particular case I think a lot of the lower-level generators will stay the same</span></div><div id="t1549662688078800" t="2019-02-08 21:51:28 gfredericks recursive-gen is the only one that I know for sure would be different"><a href="#t1549662688078800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">21:51:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>recursive-gen is the only one that I know for sure would be different</span></div><div id="t1549662700079100" t="2019-02-08 21:51:40 gfredericks which I guess extends to gen/any and friends as well"><a href="#t1549662700079100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">21:51:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which I guess extends to gen/any and friends as well</span></div><div id="t1549664585079300" t="2019-02-08 22:23:05 nwjsmith good to know, thanks!"><a href="#t1549664585079300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-08</span>Â <span class="t" onclick="H(this)">22:23:05</span>Â Â Â Â Â Â Â Â Â Â Â Â nwjsmithÂ </span><span>good to know, thanks!</span></div><div id="t1549899401002000" t="2019-02-11 15:36:41 Ajay hi, is it possible to make a generator from a custom lazy sequence? For practice, I was trying to use test-check to test FizzBuzz problem - I want a generator that returns multiples of 3 but not of 5 or 15"><a href="#t1549899401002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:36:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AjayÂ </span><span>hi, is it possible to make a generator from a custom lazy sequence? For practice, I was trying to use test-check to test FizzBuzz problem - I want a generator that returns multiples of 3 but not of 5 or 15</span></div><div id="t1549899529002700" t="2019-02-11 15:38:49 gfredericks gen/such-that would suffice here for casual use"><a href="#t1549899529002700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:38:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gen/such-that would suffice here for casual use</span></div><div id="t1549899571003100" t="2019-02-11 15:39:31 Ajay but it gave up when I tried"><a href="#t1549899571003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:39:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AjayÂ </span><span>but it gave up when I tried</span></div><div id="t1549899908003500" t="2019-02-11 15:45:08 gfredericks Give it a higher max-tries, like 100"><a href="#t1549899908003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:45:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Give it a higher max-tries, like 100</span></div><div id="t1549899944003900" t="2019-02-11 15:45:44 alexmiller itâ€™s help to invert your thinking for stuff like this"><a href="#t1549899944003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:45:44</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>itâ€™s help to invert your thinking for stuff like this</span></div><div id="t1549899968004400" t="2019-02-11 15:46:08 alexmiller generate a number, then use fmap to multiply by 3 so you always generate multiples of 3"><a href="#t1549899968004400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:46:08</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>generate a number, then use fmap to multiply by 3 so you always generate multiples of 3</span></div><div id="t1549899992005100" t="2019-02-11 15:46:32 alexmiller could then use such-that over that to exclude multiples of 5 if needed"><a href="#t1549899992005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:46:32</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>could then use such-that over that to exclude multiples of 5 if needed</span></div><div id="t1549900053006100" t="2019-02-11 15:47:33 Ajay Ok I had tried  generate a number, then use fmap to multiply by 3 so you always generate multiples of 3  but didn&apos;t apply such-that to exclude multiples of 5, let me try, thank you for all replies!"><a href="#t1549900053006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:47:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AjayÂ </span><span>Ok I had tried </span><code>generate a number, then use fmap to multiply by 3 so you always generate multiples of 3</code><span> but didn&apos;t apply such-that to exclude multiples of 5, let me try, thank you for all replies!</span></div><div id="t1549900178006500" t="2019-02-11 15:49:38 gfredericks yeah I forgot to say the multiply part"><a href="#t1549900178006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:49:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah I forgot to say the multiply part</span></div><div id="t1549900199006900" t="2019-02-11 15:49:59 gfredericks you could still use such-that without multiplying, it&apos;d just be even slower and you&apos;d probable need an even higher max-tries"><a href="#t1549900199006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:49:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could still use such-that without multiplying, it&apos;d just be even slower and you&apos;d probable need an even higher max-tries</span></div><div id="t1549900261007500" t="2019-02-11 15:51:01 gfredericks if you want to be fancy you can use some number theory to generate a good distribution of such numbers w/o filtering"><a href="#t1549900261007500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:51:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you want to be fancy you can use some number theory to generate a good distribution of such numbers w/o filtering</span></div><div id="t1549900726007900" t="2019-02-11 15:58:46 Ajay could get it to work! thank you!"><a href="#t1549900726007900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">15:58:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â AjayÂ </span><span>could get it to work! thank you!</span></div><div id="t1549900838008800" t="2019-02-11 16:00:38 alexmiller you could gen a set of non-5 numbers, then multiply all of them and by 3 to generate only numbers divisible by 3 but not 5 :)"><a href="#t1549900838008800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">16:00:38</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>you could gen a set of non-5 numbers, then multiply all of them and by 3 to generate only numbers divisible by 3 but not 5 :)</span></div><div id="t1549900868009100" t="2019-02-11 16:01:08 gfredericks @alexmiller that&apos;s just moving the filtering to the first generator, right?"><a href="#t1549900868009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">16:01:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@alexmiller that&apos;s just moving the filtering to the first generator, right?</span></div><div id="t1549900974009300" t="2019-02-11 16:02:54 alexmiller yeah"><a href="#t1549900974009300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">16:02:54</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah</span></div><div id="t1549901177010300" t="2019-02-11 16:06:17 gfredericks the fancy thing I have in mind is basically  (gen/let [fifteens gen/int, threes (gen/choose 1 4)] (+ (* 15 fifteens) (* 3 threes))) 

I think that&apos;d work"><a href="#t1549901177010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-11</span>Â <span class="t" onclick="H(this)">16:06:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the fancy thing I have in mind is basically </span><code>(gen/let [fifteens gen/int, threes (gen/choose 1 4)] (+ (* 15 fifteens) (* 3 threes)))</code><span>

I think that&apos;d work</span></div><div id="t1550482594011800" t="2019-02-18 09:36:34 borkdude I wanted to generate arguments for  subs :
 (def subs-args-gen
  (gen/fmap
   (fn [[str [start end]]]
     (if end
       [str start end]
       [str start]))
   (gen/bind
    (gen/string)
    (fn [s]
      (gen/tuple (gen/return s)
                 (gen/bind
                  (gen/choose 0 (count s))
                  (fn [start]
                    (gen/one-of
                     [(gen/tuple (gen/return start))
                      (gen/tuple (gen/return start)
                                 (gen/choose start (count s)))]))))))))
(comment
  (gen/sample subs-args-gen)
;;  ([&quot;&quot; 0] [&quot;k&quot; 1 1] [&quot;&quot; 0] [&quot;â€¦_&quot; 0 0] [&quot;&quot; 0] [&quot;Â¥/&quot; 0] [&quot;Âµ&quot; 0] [&quot;ÃÂ¦\n&quot; 3] [&quot;&quot; 0] [&quot;\tsÃˆaÃ­Ã¥&quot; 1])
)
 
It feels a bit verbose, maybe there was a nicer way to do this?"><a href="#t1550482594011800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">09:36:34</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I wanted to generate arguments for </span><code>subs</code><span>:
</span><pre>(def subs-args-gen
  (gen/fmap
   (fn [[str [start end]]]
     (if end
       [str start end]
       [str start]))
   (gen/bind
    (gen/string)
    (fn [s]
      (gen/tuple (gen/return s)
                 (gen/bind
                  (gen/choose 0 (count s))
                  (fn [start]
                    (gen/one-of
                     [(gen/tuple (gen/return start))
                      (gen/tuple (gen/return start)
                                 (gen/choose start (count s)))]))))))))
(comment
  (gen/sample subs-args-gen)
;;  ([&quot;&quot; 0] [&quot;k&quot; 1 1] [&quot;&quot; 0] [&quot;â€¦_&quot; 0 0] [&quot;&quot; 0] [&quot;Â¥/&quot; 0] [&quot;Âµ&quot; 0] [&quot;ÃÂ¦\n&quot; 3] [&quot;&quot; 0] [&quot;\tsÃˆaÃ­Ã¥&quot; 1])
)
</pre><span>
It feels a bit verbose, maybe there was a nicer way to do this?</span></div><div id="t1550499670012100" t="2019-02-18 14:21:10 gfredericks that&apos;s a good one"><a href="#t1550499670012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:21:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that&apos;s a good one</span></div><div id="t1550499696012400" t="2019-02-18 14:21:36 gfredericks I&apos;m trying to think of something that shrinks better than all the  gen/bind s"><a href="#t1550499696012400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:21:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m trying to think of something that shrinks better than all the </span><code>gen/bind</code><span>s</span></div><div id="t1550499765012600" t="2019-02-18 14:22:45 gfredericks and has a good distribution"><a href="#t1550499765012600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:22:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and has a good distribution</span></div><div id="t1550499773013000" t="2019-02-18 14:22:53 gfredericks those things can trade off with readability/simplicity sometimes"><a href="#t1550499773013000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:22:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>those things can trade off with readability/simplicity sometimes</span></div><div id="t1550499956014800" t="2019-02-18 14:25:56 gfredericks here&apos;s a relatively simple approach

 (gen/let [[s start end use-end?]
          (gen/tuple gen/string gen/nat gen/nat gen/boolean)]
  (let [start (min start (count s))
        end (min end (count s))
        [start end] (sort [start end])]
    (cond-&gt; [s start] use-end? (conj end))))
"><a href="#t1550499956014800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:25:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>here&apos;s a relatively simple approach

</span><pre>(gen/let [[s start end use-end?]
          (gen/tuple gen/string gen/nat gen/nat gen/boolean)]
  (let [start (min start (count s))
        end (min end (count s))
        [start end] (sort [start end])]
    (cond-&gt; [s start] use-end? (conj end))))
</pre></div><div id="t1550499989015600" t="2019-02-18 14:26:29 gfredericks there might be edge cases there with  (count s) , I&apos;m not sure how  subs  works"><a href="#t1550499989015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:26:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there might be edge cases there with </span><code>(count s)</code><span>, I&apos;m not sure how </span><code>subs</code><span> works</span></div><div id="t1550500035016600" t="2019-02-18 14:27:15 gfredericks and you might complain that this will be more likely than you&apos;d want to generate args that are equal to  (count s) , and if that bothers you then you could do something like use  (gen/choose 0 1000000)  for  start  and  end  and then scale them down to the size of the string"><a href="#t1550500035016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:27:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and you might complain that this will be more likely than you&apos;d want to generate args that are equal to </span><code>(count s)</code><span>, and if that bothers you then you could do something like use </span><code>(gen/choose 0 1000000)</code><span> for </span><code>start</code><span> and </span><code>end</code><span> and then scale them down to the size of the string</span></div><div id="t1550500069016800" t="2019-02-18 14:27:49 gfredericks @borkdude â‡‘"><a href="#t1550500069016800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:27:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@borkdude â‡‘</span></div><div id="t1550500480017200" t="2019-02-18 14:34:40 borkdude @gfredericks cool, I did not know about  gen/let"><a href="#t1550500480017200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:34:40</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks cool, I did not know about </span><code>gen/let</code></div><div id="t1550500522017800" t="2019-02-18 14:35:22 borkdude the edge cases for subs Iâ€™ve already worked out, 0 &lt;= start &lt;= end &lt;= (count s)"><a href="#t1550500522017800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:35:22</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>the edge cases for subs Iâ€™ve already worked out, 0 &lt;= start &lt;= end &lt;= (count s)</span></div><div id="t1550500541018200" t="2019-02-18 14:35:41 borkdude (yes even end equals to (count s) works)"><a href="#t1550500541018200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:35:41</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>(yes even end equals to (count s) works)</span></div><div id="t1550500602018800" t="2019-02-18 14:36:42 gfredericks So I got it right then I think"><a href="#t1550500602018800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:36:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So I got it right then I think</span></div><div id="t1550500638019100" t="2019-02-18 14:37:18 borkdude yeah, the distribution might be less nice, like you said"><a href="#t1550500638019100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:37:18</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yeah, the distribution might be less nice, like you said</span></div><div id="t1550501559019500" t="2019-02-18 14:52:39 borkdude I like the boolean idea:
 (gen/bind
   (gen/tuple (gen/string) (gen/boolean))
   (fn [[s end?]]
     (if end?
       (gen/bind
        (gen/choose 0 (count s))
        (fn [start]
          (gen/tuple
           (gen/return s)
           (gen/return start)
           (gen/choose start (count s)))))
       (gen/tuple
        (gen/return s)
        (gen/choose 0 (count s))))))
"><a href="#t1550501559019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:52:39</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I like the boolean idea:
</span><pre>(gen/bind
   (gen/tuple (gen/string) (gen/boolean))
   (fn [[s end?]]
     (if end?
       (gen/bind
        (gen/choose 0 (count s))
        (fn [start]
          (gen/tuple
           (gen/return s)
           (gen/return start)
           (gen/choose start (count s)))))
       (gen/tuple
        (gen/return s)
        (gen/choose 0 (count s))))))
</pre></div><div id="t1550501687020100" t="2019-02-18 14:54:47 gfredericks the sorting trick is also good for generating ordered numbers w/o having to do it in stages"><a href="#t1550501687020100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:54:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the sorting trick is also good for generating ordered numbers w/o having to do it in stages</span></div><div id="t1550501733020300" t="2019-02-18 14:55:33 borkdude oh yeah."><a href="#t1550501733020300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:55:33</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>oh yeah.</span></div><div id="t1550501799020600" t="2019-02-18 14:56:39 gfredericks I probably go overboard on avoiding  gen/bind"><a href="#t1550501799020600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:56:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I probably go overboard on avoiding </span><code>gen/bind</code></div><div id="t1550501810021100" t="2019-02-18 14:56:50 gfredericks you can actually write this fairly simply by using multiple clauses in  gen/let"><a href="#t1550501810021100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:56:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can actually write this fairly simply by using multiple clauses in </span><code>gen/let</code></div><div id="t1550501832021500" t="2019-02-18 14:57:12 gfredericks (which expands to  gen/bind )"><a href="#t1550501832021500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:57:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(which expands to </span><code>gen/bind</code><span>)</span></div><div id="t1550501881022400" t="2019-02-18 14:58:01 gfredericks (gen/let [s gen-string, start (gen/choose 0 (count s)), end (gen/choose start (count s)), use-end? gen/boolean] (cond-&gt; [s start] use-end? (conj end)))"><a href="#t1550501881022400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:58:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(gen/let [s gen-string, start (gen/choose 0 (count s)), end (gen/choose start (count s)), use-end? gen/boolean] (cond-&gt; [s start] use-end? (conj end)))</code></div><div id="t1550501909023000" t="2019-02-18 14:58:29 borkdude if gen/tuple accepted nil, then you could write:
 (fn [start]
          (gen/tuple
           (gen/return s)
           (gen/return start)
           (when end? (gen/choose start (count s)))))
"><a href="#t1550501909023000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:58:29</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>if gen/tuple accepted nil, then you could write:
</span><pre>(fn [start]
          (gen/tuple
           (gen/return s)
           (gen/return start)
           (when end? (gen/choose start (count s)))))
</pre></div><div id="t1550501928023200" t="2019-02-18 14:58:48 gfredericks I just have this instinct to not use  gen/bind  if it can be avoided, which is probably not worth the effort in a lot of cases"><a href="#t1550501928023200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">14:58:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just have this instinct to not use </span><code>gen/bind</code><span> if it can be avoided, which is probably not worth the effort in a lot of cases</span></div><div id="t1550502016023500" t="2019-02-18 15:00:16 borkdude is gen/let a new thing? my REPL says it doesnâ€™t exist"><a href="#t1550502016023500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:00:16</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>is gen/let a new thing? my REPL says it doesnâ€™t exist</span></div><div id="t1550502041024200" t="2019-02-18 15:00:41 gfredericks not too new"><a href="#t1550502041024200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:00:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>not too new</span></div><div id="t1550502046024700" t="2019-02-18 15:00:46 borkdude oh wait, gen from test.check, I think Iâ€™m using the one from spec"><a href="#t1550502046024700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:00:46</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>oh wait, gen from test.check, I think Iâ€™m using the one from spec</span></div><div id="t1550502046024800" t="2019-02-18 15:00:46 gfredericks maybe new in 0.9.0?"><a href="#t1550502046024800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:00:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>maybe new in 0.9.0?</span></div><div id="t1550502140025100" t="2019-02-18 15:02:20 borkdude yeah:
 (g/let [s g/string
          start (gen/choose 0 (count s))
          end (gen/choose start (count s))
          use-end? (gen/boolean)]
    (cond-&gt; [s start] use-end? (conj end)))
 
works. awesome."><a href="#t1550502140025100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:02:20</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yeah:
</span><pre>(g/let [s g/string
          start (gen/choose 0 (count s))
          end (gen/choose start (count s))
          use-end? (gen/boolean)]
    (cond-&gt; [s start] use-end? (conj end)))
</pre><span>
works. awesome.</span></div><div id="t1550502156025500" t="2019-02-18 15:02:36 borkdude so  g/let  is the monad-ish thing in test.check"><a href="#t1550502156025500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:02:36</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>so </span><code>g/let</code><span> is the monad-ish thing in test.check</span></div><div id="t1550502174025900" t="2019-02-18 15:02:54 gfredericks yeah; it&apos;s just sugar over  gen/fmap  and  gen/bind"><a href="#t1550502174025900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:02:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah; it&apos;s just sugar over </span><code>gen/fmap</code><span> and </span><code>gen/bind</code></div><div id="t1550502249026100" t="2019-02-18 15:04:09 borkdude totally useful sugar"><a href="#t1550502249026100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:04:09</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>totally useful sugar</span></div><div id="t1550502588026500" t="2019-02-18 15:09:48 borkdude this also works and avoids generating end if not needed:
 (g/let [s g/string
          start (g/choose 0 (count s))
          use-end? g/boolean]
    (if use-end?
      (g/let [end (g/choose start (count s))]
        [s start end])
      [s start]))
"><a href="#t1550502588026500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:09:48</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>this also works and avoids generating end if not needed:
</span><pre>(g/let [s g/string
          start (g/choose 0 (count s))
          use-end? g/boolean]
    (if use-end?
      (g/let [end (g/choose start (count s))]
        [s start end])
      [s start]))
</pre></div><div id="t1550502637026700" t="2019-02-18 15:10:37 gfredericks Yep"><a href="#t1550502637026700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-18</span>Â <span class="t" onclick="H(this)">15:10:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yep</span></div><div id="t1550741587000500" t="2019-02-21 09:33:07 borkdude I get an error with let in clojurescript:
 $ clj -A:test -Sdeps &apos;{:deps {org.clojure/test.check {:mvn/version &quot;0.10.0-alpha3&quot;}}}&apos; -m cljs.main -re node
ClojureScript 1.10.520
cljs.user=&gt; (require &apos;[clojure.test.check.generators :as g])
nil
cljs.user=&gt; (g/let [n (g/choose 0 10)] n)
WARNING: Use of undeclared Var cljs.user/n at line 1 &lt;cljs repl&gt;
WARNING: Use of undeclared Var cljs.user/n at line 1 &lt;cljs repl&gt;
Execution error (Error) at (&lt;cljs repl&gt;:1).
Assert failed: First arg to gen/let must be a vector of bindings.
"><a href="#t1550741587000500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span>Â <span class="t" onclick="H(this)">09:33:07</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I get an error with let in clojurescript:
</span><pre>$ clj -A:test -Sdeps &apos;{:deps {org.clojure/test.check {:mvn/version &quot;0.10.0-alpha3&quot;}}}&apos; -m cljs.main -re node
ClojureScript 1.10.520
cljs.user=&gt; (require &apos;[clojure.test.check.generators :as g])
nil
cljs.user=&gt; (g/let [n (g/choose 0 10)] n)
WARNING: Use of undeclared Var cljs.user/n at line 1 &lt;cljs repl&gt;
WARNING: Use of undeclared Var cljs.user/n at line 1 &lt;cljs repl&gt;
Execution error (Error) at (&lt;cljs repl&gt;:1).
Assert failed: First arg to gen/let must be a vector of bindings.
</pre></div><div id="t1550742731000800" t="2019-02-21 09:52:11 borkdude fixed:
 https://dev.clojure.org/jira/browse/TCHECK-154"><a href="#t1550742731000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-21</span>Â <span class="t" onclick="H(this)">09:52:11</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>fixed:
</span><a href="https://dev.clojure.org/jira/browse/TCHECK-154" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-154</a></div><div id="t1551123023001000" t="2019-02-25 19:30:23 borkdude @gfredericks responding to this one:  https://dev.clojure.org/jira/browse/TCHECK-154?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=51397#comment-51397 
We donâ€™t have to do anything funny. The only thing we should do to make this â€œtestableâ€ is to remove e.g. this line from the ns form:
 https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L16"><a href="#t1551123023001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-25</span>Â <span class="t" onclick="H(this)">19:30:23</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks responding to this one: </span><a href="https://dev.clojure.org/jira/browse/TCHECK-154?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=51397#comment-51397" target="_blank">https://dev.clojure.org/jira/browse/TCHECK-154?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=51397#comment-51397</a><span>
We donâ€™t have to do anything funny. The only thing we should do to make this â€œtestableâ€ is to remove e.g. this line from the ns form:
</span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L16" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L16</a></div><div id="t1551123058001500" t="2019-02-25 19:30:58 borkdude Leaving that line in, will make it untestable in other namespaces as well, since it will be referred to as macro there too then (maybe depending on the order of loading of the namespaces, but that was the behavior I got when testing this in a different namespace with no change to the existing ones)."><a href="#t1551123058001500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-25</span>Â <span class="t" onclick="H(this)">19:30:58</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Leaving that line in, will make it untestable in other namespaces as well, since it will be referred to as macro there too then (maybe depending on the order of loading of the namespaces, but that was the behavior I got when testing this in a different namespace with no change to the existing ones).</span></div><div id="t1551145241001800" t="2019-02-26 01:40:41 gfredericks that is super weird"><a href="#t1551145241001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">01:40:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that is super weird</span></div><div id="t1551166364002500" t="2019-02-26 07:32:44 borkdude It seems like a global thing"><a href="#t1551166364002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">07:32:44</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>It seems like a global thing</span></div><div id="t1551183520003300" t="2019-02-26 12:18:40 gfredericks you&apos;re saying that whether or not the  generators  namespace wants to include macros from  clojure.core  determines whether or not other namespaces can implicitly include macros from  generators ?"><a href="#t1551183520003300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:18:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you&apos;re saying that whether or not the </span><code>generators</code><span> namespace wants to include macros from </span><code>clojure.core</code><span> determines whether or not other namespaces can implicitly include macros from </span><code>generators</code><span>?</span></div><div id="t1551183729004300" t="2019-02-26 12:22:09 borkdude oh sorry, I was wrong there. I was looking for a test namespace that used  gen/let  in CLJS, but mistakingly pointed at the wrong line/namespace even. Iâ€™ll see if I can find a better example"><a href="#t1551183729004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:22:09</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>oh sorry, I was wrong there. I was looking for a test namespace that used </span><code>gen/let</code><span> in CLJS, but mistakingly pointed at the wrong line/namespace even. Iâ€™ll see if I can find a better example</span></div><div id="t1551183775004500" t="2019-02-26 12:22:55 borkdude this is the better example:
 https://github.com/clojure/test.check/blob/88eebf105fbb01db17ce12a3bff207cc395270b9/src/test/clojure/clojure/test/check/test.cljc#L18"><a href="#t1551183775004500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:22:55</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>this is the better example:
</span><a href="https://github.com/clojure/test.check/blob/88eebf105fbb01db17ce12a3bff207cc395270b9/src/test/clojure/clojure/test/check/test.cljc#L18" target="_blank">https://github.com/clojure/test.check/blob/88eebf105fbb01db17ce12a3bff207cc395270b9/src/test/clojure/clojure/test/check/test.cljc#L18</a></div><div id="t1551183804004800" t="2019-02-26 12:23:24 borkdude sorry for the confusion"><a href="#t1551183804004800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:23:24</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>sorry for the confusion</span></div><div id="t1551183824005100" t="2019-02-26 12:23:44 gfredericks so you&apos;re saying removing that line would allow you to write what kind of test?"><a href="#t1551183824005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:23:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so you&apos;re saying removing that line would allow you to write what kind of test?</span></div><div id="t1551183862005800" t="2019-02-26 12:24:22 borkdude removing the conditional cljs portions of these require clauses in the test namespaces would enable you test if the macros work correctly in CLJS (provided they add a self-require)"><a href="#t1551183862005800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:24:22</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>removing the conditional cljs portions of these require clauses in the test namespaces would enable you test if the macros work correctly in CLJS (provided they add a self-require)</span></div><div id="t1551183924006600" t="2019-02-26 12:25:24 borkdude you were asking for a way to test this behavior: this is a way to test it. another way would be to write a completely isolated test suite"><a href="#t1551183924006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:25:24</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>you were asking for a way to test this behavior: this is a way to test it. another way would be to write a completely isolated test suite</span></div><div id="t1551183938006800" t="2019-02-26 12:25:38 gfredericks okay I think I get it"><a href="#t1551183938006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:25:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay I think I get it</span></div><div id="t1551183970007200" t="2019-02-26 12:26:10 gfredericks I suppose that&apos;s probably good enough"><a href="#t1551183970007200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:26:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I suppose that&apos;s probably good enough</span></div><div id="t1551184008008100" t="2019-02-26 12:26:48 gfredericks I can imagine somebody removing the line from  src  that looks redundant and then seeing the test failure and fixing it by adding  :include-macros true , but that&apos;s starting to sound rather less likely"><a href="#t1551184008008100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:26:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I can imagine somebody removing the line from </span><code>src</code><span> that looks redundant and then seeing the test failure and fixing it by adding </span><code>:include-macros true</code><span>, but that&apos;s starting to sound rather less likely</span></div><div id="t1551184071009300" t="2019-02-26 12:27:51 gfredericks the thing I was imagining was something like  (ns clojure.test.check.require-test (:require [clojure.test.check.generators :as gen])) (deftest can-still-use-let-without-include-macros (is (gen/let [x gen/nat] 42)))"><a href="#t1551184071009300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:27:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the thing I was imagining was something like </span><code>(ns clojure.test.check.require-test (:require [clojure.test.check.generators :as gen])) (deftest can-still-use-let-without-include-macros (is (gen/let [x gen/nat] 42)))</code></div><div id="t1551184112009900" t="2019-02-26 12:28:32 borkdude yes, but since it doesnâ€™t seem a namespace local but a project-global inference thing, that doesnâ€™t work if you combine it with the existing tests unchanged"><a href="#t1551184112009900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:28:32</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yes, but since it doesnâ€™t seem a namespace local but a project-global inference thing, that doesnâ€™t work if you combine it with the existing tests unchanged</span></div><div id="t1551184157010400" t="2019-02-26 12:29:17 borkdude so adapting the existing tests to remove the :include-macros option would already be the test"><a href="#t1551184157010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:29:17</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>so adapting the existing tests to remove the :include-macros option would already be the test</span></div><div id="t1551184207010700" t="2019-02-26 12:30:07 gfredericks I don&apos;t understand that first statement"><a href="#t1551184207010700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:30:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t understand that first statement</span></div><div id="t1551184214011100" t="2019-02-26 12:30:14 gfredericks how does it not work?"><a href="#t1551184214011100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:30:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>how does it not work?</span></div><div id="t1551184264012100" t="2019-02-26 12:31:04 borkdude ok. say you would add  (ns clojure.test.check.require-test (:require [clojure.test.check.generators :as gen])) (deftest can-still-use-let-without-include-macros (is (gen/let [x gen/nat] 42))) . this will already pass if  clojure.test.check.generators :as gen  has been required with  :include-macros  before."><a href="#t1551184264012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:31:04</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>ok. say you would add </span><code>(ns clojure.test.check.require-test (:require [clojure.test.check.generators :as gen])) (deftest can-still-use-let-without-include-macros (is (gen/let [x gen/nat] 42)))</code><span>. this will already pass if </span><code>clojure.test.check.generators :as gen</code><span> has been required with </span><code>:include-macros</code><span> before.</span></div><div id="t1551184266012200" t="2019-02-26 12:31:06 gfredericks I feel like I&apos;m about to learn something terrible about clojurescript"><a href="#t1551184266012200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:31:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I feel like I&apos;m about to learn something terrible about clojurescript</span></div><div id="t1551184288012800" t="2019-02-26 12:31:28 borkdude in other words: that test already passes right now, without changing anything"><a href="#t1551184288012800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:31:28</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>in other words: that test already passes right now, without changing anything</span></div><div id="t1551184320013400" t="2019-02-26 12:32:00 gfredericks you&apos;re saying that if namespace  A  requires  X  and namespace  B  requires  X , then what&apos;s visible from  X  in  B  is affected by how  A  required it?"><a href="#t1551184320013400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:32:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you&apos;re saying that if namespace </span><code>A</code><span> requires </span><code>X</code><span> and namespace </span><code>B</code><span> requires </span><code>X</code><span>, then what&apos;s visible from </span><code>X</code><span> in </span><code>B</code><span> is affected by how </span><code>A</code><span> required it?</span></div><div id="t1551184385014400" t="2019-02-26 12:33:05 borkdude Iâ€™m not an expert in CLJS macro resolution but thatâ€™s my understanding of it. If A requires X with include-macros first, then B requires X without include-macros, it will still be able to use the macros."><a href="#t1551184385014400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:33:05</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Iâ€™m not an expert in CLJS macro resolution but thatâ€™s my understanding of it. If A requires X with include-macros first, then B requires X without include-macros, it will still be able to use the macros.</span></div><div id="t1551184417014900" t="2019-02-26 12:33:37 gfredericks I&apos;m willing to bet fives of dollars that this is not true, because if it&apos;s true then I&apos;ll be so sad that I won&apos;t think to miss my fives of dollars"><a href="#t1551184417014900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:33:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m willing to bet fives of dollars that this is not true, because if it&apos;s true then I&apos;ll be so sad that I won&apos;t think to miss my fives of dollars</span></div><div id="t1551184441015400" t="2019-02-26 12:34:01 borkdude well, itâ€™s easy to try out. just add this test namespace of yours and run the tests."><a href="#t1551184441015400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:34:01</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>well, itâ€™s easy to try out. just add this test namespace of yours and run the tests.</span></div><div id="t1551184519016200" t="2019-02-26 12:35:19 borkdude Iâ€™m not saying that I want this to be true, just that I saw this behavior when adding a similar test  ğŸ™‚"><a href="#t1551184519016200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:35:19</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Iâ€™m not saying that I want this to be true, just that I saw this behavior when adding a similar test </span><b>ğŸ™‚</b></div><div id="t1551184620017900" t="2019-02-26 12:37:00 borkdude On the other hand, I donâ€™t see why this would be problematic. If you donâ€™t add :include-macros true, the worst thing that will happen is that you will get a function instead of a macro resulting in an error (the original problem), so not getting the error as a side effect of some other namespace doing the require with include-macros, is a nice bonus."><a href="#t1551184620017900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:37:00</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>On the other hand, I donâ€™t see why this would be problematic. If you donâ€™t add :include-macros true, the worst thing that will happen is that you will get a function instead of a macro resulting in an error (the original problem), so not getting the error as a side effect of some other namespace doing the require with include-macros, is a nice bonus.</span></div><div id="t1551184666018300" t="2019-02-26 12:37:46 borkdude @mfikes or @dnolen could maybe explain how this works in detail"><a href="#t1551184666018300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:37:46</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@mfikes or @dnolen could maybe explain how this works in detail</span></div><div id="t1551184794019500" t="2019-02-26 12:39:54 gfredericks okay, I&apos;m running such a test now"><a href="#t1551184794019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:39:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay, I&apos;m running such a test now</span></div><div id="t1551185382019900" t="2019-02-26 12:49:42 gfredericks (ns clojure.test.check.test2
  (:require [cljs.test :refer-macros [deftest is]]
            [clojure.test.check.generators :as gen]))

(deftest can-use-gen-let-without-include-macros
  (is (gen/let [x gen/nat] 42)))
 

I can&apos;t get this to fail even by removing every other test namespace"><a href="#t1551185382019900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:49:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><pre>(ns clojure.test.check.test2
  (:require [cljs.test :refer-macros [deftest is]]
            [clojure.test.check.generators :as gen]))

(deftest can-use-gen-let-without-include-macros
  (is (gen/let [x gen/nat] 42)))
</pre><span>

I can&apos;t get this to fail even by removing every other test namespace</span></div><div id="t1551185418020600" t="2019-02-26 12:50:18 gfredericks at first I got a compiler warning about  x  not being defined, which I thought was a good sign, but haven&apos;t been getting that since"><a href="#t1551185418020600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:50:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>at first I got a compiler warning about </span><code>x</code><span> not being defined, which I thought was a good sign, but haven&apos;t been getting that since</span></div><div id="t1551185477021300" t="2019-02-26 12:51:17 borkdude Have you cleared the target for?"><a href="#t1551185477021300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:51:17</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Have you cleared the target for?</span></div><div id="t1551185480021500" t="2019-02-26 12:51:20 borkdude Dir"><a href="#t1551185480021500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:51:20</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Dir</span></div><div id="t1551185495021900" t="2019-02-26 12:51:35 borkdude (Damn spelling corrector)"><a href="#t1551185495021900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:51:35</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>(Damn spelling corrector)</span></div><div id="t1551185500022100" t="2019-02-26 12:51:40 gfredericks yeah"><a href="#t1551185500022100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:51:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah</span></div><div id="t1551185528022500" t="2019-02-26 12:52:08 gfredericks and there&apos;s nothing else in the project that&apos;s requiring gen with  :include-macros true"><a href="#t1551185528022500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:52:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and there&apos;s nothing else in the project that&apos;s requiring gen with </span><code>:include-macros true</code></div><div id="t1551185596022800" t="2019-02-26 12:53:16 gfredericks I just pushed this to the branch  tmp-f5667927-abed-48d9-b5a8-7c7f0295b001  if you want to take a look"><a href="#t1551185596022800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:53:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just pushed this to the branch </span><code>tmp-f5667927-abed-48d9-b5a8-7c7f0295b001</code><span> if you want to take a look</span></div><div id="t1551185792023100" t="2019-02-26 12:56:32 borkdude Iâ€™ll check it out, be back in a couple of hours"><a href="#t1551185792023100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">12:56:32</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Iâ€™ll check it out, be back in a couple of hours</span></div><div id="t1551190663023700" t="2019-02-26 14:17:43 borkdude @gfredericks
Change your test ns to something like:

 (ns clojure.test.check.test2
  (:require [cljs.test :as t :refer-macros [deftest is]]
            [clojure.test.check.generators :as gen]))

(deftest can-use-gen-let-without-include-macros
  (is (gen/let [x gen/nat]
        (number? x))))

(t/run-tests)
 

Then Iâ€™m able to reproduce the error with:
 $ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 6 test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 7 test2.cljs

Testing clojure.test.check.test2

ERROR in (can-use-gen-let-without-include-macros) (Error:NaN:NaN)
expected: (gen/let [x gen/nat] (number? x))
  actual: #object[Error Error: Assert failed: First arg to gen/let must be a vector of bindings.
(vector? bindings)]

Ran 1 tests containing 1 assertions.
0 failures, 1 errors.
"><a href="#t1551190663023700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:17:43</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks
Change your test ns to something like:

</span><pre>(ns clojure.test.check.test2
  (:require [cljs.test :as t :refer-macros [deftest is]]
            [clojure.test.check.generators :as gen]))

(deftest can-use-gen-let-without-include-macros
  (is (gen/let [x gen/nat]
        (number? x))))

(t/run-tests)
</pre><span>

Then Iâ€™m able to reproduce the error with:
</span><pre>$ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 6 test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 7 test2.cljs

Testing clojure.test.check.test2

ERROR in (can-use-gen-let-without-include-macros) (Error:NaN:NaN)
expected: (gen/let [x gen/nat] (number? x))
  actual: #object[Error Error: Assert failed: First arg to gen/let must be a vector of bindings.
(vector? bindings)]

Ran 1 tests containing 1 assertions.
0 failures, 1 errors.
</pre></div><div id="t1551190793025300" t="2019-02-26 14:19:53 borkdude We could just write a script for this to isolate it from the rest of the tests (if you still want this tested, I think itâ€™s pretty rare that anyone does this in a CLJS lib)"><a href="#t1551190793025300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:19:53</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>We could just write a script for this to isolate it from the rest of the tests (if you still want this tested, I think itâ€™s pretty rare that anyone does this in a CLJS lib)</span></div><div id="t1551190890026300" t="2019-02-26 14:21:30 gfredericks @borkdude But is it true that the test then passes if you revert the changes to the other test namespaces?"><a href="#t1551190890026300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:21:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@borkdude But is it true that the test then passes if you revert the changes to the other test namespaces?</span></div><div id="t1551190928026800" t="2019-02-26 14:22:08 borkdude not in this case, since I only load that one namespace here. I could test it by also loading those first"><a href="#t1551190928026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:22:08</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>not in this case, since I only load that one namespace here. I could test it by also loading those first</span></div><div id="t1551191374027400" t="2019-02-26 14:29:34 borkdude @gfredericks This branch:  https://github.com/borkdude/test.check/tree/tmp-f5667927-abed-48d9-b5a8-7c7f0295b001 
 $ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 6 test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 7 test2.cljs

Testing clojure.test.check.test2

ERROR in (can-use-gen-let-without-include-macros) (Error:NaN:NaN)
expected: (gen/let [x gen/nat] (number? x))
  actual: #object[Error Error: Assert failed: First arg to gen/let must be a vector of bindings.
(vector? bindings)]

Ran 1 tests containing 1 assertions.
0 failures, 1 errors.

$ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test.cljc -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: var: clojure.test.check.generators/gen-raw-long is not public at line 158 test.cljc
WARNING: var: clojure.test.check.generators/gen-raw-long is not public at line 158 test.cljc

Testing clojure.test.check.test2

Ran 1 tests containing 1 assertions.
0 failures, 0 errors.
"><a href="#t1551191374027400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:29:34</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks This branch: </span><a href="https://github.com/borkdude/test.check/tree/tmp-f5667927-abed-48d9-b5a8-7c7f0295b001" target="_blank">https://github.com/borkdude/test.check/tree/tmp-f5667927-abed-48d9-b5a8-7c7f0295b001</a><span>
</span><pre>$ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 6 test2.cljs
WARNING: Use of undeclared Var clojure.test.check.test2/x at line 7 test2.cljs

Testing clojure.test.check.test2

ERROR in (can-use-gen-let-without-include-macros) (Error:NaN:NaN)
expected: (gen/let [x gen/nat] (number? x))
  actual: #object[Error Error: Assert failed: First arg to gen/let must be a vector of bindings.
(vector? bindings)]

Ran 1 tests containing 1 assertions.
0 failures, 1 errors.

$ clj -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test.cljc -i src/test/clojure/clojure/test/check/test2.cljs
WARNING: var: clojure.test.check.generators/gen-raw-long is not public at line 158 test.cljc
WARNING: var: clojure.test.check.generators/gen-raw-long is not public at line 158 test.cljc

Testing clojure.test.check.test2

Ran 1 tests containing 1 assertions.
0 failures, 0 errors.
</pre></div><div id="t1551191384027700" t="2019-02-26 14:29:44 borkdude I guess Iâ€™m pretty close to winning that 5 dollarsâ€¦"><a href="#t1551191384027700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:29:44</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I guess Iâ€™m pretty close to winning that 5 dollarsâ€¦</span></div><div id="t1551191504028100" t="2019-02-26 14:31:44 borkdude It seems that once the CLJS compiler knows something is a macro, it cannot unknow it?"><a href="#t1551191504028100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:31:44</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>It seems that once the CLJS compiler knows something is a macro, it cannot unknow it?</span></div><div id="t1551191790028500" t="2019-02-26 14:36:30 borkdude maybe that is what happens here (although thatâ€™s just me guessing):  https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/analyzer.cljc#L629"><a href="#t1551191790028500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:36:30</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>maybe that is what happens here (although thatâ€™s just me guessing): </span><a href="https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/analyzer.cljc#L629" target="_blank">https://github.com/clojure/clojurescript/blob/master/src/main/clojure/cljs/analyzer.cljc#L629</a></div><div id="t1551192279029400" t="2019-02-26 14:44:39 borkdude so when you add a self-refer to a macro in a .cljc namespace, you effectively tell the CLJS compiler: I want to use this var as macro in CLJS. Any subsequent require to that namespace does not have to help CLJS with that anymore by adding include-macros true or refer-macros, it already knows."><a href="#t1551192279029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:44:39</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>so when you add a self-refer to a macro in a .cljc namespace, you effectively tell the CLJS compiler: I want to use this var as macro in CLJS. Any subsequent require to that namespace does not have to help CLJS with that anymore by adding include-macros true or refer-macros, it already knows.</span></div><div id="t1551192991029900" t="2019-02-26 14:56:31 gfredericks I just asked in #cljs-dev about this"><a href="#t1551192991029900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">14:56:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I just asked in #cljs-dev about this</span></div><div id="t1551193443030300" t="2019-02-26 15:04:03 borkdude ok, so itâ€™s confirmed that this behavior exists"><a href="#t1551193443030300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">15:04:03</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>ok, so itâ€™s confirmed that this behavior exists</span></div><div id="t1551193798031100" t="2019-02-26 15:09:58 borkdude what about making a standalone script that just does this:
 clojure -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
 
That wouldnâ€™t interfere with any other namespaces requiring these macros"><a href="#t1551193798031100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">15:09:58</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>what about making a standalone script that just does this:
</span><pre>clojure -Sdeps &apos;{:deps {org.clojure/clojurescript {:mvn/version &quot;RELEASE&quot;}}}&apos; -m cljs.main -re node -i src/test/clojure/clojure/test/check/test2.cljs
</pre><span>
That wouldnâ€™t interfere with any other namespaces requiring these macros</span></div><div id="t1551193963031500" t="2019-02-26 15:12:43 borkdude test2 would be called test_macros.cljs then"><a href="#t1551193963031500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">15:12:43</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>test2 would be called test_macros.cljs then</span></div><div id="t1551197089033600" t="2019-02-26 16:04:49 gfredericks Blergh"><a href="#t1551197089033600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:04:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Blergh</span></div><div id="t1551197102034100" t="2019-02-26 16:05:02 gfredericks How about we just remove all the include-macro clauses from all src/test nses, except for the self ones"><a href="#t1551197102034100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:05:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>How about we just remove all the include-macro clauses from all src/test nses, except for the self ones</span></div><div id="t1551197437034800" t="2019-02-26 16:10:37 borkdude yeah, that was my idea when I suggested that the tests already test this if they donâ€™t add include-macros themselves"><a href="#t1551197437034800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:10:37</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yeah, that was my idea when I suggested that the tests already test this if they donâ€™t add include-macros themselves</span></div><div id="t1551197450035100" t="2019-02-26 16:10:50 borkdude but we could not reproduce this with lein cljsbuild"><a href="#t1551197450035100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:10:50</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>but we could not reproduce this with lein cljsbuild</span></div><div id="t1551197459035400" t="2019-02-26 16:10:59 borkdude maybe that build tool has some additional magic"><a href="#t1551197459035400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:10:59</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>maybe that build tool has some additional magic</span></div><div id="t1551197503035700" t="2019-02-26 16:11:43 borkdude but Iâ€™m fine with your proposal"><a href="#t1551197503035700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:11:43</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>but Iâ€™m fine with your proposal</span></div><div id="t1551198052036100" t="2019-02-26 16:20:52 borkdude Iâ€™m looking at the cljsbuild code, but it seems there is some magic around macros in there:
 https://github.com/emezeske/lein-cljsbuild/blob/master/support/src/cljsbuild/crossover.clj"><a href="#t1551198052036100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:20:52</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>Iâ€™m looking at the cljsbuild code, but it seems there is some magic around macros in there:
</span><a href="https://github.com/emezeske/lein-cljsbuild/blob/master/support/src/cljsbuild/crossover.clj" target="_blank">https://github.com/emezeske/lein-cljsbuild/blob/master/support/src/cljsbuild/crossover.clj</a></div><div id="t1551198178036800" t="2019-02-26 16:22:58 borkdude I can see why the CLJS authors ask for repros not using these tools  ğŸ™‚"><a href="#t1551198178036800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:22:58</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I can see why the CLJS authors ask for repros not using these tools </span><b>ğŸ™‚</b></div><div id="t1551200009037400" t="2019-02-26 16:53:29 gfredericks yeah I think a global policy of &quot;no other namespace should need to require-macros from a t.c namespace because they all do self-requiring&quot; is good enough"><a href="#t1551200009037400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:53:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah I think a global policy of &quot;no other namespace should need to require-macros from a t.c namespace because they all do self-requiring&quot; is good enough</span></div><div id="t1551200040038000" t="2019-02-26 16:54:00 gfredericks so the additions to your patch would be A) deleting redundant  :include-macros  B) doing this trick for the  prop  namespace too"><a href="#t1551200040038000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">16:54:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so the additions to your patch would be A) deleting redundant </span><code>:include-macros</code><span> B) doing this trick for the </span><code>prop</code><span> namespace too</span></div><div id="t1551200455038700" t="2019-02-26 17:00:55 borkdude ok, will do"><a href="#t1551200455038700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:00:55</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>ok, will do</span></div><div id="t1551202114039500" t="2019-02-26 17:28:34 borkdude also in  clojure.test.check.clojure-test  for  defspec  I presume"><a href="#t1551202114039500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:28:34</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>also in </span><code>clojure.test.check.clojure-test</code><span> for </span><code>defspec</code><span> I presume</span></div><div id="t1551202879039900" t="2019-02-26 17:41:19 gfredericks :+1:  yep"><a href="#t1551202879039900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:41:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:+1:</b><span> yep</span></div><div id="t1551202886040100" t="2019-02-26 17:41:26 gfredericks thanks for tracking everything down"><a href="#t1551202886040100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:41:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>thanks for tracking everything down</span></div><div id="t1551203078040300" t="2019-02-26 17:44:38 borkdude New patch uploaded"><a href="#t1551203078040300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:44:38</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>New patch uploaded</span></div><div id="t1551203272040600" t="2019-02-26 17:47:52 gfredericks okay, I should get to it sometime this week"><a href="#t1551203272040600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:47:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>okay, I should get to it sometime this week</span></div><div id="t1551203305040800" t="2019-02-26 17:48:25 borkdude thanks  ğŸ™‚"><a href="#t1551203305040800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-26</span>Â <span class="t" onclick="H(this)">17:48:25</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>thanks </span><b>ğŸ™‚</b></div><div id="t1551627629000700" t="2019-03-03 15:40:29 borkdude The last stable release of test.check has been 12 NOV 2015. What are the alpha releases waiting for to become stable?"><a href="#t1551627629000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:40:29</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>The last stable release of test.check has been 12 NOV 2015. What are the alpha releases waiting for to become stable?</span></div><div id="t1551627722001400" t="2019-03-03 15:42:02 gfredericks a set of milestones I was asymptotically approaching for a while; most of them I gave up on, so the only reason I haven&apos;t cut a release is because of the things that seem too half-baked to release"><a href="#t1551627722001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:42:02</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a set of milestones I was asymptotically approaching for a while; most of them I gave up on, so the only reason I haven&apos;t cut a release is because of the things that seem too half-baked to release</span></div><div id="t1551627766001800" t="2019-03-03 15:42:46 gfredericks I think the tickets tagged 0.10.0 reflected what I hadn&apos;t yet given up on"><a href="#t1551627766001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:42:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think the tickets tagged 0.10.0 reflected what I hadn&apos;t yet given up on</span></div><div id="t1551627804002000" t="2019-03-03 15:43:24 gfredericks https://dev.clojure.org/jira/secure/IssueNavigator.jspa?reset=true&amp;amp;jqlQuery=project+%3D+10470+AND+labels+%3D+%22release-0.10.0%22"><a href="#t1551627804002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:43:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><a href="https://dev.clojure.org/jira/secure/IssueNavigator.jspa?reset=true&amp;amp;jqlQuery=project+%3D+10470+AND+labels+%3D+%22release-0.10.0%22" target="_blank">https://dev.clojure.org/jira/secure/IssueNavigator.jspa?reset=true&amp;amp;jqlQuery=project+%3D+10470+AND+labels+%3D+%22release-0.10.0%22</a></div><div id="t1551627836002300" t="2019-03-03 15:43:56 gfredericks now that I look, it seems like it&apos;s just a documentation ticket"><a href="#t1551627836002300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:43:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>now that I look, it seems like it&apos;s just a documentation ticket</span></div><div id="t1551628179003300" t="2019-03-03 15:49:39 gfredericks the big thing I wanted to do was write some guides, but that was apparently too much work, and arguably isn&apos;t related to a release"><a href="#t1551628179003300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:49:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the big thing I wanted to do was write some guides, but that was apparently too much work, and arguably isn&apos;t related to a release</span></div><div id="t1551628297004100" t="2019-03-03 15:51:37 gfredericks I think I also wanted to sync up with alex w.r.t. spec, and see if there was anything that&apos;d be super useful to change before a release"><a href="#t1551628297004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:51:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think I also wanted to sync up with alex w.r.t. spec, and see if there was anything that&apos;d be super useful to change before a release</span></div><div id="t1551628319004400" t="2019-03-03 15:51:59 gfredericks so that there aren&apos;t future compatibility issues"><a href="#t1551628319004400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:51:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so that there aren&apos;t future compatibility issues</span></div><div id="t1551628347004900" t="2019-03-03 15:52:27 borkdude did the lazy loading of generators in spec require changes to tc?"><a href="#t1551628347004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:52:27</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>did the lazy loading of generators in spec require changes to tc?</span></div><div id="t1551628363005200" t="2019-03-03 15:52:43 gfredericks no, but there was a change to  gen/such-that  for spec"><a href="#t1551628363005200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:52:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no, but there was a change to </span><code>gen/such-that</code><span> for spec</span></div><div id="t1551628392005400" t="2019-03-03 15:53:12 borkdude is spec itself still using 0.9.0?"><a href="#t1551628392005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:53:12</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>is spec itself still using 0.9.0?</span></div><div id="t1551628418005800" t="2019-03-03 15:53:38 gfredericks I guess? but if you depend on 0.10.0 yourself, that&apos;s what it&apos;ll be using"><a href="#t1551628418005800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:53:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I guess? but if you depend on 0.10.0 yourself, that&apos;s what it&apos;ll be using</span></div><div id="t1551628426006200" t="2019-03-03 15:53:46 gfredericks so people will conceivably be combining arbitrary pairs of versions"><a href="#t1551628426006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:53:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so people will conceivably be combining arbitrary pairs of versions</span></div><div id="t1551628481006800" t="2019-03-03 15:54:41 borkdude so 0.9.0 already had a change to gen/such-that for spec in November 2015?"><a href="#t1551628481006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:54:41</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>so 0.9.0 already had a change to gen/such-that for spec in November 2015?</span></div><div id="t1551628627007500" t="2019-03-03 15:57:07 borkdude It seems not."><a href="#t1551628627007500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:57:07</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>It seems not.</span></div><div id="t1551628732007700" t="2019-03-03 15:58:52 gfredericks yeah, I didn&apos;t mean to imply that"><a href="#t1551628732007700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">15:58:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah, I didn&apos;t mean to imply that</span></div><div id="t1551628816008200" t="2019-03-03 16:00:16 gfredericks I&apos;ll put out another alpha release this week for the cljs changes, and then I will plan on talking to alex in a few weeks when my free time clears up"><a href="#t1551628816008200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">16:00:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll put out another alpha release this week for the cljs changes, and then I will plan on talking to alex in a few weeks when my free time clears up</span></div><div id="t1551628854008500" t="2019-03-03 16:00:54 borkdude yeah, no hurry, just wanted to know the current state"><a href="#t1551628854008500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-03</span>Â <span class="t" onclick="H(this)">16:00:54</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>yeah, no hurry, just wanted to know the current state</span></div><div id="t1553959490001000" t="2019-03-30 15:24:50 caio @brewmasterv I think edge cases are pretty common within cycles. eg: repeating something until you get a memory error, rounding errors, etc"><a href="#t1553959490001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-03-30</span>Â <span class="t" onclick="H(this)">15:24:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â caioÂ </span><span>@brewmasterv I think edge cases are pretty common within cycles. eg: repeating something until you get a memory error, rounding errors, etc</span></div><div id="t1555339058001100" t="2019-04-15 14:37:38 defndaines Recently learned that  prn-str  and  edn/read-string  are not symmetric, thanks to playing around with test.check.
 (defspec prop-symmetric
  ;; NOTE This actually fails. prn-str and read-string are not symmetric.
  100
  (prop/for-all [s gen/any]
    (let [encoded (prn-str s)]
      (and (string? encoded)
           (= s (edn/read-string encoded))))))
"><a href="#t1555339058001100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:37:38</span>Â Â Â Â Â Â Â Â Â Â defndainesÂ </span><span>Recently learned that </span><code>prn-str</code><span> and </span><code>edn/read-string</code><span> are not symmetric, thanks to playing around with test.check.
</span><pre>(defspec prop-symmetric
  ;; NOTE This actually fails. prn-str and read-string are not symmetric.
  100
  (prop/for-all [s gen/any]
    (let [encoded (prn-str s)]
      (and (string? encoded)
           (= s (edn/read-string encoded))))))
</pre></div><div id="t1555339110001800" t="2019-04-15 14:38:30 gfredericks this sounds like a good trivia question"><a href="#t1555339110001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:38:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>this sounds like a good trivia question</span></div><div id="t1555339114002000" t="2019-04-15 14:38:34 defndaines (Note, there isnâ€™t any official documentation that they are supposed to be, if you exclude the comment here  https://clojuredocs.org/clojure.edn/read-string#example-542dc112e4b05f4d257a2993  from phreed)"><a href="#t1555339114002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:38:34</span>Â Â Â Â Â Â Â Â Â Â defndainesÂ </span><span>(Note, there isnâ€™t any official documentation that they are supposed to be, if you exclude the comment here </span><a href="https://clojuredocs.org/clojure.edn/read-string#example-542dc112e4b05f4d257a2993" target="_blank">https://clojuredocs.org/clojure.edn/read-string#example-542dc112e4b05f4d257a2993</a><span> from phreed)</span></div><div id="t1555339159002400" t="2019-04-15 14:39:19 gfredericks the first thing I can think of is things like  (keyword &quot;  &quot;)"><a href="#t1555339159002400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:39:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the first thing I can think of is things like </span><code>(keyword &quot;  &quot;)</code></div><div id="t1555339190002800" t="2019-04-15 14:39:50 gfredericks I can&apos;t remember if  gen/any  tries to generate those though; I think it doesn&apos;t"><a href="#t1555339190002800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:39:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I can&apos;t remember if </span><code>gen/any</code><span> tries to generate those though; I think it doesn&apos;t</span></div><div id="t1555339199003100" t="2019-04-15 14:39:59 gfredericks I&apos;m 99.7% sure it doesn&apos;t after thinking about it for two more seconds"><a href="#t1555339199003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:39:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m 99.7% sure it doesn&apos;t after thinking about it for two more seconds</span></div><div id="t1555339237003900" t="2019-04-15 14:40:37 gfredericks (symbol &quot;true&quot;)  would be problematic; I don&apos;t think it avoids that, but it&apos;s also probably highly unlikely to generate it by chance"><a href="#t1555339237003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:40:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(symbol &quot;true&quot;)</code><span> would be problematic; I don&apos;t think it avoids that, but it&apos;s also probably highly unlikely to generate it by chance</span></div><div id="t1555339244004200" t="2019-04-15 14:40:44 defndaines I know that a  Double/NAN  is one thing that isnâ€™t symmetric."><a href="#t1555339244004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:40:44</span>Â Â Â Â Â Â Â Â Â Â defndainesÂ </span><span>I know that a </span><code>Double/NAN</code><span> is one thing that isnâ€™t symmetric.</span></div><div id="t1555339244004300" t="2019-04-15 14:40:44 gfredericks I&apos;m sure there&apos;s something much more basic"><a href="#t1555339244004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:40:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;m sure there&apos;s something much more basic</span></div><div id="t1555339263004700" t="2019-04-15 14:41:03 gfredericks oh, well that probably reads back in as the correct object but  =  won&apos;t be true"><a href="#t1555339263004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:41:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh, well that probably reads back in as the correct object but </span><code>=</code><span> won&apos;t be true</span></div><div id="t1555339279005200" t="2019-04-15 14:41:19 gfredericks that says more about  =  than it does about  prn-str  and  edn/read-string"><a href="#t1555339279005200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:41:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that says more about </span><code>=</code><span> than it does about </span><code>prn-str</code><span> and </span><code>edn/read-string</code></div><div id="t1555339309005900" t="2019-04-15 14:41:49 defndaines Ah, true. Would have to use a specialized  =  to see what else pops up."><a href="#t1555339309005900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:41:49</span>Â Â Â Â Â Â Â Â Â Â defndainesÂ </span><span>Ah, true. Would have to use a specialized </span><code>=</code><span> to see what else pops up.</span></div><div id="t1555339319006200" t="2019-04-15 14:41:59 gfredericks (symbol &quot;nil&quot;)  is easier to generate than  (symbol &quot;true&quot;)  I guess"><a href="#t1555339319006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:41:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(symbol &quot;nil&quot;)</code><span> is easier to generate than </span><code>(symbol &quot;true&quot;)</code><span> I guess</span></div><div id="t1555339404006600" t="2019-04-15 14:43:24 gfredericks there&apos;s a lot more stuff that would come up if  gen/any  was more ambitious"><a href="#t1555339404006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:43:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s a lot more stuff that would come up if </span><code>gen/any</code><span> was more ambitious</span></div><div id="t1555339436007000" t="2019-04-15 14:43:56 gfredericks e.g., queues, sorted sets, sorted maps, ..."><a href="#t1555339436007000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-15</span>Â <span class="t" onclick="H(this)">14:43:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., queues, sorted sets, sorted maps, ...</span></div><div id="t1556574621007600" t="2019-04-29 21:50:21 kenny Is there any documentation on what each of the keys returned from quick-check mean?"><a href="#t1556574621007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-29</span>Â <span class="t" onclick="H(this)">21:50:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there any documentation on what each of the keys returned from quick-check mean?</span></div><div id="t1556575851008400" t="2019-04-29 22:10:51 gfredericks The docstring mentions some of them, doesn&apos;t it?"><a href="#t1556575851008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-29</span>Â <span class="t" onclick="H(this)">22:10:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>The docstring mentions some of them, doesn&apos;t it?</span></div><div id="t1556577682010500" t="2019-04-29 22:41:22 kenny The API docs don&apos;t have it  https://clojure.github.io/test.check/clojure.test.check.html . Looks like it&apos;s been added in the source in master. It&apos;d be useful to understand when certain attributes are a specific type. i.e. when  :result  is  false  or an  exception . The  :result-data  map is doc&apos;ed as  {...} . Is there a doc on that one elsewhere?"><a href="#t1556577682010500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-29</span>Â <span class="t" onclick="H(this)">22:41:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>The API docs don&apos;t have it </span><a href="https://clojure.github.io/test.check/clojure.test.check.html" target="_blank">https://clojure.github.io/test.check/clojure.test.check.html</a><span>. Looks like it&apos;s been added in the source in master. It&apos;d be useful to understand when certain attributes are a specific type. i.e. when </span><code>:result</code><span> is </span><code>false</code><span> or an </span><code>exception</code><span>. The </span><code>:result-data</code><span> map is doc&apos;ed as </span><code>{...}</code><span>. Is there a doc on that one elsewhere?</span></div><div id="t1556583339012200" t="2019-04-30 00:15:39 gfredericks yeah there&apos;s a lot of stuff there; the main reason it&apos;s confusing is because I was trying to add more useful and easy-to-use information without breaking stuff relying on the old keys"><a href="#t1556583339012200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:15:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah there&apos;s a lot of stuff there; the main reason it&apos;s confusing is because I was trying to add more useful and easy-to-use information without breaking stuff relying on the old keys</span></div><div id="t1556583415013500" t="2019-04-30 00:16:55 gfredericks :result  is the worst part, since it has the truthy-or-exception thing going on; that&apos;s why I added the  :pass?  key, so you can tell with a straightforward check whether the test passed or not

 :result-data  is customizable, if you write a property that returns something that satsifies the  clojure.test.check.results/Result  protocol"><a href="#t1556583415013500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:16:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>:result</code><span> is the worst part, since it has the truthy-or-exception thing going on; that&apos;s why I added the </span><code>:pass?</code><span> key, so you can tell with a straightforward check whether the test passed or not

</span><code>:result-data</code><span> is customizable, if you write a property that returns something that satsifies the </span><code>clojure.test.check.results/Result</code><span> protocol</span></div><div id="t1556583449014100" t="2019-04-30 00:17:29 gfredericks the only specific use of it that&apos;s baked in is when a normal property throws an exception, the exception is added as a key in the result-data"><a href="#t1556583449014100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:17:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the only specific use of it that&apos;s baked in is when a normal property throws an exception, the exception is added as a key in the result-data</span></div><div id="t1556583468014500" t="2019-04-30 00:17:48 gfredericks which might currently have the unfortunate side effect of causing exceptions to be printed twice  ğŸ˜"><a href="#t1556583468014500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:17:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>which might currently have the unfortunate side effect of causing exceptions to be printed twice </span><b>ğŸ˜</b></div><div id="t1556583523014800" t="2019-04-30 00:18:43 gfredericks @kenny ^^"><a href="#t1556583523014800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:18:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@kenny ^^</span></div><div id="t1556583621015200" t="2019-04-30 00:20:21 gfredericks I can see both parts are fairly undocumented  ğŸ˜•"><a href="#t1556583621015200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:20:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I can see both parts are fairly undocumented </span><b>ğŸ˜•</b></div><div id="t1556583634015600" t="2019-04-30 00:20:34 gfredericks I tried to spec things at some point I think; maybe that&apos;d be a good way to start"><a href="#t1556583634015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:20:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I tried to spec things at some point I think; maybe that&apos;d be a good way to start</span></div><div id="t1556584352016400" t="2019-04-30 00:32:32 gfredericks Except they probably haven&apos;t added docstrings to specs yet have they"><a href="#t1556584352016400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:32:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Except they probably haven&apos;t added docstrings to specs yet have they</span></div><div id="t1556584544016700" t="2019-04-30 00:35:44 alexmiller not  yet"><a href="#t1556584544016700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-04-30</span>Â <span class="t" onclick="H(this)">00:35:44</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>not  yet</span></div><div id="t1557314040018700" t="2019-05-08 11:14:00 ben I have a really basic question: If I want to test multiple assertions in a property test, what is the most idiomatic way to do it?

Is it just to wrap each assertion in an  all ? Or can I leave them as separate forms?"><a href="#t1557314040018700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">11:14:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>I have a really basic question: If I want to test multiple assertions in a property test, what is the most idiomatic way to do it?

Is it just to wrap each assertion in an </span><code>all</code><span>? Or can I leave them as separate forms?</span></div><div id="t1557314433019200" t="2019-05-08 11:20:33 ben I suppose I could wrap each in a  clojure.test/is  but that seems definitely wrong"><a href="#t1557314433019200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">11:20:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>I suppose I could wrap each in a </span><code>clojure.test/is</code><span> but that seems definitely wrong</span></div><div id="t1557314676019600" t="2019-05-08 11:24:36 gfredericks @ben606 are you using  defspec ?"><a href="#t1557314676019600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">11:24:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ben606 are you using </span><code>defspec</code><span>?</span></div><div id="t1557317485019800" t="2019-05-08 12:11:25 ben yes"><a href="#t1557317485019800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">12:11:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>yes</span></div><div id="t1557317728020300" t="2019-05-08 12:15:28 gfredericks the main two options are

1) Multiple defspecs
2) an  and  inside a single defspec"><a href="#t1557317728020300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">12:15:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the main two options are

1) Multiple defspecs
2) an </span><code>and</code><span> inside a single defspec</span></div><div id="t1557317738020500" t="2019-05-08 12:15:38 gfredericks there&apos;s tradeoffs"><a href="#t1557317738020500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">12:15:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s tradeoffs</span></div><div id="t1557317755020900" t="2019-05-08 12:15:55 gfredericks the  and  could be made nicer if somebody wrote a version of  and  that returned result-data about which branch failed"><a href="#t1557317755020900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">12:15:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the </span><code>and</code><span> could be made nicer if somebody wrote a version of </span><code>and</code><span> that returned result-data about which branch failed</span></div><div id="t1557318239022700" t="2019-05-08 12:23:59 ben Okay, thanks @gfredericks. I guess this isnâ€™t good practice, but I am testing things that depend on each other (db write and read).

Seems like the Right Way would be to use multiple defspecs with some additonal setup/teardown?"><a href="#t1557318239022700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">12:23:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>Okay, thanks @gfredericks. I guess this isnâ€™t good practice, but I am testing things that depend on each other (db write and read).

Seems like the Right Way would be to use multiple defspecs with some additonal setup/teardown?</span></div><div id="t1557353183023600" t="2019-05-08 22:06:23 gfredericks @ben606 if you&apos;re doing something like &quot;generate data, write it to the db, read it back, check that it&apos;s equivalent&quot;, then you&apos;d want to do all of that in one defspec"><a href="#t1557353183023600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-08</span>Â <span class="t" onclick="H(this)">22:06:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ben606 if you&apos;re doing something like &quot;generate data, write it to the db, read it back, check that it&apos;s equivalent&quot;, then you&apos;d want to do all of that in one defspec</span></div><div id="t1557394820025500" t="2019-05-09 09:40:20 ben Right, so thatâ€™s some of them. I also have a couple with

â€¢ read from the db (inserted in test migration)
â€¢ call a fn to modify the data
â€¢ read from the db again
â€¢ check that it has been modified as expected

Do you think this should follow the same pattern, @gfredericks?

Thanks"><a href="#t1557394820025500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-09</span>Â <span class="t" onclick="H(this)">09:40:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>Right, so thatâ€™s some of them. I also have a couple with

â€¢ read from the db (inserted in test migration)
â€¢ call a fn to modify the data
â€¢ read from the db again
â€¢ check that it has been modified as expected

Do you think this should follow the same pattern, @gfredericks?

Thanks</span></div><div id="t1557398657026200" t="2019-05-09 10:44:17 gfredericks @ben606 that&apos;s what I would do, yeah; do you reset the db from within the defspec also? I think you&apos;d want to"><a href="#t1557398657026200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-09</span>Â <span class="t" onclick="H(this)">10:44:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ben606 that&apos;s what I would do, yeah; do you reset the db from within the defspec also? I think you&apos;d want to</span></div><div id="t1557398791026800" t="2019-05-09 10:46:31 ben Yeah, it all takes place within a transaction, so none of the changes get persisted"><a href="#t1557398791026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-09</span>Â <span class="t" onclick="H(this)">10:46:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>Yeah, it all takes place within a transaction, so none of the changes get persisted</span></div><div id="t1557398879027200" t="2019-05-09 10:47:59 gfredericks that sounds good; the main thing dictating granularity is what things are dependent on what generated data"><a href="#t1557398879027200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-09</span>Â <span class="t" onclick="H(this)">10:47:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that sounds good; the main thing dictating granularity is what things are dependent on what generated data</span></div><div id="t1557399726027500" t="2019-05-09 11:02:06 ben makes sense. Thank you"><a href="#t1557399726027500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-09</span>Â <span class="t" onclick="H(this)">11:02:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â benÂ </span><span>makes sense. Thank you</span></div><div id="t1558973803002700" t="2019-05-27 16:16:43 ho0man Hi, everyone 
I was wondering how can I use  clojure.test/use-fixture  with test-checkâ€™s  defspec ?"><a href="#t1558973803002700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:16:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>Hi, everyone 
I was wondering how can I use </span><code>clojure.test/use-fixture</code><span> with test-checkâ€™s </span><code>defspec</code><span>?</span></div><div id="t1558974499003400" t="2019-05-27 16:28:19 gfredericks @ho0man is your issue that you want the fixture to run around each trial?"><a href="#t1558974499003400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:28:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@ho0man is your issue that you want the fixture to run around each trial?</span></div><div id="t1558974545004000" t="2019-05-27 16:29:05 ho0man Nope, the whole test"><a href="#t1558974545004000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:29:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>Nope, the whole test</span></div><div id="t1558974618005000" t="2019-05-27 16:30:18 ho0man But separately for different tests in a single namespace"><a href="#t1558974618005000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:30:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>But separately for different tests in a single namespace</span></div><div id="t1558974655005400" t="2019-05-27 16:30:55 gfredericks I think that should just work"><a href="#t1558974655005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:30:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think that should just work</span></div><div id="t1558974659005600" t="2019-05-27 16:30:59 gfredericks Does it not?"><a href="#t1558974659005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:30:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Does it not?</span></div><div id="t1558975031006700" t="2019-05-27 16:37:11 ho0man :))
Yeah
It does
Thanks @gfredericks 
(Sorry to bother you)"><a href="#t1558975031006700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span>Â <span class="t" onclick="H(this)">16:37:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â ho0manÂ </span><span>:))
Yeah
It does
Thanks @gfredericks 
(Sorry to bother you)</span></div><div id="t1560149327000200" t="2019-06-10 06:48:47 Shima Hi
I want to rerun the test with the same seed field if the test had been failed, so I need to somehow have access to seed inside of the test defspec.
Is there any way to do this?"><a href="#t1560149327000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">06:48:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>Hi
I want to rerun the test with the same seed field if the test had been failed, so I need to somehow have access to seed inside of the test defspec.
Is there any way to do this?</span></div><div id="t1560162647001200" t="2019-06-10 10:30:47 gfredericks @tajoddin.shima defspec should print the seed when there&apos;s a failure, and I believe you can call the test function that defspec creates with a seed, like:

 (defspec some-test ...)

(some-test 100 {:seed 42})
"><a href="#t1560162647001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">10:30:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@tajoddin.shima defspec should print the seed when there&apos;s a failure, and I believe you can call the test function that defspec creates with a seed, like:

</span><pre>(defspec some-test ...)

(some-test 100 {:seed 42})
</pre></div><div id="t1560169996001600" t="2019-06-10 12:33:16 Shima Yes but I want to run the test with &quot;lein test&quot; and my test scenario needs to rerun the wrong tests with the same seed again. so I want to get the seed exactly inside of test/defspec, Is this even possible?
Thanks for your answer @gfredericks"><a href="#t1560169996001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:33:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>Yes but I want to run the test with &quot;lein test&quot; and my test scenario needs to rerun the wrong tests with the same seed again. so I want to get the seed exactly inside of test/defspec, Is this even possible?
Thanks for your answer @gfredericks</span></div><div id="t1560170099002400" t="2019-06-10 12:34:59 gfredericks @tajoddin.shima do you mean that you want to set the seed as an arg to  lein test  somehow? or to have it hard-coded in your test-file somewhere?"><a href="#t1560170099002400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:34:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@tajoddin.shima do you mean that you want to set the seed as an arg to </span><code>lein test</code><span> somehow? or to have it hard-coded in your test-file somewhere?</span></div><div id="t1560170462002500" t="2019-06-10 12:41:02 Shima none of them :)) I need something like this : @gfredericks"><a href="#t1560170462002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:41:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>none of them :)) I need something like this : @gfredericks</span></div><div id="t1560170589003400" t="2019-06-10 12:43:09 gfredericks I don&apos;t understand that; it looks like an infinite recursive loop"><a href="#t1560170589003400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:43:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t understand that; it looks like an infinite recursive loop</span></div><div id="t1560170611004100" t="2019-06-10 12:43:31 gfredericks Like, if the test fails, you just want to run it again?"><a href="#t1560170611004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:43:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Like, if the test fails, you just want to run it again?</span></div><div id="t1560170797004300" t="2019-06-10 12:46:37 Shima I have some randomness out of test-check context in my generator
I save the number of recursion in an atom and control this.
I just want to make sure that when the test failed is because of randomness inside of my generators"><a href="#t1560170797004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:46:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>I have some randomness out of test-check context in my generator
I save the number of recursion in an atom and control this.
I just want to make sure that when the test failed is because of randomness inside of my generators</span></div><div id="t1560170865004800" t="2019-06-10 12:47:45 gfredericks would it work to run the individual trial multiple times instead of the whole run?"><a href="#t1560170865004800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:47:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>would it work to run the individual trial multiple times instead of the whole run?</span></div><div id="t1560170938006300" t="2019-06-10 12:48:58 gfredericks something like

 (prop/for-all [test-suite (generator)]
  (loop [failures-left 5]
    (or (actual-test test-suite)
        (and (pos? failures-left) (recur (dec failures-left))))))
"><a href="#t1560170938006300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:48:58</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>something like

</span><pre>(prop/for-all [test-suite (generator)]
  (loop [failures-left 5]
    (or (actual-test test-suite)
        (and (pos? failures-left) (recur (dec failures-left))))))
</pre></div><div id="t1560171128006600" t="2019-06-10 12:52:08 Shima exactly
just instead of test-suite inside the loop, each time generate the new suite with the same seed"><a href="#t1560171128006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:52:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>exactly
just instead of test-suite inside the loop, each time generate the new suite with the same seed</span></div><div id="t1560171251006800" t="2019-06-10 12:54:11 Shima with generating the suite with same seed I want to bound the randomness to something that comes from out of test-check context"><a href="#t1560171251006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">12:54:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>with generating the suite with same seed I want to bound the randomness to something that comes from out of test-check context</span></div><div id="t1560171714007300" t="2019-06-10 13:01:54 gfredericks This extra randomness is used in the generator?"><a href="#t1560171714007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">13:01:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This extra randomness is used in the generator?</span></div><div id="t1560171808007600" t="2019-06-10 13:03:28 Shima yes"><a href="#t1560171808007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">13:03:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>yes</span></div><div id="t1560171882008700" t="2019-06-10 13:04:42 Shima what about this? It would be enough that I have access to the seed inside of the defspec to save in DB and don&apos;t need to regenerate the test-suite in it."><a href="#t1560171882008700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">13:04:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>what about this? It would be enough that I have access to the seed inside of the defspec to save in DB and don&apos;t need to regenerate the test-suite in it.</span></div><div id="t1560171950009400" t="2019-06-10 13:05:50 gfredericks I wonder whether you need the extra randomness at all

That&apos;s the nonstandard part

What is it accomplishing?"><a href="#t1560171950009400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-10</span>Â <span class="t" onclick="H(this)">13:05:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I wonder whether you need the extra randomness at all

That&apos;s the nonstandard part

What is it accomplishing?</span></div><div id="t1560280047012100" t="2019-06-11 19:07:27 Shima Yes, you&apos;re right. There is no need for this extra randomness. 
but I still wondering is there any way to get seed of each run? maybe in use-fixture function ?( for example to save in DB)
sorry for latency @gfredericks"><a href="#t1560280047012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-11</span>Â <span class="t" onclick="H(this)">19:07:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ShimaÂ </span><span>Yes, you&apos;re right. There is no need for this extra randomness. 
but I still wondering is there any way to get seed of each run? maybe in use-fixture function ?( for example to save in DB)
sorry for latency @gfredericks</span></div><div id="t1560280085012500" t="2019-06-11 19:08:05 gfredericks the seed is printed after every  defspec  run"><a href="#t1560280085012500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-11</span>Â <span class="t" onclick="H(this)">19:08:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the seed is printed after every </span><code>defspec</code><span> run</span></div><div id="t1560280112013000" t="2019-06-11 19:08:32 gfredericks if you want something more custom, you can always write your own code to call  clojure.test.check/quickcheck"><a href="#t1560280112013000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-11</span>Â <span class="t" onclick="H(this)">19:08:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you want something more custom, you can always write your own code to call </span><code>clojure.test.check/quickcheck</code></div><div id="t1560280132013300" t="2019-06-11 19:08:52 gfredericks defspec is just a macro that does some stuff for you"><a href="#t1560280132013300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-06-11</span>Â <span class="t" onclick="H(this)">19:08:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>defspec is just a macro that does some stuff for you</span></div><div id="t1561995125014300" t="2019-07-01 15:32:05 gfredericks test.check version  0.10.0-RC1  was released yesterday

Details:  https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown"><a href="#t1561995125014300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-07-01</span>Â <span class="t" onclick="H(this)">15:32:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.check version </span><code>0.10.0-RC1</code><span> was released yesterday

Details: </span><a href="https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown" target="_blank">https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown</a></div><div id="t1564769205000600" t="2019-08-02 18:06:45 kenny Is there a way to create a generator from a list of generators such that when it generates, it returns the same list with each element in the list generated?"><a href="#t1564769205000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-02</span>Â <span class="t" onclick="H(this)">18:06:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a way to create a generator from a list of generators such that when it generates, it returns the same list with each element in the list generated?</span></div><div id="t1564769292000800" t="2019-08-02 18:08:12 kenny Something like this:
 (gen/let [my-things (map (fn [thing]
                           (get-gen-for thing))
                         my-things)])
"><a href="#t1564769292000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-02</span>Â <span class="t" onclick="H(this)">18:08:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Something like this:
</span><pre>(gen/let [my-things (map (fn [thing]
                           (get-gen-for thing))
                         my-things)])
</pre></div><div id="t1564769423001400" t="2019-08-02 18:10:23 gfredericks @kenny is this different from  (apply gen/tuple ...) ?"><a href="#t1564769423001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-02</span>Â <span class="t" onclick="H(this)">18:10:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@kenny is this different from </span><code>(apply gen/tuple ...)</code><span>?</span></div><div id="t1564769461002000" t="2019-08-02 18:11:01 kenny Wow, so obvious haha. That&apos;s exactly it. Thanks  ğŸ™‚"><a href="#t1564769461002000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-02</span>Â <span class="t" onclick="H(this)">18:11:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Wow, so obvious haha. That&apos;s exactly it. Thanks </span><b>ğŸ™‚</b></div><div id="t1564770499002600" t="2019-08-02 18:28:19 alexmiller or just s/gen of an s/tuple if you&apos;re using spec"><a href="#t1564770499002600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-02</span>Â <span class="t" onclick="H(this)">18:28:19</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>or just s/gen of an s/tuple if you&apos;re using spec</span></div><div id="t1565636109003400" t="2019-08-12 18:55:09 gfredericks test.check version  0.10.0  has been released; no differences from  0.10.0-RC1"><a href="#t1565636109003400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-12</span>Â <span class="t" onclick="H(this)">18:55:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>test.check version </span><code>0.10.0</code><span> has been released; no differences from </span><code>0.10.0-RC1</code></div><div id="t1566329273006300" t="2019-08-20 19:27:53 kenny Is there a good way to provide some initialization for a property when used with the clojure.test integration? For example, I have this code:
 (defspec my-gen-test
  100
  (kafka/with-driver [d (make-driver {})]
    (prop/for-all [record (my-record-gen)]
      (kafka/pipe-input d record))))
 
It needs to initialize a Kafka test driver and then run the property test.  with-driver  is basically the same as  with-open  (i.e. it will close a resource after the form&apos;s body completes).  The problem I&apos;m running into is the property check doesn&apos;t appear to block until it&apos;s completed so the driver opens and then closes pretty quickly. Is there a way to work around this? Currently thinking to just make my own  defspec  that can handle this sort of thing."><a href="#t1566329273006300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:27:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a good way to provide some initialization for a property when used with the clojure.test integration? For example, I have this code:
</span><pre>(defspec my-gen-test
  100
  (kafka/with-driver [d (make-driver {})]
    (prop/for-all [record (my-record-gen)]
      (kafka/pipe-input d record))))
</pre><span>
It needs to initialize a Kafka test driver and then run the property test. </span><code>with-driver</code><span> is basically the same as </span><code>with-open</code><span> (i.e. it will close a resource after the form&apos;s body completes).  The problem I&apos;m running into is the property check doesn&apos;t appear to block until it&apos;s completed so the driver opens and then closes pretty quickly. Is there a way to work around this? Currently thinking to just make my own </span><code>defspec</code><span> that can handle this sort of thing.</span></div><div id="t1566329520006700" t="2019-08-20 19:32:00 kenny I could write my own  quick-check  fn like this:
 (defn quick-check
  [num-tests property &amp; opts]
  (tc-test/assert-check
    (apply tc/quick-check num-tests property opts)))
"><a href="#t1566329520006700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:32:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>I could write my own </span><code>quick-check</code><span> fn like this:
</span><pre>(defn quick-check
  [num-tests property &amp; opts]
  (tc-test/assert-check
    (apply tc/quick-check num-tests property opts)))
</pre></div><div id="t1566329652007600" t="2019-08-20 19:34:12 gfredericks @kenny you it to be opened/closed just once for the whole test run, across many trials?"><a href="#t1566329652007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:34:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@kenny you it to be opened/closed just once for the whole test run, across many trials?</span></div><div id="t1566329668007900" t="2019-08-20 19:34:28 kenny Yes. Open at the beginning, close at the end."><a href="#t1566329668007900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:34:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Yes. Open at the beginning, close at the end.</span></div><div id="t1566329689008400" t="2019-08-20 19:34:49 kenny It should run through all the properties using the same driver."><a href="#t1566329689008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:34:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>It should run through all the properties using the same driver.</span></div><div id="t1566329743009000" t="2019-08-20 19:35:43 gfredericks If you did it in a fixture and bound a dynamic var, would that be good enough?"><a href="#t1566329743009000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:35:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>If you did it in a fixture and bound a dynamic var, would that be good enough?</span></div><div id="t1566329782009800" t="2019-08-20 19:36:22 kenny Yes but fixtures are icky. They either run with each  deftest  or only once. Neither of those choices are a good fit."><a href="#t1566329782009800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:36:22</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Yes but fixtures are icky. They either run with each </span><code>deftest</code><span> or only once. Neither of those choices are a good fit.</span></div><div id="t1566329839010000" t="2019-08-20 19:37:19 gfredericks Oh right"><a href="#t1566329839010000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:37:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Oh right</span></div><div id="t1566329901010400" t="2019-08-20 19:38:21 gfredericks Yeah I don&apos;t think there are any super clean options"><a href="#t1566329901010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:38:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah I don&apos;t think there are any super clean options</span></div><div id="t1566330074010800" t="2019-08-20 19:41:14 kenny That quick-check wrapper fn should work for now"><a href="#t1566330074010800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-20</span>Â <span class="t" onclick="H(this)">19:41:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>That quick-check wrapper fn should work for now</span></div><div id="t1566416227011600" t="2019-08-21 19:37:07 johanatan @gfredericks any idea why  gen&apos;/string-from-regex  would be undefined when i have added test.chuck as a dep and required the chuck.generators namespace as  gen&apos;  ?"><a href="#t1566416227011600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:07</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>@gfredericks any idea why </span><code>gen&apos;/string-from-regex</code><span> would be undefined when i have added test.chuck as a dep and required the chuck.generators namespace as </span><code>gen&apos;</code><span> ?</span></div><div id="t1566416248012000" t="2019-08-21 19:37:28 johanatan tried both 0.2.8 (which used to work for me) and 0.2.10"><a href="#t1566416248012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:28</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>tried both 0.2.8 (which used to work for me) and 0.2.10</span></div><div id="t1566416256012300" t="2019-08-21 19:37:36 johanatan and this is with org.clojure/test.check v0.10.0"><a href="#t1566416256012300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:36</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>and this is with org.clojure/test.check v0.10.0</span></div><div id="t1566416264012700" t="2019-08-21 19:37:44 johanatan [using deps.edn]"><a href="#t1566416264012700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:44</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>[using deps.edn]</span></div><div id="t1566416268012900" t="2019-08-21 19:37:48 gfredericks Not at all"><a href="#t1566416268012900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Not at all</span></div><div id="t1566416275013200" t="2019-08-21 19:37:55 gfredericks It&apos;s a regular ole function"><a href="#t1566416275013200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s a regular ole function</span></div><div id="t1566416276013300" t="2019-08-21 19:37:56 johanatan hmm  ğŸ™‚"><a href="#t1566416276013300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:37:56</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>hmm </span><b>ğŸ™‚</b></div><div id="t1566416337013700" t="2019-08-21 19:38:57 johanatan wow, must have been some weird fluke. restarting figwheel a few times resolved it"><a href="#t1566416337013700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:38:57</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>wow, must have been some weird fluke. restarting figwheel a few times resolved it</span></div><div id="t1566416339013900" t="2019-08-21 19:38:59 gfredericks Wait"><a href="#t1566416339013900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:38:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Wait</span></div><div id="t1566416350014300" t="2019-08-21 19:39:10 gfredericks It&apos;s not in cljs"><a href="#t1566416350014300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:39:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s not in cljs</span></div><div id="t1566416357014600" t="2019-08-21 19:39:17 gfredericks Is that what you&apos;re using?"><a href="#t1566416357014600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:39:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Is that what you&apos;re using?</span></div><div id="t1566416363015000" t="2019-08-21 19:39:23 johanatan oh, yea this is cljs"><a href="#t1566416363015000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:39:23</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>oh, yea this is cljs</span></div><div id="t1566416380015400" t="2019-08-21 19:39:40 gfredericks Well now I don&apos;t know why it works  ğŸ˜‚"><a href="#t1566416380015400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:39:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Well now I don&apos;t know why it works </span><b>ğŸ˜‚</b></div><div id="t1566416386015600" t="2019-08-21 19:39:46 johanatan haha, yea same here"><a href="#t1566416386015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:39:46</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>haha, yea same here</span></div><div id="t1566416416016400" t="2019-08-21 19:40:16 gfredericks There&apos;s s longstanding PR for porting it, but I don&apos;t think it&apos;s complete"><a href="#t1566416416016400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:40:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There&apos;s s longstanding PR for porting it, but I don&apos;t think it&apos;s complete</span></div><div id="t1566416430016900" t="2019-08-21 19:40:30 gfredericks It&apos;s very nontrivial, because different regex engines"><a href="#t1566416430016900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:40:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s very nontrivial, because different regex engines</span></div><div id="t1566416435017100" t="2019-08-21 19:40:35 johanatan hmm ok. right"><a href="#t1566416435017100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:40:35</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>hmm ok. right</span></div><div id="t1566417512017600" t="2019-08-21 19:58:32 johanatan btw, should everything in clojure.test.check be in the clojure.spec.alpha namespace now?"><a href="#t1566417512017600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:58:32</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>btw, should everything in clojure.test.check be in the clojure.spec.alpha namespace now?</span></div><div id="t1566417523017900" t="2019-08-21 19:58:43 johanatan or should we continue using the former until v2 comes out?"><a href="#t1566417523017900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:58:43</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>or should we continue using the former until v2 comes out?</span></div><div id="t1566417549018200" t="2019-08-21 19:59:09 johanatan asking because  gen/let  doesn&apos;t appear to be there"><a href="#t1566417549018200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">19:59:09</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>asking because </span><code>gen/let</code><span> doesn&apos;t appear to be there</span></div><div id="t1566418061018700" t="2019-08-21 20:07:41 kenny @johanatan Several functions in test.check gen ns are not in the clojure.spec gen ns."><a href="#t1566418061018700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">20:07:41</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>@johanatan Several functions in test.check gen ns are not in the clojure.spec gen ns.</span></div><div id="t1566418144019100" t="2019-08-21 20:09:04 alexmiller gen/let is a macro and only the primary functions are being dynaloaded"><a href="#t1566418144019100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">20:09:04</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>gen/let is a macro and only the primary functions are being dynaloaded</span></div><div id="t1566418182019700" t="2019-08-21 20:09:42 alexmiller it&apos;s not impossible to do so but not high on our list of things to do, so you should just continue using the one from test.check if you need it"><a href="#t1566418182019700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">20:09:42</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>it&apos;s not impossible to do so but not high on our list of things to do, so you should just continue using the one from test.check if you need it</span></div><div id="t1566419831019900" t="2019-08-21 20:37:11 johanatan ok, thx"><a href="#t1566419831019900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-21</span>Â <span class="t" onclick="H(this)">20:37:11</span>Â Â Â Â Â Â Â Â Â Â Â johanatanÂ </span><span>ok, thx</span></div><div id="t1566442385021600" t="2019-08-22 02:53:05 kenny @alexmiller Adding gen/let to the spec gen ns would be quite helpful. It basically a copy paste (unless there&apos;s some smarter way to dynamically expose a macro). We use gen/let all over the place via a helper ns. We cannot require test.check because we don&apos;t want it on the classpath at runtime."><a href="#t1566442385021600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span>Â <span class="t" onclick="H(this)">02:53:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>@alexmiller Adding gen/let to the spec gen ns would be quite helpful. It basically a copy paste (unless there&apos;s some smarter way to dynamically expose a macro). We use gen/let all over the place via a helper ns. We cannot require test.check because we don&apos;t want it on the classpath at runtime.</span></div><div id="t1566444012023000" t="2019-08-22 03:20:12 alexmiller because you need macros at compile time, I don&apos;t think you can dynamically include it the way we dynamically load the other functions from gen"><a href="#t1566444012023000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span>Â <span class="t" onclick="H(this)">03:20:12</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>because you need macros at compile time, I don&apos;t think you can dynamically include it the way we dynamically load the other functions from gen</span></div><div id="t1566444050023500" t="2019-08-22 03:20:50 alexmiller there is actually a ticket for this though with a patch, but I don&apos;t remember if it just recreates the macro or what"><a href="#t1566444050023500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-22</span>Â <span class="t" onclick="H(this)">03:20:50</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>there is actually a ticket for this though with a patch, but I don&apos;t remember if it just recreates the macro or what</span></div><div id="t1572772641000700" t="2019-11-03 09:17:21 leonoel does the empty generator exist ?"><a href="#t1572772641000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">09:17:21</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>does the empty generator exist ?</span></div><div id="t1572799643001400" t="2019-11-03 16:47:23 andy.fingerhut meaning, fails to generate anything?"><a href="#t1572799643001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:47:23</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>meaning, fails to generate anything?</span></div><div id="t1572799664001700" t="2019-11-03 16:47:44 leonoel yes"><a href="#t1572799664001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:47:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>yes</span></div><div id="t1572799683002500" t="2019-11-03 16:48:03 andy.fingerhut What would you expect it to do if you tried to cause it to generate a value?  Throw an exception?"><a href="#t1572799683002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:48:03</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>What would you expect it to do if you tried to cause it to generate a value?  Throw an exception?</span></div><div id="t1572799690002800" t="2019-11-03 16:48:10 gfredericks Can make it with such-that, if so"><a href="#t1572799690002800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:48:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Can make it with such-that, if so</span></div><div id="t1572799747003600" t="2019-11-03 16:49:07 andy.fingerhut Can you describe a situation where it would be useful to have a generator that doesn&apos;t generate anything?  I&apos;m lacking imagination there."><a href="#t1572799747003600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:49:07</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>Can you describe a situation where it would be useful to have a generator that doesn&apos;t generate anything?  I&apos;m lacking imagination there.</span></div><div id="t1572799903004900" t="2019-11-03 16:51:43 leonoel I&apos;m working on regular languages, and I&apos;m willing to construct a generator for words of a given language"><a href="#t1572799903004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:51:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>I&apos;m working on regular languages, and I&apos;m willing to construct a generator for words of a given language</span></div><div id="t1572799946005600" t="2019-11-03 16:52:26 leonoel so, does it makes sense to have a generator for words of the empty language ?"><a href="#t1572799946005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:52:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>so, does it makes sense to have a generator for words of the empty language ?</span></div><div id="t1572799966005900" t="2019-11-03 16:52:46 gfredericks Sure"><a href="#t1572799966005900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:52:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Sure</span></div><div id="t1572799977006200" t="2019-11-03 16:52:57 andy.fingerhut Would it just throw an exception when you tried to generate such a word?"><a href="#t1572799977006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:52:57</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>Would it just throw an exception when you tried to generate such a word?</span></div><div id="t1572799999006600" t="2019-11-03 16:53:19 leonoel no, because it&apos;s not error"><a href="#t1572799999006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:53:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>no, because it&apos;s not error</span></div><div id="t1572800001006800" t="2019-11-03 16:53:21 gfredericks I&apos;d hope so"><a href="#t1572800001006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:53:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d hope so</span></div><div id="t1572800016007600" t="2019-11-03 16:53:36 andy.fingerhut If it returns a value, that would be interpreted as a generated valid value, wouldn&apos;t it?"><a href="#t1572800016007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:53:36</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>If it returns a value, that would be interpreted as a generated valid value, wouldn&apos;t it?</span></div><div id="t1572800017007700" t="2019-11-03 16:53:37 gfredericks What would it generate then?"><a href="#t1572800017007700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:53:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>What would it generate then?</span></div><div id="t1572800063008100" t="2019-11-03 16:54:23 leonoel it would generate nothing"><a href="#t1572800063008100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:54:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>it would generate nothing</span></div><div id="t1572800083008400" t="2019-11-03 16:54:43 andy.fingerhut What would a call to  samples  return?   (edit: I meant a call to  gen/sample )"><a href="#t1572800083008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:54:43</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>What would a call to </span><code>samples</code><span> return?   (edit: I meant a call to </span><code>gen/sample</code><span>)</span></div><div id="t1572800097008600" t="2019-11-03 16:54:57 leonoel an empty list"><a href="#t1572800097008600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:54:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>an empty list</span></div><div id="t1572800112009200" t="2019-11-03 16:55:12 gfredericks There&apos;s no such thing as generating nothing"><a href="#t1572800112009200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:55:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>There&apos;s no such thing as generating nothing</span></div><div id="t1572800157010200" t="2019-11-03 16:55:57 gfredericks Similar to there&apos;s no such thing as a function that returns nothing"><a href="#t1572800157010200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:55:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Similar to there&apos;s no such thing as a function that returns nothing</span></div><div id="t1572800241011200" t="2019-11-03 16:57:21 andy.fingerhut e.g. a generator that returns  nil  is thereby indicating:  nil  is a value that satisfies the desired predicate.  Not that there is no valid value satisfying the predicate."><a href="#t1572800241011200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">16:57:21</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>e.g. a generator that returns </span><code>nil</code><span> is thereby indicating: </span><code>nil</code><span> is a value that satisfies the desired predicate.  Not that there is no valid value satisfying the predicate.</span></div><div id="t1572800502015200" t="2019-11-03 17:01:42 gfredericks I guess a downside of using a throwing generator for the empty language is that test.check wouldn&apos;t let you do things like create a disjunction using gen/one-of like you&apos;d want to"><a href="#t1572800502015200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:01:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I guess a downside of using a throwing generator for the empty language is that test.check wouldn&apos;t let you do things like create a disjunction using gen/one-of like you&apos;d want to</span></div><div id="t1572800526016100" t="2019-11-03 17:02:06 gfredericks That would just give you a generator that threw half the time, which is obviously wrong"><a href="#t1572800526016100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:02:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That would just give you a generator that threw half the time, which is obviously wrong</span></div><div id="t1572800534016200" t="2019-11-03 17:02:14 leonoel I don&apos;t fully understand why it doesn&apos;t make sense, and why e.g  (g/one-of [])  is forbidden."><a href="#t1572800534016200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:02:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>I don&apos;t fully understand why it doesn&apos;t make sense, and why e.g </span><code>(g/one-of [])</code><span> is forbidden.</span></div><div id="t1572800567017100" t="2019-11-03 17:02:47 leonoel this is really a noob question, I&apos;m not really familiar with this topic"><a href="#t1572800567017100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:02:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>this is really a noob question, I&apos;m not really familiar with this topic</span></div><div id="t1572800579017500" t="2019-11-03 17:02:59 gfredericks This might be a feature that could be added, but it would have to pervade a lot of the combinators"><a href="#t1572800579017500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:02:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This might be a feature that could be added, but it would have to pervade a lot of the combinators</span></div><div id="t1572800626018800" t="2019-11-03 17:03:46 gfredericks Like one-of would have to filter out empty generators from its input, for example"><a href="#t1572800626018800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:03:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Like one-of would have to filter out empty generators from its input, for example</span></div><div id="t1572800643019600" t="2019-11-03 17:04:03 gfredericks fmap and bind would have to short circuit"><a href="#t1572800643019600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:04:03</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>fmap and bind would have to short circuit</span></div><div id="t1572800649019900" t="2019-11-03 17:04:09 gfredericks And on and on"><a href="#t1572800649019900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:04:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And on and on</span></div><div id="t1572800694021200" t="2019-11-03 17:04:54 andy.fingerhut Well, if you used such-that with an arbitrary function predicate that always returned false, test.check would have no general way to identify all possible generate-nothing generators.  It could only recognize ones that you made obvious were generating-nothing generators."><a href="#t1572800694021200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:04:54</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>Well, if you used such-that with an arbitrary function predicate that always returned false, test.check would have no general way to identify all possible generate-nothing generators.  It could only recognize ones that you made obvious were generating-nothing generators.</span></div><div id="t1572800707021500" t="2019-11-03 17:05:07 gfredericks Yes"><a href="#t1572800707021500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:05:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yes</span></div><div id="t1572800717021900" t="2019-11-03 17:05:17 gfredericks Which is why the pervasive support is important"><a href="#t1572800717021900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:05:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Which is why the pervasive support is important</span></div><div id="t1572800730022400" t="2019-11-03 17:05:30 gfredericks To track emptiness"><a href="#t1572800730022400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:05:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>To track emptiness</span></div><div id="t1572800768024200" t="2019-11-03 17:06:08 andy.fingerhut So one-of would have to try invoking empty generators, and have a way of getting back &quot;I didn&apos;t generate anything&quot;, wouldn&apos;t it?  i.e. in order to enable arbitrary empty gens."><a href="#t1572800768024200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:06:08</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>So one-of would have to try invoking empty generators, and have a way of getting back &quot;I didn&apos;t generate anything&quot;, wouldn&apos;t it?  i.e. in order to enable arbitrary empty gens.</span></div><div id="t1572800800024500" t="2019-11-03 17:06:40 gfredericks I guess you could do it that way"><a href="#t1572800800024500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:06:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I guess you could do it that way</span></div><div id="t1572800771024400" t="2019-11-03 17:06:11 gfredericks And this would still be a generator that throws when you try to generate, so if that can&apos;t be useful to you, then even this idea wouldn&apos;t help"><a href="#t1572800771024400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:06:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And this would still be a generator that throws when you try to generate, so if that can&apos;t be useful to you, then even this idea wouldn&apos;t help</span></div><div id="t1572800825025800" t="2019-11-03 17:07:05 gfredericks Not sure how that would affect the usability of such-that"><a href="#t1572800825025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:07:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Not sure how that would affect the usability of such-that</span></div><div id="t1572800857027200" t="2019-11-03 17:07:37 andy.fingerhut Not recommending that approach, necessarily, but it seems like one approach, the other being to say something like &quot;empty gens using such-that with arbitrary Clojure functions as predicates may throw exceptions, or some other behavior you might not like, if you try to use them&quot;"><a href="#t1572800857027200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:07:37</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>Not recommending that approach, necessarily, but it seems like one approach, the other being to say something like &quot;empty gens using such-that with arbitrary Clojure functions as predicates may throw exceptions, or some other behavior you might not like, if you try to use them&quot;</span></div><div id="t1572800859027400" t="2019-11-03 17:07:39 gfredericks That&apos;s a pretty deep breaking change, though, so I doubt it would be added as a feature"><a href="#t1572800859027400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:07:39</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That&apos;s a pretty deep breaking change, though, so I doubt it would be added as a feature</span></div><div id="t1572801167028700" t="2019-11-03 17:12:47 leonoel is  (g/such-that (constantly false) generator)  a terrible idea ?"><a href="#t1572801167028700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:12:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>is </span><code>(g/such-that (constantly false) generator)</code><span> a terrible idea ?</span></div><div id="t1572801187029300" t="2019-11-03 17:13:07 gfredericks No, but it throws, and you said you didn&apos;t want that"><a href="#t1572801187029300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:13:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>No, but it throws, and you said you didn&apos;t want that</span></div><div id="t1572801209030000" t="2019-11-03 17:13:29 gfredericks Also it doesn&apos;t compose like I suspect you&apos;d want for regular languages"><a href="#t1572801209030000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:13:29</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Also it doesn&apos;t compose like I suspect you&apos;d want for regular languages</span></div><div id="t1572801251030900" t="2019-11-03 17:14:11 gfredericks But if you use it without composing, it&apos;d work fine"><a href="#t1572801251030900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:14:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>But if you use it without composing, it&apos;d work fine</span></div><div id="t1572801263031200" t="2019-11-03 17:14:23 leonoel that matches my intuition"><a href="#t1572801263031200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:14:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>that matches my intuition</span></div><div id="t1572801320031900" t="2019-11-03 17:15:20 leonoel I ended up working with  nil able generators, and it&apos;s not that clumsy so I&apos;ll keep it that way"><a href="#t1572801320031900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:15:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>I ended up working with </span><code>nil</code><span>able generators, and it&apos;s not that clumsy so I&apos;ll keep it that way</span></div><div id="t1572801376033100" t="2019-11-03 17:16:16 gfredericks Meaning a generator that generates nil, or a context where you either have a generator or you have nil?"><a href="#t1572801376033100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:16:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Meaning a generator that generates nil, or a context where you either have a generator or you have nil?</span></div><div id="t1572801391033300" t="2019-11-03 17:16:31 leonoel the latter"><a href="#t1572801391033300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:16:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>the latter</span></div><div id="t1572801400033600" t="2019-11-03 17:16:40 gfredericks Sounds fine"><a href="#t1572801400033600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:16:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Sounds fine</span></div><div id="t1572801435033800" t="2019-11-03 17:17:15 leonoel OK thank you for clarification"><a href="#t1572801435033800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-03</span>Â <span class="t" onclick="H(this)">17:17:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â leonoelÂ </span><span>OK thank you for clarification</span></div><div id="t1576542115002700" t="2019-12-17 00:21:55 jvtrigueros Hi all, I&apos;m debugging a failing test that uses  test.check &apos;s  defspec . When my test fails, I&apos;m able to obtain the seed and I can see the value that caused the test to fail, however, neither the exact value or the reduced value produce the failure.

I reckon it&apos;s the sequence of values that cause the failure Dx

Is there a way that I can output the values so that I can execute them in order and see the failure? The only thing that comes to mind is  spit ing the values inside the  for-all  closure."><a href="#t1576542115002700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">00:21:55</span>Â Â Â Â Â Â Â Â Â jvtriguerosÂ </span><span>Hi all, I&apos;m debugging a failing test that uses </span><code>test.check</code><span>&apos;s </span><code>defspec</code><span>. When my test fails, I&apos;m able to obtain the seed and I can see the value that caused the test to fail, however, neither the exact value or the reduced value produce the failure.

I reckon it&apos;s the sequence of values that cause the failure Dx

Is there a way that I can output the values so that I can execute them in order and see the failure? The only thing that comes to mind is </span><code>spit</code><span>ing the values inside the </span><code>for-all</code><span> closure.</span></div><div id="t1576542557004200" t="2019-12-17 00:29:17 gfredericks That would work. This isn&apos;t a &quot;supported&quot; scenario because it&apos;s assumed that your test passes or fails solely based on the generated values"><a href="#t1576542557004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">00:29:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That would work. This isn&apos;t a &quot;supported&quot; scenario because it&apos;s assumed that your test passes or fails solely based on the generated values</span></div><div id="t1576542592005200" t="2019-12-17 00:29:52 gfredericks So if you don&apos;t get your test into that form you&apos;ll be fighting the system the whole time"><a href="#t1576542592005200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">00:29:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So if you don&apos;t get your test into that form you&apos;ll be fighting the system the whole time</span></div><div id="t1576542920006200" t="2019-12-17 00:35:20 jvtrigueros Right. In this case, I&apos;m doing a roundtrip test with a DynamoDBLocal instance so I bet I&apos;m overwritting something causing failure in the tests."><a href="#t1576542920006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">00:35:20</span>Â Â Â Â Â Â Â Â Â jvtriguerosÂ </span><span>Right. In this case, I&apos;m doing a roundtrip test with a DynamoDBLocal instance so I bet I&apos;m overwritting something causing failure in the tests.</span></div><div id="t1576543688006500" t="2019-12-17 00:48:08 jvtrigueros Thanks! That helped, I had an issue in my generator."><a href="#t1576543688006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">00:48:08</span>Â Â Â Â Â Â Â Â Â jvtriguerosÂ </span><span>Thanks! That helped, I had an issue in my generator.</span></div><div id="t1576547215007700" t="2019-12-17 01:46:55 gfredericks For db stuff, I&apos;d generally look for a way to reset the db at the beginning of each trial, or partition the data so it doesn&apos;t overlap"><a href="#t1576547215007700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-17</span>Â <span class="t" onclick="H(this)">01:46:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>For db stuff, I&apos;d generally look for a way to reset the db at the beginning of each trial, or partition the data so it doesn&apos;t overlap</span></div><div id="t1578155725001200" t="2020-01-04 16:35:25 bartuka hi ppl, how do you usually integrate test.check with deftesting or midje?"><a href="#t1578155725001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">16:35:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>hi ppl, how do you usually integrate test.check with deftesting or midje?</span></div><div id="t1578155763002100" t="2020-01-04 16:36:03 bartuka I am slowly building some property-based tests in my code base to learn more about it, but I currently use  midje to my tests and would like to have it more integrated"><a href="#t1578155763002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">16:36:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I am slowly building some property-based tests in my code base to learn more about it, but I currently use </span><code>midje</code><span>to my tests and would like to have it more integrated</span></div><div id="t1578158848003500" t="2020-01-04 17:27:28 gfredericks At worst you can call the quickcheck function and assert that the pass? key (or whatever it&apos;s called) is true"><a href="#t1578158848003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">17:27:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>At worst you can call the quickcheck function and assert that the pass? key (or whatever it&apos;s called) is true</span></div><div id="t1578158890004700" t="2020-01-04 17:28:10 gfredericks defspec is the normal integration point with clojure.test, I have no idea if that&apos;s usable with midje"><a href="#t1578158890004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">17:28:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>defspec is the normal integration point with clojure.test, I have no idea if that&apos;s usable with midje</span></div><div id="t1578163366005100" t="2020-01-04 18:42:46 bartuka I had done this macro to help me... it&apos;s working but not ideal
 (defmacro check-that [desc n property]
  `(fact ~desc
     (let [check# (tc/quick-check ~n ~property)
           passed# (:result check#)]
       (when-not passed# (clojure.pprint/pprint check#))
       passed# =&gt; true)))"><a href="#t1578163366005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:42:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I had done this macro to help me... it&apos;s working but not ideal
</span><pre>(defmacro check-that [desc n property]
  `(fact ~desc
     (let [check# (tc/quick-check ~n ~property)
           passed# (:result check#)]
       (when-not passed# (clojure.pprint/pprint check#))
       passed# =&gt; true)))</pre></div><div id="t1578163392005700" t="2020-01-04 18:43:12 bartuka the message when error occur is not visible in the  midje  stack trace.. but I still get it."><a href="#t1578163392005700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:43:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>the message when error occur is not visible in the </span><code>midje</code><span> stack trace.. but I still get it.</span></div><div id="t1578164279006000" t="2020-01-04 18:57:59 gfredericks you&apos;re checking the wrong return key"><a href="#t1578164279006000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:57:59</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you&apos;re checking the wrong return key</span></div><div id="t1578164286006300" t="2020-01-04 18:58:06 gfredericks exceptions are exactly the edge case where that doesn&apos;t work"><a href="#t1578164286006300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:58:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>exceptions are exactly the edge case where that doesn&apos;t work</span></div><div id="t1578164325006600" t="2020-01-04 18:58:45 gfredericks you want the  :pass?  key:  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check.cljc#L108"><a href="#t1578164325006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:58:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you want the </span><code>:pass?</code><span> key: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check.cljc#L108" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check.cljc#L108</a></div><div id="t1578164371007500" t="2020-01-04 18:59:31 gfredericks if you want exceptions reported the way midje would, you can also do something like

 (when (and (not (:pass? check#)) (:result check#))
  (throw (:result check#)))"><a href="#t1578164371007500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:59:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you want exceptions reported the way midje would, you can also do something like

</span><pre>(when (and (not (:pass? check#)) (:result check#))
  (throw (:result check#)))</pre></div><div id="t1578164389007900" t="2020-01-04 18:59:49 gfredericks or maybe midje has a less hacky way to do that"><a href="#t1578164389007900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">18:59:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>or maybe midje has a less hacky way to do that</span></div><div id="t1578164415008400" t="2020-01-04 19:00:15 bartuka oh.. didn&apos;t know!! thanks"><a href="#t1578164415008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:00:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>oh.. didn&apos;t know!! thanks</span></div><div id="t1578164433008700" t="2020-01-04 19:00:33 gfredericks the keys are a bit confusingly named for legacy reasons"><a href="#t1578164433008700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:00:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>the keys are a bit confusingly named for legacy reasons</span></div><div id="t1578164484008900" t="2020-01-04 19:01:24 gfredericks but they&apos;re described in the docstring at least"><a href="#t1578164484008900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:01:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but they&apos;re described in the docstring at least</span></div><div id="t1578164570009800" t="2020-01-04 19:02:50 bartuka the :result key is not a boolean? So when an exception happen the result will be a keyword :exception something like that?"><a href="#t1578164570009800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:02:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>the :result key is not a boolean? So when an exception happen the result will be a keyword :exception something like that?</span></div><div id="t1578164590010100" t="2020-01-04 19:03:10 gfredericks no it&apos;ll be an actual exception object"><a href="#t1578164590010100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:03:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>no it&apos;ll be an actual exception object</span></div><div id="t1578164606010300" t="2020-01-04 19:03:26 gfredericks :pass?  is always a boolean"><a href="#t1578164606010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:03:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>:pass?</code><span> is always a boolean</span></div><div id="t1578164668010900" t="2020-01-04 19:04:28 bartuka got it! thanks for the hint"><a href="#t1578164668010900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:04:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>got it! thanks for the hint</span></div><div id="t1578164718011500" t="2020-01-04 19:05:18 bartuka just watched your presentation and started to write tests to a utils namespace I have in my current project"><a href="#t1578164718011500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:05:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>just watched your presentation and started to write tests to a utils namespace I have in my current project</span></div><div id="t1578164740012000" t="2020-01-04 19:05:40 bartuka interesting bits already pop out!! some edge cases dealing with dates  ğŸ˜ƒ"><a href="#t1578164740012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:05:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>interesting bits already pop out!! some edge cases dealing with dates </span><b>ğŸ˜ƒ</b></div><div id="t1578164820013100" t="2020-01-04 19:07:00 bartuka and a performance issue as well. lol. The prod version of the code took 12secs to run 1000 times.. after some refactor it went down to 2sec. And it still works! I used to slow one to validate the fast impl. (Y)"><a href="#t1578164820013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:07:00</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>and a performance issue as well. lol. The prod version of the code took 12secs to run 1000 times.. after some refactor it went down to 2sec. And it still works! I used to slow one to validate the fast impl. (Y)</span></div><div id="t1578164847013400" t="2020-01-04 19:07:27 gfredericks oh yeah, I love the before-and-after refactoring check"><a href="#t1578164847013400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:07:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>oh yeah, I love the before-and-after refactoring check</span></div><div id="t1578164925013900" t="2020-01-04 19:08:45 gfredericks &quot;test.check as incentive to make your code faster&quot; is an angle I hadn&apos;t considered before  ğŸ™‚"><a href="#t1578164925013900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:08:45</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&quot;test.check as incentive to make your code faster&quot; is an angle I hadn&apos;t considered before </span><b>ğŸ™‚</b></div><div id="t1578164962014300" t="2020-01-04 19:09:22 gfredericks it&apos;s almost the opposite of the TDD people that put high effort into making the tests extremely fast"><a href="#t1578164962014300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:09:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>it&apos;s almost the opposite of the TDD people that put high effort into making the tests extremely fast</span></div><div id="t1578165034015300" t="2020-01-04 19:10:34 bartuka that&apos;s true. I stumbled in test.check because I am really studying tests as a whole subject and experimenting it in my project here"><a href="#t1578165034015300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:10:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>that&apos;s true. I stumbled in test.check because I am really studying tests as a whole subject and experimenting it in my project here</span></div><div id="t1578165059015900" t="2020-01-04 19:10:59 bartuka this subject has people with very very strong opinions hehehe"><a href="#t1578165059015900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:10:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>this subject has people with very very strong opinions hehehe</span></div><div id="t1578165103016600" t="2020-01-04 19:11:43 bartuka saw some guy arguing that Golang was the standard language for TDD because of the incredible fast feedback you get from your entire suite running in ms"><a href="#t1578165103016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:11:43</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>saw some guy arguing that Golang was the standard language for TDD because of the incredible fast feedback you get from your entire suite running in ms</span></div><div id="t1578165114017000" t="2020-01-04 19:11:54 bartuka o.O"><a href="#t1578165114017000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:11:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>o.O</span></div><div id="t1578165135017500" t="2020-01-04 19:12:15 gfredericks Â¯\(ãƒ„)/Â¯"><a href="#t1578165135017500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:12:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Â¯\(ãƒ„)/Â¯</span></div><div id="t1578165224018400" t="2020-01-04 19:13:44 bartuka do you have more material about property-based tests to share? I am looking for something more conceptual about how to spot invariants"><a href="#t1578165224018400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:13:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>do you have more material about property-based tests to share? I am looking for something more conceptual about how to spot invariants</span></div><div id="t1578165254019000" t="2020-01-04 19:14:14 bartuka I know it is very context based, but some general concepts must be applicable"><a href="#t1578165254019000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:14:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I know it is very context based, but some general concepts must be applicable</span></div><div id="t1578165266019300" t="2020-01-04 19:14:26 gfredericks there&apos;s language-agnostic material on that subject"><a href="#t1578165266019300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:14:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>there&apos;s language-agnostic material on that subject</span></div><div id="t1578165284019700" t="2020-01-04 19:14:44 gfredericks or rather, any material on that subject regardless of language would be applicable"><a href="#t1578165284019700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:14:44</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>or rather, any material on that subject regardless of language would be applicable</span></div><div id="t1578165336020000" t="2020-01-04 19:15:36 gfredericks e.g., a quick trip in the googlemobile suggested:  https://fsharpforfunandprofit.com/posts/property-based-testing-2/"><a href="#t1578165336020000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:15:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>e.g., a quick trip in the googlemobile suggested: </span><a href="https://fsharpforfunandprofit.com/posts/property-based-testing-2/" target="_blank">https://fsharpforfunandprofit.com/posts/property-based-testing-2/</a></div><div id="t1578165489020500" t="2020-01-04 19:18:09 bartuka cool, thanks! I will keep my search as well o/"><a href="#t1578165489020500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:18:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>cool, thanks! I will keep my search as well o/</span></div><div id="t1578165719021100" t="2020-01-04 19:21:59 alexmiller I spent a bit of time trying to talk about this in Clojure Applied, not sure I said anything revolutionary, but perhaps of interest"><a href="#t1578165719021100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:21:59</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>I spent a bit of time trying to talk about this in Clojure Applied, not sure I said anything revolutionary, but perhaps of interest</span></div><div id="t1578165920021900" t="2020-01-04 19:25:20 bartuka I like when ppl suggest a book and I have it hehe. thanks for pointing out @alexmiller Part III on Practices (Y)"><a href="#t1578165920021900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:25:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I like when ppl suggest a book and I have it hehe. thanks for pointing out @alexmiller Part III on Practices (Y)</span></div><div id="t1578166068022200" t="2020-01-04 19:27:48 alexmiller yeah, it&apos;s chapter 8"><a href="#t1578166068022200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">19:27:48</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>yeah, it&apos;s chapter 8</span></div><div id="t1578168653024800" t="2020-01-04 20:10:53 bartuka gosh, how can I work next monday o.O

I just got this error from a test:
 There is insufficient memory for the Java Runtime Environment to continue.
 repl_1  | # Native memory allocation (malloc) failed to allocate 312 bytes for AllocateHeap
 repl_1  | # An error report file with more information is saved as:
 repl_1  | # /app/hs_err_pid46.log 
It is a simple code to add business days taking into account Brazilian holidays to an java.util.Date. But the generator is creating java.util.Date with any values for min,secs and millis. Then, this happened:
 (.equals #inst &quot;1980-02-02T00:01:01.000-00:00&quot; #inst &quot;1980-02-02T01:00:01.000-00:00&quot;)"><a href="#t1578168653024800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:10:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>gosh, how can I work next monday o.O

I just got this error from a test:
</span><pre>There is insufficient memory for the Java Runtime Environment to continue.
 repl_1  | # Native memory allocation (malloc) failed to allocate 312 bytes for AllocateHeap
 repl_1  | # An error report file with more information is saved as:
 repl_1  | # /app/hs_err_pid46.log</pre><span>
It is a simple code to add business days taking into account Brazilian holidays to an java.util.Date. But the generator is creating java.util.Date with any values for min,secs and millis. Then, this happened:
</span><pre>(.equals #inst &quot;1980-02-02T00:01:01.000-00:00&quot; #inst &quot;1980-02-02T01:00:01.000-00:00&quot;)</pre></div><div id="t1578169808030300" t="2020-01-04 20:30:08 bartuka I edit.. both were the same, year, month and day. But different hour."><a href="#t1578169808030300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:30:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I edit.. both were the same, year, month and day. But different hour.</span></div><div id="t1578168667025200" t="2020-01-04 20:11:07 bartuka it was suppose to be true in the prod code =("><a href="#t1578168667025200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:11:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>it was suppose to be true in the prod code =(</span></div><div id="t1578168698025700" t="2020-01-04 20:11:38 gfredericks ... why?"><a href="#t1578168698025700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:11:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>... why?</span></div><div id="t1578168749026500" t="2020-01-04 20:12:29 bartuka people [me probably] was imagining this code as a Date not DateTime inputs"><a href="#t1578168749026500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:12:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>people [me probably] was imagining this code as a Date not DateTime inputs</span></div><div id="t1578168765027000" t="2020-01-04 20:12:45 bartuka but some day this extension happened without proper care rsrs"><a href="#t1578168765027000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:12:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>but some day this extension happened without proper care rsrs</span></div><div id="t1578168780027300" t="2020-01-04 20:13:00 gfredericks LocalDate?"><a href="#t1578168780027300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:13:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>LocalDate?</span></div><div id="t1578168794027500" t="2020-01-04 20:13:14 bartuka yes"><a href="#t1578168794027500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:13:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>yes</span></div><div id="t1578168870028100" t="2020-01-04 20:14:30 gfredericks so many languages/libraries seem to encourage people to think of datetimes as localdates with more resolution, but that&apos;s not at all the case"><a href="#t1578168870028100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:14:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>so many languages/libraries seem to encourage people to think of datetimes as localdates with more resolution, but that&apos;s not at all the case</span></div><div id="t1578168925028700" t="2020-01-04 20:15:25 bartuka yeah, first few minutes and a lot of lessons. This year will be nice. haha"><a href="#t1578168925028700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:15:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>yeah, first few minutes and a lot of lessons. This year will be nice. haha</span></div><div id="t1578168991029400" t="2020-01-04 20:16:31 bartuka and funny enough, we had an example-based tests.. but the java.util.date passed around was all with  T01:00:01.000-00:00"><a href="#t1578168991029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span>Â <span class="t" onclick="H(this)">20:16:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>and funny enough, we had an example-based tests.. but the java.util.date passed around was all with </span><code>T01:00:01.000-00:00</code></div><div id="t1578183020033400" t="2020-01-05 00:10:20 bartuka my snippet.. found some edge cases with interest-rate computation. I made a gist to show to others later, very compact and sums up everything I learned today. 1) Modeling my problem domain with generators (unfortunately, we have interest rates up to 400% an year for some loans here in Brazil.. i&apos;m not too pessimistic in my model lol), 2) testing invariants [round-trips operations ]  https://gist.github.com/wandersoncferreira/183c56da92c4fe388efef05ca51af4fa"><a href="#t1578183020033400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-05</span>Â <span class="t" onclick="H(this)">00:10:20</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>my snippet.. found some edge cases with interest-rate computation. I made a gist to show to others later, very compact and sums up everything I learned today. 1) Modeling my problem domain with generators (unfortunately, we have interest rates up to 400% an year for some loans here in Brazil.. i&apos;m not too pessimistic in my model lol), 2) testing invariants [round-trips operations ] </span><a href="https://gist.github.com/wandersoncferreira/183c56da92c4fe388efef05ca51af4fa" target="_blank">https://gist.github.com/wandersoncferreira/183c56da92c4fe388efef05ca51af4fa</a></div><div id="t1578183033033700" t="2020-01-05 00:10:33 bartuka three namespaces all covered. thanks guys o/"><a href="#t1578183033033700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-05</span>Â <span class="t" onclick="H(this)">00:10:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>three namespaces all covered. thanks guys o/</span></div><div id="t1578399105036900" t="2020-01-07 12:11:45 bartuka I need to generate a list of maps that have distinct :number key. For example [{:number 1 ..}, {:number 2 ..}] and I need these numbers to be sequential. I tried  (gen/vector-distinct-by :number (gen/hash-map :number gen/pos-int ...)  and it does work but not as sequential numbers. I don&apos;t know now if I should  try to create a generator to replace  gen/pos-int  or the  vector-distinct-by . rsrs"><a href="#t1578399105036900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">12:11:45</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I need to generate a list of maps that have distinct :number key. For example [{:number 1 ..}, {:number 2 ..}] and I need these numbers to be sequential. I tried </span><code>(gen/vector-distinct-by :number (gen/hash-map :number gen/pos-int ...)</code><span> and it does work but not as sequential numbers. I don&apos;t know now if I should  try to create a generator to replace </span><code>gen/pos-int</code><span> or the </span><code>vector-distinct-by</code><span>. rsrs</span></div><div id="t1578403679037500" t="2020-01-07 13:27:59 alexmiller test.check generators are generally for creating random things, not sequential things like that"><a href="#t1578403679037500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">13:27:59</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>test.check generators are generally for creating random things, not sequential things like that</span></div><div id="t1578412398040900" t="2020-01-07 15:53:18 bartuka I was thinking about that when I got into this problem. But I want to model a situation where does not make sense to have this kind of behavior for example, a list of installments for a loan. They are generally numbered here."><a href="#t1578412398040900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">15:53:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I was thinking about that when I got into this problem. But I want to model a situation where does not make sense to have this kind of behavior for example, a list of installments for a loan. They are generally numbered here.</span></div><div id="t1578403756038400" t="2020-01-07 13:29:16 alexmiller there may be some way to do it (gen an int that&apos;s the size of the range, gen/fmap that with range, gen/bind that with something that makes coll of maps)"><a href="#t1578403756038400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">13:29:16</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>there may be some way to do it (gen an int that&apos;s the size of the range, gen/fmap that with range, gen/bind that with something that makes coll of maps)</span></div><div id="t1578403768038700" t="2020-01-07 13:29:28 alexmiller but you&apos;re going to be fighting the tide there"><a href="#t1578403768038700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">13:29:28</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>but you&apos;re going to be fighting the tide there</span></div><div id="t1578405590039300" t="2020-01-07 13:59:50 gfredericks gen the collection (w/o numbers) and the minimum number separately; then  gen/fmap  them both to set all the numbers"><a href="#t1578405590039300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">13:59:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gen the collection (w/o numbers) and the minimum number separately; then </span><code>gen/fmap</code><span> them both to set all the numbers</span></div><div id="t1578405666040800" t="2020-01-07 14:01:06 gfredericks (gen/fmap (fn [{:keys [list-of-maps min-number]}] (map #(assoc %1 :number %2) list-of-maps (iterate inc min-number))) (gen/tuple gen-list-of-maps-without-number gen/large-integer))"><a href="#t1578405666040800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">14:01:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>(gen/fmap (fn [{:keys [list-of-maps min-number]}] (map #(assoc %1 :number %2) list-of-maps (iterate inc min-number))) (gen/tuple gen-list-of-maps-without-number gen/large-integer))</code></div><div id="t1578413044041600" t="2020-01-07 16:04:04 bartuka @gfredericks thanks for the guidelines... I did some adaptations to work as I intended.
 (def gen-list-of-maps-without-number (gen/not-empty (gen/list (gen/hash-map :testing gen/string-alpha-numeric
                                                                            :values gen/double))))
(gen/fmap (fn [[list-of-maps min-number]]
            (map #(assoc %1 :number %2) list-of-maps (iterate inc min-number)))
          (gen/not-empty (gen/tuple gen-list-of-maps-without-number (gen/large-integer* {:min 1 :max 72}))))"><a href="#t1578413044041600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">16:04:04</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>@gfredericks thanks for the guidelines... I did some adaptations to work as I intended.
</span><pre>(def gen-list-of-maps-without-number (gen/not-empty (gen/list (gen/hash-map :testing gen/string-alpha-numeric
                                                                            :values gen/double))))
(gen/fmap (fn [[list-of-maps min-number]]
            (map #(assoc %1 :number %2) list-of-maps (iterate inc min-number)))
          (gen/not-empty (gen/tuple gen-list-of-maps-without-number (gen/large-integer* {:min 1 :max 72}))))</pre></div><div id="t1578413427042500" t="2020-01-07 16:10:27 gfredericks @iagwanderson the not-empty around tuple can be removed"><a href="#t1578413427042500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">16:10:27</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@iagwanderson the not-empty around tuple can be removed</span></div><div id="t1578413471042700" t="2020-01-07 16:11:11 gfredericks Otherwise looks good"><a href="#t1578413471042700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">16:11:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Otherwise looks good</span></div><div id="t1578439839046600" t="2020-01-07 23:30:39 bartuka When I ran a test using  defspec  , I tried two kind of conditionals: 1) Only using a  (and ..  form and returning true for all branches of the test and 2) using  is  from  clojure.test   inside the (and.. form. I did this because without the  is  I cannot see which branch actually failed, I only get back the map with the current output and the smallest input that provides the failure."><a href="#t1578439839046600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:30:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>When I ran a test using </span><code>defspec</code><span> , I tried two kind of conditionals: 1) Only using a </span><code>(and ..</code><span> form and returning true for all branches of the test and 2) using </span><code>is</code><span> from </span><code>clojure.test</code><span>  inside the (and.. form. I did this because without the </span><code>is</code><span> I cannot see which branch actually failed, I only get back the map with the current output and the smallest input that provides the failure.</span></div><div id="t1578439847046900" t="2020-01-07 23:30:47 bartuka I would like to know the branch that failed"><a href="#t1578439847046900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:30:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I would like to know the branch that failed</span></div><div id="t1578439909047800" t="2020-01-07 23:31:49 bartuka the real problem is that I have 200+ assertions now being reported by clojure.test if I place the  is  inside it and I lose the smallest input that provided the failure"><a href="#t1578439909047800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:31:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>the real problem is that I have 200+ assertions now being reported by clojure.test if I place the </span><code>is</code><span> inside it and I lose the smallest input that provided the failure</span></div><div id="t1578439988048700" t="2020-01-07 23:33:08 hiredman make each branch a separate defspec"><a href="#t1578439988048700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:33:08</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>make each branch a separate defspec</span></div><div id="t1578440117050100" t="2020-01-07 23:35:17 bartuka I thought about that, in this case here, I am validating the size of the returned list and them some content in the list."><a href="#t1578440117050100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:35:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>I thought about that, in this case here, I am validating the size of the returned list and them some content in the list.</span></div><div id="t1578440138050600" t="2020-01-07 23:35:38 bartuka it seems a lot of duplication of code to test only the count for example"><a href="#t1578440138050600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:35:38</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>it seems a lot of duplication of code to test only the count for example</span></div><div id="t1578440217051200" t="2020-01-07 23:36:57 hiredman they are distinct properties however"><a href="#t1578440217051200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:36:57</span>Â Â Â Â Â Â Â Â Â Â Â Â hiredmanÂ </span><span>they are distinct properties however</span></div><div id="t1578440585052000" t="2020-01-07 23:43:05 bartuka seems like @gfredericks had some ideas about that in this library:  https://github.com/gfredericks/test.chuck"><a href="#t1578440585052000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:43:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>seems like @gfredericks had some ideas about that in this library: </span><a href="https://github.com/gfredericks/test.chuck" target="_blank">https://github.com/gfredericks/test.chuck</a></div><div id="t1578440624052400" t="2020-01-07 23:43:44 bartuka https://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html"><a href="#t1578440624052400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-07</span>Â <span class="t" onclick="H(this)">23:43:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><a href="https://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html" target="_blank">https://blog.colinwilliams.name/clojure/testing/2015/01/26/alternative-clojure-dot-test-integration-with-test-dot-check.html</a></div><div id="t1578445087052700" t="2020-01-08 00:58:07 gfredericks yep, that&apos;s what that stuff is about"><a href="#t1578445087052700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-08</span>Â <span class="t" onclick="H(this)">00:58:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yep, that&apos;s what that stuff is about</span></div><div id="t1578445113053200" t="2020-01-08 00:58:33 gfredericks also, the newer version of test.check has a more flexible API that would support some kind of library for giving more information about what failed"><a href="#t1578445113053200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-08</span>Â <span class="t" onclick="H(this)">00:58:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>also, the newer version of test.check has a more flexible API that would support some kind of library for giving more information about what failed</span></div><div id="t1578454360055400" t="2020-01-08 03:32:40 bartuka cool! I will tinker around that later"><a href="#t1578454360055400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-08</span>Â <span class="t" onclick="H(this)">03:32:40</span>Â Â Â Â Â Â Â Â Â Â Â Â Â bartukaÂ </span><span>cool! I will tinker around that later</span></div><div id="t1579738104000400" t="2020-01-23 00:08:24 kenny Is there a way to generate an alphanumeric string of a specific length?"><a href="#t1579738104000400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-23</span>Â <span class="t" onclick="H(this)">00:08:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a way to generate an alphanumeric string of a specific length?</span></div><div id="t1579738814001000" t="2020-01-23 00:20:14 gfredericks I think all the string generators have corresponding char generators"><a href="#t1579738814001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-23</span>Â <span class="t" onclick="H(this)">00:20:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I think all the string generators have corresponding char generators</span></div><div id="t1579738831001500" t="2020-01-23 00:20:31 gfredericks So you can use that with vector, fmap, and str"><a href="#t1579738831001500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-23</span>Â <span class="t" onclick="H(this)">00:20:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So you can use that with vector, fmap, and str</span></div><div id="t1582561198000900" t="2020-02-24 16:19:58 kenny Is there a way to know if the output from quick-check was the result of a generator throwing an exception versus the function throwing an exception?"><a href="#t1582561198000900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:19:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a way to know if the output from quick-check was the result of a generator throwing an exception versus the function throwing an exception?</span></div><div id="t1582561350001300" t="2020-02-24 16:22:30 gfredericks I don&apos;t think generator exceptions get caught"><a href="#t1582561350001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:22:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t think generator exceptions get caught</span></div><div id="t1582561390001900" t="2020-02-24 16:23:10 kenny Ah. I&apos;m calling via spec&apos;s  check  which does not throw in that case which explains the weird looking output."><a href="#t1582561390001900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:23:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Ah. I&apos;m calling via spec&apos;s </span><code>check</code><span> which does not throw in that case which explains the weird looking output.</span></div><div id="t1582561427002800" t="2020-02-24 16:23:47 gfredericks Does it catch exceptions?"><a href="#t1582561427002800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:23:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Does it catch exceptions?</span></div><div id="t1582561446003200" t="2020-02-24 16:24:06 kenny It appears so. When a gen throws, it attaches the generator exception on the  :result  key and nothing else."><a href="#t1582561446003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:24:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>It appears so. When a gen throws, it attaches the generator exception on the </span><code>:result</code><span> key and nothing else.</span></div><div id="t1582561478003700" t="2020-02-24 16:24:38 gfredericks Is it calling the generator manually?"><a href="#t1582561478003700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:24:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Is it calling the generator manually?</span></div><div id="t1582561490004000" t="2020-02-24 16:24:50 gfredericks Or it just catches everything?"><a href="#t1582561490004000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:24:50</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Or it just catches everything?</span></div><div id="t1582561571004200" t="2020-02-24 16:26:11 kenny https://github.com/clojure/spec.alpha/blob/e89e294a3e28765c8758d6ac8569ff8c4eda76ef/src/main/clojure/clojure/spec/test/alpha.clj#L306"><a href="#t1582561571004200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:26:11</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><a href="https://github.com/clojure/spec.alpha/blob/e89e294a3e28765c8758d6ac8569ff8c4eda76ef/src/main/clojure/clojure/spec/test/alpha.clj#L306" target="_blank">https://github.com/clojure/spec.alpha/blob/e89e294a3e28765c8758d6ac8569ff8c4eda76ef/src/main/clojure/clojure/spec/test/alpha.clj#L306</a></div><div id="t1582561599004900" t="2020-02-24 16:26:39 kenny Hmm actually that&apos;s not even a generator throwing. It&apos;s a gen throwing while being constructed."><a href="#t1582561599004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:26:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Hmm actually that&apos;s not even a generator throwing. It&apos;s a gen throwing while being constructed.</span></div><div id="t1582561612005100" t="2020-02-24 16:26:52 gfredericks Yeah"><a href="#t1582561612005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:26:52</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah</span></div><div id="t1582561639005500" t="2020-02-24 16:27:19 kenny Bad test case. Will see what happens when a gen actually throws."><a href="#t1582561639005500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:27:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Bad test case. Will see what happens when a gen actually throws.</span></div><div id="t1582561651005900" t="2020-02-24 16:27:31 gfredericks I don&apos;t like that return value"><a href="#t1582561651005900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:27:31</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t like that return value</span></div><div id="t1582561657006100" t="2020-02-24 16:27:37 kenny Agreed"><a href="#t1582561657006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:27:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Agreed</span></div><div id="t1582561678006400" t="2020-02-24 16:27:58 kenny I&apos;m checking for it like this haha
 (and (instance? Throwable (:result ret))
     (nil? (:shrunk ret)))"><a href="#t1582561678006400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:27:58</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>I&apos;m checking for it like this haha
</span><pre>(and (instance? Throwable (:result ret))
     (nil? (:shrunk ret)))</pre></div><div id="t1582561695006800" t="2020-02-24 16:28:15 gfredericks Uckh"><a href="#t1582561695006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:28:15</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Uckh</span></div><div id="t1582561759007200" t="2020-02-24 16:29:19 kenny Same thing when the gen throws"><a href="#t1582561759007200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:29:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Same thing when the gen throws</span></div><div id="t1582561796007600" t="2020-02-24 16:29:56 gfredericks Different part of the code returns the same thing?"><a href="#t1582561796007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:29:56</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Different part of the code returns the same thing?</span></div><div id="t1582561803007800" t="2020-02-24 16:30:03 kenny Yep"><a href="#t1582561803007800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:30:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Yep</span></div><div id="t1582561872008500" t="2020-02-24 16:31:12 kenny I don&apos;t think there&apos;s any way for me to differentiate an exception from a generator throwing while construction and a generator throwing while generating."><a href="#t1582561872008500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:31:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>I don&apos;t think there&apos;s any way for me to differentiate an exception from a generator throwing while construction and a generator throwing while generating.</span></div><div id="t1582561960008900" t="2020-02-24 16:32:40 gfredericks Except the stack trace  ğŸ˜‰"><a href="#t1582561960008900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:32:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Except the stack trace </span><b>ğŸ˜‰</b></div><div id="t1582561989009500" t="2020-02-24 16:33:09 kenny Yeah... Not sure where it&apos;s catching the gen throwing case."><a href="#t1582561989009500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:33:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Yeah... Not sure where it&apos;s catching the gen throwing case.</span></div><div id="t1582562032009800" t="2020-02-24 16:33:52 kenny It&apos;s not in that ns. Must be doing it elsewhere."><a href="#t1582562032009800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-24</span>Â <span class="t" onclick="H(this)">16:33:52</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>It&apos;s not in that ns. Must be doing it elsewhere.</span></div><div id="t1583361067011100" t="2020-03-04 22:31:07 sparkofreason Is there any way to limit the size of generated strings? I see the  :max-size  stuff in the context of checking properties, but I want it for generating samples."><a href="#t1583361067011100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">22:31:07</span>Â Â Â Â Â Â Â sparkofreasonÂ </span><span>Is there any way to limit the size of generated strings? I see the </span><code>:max-size</code><span> stuff in the context of checking properties, but I want it for generating samples.</span></div><div id="t1583361533011600" t="2020-03-04 22:38:53 gfredericks You can control size for individual generators"><a href="#t1583361533011600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">22:38:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You can control size for individual generators</span></div><div id="t1583361589012100" t="2020-03-04 22:39:49 gfredericks See gen/scale"><a href="#t1583361589012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">22:39:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>See gen/scale</span></div><div id="t1583361988013100" t="2020-03-04 22:46:28 sparkofreason Is there anything that would cause thread contention? I&apos;m trying to generate samples of collections in parallel, behaving oddly."><a href="#t1583361988013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">22:46:28</span>Â Â Â Â Â Â Â sparkofreasonÂ </span><span>Is there anything that would cause thread contention? I&apos;m trying to generate samples of collections in parallel, behaving oddly.</span></div><div id="t1583362214013600" t="2020-03-04 22:50:14 sparkofreason Hmmm, maybe it was just the  scale  thing."><a href="#t1583362214013600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">22:50:14</span>Â Â Â Â Â Â Â sparkofreasonÂ </span><span>Hmmm, maybe it was just the </span><code>scale</code><span> thing.</span></div><div id="t1583363515014000" t="2020-03-04 23:11:55 gfredericks I can&apos;t think of any threading pitfalls"><a href="#t1583363515014000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-04</span>Â <span class="t" onclick="H(this)">23:11:55</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I can&apos;t think of any threading pitfalls</span></div><div id="t1583420312015600" t="2020-03-05 14:58:32 sparkofreason Using  scale  fixed it. Looked like threading because several threads would run and complete quickly, then appear to get increasingly bogged down, even if they weren&apos;t asking for a lot of samples. But I think it was just generating progressively large strings the longer it ran. Once I limited the size of the strings, everything went fine."><a href="#t1583420312015600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span>Â <span class="t" onclick="H(this)">14:58:32</span>Â Â Â Â Â Â Â sparkofreasonÂ </span><span>Using </span><code>scale</code><span> fixed it. Looked like threading because several threads would run and complete quickly, then appear to get increasingly bogged down, even if they weren&apos;t asking for a lot of samples. But I think it was just generating progressively large strings the longer it ran. Once I limited the size of the strings, everything went fine.</span></div><div id="t1585675744001000" t="2020-03-31 17:29:04 Braden Shepherdson I&apos;m really struggling with an opaque such-that failure. the references for the failure are at  generators.cljc  line 416, but I&apos;m not explicitly calling  elements  anywhere and I&apos;m not sure what&apos;s up."><a href="#t1585675744001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">17:29:04</span>Â Â Braden ShepherdsonÂ </span><span>I&apos;m really struggling with an opaque such-that failure. the references for the failure are at </span><code>generators.cljc</code><span> line 416, but I&apos;m not explicitly calling </span><code>elements</code><span> anywhere and I&apos;m not sure what&apos;s up.</span></div><div id="t1585675757001400" t="2020-03-31 17:29:17 Braden Shepherdson if I run my own generators 100,000 times it works fine."><a href="#t1585675757001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">17:29:17</span>Â Â Braden ShepherdsonÂ </span><span>if I run my own generators 100,000 times it works fine.</span></div><div id="t1585677518001600" t="2020-03-31 17:58:38 gfredericks What version is this?"><a href="#t1585677518001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">17:58:38</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>What version is this?</span></div><div id="t1585677549002100" t="2020-03-31 17:59:09 gfredericks (So I can follow the line number)"><a href="#t1585677549002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">17:59:09</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(So I can follow the line number)</span></div><div id="t1585677748003200" t="2020-03-31 18:02:28 gfredericks Now that I think about it I bet you&apos;re getting misled by line numbers across versions"><a href="#t1585677748003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:02:28</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Now that I think about it I bet you&apos;re getting misled by line numbers across versions</span></div><div id="t1585677773003700" t="2020-03-31 18:02:53 Braden Shepherdson I think I tracked down the source of that error; which is that  (s/and int? #(&lt; -30 % 30))  implicitly uses  such-that  internally."><a href="#t1585677773003700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:02:53</span>Â Â Braden ShepherdsonÂ </span><span>I think I tracked down the source of that error; which is that </span><code>(s/and int? #(&lt; -30 % 30))</code><span> implicitly uses </span><code>such-that</code><span> internally.</span></div><div id="t1585677788004100" t="2020-03-31 18:03:08 gfredericks Yeah that&apos;s the usual culprit"><a href="#t1585677788004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:03:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah that&apos;s the usual culprit</span></div><div id="t1585677867004800" t="2020-03-31 18:04:27 Braden Shepherdson I also apparently managed to break my REPL, and it kept telling me that something wasn&apos;t a generator when it clearly was. reloading it fixed that, not sure what caused it."><a href="#t1585677867004800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:04:27</span>Â Â Braden ShepherdsonÂ </span><span>I also apparently managed to break my REPL, and it kept telling me that something wasn&apos;t a generator when it clearly was. reloading it fixed that, not sure what caused it.</span></div><div id="t1585677902005300" t="2020-03-31 18:05:02 Braden Shepherdson anyway, now it&apos;s working nicely."><a href="#t1585677902005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:05:02</span>Â Â Braden ShepherdsonÂ </span><span>anyway, now it&apos;s working nicely.</span></div><div id="t1585677910005600" t="2020-03-31 18:05:10 gfredericks Reloading the generators namespace somehow?"><a href="#t1585677910005600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:05:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Reloading the generators namespace somehow?</span></div><div id="t1585678117006000" t="2020-03-31 18:08:37 Braden Shepherdson not sure. now that I&apos;ve fixed the problem with my generators, it&apos;s not happening anymore."><a href="#t1585678117006000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:08:37</span>Â Â Braden ShepherdsonÂ </span><span>not sure. now that I&apos;ve fixed the problem with my generators, it&apos;s not happening anymore.</span></div><div id="t1585678126006100" t="2020-03-31 18:08:46 gfredericks :shrug:"><a href="#t1585678126006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:08:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><b>:shrug:</b></div><div id="t1585678431006500" t="2020-03-31 18:13:51 Braden Shepherdson yeah, it&apos;s a mystery. I&apos;m really loving the generative testing for fuzzing some complicated file encoding code, though."><a href="#t1585678431006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:13:51</span>Â Â Braden ShepherdsonÂ </span><span>yeah, it&apos;s a mystery. I&apos;m really loving the generative testing for fuzzing some complicated file encoding code, though.</span></div><div id="t1585678494006800" t="2020-03-31 18:14:54 gfredericks Yeah it&apos;s fun"><a href="#t1585678494006800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-31</span>Â <span class="t" onclick="H(this)">18:14:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah it&apos;s fun</span></div><div id="t1586623737008500" t="2020-04-11 16:48:57 kenny Is there a way to get test-check to continue running a check even if one fails? I&apos;m looking to create a large list of failure values for further analysis. Going to try using with-redefs on  results/pass?  . Curious if anyone else has done something like this."><a href="#t1586623737008500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">16:48:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a way to get test-check to continue running a check even if one fails? I&apos;m looking to create a large list of failure values for further analysis. Going to try using with-redefs on </span><code>results/pass?</code><span> . Curious if anyone else has done something like this.</span></div><div id="t1586623865009600" t="2020-04-11 16:51:05 gfredericks Are you using defspec in particular? 

Do you want shrunk values or just original failures?"><a href="#t1586623865009600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">16:51:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Are you using defspec in particular? 

Do you want shrunk values or just original failures?</span></div><div id="t1586625757010000" t="2020-04-11 17:22:37 kenny @gfredericks Just  quick-check  on a  prop/for-all ."><a href="#t1586625757010000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:22:37</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>@gfredericks Just </span><code>quick-check</code><span> on a </span><code>prop/for-all</code><span>.</span></div><div id="t1586625799011000" t="2020-04-11 17:23:19 kenny In this case, I don&apos;t really care all that much on shrunk vs original."><a href="#t1586625799011000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:23:19</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>In this case, I don&apos;t really care all that much on shrunk vs original.</span></div><div id="t1586625803011200" t="2020-04-11 17:23:23 gfredericks Wouldn&apos;t it be pretty easy to run it in a loop then?"><a href="#t1586625803011200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:23:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Wouldn&apos;t it be pretty easy to run it in a loop then?</span></div><div id="t1586625852012000" t="2020-04-11 17:24:12 kenny Loop over quick-check N times, collecting failures? Would that cover a good amount of surface area if the iterations to failure is small?"><a href="#t1586625852012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:24:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Loop over quick-check N times, collecting failures? Would that cover a good amount of surface area if the iterations to failure is small?</span></div><div id="t1586625923013500" t="2020-04-11 17:25:23 gfredericks You&apos;re worried about there being some small likely failure that keeps getting found and obscuring other larger failures?"><a href="#t1586625923013500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:25:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You&apos;re worried about there being some small likely failure that keeps getting found and obscuring other larger failures?</span></div><div id="t1586625931013700" t="2020-04-11 17:25:31 kenny Right"><a href="#t1586625931013700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:25:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Right</span></div><div id="t1586625963014100" t="2020-04-11 17:26:03 kenny I think it&apos;s likely to fail in &lt; 5 tests."><a href="#t1586625963014100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:26:03</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>I think it&apos;s likely to fail in &lt; 5 tests.</span></div><div id="t1586626010014800" t="2020-04-11 17:26:50 kenny I&apos;m looking to find holes in my specs, verifying that the hole is correct or the spec is wrong."><a href="#t1586626010014800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:26:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>I&apos;m looking to find holes in my specs, verifying that the hole is correct or the spec is wrong.</span></div><div id="t1586626063015500" t="2020-04-11 17:27:43 gfredericks So the tc failure doesn&apos;t represent an actual bug?"><a href="#t1586626063015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:27:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So the tc failure doesn&apos;t represent an actual bug?</span></div><div id="t1586626095016600" t="2020-04-11 17:28:15 kenny Yes - it may or may not."><a href="#t1586626095016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:28:15</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Yes - it may or may not.</span></div><div id="t1586626133018100" t="2020-04-11 17:28:53 gfredericks Getting a PBT library to generate distinct failures without iteratively fixing the earlier ones is pretty hard/advanced"><a href="#t1586626133018100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:28:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Getting a PBT library to generate distinct failures without iteratively fixing the earlier ones is pretty hard/advanced</span></div><div id="t1586626158018700" t="2020-04-11 17:29:18 gfredericks Any small failure is likely to be a component of larger failures"><a href="#t1586626158018700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:29:18</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Any small failure is likely to be a component of larger failures</span></div><div id="t1586626213019200" t="2020-04-11 17:30:13 kenny For sure. Distinct can be impossible to define too  ğŸ™‚"><a href="#t1586626213019200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:30:13</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>For sure. Distinct can be impossible to define too </span><b>ğŸ™‚</b></div><div id="t1586626234019700" t="2020-04-11 17:30:34 gfredericks Yep that&apos;s part of it"><a href="#t1586626234019700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:30:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yep that&apos;s part of it</span></div><div id="t1586626373022500" t="2020-04-11 17:32:53 gfredericks You can get it to start at larger sizes if you think that will help"><a href="#t1586626373022500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:32:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You can get it to start at larger sizes if you think that will help</span></div><div id="t1586626386023000" t="2020-04-11 17:33:06 gfredericks gen/scale"><a href="#t1586626386023000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:33:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>gen/scale</span></div><div id="t1586626437024100" t="2020-04-11 17:33:57 gfredericks With min"><a href="#t1586626437024100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:33:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>With min</span></div><div id="t1586626458024200" t="2020-04-11 17:34:18 kenny To be more specific about my problem... We have a wrapper around some data pulled from an external API. We query data out using flat maps. Sometimes your query may have no results. This is the &quot;problem&quot;. The solution is either: 1) Our generator for the query generated a map that should never be possible. We need to fix the generator (this can be hard) or acknowledge that this case will return no results 2) The external API is missing data for a particular query that should be there. We need to open a support case with the 3rd party, asking them why this is the case and what should be done."><a href="#t1586626458024200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:34:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>To be more specific about my problem... We have a wrapper around some data pulled from an external API. We query data out using flat maps. Sometimes your query may have no results. This is the &quot;problem&quot;. The solution is either: 1) Our generator for the query generated a map that should never be possible. We need to fix the generator (this can be hard) or acknowledge that this case will return no results 2) The external API is missing data for a particular query that should be there. We need to open a support case with the 3rd party, asking them why this is the case and what should be done.</span></div><div id="t1586626526025400" t="2020-04-11 17:35:26 kenny Hmm, that&apos;s interesting. I&apos;ll try your loop approach first and see what results it brings. If it seems to be missing some cases I can try scaling the gen. Perhaps even using a random scale with each loop."><a href="#t1586626526025400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:35:26</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Hmm, that&apos;s interesting. I&apos;ll try your loop approach first and see what results it brings. If it seems to be missing some cases I can try scaling the gen. Perhaps even using a random scale with each loop.</span></div><div id="t1586626568025600" t="2020-04-11 17:36:08 gfredericks Sure"><a href="#t1586626568025600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:36:08</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Sure</span></div><div id="t1586626593025800" t="2020-04-11 17:36:33 kenny Thanks  ğŸ™‚"><a href="#t1586626593025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span>Â <span class="t" onclick="H(this)">17:36:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Thanks </span><b>ğŸ™‚</b></div><div id="t1587041101031200" t="2020-04-16 12:45:01 Matheus Moreira hello! does anyone know if it is possible to use test.checkâ€™s  let  generator to create a spec using specâ€™s  with-gen ? basically i am specâ€™ing a function and one for one of the args i use  let  to create the generator. the problem is that it doesnâ€™t work if i try  (spec/with-gen a-spec #(tcg/letâ€¦))  or  (spec/with-gen a-spec (tcg/letâ€¦)) . it seems that something is missing to bridge from test.check to spec."><a href="#t1587041101031200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">12:45:01</span>Â Â Â Â Â Matheus MoreiraÂ </span><span>hello! does anyone know if it is possible to use test.checkâ€™s </span><code>let</code><span> generator to create a spec using specâ€™s </span><code>with-gen</code><span>? basically i am specâ€™ing a function and one for one of the args i use </span><code>let</code><span> to create the generator. the problem is that it doesnâ€™t work if i try </span><code>(spec/with-gen a-spec #(tcg/letâ€¦))</code><span> or </span><code>(spec/with-gen a-spec (tcg/letâ€¦))</code><span>. it seems that something is missing to bridge from test.check to spec.</span></div><div id="t1587042272032100" t="2020-04-16 13:04:32 gfredericks @matheus.emm that first one should work; what happens when you try it?"><a href="#t1587042272032100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:04:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>@matheus.emm that first one should work; what happens when you try it?</span></div><div id="t1587042350032200" t="2020-04-16 13:05:50 Matheus Moreira this is the error that i see:
 Error printing return value (ClassCastException) at advent.code.2019.day4/fn$fn (day4.clj:48).
class clojure.test.check.generators.Generator cannot be cast to class clojure.lang.IFn (clojure.test.check.generators.Generator is in unnamed module of loader clojure.lang.DynamicClassLoader @717f07d1; clojure.lang.IFn is in unnamed module of loader &apos;app&apos;)"><a href="#t1587042350032200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:05:50</span>Â Â Â Â Â Â Â Â Â Â Matheus MoreiraÂ </span><span>this is the error that i see:
</span><pre>Error printing return value (ClassCastException) at advent.code.2019.day4/fn$fn (day4.clj:48).
class clojure.test.check.generators.Generator cannot be cast to class clojure.lang.IFn (clojure.test.check.generators.Generator is in unnamed module of loader clojure.lang.DynamicClassLoader @717f07d1; clojure.lang.IFn is in unnamed module of loader &apos;app&apos;)</pre></div><div id="t1587042402032400" t="2020-04-16 13:06:42 Matheus Moreira and this is the function spec:
 (spec/fdef repeated-consecutive-digits?
  :args (spec/cat
         :ds
         (spec/with-gen
           (spec/coll-of nat-int? :kind vector? :min-count 1)
           (fn []
             (check.gen/let [n (check.gen/elements #{2 3 4 5 6})
                             x (check.gen/nat)
                             d (check.gen/vector-distinct
                                (check.gen/such-that #(not= % x)
                                                     (check.gen/nat))
                                (- 6 n))
                             i (check.gen/elements (range (- 6 n)))]
               (concat (subvec d 0 i)
                       (repeat n x)
                       (subvec d (+ i n))))))))"><a href="#t1587042402032400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:06:42</span>Â Â Â Â Â Â Â Â Â Â Matheus MoreiraÂ </span><span>and this is the function spec:
</span><pre>(spec/fdef repeated-consecutive-digits?
  :args (spec/cat
         :ds
         (spec/with-gen
           (spec/coll-of nat-int? :kind vector? :min-count 1)
           (fn []
             (check.gen/let [n (check.gen/elements #{2 3 4 5 6})
                             x (check.gen/nat)
                             d (check.gen/vector-distinct
                                (check.gen/such-that #(not= % x)
                                                     (check.gen/nat))
                                (- 6 n))
                             i (check.gen/elements (range (- 6 n)))]
               (concat (subvec d 0 i)
                       (repeat n x)
                       (subvec d (+ i n))))))))</pre></div><div id="t1587042519032600" t="2020-04-16 13:08:39 gfredericks nothing there looks weird to me"><a href="#t1587042519032600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:08:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>nothing there looks weird to me</span></div><div id="t1587042542032800" t="2020-04-16 13:09:02 gfredericks well"><a href="#t1587042542032800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:09:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>well</span></div><div id="t1587042556033000" t="2020-04-16 13:09:16 gfredericks maybe the problem is just  (?&gt; "><a href="#t1587042556033000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:09:16</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>maybe the problem is just </span><code>(?&gt;</code><code></code></div><div id="t1587042567033200" t="2020-04-16 13:09:27 gfredericks"><a href="#t1587042567033200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:09:27</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span></div><div id="t1587042585033400" t="2020-04-16 13:09:45 Matheus Moreira"><a href="#t1587042585033400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:09:45</span>Â Â Â Â Â Â Â Â Â Â Matheus MoreiraÂ </span></div><div id="t1587042718033600" t="2020-04-16 13:11:58 Matheus Moreira"><a href="#t1587042718033600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:11:58</span>Â Â Â Â Â Â Â Â Â Â Matheus MoreiraÂ </span></div><div id="t1587042726033800" t="2020-04-16 13:12:06 gfredericks"><a href="#t1587042726033800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:12:06</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span></div><div id="t1587042769034000" t="2020-04-16 13:12:49 Matheus Moreira"><a href="#t1587042769034000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span>Â <span class="t" onclick="H(this)">13:12:49</span>Â Â Â Â Â Â Â Â Â Â Matheus MoreiraÂ </span></div><div id="t1587502804035700" t="2020-04-21 21:00:04 colinkahn @gfredericks is this ticket still in consideration?  https://clojure.atlassian.net/browse/TCHECK-147  Ran into this today which prompted a discussion in the  #clojure channel and that ticket was linked."><a href="#t1587502804035700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:00:04</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>@gfredericks is this ticket still in consideration? </span><a href="https://clojure.atlassian.net/browse/TCHECK-147" target="_blank">https://clojure.atlassian.net/browse/TCHECK-147</a><span> Ran into this today which prompted a discussion in the  #clojure channel and that ticket was linked.</span></div><div id="t1587503135036100" t="2020-04-21 21:05:35 gfredericks I don&apos;t know why that ticket is still open"><a href="#t1587503135036100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:05:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t know why that ticket is still open</span></div><div id="t1587503151036500" t="2020-04-21 21:05:51 gfredericks See gen/any-equatable"><a href="#t1587503151036500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:05:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>See gen/any-equatable</span></div><div id="t1587503166036900" t="2020-04-21 21:06:06 gfredericks I&apos;ll update the ticket sometime soon"><a href="#t1587503166036900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:06:06</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ll update the ticket sometime soon</span></div><div id="t1587503221037700" t="2020-04-21 21:07:01 colinkahn I see, thanks. I saw any-equatable but was kind of hoping the scope was broader and that perhaps the defaults would not produce non-equatable things"><a href="#t1587503221037700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:07:01</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>I see, thanks. I saw any-equatable but was kind of hoping the scope was broader and that perhaps the defaults would not produce non-equatable things</span></div><div id="t1587503479038100" t="2020-04-21 21:11:19 gfredericks See my comment in the thread in the other channel"><a href="#t1587503479038100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-21</span>Â <span class="t" onclick="H(this)">21:11:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>See my comment in the thread in the other channel</span></div><div id="t1588255664041200" t="2020-04-30 14:07:44 adamfrey When compiling an application including test.check in CLJS  1.10.597  I see this warning:
 WARNING: cljs.core/&lt;=, all arguments must be numbers, got [#{nil js/Number} number] instead at line 999 target/cljsbuild-compiler-2/clojure/test/check/generators.cljc 
googling that message shows me that it&apos;s been appearing in people&apos;s stack traces for years, but I couldn&apos;t find any discussion about that warning in particular on the slack archives or on JIRA.
If anyone remembers prior discussion about this message would you mind pointing me to it or summarizing? Thanks."><a href="#t1588255664041200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:07:44</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>When compiling an application including test.check in CLJS </span><code>1.10.597</code><span> I see this warning:
</span><pre>WARNING: cljs.core/&lt;=, all arguments must be numbers, got [#{nil js/Number} number] instead at line 999 target/cljsbuild-compiler-2/clojure/test/check/generators.cljc</pre><span>
googling that message shows me that it&apos;s been appearing in people&apos;s stack traces for years, but I couldn&apos;t find any discussion about that warning in particular on the slack archives or on JIRA.
If anyone remembers prior discussion about this message would you mind pointing me to it or summarizing? Thanks.</span></div><div id="t1588255812041500" t="2020-04-30 14:10:12 gfredericks I&apos;ve never heard of it"><a href="#t1588255812041500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:10:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;ve never heard of it</span></div><div id="t1588255920042000" t="2020-04-30 14:12:00 gfredericks What test.check version are you using?"><a href="#t1588255920042000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:12:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>What test.check version are you using?</span></div><div id="t1588255985043100" t="2020-04-30 14:13:05 adamfrey I believe 1.0.0. This is all part of a big application, I think I&apos;ll try to recreate a minimal example"><a href="#t1588255985043100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:13:05</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>I believe 1.0.0. This is all part of a big application, I think I&apos;ll try to recreate a minimal example</span></div><div id="t1588255997043300" t="2020-04-30 14:13:17 gfredericks That&apos;s not a version"><a href="#t1588255997043300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:13:17</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That&apos;s not a version</span></div><div id="t1588256006043600" t="2020-04-30 14:13:26 adamfrey oh, one sec"><a href="#t1588256006043600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:13:26</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>oh, one sec</span></div><div id="t1588256025043800" t="2020-04-30 14:13:45 adamfrey https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown  ?"><a href="#t1588256025043800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:13:45</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><a href="https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown" target="_blank">https://github.com/clojure/test.check/blob/master/CHANGELOG.markdown</a><span> ?</span></div><div id="t1588256087044200" t="2020-04-30 14:14:47 gfredericks Woah"><a href="#t1588256087044200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:14:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Woah</span></div><div id="t1588256109044600" t="2020-04-30 14:15:09 adamfrey lol, I&apos;m bringing all the news today"><a href="#t1588256109044600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:15:09</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>lol, I&apos;m bringing all the news today</span></div><div id="t1588256111044800" t="2020-04-30 14:15:11 gfredericks I guess Alex released it"><a href="#t1588256111044800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:15:11</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I guess Alex released it</span></div><div id="t1588256665051300" t="2020-04-30 14:24:25 alexmiller surprise!"><a href="#t1588256665051300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:24:25</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>surprise!</span></div><div id="t1588256120045000" t="2020-04-30 14:15:20 gfredericks Okay well anyhow"><a href="#t1588256120045000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:15:20</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Okay well anyhow</span></div><div id="t1588256154045600" t="2020-04-30 14:15:54 gfredericks Line 999 doesn&apos;t have a &lt;= call"><a href="#t1588256154045600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:15:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Line 999 doesn&apos;t have a &lt;= call</span></div><div id="t1588256182046000" t="2020-04-30 14:16:22 gfredericks So I have no idea what it might be referring to"><a href="#t1588256182046000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:16:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>So I have no idea what it might be referring to</span></div><div id="t1588256221046600" t="2020-04-30 14:17:01 gfredericks That line just defs a number to be the negation of another"><a href="#t1588256221046600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:17:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>That line just defs a number to be the negation of another</span></div><div id="t1588256239046900" t="2020-04-30 14:17:19 gfredericks I&apos;d ask in #cljs"><a href="#t1588256239046900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:17:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I&apos;d ask in #cljs</span></div><div id="t1588256319047600" t="2020-04-30 14:18:39 adamfrey the difference in line numbers might be because of  cljc  but this is the line that 999 points to in my  target  directory:  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L1193"><a href="#t1588256319047600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:18:39</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>the difference in line numbers might be because of </span><code>cljc</code><span> but this is the line that 999 points to in my </span><code>target</code><span> directory: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L1193" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/generators.cljc#L1193</a></div><div id="t1588256564048500" t="2020-04-30 14:22:44 ghadi cljc  causes different line numbers?"><a href="#t1588256564048500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:22:44</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><code>cljc</code><span> causes different line numbers?</span></div><div id="t1588256593049000" t="2020-04-30 14:23:13 gfredericks Yeah that&apos;s news to me"><a href="#t1588256593049000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:23:13</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah that&apos;s news to me</span></div><div id="t1588256611049400" t="2020-04-30 14:23:31 ghadi it shouldn&apos;t, and whether it does is a verifiable assertion"><a href="#t1588256611049400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:23:31</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>it shouldn&apos;t, and whether it does is a verifiable assertion</span></div><div id="t1588256650050600" t="2020-04-30 14:24:10 ghadi (i know you qualified it with &quot;might&quot; @adamfrey )"><a href="#t1588256650050600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:24:10</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ghadiÂ </span><span>(i know you qualified it with &quot;might&quot; @adamfrey )</span></div><div id="t1588256658051100" t="2020-04-30 14:24:18 adamfrey yeah, sorry, I threw that out there as an guess"><a href="#t1588256658051100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:24:18</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>yeah, sorry, I threw that out there as an guess</span></div><div id="t1588256674051900" t="2020-04-30 14:24:34 gfredericks Looking at the code it&apos;s pretty obvious via human analysis that the args can&apos;t be nil"><a href="#t1588256674051900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:24:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Looking at the code it&apos;s pretty obvious via human analysis that the args can&apos;t be nil</span></div><div id="t1588256700052600" t="2020-04-30 14:25:00 gfredericks If those cljs warnings have false positives, maybe they have a way to suppress them?"><a href="#t1588256700052600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:25:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>If those cljs warnings have false positives, maybe they have a way to suppress them?</span></div><div id="t1588256797054100" t="2020-04-30 14:26:37 adamfrey Adding to the false positives likelihood I found a recent message of a similar vein:  https://clojurians.slack.com/archives/C07UQ678E/p1587734805230700"><a href="#t1588256797054100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:26:37</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>Adding to the false positives likelihood I found a recent message of a similar vein: </span><a href="https://clojurians.slack.com/archives/C07UQ678E/p1587734805230700" target="_blank">https://clojurians.slack.com/archives/C07UQ678E/p1587734805230700</a></div><div id="t1588256814054600" t="2020-04-30 14:26:54 gfredericks I don&apos;t know what cljs wants us to do  ğŸ™‚"><a href="#t1588256814054600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:26:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t know what cljs wants us to do </span><b>ğŸ™‚</b></div><div id="t1588256817054700" t="2020-04-30 14:26:57 adamfrey so maybe this is a #cljs-dev question rather than #test-check"><a href="#t1588256817054700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:26:57</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>so maybe this is a #cljs-dev question rather than #test-check</span></div><div id="t1588256821054900" t="2020-04-30 14:27:01 gfredericks Yeah"><a href="#t1588256821054900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:27:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah</span></div><div id="t1588256825055100" t="2020-04-30 14:27:05 gfredericks At least initially"><a href="#t1588256825055100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:27:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>At least initially</span></div><div id="t1588256849055600" t="2020-04-30 14:27:29 adamfrey Thanks for your help, Gary and Ghadi."><a href="#t1588256849055600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:27:29</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>Thanks for your help, Gary and Ghadi.</span></div><div id="t1588257156057000" t="2020-04-30 14:32:36 adamfrey the difference in line numbers looks like it&apos;s because I&apos;m not actually getting  1.0.0  , but an older version in my compilation output even though  1.0.0  is in my  project.clj  . I&apos;ll figure that part out. Sorry for the wild speculation, ha"><a href="#t1588257156057000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-30</span>Â <span class="t" onclick="H(this)">14:32:36</span>Â Â Â Â Â Â Â Â Â Â Â Â adamfreyÂ </span><span>the difference in line numbers looks like it&apos;s because I&apos;m not actually getting </span><code>1.0.0</code><span> , but an older version in my compilation output even though </span><code>1.0.0</code><span> is in my </span><code>project.clj</code><span> . I&apos;ll figure that part out. Sorry for the wild speculation, ha</span></div><div id="t1589201815059400" t="2020-05-11 12:56:55 arohner Whatâ€™s the best way to test properties on a collection? I typically write
 (prop/for-all [in generator] (let [ret (foo in)] (every? (fn [r] ...) ret)) 
, and this works, but the output on failure isnâ€™t very nice, because test.check doesnâ€™t know how to show the offending element"><a href="#t1589201815059400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">12:56:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Whatâ€™s the best way to test properties on a collection? I typically write
</span><pre>(prop/for-all [in generator] (let [ret (foo in)] (every? (fn [r] ...) ret))</pre><span>
, and this works, but the output on failure isnâ€™t very nice, because test.check doesnâ€™t know how to show the offending element</span></div><div id="t1589201879060100" t="2020-05-11 12:57:59 arohner oh, one other wrinkle, the spec for each item is dynamic:
 (every? (fn [m]
              (s/valid? (s/spec (::p/message-type m)) m)) msgs)"><a href="#t1589201879060100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">12:57:59</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>oh, one other wrinkle, the spec for each item is dynamic:
</span><pre>(every? (fn [m]
              (s/valid? (s/spec (::p/message-type m)) m)) msgs)</pre></div><div id="t1589201914060700" t="2020-05-11 12:58:34 arohner so I canâ€™t easily use  (s/valid? (s/coll-of ::foo) msgs)"><a href="#t1589201914060700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">12:58:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>so I canâ€™t easily use </span><code>(s/valid? (s/coll-of ::foo) msgs)</code></div><div id="t1589202946061100" t="2020-05-11 13:15:46 gfredericks &gt; test.check doesnâ€™t know how to show the offending element

this can be remedied by returning a custom Result object"><a href="#t1589202946061100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">13:15:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>&gt; test.check doesnâ€™t know how to show the offending element

this can be remedied by returning a custom Result object</span></div><div id="t1589202974061700" t="2020-05-11 13:16:14 gfredericks you could imagine a helper for this, a variant of  every?  , provided by a library or test.check itself"><a href="#t1589202974061700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">13:16:14</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you could imagine a helper for this, a variant of </span><code>every?</code><span> , provided by a library or test.check itself</span></div><div id="t1589202984062000" t="2020-05-11 13:16:24 gfredericks but the plumbing is there for getting better output"><a href="#t1589202984062000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-11</span>Â <span class="t" onclick="H(this)">13:16:24</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>but the plumbing is there for getting better output</span></div><div id="t1593941112064400" t="2020-07-05 09:25:12 Vincent Cantin (I was unable to post on Jira, so I report here) in the docstring of tuple:
 (def t (tuple gen/small-integer gen/boolean)) 
should be
 (def t (gen/tuple gen/small-integer gen/boolean)) 
"><a href="#t1593941112064400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">09:25:12</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>(I was unable to post on Jira, so I report here) in the docstring of tuple:
</span><pre>(def t (tuple gen/small-integer gen/boolean))</pre><span>
should be
</span><pre>(def t (gen/tuple gen/small-integer gen/boolean))</pre><span>
</span></div><div id="t1593967074064600" t="2020-07-05 16:37:54 gfredericks let&apos;s see if I still have commit rights"><a href="#t1593967074064600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:37:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>let&apos;s see if I still have commit rights</span></div><div id="t1593967163064800" t="2020-07-05 16:39:23 gfredericks I do! it&apos;s fixed, thanks"><a href="#t1593967163064800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:39:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I do! it&apos;s fixed, thanks</span></div><div id="t1593967606066100" t="2020-07-05 16:46:46 Vincent Cantin Yesterday I struggled with test.checkâ€™s API, I had to use a lot of internal functions and did not see a way to do otherwise.

Here is my function:
 (defn- decreasing-sizes-gen
  &quot;Returns a generator of lazy sequence of decreasing sizes.&quot;
  [max-size]
  (#&apos;gen/make-gen
    (fn [rng _]
      (let [f (fn f [rng max-size]
                (when-not (neg? max-size)
                  (lazy-seq
                    (let [[r1 r2] (random/split rng)
                          size (#&apos;gen/rand-range r1 0 max-size)]
                      (cons size (f r2 (dec size)))))))]
        (rose/pure (f rng max-size))))))

#_(gen/sample (decreasing-sizes-gen 100) 1) 
"><a href="#t1593967606066100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:46:46</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>Yesterday I struggled with test.checkâ€™s API, I had to use a lot of internal functions and did not see a way to do otherwise.

Here is my function:
</span><pre>(defn- decreasing-sizes-gen
  &quot;Returns a generator of lazy sequence of decreasing sizes.&quot;
  [max-size]
  (#&apos;gen/make-gen
    (fn [rng _]
      (let [f (fn f [rng max-size]
                (when-not (neg? max-size)
                  (lazy-seq
                    (let [[r1 r2] (random/split rng)
                          size (#&apos;gen/rand-range r1 0 max-size)]
                      (cons size (f r2 (dec size)))))))]
        (rose/pure (f rng max-size))))))

#_(gen/sample (decreasing-sizes-gen 100) 1)</pre><span>
</span></div><div id="t1593967792068400" t="2020-07-05 16:49:52 Vincent Cantin â€¢ I had to make my own  #&apos;gen/make-gen  because  gen/randomized  is not public,
â€¢  gen/lazy-random-states  is not public either,
â€¢ I did not find an easy way to recursively iterate between using a generated value and using it to feed a new generator."><a href="#t1593967792068400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:49:52</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>â€¢ I had to make my own </span><code>#&apos;gen/make-gen</code><span> because </span><code>gen/randomized</code><span> is not public,
â€¢ </span><code>gen/lazy-random-states</code><span> is not public either,
â€¢ I did not find an easy way to recursively iterate between using a generated value and using it to feed a new generator.</span></div><div id="t1593968287069900" t="2020-07-05 16:58:07 Vincent Cantin I am under the impression that, since the public API cannot be complete for sure,  make-gen  and  rng  should be exposed to the users."><a href="#t1593968287069900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:58:07</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>I am under the impression that, since the public API cannot be complete for sure, </span><code>make-gen</code><span> and </span><code>rng</code><span> should be exposed to the users.</span></div><div id="t1593968350070900" t="2020-07-05 16:59:10 Vincent Cantin If one day I am writing a successor to test.check, I would build it based on that."><a href="#t1593968350070900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">16:59:10</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>If one day I am writing a successor to test.check, I would build it based on that.</span></div><div id="t1593968501071400" t="2020-07-05 17:01:41 gfredericks You can&apos;t do this with the sizing combinators?"><a href="#t1593968501071400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:01:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>You can&apos;t do this with the sizing combinators?</span></div><div id="t1593968537071600" t="2020-07-05 17:02:17 Vincent Cantin which ones?"><a href="#t1593968537071600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:02:17</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>which ones?</span></div><div id="t1593968554072000" t="2020-07-05 17:02:34 gfredericks sized and with-size, I think"><a href="#t1593968554072000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:02:34</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>sized and with-size, I think</span></div><div id="t1593968577072400" t="2020-07-05 17:02:57 gfredericks One to get the size, the other to set them"><a href="#t1593968577072400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:02:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>One to get the size, the other to set them</span></div><div id="t1593968669073000" t="2020-07-05 17:04:29 Vincent Cantin then I would still need a way to build my lazy sequence"><a href="#t1593968669073000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:04:29</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>then I would still need a way to build my lazy sequence</span></div><div id="t1593968736073400" t="2020-07-05 17:05:36 gfredericks map with range"><a href="#t1593968736073400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:05:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>map with range</span></div><div id="t1593968741073600" t="2020-07-05 17:05:41 gfredericks And tuple"><a href="#t1593968741073600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:05:41</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And tuple</span></div><div id="t1593968796074000" t="2020-07-05 17:06:36 gfredericks It won&apos;t be lazy; is that important?"><a href="#t1593968796074000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:06:36</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It won&apos;t be lazy; is that important?</span></div><div id="t1593968857075000" t="2020-07-05 17:07:37 Vincent Cantin in my case, I could live without, but in the general case, lazy sequence is something with zero support in test.check"><a href="#t1593968857075000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:07:37</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>in my case, I could live without, but in the general case, lazy sequence is something with zero support in test.check</span></div><div id="t1593968899075800" t="2020-07-05 17:08:19 Vincent Cantin I will keep my function as is, but I wanted to report the limitations I found."><a href="#t1593968899075800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:08:19</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>I will keep my function as is, but I wanted to report the limitations I found.</span></div><div id="t1593969035077300" t="2020-07-05 17:10:35 gfredericks Yes. Should be easier to add laziness now that the rng is immutable"><a href="#t1593969035077300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-05</span>Â <span class="t" onclick="H(this)">17:10:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yes. Should be easier to add laziness now that the rng is immutable</span></div><div id="t1594403049077700" t="2020-07-10 17:44:09 alexmiller Released test.check 1.1.0, with  https://clojure.atlassian.net/browse/TCHECK-155  (don&apos;t generate :/)"><a href="#t1594403049077700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-10</span>Â <span class="t" onclick="H(this)">17:44:09</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>Released test.check 1.1.0, with </span><a href="https://clojure.atlassian.net/browse/TCHECK-155" target="_blank">https://clojure.atlassian.net/browse/TCHECK-155</a><span> (don&apos;t generate :/)</span></div><div id="t1594408655079100" t="2020-07-10 19:17:35 gfredericks It also doesn&apos;t generate :-) or :-( or :&apos;( but I suspect it can generate :-P"><a href="#t1594408655079100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-10</span>Â <span class="t" onclick="H(this)">19:17:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It also doesn&apos;t generate :-) or :-( or :&apos;( but I suspect it can generate :-P</span></div><div id="t1594408669079400" t="2020-07-10 19:17:49 gfredericks And :-D"><a href="#t1594408669079400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-10</span>Â <span class="t" onclick="H(this)">19:17:49</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>And :-D</span></div><div id="t1594463507081300" t="2020-07-11 10:31:47 sogaiu i am confused by this line of documentation:  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L90 

&gt; Takes a list of roses, not a rose
Is it possible what was meant was actually:

&gt; Takes a rose, not a list of roses
as the functions that follow (i.e.  permutations ,  zip ,  remove , etc.) all seem to take a list of roses, but  filter  does not?"><a href="#t1594463507081300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">10:31:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>i am confused by this line of documentation: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L90" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L90</a><span>

&gt; Takes a list of roses, not a rose
Is it possible what was meant was actually:

&gt; Takes a rose, not a list of roses
as the functions that follow (i.e. </span><code>permutations</code><span>, </span><code>zip</code><span>, </span><code>remove</code><span>, etc.) all seem to take a list of roses, but </span><code>filter</code><span> does not?</span></div><div id="t1594470665081900" t="2020-07-11 12:31:05 gfredericks yep, that sounds wrong"><a href="#t1594470665081900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">12:31:05</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yep, that sounds wrong</span></div><div id="t1594470679082400" t="2020-07-11 12:31:19 gfredericks I pushed a commit that deletes that sentence."><a href="#t1594470679082400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">12:31:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I pushed a commit that deletes that sentence.</span></div><div id="t1594470686082700" t="2020-07-11 12:31:26 gfredericks according to git history, it was always wrong"><a href="#t1594470686082700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">12:31:26</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>according to git history, it was always wrong</span></div><div id="t1594471969083600" t="2020-07-11 12:52:49 sogaiu @gfredericks thanks!  (i didn&apos;t chase down the full history, but i also found that as far back as a i looked the sentence was the same.)"><a href="#t1594471969083600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">12:52:49</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>@gfredericks thanks!  (i didn&apos;t chase down the full history, but i also found that as far back as a i looked the sentence was the same.)</span></div><div id="t1594472091084000" t="2020-07-11 12:54:51 gfredericks git log -S &quot;a list of roses&quot;  is a good trick for finding where it came from"><a href="#t1594472091084000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-11</span>Â <span class="t" onclick="H(this)">12:54:51</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><code>git log -S &quot;a list of roses&quot;</code><span> is a good trick for finding where it came from</span></div><div id="t1594548601085800" t="2020-07-12 10:10:01 Vincent Cantin I think that the source code would have been easier to read if the rose tree was named after its purpose, for example  shrink-tree"><a href="#t1594548601085800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-12</span>Â <span class="t" onclick="H(this)">10:10:01</span>Â Â Â Â Â Â Vincent CantinÂ </span><span>I think that the source code would have been easier to read if the rose tree was named after its purpose, for example </span><code>shrink-tree</code></div><div id="t1594549168089900" t="2020-07-12 10:19:28 sogaiu fwiw, quickcheck in haskell seems to use the term &quot;rose&quot; as well:  https://hackage.haskell.org/package/QuickCheck-2.9/docs/Test-QuickCheck-Property.html#g:4  - i was initially puzzled but found a wikipedia page:  https://en.m.wikipedia.org/wiki/Rose_tree"><a href="#t1594549168089900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-12</span>Â <span class="t" onclick="H(this)">10:19:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>fwiw, quickcheck in haskell seems to use the term &quot;rose&quot; as well: </span><a href="https://hackage.haskell.org/package/QuickCheck-2.9/docs/Test-QuickCheck-Property.html#g:4" target="_blank">https://hackage.haskell.org/package/QuickCheck-2.9/docs/Test-QuickCheck-Property.html#g:4</a><span> - i was initially puzzled but found a wikipedia page: </span><a href="https://en.m.wikipedia.org/wiki/Rose_tree" target="_blank">https://en.m.wikipedia.org/wiki/Rose_tree</a></div><div id="t1594549202090800" t="2020-07-12 10:20:02 sogaiu also the docs of the corr ns say:  https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L11"><a href="#t1594549202090800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-12</span>Â <span class="t" onclick="H(this)">10:20:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>also the docs of the corr ns say: </span><a href="https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L11" target="_blank">https://github.com/clojure/test.check/blob/master/src/main/clojure/clojure/test/check/rose_tree.cljc#L11</a></div><div id="t1594549422093300" t="2020-07-12 10:23:42 sogaiu in this case i was initially lost but the name actually helped me to find relevant related info"><a href="#t1594549422093300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-12</span>Â <span class="t" onclick="H(this)">10:23:42</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>in this case i was initially lost but the name actually helped me to find relevant related info</span></div><div id="t1594556975093700" t="2020-07-12 12:29:35 gfredericks yeah the initial draft of test.check was heavily based on quickcheck"><a href="#t1594556975093700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-12</span>Â <span class="t" onclick="H(this)">12:29:35</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>yeah the initial draft of test.check was heavily based on quickcheck</span></div><div id="t1594852704095200" t="2020-07-15 22:38:24 sogaiu i was fortunate to find:  https://www.youtube.com/watch?v=u0t-6lUvXHo  -- it&apos;s been helping me to understand some of test.check&apos;s internals better.

i don&apos;t see this linked to from test.check&apos;s repository.  if it isn&apos;t there somewhere, perhaps it would be worth mentioning it?"><a href="#t1594852704095200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span>Â <span class="t" onclick="H(this)">22:38:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>i was fortunate to find: </span><a href="https://www.youtube.com/watch?v=u0t-6lUvXHo" target="_blank">https://www.youtube.com/watch?v=u0t-6lUvXHo</a><span> -- it&apos;s been helping me to understand some of test.check&apos;s internals better.

i don&apos;t see this linked to from test.check&apos;s repository.  if it isn&apos;t there somewhere, perhaps it would be worth mentioning it?</span></div><div id="t1594853268095600" t="2020-07-15 22:47:48 alexmiller definitely!"><a href="#t1594853268095600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span>Â <span class="t" onclick="H(this)">22:47:48</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><span>definitely!</span></div><div id="t1594853383095800" t="2020-07-15 22:49:43 alexmiller https://github.com/clojure/test.check/commit/7e7c2116fa721211e8f5642a249e4a0f327445f4"><a href="#t1594853383095800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span>Â <span class="t" onclick="H(this)">22:49:43</span>Â Â Â Â Â Â Â Â Â Â alexmillerÂ </span><a href="https://github.com/clojure/test.check/commit/7e7c2116fa721211e8f5642a249e4a0f327445f4" target="_blank">https://github.com/clojure/test.check/commit/7e7c2116fa721211e8f5642a249e4a0f327445f4</a></div><div id="t1595231101097400" t="2020-07-20 07:45:01 plexus WARNING: Use of undeclared Var goog.math.Long/fromBits at line 64 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: Use of undeclared Var goog.math.Long/fromString at line 77 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs                                                                                                                                    
WARNING: Use of undeclared Var goog.math.Long/fromNumber at line 81 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs                                                                                                                                    
WARNING: Use of undeclared Var goog.math.Long/fromNumber at line 87 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: Use of undeclared Var goog.math.Long/getOne at line 92 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: cljs.core/&lt;=, all arguments must be numbers, got [#{nil js/Number} number] instead at line 1193 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/generators.cljc 
I&apos;m seeing these warnings when using test.check from ClojureScript. Not sure what&apos;s causing them, can&apos;t immediately see fault with the code."><a href="#t1595231101097400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">07:45:01</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â plexusÂ </span><pre>WARNING: Use of undeclared Var goog.math.Long/fromBits at line 64 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: Use of undeclared Var goog.math.Long/fromString at line 77 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs                                                                                                                                    
WARNING: Use of undeclared Var goog.math.Long/fromNumber at line 81 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs                                                                                                                                    
WARNING: Use of undeclared Var goog.math.Long/fromNumber at line 87 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: Use of undeclared Var goog.math.Long/getOne at line 92 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/random/longs.cljs
WARNING: cljs.core/&lt;=, all arguments must be numbers, got [#{nil js/Number} number] instead at line 1193 file:/home/arne/.m2/repository/org/clojure/test.check/1.1.0/test.check-1.1.0.jar!/clojure/test/check/generators.cljc</pre><span>
I&apos;m seeing these warnings when using test.check from ClojureScript. Not sure what&apos;s causing them, can&apos;t immediately see fault with the code.</span></div><div id="t1595231133097900" t="2020-07-20 07:45:33 plexus did some googling but only found this, which does seem to show at least one other person ran into this  ğŸ™‚   https://github.com/AdamFrey/cljs-test-check-warning-example"><a href="#t1595231133097900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">07:45:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â plexusÂ </span><span>did some googling but only found this, which does seem to show at least one other person ran into this </span><b>ğŸ™‚</b><span> </span><a href="https://github.com/AdamFrey/cljs-test-check-warning-example" target="_blank">https://github.com/AdamFrey/cljs-test-check-warning-example</a></div><div id="t1595252364098400" t="2020-07-20 13:39:24 Filipe Silva heya all"><a href="#t1595252364098400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:39:24</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>heya all</span></div><div id="t1595252427099100" t="2020-07-20 13:40:27 Filipe Silva how are people using test.check with async code?"><a href="#t1595252427099100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:40:27</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>how are people using test.check with async code?</span></div><div id="t1595252517099500" t="2020-07-20 13:41:57 Filipe Silva is there any pretty obvious way to do it?"><a href="#t1595252517099500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:41:57</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>is there any pretty obvious way to do it?</span></div><div id="t1595252548100000" t="2020-07-20 13:42:28 Filipe Silva I saw @gfredericks POC on  https://github.com/clojure/test.check/commit/f90ee794dbe4dc766d91f9daa2160e8a8b0853be"><a href="#t1595252548100000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:42:28</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>I saw @gfredericks POC on </span><a href="https://github.com/clojure/test.check/commit/f90ee794dbe4dc766d91f9daa2160e8a8b0853be" target="_blank">https://github.com/clojure/test.check/commit/f90ee794dbe4dc766d91f9daa2160e8a8b0853be</a></div><div id="t1595252580100500" t="2020-07-20 13:43:00 gfredericks Huh. Does that work? I don&apos;t remember it  ğŸ™ƒ"><a href="#t1595252580100500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:43:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Huh. Does that work? I don&apos;t remember it </span><b>ğŸ™ƒ</b></div><div id="t1595252590100900" t="2020-07-20 13:43:10 gfredericks In any case there&apos;s nothing more official than that"><a href="#t1595252590100900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:43:10</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>In any case there&apos;s nothing more official than that</span></div><div id="t1595252634101400" t="2020-07-20 13:43:54 Filipe Silva ok, now I know"><a href="#t1595252634101400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:43:54</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>ok, now I know</span></div><div id="t1595252659101900" t="2020-07-20 13:44:19 Filipe Silva I was asking because @wilkerlucio actually did something similar to what you did, but with core.async channels"><a href="#t1595252659101900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:44:19</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>I was asking because @wilkerlucio actually did something similar to what you did, but with core.async channels</span></div><div id="t1595252660102100" t="2020-07-20 13:44:20 Filipe Silva https://github.com/clojure/test.check/compare/master...wilkerlucio:async-check"><a href="#t1595252660102100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:44:20</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><a href="https://github.com/clojure/test.check/compare/master...wilkerlucio:async-check" target="_blank">https://github.com/clojure/test.check/compare/master...wilkerlucio:async-check</a></div><div id="t1595252714103000" t="2020-07-20 13:45:14 Filipe Silva wilker and I were using it for test at  http://roamresearch.com  but now needed to extract it away from the official test.check"><a href="#t1595252714103000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:45:14</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>wilker and I were using it for test at </span><a href="http://roamresearch.com" target="_blank">http://roamresearch.com</a><span> but now needed to extract it away from the official test.check</span></div><div id="t1595252733103400" t="2020-07-20 13:45:33 Filipe Silva so I was wondering if there was something around already that we should be using"><a href="#t1595252733103400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:45:33</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>so I was wondering if there was something around already that we should be using</span></div><div id="t1595252842105500" t="2020-07-20 13:47:22 gfredericks It&apos;s possible there are other libraries. 

But I&apos;d say this is the most severe hole in test.check at the moment. That POC could be usable if the cljs.test details are worked out, and if it doesn&apos;t hurt perf for synchronous jvm use"><a href="#t1595252842105500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:47:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It&apos;s possible there are other libraries. 

But I&apos;d say this is the most severe hole in test.check at the moment. That POC could be usable if the cljs.test details are worked out, and if it doesn&apos;t hurt perf for synchronous jvm use</span></div><div id="t1595252932105800" t="2020-07-20 13:48:52 Filipe Silva what are the cljs.test details?"><a href="#t1595252932105800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:48:52</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>what are the cljs.test details?</span></div><div id="t1595253150106500" t="2020-07-20 13:52:30 gfredericks just &quot;how should this be used from cljs.test?&quot;; ideally it&apos;d be similar or same as on the jvm

e.g., can defspec work?"><a href="#t1595253150106500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:52:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>just &quot;how should this be used from cljs.test?&quot;; ideally it&apos;d be similar or same as on the jvm

e.g., can defspec work?</span></div><div id="t1595253201106700" t="2020-07-20 13:53:21 Filipe Silva hm I see..."><a href="#t1595253201106700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:53:21</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>hm I see...</span></div><div id="t1595253217107100" t="2020-07-20 13:53:37 Filipe Silva I was kinda focused on cljs so that didn&apos;t really come to mind"><a href="#t1595253217107100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:53:37</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>I was kinda focused on cljs so that didn&apos;t really come to mind</span></div><div id="t1595253236107300" t="2020-07-20 13:53:56 Filipe Silva there I&apos;d just use an async deftest"><a href="#t1595253236107300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:53:56</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>there I&apos;d just use an async deftest</span></div><div id="t1595253376108000" t="2020-07-20 13:56:16 gfredericks It might be easy. I just didn&apos;t know much about cljs testing when I made that commit"><a href="#t1595253376108000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:56:16</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>It might be easy. I just didn&apos;t know much about cljs testing when I made that commit</span></div><div id="t1595253397108200" t="2020-07-20 13:56:37 Filipe Silva ok, will think about it some"><a href="#t1595253397108200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:56:37</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>ok, will think about it some</span></div><div id="t1595253403108500" t="2020-07-20 13:56:43 Filipe Silva thank you for the insight on this"><a href="#t1595253403108500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-20</span>Â <span class="t" onclick="H(this)">13:56:43</span>Â Â Â Â Â Â Â Â Filipe SilvaÂ </span><span>thank you for the insight on this</span></div><div id="t1596579953109400" t="2020-08-04 22:25:53 kenny Is there a facility for writing a generator that generates the next value based on the previous? e.g., similar to  iterate"><a href="#t1596579953109400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-04</span>Â <span class="t" onclick="H(this)">22:25:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Is there a facility for writing a generator that generates the next value based on the previous? e.g., similar to </span><code>iterate</code></div><div id="t1596580077110600" t="2020-08-04 22:27:57 gfredericks Generators aren&apos;t meant to be aware of previously generated values. 

If this is part of a larger structure, you could describe that and there might be another way"><a href="#t1596580077110600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-04</span>Â <span class="t" onclick="H(this)">22:27:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Generators aren&apos;t meant to be aware of previously generated values. 

If this is part of a larger structure, you could describe that and there might be another way</span></div><div id="t1596580224111600" t="2020-08-04 22:30:24 kenny The objective is to generate a seq of dates increasing over time separated by a bounded, random amount of time."><a href="#t1596580224111600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-04</span>Â <span class="t" onclick="H(this)">22:30:24</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>The objective is to generate a seq of dates increasing over time separated by a bounded, random amount of time.</span></div><div id="t1596580257112200" t="2020-08-04 22:30:57 kenny Trying to generate data that imitates what actual data will look like."><a href="#t1596580257112200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-04</span>Â <span class="t" onclick="H(this)">22:30:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â kennyÂ </span><span>Trying to generate data that imitates what actual data will look like.</span></div><div id="t1596580314113400" t="2020-08-04 22:31:54 gfredericks Generate the start date and the increments, and then fmap the result to get what you&apos;re describing"><a href="#t1596580314113400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-04</span>Â <span class="t" onclick="H(this)">22:31:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Generate the start date and the increments, and then fmap the result to get what you&apos;re describing</span></div><div id="t1598527956002100" t="2020-08-27 11:32:36 sogaiu i came across this:  https://github.com/renatahodovan/grammarinator  and started wondering if it is possible to take an antlr grammar of something and generate things based on it for use with test.check."><a href="#t1598527956002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">11:32:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>i came across this: </span><a href="https://github.com/renatahodovan/grammarinator" target="_blank">https://github.com/renatahodovan/grammarinator</a><span> and started wondering if it is possible to take an antlr grammar of something and generate things based on it for use with test.check.</span></div><div id="t1598543825003200" t="2020-08-27 15:57:05 gfredericks Should totally be possible. 

test.chuck&apos;s regex generator is similar"><a href="#t1598543825003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">15:57:05</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Should totally be possible. 

test.chuck&apos;s regex generator is similar</span></div><div id="t1598565328005400" t="2020-08-27 21:55:28 sogaiu thanks!

i was thinking about ashnur&apos;s email address problem being discussed on another channel  and i noticed there is an antlr grammar for rfc822 email addresses:  https://github.com/antlr/grammars-v4/tree/master/rfc822/rfc822-emailaddress"><a href="#t1598565328005400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">21:55:28</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>thanks!

i was thinking about ashnur&apos;s email address problem being discussed on another channel  and i noticed there is an antlr grammar for rfc822 email addresses: </span><a href="https://github.com/antlr/grammars-v4/tree/master/rfc822/rfc822-emailaddress" target="_blank">https://github.com/antlr/grammars-v4/tree/master/rfc822/rfc822-emailaddress</a></div><div id="t1598880667010300" t="2020-08-31 13:31:07 sogaiu test.chuck&apos;s regex generator is quite neat!

i also found instacheck and instagenerator.

ha ha -- so late to the party  ğŸ™‚"><a href="#t1598880667010300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">13:31:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>test.chuck&apos;s regex generator is quite neat!

i also found instacheck and instagenerator.

ha ha -- so late to the party </span><b>ğŸ™‚</b></div><div id="t1598880897010500" t="2020-08-31 13:34:57 gfredericks I hadn&apos;t heard of either of those"><a href="#t1598880897010500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">13:34:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I hadn&apos;t heard of either of those</span></div><div id="t1598882178010700" t="2020-08-31 13:56:18 sogaiu may be you have found them already, but fwiw:

*  https://github.com/Engelberg/instaparse/issues/82#issuecomment-57892866 
*  https://github.com/Engelberg/instaparse/issues/82#issuecomment-426022741"><a href="#t1598882178010700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">13:56:18</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sogaiuÂ </span><span>may be you have found them already, but fwiw:

* </span><a href="https://github.com/Engelberg/instaparse/issues/82#issuecomment-57892866" target="_blank">https://github.com/Engelberg/instaparse/issues/82#issuecomment-57892866</a><span>
* </span><a href="https://github.com/Engelberg/instaparse/issues/82#issuecomment-426022741" target="_blank">https://github.com/Engelberg/instaparse/issues/82#issuecomment-426022741</a></div><div id="t1598883437011300" t="2020-08-31 14:17:17 gfredericks Cool. Apparently I must have seen the second one and forgot about it, since it mentions me"><a href="#t1598883437011300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">14:17:17</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Cool. Apparently I must have seen the second one and forgot about it, since it mentions me</span></div><div id="t1598543723003100" t="2020-08-27 15:55:23 arohner Before I embark on this journey, has anyone written a thing that combines  prop/for-all  and  gen/let ?"><a href="#t1598543723003100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">15:55:23</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Before I embark on this journey, has anyone written a thing that combines </span><code>prop/for-all</code><span> and </span><code>gen/let</code><span>?</span></div><div id="t1598543859003400" t="2020-08-27 15:57:39 gfredericks Does test.chuck have something like that? I think so"><a href="#t1598543859003400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">15:57:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Does test.chuck have something like that? I think so</span></div><div id="t1598543927003600" t="2020-08-27 15:58:47 arohner Yeah, looks like  test.chuck.gen/for  is what I want, thanks"><a href="#t1598543927003600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">15:58:47</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Yeah, looks like </span><code>test.chuck.gen/for</code><span> is what I want, thanks</span></div><div id="t1598544050004300" t="2020-08-27 16:00:50 arohner Hrm, though I canâ€™t stick it in the  prop/for-all , which is what I wanted to solve:

 (prop/for-all [[a b c] (gen/let [a gen-a b gen-b c gen-c] [a b c] (do-test))"><a href="#t1598544050004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">16:00:50</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Hrm, though I canâ€™t stick it in the </span><code>prop/for-all</code><span>, which is what I wanted to solve:

</span><pre>(prop/for-all [[a b c] (gen/let [a gen-a b gen-b c gen-c] [a b c] (do-test))</pre></div><div id="t1598544062004600" t="2020-08-27 16:01:02 arohner Iâ€™m trying to avoid ^^ that boilerplate"><a href="#t1598544062004600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">16:01:02</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>Iâ€™m trying to avoid ^^ that boilerplate</span></div><div id="t1598544079004800" t="2020-08-27 16:01:19 gfredericks Lemme see"><a href="#t1598544079004800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">16:01:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Lemme see</span></div><div id="t1598544099005100" t="2020-08-27 16:01:39 arohner oh,  prop&apos;/for-all , I just have to keep reading"><a href="#t1598544099005100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">16:01:39</span>Â Â Â Â Â Â Â Â Â Â Â Â Â arohnerÂ </span><span>oh, </span><code>prop&apos;/for-all</code><span>, I just have to keep reading</span></div><div id="t1598544150005300" t="2020-08-27 16:02:30 gfredericks Yep  ğŸ™‚"><a href="#t1598544150005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-27</span>Â <span class="t" onclick="H(this)">16:02:30</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yep </span><b>ğŸ™‚</b></div><div id="t1598787668007000" t="2020-08-30 11:41:08 borkdude I hit a issue in test.check where a global object in clojure.test.check.random is initialized at compile time in GraalVM, so everytime you invoke the binary, you get the same random number.
Strangely enough, I can&apos;t reproduce this with AOT-ing and running on the JVM"><a href="#t1598787668007000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-30</span>Â <span class="t" onclick="H(this)">11:41:08</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I hit a issue in test.check where a global object in clojure.test.check.random is initialized at compile time in GraalVM, so everytime you invoke the binary, you get the same random number.
Strangely enough, I can&apos;t reproduce this with AOT-ing and running on the JVM</span></div><div id="t1598787692007300" t="2020-08-30 11:41:32 borkdude I&apos;ve discussed this problem in #graalvm as well and posted a workaround for it"><a href="#t1598787692007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-30</span>Â <span class="t" onclick="H(this)">11:41:32</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I&apos;ve discussed this problem in #graalvm as well and posted a workaround for it</span></div><div id="t1598790297008300" t="2020-08-30 12:24:57 borkdude I summarized the issue in this gist:  https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a"><a href="#t1598790297008300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-30</span>Â <span class="t" onclick="H(this)">12:24:57</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>I summarized the issue in this gist: </span><a href="https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a" target="_blank">https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a</a></div><div id="t1598836723008800" t="2020-08-31 01:18:43 gfredericks AOT wouldn&apos;t reproduce it because AOT doesn&apos;t run code at compile time"><a href="#t1598836723008800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">01:18:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>AOT wouldn&apos;t reproduce it because AOT doesn&apos;t run code at compile time</span></div><div id="t1598836733009100" t="2020-08-31 01:18:53 gfredericks I mean maybe it runs it but it only compiles the code, not the result"><a href="#t1598836733009100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">01:18:53</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I mean maybe it runs it but it only compiles the code, not the result</span></div><div id="t1598836773009500" t="2020-08-31 01:19:33 gfredericks a fix would be something that lazy-initializes the global rng the first time you use it, I guess?"><a href="#t1598836773009500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">01:19:33</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>a fix would be something that lazy-initializes the global rng the first time you use it, I guess?</span></div><div id="t1598836823009900" t="2020-08-31 01:20:23 gfredericks I don&apos;t think that&apos;s in a perf-sensitive codepath so I don&apos;t think there are any downsides"><a href="#t1598836823009900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">01:20:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I don&apos;t think that&apos;s in a perf-sensitive codepath so I don&apos;t think there are any downsides</span></div><div id="t1598836860010200" t="2020-08-31 01:21:00 gfredericks sounds like a legitimate jira ticket"><a href="#t1598836860010200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">01:21:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>sounds like a legitimate jira ticket</span></div><div id="t1598899486015500" t="2020-08-31 18:44:46 Mitch Are there resources available for testing async code in cljs via  test.check ? I see that there is an open ticket in jira for support, just wondering if there are any known workarounds that might allow me to still use  defspec"><a href="#t1598899486015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">18:44:46</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â MitchÂ </span><span>Are there resources available for testing async code in cljs via </span><code>test.check</code><span>? I see that there is an open ticket in jira for support, just wondering if there are any known workarounds that might allow me to still use </span><code>defspec</code></div><div id="t1598900112016300" t="2020-08-31 18:55:12 gfredericks Does the ticket reference a branch with a proof-of-concept?"><a href="#t1598900112016300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">18:55:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Does the ticket reference a branch with a proof-of-concept?</span></div><div id="t1598902529017500" t="2020-08-31 19:35:29 Mitch I don&apos;t think the ticket references it, but I have seen that branch. Haven&apos;t tried the branch out yet, though. I can give it a roll and share how it works for our use case if you think that would be helpful"><a href="#t1598902529017500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:35:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â MitchÂ </span><span>I don&apos;t think the ticket references it, but I have seen that branch. Haven&apos;t tried the branch out yet, though. I can give it a roll and share how it works for our use case if you think that would be helpful</span></div><div id="t1598902668020000" t="2020-08-31 19:37:48 gfredericks I was suggesting a &quot;workaround&quot; would be to just use that branch, if it works. 

Depends on your definition of workaround. 

I&apos;m not sure there are any other options short of somebody completing integrating that feature. Coverting to async is a pretty fundamental change."><a href="#t1598902668020000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:37:48</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I was suggesting a &quot;workaround&quot; would be to just use that branch, if it works. 

Depends on your definition of workaround. 

I&apos;m not sure there are any other options short of somebody completing integrating that feature. Coverting to async is a pretty fundamental change.</span></div><div id="t1598902974022300" t="2020-08-31 19:42:54 Mitch Cool, thanks for helping me out. I really appreciate it. I&apos;ll see how that goes. I&apos;m a little surprised that this seems to be a rare scenario  :shrug:"><a href="#t1598902974022300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:42:54</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â MitchÂ </span><span>Cool, thanks for helping me out. I really appreciate it. I&apos;ll see how that goes. I&apos;m a little surprised that this seems to be a rare scenario </span><b>:shrug:</b></div><div id="t1598903157022800" t="2020-08-31 19:45:57 gfredericks I, also, am surprised"><a href="#t1598903157022800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:45:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I, also, am surprised</span></div><div id="t1598903302024000" t="2020-08-31 19:48:22 gfredericks I haven&apos;t done much professional clojure web dev; maybe people tend to use frameworks where the user code is just functions on data, and so those user functions are amenable to synchronous testing?"><a href="#t1598903302024000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:48:22</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>I haven&apos;t done much professional clojure web dev; maybe people tend to use frameworks where the user code is just functions on data, and so those user functions are amenable to synchronous testing?</span></div><div id="t1598903914026300" t="2020-08-31 19:58:34 Mitch Yeah, I think that is a big part of it. Most of the time there is already a well-supported React component for whatever library you want to integrate, so you do not need to worry about testing its behavior"><a href="#t1598903914026300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">19:58:34</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â MitchÂ </span><span>Yeah, I think that is a big part of it. Most of the time there is already a well-supported React component for whatever library you want to integrate, so you do not need to worry about testing its behavior</span></div><div id="t1598910591027100" t="2020-08-31 21:49:51 borkdude @gfredericks
&gt; a fix would be something that lazy-initializes the global rng the first time you use it, I guess?
 https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a#workaround 
I&apos;ll make a JIRA ticket tomorrow"><a href="#t1598910591027100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-31</span>Â <span class="t" onclick="H(this)">21:49:51</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks
&gt; a fix would be something that lazy-initializes the global rng the first time you use it, I guess?
</span><a href="https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a#workaround" target="_blank">https://gist.github.com/borkdude/768eb5d01085944190e5eb485fd4737a#workaround</a><span>
I&apos;ll make a JIRA ticket tomorrow</span></div><div id="t1598970567027900" t="2020-09-01 14:29:27 borkdude @gfredericks done:  https://clojure.atlassian.net/browse/TCHECK-157  (includes patch)"><a href="#t1598970567027900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-01</span>Â <span class="t" onclick="H(this)">14:29:27</span>Â Â Â Â Â Â Â Â Â Â Â Â borkdudeÂ </span><span>@gfredericks done: </span><a href="https://clojure.atlassian.net/browse/TCHECK-157" target="_blank">https://clojure.atlassian.net/browse/TCHECK-157</a><span> (includes patch)</span></div><div id="t1598971770028200" t="2020-09-01 14:49:30 gfredericks LGTM

I can&apos;t open jira on my computer for some reason, so can&apos;t comment on it"><a href="#t1598971770028200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-01</span>Â <span class="t" onclick="H(this)">14:49:30</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>LGTM

I can&apos;t open jira on my computer for some reason, so can&apos;t comment on it</span></div><div id="t1601225395001100" t="2020-09-27 16:49:55 colinkahn Is it possible to make a vector generator that always generates X number of items but can shrink down to only 1 of those items?"><a href="#t1601225395001100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:49:55</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>Is it possible to make a vector generator that always generates X number of items but can shrink down to only 1 of those items?</span></div><div id="t1601225440001400" t="2020-09-27 16:50:40 gfredericks What&apos;s the use case?"><a href="#t1601225440001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:50:40</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>What&apos;s the use case?</span></div><div id="t1601225537002400" t="2020-09-27 16:52:17 colinkahn I have a test that has some expensive setup and I want to run the max items through it (each item of the vector) but still want to be able to get it to shrink to a single item if it fails"><a href="#t1601225537002400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:52:17</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>I have a test that has some expensive setup and I want to run the max items through it (each item of the vector) but still want to be able to get it to shrink to a single item if it fails</span></div><div id="t1601225637003200" t="2020-09-27 16:53:57 gfredericks you can get approximately this behavior by modifying the  size  parameter

that won&apos;t specifically guarantee large vectors, but it does express the idea of &quot;I want to generate big inputs for whatever reason&quot;"><a href="#t1601225637003200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:53:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>you can get approximately this behavior by modifying the </span><code>size</code><span> parameter

that won&apos;t specifically guarantee large vectors, but it does express the idea of &quot;I want to generate big inputs for whatever reason&quot;</span></div><div id="t1601225683003900" t="2020-09-27 16:54:43 colinkahn But will that affect the size of other gens or can I modify per-gen?"><a href="#t1601225683003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:54:43</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>But will that affect the size of other gens or can I modify per-gen?</span></div><div id="t1601225845006100" t="2020-09-27 16:57:25 gfredericks ummmmmmhm

let&apos;s see

something like

 (defn gen-vector-with-shallow-min-size
  [min-size element-gen &amp; other-args]
  (gen/sized (fn [size] (gen/scale #(min min-size %) (apply gen/vector (gen/resize size element-gen) other-args)))))"><a href="#t1601225845006100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:57:25</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>ummmmmmhm

let&apos;s see

something like

</span><pre>(defn gen-vector-with-shallow-min-size
  [min-size element-gen &amp; other-args]
  (gen/sized (fn [size] (gen/scale #(min min-size %) (apply gen/vector (gen/resize size element-gen) other-args)))))</pre></div><div id="t1601225862006500" t="2020-09-27 16:57:42 gfredericks kind of hairy, but I believe that&apos;s what you&apos;re describing"><a href="#t1601225862006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:57:42</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>kind of hairy, but I believe that&apos;s what you&apos;re describing</span></div><div id="t1601225880006900" t="2020-09-27 16:58:00 gfredericks again, doesn&apos;t guarantee any minimum number of elements, but it will skew the distribution larger"><a href="#t1601225880006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:58:00</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>again, doesn&apos;t guarantee any minimum number of elements, but it will skew the distribution larger</span></div><div id="t1601225917007300" t="2020-09-27 16:58:37 gfredericks (which is intentional -- it&apos;s nice to still test empty/small vectors occasionally just in case)"><a href="#t1601225917007300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:58:37</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>(which is intentional -- it&apos;s nice to still test empty/small vectors occasionally just in case)</span></div><div id="t1601225955007600" t="2020-09-27 16:59:15 colinkahn Nice! Thanks! Iâ€™ll give it a shot!"><a href="#t1601225955007600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-27</span>Â <span class="t" onclick="H(this)">16:59:15</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>Nice! Thanks! Iâ€™ll give it a shot!</span></div><div id="t1601296272009400" t="2020-09-28 12:31:12 Saikyun is it possible to write a meaningful &quot;not&quot;-generator? in my case I have a bunch of specs and I use  clojure.spec.gen.alpha/generate  for automatic testing. it just struck me that it might sense for some falsifying tests, i.e. checking that my code actually throws exceptions on invalid data"><a href="#t1601296272009400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">12:31:12</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>is it possible to write a meaningful &quot;not&quot;-generator? in my case I have a bunch of specs and I use </span><code>clojure.spec.gen.alpha/generate</code><span> for automatic testing. it just struck me that it might sense for some falsifying tests, i.e. checking that my code actually throws exceptions on invalid data</span></div><div id="t1601297481010100" t="2020-09-28 12:51:21 gfredericks if you have a spec you could do something like

 (gen/such-that (complement passes-the-spec?) gen/any)"><a href="#t1601297481010100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">12:51:21</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>if you have a spec you could do something like

</span><code>(gen/such-that (complement passes-the-spec?) gen/any)</code></div><div id="t1601297503010400" t="2020-09-28 12:51:43 gfredericks kind of sloppy/stupid but also it&apos;s one line"><a href="#t1601297503010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">12:51:43</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>kind of sloppy/stupid but also it&apos;s one line</span></div><div id="t1601313188011000" t="2020-09-28 17:13:08 Saikyun haha, interesting. could be nice to just throw at the program to see what happens  ğŸ™‚"><a href="#t1601313188011000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:13:08</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>haha, interesting. could be nice to just throw at the program to see what happens </span><b>ğŸ™‚</b></div><div id="t1601313216011800" t="2020-09-28 17:13:36 Saikyun I just started thinking that it might be too naive to only test for &quot;valid&quot; data (it&apos;s an input form)"><a href="#t1601313216011800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:13:36</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>I just started thinking that it might be too naive to only test for &quot;valid&quot; data (it&apos;s an input form)</span></div><div id="t1601313312013600" t="2020-09-28 17:15:12 gfredericks Yeah that&apos;s a tough use case I think.

There&apos;s a variety of options with different tradeoffs, and no holistic silver bullet thing"><a href="#t1601313312013600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:15:12</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah that&apos;s a tough use case I think.

There&apos;s a variety of options with different tradeoffs, and no holistic silver bullet thing</span></div><div id="t1601313353014900" t="2020-09-28 17:15:53 Saikyun makes sense. I guess I could try generating random strings and just filter away the ones that are actually valid"><a href="#t1601313353014900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:15:53</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>makes sense. I guess I could try generating random strings and just filter away the ones that are actually valid</span></div><div id="t1601313357015300" t="2020-09-28 17:15:57 gfredericks Two things are

Just use examples
Generate valid things and then tweak them in specific ways"><a href="#t1601313357015300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:15:57</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Two things are

Just use examples
Generate valid things and then tweak them in specific ways</span></div><div id="t1601313367015500" t="2020-09-28 17:16:07 Saikyun right"><a href="#t1601313367015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:16:07</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>right</span></div><div id="t1601313389015800" t="2020-09-28 17:16:29 Saikyun thanks for the input, will think a bit about it  ğŸ™‚"><a href="#t1601313389015800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:16:29</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>thanks for the input, will think a bit about it </span><b>ğŸ™‚</b></div><div id="t1601313453016600" t="2020-09-28 17:17:33 Saikyun I&apos;m very happy because today I managed to create automatic gui / end-to-end testing by using cljs + spec generators  ğŸ™‚"><a href="#t1601313453016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:17:33</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>I&apos;m very happy because today I managed to create automatic gui / end-to-end testing by using cljs + spec generators </span><b>ğŸ™‚</b></div><div id="t1601313475017100" t="2020-09-28 17:17:55 Saikyun it looks very cool to have everything filled out for me. will be a nice demo to show when talking about clojure with my colleagues"><a href="#t1601313475017100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:17:55</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>it looks very cool to have everything filled out for me. will be a nice demo to show when talking about clojure with my colleagues</span></div><div id="t1601313527017300" t="2020-09-28 17:18:47 gfredericks Nice"><a href="#t1601313527017300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:18:47</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Nice</span></div><div id="t1601313800018700" t="2020-09-28 17:23:20 andy.fingerhut As a maybe-already-obvious example, generating strings of 10 characters where each character is uniformly chosen from the set of all Unicode code points, and then filtering only the ones that contain only ASCII characters, is extremely unlikely to get past the ASCII filter."><a href="#t1601313800018700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:23:20</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>As a maybe-already-obvious example, generating strings of 10 characters where each character is uniformly chosen from the set of all Unicode code points, and then filtering only the ones that contain only ASCII characters, is extremely unlikely to get past the ASCII filter.</span></div><div id="t1601313914019100" t="2020-09-28 17:25:14 Saikyun @andy.fingerhut was that aimed at me?  ğŸ™‚"><a href="#t1601313914019100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:25:14</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>@andy.fingerhut was that aimed at me? </span><b>ğŸ™‚</b></div><div id="t1601313961019500" t="2020-09-28 17:26:01 andy.fingerhut It was following up on your conversation, yes."><a href="#t1601313961019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:26:01</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>It was following up on your conversation, yes.</span></div><div id="t1601314197020200" t="2020-09-28 17:29:57 Saikyun ah, okay. yeah, then I get what you mean  ğŸ™‚  I was thinking if there might be something &quot;cleverer&quot;, or an obvious answer that I didn&apos;t know about. thanks ^^"><a href="#t1601314197020200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:29:57</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>ah, okay. yeah, then I get what you mean </span><b>ğŸ™‚</b><span> I was thinking if there might be something &quot;cleverer&quot;, or an obvious answer that I didn&apos;t know about. thanks ^^</span></div><div id="t1601315246021500" t="2020-09-28 17:47:26 andy.fingerhut Obviously for that simple example, if you want to guarantee all-ASCII strings, it is straightforward to generate them that way in the first place, and then no filter is needed.  But when the condition you want to satisfy has more interdependence between the parts, it can get very tricky."><a href="#t1601315246021500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-28</span>Â <span class="t" onclick="H(this)">17:47:26</span>Â Â Â Â Â Â andy.fingerhutÂ </span><span>Obviously for that simple example, if you want to guarantee all-ASCII strings, it is straightforward to generate them that way in the first place, and then no filter is needed.  But when the condition you want to satisfy has more interdependence between the parts, it can get very tricky.</span></div><div id="t1601362029021900" t="2020-09-29 06:47:09 Saikyun yeah, that makes sense. we&apos;ll see how I solve it then  ğŸ™‚"><a href="#t1601362029021900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-09-29</span>Â <span class="t" onclick="H(this)">06:47:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â SaikyunÂ </span><span>yeah, that makes sense. we&apos;ll see how I solve it then </span><b>ğŸ™‚</b></div><div id="t1601969228024900" t="2020-10-06 07:27:08 Steven Deobald Hey folks. I have a friend who&apos;s looking to dig into some generative testing for a web service/app we&apos;re volunteering on. All the generative testing examples I have at hand are closed-source, from work done in another life. Does anyone have an open source project(s) they&apos;d recommend he read to see some examples of exercising a domain with test.check? Preferably apps or services, rather than libraries."><a href="#t1601969228024900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-06</span>Â <span class="t" onclick="H(this)">07:27:08</span>Â Â Â Â Â Â Steven DeobaldÂ </span><span>Hey folks. I have a friend who&apos;s looking to dig into some generative testing for a web service/app we&apos;re volunteering on. All the generative testing examples I have at hand are closed-source, from work done in another life. Does anyone have an open source project(s) they&apos;d recommend he read to see some examples of exercising a domain with test.check? Preferably apps or services, rather than libraries.</span></div><div id="t1601986554025300" t="2020-10-06 12:15:54 gfredericks that one conj keynote was about ostensibly testing dropbox

I think there&apos;s a paper to go with it"><a href="#t1601986554025300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-06</span>Â <span class="t" onclick="H(this)">12:15:54</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>that one conj keynote was about ostensibly testing dropbox

I think there&apos;s a paper to go with it</span></div><div id="t1601986639025800" t="2020-10-06 12:17:19 gfredericks and there was a much earlier conj talk about testing a web UI; that probably doesn&apos;t qualify as a real code example though"><a href="#t1601986639025800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-06</span>Â <span class="t" onclick="H(this)">12:17:19</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>and there was a much earlier conj talk about testing a web UI; that probably doesn&apos;t qualify as a real code example though</span></div><div id="t1602109484026300" t="2020-10-07 22:24:44 Hugh Powell Morning folks, does anyone know if there&apos;s a simple way to run aÂ `test.check`Â `defspec`Â with only the shrunk value of a failed run and without trying to further shrink it? I know I can just call the test itself with aÂ `:seed`Â argument, but that runs it with the original data and all the subsequent runs to shrink it. This can make debugging harder than it feels it should be. The only way I can think to do this would be to factor out the test code into a function that takes the generated data."><a href="#t1602109484026300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span>Â <span class="t" onclick="H(this)">22:24:44</span>Â Â Â Â Â Â Â Â Â Hugh PowellÂ </span><span>Morning folks, does anyone know if there&apos;s a simple way to run aÂ `test.check`Â `defspec`Â with only the shrunk value of a failed run and without trying to further shrink it? I know I can just call the test itself with aÂ `:seed`Â argument, but that runs it with the original data and all the subsequent runs to shrink it. This can make debugging harder than it feels it should be. The only way I can think to do this would be to factor out the test code into a function that takes the generated data.</span></div><div id="t1602109772029000" t="2020-10-07 22:29:32 gfredericks This overlaps with the use case of wanting to add regression cases to a defspec.

Both of those would not be hard features to implement, just need to decide on an api.

But as of now it does not exist. I&apos;ve done the factoring you describe a number of times, and it fits well with adding a deftest with regression cases."><a href="#t1602109772029000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span>Â <span class="t" onclick="H(this)">22:29:32</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>This overlaps with the use case of wanting to add regression cases to a defspec.

Both of those would not be hard features to implement, just need to decide on an api.

But as of now it does not exist. I&apos;ve done the factoring you describe a number of times, and it fits well with adding a deftest with regression cases.</span></div><div id="t1602110027029500" t="2020-10-07 22:33:47 Hugh Powell Awesome, thanks for that  ğŸ‘"><a href="#t1602110027029500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span>Â <span class="t" onclick="H(this)">22:33:47</span>Â Â Â Â Â Â Â Â Â Hugh PowellÂ </span><span>Awesome, thanks for that </span><b>ğŸ‘</b></div><div id="t1602111434030300" t="2020-10-07 22:57:14 seancorfield That sounds like the same advice that Eric Normand gives in his Property-Based Testing course (on  http://PurelyFunctional.tv )."><a href="#t1602111434030300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span>Â <span class="t" onclick="H(this)">22:57:14</span>Â Â Â Â Â Â Â Â seancorfieldÂ </span><span>That sounds like the same advice that Eric Normand gives in his Property-Based Testing course (on </span><a href="http://PurelyFunctional.tv" target="_blank">http://PurelyFunctional.tv</a><span>).</span></div><div id="t1602111481031200" t="2020-10-07 22:58:01 seancorfield That allows him to take the shrunk failure from the output of  defspec  and just run that on its own through the test code in a Rich Comment Form in the same ns."><a href="#t1602111481031200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-07</span>Â <span class="t" onclick="H(this)">22:58:01</span>Â Â Â Â Â Â Â Â seancorfieldÂ </span><span>That allows him to take the shrunk failure from the output of </span><code>defspec</code><span> and just run that on its own through the test code in a Rich Comment Form in the same ns.</span></div><div id="t1602535839033400" t="2020-10-12 20:50:39 colinkahn is it possible to have a generator that doesnâ€™t shrink at one level, but its children do shrink? For example:

 (commit-to (gen/one-of [gen-for-case-1 gen-for-case-2])) 
So once it chooses either case 1 or 2 it wonâ€™t try the other, but will shrink the things genâ€™d in them?"><a href="#t1602535839033400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">20:50:39</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>is it possible to have a generator that doesnâ€™t shrink at one level, but its children do shrink? For example:

</span><pre>(commit-to (gen/one-of [gen-for-case-1 gen-for-case-2]))</pre><span>
So once it chooses either case 1 or 2 it wonâ€™t try the other, but will shrink the things genâ€™d in them?</span></div><div id="t1602535987033800" t="2020-10-12 20:53:07 gfredericks Not using public functionality, I don&apos;t think"><a href="#t1602535987033800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">20:53:07</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Not using public functionality, I don&apos;t think</span></div><div id="t1602536183035600" t="2020-10-12 20:56:23 gfredericks A hacky idea is to have a predicate on the generated values to tell you what branch matched, and then wrap that in a such-that that insists it is something from that branch"><a href="#t1602536183035600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">20:56:23</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>A hacky idea is to have a predicate on the generated values to tell you what branch matched, and then wrap that in a such-that that insists it is something from that branch</span></div><div id="t1602536221036400" t="2020-10-12 20:57:01 gfredericks Super goofy looking, and wastes a bit of cpu, but otherwise would do what you&apos;re describing"><a href="#t1602536221036400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">20:57:01</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Super goofy looking, and wastes a bit of cpu, but otherwise would do what you&apos;re describing</span></div><div id="t1602536388037600" t="2020-10-12 20:59:48 colinkahn Having a hard time imagining what that would look like, but I think if itâ€™s not standard I can just duplicate my test  ğŸ˜…"><a href="#t1602536388037600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">20:59:48</span>Â Â Â Â Â Â Â Â Â Â Â colinkahnÂ </span><span>Having a hard time imagining what that would look like, but I think if itâ€™s not standard I can just duplicate my test </span><b>ğŸ˜…</b></div><div id="t1602538546038100" t="2020-10-12 21:35:46 gfredericks Yeah I couldn&apos;t tell what your appetite for Weird was  ğŸ™‚"><a href="#t1602538546038100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-12</span>Â <span class="t" onclick="H(this)">21:35:46</span>Â Â Â Â Â Â Â Â Â gfredericksÂ </span><span>Yeah I couldn&apos;t tell what your appetite for Weird was </span><b>ğŸ™‚</b></div><div id="t1602673149040400" t="2020-10-14 10:59:09 zclj Hi test.check users, I have released a library intended to provide insights on the values created by test.check generators. If that sounds interesting to you, I would appreciate any usage feedback you might have, with the hopes of making this useful to all test.check users.
 https://github.com/zclj/test.check.insights"><a href="#t1602673149040400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-14</span>Â <span class="t" onclick="H(this)">10:59:09</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â zcljÂ </span><span>Hi test.check users, I have released a library intended to provide insights on the values created by test.check generators. If that sounds interesting to you, I would appreciate any usage feedback you might have, with the hopes of making this useful to all test.check users.
</span><a href="https://github.com/zclj/test.check.insights" target="_blank">https://github.com/zclj/test.check.insights</a></div></div></body>