<!DOCTYPE html>
<head><title>core-logic</title><meta charset="UTF-8" /><style type="text/css">body {
    font-family: Monaco, Menlo, Consolas, "Courier New", sans-serif;
    font-size: 12px;
    margin: 15px;
}
h2 {text-align: center}
pre,
code {
    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
    color: #333;
    line-break: anywhere;
}
a {
    line-break: anywhere;
}
code {
    /*line-height: 1.2;*/
    white-space: normal;
    color: #c25;
    background-color: #f7f7f9;
    border: 1px solid #e1e1e8;
}
pre {
    margin: .5rem 0 .2rem;
    font-size: .75rem;
    /*line-height: 1.15rem;*/
    background: #fbfaf8;
    padding: .5rem;
    word-break: normal;
    display: block;
    border: 1px solid rgba(0, 0, 0, .15);
    white-space: pre-wrap;
    word-wrap: break-word;
    border-radius: 4px;
}
/*span {*/
z {
    white-space: pre-wrap;
}

d {padding-right: 8px;}
h {padding-right: 16px;}

w, r {
    margin-right: 10px;
    padding-right: 8px;
    text-align: right;
}

d,h,w,r {
    background-color: lavender;
    margin-top: 1px;
    display: inline-table; /* prevents doubleclick selection spillover into neighbour elements */
}

h:hover,
d:hover {
    text-decoration: underline;
    color: blue;
    cursor: row-resize;
}
d {padding-right: 8px;}
h {padding-right: 16px;}

z {display: block;}

z:target > r,
z:target > w,
z:target > d,
z:target > h {
    background-color: aquamarine
}

#filters-container {
    position: fixed;
    left: 50px;
    z-index: 1;
}
#filters-container > input {
    /*column:*/
    display: block;
    outline-color: aquamarine;
}

y {
    cursor: pointer;
    text-decoration: none;
    color: blue;
    position: absolute;
    left: 3px;
}

y:hover {
    text-decoration: underline;
    color: aquamarine;
}


</style></head><body><style id="css-username">w {min-width: 192px;} r {min-width: 224px;}</style><style id="css-text-filter"></style><style id="css-date-filter"></style><style id="css-filter-override"></style><p id="filters-container"><input id="text-filter" onkeyup="debtextfilter(this.value)" placeholder="filter text" type="string" /><button hidden="hidden" id="date-filter" onclick="cleardatefilter()"></button></p><h2>#core-logic</h2><pre><i>generated UTC: 2023-02-13 19:04</i><i>
latest data: <a href="https://clojurians-log.clojureverse.org/core-logic/2023-02-07">https://clojurians-log.clojureverse.org/core-logic/2023-02-07</a></i><i>
messages: 1423</i>
pro tips:
* Double click on text to filter by it. (doubleclick + cmd-f for extra points).
* Click on date to keep day visible regardless of filter.
* Click on time to keep hour visible regardless of filter.</pre><script>const textFilterInput = document.getElementById("text-filter");
const dateFilterInput = document.getElementById("date-filter");
const filterTextStyle = document.getElementById("css-text-filter");
const filterDateStyle = document.getElementById("css-date-filter");
const filterStyleOverride = document.getElementById("css-filter-override");



function textFilter2(text) {
    var style = '';
    if (text.trim() !== '') {
        text.split(' ').forEach(function (t) {
            if (t !== '') {
                style = style + "z:not([t*='" + t + "' i]) {display: none; opacity: 0.6}";
            }
        });
    }
    filterTextStyle.innerHTML = style;
}
function textFilter(text) {
    filterTextStyle.innerHTML = "";
    if (text.trim() !== '') {
        var sections = document.getElementsByTagName("g");
        var sectionsArr = Array.prototype.slice.call(sections);
        sectionsArr.forEach(function (s){
            var sid = s.getAttribute("id");
            text.split(' ').forEach(function (t) {
                if (t !== '') {
                    filterTextStyle.innerHTML += "\ng#" + sid + " > z:not([t*='" + t + "' i]) {display: none; opacity: 0.6}";
                }
            });
        })
    }
}
function textFilter3(text) {
    console.time("text search");
    filterTextStyle.innerHTML = "";
    if (text.trim() !== '') {
        const re = new RegExp( text, "i");
        var sections = document.getElementsByTagName("g");
        var sectionsArr = Array.prototype.slice.call(sections);
        sectionsArr.forEach(function (w){
            var zs = w.getElementsByTagName ("z");
            var zsArr = Array.prototype.slice.call(zs);
            var ids = zsArr
                .filter(function (el) {
                    return !re.test(el.innerText);
                })
                .map(function (el){
                    return el.getAttribute("id");
                });
            if (ids) {
                filterTextStyle.innerHTML += "\n#" + ids.join(",#") + " {display: none; opacity: 0.6}";
            }
        })
    }
    console.timeEnd("text search");
}


function filterSelection (e) {
    let sel = document.getSelection();
    let txt = sel.toString();
    textFilterInput.value = (txt || "");
    textFilter(txt);
}
function debounce1(callback, delay) {
    let timeout;
    return function(arg) {
        clearTimeout(timeout);
        timeout = setTimeout(callback, delay, arg);
    }
}

function keyUp (e) {
    if (e.code === "KeyF" && e.ctrlKey) {
        let txt = document.getSelection().toString();
        if (txt.length > 0) {
            textFilterInput.value = (txt || "");
            textFilter(txt);
        }
    }
}


function showDateTimes (el, datestr, hourstr) {
    dateFilterInput.innerText = "clear: " + datestr + " " + hourstr;
    dateFilterInput.hidden = false;
    let ids = [];
    const clicked = el.parentElement;  // el = z#id/t
    ids.push(clicked.id);
    // var idbefore, idafter;
    let cursor = clicked;
    function nextCursor (cursor) {
        const id = (cursor && cursor.id);
        const d = (cursor && cursor.children[1]);
        const h = (cursor && cursor.children[2])
        if (id) {
            ids.push(id); //includes 1st next-id not matching date.
        } else {
            cursor = null;
        }
        if (d && (d.textContent === datestr) && (!hourstr || (h && h.textContent.startsWith(hourstr)))) {
        } else {
            cursor = null;
        }
        return cursor;
    }
    while (cursor) {
        cursor = nextCursor(cursor.previousElementSibling);
    }

    cursor = clicked;

    while (cursor) {
        cursor = nextCursor(cursor.nextElementSibling);
    }


    var style1 = '';
    var style2 = '';
    var content;
    if (datestr.includes(" ")) { //hour
        content = " *";
    } else {
        content = "**";
    }
    ids.forEach(function (id) {
        if (id) {
            style1 = style1 + ", #" + id;
            style2 = style2 + ", #" + id + " h:after";
        }
    })
    if (style1) {
        style1 = style1.substring(1) + " {display: block !important}";
    }
    if (style2) {
        style2 = style2.substring(1) + " {content: \"" + content + "\"; position: absolute}"
    }
    filterDateStyle.innerHTML = style1 + "\n" + style2;
}

// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView
function filterDay (el) {
    showDateTimes(el, el.textContent);
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "center"});
}

function filterHours (el) {
    showDateTimes(el, el.previousElementSibling.textContent, el.textContent.substring(0, 2));
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "center"});
}

function forceShowSelected (el) {
    var id = el.parentElement.id
    if (id) {
        window.location.hash = "#" + id;
        filterStyleOverride.innerHTML = ""
            + "#" + id
            + " {display: block !important;}"
            + "#" + id + " h:after"
            + " {content: \"  #\"; position: absolute}";

    } else {
        window.location.hash = "";
        filterStyleOverride.innerHTML = "";
    }
}


function cleardatefilter () {
    dateFilterInput.hidden = true;
    dateFilterInput.innerText = "";
    filterDateStyle.innerHTML = "";
}

const debtextfilter = debounce1(textFilter, 200);

function doubleClick (e) {
    if (e.target.tagName !== "INPUT"
        && e.target.tagName !== "D"
        && e.target.tagName !== "H") {

        filterSelection();
        e.target.scrollIntoView({behavior: "auto", block: "center", inline: "start"});
    }
}

function onclick(e) {
    if (e.target.tagName === "Y") {
        e.preventDefault();
        forceShowSelected(e.target);
    } else if (e.target.tagName === "D") {
        e.preventDefault();
        filterDay(e.target);
    } else if (e.target.tagName === "H") {
        e.preventDefault();
        filterHours(e.target);
    }
}

document.onclick = onclick;
document.ondblclick = doubleClick;
document.onkeyup = keyUp;
textFilterInput.focus();
</script><div><g id="s0"><z id="t1437987862" t="tsdh Can someone enlighten me with some ccl result? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>09:04</h><w>tsdh</w>Can someone enlighten me with some ccl result?<div></div></z><z id="t1437987881" t="tsdh (run* [q] (fresh [a b c] (== q [a b c]) (membero 1 q) (membero 3 q) (conde [(conso 1 [b c] q)] [(conjo [a b] 3 q)]))) ;; ([1 3 _0] ;; [1 3 3] ;; [1 _0 3] ;; ([1 _0 3] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [1 _0 3])) ;; [3 1 3] ;; [1 1 3] ;; ([_0 1 3] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [_0 1 3])) ;; ([3 _0 1] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [3 _0 1])) ;; [1 3 1] ;; ([_0 3 1] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [_0 3 1]))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>09:04</h><w>tsdh</w><pre>(run* [q]
  (fresh [a b c]
    (== q [a b c])
    (membero 1 q)
    (membero 3 q)
    (conde
     [(conso 1 [b c] q)]
     [(conjo [a b] 3 q)])))
;; ([1 3 _0]
;;  [1 3 3]
;;  [1 _0 3]
;;  ([1 _0 3] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [1 _0 3]))
;;  [3 1 3]
;;  [1 1 3]
;;  ([_0 1 3] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [_0 1 3]))
;;  ([3 _0 1] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [3 _0 1]))
;;  [1 3 1]
;;  ([_0 3 1] :- (clojure.core.logic/conjo [&lt;lvar:a__21997&gt; &lt;lvar:b__21998&gt;] 3 [_0 3 1])))
</pre><div></div></z><z id="t1437987941" t="tsdh For example, the fourth result is already subsumed by the third, and the 8th and the last result can never become true, no? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>09:05</h><w>tsdh</w>For example, the fourth result is already subsumed by the third, and the 8th and the last result can never become true, no?<div></div></z><z id="t1437994320" t="tsdh Another thing: Is is somehow possible to do logic programming with strings? One could use conso , resto , and appendo with lists of characters of course, but can this be done somewhat transparently so that I could define (stro a b ab) which is like appendo but translates from/to lists of characters as needed? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>10:52</h><w>tsdh</w>Another thing: Is is somehow possible to do logic programming with strings?  One could use <code>conso</code>, <code>resto</code>, and <code>appendo</code> with lists of characters of course, but can this be done somewhat transparently so that I could define <code>(stro a b ab)</code> which is like <code>appendo</code> but translates from/to lists of characters as needed?<div></div></z><z id="t1438012678" t="jballanc tsdh: to answer your second question first, you can always write your own string-based methods either using the core.logic primatives, or just deconstructing/reconstructing the string and using conso and friends [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>15:57</h><w>jballanc</w>tsdh: to answer your second question first, you can always write your own string-based methods either using the <code>core.logic</code> primatives, or just deconstructing/reconstructing the string and using <code>conso</code> and friends<div></div></z><z id="t1438017597" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : looking at how complicated firsto and friends are with their LCons deftype etc, reusing that seems like the way to go. However, I just wondered if I could get the conversion from/to lists of characters transparently/implicitly rather than doing it from outside of run*. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>17:19</h><w>tsdh</w><a>@jballanc</a>: looking at how complicated firsto and friends are with their LCons deftype etc, reusing that seems like the way to go. However, I just wondered if I could get the conversion from/to lists of characters transparently/implicitly rather than doing it from outside of run*.<div></div></z><z id="t1438018238" t="tsdh FWIW, I don&apos;t need to have relations on lists of characters, so that representation could be reserved for strings. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>17:30</h><w>tsdh</w>FWIW, I don&apos;t need to have relations on lists of characters, so that representation could be reserved for strings.<div></div></z><z id="t1438023547" t="jballanc hmm…I think it should be possible to pass strings around…have to think about it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>18:59</h><w>jballanc</w>hmm…I think it should be possible to pass strings around…have to think about it<div></div></z><z id="t1438023645" t="jballanc oh, and about your first question…not sure but I think what’s happening is: 1. for the 4th result, you’re swapping a and b as to which is 1 and which is unbound (`_0`) 2. for the 8th result, one of your fresh vars in the conjo is empty…I think [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>19:00</h><w>jballanc</w>oh, and about your first question…not sure but I think what’s happening is:
1. for the 4th result, you’re swapping <code>a</code> and <code>b</code> as to which is <code>1</code> and which is unbound (`_0`)
2. for the 8th result, one of your fresh vars in the <code>conjo</code> is empty…I think<div></div></z><z id="t1438023655" t="jballanc would have to double-check that last one, though [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-27</d><h>19:00</h><w>jballanc</w>would have to double-check that last one, though<div></div></z><z id="t1438064115" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Yes, in the code, b could be anything as long as 1 and 3 are member of the vector q and a is 1 or c is 3. So with the 8th result, there&apos;s no way to complete it to a solution, no matter what you insert for b . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>06:15</h><w>tsdh</w><a>@jballanc</a>: Yes, in the code, <code>b</code> could be anything as long as 1 and 3 are member of the vector <code>q</code> and <code>a</code> is 1 or <code>c</code> is 3. So with the 8th result, there&apos;s no way to complete it to a solution, no matter what you insert for <code>b</code>.<div></div></z><z id="t1438075145" t="tsdh Does someone have a minimal example showing the difference between conda and condu ? As far as I understand, (run* [x y] (conda ;; or condu [(== x 1) (membero 2 y)] [(== x 2) (== y 3)])) should blow the stack whereas it should work with condu and deliver ([1 (2)]) . But actually it also blows the stack with condu . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>09:19</h><w>tsdh</w>Does someone have a minimal example showing the difference between <code>conda</code> and <code>condu</code>?  As far as I understand,
<pre>(run* [x y]
  (conda  ;; or condu
   [(== x 1) (membero 2 y)]
   [(== x 2) (== y 3)]))
</pre>
should blow the stack whereas it should work with <code>condu</code> and deliver <code>([1 (2)])</code>. But actually it also blows the stack with <code>condu</code>.<div></div></z><z id="t1438075257" t="tsdh Well, with condu it might also return ([1 #{2}]) or ([1 [2]]) since the collection type isn&apos;t fixed, and of course the collection doesn&apos;t need to be minimal although that would make sense. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>09:20</h><w>tsdh</w>Well, with <code>condu</code> it might also return <code>([1 #{2}])</code> or <code>([1 [2]])</code> since the collection type isn&apos;t fixed, and of course the collection doesn&apos;t need to be minimal although that would make sense.<div></div></z><z id="t1438075743" t="tsdh Or with a much simpler example: (defn y-or-n [x] (conde [(== x :y)] [(== x :n)])) (run* [x y] (condu [(== x 1) (y-or-n y)] [(== x 2) (== y 3)])) ;;=&gt; ([1 :y] [1 :n]) I had expected to get only ([1 :y]) . Why the second solution? condu should succeed at most once for any goal in the clause it committed to, no? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>09:29</h><w>tsdh</w>Or with a much simpler example:
<pre>(defn y-or-n [x]
  (conde
   [(== x :y)]
   [(== x :n)]))

(run* [x y]
  (condu
   [(== x 1) (y-or-n y)]
   [(== x 2) (== y 3)]))
;;=&gt; ([1 :y] [1 :n])
</pre>
I had expected to get only <code>([1 :y])</code>.  Why the second solution?  <code>condu</code> should succeed at most once for any goal in the clause it committed to, no?<div></div></z><z id="t1438076769" t="tsdh Hm, it works when I swap the two goals in the first clause. So it seems that only the head goal has the once-semantics. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>09:46</h><w>tsdh</w>Hm, it works when I swap the two goals in the first clause.  So it seems that only the head goal has the once-semantics.<div></div></z><z id="t1438089748" t="jballanc tsdh: I implemented FizzBuzz with core.logic (don’t ask), and made use of condu (in the form of defnu ) - https://github.com/jballanc/logicbuzz/blob/master/src/logicbuzz/core.clj#L17 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:22</h><w>jballanc</w>tsdh: I implemented FizzBuzz with core.logic (don’t ask), and made use of <code>condu</code> (in the form of <code>defnu</code>) - <a href="https://github.com/jballanc/logicbuzz/blob/master/src/logicbuzz/core.clj#L17" target="_blank">https://github.com/jballanc/logicbuzz/blob/master/src/logicbuzz/core.clj#L17</a><div></div></z><z id="t1438089958" t="jballanc essentially, as I understand it, you’re building up a tree of solutions: first make the first condition pass, then cycle back and fill in any remaining fresh vars, then make the second condition pass, then cycle back and fill remaining fresh, etc. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:25</h><w>jballanc</w>essentially, as I understand it, you’re building up a tree of solutions: first make the first condition pass, then cycle back and fill in any remaining fresh vars, then make the second condition pass, then cycle back and fill remaining fresh, etc.<div></div></z><z id="t1438089979" t="jballanc with condu , if you can make the first condition pass, then you fill the remaining fresh vars and stop [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:26</h><w>jballanc</w>with <code>condu</code>, if you can make the first condition pass, then you fill the remaining fresh vars and stop<div></div></z><z id="t1438089990" t="jballanc if you can’t, then you try the second, and so on [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:26</h><w>jballanc</w>if you can’t, then you try the second, and so on<div></div></z><z id="t1438090133" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : I think with your fizzbuzzo you can use defna and defnu . Both commit to a clause as soon as the head goal succeeds. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:28</h><w>tsdh</w><a>@jballanc</a>: I think with your <code>fizzbuzzo</code> you can use <code>defna</code> and <code>defnu</code>.  Both commit to a clause as soon as the head goal succeeds.<div></div></z><z id="t1438090153" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : And in your case, x is always ground. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:29</h><w>tsdh</w><a>@jballanc</a>: And in your case, <code>x</code> is always ground.<div></div></z><z id="t1438090214" t="jballanc it’s been a while, but I think I tried defna and didn’t have success... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:30</h><w>jballanc</w>it’s been a while, but I think I tried <code>defna</code> and didn’t have success...<div></div></z><z id="t1438090305" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : The difference with conda /`defna` versus condu /`defnu` only shows up when the head goal of a clause may produce multiple solutions. With the former, all of them are considered, with the latter, only the first one is considered. Thus, some programs which diverge with conda may terminate with condu . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:31</h><w>tsdh</w><a>@jballanc</a>: The difference with <code>conda</code>/`defna` versus <code>condu</code>/`defnu` only shows up when the head goal of a clause may produce multiple solutions. With the former, all of them are considered, with the latter, only the first one is considered. Thus, some programs which diverge with <code>conda</code> may terminate with <code>condu</code>.<div></div></z><z id="t1438090329" t="jballanc hmm…ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:32</h><w>jballanc</w>hmm…ok<div></div></z><z id="t1438090370" t="tsdh At least that&apos;s what I&apos;ve read in W. Byrd&apos;s thesis and validated with experimentation here. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:32</h><w>tsdh</w>At least that&apos;s what I&apos;ve read in W. Byrd&apos;s thesis and validated with experimentation here.<div></div></z><z id="t1438090669" t="jballanc ok, yeah, stated that way I think it matches with what I’ve found in the past [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:37</h><w>jballanc</w>ok, yeah, stated that way I think it matches with what I’ve found in the past<div></div></z><z id="t1438090701" t="jballanc (that FizzBuzz solution was a lot of trial and error to get everything done with only using core.logic ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-28</d><h>13:38</h><w>jballanc</w>(that FizzBuzz solution was a lot of trial and error to get everything done with only using <code>core.logic</code>)<div></div></z><z id="t1438162944" t="tsdh Say you have a unary relation (1to10 n) which unifies n with the 1, 2,... , 10. And say you have two logic variables n1 and n2 both resulting from unification with 1to10 , and you want to express that n1 comes before n2 in 1to10 . Is that possible? (`clojure.core.logic.fd/&lt;` is of course cheating) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-29</d><h>09:42</h><w>tsdh</w>Say you have a unary relation <code>(1to10 n)</code> which unifies <code>n</code> with the 1, 2,... , 10.  And say you have two logic variables <code>n1</code> and <code>n2</code> both resulting from unification with <code>1to10</code>, and you want to express that <code>n1</code> comes before <code>n2</code> in <code>1to10</code>. Is that possible?  (`clojure.core.logic.fd/&lt;` is of course cheating)<div></div></z><z id="t1438185021" t="jballanc When it comes to working with numbers-as-lvars, I think fd is pretty much your only choice [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-29</d><h>15:50</h><w>jballanc</w>When it comes to working with numbers-as-lvars, I think <code>fd</code> is pretty much your only choice<div></div></z><z id="t1438185051" t="jballanc the only other thing I could think of would be to encode them as Church numerals and re-implement basic math as list operations [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-29</d><h>15:50</h><w>jballanc</w>the only other thing I could think of would be to encode them as Church numerals and re-implement basic math as list operations<div></div></z><z id="t1438185111" t="jballanc …hmm…or you could use a range with conso in reverse to trim n2 then check with membero for n1 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-29</d><h>15:51</h><w>jballanc</w>…hmm…or you could use a range with <code>conso</code> in reverse to trim <code>n2</code> then check with <code>membero</code> for <code>n1</code><div></div></z><z id="t1438259839" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : That I&apos;ve used numbers is just for simplicity. The more general question is: if (thingo x) can unify x with both :fork and :spoon , is there a way to tell if x is unified first with :fork and then :spoon or the other way round? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>12:37</h><w>tsdh</w><a>@jballanc</a>: That I&apos;ve used numbers is just for simplicity.  The more general question is: if <code>(thingo x)</code> can unify <code>x</code> with both <code>:fork</code> and <code>:spoon</code>, is there a way to tell if <code>x</code> is unified first with <code>:fork</code> and then <code>:spoon</code> or the other way round?<div></div></z><z id="t1438259995" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Basically, what I am looking for is a way to transform between multiple unifications and a list of the unifications. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>12:39</h><w>tsdh</w><a>@jballanc</a>: Basically, what I am looking for is a way to transform between multiple unifications and a list of the unifications.<div></div></z><z id="t1438263983" t="jballanc tsdh: hmm…if I understand you correctly, I’d be tempted to say that this falls into the category of “implementation detail” in core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:46</h><w>jballanc</w>tsdh: hmm…if I understand you correctly, I’d be tempted to say that this falls into the category of “implementation detail” in <code>core.logic</code><div></div></z><z id="t1438264026" t="jballanc that is, if you have, say: (run* [q] (conde [(== q 1) (== q 2)])) and you want to know did q match 1 first, or 2 first? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:47</h><w>jballanc</w>that is, if you have, say: <code>(run* [q] (conde [(== q 1) (== q 2)]))</code> and you want to know did <code>q</code> match 1 first, or 2 first?<div></div></z><z id="t1438264045" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Exactly. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:47</h><w>tsdh</w><a>@jballanc</a>: Exactly.<div></div></z><z id="t1438264098" t="jballanc yeah…I mean, IIRC the implementation of conde and friends is more-or-less a depth-first tree walk, so unifications should happen in roughly the order they’re provided [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:48</h><w>jballanc</w>yeah…I mean, IIRC the implementation of <code>conde</code> and friends is more-or-less a depth-first tree walk, so unifications should happen in roughly the order they’re provided<div></div></z><z id="t1438264153" t="jballanc …but I think that’s definitely “implementation detail” since, as I understand it, in Will Byrd’s ideal world all mini-Kanren conditions would be relational, i.e. order independent [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:49</h><w>jballanc</w>…but I think that’s definitely “implementation detail” since, as I understand it, in Will Byrd’s ideal world all mini-Kanren conditions would be relational, i.e. order independent<div></div></z><z id="t1438264230" t="jballanc He does a really good job explaining that concept in this podcast: http://www.functionalgeekery.com/episode-9-william-e-byrd/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:50</h><w>jballanc</w>He does a really good job explaining that concept in this podcast: <a href="http://www.functionalgeekery.com/episode-9-william-e-byrd/" target="_blank">http://www.functionalgeekery.com/episode-9-william-e-byrd/</a><div></div></z><z id="t1438264272" t="jballanc So, while it might be possible to hack a solution to get what you want, I think you have to keep in mind that you’d be directly controverting one of the goals of mini-Kanren as a logic system [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:51</h><w>jballanc</w>So, while it might be possible to hack a solution to get what you want, I think you have to keep in mind that you’d be directly controverting one of the goals of mini-Kanren as a logic system<div></div></z><z id="t1438264282" t="jballanc 😕 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:51</h><w>jballanc</w><b>😕</b><div></div></z><z id="t1438264292" t="jballanc (…but I’m far from an expert on the matter) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>13:51</h><w>jballanc</w>(…but I’m far from an expert on the matter)<div></div></z><z id="t1438267491" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Yes, I&apos;m with you in your concrete example. But with your own relations, you can define the order in which things get unified. For example, say you deal with the concepts block and statement in some programming language. Clearly, a block contains statements, and the order of statements in a block does matter. Now you have to choices to model that with relations: 1. (block-has-stmto block stmt) where the relation unifies stmt once for each statement in a concrete block, or 2. (block-has-stmts block stmts) where stmts gets unified with the list of statements in a concrete block. Variant 1 is much nicer to work with in case you don&apos;t care about the order. With variant 2, you have the order but if you don&apos;t care about it, queries become a bit more complicated (basically you need membero goals over the place). [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>14:44</h><w>tsdh</w><a>@jballanc</a>: Yes, I&apos;m with you in your concrete example. But with your own relations, you can define the order in which things get unified. For example, say you deal with the concepts block and statement in some programming language. Clearly, a block contains statements, and the order of statements in a block does matter. Now you have to choices to model that with relations: 1. <code>(block-has-stmto block stmt)</code> where the relation unifies <code>stmt</code> once for each statement in a concrete block, or 2. <code>(block-has-stmts block stmts)</code> where <code>stmts</code> gets unified with the list of statements in a concrete block.  Variant 1 is much nicer to work with in case you don&apos;t care about the order. With variant 2, you have the order but if you don&apos;t care about it, queries become a bit more complicated (basically you need <code>membero</code> goals over the place).<div></div></z><z id="t1438267679" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Well, I guess just providing both versions makes everybody happy, and variant 1 can easily be implemented on top of variant 2. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>14:47</h><w>tsdh</w><a>@jballanc</a>: Well, I guess just providing both versions makes everybody happy, and variant 1 can easily be implemented on top of variant 2.<div></div></z><z id="t1438267740" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : Just the reverse seems to be not so trivial, and of course I started with variant 1. simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>14:49</h><w>tsdh</w><a>@jballanc</a>: Just the reverse seems to be not so trivial, and of course I started with variant 1. <b>simple_smile</b><div></div></z><z id="t1438271186" t="jballanc tsdh: It’s an interesting use-case to be sure. About the only thing I can think of that might make it easier to work with is if you could describe an ordering relationship between the individual statements. Something like: endif must come after if but before enddef …or something like that. I suspect, though, that you’d quickly find yourself implementing a full parser/AST walker. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>15:46</h><w>jballanc</w>tsdh: It’s an interesting use-case to be sure. About the only thing I can think of that might make it easier to work with is if you could describe an ordering relationship between the individual statements. Something like: <code>endif</code> must come after <code>if</code> but before <code>enddef</code>…or something like that. I suspect, though, that you’d quickly find yourself implementing a full parser/AST walker.<div></div></z><z id="t1438271231" t="jballanc …which, to be sure, is definitely an interesting use case. You might be interested to check out Will Byrd’s Quine generator in mini-Kanren, as it has similar-ish elements as I recall. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>15:47</h><w>jballanc</w>…which, to be sure, is definitely an interesting use case. You might be interested to check out Will Byrd’s Quine generator in mini-Kanren, as it has similar-ish elements as I recall.<div></div></z><z id="t1438273091" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : ok, thanks for the pointer [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>16:18</h><w>tsdh</w><a>@jballanc</a>: ok, thanks for the pointer<div></div></z><z id="t1438276628" t="tsdh Another thing: can I define a relation which asserts that some goal succeeds but some other goal fails? I&apos;d be fine with such a must-fail construct was non-relational, that is, only applicable if all logic variables of the goal are ground. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>17:17</h><w>tsdh</w>Another thing: can I define a relation which asserts that some goal succeeds but some other goal fails? I&apos;d be fine with such a must-fail construct was non-relational, that is, only applicable if all logic variables of the goal are ground.<div></div></z><z id="t1438276680" t="tsdh I guess that&apos;s easy to implement myself but probably there&apos;s already something predefined. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>17:18</h><w>tsdh</w>I guess that&apos;s easy to implement myself but probably there&apos;s already something predefined.<div></div></z><z id="t1438277997" t="nberger [:attrs {:href &quot;/_/_/users/U067ACL84&quot;}] I think nafc ( https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2725 ) is what you are looking for. See the tests ( https://github.com/clojure/core.logic/blob/29a46db8a294b29a37d8046fe7ed52be51f126f0/src/test/clojure/clojure/core/logic/tests.clj#L3169 ) for examples [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>17:39</h><w>nberger</w><a>@tsdh</a> I think <code>nafc</code> (<a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2725" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2725</a>) is what you are looking for. See the tests (<a href="https://github.com/clojure/core.logic/blob/29a46db8a294b29a37d8046fe7ed52be51f126f0/src/test/clojure/clojure/core/logic/tests.clj#L3169" target="_blank">https://github.com/clojure/core.logic/blob/29a46db8a294b29a37d8046fe7ed52be51f126f0/src/test/clojure/clojure/core/logic/tests.clj#L3169</a>) for examples<div></div></z><z id="t1438278128" t="tsdh [:attrs {:href &quot;/_/_/users/U067S6YLW&quot;}] : great, thank you! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>17:42</h><w>tsdh</w><a>@nberger</a>: great, thank you!<div></div></z><z id="t1438278250" t="nberger [:attrs {:href &quot;/_/_/users/U067ACL84&quot;}] : you are welcome [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-30</d><h>17:44</h><w>nberger</w><a>@tsdh</a>: you are welcome<div></div></z><z id="t1438326727" t="tsdh Hm, can anyone explain this? (run* [q] (fresh [a b] (== q (list a b)) (fd/in a b (fd/interval 1 3)) (fd/&lt; a b) (nafc membero 2 q))) ;=&gt; ((1 2) (2 3) (1 3)) The negation as failure constraint is supposed to ensure that 2 is not a member of the list q , so I expected to get only the solution (1 3) ... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>07:12</h><w>tsdh</w>Hm, can anyone explain this?
<pre>(run* [q]
  (fresh [a b]
    (== q (list a b))
    (fd/in a b (fd/interval 1 3))
    (fd/&lt; a b)
    (nafc membero 2 q)))
;=&gt; ((1 2) (2 3) (1 3))
</pre>
The negation as failure constraint is supposed to ensure that 2 is not a member of the list <code>q</code>, so I expected to get only the solution <code>(1 3)</code>...<div></div></z><z id="t1438327024" t="tsdh It works if I replace the constraint with (nafc == a 2) (nafc == b 2) or (!= a 2) (!= b 2) but that gets cumbersome if the length of the list collection is long or even unknown... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>07:17</h><w>tsdh</w>It works if I replace the constraint with <code>(nafc == a 2) (nafc == b 2)</code> or <code>(!= a 2) (!= b 2)</code> but that gets cumbersome if the length of the list collection is long or even unknown...<div></div></z><z id="t1438327672" t="tsdh Well, I think this is a bug so I&apos;ve reported it: http://dev.clojure.org/jira/browse/LOGIC-172 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>07:27</h><w>tsdh</w>Well, I think this is a bug so I&apos;ve reported it: <a href="http://dev.clojure.org/jira/browse/LOGIC-172" target="_blank">http://dev.clojure.org/jira/browse/LOGIC-172</a><div></div></z><z id="t1438328227" t="tsdh Hm, it seems the problem only occurs stuff unified by clojure.core.logic.fd relations... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>07:37</h><w>tsdh</w>Hm, it seems the problem only occurs stuff unified by <code>clojure.core.logic.fd</code> relations...<div></div></z><z id="t1438356048" t="nberger [:attrs {:href &quot;/_/_/users/U067ACL84&quot;}] it&apos;s not an issue with fd, but it&apos;s because a and b are not ground. nafc works only on grounded terms [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:20</h><w>nberger</w><a>@tsdh</a> it&apos;s not an issue with fd, but it&apos;s because <code>a</code> and <code>b</code> are not ground. <code>nafc</code> works only on grounded terms<div></div></z><z id="t1438356132" t="nberger So the following does what you expected: (run* [q] (fresh [a b] (== q (list a b)) (fd/in a b (fd/interval 1 3)) (fd/&lt; a b) (== a 1) (== b 2) (l/nafc l/membero 2 q))) ;=&gt; () [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:22</h><w>nberger</w>So the following does what you expected:

<pre>(run* [q]
        (fresh [a b]
               (== q (list a b))
               (fd/in a b (fd/interval 1 3))
               (fd/&lt; a b)
               (== a 1)
               (== b 2)
               (l/nafc l/membero 2 q)))
;=&gt; ()
</pre><div></div></z><z id="t1438356225" t="nberger while the following doesn&apos;t: (run* [q] (fresh [a b] (== q (list a b)) (fd/in a b (fd/interval 1 3)) (fd/&lt; a b) (== a 1) (l/nafc l/membero 2 q) (== b 2))) ;=&gt; ((1 2)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:23</h><w>nberger</w>while the following doesn&apos;t:

<pre>(run* [q]
        (fresh [a b]
               (== q (list a b))
               (fd/in a b (fd/interval 1 3))
               (fd/&lt; a b)
               (== a 1)
               (l/nafc l/membero 2 q)
               (== b 2)))
;=&gt; ((1 2))
</pre><div></div></z><z id="t1438356287" t="nberger in the second example, b is not ground for the nafc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:24</h><w>nberger</w>in the second example, <code>b</code> is not ground for the <code>nafc</code><div></div></z><z id="t1438356550" t="nberger a smaller example: (run* [q] (membero q [1 2]) (nafc membero 2 q)) ;=&gt; (1 2) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:29</h><w>nberger</w>a smaller example:

<pre>(run* [q]
        (membero q [1 2])
        (nafc membero 2 q))
  ;=&gt; (1 2)
</pre><div></div></z><z id="t1438357675" t="nberger One way to accomplish what you were trying: (run* [q] (fresh [a b] (== q (list a b)) (fd/in a b (fd/interval 1 3)) (fd/&lt; a b) (everyg #(!= 2 %) q))) ;=&gt; ((1 3)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:47</h><w>nberger</w>One way to accomplish what you were trying:

<pre>(run* [q]
    (fresh [a b]
      (== q (list a b))
      (fd/in a b (fd/interval 1 3))
      (fd/&lt; a b)
      (everyg #(!= 2 %) q)))
  ;=&gt; ((1 3))
</pre><div></div></z><z id="t1438357699" t="nberger And if you have an arbitrary number of vars: (let [vars (map lvar (range 4))] (run* [q] (== q vars) (everyg #(fd/in % (fd/interval 1 6)) vars) (everyg #(apply fd/&lt; %) (partition 2 1 vars)) (everyg #(!= 2 %) q))) ;=&gt; ((1 3 4 5) (3 4 5 6) (1 4 5 6) (1 3 5 6) (1 3 4 6)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>15:48</h><w>nberger</w>And if you have an arbitrary number of vars:

<pre>(let [vars (map lvar (range 4))]
    (run* [q]
      (== q vars)
      (everyg #(fd/in % (fd/interval 1 6)) vars)
      (everyg #(apply fd/&lt; %) (partition 2 1 vars))
      (everyg #(!= 2 %) q)))
  ;=&gt; ((1 3 4 5) (3 4 5 6) (1 4 5 6) (1 3 5 6) (1 3 4 6))
</pre><div></div></z><z id="t1438359182" t="tsdh [:attrs {:href &quot;/_/_/users/U067S6YLW&quot;}] : But the nafc docs say that if the vars aren&apos;t ground, the evaluation of the constraint will be deferred. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:13</h><w>tsdh</w><a>@nberger</a>: But the <code>nafc</code> docs say that if the vars aren&apos;t ground, the evaluation of the constraint will be deferred.<div></div></z><z id="t1438359349" t="tsdh ...which I read as &quot;it should work also for fresh vars where the actual check is deferred until the point where all vars are ground.&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:15</h><w>tsdh</w>...which I read as &quot;it should work also for fresh vars where the actual check is deferred until the point where all vars are ground.&quot;<div></div></z><z id="t1438359646" t="tsdh I think your smaller example is wrong. q takes the values 1 and 2, and of course (membero 2 1) and (membero 2 2) fail. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:20</h><w>tsdh</w>I think your smaller example is wrong.  <code>q</code> takes the values 1 and 2, and of course <code>(membero 2 1)</code> and <code>(membero 2 2)</code> fail.<div></div></z><z id="t1438359729" t="tsdh Probably you meant this: (run* [q] (== q [1 2]) (nafc membero 2 q)) ;=&gt; () which actually gives the right answer. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:22</h><w>tsdh</w>Probably you meant this:
<pre>(run* [q]
        (== q [1 2])
        (nafc membero 2 q))
;=&gt; ()
</pre>
which actually gives the right answer.<div></div></z><z id="t1438360208" t="nberger Yes, sorry, my example was wrong, so nafc is doing fine in that case. And reading again, I agree, deferred evaluation should do what you said [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:30</h><w>nberger</w>Yes, sorry, my example was wrong, so nafc is doing fine in that case. And reading again, I agree, deferred evaluation should do what you said<div></div></z><z id="t1438360902" t="tsdh Well, we&apos;ll see if someone with more knowledge on the implementation comments on the JIRA issue. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:41</h><w>tsdh</w>Well, we&apos;ll see if someone with more knowledge on the implementation comments on the JIRA issue.<div></div></z><z id="t1438360926" t="nberger yep simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-07-31</d><h>16:42</h><w>nberger</w>yep <b>simple_smile</b><div></div></z><z id="t1438587136" t="tsdh nafc delays evaluation somehow until the args to the goal became ground. Is there some generic support for this delaying? I looked at the implementation but, well, didn&apos;t really get a clue. Maybe cgoal is the essence of it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>07:32</h><w>tsdh</w><code>nafc</code> delays evaluation somehow until the args to the goal became ground. Is there some generic support for this delaying?  I looked at the implementation but, well, didn&apos;t really get a clue.  Maybe <code>cgoal</code> is the essence of it.<div></div></z><z id="t1438587245" t="tsdh But in my actual use-case, I don&apos;t have a constraint but a relation (foo a b c) which requires that at least a and b , or c are ground. It would be nice if I could delay that until that is the case. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>07:34</h><w>tsdh</w>But in my actual use-case, I don&apos;t have a constraint but a relation <code>(foo a b c)</code> which requires that at least <code>a</code> and <code>b</code>, or <code>c</code> are ground.  It would be nice if I could delay that until that is the case.<div></div></z><z id="t1438612194" t="jballanc [:attrs {:href &quot;/_/_/users/U067ACL84&quot;}] : I think it’s in the IConstraintStep reification: IRunnable (-runnable? [_] (every? #(ground-term? % s) args)))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>14:29</h><w>jballanc</w><a>@tsdh</a>: I think it’s in the <code>IConstraintStep</code> reification:
<pre>IRunnable
           (-runnable? [_]
             (every? #(ground-term? % s) args))))
</pre><div></div></z><z id="t1438612198" t="jballanc https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2711 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>14:29</h><w>jballanc</w><a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2711" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2711</a><div></div></z><z id="t1438612370" t="tsdh [:attrs {:href &quot;/_/_/users/U0561MZLJ&quot;}] : That&apos;s probably it. I&apos;ll tinker around with that if I find some time. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>14:32</h><w>tsdh</w><a>@jballanc</a>: That&apos;s probably it.  I&apos;ll tinker around with that if I find some time.<div></div></z><z id="t1438612373" t="tsdh Thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>14:32</h><w>tsdh</w>Thanks<div></div></z><z id="t1438612378" t="jballanc np [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-03</d><h>14:32</h><w>jballanc</w>np<div></div></z><z id="t1440312821" t="nblumoe Hey, I am dabbling in core.logic. Playing with some naive ideas like the following, which shows some weird behavior (see the indicated return values from the solver): [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>06:53</h><w>nblumoe</w>Hey, I am dabbling in core.logic. Playing with some naive ideas like the following, which shows some weird behavior (see the indicated return values from the solver):<div></div></z><z id="t1440312825" t="nblumoe (defn sub-string? [s sub] (boolean (re-find (re-pattern sub) s))) (sub-string? &quot;123&quot; &quot;3&quot;) ;=&gt; true (sub-string? &quot;123&quot; &quot;4&quot;) ;=&gt; false (l/run* [q] (l/membero q (range 200 1000 12)) (l/== (sub-string? (str q) &quot;9&quot;) true)) ; randomly (?) returns either () or all the matches from the first logical ; expression, ignoring the second one [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>06:53</h><w>nblumoe</w><pre>(defn sub-string? [s sub]
  (boolean (re-find (re-pattern sub) s)))

(sub-string? &quot;123&quot; &quot;3&quot;)
;=&gt; true

(sub-string? &quot;123&quot; &quot;4&quot;)
;=&gt; false

(l/run* [q]
  (l/membero q (range 200 1000 12))
  (l/== (sub-string? (str q) &quot;9&quot;) true))
; randomly (?) returns either () or all the matches from the first logical
; expression, ignoring the second one
</pre><div></div></z><z id="t1440313021" t="nblumoe I guess I am doing something wrong with using a regular function in the logical expression. but how would I make such a thing work? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>06:57</h><w>nblumoe</w>I guess I am doing something wrong with using a regular function in the logical expression. but how would I make such a thing work?<div></div></z><z id="t1440328621" t="nblumoe The string representation of q is probably not representing it&apos;s value. But how to check for q &apos;s value then? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>11:17</h><w>nblumoe</w>The string representation of <code>q</code> is probably not representing it&apos;s value. But how to check for <code>q</code>&apos;s value then?<div></div></z><z id="t1440330911" t="nberger q is an lvar. You could use pred to &quot; Check a predicate against the value logic var.&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>11:55</h><w>nberger</w><code>q</code> is an lvar. You could use <code>pred</code> to &quot; Check a predicate against the value logic var.&quot;<div></div></z><z id="t1440330990" t="nberger https://clojure.github.io/core.logic/#clojure.core.logic/pred [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>11:56</h><w>nberger</w><a href="https://clojure.github.io/core.logic/#clojure.core.logic/pred" target="_blank">https://clojure.github.io/core.logic/#clojure.core.logic/pred</a><div></div></z><z id="t1440343075" t="nblumoe hm, thanks [:attrs {:href &quot;/_/_/users/U067S6YLW&quot;}] . this seemed to be pointing in the right direction. I could not make it work with (str q) but at least with comparing q as an int like #(= % 224) . However, I made an odd observation. Why is the result dependent on the order of logical expressions in these two cases: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:17</h><w>nblumoe</w>hm, thanks <a>@nberger</a>. this seemed to be pointing in the right direction. I could not make it work with <code>(str q)</code> but at least with comparing <code>q</code> as an int like <code>#(= % 224)</code>. However, I made an odd observation. Why is the result dependent on the order of logical expressions in these two cases:<div></div></z><z id="t1440343086" t="nblumoe (l/run* [q] (l/project [q] (l/== q 224)) (l/pred q #(= % 224)) (l/membero q (range 200 1000 12))) ; =&gt; (224) (l/run* [q] (l/pred q #(= % 224)) (l/project [q] (l/== q 224)) (l/membero q (range 200 1000 12))) ; =&gt; () [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:18</h><w>nblumoe</w><pre>(l/run* [q]
  (l/project [q] (l/== q 224))
  (l/pred q #(=  % 224))
  (l/membero q (range 200 1000 12)))
; =&gt; (224)

(l/run* [q]
  (l/pred q #(=  % 224))
  (l/project [q] (l/== q 224))
  (l/membero q (range 200 1000 12)))
; =&gt; ()
</pre><div></div></z><z id="t1440343103" t="nblumoe Is that expected?? &lt;!channel&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:18</h><w>nblumoe</w>Is that expected?? &lt;!channel&gt;<div></div></z><z id="t1440344109" t="bhagany [:attrs {:href &quot;/_/_/users/U066HBF6J&quot;}] : I am a complete noob at this, so this will likely get corrected, but - I think your anonymous function assumes that q is ground. Here, == grounds q before the anonymous function in example 1, but not in example 2. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:35</h><w>bhagany</w><a>@nblumoe</a>: I am a complete noob at this, so this will likely get corrected, but - I think your anonymous function assumes that q is ground. Here, == grounds q before the anonymous function in example 1, but not in example 2. <div></div></z><z id="t1440344215" t="bhagany iirc, the order dependence is kind of an implementation detail, but it does leak in cases like this. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:36</h><w>bhagany</w>iirc, the order dependence is kind of an implementation detail, but it does leak in cases like this. <div></div></z><z id="t1440344722" t="nblumoe cool, thanks [:attrs {:href &quot;/_/_/users/U051706GF&quot;}] . was able to get my initial idea working now: (l/run* [q] (l/membero q (range 200 1000 12)) (l/pred q #(sub-string? (str %) &quot;9&quot;))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:45</h><w>nblumoe</w>cool, thanks <a>@bhagany</a>. was able to get my initial idea working now:
<pre>(l/run* [q]
  (l/membero q (range 200 1000 12))
  (l/pred q #(sub-string? (str %) &quot;9&quot;)))
</pre><div></div></z><z id="t1440344815" t="nblumoe Is there some kind of idiomatic way to make this order dependence explicit? Or is it just an issue for me because of my dangerous lack of knowledge about logic programming? 😄 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>15:46</h><w>nblumoe</w>Is there some kind of idiomatic way to  make this order dependence explicit? Or is it just an issue for me because of my dangerous lack of knowledge about logic programming? <b>😄</b><div></div></z><z id="t1440346077" t="bhagany [:attrs {:href &quot;/_/_/users/U066HBF6J&quot;}] : I&apos;m not aware of any idiom ... My instinct is to avoid things that depend on order, but I also haven&apos;t really internalized the kind of thinking necessary for logic programs :) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:07</h><w>bhagany</w><a>@nblumoe</a>: I&apos;m not aware of any idiom ... My instinct is to avoid things that depend on order, but I also haven&apos;t really internalized the kind of thinking necessary for logic programs :)<div></div></z><z id="t1440346115" t="bhagany I just hang out here hoping to absorb useful things [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:08</h><w>bhagany</w>I just hang out here hoping to absorb useful things <div></div></z><z id="t1440348513" t="nberger Yeah, many things depend on order... There&apos;s not much to do about that except knowing the exact semantics of each constraint, which is not trivial if your name isn&apos;t David :P [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:48</h><w>nberger</w>Yeah, many things depend on order... There&apos;s not much to do about that except knowing the exact semantics of each constraint, which is not trivial if your name isn&apos;t David :P<div></div></z><z id="t1440348608" t="nberger I now found that predc might be better than pred because it will delay evaluation if the var is not ground, like in the second of your two examples [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:50</h><w>nberger</w>I now found that <code>predc</code> might be better than <code>pred</code> because it will delay evaluation if the var is not ground, like in the second of your two examples<div></div></z><z id="t1440348642" t="nberger Haven&apos;t tried it tho because I&apos;m not close to a computer now [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:50</h><w>nberger</w>Haven&apos;t tried it tho because I&apos;m not close to a computer now<div></div></z><z id="t1440348685" t="nberger ^^^ [:attrs {:href &quot;/_/_/users/U066HBF6J&quot;}] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:51</h><w>nberger</w>^^^ <a>@nblumoe</a><div></div></z><z id="t1440348939" t="nberger The problem in the second example is that q is not ground yet, so it&apos;s an lvar when the predicate is evaluated... And an lvar is never equal to 224 . In the first example it was already unified with 224 on the first constraint, so by the time of the second constraint it&apos;s grounded to 224 , which is course is equal to 224 :) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:55</h><w>nberger</w>The problem in the second example is that q is not ground yet, so it&apos;s an <code>lvar</code> when the predicate is evaluated... And an lvar is never equal to <code>224</code>. In the first example it was already unified with <code>224</code> on the first constraint, so by the time of the second constraint it&apos;s grounded to <code>224</code>, which is course is equal to <code>224</code> :)<div></div></z><z id="t1440349042" t="nberger Perhaps I just said the same as [:attrs {:href &quot;/_/_/users/U051706GF&quot;}] did, but using more words :/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>16:57</h><w>nberger</w>Perhaps I just said the same as <a>@bhagany</a> did, but using more words :/<div></div></z><z id="t1440349676" t="nblumoe (l/run 3 [q] (l/predc q #(boolean (re-find #&quot;9&quot; (str %)))) (l/membero q (range 200 1000 12))) ; =&gt; (296 392 596) 👍 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>17:07</h><w>nblumoe</w><pre>(l/run 3 [q]
  (l/predc q #(boolean (re-find #&quot;9&quot; (str %))))
  (l/membero q (range 200 1000 12)))
; =&gt; (296 392 596)
</pre>
<b>👍</b><div></div></z><z id="t1440351083" t="nberger Cool simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-23</d><h>17:31</h><w>nberger</w>Cool <b>simple_smile</b><div></div></z><z id="t1440375207" t="dmich [:attrs {:href &quot;/_/_/users/U066HBF6J&quot;}] : It is VERY bad etiquette to use (AT)channel. Everyone in channel gets notified! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>00:13</h><w>dmich</w><a>@nblumoe</a>: It is VERY bad etiquette to use  (AT)channel. Everyone in channel gets notified!<div></div></z><z id="t1440375216" t="dmich very annoying [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>00:13</h><w>dmich</w>very annoying<div></div></z><z id="t1440412798" t="nblumoe yes you are right [:attrs {:href &quot;/_/_/users/U066L6JN9&quot;}] , sorry. it&apos;s just annoying that we run into the 10k message limit so quickly. so if no one reads it on time, it&apos;s lost. also I think who does not want to be pinged would disable it. but to be sure: I fully understand, won&apos;t ping the channel anymore [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:39</h><w>nblumoe</w>yes you are right <a>@dmich</a>, sorry. it&apos;s just annoying that we run into the 10k message limit so quickly. so if no one reads it on time, it&apos;s lost. also I think who does not want to be pinged would disable it. but to be sure: I fully understand, won&apos;t ping the channel anymore<div></div></z><z id="t1440412908" t="nblumoe I do have another question though. how can I simplify the following small logic program? (def talents [{:email &quot; The logic seems to be right, I want to get all talents, that have at least one application with status :active . But the usage of project is quite verbose. Is there a way to make this whole thing more concise? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:41</h><w>nblumoe</w>I do have another question though. how can I simplify the following small logic program?
<pre>(def talents
  [{:email &quot;</pre>
The logic seems to be right, I want to get all talents, that have at least one application with status <code>:active</code>. But the usage of <code>project</code> is quite verbose. Is there a way to make this whole thing more concise?<div></div></z><z id="t1440413248" t="nblumoe Okay, I got this now. Already a bit better: (defn active-talents [talents] (l/run* [q] (l/fresh [candidate candidates application applications] (l/membero q talents) (l/featurec q {:candidates candidates}) (l/membero candidate candidates) (l/featurec candidate {:applications applications}) (l/membero application applications) (l/featurec application {:status :active})))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:47</h><w>nblumoe</w>Okay, I got this now. Already a bit better:
<pre>(defn active-talents
  [talents]
  (l/run* [q]
    (l/fresh [candidate candidates application applications]
      (l/membero q talents)
      (l/featurec q {:candidates candidates})
      (l/membero candidate candidates)
      (l/featurec candidate {:applications applications})
      (l/membero application applications)
      (l/featurec application {:status :active}))))
</pre><div></div></z><z id="t1440413255" t="dmich [:attrs {:href &quot;/_/_/users/U066HBF6J&quot;}] : There are actually logs for this entire Slack team. See http://clojurians-log.mantike.pro/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:47</h><w>dmich</w><a>@nblumoe</a>: There are actually logs for this entire Slack team. See <a href="http://clojurians-log.mantike.pro/" target="_blank">http://clojurians-log.mantike.pro/</a><div></div></z><z id="t1440413275" t="dmich (Though I don&apos;t know how many people bother to read the back logs) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:47</h><w>dmich</w>(Though I don&apos;t know how many people bother to read the back logs)<div></div></z><z id="t1440413310" t="nblumoe [:attrs {:href &quot;/_/_/users/U066L6JN9&quot;}] , true. But I would assume no one goes to the logs to check if there were any missed questions, but only if one already knows that there is something on the logs one would like to pick up. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:48</h><w>nblumoe</w><a>@dmich</a>, true. But I would assume no one goes to the logs to check if there were any missed questions, but only if one already knows that there is something on the logs one would like to pick up.<div></div></z><z id="t1440413522" t="dmich Also, some people (not me), are set up to have a text message sent to their phone when notified in a Slack channel. And on more popular channels you can really see the hate that is invoked when someone abuses the here command let alone the channel command 😛 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:52</h><w>dmich</w>Also, some people (not me), are set up to have a text message sent to their phone when notified in a Slack channel. And on more popular channels you can really see the hate that is invoked when someone abuses the <code>here</code> command let alone the <code>channel</code> command <b>😛</b><div></div></z><z id="t1440413552" t="dmich So best practice is, if you don&apos;t eventually get an answer, ask again. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:52</h><w>dmich</w>So best practice is, if you don&apos;t eventually get an answer, ask again.<div></div></z><z id="t1440413686" t="nblumoe yeah, yeah. I know. It&apos;s an recurring issue with the notifications. I am good in ignoring selectively, but I understand others like to use this differently. I think flowdock&apos;s (at)team mentions are a good idea. As I would never expect anything urgent to happen on the Clojurians slack channels (like &quot;WTF, were did production go?&quot;) I don&apos;t see a need for this here though. But anyways, sorry again and back to topic. Maybe you have an idea about my too verbose code above? simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:54</h><w>nblumoe</w>yeah, yeah. I know. It&apos;s an recurring issue with the notifications. I am good in ignoring selectively, but I understand others like to use this differently. I think flowdock&apos;s (at)team mentions are a good idea. As I would never expect anything urgent to happen on the Clojurians slack channels (like &quot;WTF, were did production go?&quot;) I don&apos;t see a need for this here though. But anyways, sorry again and back to topic. Maybe you have an idea about my too verbose code above? <b>simple_smile</b><div></div></z><z id="t1440413908" t="dmich Haha. sorry. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:58</h><w>dmich</w>Haha. sorry.<div></div></z><z id="t1440413922" t="dmich I am in this channel just to see what core-logic is all about. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:58</h><w>dmich</w>I am in this channel just to see what core-logic is all about.<div></div></z><z id="t1440413935" t="dmich You might have more luck in #C03S1KBA2 channel. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:58</h><w>dmich</w>You might have more luck in #C03S1KBA2 channel.<div></div></z><z id="t1440413944" t="dmich Also the Clojure IRC channel is VERY active [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:59</h><w>dmich</w>Also the Clojure IRC channel is VERY active<div></div></z><z id="t1440413965" t="dmich moreso than the slack channel [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:59</h><w>dmich</w>moreso than the slack channel<div></div></z><z id="t1440413995" t="dmich There have only been very few messages in this channel [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>10:59</h><w>dmich</w>There have only been very few messages in this channel<div></div></z><z id="t1440414089" t="dmich Yours was like only the second one this month [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-08-24</d><h>11:01</h><w>dmich</w>Yours was like only the second one this month<div></div></z><z id="t1444252325" t="jetzajac Hello everyone! Does anybody know if there is any constraint on type of the value? How can I assert that something is a symbol or number? miniKanren has such symbolo and numbero constraint but I can&apos;t find them in CL. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-07</d><h>21:12</h><w>jetzajac</w>Hello everyone! Does anybody know if there is any constraint on type of the value? How can I assert that something is a symbol or number? miniKanren has such symbolo and numbero constraint but I can&apos;t find them in CL.<div></div></z><z id="t1444738654" t="algernon [:attrs {:href &quot;/_/_/users/U0A405X8B&quot;}] : (project) can help: user=&gt; (run* [q] (conde [(== q 1)] [(== q &quot;foobar&quot;)]) (project [q] (== (type q) Long))) (1) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-13</d><h>12:17</h><w>algernon</w><a>@jetzajac</a>:  (project) can help: user=&gt; (run* [q] (conde [(== q 1)] [(== q &quot;foobar&quot;)]) (project [q] (== (type q) Long)))
(1)<div></div></z><z id="t1444738670" t="algernon mind you, project is non-relational [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-13</d><h>12:17</h><w>algernon</w>mind you, project is non-relational<div></div></z><z id="t1444738715" t="jetzajac yeah, that&apos;s kind of solution but I need a relational version of it if I want to write some interpreter. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-13</d><h>12:18</h><w>jetzajac</w>yeah, that&apos;s kind of solution but I need a relational version of it if I want to write some interpreter.<div></div></z><z id="t1444738772" t="jetzajac Actually I found [:attrs {:href &quot;/_/_/users/U050B88UR&quot;}] version of it here https://github.com/webyrd/symbolo-numbero-tests-for-core-logic/blob/master/symbolo/src/symbolo/core.clj [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-13</d><h>12:19</h><w>jetzajac</w>Actually I found <a>@dnolen</a>  version of it here <a href="https://github.com/webyrd/symbolo-numbero-tests-for-core-logic/blob/master/symbolo/src/symbolo/core.clj" target="_blank">https://github.com/webyrd/symbolo-numbero-tests-for-core-logic/blob/master/symbolo/src/symbolo/core.clj</a><div></div></z><z id="t1444738839" t="jetzajac Thus I&apos;m not sure why it&apos;s not in the library then [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-13</d><h>12:20</h><w>jetzajac</w>Thus I&apos;m not sure why it&apos;s not in the library then<div></div></z><z id="t1445981888" t="jeremyraines is there anywhere that explains core.logic pattern matching well? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:38</h><w>jeremyraines</w>is there anywhere that explains core.logic pattern matching well?<div></div></z><z id="t1445981908" t="jeremyraines I can’t make sense of the zebras example here: https://github.com/swannodette/logic-tutorial [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:38</h><w>jeremyraines</w>I can’t make sense of the zebras example here: <a href="https://github.com/swannodette/logic-tutorial" target="_blank">https://github.com/swannodette/logic-tutorial</a><div></div></z><z id="t1445982438" t="nberger [:attrs {:href &quot;/_/_/users/U050R08D8&quot;}] : Perhaps there&apos;s something better, but this might help: http://objectcommando.com/blog/2011/10/13/appendo-the-great/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:47</h><w>nberger</w><a>@jeremyraines</a>: Perhaps there&apos;s something better, but this might help: <a href="http://objectcommando.com/blog/2011/10/13/appendo-the-great/" target="_blank">http://objectcommando.com/blog/2011/10/13/appendo-the-great/</a><div></div></z><z id="t1445982603" t="jeremyraines thanks, I’ll check it out [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:50</h><w>jeremyraines</w>thanks, I’ll check it out<div></div></z><z id="t1445982765" t="nberger [:attrs {:href &quot;/_/_/users/U050R08D8&quot;}] : just to be clear, it will help mostly in understanding righto , not the rest [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:52</h><w>nberger</w><a>@jeremyraines</a>: just to be clear, it will help mostly in understanding <code>righto</code>, not the rest<div></div></z><z id="t1445982933" t="jeremyraines ok, cool [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>21:55</h><w>jeremyraines</w>ok, cool<div></div></z><z id="t1445983370" t="jeremyraines are the ?-prefixed variables logic variables? Like a named _ ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>22:02</h><w>jeremyraines</w>are the ?-prefixed variables logic variables?  Like a named _ ?<div></div></z><z id="t1445983456" t="nberger They are logic vars there, yes [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>22:04</h><w>nberger</w>They are logic vars there, yes<div></div></z><z id="t1445983491" t="nberger I think it&apos;s just a convention, and they would be vars even without the ? , but not sure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>22:04</h><w>nberger</w>I think it&apos;s just a convention, and they would be vars even without the <code>?</code>, but not sure<div></div></z><z id="t1445983584" t="jeremyraines oh, got it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-27</d><h>22:06</h><w>jeremyraines</w>oh, got it.<div></div></z><z id="t1446056843" t="jeremyraines what’s the right way to iterate over a bunch of lvars and apply separate constraints to each of them? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-28</d><h>18:27</h><w>jeremyraines</w>what’s the right way to iterate over a bunch of lvars and apply separate constraints to each of them?<div></div></z><z id="t1446056891" t="jeremyraines I’m trying this: (map constrain-item lvars my-constraints) with no luck [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-28</d><h>18:28</h><w>jeremyraines</w>I’m trying this:  <code>(map constrain-item  lvars  my-constraints)</code> with no luck<div></div></z><z id="t1446057054" t="jeremyraines separate goals, I should say [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-28</d><h>18:30</h><w>jeremyraines</w>separate goals, I should say<div></div></z><z id="t1446057457" t="jeremyraines looks like I just needed to pass the resulting list of goals to and* [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-10-28</d><h>18:37</h><w>jeremyraines</w>looks like I just needed to pass the resulting list of goals to <code>and*</code><div></div></z><z id="t1446564408" t="thomas hi [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-03</d><h>15:26</h><w>thomas</w>hi<div></div></z><z id="t1446564470" t="thomas just a quick question... how actively is core.logic still developed these days.... the github repo seems to quiet. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-03</d><h>15:27</h><w>thomas</w>just a quick question... how actively is core.logic still developed these days.... the github repo seems to quiet.<div></div></z><z id="t1446584669" t="dnolen [:attrs {:href &quot;/_/_/users/U052852ES&quot;}] not very active, I’m too busy with ClojureScript stuff these days [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-03</d><h>21:04</h><w>dnolen</w><a>@thomas</a> not very active, I’m too busy with ClojureScript stuff these days<div></div></z><z id="t1446584684" t="dnolen happy to see people take it up and push it along - I definitely have a massive list of todos [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-03</d><h>21:04</h><w>dnolen</w>happy to see people take it up and push it along - I definitely have a massive list of todos<div></div></z><z id="t1446648099" t="thomas [:attrs {:href &quot;/_/_/users/U050B88UR&quot;}] : ok thank you for letting us know. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>14:41</h><w>thomas</w><a>@dnolen</a>:  ok thank you for letting us know.<div></div></z><z id="t1446648154" t="dnolen that’s said what’s there works perfectly fine [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>14:42</h><w>dnolen</w>that’s said what’s there works perfectly fine<div></div></z><z id="t1446648196" t="dnolen esp. the core miniKanren bits [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>14:43</h><w>dnolen</w>esp. the core miniKanren bits<div></div></z><z id="t1446649771" t="thomas cheers [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>15:09</h><w>thomas</w>cheers<div></div></z><z id="t1446654992" t="jano [:attrs {:href &quot;/_/_/users/U050B88UR&quot;}] can you give a pointer to the todo list? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>16:36</h><w>jano</w><a>@dnolen</a> can you give a pointer to the todo list?<div></div></z><z id="t1446657378" t="dnolen fix up CLP(FD), port to ClojureScript [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:16</h><w>dnolen</w>fix up CLP(FD), port to ClojureScript<div></div></z><z id="t1446657385" t="dnolen that would be the immediate todos [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:16</h><w>dnolen</w>that would be the immediate todos<div></div></z><z id="t1446657390" t="dnolen ideally convert to .cljc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:16</h><w>dnolen</w>ideally convert to .cljc<div></div></z><z id="t1446657425" t="dnolen after that would be to enhance CLP(FD) to be less naive [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:17</h><w>dnolen</w>after that would be to enhance CLP(FD) to be less naive<div></div></z><z id="t1446657443" t="dnolen we should implement the algorithms used by Mozart for CLP(FD) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:17</h><w>dnolen</w>we should implement the algorithms used by Mozart for CLP(FD)<div></div></z><z id="t1446657606" t="dnolen environment trimming would also be another big one [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:20</h><w>dnolen</w>environment trimming would also be another big one<div></div></z><z id="t1446657617" t="dnolen then you could use core.logic for fun simple parsing tasks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2015-11-04</d><h>17:20</h><w>dnolen</w>then you could use core.logic for fun simple parsing tasks<div></div></z><z id="t1458941412" t="lvh Is there some code that already exists that finds free (logic, although perhaps that doesn’t really matter) in a quoted logic program? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>21:30</h><w>lvh</w>Is there some code that already exists that finds free (logic, although perhaps that doesn’t really matter) in a quoted logic program?<div></div></z><z id="t1458941425" t="lvh (I’m writing some code that generates logic programs.) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>21:30</h><w>lvh</w>(I’m writing some code that generates logic programs.)<div></div></z><z id="t1458944867" t="hiredman that could be very challenging depending on how thorough you want it to be, have you considered including that information with the code you generate? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:27</h><w>hiredman</w>that could be very challenging depending on how thorough you want it to be, have you considered including that information with the code you generate?<div></div></z><z id="t1458944925" t="hiredman for arbitrary core.logic programs I think you would need to analyze arbitrary clojure forms for free variables (which tools.analyzer may have something you can use) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:28</h><w>hiredman</w>for arbitrary core.logic programs I think you would need to analyze arbitrary clojure forms for free variables (which tools.analyzer may have something you can use)<div></div></z><z id="t1458945014" t="hiredman but since you control the generator, it isn&apos;t really arbitrary core.logic programs, so you can restrict the generator to a subset and only analyze the subset, and once you are tinkering with the generator, it may be easier to sort of build that information up in the generated programs vs analyzing the generated programs to recover it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:30</h><w>hiredman</w>but since you control the generator, it isn&apos;t really arbitrary core.logic programs, so you can restrict the generator to a subset and only analyze the subset, and once you are tinkering with the generator, it may be easier to sort of build that information up in the generated programs vs analyzing the generated programs to recover it<div></div></z><z id="t1458945238" t="lvh Yeah; that’s the problem I ran into trying to do this as well [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:33</h><w>lvh</w>Yeah; that’s the problem I ran into trying to do this as well<div></div></z><z id="t1458945249" t="lvh (the source query language is not core.logic; it compiles down to core.logic) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:34</h><w>lvh</w>(the source query language is not core.logic; it compiles down to core.logic)<div></div></z><z id="t1458945254" t="lvh I ended up doing metadata annotation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:34</h><w>lvh</w>I ended up doing metadata annotation<div></div></z><z id="t1458945266" t="lvh (see first hunks of https://github.com/RackSec/desdemona/pull/111/files if you’re interested) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:34</h><w>lvh</w>(see first hunks of <a href="https://github.com/RackSec/desdemona/pull/111/files" target="_blank">https://github.com/RackSec/desdemona/pull/111/files</a> if you’re interested)<div></div></z><z id="t1458945435" t="hiredman so it sounds like you have a source language, do a pass over that to turn it in to core.logic, then want to recover the free variable information from the core.logic program. I think the classic thing to do (compiler wise) would be to get that information in an analysis pass over the source language before compilation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:37</h><w>hiredman</w>so it sounds like you have a source language, do a pass over that to turn it in to core.logic, then want to recover the free variable information from the core.logic program. I think the classic thing to do (compiler wise) would be to get that information in an analysis pass over the source language before compilation<div></div></z><z id="t1458945470" t="lvh hiredman: Yup. That’s exactly what I did simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:37</h><w>lvh</w>hiredman: Yup. That’s exactly what I did <b>simple_smile</b><div></div></z><z id="t1458945490" t="lvh hiredman: I was hoping to do it in a completely disjoint step so that the intermediary step doesn’t have to understand what a free variable is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:38</h><w>lvh</w>hiredman: I was hoping to do it in a completely disjoint step so that the intermediary step doesn’t have to understand what a free variable is<div></div></z><z id="t1458945498" t="lvh but as you pointed out that way lies madness [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:38</h><w>lvh</w>but as you pointed out that way lies madness<div></div></z><z id="t1458945581" t="lvh (there’s one extra step: the source language is infix) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-25</d><h>22:39</h><w>lvh</w>(there’s one extra step: the source language is infix)<div></div></z><z id="t1459109359" t="exupero How should I do math with core.logic in ClojureScript without clojure.core.logic.fd? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>20:09</h><w>exupero</w>How should I do math with core.logic in ClojureScript without clojure.core.logic.fd?<div></div></z><z id="t1459109375" t="exupero At the moment all I need is addition. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>20:09</h><w>exupero</w>At the moment all I need is addition.<div></div></z><z id="t1459111430" t="hiredman it sort of depends, if the variables are ground , you can use project [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>20:43</h><w>hiredman</w>it sort of depends, if the variables are ground , you can use project<div></div></z><z id="t1459112619" t="exupero [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : Thanks for the pointer, but I don’t understand what that means. Can you elaborate or point me somewhere that talks about that? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:03</h><w>exupero</w><a>@hiredman</a>: Thanks for the pointer, but I don’t understand what that means. Can you elaborate or point me somewhere that talks about that?<div></div></z><z id="t1459113396" t="hiredman project is a non-relational thing, because it depends on the order in which your logic program executes, and what it does is, give a logic variable, if by the time the project executes the logic program has already figured out the value of that logic variable, it gives you that value [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:16</h><w>hiredman</w>project is a non-relational thing, because it depends on the order in which your logic program executes, and what it does is, give a logic variable, if by the time the project executes the logic program has already figured out the value of that logic variable, it gives you that value<div></div></z><z id="t1459113522" t="hiredman so something like (run [q] (fresh [a] (== a 1) (project [a] (== q (inc a)))) will work (I forget the syntax for project) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:18</h><w>hiredman</w>so something like <pre>(run [q] (fresh [a] (== a 1) (project [a] (== q (inc a))))</pre> will work (I forget the syntax for project)<div></div></z><z id="t1459113555" t="hiredman (run [q] (fresh [a] (project [a] (== q (inc a))) (= a 1))) will not [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:19</h><w>hiredman</w><pre>(run [q] (fresh [a]  (project [a] (== q (inc a))) (= a 1)))</pre> will not<div></div></z><z id="t1459113695" t="hiredman err that should be &apos;(== a 1)&apos; at the end [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:21</h><w>hiredman</w>err that should be &apos;(== a 1)&apos; at the end<div></div></z><z id="t1459115285" t="exupero Thanks. I’ll play with that. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>21:48</h><w>exupero</w>Thanks. I’ll play with that.<div></div></z><z id="t1459116223" t="exupero Perfect. Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-03-27</d><h>22:03</h><w>exupero</w>Perfect. Thanks!<div></div></z><z id="t1459886928" t="josh.freckleton what are some real-world use cases for logical programming? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:08</h><w>josh.freckleton</w>what are some real-world use cases for logical programming?<div></div></z><z id="t1459887254" t="hiredman threatgrid was(is? but they were acquired by cisco a while back) using core.logic for, uh, I guess threat recognition, they actually contributed the pldb fact database thing to core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:14</h><w>hiredman</w>threatgrid was(is? but they were acquired by cisco a while back) using core.logic for, uh, I guess threat recognition, they actually contributed the pldb fact database thing to core.logic<div></div></z><z id="t1459887350" t="hiredman I think rackspace is actually planning on something similar (also using core.logic) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:15</h><w>hiredman</w>I think rackspace is actually planning on something similar (also using core.logic)<div></div></z><z id="t1459887365" t="hiredman https://github.com/RackSec/desdemona [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:16</h><w>hiredman</w><a href="https://github.com/RackSec/desdemona" target="_blank">https://github.com/RackSec/desdemona</a><div></div></z><z id="t1459887498" t="hiredman I&apos;ve actually never ended up using core.logic at work, but since I have spent a little time with core.logic, and implemented minikanren, a lot of the ideas around searching and generating and unification have ended up popping up in stuff I do [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:18</h><w>hiredman</w>I&apos;ve actually never ended up using core.logic at work, but since I have spent a little time with core.logic, and implemented minikanren, a lot of the ideas around searching and generating and unification have ended up popping up in stuff I do<div></div></z><z id="t1459887821" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : woh cool! I&apos;m trying to get a feel of whether or not it&apos;s worth investing the time to learn logical programming in clj. Are there generic classes of problems that solve well in logical programming? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:23</h><w>josh.freckleton</w><a>@hiredman</a>: woh cool! I&apos;m trying to get a feel of whether or not it&apos;s worth investing the time to learn logical programming in clj. Are there generic classes of problems that solve well in logical programming?<div></div></z><z id="t1459888118" t="hiredman well, so I think desdemona and threatgrid&apos;s use most likely look sort of like an expert system or rules engine [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:28</h><w>hiredman</w>well, so I think desdemona and threatgrid&apos;s use most likely look sort of like an expert system or rules engine<div></div></z><z id="t1459888250" t="hiredman I like to try and use it to figure out my inlaws secrete santa every year [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:30</h><w>hiredman</w>I like to try and use it to figure out my inlaws secrete santa every year<div></div></z><z id="t1459888296" t="hiredman they set certain rules on the exchange about couples not getting each other in the exchange, that sort of thing [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:31</h><w>hiredman</w>they set certain rules on the exchange about couples not getting each other in the exchange, that sort of thing<div></div></z><z id="t1459888392" t="hiredman so I write a core.logic program that takes in to account those rules, and generates all possible gifting pairs, and then I observe and try to find out more facts and add them to the program until it gets down to one possible set [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:33</h><w>hiredman</w>so I write a core.logic program that takes in to account those rules, and generates all possible gifting pairs, and then I observe and try to find out more facts and add them to the program until it gets down to one possible set<div></div></z><z id="t1459888417" t="hiredman it rarely goes well, they practice good opsec [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:33</h><w>hiredman</w>it rarely goes well, they practice good opsec<div></div></z><z id="t1459888585" t="josh.freckleton hahaha! that&apos;s awesome. so expert systems, rules engines, got it. I&apos;ll at least learn it for fun simple_smile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:36</h><w>josh.freckleton</w>hahaha! that&apos;s awesome. so expert systems, rules engines, got it. I&apos;ll at least learn it for fun <b>simple_smile</b><div></div></z><z id="t1459889220" t="hiredman I started woodworking as a hobby and ended up using core.logic figure out dimensions for a workbench, https://gist.github.com/hiredman/05befd5b39eef89b86ca (I don&apos;t recommend this workbench btw) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:47</h><w>hiredman</w>I started woodworking as a hobby and ended up using core.logic figure out dimensions for a workbench, <a href="https://gist.github.com/hiredman/05befd5b39eef89b86ca" target="_blank">https://gist.github.com/hiredman/05befd5b39eef89b86ca</a> (I don&apos;t recommend this workbench btw)<div></div></z><z id="t1459889632" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : huh, that&apos;s kind of awesome. So you give it constraints on what the table should look like, and it figures out the dimensions of all of the pieces of wood? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:53</h><w>josh.freckleton</w><a>@hiredman</a>: huh, that&apos;s kind of awesome. So you give it constraints on what the table should look like, and it figures out the dimensions of all of the pieces of wood?<div></div></z><z id="t1459889742" t="hiredman yeah [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>20:55</h><w>hiredman</w>yeah<div></div></z><z id="t1459890828" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : why do you not recommend it? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:13</h><w>josh.freckleton</w><a>@hiredman</a>: why do you not recommend it?<div></div></z><z id="t1459891685" t="hiredman it is basically a really heavy table, which is maybe 80% of want you want from a handtool woodworking bench, but the 20%, the work holding, is kind of clutch. It is also on the small side (I was living in an apartment when I came up the dimensions). I have been contemplating building what people are calling a knockdown nicholson for a while now [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:28</h><w>hiredman</w>it is basically a really heavy table, which is maybe 80% of want you want from a handtool woodworking bench, but the 20%, the work holding, is kind of clutch. It is also on the small side (I was living in an apartment when I came up the dimensions).  I have been contemplating building what people are calling a knockdown nicholson for a while now<div></div></z><z id="t1459892635" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : that looks awesome! I built a guitar from scratch a few years ago, and I&apos;ve been craving getting back into wood working. Using code for wood projects is a cool junction simple_smile Hey, can I ask a simple question? I&apos;m going through some prolog &quot;puzzles&quot; to learn core.logic and I can&apos;t solve the first one, I just don&apos;t get how to &quot;destructure&quot; variable length lists. I just want to take the last of a list, and this is kinda what my approach is: (run* [q] (== [_ | q] [1 2 3 4]) ) or second from last: (run* [q] (== [_ | q _] [1 2 3 4]) ) Any idea if I&apos;m on the right track? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:43</h><w>josh.freckleton</w><a>@hiredman</a>: that looks awesome! I built a guitar from scratch a few years ago, and I&apos;ve been craving getting back into wood working. Using code for wood projects is a cool junction <b>simple_smile</b>

Hey, can I ask a simple question? I&apos;m going through some prolog &quot;puzzles&quot; to learn <code>core.logic</code> and I can&apos;t solve the first one, I just don&apos;t get how to &quot;destructure&quot; variable length lists.

I just want to take the last of a list, and this is kinda what my approach is:

<pre>(run* [q]
  (== [_ | q] [1 2 3 4])
  )</pre>

or second from last:

<pre>(run* [q]
  (== [_ | q _] [1 2 3 4])
  )</pre>

Any idea if I&apos;m on the right track?<div></div></z><z id="t1459892817" t="hiredman the translation from prolog isn&apos;t that direct [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:46</h><w>hiredman</w>the translation from prolog isn&apos;t that direct<div></div></z><z id="t1459892835" t="hiredman == doesn&apos;t have any kind sugar, just unification [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:47</h><w>hiredman</w>== doesn&apos;t have any kind sugar, just unification<div></div></z><z id="t1459892889" t="hiredman so something like (== [(lvar) q (lvar) (lvar) (lvar)] [1 2 3 4]) might work (I forget exactly the name of the function to generate a fresh lvar) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:48</h><w>hiredman</w>so something like (== [(lvar) q (lvar) (lvar) (lvar)] [1 2 3 4]) might work (I forget exactly the name of the function to generate a fresh lvar)<div></div></z><z id="t1459892943" t="hiredman there are some macros for defining functions that can do pattern matching sort of unification on arguments, but I haven&apos;t really used those [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:49</h><w>hiredman</w>there are some macros for defining functions that can do pattern matching sort of unification on arguments, but I haven&apos;t really used those<div></div></z><z id="t1459893002" t="josh.freckleton nice, it does work: (run* [q] (== [(lvar) (lvar) (lvar) q] [1 2 3 4])) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:50</h><w>josh.freckleton</w>nice, it does work:

<pre>(run* [q]
  (== [(lvar) (lvar) (lvar) q] [1 2 3 4]))</pre><div></div></z><z id="t1459893011" t="josh.freckleton now to figure out variable lengths... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>21:50</h><w>josh.freckleton</w>now to figure out variable lengths...<div></div></z><z id="t1459898554" t="josh.freckleton I can grab the first like this, but not the last: (run* [q] (fresh [a o] (== a [1 2 3 4 5]) (matche [a] ([ [o . _] ] (== q o))))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-05</d><h>23:22</h><w>josh.freckleton</w>I can grab the first like this, but not the last:
<pre>(run* [q]
  (fresh [a o]
    (== a [1 2 3 4 5])
    (matche [a]
            ([ [o . _] ]
             (== q o)))))</pre><div></div></z><z id="t1459915681" t="josh.freckleton How can I get all multiples of3 in range 50 using core.logic ? This is all I&apos;ve got: (run* [q] (membero q (range 50)) (conde [(== (mod q 3) 0)])) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>04:08</h><w>josh.freckleton</w>How can I get all multiples of3 in range 50 using <code>core.logic</code>? This is all I&apos;ve got:
<pre>(run* [q]
  (membero q (range 50))
  (conde
   [(== (mod q 3) 0)]))</pre><div></div></z><z id="t1459915707" t="josh.freckleton I get the error clojure.core.logic.LVar cannot be cast to java.lang.Number [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>04:08</h><w>josh.freckleton</w>I get the error <code> clojure.core.logic.LVar cannot be cast to java.lang.Number</code><div></div></z><z id="t1459973454" t="hiredman [:attrs {:href &quot;/_/_/users/U0LE170QZ&quot;}] : the thing is, core.logic doesn&apos;t have its own notion of names, so when you see &apos;q&apos; there what you are seeing is a clojure name &apos;q&apos; which is bound to an lvar. mod of course is a clojure function which has no idea what to do with an lvar. the only meaningful operations on lvars are constraints (via unification or something else). for numeric stuff often what you want can be achieved using https://github.com/clojure/core.logic/wiki/Features#clpfd [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>20:10</h><w>hiredman</w><a>@josh.freckleton</a>: the thing is, core.logic doesn&apos;t have its own notion of names, so when you see &apos;q&apos; there what you are seeing is a clojure name &apos;q&apos; which is bound to an lvar. mod of course is a clojure function which has no idea what to do with an lvar. the only meaningful operations on lvars are constraints (via unification or something else). for numeric stuff often what you want can be achieved using <a href="https://github.com/clojure/core.logic/wiki/Features#clpfd" target="_blank">https://github.com/clojure/core.logic/wiki/Features#clpfd</a><div></div></z><z id="t1459973516" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] : thanks, I&apos;m spending some time with &quot;the reasoned schemer&quot;, and some of this is starting to become clear, thanks for your help! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>20:11</h><w>josh.freckleton</w><a>@hiredman</a>: thanks, I&apos;m spending some time with &quot;the reasoned schemer&quot;, and some of this is starting to become clear, thanks for your help!<div></div></z><z id="t1459981751" t="josh.freckleton can I ask another question? I&apos;m trying to sum up all multiples of 3 and 5, and I&apos;ve got everything working except I can&apos;t connect the sumo to the list of multiples of 3/5: (defnc divxc [x y] ; is it divisible? (zero? (mod x y))) (defn sumo [x out] ; sum up a list (conde ((emptyo x) (== out 0)) (s# (fresh [f r rs] (firsto x f) (resto x r) (sumo r rs) (fd/+ f rs out))))) (defn mult35o [x] ; list of things divisible by 3 or 5 (fresh [a] (fd/in a (fd/interval 1 50)) (fd/distinct [a]) (conde ((divxc a 3)) ((divxc a 5))) (== x a))) (run* [x] ; test (mult35o x)) (run* [x] ; test (sumo [1 2 3 4] x)) (run* [x] (fresh [a b] (mult35o a) (firsto a b) (sumo b x))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>22:29</h><w>josh.freckleton</w>can I ask another question? I&apos;m trying to sum up all multiples of 3 and 5, and I&apos;ve got everything working except I can&apos;t connect the <code>sumo</code> to the list of multiples of 3/5:

<pre>(defnc divxc [x y] ; is it divisible?
  (zero? (mod x y)))

(defn sumo [x out] ; sum up a list
  (conde
   ((emptyo x) (== out 0))
   (s# (fresh [f r rs]
         (firsto x f)
         (resto x r)
         (sumo r rs)
         (fd/+ f rs out)))))

(defn mult35o [x] ; list of things divisible by 3 or 5
  (fresh [a]
    (fd/in a (fd/interval 1 50))
    (fd/distinct [a])
    (conde
     ((divxc a 3))
     ((divxc a 5)))
    (== x a)))

(run* [x] ; test
  (mult35o x))
(run* [x] ; test
  (sumo [1 2 3 4] x))

(run* [x]
  (fresh [a b]
    (mult35o a)
    (firsto a b)
    (sumo b x)))
</pre><div></div></z><z id="t1459981835" t="josh.freckleton it seems that a is getting assigned something like ((3 5 ...)) , so I try to &quot;unpack&quot; it with firsto , but in the end this doesn&apos;t work... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>22:30</h><w>josh.freckleton</w>it seems that <code>a</code> is getting assigned something like <code>((3 5 ...))</code>, so I try to &quot;unpack&quot; it with <code>firsto</code>, but in the end this doesn&apos;t work...<div></div></z><z id="t1459981838" t="josh.freckleton 😞 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-06</d><h>22:30</h><w>josh.freckleton</w><b>😞</b><div></div></z><z id="t1460156168" t="josh.freckleton How do I disunify correctly? I posted details on SO: https://stackoverflow.com/questions/36509025/how-can-i-disunify-b-lvar-from-a-a-b-b-c-c-in-clojure-core-lo [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-08</d><h>22:56</h><w>josh.freckleton</w>How do I disunify correctly? I posted details on SO:
<a href="https://stackoverflow.com/questions/36509025/how-can-i-disunify-b-lvar-from-a-a-b-b-c-c-in-clojure-core-lo" target="_blank">https://stackoverflow.com/questions/36509025/how-can-i-disunify-b-lvar-from-a-a-b-b-c-c-in-clojure-core-lo</a><div></div></z><z id="t1460160879" t="hiredman I am not entirely sure, but I suspect the issue is the lvar not being grounded in your second set of examples, because the lvar isn&apos;t bound to a definite value it is sort of undecided either way [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-09</d><h>00:14</h><w>hiredman</w>I am not entirely sure, but I suspect the issue is the lvar not being grounded in your second set of examples, because the lvar isn&apos;t bound to a definite value it is sort of undecided either way<div></div></z><z id="t1460160917" t="hiredman I think to do what you want, instead of using the lvar like that, you want to say none of the elements of the sequence have a first value that is &apos;:b&apos; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-09</d><h>00:15</h><w>hiredman</w>I think to do what you want, instead of using the lvar like that, you want to say none of the elements of the sequence have a first value that is &apos;:b&apos;<div></div></z><z id="t1461630017" t="exupero How can I do aggregation in core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-04-26</d><h>00:20</h><w>exupero</w>How can I do aggregation in core.logic?<div></div></z><z id="t1464886681" t="tristefigure Hi. I was wondering : how can I sort multiple results coming out of run* ? The idea is to sort them using core.logic itself by expressing preferences rules ? In particular, I’m wondering how I can express an ‘arbitrary’ preference order such as : prefer ?a over ?b. I’ve already used systems that worked this way : they checked for acyclicity so as to avoid contradiction in the preference statements (which were just binary relations). [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>16:58</h><w>tristefigure</w>Hi. I was wondering : how can I sort multiple results coming out of <code>run*</code> ? The idea is to sort them using core.logic itself by expressing preferences rules ? In particular, I’m wondering how I can express an ‘arbitrary’ preference order such as : prefer ?a over ?b. I’ve already used systems that worked this way : they checked for acyclicity so as to avoid contradiction in the preference statements (which were just binary relations).<div></div></z><z id="t1464886887" t="tristefigure I think i really am just looking for a way to make a topological sort. Any idea ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:01</h><w>tristefigure</w>I think i really am just looking for a way to make a topological sort. Any idea ?<div></div></z><z id="t1464887137" t="hiredman minikanren, on which core.logic is based, does this interleaving of goals to make it so non-convergent goals don&apos;t continue to not converge infinitely while a convergent goal never gets a chance to run [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:05</h><w>hiredman</w>minikanren, on which core.logic is based, does this interleaving of goals to make it so non-convergent goals don&apos;t continue to not converge infinitely while a convergent goal never gets a chance to run<div></div></z><z id="t1464887175" t="hiredman I think that would make it difficult to impossible to get ordering without some deeper modifications [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:06</h><w>hiredman</w>I think that would make it difficult to impossible to get ordering without some deeper modifications<div></div></z><z id="t1464887347" t="hiredman https://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf you can search for &quot;interleaving&quot; to read more about it, they mention it a lot, are very proud of it, and contrast it with prolog [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:09</h><w>hiredman</w><a href="https://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf" target="_blank">https://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf</a> you can search for &quot;interleaving&quot; to read more about it, they mention it a lot, are very proud of it, and contrast it with prolog<div></div></z><z id="t1464887546" t="hiredman without the interleaving, given a conde, the first branch would be searched exhaustively, then the next, etc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:12</h><w>hiredman</w>without the interleaving, given a conde, the first branch would be searched exhaustively, then the next, etc<div></div></z><z id="t1464888532" t="tristefigure Indeed this seems non-trivial, I’m probably better off doing the sort using functional programming rather than relational programming. Actually, I’m currently investigating minikanren in order to express business rules. I haven’t found much resources about this and I must confess I am somehow disappointed – but maybe this is because I haven’t employed many rules in my experiments so far. I’d be interested in reading stuffs (blogs, books, whatever) about solving business related problems with minikanren. So far, most of the use of minikanren I saw concerned small problems that had some kind of mathematical purity at their heart (the sudoku solver for instance), whereas I’m trying to determine if it could be of any use in cases where there a many rules such as in a business related environment (for instance, billing rules). [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:28</h><w>tristefigure</w>Indeed this seems non-trivial, I’m probably better off doing the sort using functional programming rather than relational programming.
Actually, I’m currently investigating minikanren in order to express business rules. I haven’t found much resources about this and I must confess I am somehow disappointed – but maybe this is because I haven’t employed many rules in my experiments so far. I’d be interested in reading stuffs (blogs, books, whatever) about solving business related problems with minikanren. So far, most of the use of minikanren I saw concerned small problems that had some kind of mathematical purity at their heart (the sudoku solver for instance), whereas I’m trying to determine if it could be of any use in cases where there a many rules such as in a business related environment (for instance, billing rules).<div></div></z><z id="t1464888683" t="hiredman minikanren isn&apos;t a rules engine [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:31</h><w>hiredman</w>minikanren isn&apos;t a rules engine<div></div></z><z id="t1464889288" t="hiredman with a billing system in minikanren, you could ask questions like &quot;is it possible to get a bill with the properties x y and z&quot;, which is interesting and in many circumstances useful, but I think most businesses are concerned with if this then that style rules, which you can do in a relational language, but you&apos;ll be able to do better using a rules engine [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:41</h><w>hiredman</w>with a billing system in minikanren, you could ask questions like &quot;is it possible to get a bill with the properties x y and z&quot;, which is interesting and in many circumstances useful, but I think most businesses are concerned with if this then that style rules,  which you can do in a relational language, but you&apos;ll be able to do better using a rules engine<div></div></z><z id="t1464889432" t="hiredman I think this split is what is referred to as backwards chaining (what relational languages do) and forward chaining (what rules engines do) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:43</h><w>hiredman</w>I think this split is what is referred to as backwards chaining (what relational languages do) and forward chaining (what rules engines do)<div></div></z><z id="t1464889463" t="hiredman the split isn&apos;t entirely black and white, mature rules engines and relational environments tend to support both [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-02</d><h>17:44</h><w>hiredman</w>the split isn&apos;t entirely black and white, mature rules engines and relational environments tend to support both<div></div></z><z id="t1465961552" t="hiredman you can do some combination of offer! and the internal cljs.core.async.impl.dispatch/process-messages , offer the line to the channel, and if the channel can&apos;t take the line, run process-messages then loop [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-06-15</d><h>03:32</h><w>hiredman</w>you can do some combination of <code>offer! </code>and the internal <code>cljs.core.async.impl.dispatch/process-messages</code>, offer the line to the channel, and if the channel can&apos;t take the line, run process-messages then loop<div></div></z><z id="t1471857562" t="alexati Hi! Newbie question. I’m trying to get to generate maps from partial maps but I feel like I miss some key piece of knowledge. If I run: (run 1 [q] (featurec q {:a 1})) I get: ((_0 :- (clojure.core.logic/featurec _0 {:a 1}))) Which makes complete sense. But I’m wondering, how can I “ground” the sequence so the first result is {:a 1}, without anything else? I’m stuck... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-08-22</d><h>09:19</h><w>alexati</w>Hi! Newbie question. I’m trying to get to generate maps from partial maps but I feel like I miss some key piece of knowledge. If I run:
<code>(run 1 [q] (featurec q {:a 1}))</code>
I get:
<code>((_0 :- (clojure.core.logic/featurec _0 {:a 1})))</code>
Which makes complete sense. But I’m wondering, how can I “ground” the sequence so the first result is {:a 1}, without anything else? I’m stuck...<div></div></z><z id="t1475157900" t="abdullahibra hi guys [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:05</h><w>abdullahibra</w>hi guys<div></div></z><z id="t1475157964" t="abdullahibra why can&apos;t i do this? (run* [q1 q2] (= q1 (* q2 q2))) ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:06</h><w>abdullahibra</w>why can&apos;t i do this?
(run* [q1 q2] (= q1 (* q2 q2))) ?<div></div></z><z id="t1475157997" t="abdullahibra i got this: ClassCastException clojure.core.logic.LVar cannot be cast to java.lang.Number clojure.lang.Numbers.multiply (Numbers.java:148) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:06</h><w>abdullahibra</w>i got this: 
ClassCastException clojure.core.logic.LVar cannot be cast to java.lang.Number  clojure.lang.Numbers.multiply (Numbers.java:148)<div></div></z><z id="t1475158043" t="abdullahibra user=&gt; (run* [q1] (== q1 1)) (1) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:07</h><w>abdullahibra</w>user=&gt; (run* [q1] (== q1 1))
(1)<div></div></z><z id="t1475158086" t="abdullahibra user=&gt; (run* [q1 q2] (= q1 q2 1)) ClassCastException java.lang.Boolean cannot be cast to clojure.lang.IFn clojure.core.logic.Substitutions (logic.clj:425) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:08</h><w>abdullahibra</w>user=&gt; (run* [q1 q2] (= q1 q2 1))
ClassCastException java.lang.Boolean cannot be cast to clojure.lang.IFn  clojure.core.logic.Substitutions (logic.clj:425)<div></div></z><z id="t1475158175" t="abdullahibra oh == is unification which is different [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:09</h><w>abdullahibra</w>oh == is unification which is different<div></div></z><z id="t1475158218" t="abdullahibra (run* [q1 q2] (== [3 q1] [q2 2])) ([2 3]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:10</h><w>abdullahibra</w>(run* [q1 q2] (== [3 q1] [q2 2]))
([2 3])<div></div></z><z id="t1475158228" t="abdullahibra got it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-09-29</d><h>14:10</h><w>abdullahibra</w>got it<div></div></z><z id="t1476828184" t="atroche hi everyone, i’m using core.logic to help me implement http://mason.gmu.edu/~rhanson/equatalk.html [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:03</h><w>atroche</w>hi everyone, i’m using core.logic to help me implement <a href="http://mason.gmu.edu/~rhanson/equatalk.html" target="_blank">http://mason.gmu.edu/~rhanson/equatalk.html</a><div></div></z><z id="t1476828223" t="atroche my problem is that i want the additional constraint that the numbers should form a roughly normal distribution [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:03</h><w>atroche</w>my problem is that i want the additional constraint that the numbers should form a roughly normal distribution<div></div></z><z id="t1476828260" t="atroche not sure if that gist link above is coming through right, but core.logic part starts at line 46 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:04</h><w>atroche</w>not sure if that gist link above is coming through right, but core.logic part starts at line 46<div></div></z><z id="t1476828290" t="atroche is there a way to do that with core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:04</h><w>atroche</w>is there a way to do that with core.logic?<div></div></z><z id="t1476830988" t="atroche actually, let me ask another simpler question first: what’s a good way to sort a list of numbers in core.logic, or to find the median of them? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:49</h><w>atroche</w>actually, let me ask another simpler question first: what’s a good way to sort a list of numbers in core.logic, or to find the median of them?<div></div></z><z id="t1476831183" t="hiredman you would have to express it as relations [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:53</h><w>hiredman</w>you would have to express it as relations<div></div></z><z id="t1476831226" t="hiredman each element in list X is one of the elements in list Y [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:53</h><w>hiredman</w>each element in list X is one of the elements in list Y<div></div></z><z id="t1476831288" t="hiredman the first element in list X is less than the second, etc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:54</h><w>hiredman</w>the first element in list X is less than the second, etc<div></div></z><z id="t1476831432" t="hiredman I am sure it can be done, but I am not sure I would do it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:57</h><w>hiredman</w>I am sure it can be done, but I am not sure I would do it<div></div></z><z id="t1476831480" t="hiredman the logic stuff is sort of a combination of generators that generate possible matches and filters that reject things that don&apos;t match [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:58</h><w>hiredman</w>the logic stuff is sort of a combination of generators that generate possible matches and filters that reject things that don&apos;t match<div></div></z><z id="t1476831518" t="hiredman so you&apos;ll end up generating all permutations of Y and rejecting the ones where your sorted relation doesn&apos;t hold [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:58</h><w>hiredman</w>so you&apos;ll end up generating all permutations of Y and rejecting the ones where your sorted relation doesn&apos;t hold<div></div></z><z id="t1476831567" t="atroche when you say you’re not sure you would do it, is it because of performance reasons? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>22:59</h><w>atroche</w>when you say you’re not sure you would do it, is it because of performance reasons?<div></div></z><z id="t1476831666" t="hiredman it just seems like a mismatch between sorting and relational programming [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:01</h><w>hiredman</w>it just seems like a mismatch between sorting and relational programming<div></div></z><z id="t1476831683" t="hiredman maybe there is a paper some way with some cool prolog quicksort or something [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:01</h><w>hiredman</w>maybe there is a paper some way with some cool prolog quicksort or something<div></div></z><z id="t1476831731" t="hiredman me saying it seems like a mismatch, this guy saying it is beautiful [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:02</h><w>hiredman</w>me saying it seems like a mismatch, this guy saying it is beautiful<div></div></z><z id="t1476831732" t="hiredman https://www.cp.eng.chula.ac.th/~piak/teaching/dsys/2004/quick-prolog.htm [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:02</h><w>hiredman</w><a href="https://www.cp.eng.chula.ac.th/~piak/teaching/dsys/2004/quick-prolog.htm" target="_blank">https://www.cp.eng.chula.ac.th/~piak/teaching/dsys/2004/quick-prolog.htm</a><div></div></z><z id="t1476831841" t="atroche aha: https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/bench.clj#L395-L396 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:04</h><w>atroche</w>aha: <a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/bench.clj#L395-L396" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/bench.clj#L395-L396</a><div></div></z><z id="t1476832284" t="atroche can’t say i understand how it works or even how to use it yet [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:11</h><w>atroche</w>can’t say i understand how it works or even how to use it yet<div></div></z><z id="t1476832289" t="atroche do you, [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:11</h><w>atroche</w>do you, <a>@hiredman</a> ?<div></div></z><z id="t1476832354" t="atroche e.g. why does qsorto there have [l r r0] ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:12</h><w>atroche</w>e.g. why does qsorto there have [l r r0] ?<div></div></z><z id="t1476832616" t="hiredman I believe the [l r r0] line is for tabling [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:16</h><w>hiredman</w>I believe the [l r r0] line is for tabling<div></div></z><z id="t1476832666" t="hiredman tabling is some kind of optimization sort of like memoizing [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:17</h><w>hiredman</w>tabling is some kind of optimization sort of like memoizing<div></div></z><z id="t1476832677" t="atroche okay, cool [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:17</h><w>atroche</w>okay, cool<div></div></z><z id="t1476832693" t="atroche so if i’m looking for a constraint that says that the list is sorted [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:18</h><w>atroche</w>so if i’m looking for a constraint that says that the list is sorted<div></div></z><z id="t1476832702" t="hiredman which is not say I understand qsorto [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:18</h><w>hiredman</w>which is not say I understand qsorto<div></div></z><z id="t1476832708" t="atroche and i have the qsorto as written there… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:18</h><w>atroche</w>and i have the qsorto as written there…<div></div></z><z id="t1476833774" t="atroche i clearly have more reading to do 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-18</d><h>23:36</h><w>atroche</w>i clearly have more reading to do <b>🙂</b><div></div></z><z id="t1476899737" t="johanatan Hi, is there a way to AND a dynamically generated list of constraints? [Cannot apply all or run as they are macros] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:55</h><w>johanatan</w>Hi, is there a way to AND a dynamically generated list of constraints? [Cannot apply <code>all</code> or <code>run</code> as they are macros]<div></div></z><z id="t1476899794" t="exupero (every? true? coll) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:56</h><w>exupero</w><code>(every? true? coll)</code><div></div></z><z id="t1476899815" t="johanatan Is true? part of core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:56</h><w>johanatan</w>Is <code>true?</code> part of core.logic?<div></div></z><z id="t1476899840" t="exupero Sorry, didn’t notice the channel. Thinking in clojure.core. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:57</h><w>exupero</w>Sorry, didn’t notice the channel. Thinking in clojure.core.<div></div></z><z id="t1476899843" t="johanatan Can a boolean be converted to a goal? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:57</h><w>johanatan</w>Can a <code>boolean</code> be converted to a goal?<div></div></z><z id="t1476899846" t="johanatan Ahh 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>17:57</h><w>johanatan</w>Ahh <b>🙂</b><div></div></z><z id="t1476900096" t="johanatan Answer from dnolen: dnolen [11:00 AM] [:attrs {:href &quot;/_/_/users/U0E98NQG2&quot;}] yes, you can reduce your goals with bind [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-19</d><h>18:01</h><w>johanatan</w>Answer from dnolen: 
dnolen [11:00 AM]  
<a>@johanatan</a> yes, you can reduce your goals with bind<div></div></z><z id="t1476931663" t="johanatan actually bind is not working for constraints created with fd/dom e.g. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>02:47</h><w>johanatan</w>actually <code>bind</code> is not working for constraints created with <code>fd/dom</code> e.g.<div></div></z><z id="t1476931678" t="johanatan anybody else have any ideas? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>02:47</h><w>johanatan</w>anybody else have any ideas?<div></div></z><z id="t1476932531" t="johanatan This is the result in its basest form: slipstream.core=&gt; (run* [q] (clojure.core.logic.protocols/bind s# (fd/dom q (fd/interval 0 10)))) ArityException Wrong number of args (1) passed to: logic/eval1901/fn--1902/-inc--1903 clojure.lang.AFn.throwArity (AFn.java:429) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>03:02</h><w>johanatan</w>This is the result in its basest form:

<pre>slipstream.core=&gt; (run* [q] (clojure.core.logic.protocols/bind s# (fd/dom q (fd/interval 0 10))))

ArityException Wrong number of args (1) passed to: logic/eval1901/fn--1902/-inc--1903  clojure.lang.AFn.throwArity (AFn.java:429)
</pre><div></div></z><z id="t1476936173" t="johanatan This works as expected: slipstream.core=&gt; (run* [q] (fd/dom q (fd/interval 0 10))) (0 1 2 3 4 5 6 7 8 9 10) slipstream.core=&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>04:02</h><w>johanatan</w>This works as expected:
<pre>slipstream.core=&gt; (run* [q] (fd/dom q (fd/interval 0 10)))
(0 1 2 3 4 5 6 7 8 9 10)
slipstream.core=&gt; 
</pre><div></div></z><z id="t1476936230" t="johanatan [:attrs {:href &quot;/_/_/users/U050B88UR&quot;}] ^ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>04:03</h><w>johanatan</w><a>@dnolen</a>  ^<div></div></z><z id="t1476937833" t="johanatan doh! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>04:30</h><w>johanatan</w>doh!<div></div></z><z id="t1476937845" t="johanatan Looks like: (everyg identity goals) works! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-10-20</d><h>04:30</h><w>johanatan</w>Looks like:
<code>(everyg identity goals)</code> works!<div></div></z><z id="t1479411560" t="josh.freckleton I would expect the first program to return (5,6) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:39</h><w>josh.freckleton</w>I would expect the first program to return <code>(5,6)</code><div></div></z><z id="t1479412399" t="hiredman being an embedded dsl, core.logic sort of interleaves regular clojure with logic programming [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:53</h><w>hiredman</w>being an embedded dsl, core.logic sort of interleaves regular clojure with logic programming<div></div></z><z id="t1479412412" t="hiredman what fresh does is bind a clojure variable to a logic variable [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:53</h><w>hiredman</w>what fresh does is bind a clojure variable to a logic variable<div></div></z><z id="t1479412435" t="hiredman so you can imagine it as something like (let [r (fresh-logic-var)] ...) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:53</h><w>hiredman</w>so you can imagine it as something like (let [r (fresh-logic-var)] ...)<div></div></z><z id="t1479412526" t="hiredman so given a clojure program, where the local r is bound to a logic variable, is there some expression like (... x ...) that can result in r being bound to something else? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:55</h><w>hiredman</w>so given a clojure program, where the local <code>r</code> is bound to a logic variable, is there some expression like <code>(... x ...)</code> that can result in <code>r</code> being bound to something else?<div></div></z><z id="t1479412587" t="hiredman a logic program doesn&apos;t change the value of bound clojure locals, it constrains the value of the logic variables bound by locals [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:56</h><w>hiredman</w>a logic program doesn&apos;t change the value of bound clojure locals, it constrains the value of the logic variables bound by locals<div></div></z><z id="t1479412689" t="hiredman you can use project to look up the value of a logic variable (an LVar) but that is not relational [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:58</h><w>hiredman</w>you can use project to look up the value of a logic variable (an LVar) but that is not relational<div></div></z><z id="t1479412775" t="hiredman what you should do is something like (compose-goals-with-or (for [constraint [fd/+ fd/*]] (constraint 2 3 q))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:59</h><w>hiredman</w>what you should do is something like <code>(compose-goals-with-or (for [constraint [fd/+ fd/*]] (constraint 2 3 q)))</code><div></div></z><z id="t1479412789" t="hiredman but I don&apos;t recall what compose-goals-with-or would be [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>19:59</h><w>hiredman</w>but I don&apos;t recall what compose-goals-with-or would be<div></div></z><z id="t1479412880" t="hiredman https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1185-L1198 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>20:01</h><w>hiredman</w><a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1185-L1198" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1185-L1198</a><div></div></z><z id="t1479412906" t="josh.freckleton [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] thanks! this is exactly what I needed! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>20:01</h><w>josh.freckleton</w><a>@hiredman</a> thanks! this is exactly what I needed!<div></div></z><z id="t1479413124" t="josh.freckleton I&apos;m hoping to make sense of some of these less obvious logic functions and I&apos;ll write up some posts to hopefully make logic easier to get running with! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-17</d><h>20:05</h><w>josh.freckleton</w>I&apos;m hoping to make sense of some of these less obvious <code>logic</code> functions and I&apos;ll write up some posts to hopefully make <code>logic</code> easier to get running with!<div></div></z><z id="t1480101015" t="josh.freckleton how can I generate, say, an infinite list of all combinations of [:a :b :c] , eg, [[:a], [:a :b], [:a :b :c], [:a :b :c :a], ...] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-25</d><h>19:10</h><w>josh.freckleton</w>how can I generate, say, an infinite list of all combinations of <code>[:a :b :c]</code>, eg, <code>[[:a], [:a :b], [:a :b :c], [:a :b :c :a], ...]</code><div></div></z><z id="t1480101023" t="josh.freckleton (using core.logic) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-11-25</d><h>19:10</h><w>josh.freckleton</w>(using core.logic)<div></div></z><z id="t1480946329" t="mac Does anyone know of extensions to core.logic for working with dates, so one could do something like: (run 1 [q] (day-after q (date-time 1986 10 14))) =&gt;(#&lt;DateTime 1986-10-15T00:00:00.000Z&gt;) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-12-05</d><h>13:58</h><w>mac</w>Does anyone know of extensions to core.logic for working with dates, so one could do something like: <code>(run 1 [q] (day-after q (date-time 1986 10 14))) =&gt;(#&lt;DateTime 1986-10-15T00:00:00.000Z&gt;)</code><div></div></z><z id="t1481706169" t="mattiasw What is wrong with the proposed solution for nonmembero in https://stackoverflow.com/questions/16370327/why-does-my-clojure-core-logic-nonmember-function-return-two-values/41138478#41138478 ? And why does my non-defne work as expected? Is there a problem with defne? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2016-12-14</d><h>09:02</h><w>mattiasw</w>What is wrong with the proposed solution for nonmembero in <a href="https://stackoverflow.com/questions/16370327/why-does-my-clojure-core-logic-nonmember-function-return-two-values/41138478#41138478" target="_blank">https://stackoverflow.com/questions/16370327/why-does-my-clojure-core-logic-nonmember-function-return-two-values/41138478#41138478</a> ? And why does my non-defne work as expected? Is there a problem with defne?<div></div></z><z id="t1485058016" t="nathansmutz Is there any way to emulate set operations in core.logic? It looks like everyg wont work on an LCons so you can&apos;t make relational goals like: (defn subseto [sub super] (everyg* #(membero % super) sub)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-01-22</d><h>04:06</h><w>nathansmutz</w>Is there any way to emulate set operations in core.logic?  
It looks like everyg wont work on an LCons so you can&apos;t make relational goals like:
(defn subseto [sub super]
  (everyg* #(membero % super) sub))<div></div></z><z id="t1485076780" t="nathansmutz On researching, here&apos;s what I found so far. I&apos;ll post here as I make tests: https://gist.github.com/martintrojer/3792630 (defne subseto &quot;is s1 is a subset of s2?&quot; [s1 s2] ([() _]) ([[x . xs] _] (membero x s2) (subseto xs s2))) (defne any-membero &quot;any member of s1 is a member of s2?&quot; [s1 s2] ([[x . xs] _] (membero x s2)) ([[x . xs] _] (any-membero xs s2))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-01-22</d><h>09:19</h><w>nathansmutz</w>On researching, here&apos;s what I found so far.  I&apos;ll post here as I make tests: 

<a href="https://gist.github.com/martintrojer/3792630" target="_blank">https://gist.github.com/martintrojer/3792630</a>
(defne subseto
  &quot;is s1 is a subset of s2?&quot;
  [s1 s2]
  ([() _])
  ([[x . xs] _]
     (membero x s2)
     (subseto xs s2)))
 

(defne any-membero
  &quot;any member of s1 is a member of s2?&quot;
  [s1 s2]
  ([[x . xs] _]
     (membero x s2))
  ([[x . xs] _]
     (any-membero xs s2)))<div></div></z><z id="t1485112451" t="nathansmutz This works: (run 5 [q] (distincto q) (subseto q [1 2])) Doing a &quot;(run 6 ...&quot; with the above hangs. I&apos;m off to learn more kanren-foo. Maybe something with walk can make this halt. I hope its a solvable problem. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-01-22</d><h>19:14</h><w>nathansmutz</w>This works:
(run 5 [q]
  (distincto q)
  (subseto q [1 2]))

Doing a &quot;(run 6 ...&quot; with the above hangs.  
I&apos;m off to learn more kanren-foo.  Maybe something with walk can make this halt.
I hope its a solvable problem.

<div></div></z><z id="t1486654973" t="gamecubate About to embark on the development of a web-front-end (CLJS + Reagent) to an expert system shell. Is core.logic a good choice for the expert system? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-09</d><h>15:42</h><w>gamecubate</w>About to embark on the development of a web-front-end (CLJS + Reagent) to an expert system shell. Is core.logic a good choice for the expert system?<div></div></z><z id="t1486865121" t="devn [:attrs {:href &quot;/_/_/users/U15J6CD7T&quot;}] : saw that you were messing with Clara [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-12</d><h>02:05</h><w>devn</w><a>@gamecubate</a>: saw that you were messing with Clara <div></div></z><z id="t1486865130" t="devn Will be interested to hear where you wind up [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-12</d><h>02:05</h><w>devn</w>Will be interested to hear where you wind up <div></div></z><z id="t1486939320" t="gamecubate [:attrs {:href &quot;/_/_/users/U06DQC6MA&quot;}] There’s a lot to learn and figure out at this stage. Plus I have this nagging suspicion that a self-hosted clojurescript front end shell might not be able to support the adding of rules to a session db. First need to learn quite a bit more about core.logic and then Clara. This will take weeks… I will share examples once significant progress is made. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-12</d><h>22:42</h><w>gamecubate</w><a>@devn</a> There’s a lot to learn and figure out at this stage. Plus I have this nagging suspicion that a self-hosted clojurescript front end shell might not be able to support the adding of rules to a session db. First need to learn quite a bit more about core.logic and then Clara. This will take weeks… I will share examples once significant progress is made.<div></div></z></g><g id="s1"><z id="t1487224550" t="ddrbt Hey people, I&apos;d appreciate some help here: I&apos;m trying to build up a pldb/db which starts with some precedence relations between tasks and fills in the blanks. How can I write a relational function that identifies which tasks do not have a precedence relation with every other task? Here&apos;s some example code: [precedence-db]( https://gist.github.com/daveduthie/f91dc1c9587daacbba50f6b656bb8cab ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-16</d><h>05:55</h><w>ddrbt</w>Hey people, I&apos;d appreciate some help here:

I&apos;m trying to build up a <code>pldb/db</code> which starts with some precedence relations between tasks and fills in the blanks. How can I write a relational function that identifies which tasks do not have a precedence relation with every other task?

Here&apos;s some example code: [precedence-db](<a href="https://gist.github.com/daveduthie/f91dc1c9587daacbba50f6b656bb8cab" target="_blank">https://gist.github.com/daveduthie/f91dc1c9587daacbba50f6b656bb8cab</a>)<div></div></z><z id="t1487256352" t="ddrbt Anyone? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-16</d><h>14:45</h><w>ddrbt</w>Anyone?<div></div></z><z id="t1487277551" t="hiredman you need to use, uh, there should be some negation of a goal operator, not sure what it is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-16</d><h>20:39</h><w>hiredman</w>you need to use, uh, there should be some negation of a goal operator, not sure what it is<div></div></z><z id="t1487277569" t="hiredman instead of a disequality constraint [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-16</d><h>20:39</h><w>hiredman</w>instead of a disequality constraint<div></div></z><z id="t1487277631" t="hiredman so you have a search for the join of tasks of precedences, and then search for the tasks where that search doesn&apos;t have any results [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-16</d><h>20:40</h><w>hiredman</w>so you have a search for the join of tasks of precedences, and then search for the tasks where that search doesn&apos;t have any results<div></div></z><z id="t1487294805" t="ddrbt [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] , thanks, I’ll check it out [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-17</d><h>01:26</h><w>ddrbt</w><a>@hiredman</a>, thanks, I’ll check it out<div></div></z><z id="t1487295074" t="ddrbt This almost works. (Stepping through with the debugger, it works. Running ordinarily, I get (4 3 2 1)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-17</d><h>01:31</h><w>ddrbt</w>This almost works. (Stepping through with the debugger, it works. Running ordinarily, I get (4 3 2 1))<div></div></z><z id="t1487295101" t="ddrbt Is it a bad idea to nest run statements? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-17</d><h>01:31</h><w>ddrbt</w>Is it a bad idea to nest <code>run</code> statements?<div></div></z><z id="t1487491182" t="ddrbt I skirted the issue by using :none as the precedence when two tasks have not yet been related to one another. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-02-19</d><h>07:59</h><w>ddrbt</w>I skirted the issue by using <code>:none</code> as the precedence when two tasks have not yet been related to one another.<div></div></z><z id="t1488527832" t="kneiva Having a list of integers how would I find the biggest square area that can fit in the columns? With clojure.logic or preferrably with https://github.com/aengelberg/loco . I couldn’t find an example or a tutorial that help me with this kind of problem. Examples: 1234321 321 423 0 0 *** 0 0 0 0***0 ** **0 00***00 **0 **0 = 3 = 2 = 2 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>07:57</h><w>kneiva</w>Having a list of integers how would I find the biggest square area that can fit in the columns? With clojure.logic or preferrably with <a href="https://github.com/aengelberg/loco" target="_blank">https://github.com/aengelberg/loco</a>. I couldn’t find an example or a tutorial that help me with this kind of problem.

Examples:
<pre>1234321     321     423

   0                0
  ***       0       0 0
 0***0      **      **0
00***00     **0     **0
= 3         = 2     = 2
</pre><div></div></z><z id="t1488528163" t="hiredman it seems like the kind of think you might be able to find a formula for [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>08:02</h><w>hiredman</w>it seems like the kind of think you might be able to find a formula for<div></div></z><z id="t1488528374" t="hiredman I think with logic programming or some kind of sat solver you are going to have trouble, because both of those tend to be good answering &quot;does a solution to this exist&quot; and less so at solving &quot;find me the solution with property x&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>08:06</h><w>hiredman</w>I think with logic programming or some kind of sat solver you are going to have trouble, because both of those tend to be good answering &quot;does a solution to this exist&quot; and less so at solving &quot;find me the solution with property x&quot;<div></div></z><z id="t1488529075" t="hiredman actually, I think you can put that in terms of does X exist: &quot;Does X exist where X is a number that fits in row 0, and row 0 + X, and X+1 doesn&apos;t fit in row 0 + X + 1&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>08:17</h><w>hiredman</w>actually, I think you can put that in terms of does X exist: &quot;Does X exist where X is a number that fits in row 0, and row 0 + X, and X+1 doesn&apos;t fit in row 0 + X + 1&quot;<div></div></z><z id="t1488529434" t="hiredman the biggest result or smallest result, is a constraint relative to all the other answers, which means you have to compute all the other possible answers [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>08:23</h><w>hiredman</w>the biggest result or smallest result, is a constraint relative to all the other answers, which means you have to compute all the other possible answers<div></div></z><z id="t1488529593" t="kneiva Ok, I think that helps. I’ll ponder on it. Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-03</d><h>08:26</h><w>kneiva</w>Ok, I think that helps. I’ll ponder on it. Thanks!<div></div></z><z id="t1488901792" t="eraserhd Is there any documentation on core.logic&apos;s protocols, or an example of how to extend it for a new, basically opaque type? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-07</d><h>15:49</h><w>eraserhd</w>Is there any documentation on core.logic&apos;s protocols, or an example of how to extend it for a new, basically opaque type?<div></div></z><z id="t1488901852" t="eraserhd I&apos;m just using the core.logic unifier in my tests in order to verify that two or three places in the structure have the same value, but I don&apos;t care what that value is. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-07</d><h>15:50</h><w>eraserhd</w>I&apos;m just using the core.logic unifier in my tests in order to verify that two or three places in the structure have the same value, but I don&apos;t care what that value is.<div></div></z><z id="t1488901876" t="eraserhd Unfortunately, I&apos;ve had to change that value from a string to a Datomic tempid, and that means the unifier breaks. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-07</d><h>15:51</h><w>eraserhd</w>Unfortunately, I&apos;ve had to change that value from a string to a Datomic tempid, and that means the unifier breaks.<div></div></z><z id="t1488901907" t="eraserhd Because IUninitialized is not implemented on datomic.db.DbId. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-07</d><h>15:51</h><w>eraserhd</w>Because IUninitialized is not implemented on datomic.db.DbId.<div></div></z><z id="t1489028644" t="ddrbt run* returns a lazy sequence. Would it be possible to put some finite domain constraints in an atom and have the constraints consulted each time I want to realise more of the sequence? Failing this, I&apos;d have to call run* each time I have updated constraints. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-09</d><h>03:04</h><w>ddrbt</w>run* returns a lazy sequence. Would it be possible to put some finite domain constraints in an atom and have the constraints consulted each time I want to realise more of the sequence? Failing this, I&apos;d have to call run* each time I have updated constraints. <div></div></z><z id="t1489028680" t="ddrbt (As some background, I&apos;m using data coming out of run* to derive constraints as I go) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-09</d><h>03:04</h><w>ddrbt</w>(As some background, I&apos;m using data coming out of run* to derive constraints as I go)<div></div></z><z id="t1490079648" t="tomjack ([... [var _8]] :- (swap [a_10 a_7] _8 a_6) ...) 😞 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-03-21</d><h>07:00</h><w>tomjack</w><pre>([... [var _8]] :- (swap [a_10 a_7] _8 a_6) ...)
</pre>
<b>😞</b><div></div></z><z id="t1494089300" t="sandbags I have a problem that I think core.logic might be a fit for. I did some Prolog many moons ago so I&apos;ve a vague familiarity with this stuff and reading the core.logic tutorial I grasp it, at least at a superficial level. Anyone working with it enough that I can describe what I am doing and they can tell me if it seems like a good fit? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-05-06</d><h>16:48</h><w>sandbags</w>I have a problem that I think core.logic might be a fit for. I did some Prolog many moons ago so I&apos;ve a vague familiarity with this stuff and reading the core.logic tutorial I grasp it, at least at a superficial level. Anyone working with it enough that I can describe what I am doing and they can tell me if it seems like a good fit?<div></div></z><z id="t1494089668" t="sandbags Well let me describe it a little, if anyone has a view I can go into more details. The high level problem is to create acronyms (yes this is the stupid side project gone mad) based on a set of rules. An example rule could be must include one of &quot;Strategy&quot; or &quot;Plan&quot; so the word must have an s or a p . Another rule could be must include one of &quot;Technology&quot; or &quot;Digital&quot; ergo a t d or d must be present. Another type of rule can include either &quot;Operations&quot; or &quot;Process&quot; means that an o or p could appear if necessary to match a word. So you have a set of rules that govern how letters can be used. Then I smash a dictionary through the rules to create a series of acronyms. Given the rules described above you might have the word sot match as Strategy Operations Technology (this example would use both of the the required rules and the optional rule) and so on. st , ts , tos , tps , and spt are also legal solutions but, since they are not dictionary words, they would never come up. The approach I have taken most recently ended up labelling each letter of the word under test with each of the rules that it can possibly match. It&apos;s not hard then to come up with one solution that uses all required labelings (and optional ones if required). But to get all legal solutions for a given word felt like a backtracking type problem and, hence, my interest in core.logic . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-05-06</d><h>16:54</h><w>sandbags</w>Well let me describe it a little, if anyone has a view I can go into more details. The high level problem is to create acronyms (yes this is the stupid side project gone mad) based on a set of rules. An example rule could be <code>must include one of &quot;Strategy&quot; or &quot;Plan&quot;</code> so the word must have an <code>s</code> or a <code>p</code>. Another rule could be <code>must include one of &quot;Technology&quot; or &quot;Digital&quot;</code> ergo a <code>t</code>d or <code>d</code> must be present. Another type of rule <code>can include either &quot;Operations&quot; or &quot;Process&quot;</code> means that an <code>o</code> or <code>p</code> could appear if necessary to match a word. So you have a set of rules that govern how letters can be used. Then I smash a dictionary through the rules to create a series of acronyms. Given the rules described above you might have the word <code>sot</code> match as <code>Strategy Operations Technology</code> (this example would use both of the the required rules and the optional rule) and so on. <code>st</code>, <code>ts</code>, <code>tos</code>, <code>tps</code>, and <code>spt</code> are also legal solutions but, since they are not dictionary words, they would never come up. The approach I have taken most recently ended up labelling each letter of the word under test with each of the rules that it can possibly match. It&apos;s not hard then to come up with one solution that uses all required labelings (and optional ones if required). But to get all legal solutions for a given word felt like a backtracking type problem and, hence, my interest in <code>core.logic</code>.<div></div></z><z id="t1496813038" t="fabrao Hello all, I have something like this [:A :B] [:A :C] [:B :C] how can I get the result [:A [:B :C]], is that possible with core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>05:23</h><w>fabrao</w>Hello all, I have something like this <code>[:A :B] [:A :C] [:B :C]</code> how can I get the result [:A [:B :C]], is that possible with core.logic?<div></div></z><z id="t1496849231" t="norman What exactly are you asking? Are you asking how to transform the results of your core.logic query? Or are you asking how to rewrite your core.logic query? (in which we’d need a query) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:27</h><w>norman</w>What exactly are you asking? Are you asking how to transform the results of your core.logic query?  Or are you asking how to rewrite your core.logic query? (in which we’d need a query)<div></div></z><z id="t1496850290" t="norman If it’s the former, this might get you started: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:44</h><w>norman</w>If it’s the former, this might get you started:<div></div></z><z id="t1496850290" t="norman user&gt; (reduce (fn [m [k v]] (update-in m [k] #(conj (or % #{}) v))) {} [[:A :B] [:A :C] [:B :C]]) {:A #{:B :C}, :B #{:C}} [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:44</h><w>norman</w>user&gt; (reduce (fn [m [k v]] (update-in m [k] #(conj (or % #{}) v))) {} [[:A :B] [:A :C] [:B :C]])
{:A #{:B :C}, :B #{:C}}<div></div></z><z id="t1496850310" t="norman No time to make that cleaner, but it’s something to work from [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:45</h><w>norman</w>No time to make that cleaner, but it’s something to work from<div></div></z><z id="t1496850389" t="norman user&gt; (for [[k v] *1] [k (vec v)]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:46</h><w>norman</w>user&gt; (for [[k v] *1]
        [k (vec v)])<div></div></z><z id="t1496850396" t="norman ([:A [:B :C]] [:B [:C]]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:46</h><w>norman</w>([:A [:B :C]] [:B [:C]])<div></div></z><z id="t1496850404" t="norman if you need to get it back to vectors, I guess [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>15:46</h><w>norman</w>if you need to get it back to vectors, I guess<div></div></z><z id="t1496851843" t="newres Hi, is there a way to use core.logic as a kind of backward chaining rule engine? I kind of figured out that I can write a goal to encapsulate the singe execution of a rule, but how could I express that a portion of goal could be used multiple times to derive a conclusion? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>16:10</h><w>newres</w>Hi, is there a way to use core.logic as a kind of backward chaining rule engine? I kind of figured out that I can write a goal to encapsulate the singe execution of a rule, but how could I express that a portion of goal could be used multiple times to derive a conclusion?<div></div></z><z id="t1496871821" t="fabrao [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] well, I´m trying to use it like I used to use in Prolog as I remember repetition ([X|T]) :- repetition(X,A), repetition(X,B), A != B. I don´t know if it´s correct [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>21:43</h><w>fabrao</w><a>@norman</a> well, I´m trying to use it like I used to use in Prolog as I remember
<pre>repetition ([X|T]) :- repetition(X,A), repetition(X,B), A != B.
</pre> I don´t know if it´s correct<div></div></z><z id="t1496871878" t="fabrao but that´s the idea [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>21:44</h><w>fabrao</w>but that´s the idea<div></div></z><z id="t1496871953" t="norman Sorry - i don’t understand what you want. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>21:45</h><w>norman</w>Sorry - i don’t understand what you want.<div></div></z><z id="t1496872066" t="fabrao 🙂 ok, I´m trying to use core.logic instead of using something like http://www.clara-rules.org/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-06-07</d><h>21:47</h><w>fabrao</w><b>🙂</b> ok, I´m trying to use core.logic instead of using something like <a href="http://www.clara-rules.org/" target="_blank">http://www.clara-rules.org/</a><div></div></z><z id="t1499440754" t="mrchance Hi! Can someone give me a hint on how to add error handling to my logic programs? I&apos;d like to receive a little more information than () when my program fails to produce a result 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-07</d><h>15:19</h><w>mrchance</w>Hi! Can someone give me a hint on how to add error handling to my logic programs? I&apos;d like to receive a little more information than <code>()</code> when my program fails to produce a result <b>🙂</b><div></div></z><z id="t1499440848" t="mrchance I was thinking about a fall through case that unifies an error parameter to something meaningful, but I am not sure if that is a good idea or even how to do it well [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-07</d><h>15:20</h><w>mrchance</w>I was thinking about a fall through case that unifies an error parameter to something meaningful, but I am not sure if that is a good idea or even how to do it well<div></div></z><z id="t1501114591" t="swizzard hi all, i’m working my way through the reasoned schemer with core.logic; i’ve read https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer , but i’m still a little confused? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>00:16</h><w>swizzard</w>hi all, i’m working my way through the reasoned schemer with core.logic; i’ve read <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a>, but i’m still a little confused?<div></div></z><z id="t1501114705" t="swizzard specifically by the use of the non-prefixed cond , e.g.: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>00:18</h><w>swizzard</w>specifically by the use of the non-prefixed <code>cond</code>, e.g.:<div></div></z><z id="t1501114804" t="swizzard also, i’m not sure how to get conde to properly evaluate: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>00:20</h><w>swizzard</w>also, i’m not sure how to get <code>conde</code> to properly evaluate:<div></div></z><z id="t1501116811" t="norman (run* [q] (conde [fail succeed] [succeed fail])) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>00:53</h><w>norman</w>(run* [q]
                   (conde
                    [fail succeed]
                    [succeed fail]))<div></div></z><z id="t1501118083" t="norman [:attrs {:href &quot;/_/_/users/U090G4C05&quot;}] The book examples aren’t really great in isolation. I’d have to check my copy of the book when I get home to see the context of this. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>01:14</h><w>norman</w><a>@swizzard</a> The book examples aren’t really great in isolation. I’d have to check my copy of the book when I get home to see the context of this.<div></div></z><z id="t1501118107" t="norman But the above is how to run an equivalent core.logic conde [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>01:15</h><w>norman</w>But the above is how to run an equivalent core.logic conde<div></div></z><z id="t1501172903" t="swizzard when/why would you use lcons instead of just list ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>16:28</h><w>swizzard</w>when/why would you use <code>lcons</code> instead of just <code>list</code>?<div></div></z><z id="t1501174315" t="norman I don’t think I’ve ever used lcons [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>16:51</h><w>norman</w>I don’t think I’ve ever used lcons<div></div></z><z id="t1501174330" t="norman Probably you’d just use it when trying to do examples from minkanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>16:52</h><w>norman</w>Probably you’d just use it when trying to do examples from minkanren<div></div></z><z id="t1501174745" t="swizzard [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] that’s kind of what i assumed, but wanted to be sure, thanks 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>16:59</h><w>swizzard</w><a>@norman</a> that’s kind of what i assumed, but wanted to be sure, thanks <b>🙂</b><div></div></z><z id="t1501174836" t="norman We (ThreatGRID) have probably one of the only production apps with a signficant core.logic component, so I’m heavily biased towards the practical things [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>17:00</h><w>norman</w>We (ThreatGRID) have probably one of the only production apps with a signficant core.logic component, so I’m heavily biased towards the practical things<div></div></z><z id="t1501174886" t="swizzard i hope you don’t get annoyed by me asking a bunch more dumb questions, because i’m only on chapter 2 of TRS [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>17:01</h><w>swizzard</w>i hope you don’t get annoyed by me asking a bunch more dumb questions, because i’m only on chapter 2 of TRS<div></div></z><z id="t1501174900" t="norman That’s 2 more chapters than most 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>17:01</h><w>norman</w>That’s 2 more chapters than most <b>🙂</b><div></div></z><z id="t1501174984" t="swizzard i have vague dreams of using CLP and maybe rete to build an “is my rpg breakable?” tester [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>17:03</h><w>swizzard</w>i have vague dreams of using CLP and maybe rete to build an “is my rpg breakable?” tester<div></div></z><z id="t1501174994" t="swizzard so i figure i need to actually understand logic programming first [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-27</d><h>17:03</h><w>swizzard</w>so i figure i need to actually understand logic programming first<div></div></z><z id="t1501452757" t="swizzard is there a good tutorial/documentation of core.logic-specific stuff? i’m probably just kind of dumb but i don’t really understand how e.g. defne works [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-30</d><h>22:12</h><w>swizzard</w>is there a good tutorial/documentation of core.logic-specific stuff? i’m probably just kind of dumb but i don’t really understand how e.g. <code>defne</code> works<div></div></z><z id="t1501452798" t="swizzard i’ve gone through the wiki a few times but it’s a little too high-level and scattershot for my taste [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-30</d><h>22:13</h><w>swizzard</w>i’ve gone through the wiki a few times but it’s a little too high-level and scattershot for my taste<div></div></z><z id="t1501452852" t="swizzard i’m also a bit dismayed about how old most of the projects on github that actually use c.l are, but that’s a separate issue [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-30</d><h>22:14</h><w>swizzard</w>i’m also a bit dismayed about how old most of the projects on github that actually use c.l are, but that’s a separate issue<div></div></z><z id="t1501516951" t="norman Not really. Many of the examples out there outdated, and few of them are written by people who have a strong understanding of core.logic. I don’t see much new being written, since for the most part core.logic has been abandoned. Being a core.* project with JIRA and the whole clojure process behind it means it’s unlikely that it will get significant contributions [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>16:02</h><w>norman</w>Not really. Many of the examples out there outdated, and few of them are written by people who have a strong understanding of core.logic.  I don’t see much new being written, since for the most part core.logic has been abandoned. Being a core.* project with JIRA and the whole clojure process behind it means it’s unlikely that it will get significant contributions<div></div></z><z id="t1501520522" t="mrchance [:attrs {:href &quot;/_/_/users/U090G4C05&quot;}] I am currently learning it too, maybe we can discover stuff together ;) defne, as I understood it, is just a short form for defn + matche [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:02</h><w>mrchance</w><a>@swizzard</a> I am currently learning it too, maybe we can discover stuff together ;) defne, as I understood it, is just a short form for defn + matche <div></div></z><z id="t1501520554" t="swizzard [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] why has it been abandoned? is there a better alternative? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:02</h><w>swizzard</w><a>@norman</a> why has it been abandoned? is there a better alternative?<div></div></z><z id="t1501520561" t="norman Nope [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:02</h><w>norman</w>Nope<div></div></z><z id="t1501520575" t="norman You could consider it basically done [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:02</h><w>norman</w>You could consider it basically done<div></div></z><z id="t1501520581" t="swizzard ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:03</h><w>swizzard</w>ok<div></div></z><z id="t1501520587" t="norman Although there’s lots more that could be done if anyone cared [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:03</h><w>norman</w>Although there’s lots more that could be done if anyone cared<div></div></z><z id="t1501520628" t="norman I think the bigger problem is that it’s a technology without much of a clear use. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:03</h><w>norman</w>I think the bigger problem is that it’s a technology without much of a clear use.<div></div></z><z id="t1501520665" t="norman At one point I considered possibly writing a core.logic book [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:04</h><w>norman</w>At one point I considered possibly writing a core.logic book<div></div></z><z id="t1501520685" t="norman So then I went out trying to find other people using core.logic in real applications [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:04</h><w>norman</w>So then I went out trying to find other people using core.logic in real applications<div></div></z><z id="t1501520701" t="norman And I really couldn’t find anyone besides us using [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:05</h><w>norman</w>And I really couldn’t find anyone besides us using<div></div></z><z id="t1501520704" t="swizzard hm [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:05</h><w>swizzard</w>hm<div></div></z><z id="t1501520727" t="norman Maybe more people would use it if they understood it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:05</h><w>norman</w>Maybe more people would use it if they understood it<div></div></z><z id="t1501520729" t="norman 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:05</h><w>norman</w><b>🙂</b><div></div></z><z id="t1501520760" t="swizzard ha, perhaps [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:06</h><w>swizzard</w>ha, perhaps<div></div></z><z id="t1501520803" t="norman As you’ve discovered, the reasoned schemer approach to learning core.logic isn’t great [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:06</h><w>norman</w>As you’ve discovered, the reasoned schemer approach to learning core.logic isn’t great<div></div></z><z id="t1501521357" t="hiredman at one point rackspace&apos;s managed security was using or planning on using core.logic, but I haven&apos;t seen them asking about it in a while so they may have changed it up [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:15</h><w>hiredman</w>at one point rackspace&apos;s managed security was using or planning on using core.logic, but I haven&apos;t seen them asking about it in a while so they may have changed it up<div></div></z><z id="t1501521466" t="hiredman I can&apos;t imagine any of the clojure teams I&apos;ve worked with letting something written in core.logic through code review. The first comment would be &quot;this would be clearer if you used map / filter / etc&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:17</h><w>hiredman</w>I can&apos;t imagine any of the clojure teams I&apos;ve worked with letting something written in core.logic through code review. The first comment would be &quot;this would be clearer if you used map / filter / etc&quot;<div></div></z><z id="t1501521907" t="norman We use core.logic because it’s the cleanest/clearest way to write complex queries. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:25</h><w>norman</w>We use core.logic because it’s the cleanest/clearest way to write complex queries.<div></div></z><z id="t1501521922" t="norman The abstraction you can get is really great [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:25</h><w>norman</w>The abstraction you can get is really great<div></div></z><z id="t1501521945" t="norman We have non-clojurists writing core.logic queries and they don’t even know it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:25</h><w>norman</w>We have non-clojurists writing core.logic queries and they don’t even know it<div></div></z><z id="t1501521969" t="hiredman sure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:26</h><w>hiredman</w>sure<div></div></z><z id="t1501522006" t="norman But we’ve worked really hard to give them good abstractions [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:26</h><w>norman</w>But we’ve worked really hard to give them good abstractions<div></div></z><z id="t1501522012" t="hiredman the initial introduction of core.logic is a tough hill to climb [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:26</h><w>hiredman</w>the initial introduction of core.logic is a tough hill to climb<div></div></z><z id="t1501522044" t="hiredman because at the beginning what you are doing isn&apos;t so complicated, so it seems like you could just do it with map and filter and whatever, and it would be easier for people to follow [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:27</h><w>hiredman</w>because at the beginning what you are doing isn&apos;t so complicated, so it seems like you could just do it with map and filter and whatever, and it would be easier for people to follow<div></div></z><z id="t1501522068" t="norman I mean, 95% of what we are using it for could honestly be done with datalog [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:27</h><w>norman</w>I mean, 95% of what we are using it for could honestly be done with datalog<div></div></z><z id="t1501522074" t="norman except the queries would be brutal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:27</h><w>norman</w>except the queries would be brutal<div></div></z><z id="t1501522103" t="hiredman the seq library is some kind of local maxima, and it takes a bunch of energy to get to something else [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:28</h><w>hiredman</w>the seq library is some kind of local maxima, and it takes a bunch of energy to get to something else<div></div></z><z id="t1501522166" t="hiredman I don&apos;t think a lot of teams can do it (as I&apos;ve said none of the teams I&apos;ve been on seemed to want to spend energy in that way) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:29</h><w>hiredman</w>I don&apos;t think a lot of teams can do it (as I&apos;ve said none of the teams I&apos;ve been on seemed to want to spend energy in that way)<div></div></z><z id="t1501522183" t="hiredman which is a shame (for core.logic and other things) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:29</h><w>hiredman</w>which is a shame (for core.logic and other things)<div></div></z><z id="t1501522351" t="norman I’d like to think there are good use cases for core.logic besides ours… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:32</h><w>norman</w>I’d like to think there are good use cases for core.logic besides ours…<div></div></z><z id="t1501522402" t="hiredman sorry, I think I am not being clear, I 100% think core.logic is a better for a lot of cases [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:33</h><w>hiredman</w>sorry, I think I am not being clear, I 100% think core.logic is a better for a lot of cases<div></div></z><z id="t1501522511" t="hiredman but it doesn&apos;t get used because programmers aren&apos;t willing to expend extra energy to escape the local maxima(the seq library) to get to something better [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:35</h><w>hiredman</w>but it doesn&apos;t get used because programmers aren&apos;t willing to expend extra energy to escape the local maxima(the seq library) to get to something better<div></div></z><z id="t1501523198" t="norman I don’t know clojure developers like that. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:46</h><w>norman</w>I don’t know clojure developers like that.<div></div></z><z id="t1501523249" t="norman But if I can’t tell them practical things they can do with core.logic, I can’t criticize them much for not using it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:47</h><w>norman</w>But if I can’t tell them practical things they can do with core.logic, I can’t criticize them much for not using it<div></div></z><z id="t1501523617" t="mrchance I want to use it to write a type checker, maybe you can help? I saw the basic type checker example, and I am wondering how I can get type errors from my program instead of () [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:53</h><w>mrchance</w>I want to use it to write a type checker, maybe you can help? I saw the basic type checker example, and I am wondering how I can get type errors from my program instead of <code>()</code> <div></div></z><z id="t1501523866" t="hiredman use conde [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:57</h><w>hiredman</w>use conde<div></div></z><z id="t1501523886" t="hiredman the type terms unify or add this error to a list of error messages [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>17:58</h><w>hiredman</w>the type terms unify or add this error to a list of error messages<div></div></z><z id="t1501524067" t="hiredman (I guess you&apos;d want conda instead maybe) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:01</h><w>hiredman</w>(I guess you&apos;d want conda instead maybe)<div></div></z><z id="t1501524174" t="mrchance Ok, that goes in the direction what I thought too, gonna try that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:02</h><w>mrchance</w>Ok, that goes in the direction what I thought too, gonna try that <div></div></z><z id="t1501524245" t="mrchance I read that conda is a non relational goal, what does that imply? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:04</h><w>mrchance</w>I read that conda is a non relational goal, what does that imply? <div></div></z><z id="t1501525205" t="hiredman I haven&apos;t used conda much, but if I recall it is committed choice [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:20</h><w>hiredman</w>I haven&apos;t used conda much, but if I recall it is committed choice<div></div></z><z id="t1501525276" t="hiredman with conde all the arms are tried in &quot;parallel&quot;, but conda only the first arm with the first goal that succeeds will be tried [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:21</h><w>hiredman</w>with conde all the arms are tried in &quot;parallel&quot;, but conda only the first arm with the first goal that succeeds will be tried<div></div></z><z id="t1501525318" t="hiredman which would make sense here, I think, if the type terms unify you don&apos;t care about building up a list of errors [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:21</h><w>hiredman</w>which would make sense here, I think, if the type terms unify you don&apos;t care about building up a list of errors<div></div></z><z id="t1501526308" t="mrchance Right, also confirms my expectations, was just worried it might have a performance impact or something [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>18:38</h><w>mrchance</w>Right, also confirms my expectations, was just worried it might have a performance impact or something<div></div></z><z id="t1501529389" t="urbank Is there still a plan to completely port it to clojurescript? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-07-31</d><h>19:29</h><w>urbank</w>Is there still a plan to completely port it to clojurescript?<div></div></z><z id="t1502117799" t="apeep Hi, I&apos;m new to this field, and from what I can see there&apos;s little activity towards implementing a probabilistic element to core.logic along the lines of probKanren, is that the case? Are there any projects out there using core.logic and applying fuzzy logic or answering problems with a probability-based answer? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-08-07</d><h>14:56</h><w>apeep</w>Hi, I&apos;m new to this field, and from what I can see there&apos;s little activity towards implementing a probabilistic element to  core.logic along the lines of probKanren, is that the case? Are there any projects out there using core.logic and applying fuzzy logic or answering problems with a probability-based answer?<div></div></z><z id="t1503400767" t="zilti How can I execute a core.logic goal repeatedly until exhausted, and use the result as a list in my logic program? I&apos;m looking for the equivalent to &quot;nesting&quot; a run expression, so to speak. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-08-22</d><h>11:19</h><w>zilti</w>How can I execute a <code>core.logic</code> goal repeatedly until exhausted, and use the result as a list in my logic program? I&apos;m looking for the equivalent to &quot;nesting&quot; a run expression, so to speak.<div></div></z><z id="t1503410322" t="zilti Basically what I have now is: (defn next-free-license [ltype] (run 1 [q] (fresh [licid tid link links license] (datascript= [tid :type/name ltype]) (datascript= [licid :license/type tid]) (datascript= [licid :license/key license]) (datascript= [licid :license/user link]) (membero link links) (== q [links licid license])))) Which gets me [(138 . _0) 6 &quot;532f16c2c9b13540eb6a&quot;] but I need [(138 143 151 153) 6 &quot;532f16c2c9b13540eb6a&quot;] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-08-22</d><h>13:58</h><w>zilti</w>Basically what I have now is:
<pre>(defn next-free-license [ltype]
  (run 1 [q]
       (fresh [licid tid link links license]
              (datascript= [tid :type/name ltype])
              (datascript= [licid :license/type tid])
              (datascript= [licid :license/key license])
              (datascript= [licid :license/user link])
              (membero link links)
              (== q [links licid license]))))
</pre>

Which gets me <code>[(138 . _0) 6 &quot;532f16c2c9b13540eb6a&quot;]</code> but I need <code>[(138 143 151 153) 6 &quot;532f16c2c9b13540eb6a&quot;]</code><div></div></z><z id="t1508750006" t="xtreak29 How can I get all the successions in the conde elements as below I need to store the values of z as a list. Similar to https://en.wikibooks.org/wiki/Prolog/Recursive_Rules where all the ancestors are listed (defn route [x y] (conde [(c x y)] [(fresh [z] (c x z) (route z y))])) (def facts (pldb/db [c &apos;a &apos;b] [c &apos;a &apos;x] [c &apos;b &apos;c] [c &apos;c &apos;d] [c &apos;d &apos;e])) (pldb/with-db facts (run* [q] (fresh [x y] (== x &apos;a) (== y &apos;e) (route x y) (== q (route x y))))) I need the result as [[a b][b c][c d][d e]] . Is it possible with core.logic ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>09:13</h><w>xtreak29</w>How can I get all the successions in the conde elements as below I need to store the values of z as a list. Similar to <a href="https://en.wikibooks.org/wiki/Prolog/Recursive_Rules" target="_blank">https://en.wikibooks.org/wiki/Prolog/Recursive_Rules</a> where all the ancestors are listed

<pre>(defn route [x y]
  (conde
   [(c x y)]
   [(fresh [z]
      (c x z)
      (route z y))]))

(def facts
  (pldb/db
   [c &apos;a &apos;b]
   [c &apos;a &apos;x]
   [c &apos;b &apos;c]
   [c &apos;c &apos;d]
   [c &apos;d &apos;e]))

(pldb/with-db facts
                 (run* [q]
                   (fresh [x y]
                     (== x &apos;a)
                     (== y &apos;e)
                     (route x y)
                     (== q  (route x y)))))
</pre>

I need the result as <code>[[a b][b c][c d][d e]]</code> . Is it possible with core.logic ?<div></div></z><z id="t1508751429" t="xtreak29 It seems it&apos;s not possible with core.logic : https://stackoverflow.com/questions/12563351/listing-unique-dag-parents-with-core-logic?rq=1 . Can someone explain the answer where David Nolen points out passing it to set constructor ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>09:37</h><w>xtreak29</w>It seems it&apos;s not possible with core.logic : <a href="https://stackoverflow.com/questions/12563351/listing-unique-dag-parents-with-core-logic?rq=1" target="_blank">https://stackoverflow.com/questions/12563351/listing-unique-dag-parents-with-core-logic?rq=1</a> . Can someone explain the answer where David Nolen points out passing it to set constructor ?<div></div></z><z id="t1508765822" t="norman I’d have to think some, but a couple notes: First, goals are not functions that return values. (== q (route x y)) is nonsensical on core.logic. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:37</h><w>norman</w>I’d have to think some, but a couple notes: First, goals are not functions that return values.  (== q (route x y)) is nonsensical on core.logic.<div></div></z><z id="t1508765837" t="norman If this is easily double you’d need: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:37</h><w>norman</w>If this is easily double you’d need:<div></div></z><z id="t1508765859" t="norman (route r x y) which asserts r is a route between x and y [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:37</h><w>norman</w>(route r x y) which asserts r is a route between x and y<div></div></z><z id="t1508765875" t="norman given the provided facts [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:37</h><w>norman</w>given the provided facts<div></div></z><z id="t1508765944" t="norman Then you’d assert (route q ’a ’e) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:39</h><w>norman</w>Then you’d assert (route q ’a ’e)<div></div></z><z id="t1508766041" t="norman Otherwise you can’t generate the path, only the fact that a path exists [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>13:40</h><w>norman</w>Otherwise you can’t generate the path, only the fact that a path exists<div></div></z><z id="t1508769276" t="xtreak29 [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] Thanks I am currently a newbie to core.logic and still trying to grasp it. I was trying to convert the Prolog examples of recursive relations to core.logic and also found the definition of relations using functions at https://github.com/swannodette/logic-tutorial/blob/master/src/logic_tutorial/tut1.clj#L18 and thought it&apos;s right to use functions as goals. The closest I have got to working is as below : (run-db* facts [q] (fresh [x] (== x &apos;a) (route x q))) ;; (x b c d e) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>14:34</h><w>xtreak29</w><a>@norman</a> Thanks I am currently a newbie to core.logic and still trying to grasp it. I was trying to convert the Prolog examples of recursive relations to core.logic and also found the definition of relations using functions at <a href="https://github.com/swannodette/logic-tutorial/blob/master/src/logic_tutorial/tut1.clj#L18" target="_blank">https://github.com/swannodette/logic-tutorial/blob/master/src/logic_tutorial/tut1.clj#L18</a> and thought it&apos;s right to use functions as goals. The closest I have got to working is as below : 

<pre>(run-db* facts [q]
                        (fresh [x]
                          (== x &apos;a)
                          (route x q))) ;; (x b c d e)
</pre><div></div></z><z id="t1508770159" t="norman Yes, that route is just a fact that asserts a route exists [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-23</d><h>14:49</h><w>norman</w>Yes, that route is just a fact that asserts a route exists<div></div></z><z id="t1508993893" t="bbss I&apos;m getting errors when using fd example: (run* [q] (fresh [x y] (fd/in x y (fd/interval 1 10)) (fd/+ x y 10) (== q [x y]))) ; =&gt; ([1 9] [2 8] [3 7] [4 6] [5 5] [6 4] [7 3] [8 2] [9 1]) Gives Exception Constrained variable &lt;lvar:q__50256&gt; without domain clojure.core.logic/verify-all-bound/verify-all-bound*--48690 (logic.clj:2136) from: https://github.com/clojure/core.logic/wiki/Features [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>04:58</h><w>bbss</w>I&apos;m getting errors when using fd example:
<pre>(run* [q]
  (fresh [x y]
    (fd/in x y (fd/interval 1 10))
    (fd/+ x y 10)
    (== q [x y]))) ; =&gt; ([1 9] [2 8] [3 7] [4 6] [5 5] [6 4] [7 3] [8 2] [9 1])
</pre>

Gives 
<pre>Exception Constrained variable &lt;lvar:q__50256&gt; without domain  clojure.core.logic/verify-all-bound/verify-all-bound*--48690 (logic.clj:2136)</pre>
from:
<a href="https://github.com/clojure/core.logic/wiki/Features" target="_blank">https://github.com/clojure/core.logic/wiki/Features</a><div></div></z><z id="t1508993925" t="bbss some of the fd examples from the test namespace also fail. using 0.8.11 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>04:58</h><w>bbss</w>some of the fd  examples from the test namespace also fail. using <code>0.8.11</code><div></div></z><z id="t1508993960" t="bbss it seems perfect for the problem I want to solve, finding build orders in StarCraft II 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>04:59</h><w>bbss</w>it seems perfect for the problem I want to solve, finding build orders in StarCraft II <b>🙂</b><div></div></z><z id="t1508994743" t="bbss I think in general core.logic would make for a useful tool in an RTS AI. What do people here think? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>05:12</h><w>bbss</w>I think in general core.logic would make for a useful tool in an RTS AI. What do people here think?<div></div></z><z id="t1508994811" t="bbss Maybe generate data to help train a neural net, or help it make decisions, that could then more easily be visualized. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>05:13</h><w>bbss</w>Maybe generate data to help train a neural net, or help it make decisions, that could then more easily be visualized.<div></div></z><z id="t1509003255" t="bbss figured out I was importing wrong, got it working now 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>07:34</h><w>bbss</w>figured out I was importing wrong, got it working now <b>🙂</b><div></div></z><z id="t1509048961" t="xtreak29 Is there a way to generate the constraints in a macro. I need the following : (pldb/with-db db (run 1 [q] (fresh [x y z a b c] (foo x y) (foo a b) (foo b c) ;; more constraints (== q [x y z a b c]))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>20:16</h><w>xtreak29</w>Is there a way to generate the constraints in a macro. I need the following : 

<pre>(pldb/with-db db (run 1 [q]
                     (fresh [x y z a b c]
                       (foo x y)
                       (foo a b)
                       (foo b c)
                       ;; more constraints
                       (== q [x y z a b c])))
</pre><div></div></z><z id="t1509049356" t="xtreak29 I can have many number of vars to fresh and also a lot of foo constraints. I have the following macro but it&apos;s not working. (defmacro my-fresh [db districts res] `(pldb/with-db ~db (run 1 [q] (fresh ~districts (map (fn [[x y]] (&apos;foo x y)) ~res) (== q ~districts))))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>20:22</h><w>xtreak29</w>I can have many number of vars to fresh and also a lot of foo constraints. I have the following macro but it&apos;s not working. 

<pre>(defmacro my-fresh
  [db districts res]
  `(pldb/with-db ~db (run 1 [q]
                       (fresh ~districts
                         (map (fn [[x y]] (&apos;foo x y)) ~res)
                         (== q ~districts)))))
</pre><div></div></z><z id="t1509050497" t="hiredman you don&apos;t need a macro [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>20:41</h><w>hiredman</w>you don&apos;t need a macro<div></div></z><z id="t1509050529" t="hiredman there is a goal that will combine a sequence of goals in to a single goal (via conjunction) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>20:42</h><w>hiredman</w>there is a goal that will combine a sequence of goals in to a single goal (via conjunction)<div></div></z><z id="t1509050571" t="hiredman https://github.com/clojure/core.logic/blob/29917372ef066c42ca362e3a94f68d620ddd1b56/src/main/clojure/clojure/core/logic.clj#L1273 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-26</d><h>20:42</h><w>hiredman</w><a href="https://github.com/clojure/core.logic/blob/29917372ef066c42ca362e3a94f68d620ddd1b56/src/main/clojure/clojure/core/logic.clj#L1273" target="_blank">https://github.com/clojure/core.logic/blob/29917372ef066c42ca362e3a94f68d620ddd1b56/src/main/clojure/clojure/core/logic.clj#L1273</a><div></div></z><z id="t1509083642" t="xtreak29 [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] Thanks. But how can I represent the lvars in fresh. I might have 3 lvars or 10 lvars to fresh and I might have and those lvars of the name mapped to different constraints. I am trying to solve the coloring problem using core.logic and I want to make the state var to be supplied as lvar to fresh . Also I have the neighbor clauses which I want to generate from a map. Does using and* correctly match the lvars from fresh to the one generated. I might be doing something wrong here since I am new to core.logic and clojure macros. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>05:54</h><w>xtreak29</w><a>@hiredman</a> Thanks. But how can I represent the lvars in fresh. I might have 3 lvars or 10 lvars to fresh and I might have and those lvars of the name mapped to different constraints. I am trying to solve the coloring problem using core.logic and I want to make the <code>state</code> var to be supplied as lvar to <code>fresh</code>. Also I have the <code>neighbor</code> clauses which I want to generate from a map. Does using and* correctly match the lvars from fresh to the one generated. I might be doing something wrong here since I am new to core.logic and clojure macros.<div></div></z><z id="t1509083676" t="xtreak29 Here I want states to be supplied to fresh : https://gist.github.com/tirkarthi/df7b99ad5d9d04745b67040093598984 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>05:54</h><w>xtreak29</w>Here I want states to be supplied to fresh : <a href="https://gist.github.com/tirkarthi/df7b99ad5d9d04745b67040093598984" target="_blank">https://gist.github.com/tirkarthi/df7b99ad5d9d04745b67040093598984</a><div></div></z><z id="t1509083768" t="hiredman https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L33-L35 is an old example of generating lvars dynamiclly [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>05:56</h><w>hiredman</w><a href="https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L33-L35" target="_blank">https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L33-L35</a> is an old example of generating lvars dynamiclly<div></div></z><z id="t1509083808" t="hiredman fresh you can think of as a macro, (fresh [x] ...) -&gt; (let [x (lvar)] ...) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>05:56</h><w>hiredman</w>fresh you can think of as a macro, (fresh [x] ...) -&gt; (let [x (lvar)] ...)<div></div></z><z id="t1509084363" t="xtreak29 Thanks. I saw the code for solve-bench . So I can just use (run 1 [q] (and (foo (:x bench) (:y bench)) (foo (:y bench) (:x bench))) (== q bench)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:06</h><w>xtreak29</w>Thanks. I saw the code for <code>solve-bench</code>. So I can just use 
<pre>(run 1 [q] 
(and (foo (:x bench) (:y bench)) 
        (foo (:y bench) (:x bench))) 
(== q bench))
</pre><div></div></z><z id="t1509084407" t="hiredman yes [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:06</h><w>hiredman</w>yes<div></div></z><z id="t1509084714" t="xtreak29 Is there a limit on the stack or anything in JVM for the number of lvars. I am trying to unify some 600 lvars against around 4000 goals. The prolog version segfaulted on my machine. Just wanted to know if something that big is done or possible technically. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:11</h><w>xtreak29</w>Is there a limit on the stack or anything in JVM for the number of lvars. I am trying to unify some 600 lvars against around 4000 goals. The prolog version segfaulted on my machine. Just wanted to know if something that big is done or possible technically.<div></div></z><z id="t1509084743" t="xtreak29 Also I realize the whole unification is dependent on each other and cannot be parallelized [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:12</h><w>xtreak29</w>Also I realize the whole unification is dependent on each other and cannot be parallelized<div></div></z><z id="t1509084822" t="hiredman I don&apos;t know [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:13</h><w>hiredman</w>I don&apos;t know<div></div></z><z id="t1509085723" t="pbaille Hi! I&apos;m a beginner with logic programing. does anyone mind to tell me how can I make this code work: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:28</h><w>pbaille</w>Hi! I&apos;m a beginner with logic programing. does anyone mind to tell me how can I make this code work:<div></div></z><z id="t1509085747" t="pbaille (run 1 [q] (fresh [dom a b] (== dom (apply fd/domain (range 11))) (l/everyg #(fd/in % dom) [a b]) (== q [a b]) (fd/* a b 100))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:29</h><w>pbaille</w><pre>(run 1 [q]
       (fresh [dom a b]
              (== dom (apply fd/domain (range 11)))
              (l/everyg #(fd/in % dom) [a b])
              (== q [a b])
              (fd/* a b 100)))
</pre><div></div></z><z id="t1509085797" t="pbaille I&apos;ve got this error: IllegalArgumentException No implementation of method: :-lb of protocol: #&apos;clojure.core.logic.fd/IInterval found for class: clojure.core.logic.LVar clojure.core/-cache-protocol-fn (core_deftype.clj:568) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:29</h><w>pbaille</w>I&apos;ve got this error: <code>IllegalArgumentException No implementation of method: :-lb of protocol: #&apos;clojure.core.logic.fd/IInterval found for class: clojure.core.logic.LVar  clojure.core/-cache-protocol-fn (core_deftype.clj:568)</code><div></div></z><z id="t1509085932" t="pbaille ok I&apos;ve found [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:32</h><w>pbaille</w>ok I&apos;ve found<div></div></z><z id="t1509085945" t="pbaille I have to use interval intead of row lvars [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:32</h><w>pbaille</w>I have to use interval intead of row lvars<div></div></z><z id="t1509085954" t="pbaille sorry for the noise [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>06:32</h><w>pbaille</w>sorry for the noise<div></div></z><z id="t1509090682" t="pbaille what are some logic programing utils libraries built on top of core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-27</d><h>07:51</h><w>pbaille</w>what are some logic programing utils libraries built on top of core.logic?<div></div></z><z id="t1509265386" t="pbaille anybody? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-29</d><h>08:23</h><w>pbaille</w>anybody?<div></div></z><z id="t1509265499" t="pbaille I&apos;m struggling with this simple relation, the results are incomplete, and I don&apos;t understand why. I&apos;m beginning with core.logic I don&apos;t know if it is a bug or my bad understanding of it. (require &apos;[clojure.core.logic :as l]) (require &apos;[clojure.core.logic.fd :as fd]) (defn zip+o [x y z] (l/conde [(l/== () x) (l/== () y) (l/== () z)] [(l/fresh [fx rx fy ry fz rz] (l/conso fx rx x) (l/conso fy ry y) (l/conso fz rz z) (fd/in fx fy fz (fd/interval 10)) (fd/+ fx fy fz) (zip+o rx ry rz))])) ; the same with defne macro (comment (l/defne zip+o [x y z] ([() () ()]) ([[fx . rx] [fy . ry] [fz . rz]] (fd/in fx fy fz (fd/interval 10)) (fd/+ fx fy fz) (zip+o rx ry rz)))) (def expected-solutions #{{:x [0 0] :y [1 1]} {:x [0 1] :y [1 0]} {:x [1 1] :y [0 0]} {:x [1 0] :y [0 1]}}) (l/run* [q] (l/fresh [x y] (l/== q {:x x :y y}) (zip+o x y [1 1]))) ;=&gt; ({:x (1 0), :y (0 1)} ; {:x (0 0), :y (1 1)}) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-29</d><h>08:24</h><w>pbaille</w>I&apos;m struggling with this simple relation, the results are incomplete, and I don&apos;t understand why.  

I&apos;m beginning with core.logic I don&apos;t know if it is a bug or my bad understanding of it.  

<pre>(require &apos;[clojure.core.logic :as l])
    (require &apos;[clojure.core.logic.fd :as fd])
    
    (defn zip+o [x y z]
      (l/conde
        [(l/== () x) (l/== () y) (l/== () z)]
        [(l/fresh [fx rx fy ry fz rz]
                  (l/conso fx rx x)
                  (l/conso fy ry y)
                  (l/conso fz rz z)
                  (fd/in fx fy fz (fd/interval 10))
                  (fd/+ fx fy fz)
                  (zip+o rx ry rz))]))
    
    ; the same with defne macro
    (comment
      (l/defne zip+o [x y z]
               ([() () ()])
               ([[fx . rx]
                 [fy . ry]
                 [fz . rz]]
                 (fd/in fx fy fz (fd/interval 10))
                 (fd/+ fx fy fz)
                 (zip+o rx ry rz))))
    
    (def expected-solutions
      #{{:x [0 0] :y [1 1]}
        {:x [0 1] :y [1 0]}
        {:x [1 1] :y [0 0]}
        {:x [1 0] :y [0 1]}})
    
    (l/run* [q]
            (l/fresh [x y]
                     (l/== q {:x x :y y})
                     (zip+o x y [1 1])))
    
    ;=&gt; ({:x (1 0), :y (0 1)}
    ;    {:x (0 0), :y (1 1)})
</pre><div></div></z><z id="t1509377330" t="norman I’m not familiar with the finite domain work. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-30</d><h>15:28</h><w>norman</w>I’m not familiar with the finite domain work.<div></div></z><z id="t1509377339" t="norman But if you change the fd/in to [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-30</d><h>15:28</h><w>norman</w>But if you change the fd/in to<div></div></z><z id="t1509377341" t="norman (l/membero fx [0 1 2 3 4 5]) (l/membero fy [0 1 2 3 4 5]) (l/membero fz [0 1 2 3 4 5]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-30</d><h>15:29</h><w>norman</w>(l/membero fx [0 1 2 3 4 5])
                (l/membero fy [0 1 2 3 4 5])
                (l/membero fz [0 1 2 3 4 5])<div></div></z><z id="t1509377341" t="norman it works [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-30</d><h>15:29</h><w>norman</w>it works<div></div></z><z id="t1509377463" t="norman So I suppose either there is a bug in fd/in or you are not using correctly here. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-10-30</d><h>15:31</h><w>norman</w>So I suppose either there is a bug in fd/in or you are not using correctly here.<div></div></z><z id="t1509630649" t="pbaille thank you [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] , i&apos;ve found a way to obtain the correct solution, see this ticket if interested https://dev.clojure.org/jira/browse/LOGIC-185 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-11-02</d><h>13:50</h><w>pbaille</w>thank you <a>@norman</a>, i&apos;ve found a way to obtain the correct solution, see this ticket if interested <a href="https://dev.clojure.org/jira/browse/LOGIC-185" target="_blank">https://dev.clojure.org/jira/browse/LOGIC-185</a><div></div></z><z id="t1509630673" t="pbaille I&apos;ve got another question [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-11-02</d><h>13:51</h><w>pbaille</w>I&apos;ve got another question<div></div></z><z id="t1509630810" t="pbaille I&apos;m going thru the reasoned schemer and i&apos;ve noticed that the order of excecution differ sometimes in core.logic. in particular &apos;conde&apos; seems to behave differently, looks like it tries all branch before doing any recursion. Any toughts on this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-11-02</d><h>13:53</h><w>pbaille</w>I&apos;m going thru the reasoned schemer and i&apos;ve noticed that the order of excecution differ sometimes in core.logic. in particular &apos;conde&apos; seems to behave differently, looks like it tries all branch before doing any recursion. Any toughts on this?<div></div></z><z id="t1509631319" t="pbaille (defn pairo [x] (fresh [y] (firsto x y))) (defn unwrapo [x y] (conde [(pairo x) (fresh [a] (firsto x a) (unwrapo a y))] [(== x y)])) (run* [q] (unwrapo &apos;(((pizza))) q)) ; ((((pizza))) ; ((pizza)) ; (pizza) ; pizza ; ) ;while in TRS it returns ; (pizza ; (pizza) ; ((pizza)) ; (((pizza))) ; ) ;both: (run 1 [q] (unwrapo q &apos;pizza)) ;and (run 1 [q] (unwrapo (list (list q)) &apos;pizza)) ;returns: ;=&gt; (pizza) ;while in TRS it returns ;=&gt; () [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-11-02</d><h>14:01</h><w>pbaille</w><pre>(defn pairo [x]
  (fresh [y] (firsto x y)))

(defn unwrapo [x y]
  (conde
    [(pairo x) (fresh [a] (firsto x a) (unwrapo a y))]
    [(== x y)]))

(run* [q] (unwrapo &apos;(((pizza))) q))
; ((((pizza))) 
;  ((pizza)) 
;  (pizza) 
;  pizza
; )

;while in TRS it returns

; (pizza
;  (pizza)
;  ((pizza))
;  (((pizza)))
; )


;both:
(run 1 [q] (unwrapo q &apos;pizza))
;and
(run 1 [q] (unwrapo (list (list q)) &apos;pizza))

;returns:

;=&gt; (pizza)

;while in TRS it returns

;=&gt; ()
</pre><div></div></z><z id="t1509645573" t="pbaille the wiki actually explain this difference, i&apos;ve missed it, sorry [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-11-02</d><h>17:59</h><w>pbaille</w>the wiki actually explain this difference, i&apos;ve missed it, sorry<div></div></z><z id="t1512598519" t="noprompt is there a rationale for why lvars as map keys do not unify? (run* [q] (fresh [a b] (== {a b} {:a 2}) (== q (list a b)))) ;; =&gt; () [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:15</h><w>noprompt</w>is there a rationale for why lvars as map keys do not unify?
<pre>(run* [q]
  (fresh [a b]
    (== {a b} {:a 2})
    (== q (list a b))))
;; =&gt; ()
</pre><div></div></z><z id="t1512598786" t="noprompt in my spare time i’ve been working on a term rewriting engine and was also confronted with the problem of unifying maps. i was able to find a solution that achieves this. i was surprised to find that core.logic doesn’t support this, however, i wouldn’t be surprised if i may have overlooked something in my own algorithm. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:19</h><w>noprompt</w>in my spare time i’ve been working on a term rewriting engine and was also confronted with the problem of unifying maps. i was able to find a solution that achieves this. i was surprised to find that <code>core.logic</code> doesn’t support this, however, i wouldn’t be surprised if i may have overlooked something in my own algorithm.<div></div></z><z id="t1512600267" t="hiredman there is no one way to do it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:44</h><w>hiredman</w>there is no one way to do it<div></div></z><z id="t1512600505" t="noprompt [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] explain. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:48</h><w>noprompt</w><a>@hiredman</a> explain.<div></div></z><z id="t1512600551" t="hiredman (== {a b c d} {:a 1 😛 2}) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:49</h><w>hiredman</w>(== {a b c d} {:a 1 <b>😛</b> 2})<div></div></z><z id="t1512600557" t="hiredman (== {a b c d} {:a 1 :b 2}) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:49</h><w>hiredman</w><code>(== {a b c d} {:a 1 :b 2})</code><div></div></z><z id="t1512600609" t="noprompt the algorithm i wrote unifies ground entries, then entries with ground values, then entries with ground keys, then entries where both the key and value are variable. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:50</h><w>noprompt</w>the algorithm i wrote unifies ground entries, then entries with ground values, then entries with ground keys, then entries where both the key and value are variable.<div></div></z><z id="t1512600635" t="hiredman there is no single unification for that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:50</h><w>hiredman</w>there is no single unification for that<div></div></z><z id="t1512600642" t="noprompt your example can be unified in multiple ways, the values can be streamed to a, b, c, and d in those cases. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:50</h><w>noprompt</w>your example can be unified in multiple ways, the values can be streamed to a, b, c, and d in those cases.<div></div></z><z id="t1512600657" t="noprompt actually, that’s not true. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:50</h><w>noprompt</w>actually, that’s not true.<div></div></z><z id="t1512600674" t="noprompt the fact there exists a solution refutes that argument. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:51</h><w>noprompt</w>the fact there exists a solution refutes that argument.<div></div></z><z id="t1512600729" t="noprompt so maybe my understanding here is misguided. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:52</h><w>noprompt</w>so maybe my understanding here is misguided.<div></div></z><z id="t1512600747" t="noprompt can you explain your emphasis on “single”? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:52</h><w>noprompt</w>can you explain your emphasis on “single”?<div></div></z><z id="t1512600848" t="hiredman lists are defined inductively via cons, so there is a one order they can be walked for unification, and that orders arises from the definition [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:54</h><w>hiredman</w>lists are defined inductively via cons, so there is a one order they can be walked for unification, and that orders arises from the definition<div></div></z><z id="t1512600920" t="hiredman maps are not inductively defined, so there is no single iteration order, so there is no fixed thing to wire in to the unifier [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:55</h><w>hiredman</w>maps are not inductively defined, so there is no single iteration order, so there is no fixed thing to wire in to the unifier<div></div></z><z id="t1512600969" t="hiredman you can do it, but you will have to make some choices to do it that preclude being general, which is what a library like core.logic is trying to do [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:56</h><w>hiredman</w>you can do it, but you will have to make some choices to do it that preclude being general, which is what a library like core.logic is trying to do<div></div></z><z id="t1512601038" t="noprompt i see. can you elaborate more on why the inductive property is important? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:57</h><w>noprompt</w>i see. can you elaborate more on why the inductive property is important?<div></div></z><z id="t1512601092" t="noprompt wrt core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>22:58</h><w>noprompt</w>wrt core.logic?<div></div></z><z id="t1512601380" t="noprompt i’m guessing the solution here would be to use another goal in favor of == which does stream the substitutions. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:03</h><w>noprompt</w>i’m guessing the solution here would be to use another goal in favor of <code>==</code> which does stream the substitutions.<div></div></z><z id="t1512601410" t="hiredman because unification has to traverse datastructures, if a datastructure is defined inductively, that is an order the structure can be traversed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:03</h><w>hiredman</w>because unification has to traverse datastructures, if a datastructure is defined inductively, that is an order the structure can be traversed<div></div></z><z id="t1512601486" t="hiredman I bet you could make it work if you either only used one concrete map type, or sorted it before unifying [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:04</h><w>hiredman</w>I bet you could make it work if you either only used one concrete map type, or sorted it before unifying<div></div></z><z id="t1512601565" t="noprompt the strategy i mentioned above works pretty well. although, again, my setting is term rewriting which expects the left-hand side of the equation to be ground. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:06</h><w>noprompt</w>the strategy i mentioned above works pretty well. although, again, my setting is term rewriting which expects the left-hand side of the equation to be ground.<div></div></z><z id="t1512601603" t="hiredman sure, if your model is less general then you can do more [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:06</h><w>hiredman</w>sure, if your model is less general then you can do more<div></div></z><z id="t1512602047" t="noprompt so, in the context of core logic, would the solution then be two stream the solutions via a custom goal? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:14</h><w>noprompt</w>so, in the context of core logic, would the solution then be two stream the solutions via a custom goal?<div></div></z><z id="t1512602167" t="noprompt i understand the rationale above now. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-06</d><h>23:16</h><w>noprompt</w>i understand the rationale above now.<div></div></z><z id="t1512606023" t="noprompt okay the custom goal seems to be the ticket. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-07</d><h>00:20</h><w>noprompt</w>okay the custom goal seems to be the ticket.<div></div></z><z id="t1512606058" t="noprompt [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] thanks for your answers previously. it’s clear now. 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-07</d><h>00:20</h><w>noprompt</w><a>@hiredman</a> thanks for your answers previously. it’s clear now. <b>🙂</b><div></div></z><z id="t1512770160" t="noprompt so now i’m curious, why not have == be guided by a protocol underneath that returns Substitutions ? since goals are expected to return a stream of substitutions it seems like it doesn’t necessarily need to be limited to either the unit stream or nil . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-08</d><h>21:56</h><w>noprompt</w>so now i’m curious, why not have <code>==</code> be guided by a protocol underneath that returns <code>Substitutions</code>? since goals are expected to return a stream of substitutions it seems like it doesn’t necessarily need to be limited to either the unit stream or <code>nil</code>.<div></div></z><z id="t1513032676" t="paulocuneo but it already does something like that(kinda), see IUnifyTerms [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-11</d><h>22:51</h><r>paulocuneo</r>but it already does something like that(kinda), see IUnifyTerms<div></div></z><z id="t1512770228" t="noprompt iow you could have an implementation of == for maps such that it returns a goal which, if possible, produces a stream all of the possible substitutions. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-08</d><h>21:57</h><w>noprompt</w>iow you could have an implementation of <code>==</code> for maps such that it returns a goal which, if possible, produces a stream all of the possible substitutions.<div></div></z><z id="t1512865004" t="noprompt Any takers? ☝️ :skin-tone-4: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-10</d><h>00:16</h><w>noprompt</w>Any takers? <b>☝️</b><b>:skin-tone-4:</b><div></div></z><z id="t1513121730" t="paulocuneo may I post a patch to any of the bugs from core.logic jira? most of them are not bugs, but a few are [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-12</d><h>23:35</h><w>paulocuneo</w>may I post a patch to any of the bugs from core.logic jira?
most of them are not bugs, but a few are<div></div></z><z id="t1513267111" t="noprompt [:attrs {:href &quot;/_/_/users/U487Z32UF&quot;}] have you signed the contributor agreement? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>15:58</h><w>noprompt</w><a>@paulocuneo</a> have you signed the contributor agreement?<div></div></z><z id="t1513908427" t="paulocuneo now I have [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-22</d><h>02:07</h><r>paulocuneo</r>now I have<div></div></z><z id="t1513277076" t="zignd in core.logic, considering i have a map as a logic variable, is it it possible to compare to the value of a specific keyword? i thought about doing it like this, but it doesn&apos;t work: (logic/run* [q] (logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}]) (logic/== (:name q) &quot;foo&quot;)) =&gt; () the only solution i found was to compare the logic variable to a map and adding logic variables to the values i don&apos;t know (logic/run* [q x] (logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}]) (logic/== q {:id x :name &quot;foo&quot;})) =&gt; ([{:id 1, :name &quot;foo&quot;} 1] [{:id 3, :name &quot;foo&quot;} 3]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>18:44</h><w>zignd</w>in core.logic, considering i have a map as a logic variable, is it it possible to compare to the value of a specific keyword?
i thought about doing it like this, but it doesn&apos;t work:
<pre>(logic/run* [q]
(logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}])
(logic/== (:name q) &quot;foo&quot;))
=&gt; ()
</pre>
the only solution i found was to compare the logic variable to a map and adding logic variables to the values i don&apos;t know
<pre>(logic/run* [q x]
(logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}])
(logic/== q {:id x :name &quot;foo&quot;}))
=&gt; ([{:id 1, :name &quot;foo&quot;} 1] [{:id 3, :name &quot;foo&quot;} 3])
</pre><div></div></z><z id="t1513278858" t="hiredman I use featurec (I think that is the name of the thing) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>19:14</h><w>hiredman</w>I use featurec (I think that is the name of the thing)<div></div></z><z id="t1513279035" t="zignd it works! thanks [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] ! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>19:17</h><w>zignd</w>it works! thanks <a>@hiredman</a>!<div></div></z><z id="t1513279041" t="zignd (logic/run* [q] (logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}]) (logic/featurec q {:name &quot;foo&quot;})) =&gt; ({:id 1, :name &quot;foo&quot;} {:id 3, :name &quot;foo&quot;}) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>19:17</h><w>zignd</w><pre>(logic/run* [q]
  (logic/membero q [{:id 1 :name &quot;foo&quot;} {:id 2 :name &quot;bar&quot;} {:id 3 :name &quot;foo&quot;}])
  (logic/featurec q {:name &quot;foo&quot;}))
=&gt; ({:id 1, :name &quot;foo&quot;} {:id 3, :name &quot;foo&quot;})
</pre><div></div></z><z id="t1513283767" t="dominicm https://stackoverflow.com/a/14532781 I&apos;m trying to do something similar to this. Except, I want to potentially build the query based on other lvars. I&apos;m not certain this makes sense as a question. How can I get a list of potential candidate values for an lvar at a the point of my query? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:36</h><w>dominicm</w><a href="https://stackoverflow.com/a/14532781" target="_blank">https://stackoverflow.com/a/14532781</a> I&apos;m trying to do something similar to this. Except, I want to potentially build the query based on other lvars. I&apos;m not certain this makes sense as a question. How can I get a list of potential candidate values for an lvar at a the point of my query?<div></div></z><z id="t1513283807" t="dominicm I pretty much just want to know &quot;oh, it&apos;s one of these numbers? I&apos;ll grab data for them&quot; vs &quot;Could be anything? I&apos;ll grab it all&quot; Might be nice to have some assertions in cases where I can only grab it with some constraint. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:36</h><w>dominicm</w>I pretty much just want to know &quot;oh, it&apos;s one of these numbers? I&apos;ll grab data for them&quot; vs &quot;Could be anything? I&apos;ll grab it all&quot; Might be nice to have some assertions in cases where I can only grab it with some constraint.<div></div></z><z id="t1513284009" t="hiredman you might look at https://github.com/hiredman/jiralog [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:40</h><w>hiredman</w>you might look at <a href="https://github.com/hiredman/jiralog" target="_blank">https://github.com/hiredman/jiralog</a><div></div></z><z id="t1513284060" t="dominicm That sounds very similar to my actual end goal, so probably a perfect example. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:41</h><w>dominicm</w>That sounds very similar to my actual end goal, so probably a perfect example.<div></div></z><z id="t1513284116" t="hiredman I think maybe I started from https://gist.github.com/terjesb/3181018 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:41</h><w>hiredman</w>I think maybe I started from <a href="https://gist.github.com/terjesb/3181018" target="_blank">https://gist.github.com/terjesb/3181018</a><div></div></z><z id="t1513284131" t="hiredman (or maybe the original that was forked from) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-14</d><h>20:42</h><w>hiredman</w>(or maybe the original that was forked from)<div></div></z><z id="t1513356871" t="dominicm I&apos;m using core logic to get a list of things, and infer properties about them. No answers (`nil`) is a perfectly valid answer, but I don&apos;t want to throw away an item which doesn&apos;t have an answer for a particular question. How can I do this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>16:54</h><w>dominicm</w>I&apos;m using core logic to get a list of things, and infer properties about them. No answers (`nil`) is a perfectly valid answer, but I don&apos;t want to throw away an item which doesn&apos;t have an answer for a particular question. How can I do this?<div></div></z><z id="t1513357750" t="hiredman user=&gt; (l/run* [q] (l/== q nil)) (nil) user=&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>17:09</h><w>hiredman</w><pre>user=&gt; (l/run* [q] (l/== q nil))
(nil)
user=&gt;
</pre><div></div></z><z id="t1513358283" t="dominicm [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] I&apos;ve potentially already got an answer for my question though, so I can&apos;t do that. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>17:18</h><w>dominicm</w><a>@hiredman</a> I&apos;ve potentially already got an answer for my question though, so I can&apos;t do that.<div></div></z><z id="t1513358341" t="hiredman user=&gt; (l/run* [q] (l/conde [(l/== q nil)] [(l/!= q nil)])) (nil (_0 :- (!= (_0 nil)))) user=&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>17:19</h><w>hiredman</w><pre>user=&gt; (l/run* [q] (l/conde [(l/== q nil)] [(l/!= q nil)]))
(nil (_0 :- (!= (_0 nil))))
user=&gt;
</pre><div></div></z><z id="t1513358672" t="dominicm [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] Thanks, that led me to my solution. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>17:24</h><w>dominicm</w><a>@hiredman</a> Thanks, that led me to my solution.<div></div></z><z id="t1513359519" t="dominicm (l/run* [x q] (l/== x 10) (fn [a] (l/to-stream []))) I have a case where this could happen. How can I detect that q hasn&apos;t been bound and mark it as nil, so that I still get an answer about x? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>17:38</h><w>dominicm</w><pre>(l/run*
    [x q]
    (l/== x 10)
    (fn [a]
      (l/to-stream [])))
</pre>

I have a case where this could happen. How can I detect that q hasn&apos;t been bound and mark it as nil, so that I still get an answer about x?<div></div></z><z id="t1513375578" t="paulocuneo do you really really really really need to check if x is &quot;fresh&quot; (i guess thats what you mean with unbound)? ;; Following code loses relational properties (conde [(lvaro q) ;; q is fresh... ] [(nonlvaro q) ;; q is not fresh ]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-15</d><h>22:06</h><w>paulocuneo</w>do you really really really really need to check if x is &quot;fresh&quot; (i guess thats what you mean with unbound)? 

;; Following code loses relational properties

(conde [(lvaro q) 
             ;; q is fresh...
             ] 
            [(nonlvaro q)
             ;; q is not fresh 
            ])<div></div></z><z id="t1513383525" t="dominicm Maybe I need to figure out aggregates properly, and this will go away. I&apos;m using core logic as a query engine, so I&apos;m doing a sort of &quot;get this relationship or else return nothing&quot;, all centred around a main entity. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:18</h><w>dominicm</w>Maybe I need to figure out aggregates properly, and this will go away. I&apos;m using core logic as a query engine, so I&apos;m doing a sort of &quot;get this relationship or else return nothing&quot;, all centred around a main entity.<div></div></z><z id="t1513384028" t="hiredman you should look at the string contains constraint in jiralog [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:27</h><w>hiredman</w>you should look at the string contains constraint in jiralog<div></div></z><z id="t1513384427" t="hiredman when writing a core.logic connector to some datastore, what I recommend starting with, which is the simplest thing, is to not have much of a query optimizer. just pull everything out of the datastore, feed it through to-stream [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:33</h><w>hiredman</w>when  writing a core.logic connector to some datastore, what I recommend starting with, which is the simplest thing, is to not have much of a query optimizer. just pull everything out of the datastore, feed it through <code>to-stream</code><div></div></z><z id="t1513384726" t="hiredman the way to write that is as a relation like (edge a b) , the simple implementation being something that takes a and looks in your datastore for the edges, then does the to-stream magic to generate a stream of results where b is bound to each edge [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:38</h><w>hiredman</w>the way to write that is as a relation like <code>(edge a b)</code>, the simple implementation being something that takes a  and looks in your datastore for the edges, then does the to-stream magic to generate a stream of results where b is bound to each edge<div></div></z><z id="t1513384758" t="hiredman but at some point you will want to write a logic program where a is not ground at the point where the search reaches that goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:39</h><w>hiredman</w>but at some point you will want to write a logic program where a is not ground at the point where the search reaches that goal<div></div></z><z id="t1513384786" t="hiredman and you can&apos;t send a logic variable to your datastore for searching [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:39</h><w>hiredman</w>and you can&apos;t send a logic variable to your datastore for searching<div></div></z><z id="t1513384920" t="hiredman instead of a normal relation goal you can write a constraint, which can sort of delay its actions until a and b are both ground, constraints can&apos;t generate possible solutions in the search tree, they only prune it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:42</h><w>hiredman</w>instead of a normal relation goal you can write a constraint, which can sort of delay its actions until a and b are both ground, constraints can&apos;t generate possible solutions in the search tree, they only prune it<div></div></z><z id="t1513384951" t="hiredman (I could be misremembering that, but I don&apos;t think I am) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:42</h><w>hiredman</w>(I could be misremembering that, but I don&apos;t think I am)<div></div></z><z id="t1513385216" t="hiredman depending on what exactly you are doing, you may be better off writing your own datalog, which would feel similar to core.logic but give you more control over the guts [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>00:46</h><w>hiredman</w>depending on what exactly you are doing, you may be better off writing your own datalog, which would feel similar to core.logic but give you more control over the guts<div></div></z><z id="t1513433198" t="zignd is it possible to define ordering in the results of a run* call? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>14:06</h><w>zignd</w>is it possible to define ordering in the results of a <code>run*</code> call?<div></div></z><z id="t1513433253" t="zignd i&apos;m using core.logic to query data structures that are basically vectors of maps [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>14:07</h><w>zignd</w>i&apos;m using <code>core.logic</code> to query data structures that are basically vectors of maps<div></div></z><z id="t1513433288" t="zignd and right now i&apos;m doing it from the outside, using sort-by for example [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>14:08</h><w>zignd</w>and right now i&apos;m doing it from the outside, using <code>sort-by</code> for example<div></div></z><z id="t1513433386" t="zignd considering run* accepts lvars and expressions to constrain the result it doesn&apos;t really make sense i suppose, but i&apos;d like to confirm [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2017-12-16</d><h>14:09</h><w>zignd</w>considering <code>run*</code> accepts lvars and expressions to constrain the result it doesn&apos;t really make sense i suppose, but i&apos;d like to confirm<div></div></z><z id="t1515466776" t="timothypratley Invalid :refer, var cljs.core.logic/permuteo does not exist --- is this expected? (ClojureScript) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>02:59</h><w>timothypratley</w>Invalid :refer, var cljs.core.logic/permuteo does not exist    --- is this expected? (ClojureScript)<div></div></z><z id="t1515470551" t="noprompt [:attrs {:href &quot;/_/_/users/U06S1EJPL&quot;}] are you able to use permuteo without :refer ? i.e. logic/permuteo . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>04:02</h><w>noprompt</w><a>@timothypratley</a> are you able to use <code>permuteo</code> without <code>:refer</code>? i.e. <code>logic/permuteo</code>.<div></div></z><z id="t1515490544" t="reefersleep I’ve got a hobby project building a Dominion ( https://boardgamegeek.com/boardgame/36218/dominion ) randomizer with a web interface. For those that don’t know Dominion, the purpose of a randomizer is to set up an initial game state by randomly picking 10 piles of cards from those piles available, with a few custom rules occasionally. That task is very simple in and of itself, but I’d like to make it possible for the end user to customize the randomization with certain parameters, like, “less than 5 piles must contain attack cards” and “1 of the piles must be a certain pile” and “more than 2 piles must be victory cards” (and probably more constraints will appear once the possibilities start unfolding 🙂 ). Is core.logic a good fit for something like this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>09:35</h><w>reefersleep</w>I’ve got a hobby project building a Dominion ( <a href="https://boardgamegeek.com/boardgame/36218/dominion" target="_blank">https://boardgamegeek.com/boardgame/36218/dominion</a> ) randomizer with a web interface. For those that don’t know Dominion, the purpose of a randomizer is to set up an initial game state by randomly picking 10 piles of cards from those piles available, with a few custom rules occasionally. That task is very simple in and of itself, but I’d like to make it possible for the end user to customize the randomization with certain parameters, like, “less than 5 piles must contain attack cards” and “1 of the piles must be a certain pile” and “more than 2 piles must be victory cards” (and probably more constraints will appear once the possibilities start unfolding <b>🙂</b> ). Is <code>core.logic</code> a good fit for something like this?<div></div></z><z id="t1515512835" t="timothypratley hi [:attrs {:href &quot;/_/_/users/U06MDAPTP&quot;}] 🙂 no, I am unable to use permuteo by qualifying it either. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>15:47</h><w>timothypratley</w>hi <a>@noprompt</a> <b>🙂</b> no, I am unable to use <code>permuteo</code> by qualifying it either.<div></div></z><z id="t1515512909" t="timothypratley [:attrs {:href &quot;/_/_/users/U0AQ3HP9U&quot;}] IMO yes, perfect 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>15:48</h><w>timothypratley</w><a>@reefersleep</a> IMO yes, perfect <b>🙂</b><div></div></z><z id="t1515519757" t="noprompt [:attrs {:href &quot;/_/_/users/U06S1EJPL&quot;}] sounds like you’ve got a bug report to make! 😉 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>17:42</h><w>noprompt</w><a>@timothypratley</a> sounds like you’ve got a bug report to make! <b>😉</b><div></div></z><z id="t1515520039" t="timothypratley hehehe okidoki [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-09</d><h>17:47</h><w>timothypratley</w>hehehe okidoki<div></div></z><z id="t1515575558" t="reefersleep [:attrs {:href &quot;/_/_/users/U06S1EJPL&quot;}] thanks, I’ll give it a go then! I’ve been wanting an excuse to learn and use logic programmin anyway 😉 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-10</d><h>09:12</h><w>reefersleep</w><a>@timothypratley</a> thanks, I’ll give it a go then! I’ve been wanting an excuse to learn and use logic programmin anyway <b>😉</b><div></div></z><z id="t1515575955" t="reefersleep I’ve been reading the examples https://github.com/clojure/core.logic/wiki/Examples and the Primer https://github.com/clojure/core.logic/wiki/A-Core.logic-Primer , so I think I get the gist of core.logic . But there are many functions in the namespace, and I don’t feel the docstrings https://clojure.github.io/core.logic/ get me all the way to understanding them. There are a lot of references in all kinds of directions in the wiki, but do you know of one(s) that explains the usage of core.logic (and core.logic.fd ) beyond the Primer? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-10</d><h>09:19</h><w>reefersleep</w>I’ve been reading the examples <a href="https://github.com/clojure/core.logic/wiki/Examples" target="_blank">https://github.com/clojure/core.logic/wiki/Examples</a> and the Primer <a href="https://github.com/clojure/core.logic/wiki/A-Core.logic-Primer" target="_blank">https://github.com/clojure/core.logic/wiki/A-Core.logic-Primer</a>, so I think I get the gist of <code>core.logic</code>. But there are many functions in the namespace, and I don’t feel the docstrings <a href="https://clojure.github.io/core.logic/" target="_blank">https://clojure.github.io/core.logic/</a> get me all the way to understanding them. There are a lot of references in all kinds of directions in the wiki, but do you know of one(s) that explains the usage of <code>core.logic</code> (and  <code>core.logic.fd</code> ) beyond the Primer?<div></div></z><z id="t1515675418" t="reefersleep A guy at work told me I should just read up on MiniKanren, since core.logic is an implementation of that. So maybe William Byrd’s dissertation, as linked in the core.logic README http://pqdtopen.proquest.com/#abstract?dispub=3380156 , should be my go-to resource? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-11</d><h>12:56</h><w>reefersleep</w>A guy at work told me I should just read up on MiniKanren, since <code>core.logic</code> is an implementation of that. So maybe William Byrd’s dissertation, as linked in the <code>core.logic</code> README <a href="http://pqdtopen.proquest.com/#abstract?dispub=3380156" target="_blank">http://pqdtopen.proquest.com/#abstract?dispub=3380156</a> , should be my go-to resource?<div></div></z><z id="t1515702404" t="dominicm [:attrs {:href &quot;/_/_/users/U0AQ3HP9U&quot;}] Depending on your time, I understand that &quot;The Reasoned Schemer&quot; can be followed with core.logic with few exceptions. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-11</d><h>20:26</h><w>dominicm</w><a>@reefersleep</a> Depending on your time, I understand that &quot;The Reasoned Schemer&quot; can be followed with core.logic with few exceptions.<div></div></z><z id="t1515703513" t="hiredman µKanren is also a thing now ( http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf ) which is a further reduced set of core primitives [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-11</d><h>20:45</h><w>hiredman</w>µKanren is also a thing now (<a href="http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf" target="_blank">http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf</a>) which is a further reduced set of core primitives<div></div></z><z id="t1515854772" t="reefersleep [:attrs {:href &quot;/_/_/users/U09LZR36F&quot;}] cheers 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-13</d><h>14:46</h><w>reefersleep</w><a>@dominicm</a> cheers <b>🙂</b><div></div></z><z id="t1515854787" t="reefersleep core.logic does not seem easily approachable! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-13</d><h>14:46</h><w>reefersleep</w><code>core.logic</code> does not seem easily approachable!<div></div></z><z id="t1515950329" t="norman #understatement 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>17:18</h><w>norman</w>#understatement <b>🙂</b><div></div></z><z id="t1515950865" t="reefersleep So, I want to input a number of parameters, and have core.logic deliver some success scenarios to me. If I want to guarantee randomness among those scenarios, I’m guessing I can’t rely on core.logic ? That is - I have to take all of those success scenarios, and pick randomly among them, post run . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>17:27</h><w>reefersleep</w>So, I want to input a number of parameters, and have <code>core.logic</code> deliver some success scenarios to me. If I want to guarantee randomness among those scenarios, I’m guessing I can’t rely on <code>core.logic</code>? That is - I have to take all of those success scenarios, and pick randomly among them, post <code>run</code>.<div></div></z><z id="t1515950905" t="reefersleep However, if sufficiently few parameters (they are all optional) are input, I predict that the number of success scenarios will be astronomic.. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>17:28</h><w>reefersleep</w>However, if sufficiently few parameters (they are all optional) are input, I predict that the number of success scenarios will be astronomic..<div></div></z><z id="t1515950921" t="reefersleep Is there a smart way to solve this [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>17:28</h><w>reefersleep</w>Is there a smart way to solve this<div></div></z><z id="t1515950922" t="reefersleep ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>17:28</h><w>reefersleep</w>?<div></div></z><z id="t1515967870" t="reefersleep To be clear; I’m expecting core.logic to output an astromonomic number of solutions. Ideally, I’d like the final result to be a completely random one of these solution. Since it may be that the entire corpus of solutions cannot fit in memory, ideally, I’d like core.logic to ensure randomness in its resulting seq of solutions, if possible. Can it? Or do I have to puzzle out some adequate post-`run*` randomization myself? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-14</d><h>22:11</h><w>reefersleep</w>To be clear; I’m expecting <code>core.logic</code> to output an astromonomic number of solutions. Ideally, I’d like the final result to be a completely random one of these solution. Since it may be that the entire corpus of solutions cannot fit in memory, ideally, I’d like <code>core.logic</code> to ensure randomness in its resulting seq of solutions, if possible. Can it? Or do I have to puzzle out some adequate post-`run*` randomization myself?<div></div></z><z id="t1516078460" t="norman core.logic does not guarantee (or attempt to provide) randomness [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>04:54</h><w>norman</w>core.logic does not guarantee (or attempt to provide) randomness<div></div></z><z id="t1516094752" t="reefersleep Cheers [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] , that confirms my suspicion [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>09:25</h><w>reefersleep</w>Cheers <a>@norman</a>, that confirms my suspicion<div></div></z><z id="t1516094987" t="reefersleep So potentially, I can use core.logic to know whether there is a viable solution for my set of parameters or not, and, if I slack on the randomness, what such a solution could look like. Hm. I think it may still make sense to incorporate it in my program logic, but I have to think more about how 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>09:29</h><w>reefersleep</w>So potentially, I can use <code>core.logic</code> to know whether there is a viable solution for my set of parameters or not, and, if I slack on the randomness, what such a solution could look like. Hm. I think it may still make sense to incorporate it in my program logic, but I have to think more about how <b>🙂</b><div></div></z><z id="t1516121730" t="reefersleep In The Reasoned Schemer, definition 54 (of membero), I don&apos;t understand how the nullo line can be left out. From my perspective, this would then cause an infinite recursive loop in the &quot;else&quot; part. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>16:55</h><w>reefersleep</w>In The Reasoned Schemer, definition 54 (of membero), I don&apos;t understand how the nullo line can be left out. From my perspective, this would then cause an infinite recursive loop in the &quot;else&quot; part.<div></div></z><z id="t1516121800" t="reefersleep Maybe I don&apos;t fully understand cdro - I suppose that this should fail when given an empty list and a fresh lvar. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>16:56</h><w>reefersleep</w>Maybe I don&apos;t fully understand cdro - I suppose that this should fail when given an empty list and a fresh lvar.<div></div></z><z id="t1516122059" t="reefersleep Ah, I see, I think... I&apos;ll end up with (== (lvar1 lvar2) ()) or something to that effect inside the cdro body. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>17:00</h><w>reefersleep</w>Ah, I see, I think... I&apos;ll end up with (== (lvar1 lvar2) ()) or something to that effect inside the cdro body.<div></div></z><z id="t1516134132" t="reefersleep Thanks for rubber ducking, everyone 😄 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>20:22</h><w>reefersleep</w>Thanks for rubber ducking, everyone <b>😄</b><div></div></z><z id="t1516134280" t="reefersleep What can one use instead of everyg in Clojurescript core.logic ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-01-16</d><h>20:24</h><w>reefersleep</w>What can one use instead of <code>everyg</code> in Clojurescript <code>core.logic</code>?<div></div></z><z id="t1518220968" t="Justin hey, I am extremely-not a logical programming pro, I&apos;ve been trying to use core.logic to generate test cases with somewhat complex constraints, and it works pretty decently for the most part as far as being a nice way to specify my constraints. the problem I&apos;m facing now is that it tends to get stuck in particular branches of the search tree, when in reality I&apos;d like to do something of a uniform-ish (for some meaning of uniform) sampling of the search tree - is there a way of doing this kind of thing in core.logic or am I using the wrong tool? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:02</h><w>Justin</w>hey, I am extremely-not a logical programming pro, I&apos;ve been trying to use core.logic to generate test cases with somewhat complex constraints, and it works pretty decently for the most part as far as being a nice way to specify my constraints. the problem I&apos;m facing now is that it tends to get stuck in particular branches of the search tree, when in reality I&apos;d like to do something of a uniform-ish (for some meaning of uniform) sampling of the search tree - is there a way of doing this kind of thing in core.logic or am I using the wrong tool?<div></div></z><z id="t1518221415" t="hiredman what do you mean by stuck? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:10</h><w>hiredman</w>what do you mean by stuck?<div></div></z><z id="t1518221464" t="hiredman core.logic uses a sort of streaming interleaving technique to avoid getting stuck in divergent goals [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:11</h><w>hiredman</w>core.logic uses a sort of streaming interleaving technique to avoid getting stuck in divergent goals<div></div></z><z id="t1518221641" t="Justin so I guess it&apos;s possible that I don&apos;t fully understand my problem 🙂 I guess what I&apos;m seeing more concretely is like, the DFS is very observable in the output of my program [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:14</h><w>Justin</w>so I guess it&apos;s possible that I don&apos;t fully understand my problem <b>🙂</b> I guess what I&apos;m seeing more concretely is like, the DFS is very observable in the output of my program<div></div></z><z id="t1518221673" t="Justin perhaps &quot;stuck&quot; was the wrong word - it is finding plenty of solutions, I would like to somehow have a way of generating more varied solutions [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:14</h><w>Justin</w>perhaps &quot;stuck&quot; was the wrong word - it is finding plenty of solutions, I would like to somehow have a way of generating more varied solutions<div></div></z><z id="t1518221745" t="hiredman it will depend on the structure of your goals, but if you have a recursive goal that never reaches a base case for example, core.logic will still search other branches around that goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:15</h><w>hiredman</w>it will depend on the structure of your goals, but if you have a recursive goal that never reaches a base case for example, core.logic will still search other branches around that goal<div></div></z><z id="t1518221774" t="hiredman core.logic will generate every possible solution [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:16</h><w>hiredman</w>core.logic will generate every possible solution<div></div></z><z id="t1518221801" t="hiredman but you have little to no control of the order in which it generates them [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:16</h><w>hiredman</w>but you have little to no control of the order in which it generates them<div></div></z><z id="t1518221982" t="Justin I see, and there&apos;s no way I can say. limit the number of solutions that are reported from a particular branch? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:19</h><w>Justin</w>I see, and there&apos;s no way I can say. limit the number of solutions that are reported from a particular branch?<div></div></z><z id="t1518222000" t="hiredman no [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:20</h><w>hiredman</w>no<div></div></z><z id="t1518222018" t="Justin i see, ok, thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:20</h><w>Justin</w>i see, ok, thanks<div></div></z><z id="t1518222067" t="hiredman you may want to look at test.check or data.generators, or spec for generating test cases [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:21</h><w>hiredman</w>you may want to look at test.check or data.generators, or spec for generating test cases<div></div></z><z id="t1518222179" t="Justin I haven&apos;t looked at test.check specifically but none of the quickcheck-likes I investigated seemed to allow me to do the same kind of branching search and goal-specifying that a prolog-like would [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:22</h><w>Justin</w>I haven&apos;t looked at test.check specifically but none of the quickcheck-likes I investigated seemed to allow me to do the same kind of branching search and goal-specifying that a prolog-like would<div></div></z><z id="t1518222186" t="Justin I feel like what I really want is some hybrid of those [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:23</h><w>Justin</w>I feel like what I really want is some hybrid of those<div></div></z><z id="t1518222304" t="hiredman of course I don&apos;t know what you are generating, but I would be surprised you couldn&apos;t do it via test.check [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:25</h><w>hiredman</w>of course I don&apos;t know what you are generating, but I would be surprised you couldn&apos;t do it via test.check<div></div></z><z id="t1518222355" t="Justin ok, I will investigate that, thanks for the assistance [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-10</d><h>00:25</h><w>Justin</w>ok, I will investigate that, thanks for the assistance<div></div></z><z id="t1519509067" t="cjsauer Hi all, I&apos;m currently making my way through The Reasoned Schemer and have hit a bit of a block upon reaching chapter 4. I&apos;m noticing that &quot;the second commandment&quot; produces logic functions that don&apos;t actually result in valid solutions. Especially in the case of rembero , e.g. frame 49. I skipped ahead a few pages to find the definition of surpriso , in which the book does admit that something strange is going on, but it wasn&apos;t followed with any kind of explanation as to a fix to this issue. Chapter 5 seems to continue right along without an explanation either... Anyone else encounter this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-24</d><h>21:51</h><w>cjsauer</w>Hi all, I&apos;m currently making my way through The Reasoned Schemer and have hit a bit of a block upon reaching chapter 4. I&apos;m noticing that &quot;the second commandment&quot; produces logic functions that don&apos;t actually result in valid solutions. Especially in the case of <code>rembero</code>, e.g. frame 49. I skipped ahead a few pages to find the definition of <code>surpriso</code>, in which the book does admit that something strange is going on, but it wasn&apos;t followed with any kind of explanation as to a fix to this issue. Chapter 5 seems to continue right along without an explanation either...
Anyone else encounter this?<div></div></z><z id="t1519509241" t="cjsauer Quick example to illustrate the point: (defn rembero [x l out] (conde [(emptyo l) (== out &apos;())] [(eq-firsto l x) (resto l out)] [s# (fresh [a d res] (conso a d l) (rembero x d res) (conso a res out))])) (run* [r] (fresh [y z] (rembero y (list y &apos;d z &apos;e) (list y &apos;d &apos;e)) (== (list y z) r))) ;; =&gt; ((d d) ;; (d d) ;; (_0 _0) ;; (e e)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-24</d><h>21:54</h><w>cjsauer</w>Quick example to illustrate the point:
<pre>(defn rembero
  [x l out]
  (conde
   [(emptyo l) (== out &apos;())]
   [(eq-firsto l x) (resto l out)]
   [s# (fresh [a d res]
         (conso a d l)
         (rembero x d res)
         (conso a res out))]))

(run* [r]
  (fresh [y z]
    (rembero y (list y &apos;d z &apos;e) (list y &apos;d &apos;e))
    (== (list y z) r)))
;; =&gt; ((d d)
;;     (d d)
;;     (_0 _0)
;;     (e e))
</pre><div></div></z><z id="t1519509276" t="cjsauer The last two solutions ((_0 _0) (e e)) don&apos;t satisfy the original constraint... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-24</d><h>21:54</h><w>cjsauer</w>The last two solutions <code>((_0 _0) (e e))</code> don&apos;t satisfy the original constraint...<div></div></z><z id="t1519509611" t="cjsauer Ah, I found this thread https://groups.google.com/forum/#!topic/clojure/_z6-ZDiPh6A But no satisfying reply has yet been posted. [:attrs {:href &quot;/_/_/users/U050B88UR&quot;}] looks like maybe you came up against this issue as well (albeit years ago). Did you ever reach a satisfying conclusion? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-24</d><h>22:00</h><w>cjsauer</w>Ah, I found this thread <a href="https://groups.google.com/forum/#!topic/clojure/_z6-ZDiPh6A" target="_blank">https://groups.google.com/forum/#!topic/clojure/_z6-ZDiPh6A</a>
But no satisfying reply has yet been posted. <a>@dnolen</a> looks like maybe you came up against this issue as well (albeit years ago). Did you ever reach a satisfying conclusion?<div></div></z><z id="t1519667175" t="cjsauer Looks like the solution is to use the != function, as described here: https://groups.google.com/forum/#!topic/minikanren/JCKJV7k7lGU [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-26</d><h>17:46</h><w>cjsauer</w>Looks like the solution is to use the <code>!=</code> function, as described here: <a href="https://groups.google.com/forum/#!topic/minikanren/JCKJV7k7lGU" target="_blank">https://groups.google.com/forum/#!topic/minikanren/JCKJV7k7lGU</a><div></div></z><z id="t1519667483" t="cjsauer Turns out rembero is a core.logic function already as well, in case anyone is interested: (defne rembero &quot;A relation between l and o where x is removed from l exactly one time.&quot; [x l o] ([_ [x . xs] xs]) ([_ [y . ys] [y . zs]] (!= y x) (rembero x ys zs))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-26</d><h>17:51</h><w>cjsauer</w>Turns out <code>rembero</code> is a core.logic function already as well, in case anyone is interested:
<pre>(defne rembero
  &quot;A relation between l and o where x is removed from
   l exactly one time.&quot;
  [x l o]
  ([_ [x . xs] xs])
  ([_ [y . ys] [y . zs]]
     (!= y x)
     (rembero x ys zs)))
</pre><div></div></z><z id="t1519785391" t="devn [:attrs {:href &quot;/_/_/users/U6GFE9HS7&quot;}] out of curiosity which version of the reasoned schemer? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-28</d><h>02:36</h><w>devn</w><a>@cjsauer</a> out of curiosity which version of the reasoned schemer?<div></div></z><z id="t1519833372" t="cjsauer [:attrs {:href &quot;/_/_/users/U06DQC6MA&quot;}] this is the first edition text (2005). I noticed that there is a second edition being released soon here ( https://mitpress.mit.edu/books/reasoned-schemer-0 ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-02-28</d><h>15:56</h><w>cjsauer</w><a>@devn</a> this is the first edition text (2005). I noticed that there is a second edition being released soon here (<a href="https://mitpress.mit.edu/books/reasoned-schemer-0" target="_blank">https://mitpress.mit.edu/books/reasoned-schemer-0</a>)<div></div></z><z id="t1519923961" t="devn [:attrs {:href &quot;/_/_/users/U6GFE9HS7&quot;}] ah, i have a draft copy of that if you&apos;re looking for what it says on a particular page [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-01</d><h>17:06</h><w>devn</w><a>@cjsauer</a> ah, i have a draft copy of that if you&apos;re looking for what it says on a particular page<div></div></z><z id="t1519945049" t="cjsauer [:attrs {:href &quot;/_/_/users/U06DQC6MA&quot;}] ooh very nice. I&apos;m most curious about the 4th chapter...does it still end in a &quot;surprise&quot; as they called it? Or have they now included the != catch mentioned above? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-01</d><h>22:57</h><w>cjsauer</w><a>@devn</a> ooh very nice. I&apos;m most curious about the 4th chapter...does it still end in a &quot;surprise&quot; as they called it? Or have they now included the <code>!=</code> catch mentioned above?<div></div></z><z id="t1519969479" t="devn [:attrs {:href &quot;/_/_/users/U6GFE9HS7&quot;}] remind me to peek tomorrow? (DMs are fine) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-02</d><h>05:44</h><w>devn</w><a>@cjsauer</a> remind me to peek tomorrow? (DMs are fine)<div></div></z><z id="t1521029294" t="andrea.crotti I&apos;m trying to solve a problem which I think is a good fit for core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-14</d><h>12:08</h><w>andrea.crotti</w>I&apos;m trying to solve a problem which I think is a good fit for core.logic<div></div></z><z id="t1521029314" t="andrea.crotti in short given various groups of people and a set of tables for 10 people each [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-14</d><h>12:08</h><w>andrea.crotti</w>in short given various groups of people and a set of tables for 10 people each<div></div></z><z id="t1521029340" t="andrea.crotti place the various groups in the various tables trying to maximize the space used, not splitting groups and possibly a few other constraints [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-14</d><h>12:09</h><w>andrea.crotti</w>place the various groups in the various tables trying to maximize the space used, not splitting groups and possibly a few other constraints<div></div></z><z id="t1521029382" t="andrea.crotti but for example I don&apos;t see anything in the API to add constraints on the length of the produced vector [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-14</d><h>12:09</h><w>andrea.crotti</w>but for example I don&apos;t see anything in the API to add constraints on the length of the produced vector<div></div></z><z id="t1521460521" t="abdullahibra is it possible make core.logic works on existing data say in sql database ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-19</d><h>11:55</h><w>abdullahibra</w>is it possible make core.logic works on existing data say in sql database ?<div></div></z><z id="t1521697919" t="xtreak29 Came across this that might be interesting : https://www.youtube.com/watch?v=HHZ8iqswiCw [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-22</d><h>05:51</h><r>xtreak29</r>Came across this that might be interesting : <a href="https://www.youtube.com/watch?v=HHZ8iqswiCw" target="_blank">https://www.youtube.com/watch?v=HHZ8iqswiCw</a><div></div></z><z id="t1521461165" t="xtreak29 Some helpful links : https://stackoverflow.com/questions/14529965/how-do-i-connect-clojure-core-logic-to-a-database https://github.com/clojure/core.logic/wiki/Extending-core.logic-%28Datomic-example%29 https://groups.google.com/forum/#!topic/clojure/YUNpTSS65Pc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-19</d><h>12:06</h><w>xtreak29</w>Some helpful links : 
<a href="https://stackoverflow.com/questions/14529965/how-do-i-connect-clojure-core-logic-to-a-database" target="_blank">https://stackoverflow.com/questions/14529965/how-do-i-connect-clojure-core-logic-to-a-database</a>
<a href="https://github.com/clojure/core.logic/wiki/Extending-core.logic-%28Datomic-example%29" target="_blank">https://github.com/clojure/core.logic/wiki/Extending-core.logic-%28Datomic-example%29</a>
<a href="https://groups.google.com/forum/#!topic/clojure/YUNpTSS65Pc" target="_blank">https://groups.google.com/forum/#!topic/clojure/YUNpTSS65Pc</a><div></div></z><z id="t1521461262" t="abdullahibra [:attrs {:href &quot;/_/_/users/U6S9XDCKV&quot;}] very good thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-19</d><h>12:07</h><w>abdullahibra</w><a>@xtreak29</a> very good thanks<div></div></z><z id="t1521524754" t="benzap Would you recommend learning prolog before learning core.logic? What&apos;s the best course of action? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-20</d><h>05:45</h><w>benzap</w>Would you recommend learning prolog before learning core.logic? What&apos;s the best course of action?<div></div></z><z id="t1521525399" t="xtreak29 I tried prolog initially because it had a better syntax IMO but core.logic seemed to offer the same as I looked into it. There is an online REPL to write prolog without installing anything. SWI prolog is the recommended implementation. I used &quot;learn prolog now&quot; which is introductory and good. I wrote some basic programs in prolog to find relations and so on. Online repl : https://swish.swi-prolog.org/ Learn prolog now : http://learnprolognow.org/ Solving graph coloring problem in prolog : https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/ My experience with prolog and core.logic (Shameless plug) : https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html In case you want a full fledged book the art of prolog is said to be a good one : https://mitpress.mit.edu/books/art-prolog I am curious about others perspective on this. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-20</d><h>05:56</h><w>xtreak29</w>I tried prolog initially because it had a better syntax IMO but core.logic seemed to offer the same as I looked into it. There is an online REPL to write prolog without installing anything. SWI prolog is the recommended implementation. I used &quot;learn prolog now&quot; which is introductory and good. I wrote some basic programs in prolog to find relations and so on. 

Online repl : <a href="https://swish.swi-prolog.org/" target="_blank">https://swish.swi-prolog.org/</a>
Learn prolog now : <a href="http://learnprolognow.org/" target="_blank">http://learnprolognow.org/</a>
Solving graph coloring problem in prolog : <a href="https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/" target="_blank">https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/</a>
My experience with prolog and core.logic (Shameless plug) : <a href="https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html" target="_blank">https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html</a>

In case you want a full fledged book the art of prolog is said to be a good one : <a href="https://mitpress.mit.edu/books/art-prolog" target="_blank">https://mitpress.mit.edu/books/art-prolog</a>

I am curious about others perspective on this.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 4&quot;)}</div></z><z id="t1521535705" t="benzap I have a few books on logic programming that I should probably go through [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-20</d><h>08:48</h><w>benzap</w>I have a few books on logic programming that I should probably go through<div></div></z><z id="t1521535729" t="benzap I&apos;m going to check out that http://learnprolognow.org [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-20</d><h>08:48</h><w>benzap</w>I&apos;m going to check out that <a href="http://learnprolognow.org" target="_blank">http://learnprolognow.org</a><div></div></z><z id="t1521535851" t="benzap so far i&apos;ve been able to get a swig prolog repl working in emacs, which is a godsend 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-20</d><h>08:50</h><w>benzap</w>so far i&apos;ve been able to get a swig prolog repl working in emacs, which is a godsend <b>🙂</b><div></div></z><z id="t1521689330" t="benzap So I got through http://learnprolognow.org , and the blog post which introduces core.logic is very well done. I&apos;m thinking I might try and do the http://learnprolognow.org exercises in core.logic, I was able to get through quite a few of them fairly easily with only a few misunderstandings [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-22</d><h>03:28</h><w>benzap</w>So I got through <a href="http://learnprolognow.org" target="_blank">http://learnprolognow.org</a>, and the blog post which introduces core.logic is very well done. I&apos;m thinking I might try and do the <a href="http://learnprolognow.org" target="_blank">http://learnprolognow.org</a> exercises in core.logic, I was able to get through quite a few of them fairly easily with only a few misunderstandings<div></div></z><z id="t1521831466" t="ajs Where is that blog post? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-23</d><h>18:57</h><r>ajs</r>Where is that blog post?<div></div></z><z id="t1521972761" t="benzap Ah sorry, just caught this, here you go https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-25</d><h>10:12</h><r>benzap</r>Ah sorry, just caught this, here you go


<a href="https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/" target="_blank">https://bernardopires.com/2013/10/try-logic-programming-a-gentle-introduction-to-prolog/</a><div></div></z><z id="t1521972763" t="benzap https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-25</d><h>10:12</h><r>benzap</r><a href="https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html" target="_blank">https://tirkarthi.github.io/clojure/2017/10/28/coloring-india.html</a><div></div></z><z id="t1521972783" t="benzap The second one is the india coloring problem done in core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-25</d><h>10:13</h><r>benzap</r>The second one is the india coloring problem done in core.logic<div></div></z><z id="t1522012880" t="ajs Thanx! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-25</d><h>21:21</h><r>ajs</r>Thanx!<div></div></z><z id="t1521689363" t="benzap I kind of skipped the Definite Clause Grammars section of the book, is it really necessary? http://learnprolognow.org/lpnpage.php?pagetype=html&amp;amp;pageid=lpn-htmlch7 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-22</d><h>03:29</h><w>benzap</w>I kind of skipped the Definite Clause Grammars section of the book, is it really necessary? <a href="http://learnprolognow.org/lpnpage.php?pagetype=html&amp;amp;pageid=lpn-htmlch7" target="_blank">http://learnprolognow.org/lpnpage.php?pagetype=html&amp;amp;pageid=lpn-htmlch7</a><div></div></z><z id="t1521689455" t="benzap Kindof skimmed over the Cuts, green cuts, red cuts, and negation stuff as well, but i&apos;m probably going to come back to that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-22</d><h>03:30</h><w>benzap</w>Kindof skimmed over the Cuts, green cuts, red cuts, and negation stuff as well, but i&apos;m probably going to come back to that<div></div></z><z id="t1521697841" t="xtreak29 Thanks, I haven&apos;t read the learnprolognow completely. If you want more info and lispish content there is https://mitpress.mit.edu/books/reasoned-schemer and the last chapter on SICP I think implements a logic programming DSL from scratch using Scheme. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-03-22</d><h>05:50</h><w>xtreak29</w>Thanks, I haven&apos;t read the learnprolognow completely. If you want more info and lispish content there is <a href="https://mitpress.mit.edu/books/reasoned-schemer" target="_blank">https://mitpress.mit.edu/books/reasoned-schemer</a> and the last chapter on  SICP I think implements a logic programming DSL from scratch using Scheme.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 4&quot;)}</div></z><z id="t1528981867" t="mrchance Is it possible to define a lookup relation for map keys, similar to (geto k m v) ? I saw that maps unify only over values, so this might be hard. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>13:11</h><w>mrchance</w>Is it possible to define a lookup relation for map keys, similar to <code>(geto k m v)</code> ? I saw that maps unify only over values, so this might be hard.<div></div></z><z id="t1529012606" t="mrchance Okay, (defn geto [m k v] (featurec m {k v})) Seems to do the trick, at least when k really is a keyword. I don&apos;t understand why it&apos;s limited to values though [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:43</h><w>mrchance</w>Okay,
<pre>(defn geto [m k v]
  (featurec m {k v}))
</pre>
Seems to do the trick, at least when k really is a keyword. I don&apos;t understand why it&apos;s limited to values though<div></div></z><z id="t1529013349" t="hiredman it is very tricky [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:55</h><w>hiredman</w>it is very tricky<div></div></z><z id="t1529013384" t="hiredman if k is a key in m, and v is a value in m, and q unifies with m, what values does q have? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:56</h><w>hiredman</w>if k is a key in m, and v is a value in m, and q unifies with m, what values does q have?<div></div></z></g><g id="s2"><z id="t1529013452" t="hiredman (values in the sense of, what are the possible values of q) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:57</h><w>hiredman</w>(values in the sense of, what are the possible values of q)<div></div></z><z id="t1529013478" t="mrchance Hmm, I&apos;d assume all values that (featurec m {k v}) produces? 😉 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:57</h><w>mrchance</w>Hmm, I&apos;d assume all values that <code>(featurec m {k v})</code> produces? <b>😉</b><div></div></z><z id="t1529013515" t="hiredman it is trivial to determine the values when keys are ground [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:58</h><w>hiredman</w>it is trivial to determine the values  when keys are ground<div></div></z><z id="t1529013537" t="mrchance What do you mean by ground? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:58</h><w>mrchance</w>What do you mean by ground?<div></div></z><z id="t1529013546" t="hiredman a concrete value [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:59</h><w>hiredman</w>a concrete value<div></div></z><z id="t1529013557" t="hiredman a known keyword [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:59</h><w>hiredman</w>a known keyword<div></div></z><z id="t1529013565" t="mrchance Ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:59</h><w>mrchance</w>Ok<div></div></z><z id="t1529013572" t="hiredman (as opposed to a logic variable with an unknown value) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:59</h><w>hiredman</w>(as opposed to a logic variable with an unknown value)<div></div></z><z id="t1529013587" t="mrchance Yeah, got it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>21:59</h><w>mrchance</w>Yeah, got it<div></div></z><z id="t1529013620" t="hiredman basically you can&apos;t use just a clojure map to represent that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:00</h><w>hiredman</w>basically you can&apos;t use just a clojure map to represent that<div></div></z><z id="t1529013652" t="hiredman you need some more complicated datastructure that understands unification and can do things like merge keys that are unified [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:00</h><w>hiredman</w>you need some more complicated datastructure that understands unification and can do things like merge keys that are unified<div></div></z><z id="t1529013685" t="hiredman like if you say (get m k v) (get m y x) (== y k) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:01</h><w>hiredman</w>like if you say (get m k v) (get m y x) (== y k)<div></div></z><z id="t1529013700" t="hiredman uh, geto [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:01</h><w>hiredman</w>uh, geto<div></div></z><z id="t1529013707" t="mrchance Hm, so it would be possible, but only if I converted my maps to that richer datastructure before? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:01</h><w>mrchance</w>Hm, so it would be possible, but only if I converted my maps to that richer datastructure before?<div></div></z><z id="t1529013732" t="mrchance And I&apos;d have to make it extend the unification protocol? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:02</h><w>mrchance</w>And I&apos;d have to make it extend the unification protocol?<div></div></z><z id="t1529013740" t="hiredman I am not sure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:02</h><w>hiredman</w>I am not sure<div></div></z><z id="t1529013832" t="hiredman I feel like I was reading a paper on unifying maps recently [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:03</h><w>hiredman</w>I feel like I was reading a paper on unifying maps recently<div></div></z><z id="t1529013869" t="mrchance Really? Nice coincidence then 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:04</h><w>mrchance</w>Really? Nice coincidence then <b>🙂</b><div></div></z><z id="t1529013870" t="hiredman oh, no, it was clp(set) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:04</h><w>hiredman</w>oh, no, it was clp(set)<div></div></z><z id="t1529013878" t="mrchance Ah, ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:04</h><w>mrchance</w>Ah, ok<div></div></z><z id="t1529013880" t="hiredman but I think that would be really similar [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:04</h><w>hiredman</w>but I think that would be really similar<div></div></z><z id="t1529013896" t="hiredman e.g. you would represent the map as a set of k/v pairs [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:04</h><w>hiredman</w>e.g. you would represent the map as a set of k/v pairs<div></div></z><z id="t1529013929" t="hiredman https://github.com/clojure/core.logic/wiki/CLP(Set) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:05</h><w>hiredman</w><a href="https://github.com/clojure/core.logic/wiki/CLP(Set)" target="_blank">https://github.com/clojure/core.logic/wiki/CLP(Set)</a><div></div></z><z id="t1529013954" t="hiredman there is a scheme implementation somewhere that needs porting [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:05</h><w>hiredman</w>there is a scheme implementation somewhere that needs porting<div></div></z><z id="t1529013991" t="mrchance Hm yeah, it looks like this would do it, if it were implemented, which it doesn&apos;t seem to be 😄 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:06</h><w>mrchance</w>Hm yeah, it looks like this would do it, if it were implemented, which it doesn&apos;t seem to be <b>😄</b><div></div></z><z id="t1529013998" t="hiredman https://github.com/namin/clpset-miniKanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:06</h><w>hiredman</w><a href="https://github.com/namin/clpset-miniKanren" target="_blank">https://github.com/namin/clpset-miniKanren</a><div></div></z><z id="t1529014014" t="hiredman (the link to the paper is in the readme on that repo) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:06</h><w>hiredman</w>(the link to the paper is in the readme on that repo)<div></div></z><z id="t1529014125" t="mrchance Hm, that looks more like a weekend-y kind of thing 😉 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:08</h><w>mrchance</w>Hm, that looks more like a weekend-y kind of thing <b>😉</b><div></div></z><z id="t1529014161" t="mrchance I wouldn&apos;t mind a simpler way to achieve my goal, which is basically have an interpreter for a very simple language [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:09</h><w>mrchance</w>I wouldn&apos;t mind a simpler way to achieve my goal, which is basically have an interpreter for a very simple language<div></div></z><z id="t1529014216" t="hiredman I think the scheme guys just use a list of pairs [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:10</h><w>hiredman</w>I think the scheme guys just use a list of pairs<div></div></z><z id="t1529014236" t="mrchance Yeah, that might be the way to go for now [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:10</h><w>mrchance</w>Yeah, that might be the way to go for now<div></div></z><z id="t1529014303" t="mrchance Thanks, I&apos;ll try that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:11</h><w>mrchance</w>Thanks, I&apos;ll try that<div></div></z><z id="t1529014317" t="mrchance Also read the paper when I have a moment, which might be a while 😉 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-06-14</d><h>22:11</h><w>mrchance</w>Also read the paper when I have a moment, which might be a while <b>😉</b><div></div></z><z id="t1531410125" t="bajrachar Is it possible to replace pldb in core logic with something like lmdb and if so how do I go about doing so [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:42</h><w>bajrachar</w>Is it possible to replace pldb in core logic with something like lmdb and if so how do I go about doing so<div></div></z><z id="t1531410279" t="bajrachar I did see this - https://github.com/clojure/core.logic/wiki/Extending-core.logic-(Datomic-example) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:44</h><w>bajrachar</w>I did see this - <a href="https://github.com/clojure/core.logic/wiki/Extending-core.logic-(Datomic-example)" target="_blank">https://github.com/clojure/core.logic/wiki/Extending-core.logic-(Datomic-example)</a><div></div></z><z id="t1531410332" t="bajrachar having trouble particularly loading a large data set in memory with pldb [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:45</h><w>bajrachar</w>having trouble particularly loading a large data set in memory with pldb<div></div></z><z id="t1531410383" t="norman how large is large? We use pldb with very large data sets [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:46</h><w>norman</w>how large is large? We use pldb with very large data sets<div></div></z><z id="t1531410429" t="norman But obviously not so large that we can’t load it in memory [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:47</h><w>norman</w>But obviously not so large that we can’t load it in memory<div></div></z><z id="t1531410713" t="bajrachar well the size of the file I am loading from is close to 6GB [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:51</h><w>bajrachar</w>well the size of the file I am loading from is close to 6GB<div></div></z><z id="t1531410757" t="bajrachar When I add in the facts - it blows up all the way up to 19GB in memory [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:52</h><w>bajrachar</w>When I add in the facts - it blows up all the way up to 19GB in memory<div></div></z><z id="t1531410799" t="bajrachar This could be due to intermediates created via clojure data structures? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:53</h><w>bajrachar</w>This could be due to intermediates created via clojure data structures?<div></div></z><z id="t1531411011" t="norman Are you indexing a lot? There’s a lot of work to create the in memory index [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:56</h><w>norman</w>Are you indexing a lot? There’s a lot of work to create the in memory index<div></div></z><z id="t1531411053" t="norman I did not optimize that code for memory efficiency. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:57</h><w>norman</w>I did not optimize that code for memory efficiency.<div></div></z><z id="t1531411087" t="bajrachar Yes I do have few indices [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:58</h><w>bajrachar</w>Yes I do have few indices<div></div></z><z id="t1531411092" t="norman I would say our “large” is 100-1000MB, which is definitely a lot less than your “large” [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:58</h><w>norman</w>I would say our “large” is 100-1000MB, which is definitely a lot less than your “large”<div></div></z><z id="t1531411154" t="norman At some point an actual database is better. I don’t think that example is current, and if I recall it wasn’t actually a very good example [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>15:59</h><w>norman</w>At some point an actual database is better. I don’t think that example is current, and if I recall it wasn’t actually a very good example<div></div></z><z id="t1531411276" t="norman I probably can’t help too much though. I wrote pldb, but our use of core.logic and pldb has been stable for many years now, so it’s not code I touch on a day to day basis anymore. And since core.logic is under the clojure CA and dev process, I haven’t been terribly motivated to actively contribute [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:01</h><w>norman</w>I probably can’t help too much though. I wrote pldb, but our use of core.logic and pldb has been stable for many years now, so it’s not code I touch on a day to day basis anymore. And since core.logic is under the clojure CA and dev process, I haven’t been terribly motivated to actively contribute<div></div></z><z id="t1531411346" t="bajrachar I think the size bloat could be due to indexing as you pointed out - maybe I can play around with it and see if it reduces further [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:02</h><w>bajrachar</w>I think the size bloat could be due to indexing as you pointed out - maybe I can play around with it and see if it reduces further<div></div></z><z id="t1531411409" t="norman If you don’t need them, then remove them. But if you do, you’ll just be trading memory for CPU [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:03</h><w>norman</w>If you don’t need them, then remove them. But if you do, you’ll just be trading memory for CPU<div></div></z><z id="t1531411467" t="bajrachar Also I&apos;ve realized that clojure data structures by default occupy quite a bit of memory when operated on - unless we use transient [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:04</h><w>bajrachar</w>Also I&apos;ve realized that clojure data structures by default occupy quite a bit of memory when operated on - unless we use transient<div></div></z><z id="t1531411496" t="bajrachar so - I will also try if I serialize the db to disk and read back from it - if that reduces the size [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:04</h><w>bajrachar</w>so - I will also try if I serialize the db to disk and read back from it - if that reduces the size<div></div></z><z id="t1531411519" t="norman I’m fairly certain the pldb code does not do that, but it might. It’s been a loong time 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:05</h><w>norman</w>I’m fairly certain the pldb code does not do that, but it might. It’s been a loong time <b>🙂</b><div></div></z><z id="t1531411543" t="norman You can definitely serialize it. At one point we were saving pldbs in riak [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:05</h><w>norman</w>You can definitely serialize it. At one point we were saving pldbs in riak<div></div></z><z id="t1531411558" t="hiredman if anything, serializing it will make it larger [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:05</h><w>hiredman</w>if anything, serializing it will make it larger<div></div></z><z id="t1531411558" t="bajrachar ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:05</h><w>bajrachar</w>ok<div></div></z><z id="t1531411621" t="hiredman serializing will remove any structural sharing in the data [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:07</h><w>hiredman</w>serializing will remove any structural sharing in the data<div></div></z><z id="t1531411624" t="bajrachar Thank you for your help [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:07</h><w>bajrachar</w>Thank you for your help <a>@norman</a><div></div></z><z id="t1531411639" t="bajrachar I am pretty new to Clojure and core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:07</h><w>bajrachar</w>I am pretty new to Clojure and core.logic<div></div></z><z id="t1531411698" t="bajrachar using it for a clinical decision support tool - and as such it&apos;s knowledge base is pretty large [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:08</h><w>bajrachar</w>using it for a clinical decision support tool - and as such it&apos;s knowledge base is pretty large<div></div></z><z id="t1531411740" t="hiredman https://gist.github.com/terjesb/3181018 might be a good place to start if you want to use core.logic without storing things in memory [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:09</h><w>hiredman</w><a href="https://gist.github.com/terjesb/3181018" target="_blank">https://gist.github.com/terjesb/3181018</a> might be a good place to start if you want to use core.logic without storing things in memory<div></div></z><z id="t1531411825" t="bajrachar oh cool - thanks [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] - [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:10</h><w>bajrachar</w>oh cool - thanks <a>@hiredman</a> -<div></div></z><z id="t1531411862" t="bajrachar the dataset here being the lucene index? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:11</h><w>bajrachar</w>the dataset here being the lucene index?<div></div></z><z id="t1531413000" t="hiredman in that code sure, but you can do something similar to extend it to other datastores, I was thinking of it more as example [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:30</h><w>hiredman</w>in that code sure, but you can do something similar to extend it to other datastores, I was thinking of it more as example<div></div></z><z id="t1531413036" t="bajrachar ok - I understand - thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-07-12</d><h>16:30</h><w>bajrachar</w>ok - I understand - thanks<div></div></z><z id="t1533316853" t="bajrachar I am trying to understand how a tabled goal works in core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:20</h><w>bajrachar</w>I am trying to understand how a tabled goal works in core.logic?<div></div></z><z id="t1533316898" t="bajrachar can it be used to eliminate circular references in for example a graph traversal for example [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:21</h><w>bajrachar</w>can it be used to eliminate circular references in for example a graph traversal for example<div></div></z><z id="t1533317066" t="bajrachar or is it supposed to eliminate duplicates in the result [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:24</h><w>bajrachar</w>or is it supposed to eliminate duplicates in the result<div></div></z><z id="t1533317310" t="bajrachar I have a logic expression as such - which traverses a child hierarchy. CHD stands for Child relation and RN stands for narrow relation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:28</h><w>bajrachar</w>I have a logic expression as such - which traverses a child hierarchy. CHD stands for Child relation and RN stands for narrow relation<div></div></z><z id="t1533317369" t="bajrachar Issue is - it can go into endless loop if there are circular references [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:29</h><w>bajrachar</w>Issue is - it can go into endless loop if there are circular references<div></div></z><z id="t1533318374" t="hiredman I think it is more like a performance optimization, if you have a goal that diverges it won&apos;t stop it from diverging [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:46</h><w>hiredman</w>I think it is more like a performance optimization, if you have a goal that diverges it won&apos;t stop it from diverging<div></div></z><z id="t1533318573" t="hiredman there is a correspondence between proof by induction and recursion, they both need a base case [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:49</h><w>hiredman</w>there is a correspondence between proof by induction and recursion, they both need a base case<div></div></z><z id="t1533318633" t="hiredman you might be able to get by using one of the non-relational variants of conde [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:50</h><w>hiredman</w>you might be able to get by using one of the non-relational variants of conde<div></div></z><z id="t1533318663" t="hiredman maybe conda [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:51</h><w>hiredman</w>maybe conda<div></div></z><z id="t1533318711" t="hiredman or make the clauses in your conde mutually exclusive [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:51</h><w>hiredman</w>or make the clauses in your conde mutually exclusive<div></div></z><z id="t1533318766" t="bajrachar Thank you [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] - as always your responses are very helpful [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:52</h><w>bajrachar</w>Thank you <a>@hiredman</a> - as always your responses are very helpful<div></div></z><z id="t1533318822" t="bajrachar just so I follow what you&apos;re saying - &quot;divergence&quot; means there is a cycle right? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:53</h><w>bajrachar</w>just so I follow what you&apos;re saying - &quot;divergence&quot; means there is a cycle right?<div></div></z><z id="t1533318936" t="hiredman it could be caused by cycle in something you are are traversing recursively, my very rough understanding of it is divergence == infinitely looping logic program [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:55</h><w>hiredman</w>it could be caused by cycle in something you are are traversing recursively, my very rough understanding of it is divergence == infinitely looping logic program<div></div></z><z id="t1533319088" t="bajrachar by making the clauses mutually exclusive - do you mean adding something like != [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:58</h><w>bajrachar</w>by making the clauses mutually exclusive - do you mean adding something like !=<div></div></z><z id="t1533319145" t="bajrachar sorry if this is a very stupid question 🙂 - still learning the ropes of core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:59</h><w>bajrachar</w>sorry if this is a very stupid question <b>🙂</b> - still learning the ropes of core.logic<div></div></z><z id="t1533319174" t="bajrachar It is very interesting - at the same time very difficult to wrap your head around [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:59</h><w>bajrachar</w>It is very interesting - at the same time very difficult to wrap your head around<div></div></z><z id="t1533319195" t="hiredman yeah, != or some other goal that will fail on the one branch if the other branch is the one you want [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>17:59</h><w>hiredman</w>yeah, != or some other goal that will fail on the one branch if the other branch is the one you want<div></div></z><z id="t1533319277" t="bajrachar Ah - Thank you - I will try that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>18:01</h><w>bajrachar</w>Ah - Thank you - I will try that<div></div></z><z id="t1533320341" t="hiredman I was wrong about tabling: https://github.com/clojure/core.logic/wiki/Features#tabling the docs say it will turn a non-terminating logic program in to a terminating one [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>18:19</h><w>hiredman</w>I was wrong about tabling: <a href="https://github.com/clojure/core.logic/wiki/Features#tabling" target="_blank">https://github.com/clojure/core.logic/wiki/Features#tabling</a> the docs say it will turn a non-terminating logic program in to a terminating one<div></div></z><z id="t1533320811" t="bajrachar that was what I thought it was supposed to do - but still I see it is diverging - maybe I need to table only the recursive portion [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-03</d><h>18:26</h><w>bajrachar</w>that was what I thought it was supposed to do - but still I see it is diverging - maybe I need to table only the recursive portion<div></div></z><z id="t1533955412" t="bajrachar Does core.logic take advantage of concurrency/parallelization ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:43</h><w>bajrachar</w>Does core.logic take advantage of concurrency/parallelization ?<div></div></z><z id="t1533955458" t="bajrachar I notice that it isn&apos;t making use of all the cores when it is running [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:44</h><w>bajrachar</w>I notice that it isn&apos;t making use of all the cores when it is running<div></div></z><z id="t1533955514" t="bajrachar Also was wondering if anyone has experience with working with the parallel version of core.logic using fork/join --&gt; http://www.clojure.net/2012/10/02/More-core.logic/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:45</h><w>bajrachar</w>Also was wondering if anyone has experience with working with the parallel version of core.logic using fork/join --&gt; <a href="http://www.clojure.net/2012/10/02/More-core.logic/" target="_blank">http://www.clojure.net/2012/10/02/More-core.logic/</a><div></div></z><z id="t1533956045" t="bajrachar [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] - I was wondering if I could go about parallelizing query in pldb code by using reducers or pmap in the fact search portion or if this is more of a issue with unification side [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:54</h><w>bajrachar</w><a>@norman</a> - I was wondering if I could go about parallelizing query in pldb code by using reducers or pmap in the fact search portion or if this is more of a issue with unification side<div></div></z><z id="t1533956069" t="bajrachar it seems more of the latter [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:54</h><w>bajrachar</w>it seems more of the latter<div></div></z><z id="t1533956091" t="norman I doubt it, given the way queries evaluate [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:54</h><w>norman</w>I doubt it, given the way queries evaluate<div></div></z><z id="t1533956199" t="bajrachar Currently I&apos;ve managed to represent a graph using pldb - and when I query for path that are two step [depth = 2] - it takes a long time [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:56</h><w>bajrachar</w>Currently I&apos;ve managed to represent a graph using pldb - and when I query for path that are two step [depth = 2] - it takes a long time<div></div></z><z id="t1533956224" t="bajrachar and I notice it isn&apos;t taking advantage of all the cores in the machine [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:57</h><w>bajrachar</w>and I notice it isn&apos;t taking advantage of all the cores in the machine<div></div></z><z id="t1533956253" t="norman Yes, I believe that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:57</h><w>norman</w>Yes, I believe that<div></div></z><z id="t1533956273" t="norman the execution model of core.logic is probably not very amenable to parallelization [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:57</h><w>norman</w>the execution model of core.logic is probably not very amenable to parallelization<div></div></z><z id="t1533956282" t="bajrachar I also noticed a slightly older post from jim deuy on using fork/join with core.logic --&gt; http://www.clojure.net/2012/10/02/More-core.logic/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:58</h><w>bajrachar</w>I also noticed a slightly older post from jim deuy on using fork/join with core.logic --&gt; <a href="http://www.clojure.net/2012/10/02/More-core.logic/" target="_blank">http://www.clojure.net/2012/10/02/More-core.logic/</a><div></div></z><z id="t1533956337" t="norman Yes, you’d have to fundamentally change the execution moel [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:58</h><w>norman</w>Yes, you’d have to fundamentally change the execution moel<div></div></z><z id="t1533956376" t="bajrachar hmm ... ok ... sounds like a interesting challenge to try out over the weekend 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>02:59</h><w>bajrachar</w>hmm ... ok ... sounds like a interesting challenge to try out over the weekend <b>🙂</b><div></div></z><z id="t1533956411" t="bajrachar will try to use the jim duey&apos;s branch and see if it helps [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>03:00</h><w>bajrachar</w>will try to use the jim duey&apos;s branch and see if it helps<div></div></z><z id="t1533956790" t="bajrachar [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] - what is the current state of core.logic and it&apos;s roadmap? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>03:06</h><w>bajrachar</w><a>@norman</a> - what is the current state of core.logic and it&apos;s roadmap?<div></div></z><z id="t1533957005" t="norman It’s not being actively developed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>03:10</h><w>norman</w>It’s not being actively developed<div></div></z><z id="t1533957037" t="norman Unless it’s spun out of clojure core, I’m not inclined to contribute further [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-08-11</d><h>03:10</h><w>norman</w>Unless it’s spun out of clojure core, I’m not inclined to contribute further<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;point_up&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;☝️&quot;)} &quot; 4&quot;)}</div></z><z id="t1536145566" t="rickmoynihan Are there any docs on tabling in core.logic and how it works? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:06</h><w>rickmoynihan</w>Are there any docs on tabling in core.logic and how it works?<div></div></z><z id="t1536146000" t="rickmoynihan Backstory: I’ve implemented a SPARQL/Datalog-like query DSL for querying in memory RDF graphs with core.logic. The DSL essentially tries to hide a lot of the minikanren/relational-programming stuff and present a simpler “SPARQL like” model, where you don’t need to fresh variables etc… I use db-rel to get acceptable performance. Currently I compile the Basic Graph Pattern vectors my macro receives and convert them to calls to db-rel . What I have works quite well, but it does of course mean that you can’t generate queries at runtime. I’d like to explore doing the same but with functions, so I can also provide a way to build tabled queries dynamically. Is this possible? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:13</h><w>rickmoynihan</w>Backstory: I’ve implemented a SPARQL/Datalog-like query DSL for querying in memory RDF graphs with core.logic.  The DSL essentially tries to hide a lot of the minikanren/relational-programming stuff and present a simpler “SPARQL like” model, where you don’t need to <code>fresh</code> variables etc…

I use <code>db-rel</code> to get acceptable performance.  Currently I compile the Basic Graph Pattern vectors my macro receives and convert them to calls to <code>db-rel</code>.  What I have works quite well, but it does of course mean that you can’t generate queries at runtime.  I’d like to explore doing the same but with functions, so I can also provide a way to build tabled queries dynamically.

Is this possible?<div></div></z><z id="t1536146019" t="rickmoynihan For reference this is the project: https://github.com/Swirrl/matcha [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:13</h><w>rickmoynihan</w>For reference this is the project: <a href="https://github.com/Swirrl/matcha" target="_blank">https://github.com/Swirrl/matcha</a><div></div></z><z id="t1536147609" t="rickmoynihan e.g. the graph pattern [[:foo ?p ?o]] would currently compile into something like: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:40</h><w>rickmoynihan</w>e.g. the graph pattern <code>[[:foo ?p ?o]]</code> would currently compile into something like:<div></div></z><z id="t1536147611" t="rickmoynihan (clojure.core.logic/fresh [?p ?o] (grafter.matcha.alpha/triple ?s ?p ?o)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:40</h><w>rickmoynihan</w><pre>(clojure.core.logic/fresh
          [?p ?o]
          (grafter.matcha.alpha/triple ?s ?p ?o))
</pre><div></div></z><z id="t1536147806" t="rickmoynihan I can obviously define a relation that will recursively apply the triple relation, but won’t that eliminate the advantages of indexing? I’m also not entirely sure of all the semantics around using clojure inside relations etc, which was my first instinct to avoid using a macro. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>11:43</h><w>rickmoynihan</w>I can obviously define a relation that will recursively apply the <code>triple</code> relation, but won’t that eliminate the advantages of indexing?

I’m also not entirely sure of all the semantics around using clojure inside relations etc, which was my first instinct to avoid using a macro.<div></div></z><z id="t1536161547" t="bajrachar [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] - sounds like an interesting project - It would be great to have something to query in-memory graph - without digging into minikanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:32</h><w>bajrachar</w><a>@rickmoynihan</a> - sounds like an interesting project - It would be great to have something to query in-memory graph - without digging into minikanren<div></div></z><z id="t1536161565" t="bajrachar I didn&apos;t quite follow what you mean by generating queries dynamically [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:32</h><w>bajrachar</w>I didn&apos;t quite follow what you mean by generating queries dynamically<div></div></z><z id="t1536161638" t="bajrachar I recently also used core.logic for graph traversal - but due to large size of the db it wasnt as efficient [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:33</h><w>bajrachar</w>I recently also used core.logic for graph traversal - but due to large size of the db it wasnt as efficient<div></div></z><z id="t1536161692" t="rickmoynihan Sometimes you want to generate queries dynamically based on inputs. Currently in Matcha you can’t do this kinda thing: (let [query-pattern (conj &apos;[?s ?p] &apos;?o)] ((select query-pattern) friends) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:34</h><w>rickmoynihan</w>Sometimes you want to generate queries dynamically based on inputs.

Currently in Matcha you can’t do this kinda thing: <code>(let [query-pattern (conj &apos;[?s ?p] &apos;?o)] ((select query-pattern) friends)</code><div></div></z><z id="t1536161754" t="rickmoynihan because select is a macro, so query-pattern has to be hardcoded as a literal value at compile time [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:35</h><w>rickmoynihan</w>because <code>select</code> is a macro, so <code>query-pattern</code> has to be hardcoded as a literal value at compile time<div></div></z><z id="t1536162352" t="bajrachar ok I see what you mean - how does tabling help in this scenario? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:45</h><w>bajrachar</w>ok I see what you mean - how does tabling help in this scenario?<div></div></z><z id="t1536162372" t="rickmoynihan it makes it orders of magnitude faster [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:46</h><w>rickmoynihan</w>it makes it orders of magnitude faster<div></div></z><z id="t1536162499" t="bajrachar and you want to use functions in place of macro [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:48</h><w>bajrachar</w>and you want to use functions in place of macro<div></div></z><z id="t1536162533" t="bajrachar sorry - just trying to understand the problem 🙂 - [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>15:48</h><w>bajrachar</w>sorry - just trying to understand the problem <b>🙂</b> -<div></div></z><z id="t1536163508" t="bajrachar I don&apos;t know if it is applicable in this particular case - but for my particular use case of making graph traversal faster on a very large in-memory db - I went about re-writing some parts of pldb and db-rel [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:05</h><w>bajrachar</w>I don&apos;t know if it is applicable in this particular case - but for my particular use case of making graph traversal faster on a very large in-memory db - I went about re-writing some parts of pldb and db-rel<div></div></z><z id="t1536163645" t="bajrachar making the matching logic parallel - which seemed to work better than tabling [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:07</h><w>bajrachar</w>making the matching logic parallel - which seemed to work better than tabling<div></div></z><z id="t1536163672" t="bajrachar as issue for me wasn&apos;t that query was diverging [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:07</h><w>bajrachar</w>as issue for me wasn&apos;t that query was diverging<div></div></z><z id="t1536164278" t="rickmoynihan &gt; and you want to use functions in place of macro [:attrs {:href &quot;/_/_/users/U697DBR6V&quot;}] Yes. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:17</h><w>rickmoynihan</w>&gt; and you want to use functions in place of macro

<a>@bajrachar</a> Yes.<div></div></z><z id="t1536165103" t="rickmoynihan I think the problem is that without tabling I’d need to scan the database on each join, so performance becomes exponential?/quadratic?/something-really bad. Making it parallel might help, but at best parallelisation will only make linear gains in terms of processors; rather than the orders of magnitude gains you can get through indexing/tabling/memoization/better-algorithms. For me querying just 1000 edges was taking my naive version longer than querying millions of edges with tabling [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:31</h><w>rickmoynihan</w>I think the problem is that without tabling I’d need to scan the database on each join, so performance becomes exponential?/quadratic?/something-really bad.

Making it parallel might help, but at best parallelisation will only make linear gains in terms of processors; rather than the orders of magnitude gains you can get through indexing/tabling/memoization/better-algorithms.

For me querying just 1000 edges was taking my naive version longer than querying millions of edges with tabling<div></div></z><z id="t1536166676" t="bajrachar sounds interesting - definitely would like to see how you&apos;ve used tabling [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:57</h><w>bajrachar</w>sounds interesting - definitely would like to see how you&apos;ve used tabling<div></div></z><z id="t1536166736" t="bajrachar by join - I assume its traversing the graph to depth n? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>16:58</h><w>bajrachar</w>by join - I assume its traversing the graph to depth n?<div></div></z><z id="t1536171680" t="rickmoynihan I mean join in the RDBMS sense. Effectively a triple store is a single table with three columns; every time you walk from one edge (row) to another through a ?variable binding you’re effectively doing a self join back on that table. But yes each traversal is effectively another join. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:21</h><w>rickmoynihan</w>I mean join in the RDBMS sense.  Effectively a triple store is a single table with three columns; every time you walk from one edge (row) to another through a <code>?variable</code> binding you’re effectively doing a self join back on that table.  But yes each traversal is effectively another join.<div></div></z><z id="t1536172344" t="rickmoynihan ahhh ha! https://github.com/clojure/core.logic/blob/10ee95eb2bed70af5bc29ea3bd78b380f054a8b4/src/main/clojure/clojure/core/logic.clj#L1801-L1807 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:32</h><w>rickmoynihan</w>ahhh ha!

<a href="https://github.com/clojure/core.logic/blob/10ee95eb2bed70af5bc29ea3bd78b380f054a8b4/src/main/clojure/clojure/core/logic.clj#L1801-L1807" target="_blank">https://github.com/clojure/core.logic/blob/10ee95eb2bed70af5bc29ea3bd78b380f054a8b4/src/main/clojure/clojure/core/logic.clj#L1801-L1807</a><div></div></z><z id="t1536172368" t="rickmoynihan some references: http://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1 https://code.google.com/p/iucs-relational-research/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:32</h><w>rickmoynihan</w>some references: <a href="http://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1" target="_blank">http://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1</a>

<a href="https://code.google.com/p/iucs-relational-research/" target="_blank">https://code.google.com/p/iucs-relational-research/</a><div></div></z><z id="t1536172465" t="rickmoynihan I think I understand roughly how this works; but need to figure out the finer details [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:34</h><w>rickmoynihan</w>I think I understand roughly how this works; but need to figure out the finer details<div></div></z><z id="t1536172508" t="rickmoynihan the second link in the source code 404&apos;s 😞 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:35</h><w>rickmoynihan</w>the second link in the source code 404&apos;s <b>😞</b><div></div></z><z id="t1536172575" t="rickmoynihan I think the first link is Byrds thesis… I’ve skimmed this before; but can’t recall the details of tabling [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>18:36</h><w>rickmoynihan</w>I think the first link is Byrds thesis… I’ve skimmed this before; but can’t recall the details of tabling<div></div></z><z id="t1536176206" t="rickmoynihan hmmm… maybe I’m misunderstanding the relationship between tabling and pldb [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-05</d><h>19:36</h><w>rickmoynihan</w>hmmm… maybe I’m misunderstanding the relationship between tabling and pldb<div></div></z><z id="t1536286433" t="bajrachar [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] - sounds interesting. I&apos;d love to take a look at matcha and play around when I have some time - perhaps this weekend. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-07</d><h>02:13</h><w>bajrachar</w><a>@rickmoynihan</a> - sounds interesting. I&apos;d love to take a look at matcha and play around when I have some time - perhaps this weekend.<div></div></z><z id="t1536286519" t="bajrachar SPARQL queries are a bit verbose for my liking - but I do like the idea of query string being a function and also a representation of the relationship you&apos;re querying [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-07</d><h>02:15</h><w>bajrachar</w>SPARQL queries are a bit verbose for my liking - but I do like the idea of query string being a function and also a representation of the relationship you&apos;re querying<div></div></z><z id="t1536286632" t="bajrachar goes well with &quot;code is data&quot; mantra 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-07</d><h>02:17</h><w>bajrachar</w>goes well with &quot;code is data&quot; mantra <b>🙂</b><div></div></z><z id="t1536308291" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U697DBR6V&quot;}] : Thanks. What what’s there should be quite useful for us… Being a macro it obviously makes use of “code is data”, but I’d prefer to also offer a “data is data” model, so we can generate queries directly. Matcha is really just the BGP bit of SPARQL, so it’s hard to see how it could be made more terse… At some point I’ll probably add property paths to Matcha, to make it even more terse i.e. things like (construct-1 ?foafoafoaf [[:rick [:foaf/knows :foaf/knows :foaf/knows] ?foafoafoaf]]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-07</d><h>08:18</h><w>rickmoynihan</w><a>@bajrachar</a>: Thanks.  What what’s there should be quite useful for us…  Being a macro it obviously makes use of “code is data”, but I’d prefer to also offer a “data is data” model, so we can generate queries directly.

Matcha is really just the BGP bit of SPARQL, so it’s hard to see how it could be made more terse…  At some point I’ll probably add property paths to Matcha, to make it even more terse i.e. things like <code>(construct-1 ?foafoafoaf [[:rick [:foaf/knows :foaf/knows :foaf/knows] ?foafoafoaf]])</code><div></div></z><z id="t1536308438" t="rickmoynihan and also an equivalent of VALUES clauses: (construct-1 ?label-or-title [[:resource #{:rdfs/label :dcterms/title} ?label-or-title]]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-07</d><h>08:20</h><w>rickmoynihan</w>and also an equivalent of <code>VALUES</code> clauses: <code>(construct-1 ?label-or-title [[:resource #{:rdfs/label :dcterms/title} ?label-or-title]])</code><div></div></z><z id="t1536746951" t="risto hi everyone [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>10:09</h><w>risto</w>hi everyone<div></div></z><z id="t1536746965" t="risto i&apos;m trying to figure out what&apos;s making appendo terminate, from the looks of it, it seems like it should just be infinite like anyo [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>10:09</h><w>risto</w>i&apos;m trying to figure out what&apos;s making <code>appendo</code> terminate, from the looks of it, it seems like it should just be infinite like <code>anyo</code><div></div></z><z id="t1536746970" t="risto does anyone have any insight into that? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>10:09</h><w>risto</w>does anyone have any insight into that?<div></div></z><z id="t1536769800" t="hiredman it is a recursive goal with 3 args (x y z) and 2 cases. the first case is the base case and is only true if x unifies with the empty list and z unifies with y, the second case is only true if the first element of x and the first element of z unify, and if it is true it calls appendo again with the rest of x, y, and the rest of z [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>16:30</h><w>hiredman</w>it is a recursive goal with 3 args (x y z) and 2 cases. the first case is the base case and is only true if x unifies with the empty list and z unifies with y, the second case is only true if the first element of x and the first element of z unify, and if it is true it calls appendo again with the rest of x, y, and the rest of z<div></div></z><z id="t1536770307" t="hiredman so it must terminate because every step where case 2 matches causes the recursive call to be made with the rest of x, so the x argument gets smaller and smaller, until case 2 no long holds and case 1 might hold [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>16:38</h><w>hiredman</w>so it must terminate because every step where case 2 matches causes the recursive call to be made with the rest of x, so the x argument gets smaller and smaller, until case 2 no long holds and case 1 might hold<div></div></z><z id="t1536776264" t="risto that makes sense, but the issue for me is how conj and disj are implemented [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:17</h><w>risto</w>that makes sense, but the issue for me is how <code>conj</code> and <code>disj</code> are implemented<div></div></z><z id="t1536776289" t="risto even though it&apos;s a lazy stream, conj is implemented using flatmap and disj with a fair append [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:18</h><w>risto</w>even though it&apos;s a lazy stream, <code>conj</code> is implemented using <code>flatmap</code> and <code>disj</code> with a fair <code>append</code><div></div></z><z id="t1536776307" t="risto so it seems like it would continue to recurse forever, because under the hood it&apos;s calling flatmap or append [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:18</h><w>risto</w>so it seems like it would continue to recurse forever, because under the hood it&apos;s calling <code>flatmap</code> or <code>append</code><div></div></z><z id="t1536776625" t="hiredman are you actually asking about core.logic or minikanren? because flatmap isn&apos;t a string that appears in core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:23</h><w>hiredman</w>are you actually asking about core.logic or minikanren? because flatmap isn&apos;t a string that appears in core.logic<div></div></z><z id="t1536776740" t="hiredman append is not the same thing as appendo [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:25</h><w>hiredman</w>append is not the same thing as appendo<div></div></z><z id="t1536776864" t="risto isn&apos;t core.logic an implementation of minikanren? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:27</h><w>risto</w>isn&apos;t core.logic an implementation of minikanren?<div></div></z><z id="t1536777042" t="risto (def appendo [xs ys out] (conde [(eq xs []) (eq ys out)] [(fresh [first rest rec] (conso first rest xs) (conso first rec out) (appendo rest ys out))])) here fresh is calling call-fresh and conj under the hood, and conj is implemented using flatmap aka bind aka mapcat-stream [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:30</h><w>risto</w><pre>(def appendo [xs ys out]
   (conde
     [(eq xs []) (eq ys out)]
     [(fresh [first rest rec]
        (conso first rest xs)
        (conso first rec out)
        (appendo rest ys out))]))
</pre>
here <code>fresh</code> is calling <code>call-fresh</code> and <code>conj</code> under the hood, and <code>conj</code> is implemented using <code>flatmap</code> aka <code>bind</code> aka <code>mapcat-stream</code><div></div></z><z id="t1536777069" t="risto so it would just keep going forever it seems, like anyo [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:31</h><w>risto</w>so it would just keep going forever it seems, like <code>anyo</code><div></div></z><z id="t1536777158" t="hiredman no [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:32</h><w>hiredman</w>no<div></div></z><z id="t1536777180" t="hiredman you are confusing goals implemented in core.logic with functions implemented in clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:33</h><w>hiredman</w>you are confusing goals implemented in core.logic with functions implemented in clojure<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 4&quot;)}</div></z><z id="t1536777203" t="risto why do you think i&apos;m confusing it with functions in clojure? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:33</h><w>risto</w>why do you think i&apos;m confusing it with functions in clojure?<div></div></z><z id="t1536777232" t="hiredman actually it is hard to say, because call-fresh doesn&apos;t exist in core.logic either [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:33</h><w>hiredman</w>actually it is hard to say, because call-fresh doesn&apos;t exist in core.logic either<div></div></z><z id="t1536777254" t="hiredman because conj in clojure is the function clojure.core/conj which is definitely not implemented using flatmap [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:34</h><w>hiredman</w>because conj in clojure is the function clojure.core/conj which is definitely not implemented using flatmap<div></div></z><z id="t1536777287" t="hiredman there is a core.logic goal called conjo, which is a constraint goal, which is kind of a different kettle of fish [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:34</h><w>hiredman</w>there is a core.logic goal called conjo, which is a constraint goal, which is kind of a different kettle of fish<div></div></z><z id="t1536777298" t="risto ah i see the confusion, i&apos;m referring to the names of these things from the minikanren implementation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:34</h><w>risto</w>ah i see the confusion, i&apos;m referring to the names of these things from the minikanren implementation<div></div></z><z id="t1536777312" t="risto maybe core.logic is using a different scheme for it, but it&apos;s implementing minikanren under the hood [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:35</h><w>risto</w>maybe core.logic is using a different scheme for it, but it&apos;s implementing minikanren under the hood<div></div></z><z id="t1536777337" t="risto yeah i meant conjo , sorry [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:35</h><w>risto</w>yeah i meant <code>conjo</code>, sorry<div></div></z><z id="t1536777364" t="risto it has something called conj under the hood which isn&apos;t a goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:36</h><w>risto</w>it has something called <code>conj</code> under the hood which isn&apos;t a goal<div></div></z><z id="t1536777372" t="risto but not the same as clojure.core/conj [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:36</h><w>risto</w>but not the same as clojure.core/conj<div></div></z><z id="t1536777372" t="hiredman it is minikanren in a kind of hand wavey sense, it isn&apos;t a direct port [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:36</h><w>hiredman</w>it is minikanren in a kind of hand wavey sense, it isn&apos;t a direct port<div></div></z><z id="t1536777443" t="hiredman I don&apos;t think core-logic&apos;s conjo is the same as conj in minikanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:37</h><w>hiredman</w>I don&apos;t think core-logic&apos;s conjo is the same as conj in minikanren<div></div></z><z id="t1536777511" t="hiredman I think, and it has been a long time since I&apos;ve looked at minikanren, conj in mk is an operator on the underlying lazy stream implementation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:38</h><w>hiredman</w>I think, and it has been a long time since I&apos;ve looked at minikanren, conj in mk is an operator on the underlying lazy stream implementation<div></div></z><z id="t1536777588" t="risto yeah, it has a minimal implementation at the end of the paper http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:39</h><w>risto</w>yeah, it has a minimal implementation at the end of the paper <a href="http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf" target="_blank">http://webyrd.net/scheme-2013/papers/HemannMuKanren2013.pdf</a><div></div></z><z id="t1536777650" t="hiredman so it is a level of abstraction problem [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:40</h><w>hiredman</w>so it is a level of abstraction problem<div></div></z><z id="t1536777654" t="risto but that&apos;s not enough to stop it from infinitely recursing appendo afaict. It might be because it&apos;s such a minimal implementation of kanren that they leave out the more important parts to make something like appendo work, not sure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:40</h><w>risto</w>but that&apos;s not enough to stop it from infinitely recursing <code>appendo</code> afaict. It might be because it&apos;s such a minimal implementation of kanren that they leave out the more important parts to make something like <code>appendo</code> work, not sure<div></div></z><z id="t1536777663" t="hiredman mk is not implemented in mk [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:41</h><w>hiredman</w>mk is not implemented in mk<div></div></z><z id="t1536777701" t="hiredman micro kanren is another thing again [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:41</h><w>hiredman</w>micro kanren is another thing again<div></div></z><z id="t1536777728" t="risto what&apos;s the difference between minikanren and microkaren? microkanren is just an even more minimal version of kanren? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:42</h><w>risto</w>what&apos;s the difference between minikanren and microkaren? microkanren is just an even more minimal version of kanren?<div></div></z><z id="t1536777776" t="risto its on the minikanren website, i thought it was the same thing [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:42</h><w>risto</w>its on the minikanren website, i thought it was the same thing<div></div></z><z id="t1536778072" t="hiredman yeah, it is an even more stripped down version [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:47</h><w>hiredman</w>yeah, it is an even more stripped down version<div></div></z><z id="t1536778231" t="risto yeah [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:50</h><w>risto</w>yeah<div></div></z><z id="t1536778282" t="risto anyways, it says on the minikaren website that core.logic is an implementation of it.. even if it deviates somewhat it has to have some way of making sure appendo doesn&apos;t just recurse forever. I guess my question is how they manage to pull that off without ending up with a neverending stream like anyo [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-12</d><h>18:51</h><w>risto</w>anyways, it says on the minikaren website that core.logic is an implementation of it.. even if it deviates somewhat it has to have some way of making sure <code>appendo</code> doesn&apos;t just recurse forever. I guess my question is how they manage to pull that off without ending up with a neverending stream like <code>anyo</code><div></div></z><z id="t1536842661" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U13LQJN81&quot;}] : minikanren and microkanren are different beasts in terms of implementation. The stream stuff is specific to microkanren and descendants of it I believe. Minikanren as I understand it is as described/used in the reasoned schemer. microkanren in the reasoned schemer 2nd edition. Also Byrd’s thesis is minikanren / Hemann’s paper microkanren. I’m only just delving into the differences here myself, but I’m not sure programs written for one are always portable to the other… e.g. microkanren skips the occurs check for infinite loops — which might be pertinent to what you’re saying. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>12:44</h><w>rickmoynihan</w><a>@risto</a>: minikanren and microkanren are different beasts in terms of implementation.  The stream stuff is specific to microkanren and descendants of it I believe.  Minikanren as I understand it is as described/used in the reasoned schemer.  microkanren in the reasoned schemer 2nd edition.  Also Byrd’s thesis is minikanren / Hemann’s paper microkanren.

I’m only just delving into the differences here myself, but I’m not sure programs written for one are always portable to the other… e.g. microkanren skips the occurs check for infinite loops — which might be pertinent to what you’re saying.<div></div></z><z id="t1536842830" t="rickmoynihan I think it’s more or less true that minikanren semantics is what core.logic essentially implements. So if you’re looking at a core.logic appendo and wondering how it works with reference to the microkanren scheme implementation… I’d first check to see if there is an important difference between how appendo is written for the two dialects. It may be the same, but I wouldn’t be surprised if it wasn’t. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>12:47</h><w>rickmoynihan</w>I think it’s more or less true that minikanren semantics is what core.logic essentially implements.  So if you’re looking at a core.logic <code>appendo</code> and wondering how it works with reference to the microkanren scheme implementation… I’d first check to see if there is an important difference between how <code>appendo</code> is written for the two dialects.

It may be the same, but I wouldn’t be surprised if it wasn’t.<div></div></z><z id="t1536843312" t="risto ugh... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>12:55</h><w>risto</w>ugh...<div></div></z><z id="t1536843329" t="risto does anyone know any paper I can read on this or something similar? I can&apos;t find anything on this [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>12:55</h><w>risto</w>does anyone know any paper I can read on this or something similar? I can&apos;t find anything on this<div></div></z><z id="t1536843378" t="risto i don&apos;t want to rely on reverse engineering some implementation in case they&apos;re doing something weird to make it work, which could end up breaking other abstractions in weird ways [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>12:56</h><w>risto</w>i don&apos;t want to rely on reverse engineering some implementation in case they&apos;re doing something weird to make it work, which could end up breaking other abstractions in weird ways<div></div></z><z id="t1536853770" t="rickmoynihan If you’re using core.logic I think you’re probably safest sticking to minikanren literature…. but I have questions about this stuff myself, because i’m not 100% sure either. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>15:49</h><w>rickmoynihan</w>If you’re using core.logic I think you’re probably safest sticking to minikanren literature…. but I have questions about this stuff myself, because i’m not 100% sure either.<div></div></z><z id="t1536853818" t="hiredman core.logic is a minikanren like clojure is a lisp [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>15:50</h><w>hiredman</w>core.logic is a minikanren like clojure is a lisp<div></div></z><z id="t1536853886" t="hiredman I still think you are likely encountering a confusion of different levels, and the things you think are calling each other are at different levels of abstraction and not actually calling each other [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>15:51</h><w>hiredman</w>I still think you are likely encountering a confusion of different levels, and the things you think are calling each other are at different levels of abstraction and not actually calling each other<div></div></z><z id="t1536856763" t="risto i&apos;m not confusing different levels of abstraction [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>16:39</h><w>risto</w>i&apos;m not confusing different levels of abstraction<div></div></z><z id="t1536856770" t="risto i&apos;m working on implementing minikanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>16:39</h><w>risto</w>i&apos;m working on implementing minikanren<div></div></z><z id="t1536856847" t="hiredman sure, I&apos;ve done that, I followed the original thesis paper describing it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>16:40</h><w>hiredman</w>sure, I&apos;ve done that, I followed the original thesis paper describing it<div></div></z><z id="t1536856943" t="hiredman which seems to be a dead link now 😕 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>16:42</h><w>hiredman</w>which seems to be a dead link now <b>😕</b><div></div></z><z id="t1536880859" t="rickmoynihan I think this is the best link for that paper now btw: https://github.com/webyrd/dissertation-single-spaced/blob/master/thesis.pdf [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:20</h><w>rickmoynihan</w>I think this is the best link for that paper now btw: <a href="https://github.com/webyrd/dissertation-single-spaced/blob/master/thesis.pdf" target="_blank">https://github.com/webyrd/dissertation-single-spaced/blob/master/thesis.pdf</a><div></div></z><z id="t1536881013" t="rickmoynihan Incidentally I can confirm there are differences in appendo between minikanren and microkanren… though they’re pretty close: The reasoned schemer 2nd edition (microkanren) lists it as: (defrel (appendo l t out) (conde ((nullo l) (== t out)) ((fresh (res) (fresh (d) (cdro l d) (appendo d t res)) (fresh (a) (caro l a) (conso a res out)))))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:23</h><w>rickmoynihan</w>Incidentally I can confirm there are differences in appendo between minikanren and microkanren… though they’re pretty close:

The reasoned schemer 2nd edition (microkanren) lists it as:
<pre>(defrel (appendo l t out)
  (conde
    ((nullo l) (== t out))
    ((fresh (res)
     (fresh (d)
       (cdro l d)
       (appendo d t res))
     (fresh (a)
       (caro l a)
       (conso a res out))))))
</pre><div></div></z><z id="t1536881231" t="rickmoynihan 1st edition (minikanren) as: (define appendo (lambda (l s out) (conde ((nullo l) (== s out)) (else (fresh (a d res) (caro l a) (cdro l d) (appendo d s res) (conso a res out)))))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:27</h><w>rickmoynihan</w>1st edition (minikanren) as:

<pre>(define appendo
  (lambda (l s out)
  (conde
    ((nullo l) (== s out))
    (else
      (fresh (a d res)
        (caro l a)
        (cdro l d)
        (appendo d s res)
        (conso a res out))))))
</pre><div></div></z><z id="t1536881379" t="rickmoynihan (I hand typed those — so there may be errors) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:29</h><w>rickmoynihan</w>(I hand typed those — so there may be errors)<div></div></z><z id="t1536881448" t="rickmoynihan most differences are pretty negligible… main one here seems to be that fresh in microkanren doesn’t handle multiple bindings at once, and that conde no longer takes an else in microkanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:30</h><w>rickmoynihan</w>most differences are pretty negligible… main one here seems to be that <code>fresh</code> in microkanren doesn’t handle multiple bindings at once, and that <code>conde</code> no longer takes an <code>else</code> in microkanren<div></div></z><z id="t1536881672" t="hiredman I know you keep saying it isn&apos;t a level confusion issue, but I really still think it is, because bind, flatmap, etc are part of the little mini monadic library used for the the lazy streams of results from goals, but they are not actually used in goals themselves [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:34</h><w>hiredman</w>I know you keep saying it isn&apos;t a level confusion issue, but I really still think it is, because bind, flatmap, etc are part of the little mini monadic library used for the the lazy streams of results from goals, but they are not actually used in goals themselves<div></div></z><z id="t1536881791" t="hiredman and it has been pretty much a million years since I read the paper, and my implementation was in go, so I didn&apos;t bother with any of the list processing library and instead built stuff for using reflection to unify over go records, so I didn&apos;t implement appendo or conso [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:36</h><w>hiredman</w>and it has been pretty much a million years since I read the paper, and my implementation was in go, so I didn&apos;t bother with any of the list processing library and instead built stuff for using reflection to unify over go records, so I didn&apos;t implement appendo or conso<div></div></z><z id="t1536881928" t="hiredman conso, appendo, pretty much anything ending in o is a relation(or function returning a goal), that exists sort of within the domain of minikanren, but bind and flatmap are functions that exist outside of the domain of minikaren and are used to implement it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:38</h><w>hiredman</w>conso, appendo, pretty much anything ending in o is a relation(or function returning a goal), that exists sort of within the domain of minikanren, but bind and flatmap are functions that exist outside of the domain of minikaren and are used to implement it<div></div></z><z id="t1536882024" t="hiredman the papers tend translate the &apos;o&apos; suffix as a ° (degree symbol) which can make it easy to miss and confuse the names [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-13</d><h>23:40</h><w>hiredman</w>the papers tend translate the &apos;o&apos; suffix as a ° (degree symbol) which can make it easy to miss and confuse the names<div></div></z><z id="t1536929909" t="rickmoynihan agreed. I think the confusion is also perhaps because conj in microkanren is not clojure’s conj. It’s conj^2 which is conjunctive (`and`)… likewise disj in microkanren is disjuntive i.e. or . Not sure if core.logic ports these functions directly either, as they’re part of microkanren… and perhaps not minikanren… would need to look. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>12:58</h><w>rickmoynihan</w>agreed.  I think the confusion is also perhaps because <code>conj</code> in microkanren is not clojure’s conj.  It’s <code>conj^2</code> which is conjunctive (`and`)… likewise <code>disj</code> in microkanren is disjuntive i.e. <code>or</code>.  Not sure if core.logic ports these functions directly either, as they’re part of microkanren… and perhaps not minikanren… would need to look.<div></div></z><z id="t1536929977" t="rickmoynihan I don’t have the papers in front of me though so could also be wrong… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>12:59</h><w>rickmoynihan</w>I don’t have the papers in front of me though so could also be wrong…<div></div></z><z id="t1536957791" t="risto i know -o is a relation, how those lazy streams and conj/disj are implremented key in making sure appendo doesnt recurse forever and blow the stack [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:43</h><w>risto</w>i know -o is a relation, how those lazy streams and conj/disj are implremented key in making sure appendo doesnt recurse forever and blow the stack<div></div></z><z id="t1536958001" t="hiredman thats not true, the fact that appendo does case analysis and only one of the cases can be true at a time, and induction on the first argument (the first argument is smaller on every recursvie call) is what guarantees termination [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:46</h><w>hiredman</w>thats not true, the fact that appendo does case analysis and only one of the cases can be true at a time, and induction on the first argument (the first argument is smaller on every recursvie call) is what guarantees termination<div></div></z><z id="t1536958100" t="hiredman ah, the blowing the stack [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:48</h><w>hiredman</w>ah, the blowing the stack<div></div></z><z id="t1536958143" t="hiredman that is because in your implementation you are doing the recursive call to appendo when appendo is called, not as the logic program is running [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:49</h><w>hiredman</w>that is because in your implementation you are doing the recursive call to appendo when appendo is called, not as the logic program is running<div></div></z><z id="t1536958159" t="hiredman doing that switch is tricky in a language without macros [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:49</h><w>hiredman</w>doing that switch is tricky in a language without macros<div></div></z><z id="t1536958208" t="hiredman in my go implementation I had a special goal constructor for making recursive calls to make that work [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:50</h><w>hiredman</w>in my go implementation I had a special goal constructor for making recursive calls to make that work<div></div></z><z id="t1536958286" t="hiredman https://github.com/hiredman/gologic/blob/master/gologic.go#L533-L550 https://github.com/hiredman/gologic/blob/master/gologic_test.go#L110-L116 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:51</h><w>hiredman</w><a href="https://github.com/hiredman/gologic/blob/master/gologic.go#L533-L550" target="_blank">https://github.com/hiredman/gologic/blob/master/gologic.go#L533-L550</a> <a href="https://github.com/hiredman/gologic/blob/master/gologic_test.go#L110-L116" target="_blank">https://github.com/hiredman/gologic/blob/master/gologic_test.go#L110-L116</a><div></div></z><z id="t1536958305" t="risto yeah [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:51</h><w>risto</w>yeah<div></div></z><z id="t1536958323" t="risto there&apos;s something key with that which im messing up [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:52</h><w>risto</w>there&apos;s something key with that which im messing up<div></div></z><z id="t1536958350" t="hiredman it doesn&apos;t have to do with the stream implementation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:52</h><w>hiredman</w>it doesn&apos;t have to do with the stream implementation<div></div></z><z id="t1536958392" t="hiredman it has to do with goal construction, which without macros, you can&apos;t delay the recursive call until you know if you have to do it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:53</h><w>hiredman</w>it has to do with goal construction, which without macros, you can&apos;t delay the recursive call until you know if you have to do it<div></div></z><z id="t1536958458" t="hiredman so if or or disj is a regular function, all of its arguments must be evaluated before it is called, and if one of those is a recursive call, boom [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:54</h><w>hiredman</w>so if <code>or</code> or <code>disj</code> is a regular function, all of its arguments must be evaluated before it is called, and if one of those is a recursive call, boom<div></div></z><z id="t1536958498" t="risto yeah, it has to delay the goal somehow [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:54</h><w>risto</w>yeah, it has to delay the goal somehow<div></div></z><z id="t1536958601" t="hiredman so my Call goal constructor in go would look something like (fn [goal &amp; args] (fn [package] ((apply goal args) package))) in clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>20:56</h><w>hiredman</w>so my Call goal constructor in go would look something like <code>(fn [goal &amp; args] (fn [package] ((apply goal args) package)))</code> in clojure<div></div></z><z id="t1536958880" t="hiredman which has a similar structure to what conde in core.logic expands to https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1175-L1183 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-14</d><h>21:01</h><w>hiredman</w>which has a similar structure to what conde in core.logic expands to <a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1175-L1183" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1175-L1183</a><div></div></z><z id="t1537017465" t="andrea.crotti If there something like ntho available or any suggestions about how to implement it? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>13:17</h><w>andrea.crotti</w>If there something like ntho available or any suggestions about how to implement it? <div></div></z><z id="t1537017507" t="andrea.crotti I just need a logic express to check that an element is at a certain index of a vector [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>13:18</h><w>andrea.crotti</w>I just need a logic express to check that an element is at a certain index of a vector <div></div></z><z id="t1537032006" t="andrea.crotti Never mind that was the wrong approach, I&apos;ll try a few more things first I might be close already [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>17:20</h><w>andrea.crotti</w>Never mind that was the wrong approach, I&apos;ll try a few more things first I might be close already <div></div></z><z id="t1537032069" t="andrea.crotti In short I would like to have something that given a scrabble configuration and a list of letters return all the possible valid words [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>17:21</h><w>andrea.crotti</w>In short I would like to have something that given a scrabble configuration and a list of letters return all the possible valid words <div></div></z><z id="t1537032143" t="andrea.crotti So given with configuration &quot;h_ll_&quot; and letters &quot;hello&quot; it would return trivially just (&quot;hello&quot;) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>17:22</h><w>andrea.crotti</w>So given with configuration &quot;h_ll_&quot; and letters &quot;hello&quot;  it would return trivially just (&quot;hello&quot;) <div></div></z><z id="t1537032186" t="andrea.crotti It can be modelled similarly to sudoku actually and I think I&apos;m close [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-09-15</d><h>17:23</h><w>andrea.crotti</w>It can be modelled similarly to sudoku actually and I think I&apos;m close<div></div></z><z id="t1540755810" t="folcon Just kicking around core logic with one of the initial tutorials and I have this basic definition set: (pldb/db-rel parent x y) (defn grandparent [x y] (logic/fresh [z] (parent x z) (parent z y))) Now if I do this: (apply pldb/db [[parent :Bob :Mike] [parent :Mike :John]]) #_=&gt; {&quot;logic.test/parent_2&quot; #:cljs.core.logic.pldb{:unindexed #{(:Bob :Mike) (:Mike :John)}}} I get the result I expect, but when I do this: (apply pldb/db [[grandparent :Bob :John] [parent :Mike :John]]) #_=&gt; {nil #:cljs.core.logic.pldb{:unindexed #{(:Bob :John)}}, &quot;logic.test/parent_2&quot; #:cljs.core.logic.pldb{:unindexed #{(:Mike :John)}}} I get the above which I don’t understand, how do I not have the (:Bob :Mike) relation? Have I misunderstood something? Note: I have tried: (grandparent :Bob :John) =&gt; #object[Function] ((grandparent :Bob :John)) =&gt; #object[cljs.core.logic.Inc] but feeding them into the apply pldb/db statement just gave exceptions, so I thought I was going down the wrong track… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>19:43</h><w>folcon</w>Just kicking around core logic with one of the initial tutorials and I have this basic definition set:
<pre>(pldb/db-rel parent x y)
(defn grandparent [x y]
  (logic/fresh [z]
      (parent x z)
      (parent z y)))
</pre>
Now if I do this:
<pre>(apply pldb/db
    [[parent :Bob :Mike] [parent :Mike :John]])
#_=&gt; {&quot;logic.test/parent_2&quot;
 #:cljs.core.logic.pldb{:unindexed #{(:Bob :Mike) (:Mike :John)}}}
</pre>
I get the result I expect, but when I do this:
<pre>(apply pldb/db
    [[grandparent :Bob :John] [parent :Mike :John]])
#_=&gt; {nil #:cljs.core.logic.pldb{:unindexed #{(:Bob :John)}},
 &quot;logic.test/parent_2&quot;
 #:cljs.core.logic.pldb{:unindexed #{(:Mike :John)}}}
</pre>
I get the above which I don’t understand, how do I not have the <code>(:Bob :Mike)</code> relation? Have I misunderstood something?
Note: I have tried:
<code>(grandparent :Bob :John)</code> =&gt; <code>#object[Function]</code>
<code>((grandparent :Bob :John))</code> =&gt; <code>#object[cljs.core.logic.Inc]</code>
but feeding them into the <code>apply pldb/db</code> statement just gave exceptions, so I thought I was going down the wrong track…<div></div></z><z id="t1540762282" t="hiredman you can&apos;t really call things in core.logic like that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:31</h><w>hiredman</w>you can&apos;t really call things in core.logic like that<div></div></z><z id="t1540762313" t="hiredman the grandparent function is returning a a goal, and the goal has to be inside a call to run or run* to see what the result is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:31</h><w>hiredman</w>the grandparent function is returning a a goal, and the goal has to be inside a call to run or run* to see what the result is<div></div></z><z id="t1540762431" t="hiredman I haven&apos;t really used pldb, but my guess is to create facts you call the name of the relation as a function [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:33</h><w>hiredman</w>I haven&apos;t really used pldb, but my guess is to create facts you call the name of the relation as a function<div></div></z><z id="t1540762456" t="hiredman (parent :Bob :Mike) not [parent :Bob :Mike] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:34</h><w>hiredman</w><code>(parent :Bob :Mike)</code> not <code>[parent :Bob :Mike]</code><div></div></z><z id="t1540762488" t="hiredman but I might be wrong there [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:34</h><w>hiredman</w>but I might be wrong there<div></div></z><z id="t1540762594" t="hiredman and I am, the pldb tests show the vector thing (at least on the clojure side) https://github.com/clojure/core.logic/blob/master/src/test/clojure/clojure/core/logic/pldb/tests.clj#L15 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:36</h><w>hiredman</w>and I am, the pldb tests show the vector thing (at least on the clojure side) <a href="https://github.com/clojure/core.logic/blob/master/src/test/clojure/clojure/core/logic/pldb/tests.clj#L15" target="_blank">https://github.com/clojure/core.logic/blob/master/src/test/clojure/clojure/core/logic/pldb/tests.clj#L15</a><div></div></z><z id="t1540762719" t="hiredman in your example, grandparent is a core.logic goal, not a pldb fact, so you cannot use it like that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:38</h><w>hiredman</w>in your example, grandparent is a core.logic goal, not a pldb fact, so you cannot use it like that<div></div></z><z id="t1540762801" t="hiredman a core.logic goal is like a query you can run over facts, in this case grandparent is a query you can run over a database of parent relationships to derive grandparent relationships [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:40</h><w>hiredman</w>a core.logic goal is like a query you can run over facts, in this case grandparent is a query you can run over a database of parent relationships to derive grandparent relationships<div></div></z><z id="t1540763039" t="folcon Ok, but given these are relational operators, is there no way that I can take the statement [grandparent :Bob :John] and derive that that means =&gt; [parent :Bob _] [parent _ :John] ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:43</h><w>folcon</w>Ok, but given these are relational operators, is there no way that I can take the statement <code>[grandparent :Bob :John]</code> and derive that that means =&gt; <code>[parent :Bob _] [parent _ :John]</code>?<div></div></z><z id="t1540763072" t="folcon It’s very likely that I’m formulating these incorrectly. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:44</h><w>folcon</w>It’s very likely that I’m formulating these incorrectly.<div></div></z><z id="t1540763113" t="folcon Basically I’m trying to understand how I can create new facts, from statements. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:45</h><w>folcon</w>Basically I’m trying to understand how I can create new facts, from statements.<div></div></z><z id="t1540763133" t="folcon Or is that just not possible? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:45</h><w>folcon</w>Or is that just not possible?<div></div></z><z id="t1540763199" t="folcon Do I need to work out how to define grandparent as a db-rel perhaps? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:46</h><w>folcon</w>Do I need to work out how to define <code>grandparent</code> as a <code>db-rel</code> perhaps?<div></div></z><z id="t1540763663" t="hiredman you are looking to infer new facts based on existing facts and definitions of relationships between facts [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:54</h><w>hiredman</w>you are looking to infer new facts based on existing facts and definitions of relationships between facts<div></div></z><z id="t1540763817" t="hiredman you have sort of half that, the missing half is you have to write something that runs the grandparents (rewritten to return some kind of inferred list of parent facts) and adds the results to the database [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:56</h><w>hiredman</w>you have sort of half that, the missing half is you have to write something that runs the grandparents (rewritten to return some kind of inferred list of parent facts) and adds the results to the database<div></div></z><z id="t1540763841" t="hiredman you might want something more like a rules engine, like clara [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:57</h><w>hiredman</w>you might want something more like a rules engine, like clara<div></div></z><z id="t1540763863" t="hiredman http://www.clara-rules.org/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:57</h><w>hiredman</w><a href="http://www.clara-rules.org/" target="_blank">http://www.clara-rules.org/</a><div></div></z><z id="t1540763939" t="hiredman clara has a fairly active slack channel if it does look like what you want #clara [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:58</h><w>hiredman</w>clara has a fairly active slack channel if it does look like what you want #clara<div></div></z><z id="t1540763999" t="hiredman but I dunno, maybe not, because rules engines generally don&apos;t have logic variables [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>21:59</h><w>hiredman</w>but I dunno, maybe not, because rules engines generally don&apos;t have logic variables<div></div></z><z id="t1540764053" t="hiredman so [parent :Bob ?x] [parent ?x :John] isn&apos;t going to be directly something you can assert in to it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>22:00</h><w>hiredman</w>so [parent :Bob ?x] [parent ?x :John] isn&apos;t going to be directly something you can assert in to it<div></div></z><z id="t1540764167" t="hiredman on the other hand, given the definition of grandparent, by construction if grandparent is true then we know [parent :Bob ?x] [parent ?x :John] is already true in the database, so there is no point in asserting it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>22:02</h><w>hiredman</w>on the other hand, given the definition of grandparent, by construction if grandparent is true then we know  [parent :Bob ?x] [parent ?x :John] is already true in the database, so there is no point in asserting it<div></div></z><z id="t1540764208" t="folcon Thanks for mentioning clara =)… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>22:03</h><w>folcon</w>Thanks for mentioning clara =)…<div></div></z><z id="t1540764248" t="folcon I’m still going through the Reasoned Schemer at the moment, so I’m going to keep reading that and banging my head against this for at least the next week or so and see if I can get somewhere and if that completely fails I’ll give it a look. Much appreciate your help though :)… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>22:04</h><w>folcon</w>I’m still going through the Reasoned Schemer at the moment, so I’m going to keep reading that and banging my head against this for at least the next week or so and see if I can get somewhere and if that completely fails I’ll give it a look. Much appreciate your help though :)…<div></div></z><z id="t1540769977" t="folcon Also just out of curiosity, is there a reason that a lot of the examples I see use symbols? Instead of say keywords? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>23:39</h><w>folcon</w>Also just out of curiosity, is there a reason that a lot of the examples I see use symbols? Instead of say keywords?<div></div></z><z id="t1540770015" t="folcon I just got bitten by this: (l/run* [q] (l/== &apos;((pea) pod) `((pea) ~q))) =&gt; () (l/run* [q] (l/== &apos;(pea pod) `(pea ~q))) =&gt; () (l/run* [q] (l/== &apos;(:pea :pod) `(:pea ~q))) =&gt; (:pod) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>23:40</h><w>folcon</w>I just got bitten by this:
<pre>(l/run* [q]
  (l/== 
    &apos;((pea)  pod)
    `((pea) ~q)))
=&gt; ()
(l/run* [q]
  (l/== 
    &apos;(pea  pod)
    `(pea ~q)))
=&gt; ()
(l/run* [q]
  (l/== 
    &apos;(:pea  :pod)
    `(:pea ~q)))
=&gt; (:pod)
</pre><div></div></z><z id="t1540770075" t="folcon Finally realised it’s because in clojure the “`” resolves the symbol to the namespace, so the two symbols aren’t equal. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-28</d><h>23:41</h><w>folcon</w>Finally realised it’s because in clojure the “`” resolves the symbol to the namespace, so the two symbols aren’t equal.<div></div></z><z id="t1540907362" t="rickmoynihan FYI the clojure syntax to unqualify a symbol during a is to use ~&apos;foo` [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>13:49</h><r>rickmoynihan</r>FYI the clojure syntax to unqualify a symbol during a <code> </code> <code> is to use </code>~&apos;foo`<div></div></z><z id="t1540907510" t="rickmoynihan I’m assuming by examples you mean minikanren/TRS examples, that you’re porting to clojure rather than core.logic ones [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>13:51</h><r>rickmoynihan</r>I’m assuming by examples you mean minikanren/TRS examples, that you’re porting to clojure rather than <code>core.logic</code> ones<div></div></z><z id="t1540778245" t="folcon I’m somewhat surprised by how different the syntax is between core.logic and what’s in the reasoned schemer, it’s taking me a while to find the exact matching functions. For example, I spent a while I thinking that conj2 was conjo right up until this happened: (l/run* [q] (l/conjo u# (l/== &apos;corn q))) =&gt; (_0) eventually I worked out it was just: (l/run* [q] (l/and* [u# (l/== &apos;corn q)])) =&gt; () But this stuff isn’t obvious and so far googling hasn’t shown that those two functions match. (Assuming that I’m right about that…) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-29</d><h>01:57</h><w>folcon</w>I’m somewhat surprised by how different the syntax is between <code>core.logic</code> and what’s in the reasoned schemer, it’s taking me a while to find the exact matching functions. For example, I spent a while I thinking that <code>conj2</code> was <code>conjo</code> right up until this happened:
<pre>(l/run* [q]
  (l/conjo u# (l/== &apos;corn q)))
=&gt; (_0)
</pre>
eventually I worked out it was just:
<pre>(l/run* [q]
  (l/and* [u# (l/== &apos;corn q)]))
=&gt; ()
</pre>
But this stuff isn’t obvious and so far googling hasn’t shown that those two functions match. (Assuming that I’m right about that…)<div></div></z><z id="t1540778301" t="folcon I’m recording all the gotcha’s that I’m finding, but not really sure if it’s really of interest seeing as it’s not really been written anywhere… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-29</d><h>01:58</h><w>folcon</w>I’m recording all the gotcha’s that I’m finding, but not really sure if it’s really of interest seeing as it’s not really been written anywhere…<div></div></z><z id="t1540894492" t="deliciousowl https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>10:14</h><w>deliciousowl</w><a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a><div></div></z><z id="t1540907226" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U0JUM502E&quot;}] : do you have 1st or 2nd edition reasoned schemer? Because the minikanren implementation changed between those versions… and core.logic was derived from the 1st edition of the reasoned schemer not the 2nd. I’m not sure of all the differences might be caused that, but there will certainly be some. It might be worth mentioning this on that wiki page. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>13:47</h><w>rickmoynihan</w><a>@folcon</a>: do you have 1st or 2nd edition reasoned schemer?  Because the minikanren implementation changed between those versions… and core.logic was derived from the 1st edition of the reasoned schemer not the 2nd.

I’m not sure of all the differences might be caused that, but there will certainly be some.

It might be worth mentioning this on that wiki page.<div></div></z><z id="t1540912770" t="folcon 2nd edition [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>15:19</h><w>folcon</w>2nd edition<div></div></z><z id="t1540912786" t="folcon as I’m going to it fresh so I thought I’d get the 2nd ed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>15:19</h><w>folcon</w>as I’m going to it fresh so I thought I’d get the 2nd ed<div></div></z><z id="t1540912835" t="folcon I’m happy to document it somewhere, I was planning on doing a write up anyway… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>15:20</h><w>folcon</w>I’m happy to document it somewhere, I was planning on doing a write up anyway…<div></div></z><z id="t1540912852" t="folcon Hopefully others don’t get stuck =)… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>15:20</h><w>folcon</w>Hopefully others don’t get stuck =)…<div></div></z><z id="t1540915604" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U0JUM502E&quot;}] : IIRC someone else was on here a few weeks ago who had some similar confusion. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>16:06</h><w>rickmoynihan</w><a>@folcon</a>: IIRC someone else was on here a few weeks ago who had some similar confusion.<div></div></z><z id="t1540915716" t="rickmoynihan See in the logs here: https://clojurians-log.clojureverse.org/core-logic/2018-09-12 and here: https://clojurians-log.clojureverse.org/core-logic/2018-09-13 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>16:08</h><w>rickmoynihan</w>See in the logs here:

<a href="https://clojurians-log.clojureverse.org/core-logic/2018-09-12" target="_blank">https://clojurians-log.clojureverse.org/core-logic/2018-09-12</a>

and here:

<a href="https://clojurians-log.clojureverse.org/core-logic/2018-09-13" target="_blank">https://clojurians-log.clojureverse.org/core-logic/2018-09-13</a><div></div></z><z id="t1540916031" t="folcon Thanks, I’ll have a read 😃 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-10-30</d><h>16:13</h><w>folcon</w>Thanks, I’ll have a read <b>😃</b><div></div></z><z id="t1543217979" t="Jacob O&apos;Bryant I&apos;m trying to write a program to calculate the solution in the board game Clue. I&apos;m very new to core.logic , so I&apos;m starting off with a really simple version: given all the cards in my hand and in my opponents&apos; hands, what are the three remaining cards? I&apos;ve written the code below, but (do-query) just makes the CPU max out and never returns. How should I write this? Should I take a different approach? (def players [:green :scarlet :peacock :mustard :white :plum]) (def rooms [:study :hall :lounge :dining-room :kitchen :ballroom :conservatory :billiard-room :library]) (def weapons [:candlestick :lead-pipe :revolver :wrench :rope :knife]) (def all-cards (concat players rooms weapons)) (defn do-query [] (let [cards (repeatedly 21 logic/lvar) [solution remaining] (split-at 3 cards) [my-cards remaining] (split-at 6 remaining) [green-cards scarlet-cards] (split-at 6 remaining)] (logic/run 1 [p r w] (logic/== solution [p r w]) (logic/permuteo all-cards cards) (logic/== my-cards [:rope :study :scarlet :conservatory :mustard :wrench]) (logic/== green-cards [:green :lead-pipe :knife :dining-room :billiard-room :library]) (logic/== scarlet-cards [:revolver :plum :hall :lounge :kitchen :white]) (logic/membero p players) (logic/membero r rooms) (logic/membero w weapons)))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>07:39</h><w>Jacob O'Bryant</w>I&apos;m trying to write a program to calculate the solution in the board game Clue. I&apos;m very new to <code>core.logic</code>, so I&apos;m starting off with a really simple version: given all the cards in my hand and in my opponents&apos; hands, what are the three remaining cards? I&apos;ve written the code below, but <code>(do-query)</code> just makes the CPU max out and never returns. How should I write this? Should I take a different approach?

<pre>(def players [:green :scarlet :peacock :mustard :white :plum])
(def rooms [:study :hall :lounge :dining-room :kitchen :ballroom
            :conservatory :billiard-room :library])
(def weapons [:candlestick :lead-pipe :revolver :wrench :rope :knife])
(def all-cards (concat players rooms weapons))

(defn do-query []
  (let [cards (repeatedly 21 logic/lvar)
        [solution remaining] (split-at 3 cards)
        [my-cards remaining] (split-at 6 remaining)
        [green-cards scarlet-cards] (split-at 6 remaining)]
    (logic/run 1 [p r w]
      (logic/== solution [p r w])
      (logic/permuteo all-cards cards)
      (logic/== my-cards [:rope :study :scarlet
                          :conservatory :mustard :wrench])
      (logic/== green-cards [:green :lead-pipe :knife :dining-room
                             :billiard-room :library])
      (logic/== scarlet-cards [:revolver :plum :hall
                               :lounge :kitchen :white])
      (logic/membero p players)
      (logic/membero r rooms)
      (logic/membero w weapons))))
</pre><div></div></z><z id="t1543251958" t="hiredman the permuteo is what does it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>17:05</h><w>hiredman</w>the permuteo is what does it<div></div></z><z id="t1543252075" t="hiredman it results in a search tree with a lot of branches [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>17:07</h><w>hiredman</w>it results in a search tree with a lot of branches<div></div></z><z id="t1543252192" t="hiredman come to think of it, I don&apos;t think I&apos;ve ever played clue [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>17:09</h><w>hiredman</w>come to think of it, I don&apos;t think I&apos;ve ever played clue<div></div></z><z id="t1543252928" t="hiredman I think I would start from a map of card names to lvars, where each lvar will have a value like :mine, :opponent, or :deck (if deck is valid in clue) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>17:22</h><w>hiredman</w>I think I would start from a map of card names to lvars, where each lvar will have a value like :mine, :opponent, or :deck (if deck is valid in clue)<div></div></z><z id="t1543376034" t="Jacob O&apos;Bryant thanks, I&apos;ll try going down that route [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-28</d><h>03:33</h><r>Jacob O'Bryant</r>thanks, I&apos;ll try going down that route<div></div></z><z id="t1543267348" t="schmee if I have a core.logic goal that looks like this (fresh [?1 ?2 ?3 ?4] (membero ?1 vars) (membero ?2 vars) (membero ?3 vars) (membero ?4 vars) ...) will that expand into vars × vars × vars × vars in memory, even if I have other goals that constrain the answer set to something much smaller? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>21:22</h><w>schmee</w>if I have a core.logic goal that looks like this
<pre>(fresh [?1 ?2 ?3 ?4]
      (membero ?1 vars)
      (membero ?2 vars)
      (membero ?3 vars)
      (membero ?4 vars)
      ...)
</pre>
will that expand into <code>vars × vars × vars × vars</code> in memory, even if I have other goals that constrain the answer set to something much smaller?<div></div></z><z id="t1543267406" t="hiredman it depends what you mean by expands in memory [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>21:23</h><w>hiredman</w>it depends what you mean by expands in memory<div></div></z><z id="t1543267455" t="hiredman you will end up with a search tree that has at least that many branches, but the search tree typically is walked in a lazy fashion so the whole thing isn&apos;t realized at once [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-26</d><h>21:24</h><w>hiredman</w>you will end up with a search tree that has at least that many branches, but the search tree typically is walked in a lazy fashion so the whole thing isn&apos;t realized at once<div></div></z><z id="t1543301721" t="schmee here’s the actual thing: (run* [q] (init vars legs) (with-fresh (membero ?1 vars) (membero ?2 vars) (membero ?3 vars) (membero ?4 vars) (== ?1 [&quot;M&quot; ?a1 ?b1]) (== ?2 [&quot;T&quot; ?a2 ?b2]) (== ?3 [&quot;W&quot; ?a3 ?b3]) (== ?4 [&quot;R&quot; ?a4 ?b4]) (== ?b1 ?a2) (== ?b2 ?a3) (== ?b3 ?a4) (== q [?1 ?2 ?3 ?4])))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>06:55</h><w>schmee</w>here’s the actual thing:
<pre>(run* [q]
    (init vars legs)
    (with-fresh
      (membero ?1 vars)
      (membero ?2 vars)
      (membero ?3 vars)
      (membero ?4 vars)
      (== ?1 [&quot;M&quot; ?a1 ?b1])
      (== ?2 [&quot;T&quot; ?a2 ?b2])
      (== ?3 [&quot;W&quot; ?a3 ?b3])
      (== ?4 [&quot;R&quot; ?a4 ?b4])
      (== ?b1 ?a2)
      (== ?b2 ?a3)
      (== ?b3 ?a4)
      (== q [?1 ?2 ?3 ?4]))))
</pre><div></div></z><z id="t1543301747" t="schmee vars is a collection of tuples like this: [&quot;M&quot; &quot;SAN_ANTONIO&quot; &quot;HOUSTON&quot;] (day of week, start, end) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>06:55</h><w>schmee</w><code>vars</code> is a collection of tuples like this: <code>[&quot;M&quot; &quot;SAN_ANTONIO&quot; &quot;HOUSTON&quot;]</code> (day of week, start, end)<div></div></z><z id="t1543301779" t="schmee I’m messing around with a core.logic solution to https://kevinlynagh.com/notes/shipping-puzzle/ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>06:56</h><w>schmee</w>I’m messing around with a core.logic solution to <a href="https://kevinlynagh.com/notes/shipping-puzzle/" target="_blank">https://kevinlynagh.com/notes/shipping-puzzle/</a><div></div></z><z id="t1543301828" t="schmee but running the above with just 100 tuples take 15 minutes to produce one result [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>06:57</h><w>schmee</w>but running the above with just 100 tuples take 15 minutes to produce one result<div></div></z><z id="t1543301911" t="schmee (`with-fresh` just binds all ? variables to a fresh lvar) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>06:58</h><w>schmee</w>(`with-fresh` just binds all <code>?</code> variables to a fresh lvar)<div></div></z><z id="t1543346342" t="norman How much faster does it go if you move the memberos to the end? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-27</d><h>19:19</h><w>norman</w>How much faster does it go if you move the memberos to the end?<div></div></z><z id="t1543449343" t="arohner Are there any examples of core.logic being used with functions(rather than macros)? I have a problem where I want to build up goals from data, so the heavy-macro usage seems to get in the way [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-28</d><h>23:55</h><w>arohner</w>Are there any examples of core.logic being used with functions(rather than macros)? I have a problem where I want to build up goals from data, so the heavy-macro usage seems to get in the way<div></div></z><z id="t1543449353" t="arohner also the number of logic variables is unknown at compile time [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-28</d><h>23:55</h><w>arohner</w>also the number of logic variables is unknown at compile time<div></div></z><z id="t1543449620" t="hiredman https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L28-L35 isn&apos;t all that dynamic but it creates lvars via a function call, and then uses l/composeg to constrain all the generate lvars [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:00</h><w>hiredman</w><a href="https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L28-L35" target="_blank">https://gist.github.com/hiredman/05befd5b39eef89b86ca#file-bench-clj-L28-L35</a> isn&apos;t all that dynamic but it creates lvars via a function call,  and then uses l/composeg to constrain all the generate lvars<div></div></z><z id="t1543449690" t="arohner thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:01</h><w>arohner</w>thanks<div></div></z><z id="t1543449760" t="arohner my number of goals is also dynamic based on the data. Clearly I can read the source and call the macro expansions directly, just wondering how ‘against the grain’ that is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:02</h><w>arohner</w>my number of goals is also dynamic based on the data. Clearly I can read the source and call the macro expansions directly, just wondering how ‘against the grain’ that is<div></div></z><z id="t1543449802" t="hiredman https://gist.github.com/terjesb/3181018 might another interesting thing to look at, particular the usage of to-stream [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:03</h><w>hiredman</w><a href="https://gist.github.com/terjesb/3181018" target="_blank">https://gist.github.com/terjesb/3181018</a> might another interesting thing to look at, particular the usage of to-stream<div></div></z><z id="t1543449899" t="hiredman I kind of doubt you actually want that, it would be similar to a clojure program with a dynamic number of functions based on the data, it is possible, but much more likely you have a fixed number of functions and you want to drive the composition via the data [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:04</h><w>hiredman</w>I kind of doubt you actually want that, it would be similar to a clojure program with a dynamic number of functions based on the data, it is possible, but much more likely you have a fixed number of functions and you want to drive the composition via the data<div></div></z><z id="t1543449960" t="hiredman but, for example, that code I linked generates a goal per items in a map, and then composes them all in to one goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:06</h><w>hiredman</w>but, for example, that code I linked generates a goal per items in a map, and then composes them all in to one goal<div></div></z><z id="t1543450071" t="arohner I think there are a fixed set of functions, with an unknown number of function calls [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:07</h><w>arohner</w>I think there are a fixed set of functions, with an unknown number of function calls<div></div></z><z id="t1543450174" t="hiredman I don&apos;t think that is against the grain at all [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:09</h><w>hiredman</w>I don&apos;t think that is against the grain at all<div></div></z><z id="t1543450410" t="hiredman likely you&apos;ll end up with a lot of stuff similar pos-int-vals in that first example, where you map some function over all your data generating a goal for each part of the data, then reduce it with composeg to create a single goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:13</h><w>hiredman</w>likely you&apos;ll end up with a lot of stuff similar pos-int-vals in that first example, where you map some function over all your data generating a goal for each part of the data, then reduce it with composeg to create a single goal<div></div></z><z id="t1543450478" t="hiredman composeg is conjuction of goals, and there is another one for disjunction [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-11-29</d><h>00:14</h><w>hiredman</w>composeg is conjuction of goals, and there is another one for disjunction<div></div></z><z id="t1543934038" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U050R7ECY&quot;}] : I’d like to do something similar [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2018-12-04</d><h>14:33</h><w>rickmoynihan</w><a>@arohner</a>: I’d like to do something similar<div></div></z><z id="t1550899798" t="Kelly Innes Hello! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:29</h><w>Kelly Innes</w>Hello!<div></div></z><z id="t1550899837" t="Kelly Innes I&apos;m trying to work through latest edition of the The Reasoned Schemer in Clojure and I&apos;m encountering some Scheme syntax I don&apos;t quite know how to translate. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:30</h><w>Kelly Innes</w>I&apos;m trying to work through latest edition of the The Reasoned Schemer in Clojure and I&apos;m encountering some Scheme syntax I don&apos;t quite know how to translate.<div></div></z><z id="t1550899975" t="Kelly Innes (run* [q] (== `(((,q)) pod) &apos;(((pea) pod)))) (run* [q] (== &apos;(((pea)) pod) `(((pea)) ,q))) are analogues for chapter 1, frame 33 and 34, and should associate q with pod and pea, respectively [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:32</h><w>Kelly Innes</w><pre>(run* [q]
  (== `(((,q)) pod) &apos;(((pea) pod))))

(run* [q]
  (== &apos;(((pea)) pod) `(((pea)) ,q)))
</pre>

are analogues for chapter 1, frame 33 and 34, and should associate q with <code>pod and </code>pea, respectively<div></div></z><z id="t1550900003" t="Kelly Innes However, I&apos;m getting () for both when I eval then with CIDER. Am I doing something incorrectly? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:33</h><w>Kelly Innes</w>However, I&apos;m getting <code>()</code> for both when I eval then with CIDER. Am I doing something incorrectly?<div></div></z><z id="t1550900187" t="hiredman , is ~ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:36</h><w>hiredman</w>, is ~<div></div></z><z id="t1550900205" t="hiredman , is unquote in scheme and whitespace in clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:36</h><w>hiredman</w><code>,</code> is unquote in scheme and whitespace in clojure<div></div></z><z id="t1550900222" t="hiredman ~ is syntax-unquote in clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:37</h><w>hiredman</w><code>~</code> is syntax-unquote in clojure<div></div></z><z id="t1550900269" t="Kelly Innes Awesome, thank you~ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:37</h><w>Kelly Innes</w>Awesome, thank you~<div></div></z><z id="t1550900395" t="Kelly Innes Wonderful, that&apos;s working~ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:39</h><w>Kelly Innes</w>Wonderful, that&apos;s working~<div></div></z><z id="t1550900401" t="Kelly Innes (run* [q] (fresh [x] (== `(~x) q))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:40</h><w>Kelly Innes</w><pre>(run* [q]
  (fresh [x]
    (== `(~x) q)))
</pre><div></div></z><z id="t1550901466" t="Kelly Innes HM, I still must have something wrong because these two are evaluating incorrectly: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:57</h><w>Kelly Innes</w>HM, I still must have something wrong because these two are evaluating incorrectly:<div></div></z><z id="t1550901467" t="Kelly Innes (run* [q] (== &apos;(((pea)) pod) `(((pea)) ~q))) (run* [q] (fresh [x] (== `(((~q)) ~x) `(((~x)) pod)))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>05:57</h><w>Kelly Innes</w><pre>(run* [q]
  (== &apos;(((pea)) pod) `(((pea)) ~q)))

(run* [q]
  (fresh [x]
    (== `(((~q)) ~x) `(((~x)) pod))))
</pre><div></div></z><z id="t1550903470" t="yuhan that&apos;s due to the auto namespacing of symbols in syntax-quoted forms [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>06:31</h><w>yuhan</w>that&apos;s due to the auto namespacing of symbols in syntax-quoted forms<div></div></z><z id="t1550903614" t="yuhan ie. the first pea is a regular non-namespaced symbol but the second expands to your-ns/pea [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>06:33</h><w>yuhan</w>ie. the first <code>pea</code> is a regular non-namespaced symbol but the second expands to <code>your-ns/pea</code><div></div></z><z id="t1550903670" t="yuhan I think a much more idomatic way of doing this in Clojure is using vectors [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>06:34</h><w>yuhan</w>I think a much more idomatic way of doing this in Clojure is using vectors<div></div></z><z id="t1550903691" t="yuhan (run* [q] (== [[[&apos;pea]] &apos;pod] [[[&apos;pea]] q])) (run* [q] (fresh [x] (== [[[q]] x] [[[x]] &apos;pod]))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>06:34</h><w>yuhan</w><pre>(run* [q]
  (== [[[&apos;pea]] &apos;pod] [[[&apos;pea]] q]))

(run* [q]
  (fresh [x]
    (== [[[q]] x] [[[x]] &apos;pod])))
</pre><div></div></z></g><g id="s3"><z id="t1550938041" t="Kelly Innes Cool, thank you -- I&apos;ll try replacing the lists with vectors when I hit a snag like this again. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>16:07</h><w>Kelly Innes</w>Cool, thank you -- I&apos;ll try replacing the lists with vectors when I hit a snag like this again.<div></div></z><z id="t1550946858" t="Kelly Innes Awesome, I was able to get through chapter 1! https://github.com/kellyi/clj-lisp-sandbox/blob/master/reasoned-schemer/src/reasoned_schemer/one.clj [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-23</d><h>18:34</h><w>Kelly Innes</w>Awesome, I was able to get through chapter 1! <a href="https://github.com/kellyi/clj-lisp-sandbox/blob/master/reasoned-schemer/src/reasoned_schemer/one.clj" target="_blank">https://github.com/kellyi/clj-lisp-sandbox/blob/master/reasoned-schemer/src/reasoned_schemer/one.clj</a><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;simple_smile&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content ({:tag :img, :attrs {:alt &quot;simple_smile&quot;, :src &quot;https://a.slack-edge.com/80588/img/emoji_2017_12_06/apple/simple_smile.png&quot;}, :content nil})} &quot; 10&quot;)}</div></z><z id="t1551148279" t="devn Yusssssssss [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-02-26</d><h>02:31</h><w>devn</w>Yusssssssss<div></div></z><z id="t1551646089" t="Kelly Innes Completed translations of Chapters 3 and 4 of Reasoned Schemer into Clojure here, too: https://github.com/kellyi/clj-lisp-sandbox/tree/master/reasoned-schemer/src/reasoned_schemer [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-03-03</d><h>20:48</h><w>Kelly Innes</w>Completed translations of Chapters 3 and 4 of Reasoned Schemer into Clojure here, too: <a href="https://github.com/kellyi/clj-lisp-sandbox/tree/master/reasoned-schemer/src/reasoned_schemer" target="_blank">https://github.com/kellyi/clj-lisp-sandbox/tree/master/reasoned-schemer/src/reasoned_schemer</a><div></div></z><z id="t1551646120" t="Kelly Innes I noticed that https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer recommends not using vectors generally but instead sticking with list or llist : [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-03-03</d><h>20:48</h><w>Kelly Innes</w>I noticed that <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a> recommends not using vectors generally but instead sticking with <code>list</code> or <code>llist</code>:<div></div></z><z id="t1551646137" t="Kelly Innes &gt; Related, implementing list? as shown in TRS 3-1 is unnecessary. seq? is more appropriate in Clojure. This is because proper list-like things and pairs are not conflated in Clojure as they are in Scheme. In general you should not use vectors when working through TRS. Use list or a quoted list. TRS examples that use Scheme quasiquote will need to be written like so (TRS 3-7): [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-03-03</d><h>20:48</h><w>Kelly Innes</w>&gt; Related, implementing list? as shown in TRS 3-1 is unnecessary. seq? is more appropriate in Clojure. This is because proper list-like things and pairs are not conflated in Clojure as they are in Scheme. In general you should not use vectors when working through TRS. Use list or a quoted list. TRS examples that use Scheme quasiquote will need to be written like so (TRS 3-7):<div></div></z><z id="t1560542804" t="nblumoe Hi! Is there a way to express disequality with core.logic in CLJS? Here is a small example what I would like to do: (l/run* [p] (l/fresh [pos-1 pos-2] (l/membero pos-1 [0 1]) (l/membero pos-2 [0 1]) (l/!= pos-1 pos-2) ;; pos-1 must not be equal to pos-2 (l/== p [{:x pos-1} {:x pos-2}]))) https://github.com/clojure/core.logic/wiki/Using-core.logic-with-ClojureScript says disequality constraints aren&apos;t available on CLJS. Is there a way around this? Are finite domains available on CLJS? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-06-14</d><h>20:06</h><w>nblumoe</w>Hi! Is there a way to express disequality with core.logic in CLJS?

Here is a small example what I would like to do:
<pre>(l/run* [p]
          (l/fresh [pos-1 pos-2]
                   (l/membero pos-1 [0 1])
                   (l/membero pos-2 [0 1])
                   (l/!= pos-1 pos-2)                 ;; pos-1 must not be equal to pos-2
                   (l/== p [{:x pos-1}
                            {:x pos-2}])))
</pre>

<a href="https://github.com/clojure/core.logic/wiki/Using-core.logic-with-ClojureScript" target="_blank">https://github.com/clojure/core.logic/wiki/Using-core.logic-with-ClojureScript</a> says disequality constraints aren&apos;t available on CLJS. Is there a way around this?

Are finite domains available on CLJS?<div></div></z><z id="t1560543389" t="noprompt I can’t speak to core logic but you can express this kind of thing in a forward way with Meander. If you’re interested, feel free to share your problem in #meander. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-06-14</d><h>20:16</h><r>noprompt</r>I can’t speak to core logic but you can express this kind of thing in a forward way with Meander. If you’re interested, feel free to share your problem in #meander.<div></div></z><z id="t1564094472" t="javazquez Hi everyone, I just started digging into core.logic and trying to wrap my brain around it. I created a family tree that looks like the following (def facts (pldb/db [parento :james :jerry] [parento :jerry :jordan] [parento :jerry :richard] [parento :jerry :harry] [parento :jerry :jackson] [parento :george :james])) Jerry has multiple kiddos and George is the great grand father to jordan, richard, harry and jackson. I have been struggling to write code that given one of these children, would produce all the ancestors without dups ex. given :jackson return jerry, james, george any help would be greatly appreciated 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:41</h><w>javazquez</w>Hi everyone, I just started digging into core.logic and trying to wrap my brain around it.
I created a family tree that looks like the following
(def facts
  (pldb/db
   [parento :james :jerry]
   [parento :jerry :jordan]
   [parento :jerry :richard]
   [parento :jerry :harry]
   [parento :jerry :jackson]
   [parento :george :james]))
Jerry has multiple kiddos and George is the great grand father to jordan, richard, harry and jackson.
I have been struggling to write code that given one of these children, would produce all the ancestors without dups
ex.  given :jackson return
jerry, james, george

any help would be greatly appreciated <b>🙂</b><div></div></z><z id="t1564095355" t="hiredman something of the form (defn accesto [foo q] (l/conde [(parento q foo)][(l/fresh [x] (parento q x) (parento x foo))])) but I haven&apos;t really used pldb and I am pretty rusty [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:55</h><w>hiredman</w>something of the form <code>(defn accesto [foo q] (l/conde [(parento q foo)][(l/fresh [x] (parento q x) (parento x foo))]))</code> but I haven&apos;t really used pldb and I am pretty rusty<div></div></z><z id="t1564095458" t="hiredman but unique results can be difficult to achieve, just because of the iterative way queries run [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:57</h><w>hiredman</w>but unique results can be difficult to achieve, just because of the iterative way queries run<div></div></z><z id="t1564095566" t="javazquez i see [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:59</h><w>javazquez</w>i see<div></div></z><z id="t1564095569" t="javazquez ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:59</h><w>javazquez</w>ok<div></div></z><z id="t1564095574" t="javazquez Thank you! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>22:59</h><w>javazquez</w>Thank you!<div></div></z><z id="t1564097318" t="javazquez Out of curiosity and learning, would you model the data differently? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>23:28</h><w>javazquez</w>Out of curiosity and learning, would you model the data differently?<div></div></z><z id="t1564098265" t="hiredman nope [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-25</d><h>23:44</h><w>hiredman</w>nope<div></div></z><z id="t1564567139" t="cheatex Hi. I&apos;m experimenting with the pldb module. And the only sample fails when I try it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-31</d><h>09:58</h><w>cheatex</w>Hi. I&apos;m experimenting with the pldb module. And the only sample fails when I try it.<div></div></z><z id="t1564567158" t="cheatex ClassCastException class clojure.core.logic.LVar cannot be cast to class java.lang.Number (clojure.core.logic.LVar is in unnamed module of loader clojure.lang.DynamicClassLoader @7dffda8b; java.lang.Number is in module java.base of loader &apos;bootstrap&apos;) clojure.lang.Numbers.equiv (Numbers.java:213) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-31</d><h>09:59</h><w>cheatex</w><code>ClassCastException class clojure.core.logic.LVar cannot be cast to class java.lang.Number (clojure.core.logic.LVar is in unnamed module of loader clojure.lang.DynamicClassLoader @7dffda8b; java.lang.Number is in module java.base of loader &apos;bootstrap&apos;)  clojure.lang.Numbers.equiv (Numbers.java:213)</code><div></div></z><z id="t1564568097" t="cheatex Ok, i&apos;ve messed up namespaces [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-07-31</d><h>10:14</h><w>cheatex</w>Ok, i&apos;ve messed up namespaces<div></div></z><z id="t1570733021" t="hiredman clojure contrib projects (which basically means anything under the clojure org in github) don&apos;t take pull requests [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-10-10</d><h>18:43</h><w>hiredman</w>clojure contrib projects (which basically means anything under the clojure org in github) don&apos;t take pull requests<div></div></z><z id="t1570733028" t="hiredman you have to file a patch in jira [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-10-10</d><h>18:43</h><w>hiredman</w>you have to file a patch in jira<div></div></z><z id="t1570733110" t="hiredman it has been over two years since the last patch went in, so you may have to wait awhile [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-10-10</d><h>18:45</h><w>hiredman</w>it has been over two years since the last patch went in, so you may have to wait awhile<div></div></z><z id="t1572756494" t="sogaiu does lein classpath work for anyone else with the latest? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>04:48</h><w>sogaiu</w>does lein classpath work for anyone else with the latest?<div></div></z><z id="t1572756557" t="sogaiu or lein deps for that matter 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>04:49</h><w>sogaiu</w>or lein deps for that matter <b>🙂</b><div></div></z><z id="t1572757033" t="sogaiu commenting out the [cider/cider-nrepl &quot;0.8.1&quot;] portion of project.clj alows those commands to complete... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>04:57</h><w>sogaiu</w>commenting out the [cider/cider-nrepl &quot;0.8.1&quot;] portion of project.clj alows those commands to complete...<div></div></z><z id="t1572759031" t="dpsutton that&apos;s over four years old and from a time when cider wouldn&apos;t auto-inject its own dependencies. it should be removed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>05:30</h><w>dpsutton</w>that&apos;s over four years old and from a time when cider wouldn&apos;t auto-inject its own dependencies. it should be removed<div></div></z><z id="t1572759087" t="sogaiu [:attrs {:href &quot;/_/_/users/U11BV7MTK&quot;}] perhaps i should file an issue? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>05:31</h><w>sogaiu</w><a>@dpsutton</a> perhaps i should file an issue?<div></div></z><z id="t1572759148" t="dpsutton i can&apos;t speak for the project maintainer or who would want it but that sounds reasonable. possibly make a new question on http://ask.clojure.com ? I think that&apos;s the way for tickets to be approved into jira [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>05:32</h><w>dpsutton</w>i can&apos;t speak for the project maintainer or who would want it but that sounds reasonable. possibly make a new question on <a href="http://ask.clojure.com" target="_blank">http://ask.clojure.com</a>? I think that&apos;s the way for tickets to be approved into jira<div></div></z><z id="t1572759177" t="sogaiu thanks, i&apos;ll look into ask.clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-03</d><h>05:32</h><w>sogaiu</w>thanks, i&apos;ll look into ask.clojure<div></div></z><z id="t1572989729" t="sogaiu after some reconsideration and spelunking... [:attrs {:href &quot;/_/_/users/U04V70XH6&quot;}] i noticed you have made some commits to core.logic in the past, perhaps you would know what a good way to report about the project.clj issue mentioned above is. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:35</h><w>sogaiu</w>after some reconsideration and spelunking...<a>@seancorfield</a> i noticed you have made some commits to core.logic in the past, perhaps you would know what a good way to report about the project.clj issue mentioned above is.<div></div></z><z id="t1572990063" t="seancorfield My commits have been purely administrative -- I haven&apos;t touched the code and I&apos;ve never used core.logic . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:41</h><w>seancorfield</w>My commits have been purely administrative -- I haven&apos;t touched the code and I&apos;ve never used <code>core.logic</code>.<div></div></z><z id="t1572990224" t="seancorfield According to https://clojure.org/community/contrib_libs core.logic is &quot;Stable&quot; -- meaning development is irregular at best. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:43</h><w>seancorfield</w>According to <a href="https://clojure.org/community/contrib_libs" target="_blank">https://clojure.org/community/contrib_libs</a> <code>core.logic</code> is &quot;Stable&quot; -- meaning development is irregular at best.<div></div></z><z id="t1572990302" t="seancorfield If you have a JIRA account, you can log an issue here https://clojure.atlassian.net/projects/LOGIC/issues [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:45</h><w>seancorfield</w>If you have a JIRA account, you can log an issue here <a href="https://clojure.atlassian.net/projects/LOGIC/issues" target="_blank">https://clojure.atlassian.net/projects/LOGIC/issues</a><div></div></z><z id="t1572990351" t="seancorfield Otherwise, write up an issue on http://ask.clojure.org and Alex should see it and if it&apos;s just a matter of updating project.clj or the instructions, he may go ahead and do it [:attrs {:href &quot;/_/_/users/UG1C3AD5Z&quot;}] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:45</h><w>seancorfield</w>Otherwise, write up an issue on <a href="http://ask.clojure.org" target="_blank">http://ask.clojure.org</a> and Alex should see it and if it&apos;s just a matter of updating <code>project.clj</code> or the instructions, he may go ahead and do it <a>@sogaiu</a><div></div></z><z id="t1572990400" t="sogaiu [:attrs {:href &quot;/_/_/users/U04V70XH6&quot;}] thanks for the help! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-05</d><h>21:46</h><w>sogaiu</w><a>@seancorfield</a> thanks for the help!<div></div></z><z id="t1573562718" t="rickmoynihan Looks like that fix was applied: https://github.com/clojure/core.logic/commit/3b63f43097667d4686043d78a90affb967af93de [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-12</d><h>12:45</h><w>rickmoynihan</w>Looks like that fix was applied: <a href="https://github.com/clojure/core.logic/commit/3b63f43097667d4686043d78a90affb967af93de" target="_blank">https://github.com/clojure/core.logic/commit/3b63f43097667d4686043d78a90affb967af93de</a><div></div></z><z id="t1573571548" t="sogaiu yes, thanks to dpsutton and seancorfield suggesting the ask.clojure route. alexmiller was very helpful there: https://ask.clojure.org/index.php/8831/lein-deps-lein-classpath-fail-current-core-logic-where-report [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-12</d><h>15:12</h><w>sogaiu</w>yes, thanks to dpsutton and seancorfield suggesting the ask.clojure route.  alexmiller was very helpful there: <a href="https://ask.clojure.org/index.php/8831/lein-deps-lein-classpath-fail-current-core-logic-where-report" target="_blank">https://ask.clojure.org/index.php/8831/lein-deps-lein-classpath-fail-current-core-logic-where-report</a><div></div></z><z id="t1573724411" t="rickmoynihan cool TIL: mvn -q dependency:build-classpath -Dmdep.outputFile=classpath.txt [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-14</d><h>09:40</h><w>rickmoynihan</w>cool TIL: <code>mvn -q dependency:build-classpath -Dmdep.outputFile=classpath.txt</code><div></div></z><z id="t1573726293" t="rickmoynihan The one thing I’d like fixed in core.logic is this warning on newer clojure versions: WARNING: indexed? already refers to: #&apos;clojure.core/indexed? in namespace: clojure.core.logic.pldb, being replaced by: #&apos;clojure.core.logic.pldb/indexed? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-14</d><h>10:11</h><w>rickmoynihan</w>The one thing I’d like fixed in core.logic is this warning on newer clojure versions:

<pre>WARNING: indexed? already refers to: #&apos;clojure.core/indexed? in namespace: clojure.core.logic.pldb, being replaced by: #&apos;clojure.core.logic.pldb/indexed?
</pre><div></div></z><z id="t1573726323" t="rickmoynihan not a major issue, but it winds me up 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-14</d><h>10:12</h><w>rickmoynihan</w>not a major issue, but it winds me up <b>🙂</b><div></div></z><z id="t1573743611" t="sogaiu [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] the maven thing was nice indeed -- wanted to be able to send the output to stdout to pass it on to another program (without using an intermediate file), but haven&apos;t had much luck figuring that one out. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-14</d><h>15:00</h><w>sogaiu</w><a>@rickmoynihan</a> the maven thing was nice indeed -- wanted to be able to send the output to stdout to pass it on to another program (without using an intermediate file), but haven&apos;t had much luck figuring that one out.<div></div></z><z id="t1573865471" t="xiongtx I’m trying to find a more natural way of destructuring maps. Basically, I want: (require &apos;[clojure.core.logic :as l) (l/run* [q b d] (l/featurec q {:a {:b b} :d d}) &lt;some other constraints&gt; (l/== q {:a {:b 1 :c &quot;irrelevant&quot;} :d [1 2 3] :e &quot;whatever&quot;})) To return ([{:a {:b 1}, :d [1 2 3]} 1 [1 2 3]]) , i.e. q should have only the form specified in the featurec constraint. What’s the best way to do that? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>00:51</h><w>xiongtx</w>I’m trying to find a more natural way of destructuring maps. Basically, I want:

<pre>(require &apos;[clojure.core.logic :as l)

(l/run* [q b d]
  (l/featurec q {:a {:b b}
                 :d d})
&lt;some other constraints&gt;
  (l/== q {:a {:b 1
               :c &quot;irrelevant&quot;}
           :d [1 2 3]
           :e &quot;whatever&quot;}))
</pre>

To return <code>([{:a {:b 1}, :d [1 2 3]} 1 [1 2 3]])</code>, i.e. <code>q</code> should have only the form specified in the <code>featurec</code> constraint. What’s the best way to do that?<div></div></z><z id="t1573869575" t="noprompt [:attrs {:href &quot;/_/_/users/U2J7JRTDX&quot;}] Meander’s pattern matcher is suited for this task (among others): (m/find {:a {:b 1 :c &quot;irrelevant&quot;} :d [1 2 3] :e &quot;whatever&quot;} {:a {:b ?b} :d ?d :as ?q} [?q ?b ?d]) ;; =&gt; [{:a {:b 1, :c &quot;irrelevant&quot;} :d [1 2 3] :e &quot;whatever&quot;} 1 [1 2 3]] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>01:59</h><r>noprompt</r><a>@U2J7JRTDX</a> Meander’s pattern matcher is suited for this task (among others): <pre>(m/find {:a {:b 1
             :c &quot;irrelevant&quot;}
         :d [1 2 3]
         :e &quot;whatever&quot;}
  {:a {:b ?b}
   :d ?d
   :as ?q}
  [?q ?b ?d])
;; =&gt;
[{:a {:b 1, :c &quot;irrelevant&quot;}
  :d [1 2 3]
  :e &quot;whatever&quot;}
 1
 [1 2 3]]
</pre><div></div></z><z id="t1573869593" t="noprompt https://github.com/noprompt/meander [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>01:59</h><r>noprompt</r><a href="https://github.com/noprompt/meander" target="_blank">https://github.com/noprompt/meander</a><div></div></z><z id="t1573869806" t="xiongtx Ah, I knew this had to be a solved problem! Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:03</h><r>xiongtx</r>Ah, I knew this had to be a solved problem! Thanks!<div></div></z><z id="t1573869828" t="noprompt You can even query maps for multiple answers. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:03</h><r>noprompt</r>You can even query maps for multiple answers.<div></div></z><z id="t1573869830" t="noprompt (m/search {:a {:b 1 :c &quot;irrelevant&quot;} :d [1 2 3] :e {:f &quot;whatever&quot;}} {?k {:as ?v}} [?k ?v]) ;; =&gt; ([:e {:f &quot;whatever&quot;}] [:a {:b 1, :c &quot;irrelevant&quot;}]) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:03</h><r>noprompt</r><pre>(m/search {:a {:b 1
               :c &quot;irrelevant&quot;}
           :d [1 2 3]
           :e {:f &quot;whatever&quot;}}
  {?k {:as ?v}}
  [?k ?v])
;; =&gt;
([:e {:f &quot;whatever&quot;}] [:a {:b 1, :c &quot;irrelevant&quot;}])
</pre><div></div></z><z id="t1573869858" t="noprompt We’re located in the #meander channel for more on the topic of pattern matching/rewriting. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:04</h><r>noprompt</r>We’re located in the #meander channel for more on the topic of pattern matching/rewriting.<div></div></z><z id="t1573869882" t="noprompt Its a work in progress but we can do some neat stuff if you have these kinds of problems 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:04</h><r>noprompt</r>Its a work in progress but we can do some neat stuff if you have these kinds of problems <b>🙂</b><div></div></z><z id="t1573872716" t="xiongtx Actually, I see that the ?q returned by meander is still contains keys that aren’t specified in the matching map, i.e. :c &amp; :e . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:51</h><r>xiongtx</r>Actually, I see that the <code>?q</code> returned by <code>meander</code> is still contains keys that aren’t specified in the matching map, i.e. <code>:c</code> &amp; <code>:e</code>.<div></div></z><z id="t1573873035" t="xiongtx Here’s more what I had in mind, based on https://stackoverflow.com/a/40560433 (obviously not a comprehensive solution). (defn pathwalk [f path e] (let [e&apos; (f path e)] (cond (map? e&apos;) (-&gt;&gt; e&apos; (map (fn [[k x]] [k (pathwalk f (conj path k) x)])) (into (empty e&apos;))) (coll? e&apos;) (-&gt;&gt; e&apos; (map-indexed (fn [i x] (pathwalk f (conj path i) x))) (into (empty e&apos;))) :else e&apos;))) (defn match-only [match m] (let [bindings (atom {}) form (atom {})] (pathwalk (fn [path v] (when (symbol? v) (let [x (get-in m path)] (swap! form assoc-in path x) (swap! bindings assoc v x))) v) [] match) [@form @bindings])) (match-only &apos;{:a {:b b} :d d} {:a {:b 1 :c &quot;irrelevant&quot;} :d [1 2 3] :e &quot;whatever&quot;}) ;; =&gt; [{:a {:b 1}, :d [1 2 3]} {b 1, d [1 2 3]}] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>02:57</h><r>xiongtx</r>Here’s more what I had in mind, based on <a href="https://stackoverflow.com/a/40560433" target="_blank">https://stackoverflow.com/a/40560433</a> (obviously not a comprehensive solution).

<pre>(defn pathwalk [f path e]
  (let [e&apos; (f path e)]
    (cond
      (map? e&apos;)  (-&gt;&gt; e&apos;
                      (map (fn [[k x]] [k (pathwalk f (conj path k) x)]))
                      (into (empty e&apos;)))
      (coll? e&apos;) (-&gt;&gt; e&apos;
                      (map-indexed (fn [i x] (pathwalk f (conj path i) x)))
                      (into (empty e&apos;)))
      :else e&apos;)))

(defn match-only
  [match m]
  (let [bindings (atom {})
        form (atom {})]
    (pathwalk (fn [path v]
                (when (symbol? v)
                  (let [x (get-in m path)]
                    (swap! form assoc-in path x)
                    (swap! bindings assoc v x)))
                v)
              []
              match)
    [@form @bindings]))
</pre>

<pre>(match-only &apos;{:a {:b b}
              :d d}
            {:a {:b 1
                 :c &quot;irrelevant&quot;}
             :d [1 2 3]
             :e &quot;whatever&quot;})
;; =&gt; [{:a {:b 1}, :d [1 2 3]} {b 1, d [1 2 3]}]
</pre><div></div></z><z id="t1573935103" t="noprompt [:attrs {:href &quot;/_/_/users/U2J7JRTDX&quot;}] Sorry for the late reply. It is possible to return only the part of the map that matched but it requires some advanced use of the library. If you know what you’re querying for (which is usually half the battle) you could simply construct the data on the right side as so: (m/find {:a {:b 1 :c &quot;irrelevant&quot;} :d [1 2 3] :e &quot;whatever&quot;} {:a {:b ?b} :d ?d} [{:a {:b ?b} :d ?d} {:b ?b} ?d]) ;; =&gt; [{:a {:b 1}, :d [1 2 3]} {:b 1} [1 2 3]] [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>20:11</h><r>noprompt</r><a>@U2J7JRTDX</a> Sorry for the late reply. It is possible to return only the part of the map that matched but it requires some advanced use of the library. If you know what you’re querying for (which is usually half the battle) you could simply construct the data on the right side as so: <pre>(m/find {:a {:b 1
             :c &quot;irrelevant&quot;}
         :d [1 2 3]
         :e &quot;whatever&quot;}
  {:a {:b ?b}
   :d ?d}
  [{:a {:b ?b} :d ?d}
   {:b ?b}
   ?d])
;; =&gt;
[{:a {:b 1}, :d [1 2 3]} {:b 1} [1 2 3]]
</pre><div></div></z><z id="t1574126862" t="xiongtx Been using meander for value extraction in some of our tests &amp; it’s been great! E.g. 🤢 (-&gt; query graphql-request (get-in [:data :applications :edges]) first (get-in [:node :app_accounts :edges]) first :node (select-keys [:account_name])) to 😄 (meander/match (graphql-request query) {:data {:applications {:edges [{:node {:app_accounts {:edges [{:node {:account_name ?account-name}}]}}}]}}} {:account_name ?account-name}) Great job! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-19</d><h>01:27</h><r>xiongtx</r>Been using <code>meander</code> for value extraction in some of our tests &amp; it’s been great! E.g.

<b>🤢</b>
<pre>(-&gt; query
    graphql-request
    (get-in [:data :applications :edges])
    first
    (get-in [:node :app_accounts :edges])
    first
    :node
    (select-keys [:account_name]))
</pre>

to

<b>😄</b>
<pre>(meander/match (graphql-request query)
  {:data
   {:applications
    {:edges
     [{:node
       {:app_accounts
        {:edges
         [{:node
           {:account_name ?account-name}}]}}}]}}}
  {:account_name ?account-name})
</pre>

Great job!<div></div></z><z id="t1574127293" t="noprompt Sweet! 👍 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-19</d><h>01:34</h><r>noprompt</r>Sweet! <b>👍</b><div></div></z><z id="t1573865870" t="hiredman you can&apos;t really [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>00:57</h><w>hiredman</w>you can&apos;t really<div></div></z><z id="t1573865931" t="hiredman I take that back, you can [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>00:58</h><w>hiredman</w>I take that back, you can<div></div></z><z id="t1573866044" t="hiredman I am back to can&apos;t. basically the way to build structures via unification requires and exact match, and featurec does not require an exact match, and core.logic doesn&apos;t provide relational operations on maps [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>01:00</h><w>hiredman</w>I am back to can&apos;t. basically the way to build structures via unification requires and exact match, and featurec does not require an exact match, and core.logic doesn&apos;t provide relational operations on maps<div></div></z><z id="t1573866448" t="xiongtx Hmm, so you’re saying unification can’t do a partial match? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>01:07</h><w>xiongtx</w>Hmm, so you’re saying unification can’t do a partial match?<div></div></z><z id="t1573866528" t="hiredman right [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-11-16</d><h>01:08</h><w>hiredman</w>right<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;slightly_frowning_face&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;🙁&quot;)} &quot; 4&quot;)}</div></z><z id="t1575514329" t="dpsutton if i have 6 logic variables, is there a way to ensure that 5 of them are distinct? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>02:52</h><w>dpsutton</w>if i have 6 logic variables, is there a way to ensure that 5 of them are distinct?<div></div></z><z id="t1575536148" t="nitaai See distinct under https://github.com/clojure/core.logic/wiki/Features#clpfd I assume that’s what you are looking for. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>08:55</h><r>nitaai</r>See <code>distinct</code> under <a href="https://github.com/clojure/core.logic/wiki/Features#clpfd" target="_blank">https://github.com/clojure/core.logic/wiki/Features#clpfd</a>

I assume that’s what you are looking for.<div></div></z><z id="t1575624216" t="yuhan That&apos;s only for fd logic variables though, I would think the question was equivalent to &quot;at most one pair out of the 6 lvars can unify&quot; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-06</d><h>09:23</h><r>yuhan</r>That&apos;s only for <code>fd</code> logic variables though, I would think the question was equivalent to &quot;at most one pair out of the 6 lvars can unify&quot;<div></div></z><z id="t1575624319" t="yuhan Can&apos;t think of an easy way to express that (besides macroexpanding all the permutations by brute force) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-06</d><h>09:25</h><r>yuhan</r>Can&apos;t think of an easy way to express that (besides macroexpanding all the permutations by brute force)<div></div></z><z id="t1575624474" t="nitaai Oh yes, good point. I interpreted the question rather as “I know which 5 of the 6 lvars should be distinct”. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-06</d><h>09:27</h><r>nitaai</r>Oh yes, good point. I interpreted the question rather as “I know which 5 of the 6 lvars should be distinct”.<div></div></z><z id="t1575890333" t="Stefan What about defining something like this: (untested) (defnc 5-distinct [a b c d e f] (= 5 (count (set [a b c d e f])))) and then using that as a goal inside run ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-09</d><h>11:18</h><r>Stefan</r>What about defining something like this: (untested)

<pre>(defnc 5-distinct [a b c d e f]
  (= 5 (count (set [a b c d e f]))))</pre>
and then using that as a goal inside <code>run</code>?<div></div></z><z id="t1575572321" t="eoliphant hi I’m getting a weird error in the repl as I work through the core.logic getting started. I’m on jDK 11, wondering if it’s module related (l/run* [q] (l/fresh [a] (l/membero a [1 2 3]) (l/membero q [3 4 5]) (== a q))) Error printing return value (ClassCastException) at clojure.lang.Numbers/equiv (Numbers.java:238). class clojure.core.logic.LVar cannot be cast to class java.lang.Number (clojure.core.logic.LVar is in unnamed module of loader clojure.lang.DynamicClassLoader @11da06db; java.lang.Number is in module java.base of loader &apos;bootstrap&apos;) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>18:58</h><w>eoliphant</w>hi I’m getting a weird error in the repl as I work through the core.logic getting started.  I’m on jDK 11, wondering if it’s module related
<pre>(l/run* [q]
  (l/fresh [a]
    (l/membero a [1 2 3])
    (l/membero q [3 4 5])
    (== a q)))
Error printing return value (ClassCastException) at clojure.lang.Numbers/equiv (Numbers.java:238).
class clojure.core.logic.LVar cannot be cast to class java.lang.Number (clojure.core.logic.LVar is in unnamed module of loader clojure.lang.DynamicClassLoader @11da06db; java.lang.Number is in module java.base of loader &apos;bootstrap&apos;)</pre><div></div></z><z id="t1575573161" t="hiredman you need l/== not == [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>19:12</h><w>hiredman</w>you need <code>l/==</code> not <code>==</code><div></div></z><z id="t1575573210" t="hiredman == is clojure core&apos;s numeric comparison function, l/== is core.logic&apos;s unification goal [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>19:13</h><w>hiredman</w><code>==</code> is clojure core&apos;s numeric comparison function, <code>l/==</code> is core.logic&apos;s unification goal<div></div></z><z id="t1575573326" t="dpsutton i hit that yesterday. the guide uses use clojure.core.logic so its easy to miss [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>19:15</h><w>dpsutton</w>i hit that yesterday. the guide uses <code>use clojure.core.logic</code> so its easy to miss<div></div></z><z id="t1575586535" t="eoliphant ah duh lol thanks guys [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-05</d><h>22:55</h><w>eoliphant</w>ah duh lol thanks guys<div></div></z><z id="t1577233405" t="erwinrooijakkers Hi all [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:23</h><w>erwinrooijakkers</w>Hi all<div></div></z><z id="t1577233425" t="erwinrooijakkers I am trying to solve Advent of Code day 14 using core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:23</h><w>erwinrooijakkers</w>I am trying to solve Advent of Code day 14 using core.logic<div></div></z><z id="t1577233466" t="erwinrooijakkers Day 14 is about “Stoichemetry” and minimizing reactants. It has constraints like this: 10 ORE =&gt; 10 A 1 ORE =&gt; 1 B 7 A, 1 B =&gt; 1 C 7 A, 1 C =&gt; 1 D 7 A, 1 D =&gt; 1 E 7 A, 1 E =&gt; 1 FUEL [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:24</h><w>erwinrooijakkers</w>Day 14 is about “Stoichemetry” and minimizing reactants. It has constraints like this:

<pre>10 ORE =&gt; 10 A
1 ORE =&gt; 1 B
7 A, 1 B =&gt; 1 C
7 A, 1 C =&gt; 1 D
7 A, 1 D =&gt; 1 E
7 A, 1 E =&gt; 1 FUEL</pre><div></div></z><z id="t1577233484" t="erwinrooijakkers This means 1 FUEL can be made of 7A and 1E [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:24</h><w>erwinrooijakkers</w>This means 1 FUEL can be made of 7A and 1E<div></div></z><z id="t1577233497" t="erwinrooijakkers The goal is to find how much ORE is needed for 1 FUEL [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:24</h><w>erwinrooijakkers</w>The goal is to find how much ORE is needed for 1 FUEL<div></div></z><z id="t1577233507" t="erwinrooijakkers Any pointers on how to do this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:25</h><w>erwinrooijakkers</w>Any pointers on how to do this?<div></div></z><z id="t1577233552" t="erwinrooijakkers What type of features can I use? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:25</h><w>erwinrooijakkers</w>What type of features can I use?<div></div></z><z id="t1577233577" t="erwinrooijakkers Any examples that solve a similar problem? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:26</h><w>erwinrooijakkers</w>Any examples that solve a similar problem?<div></div></z><z id="t1577233848" t="erwinrooijakkers I’ll watch these videos: • https://www.youtube.com/watch?v=irjP8BO1B8Y • https://www.youtube.com/watch?v=lzCIyvFgUVk [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:30</h><w>erwinrooijakkers</w>I’ll watch these videos:

• <a href="https://www.youtube.com/watch?v=irjP8BO1B8Y" target="_blank">https://www.youtube.com/watch?v=irjP8BO1B8Y</a>
• <a href="https://www.youtube.com/watch?v=lzCIyvFgUVk" target="_blank">https://www.youtube.com/watch?v=lzCIyvFgUVk</a><div></div></z><z id="t1577234001" t="erwinrooijakkers I have the input now as a hash map from output to inputs: {[1 &quot;D&quot;] ([7 &quot;A&quot;] [1 &quot;C&quot;]), [1 &quot;FUEL&quot;] ([7 &quot;A&quot;] [1 &quot;E&quot;]), [10 &quot;A&quot;] ([10 &quot;ORE&quot;]), [1 &quot;C&quot;] ([7 &quot;A&quot;] [1 &quot;B&quot;]), [1 &quot;B&quot;] ([1 &quot;ORE&quot;]), [1 &quot;E&quot;] ([7 &quot;A&quot;] [1 &quot;D&quot;])} [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:33</h><w>erwinrooijakkers</w>I have the input now as a hash map from output to inputs:

<pre>{[1 &quot;D&quot;] ([7 &quot;A&quot;] [1 &quot;C&quot;]),
 [1 &quot;FUEL&quot;] ([7 &quot;A&quot;] [1 &quot;E&quot;]),
 [10 &quot;A&quot;] ([10 &quot;ORE&quot;]),
 [1 &quot;C&quot;] ([7 &quot;A&quot;] [1 &quot;B&quot;]),
 [1 &quot;B&quot;] ([1 &quot;ORE&quot;]),
 [1 &quot;E&quot;] ([7 &quot;A&quot;] [1 &quot;D&quot;])}</pre><div></div></z><z id="t1577234041" t="erwinrooijakkers Hope someone can give me some pointers! Merry Christmas [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>00:34</h><w>erwinrooijakkers</w>Hope someone can give me some pointers! Merry Christmas<div></div></z><z id="t1577240999" t="hiredman I think key is representation, you&apos;ll want to use a map of thing to count of thing instead of those pairs of thing and count [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>02:29</h><w>hiredman</w>I think key is representation, you&apos;ll want to use a map of thing to count of thing instead of those pairs of thing and count<div></div></z><z id="t1577241258" t="hiredman And write a relation, call it reduco that takes an input map and an output map, and it has a bunch of conde clauses that do things like constrain the fuel count of output to be one less them the input, and the count of a to be 7 more, and the count of e to be 1 one, using the fd namespace [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>02:34</h><w>hiredman</w>And write a relation, call it reduco that takes an input map and an output map, and it has a bunch of conde clauses that do things like constrain the fuel count of output to be one less them the input, and the count of a to be 7 more, and the count of e to be 1 one, using the fd namespace<div></div></z><z id="t1577242054" t="hiredman so something like (require &apos;[clojure.core.logic :as l] &apos;[clojure.core.logic.fd :as fd]) (defn reduco [input output] (l/conde [(fd/&gt; (get input &quot;FUEL&quot;) 0) (fd/- (get input &quot;FUEL&quot;) 1 (get output &quot;FUEL&quot;)) (fd/+ (get input &quot;A&quot;) 7 (get output &quot;A&quot;)) (fd/+ (get input &quot;E&quot;) 1 (get output &quot;E&quot;)) ;; (l/== (get input &quot;ORE&quot;) (get output &quot;ORE&quot;)) (l/== (get input &quot;B&quot;) (get output &quot;B&quot;)) (l/== (get input &quot;C&quot;) (get output &quot;C&quot;)) (l/== (get input &quot;D&quot;) (get output &quot;D&quot;)) ])) (l/run 1 [output] (l/fresh [ore a b c d e fuel] (l/== output {&quot;FUEL&quot; fuel &quot;ORE&quot; ore &quot;A&quot; a &quot;B&quot; b &quot;C&quot; c &quot;D&quot; d &quot;E&quot; e}) (reduco {&quot;FUEL&quot; 1 &quot;ORE&quot; 0 &quot;A&quot; 0 &quot;B&quot; 0 &quot;C&quot; 0 &quot;D&quot; 0 &quot;E&quot; 0} {&quot;FUEL&quot; fuel &quot;ORE&quot; ore &quot;A&quot; a &quot;B&quot; b &quot;C&quot; c &quot;D&quot; d &quot;E&quot; e}))) but with reduco fleshed out with the rest of the reduction rules and then with some driving goal that recursively calls reduco until you get back a map with nothing but ore in it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>02:47</h><w>hiredman</w>so something like
<pre>(require &apos;[clojure.core.logic :as l]
         &apos;[clojure.core.logic.fd :as fd])

(defn reduco [input output]
  (l/conde
   [(fd/&gt; (get input &quot;FUEL&quot;) 0)
    (fd/- (get input &quot;FUEL&quot;) 1 (get output &quot;FUEL&quot;))
    (fd/+ (get input &quot;A&quot;) 7 (get output &quot;A&quot;))
    (fd/+ (get input &quot;E&quot;) 1 (get output &quot;E&quot;))
    ;;
    (l/== (get input &quot;ORE&quot;) (get output &quot;ORE&quot;))
    (l/== (get input &quot;B&quot;) (get output &quot;B&quot;))
    (l/== (get input &quot;C&quot;) (get output &quot;C&quot;))
    (l/== (get input &quot;D&quot;) (get output &quot;D&quot;))
    ]))


(l/run 1 [output]
  (l/fresh [ore a b c d e fuel]
    (l/== output {&quot;FUEL&quot; fuel
                  &quot;ORE&quot; ore
                  &quot;A&quot; a
                  &quot;B&quot; b
                  &quot;C&quot; c
                  &quot;D&quot; d
                  &quot;E&quot; e})
    (reduco {&quot;FUEL&quot; 1
             &quot;ORE&quot; 0
             &quot;A&quot; 0
             &quot;B&quot; 0
             &quot;C&quot; 0
             &quot;D&quot; 0
             &quot;E&quot; 0}
            {&quot;FUEL&quot; fuel
                  &quot;ORE&quot; ore
                  &quot;A&quot; a
                  &quot;B&quot; b
                  &quot;C&quot; c
                  &quot;D&quot; d
                  &quot;E&quot; e})))</pre>
but with reduco fleshed out with the rest of the reduction rules and then with some driving goal that recursively calls reduco until you get back a map with nothing but ore in it<div></div></z><z id="t1577242088" t="hiredman the tricky thing with mixing maps and core.logic is map stuff will be non-relational, so just watch out for it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>02:48</h><w>hiredman</w>the tricky thing with mixing maps and core.logic is map stuff will be non-relational, so just watch out for it<div></div></z><z id="t1577268683" t="erwinrooijakkers Thanks!!! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>10:11</h><w>erwinrooijakkers</w>Thanks!!!<div></div></z><z id="t1577276533" t="erwinrooijakkers Why doesn’t this find negative values? (defn sqrts [n] (l/run 2 [x] (fd/in x (fd/interval (- n) n)) (fd/* x x n))) (sqrts 4) ;; =&gt; (2) (sqrts 25) ;; =&gt; (5) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-25</d><h>12:22</h><w>erwinrooijakkers</w>Why doesn’t this find negative values?

<pre>(defn sqrts [n]
  (l/run 2 [x]
    (fd/in x (fd/interval (- n) n))
    (fd/* x x n)))

(sqrts 4)
;; =&gt; (2)

(sqrts 25)
;; =&gt; (5)</pre><div></div></z><z id="t1577321426" t="hiredman dunno why, but fd/interval as written turns negative bounds into 0 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>00:50</h><w>hiredman</w>dunno why, but fd/interval as written turns negative bounds into 0<div></div></z><z id="t1577321502" t="hiredman https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/fd.clj#L363-L364 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>00:51</h><w>hiredman</w><a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/fd.clj#L363-L364" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/fd.clj#L363-L364</a><div></div></z><z id="t1577359659" t="erwinrooijakkers Aha 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:27</h><w>erwinrooijakkers</w>Aha <b>🙂</b><div></div></z><z id="t1577359665" t="erwinrooijakkers &gt; non negative integer or more generally discrete constraints. These last constraints, sometimes also called finite domain constraints, are generally studied in the Constraint Satisfaction Problems (CSP) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:27</h><w>erwinrooijakkers</w>&gt; non negative integer or more generally discrete constraints. These last constraints, sometimes also called finite domain constraints, are generally studied in the Constraint Satisfaction Problems (CSP)<div></div></z><z id="t1577359669" t="erwinrooijakkers Source: https://www.sciencedirect.com/topics/computer-science/finite-domain-constraint [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:27</h><w>erwinrooijakkers</w>Source: <a href="https://www.sciencedirect.com/topics/computer-science/finite-domain-constraint" target="_blank">https://www.sciencedirect.com/topics/computer-science/finite-domain-constraint</a><div></div></z><z id="t1577359680" t="erwinrooijakkers So a finite domain is nonnegative by definition [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:28</h><w>erwinrooijakkers</w>So a finite domain is nonnegative by definition<div></div></z><z id="t1577360118" t="erwinrooijakkers Related question: https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:35</h><w>erwinrooijakkers</w>Related question: <a href="https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values" target="_blank">https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values</a><div></div></z><z id="t1577360556" t="erwinrooijakkers There might be a reason related to increasing search space why negative numbers are excluded, but I can’t find it anywhere [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:42</h><w>erwinrooijakkers</w>There might be a reason related to increasing search space why negative numbers are excluded, but I can’t find it anywhere<div></div></z><z id="t1577360791" t="erwinrooijakkers But anyway for this specific problem I don’t need negative numbers [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:46</h><w>erwinrooijakkers</w>But anyway for this specific problem I don’t need negative numbers<div></div></z><z id="t1577360833" t="erwinrooijakkers I don’t need to represent the input as maps [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2019-12-26</d><h>11:47</h><w>erwinrooijakkers</w>I don’t need to represent the input as maps<div></div></z><z id="t1580156407" t="Nico hi, I&apos;m having some trouble with core.logic and function arities. I&apos;m going through the reasoned schemer to learn and I&apos;ve been trying to write some of my own relations as exercises. I wrote a simple implementation of concat which worked fine, and I tried to convert it to a relation: (defn dumb-concat [x y] (cond (empty? y) x (empty? x) y :else (recur (conj x (first y)) (rest y)))) (defn dumb-concato [x y out] (l/conde [(l/emptyo y) (l/== out x)] [(l/emptyo x) (l/== out y)] [l/succeed (l/fresh [f r c] (l/conso f r y) (l/conjo x f c) (dumb-concato c r) )])) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:20</h><w>Nico</w>hi, I&apos;m having some trouble with core.logic and function arities. I&apos;m going through the reasoned schemer to learn and I&apos;ve been trying to write some of my own relations as exercises. I wrote a simple implementation of <code>concat</code> which worked fine, and I tried to convert it to a relation:
<pre>(defn dumb-concat [x y]
  (cond
    (empty? y) x
    (empty? x) y
    :else (recur (conj x (first y)) (rest y))))

(defn dumb-concato [x y out]
  (l/conde
    [(l/emptyo y) (l/== out x)]
    [(l/emptyo x) (l/== out y)]
    [l/succeed (l/fresh [f r c]
                   (l/conso f r y)
                   (l/conjo x f c)
                   (dumb-concato c r)
                   )]))</pre><div></div></z><z id="t1580156483" t="Nico however, when I try and test this with (l/run 1 [q] (dumb-concato [0 1 2 3] [5 4 3] q)) it just says Wrong number of args (2) passed to: logic-practice.core/dumb-concato [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:21</h><w>Nico</w>however, when I try and test this with <code>(l/run 1 [q] (dumb-concato [0 1 2 3] [5 4 3] q))</code>  it just says <code>Wrong number of args (2) passed to: logic-practice.core/dumb-concato</code><div></div></z><z id="t1580156489" t="Nico what am I doing wrong? Or is this a bug? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:21</h><w>Nico</w>what am I doing wrong? Or is this a bug?<div></div></z><z id="t1580157017" t="Nico because I&apos;m certainly passing 3 arguments to it (the two vectors and the lvar) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:30</h><w>Nico</w>because I&apos;m certainly passing 3 arguments to it (the two vectors and the lvar)<div></div></z><z id="t1580157189" t="jimmy (dumb-concato c r) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:33</h><w>jimmy</w><code>(dumb-concato c r)</code><div></div></z><z id="t1580157235" t="jimmy ^ That line looks like the error to me. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:33</h><w>jimmy</w>^ That line looks like the error to me.<div></div></z><z id="t1580158074" t="hiredman Dum-concato is just a regular function, not a core.logic relation, so you can&apos;t use it like that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:47</h><w>hiredman</w>Dum-concato is just a regular function, not a core.logic relation, so you can&apos;t use it like that<div></div></z><z id="t1580158092" t="hiredman Err [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:48</h><w>hiredman</w>Err<div></div></z><z id="t1580158102" t="hiredman Dumb-concat [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:48</h><w>hiredman</w>Dumb-concat<div></div></z><z id="t1580158267" t="hiredman What exactly a core.logic relation is kind of complicated, but a recursive definition would be something like, a core.logic relation is a function whose body is composed of core.logic relations [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:51</h><w>hiredman</w>What exactly a  core.logic relation is kind of complicated, but a recursive definition would be something like, a core.logic relation is a function whose body is composed of core.logic relations<div></div></z><z id="t1580158373" t="hiredman So dumb-concato would be a relation if it didn&apos;t call dumb-concat, but the body of dumb-concat is all non-relations (it is all functions from clojure.core) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:52</h><w>hiredman</w>So dumb-concato would be a relation if it didn&apos;t call dumb-concat, but the body of dumb-concat is all non-relations (it is all functions from clojure.core)<div></div></z><z id="t1580158493" t="hiredman The kind of problem you get with calling clojure.core functions in a logic program is they don&apos;t know how to deal with logic variables [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:54</h><w>hiredman</w>The kind of problem you get with calling clojure.core functions in a logic program is they don&apos;t know how to deal with logic variables<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;point_up&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;☝️&quot;)} &quot; 4&quot;)}</div></z><z id="t1580158530" t="hiredman And relations don&apos;t return values, but functions do [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:55</h><w>hiredman</w>And relations don&apos;t return values, but functions do<div></div></z><z id="t1580158571" t="hiredman Oh [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:56</h><w>hiredman</w>Oh<div></div></z><z id="t1580158583" t="hiredman I misread your code though [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:56</h><w>hiredman</w>I misread your code though<div></div></z><z id="t1580158647" t="hiredman What I read as a call to dumb-concat is actually a call to dumb-concato with the wrong number if arguments which is exactly what the error you got says [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>20:57</h><w>hiredman</w>What I read as a call to dumb-concat is actually a call to dumb-concato with the wrong number if arguments which is exactly what the error you got says<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;slightly_smiling_face&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;🙂&quot;)} &quot; 4&quot;)}</div></z><z id="t1580161261" t="Nico ...how did I miss the obvious mistake [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>21:41</h><w>Nico</w>...how did I miss the obvious mistake<div></div></z><z id="t1580161263" t="Nico thanks guys [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>21:41</h><w>Nico</w>thanks guys<div></div></z><z id="t1580161268" t="Nico somehow managed to make that mistake almost every time [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-01-27</d><h>21:41</h><w>Nico</w>somehow managed to make that mistake almost every time<div></div></z><z id="t1583188808" t="niveauverleih I am looking for a coherent intro to core.logic and also for an up-to-date reference. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-02</d><h>22:40</h><w>niveauverleih</w>I am looking for a coherent intro to core.logic and also for an up-to-date reference.<div></div></z><z id="t1583409632" t="rickmoynihan The reasoned schemer is probably the best reference — it’s almost directly applicable to core.logic; bar a few minor mostly syntactic differences. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-05</d><h>12:00</h><r>rickmoynihan</r>The reasoned schemer is probably the best reference — it’s almost directly applicable to core.logic; bar a few minor mostly syntactic differences.<div></div></z><z id="t1583413932" t="niveauverleih Thank you, Rick! I had a look at it but found it too implicit. I&apos;m a perfect customer for the dummies series of books. Luckily Martin Trojer put the clojure code for the little schemer on github: https://github.com/martintrojer/reasoned-schemer-core.logic/blob/master/src/reasoned-schemer/ch1.clj [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-05</d><h>13:12</h><r>niveauverleih</r>Thank you, Rick! I had a look at it but found it too implicit. I&apos;m a perfect customer for the dummies series of books. Luckily Martin Trojer put the clojure code for the little schemer on github: <a href="https://github.com/martintrojer/reasoned-schemer-core.logic/blob/master/src/reasoned-schemer/ch1.clj" target="_blank">https://github.com/martintrojer/reasoned-schemer-core.logic/blob/master/src/reasoned-schemer/ch1.clj</a><div></div></z><z id="t1583518881" t="niveauverleih Lars Hupel has presented core.logic on ClojureD 2020 https://twitter.com/larsr_h/status/1233729156980072453?s=20 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-06</d><h>18:21</h><w>niveauverleih</w>Lars Hupel has presented core.logic on ClojureD 2020 <a href="https://twitter.com/larsr_h/status/1233729156980072453?s=20" target="_blank">https://twitter.com/larsr_h/status/1233729156980072453?s=20</a><div></div></z><z id="t1583933471" t="niveauverleih In the reasoned Schemer and core logic primer succeed and fail are called constants, whereas the source code defines them as functions. I&apos;m confused. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>13:31</h><w>niveauverleih</w>In the reasoned Schemer and core logic primer succeed and fail are called constants, whereas the source code defines them as functions. I&apos;m confused.<div></div></z><z id="t1583941242" t="hiredman They are goals that don&apos;t depend on any passed in values, so constant in that sense [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>15:40</h><w>hiredman</w>They are goals that don&apos;t depend on any passed in values, so constant in that sense<div></div></z><z id="t1583944798" t="rickmoynihan [:attrs {:href &quot;/_/_/users/UQLUWPRQD&quot;}] all goals are functions iirc [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>16:39</h><w>rickmoynihan</w><a>@nick.romer</a> all goals are functions iirc<div></div></z><z id="t1583944989" t="rickmoynihan You just use them as if they were constants at the minikanren/core.logic language level; but underneath they’re implemented as functions. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>16:43</h><w>rickmoynihan</w>You just use them as if they were constants at the minikanren/core.logic language level; but underneath they’re implemented as functions.<div></div></z><z id="t1583945027" t="rickmoynihan internally core logic will apply values to them as with any other goal. They’ll just always succeed or fail. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>16:43</h><w>rickmoynihan</w>internally core logic will apply values to them as with any other goal.  They’ll just always succeed or fail.<div></div></z><z id="t1583948487" t="niveauverleih I see. Thank you both! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-11</d><h>17:41</h><w>niveauverleih</w>I see. Thank you both!<div></div></z><z id="t1585173770" t="niveauverleih Could someone explain the term &quot;list with an improper tail&quot; to me, please? I am trying to understand dotted pairs, lcons and llist, while reading the reasoned schemer. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-25</d><h>22:02</h><w>niveauverleih</w>Could someone explain the term &quot;list with an improper tail&quot; to me, please? I am trying to understand dotted pairs, lcons and llist, while reading the reasoned schemer.<div></div></z><z id="t1585176122" t="hiredman in scheme a cons cell is basically a 2 element array [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-25</d><h>22:42</h><w>hiredman</w>in scheme a cons cell is basically a 2 element array<div></div></z><z id="t1585176138" t="hiredman and you can put anything in either slot [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-25</d><h>22:42</h><w>hiredman</w>and you can put anything in either slot<div></div></z><z id="t1585176182" t="hiredman a list is a cons cell or series of cons cells where the second element (the cdr) is a cons cell or nil [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-25</d><h>22:43</h><w>hiredman</w>a list is a cons cell or series of cons cells where the second element (the cdr) is a cons cell or nil<div></div></z><z id="t1585176230" t="hiredman an improper list is a series of cons cells where the lest cons cell doesn&apos;t have nil as the cdr [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-25</d><h>22:43</h><w>hiredman</w>an improper list is a series of cons cells where the lest cons cell doesn&apos;t have nil as the cdr<div></div></z><z id="t1585241338" t="niveauverleih Thank you, [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] ! So in Clojure, cons doesn&apos;t allow me to explicitly set the right hand side of a cell, because it expects a list as 2nd argument. In Clojure, a list is made up of cons cells, but I cannot manipulate the cells directly, right? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-26</d><h>16:48</h><w>niveauverleih</w>Thank you, <a>@hiredman</a>! So in Clojure, cons doesn&apos;t allow me to explicitly set the right hand side of a cell, because it expects a list as 2nd argument. In Clojure, a list is made up of cons cells, but I cannot manipulate the cells directly, right?<div></div></z><z id="t1585241474" t="hiredman it is complicated, clojure tends to be more concerned with seqs, which are not a concrete data type [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-26</d><h>16:51</h><w>hiredman</w>it is complicated, clojure tends to be more concerned with seqs, which are not a concrete data type<div></div></z><z id="t1585241515" t="hiredman clojure has an explicit list type, but it isn&apos;t used nearly as often, most of the time when you think something is a list it is actually some species of seq [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-26</d><h>16:51</h><w>hiredman</w>clojure has an explicit list type, but it isn&apos;t used nearly as often, most of the time when you think something is a list it is actually some species of seq<div></div></z><z id="t1585241540" t="hiredman and clojure.core/cons builds a seq, not a list [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-26</d><h>16:52</h><w>hiredman</w>and clojure.core/cons builds a seq, not a list<div></div></z><z id="t1585241569" t="hiredman but it is true that neither seqs nor lists can be improper in clojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-26</d><h>16:52</h><w>hiredman</w>but it is true that neither seqs nor lists can be improper in clojure<div></div></z><z id="t1585302216" t="yuhan core.logic has a function lcons to model these improper-tail cons cells, I&apos;ve only used it when translating the Reasoned Schemer exercises. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-27</d><h>09:43</h><w>yuhan</w>core.logic has a function <code>lcons</code> to model these improper-tail cons cells, I&apos;ve only used it when translating the Reasoned Schemer exercises.<div></div></z><z id="t1585302244" t="yuhan also llist [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-27</d><h>09:44</h><w>yuhan</w>also <code>llist</code><div></div></z><z id="t1585560120" t="dmarjenburgh Wat is the benefit of using finite domains instead of just constraining a var to a set of values with membero? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-30</d><h>09:22</h><w>dmarjenburgh</w>Wat is the benefit of using finite domains instead of just constraining a var to a set of values with membero?<div></div></z><z id="t1585570647" t="rickmoynihan It has optimisations that mean not all values need to be specified up front; e.g. you can specify a lower and upper bound on a constraint, and it can operate and propagate constraints on the intervals directly. Also it gives you relational versions of operators like &lt; &gt; + - etc that leverage the above. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-03-30</d><h>12:17</h><w>rickmoynihan</w>It has optimisations that mean not all values need to be specified up front; e.g. you can specify a lower and upper bound on a constraint, and it can operate and propagate constraints on the intervals directly.

Also it gives you relational versions of operators like <code>&lt;</code> <code>&gt;</code> <code>+</code> <code>-</code> etc that  leverage the above.<div></div></z><z id="t1586762085" t="dmarjenburgh Hi, I&apos;m interested in symbolic equation solvers. Does anyone know a good source to read about the &apos;state-of-things&apos; regarding research in this area? I&apos;m familiar with PRESS (PRolog Equation Solving System) and am looking to implement something similar in core.logic, but need a good place to start reading up. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-13</d><h>07:14</h><w>dmarjenburgh</w>Hi, I&apos;m interested in symbolic equation solvers. Does anyone know a good source to read about the &apos;state-of-things&apos; regarding research in this area? I&apos;m familiar with PRESS (PRolog Equation Solving System) and am looking to implement something similar in core.logic, but need a good place to start reading up.<div></div></z><z id="t1586954759" t="Joe Lane Hi [:attrs {:href &quot;/_/_/users/U05469DKJ&quot;}] Does this fit the bill? https://github.com/clojure-numerics/expresso https://github.com/mschuene/expresso-tutorial [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-15</d><h>12:45</h><r>Joe Lane</r>Hi <a>@U05469DKJ</a> Does this fit the bill?

<a href="https://github.com/clojure-numerics/expresso" target="_blank">https://github.com/clojure-numerics/expresso</a>

<a href="https://github.com/mschuene/expresso-tutorial" target="_blank">https://github.com/mschuene/expresso-tutorial</a><div></div></z><z id="t1586955822" t="dmarjenburgh Thanks, have seen it. Doesn&apos;t appear active anymore and couldn&apos;t find reference to research in the code. I might learn something from diving into the codebase though. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-15</d><h>13:03</h><r>dmarjenburgh</r>Thanks, have seen it. Doesn&apos;t appear active anymore and couldn&apos;t find reference to research in the code. I might learn something from diving into the codebase though.<div></div></z><z id="t1587010436" t="EmmanuelOga have you seen these books by any chance? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:13</h><r>EmmanuelOga</r>have you seen these books by any chance?<div></div></z><z id="t1587010437" t="EmmanuelOga https://www.amazon.com/Joel-S-Cohen/e/B001K8MI06 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:13</h><r>EmmanuelOga</r><a href="https://www.amazon.com/Joel-S-Cohen/e/B001K8MI06" target="_blank">https://www.amazon.com/Joel-S-Cohen/e/B001K8MI06</a><div></div></z><z id="t1587010475" t="EmmanuelOga disclaimer: I know nothing about the subject, I just always have on the back burner to relearn some math, and I found the books when I was looking for computer algebra books [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:14</h><r>EmmanuelOga</r>disclaimer: I know nothing about the subject, I just always have on the back burner to relearn some math, and I found the books when I was looking for computer algebra books<div></div></z><z id="t1587010509" t="EmmanuelOga also, they are ~20 year old books so maybe not precisely state of the art haha [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:15</h><r>EmmanuelOga</r>also, they are ~20 year old books so maybe not precisely state of the art haha<div></div></z><z id="t1587010810" t="EmmanuelOga the source of sympy seems like a good resource too [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:20</h><r>EmmanuelOga</r>the source of sympy seems like a good resource too<div></div></z><z id="t1587010811" t="EmmanuelOga say: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:20</h><r>EmmanuelOga</r>say:<div></div></z><z id="t1587010813" t="EmmanuelOga https://github.com/sympy/sympy/blob/09565e28d2373ba4e130a7bacff6c7a1c01a4a64/sympy/calculus/finite_diff.py [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:20</h><r>EmmanuelOga</r><a href="https://github.com/sympy/sympy/blob/09565e28d2373ba4e130a7bacff6c7a1c01a4a64/sympy/calculus/finite_diff.py" target="_blank">https://github.com/sympy/sympy/blob/09565e28d2373ba4e130a7bacff6c7a1c01a4a64/sympy/calculus/finite_diff.py</a><div></div></z><z id="t1587012904" t="dmarjenburgh I had not seen those books. Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-04-16</d><h>04:55</h><r>dmarjenburgh</r>I had not seen those books. Thanks!<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 4&quot;)}</div></z><z id="t1588523155" t="skykanin Are there any good resources for learning core logic? I&apos;m looking to translate a prolog sudoku CLP rule to clojure. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-03</d><h>16:25</h><w>skykanin</w>Are there any good resources for learning core logic? I&apos;m looking to translate a prolog sudoku CLP rule to clojure.<div></div></z><z id="t1588578489" t="rickmoynihan The reasoned schemer is probably the main one. There are some minor differences to core logic, but they’re mainly just syntactic ones. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-04</d><h>07:48</h><r>rickmoynihan</r>The reasoned schemer is probably the main one.

There are some minor differences to core logic, but they’re mainly just syntactic ones.<div></div></z><z id="t1588578563" t="rickmoynihan Also the core.logic unit tests… iirc there is a sudoku solver as an example in there [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-04</d><h>07:49</h><r>rickmoynihan</r>Also the core.logic unit tests…  iirc there is a sudoku solver as an example in there<div></div></z><z id="t1588743199" t="EmmanuelOga I don&apos;t really understand the reasoner schemer and the rest of the books on that series [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:33</h><r>EmmanuelOga</r>I don&apos;t really understand the reasoner schemer and the rest of the books on that series<div></div></z><z id="t1588743263" t="EmmanuelOga I thought it was supposed to be a way to teach difficult concepts in a way that &quot;anybody could understand them&quot;, starting &quot;from the beginning&quot; and just putting some effort behind... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:34</h><r>EmmanuelOga</r>I thought it was supposed to be a way to teach difficult concepts in a way that &quot;anybody could understand them&quot;, starting &quot;from the beginning&quot; and just putting some effort behind...<div></div></z><z id="t1588743280" t="EmmanuelOga I find those books assume a HUGE amount of pre-existent knowledge [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:34</h><r>EmmanuelOga</r>I find those books assume a HUGE amount of pre-existent knowledge<div></div></z><z id="t1588743343" t="EmmanuelOga I determined that the best way to learn core.logic will probably have to be to learn prolog first, since there seems to be at least a couple of... normal books to learn from 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:35</h><r>EmmanuelOga</r>I determined that the best way to learn core.logic will probably have to be to learn prolog first, since there seems to be at least a couple of... normal books to learn from <b>🙂</b><div></div></z><z id="t1588743421" t="EmmanuelOga maybe some other resource on http://minikanren.org/ could be useful but I haven&apos;t gone through the avalanche of links yet. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:37</h><r>EmmanuelOga</r>maybe some other resource on <a href="http://minikanren.org/" target="_blank">http://minikanren.org/</a> could be useful but I haven&apos;t gone through the avalanche of links yet.<div></div></z><z id="t1588743474" t="EmmanuelOga https://mitpress.mit.edu/books/art-prolog-second-edition looks promising [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>05:37</h><r>EmmanuelOga</r><a href="https://mitpress.mit.edu/books/art-prolog-second-edition" target="_blank">https://mitpress.mit.edu/books/art-prolog-second-edition</a> looks promising<div></div></z><z id="t1588761429" t="rickmoynihan I personally really like the reasoned schemer and the other books in the series. Each panel builds on the last, and I don’t think they require much prior knowledge (beyond perhaps some of the little schemer, or a rough familiarity with a lisp e.g. clojure). I think the problem with those books isn’t so much that they assume any pre existing knowledge about logic programming; you can and should I think really read them without a computer… It’s more that they don’t tell you anything about why you should care, or how to apply it in practice… or even really what each chapter is teaching you. However, I also happened to have learned prolog 20 years ago, so :man-shrugging: Regardless the art of prolog is a great book; though you’ll probably want to learn minikanren as its own thing too. Many examples won’t translate directly. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-06</d><h>10:37</h><r>rickmoynihan</r>I personally really like the reasoned schemer and the other books in the series.  Each panel builds on the last, and I don’t think they require much prior knowledge (beyond perhaps some of the little schemer, or a rough familiarity with a lisp e.g. clojure).

I think the problem with those books isn’t so much that they assume any pre existing knowledge about logic programming; you can and should I think really read them without a computer…  It’s more that they don’t tell you anything about why you should care, or how to apply it in practice… or even really what each chapter is teaching you.

However, I also happened to have learned prolog 20 years ago, so <b>:man-shrugging:</b>

Regardless the art of prolog is a great book; though you’ll probably want to learn minikanren as its own thing too.  Many examples won’t translate directly.<div></div></z><z id="t1588544028" t="Bobbi Towers This looks like it might help: https://github.com/daveray/logic-99 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-05-03</d><h>22:13</h><w>Bobbi Towers</w>This looks like it might help: <a href="https://github.com/daveray/logic-99" target="_blank">https://github.com/daveray/logic-99</a><div></div></z><z id="t1591378706" t="niveauverleih Can anybody explain the difference between miniKanren and STRIPS? they seem to be used ti solve tbe same kind if problems; cf https://www.youtube.com/watch?v=jzLSnadyYso [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-06-05</d><h>17:38</h><w>niveauverleih</w>Can anybody explain the difference  between miniKanren and STRIPS? they seem to be used ti solve tbe same kind if problems; cf <a href="https://www.youtube.com/watch?v=jzLSnadyYso" target="_blank">https://www.youtube.com/watch?v=jzLSnadyYso</a><div></div></z><z id="t1591615906" t="rickmoynihan Not seen STRIPS before; and I’m no expert here but it looks like it’s essentially a planner; which is roughly speaking a programming system designed to find the right sequence of actions to achieve a goal. It’s probably similar to minikanren in that it’s essentially a search strategy over some solution space; where the program in the language defines what those solutions/constraints look like… But I think the flavour of expression will be different. A planner will more typically be oriented around finding sequences of actions that get you from where you are into a particular goal state. Whilst minikanren aims to be more general purpose… You should be able to implement a planner in minikanren (or a logic language like prolog), but I’m not sure the reverse would typically be desirable… Having said that it looks like STRIPS smells a bit like horn clauses Preconditions being the antecedents and Postconditions being the consequents. Also minikanren has goals of being purely relational, and is as much about having a simple implementation for research/educational purposes as anything else. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-06-08</d><h>11:31</h><w>rickmoynihan</w>Not seen STRIPS before; and I’m no expert here but it looks like it’s essentially a planner; which is roughly speaking a programming system designed to find the right sequence of actions to achieve a goal.

It’s probably similar to minikanren in that it’s essentially  a search strategy over some solution space; where the program in the language defines what those solutions/constraints look like…

But I think the flavour of expression will be different.  A planner will more typically be oriented around finding sequences of actions that get you from where you are into a particular goal state.

Whilst minikanren aims to be more general purpose…  You should be able to implement a planner in minikanren (or a logic language like prolog), but I’m not sure the reverse would typically be desirable…

Having said that it looks like STRIPS smells a bit like horn clauses Preconditions being the antecedents and Postconditions being the consequents.

Also minikanren has goals of being purely relational, and is as much about having a simple implementation for research/educational purposes as anything else.<div></div></z><z id="t1601410498" t="nathanmarz what&apos;s the purpose of clojure.core.logic.protocols/IUninitialized ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-09-29</d><h>20:14</h><w>nathanmarz</w>what&apos;s the purpose of <code>clojure.core.logic.protocols/IUninitialized</code>?<div></div></z><z id="t1601410545" t="nathanmarz I found I&apos;m unable to write constraints on values of custom records without that record implementing that protocol, but I&apos;m unclear what -uninitialized is supposed to do [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-09-29</d><h>20:15</h><w>nathanmarz</w>I found I&apos;m unable to write constraints on values of custom records without that record implementing that protocol, but I&apos;m unclear what <code>-uninitialized</code> is supposed to do<div></div></z><z id="t1601877157" t="devn [:attrs {:href &quot;/_/_/users/U173SEFUN&quot;}] https://groups.google.com/g/clojure/c/0bM3nLj18SM/m/RMumUuy4IZ4J might be of some help in understanding the history there. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-10-05</d><h>05:52</h><w>devn</w><a>@nathanmarz</a> <a href="https://groups.google.com/g/clojure/c/0bM3nLj18SM/m/RMumUuy4IZ4J" target="_blank">https://groups.google.com/g/clojure/c/0bM3nLj18SM/m/RMumUuy4IZ4J</a> might be of some help in understanding the history there.<div></div></z><z id="t1604587581" t="nitaai hi. i have ported one prolog example to core.logic: % P07 (**) Flatten a nested list structure. my_flatten(X,[X]) :- \+ is_list(X). my_flatten([],[]). my_flatten([X|Xs],Zs) :- my_flatten(X,Y), my_flatten(Xs,Ys), append(Y,Ys,Zs). (defne flatteno [l1 l2] ([x [x]] (pred x (comp not seq?))) ([[] []]) ([[x . xs] zs] (fresh [y ys] (flatteno x y) (flatteno xs ys) (appendo y ys zs)))) can someone tell me why the clojure version produces multiple results: ([[1 [2]]] (1 [2]) (1 2)) and the prolog version only one: [1 2] ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>14:46</h><w>nitaai</w>hi. i have ported one prolog example to core.logic:
<pre>% P07 (**) Flatten a nested list structure.
my_flatten(X,[X]) :- \+ is_list(X).
my_flatten([],[]).
my_flatten([X|Xs],Zs) :- my_flatten(X,Y), my_flatten(Xs,Ys), append(Y,Ys,Zs).

(defne flatteno [l1 l2]
  ([x [x]] (pred x (comp not seq?)))
  ([[] []])
  ([[x . xs] zs]
   (fresh [y ys]
     (flatteno x y)
     (flatteno xs ys)
     (appendo y ys zs))))</pre>
can someone tell me why the clojure version produces multiple results:
<code>([[1 [2]]] (1 [2]) (1 2))</code>
and the prolog version only one:
<code>[1 2]</code>
?<div></div></z><z id="t1604588115" t="nitaai I assume some rearrangement of the clauses and use of defna or defnu .. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>14:55</h><r>nitaai</r>I assume some rearrangement of the clauses and use of <code>defna</code> or <code>defnu</code>..<div></div></z><z id="t1604588418" t="nitaai yes, my assumption was right: (defna flatteno [l1 l2] ([[x . xs] zs] (fresh [y ys] (flatteno x y) (flatteno xs ys) (appendo y ys zs))) ([x [x]] (pred x (comp not seq?))) ([[] []])) both defna and defnu do the job and clauses have to be rearranged. Someone who knows prolog can tell me why this kind of cut is necessary in clojure and not in prolog? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>15:00</h><r>nitaai</r>yes, my assumption was right:
<pre>(defna flatteno [l1 l2]
  ([[x . xs] zs]
   (fresh [y ys]
     (flatteno x y)
     (flatteno xs ys)
     (appendo y ys zs)))
  ([x [x]] (pred x (comp not seq?)))
  ([[] []]))</pre>
both <code>defna</code> and <code>defnu</code> do the job and clauses have to be rearranged.

Someone who knows prolog can tell me why this kind of cut is necessary in clojure and not in prolog?<div></div></z><z id="t1604601521" t="Jan K the \+ negation in prolog also does a cut: http://cs.union.edu/~striegnk/learn-prolog-now/html/node90.html#sec.l10.negation.as.failure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:38</h><r>Jan K</r>the \+ negation in prolog also does a cut:
<a href="http://cs.union.edu/~striegnk/learn-prolog-now/html/node90.html#sec.l10.negation.as.failure" target="_blank">http://cs.union.edu/~striegnk/learn-prolog-now/html/node90.html#sec.l10.negation.as.failure</a><div></div></z><z id="t1604601681" t="hiredman I would strongly recommend against using pred, and seq? is likely the wrong predicate there [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:41</h><r>hiredman</r>I would strongly recommend against using pred, and seq? is likely the wrong predicate there<div></div></z><z id="t1604601779" t="hiredman the re-arrangement of the clauses and using defna or defna are both consequences of seq? being the wrong predicate [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:42</h><r>hiredman</r>the re-arrangement of the clauses and using defna or defna are both consequences of seq? being the wrong predicate<div></div></z><z id="t1604601799" t="hiredman user=&gt; (seq? []) false user=&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:43</h><r>hiredman</r><pre>user=&gt; (seq? [])
false
user=&gt;</pre>
<div></div></z><z id="t1604601839" t="hiredman but using defna you should be able to get rid of the pred usage altogether [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:43</h><r>hiredman</r>but using defna you should be able to get rid of the pred usage altogether<div></div></z><z id="t1604602763" t="nitaai Great and interesting hints. Thanks [:attrs {:href &quot;/_/_/users/UCPGSBNQ4&quot;}] and [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] . Will look into that… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-05</d><h>18:59</h><r>nitaai</r>Great and interesting hints. Thanks <a>@UCPGSBNQ4</a> and <a>@U0NCTKEV8</a>. Will look into that…<div></div></z><z id="t1604650933" t="nitaai (defna flatteno [l1 l2] ([[] []]) ([[x . xs] zs] (fresh [y ys] (flatteno x y) (flatteno xs ys) (appendo y ys zs))) ([x [x]])) i think this is the best solution. it got rid of pred as [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] suggested and uses defna . the arrangement of the clauses still matters, but it makes sense. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-06</d><h>08:22</h><r>nitaai</r><pre>(defna flatteno [l1 l2]
  ([[] []])
  ([[x . xs] zs]
   (fresh [y ys]
     (flatteno x y)
     (flatteno xs ys)
     (appendo y ys zs)))
  ([x [x]]))</pre>
i think this is the best solution. it got rid of <code>pred</code>as <a>@U0NCTKEV8</a> suggested and uses <code>defna</code>. the arrangement of the clauses still matters, but it makes sense.<div></div></z><z id="t1604655278" t="nitaai another question. are recursive anonymous goals possible in core.logic ? i can’t get it working analogous to the regular fn . [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-06</d><h>09:34</h><w>nitaai</w>another question. are recursive anonymous goals possible in <code>core.logic</code>? i can’t get it working analogous to the regular <code>fn</code>.<div></div></z><z id="t1604663848" t="nitaai this workaround seems to work: (defn packo [l1 l2] (letfn [(transfero [a b c d] (matche [a b c d] ([x [] [] [x]]) ([x [y . ys] [y . ys] [x]] (!= x y)) ([x [x . xs] ys [x . zs]] (transfero x xs ys zs))))] (matche [l1 l2] ([[] []]) ([[x . xs] [z . zs]] (fresh [ys] (transfero x xs ys z) (packo ys zs)))))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-06</d><h>11:57</h><r>nitaai</r>this workaround seems to work:
<pre>(defn packo [l1 l2]
  (letfn [(transfero [a b c d]
            (matche [a b c d]
              ([x [] [] [x]])
              ([x [y . ys] [y . ys] [x]] (!= x y))
              ([x [x . xs] ys [x . zs]] (transfero x xs ys zs))))]
    (matche [l1 l2]
      ([[] []])
      ([[x . xs] [z . zs]]
       (fresh [ys]
         (transfero x xs ys z)
         (packo ys zs))))))</pre>
<div></div></z><z id="t1604663952" t="nitaai may be even more readable than fne etc on the other hand i think it should support naming the anonymous function and thus enable recursion, like the ordinary fn does. but maybe there is a reason why it doesn’t. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-06</d><h>11:59</h><r>nitaai</r>may be even more readable than <code>fne</code> etc on the other hand i think it should support naming the anonymous function and thus enable recursion, like the ordinary <code>fn</code> does. but maybe there is a reason why it doesn’t.<div></div></z><z id="t1606159785" t="chrisblom i have two functions that are inverses of each other (`parse-instant` and format-instant ), can i define a relation (instanto string instant) such that: providing string will bind instant to (parse-instant string ) and providing instant will bind string to (format-instant instant) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-23</d><h>19:29</h><w>chrisblom</w>i have two functions that are inverses of each other (`parse-instant`  and <code>format-instant</code>), can i define a relation <code>(instanto string instant)</code> such that:
 providing <code>string</code> will bind <code>instant</code> to <code>(parse-instant string</code>) and providing <code>instant</code> will bind <code>string</code> to <code>(format-instant instant)</code><div></div></z><z id="t1606159796" t="chrisblom Is this even possible in core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-23</d><h>19:29</h><w>chrisblom</w>Is this even possible in core.logic?<div></div></z><z id="t1606172748" t="hiredman You can&apos;t [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-23</d><h>23:05</h><w>hiredman</w>You can&apos;t<div></div></z><z id="t1606172788" t="hiredman (define a relation like that) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-23</d><h>23:06</h><w>hiredman</w>(define a relation like that)<div></div></z><z id="t1606172847" t="hiredman You maybe be able to build a constraint out of that(like fd/+) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-23</d><h>23:07</h><w>hiredman</w>You maybe be able to build a constraint out of that(like fd/+)<div></div></z><z id="t1606294740" t="chrisblom hmm, maybe i can create something based on == [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-25</d><h>08:59</h><w>chrisblom</w>hmm, maybe i can create something based on <code>==</code><div></div></z><z id="t1606294849" t="chrisblom (instanto string instant) such that if string and instant are grounded, check if (= (parse-instant string) instant if only string is grounded, bind instant to (parse-string string) if only instant is grounded, bind string to (format-string instant) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-25</d><h>09:00</h><w>chrisblom</w><code>(instanto string instant)</code> such that
if <code>string</code> and <code>instant</code> are grounded, check if <code>(= (parse-instant string) instant</code>
if only <code>string</code> is grounded, bind <code>instant</code> to <code>(parse-string string)</code>
if only <code>instant</code> is grounded, bind <code>string</code> to <code>(format-string instant)</code><div></div></z><z id="t1606295041" t="chrisblom i&apos;ll have to figure out how to handle the case where both are unbounded [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-25</d><h>09:04</h><w>chrisblom</w>i&apos;ll have to figure out how to handle the case where both are unbounded<div></div></z><z id="t1606296545" t="hiredman You would need to basically store your relation until either becomes ground and check again, which is more or less how constraints work [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-25</d><h>09:29</h><w>hiredman</w>You would need to basically store your relation until either becomes ground and check again, which is more or less how constraints work<div></div></z><z id="t1606298533" t="chrisblom yeah that makes sense, what i need is basically equality modulo parsing/formatting, so it should work similar how the constraints enforce equality [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-25</d><h>10:02</h><w>chrisblom</w>yeah that makes sense, what i need is basically equality modulo parsing/formatting, so it should work similar how the constraints enforce equality<div></div></z><z id="t1606638414" t="peey Does memoization work directly over the logical variables introduced by fresh ? A detailed description here https://ask.clojure.org/index.php/9905/memoization-in-core-logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-29</d><h>08:26</h><w>peey</w>Does memoization work directly over the logical variables introduced by <code>fresh</code>? A detailed description here <a href="https://ask.clojure.org/index.php/9905/memoization-in-core-logic" target="_blank">https://ask.clojure.org/index.php/9905/memoization-in-core-logic</a><div></div></z><z id="t1606653472" t="peey This is now resolved 🙂 (the answer is on the post) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-11-29</d><h>12:37</h><r>peey</r>This is now resolved <b>🙂</b> (the answer is on the post)<div></div></z><z id="t1608150694" t="erwinrooijakkers Hi I am trying to solve the last part of day 16 of aoc using core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-16</d><h>20:31</h><w>erwinrooijakkers</w>Hi I am trying to solve the last part of day 16 of aoc using core.logic<div></div></z><z id="t1608150709" t="erwinrooijakkers spoiler maybe so I put it in comment [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-16</d><h>20:31</h><w>erwinrooijakkers</w>spoiler maybe so I put it in comment<div></div></z><z id="t1608150870" t="erwinrooijakkers The idea is that we know for twenty indexes what the possible values are. Iteratively, you can eliminate a field where there is only one solution from all the others, since you know that (below for example) i13 MUST be 8 since it is the only option. Then you eliminate 8 from the values and you see that i11 must be 6. How do I code this in core.logic? I tried: (run* [q] (fresh [i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20] (logic/== q [i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20]) (fd/in i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20 (fd/interval 0 21)) (logic/membero i0 #{1 2 3 5 6 8 10 11 14}) (logic/membero i1 #{0 1 2 3 4 5 6 8 10 11 14 15}) (logic/membero i2 #{0 1 2 3 4 5 6 7 8 10 11 14 15 18 19}) (logic/membero i3 #{1 2 3 4 5 6 8 10 11 14}) (logic/membero i4 #{0 1 2 3 4 5 6 8 10 11 14}) (logic/membero i5 #{6 8 10 11}) (logic/membero i6 #{6 8 11}) (logic/membero i7 #{1 5 6 8 10 11 14}) (logic/membero i8 #{6 8 10 11 14}) (logic/membero i10 #{1 2 5 6 8 10 11 14}) (logic/membero i11 #{6 8}) (logic/membero i12 #{1 6 8 10 11 14}) (logic/membero i13 #{8}) (logic/membero i14 #{0 1 2 3 4 5 6 7 8 9 10 11 12 14 15 16 17 18 19}) (logic/membero i15 #{0 1 2 3 4 5 6 7 8 10 11 14 15 17 18 19}) (logic/membero i16 #{0 1 2 3 4 5 6 7 8 10 11 14 15 16 17 18 19}) (logic/membero i17 #{0 1 2 3 4 5 6 7 8 10 11 12 14 15 16 17 18 19}) (logic/membero i18 #{0 1 2 3 4 5 6 8 10 11 14 15 19}) (logic/membero i19 #{0 1 2 3 4 5 6 8 10 11 14 15 18 19}) (logic/membero i20 #{0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19}))) ;; =&gt; () It should, however, be ;; =&gt; (3 15 7 4 0 10 11 5 14 2 6 1 8 9 17 16 12 19 18 13) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-16</d><h>20:34</h><r>erwinrooijakkers</r>The idea is that we know for twenty indexes what the possible values are.

Iteratively, you can eliminate a field where there is only one solution from all the others, since you know that (below for example)  i13 MUST be 8 since it is the only option. Then you eliminate 8 from the values and you see that i11 must be 6. How do I code this in core.logic? I tried:
<pre>(run* [q]
  (fresh [i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20]
    (logic/== q [i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20])
    (fd/in i0 i1 i2 i3 i4 i5 i6 i7 i8 i9 i10 i11 i12 i13 i14 i15 i16 i17 i18 i19 i20 (fd/interval 0 21))
    (logic/membero i0 #{1 2 3 5 6 8 10 11 14})
    (logic/membero i1 #{0 1 2 3 4 5 6 8 10 11 14 15})
    (logic/membero i2 #{0 1 2 3 4 5 6 7 8 10 11 14 15 18 19})
    (logic/membero i3 #{1 2 3 4 5 6 8 10 11 14})
    (logic/membero i4 #{0 1 2 3 4 5 6 8 10 11 14})
    (logic/membero i5 #{6 8 10 11})
    (logic/membero i6 #{6 8 11})
    (logic/membero i7 #{1 5 6 8 10 11 14})
    (logic/membero i8 #{6 8 10 11 14})
    (logic/membero i10 #{1 2 5 6 8 10 11 14})
    (logic/membero i11 #{6 8})
    (logic/membero i12 #{1 6 8 10 11 14})
    (logic/membero i13 #{8})
    (logic/membero i14 #{0 1 2 3 4 5 6 7 8 9 10 11 12 14 15 16 17 18 19})
    (logic/membero i15 #{0 1 2 3 4 5 6 7 8 10 11 14 15 17 18 19})
    (logic/membero i16 #{0 1 2 3 4 5 6 7 8 10 11 14 15 16 17 18 19})
    (logic/membero i17 #{0 1 2 3 4 5 6 7 8 10 11 12 14 15 16 17 18 19})
    (logic/membero i18 #{0 1 2 3 4 5 6 8 10 11 14 15 19})
    (logic/membero i19 #{0 1 2 3 4 5 6 8 10 11 14 15 18 19})
    (logic/membero i20 #{0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19})))

;; =&gt; ()</pre>
It should, however,  be

<pre>;; =&gt; (3 15 7 4 0 10 11 5 14 2 6 1 8 9 17 16 12 19 18 13)</pre><div></div></z><z id="t1608236476" t="paulocuneo no quite sure, but I think core logic membero doesnt handle sets #{}. try using vector instead. didn&apos;t understand your solution (is this the puzzle https://adventofcode.com/2020/day/16 ?) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-17</d><h>20:21</h><r>paulocuneo</r>no quite sure, but I think core logic membero doesnt handle sets #{}.
try using vector instead.
didn&apos;t understand your solution (is this the puzzle <a href="https://adventofcode.com/2020/day/16" target="_blank">https://adventofcode.com/2020/day/16</a> ?)<div></div></z><z id="t1608150890" t="erwinrooijakkers Hope someone can take a look and help me make it work [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-16</d><h>20:34</h><w>erwinrooijakkers</w>Hope someone can take a look and help me make it work<div></div></z><z id="t1608214456" t="erwinrooijakkers Or give a suggestion 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2020-12-17</d><h>14:14</h><w>erwinrooijakkers</w>Or give a suggestion <b>🙂</b><div></div></z><z id="t1611336232" t="simongray I just read the chapter in the Joy of Clojure on core.logic and now I am hungry for more. Where can I find more written in that style? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-22</d><h>17:23</h><w>simongray</w>I just read the chapter in the Joy of Clojure on core.logic and now I am hungry for more. Where can I find more written in that style?<div></div></z><z id="t1611339590" t="Jan K &quot;The Reasoned Schemer&quot; has a different style but definitely worth checking out. https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-22</d><h>18:19</h><r>Jan K</r>&quot;The Reasoned Schemer&quot; has a different style but definitely worth checking out. <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a><div></div></z><z id="t1611429801" t="simongray Ah good point. Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-23</d><h>19:23</h><r>simongray</r>Ah good point. Thanks!<div></div></z><z id="t1611429835" t="simongray I had forgotten about minikanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-23</d><h>19:23</h><r>simongray</r>I had forgotten about minikanren<div></div></z><z id="t1611554668" t="michele mendel I&apos;m currently reading TRS, going through every example to learn this interesting topic, and also to learn the syntax. The differences are not always clear. https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer helps a little, but it&apos;s not enough. I found these two links to projects on Github 1. https://github.com/martintrojer/reasoned-schemer-core.logic (9 yo) 2. https://github.com/philoskim/reasoned-schemer-for-clojure (2 yo) Mine is here, but I&apos;ve just started and I&apos;m currently on chapter 2 https://github.com/michelemendel/the_reasoned_schemer [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-25</d><h>06:04</h><r>michele mendel</r>I&apos;m currently reading TRS, going  through every example to learn this interesting topic, and also to learn the syntax. The differences are not always clear. <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a> helps a little, but it&apos;s not enough. I found these two links to projects on Github

1. <a href="https://github.com/martintrojer/reasoned-schemer-core.logic" target="_blank">https://github.com/martintrojer/reasoned-schemer-core.logic</a> (9 yo)
2. <a href="https://github.com/philoskim/reasoned-schemer-for-clojure" target="_blank">https://github.com/philoskim/reasoned-schemer-for-clojure</a> (2 yo)

Mine is here, but I&apos;ve just started and I&apos;m currently on chapter 2
<a href="https://github.com/michelemendel/the_reasoned_schemer" target="_blank">https://github.com/michelemendel/the_reasoned_schemer</a><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;pray&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;🙏&quot;)} &quot; 3&quot;)}</div></z><z id="t1611568129" t="rickmoynihan I’d definitely recommend TRS it’s a really, really great book. It might be worth bearing in mind that core.logic is an implementation based on the 2nd edition of the book not the 3rd edition though. This means the 2nd edition is marginally easier to port to core.logic than the 3rd; but the differences are pretty obvious — especially if you can find some of the many ports of examples from the book into core.logic . The 3rd edition is a small but significant improvement on the 2nd edition book though; especially if you wish to understand the ideas behind it; they also distilled the implementation to its essentials even further. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-25</d><h>09:48</h><r>rickmoynihan</r>I’d definitely recommend TRS it’s a really, really great book.

It might be worth bearing in mind that core.logic is an implementation based on the 2nd edition of the book not the 3rd edition though.

This means the 2nd edition is marginally easier to port to core.logic than the 3rd; but the differences are pretty obvious — especially if you can find some of the many ports of examples from the book into <code>core.logic</code>.

The 3rd edition is a small but significant improvement on the 2nd edition book though; especially if you wish to understand the ideas behind it; they also distilled the implementation to its essentials even further.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;pray&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;🙏&quot;)} &quot; 3&quot;)}</div></z><z id="t1611571156" t="michele mendel Is there a 3rd edition? I couldn&apos;t find it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-25</d><h>10:39</h><r>michele mendel</r>Is there a 3rd edition? I couldn&apos;t find it.<div></div></z><z id="t1611648638" t="simongray [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] Do you think I ought to read any of the other schemer books first? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:10</h><r>simongray</r><a>@U06HHF230</a> Do you think I ought to read any of the other schemer books first?<div></div></z><z id="t1611648871" t="michele mendel FYI, I&apos;m newish to relational programming myself, and haven&apos;t read the other schemer books (but I have one on my shelf). I wrote newish, since I have read books about Prolog, so the concept wasn&apos;t completely new to me. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:14</h><r>michele mendel</r>FYI, I&apos;m newish to relational programming myself, and haven&apos;t read the other schemer books (but I have one on my shelf).

I wrote newish, since I have read books about Prolog, so the concept wasn&apos;t completely new to me.<div></div></z><z id="t1611649206" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U4P4NREBY&quot;}] Well the whole series is great! 🙂 However the little schemer is the most basic of the whole series. If you know clojure pretty well you don’t really need it. It’s really an introduction to lisp, recursion, functions; whilst the seasoned schemer goes into functions as values etc. The books aren’t really practical introductions to learning scheme as such; more about learning concepts of programming. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:20</h><r>rickmoynihan</r><a>@U4P4NREBY</a> Well the whole series is great! <b>🙂</b>

However the little schemer is the most basic of the whole series.  If you know clojure pretty well you don’t really need it.  It’s really an introduction to lisp, recursion, functions; whilst the seasoned schemer goes into functions as values etc.  The books aren’t really practical introductions to learning scheme as such; more about learning concepts of programming.<div></div></z><z id="t1611649780" t="rickmoynihan They’re great books; I have the little typer and little prover too. All the books in the series have a pretty whimsical style; you’ll often find yourself asking “why am I learning this?!“, or even “what am I learning here?!“. The books don’t ever really attempt to answer the why; they consciously provide no explanation of what you’re learning or how it can be applied in the real world. They squarely come at it from the angle of the socratic method, and making tiny steps one at a time to quite profound concepts that are presented as just being interesting for their own sake. Obviously all the concepts the books teach are fundamentally important to CS — though the books themselves are presented more like kids books; and though they’d be suitable for that market, they’re anything but — they cover some pretty mind bending stuff. When you go through the exercises you might be tempted to skip ahead, as you might feel like they’re labouring the point or going too slow… however I’d urge you not too, as it’s very easy to end up out of your depth, missing fundamental concepts if you do this. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:29</h><r>rickmoynihan</r>They’re great books; I have the little typer and little prover too.

All the books in the series have a pretty whimsical style; you’ll often find yourself asking “why am I learning this?!“, or even “what am I learning here?!“.

The books don’t ever really attempt to answer the why; they consciously provide no explanation of what you’re learning or how it can be applied in the real world.  They squarely come at it from the angle of the socratic method, and making tiny steps one at a time to quite profound concepts that are presented as just being interesting for their own sake.

Obviously all the concepts the books teach are fundamentally important to CS — though the books themselves are presented more like kids books; and though they’d be suitable for that market, they’re anything but — they cover some pretty mind bending stuff.

When you go through the exercises you might be tempted to skip ahead, as you might feel like they’re labouring the point or going too slow… however I’d urge you not too, as it’s very easy to end up out of your depth, missing fundamental concepts if you do this.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;pray&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;🙏&quot;)} &quot; 3&quot;)}</div></z><z id="t1611649848" t="rickmoynihan I’d also done some Prolog before; but the books are still worthwhile. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:30</h><r>rickmoynihan</r>I’d also done some Prolog before; but the books are still worthwhile.<div></div></z><z id="t1611649918" t="michele mendel [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] Yesterday you mentioned the third edition of TRS, but I couldn&apos;t find it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:31</h><r>michele mendel</r><a>@U06HHF230</a> Yesterday you mentioned the third edition of TRS, but I couldn&apos;t find it.<div></div></z><z id="t1611649957" t="rickmoynihan Oh sorry I mean’t second edition [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:32</h><r>rickmoynihan</r>Oh sorry I mean’t second edition<div></div></z><z id="t1611649969" t="rickmoynihan I have a first edition and the second edition (latest) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:32</h><r>rickmoynihan</r>I have a first edition and the second edition (latest)<div></div></z><z id="t1611649986" t="rickmoynihan core.logic is based off the first edition; my mistake. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:33</h><r>rickmoynihan</r>core.logic is based off the first edition; my mistake.<div></div></z><z id="t1611650067" t="michele mendel Ok, that&apos;s interesting, since I&apos;m working through the book. Do you know of any important differences? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:34</h><r>michele mendel</r>Ok, that&apos;s interesting, since I&apos;m working through the book. Do you know of any important differences?<div></div></z><z id="t1611650102" t="rickmoynihan Depends what you think is important 🙂 What edition do you have? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:35</h><r>rickmoynihan</r>Depends what you think is important <b>🙂</b>  What edition do you have?<div></div></z><z id="t1611650114" t="michele mendel second [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:35</h><r>michele mendel</r>second<div></div></z><z id="t1611650156" t="rickmoynihan are you using a scheme minikanren implementation or core.logic? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:35</h><r>rickmoynihan</r>are you using a scheme minikanren implementation or core.logic?<div></div></z><z id="t1611650177" t="michele mendel core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:36</h><r>michele mendel</r>core.logic<div></div></z><z id="t1611650392" t="rickmoynihan So TRS (both editions) include a complete implementation in the final chapters / appendix. The implementations in the 1st and 2nd edition are different. (1st edition is minikanren, 2nd edition as I understand it is microkanren). So if you want to use the book to understand core.logic’s implementation (rather than the high level language) then there are important differences. If you want to understand logic programming in the abstract; there’s mainly just superficial differences you can gloss over. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:39</h><r>rickmoynihan</r>So TRS (both editions) include a complete implementation in the final chapters / appendix.  The implementations in the 1st and 2nd edition are different.  (1st edition is minikanren, 2nd edition as I understand it is microkanren).

So if you want to use the book to understand core.logic’s implementation (rather than the high level language) then there are important differences.

If you want to understand logic programming in the abstract; there’s mainly just superficial differences you can gloss over.<div></div></z><z id="t1611650486" t="michele mendel Ok, so the main difference is in the implementation and less so in the syntax. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:41</h><r>michele mendel</r>Ok, so the main difference is in the implementation and less so in the syntax.<div></div></z><z id="t1611650769" t="rickmoynihan No I believe there are also some differences at the language level; they’re just pretty easy to find the equivalence for. See pages xv and xvi in TRS2. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:46</h><r>rickmoynihan</r>No I believe there are also some differences at the language level; they’re just pretty easy to find the equivalence for.  See pages xv and xvi in TRS2.<div></div></z><z id="t1611650910" t="rickmoynihan I actually wrote to Dan and Will on the mailing list before purchasing the 2nd edition to find out what had changed. Dan emailed me privately but Will replied on the list with a pretty comprehensive reply… I meant to link it yesterday: https://groups.google.com/g/minikanren/c/fMKSBmOm_XM/m/V0K30F8lBwAJ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:48</h><r>rickmoynihan</r>I actually wrote to Dan and Will on the mailing list before purchasing the 2nd edition to find out what had changed.  Dan emailed me privately but Will replied on the list with a pretty comprehensive reply… I meant to link it yesterday:

<a href="https://groups.google.com/g/minikanren/c/fMKSBmOm_XM/m/V0K30F8lBwAJ" target="_blank">https://groups.google.com/g/minikanren/c/fMKSBmOm_XM/m/V0K30F8lBwAJ</a><div></div></z><z id="t1611651076" t="michele mendel Thanks, I will add your answer to my Github page ( https://github.com/michelemendel/the_reasoned_schemer ), if that&apos;s ok with you. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:51</h><r>michele mendel</r>Thanks, I will add your answer to my Github page (<a href="https://github.com/michelemendel/the_reasoned_schemer" target="_blank">https://github.com/michelemendel/the_reasoned_schemer</a>), if that&apos;s ok with you.<div></div></z><z id="t1611651435" t="rickmoynihan Yeah that’s fine, thanks. I’d maybe revise “important differences” in implementation to “notable differences” as overall I think TRS2 is still a very good place to understand core.logic, though it may depend on deep you go. core.logic is also already different from TRS1 of course ( https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>08:57</h><r>rickmoynihan</r>Yeah that’s fine, thanks.

I’d maybe revise “important differences” in implementation to “notable differences” as overall I think TRS2 is still a very good place to understand core.logic, though it may depend on deep you go.

core.logic is also already different from TRS1 of course ( <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a> )<div></div></z><z id="t1611651730" t="michele mendel Noted, I&apos;ll change the text. I have been trying to figure out if core.logic is actively updated and actually used (and not abandoned). Do you have any understanding about this? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:02</h><r>michele mendel</r>Noted, I&apos;ll change the text.

I have been trying to figure out if core.logic is actively updated and actually used (and not abandoned). Do you have any understanding about this?<div></div></z><z id="t1611652663" t="rickmoynihan I actively use it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:17</h><r>rickmoynihan</r>I actively use it<div></div></z><z id="t1611652668" t="rickmoynihan as do others [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:17</h><r>rickmoynihan</r>as do others<div></div></z><z id="t1611652706" t="rickmoynihan It’s not abandoned. It’s still maintained, just very lightly. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:18</h><r>rickmoynihan</r>It’s not abandoned.  It’s still maintained, just very lightly.<div></div></z><z id="t1611652744" t="rickmoynihan IIRC it had a version 1.0.0 update recently (as did many core clojure libs) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:19</h><r>rickmoynihan</r>IIRC it had a version 1.0.0 update recently (as did many core clojure libs)<div></div></z><z id="t1611652751" t="rickmoynihan though it was essentially just a version bump [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:19</h><r>rickmoynihan</r>though it was essentially just a version bump<div></div></z><z id="t1611652898" t="rickmoynihan it had a minor update for clojure 1.10 warnings in feb last year, and has had changes to the build infrastructure etc 6 days ago. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:21</h><r>rickmoynihan</r>it had a minor update for clojure 1.10 warnings in feb last year, and has had changes to the build infrastructure etc 6 days ago.<div></div></z><z id="t1611652935" t="michele mendel Good to know. I&apos;m pretty new to the Clojure environment. Some time back, I had a bad experience with Overtone. I went for Supercollider direct instead. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:22</h><r>michele mendel</r>Good to know.

I&apos;m pretty new to the Clojure environment. Some time back, I had a bad experience with Overtone. I went for Supercollider direct instead.<div></div></z><z id="t1611652969" t="rickmoynihan I expect it won’t get any significant attention again though, aside from minor build gardening etc. It’s essentially done. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:22</h><r>rickmoynihan</r>I expect it won’t get any significant attention again though, aside from minor build gardening etc.  It’s essentially done.<div></div></z><z id="t1611653287" t="michele mendel Thanks for your help [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>09:28</h><r>michele mendel</r>Thanks for your help<div></div></z><z id="t1611687139" t="michele mendel In https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer the pair? predicate is defined, but this will make the following true (pair? &apos;(a b c)) ;-&gt; true (pair? (lcons &apos;(1 2) \s)) ;-&gt; true Isn&apos;t a pair (a . b) or (a b), not a list of more than 2 items? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>18:52</h><w>michele mendel</w>In <a href="https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer" target="_blank">https://github.com/clojure/core.logic/wiki/Differences-from-The-Reasoned-Schemer</a> the pair? predicate is defined, but this will make the following true
<pre>(pair? &apos;(a b c))          ;-&gt; true
(pair? (lcons &apos;(1 2) \s)) ;-&gt; true</pre>
 Isn&apos;t a pair  (a . b) or (a b), not a list of more than 2 items?<div></div></z><z id="t1611688173" t="hiredman no [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:09</h><w>hiredman</w>no<div></div></z><z id="t1611688292" t="hiredman in traditional lisps, lists are exposed linked lists of cells, each cell is like a 2 element array, one of the elements is called the car and one is called the cdr. those cells are what are pairs, that pair? returns true on in scheme [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:11</h><w>hiredman</w>in traditional lisps, lists are exposed linked lists of cells, each cell is like a 2 element array, one of the elements is called the car and one is called the cdr. those cells are what are pairs, that pair? returns true on in scheme<div></div></z><z id="t1611688361" t="hiredman so (a . b) is a pair with the car a and the cdr b. (a b) is a pair where the car is a, and the cdr is (b), and (b) is a pair where the car is b and the cdr is nil [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:12</h><w>hiredman</w>so (a . b) is a pair with the car a and the cdr b. (a b) is a pair where the car is a, and the cdr is (b), and (b) is a pair where the car is b and the cdr is nil<div></div></z><z id="t1611688396" t="hiredman (a b c) is the same as the (a b) case extended by another level [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:13</h><w>hiredman</w>(a b c) is the same as the (a b) case extended by another level<div></div></z><z id="t1611688419" t="hiredman https://people.csail.mit.edu/jaffer/r5rs_8.html#IDX319 is some documentation on the scheme function [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:13</h><w>hiredman</w><a href="https://people.csail.mit.edu/jaffer/r5rs_8.html#IDX319" target="_blank">https://people.csail.mit.edu/jaffer/r5rs_8.html#IDX319</a> is some documentation on the scheme function<div></div></z><z id="t1611688465" t="michele mendel Ah yes, I know about that. It&apos;s a cell, right? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:14</h><w>michele mendel</w>Ah yes, I know about that. It&apos;s a cell, right?<div></div></z><z id="t1611688639" t="hiredman yes, and that all applies to scheme, clojure is different, clojure is primarily concerned with seqs (clojure lists are seqs) which don&apos;t actually expose the cells that make them up [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:17</h><w>hiredman</w>yes, and that all applies to scheme, clojure is different, clojure is primarily concerned with seqs (clojure lists are seqs) which don&apos;t actually expose the cells that make them up<div></div></z><z id="t1611688746" t="hiredman but having cons cells and improper lists (cells where the cdr is not a pair or nil) is useful in minikanren because you can represent a list where you haven&apos;t figured out what the rest of the list yet (the cdr is a logic var) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:19</h><w>hiredman</w>but having cons cells and improper lists (cells where the cdr is not a pair or nil) is useful in minikanren because you can represent a list where you haven&apos;t figured out what the rest of the list yet (the cdr is a logic var)<div></div></z><z id="t1611688766" t="hiredman so core.logic has lcons to provide for that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:19</h><w>hiredman</w>so core.logic has lcons to provide for that<div></div></z><z id="t1611688838" t="michele mendel I understand, but that makes pair a little odd in Clojure. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:20</h><w>michele mendel</w>I understand, but that makes pair a little odd in Clojure.<div></div></z><z id="t1611688857" t="hiredman it is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:20</h><w>hiredman</w>it is<div></div></z><z id="t1611688970" t="hiredman pair doesn&apos;t really exist in the wider world of clojure, but exists in core.logic because The Reasoned Schemer is an important source of documentation for it, and examples in TRS need it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:22</h><w>hiredman</w>pair doesn&apos;t really exist in the wider world of clojure, but exists in core.logic because The Reasoned Schemer is an important source of documentation for it, and examples in TRS need it<div></div></z><z id="t1611834063" t="rickmoynihan Yeah when I had a go at implementing microkanren, I found probably half the code of the complete implementation was just implementing scheme like linked lists in clojure. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-28</d><h>11:41</h><r>rickmoynihan</r>Yeah when I had a go at implementing microkanren, I found probably half the code of the complete implementation was just implementing scheme like linked lists in clojure.<div></div></z><z id="t1640343179" t="Ben Sless I saw another approach at https://mullr.github.io/micrologic/literate.html Another approach could also be something which implements iseq then you cons on it, no? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-24</d><h>10:52</h><r>Ben Sless</r>I saw another approach at

<a href="https://mullr.github.io/micrologic/literate.html" target="_blank">https://mullr.github.io/micrologic/literate.html</a>

Another approach could also be something which implements iseq then you cons on it, no?<div></div></z><z id="t1641209726" t="rickmoynihan IIRC this is more or less what I ended up doing https://github.com/bodil/microkanrens/blob/66b5ef7e1f1bf3ce7858a2f6e427ad750a3e9a45/mk.clj#L1-L48 https://www.youtube.com/watch?v=2e8VFSSNORg [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-03</d><h>11:35</h><r>rickmoynihan</r>IIRC this is more or less what I ended up doing

<a href="https://github.com/bodil/microkanrens/blob/66b5ef7e1f1bf3ce7858a2f6e427ad750a3e9a45/mk.clj#L1-L48" target="_blank">https://github.com/bodil/microkanrens/blob/66b5ef7e1f1bf3ce7858a2f6e427ad750a3e9a45/mk.clj#L1-L48</a>

<a href="https://www.youtube.com/watch?v=2e8VFSSNORg" target="_blank">https://www.youtube.com/watch?v=2e8VFSSNORg</a><div></div></z><z id="t1611689028" t="hiredman well, really you&apos;d need something like it even without the TRS to reason about lists, but the reason it is the way it is is because of TRS [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:23</h><w>hiredman</w>well, really you&apos;d need something like it even without the TRS to reason about lists, but the reason it is the way it is is because of TRS<div></div></z><z id="t1611689063" t="michele mendel Thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-26</d><h>19:24</h><w>michele mendel</w>Thanks<div></div></z><z id="t1611780323" t="michele mendel Is the reification the same or similar as the unification of a logical variable? The &quot;The common portion defines logic variables, constraint states, unification, and reification&quot; (First-order miniKanren representation: Great for tooling and search_) suggests they&apos;re not the same._ I guess that unification is binding a logical variable to concrete value, while reification is binding it to a value like _0, which shows it can take any value. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-27</d><h>20:45</h><w>michele mendel</w>Is the reification the same or similar as the unification of a logical variable?

The &quot;The common portion defines logic variables, constraint states, unification, and reification&quot; (First-order miniKanren representation: Great for tooling and search_) suggests they&apos;re not the same._

I guess that unification is binding a logical variable to concrete value, while reification is binding it to a value like _0, which shows it can take any value.<div></div></z><z id="t1611834565" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U019PBSP6TV&quot;}] Not sure where that statement comes from, but your interpretation sounds about right. Unification is really just the process of making both sides of the equality operation equivalent, by bidirectionally binding the variables etc… I think reification means just lifting logic variables into the language as first order concepts. They’re made real in that not only are they symbols in your program, but you can also pass them around as values. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-28</d><h>11:49</h><w>rickmoynihan</w><a>@michelemendel</a> Not sure where that statement comes from, but your interpretation sounds about right.

Unification is really just the process of making both sides of the equality operation equivalent, by bidirectionally binding the variables etc…

I think reification means just lifting logic variables into the language as first order concepts.  They’re made real in that not only are they symbols in your program, but you can also pass them around as values.<div></div></z><z id="t1611835135" t="rickmoynihan Actually scratch that, I think you’re right about reification in this context. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-28</d><h>11:58</h><w>rickmoynihan</w>Actually scratch that, I think you’re right about reification in this context.<div></div></z><z id="t1611857311" t="michele mendel Good, then I know my understanding is correct. It&apos;s interesting to note how all the tutorials and academic papers take for granted that a certain terminology should somehow be obvious and known to all. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-28</d><h>18:08</h><w>michele mendel</w>Good, then I know my understanding is correct. It&apos;s interesting to note how all the tutorials and academic papers take for granted that a certain terminology should somehow be obvious and known to all.<div></div></z><z id="t1611860117" t="hiredman yeah, there is a deep assumption in core.logic that you&apos;ve read the reasoned schemer (which I have not), which makes making sense of the soup of protocols very tricky. I&apos;ve been fiddling with adding clp(set) (reasoning over sets, having goals fir things like set unions, etc) to core.logic, and sort of releated to the previous discussion similar to how core.logic adds lcons for lists that aren&apos;t completely specified, I need to add a new logic set type for sets that aren&apos;t completely known. For interops sake I would like to, at the very end before reporting results, replace any logic sets that are fully specified with real clojure sets, and I think core.logics IReifyTerm protocol is the way to do that, but so far I haven&apos;t gotten it to work (if you introduce a clojure set in the wrong place something in core.logic goes nuts and blows the stack) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-28</d><h>18:55</h><w>hiredman</w>yeah, there is a deep assumption in core.logic that you&apos;ve read the reasoned schemer (which I have not), which makes making sense of the soup of protocols very tricky.  I&apos;ve been fiddling with adding clp(set) (reasoning over sets, having goals fir things like set unions, etc) to core.logic, and sort of releated to the previous discussion similar to how core.logic adds lcons for lists that aren&apos;t completely specified, I need to add a new logic set type for sets that aren&apos;t completely known. For interops sake I would like to, at the very end before reporting results, replace any logic sets that are fully specified with real clojure sets, and I think core.logics IReifyTerm protocol is the way to do that, but so far I haven&apos;t gotten it to work (if you introduce a clojure set in the wrong place something in core.logic goes nuts and blows the stack)<div></div></z><z id="t1611914565" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] yeah I’ve seen that too I seem to remember having to extend core.logic IUninitialized protocols etc to my own types to stop things blowing up [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-29</d><h>10:02</h><w>rickmoynihan</w><a>@hiredman</a> yeah I’ve seen that too I seem to remember having to extend core.logic IUninitialized protocols etc to my own types to stop things blowing up<div></div></z><z id="t1611914583" t="rickmoynihan but have also seen the thing with sets too where you get an infinite recursion [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-01-29</d><h>10:03</h><w>rickmoynihan</w>but have also seen the thing with sets too where you get an infinite recursion<div></div></z><z id="t1612206666" t="michele mendel Why is remembero called that? It removes an item from a list, so what is remembered? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-02-01</d><h>19:11</h><w>michele mendel</w>Why is remembero called that? It removes an item from a list, so what is remembered?<div></div></z><z id="t1612261355" t="rickmoynihan I think it’s called rembero , and is derived from the little schemers rember , presumably a portmanteau of remove and member. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-02-02</d><h>10:22</h><r>rickmoynihan</r>I think it’s called <code>rembero</code>, and is derived from the little schemers <code>rember</code>, presumably a portmanteau of remove and member.<div></div></z><z id="t1612266496" t="michele mendel Ah, I see. I probably read it wrong. Thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-02-02</d><h>11:48</h><r>michele mendel</r>Ah, I see. I probably read it wrong. Thanks<div></div></z><z id="t1612377240" t="Lone Ranger curious if anyone has done a large-scale core.logic project here? I&apos;m struggling with composability patterns [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-02-03</d><h>18:34</h><w>Lone Ranger</w>curious if anyone has done a large-scale core.logic project here?  I&apos;m struggling with composability patterns<div></div></z><z id="t1621378369" t="mrchance Is there a way to get all potential values for a logic var in a list? So basically a way to run this in one step? I feel like that should be obvious, but I don&apos;t see it (let [result (run* [q] ...)] (run* [q] (membero q result) ...)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-18</d><h>22:52</h><w>mrchance</w>Is there a way to get all potential values for a logic var in a list? So basically a way to run this in one step? I feel like that should be obvious, but I don&apos;t see it
<pre>(let [result (run* [q] ...)]
  (run* [q]
    (membero q result)
    ...))</pre><div></div></z><z id="t1621378483" t="mrchance (there might be other constraints that need to access the value of result ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-18</d><h>22:54</h><w>mrchance</w>(there might be other constraints that need to access the value of  <code>result</code>   )<div></div></z><z id="t1621379216" t="hiredman no [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-18</d><h>23:06</h><w>hiredman</w>no<div></div></z><z id="t1621380893" t="mrchance Thanks! :D [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-18</d><h>23:34</h><w>mrchance</w>Thanks! :D<div></div></z><z id="t1621381031" t="mrchance Related question: Is it possible to build prologs findall? That would provide a different way to solve the problem... I have this so far: (defna findall [pred col result] ([_ [] []]) ([_ [?x . ?rc] [?x . ?rr]] (pred ?x) (findall pred ?rc ?rr)) ([_ [_ . ?rc] _] (findall pred ?rc result))) but it&apos;s not relational, and I&apos;m not sure it works as I would expect in all cases. (Would pass it something built with fne as pred ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-18</d><h>23:37</h><w>mrchance</w>Related question: Is it possible to build prologs findall? That would provide a different way to solve the problem... I have this so far:
<pre>(defna findall [pred col result]
  ([_ [] []])
  ([_ [?x . ?rc] [?x . ?rr]]
   (pred ?x)
   (findall pred ?rc ?rr))
  ([_ [_ . ?rc] _]
   (findall pred ?rc result)))</pre>
but it&apos;s not relational, and I&apos;m not sure it works as I would expect in all cases. (Would pass it something built with <code>fne</code> as <code>pred</code> )<div></div></z><z id="t1621389005" t="hiredman Not sure why that couldn&apos;t be relational. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-19</d><h>01:50</h><w>hiredman</w>Not sure why that couldn&apos;t be relational.<div></div></z><z id="t1621389260" t="hiredman I never really use the defne, denfa, fne macros [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-19</d><h>01:54</h><w>hiredman</w>I never really use the defne, denfa, fne macros<div></div></z><z id="t1621415012" t="mrchance The most obvious problem I struggle with is that the last clause would require something like a (not (pred ?x)) which I don&apos;t know how to write in core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-05-19</d><h>09:03</h><w>mrchance</w>The most obvious problem I struggle with is that the last clause would require something like a <code>(not (pred ?x))</code> which I don&apos;t know how to write in core.logic<div></div></z><z id="t1629997964" t="Russell Mull The minikanren ICFP session is happening now: https://www.youtube.com/watch?v=F054qKPk8EQ [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-08-26</d><h>17:12</h><w>Russell Mull</w>The minikanren ICFP session is happening now: <a href="https://www.youtube.com/watch?v=F054qKPk8EQ" target="_blank">https://www.youtube.com/watch?v=F054qKPk8EQ</a><div></div></z><z id="t1635351009" t="Ngoc Khuat Hi ? anybody here ? ^^ I’ve tried the core.logic a week ago and curious are there any projects that use it in production? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:10</h><w>Ngoc Khuat</w>Hi ? anybody here ? ^^

I’ve tried the <code>core.logic</code> a week ago and curious are there any projects that use it in production?<div></div></z><z id="t1635757812" t="rickmoynihan We use it for an in memory SPARQL/datalog-like database… https://github.com/Swirrl/matcha I wrote it 3 years ago as a quick hack to do an in memory datalog like database. I couldn’t use datascript as we needed something schemaless… these days I’d probably look at using asami instead. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-01</d><h>09:10</h><r>rickmoynihan</r>We use it for an in memory SPARQL/datalog-like database…

<a href="https://github.com/Swirrl/matcha" target="_blank">https://github.com/Swirrl/matcha</a>

I wrote it 3 years ago as a quick hack to do an in memory datalog like database.  I couldn’t use datascript as we needed something schemaless… these days I’d probably look at using asami instead.<div></div></z><z id="t1635854878" t="Ngoc Khuat what do think about it performance tho? Or what would be the best case to use it? I tried it to do a two-sum problems and once the input arrays have around ~100 elems then it goes insanely slow. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-02</d><h>12:07</h><r>Ngoc Khuat</r>what do think about it performance tho?
Or what would be the best case to use it?

I tried it to do a two-sum problems and once the input arrays have around ~100 elems then it goes insanely slow.<div></div></z><z id="t1635856260" t="rickmoynihan Have you looked at using tabling? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-02</d><h>12:31</h><r>rickmoynihan</r>Have you looked at using tabling?<div></div></z><z id="t1635856382" t="rickmoynihan It’s supported in core.logic It’s a fancy version of memoization, that can improve the performance of some core.logic algorithms a lot; and also help ensure some algorithms terminate. It’s probably best documented in Will Byrds thesis: https://raw.githubusercontent.com/webyrd/dissertation-single-spaced/master/thesis.pdf [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-02</d><h>12:33</h><r>rickmoynihan</r>It’s supported in core.logic

It’s a fancy version of memoization, that can improve the performance of some core.logic algorithms a lot; and also help ensure some algorithms terminate.

It’s probably best documented in Will Byrds thesis:

<a href="https://raw.githubusercontent.com/webyrd/dissertation-single-spaced/master/thesis.pdf" target="_blank">https://raw.githubusercontent.com/webyrd/dissertation-single-spaced/master/thesis.pdf</a><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;eyes&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👀&quot;)} &quot; 1&quot;)}</div></z><z id="t1635856404" t="rickmoynihan (It has a section on it) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-02</d><h>12:33</h><r>rickmoynihan</r>(It has a section on it)<div></div></z><z id="t1635351076" t="Ngoc Khuat I’m also trying to make a series to benchmark its speed with the lazy-seq and others implementation: I made a small note here : https://ngockhuat.me/logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:11</h><w>Ngoc Khuat</w>I’m also trying to make a series to benchmark its speed with the lazy-seq and others implementation: I made a small note here : <a href="https://ngockhuat.me/logic" target="_blank">https://ngockhuat.me/logic</a><div></div></z><z id="t1635351090" t="dpsutton https://github.com/metabase/metabase/blob/master/src/metabase/models/params/chain_filter/dedupe_joins.clj 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:11</h><w>dpsutton</w><a href="https://github.com/metabase/metabase/blob/master/src/metabase/models/params/chain_filter/dedupe_joins.clj" target="_blank">https://github.com/metabase/metabase/blob/master/src/metabase/models/params/chain_filter/dedupe_joins.clj</a> <b>🙂</b><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;eyes&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👀&quot;)} &quot; 2&quot;)}</div></z><z id="t1635351209" t="Ngoc Khuat ohhh, did you happen to benchmark it if we do it in the traditional way? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:13</h><r>Ngoc Khuat</r>ohhh, did you happen to benchmark it if we do it in the traditional way?<div></div></z><z id="t1635351253" t="dpsutton there is no alternative implementation. and this predated me [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:14</h><r>dpsutton</r>there is no alternative implementation. and this predated me<div></div></z><z id="t1635353180" t="dpsutton context: we construct joins between all of the filters on a dashboard to create a single query that links all of the valid values for the dropdowns. From the first one to each other one. Since these can include duplicates, we pass all of these joins into this dedupe function so that we have only one join that satisfies all tables we need to hit [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:46</h><r>dpsutton</r>context: we construct joins between all of the filters on a dashboard to create a single query that links all of the valid values for the dropdowns. From the first one to each other one. Since these can include duplicates, we pass all of these joins into this dedupe function so that we have only one join that satisfies all tables we need to hit<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1635353187" t="dpsutton the test namespace has some examples [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-27</d><h>16:46</h><r>dpsutton</r>the test namespace has some examples<div></div></z><z id="t1635386294" t="Ngoc Khuat This is such a cool graph problem. It must feel good to write that piece of code. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-10-28</d><h>01:58</h><r>Ngoc Khuat</r>This is such a cool graph problem. It must feel good to write that piece of code.<div></div></z><z id="t1636397873" t="tschady My first core.logic program. i’m trying to have lvar s be values in a map of known keys. This code doesn’t seem to run the membero functions. Any help? I only have m at runtime, so I can’t just hardcode in 2 logic vars, m could have 100 keys for instance. I think the problem is in the for .. Also, any other advice very welcome. (def m {:a [[1 2 3] [2 100 200]] :b [[1 2 3] [2 3 4]]}) (run* [q] (let [result-map (zipmap (keys m) (repeatedly lvar))] (for [k (keys m) vs (get m k)] (membero (get result-map k) vs)) (fd/distinct (vals result-map)) (== q result-map))) ; =&gt; ({:a _0, :b _1}) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>18:57</h><w>tschady</w>My first core.logic program.  i’m trying to have <code>lvar</code>s be values in a map of known keys.  This code doesn’t seem to run the <code>membero</code> functions.  Any help?
I only have <code>m</code> at runtime, so I can’t just hardcode in 2 logic vars, <code>m</code> could have 100 keys for instance.
I think the problem is in the <code>for</code> ..
Also, any other advice very welcome.
<pre>(def m {:a [[1 2 3]
            [2 100 200]]
        :b [[1 2 3]
            [2 3 4]]})

(run* [q]
  (let [result-map (zipmap (keys m) (repeatedly lvar))]
    (for [k (keys m)
          vs (get m k)]
      (membero (get result-map k) vs))
    (fd/distinct (vals result-map))
    (== q result-map)))
; =&gt; ({:a _0, :b _1})</pre><div></div></z><z id="t1636398939" t="paulocuneo minikanren is an inmutable lang/framework. goals will not be evaluated as logic relations outside run*, this means the goals inside let expression have no effect, only the last goals of let is passed into run*, this means only the last goal from the let body is evaluated. additionally, functional expression will not be evaluated as relations, this means is not posible to use a (functional) for expression, you will need to re-write the for in a relational way ( Disclaimer: I&apos;m not an expert, nor a english native speaker 😄 ) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:15</h><r>paulocuneo</r>minikanren is an inmutable lang/framework.
goals will not be evaluated as logic relations outside run*,
this means the goals inside let expression have no effect,
only the last goals of let is passed into run*,
this means only the last goal from the let body is evaluated.

additionally, functional expression will not be evaluated as relations, this means is not posible to use a (functional) for expression, you will need to re-write the for in a relational way

( Disclaimer: I&apos;m not an expert, nor a english native speaker <b>😄</b> )<div></div></z><z id="t1636399517" t="tschady very helpful, thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:25</h><r>tschady</r>very helpful, thanks!<div></div></z><z id="t1636400708" t="paulocuneo https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1281 and* will come in handy to transform the seq returned by the for expresion into a goal/relation https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1276 all can combine the goals inside let body into a goal something like (def m {:a [[1 2 3] [2 100 200]] :b [[1 2 3] [2 3 4]]}) (run* [q] (let [result-map (zipmap (keys m) (repeatedly lvar))] (all (and* (for [k (keys m) vs (get m k)] (membero (get result-map k) vs))) (fd/distinct (vals result-map)) (== q result-map)))) must say this is quite hackish, there should be a relational way to express what you want [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:45</h><r>paulocuneo</r><a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1281" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1281</a> and* will come in handy to transform the seq returned by the for expresion into a goal/relation
<a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1276" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L1276</a> all can combine the goals inside let body into a goal

something like
<pre>(def m {:a [[1 2 3]
            [2 100 200]]
        :b [[1 2 3]
            [2 3 4]]})

(run* [q]
  (let [result-map (zipmap (keys m) (repeatedly lvar))]
    (all (and* (for [k  (keys m)
                     vs (get m k)]
                 (membero (get result-map k) vs)))
         (fd/distinct (vals result-map))
         (== q result-map))))</pre>
must say this is quite hackish, there should be a relational way to express what you want<div></div></z><z id="t1636401352" t="tschady just did my own before comparing, works: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:55</h><r>tschady</r>just did my own before comparing, works:<div></div></z><z id="t1636401356" t="tschady (def m {:a [[1 2 3] [2 100 200]] :b [[1 2 3] [2 3 4]]}) (defn member-all [var possibles] (and* (map #(membero var %) possibles))) (let [vars (repeatedly (count (keys m)) lvar)] (apply zipmap (keys m) (run 1 [q] (and* (map #(member-all % %2) vars (vals m))) (fd/distinct vars) (== q vars)))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:55</h><r>tschady</r><pre>(def m {:a [[1 2 3]
            [2 100 200]]
        :b [[1 2 3]
            [2 3 4]]})

(defn member-all [var possibles]
  (and* (map #(membero var %) possibles)))

(let [vars (repeatedly (count (keys m)) lvar)]
  (apply zipmap
         (keys m)
         (run 1 [q]
           (and* (map #(member-all % %2) vars (vals m)))
           (fd/distinct vars)
           (== q vars))))</pre><div></div></z><z id="t1636401419" t="tschady tho this depends on keys/vals of map always returning in same order [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:56</h><r>tschady</r>tho this depends on keys/vals of map always returning in same order<div></div></z><z id="t1636401589" t="tschady thanks for the help, changed my thinking. i’ll keep at it. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>19:59</h><r>tschady</r>thanks for the help, changed my thinking.  i’ll keep at it.<div></div></z><z id="t1636402075" t="tschady getting better, moved out the let and got rid of the for : (def m {:a [[1 2 3] [2 100 200]] :b [[1 2 3] [2 3 4]]}) (defn member-all [var possibles] (and* (map #(membero var %) possibles))) (let [result-map (zipmap (keys m) (repeatedly lvar))] (run* [q] (and* (map (fn [[k vs]] (member-all (get result-map k) vs)) m)) (distincto (vals result-map)) (== q result-map))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:07</h><r>tschady</r>getting better, moved out the <code>let</code> and got rid of the <code>for</code>:
<pre>(def m {:a [[1 2 3]
            [2 100 200]]
        :b [[1 2 3]
            [2 3 4]]})

(defn member-all [var possibles]
  (and* (map #(membero var %) possibles)))

(let [result-map (zipmap (keys m) (repeatedly lvar))]
  (run* [q]
    (and* (map (fn [[k vs]] (member-all (get result-map k) vs)) m))
    (distincto (vals result-map))
    (== q result-map)))</pre><div></div></z><z id="t1636402782" t="tschady this is super slow on large input btw [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:19</h><r>tschady</r>this is super slow on large input btw<div></div></z><z id="t1636403120" t="hiredman membero is not fast [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:25</h><r>hiredman</r>membero is not fast<div></div></z><z id="t1636403271" t="hiredman It can be hard to give big o measurements of logic programs, because of how abstract they can be, but membero is basically o(n) of the collection [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:27</h><r>hiredman</r>It can be hard to give big o measurements of logic programs, because of how abstract they can be, but membero is basically o(n) of the collection<div></div></z><z id="t1636403285" t="hiredman And you are doing it over and over again [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:28</h><r>hiredman</r>And you are doing it over and over again<div></div></z><z id="t1636403371" t="paulocuneo maybe the nail doesnt fit the hammer, dont know a better way to phrase it are you planning to run the query backwards? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:29</h><r>paulocuneo</r>maybe the nail doesnt fit the hammer, dont know a better way to phrase it
are you planning to run the query backwards?<div></div></z></g><g id="s4"><z id="t1636403409" t="tschady stupid nail! swing harder. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:30</h><r>tschady</r>stupid nail!  swing harder.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;laughing&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;😆&quot;)} &quot; 1&quot;)}</div></z><z id="t1636403426" t="tschady i don’t know what “run the query backwards” means [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:30</h><r>tschady</r>i don’t know what “run the query backwards” means<div></div></z><z id="t1636403474" t="paulocuneo relational programs can calculate the inputs given an output, it&apos;s like running it backwards [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:31</h><r>paulocuneo</r>relational programs can calculate the inputs given an output, it&apos;s like running it backwards<div></div></z><z id="t1636403517" t="hiredman It might speed things up to move distincto up(very non-relational to care about ordering, but it might prune the search tree earlier) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:31</h><r>hiredman</r>It might speed things up to move distincto up(very non-relational to care about ordering, but it might prune the search tree earlier)<div></div></z><z id="t1636404333" t="tschady wow [:attrs {:href &quot;/_/_/users/U0NCTKEV8&quot;}] went from 86s -&gt; 8s with distincto first. I restarted CIDER in between, so shouldn’t be any caching. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:45</h><r>tschady</r>wow <a>@U0NCTKEV8</a> went from 86s -&gt; 8s with <code>distincto</code> first.  I restarted CIDER in between, so shouldn’t be any caching.<div></div></z><z id="t1636404546" t="hiredman I guess the membero is basically growing the search tree exponentially everytime, only for distincto to come along and prune most of it, putting distincto first means most the branches created by membero are immediately pruned [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>20:49</h><r>hiredman</r>I guess the membero is basically growing the search tree exponentially everytime, only for distincto to come along and prune most of it, putting distincto first means most the branches created by membero are immediately pruned<div></div></z><z id="t1636411422" t="tschady down to 95ms by reducing the multiple memberos per key to one with a set/intersection, good enough [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>22:43</h><r>tschady</r>down to 95ms by reducing the multiple memberos per key to one with a set/intersection, good enough<div></div></z><z id="t1636411427" t="tschady thanks y’all [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>22:43</h><r>tschady</r>thanks y’all<div></div></z><z id="t1636411644" t="hiredman a great addition to to core.logic would be a clp(set) implementation [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-08</d><h>22:47</h><r>hiredman</r>a great addition to to core.logic would be a clp(set) implementation<div></div></z><z id="t1636484278" t="tschady btw, I replaced (and* (map with (everyg [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-09</d><h>18:57</h><r>tschady</r>btw, I replaced <code>(and* (map</code> with <code>(everyg</code><div></div></z><z id="t1636553490" t="tschady I’m trying to compare elements inside an lvar which is a hashmap (in this case, having a unique value for the :a key). I’ve managed to do it with project but I’ve read this is to be avoided. Is there a better way to do this? Any advice on style? m will have over 100 entries eventually, with more complex comparison between adjacent vars . (def m [{:a 1 :b &quot;foo&quot;} {:a 1 :b &quot;bar&quot;} {:a 3 :b &quot;baz&quot;}]) (let [vars (repeatedly 2 lvar)] (run* [q] (everyg #(membero % m) vars) (project [vars] (distincto (mapv :a vars))) (== q vars))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-10</d><h>14:11</h><w>tschady</w>I’m trying to compare elements inside an lvar which is a hashmap (in this case, having a unique value for the <code>:a</code> key).  I’ve managed to do it with <code>project</code> but I’ve read this is to be avoided.  Is there a better way to do this?  Any advice on style?  <code>m</code> will have over 100 entries eventually, with more complex comparison between adjacent <code>vars</code>.
<pre>(def m [{:a 1 :b &quot;foo&quot;}
        {:a 1 :b &quot;bar&quot;}
        {:a 3 :b &quot;baz&quot;}])

(let [vars (repeatedly 2 lvar)]
  (run* [q]
    (everyg #(membero % m) vars)
    (project [vars] (distincto (mapv :a vars)))
    (== q vars)))</pre><div></div></z><z id="t1636555101" t="paulocuneo https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2587 can be use to extract keys from a map, dunno the performance (run* [q] (fresh [ma a ma&apos; a&apos;] (membero ma m) (membero ma&apos; m) (featurec ma {:a a}) (featurec ma&apos; {:a a&apos;}) (distincto [a a&apos;]) (== [a a&apos;] q))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-10</d><h>14:38</h><r>paulocuneo</r><a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2587" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L2587</a> can be use to extract keys from a map, dunno the performance
<pre>(run* [q]
  (fresh [ma a ma&apos; a&apos;]
    (membero ma m)
    (membero ma&apos; m)
    (featurec ma {:a a})
    (featurec ma&apos; {:a a&apos;})
    (distincto [a a&apos;])
    (== [a a&apos;] q)))</pre><div></div></z><z id="t1636555166" t="Ben Sless Ninja&apos;d by less than a minute featurec can bind keys and values in a map [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-10</d><h>14:39</h><r>Ben Sless</r>Ninja&apos;d by less than a minute
featurec can bind keys and values in a map<div></div></z><z id="t1636559112" t="tschady I found featurec but hadn’t adapted my thinking to that a a&apos; yet. thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-10</d><h>15:45</h><r>tschady</r>I found <code>featurec</code> but hadn’t adapted my thinking to that <code>a a&apos;</code> yet.  thanks!<div></div></z><z id="t1637093494" t="Ben Sless Has anyone tried or explored the possibility of implementing the core.logic streams as reducibles or iterables and not as lazy sequences? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>20:11</h><w>Ben Sless</w>Has anyone tried or explored the possibility of implementing the core.logic streams as reducibles or iterables and not as lazy sequences?<div></div></z><z id="t1637908696" t="Ben Sless I think this may be the piece I needed to treat Choice directly as reducible https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9 Maybe I&apos;ll just need to tease apart the pull from take [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-26</d><h>06:38</h><r>Ben Sless</r>I think this may be the piece I needed to treat Choice directly as reducible
<a href="https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9" target="_blank">https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9</a>
Maybe I&apos;ll just need to tease apart the pull from take<div></div></z><z id="t1637096330" t="hiredman The way minikanren handles branches by interleaving makes expressing it as a reduce tricky [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>20:58</h><w>hiredman</w>The way minikanren handles branches by interleaving makes expressing it as a reduce tricky<div></div></z><z id="t1637096378" t="hiredman I think someone wrote a datalog in clojure based on reduce, Odin maybe? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>20:59</h><w>hiredman</w>I think someone wrote a datalog in clojure based on reduce, Odin maybe?<div></div></z><z id="t1637096671" t="hiredman https://github.com/halgari/odin [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>21:04</h><w>hiredman</w><a href="https://github.com/halgari/odin" target="_blank">https://github.com/halgari/odin</a><div></div></z><z id="t1637098220" t="Ben Sless From chasing down the papers, isn&apos;t it the only way to guarantee fairness in the implementation? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>21:30</h><w>Ben Sless</w>From chasing down the papers, isn&apos;t it the only way to guarantee fairness in the implementation?<div></div></z><z id="t1637099205" t="hiredman yes [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-16</d><h>21:46</h><w>hiredman</w>yes<div></div></z><z id="t1637908696" t="Ben Sless I think this may be the piece I needed to treat Choice directly as reducible https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9 Maybe I&apos;ll just need to tease apart the pull from take [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-26</d><h>06:38</h><w>Ben Sless</w>I think this may be the piece I needed to treat Choice directly as reducible
<a href="https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9" target="_blank">https://github.com/halgari/odin/blob/master/src/com/tbaldridge/odin/contexts/data.clj#L9</a>
Maybe I&apos;ll just need to tease apart the pull from take<div></div></z><z id="t1637139463" t="rickmoynihan I’m positive there was also a project/experiment implementing minikanren on core.async channels… I’m sure it was something Timothy Baldridge did, but I can’t seem to find it now; maybe a precursor to odin. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-17</d><h>08:57</h><w>rickmoynihan</w>I’m positive there was also a project/experiment implementing minikanren on core.async channels…

I’m sure it was something Timothy Baldridge did, but I can’t seem to find it now; maybe a precursor to odin.<div></div></z><z id="t1637139548" t="rickmoynihan ah ha! Here it is: https://github.com/halgari/async-mu-kanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-17</d><h>08:59</h><w>rickmoynihan</w>ah ha!  Here it is:

<a href="https://github.com/halgari/async-mu-kanren" target="_blank">https://github.com/halgari/async-mu-kanren</a><div></div></z><z id="t1637309226" t="Ben Sless I wonder if with some care one could work through Stream.iterate() as an alternative. Since it&apos;s iterable you can reduce over it in the end [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-19</d><h>08:07</h><w>Ben Sless</w>I wonder if with some care one could work through <code>Stream.iterate()</code> as an alternative. Since it&apos;s iterable you can reduce over it in the end<div></div></z><z id="t1637353765" t="paulocuneo microkanren is small enough that you could port it to clojure and implemented with whatever you like, doesn&apos;t have all the extensions core.logic has https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm every now and then I start to roll my own version of minikanren just for fun , but never have the time to complete it 😆 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-19</d><h>20:29</h><r>paulocuneo</r>microkanren is small enough that you could port it to clojure and implemented with whatever you like, doesn&apos;t have all the extensions core.logic has

<a href="https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm" target="_blank">https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm</a>

every now and then I start to roll my own version of minikanren just for fun , but never have the time to complete it <b>😆</b><div></div></z><z id="t1637354711" t="Ben Sless Yeah I&apos;ve been going over the papers 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-19</d><h>20:45</h><r>Ben Sless</r>Yeah I&apos;ve been going over the papers <b>🙂</b><div></div></z><z id="t1637354718" t="Ben Sless Maybe after reclojure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-19</d><h>20:45</h><r>Ben Sless</r>Maybe after reclojure<div></div></z><z id="t1637353765" t="paulocuneo microkanren is small enough that you could port it to clojure and implemented with whatever you like, doesn&apos;t have all the extensions core.logic has https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm every now and then I start to roll my own version of minikanren just for fun , but never have the time to complete it 😆 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-19</d><h>20:29</h><w>paulocuneo</w>microkanren is small enough that you could port it to clojure and implemented with whatever you like, doesn&apos;t have all the extensions core.logic has

<a href="https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm" target="_blank">https://github.com/jasonhemann/microKanren/blob/master/microKanren.scm</a>

every now and then I start to roll my own version of minikanren just for fun , but never have the time to complete it <b>😆</b><div></div></z><z id="t1637914335" t="Ben Sless It works clojure.lang.IReduceInit (reduce [_ rf init] (let [init (rf init a)] (if (reduced? init) @init (reduce rf init (pull f))))) where (defn pull [f] (if (instance? clojure.lang.Fn f) (recur (f)) f)) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-26</d><h>08:12</h><w>Ben Sless</w>It works
<pre>clojure.lang.IReduceInit
  (reduce [_ rf init]
    (let [init (rf init a)]
      (if (reduced? init)
        @init
        (reduce rf init (pull f)))))</pre>
where
<pre>(defn pull
  [f]
  (if (instance? clojure.lang.Fn f)
    (recur (f))
    f))</pre>
<div></div></z><z id="t1638131722" t="Ben Sless Not sure if I got the licenses and copyrights down correctly (probably need to add some headers to files) but I&apos;d like to share my foray into Kanren/core.logic https://github.com/bsless/clj-kanren [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-11-28</d><h>20:35</h><w>Ben Sless</w>Not sure if I got the licenses and copyrights down correctly (probably need to add some headers to files) but I&apos;d like to share my foray into Kanren/core.logic
<a href="https://github.com/bsless/clj-kanren" target="_blank">https://github.com/bsless/clj-kanren</a><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;eyes&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👀&quot;)} &quot; 2&quot;)}</div></z><z id="t1638751325" t="tschady How would you output the number of steps a logic program took to get the desired output? e.g. https://github.com/clojure/core.logic/wiki/Examples#a-classic-ai-program How can you find how many times moveo needs to be run for each success? Use trace-lvar ? log ? Or embed a counter as an lvar and inc it? (not sure how to do that)? Extend a basic logic function? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-06</d><h>00:42</h><w>tschady</w>How would you output the number of steps a logic program took to get the desired output?
e.g. <a href="https://github.com/clojure/core.logic/wiki/Examples#a-classic-ai-program" target="_blank">https://github.com/clojure/core.logic/wiki/Examples#a-classic-ai-program</a>
How can you find how many times <code>moveo</code> needs to be run for each success?
Use  <code>trace-lvar</code> ?  <code>log</code> ?  Or embed a counter as an lvar and inc it?  (not sure how to do that)?
Extend a basic logic function?<div></div></z><z id="t1638757715" t="paulocuneo dunno, but thinking about it, for an &quot;execution to succeed&quot; it will have to execute the last goal from run, that means it reached a leaf, but the only thing that is threaded through all branches is the substitution map. I imagine trying to hack the substitution in core.logic to count the times it makes a unification, but that&apos;s not exactly how many goals/relation have been executed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-06</d><h>02:28</h><r>paulocuneo</r>dunno, but thinking about it, for an &quot;execution to succeed&quot; it will have to execute the last goal from run, that means it reached a leaf, but the only thing that is threaded through all branches is the substitution map.

I imagine trying to hack the substitution in core.logic to count the times it makes a unification, but that&apos;s not exactly how many goals/relation have been executed<div></div></z><z id="t1638758103" t="paulocuneo also you could hack the substitution to count how many times it executed bind , that is how many relations the substitution has executed [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-06</d><h>02:35</h><r>paulocuneo</r>also you could hack the substitution to count how many times it executed <code>bind</code>
, that is how many relations the substitution has executed<div></div></z><z id="t1638807355" t="Ben Sless Add trace binding, conjo to it the name of the move taken [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-06</d><h>16:15</h><r>Ben Sless</r>Add trace binding, conjo to it the name of the move taken<div></div></z><z id="t1638974666" t="markbastian Hi, I’m trying to understand some core logic basics. Based on the tutorial, I can do this (and it makes sense): (run* [q r] (== {:a q :b r} {:a 1 :b 2})) ;=&gt; ([1 2]) What I want to do is this: (run* [a b c] (== {:a #{1 2} :b #{2 3}} {:a #{a b} :b #{b c}})) ;=&gt; () I would naively hope for ([1 2 3]) instead of (). How can I recast this to make it work? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>14:44</h><w>markbastian</w>Hi, I’m trying to understand some core logic basics. Based on the tutorial, I can do this (and it makes sense):
<pre>(run* [q r]
      (== {:a q :b r} {:a 1 :b 2}))
;=&gt; ([1 2])</pre>
What I want to do is this:
<pre>(run* [a b c]
      (== {:a #{1 2} :b #{2 3}}
          {:a #{a b} :b #{b c}}))
;=&gt; ()</pre>
I would naively hope for ([1 2 3]) instead of (). How can I recast this to make it work?<div></div></z><z id="t1638975280" t="Ben Sless Should be the final value in b be a set or map? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>14:54</h><r>Ben Sless</r>Should be the final value in b be a set or map?<div></div></z><z id="t1638976320" t="markbastian Good catch. I’ve updated the above. Still gives the same result. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>15:12</h><r>markbastian</r>Good catch. I’ve updated the above. Still gives the same result.<div></div></z><z id="t1638977940" t="Ben Sless Right, then I&apos;m stumped 😄 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>15:39</h><r>Ben Sless</r>Right, then I&apos;m stumped <b>😄</b><div></div></z><z id="t1638978662" t="paulocuneo afaik set and hashmap unification is not supported by core.logic, feature extraction from hashmap is supported via featurec [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>15:51</h><r>paulocuneo</r>afaik set and hashmap unification is not supported by core.logic, feature extraction from hashmap is supported via featurec<div></div></z><z id="t1638978712" t="Ben Sless Should be possible to translate a set to a finite domain constraint [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>15:51</h><r>Ben Sless</r>Should be possible to translate a set to a finite domain constraint<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639177960" t="dgr [:attrs {:href &quot;/_/_/users/U0JUR9FPH&quot;}] , I just looked through the source. The problem is that core.logic only unifies sequentials and maps (and Lcons , which are special but replace Clojure’s lists to make improper lists work as in Scheme/Lisp). But (sequential? #{1 2}) ==&gt; false , so it takes the case for Java Objects. If the two Objects aren’t = , then unification fails. And to be clear, no substructure is compared in the case of anything that takes the default Object path. So: (run* [q] (== #{1 2} #{1 2})) ==&gt; (_0) works as expected, as does: (run* [q] (== #{1 2} #{2 1})) ==&gt; (_0) because sets can be compared for equality irrespective of how items are ordered. But sets are just compared, they are not truly unified. See the code around line 900 in the main core.logic source file. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-10</d><h>23:12</h><r>dgr</r><a>@U0JUR9FPH</a>, I just looked through the source. The problem is that core.logic only unifies sequentials and maps (and <code>Lcons</code>, which are special but replace Clojure’s lists to make improper lists work as in Scheme/Lisp). But <code>(sequential? #{1 2}) ==&gt; false</code>, so it takes the case for Java Objects. If the two Objects aren’t <code>=</code>, then unification fails. And to be clear, no substructure is compared in the case of anything that takes the default Object path. So:
<pre>(run* [q]
      (== #{1 2} #{1 2}))
==&gt; (_0)</pre>
works as expected, as does:
<pre>(run* [q]
      (== #{1 2} #{2 1}))
==&gt; (_0)</pre>
because sets can be compared for equality irrespective of how items are ordered. But sets are just compared, they are not truly unified. See the code around line 900 in the main core.logic source file.<div></div></z><z id="t1639178258" t="dgr Note that sorted sets are also not sequential? , so that doesn’t help either. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-10</d><h>23:17</h><r>dgr</r>Note that sorted sets are also not <code>sequential?</code>, so that doesn’t help either.<div></div></z><z id="t1639178636" t="dgr [:attrs {:href &quot;/_/_/users/U487Z32UF&quot;}] , map unification is supported for map values, but not keys. All maps must have the same size and the same keys, otherwise unification fails. The values corresponding to equal keys are unified correctly. Thus: (run* [q] (== {:a 1} {:a q})) ==&gt; (1) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-10</d><h>23:23</h><r>dgr</r><a>@U487Z32UF</a>, map unification is supported for map values, but not keys. All maps must have the same size and the same keys, otherwise unification fails. The values corresponding to equal keys are unified correctly. Thus:
<pre>(run* [q]
      (== {:a 1} {:a q}))
==&gt; (1)</pre>
<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639179096" t="markbastian Interesting. Key unification was my next step in leveling up. Appears I need to learn other ways of making it work. Thanks for the insights! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-10</d><h>23:31</h><r>markbastian</r>Interesting. Key unification was my next step in leveling up. Appears I need to learn other ways of making it work. Thanks for the insights!<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639181066" t="dgr My pleasure [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-11</d><h>00:04</h><r>dgr</r>My pleasure<div></div></z><z id="t1639236001" t="dgr BTW, thinking about this further, the behavior for sets is expected. Unification within the substructure of a collection relies on a consistent ordering or position. Core.logic can do that with maps as long as it just unifies against values and not keys. But sets, by definition, have no internal structure whatsoever. Any permutation of items in a set is equally valid. So, there&apos;s no real way to perform unification with ING the (entirely lacking) substructure. Summary: it basically has to work like this for sets. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-11</d><h>15:20</h><r>dgr</r>BTW, thinking about this further, the behavior for sets is expected. Unification within the substructure of a collection relies on a consistent ordering or position. Core.logic can do that with maps as long as it just unifies against values and not keys. But sets, by definition, have no internal structure whatsoever. Any permutation of items in a set is equally valid. So, there&apos;s no real way to perform unification with ING the (entirely lacking) substructure. Summary: it basically has to work like this for sets.<div></div></z><z id="t1638975421" t="Ben Sless Anyone ever written production rules or term rewriting with core logic? Can you share an example or approaches? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-08</d><h>14:57</h><w>Ben Sless</w>Anyone ever written production rules or term rewriting with core logic? Can you share an example or approaches?<div></div></z><z id="t1639010709" t="hiredman I have not, but I think the kind of current favored approach is using equality saturation, which solves the problem of divergence that naive rewriting can have in core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>00:45</h><r>hiredman</r>I have not, but I think the kind of current favored approach is using equality saturation, which solves the problem of divergence that naive rewriting can have in core.logic<div></div></z><z id="t1639010750" t="hiredman (rule says a = b, encounter a, rewrite to b, next step rewrites to a again, etc) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>00:45</h><r>hiredman</r>(rule says a = b, encounter a, rewrite to b,  next step rewrites to a again, etc)<div></div></z><z id="t1639010831" t="hiredman https://www.youtube.com/watch?v=LKELTEOFY-s is a nice talk about optimizing equality saturation, but it includes a nice explanation of what it is [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>00:47</h><r>hiredman</r><a href="https://www.youtube.com/watch?v=LKELTEOFY-s" target="_blank">https://www.youtube.com/watch?v=LKELTEOFY-s</a> is a nice talk about optimizing equality saturation, but it includes a nice explanation of what it is<div></div></z><z id="t1639011472" t="hiredman https://github.com/clojure-numerics/expresso does look like it uses core.logic in someway [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>00:57</h><r>hiredman</r><a href="https://github.com/clojure-numerics/expresso" target="_blank">https://github.com/clojure-numerics/expresso</a> does look like it uses core.logic in someway<div></div></z><z id="t1639025854" t="Ben Sless I had the misguided idea of trying to embed pi calculus in core.logic by embedding its production rules [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>04:57</h><r>Ben Sless</r>I had the misguided idea of trying to embed pi calculus in core.logic by embedding its production rules<div></div></z><z id="t1639026307" t="hiredman Oh, sure, a kind of interpreter? That is a common thing done for the lamda calculus with minikanren. There are extensions to minikanren for working with languages and binders, and I believe core.logic includes some of that stuff, if you look around the code base for nom but I am not very familiar with that [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>05:05</h><r>hiredman</r>Oh, sure, a kind of interpreter? That is a common thing done for the lamda calculus with minikanren. There are extensions to minikanren for working with languages and binders, and I believe core.logic includes some of that stuff, if you look around the code base for <code>nom</code> but I am not very familiar with that<div></div></z><z id="t1639026542" t="hiredman http://webyrd.net/alphamk/alphamk.pdf is the alphakanren paper and https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/nominal.clj is the core.logic version [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>05:09</h><r>hiredman</r><a href="http://webyrd.net/alphamk/alphamk.pdf" target="_blank">http://webyrd.net/alphamk/alphamk.pdf</a> is the alphakanren paper and <a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/nominal.clj" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/nominal.clj</a> is the core.logic version<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639027441" t="Ben Sless It might be better to start by just implementing regular evalo, too, if I&apos;m writing an interpreter I should cut my teeth on something I more familiar first [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-09</d><h>05:24</h><r>Ben Sless</r>It might be better to start by just implementing regular evalo, too, if I&apos;m writing an interpreter I should cut my teeth on something I more familiar first<div></div></z><z id="t1639175918" t="dgr Are you specifically looking to use core.logic, or would something like Meander fit? Meander has reasonable support for this and I’ve used it before to do transformation from a parsed Markdown representation to HTML via term rewriting and it worked quite reasonably. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-10</d><h>22:38</h><r>dgr</r>Are you specifically looking to use core.logic, or would something like Meander fit? Meander has reasonable support for this and I’ve used it before to do transformation from a parsed Markdown representation to HTML via term rewriting and it worked quite reasonably.<div></div></z><z id="t1639297416" t="Ngoc Khuat I asked the same qs a while ago, you might want to check the thread below it : https://clojurians.slack.com/archives/C0566T2QY/p1635351009001600 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>08:23</h><r>Ngoc Khuat</r>I asked the same qs a while ago, you might want to check the thread below it : <a href="https://clojurians.slack.com/archives/C0566T2QY/p1635351009001600" target="_blank">https://clojurians.slack.com/archives/C0566T2QY/p1635351009001600</a><div></div></z><z id="t1639301286" t="Ben Sless I meant production more in terms of simplification grammars 🙃 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>09:28</h><r>Ben Sless</r>I meant production more in terms of simplification grammars <b>🙃</b><div></div></z><z id="t1639309548" t="Quentin Le Guennec I&apos;m looking for core.logic guides with real life examples (eg, math questions), does anyone know something that could help? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>11:45</h><w>Quentin Le Guennec</w>I&apos;m looking for core.logic guides with real life examples (eg, math questions), does anyone know something that could help?<div></div></z><z id="t1639310170" t="Ben Sless I&apos;d probably start here https://www.youtube.com/watch?v=iCuVTGWNU3s [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>11:56</h><r>Ben Sless</r>I&apos;d probably start here <a href="https://www.youtube.com/watch?v=iCuVTGWNU3s" target="_blank">https://www.youtube.com/watch?v=iCuVTGWNU3s</a><div></div></z><z id="t1639316934" t="Quentin Le Guennec Thank you, I will ask questions in that channel if that&apos;s ok [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>13:48</h><r>Quentin Le Guennec</r>Thank you, I will ask questions in that channel if that&apos;s ok<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639316987" t="Quentin Le Guennec Is there a difference between (let [x (lvar)] goals... and (fresh [x] goals...) , when no x has been introduced in the run* expression before? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>13:49</h><w>Quentin Le Guennec</w>Is there a difference between <code>(let [x (lvar)] goals...</code> and <code>(fresh [x] goals...)</code> , when no x has been introduced in the <code>run*</code> expression before?<div></div></z><z id="t1639325069" t="dgr Yes, there is a difference. Fresh is a goal constructor (I.e. returns a function that takes a substitution/state and returns a stream of answers). A let form is not a goal constructor by itself. You would have to wrap the goals in a conjunction goal. In other words, it&apos;s close but not identical. I&apos;m not close to the source at the moment, but you can macro expand fresh and see what&apos;s underneath. In microkanren, which is not core.logic, fresh basically maps to a call to a lambda where the parameter is a newly created lvar and the function is a goal constructor that returns a goal that is a conjunction of the goals in the fresh. I highly encourage you to read through the microkanren paper (see the papers section of http://minikanren.org . It&apos;s less than a page of source for the whole implementation and it will really help you understand what&apos;s happening under the hood. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>16:04</h><r>dgr</r>Yes, there is a difference. Fresh is a goal constructor (I.e. returns a function that takes a substitution/state and returns a stream of answers). A let form is not a goal constructor by itself. You would have to wrap the goals in a conjunction goal. In other words, it&apos;s close but not identical. I&apos;m not close to the source at the moment, but you can macro expand fresh and see what&apos;s underneath. In microkanren, which is not core.logic, fresh basically maps to a call to a lambda where the parameter is a newly created lvar and the function is a goal constructor that returns a goal that is a conjunction of the goals in the fresh. I highly encourage you to read through the microkanren paper (see the papers section of <a href="http://minikanren.org" target="_blank">http://minikanren.org</a>. It&apos;s less than a page of source for the whole implementation and it will really help you understand what&apos;s happening under the hood.<div></div></z><z id="t1639326692" t="Quentin Le Guennec I see, thank you, it helped a lot. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>16:31</h><r>Quentin Le Guennec</r>I see, thank you, it helped a lot.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639323962" t="Quentin Le Guennec Why doesn&apos;t this output [:c :f] ? (do (db-rel signal input output) (db [signal [:a :b :c :e :f] 0] [signal [:c :f] 1] [signal [:a :c :d :e :g] 2] [signal [:a :c :d :f :g] 3] [signal [:b :c :d :f] 4] [signal [:a :b :d :f :g] 5] [signal [:a :b :d :e :f :g] 6] [signal [:a :c :f] 7] [signal [:a :b :c :d :e :f :g] 8] [signal [:a :b :c :d :f :g] 9]) (run* [q] (fresh [a b] (signal [a b] 1) (== q [a b])))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>15:46</h><w>Quentin Le Guennec</w>Why doesn&apos;t this output <code>[:c :f]</code>?
<pre>(do
    (db-rel signal input output)
    (db
     [signal [:a :b :c :e :f] 0]
     [signal [:c :f] 1]
     [signal [:a :c :d :e :g] 2]
     [signal [:a :c :d :f :g] 3]
     [signal [:b :c :d :f] 4]
     [signal [:a :b :d :f :g] 5]
     [signal [:a :b :d :e :f :g] 6]
     [signal [:a :c :f] 7]
     [signal [:a :b :c :d :e :f :g] 8]
     [signal [:a :b :c :d :f :g] 9])
    (run* [q]
      (fresh [a b]
        (signal [a b] 1)
        (== q [a b]))))</pre><div></div></z><z id="t1639324393" t="Quentin Le Guennec Got it, I forgot with-db [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>15:53</h><r>Quentin Le Guennec</r>Got it, I forgot <code>with-db</code><div></div></z><z id="t1639328631" t="Quentin Le Guennec Will two lvars defined like this: (lvar :a true) will be the same? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>17:03</h><w>Quentin Le Guennec</w>Will two lvars defined like this: <code>(lvar :a true)</code> will be the same?<div></div></z><z id="t1639334469" t="dgr The REPL is your friend: clojure.core.logic&gt; (identical? (lvar :a true) (lvar :a true)) false clojure.core.logic&gt; (= (lvar :a true) (lvar :a true)) false So, no. They are not the same and won’t compare as the same. You can see this in the printed representation: clojure.core.logic&gt; (lvar :a true) &lt;lvar::a__4588&gt; clojure.core.logic&gt; (lvar :a true) &lt;lvar::a__4591&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>18:41</h><r>dgr</r>The REPL is your friend:
<pre>clojure.core.logic&gt; (identical? (lvar :a true) (lvar :a true))
false
clojure.core.logic&gt; (= (lvar :a true) (lvar :a true))
false</pre>
So, no. They are not the same and won’t compare as the same. You can see this in the printed representation:
<pre>clojure.core.logic&gt; (lvar :a true)
&lt;lvar::a__4588&gt;
clojure.core.logic&gt; (lvar :a true)
&lt;lvar::a__4591&gt;</pre>
<div></div></z><z id="t1639334654" t="dgr If you look at the source, around line 714 you can see most of the creation paths use a unique counter to instantiate the lvar. You can force them to compare as equal using the false flag: clojure.core.logic&gt; (= (lvar :a false) (lvar :a false)) true clojure.core.logic&gt; (lvar :a false) &lt;lvar::a&gt; clojure.core.logic&gt; (lvar :a false) &lt;lvar::a&gt; [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>18:44</h><r>dgr</r>If you look at the source, around line 714 you can see most of the creation paths use a unique counter to instantiate the lvar. You can force them to compare as equal using the <code>false</code> flag:
<pre>clojure.core.logic&gt; (= (lvar :a false) (lvar :a false))
true
clojure.core.logic&gt; (lvar :a false)
&lt;lvar::a&gt;
clojure.core.logic&gt; (lvar :a false)
&lt;lvar::a&gt;</pre><div></div></z><z id="t1639336868" t="Quentin Le Guennec I see, very helpful thank you. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>19:21</h><r>Quentin Le Guennec</r>I see, very helpful thank you.<div></div></z><z id="t1639339834" t="Quentin Le Guennec Is it safe to assume that run* returning &apos;() means a contradiction in the goals? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>20:10</h><w>Quentin Le Guennec</w>Is it safe to assume that <code>run*</code> returning <code>&apos;()</code> means a contradiction in the goals?<div></div></z><z id="t1639339906" t="Ben Sless I think so. It means there is no substitution which meets the goals [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>20:11</h><r>Ben Sless</r>I think so. It means there is no substitution which meets the goals<div></div></z><z id="t1639339938" t="Quentin Le Guennec Okay, thank you [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>20:12</h><r>Quentin Le Guennec</r>Okay, thank you<div></div></z><z id="t1639341400" t="Quentin Le Guennec I&apos;m getting a stack overflow error with run* : (StackOverflowError) at clojure.core.logic.Substitutions/walk (logic.clj:359) Does that mean my constraint set is too broad? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>20:36</h><w>Quentin Le Guennec</w>I&apos;m getting a stack overflow error with <code>run*</code>:
<pre>(StackOverflowError) at clojure.core.logic.Substitutions/walk (logic.clj:359)</pre>
Does that mean my constraint set is too broad?<div></div></z><z id="t1639343237" t="Quentin Le Guennec Oh nevermind, sets aren&apos;t supported. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-12</d><h>21:07</h><r>Quentin Le Guennec</r>Oh nevermind, sets aren&apos;t supported.<div></div></z><z id="t1639428115" t="Quentin Le Guennec I&apos;m getting unexpected results from a core.logic expression: (let [input (mapv (partial mapv #(lvar % false)) &apos;((0 1) (0 1 2 3 4 5 6) (0 1 2 3 4 5) (0 1 2 3 4 5) (0 1 2 3) (0 1 2 3 4) (0 1 2 3 4 5) (0 1 2 3 4) (0 1 2 3 4) (0 1 2))) model [[:a :b :c :e :f :g] [:c :f] [:a :c :d :e :g] [:a :c :d :f :g] [:b :c :d :f] [:a :b :d :f :g] [:a :b :d :e :f :g] [:a :c :f] [:a :b :c :d :e :f :g] [:a :b :c :d :f :g]]] (-&gt;&gt; (run* [q] (everyg (fn [s] (membero s model)) input) (== q input)) )) I would like to solve: &quot;For all values from 0 to 9 in input , what is the corresponding value from :a to :f ?&quot; (e.g: (0 1) can only map to [:c :f] because it is the only length 2 collection.) Is that what I&apos;m expressing as goals in run* ? Or am I expressing something else? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>20:41</h><w>Quentin Le Guennec</w>I&apos;m getting unexpected results from a core.logic expression:
<pre>(let [input  (mapv (partial mapv #(lvar % false))
                   &apos;((0 1)
                     (0 1 2 3 4 5 6)
                     (0 1 2 3 4 5)
                     (0 1 2 3 4 5)
                     (0 1 2 3)
                     (0 1 2 3 4)
                     (0 1 2 3 4 5)
                     (0 1 2 3 4)
                     (0 1 2 3 4)
                     (0 1 2)))
      model [[:a :b :c :e :f :g]
             [:c :f]
             [:a :c :d :e :g]
             [:a :c :d :f :g]
             [:b :c :d :f]
             [:a :b :d :f :g]
             [:a :b :d :e :f :g]
             [:a :c :f]
             [:a :b :c :d :e :f :g]
             [:a :b :c :d :f :g]]]
  (-&gt;&gt; (run* [q]
         (everyg (fn [s] (membero s model)) input)
         (== q input)) ))</pre>
I would like to solve:
&quot;For all values from 0 to 9 in <code>input</code> , what is the corresponding value from <code>:a</code>to <code>:f</code> ?&quot; (e.g: <code>(0 1)</code> can only map to <code>[:c :f]</code> because it is the only length 2 collection.)

Is that what I&apos;m expressing as goals in <code>run*</code>? Or am I expressing something else?<div></div></z><z id="t1639432703" t="hiredman its not a great problem for logic/relational programming, things defined in terms of counting are tricky [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:58</h><w>hiredman</w>its not a great problem for logic/relational programming, things defined in terms of counting are tricky<div></div></z><z id="t1639432764" t="Quentin Le Guennec Are you sure? I think I&apos;m pretty much using logic programming when I&apos;m trying to solve it myself [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:59</h><r>Quentin Le Guennec</r>Are you sure? I think I&apos;m pretty much using logic programming when I&apos;m trying to solve it myself<div></div></z><z id="t1639432777" t="hiredman yes [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:59</h><r>hiredman</r>yes<div></div></z><z id="t1639432793" t="Quentin Le Guennec what do you mean by counting exactly though? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:59</h><r>Quentin Le Guennec</r>what do you mean by counting exactly though?<div></div></z><z id="t1639432844" t="hiredman you are defining the correspondence relation based on the count (the size, the length) of collections [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:00</h><r>hiredman</r>you are defining the correspondence relation based on the count (the size, the length) of collections<div></div></z><z id="t1639432861" t="Quentin Le Guennec Oh yeah [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:01</h><r>Quentin Le Guennec</r>Oh yeah<div></div></z><z id="t1639432900" t="Quentin Le Guennec Isn&apos;t it supposed to work with permuteo though? I updated it: (run* [q] (everyg (fn [s] (or* (map (partial permuteo s) model))) input) (== q input)) But still unsuccessful [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:01</h><r>Quentin Le Guennec</r>Isn&apos;t it supposed to work with <code>permuteo</code> though? I updated it:
<pre>(run* [q]
         (everyg (fn [s]
                   (or*
                    (map (partial permuteo s)
                         model)))
                 input)
         (== q input))</pre>
But still unsuccessful<div></div></z><z id="t1639432920" t="Quentin Le Guennec I guess I&apos;ll try something else [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:02</h><r>Quentin Le Guennec</r>I guess I&apos;ll try something else<div></div></z><z id="t1639432765" t="hiredman if you define it in some way that isn&apos;t based on counting it will go much better [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:59</h><w>hiredman</w>if you define it in some way that isn&apos;t based on counting it will go much better<div></div></z><z id="t1639432796" t="hiredman like say, all rows are the same length, but have some pattern of true, false [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>21:59</h><w>hiredman</w>like say, all rows are the same length, but have some pattern of true, false<div></div></z><z id="t1639432965" t="hiredman so if you replace all you vectors of letters with things like [false false true false false true false] which would correspond to [:c :f] because those positions are true [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:02</h><w>hiredman</w>so if you replace all you vectors of letters with things like <code>[false false true false false true false]</code>  which would correspond to <code>[:c :f]</code> because those positions are true<div></div></z><z id="t1639433006" t="Quentin Le Guennec I see [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:03</h><w>Quentin Le Guennec</w>I see<div></div></z><z id="t1639433014" t="hiredman input in your example is just kind of bogus [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:03</h><w>hiredman</w>input in your example is just kind of bogus<div></div></z><z id="t1639433032" t="hiredman I am not sure even what you are trying to do with it [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:03</h><w>hiredman</w>I am not sure even what you are trying to do with it<div></div></z><z id="t1639433056" t="hiredman there are reasons to call the lvar constructor with arguments, but basically you never need to [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:04</h><w>hiredman</w>there are reasons to call the lvar constructor with arguments, but basically you never need to<div></div></z><z id="t1639433142" t="Quentin Le Guennec Well [0 1] =&gt; [:c :f] , [0 1 2 3] =&gt; [:b :c :d :f] (permutable), because they uniquely got the same length. The rest should follow with the the numbers mapped to the letters. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:05</h><w>Quentin Le Guennec</w>Well <code>[0 1]</code> =&gt; <code>[:c :f]</code>, <code>[0 1 2 3]</code> =&gt; <code>[:b :c :d :f]</code> (permutable), because they uniquely got the same length. The rest should follow with the the numbers mapped to the letters.<div></div></z><z id="t1639433169" t="Quentin Le Guennec Because 0 should be the same across all the input [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:06</h><w>Quentin Le Guennec</w>Because 0 should be the same across all the input<div></div></z><z id="t1639433201" t="Quentin Le Guennec 0 in the first element of input should be the same than in the second [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:06</h><w>Quentin Le Guennec</w>0 in the first element of input should be the same than in the second<div></div></z><z id="t1639433392" t="Quentin Le Guennec So from [0 1]  =&gt; `[:c :f]` , we can deduce that (or (and 0 =&gt; c, 1=&gt; f) (and 0 =&gt; f, 1 =&gt; c) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:09</h><w>Quentin Le Guennec</w>So from <code>[0 1]</code> =&gt; `[:c :f]` , we can deduce that (or (and 0 =&gt; c, 1=&gt; f) (and 0 =&gt; f, 1 =&gt; c)<div></div></z><z id="t1639433398" t="hiredman thats not how it works though, like, you are saying the vars are members of the lists, 2 vars can be members of 3 element list just as easy as they can be members of a 2 element list [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:09</h><w>hiredman</w>thats not how it works though, like, you are saying the vars are members of the lists, 2  vars can be members of 3 element list just as easy as they can be members of a 2 element list<div></div></z><z id="t1639433408" t="hiredman and you have no kind of unique constraints [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:10</h><w>hiredman</w>and you have no kind of unique constraints<div></div></z><z id="t1639433469" t="hiredman so 2 vars can be members of a 1 element list easily as well [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:11</h><w>hiredman</w>so 2 vars can be members of a 1 element list easily as well<div></div></z><z id="t1639433492" t="Quentin Le Guennec I&apos;m not sure I understand [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:11</h><w>Quentin Le Guennec</w>I&apos;m not sure I understand<div></div></z><z id="t1639433506" t="hiredman if X and Y are members of L [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:11</h><w>hiredman</w>if X and Y are members of L<div></div></z><z id="t1639433525" t="hiredman if L is just (1) then X a and Y, absent other constraints, are both 1 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:12</h><w>hiredman</w>if L is just (1) then X a and Y, absent other constraints, are both 1<div></div></z><z id="t1639433555" t="Quentin Le Guennec Oh, that makes sense. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:12</h><w>Quentin Le Guennec</w>Oh, that makes sense.<div></div></z><z id="t1639433682" t="Quentin Le Guennec I think that&apos;s why I&apos;m getting some kind of factorial of all possibilities as a result [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:14</h><w>Quentin Le Guennec</w>I think that&apos;s why I&apos;m getting some kind of factorial of all possibilities as a result<div></div></z><z id="t1639433783" t="hiredman but even then, if you can, it is best to avoid membero, because membero is at best a linear search in a list, so combinatorial is bad [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:16</h><w>hiredman</w>but even then, if you can, it is best to avoid membero, because membero is at best a linear search in a list, so combinatorial  is bad<div></div></z><z id="t1639433874" t="Quentin Le Guennec I think that linear search is pretty much required by the problem itself [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:17</h><w>Quentin Le Guennec</w>I think that linear search is pretty much required by the problem itself<div></div></z><z id="t1639433937" t="hiredman maybe, hard to tell from the code and description given [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:18</h><w>hiredman</w>maybe, hard to tell from the code and description given<div></div></z><z id="t1639433990" t="hiredman there is search through the space of all possibilities, then there is search through data structures for the right things to unify [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:19</h><w>hiredman</w>there is search through the space of all possibilities, then there is search through data structures for the right things to unify<div></div></z><z id="t1639434010" t="Quentin Le Guennec I see. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:20</h><w>Quentin Le Guennec</w>I see.<div></div></z><z id="t1639434341" t="hiredman like, the code you shared has no branching of the search tree, other then the recursive cases for membero [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:25</h><w>hiredman</w>like, the code you shared has no branching of the search tree, other then the recursive cases for membero<div></div></z><z id="t1639434394" t="hiredman so outside the is this lvar the first, the second, the third, ..., etc member of this list, there are no branches [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:26</h><w>hiredman</w>so outside the is this lvar the first, the second, the third, ..., etc member of this list, there are no branches<div></div></z><z id="t1639434422" t="hiredman so its not like it is considering all the model or inputs as different searches or something [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:27</h><w>hiredman</w>so its not like it is considering all the model or inputs as different searches or something<div></div></z><z id="t1639434738" t="Quentin Le Guennec Do you think I should give up on core.logic? It&apos;s an advent of code exercise and I thought it was a nice way to learn core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:32</h><w>Quentin Le Guennec</w>Do you think I should give up on core.logic? It&apos;s an advent of code exercise and I thought it was a nice way to learn core.logic<div></div></z><z id="t1639434887" t="hiredman I dunno, there is definitely a significant hump to get over [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:34</h><w>hiredman</w>I dunno, there is definitely a significant hump to get over<div></div></z><z id="t1639434936" t="hiredman core.logic is kind of a bare bones logic programming environment, so figuring out how to represent problems in a way that works can be tricky [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:35</h><w>hiredman</w>core.logic is kind of a bare bones logic programming environment, so figuring out how to represent problems in a way that works can be tricky<div></div></z><z id="t1639434974" t="Quentin Le Guennec I see [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:36</h><w>Quentin Le Guennec</w>I see<div></div></z><z id="t1639435024" t="hiredman and because core.logic is a dsl embedded in clojure, often the way to do things is with clojure as a meta/macro language for constructing core.logic programs, which is also tricky to get the hang of sometimes (see all the troubles people get into learning macros) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:37</h><w>hiredman</w>and because core.logic is a dsl embedded in clojure, often the way to do things is with clojure as a meta/macro language for constructing core.logic programs, which is also tricky to get the hang of sometimes (see all the troubles people get into learning macros)<div></div></z><z id="t1639435150" t="hiredman my understanding of logic programming comes in large part from sitting down with the minikanren paper and implementing it in go, and then writing solvers for a bunch of logic riddles in it as tests, not from working with core.logic a lot [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-13</d><h>22:39</h><w>hiredman</w>my understanding of logic programming comes in large part from sitting down with the minikanren paper and implementing it in go, and then writing solvers for a bunch of logic riddles in it as tests, not from working with core.logic a lot<div></div></z><z id="t1639464455" t="norman Hmmm - yeah you ought to be able to do some part of day8 in core.logic. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-14</d><h>06:47</h><w>norman</w>Hmmm - yeah you ought to be able to do some part of day8 in core.logic. <div></div></z><z id="t1639464502" t="norman Though it seems like a very difficult challenge to start learning on [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-14</d><h>06:48</h><w>norman</w>Though it seems like a very difficult challenge to start learning on<div></div></z><z id="t1639464602" t="norman If you are looking for some smaller core.logic examples, you might find some inspiration in https://www.slideshare.net/normanrichards/corelogic-introduction [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-14</d><h>06:50</h><w>norman</w>If you are looking for some smaller core.logic examples, you might find some inspiration in <a href="https://www.slideshare.net/normanrichards/corelogic-introduction" target="_blank">https://www.slideshare.net/normanrichards/corelogic-introduction</a><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 1&quot;)}</div></z><z id="t1639464650" t="norman This is quite old, but core.logic hasn&apos;t changed all that much since [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-14</d><h>06:50</h><w>norman</w>This is quite old, but core.logic hasn&apos;t changed all that much since<div></div></z><z id="t1639466726" t="Quentin Le Guennec [:attrs {:href &quot;/_/_/users/U0954HGDQ&quot;}] Thank you. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2021-12-14</d><h>07:25</h><w>Quentin Le Guennec</w><a>@norman</a> Thank you.<div></div></z><z id="t1640852641" t="Swapneil I was wondering, are there any more expansive logic-programming libraries in clojure than core.logic? Precept seems to be more a Datalog-like (both are missing things like CLP-FD), and Clara-rules &amp; the new O&apos;Doyle are rules-engines rather than full logic-programming environments. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-30</d><h>08:24</h><w>Swapneil</w>I was wondering, are there any more expansive logic-programming libraries in clojure than core.logic? Precept seems to be more a Datalog-like (both are missing things like CLP-FD), and Clara-rules &amp; the new O&apos;Doyle are rules-engines rather than full logic-programming environments.<div></div></z><z id="t1641241279" t="Cale Pennington is there any version of the core.logic.fd operations (perhaps in another library?) that supports negative domain values? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-03</d><h>20:21</h><w>Cale Pennington</w>is there any version of the core.logic.fd operations (perhaps in another library?) that supports negative domain values?<div></div></z><z id="t1641245016" t="Swapneil I&apos;ve looked into Clojure logic programming the past few weeks and haven&apos;t found anything. Most non-core.logic libraries I&apos;ve seen are rules engines for in-memory databases, not full logic-programming systems, and one of the original core.logic maintainers said at https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values that they had no intention of extending the library itself to negatives or reals. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-03</d><h>21:23</h><r>Swapneil</r>I&apos;ve looked into Clojure logic programming the past few weeks and haven&apos;t found anything. Most non-core.logic libraries I&apos;ve seen are rules engines for in-memory databases, not full logic-programming systems, and one of the original core.logic maintainers said at <a href="https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values" target="_blank">https://stackoverflow.com/questions/13195493/core-logic-finite-domain-with-ve-values</a> that they had no intention of extending the library itself to negatives or reals.<div></div></z><z id="t1641302359" t="Stefan [:attrs {:href &quot;/_/_/users/U02QCB2FHU6&quot;}] I recently saw this: https://www.youtube.com/watch?v=_8z1r8KV9uk . Maybe worth checking out. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-04</d><h>13:19</h><w>Stefan</w><a>@ss2961</a> I recently saw this: <a href="https://www.youtube.com/watch?v=_8z1r8KV9uk" target="_blank">https://www.youtube.com/watch?v=_8z1r8KV9uk</a>. Maybe worth checking out.<div></div></z><z id="t1643043068" t="Adrian Sci I am writing a function to remove a list of elements from another list. So given a list of elements to be removed [a c] and the list to remove it from [c b d a e] I want to run rembero twice on the list and have it return [b d e]. I have written a pretty messy recursion and it seems to work. However when I am scaling up the rest of my program I start to get a stack overflow and I think this recursion could be one of the pain points. Does anyone have any advice on a better way of doing this? ;;recursion to remove a list of inputs from the world state (defn rembero-all [lst state temp] (conde [(== lst ()) (== state temp)] [(fresh [fst rst rectemp] (conso fst rst lst) (rembero fst state temp) (rembero-all rst temp rectemp))])) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-24</d><h>16:51</h><w>Adrian Sci</w>I am writing a function to remove a list of elements from another list. So given a list of elements to be removed [a c] and the list to remove it from [c b d a e] I want to run rembero twice on the list and have it return [b d e]. I have written a pretty messy recursion and it seems to work. However when I am scaling up the rest of my program I start to get a stack overflow and I think this recursion could be one of the pain points. Does anyone have any advice on a better way of doing this?

<pre>;;recursion to remove a list of inputs from the world state
(defn rembero-all [lst state temp]
    (conde
    [(== lst ())
     (== state temp)]
    [(fresh [fst rst rectemp]
        (conso fst rst lst)
        (rembero fst state temp)
        (rembero-all rst temp rectemp))]))</pre><div></div></z><z id="t1643053131" t="paulocuneo Hi! I would write something like this (dunno if this impl is correct 😆 ), not for performance but in my opinion is more readable. Be ware that pattern matching (matche defne ) shadows local variable names. ;;modified from rembero implementation (defne rembero-all &quot;relation where `o` is the result of removing all occurrences of `x` from `l`&quot; [x l o] ([_ [] []]) ([_ [y] []] ;; edited (== x y)) ([_ [y . ys] [z . zs]] ;; edited (== x y) (!= x z) (rembero-all x ys o)) ([_ [y . ys] [y . zs]] (!= y x) (rembero-all x ys zs))) (defne rembero-many &quot;relation where `o` is result of removing all items `xs` from `l`&quot; [xxs l o] ([_ [] []]) ([[] ys ys]) ([[x . xs] _ _] (fresh [l&apos;] (rembero-all x l l&apos;) (rembero-many xs l&apos; o)))) (run 1 [q] (rembero-many [1 2 3] [1 4 2 5 3 7 1 8 2 9 3] q)) Sorry, I can&apos;t help with performance 😅 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-01-24</d><h>19:38</h><r>paulocuneo</r>Hi! I would write something like this  (dunno if this impl is correct <b>😆</b>), not for performance but in my opinion is more readable.
Be ware that pattern matching (matche defne ) shadows local variable names.

<pre>;;modified from rembero implementation
(defne rembero-all
  &quot;relation where `o` is the result of removing all occurrences of `x` from `l`&quot;
  [x l o]
  ([_ [] []])
  ([_ [y] []] ;; edited
   (== x y))
  ([_ [y . ys] [z . zs]] ;; edited
   (== x y)
   (!= x z)
   (rembero-all x ys o))
  ([_ [y . ys] [y . zs]]
   (!= y x)
   (rembero-all x ys zs)))

(defne rembero-many
  &quot;relation where `o` is result of removing all items `xs` from `l`&quot;
 [xxs l o]
 ([_  [] []])
 ([[] ys ys])
 ([[x . xs]  _ _]
  (fresh [l&apos;]
    (rembero-all x l l&apos;)
    (rembero-many xs l&apos; o))))

(run 1 [q]
  (rembero-many [1 2 3] [1 4 2 5 3 7 1 8 2 9 3] q))</pre>
Sorry, I can&apos;t help with performance <b>😅</b><div></div></z><z id="t1647093710" t="Martynas M Hey. Is there a way to do a square root when using a finite domain lvar? It can be lossful but it&apos;s fine. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-12</d><h>14:01</h><w>Martynas M</w>Hey. Is there a way to do a square root when using a finite domain lvar?
It can be lossful but it&apos;s fine.<div></div></z><z id="t1647096565" t="Martynas M I think that finding data for a specific standard deviation is not the best problem for the solver. But maybe I&apos;m just mistaken. I get this as one of my errors and it doesn&apos;t get more understandable from here... Error printing return value (StackOverflowError) at clojure.lang.Numbers/hasheq (Numbers.java:1129). Probably the search space is too deep... [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-12</d><h>14:49</h><w>Martynas M</w>I think that finding  data for a specific standard deviation is not the best problem for the solver. But maybe I&apos;m just mistaken.
I get this as one of my errors and it doesn&apos;t get more understandable from here...

<code>Error printing return value (StackOverflowError) at clojure.lang.Numbers/hasheq (Numbers.java:1129).</code>
Probably the search space is too deep...<div></div></z><z id="t1647097346" t="krukow 👋 I’m new to logic programming and am looking solve a constraint problem that is think is best modeled as a finite domain. • Given a set of mentors and mentees • Each mentee can have a list of mentor preferences • I want to find all solutions to matching mentees with their mentor preferences. • Each mentor can only be a mentor for one mentee My thinking was to look at this as a finite domain (translating names to numbers) and using a lvar for each mentor. By using (fd/distinct (vec lmentors)) I was hoping to solve for “each mentor only gets to have a single mentee”. Problem: As the number of lvars becomes large (say ~40) then running (fd/distinct (vec lmentors)) is very slow. If I remove this constraint the program finds solutions immediately. Are there ways to optimize this or just program this smarter? core logic: (let [lmentors (repeatedly (count mentees) lvar) ;; one lvar for each mentee to match solutions (pldb/with-db db ;; db pre populated with mentee, mentor and preferences relations (run 1 [q] (== q (vec ;; q is [[mentee1 lvar-mentor2] [mentee2 lvar-mentor2] ... ] (map vector (keys mentees) lmentors))) (everyg #(fd/in % mentor-domain) lmentors) (fd/distinct (vec lmentors)) (and* (map (fn [tee tor] (fresh [tors] (mentee tee) (mentor tor) (preferences tee tors) (membero tor tors))) (keys mentees) lmentors))))] (map keyword-solution solutions)) Full sample (seems to work at small scale) https://gist.github.com/krukow/9ab5a708458e4d3d758032b081a5707a [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-12</d><h>15:02</h><w>krukow</w><b>👋</b> I’m new to logic programming and am looking solve a constraint problem that is think is best modeled as a finite domain.

• Given a set of mentors and mentees
• Each mentee can have a list of mentor preferences
• I want to find all solutions to matching mentees with their mentor preferences.
• Each mentor can only be a mentor for one mentee
My thinking was to look at this as a finite domain (translating names to numbers) and using a <code>lvar</code>for each mentor.
By using <code>(fd/distinct (vec lmentors))</code> I was  hoping to solve for “each mentor only gets to have a single mentee”.

Problem: As the number of lvars becomes large (say ~40) then running <code>(fd/distinct (vec lmentors))</code> is very slow. If I remove this constraint the program finds solutions immediately.

Are there ways to optimize this or just program this smarter?

core logic:

<pre>(let [lmentors (repeatedly (count mentees) lvar) ;; one lvar for each mentee to match
      solutions (pldb/with-db db ;; db pre populated with mentee, mentor and preferences relations
                  (run 1 [q]
                    (== q (vec ;; q is [[mentee1 lvar-mentor2] [mentee2 lvar-mentor2] ... ] 
                           (map vector (keys mentees) lmentors)))
                    (everyg #(fd/in % mentor-domain) lmentors)
                    (fd/distinct (vec lmentors))
                    (and*
                     (map
                      (fn [tee tor]
                        (fresh [tors]
                          (mentee tee)
                          (mentor tor)
                          (preferences tee tors)
                          (membero tor tors)))
                      (keys mentees)
                      lmentors))))]


  (map keyword-solution solutions))</pre>
Full sample (seems to work at small scale)
<a href="https://gist.github.com/krukow/9ab5a708458e4d3d758032b081a5707a" target="_blank">https://gist.github.com/krukow/9ab5a708458e4d3d758032b081a5707a</a><div></div></z><z id="t1647113243" t="hiredman core.logic is pretty bad at doing set stuff, needs clp(set) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-12</d><h>19:27</h><w>hiredman</w>core.logic is pretty bad at doing set stuff, needs clp(set)<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;white_check_mark&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;✅&quot;)} &quot; 2&quot;)}</div></z><z id="t1647156457" t="Martynas M Also I tried to use finite domain to calculate a dataset for given standard deviation. But I wasn&apos;t successful. 😄 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-13</d><h>07:27</h><w>Martynas M</w>Also I tried to use finite domain to calculate a dataset for given standard deviation. But I wasn&apos;t successful. <b>😄</b><div></div></z><z id="t1647671331" t="Martynas M Can core.logic run on GPU? I think it can&apos;t. https://github.com/clojure/core.logic/search?q=gpu&amp;amp;type=wikis [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-19</d><h>06:28</h><w>Martynas M</w>Can core.logic run on GPU? I think it can&apos;t.

<a href="https://github.com/clojure/core.logic/search?q=gpu&amp;amp;type=wikis" target="_blank">https://github.com/clojure/core.logic/search?q=gpu&amp;amp;type=wikis</a><div></div></z><z id="t1647817334" t="jimmy It cannot. If you want to see some work in that direction you can check about this paper. (It is about micro-kanren, core.logic is based on mini-kanren). Logic programming on GPUs is very much a research project though http://minikanren.org/workshop/2020/minikanren-2020-paper3.pdf [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-20</d><h>23:02</h><w>jimmy</w>It cannot. If you want to see some work in that direction you can check about this paper. (It is about micro-kanren, core.logic is based on mini-kanren). Logic programming on GPUs is very much a research project though <a href="http://minikanren.org/workshop/2020/minikanren-2020-paper3.pdf" target="_blank">http://minikanren.org/workshop/2020/minikanren-2020-paper3.pdf</a><div></div></z><z id="t1648278047" t="kraf did anybody work through the second edition of the reasoned schemer with core.logic? from reading the preface it seems that they changed quite lot in 2018. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-03-26</d><h>07:00</h><w>kraf</w>did anybody work through the second edition of the reasoned schemer with core.logic? from reading the preface it seems that they changed quite lot in 2018.<div></div></z><z id="t1650441440" t="wontheone1 Book is named Reasoned &quot;Schemer&quot; but actually use &quot;Clojure&quot;? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-20</d><h>07:57</h><r>wontheone1</r>Book is named <code>Reasoned &quot;Schemer&quot;</code>  but actually use &quot;Clojure&quot;?<div></div></z><z id="t1650212595" t="camdez Hi all, I want to create a relation that models the relationship between keywords and their namespace / name components. Am I on the right track here? Is there a better way? (defn keywordo5 [kw ns nm] (logic/conde [(logic/pred ns (some-fn string? nil?)) (logic/pred nm string?) (logic/project [ns nm] (logic/== kw (keyword ns nm)))] [(logic/pred kw keyword?) (logic/is ns kw namespace) (logic/is nm kw name)])) ;; uglier but avoids repeated calls to `logic/project` (defn keywordo6 [kw ns nm] (logic/or* [(logic/project [ns nm] (if (and (or (string? ns) (nil? ns)) (string? nm)) (logic/== kw (keyword ns nm)) logic/fail)) (logic/project [kw] (if (keyword? kw) (logic/== [ns nm] [(namespace kw) (name kw)]) logic/fail))])) (logic/run* [q] (keywordo6 q nil &quot;bar&quot;)) ;; =&gt; (:bar) (logic/run* [q] (keywordo6 q &quot;foo&quot; &quot;bar&quot;)) ;; =&gt; (:foo/bar) (logic/run* [q] (keywordo6 :foo/bar q &quot;bar&quot;)) ;; =&gt; (&quot;foo&quot;) Is it reasonable to consider this a relation (despite dipping into the non-relational bits of core.logic), or are there ways of using this where I might run into trouble (as distinct from code which avoids all non-relational bits)? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-17</d><h>16:23</h><w>camdez</w>Hi all,

I want to create a relation that models the relationship between keywords and their namespace / name components.  Am I on the right track here?  Is there a better way?

<pre>(defn keywordo5 [kw ns nm]
  (logic/conde
   [(logic/pred ns (some-fn string? nil?))
    (logic/pred nm string?)
    (logic/project [ns nm]
                   (logic/== kw (keyword ns nm)))]
   [(logic/pred kw keyword?)
    (logic/is ns kw namespace)
    (logic/is nm kw name)]))

;; uglier but avoids repeated calls to `logic/project`
(defn keywordo6 [kw ns nm]
  (logic/or*
   [(logic/project [ns nm]
                   (if (and (or (string? ns) (nil? ns)) (string? nm))
                     (logic/== kw (keyword ns nm))
                     logic/fail))
    (logic/project [kw]
                   (if (keyword? kw)
                     (logic/== [ns nm] [(namespace kw) (name kw)])
                     logic/fail))]))

(logic/run* [q]
  (keywordo6 q nil &quot;bar&quot;))
;; =&gt; (:bar)

(logic/run* [q]
  (keywordo6 q &quot;foo&quot; &quot;bar&quot;))
;; =&gt; (:foo/bar)

(logic/run* [q]
  (keywordo6 :foo/bar q &quot;bar&quot;))
;; =&gt; (&quot;foo&quot;)</pre>
Is it reasonable to consider this a relation (despite dipping into the non-relational bits of core.logic), or are there ways of using this where I might run into trouble (as distinct from code which avoids all non-relational bits)?<div></div></z><z id="t1650441544" t="wontheone1 Hello!! I know there are conso conjo but didn&apos;t find concato . I basically need relational version of concat . Was there no built in function for this in core.logic ? that&apos;s weird. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-20</d><h>07:59</h><w>wontheone1</w>Hello!!  I know there are <code>conso</code> <code>conjo</code> but didn&apos;t find <code>concato</code> . I basically need relational version of <code>concat</code> . Was there no built in function for this in <code>core.logic</code>? that&apos;s weird.<div></div></z><z id="t1650441659" t="wontheone1 Ah, just found out it is called appendo . https://clojuredocs.org/clojure.core.logic/appendo Nevermind 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-20</d><h>08:00</h><r>wontheone1</r>Ah, just found out it is called <code>appendo</code>.

<a href="https://clojuredocs.org/clojure.core.logic/appendo" target="_blank">https://clojuredocs.org/clojure.core.logic/appendo</a>

Nevermind <b>🙂</b><div></div></z><z id="t1651084983" t="wontheone1 Hello! is there a negative of membero ? like it succeeds when x is not a member of l. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-27</d><h>18:43</h><w>wontheone1</w>Hello! is there a negative of <code>membero</code> ? like it succeeds when <code>x</code> is not a member of l.<div></div></z><z id="t1651084999" t="wontheone1 https://clojuredocs.org/clojure.core.logic/membero Membero FYI [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-04-27</d><h>18:43</h><r>wontheone1</r><a href="https://clojuredocs.org/clojure.core.logic/membero" target="_blank">https://clojuredocs.org/clojure.core.logic/membero</a>

Membero FYI<div></div></z><z id="t1654070357" t="erwinrooijakkers https://stackoverflow.com/a/16371536/2609980 an implementation: (defne nonmembero &quot;A relation where l is a collection, such that l does not contain x&quot; [x l] ([_ ()]) ([_ [head . tail]] (!= x head) (nonmembero x tail))) [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-01</d><h>07:59</h><r>erwinrooijakkers</r><a href="https://stackoverflow.com/a/16371536/2609980" target="_blank">https://stackoverflow.com/a/16371536/2609980</a>an implementation:

<pre>(defne nonmembero
  &quot;A relation where l is a collection, such that l does not contain x&quot;
  [x l]
  ([_ ()])
  ([_ [head . tail]]
     (!= x head)
     (nonmembero x tail)))</pre><div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;100&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;💯&quot;)} &quot; 1&quot;)}</div></z><z id="t1654084981" t="wontheone1 Thanks! [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-01</d><h>12:03</h><r>wontheone1</r>Thanks!<div></div></z><z id="t1654070233" t="erwinrooijakkers https://stackoverflow.com/q/72457516/2609980 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-01</d><h>07:57</h><w>erwinrooijakkers</w><a href="https://stackoverflow.com/q/72457516/2609980" target="_blank">https://stackoverflow.com/q/72457516/2609980</a><div></div></z><z id="t1654074158" t="Martynas M IMO you don&apos;t ever control how the logic will progress. So you probably can&apos;t. But even then what would a person expect... what if the solver will decide to run your expression 1M times? I don&apos;t know if it makes more sense than reacting to the results themselves. Also one more problem with shimming the code is that it would force the solver to solve from the &quot;side&quot; that would input into your code. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-01</d><h>09:02</h><r>Martynas M</r>IMO you don&apos;t ever control how the logic will progress. So you probably can&apos;t.
But even then what would a person expect... what if the solver will decide to run your expression 1M times? I don&apos;t know if it makes more sense than reacting to the results themselves.

Also one more problem with shimming the code is that it would force the solver to solve from the &quot;side&quot; that would input into your code.<div></div></z><z id="t1654783251" t="erwinrooijakkers [:attrs {:href &quot;/_/_/users/U028ART884X&quot;}] thanks [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-09</d><h>14:00</h><r>erwinrooijakkers</r><a>@U028ART884X</a> thanks<div></div></z><z id="t1654783394" t="Martynas M I&apos;m not a pro by any means. But when I was reading the start of the intro about prolog it was the first thing that they wrote about. And then I dropped reading it 😄 The expressions that you specify by conso and other operators work both ways. For instance look how they define addition and subtraction using the same addition operator. You can do this in math but most of the time your functions in Clojure are one-way only. So if you will use this kind of one-way function... you will force the computation of the solver to be evaluated in a particular way. And if you will have a way to cheaply compute something in the computation then it may get repeated if you will force the solver to think in a specific way. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-09</d><h>14:03</h><r>Martynas M</r>I&apos;m not a pro by any means. But when I was reading the start of the intro about prolog it was the first thing that they wrote about. And then I dropped reading it <b>😄</b>
The expressions that you specify by <code>conso</code> and other operators work both ways. For instance look how they define addition and subtraction using the same addition operator. You can do this in math but most of the time your functions in Clojure are one-way only.
So if you will use this kind of one-way function... you will force the computation of the solver to be evaluated in a particular way. And if you will have a way to cheaply compute something in the computation then it may get repeated if you will force the solver to think in a specific way.<div></div></z><z id="t1654947120" t="Martynas M Hey. I have a question about logic programming in general and not about core.logic. Let&apos;s say I have an event stream and I accumulate state over time. If I think about the incoming event stream as string characters then I could write a state machine (regex) that would capture some kind of state about the inputs. What I think about is to make this state machine for the incoming stream and be able to somehow say what is the current &quot;state&quot; of the state machine. I don&apos;t know how it could work and don&apos;t know if it makes much sense to you. But maybe there could be a library that could handle this? I could write the matching and checking by hand but it would be way nicer to specify some constraints and then allow to &apos;work itself out&apos;. I don&apos;t know what the end result could be. In my opinion maybe it could be some kind of events or something. But first let&apos;s see if anybody understands what I&apos;m talking about. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-11</d><h>11:32</h><w>Martynas M</w>Hey.
I have a question about logic programming in general and not about core.logic.

Let&apos;s say I have an event stream and I accumulate state over time. If I think about the incoming event stream as string characters then I could write a state machine (regex) that would capture some kind of state about the inputs.
What I think about is to make this state machine for the incoming stream and be able to somehow say what is the current &quot;state&quot; of the state machine.
I don&apos;t know how it could work and don&apos;t know if it makes much sense to you. But maybe there could be a library that could handle this?

I could write the matching and checking by hand but it would be way nicer to specify some constraints and then allow to &apos;work itself out&apos;. I don&apos;t know what the end result could be. In my opinion maybe it could be some kind of events or something. But first let&apos;s see if anybody understands what I&apos;m talking about.<div></div></z><z id="t1655046919" t="Ben Sless There are state machine libraries, why not use them? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-12</d><h>15:15</h><r>Ben Sless</r>There are state machine libraries, why not use them?<div></div></z><z id="t1655047620" t="Martynas M Yes, this is what I thought about but I didn&apos;t know what to look for. I&apos;m not yet sure how to use it. Is it something like this one? https://github.com/cdorrat/reduce-fsm [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-12</d><h>15:27</h><r>Martynas M</r>Yes, this is what I thought about but I didn&apos;t know what to look for.
I&apos;m not yet sure how to use it.
Is it something like this one?
<a href="https://github.com/cdorrat/reduce-fsm" target="_blank">https://github.com/cdorrat/reduce-fsm</a><div></div></z><z id="t1654985570" t="chrisblom I&apos;m not sure what you are talking about. Do you want to validate an event stream? Or emit events in response to incoming events? Are you familiar with finite state machine and finite state transducers? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-11</d><h>22:12</h><w>chrisblom</w>I&apos;m not sure what you are talking about. Do you want to validate an event stream? Or emit events in response to incoming events? Are you familiar with finite state machine and finite state transducers?<div></div></z><z id="t1655279523" t="Martynas M Hey. I didn&apos;t even see that you replied because you replied to the main topic but alright. Also that means that the other commenter will also miss this message. I want to not only validate but also emit events according to my internal state and incoming events. Finite state machine is familiar to me (regexes?) but I would like to have multiple of those machines at the same time for different contexts. And they must not &quot;overlap&quot; based on some kind of criteria (regex that stops matching because it currently already matches a string that has 5 of the first same chars) and if it happens then it should produce a rejection. I&apos;ll try to look up &quot;finite state transducers&quot;. But for now I like to think about it as a &quot;saga pattern&quot;. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-15</d><h>07:52</h><r>Martynas M</r>Hey. I didn&apos;t even see that you replied because you replied to the main topic but alright. Also that means that the other commenter will also miss this message.

I want to not only validate but also emit events according to my internal state and incoming events.
Finite state machine is familiar to me (regexes?) but I would like to have multiple of those machines at the same time for different contexts. And they must not &quot;overlap&quot; based on some kind of criteria (regex that stops matching because it currently already matches a string that has 5 of the first same chars) and if it happens then it should produce a rejection.
I&apos;ll try to look up &quot;finite state transducers&quot;.
But for now I like to think about it as a &quot;saga pattern&quot;.<div></div></z><z id="t1655281573" t="Martynas M I&apos;m trying to figure out whether there could be a framework for this (obviously probably yes but then how hard is it to have one) or whether I&apos;ll need to write all my &quot;state machines&quot; by hand and accumulate state on my own :thinking_face: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-15</d><h>08:26</h><r>Martynas M</r>I&apos;m trying to figure out whether there could be a framework for this (obviously probably yes but then how hard is it to have one) or whether I&apos;ll need to write all my &quot;state machines&quot; by hand and accumulate state on my own <b>:thinking_face:</b><div></div></z><z id="t1655409064" t="chrisblom Ah ok, lets see if a get this: You want your process to receive event, and transitions states of a state machine based on incoming events. Your question is: Is there a framework that provides a high level way to define the state machine, and handle transitions based on events I don&apos;t really know of such a framework. I have some half baked library somewhere that provides a DSL to generate finite state transducers, but it is not in a usable state. Generating a finite state machine from a DSL is not that hard BTW, could be a fun project. I&apos;m not sure what you mean with &apos;they should not overlap&apos;| The problem is kind of abstract, do you have can you give an explanation of a problem you want to solve with this approach? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-16</d><h>19:51</h><r>chrisblom</r>Ah ok, lets see if a get this:
You want your process to receive event, and transitions states of a state machine based on incoming events.

Your question is:
Is there a framework that provides a high level way to define the state machine, and handle transitions based on events

I don&apos;t really know of such a framework.
I have some half baked library somewhere that provides a DSL to generate finite state transducers, but it is not in a usable state.

Generating a finite state machine from a DSL is not that hard BTW, could be a fun project.

I&apos;m not sure what you mean with &apos;they should not overlap&apos;|

The problem is kind of abstract,  do you have can you give an explanation of a problem you want to solve with this approach?<div></div></z><z id="t1655441187" t="Martynas M If a user locks a resource then transaction from a different user should fail until the first user unlocks. This is where a basic regex approach would lack because it would expect that the inputs would already be &quot;separated between contexts&quot;. Probably it wouldn&apos;t be too useful to model only one state-machine but I&apos;d have to have a large DSL for the whole system :thinking_face: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-17</d><h>04:46</h><r>Martynas M</r>If a user locks a resource then transaction from a different user should fail until the first user unlocks.
This is where a basic regex approach would lack because it would expect that the inputs would already be &quot;separated between contexts&quot;.

Probably it wouldn&apos;t be too useful to model only one state-machine but I&apos;d have to have a large DSL for the whole system <b>:thinking_face:</b><div></div></z><z id="t1655478961" t="chrisblom Formal methods, like TLA+, come to mind, these give a high level language that is compiled down to a finite state model, which can be used to reason about properties of the program. I think code generation is also possible, but not sure how usable the results are. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-17</d><h>15:16</h><r>chrisblom</r>Formal methods, like TLA+, come to mind, these give a high level language that is compiled down to a finite state model, which can be used to reason about properties of the program. I think code generation is also possible, but not sure how usable the results are.<div></div></z><z id="t1655479028" t="chrisblom TLA+ is related to logic programming, it&apos;s based on temporal logic. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-17</d><h>15:17</h><r>chrisblom</r>TLA+ is related to logic programming, it&apos;s based on temporal logic.<div></div></z><z id="t1656083962" t="rickmoynihan [:attrs {:href &quot;/_/_/users/U028ART884X&quot;}] : sounds like you might be grasping for a dataflow system!? I’ve seen many of these in clojure over the years… here’s one: https://github.com/hoplon/javelin [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-24</d><h>15:19</h><r>rickmoynihan</r><a>@U028ART884X</a>: sounds like you might be grasping for a dataflow system!?

I’ve seen many of these in clojure over the years… here’s one:

<a href="https://github.com/hoplon/javelin" target="_blank">https://github.com/hoplon/javelin</a><div></div></z><z id="t1669121317" t="Linus Ericsson This problem sounds like something which could be reasoned about using colored petri nets. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-11-22</d><h>12:48</h><r>Linus Ericsson</r>This problem sounds like something which could be reasoned about using colored petri nets.<div></div></z><z id="t1669137117" t="Martynas M http://www.goodmath.org/blog/2007/10/10/colored-petri-nets/ This article reminds me of re-frame and how it handles its state (there is actual state and then there are calculations based on that state). Although the main difference in re-frame is that it&apos;s always single-threaded. And in re-frame they call the state graph a DAG: https://en.wikipedia.org/wiki/Directed_acyclic_graph But even then it&apos;s still not easy to specify what are the transaction types and what are rollbacks because for petri nets you still have to do it by hand. Maybe it&apos;s just a hard problem overall :thinking_face: [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-11-22</d><h>17:11</h><r>Martynas M</r><a href="http://www.goodmath.org/blog/2007/10/10/colored-petri-nets/" target="_blank">http://www.goodmath.org/blog/2007/10/10/colored-petri-nets/</a>

This article reminds me of re-frame and how it handles its state (there is actual state and then there are calculations based on that state).
Although the main difference in re-frame is that it&apos;s always single-threaded. And in re-frame they call the state graph a DAG: <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank">https://en.wikipedia.org/wiki/Directed_acyclic_graph</a>

But even then it&apos;s still not easy to specify what are the transaction types and what are rollbacks because for petri nets you still have to do it by hand. Maybe it&apos;s just a hard problem overall <b>:thinking_face:</b><div></div></z><z id="t1655357849" t="zackteo Hello, I have a curious question, what is fk in clojure.logic suppose to be short for? Does anyone know? I tried doing a quick surface level searching of logic programming but nothing popped up https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L27 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-16</d><h>05:37</h><w>zackteo</w>Hello, I have a curious question, what is <code>fk</code> in clojure.logic suppose to be short for? Does anyone know? I tried doing a quick surface level searching of logic programming but nothing popped up  <a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L27" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic.clj#L27</a><div></div></z><z id="t1655361115" t="wontheone1 😄 I don’t really know but maybe fxxx ? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-16</d><h>06:31</h><r>wontheone1</r><b>😄</b> I don’t really know but maybe <code>fxxx</code>?<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;sweat_smile&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;😅&quot;)} &quot; 2&quot;)}</div></z><z id="t1655363974" t="Ben Sless This reads like fail continuation, and if you read Kiselyov&apos;s work on logic monad which is used in Kanren, on which core logic is based, you&apos;ll find the term pop up. I see it&apos;s used in constraint function definition, throwing if the term isn&apos;t ground. You&apos;ll need to dig into the papers in constraint Kanren if you want to understand why, but I guess it involves checking if the constraint can be checked for the var [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-06-16</d><h>07:19</h><r>Ben Sless</r>This reads like fail continuation, and if you read Kiselyov&apos;s work on logic monad which is used in Kanren, on which core logic is based, you&apos;ll find the term pop up.
I see it&apos;s used in constraint function definition, throwing if the term isn&apos;t ground. You&apos;ll need to dig into the papers in constraint Kanren if you want to understand why, but I guess it involves checking if the constraint can be checked for the var<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 2&quot;)}</div></z><z id="t1658077666" t="peterh Hi, I just wanted to share my notes while working through “The Reasoned Schemer” (2nd Ed.) with core.logic: https://github.com/formsandlines/reasoned-schemer-notebook Maybe this helps someone who is stuck with the translation from Scheme to Clojure. Of course, I also appreciate any feedback since this is my first logic programming experience. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-07-17</d><h>17:07</h><w>peterh</w>Hi, I just wanted to share my notes while working through “The Reasoned Schemer” (2nd Ed.) with core.logic: <a href="https://github.com/formsandlines/reasoned-schemer-notebook" target="_blank">https://github.com/formsandlines/reasoned-schemer-notebook</a> Maybe this helps someone who is stuck with the translation from Scheme to Clojure. Of course, I also appreciate any feedback since this is my first logic programming experience.<div>{:tag :div, :attrs {:class &quot;message-reaction&quot;, :title &quot;+1&quot;}, :content ({:tag :span, :attrs {:class &quot;emoji&quot;}, :content (&quot;👍&quot;)} &quot; 2&quot;)}</div></z><z id="t1658079059" t="peterh Along the way, I discovered that the defrel macro (as described on page 19, Chapter 1) is not really needed and you can just use regular defn to define the relations. I wonder if there is any difference at all since the output seems to be the same and core.logic also does not have defrel . Maybe this gets cleared up later on in the book? However, core.logic has defne which works like conde and uses pattern-matching to simplify unification. I always try to rewrite the relations from the book with defne to get a feel for it, because it is really convenient. [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-07-17</d><h>17:30</h><r>peterh</r>Along the way, I discovered that the <code>defrel</code> macro (as described on page 19, Chapter 1) is not really needed and you can just use regular <code>defn</code> to define the relations. I wonder if there is any difference at all since the output seems to be the same and core.logic also does not have <code>defrel</code>. Maybe this gets cleared up later on in the book?

However, core.logic has <code>defne</code> which works like <code>conde</code> and uses pattern-matching to simplify unification. I always try to rewrite the relations from the book with <code>defne</code> to get a feel for it, because it is really convenient.<div></div></z><z id="t1661614746" t="zimablue The point about defne is interesting thanks, I was going to use an alternative to core.logic for going back over bits of the reasoned schemer (I&apos;ve read it but not coded it ) since most of that book uses conde and I didn&apos;t know there was an equivalent or a close-to-equivalent [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-08-27</d><h>15:39</h><r>zimablue</r>The point about defne is interesting thanks, I was going to use an alternative to core.logic for going back over bits of the reasoned schemer (I&apos;ve read it but not coded it ) since most of that book uses conde and I didn&apos;t know there was an equivalent or a close-to-equivalent<div></div></z><z id="t1661587846" t="zimablue Is there a standard way to force core.logic or minikanren to only return fully ground results? [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-08-27</d><h>08:10</h><w>zimablue</w>Is there a standard way to force core.logic or minikanren to only return fully ground results?<div></div></z><z id="t1662011693" t="vimfun Is Your meaning logic/run* ? It will return all the possible values match the predication of the logic expression in it. 🙂 [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-09-01</d><h>05:54</h><r>vimfun</r>Is Your meaning <code>logic/run*</code> ?  It will return all the possible values match the predication of the logic expression in it.<b>🙂</b><div></div></z><z id="t1662133090" t="rickmoynihan I think he means that he doesn’t want to consider successful results which returned unbound variables… i.e. he wants to filter results which look like: _0 . I think the answer is probably just to not to write programs that succeed with unground results. You could of course filter them out afterwards; but if you do that you might not know the difference between success/failure… [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-09-02</d><h>15:38</h><r>rickmoynihan</r>I think he means that he doesn’t want to consider successful results which returned unbound variables… i.e. he wants to filter results which look like: <code>_0</code>.

I think the answer is probably just to not to write programs that succeed with unground results.

You could of course filter them out afterwards; but if you do that you might not  know the difference between success/failure…<div></div></z><z id="t1662133110" t="rickmoynihan though I forget exactly what is returned in these cases [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-09-02</d><h>15:38</h><r>rickmoynihan</r>though I forget exactly what is returned in these cases<div></div></z><z id="t1670343184" t="zimablue Rick you are correct about what I meant [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-06</d><h>16:13</h><r>zimablue</r>Rick you are correct about what I meant<div></div></z><z id="t1671698483" t="Benjamin If you model day21 of advent of code with core.logic how do you do that? Is every monkey an lvar? And how do I say arithmetic relationships? In the puzzle I have a list of monkeys that have either a number as value, or a +/-/*// relation of 2 other monkeys [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-22</d><h>08:41</h><w>Benjamin</w>If you model day21 of advent of code with core.logic how do you do that? Is every monkey an lvar? And how do I say arithmetic relationships? In the puzzle I have a list of monkeys that have either a number as value, or a +/-/*// relation of 2 other monkeys<div></div></z><z id="t1671699034" t="Ben Sless You can use the fd namespace (finite domain) Check the Sudoku example for core.logic [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-22</d><h>08:50</h><r>Ben Sless</r>You can use the fd namespace (finite domain)
Check the Sudoku example for core.logic<div></div></z><z id="t1671710411" t="Benjamin checking [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-22</d><h>12:00</h><r>Benjamin</r>checking<div></div></z><z id="t1671713415" t="Benjamin hehehe https://github.com/benjamin-asdf/advent-of-code/blob/master/src/Y2022/day21_logic.clj might be I&apos;m doing some blunder, first code but works [:attrs {:class &quot;message-reaction-bar&quot;}]"><y>#</y><d>2022-12-22</d><h>12:50</h><r>Benjamin</r>hehehe <a href="https://github.com/benjamin-asdf/advent-of-code/blob/master/src/Y2022/day21_logic.clj" target="_blank">https://github.com/benjamin-asdf/advent-of-code/blob/master/src/Y2022/day21_logic.clj</a>

might be I&apos;m doing some blunder, first code but works<div></div></z><z id="t1671966086" t="Benjamin (logic/run 1 [q] (fd/+ 10 q 1)) can I say q can be negative so this would return -9 ?"><y>#</y><d>2022-12-25</d><h>11:01</h><w>Benjamin</w>(logic/run 1 [q]
  (fd/+ 10 q 1))

can I say q can be negative so this would return -9 ?</z><z id="t1672071263" t="Damien Kick So I&apos;ve been playing with core.logic and Malli a bit &lt; https://github.com/dkick/mallikanren &gt;. For example, given a Malli spec, transforming it into ... (def Name [:map [:first :string] [:middle [:maybe :string]] [:last :string]]) (def name!? (spock/transform Name)) (def Person [:map [:id :uuid] [:name Name]]) (def person!? (spock/transform Person)) (def Parents [:map [:child :uuid] [:father :uuid] [:mother :uuid]]) (def parents!? (spock/transform Parents)) (def Children [:map [:parent :uuid] [:child :uuid]]) (def children!? (spock/transform Children)) (comment (let [q nil] (l/run 10 [q] (l/or* (-&gt;&gt; [name!? person!? parents!? children!?] (map #(% q)))))) ;; =&gt; ([[:first _0] [:middle _1] [:last _2]] ;; [[:id _0] [:name _1]] ;; [[:parent _0] [:child _1]] ;; [[:child _0] [:father _1] [:mother _2]] ;; [[:id _0] [:name [[:first _1] [:middle _2] [:last _3]]]]) :comment)"><y>#</y><d>2022-12-26</d><h>16:14</h><w>Damien Kick</w>So I&apos;ve been playing with core.logic and Malli a bit &lt;<a href="https://github.com/dkick/mallikanren" target="_blank">https://github.com/dkick/mallikanren</a>&gt;. For example, given a Malli spec, transforming it into ...
<pre>(def Name
  [:map
   [:first :string]
   [:middle [:maybe :string]]
   [:last :string]])

(def name!? (spock/transform Name))

(def Person
  [:map
   [:id :uuid]
   [:name Name]])

(def person!? (spock/transform Person))

(def Parents
  [:map
   [:child :uuid]
   [:father :uuid]
   [:mother :uuid]])

(def parents!? (spock/transform Parents))

(def Children
  [:map
   [:parent :uuid]
   [:child :uuid]])

(def children!? (spock/transform Children))

(comment
  (let [q nil]
    (l/run 10 [q]
      (l/or* (-&gt;&gt; [name!? person!? parents!? children!?]
                  (map #(% q))))))
  ;; =&gt; ([[:first _0] [:middle _1] [:last _2]]
  ;;     [[:id _0] [:name _1]]
  ;;     [[:parent _0] [:child _1]]
  ;;     [[:child _0] [:father _1] [:mother _2]]
  ;;     [[:id _0] [:name [[:first _1] [:middle _2] [:last _3]]]])
  :comment)</pre></z><z id="t1672071315" t="Damien Kick I&apos;m just curious ... has anyone else thought that there is interesting overlap between spec-like-things and core.logic? Are there any other examples of libraries doing this kind of thing?"><y>#</y><d>2022-12-26</d><h>16:15</h><w>Damien Kick</w>I&apos;m just curious ... has anyone else thought that there is interesting overlap between spec-like-things and core.logic? Are there any other examples of libraries doing this kind of thing?</z><z id="t1672071815" t="Ben Sless I&apos;m still in the hammock phases of using logical programming to model function schemas"><y>#</y><d>2022-12-26</d><h>16:23</h><r>Ben Sless</r>I&apos;m still in the hammock phases of using logical programming to model function schemas</z><z id="t1672071896" t="Ben Sless I think it&apos;s a great fit, schemas can totally map to relations, and functions are just joins, which also produce relations"><y>#</y><d>2022-12-26</d><h>16:24</h><r>Ben Sless</r>I think it&apos;s a great fit, schemas can totally map to relations, and functions are just joins, which also produce relations</z><z id="t1672071984" t="Ben Sless One abortive experiment: https://github.com/bsless/mallilog"><y>#</y><d>2022-12-26</d><h>16:26</h><r>Ben Sless</r>One abortive experiment:
<a href="https://github.com/bsless/mallilog" target="_blank">https://github.com/bsless/mallilog</a></z><z id="t1672072104" t="Ben Sless Another https://github.com/bsless/malli-keys-relations"><y>#</y><d>2022-12-26</d><h>16:28</h><r>Ben Sless</r>Another
<a href="https://github.com/bsless/malli-keys-relations" target="_blank">https://github.com/bsless/malli-keys-relations</a></z><z id="t1672078758" t="hiredman The big problem is core.logic can&apos;t do set relations"><y>#</y><d>2022-12-26</d><h>18:19</h><r>hiredman</r>The big problem is core.logic can&apos;t do set relations</z><z id="t1672081684" t="Damien Kick It is a bother, to be sure; but I’ve gotten some useful things done with alists as maps"><y>#</y><d>2022-12-26</d><h>19:08</h><r>Damien Kick</r>It is a bother, to be sure; but I’ve gotten some useful things done with alists as maps</z><z id="t1672081755" t="Damien Kick … list lists as sets and weaving in/out of Clojure space, core.logic space"><y>#</y><d>2022-12-26</d><h>19:09</h><r>Damien Kick</r>… list lists as sets and weaving in/out of Clojure space, core.logic space</z><z id="t1672086895" t="Ben Sless But the new branch of #CFFTD7R6Z can 🙂"><y>#</y><d>2022-12-26</d><h>20:34</h><r>Ben Sless</r>But the new branch of #CFFTD7R6Z  can <b>🙂</b></z><z id="t1672094842" t="hiredman I am not super familiar with meander, and while it may support some pattern matching on sets and maps, I am very skeptical that it encodes a theory of finite sets like you would need for proper handling of sets in core.logic (and set like things like map keys)."><y>#</y><d>2022-12-26</d><h>22:47</h><r>hiredman</r>I am not super familiar with meander, and while it may support some pattern matching on sets and maps, I am very skeptical that it encodes a theory of finite sets like you would need for proper handling of sets in core.logic (and set like things like map keys).</z><z id="t1672117735" t="Ben Sless I think it does, I remember [:attrs {:href &quot;/_/_/users/U06MDAPTP&quot;}] sent me the papers on it. I can&apos;t remember the term but there&apos;s a whole set of work around pattern matching collections with no canonical representations. iirc it should even work with multi sets."><y>#</y><d>2022-12-27</d><h>05:08</h><r>Ben Sless</r>I think it does, I remember <a>@U06MDAPTP</a>  sent me the papers on it. I can&apos;t remember the term but there&apos;s a whole set of work around pattern matching collections with no canonical representations. iirc it should even work with multi sets.</z><z id="t1672119618" t="hiredman Pattern matching is kind of half of unification. Pattern matching has a concrete(ground) structure on one side a pattern on the other. Unification between two sets that you might not know the elements of, and might themselves contain logic variables, is annoying"><y>#</y><d>2022-12-27</d><h>05:40</h><r>hiredman</r>Pattern matching is kind of half of unification. Pattern matching has a concrete(ground) structure on one side a pattern on the other. Unification between two sets that you might not know the elements of, and might themselves contain logic variables, is annoying</z><z id="t1672120173" t="Ben Sless https://www.egison.org/"><y>#</y><d>2022-12-27</d><h>05:49</h><r>Ben Sless</r><a href="https://www.egison.org/" target="_blank">https://www.egison.org/</a></z><z id="t1672120364" t="Ben Sless Here we go Backtracking pattern matching for non linear data types https://arxiv.org/abs/1808.10603"><y>#</y><d>2022-12-27</d><h>05:52</h><r>Ben Sless</r>Here we go
Backtracking pattern matching for non linear data types
<a href="https://arxiv.org/abs/1808.10603" target="_blank">https://arxiv.org/abs/1808.10603</a></z><z id="t1672120753" t="hiredman I mean, that is neat, but it is not relational programming. Pattern matching is unidirectional, where unification has to be done in both directions, which is significantly trickier. https://github.com/namin/clpset-miniKanren is the one implementation of constraint logic programming with sets for minikanren that I am aware of, it based on a paper that formulates set constraints as a series of rewrite rules. The paper is pretty straightforward (if you just take them at their word that the rewrites are sound and ignore any proofs), but figuring how to extend code.logics constraint system is a pain because there are no docs for it"><y>#</y><d>2022-12-27</d><h>05:59</h><r>hiredman</r>I mean, that is neat, but it is not relational programming. Pattern matching is unidirectional, where unification has to be done in both directions, which is significantly trickier. <a href="https://github.com/namin/clpset-miniKanren" target="_blank">https://github.com/namin/clpset-miniKanren</a> is the one implementation of constraint logic programming with sets for minikanren that I am aware of, it based on a paper that formulates set constraints as a series of rewrite rules. The paper is pretty straightforward (if you just take them at their word that the rewrites are sound and ignore any proofs), but figuring how to extend code.logics constraint system is a pain because there are no docs for it</z><z id="t1672121233" t="Ben Sless I think that meander/zeta can be run backwards, which might satisfy this requirements But are we complaining about core logic now? I wouldn&apos;t mind a well documented implementation with better perf"><y>#</y><d>2022-12-27</d><h>06:07</h><r>Ben Sless</r>I think that meander/zeta can be run backwards, which might satisfy this requirements
But are we complaining about core logic now? I wouldn&apos;t mind a well documented implementation with better perf</z><z id="t1672121243" t="hiredman I periodically start and never finish getting clp(set) working with core.logic, https://twitter.com/hiredman_/status/1353832401005203457 has a screen shot of using the version that was farthest along to being complete (but I think that code was lost in a a filesystem misadventure)"><y>#</y><d>2022-12-27</d><h>06:07</h><r>hiredman</r>I periodically start and never finish getting clp(set) working with core.logic, <a href="https://twitter.com/hiredman_/status/1353832401005203457" target="_blank">https://twitter.com/hiredman_/status/1353832401005203457</a> has a screen shot of using the version that was farthest along to being complete (but I think that code was lost in a a filesystem misadventure)</z><z id="t1672121278" t="Ben Sless Anyway working on CLP in kanren assumes you read the papers and are intimately familiar with the implementation, yes"><y>#</y><d>2022-12-27</d><h>06:07</h><r>Ben Sless</r>Anyway working on CLP in kanren assumes you read the papers and are intimately familiar with the implementation, yes</z><z id="t1672121546" t="hiredman Sort of, core.logic&apos;s clp stuff takes the minikanren with constraints paper as a starting point, but it implements it using clojure features (protocols, types, etc) so it doesn&apos;t end up exactly like what is in the papers (a pretty bare scheme where everything is cons cells)"><y>#</y><d>2022-12-27</d><h>06:12</h><r>hiredman</r>Sort of, core.logic&apos;s clp stuff takes the minikanren with constraints paper as a starting point, but it implements it using clojure features (protocols, types, etc) so it doesn&apos;t end up exactly like what is in the papers (a pretty bare scheme where everything is cons cells)</z><z id="t1672121610" t="hiredman So when I say core.logic is not well documented, it is the use of clojure features like protocols."><y>#</y><d>2022-12-27</d><h>06:13</h><r>hiredman</r>So when I say core.logic is not well documented, it is the use of clojure features like protocols.</z><z id="t1672121641" t="Ben Sless The metadata doesn&apos;t make it easier, too"><y>#</y><d>2022-12-27</d><h>06:14</h><r>Ben Sless</r>The metadata doesn&apos;t make it easier, too</z><z id="t1672121673" t="Ben Sless It shows the CLP stuff was added later"><y>#</y><d>2022-12-27</d><h>06:14</h><r>Ben Sless</r>It shows the CLP stuff was added later</z><z id="t1672122491" t="Ben Sless That&apos;s why I think an implementation with less branches and conditions will be easier to hack on"><y>#</y><d>2022-12-27</d><h>06:28</h><r>Ben Sless</r>That&apos;s why I think an implementation with less branches and conditions will be easier to hack on</z><z id="t1673925089" t="dregre I am a core logic newbie, and am playing around with finite domains. I’m puzzled by something, and I was hoping others could help me understand what is going on. Basically, I am trying to put a distinct constraint on a sequence of lvars whose size is equal to the size of the domain — no other constraints. It works fine for 10, 100, even 1,000 lvars … but when I try it on 10,000 it runs interminably (on my poor little Macbook Air). Could anyone help me understand why it behaves this way? Snippet: (let [size 10000 lvars (repeatedly size l/lvar) domain (fd/interval size)] (l/run 1 [q] (l/everyg #(fd/dom % domain) lvars) (fd/distinct lvars) (l/== q lvars)))"><y>#</y><d>2023-01-17</d><h>03:11</h><w>dregre</w>I am a core logic newbie, and am playing around with finite domains.  I’m puzzled by something, and I was hoping others could help me understand what is going on.

Basically, I am trying to put a distinct constraint on a sequence of lvars whose size is equal to the size of the domain — no other constraints.  It works fine for 10, 100, even 1,000 lvars … but when I try it on 10,000 it runs interminably (on my poor little Macbook Air).  Could anyone help me understand why it behaves this way?

Snippet:

<pre>(let [size   10000
      lvars  (repeatedly size l/lvar)
      domain (fd/interval size)]
  (l/run 1 [q]
         (l/everyg #(fd/dom % domain) lvars)
         (fd/distinct lvars)
         (l/== q lvars)))</pre></z><z id="t1673925227" t="dregre Notice, too, I am only trying to arrive at a single answer, though seems not to have any bearing on speed that I have discerned, versus run* ."><y>#</y><d>2023-01-17</d><h>03:13</h><w>dregre</w>Notice, too, I am only trying to arrive at a single answer, though seems not to have any bearing on speed that I have discerned, versus <code>run*</code>.</z><z id="t1673980482" t="agh2o Hi, I&apos;m trying to understand how to deal with large amounts of data that I want to process using core.logic.. I read about various techniques including pre-processing, memoization, and more. but I wondered if there was a more striaght forward domain independent technique that is possible with core.logic. such as distributed computation or having the facts come from a db query instead of being in memory (and the query itself being a more specific query than querying everything). I know that without domain specific knowledge it could be hard but maybe I missed something. Another option I thought of is calculating intermediate results given partial data and then adding data (after options have been eliminated). The problem with this one is that I think there is no way around getting a suboptimal solution.. Thanks for any advice. I&apos;d also be happy to redirection to relevant literature!"><y>#</y><d>2023-01-17</d><h>18:34</h><w>agh2o</w>Hi, I&apos;m trying to understand how to deal with large amounts of data that I want to process using core.logic.. I read about various techniques including pre-processing, memoization, and more. but I wondered if there was a more striaght forward domain independent technique that is possible with core.logic. such as distributed computation or having the facts come from a db query instead of being in memory (and the query itself being a more specific query than querying everything).
I know that without domain specific knowledge it could be hard but maybe I missed something.
Another option I thought of is calculating intermediate results given partial data and then adding data (after options have been eliminated). The problem with this one is that I think there is no way around getting a suboptimal solution..
Thanks for any advice. I&apos;d also be happy to redirection to relevant literature!</z><z id="t1673981243" t="Ben Sless As always, it depends, but the most general (and useless) answer is: The computational model is a logic monads Monadic computations can be distributed, a+b+c+d can be computed on different machines and aggregated on another How you&apos;d do that with core.logic, and if it even has the facilities for that, no idea"><y>#</y><d>2023-01-17</d><h>18:47</h><r>Ben Sless</r>As always, it depends, but the most general (and useless) answer is:
The computational model is a logic monads
Monadic computations can be distributed, a+b+c+d can be computed on different machines and aggregated on another
How you&apos;d do that with core.logic, and if it even has the facilities for that, no idea</z><z id="t1673981780" t="agh2o I&apos;ll try to think if the logic monad applies to what I&apos;m doing. Thanks"><y>#</y><d>2023-01-17</d><h>18:56</h><r>agh2o</r>I&apos;ll try to think if the logic monad applies to what I&apos;m doing. Thanks</z><z id="t1673982186" t="Ben Sless The things you&apos;re adding are the streams of answers"><y>#</y><d>2023-01-17</d><h>19:03</h><r>Ben Sless</r>The things you&apos;re adding are the streams of answers</z><z id="t1673982218" t="Ben Sless If you have a way of modeling choice (e.g. or) then you can distribute those parts"><y>#</y><d>2023-01-17</d><h>19:03</h><r>Ben Sless</r>If you have a way of modeling choice (e.g. or) then you can distribute those parts</z><z id="t1673982254" t="Ben Sless The background literature is Logic Transformer Monad (approximate title) by Oleg Kiselyov"><y>#</y><d>2023-01-17</d><h>19:04</h><r>Ben Sless</r>The background literature is Logic Transformer Monad (approximate title) by Oleg Kiselyov</z><z id="t1673983901" t="agh2o Great, I appreciate it"><y>#</y><d>2023-01-17</d><h>19:31</h><r>agh2o</r>Great, I appreciate it</z><z id="t1673985224" t="agh2o Say I got a modeling choice as you called it. And say I want to calculate each of the sides of that &quot;or&quot; on different Machines. Each instance will return a group of possible variables that satisfy the constraint. Then I need to find the intersection of both these groups (what if there are many options in each?) is it possible for each instance to instead of providing possible solutions to provide some other thing that might be used as pre-processed information or top level constraints that will make the entire calculation easier?"><y>#</y><d>2023-01-17</d><h>19:53</h><r>agh2o</r>Say I got a modeling choice as you called it. And say I want to calculate each of the sides of that &quot;or&quot; on different Machines. Each instance will return a group of possible variables that satisfy the constraint. Then I need to find the intersection of both these groups (what if there are many options in each?) is it possible for each instance to instead of providing possible solutions to provide some other thing that might be used as pre-processed information or top level constraints that will make the entire calculation easier?</z><z id="t1673986358" t="Ben Sless or doesn&apos;t return an intersection, but a unification of domains. In core.logic it&apos;s mplus iirc The way computations are run in core.logic (and kanren) is basically a stream of states of substitutions for logic variables. In the end, that stream is reified, so you can put that aside for now, what you&apos;d want is to play with those raw substitutions streams, get them from two machines, mplus them, continue the processing and reify in the end."><y>#</y><d>2023-01-17</d><h>20:12</h><r>Ben Sless</r><code>or</code> doesn&apos;t return an intersection, but a unification of domains. In core.logic it&apos;s <code>mplus</code> iirc
The way computations are run in core.logic (and kanren) is basically a stream of states of substitutions for logic variables. In the end, that stream is reified, so you can put that aside for now, what you&apos;d want is to play with those raw substitutions streams, get them from two machines, mplus them, continue the processing and reify in the end.</z><z id="t1674209203" t="rickmoynihan I’ve looked into this in the past and you can plug other backends/databases into core.logic and reason over them… there’s an example in the core.logic repo itself which is backed off datomic; but you could in principle plug anything in. On the parallelisation front I’ve also superficially looked at that too — parallelising it is in theory trivially easy; the difficulty is doing so in such a way that you don’t make it slower. There have been a number of experiments already doing precisely sort of things you’re talking about e.g. porting the monadic streams to core.async/CSP processes: https://github.com/halgari/async-mu-kanren/blob/master/src/async_mu_kanren/core.clj To my knowledge though they’re usually slower because you end up with too much parallelism and the coordination overhead quickly dominates the computation."><y>#</y><d>2023-01-20</d><h>10:06</h><r>rickmoynihan</r>I’ve looked into this in the past and you can plug other backends/databases into core.logic and reason over them… there’s an example in the core.logic repo itself which is backed off datomic; but you could in principle plug anything in.

On the parallelisation front I’ve also superficially looked at that too — parallelising it is in theory trivially easy; the difficulty is doing so in such a way that you don’t make it slower.

There have been a number of experiments already doing precisely sort of things you’re talking about e.g. porting the monadic streams to core.async/CSP processes:

<a href="https://github.com/halgari/async-mu-kanren/blob/master/src/async_mu_kanren/core.clj" target="_blank">https://github.com/halgari/async-mu-kanren/blob/master/src/async_mu_kanren/core.clj</a>

To my knowledge though they’re usually slower because you end up with too much parallelism and the coordination overhead quickly dominates the computation.</z><z id="t1674373351" t="agh2o [:attrs {:href &quot;/_/_/users/U06HHF230&quot;}] thanks! I&apos;ll look into it"><y>#</y><d>2023-01-22</d><h>07:42</h><r>agh2o</r><a>@U06HHF230</a> thanks! I&apos;ll look into it</z><z id="t1674647617" t="cddr Has anyone tried using core.logic to generate test-data for event-driven systems? My dream would be to define a few constraints to represent the boundaries of what events might look like and how some event in the future can be related to one in the past, and have core.logic find/generate event sequences in combinations that I wouldn’t have thought of."><y>#</y><d>2023-01-25</d><h>11:53</h><w>cddr</w>Has anyone tried using core.logic to generate test-data for event-driven systems? My dream would be to define a few constraints to represent the boundaries of what events might look like and how some event in the future can be related to one in the past, and have core.logic find/generate event sequences in combinations that I wouldn’t have thought of.</z><z id="t1674650304" t="cddr And also a more specific question about the arithmetic ns https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/arithmetic.clj I was trying to generate a pair of related events using the fragment below. It works until I try to constrain the x/y attributes such that sx/sy are greater than px/py. The code below fails because “lvar cannot be cast to number”. So how is one supposed to use the arithmetic goals? I don’t see any examples or tests that use this namespace (run* [evs] (fresh [p px py] (fresh [s sx sy] (== p {:name &quot;pass&quot; :x px :y py}) (== s {:name &quot;shot&quot; :x sx :y sy}) (conso p [s] evs) (&gt; px sx) (&gt; py sy))))"><y>#</y><d>2023-01-25</d><h>12:38</h><w>cddr</w>And also a more specific question about the arithmetic ns

<a href="https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/arithmetic.clj" target="_blank">https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/arithmetic.clj</a>

I was trying to generate a pair of related events using the fragment below. It works until I try to constrain the x/y attributes such that sx/sy are greater than px/py. The code below fails because “lvar cannot be cast to number”. So how is one supposed to use the arithmetic goals? I don’t see any examples or tests that use this namespace

<pre>(run* [evs]
  (fresh [p px py]
    (fresh [s sx sy]
      (== p {:name &quot;pass&quot;
             :x px
             :y py})
      (== s {:name &quot;shot&quot;
             :x sx
             :y sy})
      (conso p [s] evs)
      (&gt; px sx)
      (&gt; py sy))))</pre></z><z id="t1674650511" t="cddr Ah figured it out. Need the fd namespace."><y>#</y><d>2023-01-25</d><h>12:41</h><w>cddr</w>Ah figured it out. Need the <code>fd</code> namespace.</z><z id="t1675261405" t="Benjamin where did the logic/defrel macro go that is used in &quot;The Joy of Clojure&quot; ?"><y>#</y><d>2023-02-01</d><h>14:23</h><w>Benjamin</w>where did the <code>logic/defrel</code> macro go that is used in &quot;The Joy of Clojure&quot; ?</z><z id="t1675266759" t="Ben Sless pldb/rel iirc"><y>#</y><d>2023-02-01</d><h>15:52</h><r>Ben Sless</r>pldb/rel iirc</z><z id="t1675266842" t="Ben Sless https://clojuredocs.org/clojure.core.logic.pldb/db-rel"><y>#</y><d>2023-02-01</d><h>15:54</h><r>Ben Sless</r><a href="https://clojuredocs.org/clojure.core.logic.pldb/db-rel" target="_blank">https://clojuredocs.org/clojure.core.logic.pldb/db-rel</a></z><z id="t1675267219" t="Benjamin Ok i was thinking it must be this db namespace"><y>#</y><d>2023-02-01</d><h>16:00</h><r>Benjamin</r>Ok i was thinking it must be this db namespace</z><z id="t1675780892" t="Morten Emmanuel Schiøler Newbie question from a guy having trouble really grokking core.logic: I need to make a set of choices, each of which incur some known natural-number cost. I want to restrict the sum of these costs. I notice that fd/+ only takes 2 addends, which is basically what confounds me. Is there some reason that it would be a bad idea to generalize it, for instance like this: (defn pluso ([sum a b] (fd/+ a b sum)) ([sum a b c] (fresh [a+b] (fd/+ a b a+b) (fd/+ a+b c sum))) ([sum a b c &amp; addends] (fresh [a+b] (fd/+ a b a+b) (apply pluso sum a+b c addends)))) and then restrict my total sum of choices? That way, in the relation for my choice, I only need to say &quot;the cost of this choice is X&quot;, instead of relating it back to the summation constraint with &quot;now the running sum shall be further restricted&quot;. That seems like a win to me, because it let&apos;s me think about fewer things at once and reduces coupling between my relations. So summarising my questions: 1. Why does fd/+ not take a variable number of arguments out of the box? It seems non-idiomatic from the point of view of Clojure. 2. Is the pluso approach sound or problematic at scale? I won&apos;t have that many terms -- maybe a thousand or so, max. 3. How would a sensei go about formulating this type of constraint?"><y>#</y><d>2023-02-07</d><h>14:41</h><w>Morten Emmanuel Schiøler</w>Newbie question from a guy having trouble really grokking core.logic:

I need to make a set of choices, each of which incur some known natural-number cost. I want to restrict the sum of these costs. I notice that <code>fd/+</code> only takes 2 addends, which is basically what confounds me. Is there some reason that it would be a bad idea to generalize it, for instance like this:
<pre>(defn pluso
  ([sum a b]
   (fd/+ a b sum))
  ([sum a b c]
   (fresh [a+b]
     (fd/+ a b a+b)
     (fd/+ a+b c sum)))
  ([sum a b c &amp; addends]
   (fresh [a+b]
     (fd/+ a b a+b)
     (apply pluso sum a+b c addends))))</pre>
and then restrict my total sum of choices? That way, in the relation for my choice, I only need to say &quot;the cost of this choice is X&quot;, instead of relating it back to the summation constraint with &quot;now the running sum shall be further restricted&quot;. That seems like a win to me, because it let&apos;s me think about fewer things at once and reduces coupling between my relations.

So summarising my questions:
1. Why does <code>fd/+</code> not take a variable number of arguments out of the box? It seems non-idiomatic from the point of view of Clojure. 
2. Is the <code>pluso</code> approach sound or problematic at scale? I won&apos;t have that many terms -- maybe a thousand or so, max.
3. How would a sensei go about formulating this type of constraint?</z></g></div></body>