<!DOCTYPE html>
<head><title>instaparse</title><meta charset="UTF-8" /><style type="text/css">body {
    font-family: Monaco, Menlo, Consolas, "Courier New", sans-serif;
    font-size: 12px;
    margin: 15px;
}
h2 {text-align: center}
pre,
code {
    font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
    color: #333;
}
code {
    /*line-height: 1.2;*/
    white-space: normal;
    color: #c25;
    background-color: #f7f7f9;
    border: 1px solid #e1e1e8;
}
pre {
    margin: .5rem 0 .2rem;
    font-size: .75rem;
    /*line-height: 1.15rem;*/
    background: #fbfaf8;
    padding: .5rem;
    word-break: normal;
    display: block;
    border: 1px solid rgba(0, 0, 0, .15);
    white-space: pre-wrap;
    word-wrap: break-word;
    border-radius: 4px;
}
span {
    white-space: pre-wrap;
}
span.u {
    margin-top: 3px;
    /*margin-left: 10px;*/
    margin-right: 10px;
    background-color: lavender;
}
span.t:hover {
    text-decoration: underline;
    color: blue;
    cursor: pointer
}
div[t]:target > span.u {
    background-color: aquamarine
}

#filters-container {
    position: fixed;
    left: 50px;
    z-index: 1;
}
#filters-container > input {
    /*column:*/
    display: block;
    outline-color: aquamarine;
}

div[t] > a:first-child {
    text-decoration: none;
    color: blue;
    position: absolute;
    left: 3px;
}

div[t] > a:first-child:hover {
    text-decoration: underline;
    color: aquamarine;
}


</style></head><body><style id="css-text-filter"></style><style id="css-date-filter"></style><style id="css-filter-override"></style><p id="filters-container"><input id="text-filter" onkeyup="debtextfilter(this.value)" placeholder="filter text" type="string" /><button hidden="hidden" id="date-filter" onclick="cleardatefilter()"></button></p><h2>#instaparse</h2><pre><i>generated UTC: 2020-11-19 11:37:54</i><i>
latest data: <a href="https://clojurians-log.clojureverse.org/instaparse/2020-11-16">https://clojurians-log.clojureverse.org/instaparse/2020-11-16</a></i>
pro tips:
* Double click on text to filter by it. (doubleclick + cmd-f for extra points).
* Click on date to keep day visible regardless of filter.
* Click on time to keep hour visible regardless of filter.</pre><script>const textFilterInput = document.getElementById("text-filter");
const dateFilterInput = document.getElementById("date-filter");
const filterTextStyle = document.getElementById("css-text-filter");
const filterDateStyle = document.getElementById("css-date-filter");
const filterStyleOverride = document.getElementById("css-filter-override");

function textFilter(text) {
    var style = '';
    if (text.trim() !== '') {
        text.split(' ').forEach(function (t) {
            if (t !== '') {
                style = style + "div[t]:not([t*='" + t + "' i]) {display: none; opacity: 0.6}";
            }
        });
    }
    filterTextStyle.innerHTML = style;
}


function filterSelection (e) {
    let sel = document.getSelection();
    let txt = sel.toString();
    textFilterInput.value = (txt || "");
    textFilter(txt);
}
function debounce1(callback, delay) {
    let timeout;
    return function(arg) {
        clearTimeout(timeout);
        timeout = setTimeout(callback, delay, arg);
    }
}

function keyUp (e) {
    if (e.code === "KeyF" && e.ctrlKey) {
        let txt = document.getSelection().toString();
        if (txt.length > 0) {
            textFilterInput.value = (txt || "");
            textFilter(txt);
        }
    }
}


function showDateTimes (el, datestr) {
    dateFilterInput.innerText = "clear: " + datestr;
    dateFilterInput.hidden = false;
    let ids = [];
    const clicked = el.parentElement.parentElement;  // el = div#id/span.u/span.t
    ids.push(clicked.id);
    // var idbefore, idafter;
    let cursor = clicked;
    function nextCursor (cursor) {
        const id = (cursor && cursor.id);
        const t = (cursor && cursor.getAttribute("t"))
        if (id) {
            ids.push(id); //includes 1st next-id not matching date.
        } else {
            cursor = null;
        }
        if (t && t.startsWith(datestr)) {
        } else {
            cursor = null;
        }
        return cursor;
    }
    while (cursor) {
        cursor = nextCursor(cursor.previousElementSibling);
    }

    cursor = clicked;

    while (cursor) {
        cursor = nextCursor(cursor.nextElementSibling);
    }


    var style1 = '';
    var style2 = '';
    var content;
    if (datestr.includes(" ")) { //hour
        content = "*";
    } else {
        content = "**";
    }
    ids.forEach(function (id) {
        if (id) {
            style1 = style1 + ", #" + id;
            style2 = style2 + ", #" + id + " span.t:nth-child(2):after";
        }
    })
    if (style1) {
        style1 = style1.substring(1) + " {display: block !important}";
    }
    if (style2) {
        style2 = style2.substring(1) + " {content: \"" + content + "\"; position: absolute}"
    }
    filterDateStyle.innerHTML = style1 + "\n" + style2;
}

function filterDay (el) {
    showDateTimes(el, el.textContent);
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function filterHours (el) {
    showDateTimes(el,el.previousElementSibling.textContent + " " + el.textContent.substring(0, 2));
    el.scrollIntoView({behavior: "smooth", block: "center", inline: "start"});
}

function forceShowSelected (el) {
    var id = el.parentElement.id
    if (id) {
        filterStyleOverride.innerHTML = ""
            + "#" + id
            + " {display: block !important;}"
            + "#" + id + " span.t:nth-child(2):after"
            + " {content: \"*\"; position: absolute}"

    } else {
        filterStyleOverride.innerHTML = "";
    }
}


function cleardatefilter () {
    dateFilterInput.hidden = true;
    dateFilterInput.innerText = "";
    filterDateStyle.innerHTML = "";
}

const D = filterDay;
const H = filterHours;
const S = forceShowSelected;
const debtextfilter = debounce1(textFilter, 200);

function doubleClick (e) {
    if (e.target.tagName !== "INPUT") {
        filterSelection();
        e.target.scrollIntoView({behavior: "auto", block: "center", inline: "start"});
    }
}

document.ondblclick = doubleClick;
document.onkeyup = keyUp;
textFilterInput.focus();
</script><div><div id="t1434257103000012" t="2015-06-14 04:45:03 aengelberg @mhuebert: Re: recent instaparse-live changes: The memoization worked like a charm, the parsing is a lot faster now when only changing the sample. Great idea!"><a href="#t1434257103000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-14</span> <span class="t" onclick="H(this)">04:45:03</span>       aengelberg </span><span>@mhuebert: Re: recent instaparse-live changes: The memoization worked like a charm, the parsing is a lot faster now when only changing the sample. Great idea!</span></div><div id="t1434420027000016" t="2015-06-16 02:00:27 lucasbradstreet Howdy. instaparse-cljs 1.4.0.0-SNAPSHOT works with Clojure 1.7 now. Recent fixes from v1.3.5-1.4.0 haven&apos;t been ported to cljs yet. "><a href="#t1434420027000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:00:27</span>  lucasbradstreet </span><span>Howdy. instaparse-cljs 1.4.0.0-SNAPSHOT works with Clojure 1.7 now. Recent fixes from v1.3.5-1.4.0 haven&apos;t been ported to cljs yet. </span></div><div id="t1434420135000017" t="2015-06-16 02:02:15 aengelberg cc @canweriotnow"><a href="#t1434420135000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:02:15</span>       aengelberg </span><span>cc @canweriotnow</span></div><div id="t1434420177000019" t="2015-06-16 02:02:57 aengelberg @lucasbradstreet sweet!!! any plans to include tracing features? or is that not as applicable to cljs?"><a href="#t1434420177000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:02:57</span>       aengelberg </span><span>@lucasbradstreet sweet!!! any plans to include tracing features? or is that not as applicable to cljs?</span></div><div id="t1434420281000020" t="2015-06-16 02:04:41 aengelberg A lot of the hacky namespace reloading would probably be not doable on the cljs side. So maybe it would hit performance a little bit to include conditional tracing everywhere"><a href="#t1434420281000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:04:41</span>       aengelberg </span><span>A lot of the hacky namespace reloading would probably be not doable on the cljs side. So maybe it would hit performance a little bit to include conditional tracing everywhere</span></div><div id="t1434420285000021" t="2015-06-16 02:04:45 lucasbradstreet Depends on how hard it is to support. I can&apos;t throw too much more time into this for now. I think it usually makes sense to dev the parser in CLJ first, though instaparse-live may have changed my mind ;)"><a href="#t1434420285000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:04:45</span>  lucasbradstreet </span><span>Depends on how hard it is to support. I can&apos;t throw too much more time into this for now. I think it usually makes sense to dev the parser in CLJ first, though instaparse-live may have changed my mind ;)</span></div><div id="t1434420330000022" t="2015-06-16 02:05:30 lucasbradstreet Ah, yeah, if that&apos;s required I&apos;ll probably pass on it for now. "><a href="#t1434420330000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">02:05:30</span>  lucasbradstreet </span><span>Ah, yeah, if that&apos;s required I&apos;ll probably pass on it for now. </span></div><div id="t1434497680000025" t="2015-06-16 23:34:40 canweriotnow @lucasbradstreet: awesome. We&apos;re digging to find issues with processing certain chars or ranges in the cljs port...  “%x41-57” works, but “%x41” doesn’t. “%x79-7A” doesn’t... possibly one of the char fns in instaparse.abnf (cljs) - clj version works fine."><a href="#t1434497680000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:34:40</span>     canweriotnow </span><span>@lucasbradstreet: awesome. We&apos;re digging to find issues with processing certain chars or ranges in the cljs port...  “%x41-57” works, but “%x41” doesn’t. “%x79-7A” doesn’t... possibly one of the char fns in instaparse.abnf (cljs) - clj version works fine.</span></div><div id="t1434497701000026" t="2015-06-16 23:35:01 canweriotnow We&apos;ll submit an issue (or hopefully PR) when we track it down."><a href="#t1434497701000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:35:01</span>     canweriotnow </span><span>We&apos;ll submit an issue (or hopefully PR) when we track it down.</span></div><div id="t1434497960000027" t="2015-06-16 23:39:20 aengelberg Yeah, playing around in my REPL, the %x41 does not work for some reason."><a href="#t1434497960000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:39:20</span>       aengelberg </span><span>Yeah, playing around in my REPL, the %x41 does not work for some reason.</span></div><div id="t1434498318000028" t="2015-06-16 23:45:18 aengelberg https://github.com/lbradstreet/instaparse-cljs/blob/master/src/cljs/instaparse/abnf.cljs#L118"><a href="#t1434498318000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:45:18</span>       aengelberg </span><a href="https://github.com/lbradstreet/instaparse-cljs/blob/master/src/cljs/instaparse/abnf.cljs#L118" target="_blank">https://github.com/lbradstreet/instaparse-cljs/blob/master/src/cljs/instaparse/abnf.cljs#L118</a></div><div id="t1434498396000030" t="2015-06-16 23:46:36 aengelberg Should be (string (apply str (coerce-char (char-codes num1)))))"><a href="#t1434498396000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:46:36</span>       aengelberg </span><span>Should be (string (apply str (coerce-char (char-codes num1)))))</span></div><div id="t1434498444000031" t="2015-06-16 23:47:24 lucasbradstreet Ah cool. I won&apos;t have much time to push these changes atm but if you want to send me a PR I&apos;ll merge it. "><a href="#t1434498444000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:47:24</span>  lucasbradstreet </span><span>Ah cool. I won&apos;t have much time to push these changes atm but if you want to send me a PR I&apos;ll merge it. </span></div><div id="t1434498537000032" t="2015-06-16 23:48:57 canweriotnow Wow, awesome"><a href="#t1434498537000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:48:57</span>     canweriotnow </span><span>Wow, awesome</span></div><div id="t1434498545000033" t="2015-06-16 23:49:05 aengelberg @lucasbradstreet Actually I can&apos;t really tell what the purpose of char-codes is."><a href="#t1434498545000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:49:05</span>       aengelberg </span><span>@lucasbradstreet Actually I can&apos;t really tell what the purpose of char-codes is.</span></div><div id="t1434498562000034" t="2015-06-16 23:49:22 aengelberg It seems to take a character (possibly unicode) and split it into two characters. but at the REPL it doesn&apos;t seem to do that."><a href="#t1434498562000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:49:22</span>       aengelberg </span><span>It seems to take a character (possibly unicode) and split it into two characters. but at the REPL it doesn&apos;t seem to do that.</span></div><div id="t1434498758000035" t="2015-06-16 23:52:38 lucasbradstreet Just off the top of my head it is to deal with multibyte chars by getting each byte (charCodeAt)"><a href="#t1434498758000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:52:38</span>  lucasbradstreet </span><span>Just off the top of my head it is to deal with multibyte chars by getting each byte (charCodeAt)</span></div><div id="t1434499063000037" t="2015-06-16 23:57:43 canweriotnow hmm.. maybe  %x41-57  didn&apos;t actually work, but just didn&apos;t throw like  %x41 ... need to dig deeper."><a href="#t1434499063000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:57:43</span>     canweriotnow </span><span>hmm.. maybe </span><code>%x41-57</code><span> didn&apos;t actually work, but just didn&apos;t throw like </span><code>%x41</code><span>... need to dig deeper.</span></div><div id="t1434499185000038" t="2015-06-16 23:59:45 canweriotnow The thing we&apos;re doing is generating parsers for various URI/IRI schemes from the ABNF in their respective RFCs, so we&apos;re problably hitting edge cases like crazy  simple_smile"><a href="#t1434499185000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-16</span> <span class="t" onclick="H(this)">23:59:45</span>     canweriotnow </span><span>The thing we&apos;re doing is generating parsers for various URI/IRI schemes from the ABNF in their respective RFCs, so we&apos;re problably hitting edge cases like crazy </span><b>simple_smile</b></div><div id="t1434499594000039" t="2015-06-17 00:06:34 aengelberg That part of the abnf namespace seems not properly designed for supplementary characters altogether..."><a href="#t1434499594000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">00:06:34</span>       aengelberg </span><span>That part of the abnf namespace seems not properly designed for supplementary characters altogether...</span></div><div id="t1434499669000040" t="2015-06-17 00:07:49 aengelberg It isn&apos;t using any utility (unlike the clj version) to turn an oversized integer into a series of two characters."><a href="#t1434499669000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">00:07:49</span>       aengelberg </span><span>It isn&apos;t using any utility (unlike the clj version) to turn an oversized integer into a series of two characters.</span></div><div id="t1434506978000041" t="2015-06-17 02:09:38 aengelberg The  get-char-combinator  function needs a rework, so ABNF terminals like  %x5D-10FFFF  can work."><a href="#t1434506978000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">02:09:38</span>       aengelberg </span><span>The </span><code>get-char-combinator</code><span> function needs a rework, so ABNF terminals like </span><code>%x5D-10FFFF</code><span> can work.</span></div><div id="t1434507043000042" t="2015-06-17 02:10:43 aengelberg JavaScript, unlike Java, does not seem to support regular expressions with  \x{10FFFF} ."><a href="#t1434507043000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">02:10:43</span>       aengelberg </span><span>JavaScript, unlike Java, does not seem to support regular expressions with </span><code>\x{10FFFF}</code><span>.</span></div><div id="t1434507204000043" t="2015-06-17 02:13:24 aengelberg In instaparse for Clojure, single characters are represented as a string combinator with the surrogate pair (two 16-bit chars side by side), and a character range uses the regex  \x{10FFF}  syntax. ClojureScript or JavaScript appear to not have much support for either of these things. It may be impossible to support Unicode character ranges in ABNF without introducing third-party js libraries."><a href="#t1434507204000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">02:13:24</span>       aengelberg </span><span>In instaparse for Clojure, single characters are represented as a string combinator with the surrogate pair (two 16-bit chars side by side), and a character range uses the regex </span><code>\x{10FFF}</code><span> syntax. ClojureScript or JavaScript appear to not have much support for either of these things. It may be impossible to support Unicode character ranges in ABNF without introducing third-party js libraries.</span></div><div id="t1434508812000044" t="2015-06-17 02:40:12 aengelberg OK, the former is doable via goog.i18n.uChar/fromCharCode."><a href="#t1434508812000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">02:40:12</span>       aengelberg </span><span>OK, the former is doable via goog.i18n.uChar/fromCharCode.</span></div><div id="t1434513826000045" t="2015-06-17 04:03:46 lucasbradstreet Nice! Yeah, this character support code is probably the weakest part of the port. "><a href="#t1434513826000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">04:03:46</span>  lucasbradstreet </span><span>Nice! Yeah, this character support code is probably the weakest part of the port. </span></div><div id="t1434513878000046" t="2015-06-17 04:04:38 lucasbradstreet I&apos;m glad that you&apos;re finding these issues. I had a feeling there were some lurking issues there."><a href="#t1434513878000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">04:04:38</span>  lucasbradstreet </span><span>I&apos;m glad that you&apos;re finding these issues. I had a feeling there were some lurking issues there.</span></div><div id="t1434517003000047" t="2015-06-17 04:56:43 aengelberg goog has some utils to work with surrogate strings, but the regex (char range) seems impossible without pulling in an external dependency like Regenerate.  https://github.com/mathiasbynens/regenerate"><a href="#t1434517003000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">04:56:43</span>       aengelberg </span><span>goog has some utils to work with surrogate strings, but the regex (char range) seems impossible without pulling in an external dependency like Regenerate. </span><a href="https://github.com/mathiasbynens/regenerate" target="_blank">https://github.com/mathiasbynens/regenerate</a></div><div id="t1434519918000049" t="2015-06-17 05:45:18 lucasbradstreet Ah, yeah, I think I’d rather recreate the functionality internally than pull in extra deps. Definitely a bit of a pain though."><a href="#t1434519918000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">05:45:18</span>  lucasbradstreet </span><span>Ah, yeah, I think I’d rather recreate the functionality internally than pull in extra deps. Definitely a bit of a pain though.</span></div><div id="t1434520044000050" t="2015-06-17 05:47:24 lucasbradstreet Interesting  https://mathiasbynens.be/notes/javascript-unicode"><a href="#t1434520044000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">05:47:24</span>  lucasbradstreet </span><span>Interesting </span><a href="https://mathiasbynens.be/notes/javascript-unicode" target="_blank">https://mathiasbynens.be/notes/javascript-unicode</a></div><div id="t1434520064000051" t="2015-06-17 05:47:44 lucasbradstreet I wonder if this issue is true for all browsers"><a href="#t1434520064000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">05:47:44</span>  lucasbradstreet </span><span>I wonder if this issue is true for all browsers</span></div><div id="t1434520065000052" t="2015-06-17 05:47:45 lucasbradstreet https://mathiasbynens.be/notes/es6-unicode-regex"><a href="#t1434520065000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">05:47:45</span>  lucasbradstreet </span><a href="https://mathiasbynens.be/notes/es6-unicode-regex" target="_blank">https://mathiasbynens.be/notes/es6-unicode-regex</a></div><div id="t1434520129000053" t="2015-06-17 05:48:49 lucasbradstreet Actually, if you could create a PR with a failing cljs test case that would be a good place to start"><a href="#t1434520129000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">05:48:49</span>  lucasbradstreet </span><span>Actually, if you could create a PR with a failing cljs test case that would be a good place to start</span></div><div id="t1434560441000054" t="2015-06-17 17:00:41 aengelberg https://github.com/lbradstreet/instaparse-cljs/pull/9"><a href="#t1434560441000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">17:00:41</span>       aengelberg </span><a href="https://github.com/lbradstreet/instaparse-cljs/pull/9" target="_blank">https://github.com/lbradstreet/instaparse-cljs/pull/9</a></div><div id="t1434562897000056" t="2015-06-17 17:41:37 aengelberg Hmm, now I&apos;m mildly concerned because circleci is passing... ;)"><a href="#t1434562897000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">17:41:37</span>       aengelberg </span><span>Hmm, now I&apos;m mildly concerned because circleci is passing... ;)</span></div><div id="t1434563526000057" t="2015-06-17 17:52:06 aengelberg Hmm, I think that&apos;s because there isn&apos;t really a notion of the cljs tests &quot;passing&quot; or &quot;failing&quot; (no exit codes)"><a href="#t1434563526000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-17</span> <span class="t" onclick="H(this)">17:52:06</span>       aengelberg </span><span>Hmm, I think that&apos;s because there isn&apos;t really a notion of the cljs tests &quot;passing&quot; or &quot;failing&quot; (no exit codes)</span></div><div id="t1434610056000059" t="2015-06-18 06:47:36 lucasbradstreet @aengelberg: I gave you commit access to instaparse-cljs, feel free to push anything you want, or create PRs and I’ll review them"><a href="#t1434610056000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-18</span> <span class="t" onclick="H(this)">06:47:36</span>  lucasbradstreet </span><span>@aengelberg: I gave you commit access to instaparse-cljs, feel free to push anything you want, or create PRs and I’ll review them</span></div><div id="t1434639795000060" t="2015-06-18 15:03:15 aengelberg Thanks @lucasbradstreet! I&apos;m working on some changes to clj instaparse that add special combinators for Unicode char ranges; it improves performance and makes it more portable to cljs."><a href="#t1434639795000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-18</span> <span class="t" onclick="H(this)">15:03:15</span>       aengelberg </span><span>Thanks @lucasbradstreet! I&apos;m working on some changes to clj instaparse that add special combinators for Unicode char ranges; it improves performance and makes it more portable to cljs.</span></div><div id="t1434680449000062" t="2015-06-19 02:20:49 aengelberg @lucasbradstreet: have you considered using cljx for the instaparse source code as well, so it&apos;s easier to merge upstream changes?"><a href="#t1434680449000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-19</span> <span class="t" onclick="H(this)">02:20:49</span>       aengelberg </span><span>@lucasbradstreet: have you considered using cljx for the instaparse source code as well, so it&apos;s easier to merge upstream changes?</span></div><div id="t1434680732000063" t="2015-06-19 02:25:32 lucasbradstreet Yes, that one is a bit of a trade off. There will definitely be more merge issues and it does kinda uglify the code a lot. It mostly depends on whether Mark would prefer separate cljs and clj, or cljx in an eventual upstream merge"><a href="#t1434680732000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-19</span> <span class="t" onclick="H(this)">02:25:32</span>  lucasbradstreet </span><span>Yes, that one is a bit of a trade off. There will definitely be more merge issues and it does kinda uglify the code a lot. It mostly depends on whether Mark would prefer separate cljs and clj, or cljx in an eventual upstream merge</span></div><div id="t1434681165000064" t="2015-06-19 02:32:45 aengelberg I was thinking it might actually make it easier to merge upstream changes, because currently if a feature is changed in the clj version, it is quietly merged into the clj source without changing the cljs side at all."><a href="#t1434681165000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-19</span> <span class="t" onclick="H(this)">02:32:45</span>       aengelberg </span><span>I was thinking it might actually make it easier to merge upstream changes, because currently if a feature is changed in the clj version, it is quietly merged into the clj source without changing the cljs side at all.</span></div><div id="t1435077246000066" t="2015-06-23 16:34:06 aengelberg [ANN] Instaparse 1.4.1  https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#141"><a href="#t1435077246000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-23</span> <span class="t" onclick="H(this)">16:34:06</span>       aengelberg </span><span>[ANN] Instaparse 1.4.1 </span><a href="https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#141" target="_blank">https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#141</a></div><div id="t1435092584000068" t="2015-06-23 20:49:44 aengelberg @lucasbradstreet: I&apos;ve started a  cljs-1.4.1  branch, that has the upstream commits merged in as well as a cljs port of the Unicode support (the unicode test case now passes!)"><a href="#t1435092584000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-23</span> <span class="t" onclick="H(this)">20:49:44</span>       aengelberg </span><span>@lucasbradstreet: I&apos;ve started a </span><code>cljs-1.4.1</code><span> branch, that has the upstream commits merged in as well as a cljs port of the Unicode support (the unicode test case now passes!)</span></div><div id="t1435111345000069" t="2015-06-24 02:02:25 lucasbradstreet Nicely done!"><a href="#t1435111345000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">02:02:25</span>  lucasbradstreet </span><span>Nicely done!</span></div><div id="t1435123099000070" t="2015-06-24 05:18:19 lucasbradstreet @aengelberg: you&apos;re a machine!"><a href="#t1435123099000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:18:19</span>  lucasbradstreet </span><span>@aengelberg: you&apos;re a machine!</span></div><div id="t1435123163000071" t="2015-06-24 05:19:23 lucasbradstreet I&apos;ll review the PR. Assuming all is well, I&apos;ll push a new snapshot and we can get ready for a prod artefact "><a href="#t1435123163000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:19:23</span>  lucasbradstreet </span><span>I&apos;ll review the PR. Assuming all is well, I&apos;ll push a new snapshot and we can get ready for a prod artefact </span></div><div id="t1435123478000072" t="2015-06-24 05:24:38 aengelberg @lucasbradstreet: Thanks!"><a href="#t1435123478000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:24:38</span>       aengelberg </span><span>@lucasbradstreet: Thanks!</span></div><div id="t1435124619000073" t="2015-06-24 05:43:39 lucasbradstreet New 1.4.1.0-SNAPSHOT on clojars  simple_smile"><a href="#t1435124619000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:43:39</span>  lucasbradstreet </span><span>New 1.4.1.0-SNAPSHOT on clojars </span><b>simple_smile</b></div><div id="t1435124643000074" t="2015-06-24 05:44:03 lucasbradstreet I’ll push 1.4.1.0 to clojars once mhuebert gives the OK"><a href="#t1435124643000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:44:03</span>  lucasbradstreet </span><span>I’ll push 1.4.1.0 to clojars once mhuebert gives the OK</span></div><div id="t1435124660000075" t="2015-06-24 05:44:20 lucasbradstreet (or once we’ve got instaparse-live#8 figured out)"><a href="#t1435124660000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:44:20</span>  lucasbradstreet </span><span>(or once we’ve got instaparse-live#8 figured out)</span></div><div id="t1435124678000076" t="2015-06-24 05:44:38 lucasbradstreet It’s great that we’re in sync again"><a href="#t1435124678000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:44:38</span>  lucasbradstreet </span><span>It’s great that we’re in sync again</span></div><div id="t1435124877000077" t="2015-06-24 05:47:57 aengelberg Would recommend giving instaparse live &quot;the poop test&quot; a.k.a. insert  :shit:  at various places in the UI and see what breaks"><a href="#t1435124877000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:47:57</span>       aengelberg </span><span>Would recommend giving instaparse live &quot;the poop test&quot; a.k.a. insert </span><b>:shit:</b><span> at various places in the UI and see what breaks</span></div><div id="t1435124914000078" t="2015-06-24 05:48:34 aengelberg U+1F4A9"><a href="#t1435124914000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:48:34</span>       aengelberg </span><span>U+1F4A9</span></div><div id="t1435125044000079" t="2015-06-24 05:50:44 aengelberg (or any Unicode supplementary character, but poop is the most fun :D)"><a href="#t1435125044000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-24</span> <span class="t" onclick="H(this)">05:50:44</span>       aengelberg </span><span>(or any Unicode supplementary character, but poop is the most fun :D)</span></div><div id="t1435211420000080" t="2015-06-25 05:50:20 aengelberg Yay, it works!  http://instaparse-live.matt.is/#/-JsdFiDFdOmHFG9kb6YZ"><a href="#t1435211420000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">05:50:20</span>       aengelberg </span><span>Yay, it works! </span><a href="http://instaparse-live.matt.is/#/-JsdFiDFdOmHFG9kb6YZ" target="_blank">http://instaparse-live.matt.is/#/-JsdFiDFdOmHFG9kb6YZ</a></div><div id="t1435218578000081" t="2015-06-25 07:49:38 lucasbradstreet sweet!"><a href="#t1435218578000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">07:49:38</span>  lucasbradstreet </span><span>sweet!</span></div><div id="t1435218584000082" t="2015-06-25 07:49:44 lucasbradstreet I’ll put out a release artifact then  simple_smile"><a href="#t1435218584000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">07:49:44</span>  lucasbradstreet </span><span>I’ll put out a release artifact then </span><b>simple_smile</b></div><div id="t1435223779000083" t="2015-06-25 09:16:19 lucasbradstreet 1.4.1.0 artifact is up  simple_smile"><a href="#t1435223779000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">09:16:19</span>  lucasbradstreet </span><span>1.4.1.0 artifact is up </span><b>simple_smile</b></div><div id="t1435223787000084" t="2015-06-25 09:16:27 lucasbradstreet Good work"><a href="#t1435223787000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">09:16:27</span>  lucasbradstreet </span><span>Good work</span></div><div id="t1435248243000085" t="2015-06-25 16:04:03 aengelberg Thanks for being responsive / receptive to my changes! Looking forward to getting feedback from users on the new version."><a href="#t1435248243000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">16:04:03</span>       aengelberg </span><span>Thanks for being responsive / receptive to my changes! Looking forward to getting feedback from users on the new version.</span></div><div id="t1435248272000086" t="2015-06-25 16:04:32 aengelberg cc @canweriotnow, unicode char ranges have now been restored to sanity  😄"><a href="#t1435248272000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">16:04:32</span>       aengelberg </span><span>cc @canweriotnow, unicode char ranges have now been restored to sanity </span><b>😄</b></div><div id="t1435248285000087" t="2015-06-25 16:04:45 aengelberg ABNF char ranges, that is. (unicode support is also there if needed)"><a href="#t1435248285000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">16:04:45</span>       aengelberg </span><span>ABNF char ranges, that is. (unicode support is also there if needed)</span></div><div id="t1435274039000088" t="2015-06-25 23:13:59 canweriotnow @aengelberg thx, awesome!"><a href="#t1435274039000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-25</span> <span class="t" onclick="H(this)">23:13:59</span>     canweriotnow </span><span>@aengelberg thx, awesome!</span></div><div id="t1435297459000089" t="2015-06-26 05:44:19 lucasbradstreet @aengelberg: not a problem. I’m really happy the port is getting some use  simple_smile"><a href="#t1435297459000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-26</span> <span class="t" onclick="H(this)">05:44:19</span>  lucasbradstreet </span><span>@aengelberg: not a problem. I’m really happy the port is getting some use </span><b>simple_smile</b></div><div id="t1435297548000090" t="2015-06-26 05:45:48 aengelberg I know, I&apos;m excited as well ;)"><a href="#t1435297548000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-06-26</span> <span class="t" onclick="H(this)">05:45:48</span>       aengelberg </span><span>I know, I&apos;m excited as well ;)</span></div><div id="t1437513242000003" t="2015-07-21 21:14:02 marcofiset What are some approaches you guys use to interpret your parse tree?"><a href="#t1437513242000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:14:02</span>       marcofiset </span><span>What are some approaches you guys use to interpret your parse tree?</span></div><div id="t1437513739000004" t="2015-07-21 21:22:19 socksy you can use multimethods dispatching on node type"><a href="#t1437513739000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:22:19</span>           socksy </span><span>you can use multimethods dispatching on node type</span></div><div id="t1437513905000005" t="2015-07-21 21:25:05 socksy use a zipper to navigate the tree"><a href="#t1437513905000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:25:05</span>           socksy </span><span>use a zipper to navigate the tree</span></div><div id="t1437514436000006" t="2015-07-21 21:33:56 socksy or heck, just use  https://clojure.github.io/clojure/clojure.walk-api.html"><a href="#t1437514436000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:33:56</span>           socksy </span><span>or heck, just use </span><a href="https://clojure.github.io/clojure/clojure.walk-api.html" target="_blank">https://clojure.github.io/clojure/clojure.walk-api.html</a></div><div id="t1437514510000007" t="2015-07-21 21:35:10 socksy recommend using postwalk, and then writing a function to do whatever you’re thinking"><a href="#t1437514510000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:35:10</span>           socksy </span><span>recommend using postwalk, and then writing a function to do whatever you’re thinking</span></div><div id="t1437514562000008" t="2015-07-21 21:36:02 socksy depends on how you want to eval, it’s a wee bit harder for compilation, but not much. You just need to make sure you emit a string. One solution would be to treat it as a side effect of whatever function you use"><a href="#t1437514562000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:36:02</span>           socksy </span><span>depends on how you want to eval, it’s a wee bit harder for compilation, but not much. You just need to make sure you emit a string. One solution would be to treat it as a side effect of whatever function you use</span></div><div id="t1437514604000009" t="2015-07-21 21:36:44 socksy admittedly, when I last did this I wasn’t using an instaparse’d parse tree, so maybe the technique varies a bit"><a href="#t1437514604000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:36:44</span>           socksy </span><span>admittedly, when I last did this I wasn’t using an instaparse’d parse tree, so maybe the technique varies a bit</span></div><div id="t1437514623000010" t="2015-07-21 21:37:03 socksy think I re-implemented postwalk also"><a href="#t1437514623000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:37:03</span>           socksy </span><span>think I re-implemented postwalk also</span></div><div id="t1437514771000011" t="2015-07-21 21:39:31 socksy seems instaparse you could maybe just use insta/transform"><a href="#t1437514771000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:39:31</span>           socksy </span><span>seems instaparse you could maybe just use insta/transform</span></div><div id="t1437514804000012" t="2015-07-21 21:40:04 socksy which must do a walk of the tree, and takes a map of node type to function"><a href="#t1437514804000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">21:40:04</span>           socksy </span><span>which must do a walk of the tree, and takes a map of node type to function</span></div><div id="t1437516996000013" t="2015-07-21 22:16:36 aengelberg @marcofiset  insta/transform  has always been sufficient for my use cases. Is there more sophisticated functionality you&apos;re looking for? If so,  clojure.walk/[pre|post]walk  might be the next step up."><a href="#t1437516996000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:16:36</span>       aengelberg </span><span>@marcofiset </span><code>insta/transform</code><span> has always been sufficient for my use cases. Is there more sophisticated functionality you&apos;re looking for? If so, </span><code>clojure.walk/[pre|post]walk</code><span> might be the next step up.</span></div><div id="t1437517272000014" t="2015-07-21 22:21:12 marcofiset I am not looking for anything particular, just wanted to start a discussion on the subject. I&apos;m using multi methods for the moment and I was curious about what other people might be using. "><a href="#t1437517272000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:21:12</span>       marcofiset </span><span>I am not looking for anything particular, just wanted to start a discussion on the subject. I&apos;m using multi methods for the moment and I was curious about what other people might be using. </span></div><div id="t1437517431000015" t="2015-07-21 22:23:51 marcofiset I didn&apos;t know about insta/transform, I&apos;ll definitely take a look."><a href="#t1437517431000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:23:51</span>       marcofiset </span><span>I didn&apos;t know about insta/transform, I&apos;ll definitely take a look.</span></div><div id="t1437517505000016" t="2015-07-21 22:25:05 aengelberg Yeah,  instaparse.core/transform  is a simple function that does the trick for simple parse tree consumption."><a href="#t1437517505000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:25:05</span>       aengelberg </span><span>Yeah, </span><code>instaparse.core/transform</code><span> is a simple function that does the trick for simple parse tree consumption.</span></div><div id="t1437517520000017" t="2015-07-21 22:25:20 aengelberg Hey, that rhymes"><a href="#t1437517520000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:25:20</span>       aengelberg </span><span>Hey, that rhymes</span></div><div id="t1437517550000018" t="2015-07-21 22:25:50 aengelberg @marcofiset Take a look at this section of the readme:  https://github.com/engelberg/instaparse#transforming-the-tree"><a href="#t1437517550000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:25:50</span>       aengelberg </span><span>@marcofiset Take a look at this section of the readme: </span><a href="https://github.com/engelberg/instaparse#transforming-the-tree" target="_blank">https://github.com/engelberg/instaparse#transforming-the-tree</a></div><div id="t1437518172000020" t="2015-07-21 22:36:12 marcofiset Wow, I&apos;m really impressed with the arithmetic example! Very straightforward and simple. My multi methods solution is going to the trash and will be replaced by something similar  😃"><a href="#t1437518172000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-21</span> <span class="t" onclick="H(this)">22:36:12</span>       marcofiset </span><span>Wow, I&apos;m really impressed with the arithmetic example! Very straightforward and simple. My multi methods solution is going to the trash and will be replaced by something similar </span><b>😃</b></div><div id="t1437564004000021" t="2015-07-22 11:20:04 marcofiset I’ve been noticing something with a new project using instaparse. It seems that everything I get out of the parser is wrapped in a list. I don’t recall having seen this behaviour before. Can someone enlighten me?  simple_smile"><a href="#t1437564004000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-22</span> <span class="t" onclick="H(this)">11:20:04</span>       marcofiset </span><span>I’ve been noticing something with a new project using instaparse. It seems that everything I get out of the parser is wrapped in a list. I don’t recall having seen this behaviour before. Can someone enlighten me? </span><b>simple_smile</b></div><div id="t1437566567000022" t="2015-07-22 12:02:47 marcofiset After a couple of quick tests, it seems to be my particular grammar that causes this, but I&apos;m not sure why."><a href="#t1437566567000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-22</span> <span class="t" onclick="H(this)">12:02:47</span>       marcofiset </span><span>After a couple of quick tests, it seems to be my particular grammar that causes this, but I&apos;m not sure why.</span></div><div id="t1437582944000023" t="2015-07-22 16:35:44 aengelberg @marcofiset: are you hiding the root tag (`&lt;S&gt; = ...`)? If so, this is by design as explained in this section of the readme:  https://github.com/engelberg/instaparse#hiding-tags"><a href="#t1437582944000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-22</span> <span class="t" onclick="H(this)">16:35:44</span>       aengelberg </span><span>@marcofiset: are you hiding the root tag (`&lt;S&gt; = ...`)? If so, this is by design as explained in this section of the readme: </span><a href="https://github.com/engelberg/instaparse#hiding-tags" target="_blank">https://github.com/engelberg/instaparse#hiding-tags</a></div><div id="t1437597114000025" t="2015-07-22 20:31:54 marcofiset You&apos;re right, that was it."><a href="#t1437597114000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-22</span> <span class="t" onclick="H(this)">20:31:54</span>       marcofiset </span><span>You&apos;re right, that was it.</span></div><div id="t1437597153000026" t="2015-07-22 20:32:33 marcofiset I decided not to ignore it instead, and introduced a hidden sub-expression which handles the recursivity."><a href="#t1437597153000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-07-22</span> <span class="t" onclick="H(this)">20:32:33</span>       marcofiset </span><span>I decided not to ignore it instead, and introduced a hidden sub-expression which handles the recursivity.</span></div><div id="t1438909199000028" t="2015-08-07 00:59:59 micha hello everyone, is there a grammar for clojure source that i can use in instaparse?"><a href="#t1438909199000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">00:59:59</span>            micha </span><span>hello everyone, is there a grammar for clojure source that i can use in instaparse?</span></div><div id="t1438909233000029" t="2015-08-07 01:00:33 micha or EDN would probably work in a pinch too"><a href="#t1438909233000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:00:33</span>            micha </span><span>or EDN would probably work in a pinch too</span></div><div id="t1438909483000030" t="2015-08-07 01:04:43 aengelberg Not that I know of. Maybe this would help, you could port the ANTLR grammar into EBNF somehow  https://stackoverflow.com/questions/3902813/is-there-a-language-spec-for-clojure"><a href="#t1438909483000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:04:43</span>       aengelberg </span><span>Not that I know of. Maybe this would help, you could port the ANTLR grammar into EBNF somehow </span><a href="https://stackoverflow.com/questions/3902813/is-there-a-language-spec-for-clojure" target="_blank">https://stackoverflow.com/questions/3902813/is-there-a-language-spec-for-clojure</a></div><div id="t1438909609000032" t="2015-08-07 01:06:49 aengelberg Although an EDN parser wouldn&apos;t be too hard to make from scratch. It&apos;s mostly balanced parens with various types of leafs or delimiters. The hard part is strings, handling all the  \&quot;  stuff"><a href="#t1438909609000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:06:49</span>       aengelberg </span><span>Although an EDN parser wouldn&apos;t be too hard to make from scratch. It&apos;s mostly balanced parens with various types of leafs or delimiters. The hard part is strings, handling all the </span><code>\&quot;</code><span> stuff</span></div><div id="t1438909642000033" t="2015-08-07 01:07:22 aengelberg And comments"><a href="#t1438909642000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:07:22</span>       aengelberg </span><span>And comments</span></div><div id="t1438909651000034" t="2015-08-07 01:07:31 micha yeah i was thinking that also, really i just need curly braces, because i only want to parse maps"><a href="#t1438909651000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:07:31</span>            micha </span><span>yeah i was thinking that also, really i just need curly braces, because i only want to parse maps</span></div><div id="t1438909669000036" t="2015-08-07 01:07:49 micha but curlies can appear in strings"><a href="#t1438909669000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:07:49</span>            micha </span><span>but curlies can appear in strings</span></div><div id="t1438909671000037" t="2015-08-07 01:07:51 aengelberg Maps with no lists / sets as keys or values?"><a href="#t1438909671000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:07:51</span>       aengelberg </span><span>Maps with no lists / sets as keys or values?</span></div><div id="t1438909715000038" t="2015-08-07 01:08:35 micha yeah the map can contain anything, but i can presumably slurp that in and just look for the matching curly"><a href="#t1438909715000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:08:35</span>            micha </span><span>yeah the map can contain anything, but i can presumably slurp that in and just look for the matching curly</span></div><div id="t1438909736000039" t="2015-08-07 01:08:56 aengelberg If you get the string terminal right, Instaparse will be smart about closing parens even if parens appear within the string"><a href="#t1438909736000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:08:56</span>       aengelberg </span><span>If you get the string terminal right, Instaparse will be smart about closing parens even if parens appear within the string</span></div><div id="t1438909780000040" t="2015-08-07 01:09:40 micha how about indentation-based languages?"><a href="#t1438909780000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:09:40</span>            micha </span><span>how about indentation-based languages?</span></div><div id="t1438909787000041" t="2015-08-07 01:09:47 aengelberg ehhhhhh"><a href="#t1438909787000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:09:47</span>       aengelberg </span><span>ehhhhhh</span></div><div id="t1438909853000042" t="2015-08-07 01:10:53 micha haha yeah"><a href="#t1438909853000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:10:53</span>            micha </span><span>haha yeah</span></div><div id="t1438909873000043" t="2015-08-07 01:11:13 aengelberg &quot;You&apos;re thinking in the wrong mindset&quot;  https://imgur.com/gallery/M5wl14r"><a href="#t1438909873000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:11:13</span>       aengelberg </span><span>&quot;You&apos;re thinking in the wrong mindset&quot; </span><a href="https://imgur.com/gallery/M5wl14r" target="_blank">https://imgur.com/gallery/M5wl14r</a></div><div id="t1438909932000045" t="2015-08-07 01:12:12 micha hahahaha excellent reference there"><a href="#t1438909932000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:12:12</span>            micha </span><span>hahahaha excellent reference there</span></div><div id="t1438909960000046" t="2015-08-07 01:12:40 micha the project i&apos;m working on is a generalized, abstract sort of markdown"><a href="#t1438909960000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:12:40</span>            micha </span><span>the project i&apos;m working on is a generalized, abstract sort of markdown</span></div><div id="t1438909991000047" t="2015-08-07 01:13:11 micha it&apos;s designed to mix well with prose, so indentation based structure is a big win"><a href="#t1438909991000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:13:11</span>            micha </span><span>it&apos;s designed to mix well with prose, so indentation based structure is a big win</span></div><div id="t1438910057000048" t="2015-08-07 01:14:17 aengelberg So like, prose at the top level, important stuff indented?"><a href="#t1438910057000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:14:17</span>       aengelberg </span><span>So like, prose at the top level, important stuff indented?</span></div><div id="t1438910222000049" t="2015-08-07 01:17:02 micha # This is line 1 of a certain type of block.
  The block continues here because of the indentation.

* This could be a list item

  p With a paragraph in it
    that continues on multiple lines...and
    has a strange #(inline something or other
    delimited by hash-parens)#...

  ~~~{:foo &quot;bar&quot;, :baz 123} tags can also have
    attributes parsed as EDN...

* here is the next list item
"><a href="#t1438910222000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:17:02</span>            micha </span><pre># This is line 1 of a certain type of block.
  The block continues here because of the indentation.

* This could be a list item

  p With a paragraph in it
    that continues on multiple lines...and
    has a strange #(inline something or other
    delimited by hash-parens)#...

  ~~~{:foo &quot;bar&quot;, :baz 123} tags can also have
    attributes parsed as EDN...

* here is the next list item
</pre></div><div id="t1438910292000052" t="2015-08-07 01:18:12 micha there we go"><a href="#t1438910292000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:18:12</span>            micha </span><span>there we go</span></div><div id="t1438910300000053" t="2015-08-07 01:18:20 micha the parser will be a macro really"><a href="#t1438910300000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:18:20</span>            micha </span><span>the parser will be a macro really</span></div><div id="t1438910307000054" t="2015-08-07 01:18:27 micha it will emit s-expressions"><a href="#t1438910307000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:18:27</span>            micha </span><span>it will emit s-expressions</span></div><div id="t1438910315000055" t="2015-08-07 01:18:35 micha calling multimethods"><a href="#t1438910315000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:18:35</span>            micha </span><span>calling multimethods</span></div><div id="t1438910329000056" t="2015-08-07 01:18:49 micha so you can implement dispatches for any tags you like"><a href="#t1438910329000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:18:49</span>            micha </span><span>so you can implement dispatches for any tags you like</span></div><div id="t1438910350000057" t="2015-08-07 01:19:10 micha so what  # foo  means is up to you"><a href="#t1438910350000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:19:10</span>            micha </span><span>so what </span><code># foo</code><span> means is up to you</span></div><div id="t1438910397000058" t="2015-08-07 01:19:57 micha the indentation is crucial for making the thing general without special cases and hardcoded things"><a href="#t1438910397000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:19:57</span>            micha </span><span>the indentation is crucial for making the thing general without special cases and hardcoded things</span></div><div id="t1438910433000059" t="2015-08-07 01:20:33 aengelberg The reason &quot;ehhhh&quot; is the visceral response to indentation based langs in instaparse is because in CFGs it&apos;s difficult if not impossible to remember how many spaces / tabs you&apos;re looking for on each line."><a href="#t1438910433000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:20:33</span>       aengelberg </span><span>The reason &quot;ehhhh&quot; is the visceral response to indentation based langs in instaparse is because in CFGs it&apos;s difficult if not impossible to remember how many spaces / tabs you&apos;re looking for on each line.</span></div><div id="t1438910455000060" t="2015-08-07 01:20:55 aengelberg So it&apos;s really only a problem if you have chunks within chunks that are indented even more."><a href="#t1438910455000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:20:55</span>       aengelberg </span><span>So it&apos;s really only a problem if you have chunks within chunks that are indented even more.</span></div><div id="t1438910480000061" t="2015-08-07 01:21:20 micha yeah, and i want to support even more tricky things, like indentation plus extra whitespace at the front of the line"><a href="#t1438910480000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:21:20</span>            micha </span><span>yeah, and i want to support even more tricky things, like indentation plus extra whitespace at the front of the line</span></div><div id="t1438910497000062" t="2015-08-07 01:21:37 micha i have a naive handmade parser now to parse the blocks"><a href="#t1438910497000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:21:37</span>            micha </span><span>i have a naive handmade parser now to parse the blocks</span></div><div id="t1438910512000063" t="2015-08-07 01:21:52 micha it looks for tags that can start a block"><a href="#t1438910512000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:21:52</span>            micha </span><span>it looks for tags that can start a block</span></div><div id="t1438910520000064" t="2015-08-07 01:22:00 micha then it looks for the &quot;outdent&quot;"><a href="#t1438910520000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:22:00</span>            micha </span><span>then it looks for the &quot;outdent&quot;</span></div><div id="t1438910531000065" t="2015-08-07 01:22:11 micha so it doesn&apos;t look for a specific amount of indentation"><a href="#t1438910531000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:22:11</span>            micha </span><span>so it doesn&apos;t look for a specific amount of indentation</span></div><div id="t1438910547000066" t="2015-08-07 01:22:27 aengelberg Example?"><a href="#t1438910547000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:22:27</span>       aengelberg </span><span>Example?</span></div><div id="t1438910554000067" t="2015-08-07 01:22:34 micha it looks for a minimum amount of indentation, but you can use more"><a href="#t1438910554000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:22:34</span>            micha </span><span>it looks for a minimum amount of indentation, but you can use more</span></div><div id="t1438910640000068" t="2015-08-07 01:24:00 micha # This is all
  part of the
    same block
  and the next
  block
    doesnt
      start until the
  an &quot;outdent&quot; is seen

This is an outdent, so
the above block will 
have been ended.
"><a href="#t1438910640000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:24:00</span>            micha </span><pre># This is all
  part of the
    same block
  and the next
  block
    doesnt
      start until the
  an &quot;outdent&quot; is seen

This is an outdent, so
the above block will 
have been ended.
</pre></div><div id="t1438910674000069" t="2015-08-07 01:24:34 micha however,"><a href="#t1438910674000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:24:34</span>            micha </span><span>however,</span></div><div id="t1438910727000070" t="2015-08-07 01:25:27 micha # This is not
  all part of the same
  # block because this
    tag creates a nested
    block
"><a href="#t1438910727000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:25:27</span>            micha </span><pre># This is not
  all part of the same
  # block because this
    tag creates a nested
    block
</pre></div><div id="t1438910815000071" t="2015-08-07 01:26:55 aengelberg Hmm, what if you parse each block and then run the parser AGAIN on the text in the block to find subblocks?"><a href="#t1438910815000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:26:55</span>       aengelberg </span><span>Hmm, what if you parse each block and then run the parser AGAIN on the text in the block to find subblocks?</span></div><div id="t1438910832000072" t="2015-08-07 01:27:12 micha hm"><a href="#t1438910832000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:27:12</span>            micha </span><span>hm</span></div><div id="t1438910866000073" t="2015-08-07 01:27:46 micha i think i could give up the leading extra spaces thing, too"><a href="#t1438910866000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:27:46</span>            micha </span><span>i think i could give up the leading extra spaces thing, too</span></div><div id="t1438910884000074" t="2015-08-07 01:28:04 micha and set indentation to some configurable fixed size"><a href="#t1438910884000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:28:04</span>            micha </span><span>and set indentation to some configurable fixed size</span></div><div id="t1438910904000075" t="2015-08-07 01:28:24 aengelberg (my-parser text) =&gt; ([:block &quot;This is not&quot; &quot;all part of the same&quot; &quot;# block because this&quot; &quot;   tag ...&quot;])
(insta/transform *1 {:block (fn [&amp; strs] (my-parser (str/join &quot;\n&quot; strs)))})
"><a href="#t1438910904000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:28:24</span>       aengelberg </span><pre>(my-parser text) =&gt; ([:block &quot;This is not&quot; &quot;all part of the same&quot; &quot;# block because this&quot; &quot;   tag ...&quot;])
(insta/transform *1 {:block (fn [&amp; strs] (my-parser (str/join &quot;\n&quot; strs)))})
</pre></div><div id="t1438910930000077" t="2015-08-07 01:28:50 aengelberg Except recursively smarter"><a href="#t1438910930000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:28:50</span>       aengelberg </span><span>Except recursively smarter</span></div><div id="t1438910939000078" t="2015-08-07 01:28:59 micha interesting"><a href="#t1438910939000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:28:59</span>            micha </span><span>interesting</span></div><div id="t1438910951000079" t="2015-08-07 01:29:11 aengelberg I just thought of this, it might end up being impractical."><a href="#t1438910951000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:29:11</span>       aengelberg </span><span>I just thought of this, it might end up being impractical.</span></div><div id="t1438910960000080" t="2015-08-07 01:29:20 aengelberg But that might be the way to do it."><a href="#t1438910960000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:29:20</span>       aengelberg </span><span>But that might be the way to do it.</span></div><div id="t1438911021000081" t="2015-08-07 01:30:21 micha i will play around with it and let you know how it works out"><a href="#t1438911021000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:30:21</span>            micha </span><span>i will play around with it and let you know how it works out</span></div><div id="t1438911047000082" t="2015-08-07 01:30:47 micha i can at least instaparse the inline stuff, if not the blocks"><a href="#t1438911047000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:30:47</span>            micha </span><span>i can at least instaparse the inline stuff, if not the blocks</span></div><div id="t1438911139000083" t="2015-08-07 01:32:19 aengelberg True"><a href="#t1438911139000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:32:19</span>       aengelberg </span><span>True</span></div><div id="t1438911170000084" t="2015-08-07 01:32:50 aengelberg Anyway, now that I think about it, this trick may be applicable to any indentation-based language"><a href="#t1438911170000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:32:50</span>       aengelberg </span><span>Anyway, now that I think about it, this trick may be applicable to any indentation-based language</span></div><div id="t1438911250000085" t="2015-08-07 01:34:10 micha it&apos;s also an interesting case because i need to parse &quot;any character that isn&apos;t a tag&quot;"><a href="#t1438911250000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:34:10</span>            micha </span><span>it&apos;s also an interesting case because i need to parse &quot;any character that isn&apos;t a tag&quot;</span></div><div id="t1438911261000086" t="2015-08-07 01:34:21 micha like the text in between tags"><a href="#t1438911261000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:34:21</span>            micha </span><span>like the text in between tags</span></div><div id="t1438911285000087" t="2015-08-07 01:34:45 micha i think i can use negative lookahead with regex like  #&quot;.&quot;"><a href="#t1438911285000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:34:45</span>            micha </span><span>i think i can use negative lookahead with regex like </span><code>#&quot;.&quot;</code></div><div id="t1438911347000088" t="2015-08-07 01:35:47 micha anyway thanks for the help! i&apos;ll let you know how it all works out"><a href="#t1438911347000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:35:47</span>            micha </span><span>anyway thanks for the help! i&apos;ll let you know how it all works out</span></div><div id="t1438911576000089" t="2015-08-07 01:39:36 aengelberg No problem, I&apos;d love to hear how it goes"><a href="#t1438911576000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-07</span> <span class="t" onclick="H(this)">01:39:36</span>       aengelberg </span><span>No problem, I&apos;d love to hear how it goes</span></div><div id="t1439821846000092" t="2015-08-17 14:30:46 micha @aengelberg: made some progress this weekend with my instaparse project!  https://github.com/adzerk-oss/zerkdown"><a href="#t1439821846000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">14:30:46</span>            micha </span><span>@aengelberg: made some progress this weekend with my instaparse project! </span><a href="https://github.com/adzerk-oss/zerkdown" target="_blank">https://github.com/adzerk-oss/zerkdown</a></div><div id="t1439821888000094" t="2015-08-17 14:31:28 micha it&apos;s a work in progress of course"><a href="#t1439821888000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">14:31:28</span>            micha </span><span>it&apos;s a work in progress of course</span></div><div id="t1439821914000095" t="2015-08-17 14:31:54 micha it does a braindead parsing of clojure maps/vectors"><a href="#t1439821914000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">14:31:54</span>            micha </span><span>it does a braindead parsing of clojure maps/vectors</span></div><div id="t1439821934000096" t="2015-08-17 14:32:14 micha https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/grammar.ebnf"><a href="#t1439821934000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">14:32:14</span>            micha </span><a href="https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/grammar.ebnf" target="_blank">https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/grammar.ebnf</a></div><div id="t1439821959000097" t="2015-08-17 14:32:39 micha feedback appreciated  simple_smile"><a href="#t1439821959000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">14:32:39</span>            micha </span><span>feedback appreciated </span><b>simple_smile</b></div><div id="t1439842701000098" t="2015-08-17 20:18:21 aengelberg @micha this project is very cool"><a href="#t1439842701000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:18:21</span>       aengelberg </span><span>@micha this project is very cool</span></div><div id="t1439842724000099" t="2015-08-17 20:18:44 aengelberg Does your ebnf allow  [{] ?"><a href="#t1439842724000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:18:44</span>       aengelberg </span><span>Does your ebnf allow </span><code>[{]</code><span>?</span></div><div id="t1439842755000100" t="2015-08-17 20:19:15 micha not in a  :CLJ  or  :VEC  block"><a href="#t1439842755000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:19:15</span>            micha </span><span>not in a </span><code>:CLJ</code><span> or </span><code>:VEC</code><span> block</span></div><div id="t1439842771000101" t="2015-08-17 20:19:31 micha [&quot;{&quot;]  would be ok though"><a href="#t1439842771000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:19:31</span>            micha </span><code>[&quot;{&quot;]</code><span> would be ok though</span></div><div id="t1439842805000102" t="2015-08-17 20:20:05 aengelberg &lt;VEC-CHAR&gt;              = !(LSB | RSB | DQ) ANY-CHAR  looks like it would allow mismatched map delimiters inside it"><a href="#t1439842805000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:20:05</span>       aengelberg </span><code>&lt;VEC-CHAR&gt;              = !(LSB | RSB | DQ) ANY-CHAR</code><span> looks like it would allow mismatched map delimiters inside it</span></div><div id="t1439842832000103" t="2015-08-17 20:20:32 micha oh interesting"><a href="#t1439842832000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:20:32</span>            micha </span><span>oh interesting</span></div><div id="t1439842852000104" t="2015-08-17 20:20:52 micha yeah it&apos;s ambiguous"><a href="#t1439842852000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:20:52</span>            micha </span><span>yeah it&apos;s ambiguous</span></div><div id="t1439842884000105" t="2015-08-17 20:21:24 micha !(LSB | RSB | STRING | MAP) ANY-CHAR  would be nice there"><a href="#t1439842884000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:21:24</span>            micha </span><code>!(LSB | RSB | STRING | MAP) ANY-CHAR</code><span> would be nice there</span></div><div id="t1439842920000106" t="2015-08-17 20:22:00 aengelberg then it would still allow mismatched quotes and delimiters because strings and maps don&apos;t successfully parse  simple_smile"><a href="#t1439842920000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:22:00</span>       aengelberg </span><span>then it would still allow mismatched quotes and delimiters because strings and maps don&apos;t successfully parse </span><b>simple_smile</b></div><div id="t1439842956000107" t="2015-08-17 20:22:36 micha hmm"><a href="#t1439842956000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:22:36</span>            micha </span><span>hmm</span></div><div id="t1439842997000108" t="2015-08-17 20:23:17 aengelberg maybe  (!(LSB | RSB | LCB | RCB | DQ) ANY-CHAR) | STRING | CLJ"><a href="#t1439842997000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:23:17</span>       aengelberg </span><span>maybe </span><code>(!(LSB | RSB | LCB | RCB | DQ) ANY-CHAR) | STRING | CLJ</code></div><div id="t1439843004000109" t="2015-08-17 20:23:24 micha yeah"><a href="#t1439843004000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:23:24</span>            micha </span><span>yeah</span></div><div id="t1439843022000110" t="2015-08-17 20:23:42 micha i will try that"><a href="#t1439843022000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:23:42</span>            micha </span><span>i will try that</span></div><div id="t1439843034000111" t="2015-08-17 20:23:54 micha i am planning to do the recursion from clojure btw"><a href="#t1439843034000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:23:54</span>            micha </span><span>i am planning to do the recursion from clojure btw</span></div><div id="t1439843064000112" t="2015-08-17 20:24:24 micha i will parse one level of indentation, then for each  :BLOCK  call insta again on the body"><a href="#t1439843064000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:24:24</span>            micha </span><span>i will parse one level of indentation, then for each </span><code>:BLOCK</code><span> call insta again on the body</span></div><div id="t1439843110000113" t="2015-08-17 20:25:10 micha it seems like it will be straightforward, i hope"><a href="#t1439843110000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:25:10</span>            micha </span><span>it seems like it will be straightforward, i hope</span></div><div id="t1439843122000114" t="2015-08-17 20:25:22 aengelberg cool"><a href="#t1439843122000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:25:22</span>       aengelberg </span><span>cool</span></div><div id="t1439843163000115" t="2015-08-17 20:26:03 aengelberg Just make sure instaparse Failures are returned / shortcircuited properly  simple_smile"><a href="#t1439843163000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:26:03</span>       aengelberg </span><span>Just make sure instaparse Failures are returned / shortcircuited properly </span><b>simple_smile</b></div><div id="t1439843188000116" t="2015-08-17 20:26:28 micha how do you mean?"><a href="#t1439843188000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:26:28</span>            micha </span><span>how do you mean?</span></div><div id="t1439843211000117" t="2015-08-17 20:26:51 aengelberg if a &quot;sub-parse&quot; returns a failure, then what?"><a href="#t1439843211000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:26:51</span>       aengelberg </span><span>if a &quot;sub-parse&quot; returns a failure, then what?</span></div><div id="t1439843383000118" t="2015-08-17 20:29:43 aengelberg I imagine it will be most idiomatic to call  insta/parse  again within the transformer. But my point is, if a parse failure arises (malformed zerkdown) within that, you will need to propagate that error properly  simple_smile"><a href="#t1439843383000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:29:43</span>       aengelberg </span><span>I imagine it will be most idiomatic to call </span><code>insta/parse</code><span> again within the transformer. But my point is, if a parse failure arises (malformed zerkdown) within that, you will need to propagate that error properly </span><b>simple_smile</b></div><div id="t1439843520000119" t="2015-08-17 20:32:00 micha ah right"><a href="#t1439843520000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:32:00</span>            micha </span><span>ah right</span></div><div id="t1439843558000120" t="2015-08-17 20:32:38 micha what did you mean before about strings and maps not successfully parsing?"><a href="#t1439843558000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:32:38</span>            micha </span><span>what did you mean before about strings and maps not successfully parsing?</span></div><div id="t1439843623000121" t="2015-08-17 20:33:43 aengelberg negative lookahead = make sure this thing does not successfully parse"><a href="#t1439843623000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:33:43</span>       aengelberg </span><span>negative lookahead = make sure this thing does not successfully parse</span></div><div id="t1439843831000122" t="2015-08-17 20:37:11 aengelberg !STRING x  means no &quot;complete well-formed strings&quot; allowed, but you probably wanted &quot;no double-quotes of any kind really&quot;"><a href="#t1439843831000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:37:11</span>       aengelberg </span><code>!STRING x</code><span> means no &quot;complete well-formed strings&quot; allowed, but you probably wanted &quot;no double-quotes of any kind really&quot;</span></div><div id="t1439844084000123" t="2015-08-17 20:41:24 aengelberg and then you can add in  | STRING  to allow well-formed strings"><a href="#t1439844084000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:41:24</span>       aengelberg </span><span>and then you can add in </span><code>| STRING</code><span> to allow well-formed strings</span></div><div id="t1439844643000124" t="2015-08-17 20:50:43 micha oh i see"><a href="#t1439844643000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:50:43</span>            micha </span><span>oh i see</span></div><div id="t1439844651000125" t="2015-08-17 20:50:51 micha i actually don&apos;t care about double quotes"><a href="#t1439844651000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:50:51</span>            micha </span><span>i actually don&apos;t care about double quotes</span></div><div id="t1439844670000126" t="2015-08-17 20:51:10 micha i just don&apos;t want well formed strings, because those can legitimately contain {}[] etc"><a href="#t1439844670000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:51:10</span>            micha </span><span>i just don&apos;t want well formed strings, because those can legitimately contain {}[] etc</span></div><div id="t1439844699000127" t="2015-08-17 20:51:39 micha i&apos;m not trying to fully parse the clojure data, i just need to know where it ends"><a href="#t1439844699000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:51:39</span>            micha </span><span>i&apos;m not trying to fully parse the clojure data, i just need to know where it ends</span></div><div id="t1439844719000128" t="2015-08-17 20:51:59 micha i send it as a string and use  clojure.core/read-string  on it later"><a href="#t1439844719000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:51:59</span>            micha </span><span>i send it as a string and use </span><code>clojure.core/read-string</code><span> on it later</span></div><div id="t1439844740000129" t="2015-08-17 20:52:20 aengelberg that&apos;s fair, but if  [{]}]  is allowed it&apos;s not exactly obvious where it ends  simple_smile"><a href="#t1439844740000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:52:20</span>       aengelberg </span><span>that&apos;s fair, but if </span><code>[{]}]</code><span> is allowed it&apos;s not exactly obvious where it ends </span><b>simple_smile</b></div><div id="t1439844753000130" t="2015-08-17 20:52:33 micha haha yes"><a href="#t1439844753000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:52:33</span>            micha </span><span>haha yes</span></div><div id="t1439844801000131" t="2015-08-17 20:53:21 micha very interesting"><a href="#t1439844801000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:53:21</span>            micha </span><span>very interesting</span></div><div id="t1439844809000132" t="2015-08-17 20:53:29 aengelberg anyway I don&apos;t think it&apos;s super hard to make the delimiters correct.  (!(LSB | RSB | LCB | RCB | DQ) ANY-CHAR) | STRING | CLJ"><a href="#t1439844809000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:53:29</span>       aengelberg </span><span>anyway I don&apos;t think it&apos;s super hard to make the delimiters correct. </span><code>(!(LSB | RSB | LCB | RCB | DQ) ANY-CHAR) | STRING | CLJ</code></div><div id="t1439844820000133" t="2015-08-17 20:53:40 aengelberg That basically says &quot;no double-quotes, UNLESS there is a well formed string&quot;"><a href="#t1439844820000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:53:40</span>       aengelberg </span><span>That basically says &quot;no double-quotes, UNLESS there is a well formed string&quot;</span></div><div id="t1439844848000134" t="2015-08-17 20:54:08 micha yes that&apos;s awesome"><a href="#t1439844848000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:54:08</span>            micha </span><span>yes that&apos;s awesome</span></div><div id="t1439844876000135" t="2015-08-17 20:54:36 micha testing was pretty easy to do, by configuring with different start rules"><a href="#t1439844876000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:54:36</span>            micha </span><span>testing was pretty easy to do, by configuring with different start rules</span></div><div id="t1439844895000136" t="2015-08-17 20:54:55 aengelberg yeah. just don&apos;t forget negative testing  simple_smile"><a href="#t1439844895000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:54:55</span>       aengelberg </span><span>yeah. just don&apos;t forget negative testing </span><b>simple_smile</b></div><div id="t1439844910000137" t="2015-08-17 20:55:10 micha ah right"><a href="#t1439844910000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:55:10</span>            micha </span><span>ah right</span></div><div id="t1439844919000138" t="2015-08-17 20:55:19 micha yeah i didn&apos;t think of that"><a href="#t1439844919000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:55:19</span>            micha </span><span>yeah i didn&apos;t think of that</span></div><div id="t1439845033000139" t="2015-08-17 20:57:13 aengelberg really cool idea. what is the intended use case for zerkdown?"><a href="#t1439845033000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">20:57:13</span>       aengelberg </span><span>really cool idea. what is the intended use case for zerkdown?</span></div><div id="t1439846216000140" t="2015-08-17 21:16:56 micha well i want to use it for just about everything!"><a href="#t1439846216000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:16:56</span>            micha </span><span>well i want to use it for just about everything!</span></div><div id="t1439846222000141" t="2015-08-17 21:17:02 micha mostly for websites"><a href="#t1439846222000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:17:02</span>            micha </span><span>mostly for websites</span></div><div id="t1439846234000142" t="2015-08-17 21:17:14 micha but i can imagine using it for literate programming and things like that"><a href="#t1439846234000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:17:14</span>            micha </span><span>but i can imagine using it for literate programming and things like that</span></div><div id="t1439846272000143" t="2015-08-17 21:17:52 micha but for making webapps it&apos;s really nice to have a &quot;prose&quot; syntax you can customize for your use case"><a href="#t1439846272000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:17:52</span>            micha </span><span>but for making webapps it&apos;s really nice to have a &quot;prose&quot; syntax you can customize for your use case</span></div><div id="t1439846317000144" t="2015-08-17 21:18:37 micha like normally you have like
 # My Title
 
that compiles down to
 &lt;h1&gt;My Title&lt;/h1&gt;
"><a href="#t1439846317000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:18:37</span>            micha </span><span>like normally you have like
</span><pre># My Title
</pre><span>
that compiles down to
</span><pre>&lt;h1&gt;My Title&lt;/h1&gt;
</pre></div><div id="t1439846421000145" t="2015-08-17 21:20:21 micha but what if you need something like
 &lt;h1&gt;My Title &lt;small&gt;The Best Thing Ever&lt;/small&gt;&lt;/h1&gt;
 
i want to be able to just define a new inline tag for that, like
 # My Title &lt;&lt;The Best Thing Ever&gt;&gt;
"><a href="#t1439846421000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:20:21</span>            micha </span><span>but what if you need something like
</span><pre>&lt;h1&gt;My Title &lt;small&gt;The Best Thing Ever&lt;/small&gt;&lt;/h1&gt;
</pre><span>
i want to be able to just define a new inline tag for that, like
</span><pre># My Title &lt;&lt;The Best Thing Ever&gt;&gt;
</pre></div><div id="t1439846438000146" t="2015-08-17 21:20:38 micha or even more complex things with behavior and everything, like forms and buttons"><a href="#t1439846438000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-17</span> <span class="t" onclick="H(this)">21:20:38</span>            micha </span><span>or even more complex things with behavior and everything, like forms and buttons</span></div><div id="t1439901225000147" t="2015-08-18 12:33:45 micha i got the recursive parser construction working! one weird trick instaparse doesn&apos;t want you to know about...  https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/parser.clj#L48-L60"><a href="#t1439901225000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-18</span> <span class="t" onclick="H(this)">12:33:45</span>            micha </span><span>i got the recursive parser construction working! one weird trick instaparse doesn&apos;t want you to know about... </span><a href="https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/parser.clj#L48-L60" target="_blank">https://github.com/adzerk-oss/zerkdown/blob/master/src/adzerk/zerkdown/parser.clj#L48-L60</a></div><div id="t1439910588000150" t="2015-08-18 15:09:48 aengelberg A programmer used this one weird trick to handle indented languages... click here to see what! (Lexer-based libraries HATE this!)"><a href="#t1439910588000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-18</span> <span class="t" onclick="H(this)">15:09:48</span>       aengelberg </span><span>A programmer used this one weird trick to handle indented languages... click here to see what! (Lexer-based libraries HATE this!)</span></div><div id="t1440630015000003" t="2015-08-26 23:00:15 nodename I’m having a little trouble with a simple parser:"><a href="#t1440630015000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-26</span> <span class="t" onclick="H(this)">23:00:15</span>         nodename </span><span>I’m having a little trouble with a simple parser:</span></div><div id="t1440630019000004" t="2015-08-26 23:00:19 nodename (def exp-parser
  (insta/parser
    &quot;S = Sexp
    Sexp = Term | &apos;(&apos; Term* &apos;)&apos;
    Term = Char+
    Char = #&apos;[a-z]&apos;&quot;))"><a href="#t1440630019000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-26</span> <span class="t" onclick="H(this)">23:00:19</span>         nodename </span><span>(def exp-parser
  (insta/parser
    &quot;S = Sexp
    Sexp = Term | &apos;(&apos; Term* &apos;)&apos;
    Term = Char+
    Char = #&apos;[a-z]&apos;&quot;))</span></div><div id="t1440630070000005" t="2015-08-26 23:01:10 nodename user=&gt; (exp-parser &quot;(hi)&quot;)
[:S [:Sexp &quot;(&quot; [:Term [:Char &quot;h&quot;]] [:Term [:Char &quot;i&quot;]] &quot;)&quot;]]
I thought the Char+ would make “hi” a single Term..."><a href="#t1440630070000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-26</span> <span class="t" onclick="H(this)">23:01:10</span>         nodename </span><span>user=&gt; (exp-parser &quot;(hi)&quot;)
[:S [:Sexp &quot;(&quot; [:Term [:Char &quot;h&quot;]] [:Term [:Char &quot;i&quot;]] &quot;)&quot;]]
I thought the Char+ would make “hi” a single Term...</span></div><div id="t1440660658000006" t="2015-08-27 07:30:58 ska @nodename: One Char is a character from the range given in the regexp.  You allow many Chars with the +.  Maybe you want Term = Char"><a href="#t1440660658000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:30:58</span>              ska </span><span>@nodename: One Char is a character from the range given in the regexp.  You allow many Chars with the +.  Maybe you want Term = Char</span></div><div id="t1440660674000007" t="2015-08-27 07:31:14 ska Char = #&apos;[a-z]+&apos;"><a href="#t1440660674000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:31:14</span>              ska </span><span>Char = #&apos;[a-z]+&apos;</span></div><div id="t1440660723000008" t="2015-08-27 07:32:03 ska So that the regexp eats the characters.  Of course then &quot;Char&quot; is not a really good name anymore and might become sth like Symbol or Name"><a href="#t1440660723000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:32:03</span>              ska </span><span>So that the regexp eats the characters.  Of course then &quot;Char&quot; is not a really good name anymore and might become sth like Symbol or Name</span></div><div id="t1440660777000009" t="2015-08-27 07:32:57 nodename Yes, that works, but I expected what I had to work too. Don’t see why not."><a href="#t1440660777000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:32:57</span>         nodename </span><span>Yes, that works, but I expected what I had to work too. Don’t see why not.</span></div><div id="t1440661797000010" t="2015-08-27 07:49:57 ska It actually does that, it&apos;s just not the first result.  Your grammar is ambiguous.  See the result of insta/parses"><a href="#t1440661797000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:49:57</span>              ska </span><span>It actually does that, it&apos;s just not the first result.  Your grammar is ambiguous.  See the result of insta/parses</span></div><div id="t1440661825000011" t="2015-08-27 07:50:25 ska The reason is, that + in instaparse is not greedy but allows all possible paths whereas + in the regexp would be greedy"><a href="#t1440661825000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:50:25</span>              ska </span><span>The reason is, that + in instaparse is not greedy but allows all possible paths whereas + in the regexp would be greedy</span></div><div id="t1440661892000012" t="2015-08-27 07:51:32 nodename Ah, thanks. Do you know how I could modify Term to make it greedy?"><a href="#t1440661892000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:51:32</span>         nodename </span><span>Ah, thanks. Do you know how I could modify Term to make it greedy?</span></div><div id="t1440661987000013" t="2015-08-27 07:53:07 ska My approach would be to use the regexp mentioned above.  To me that is kinda the tokenization step in instaparse.  I don&apos;t know if other solutions exists from the top off my head"><a href="#t1440661987000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:53:07</span>              ska </span><span>My approach would be to use the regexp mentioned above.  To me that is kinda the tokenization step in instaparse.  I don&apos;t know if other solutions exists from the top off my head</span></div><div id="t1440662063000014" t="2015-08-27 07:54:23 ska Looks like I tried that already and came to the conclusion that there is no other way:  https://github.com/ska2342/sourcetalk14/blob/master/de.skamphausen.stt14/src/de/skamphausen/stt14.clj#L460"><a href="#t1440662063000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:54:23</span>              ska </span><span>Looks like I tried that already and came to the conclusion that there is no other way: </span><a href="https://github.com/ska2342/sourcetalk14/blob/master/de.skamphausen.stt14/src/de/skamphausen/stt14.clj#L460" target="_blank">https://github.com/ska2342/sourcetalk14/blob/master/de.skamphausen.stt14/src/de/skamphausen/stt14.clj#L460</a></div><div id="t1440662121000016" t="2015-08-27 07:55:21 nodename Ha, OK, will read! Thanks!"><a href="#t1440662121000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-27</span> <span class="t" onclick="H(this)">07:55:21</span>         nodename </span><span>Ha, OK, will read! Thanks!</span></div><div id="t1440802362000017" t="2015-08-28 22:52:42 aengelberg @nodename you could use negative lookahead, i.e.  Term = Char+ !Char"><a href="#t1440802362000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-28</span> <span class="t" onclick="H(this)">22:52:42</span>       aengelberg </span><span>@nodename you could use negative lookahead, i.e. </span><code>Term = Char+ !Char</code></div><div id="t1440826874000018" t="2015-08-29 05:41:14 nodename @aengelberg thanks!"><a href="#t1440826874000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-29</span> <span class="t" onclick="H(this)">05:41:14</span>         nodename </span><span>@aengelberg thanks!</span></div><div id="t1441006496000019" t="2015-08-31 07:34:56 ska interesting, wasn&apos;t aware of that"><a href="#t1441006496000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-08-31</span> <span class="t" onclick="H(this)">07:34:56</span>              ska </span><span>interesting, wasn&apos;t aware of that</span></div><div id="t1444861405000004" t="2015-10-14 22:23:25 aaelony has anyone tried parsing between sql flavors? For example make a Redshift legal sql query a Hive legal sql query, assuming identical table and column names ? Would instaparse be a good fit for this kind of translation?"><a href="#t1444861405000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">22:23:25</span>          aaelony </span><span>has anyone tried parsing between sql flavors? For example make a Redshift legal sql query a Hive legal sql query, assuming identical table and column names ? Would instaparse be a good fit for this kind of translation?</span></div><div id="t1444862310000005" t="2015-10-14 22:38:30 aengelberg I&apos;m not familiar with the differences of Redshift and Hive formats; how many gotchas are there when going between the two styles?"><a href="#t1444862310000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">22:38:30</span>       aengelberg </span><span>I&apos;m not familiar with the differences of Redshift and Hive formats; how many gotchas are there when going between the two styles?</span></div><div id="t1444862650000006" t="2015-10-14 22:44:10 aengelberg @aaelony: ^"><a href="#t1444862650000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">22:44:10</span>       aengelberg </span><span>@aaelony: ^</span></div><div id="t1444864996000007" t="2015-10-14 23:23:16 aaelony there are differences in data types in create table statements, there are also differences in syntax and function calls"><a href="#t1444864996000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">23:23:16</span>          aaelony </span><span>there are differences in data types in create table statements, there are also differences in syntax and function calls</span></div><div id="t1444865043000008" t="2015-10-14 23:24:03 aaelony just trying to gauge if such translations are a good fit to try in instaparse"><a href="#t1444865043000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">23:24:03</span>          aaelony </span><span>just trying to gauge if such translations are a good fit to try in instaparse</span></div><div id="t1444866430000009" t="2015-10-14 23:47:10 aengelberg Instaparse&apos;s job is to fully parse a string and return its meaning as a tree of data. If you need to fully parse a sql query and examine the data before you know what to do with it, Instaparse is a good choice. But if the problem could be solved by a regular expression searching the string for patterns, Instaparse might be overkill."><a href="#t1444866430000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-14</span> <span class="t" onclick="H(this)">23:47:10</span>       aengelberg </span><span>Instaparse&apos;s job is to fully parse a string and return its meaning as a tree of data. If you need to fully parse a sql query and examine the data before you know what to do with it, Instaparse is a good choice. But if the problem could be solved by a regular expression searching the string for patterns, Instaparse might be overkill.</span></div><div id="t1444870338000010" t="2015-10-15 00:52:18 aaelony That is useful, thank you. I think there are things idiomatic to each but maybe regexes are sufficient after all "><a href="#t1444870338000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-15</span> <span class="t" onclick="H(this)">00:52:18</span>          aaelony </span><span>That is useful, thank you. I think there are things idiomatic to each but maybe regexes are sufficient after all </span></div><div id="t1444900470000011" t="2015-10-15 09:14:30 ska Funny enough, I spent the morning writing a grammar for some SQL inspired tiny query language  simple_smile"><a href="#t1444900470000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-15</span> <span class="t" onclick="H(this)">09:14:30</span>              ska </span><span>Funny enough, I spent the morning writing a grammar for some SQL inspired tiny query language </span><b>simple_smile</b></div><div id="t1444927045000012" t="2015-10-15 16:37:25 aaelony yes, my initial thoughts were that sql syntax docs could be parsed in some way, e.g.  https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_NEW.html  compared to  https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL"><a href="#t1444927045000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2015-10-15</span> <span class="t" onclick="H(this)">16:37:25</span>          aaelony </span><span>yes, my initial thoughts were that sql syntax docs could be parsed in some way, e.g. </span><a href="https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_NEW.html" target="_blank">https://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_TABLE_NEW.html</a><span> compared to </span><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL" target="_blank">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL</a></div><div id="t1452585712000009" t="2016-01-12 08:01:52 meow what is performance like for instaparse - someone I&apos;m working with had a problem in the past with it being slow but never tracked down the source of the problem"><a href="#t1452585712000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">08:01:52</span>             meow </span><span>what is performance like for instaparse - someone I&apos;m working with had a problem in the past with it being slow but never tracked down the source of the problem</span></div><div id="t1452593548000010" t="2016-01-12 10:12:28 ska When parsing becomes slow, it might be due to the grammar being ambiguous.  In general, I&apos;d say that Instparse is good enough for many use cases, even if I&apos;ve read papers complaining about the perf.  The one that I still have was written in German, though."><a href="#t1452593548000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">10:12:28</span>              ska </span><span>When parsing becomes slow, it might be due to the grammar being ambiguous.  In general, I&apos;d say that Instparse is good enough for many use cases, even if I&apos;ve read papers complaining about the perf.  The one that I still have was written in German, though.</span></div><div id="t1452594473000011" t="2016-01-12 10:27:53 meow I&apos;ll tell the #C0J20813K devs to come here to find out how to parse fast"><a href="#t1452594473000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">10:27:53</span>             meow </span><span>I&apos;ll tell the #C0J20813K devs to come here to find out how to parse fast</span></div><div id="t1452594499000012" t="2016-01-12 10:28:19 meow @rafd: ^"><a href="#t1452594499000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">10:28:19</span>             meow </span><span>@rafd: ^</span></div><div id="t1452594541000013" t="2016-01-12 10:29:01 meow @ska: thanks for the info!  simple_smile"><a href="#t1452594541000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">10:29:01</span>             meow </span><span>@ska: thanks for the info! </span><b>simple_smile</b></div><div id="t1452603997000016" t="2016-01-12 13:06:37 rafd @jamesnvc ^"><a href="#t1452603997000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">13:06:37</span>             rafd </span><span>@jamesnvc ^</span></div><div id="t1452613640000019" t="2016-01-12 15:47:20 jamesnvc hello"><a href="#t1452613640000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:47:20</span>         jamesnvc </span><span>hello</span></div><div id="t1452613672000020" t="2016-01-12 15:47:52 jamesnvc Yeah, I really like using instaparse server-side, but I tried writing one in cljs (pretty simple, just extracting links) and it was noticeably slow..."><a href="#t1452613672000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:47:52</span>         jamesnvc </span><span>Yeah, I really like using instaparse server-side, but I tried writing one in cljs (pretty simple, just extracting links) and it was noticeably slow...</span></div><div id="t1452613686000021" t="2016-01-12 15:48:06 jamesnvc it was being called on a lot of text, but is there something I should be doing?"><a href="#t1452613686000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:48:06</span>         jamesnvc </span><span>it was being called on a lot of text, but is there something I should be doing?</span></div><div id="t1452614109000022" t="2016-01-12 15:55:09 ska @jamesnvc: sometimes it is possible to chunk the text before parsing it.  For example, when parsing logfiles use instaparse just for the lines not the whole file."><a href="#t1452614109000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:55:09</span>              ska </span><span>@jamesnvc: sometimes it is possible to chunk the text before parsing it.  For example, when parsing logfiles use instaparse just for the lines not the whole file.</span></div><div id="t1452614145000023" t="2016-01-12 15:55:45 jamesnvc This is a bunch of little chunks of text; being called on the text of each message in a chat client"><a href="#t1452614145000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:55:45</span>         jamesnvc </span><span>This is a bunch of little chunks of text; being called on the text of each message in a chat client</span></div><div id="t1452614176000024" t="2016-01-12 15:56:16 jamesnvc I’ll try writing the grammar again and make sure it isn’t ambiguous"><a href="#t1452614176000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">15:56:16</span>         jamesnvc </span><span>I’ll try writing the grammar again and make sure it isn’t ambiguous</span></div><div id="t1452615312000025" t="2016-01-12 16:15:12 ghadi I have a new parser that should be much faster than instaparse if you have no ambiguity"><a href="#t1452615312000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:15:12</span>            ghadi </span><span>I have a new parser that should be much faster than instaparse if you have no ambiguity</span></div><div id="t1452615331000026" t="2016-01-12 16:15:31 ghadi https://github.com/ghadishayban/pex"><a href="#t1452615331000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:15:31</span>            ghadi </span><a href="https://github.com/ghadishayban/pex" target="_blank">https://github.com/ghadishayban/pex</a></div><div id="t1452615356000028" t="2016-01-12 16:15:56 ghadi needs better docs  😃"><a href="#t1452615356000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:15:56</span>            ghadi </span><span>needs better docs </span><b>😃</b></div><div id="t1452615376000029" t="2016-01-12 16:16:16 ghadi https://groups.google.com/d/msg/clojure/2ph-6o_Zydc/0O2DRDXBAwAJ"><a href="#t1452615376000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:16:16</span>            ghadi </span><a href="https://groups.google.com/d/msg/clojure/2ph-6o_Zydc/0O2DRDXBAwAJ" target="_blank">https://groups.google.com/d/msg/clojure/2ph-6o_Zydc/0O2DRDXBAwAJ</a></div><div id="t1452616551000030" t="2016-01-12 16:35:51 jamesnvc oh cool, I’ll give that a shot, thanks!"><a href="#t1452616551000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:35:51</span>         jamesnvc </span><span>oh cool, I’ll give that a shot, thanks!</span></div><div id="t1452616652000031" t="2016-01-12 16:37:32 jamesnvc @ghadi oh, does this work in clojurescript though? That is my issue with instaparse — my clj perf is fine, but cljs leaves something to be desired"><a href="#t1452616652000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:37:32</span>         jamesnvc </span><span>@ghadi oh, does this work in clojurescript though? That is my issue with instaparse — my clj perf is fine, but cljs leaves something to be desired</span></div><div id="t1452616675000032" t="2016-01-12 16:37:55 ghadi oh, no it doesn&apos;t"><a href="#t1452616675000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:37:55</span>            ghadi </span><span>oh, no it doesn&apos;t</span></div><div id="t1452616695000033" t="2016-01-12 16:38:15 ghadi should perform well there too, want to port a virtual machine ?  😉"><a href="#t1452616695000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:38:15</span>            ghadi </span><span>should perform well there too, want to port a virtual machine ? </span><b>😉</b></div><div id="t1452616716000034" t="2016-01-12 16:38:36 ghadi https://github.com/ghadishayban/pex/blob/master/src-java/com/champbacon/pex/impl/PEGByteCodeVM.java"><a href="#t1452616716000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:38:36</span>            ghadi </span><a href="https://github.com/ghadishayban/pex/blob/master/src-java/com/champbacon/pex/impl/PEGByteCodeVM.java" target="_blank">https://github.com/ghadishayban/pex/blob/master/src-java/com/champbacon/pex/impl/PEGByteCodeVM.java</a></div><div id="t1452617408000037" t="2016-01-12 16:50:08 jamesnvc Oh, interesting..."><a href="#t1452617408000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:50:08</span>         jamesnvc </span><span>Oh, interesting...</span></div><div id="t1452617435000038" t="2016-01-12 16:50:35 jamesnvc I may consider that, if just as a fun project!"><a href="#t1452617435000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">16:50:35</span>         jamesnvc </span><span>I may consider that, if just as a fun project!</span></div><div id="t1452618437000039" t="2016-01-12 17:07:17 ghadi Peg.js is pretty nice, IMHO"><a href="#t1452618437000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-12</span> <span class="t" onclick="H(this)">17:07:17</span>            ghadi </span><span>Peg.js is pretty nice, IMHO</span></div><div id="t1452647479000040" t="2016-01-13 01:11:19 lucasbradstreet Hi @jamesnvc, cljs perf is definitely a bit slow. You need to be using advanced mode compile otherwise it’s incredibly slow."><a href="#t1452647479000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:11:19</span>  lucasbradstreet </span><span>Hi @jamesnvc, cljs perf is definitely a bit slow. You need to be using advanced mode compile otherwise it’s incredibly slow.</span></div><div id="t1452647484000041" t="2016-01-13 01:11:24 lucasbradstreet I’m the guy who did the port"><a href="#t1452647484000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:11:24</span>  lucasbradstreet </span><span>I’m the guy who did the port</span></div><div id="t1452647520000042" t="2016-01-13 01:12:00 jamesnvc @lucasbradstreet: Cool, thanks  simple_smile  Good to know I’m (maybe) not just doing something crazy"><a href="#t1452647520000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:12:00</span>         jamesnvc </span><span>@lucasbradstreet: Cool, thanks </span><b>simple_smile</b><span> Good to know I’m (maybe) not just doing something crazy</span></div><div id="t1452647534000043" t="2016-01-13 01:12:14 lucasbradstreet Depending on what you’re doing, you can also serialise the parser definition and load it in directly"><a href="#t1452647534000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:12:14</span>  lucasbradstreet </span><span>Depending on what you’re doing, you can also serialise the parser definition and load it in directly</span></div><div id="t1452647558000044" t="2016-01-13 01:12:38 lucasbradstreet Creating the initial parser in cljs can take quite a while, but the parsing itself can be pretty acceptable"><a href="#t1452647558000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:12:38</span>  lucasbradstreet </span><span>Creating the initial parser in cljs can take quite a while, but the parsing itself can be pretty acceptable</span></div><div id="t1452647943000045" t="2016-01-13 01:19:03 meow and my money was on crazy @jamesnvc"><a href="#t1452647943000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:19:03</span>             meow </span><span>and my money was on crazy @jamesnvc</span></div><div id="t1452648018000046" t="2016-01-13 01:20:18 meow can any of that &quot;job&quot; be split between client and server?"><a href="#t1452648018000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:20:18</span>             meow </span><span>can any of that &quot;job&quot; be split between client and server?</span></div><div id="t1452648028000047" t="2016-01-13 01:20:28 meow say for a chat app"><a href="#t1452648028000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:20:28</span>             meow </span><span>say for a chat app</span></div><div id="t1452648078000048" t="2016-01-13 01:21:18 meow just send the user keystrokes to the server - do it in clj there"><a href="#t1452648078000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:21:18</span>             meow </span><span>just send the user keystrokes to the server - do it in clj there</span></div><div id="t1452648090000049" t="2016-01-13 01:21:30 meow just brainstorming"><a href="#t1452648090000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:21:30</span>             meow </span><span>just brainstorming</span></div><div id="t1452648094000050" t="2016-01-13 01:21:34 meow outloud"><a href="#t1452648094000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:21:34</span>             meow </span><span>outloud</span></div><div id="t1452648225000051" t="2016-01-13 01:23:45 meow doesn&apos;t each keystroke go to the server already - that&apos;s how you can display the fact that the user is typing"><a href="#t1452648225000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:23:45</span>             meow </span><span>doesn&apos;t each keystroke go to the server already - that&apos;s how you can display the fact that the user is typing</span></div><div id="t1452648247000052" t="2016-01-13 01:24:07 meow so don&apos;t do any processing on the client - do the instaparse on the server"><a href="#t1452648247000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:24:07</span>             meow </span><span>so don&apos;t do any processing on the client - do the instaparse on the server</span></div><div id="t1452648274000053" t="2016-01-13 01:24:34 meow and use yada or onyx or something to scale it"><a href="#t1452648274000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:24:34</span>             meow </span><span>and use yada or onyx or something to scale it</span></div><div id="t1452648299000054" t="2016-01-13 01:24:59 meow we can segregrate services on the server and compose them"><a href="#t1452648299000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:24:59</span>             meow </span><span>we can segregrate services on the server and compose them</span></div><div id="t1452648348000055" t="2016-01-13 01:25:48 meow compose microservices on the server and keep the client relatively stupid whenever the data is already on the server"><a href="#t1452648348000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:25:48</span>             meow </span><span>compose microservices on the server and keep the client relatively stupid whenever the data is already on the server</span></div><div id="t1452648987000056" t="2016-01-13 01:36:27 lucasbradstreet I was parsing excel formulas on the client and it was good enough"><a href="#t1452648987000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:36:27</span>  lucasbradstreet </span><span>I was parsing excel formulas on the client and it was good enough</span></div><div id="t1452649001000057" t="2016-01-13 01:36:41 lucasbradstreet Certainly faster than a round-trip to the server"><a href="#t1452649001000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:36:41</span>  lucasbradstreet </span><span>Certainly faster than a round-trip to the server</span></div><div id="t1452649307000058" t="2016-01-13 01:41:47 meow ok"><a href="#t1452649307000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:41:47</span>             meow </span><span>ok</span></div><div id="t1452649326000059" t="2016-01-13 01:42:06 meow I&apos;ll defer to @jamesnvc since I&apos;m just blowing smoke"><a href="#t1452649326000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:42:06</span>             meow </span><span>I&apos;ll defer to @jamesnvc since I&apos;m just blowing smoke</span></div><div id="t1452649525000060" t="2016-01-13 01:45:25 lucasbradstreet My overall experience was that creating the initial parser was very expensive, but overall parsing was OK, but that it had to be in advanced mode. All with a big chunk of “your mileage may vary”. Unfortunately I don’t have any time to work on performance any further"><a href="#t1452649525000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">01:45:25</span>  lucasbradstreet </span><span>My overall experience was that creating the initial parser was very expensive, but overall parsing was OK, but that it had to be in advanced mode. All with a big chunk of “your mileage may vary”. Unfortunately I don’t have any time to work on performance any further</span></div><div id="t1452683280000061" t="2016-01-13 11:08:00 jamesnvc Cool, I was thinking of splitting it between client and server, but I will give it a shot with advanced compliation too"><a href="#t1452683280000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">11:08:00</span>         jamesnvc </span><span>Cool, I was thinking of splitting it between client and server, but I will give it a shot with advanced compliation too</span></div><div id="t1452683715000062" t="2016-01-13 11:15:15 lucasbradstreet Also works. I’d measure how long it takes to do the individual parses, not just page load time - because that will be affected by creating the initial parser"><a href="#t1452683715000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">11:15:15</span>  lucasbradstreet </span><span>Also works. I’d measure how long it takes to do the individual parses, not just page load time - because that will be affected by creating the initial parser</span></div><div id="t1452691241000063" t="2016-01-13 13:20:41 meow @jamesnvc: we should test both and not make assumptions either way, imnsho"><a href="#t1452691241000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:20:41</span>             meow </span><span>@jamesnvc: we should test both and not make assumptions either way, imnsho</span></div><div id="t1452691261000064" t="2016-01-13 13:21:01 meow @lucasbradstreet: thanks for the help and suggestions - much appreciated"><a href="#t1452691261000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:21:01</span>             meow </span><span>@lucasbradstreet: thanks for the help and suggestions - much appreciated</span></div><div id="t1452691422000065" t="2016-01-13 13:23:42 lucasbradstreet Agreed. Though you have to assume some variability in request latency when testing the other method, which is why I ultimately went with the client side approach. That said, you can have slow CPU clients too. "><a href="#t1452691422000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:23:42</span>  lucasbradstreet </span><span>Agreed. Though you have to assume some variability in request latency when testing the other method, which is why I ultimately went with the client side approach. That said, you can have slow CPU clients too. </span></div><div id="t1452691595000066" t="2016-01-13 13:26:35 meow then we should simulate issues with both environments and various combinations/permutations"><a href="#t1452691595000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:26:35</span>             meow </span><span>then we should simulate issues with both environments and various combinations/permutations</span></div><div id="t1452691610000067" t="2016-01-13 13:26:50 meow ask the #C0J20813K team how good I am at doing that"><a href="#t1452691610000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:26:50</span>             meow </span><span>ask the #C0J20813K team how good I am at doing that</span></div><div id="t1452691626000068" t="2016-01-13 13:27:06 meow issues, oh yeah, I got issues"><a href="#t1452691626000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">13:27:06</span>             meow </span><span>issues, oh yeah, I got issues</span></div><div id="t1452696484000069" t="2016-01-13 14:48:04 lucasbradstreet ha  👍"><a href="#t1452696484000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">14:48:04</span>  lucasbradstreet </span><span>ha </span><b>👍</b></div><div id="t1452697587000070" t="2016-01-13 15:06:27 meow simple_smile"><a href="#t1452697587000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-01-13</span> <span class="t" onclick="H(this)">15:06:27</span>             meow </span><b>simple_smile</b></div><div id="t1454964122000004" t="2016-02-08 20:42:02 wongiseng Hi, very basic question probably not specific to instaparse. From this basic example :
&quot;S = N | (N (&apos;+&apos; N)+);
  N = &apos;0&apos; | &apos;1&apos; | &apos;2&apos; | &apos;3&apos; | &apos;4&apos; | &apos;5&apos; | &apos;6&apos; | &apos;7&apos; | &apos;8&apos; | &apos;9&apos;;&quot;

if I want to enforce that not all N are 0s, should this be done in the grammar definition or by adding some logic on processing the parsed result ? I suspect the latter, but just in case anyone knows other ways to enforce this restriction directly in the grammar, I&apos;d like to know. TIA"><a href="#t1454964122000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">20:42:02</span>        wongiseng </span><span>Hi, very basic question probably not specific to instaparse. From this basic example :
&quot;S = N | (N (&apos;+&apos; N)+);
  N = &apos;0&apos; | &apos;1&apos; | &apos;2&apos; | &apos;3&apos; | &apos;4&apos; | &apos;5&apos; | &apos;6&apos; | &apos;7&apos; | &apos;8&apos; | &apos;9&apos;;&quot;

if I want to enforce that not all N are 0s, should this be done in the grammar definition or by adding some logic on processing the parsed result ? I suspect the latter, but just in case anyone knows other ways to enforce this restriction directly in the grammar, I&apos;d like to know. TIA</span></div><div id="t1454967132000006" t="2016-02-08 21:32:12 aengelberg Hi @wongiseng, I saw your question on gitter as well. Instaparse&apos;s job is to turn strings into meaningful data; any validation you want to do on that data probably should happen after the parse."><a href="#t1454967132000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:32:12</span>       aengelberg </span><span>Hi @wongiseng, I saw your question on gitter as well. Instaparse&apos;s job is to turn strings into meaningful data; any validation you want to do on that data probably should happen after the parse.</span></div><div id="t1454967191000007" t="2016-02-08 21:33:11 aengelberg The only real way to have more sophisticated validation on an input is to use lookahead and negative lookahead."><a href="#t1454967191000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:33:11</span>       aengelberg </span><span>The only real way to have more sophisticated validation on an input is to use lookahead and negative lookahead.</span></div><div id="t1454967205000008" t="2016-02-08 21:33:25 aengelberg Well, those are the only ways to do sophisticated validation within instaparse."><a href="#t1454967205000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:33:25</span>       aengelberg </span><span>Well, those are the only ways to do sophisticated validation within instaparse.</span></div><div id="t1454967257000009" t="2016-02-08 21:34:17 aengelberg In this particular example you could use negative lookahead, e.g.
S = !(&apos;0&apos;*) (N | (N (&apos;+&apos; N)+));"><a href="#t1454967257000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:34:17</span>       aengelberg </span><span>In this particular example you could use negative lookahead, e.g.
S = !(&apos;0&apos;*) (N | (N (&apos;+&apos; N)+));</span></div><div id="t1454967260000010" t="2016-02-08 21:34:20 socksy this works, but it&apos;s ambiguous:
 (def minimum-one-not-zero
  (insta/parser
    &quot;EXP = N | S;
    S = (ZN &apos;+&apos;)* N (&apos;+&apos; ZN)*;
    N =  &apos;1&apos; | &apos;2&apos; | &apos;3&apos; | &apos;4&apos; | &apos;5&apos; | &apos;6&apos; | &apos;7&apos; | &apos;8&apos; | &apos;9&apos;;
    ZN = &apos;0&apos; | N;&quot;))
"><a href="#t1454967260000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:34:20</span>           socksy </span><span>this works, but it&apos;s ambiguous:
</span><pre>(def minimum-one-not-zero
  (insta/parser
    &quot;EXP = N | S;
    S = (ZN &apos;+&apos;)* N (&apos;+&apos; ZN)*;
    N =  &apos;1&apos; | &apos;2&apos; | &apos;3&apos; | &apos;4&apos; | &apos;5&apos; | &apos;6&apos; | &apos;7&apos; | &apos;8&apos; | &apos;9&apos;;
    ZN = &apos;0&apos; | N;&quot;))
</pre></div><div id="t1454967275000011" t="2016-02-08 21:34:35 aengelberg ^ That would work as well"><a href="#t1454967275000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:34:35</span>       aengelberg </span><span>^ That would work as well</span></div><div id="t1454967302000013" t="2016-02-08 21:35:02 socksy (tested)"><a href="#t1454967302000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:35:02</span>           socksy </span><span>(tested)</span></div><div id="t1454967362000014" t="2016-02-08 21:36:02 aengelberg The advantage to writing your own validation after the parse is that when the input is wrong, you can write your own error message to say whatever you want instead of instaparse&apos;s failure message which might not be as readable."><a href="#t1454967362000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:36:02</span>       aengelberg </span><span>The advantage to writing your own validation after the parse is that when the input is wrong, you can write your own error message to say whatever you want instead of instaparse&apos;s failure message which might not be as readable.</span></div><div id="t1454967394000015" t="2016-02-08 21:36:34 socksy ^definitely 
 Parse error at line 1, column 4:
0+0
   ^
Expected:
&quot;+&quot;"><a href="#t1454967394000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:36:34</span>           socksy </span><span>^definitely 
</span><pre>Parse error at line 1, column 4:
0+0
   ^
Expected:
&quot;+&quot;</pre></div><div id="t1454967417000016" t="2016-02-08 21:36:57 aengelberg oops, my negative lookahead approach definitely wouldn&apos;t work because I totally didn&apos;t see the pluses in the input"><a href="#t1454967417000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:36:57</span>       aengelberg </span><span>oops, my negative lookahead approach definitely wouldn&apos;t work because I totally didn&apos;t see the pluses in the input</span></div><div id="t1454967487000017" t="2016-02-08 21:38:07 aengelberg Maybe
 S = &amp;(#&quot;.*[1-9]&quot;) (N | (N (&apos;+&apos; N)+);
"><a href="#t1454967487000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:38:07</span>       aengelberg </span><span>Maybe
</span><pre>S = &amp;(#&quot;.*[1-9]&quot;) (N | (N (&apos;+&apos; N)+);
</pre></div><div id="t1454967505000018" t="2016-02-08 21:38:25 aengelberg e.g. &quot;make sure there&apos;s some nonzero number somewhere, then parse as usual&quot;"><a href="#t1454967505000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:38:25</span>       aengelberg </span><span>e.g. &quot;make sure there&apos;s some nonzero number somewhere, then parse as usual&quot;</span></div><div id="t1454967549000019" t="2016-02-08 21:39:09 aengelberg that&apos;s lookahead not negative lookahead"><a href="#t1454967549000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:39:09</span>       aengelberg </span><span>that&apos;s lookahead not negative lookahead</span></div><div id="t1454967653000020" t="2016-02-08 21:40:53 socksy if errors aren&apos;t important, and the fact you might get the &quot;wrong&quot; evaluation (e.g. &quot;1+0+1&quot; could be  [:EXP [:S [:N &quot;1&quot;] &quot;+&quot; [:ZN &quot;0&quot;] &quot;+&quot; [:ZN [:N &quot;1&quot;]]]]  or  [:EXP [:S [:ZN [:N&quot;1&quot;]] &quot;+&quot; [:ZN 0] &quot;+&quot; [:N 1]]] ) is also unimportant (e.g. you eval N and ZN the same), then you should be fine with the ambiguous grammar"><a href="#t1454967653000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:40:53</span>           socksy </span><span>if errors aren&apos;t important, and the fact you might get the &quot;wrong&quot; evaluation (e.g. &quot;1+0+1&quot; could be </span><code>[:EXP [:S [:N &quot;1&quot;] &quot;+&quot; [:ZN &quot;0&quot;] &quot;+&quot; [:ZN [:N &quot;1&quot;]]]]</code><span> or </span><code>[:EXP [:S [:ZN [:N&quot;1&quot;]] &quot;+&quot; [:ZN 0] &quot;+&quot; [:N 1]]]</code><span>) is also unimportant (e.g. you eval N and ZN the same), then you should be fine with the ambiguous grammar</span></div><div id="t1454967692000021" t="2016-02-08 21:41:32 socksy (instaparse gives you the former)"><a href="#t1454967692000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:41:32</span>           socksy </span><span>(instaparse gives you the former)</span></div><div id="t1454967904000022" t="2016-02-08 21:45:04 aengelberg @socksy how about
 S = N (&apos;+&apos; N)* | (N &apos;+&apos;)* &apos;0&apos; (&apos;+&apos; ZN)*;
"><a href="#t1454967904000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:45:04</span>       aengelberg </span><span>@socksy how about
</span><pre>S = N (&apos;+&apos; N)* | (N &apos;+&apos;)* &apos;0&apos; (&apos;+&apos; ZN)*;
</pre></div><div id="t1454967927000023" t="2016-02-08 21:45:27 aengelberg I&apos;m just writing these off the top of my head, not evaluating them to be sure. I think that would be unambiguous though"><a href="#t1454967927000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:45:27</span>       aengelberg </span><span>I&apos;m just writing these off the top of my head, not evaluating them to be sure. I think that would be unambiguous though</span></div><div id="t1454968003000024" t="2016-02-08 21:46:43 aengelberg hmm, that&apos;s definitely wrong  simple_smile"><a href="#t1454968003000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:46:43</span>       aengelberg </span><span>hmm, that&apos;s definitely wrong </span><b>simple_smile</b></div><div id="t1454968014000025" t="2016-02-08 21:46:54 aengelberg not sure where that came from"><a href="#t1454968014000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:46:54</span>       aengelberg </span><span>not sure where that came from</span></div><div id="t1454968079000026" t="2016-02-08 21:47:59 aengelberg Using lookahead would likely be the easiest path, since the grammar would be unambiguous and easy to understand"><a href="#t1454968079000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:47:59</span>       aengelberg </span><span>Using lookahead would likely be the easiest path, since the grammar would be unambiguous and easy to understand</span></div><div id="t1454968674000027" t="2016-02-08 21:57:54 wongiseng Cool, thanks for the explanations, I&apos;ll play a bit with look ahead, but eventually I guess i&apos;ll validate after the parse"><a href="#t1454968674000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:57:54</span>        wongiseng </span><span>Cool, thanks for the explanations, I&apos;ll play a bit with look ahead, but eventually I guess i&apos;ll validate after the parse</span></div><div id="t1454968720000028" t="2016-02-08 21:58:40 wongiseng The negative lookaheads makes the grammar hard to digest for me"><a href="#t1454968720000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">21:58:40</span>        wongiseng </span><span>The negative lookaheads makes the grammar hard to digest for me</span></div><div id="t1454973711000029" t="2016-02-08 23:21:51 wongiseng For now I use @socksy&apos;s approach  simple_smile   https://github.com/wibisono/gnip-rule-validator-clj/blob/master/gnip-rule.bnf  thanks a lot!"><a href="#t1454973711000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">23:21:51</span>        wongiseng </span><span>For now I use @socksy&apos;s approach </span><b>simple_smile</b><span> </span><a href="https://github.com/wibisono/gnip-rule-validator-clj/blob/master/gnip-rule.bnf" target="_blank">https://github.com/wibisono/gnip-rule-validator-clj/blob/master/gnip-rule.bnf</a><span> thanks a lot!</span></div><div id="t1454973976000031" t="2016-02-08 23:26:16 wongiseng My actual problem was OR  to have at least one positive term"><a href="#t1454973976000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-02-08</span> <span class="t" onclick="H(this)">23:26:16</span>        wongiseng </span><span>My actual problem was OR  to have at least one positive term</span></div><div id="t1460353865000005" t="2016-04-11 05:51:05 conaw hey, anyone know how to match the \ character?"><a href="#t1460353865000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">05:51:05</span>            conaw </span><span>hey, anyone know how to match the \ character?</span></div><div id="t1460353951000006" t="2016-04-11 05:52:31 conaw I’m trying to match strings within a parsed file, something like this    string = &apos;\&quot;&apos; #&apos;[^(?&lt;!\\\)\&quot;]* &apos;\&quot;&apos;"><a href="#t1460353951000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">05:52:31</span>            conaw </span><span>I’m trying to match strings within a parsed file, something like this    string = &apos;\&quot;&apos; #&apos;[^(?&lt;!\\\)\&quot;]* &apos;\&quot;&apos;</span></div><div id="t1460353986000007" t="2016-04-11 05:53:06 conaw I keep getting either errors of unmatched parens, or instaparse errors when I’m doing"><a href="#t1460353986000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">05:53:06</span>            conaw </span><span>I keep getting either errors of unmatched parens, or instaparse errors when I’m doing</span></div><div id="t1460353989000008" t="2016-04-11 05:53:09 conaw \ or \\"><a href="#t1460353989000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">05:53:09</span>            conaw </span><span>\ or \\</span></div><div id="t1460355442000009" t="2016-04-11 06:17:22 conaw figured it out"><a href="#t1460355442000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:17:22</span>            conaw </span><span>figured it out</span></div><div id="t1460355465000010" t="2016-04-11 06:17:45 conaw If anyone’s interested"><a href="#t1460355465000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:17:45</span>            conaw </span><span>If anyone’s interested</span></div><div id="t1460355472000011" t="2016-04-11 06:17:52 conaw string = &apos;\&quot;&apos; (#&apos;[^\&quot;]&apos; | &apos;\\\\\&quot;&apos;) &apos;\&quot;&apos;"><a href="#t1460355472000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:17:52</span>            conaw </span><span>string = &apos;\&quot;&apos; (#&apos;[^\&quot;]&apos; | &apos;\\\\\&quot;&apos;) &apos;\&quot;&apos;</span></div><div id="t1460355552000012" t="2016-04-11 06:19:12 conaw I’m know there should be a way to do it with lookbehind inside the regex, but at least now I only have one problem"><a href="#t1460355552000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:19:12</span>            conaw </span><span>I’m know there should be a way to do it with lookbehind inside the regex, but at least now I only have one problem</span></div><div id="t1460355594000013" t="2016-04-11 06:19:54 conaw Would be great to have an instaparse wiki for common grammars, if that doesn’t already exist somewhere"><a href="#t1460355594000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:19:54</span>            conaw </span><span>Would be great to have an instaparse wiki for common grammars, if that doesn’t already exist somewhere</span></div><div id="t1460355643000014" t="2016-04-11 06:20:43 conaw also, would be great to know if anyone is using a combination of instaparse and any of the nlp libraries"><a href="#t1460355643000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-11</span> <span class="t" onclick="H(this)">06:20:43</span>            conaw </span><span>also, would be great to know if anyone is using a combination of instaparse and any of the nlp libraries</span></div><div id="t1460451996000015" t="2016-04-12 09:06:36 ska What kind of combination are you thinking about, @conaw ?"><a href="#t1460451996000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:06:36</span>              ska </span><span>What kind of combination are you thinking about, @conaw ?</span></div><div id="t1460452204000016" t="2016-04-12 09:10:04 ska Oh, and regarding your string question, I did something similar with finding regexps in a query language which would be enclosed by slashes and allowed backslash-escaped slashed inside.  The regexp for this was so weird, I completely forgot, how it worked, but here it is:  REGEXP = &lt;&apos;/&apos;&gt; #&apos;(?:.(?!(?&lt;![\\\\])/))+.?&apos; &lt;&apos;/&apos;&gt;   (the grammar is defined in a Clojure string, thus the massive escaping)"><a href="#t1460452204000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:10:04</span>              ska </span><span>Oh, and regarding your string question, I did something similar with finding regexps in a query language which would be enclosed by slashes and allowed backslash-escaped slashed inside.  The regexp for this was so weird, I completely forgot, how it worked, but here it is: </span><pre>REGEXP = &lt;&apos;/&apos;&gt; #&apos;(?:.(?!(?&lt;![\\\\])/))+.?&apos; &lt;&apos;/&apos;&gt;</pre><span>  (the grammar is defined in a Clojure string, thus the massive escaping)</span></div><div id="t1460452255000017" t="2016-04-12 09:10:55 conaw not sure yet to be honest — I’d like to be doing POS tagging, and tokenizing, but really enjoying instaparse and curious if anyone has used it in conjunction with something like opennlp"><a href="#t1460452255000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:10:55</span>            conaw </span><span>not sure yet to be honest — I’d like to be doing POS tagging, and tokenizing, but really enjoying instaparse and curious if anyone has used it in conjunction with something like opennlp</span></div><div id="t1460452380000018" t="2016-04-12 09:13:00 ska I once did a workshop on Clojure with very basic NLP examples (it was at a faculty for computational linguistics), but I did not combine it with any existing NLP libraries.  Here at work, the NLP stuff is mostly self-written as much of it predates the open source libs.  And we do not (yet?) use Clojure in that area."><a href="#t1460452380000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:13:00</span>              ska </span><span>I once did a workshop on Clojure with very basic NLP examples (it was at a faculty for computational linguistics), but I did not combine it with any existing NLP libraries.  Here at work, the NLP stuff is mostly self-written as much of it predates the open source libs.  And we do not (yet?) use Clojure in that area.</span></div><div id="t1460452519000019" t="2016-04-12 09:15:19 ska Hm, looks like I never polished that workshop to put it online somewhere.  Sorry."><a href="#t1460452519000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:15:19</span>              ska </span><span>Hm, looks like I never polished that workshop to put it online somewhere.  Sorry.</span></div><div id="t1460452595000020" t="2016-04-12 09:16:35 ska But you may be interested in the instaparse talk here:  https://github.com/ska2342/clojure-talks/blob/master/instaparse/de.skamphausen.instaparse/src/de/skamphausen/instaparse.clj"><a href="#t1460452595000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:16:35</span>              ska </span><span>But you may be interested in the instaparse talk here: </span><a href="https://github.com/ska2342/clojure-talks/blob/master/instaparse/de.skamphausen.instaparse/src/de/skamphausen/instaparse.clj" target="_blank">https://github.com/ska2342/clojure-talks/blob/master/instaparse/de.skamphausen.instaparse/src/de/skamphausen/instaparse.clj</a></div><div id="t1460452616000022" t="2016-04-12 09:16:56 ska (enough boasting now; please excuse the self-plugging)"><a href="#t1460452616000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:16:56</span>              ska </span><span>(enough boasting now; please excuse the self-plugging)</span></div><div id="t1460453151000023" t="2016-04-12 09:25:51 conaw Not boasting at all, I appreciate the link."><a href="#t1460453151000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:25:51</span>            conaw </span><span>Not boasting at all, I appreciate the link.</span></div><div id="t1460453964000024" t="2016-04-12 09:39:24 conaw Another thing — Is there an idiomatic way to get the matched portion of a string for a given portion of a parse into the final transformed clojure data"><a href="#t1460453964000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:39:24</span>            conaw </span><span>Another thing — Is there an idiomatic way to get the matched portion of a string for a given portion of a parse into the final transformed clojure data</span></div><div id="t1460453996000025" t="2016-04-12 09:39:56 conaw I’m trying to parse the same text multiple times iteratively — passing the result to a different more granular parser based on the first"><a href="#t1460453996000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:39:56</span>            conaw </span><span>I’m trying to parse the same text multiple times iteratively — passing the result to a different more granular parser based on the first</span></div><div id="t1460454016000026" t="2016-04-12 09:40:16 conaw basically I’m trying to split the text up using a parse"><a href="#t1460454016000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:40:16</span>            conaw </span><span>basically I’m trying to split the text up using a parse</span></div><div id="t1460454292000027" t="2016-04-12 09:44:52 conaw spans looks like"><a href="#t1460454292000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">09:44:52</span>            conaw </span><span>spans looks like</span></div><div id="t1460459642000028" t="2016-04-12 11:14:02 ska There is a :partial option but it only returns the parse tree as far as it could be parsed.  Maybe the total mode would help?  Can&apos;t say.  Sorry."><a href="#t1460459642000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">11:14:02</span>              ska </span><span>There is a :partial option but it only returns the parse tree as far as it could be parsed.  Maybe the total mode would help?  Can&apos;t say.  Sorry.</span></div><div id="t1460471647000029" t="2016-04-12 14:34:07 ska @conaw, I just found the  span  function which takes a parse tree (result of parsing) and returns start and end index into the string. So, you could first parse partially and then as your input string for the covered substring."><a href="#t1460471647000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">14:34:07</span>              ska </span><span>@conaw, I just found the </span><code>span</code><span> function which takes a parse tree (result of parsing) and returns start and end index into the string. So, you could first parse partially and then as your input string for the covered substring.</span></div><div id="t1460471858000030" t="2016-04-12 14:37:38 ska Like this: 
 (let [s &quot;abcd&quot;
               g &quot;Q=&apos;a&apos; &apos;b&apos;&quot;
               p (i/parser g)
               t (p s :partial true)]
               (apply subs
                             (into [s] (i/span t))))

"><a href="#t1460471858000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">14:37:38</span>              ska </span><span>Like this: 
</span><pre>(let [s &quot;abcd&quot;
               g &quot;Q=&apos;a&apos; &apos;b&apos;&quot;
               p (i/parser g)
               t (p s :partial true)]
               (apply subs
                             (into [s] (i/span t))))

</pre></div><div id="t1460471972000034" t="2016-04-12 14:39:32 ska (sorry for the broken indentation)"><a href="#t1460471972000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-12</span> <span class="t" onclick="H(this)">14:39:32</span>              ska </span><span>(sorry for the broken indentation)</span></div><div id="t1460595642000036" t="2016-04-14 01:00:42 conaw @ska yup, that was my last remark, should have used the  code marker to make it more clear.  I did have a little trouble figuring out how to get only the span details for particular tags though — my guess is that I should use  tree-seq for that"><a href="#t1460595642000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-14</span> <span class="t" onclick="H(this)">01:00:42</span>            conaw </span><span>@ska yup, that was my last remark, should have used the </span><code>code marker to make it more clear.  I did have a little trouble figuring out how to get only the span details for particular tags though — my guess is that I should use </code><span>tree-seq for that</span></div><div id="t1460595676000037" t="2016-04-14 01:01:16 conaw and now I know how not to use  the  code marker"><a href="#t1460595676000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-14</span> <span class="t" onclick="H(this)">01:01:16</span>            conaw </span><span>and now I know how not to use  the </span><code>code marker</code></div><div id="t1460626078000038" t="2016-04-14 09:27:58 ska @conaw, ah now I understand your last comment. I misread it for an unfinished sentence and later forgot about it. Then  span  was a surprise to me.  😄"><a href="#t1460626078000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-14</span> <span class="t" onclick="H(this)">09:27:58</span>              ska </span><span>@conaw, ah now I understand your last comment. I misread it for an unfinished sentence and later forgot about it. Then </span><code>span</code><span> was a surprise to me. </span><b>😄</b></div><div id="t1461207648000003" t="2016-04-21 03:00:48 bwstearns Does anyone have any quick guidance on this question at SO:  https://stackoverflow.com/questions/36706854/instaparse-series-of-numbers-or-letters-as-one-leaf"><a href="#t1461207648000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:00:48</span>        bwstearns </span><span>Does anyone have any quick guidance on this question at SO: </span><a href="https://stackoverflow.com/questions/36706854/instaparse-series-of-numbers-or-letters-as-one-leaf" target="_blank">https://stackoverflow.com/questions/36706854/instaparse-series-of-numbers-or-letters-as-one-leaf</a></div><div id="t1461207690000005" t="2016-04-21 03:01:30 bwstearns I think it might be an instance of lacking the right words to google for the answer effectively."><a href="#t1461207690000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:01:30</span>        bwstearns </span><span>I think it might be an instance of lacking the right words to google for the answer effectively.</span></div><div id="t1461208904000006" t="2016-04-21 03:21:44 aengelberg @bwstearns: You could concatenate all the strings as a transform step."><a href="#t1461208904000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:21:44</span>       aengelberg </span><span>@bwstearns: You could concatenate all the strings as a transform step.</span></div><div id="t1461208981000007" t="2016-04-21 03:23:01 aengelberg i.e. unhide the letter and number tags, but add  :letter str, :number str  into your transformer map."><a href="#t1461208981000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:23:01</span>       aengelberg </span><span>i.e. unhide the letter and number tags, but add </span><code>:letter str, :number str</code><span> into your transformer map.</span></div><div id="t1461209058000008" t="2016-04-21 03:24:18 bwstearns @aengelberg: that&apos;s what I&apos;m doing now. Because I&apos;m doing it for a bunch of tags I was wondering if there was something built in for handling that as a common case or not."><a href="#t1461209058000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:24:18</span>        bwstearns </span><span>@aengelberg: that&apos;s what I&apos;m doing now. Because I&apos;m doing it for a bunch of tags I was wondering if there was something built in for handling that as a common case or not.</span></div><div id="t1461209067000009" t="2016-04-21 03:24:27 aengelberg Other than regexes, there&apos;s no way to concatenate strings in a way specified entirely by the instaparse grammar."><a href="#t1461209067000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:24:27</span>       aengelberg </span><span>Other than regexes, there&apos;s no way to concatenate strings in a way specified entirely by the instaparse grammar.</span></div><div id="t1461209134000010" t="2016-04-21 03:25:34 aengelberg The transform approach is the easiest way I could think of out of all the &quot;do something to the tree, fresh out of the parser&quot; possible approaches."><a href="#t1461209134000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:25:34</span>       aengelberg </span><span>The transform approach is the easiest way I could think of out of all the &quot;do something to the tree, fresh out of the parser&quot; possible approaches.</span></div><div id="t1461209217000011" t="2016-04-21 03:26:57 bwstearns That makes sense. I think what I&apos;ll do is put the preprocessor transforms into another hash to keep the more meaninful transform actions less cluttered and then merge them right before usage."><a href="#t1461209217000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:26:57</span>        bwstearns </span><span>That makes sense. I think what I&apos;ll do is put the preprocessor transforms into another hash to keep the more meaninful transform actions less cluttered and then merge them right before usage.</span></div><div id="t1461209268000012" t="2016-04-21 03:27:48 aengelberg That can work. Or just call insta/transform twice, if you don&apos;t mind the performance impact of traversing the tree twice."><a href="#t1461209268000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:27:48</span>       aengelberg </span><span>That can work. Or just call insta/transform twice, if you don&apos;t mind the performance impact of traversing the tree twice.</span></div><div id="t1461209307000013" t="2016-04-21 03:28:27 bwstearns that works too. I don&apos;t think I have any performance issues on the horizon with this project."><a href="#t1461209307000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:28:27</span>        bwstearns </span><span>that works too. I don&apos;t think I have any performance issues on the horizon with this project.</span></div><div id="t1461209558000014" t="2016-04-21 03:32:38 bwstearns @aengelberg: thanks a ton for taking a look. The question got some foot traffic but no feedback. If you&apos;re looking for internet points feel free to drop what you said in there and I&apos;ll accept it. Otherwise I&apos;ll copy it in as an own-answer for the next person."><a href="#t1461209558000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:32:38</span>        bwstearns </span><span>@aengelberg: thanks a ton for taking a look. The question got some foot traffic but no feedback. If you&apos;re looking for internet points feel free to drop what you said in there and I&apos;ll accept it. Otherwise I&apos;ll copy it in as an own-answer for the next person.</span></div><div id="t1461210641000015" t="2016-04-21 03:50:41 aengelberg @bwstearns: Any time! I&apos;ve added an answer to your post"><a href="#t1461210641000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:50:41</span>       aengelberg </span><span>@bwstearns: Any time! I&apos;ve added an answer to your post</span></div><div id="t1461210690000016" t="2016-04-21 03:51:30 bwstearns awesome. thanks. Didn&apos;t think about the performant part, is that primarily due to the extra step of having to transform it or is it because regexes are inherently faster than using parser rules?"><a href="#t1461210690000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:51:30</span>        bwstearns </span><span>awesome. thanks. Didn&apos;t think about the performant part, is that primarily due to the extra step of having to transform it or is it because regexes are inherently faster than using parser rules?</span></div><div id="t1461211110000017" t="2016-04-21 03:58:30 aengelberg #&apos;a+&apos;  is faster than  &apos;a&apos;+ , as letting regexes do the work of searching for all possible &quot;a&quot;s is faster than having instaparse do that work"><a href="#t1461211110000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">03:58:30</span>       aengelberg </span><code>#&apos;a+&apos;</code><span> is faster than </span><code>&apos;a&apos;+</code><span>, as letting regexes do the work of searching for all possible &quot;a&quot;s is faster than having instaparse do that work</span></div><div id="t1461211392000019" t="2016-04-21 04:03:12 aengelberg @bwstearns: ^"><a href="#t1461211392000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">04:03:12</span>       aengelberg </span><span>@bwstearns: ^</span></div><div id="t1461212213000020" t="2016-04-21 04:16:53 bwstearns Right, that makes sense because of the greediness. Thanks a ton for taking the time on this."><a href="#t1461212213000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">04:16:53</span>        bwstearns </span><span>Right, that makes sense because of the greediness. Thanks a ton for taking the time on this.</span></div><div id="t1461212403000021" t="2016-04-21 04:20:03 aengelberg It&apos;s not exactly *because* of the greediness, it&apos;s just speedier when a Java program is doing this task than Clojure  simple_smile"><a href="#t1461212403000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-21</span> <span class="t" onclick="H(this)">04:20:03</span>       aengelberg </span><span>It&apos;s not exactly *because* of the greediness, it&apos;s just speedier when a Java program is doing this task than Clojure </span><b>simple_smile</b></div><div id="t1461447696000022" t="2016-04-23 21:41:36 bwstearns In the wikipedia conventions section on EBNF it suggests that you can have bounded repetitions ( https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form#Conventions ), but the documentation doesn&apos;t say anything about it and I poked around the source and couldn&apos;t find anything in cfg that suggested it was there. Is the best way to get bounded reps to just merge in those rules from combinators?"><a href="#t1461447696000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-23</span> <span class="t" onclick="H(this)">21:41:36</span>        bwstearns </span><span>In the wikipedia conventions section on EBNF it suggests that you can have bounded repetitions (</span><a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form#Conventions" target="_blank">https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form#Conventions</a><span>), but the documentation doesn&apos;t say anything about it and I poked around the source and couldn&apos;t find anything in cfg that suggested it was there. Is the best way to get bounded reps to just merge in those rules from combinators?</span></div><div id="t1461739192000023" t="2016-04-27 06:39:52 aengelberg @bwstearns sorry, didn&apos;t see your question until now. The instaparse ABNF notation (which is explained in  ABNF.md ) supports repetition with any lower and/or upper bound. e.g.  (insta/parser &quot;S = 3*5(&apos;a&apos;)&quot; :input-format :abnf)  matches 3 to 5  a s. The default EBNF notation does not support it, so unless you want to switch to ABNF (a few conventions would have to change) then merging in combinators is the best approach."><a href="#t1461739192000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-27</span> <span class="t" onclick="H(this)">06:39:52</span>       aengelberg </span><span>@bwstearns sorry, didn&apos;t see your question until now. The instaparse ABNF notation (which is explained in </span><code>ABNF.md</code><span>) supports repetition with any lower and/or upper bound. e.g. </span><code>(insta/parser &quot;S = 3*5(&apos;a&apos;)&quot; :input-format :abnf)</code><span> matches 3 to 5 </span><code>a</code><span>s. The default EBNF notation does not support it, so unless you want to switch to ABNF (a few conventions would have to change) then merging in combinators is the best approach.</span></div><div id="t1461765944000024" t="2016-04-27 14:05:44 bwstearns @aengelberg: Sorry, I should have followed up with what I found, which is pretty much what you just said lol. I ended up implementing it by making a rep combinator and merging it into the main grammar, and then after looking at how unreadable it was getting I just threw a #&apos;\d\d&apos; regex at it (or something similar, I forget which part of the thing I was trying to parse). 

Thanks for following up though. Also, I knew I recognized you from something. Really enjoyed the automata presentation (I am of the youtube audience, haven’t had the good fortune to get to a clojure event in person yet)."><a href="#t1461765944000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-27</span> <span class="t" onclick="H(this)">14:05:44</span>        bwstearns </span><span>@aengelberg: Sorry, I should have followed up with what I found, which is pretty much what you just said lol. I ended up implementing it by making a rep combinator and merging it into the main grammar, and then after looking at how unreadable it was getting I just threw a #&apos;\d\d&apos; regex at it (or something similar, I forget which part of the thing I was trying to parse). 

Thanks for following up though. Also, I knew I recognized you from something. Really enjoyed the automata presentation (I am of the youtube audience, haven’t had the good fortune to get to a clojure event in person yet).</span></div><div id="t1461915311000025" t="2016-04-29 07:35:11 aengelberg @bwstearns: Glad you liked the talk!  simple_smile  If you have any more questions just @-mention me or say the word &quot;instaparse&quot; which also notifies me"><a href="#t1461915311000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-04-29</span> <span class="t" onclick="H(this)">07:35:11</span>       aengelberg </span><span>@bwstearns: Glad you liked the talk! </span><b>simple_smile</b><span> If you have any more questions just @-mention me or say the word &quot;instaparse&quot; which also notifies me</span></div><div id="t1464769955000028" t="2016-06-01 08:32:35 ska Hi.  I am aware that Instaparse collects the offsets to the strings it parses in the metadata of the elements of the parse tree.  I would like to turn the parse tree into XML (using  :output-format :enlive  and  clojure.xml/emit ) and get the offset information somehow into the XML tree.  Any pointers or ideas how to achieve this?"><a href="#t1464769955000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-01</span> <span class="t" onclick="H(this)">08:32:35</span>              ska </span><span>Hi.  I am aware that Instaparse collects the offsets to the strings it parses in the metadata of the elements of the parse tree.  I would like to turn the parse tree into XML (using </span><code>:output-format :enlive</code><span> and </span><code>clojure.xml/emit</code><span>) and get the offset information somehow into the XML tree.  Any pointers or ideas how to achieve this?</span></div><div id="t1464870095000032" t="2016-06-02 12:21:35 ska Does instaparse support special symbols for EOF and/or BOF?"><a href="#t1464870095000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">12:21:35</span>              ska </span><span>Does instaparse support special symbols for EOF and/or BOF?</span></div><div id="t1464883595000033" t="2016-06-02 16:06:35 ska Hm, first experiments give hint that having  &lt;EOF&gt; = &lt;#&apos;\\Z&apos;&gt;  in my grammar works."><a href="#t1464883595000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">16:06:35</span>              ska </span><span>Hm, first experiments give hint that having </span><code>&lt;EOF&gt; = &lt;#&apos;\\Z&apos;&gt;</code><span> in my grammar works.</span></div><div id="t1464885459000034" t="2016-06-02 16:37:39 aengelberg You could use the regex symbol for end of string, #&quot;$&quot; I believe"><a href="#t1464885459000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-02</span> <span class="t" onclick="H(this)">16:37:39</span>       aengelberg </span><span>You could use the regex symbol for end of string, #&quot;$&quot; I believe</span></div><div id="t1464988242000037" t="2016-06-03 21:10:42 dave hey everyone! this is a shot in the dark, but is anyone interested in helping me speed up alda&apos;s parser? i have some notes here:  https://github.com/alda-lang/alda/pull/238 

i have to run at the moment, but thought i&apos;d leave this here in case someone is interested in helping me tackle this"><a href="#t1464988242000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-03</span> <span class="t" onclick="H(this)">21:10:42</span>             dave </span><span>hey everyone! this is a shot in the dark, but is anyone interested in helping me speed up alda&apos;s parser? i have some notes here: </span><a href="https://github.com/alda-lang/alda/pull/238" target="_blank">https://github.com/alda-lang/alda/pull/238</a><span>

i have to run at the moment, but thought i&apos;d leave this here in case someone is interested in helping me tackle this</span></div><div id="t1465885098000002" t="2016-06-14 06:18:18 aengelberg @ghaz FYI  https://github.com/aengelberg/cljsee"><a href="#t1465885098000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">06:18:18</span>       aengelberg </span><span>@ghaz FYI </span><a href="https://github.com/aengelberg/cljsee" target="_blank">https://github.com/aengelberg/cljsee</a></div><div id="t1465885108000004" t="2016-06-14 06:18:28 aengelberg @lucasbradstreet ^"><a href="#t1465885108000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">06:18:28</span>       aengelberg </span><span>@lucasbradstreet ^</span></div><div id="t1465885185000005" t="2016-06-14 06:19:45 aengelberg I wrote this plugin with Instaparse in mind as a use case. I&apos;m hoping this can help us get instaparse-cljs to (non cljx) portable code and maybe even merge this upstream."><a href="#t1465885185000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">06:19:45</span>       aengelberg </span><span>I wrote this plugin with Instaparse in mind as a use case. I&apos;m hoping this can help us get instaparse-cljs to (non cljx) portable code and maybe even merge this upstream.</span></div><div id="t1465886795000006" t="2016-06-14 06:46:35 lucasbradstreet Thanks @aengelberg. I retweeted your tweet about it because it&apos;s awesome! Nice work. Unfortunately I have absolutely no time to help with a port right now :(, but the approach sounds like a great way to go "><a href="#t1465886795000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-06-14</span> <span class="t" onclick="H(this)">06:46:35</span>  lucasbradstreet </span><span>Thanks @aengelberg. I retweeted your tweet about it because it&apos;s awesome! Nice work. Unfortunately I have absolutely no time to help with a port right now :(, but the approach sounds like a great way to go </span></div><div id="t1467597226000012" t="2016-07-04 01:53:46 turbopape What&apos;s the status of cljs support ? "><a href="#t1467597226000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">01:53:46</span>        turbopape </span><span>What&apos;s the status of cljs support ? </span></div><div id="t1467597289000013" t="2016-07-04 01:54:49 turbopape Is it still living as a fork?"><a href="#t1467597289000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">01:54:49</span>        turbopape </span><span>Is it still living as a fork?</span></div><div id="t1467597476000014" t="2016-07-04 01:57:56 aengelberg The only cljs support still lives in lbradstreet/instaparse-cljs"><a href="#t1467597476000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">01:57:56</span>       aengelberg </span><span>The only cljs support still lives in lbradstreet/instaparse-cljs</span></div><div id="t1467597597000015" t="2016-07-04 01:59:57 aengelberg But I&apos;m currently in the process of rewriting instaparse-cljs into a form that we&apos;d be willing to accept back into upstream, now that cljsee exists"><a href="#t1467597597000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">01:59:57</span>       aengelberg </span><span>But I&apos;m currently in the process of rewriting instaparse-cljs into a form that we&apos;d be willing to accept back into upstream, now that cljsee exists</span></div><div id="t1467618391000016" t="2016-07-04 07:46:31 aengelberg @seylerius: Here&apos;s a grammar that parses exponents like you were you asking:
 boot.user=&gt; (def p (insta/parser &quot;
&lt;S&gt; = ows (exponent ows)+
&lt;exponent&gt; = token &lt;&apos;^&apos;&gt; super
super = token | &lt;&apos;{&apos;&gt; token &lt;&apos;}&apos;&gt;
&lt;token&gt; = #&apos;[^\\s\\^{}]+&apos;
&lt;ows&gt; = &lt;#&apos;\\s*&apos;&gt;
&quot;))
#&apos;boot.user/p
boot.user=&gt; (p &quot;foo^2 x^{x+1}&quot;)
(&quot;foo&quot; [:super &quot;2&quot;] &quot;x&quot; [:super &quot;x+1&quot;])
 
This parser is pretty naive about the range of possible inputs, since I&apos;m not totally sure myself what that range of inputs is in your use case."><a href="#t1467618391000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">07:46:31</span>       aengelberg </span><span>@seylerius: Here&apos;s a grammar that parses exponents like you were you asking:
</span><pre>boot.user=&gt; (def p (insta/parser &quot;
&lt;S&gt; = ows (exponent ows)+
&lt;exponent&gt; = token &lt;&apos;^&apos;&gt; super
super = token | &lt;&apos;{&apos;&gt; token &lt;&apos;}&apos;&gt;
&lt;token&gt; = #&apos;[^\\s\\^{}]+&apos;
&lt;ows&gt; = &lt;#&apos;\\s*&apos;&gt;
&quot;))
#&apos;boot.user/p
boot.user=&gt; (p &quot;foo^2 x^{x+1}&quot;)
(&quot;foo&quot; [:super &quot;2&quot;] &quot;x&quot; [:super &quot;x+1&quot;])
</pre><span>
This parser is pretty naive about the range of possible inputs, since I&apos;m not totally sure myself what that range of inputs is in your use case.</span></div><div id="t1467650610000018" t="2016-07-04 16:43:30 seylerius Thanks!"><a href="#t1467650610000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">16:43:30</span>        seylerius </span><span>Thanks!</span></div><div id="t1467650833000020" t="2016-07-04 16:47:13 seylerius Another question:  *   /   +   =  &amp;  ~  can appear in singles without being tokens. How would you represent that? Current parser:  http://sprunge.us/GNDe"><a href="#t1467650833000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">16:47:13</span>        seylerius </span><span>Another question: </span><code>*</code><span> </span><code>/</code><span> </span><code>+</code><span> </span><code>=</code><span> &amp; </span><code>~</code><span> can appear in singles without being tokens. How would you represent that? Current parser: </span><a href="http://sprunge.us/GNDe" target="_blank">http://sprunge.us/GNDe</a></div><div id="t1467651298000021" t="2016-07-04 16:54:58 seylerius @aengelberg: What I have will do for the moment, but it&apos;s a part of the spec I&apos;d like to meet eventually."><a href="#t1467651298000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">16:54:58</span>        seylerius </span><span>@aengelberg: What I have will do for the moment, but it&apos;s a part of the spec I&apos;d like to meet eventually.</span></div><div id="t1467651806000022" t="2016-07-04 17:03:26 Andy Hi,
We switched recently for parsing user input using plain regex to instaparse. Code looks way better. However there are two corner cases where I am not sure what would be idiomatic way:
1) parsing of certain domain of inputs should result on noop.  Our current solution is:
 &quot;sentence = define / explain / help / catchall
&lt;&lt;skipped definitions&gt;&gt;
 catchall = #&apos;(.|[\n\r])*&apos;&quot;
 
with an intention to just ignore last part during transformation  : catchall (fn [_] nil) 

Now I wonder if there is another way to catch this case and ignore without using exceptions.

2)`&apos;(.|[\n\r])*&apos;` comes with  |  which on JVM leads on recursion and might result in stack overflow. In fact it happened one to us.  Is there a better way to write  catchall  which would account for anything including  \n  and  \r ."><a href="#t1467651806000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:03:26</span>             Andy </span><span>Hi,
We switched recently for parsing user input using plain regex to instaparse. Code looks way better. However there are two corner cases where I am not sure what would be idiomatic way:
1) parsing of certain domain of inputs should result on noop.  Our current solution is:
</span><pre>&quot;sentence = define / explain / help / catchall
&lt;&lt;skipped definitions&gt;&gt;
 catchall = #&apos;(.|[\n\r])*&apos;&quot;
</pre><span>
with an intention to just ignore last part during transformation </span><code>: catchall (fn [_] nil)</code><span>

Now I wonder if there is another way to catch this case and ignore without using exceptions.

2)`&apos;(.|[\n\r])*&apos;` comes with </span><code>|</code><span> which on JVM leads on recursion and might result in stack overflow. In fact it happened one to us.  Is there a better way to write </span><code>catchall</code><span> which would account for anything including </span><code>\n</code><span> and </span><code>\r</code><span>.</span></div><div id="t1467652205000023" t="2016-07-04 17:10:05 aengelberg @happy.lisper for catchall you could do  #&apos;[\s\S]*&apos;"><a href="#t1467652205000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:10:05</span>       aengelberg </span><span>@happy.lisper for catchall you could do </span><code>#&apos;[\s\S]*&apos;</code></div><div id="t1467652224000024" t="2016-07-04 17:10:24 Andy ty"><a href="#t1467652224000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:10:24</span>             Andy </span><span>ty</span></div><div id="t1467652276000025" t="2016-07-04 17:11:16 aengelberg So your use case is: &quot;Parse the entire string as a  define , an  explain , or a  help , but if that doesn&apos;t work then return nil&quot;?"><a href="#t1467652276000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:11:16</span>       aengelberg </span><span>So your use case is: &quot;Parse the entire string as a </span><code>define</code><span>, an </span><code>explain</code><span>, or a </span><code>help</code><span>, but if that doesn&apos;t work then return nil&quot;?</span></div><div id="t1467652303000026" t="2016-07-04 17:11:43 aengelberg Because you could just run the parse and a transform, then check  (insta/failure? result)"><a href="#t1467652303000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:11:43</span>       aengelberg </span><span>Because you could just run the parse and a transform, then check </span><code>(insta/failure? result)</code></div><div id="t1467652312000027" t="2016-07-04 17:11:52 Andy yes, where  nil  is just a signal to ignore the input."><a href="#t1467652312000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:11:52</span>             Andy </span><span>yes, where </span><code>nil</code><span> is just a signal to ignore the input.</span></div><div id="t1467652434000028" t="2016-07-04 17:13:54 aengelberg (def p (insta/parser ...))
(let [result (p input-string)
      transformed (insta/transform p {...})]
  (when-not (insta/failure? transformed)
    transformed))
"><a href="#t1467652434000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:13:54</span>       aengelberg </span><pre>(def p (insta/parser ...))
(let [result (p input-string)
      transformed (insta/transform p {...})]
  (when-not (insta/failure? transformed)
    transformed))
</pre></div><div id="t1467652452000029" t="2016-07-04 17:14:12 aengelberg Note that  insta/transform  is specifically designed to pass through failures"><a href="#t1467652452000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:14:12</span>       aengelberg </span><span>Note that </span><code>insta/transform</code><span> is specifically designed to pass through failures</span></div><div id="t1467652513000030" t="2016-07-04 17:15:13 Andy Let me consider that  🙂 ."><a href="#t1467652513000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:15:13</span>             Andy </span><span>Let me consider that </span><b>🙂</b><span>.</span></div><div id="t1467652790000031" t="2016-07-04 17:19:50 aengelberg @seylerius: Given an input  ~a ~b , how do you know the  a  and  b  are to be parsed as individual  ~ &apos;s, as opposed to a code string of  &quot;a &quot;  followed by  &quot;b&quot; ?"><a href="#t1467652790000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:19:50</span>       aengelberg </span><span>@seylerius: Given an input </span><code>~a ~b</code><span>, how do you know the </span><code>a</code><span> and </span><code>b</code><span> are to be parsed as individual </span><code>~</code><span>&apos;s, as opposed to a code string of </span><code>&quot;a &quot;</code><span> followed by </span><code>&quot;b&quot;</code><span>?</span></div><div id="t1467653046000034" t="2016-07-04 17:24:06 seylerius @aengelberg: If I&apos;m reading this correctly, the characters touching the inside of the tokens need to be alphanumeric, or at least non-whitespace."><a href="#t1467653046000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:24:06</span>        seylerius </span><span>@aengelberg: If I&apos;m reading this correctly, the characters touching the inside of the tokens need to be alphanumeric, or at least non-whitespace.</span></div><div id="t1467653263000035" t="2016-07-04 17:27:43 aengelberg so  *a b c*  shouldn&apos;t be allowed?"><a href="#t1467653263000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:27:43</span>       aengelberg </span><span>so </span><code>*a b c*</code><span> shouldn&apos;t be allowed?</span></div><div id="t1467653304000036" t="2016-07-04 17:28:24 aengelberg the current grammar that I suggested would allow that. Just trying to get a sense of the range of inputs so I can help design a parser accordingly"><a href="#t1467653304000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:28:24</span>       aengelberg </span><span>the current grammar that I suggested would allow that. Just trying to get a sense of the range of inputs so I can help design a parser accordingly</span></div><div id="t1467653364000037" t="2016-07-04 17:29:24 seylerius *foo* *bar*   ➡   [:b &quot;foo&quot; &quot;bar&quot;]  
 foo* bar*   ➡   &quot;foo* bar*&quot; "><a href="#t1467653364000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:29:24</span>        seylerius </span><code>*foo* *bar*</code><span> </span><b>➡</b><span> </span><code>[:b &quot;foo&quot; &quot;bar&quot;] </code><span>
</span><code>foo* bar*</code><span> </span><b>➡</b><span> </span><code>&quot;foo* bar*&quot; </code></div><div id="t1467653616000038" t="2016-07-04 17:33:36 seylerius @aengelberg: that make sense?"><a href="#t1467653616000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:33:36</span>        seylerius </span><span>@aengelberg: that make sense?</span></div><div id="t1467653690000039" t="2016-07-04 17:34:50 aengelberg for the first example do you mean  [:b &quot;foo&quot;] [:b &quot;bar&quot;] ?"><a href="#t1467653690000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:34:50</span>       aengelberg </span><span>for the first example do you mean </span><code>[:b &quot;foo&quot;] [:b &quot;bar&quot;]</code><span>?</span></div><div id="t1467653836000040" t="2016-07-04 17:37:16 aengelberg is there a guarantee that  *a**b*  won&apos;t happen?"><a href="#t1467653836000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:37:16</span>       aengelberg </span><span>is there a guarantee that </span><code>*a**b*</code><span> won&apos;t happen?</span></div><div id="t1467653926000041" t="2016-07-04 17:38:46 seylerius @aengelberg: Yes. 
And guarantee? No. Ambiguity in the spec we can lock to an interpretation? Yes."><a href="#t1467653926000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:38:46</span>        seylerius </span><span>@aengelberg: Yes. 
And guarantee? No. Ambiguity in the spec we can lock to an interpretation? Yes.</span></div><div id="t1467654317000042" t="2016-07-04 17:45:17 seylerius We basically get to decide if that&apos;s a pair of bold characters or a flat string we&apos;ll leave be."><a href="#t1467654317000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:45:17</span>        seylerius </span><span>We basically get to decide if that&apos;s a pair of bold characters or a flat string we&apos;ll leave be.</span></div><div id="t1467654328000043" t="2016-07-04 17:45:28 seylerius It would only likely happen as a typo."><a href="#t1467654328000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:45:28</span>        seylerius </span><span>It would only likely happen as a typo.</span></div><div id="t1467654341000044" t="2016-07-04 17:45:41 seylerius (Or a stupid user)"><a href="#t1467654341000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:45:41</span>        seylerius </span><span>(Or a stupid user)</span></div><div id="t1467654487000045" t="2016-07-04 17:48:07 seylerius @aengelberg: I&apos;m basically upgrading organum. Sample org file:  http://sprunge.us/KBbL"><a href="#t1467654487000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:48:07</span>        seylerius </span><span>@aengelberg: I&apos;m basically upgrading organum. Sample org file: </span><a href="http://sprunge.us/KBbL" target="_blank">http://sprunge.us/KBbL</a></div><div id="t1467654661000046" t="2016-07-04 17:51:01 aengelberg hmm, thinking through how to enforce alphanumeric chars on the insides of tokens."><a href="#t1467654661000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:51:01</span>       aengelberg </span><span>hmm, thinking through how to enforce alphanumeric chars on the insides of tokens.</span></div><div id="t1467654742000047" t="2016-07-04 17:52:22 aengelberg doing a &quot;lookbehind&quot; on the last  *  is nontrivial."><a href="#t1467654742000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">17:52:22</span>       aengelberg </span><span>doing a &quot;lookbehind&quot; on the last </span><code>*</code><span> is nontrivial.</span></div><div id="t1467655276000048" t="2016-07-04 18:01:16 seylerius What if I stripped leading and trailing whitespace before parsing, and modified the base  string  rule to start and end alphanumeric? Would that be easier?"><a href="#t1467655276000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:01:16</span>        seylerius </span><span>What if I stripped leading and trailing whitespace before parsing, and modified the base </span><code>string</code><span> rule to start and end alphanumeric? Would that be easier?</span></div><div id="t1467655537000049" t="2016-07-04 18:05:37 seylerius But, no, that wouldn&apos;t quite work."><a href="#t1467655537000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:05:37</span>        seylerius </span><span>But, no, that wouldn&apos;t quite work.</span></div><div id="t1467655889000050" t="2016-07-04 18:11:29 seylerius @aengelberg: Will the parser ignore escaped tokens, like  \* ?"><a href="#t1467655889000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:11:29</span>        seylerius </span><span>@aengelberg: Will the parser ignore escaped tokens, like </span><code>\*</code><span>?</span></div><div id="t1467655968000051" t="2016-07-04 18:12:48 seylerius Ach. Clojure doesn&apos;t like  \*  in a string"><a href="#t1467655968000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:12:48</span>        seylerius </span><span>Ach. Clojure doesn&apos;t like </span><code>\*</code><span> in a string</span></div><div id="t1467657043000052" t="2016-07-04 18:30:43 seylerius @aengelberg: Is here any way to mark tokens to not be parsed?"><a href="#t1467657043000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:30:43</span>        seylerius </span><span>@aengelberg: Is here any way to mark tokens to not be parsed?</span></div><div id="t1467657215000053" t="2016-07-04 18:33:35 Andy would angle brackets  &lt;&gt;  to hide parsed elements work?"><a href="#t1467657215000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:33:35</span>             Andy </span><span>would angle brackets </span><code>&lt;&gt;</code><span> to hide parsed elements work?</span></div><div id="t1467657329000054" t="2016-07-04 18:35:29 aengelberg @seylerius you&apos;d have to do  \\*  if inside a Clojure string"><a href="#t1467657329000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:35:29</span>       aengelberg </span><span>@seylerius you&apos;d have to do </span><code>\\*</code><span> if inside a Clojure string</span></div><div id="t1467657414000055" t="2016-07-04 18:36:54 aengelberg the goal is to avoid parsing  *a *  as  [:b &quot;a &quot;]"><a href="#t1467657414000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:36:54</span>       aengelberg </span><span>the goal is to avoid parsing </span><code>*a *</code><span> as </span><code>[:b &quot;a &quot;]</code></div><div id="t1467657454000056" t="2016-07-04 18:37:34 seylerius @aengelberg: Anything special I have to do to mark that? I just tried parsing  \\*foo\\*  and got  (&quot;\\&quot; [:b &quot;foo\\&quot;]) "><a href="#t1467657454000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:37:34</span>        seylerius </span><span>@aengelberg: Anything special I have to do to mark that? I just tried parsing </span><code>\\*foo\\*</code><span> and got </span><code>(&quot;\\&quot; [:b &quot;foo\\&quot;]) </code></div><div id="t1467657502000057" t="2016-07-04 18:38:22 aengelberg instaparse doesn&apos;t automatically handle backslashes in any special way besides what has been defined in your grammar."><a href="#t1467657502000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:38:22</span>       aengelberg </span><span>instaparse doesn&apos;t automatically handle backslashes in any special way besides what has been defined in your grammar.</span></div><div id="t1467657702000059" t="2016-07-04 18:41:42 seylerius Okay. How do you define a simple backslash replacement in this type of grammar, then?"><a href="#t1467657702000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:41:42</span>        seylerius </span><span>Okay. How do you define a simple backslash replacement in this type of grammar, then?</span></div><div id="t1467657959000060" t="2016-07-04 18:45:59 aengelberg Maybe replace  &lt;string&gt;  with:
 &lt;string&gt; = &apos;\\\\*&apos; | #&apos;[^*/_+=~^_\\\\]+&apos;
 
 user&gt; (inline-markup &quot;a\\* b&quot;)
(&quot;a&quot; &quot;\\*&quot; &quot; b&quot;)
"><a href="#t1467657959000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:45:59</span>       aengelberg </span><span>Maybe replace </span><code>&lt;string&gt;</code><span> with:
</span><pre>&lt;string&gt; = &apos;\\\\*&apos; | #&apos;[^*/_+=~^_\\\\]+&apos;
</pre><span>
</span><pre>user&gt; (inline-markup &quot;a\\* b&quot;)
(&quot;a&quot; &quot;\\*&quot; &quot; b&quot;)
</pre></div><div id="t1467657977000061" t="2016-07-04 18:46:17 aengelberg Pretty messy, I know. (four backslashes  🙄 )"><a href="#t1467657977000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:46:17</span>       aengelberg </span><span>Pretty messy, I know. (four backslashes </span><b>🙄</b><span>)</span></div><div id="t1467658083000062" t="2016-07-04 18:48:03 aengelberg I don&apos;t know if this solves your problem though; you don&apos;t want to escape  * &apos;s in every  ** My Subsection  text, do you?"><a href="#t1467658083000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:48:03</span>       aengelberg </span><span>I don&apos;t know if this solves your problem though; you don&apos;t want to escape </span><code>*</code><span>&apos;s in every </span><code>** My Subsection</code><span> text, do you?</span></div><div id="t1467658153000063" t="2016-07-04 18:49:13 aengelberg sorry if I&apos;m a bit unhelpful; phasing in and out of AFK"><a href="#t1467658153000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:49:13</span>       aengelberg </span><span>sorry if I&apos;m a bit unhelpful; phasing in and out of AFK</span></div><div id="t1467658238000064" t="2016-07-04 18:50:38 seylerius I&apos;m thinking I&apos;m just going to tell users that if they want a plain  *  they have to escape it."><a href="#t1467658238000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:50:38</span>        seylerius </span><span>I&apos;m thinking I&apos;m just going to tell users that if they want a plain </span><code>*</code><span> they have to escape it.</span></div><div id="t1467658283000065" t="2016-07-04 18:51:23 seylerius Headlines are already handled by the time this stage of parsing is invoked, so those won&apos;t be an issue."><a href="#t1467658283000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:51:23</span>        seylerius </span><span>Headlines are already handled by the time this stage of parsing is invoked, so those won&apos;t be an issue.</span></div><div id="t1467658401000066" t="2016-07-04 18:53:21 seylerius And your special case of  *a**b*  is apparently already readily converted to  ([:b &quot;a&quot;] [:b &quot;b&quot;])"><a href="#t1467658401000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">18:53:21</span>        seylerius </span><span>And your special case of </span><code>*a**b*</code><span> is apparently already readily converted to </span><code>([:b &quot;a&quot;] [:b &quot;b&quot;])</code></div><div id="t1467663066000067" t="2016-07-04 20:11:06 seylerius @aengelberg: Separate (earlier stage) parser: Is it possible (other than by having respective rules for  #&apos;^* &apos; ,  #&apos;^** &apos; ,  #&apos;^*** &apos; , etc) to easily produce  h1 ,  h2 ,  h3 , etc?"><a href="#t1467663066000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">20:11:06</span>        seylerius </span><span>@aengelberg: Separate (earlier stage) parser: Is it possible (other than by having respective rules for </span><code>#&apos;^* &apos;</code><span>, </span><code>#&apos;^** &apos;</code><span>, </span><code>#&apos;^*** &apos;</code><span>, etc) to easily produce </span><code>h1</code><span>, </span><code>h2</code><span>, </span><code>h3</code><span>, etc?</span></div><div id="t1467663625000068" t="2016-07-04 20:20:25 seylerius Actually, yeah. Just don&apos;t hide the token, and I can put that through a counter after the fact."><a href="#t1467663625000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-04</span> <span class="t" onclick="H(this)">20:20:25</span>        seylerius </span><span>Actually, yeah. Just don&apos;t hide the token, and I can put that through a counter after the fact.</span></div><div id="t1467678938000069" t="2016-07-05 00:35:38 seylerius @aengelberg: I&apos;m trying to make blank lines in one parser flag as  :blank , but they&apos;re staying as empty seqs. 
Parser:  http://sprunge.us/RcOf 
Tester:  http://sprunge.us/GGdK"><a href="#t1467678938000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">00:35:38</span>        seylerius </span><span>@aengelberg: I&apos;m trying to make blank lines in one parser flag as </span><code>:blank</code><span>, but they&apos;re staying as empty seqs. 
Parser: </span><a href="http://sprunge.us/RcOf" target="_blank">http://sprunge.us/RcOf</a><span>
Tester: </span><a href="http://sprunge.us/GGdK" target="_blank">http://sprunge.us/GGdK</a></div><div id="t1467679158000070" t="2016-07-05 00:39:18 aengelberg currently that parser doesn&apos;t account for any newlines (`\n`) between the lines / blank lines, is that intentional?"><a href="#t1467679158000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">00:39:18</span>       aengelberg </span><span>currently that parser doesn&apos;t account for any newlines (`\n`) between the lines / blank lines, is that intentional?</span></div><div id="t1467680082000071" t="2016-07-05 00:54:42 seylerius The library I&apos;m modifying reads the file into a line-seq initially, so I&apos;m mostly just going with that."><a href="#t1467680082000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">00:54:42</span>        seylerius </span><span>The library I&apos;m modifying reads the file into a line-seq initially, so I&apos;m mostly just going with that.</span></div><div id="t1467746797000072" t="2016-07-05 19:26:37 seylerius @aengelberg: Think it would be easier if it was parsing the original, and not a line-seq?"><a href="#t1467746797000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">19:26:37</span>        seylerius </span><span>@aengelberg: Think it would be easier if it was parsing the original, and not a line-seq?</span></div><div id="t1467747027000073" t="2016-07-05 19:30:27 aengelberg it may be useful to, instead of line-seq, use a different parser on the original input that identifies the sections / subsections but not the inline syntax."><a href="#t1467747027000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">19:30:27</span>       aengelberg </span><span>it may be useful to, instead of line-seq, use a different parser on the original input that identifies the sections / subsections but not the inline syntax.</span></div><div id="t1467747131000074" t="2016-07-05 19:32:11 seylerius Yeah. I&apos;m already splitting it into multiple instaparsers. I take it insta can handle multi-line input?"><a href="#t1467747131000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">19:32:11</span>        seylerius </span><span>Yeah. I&apos;m already splitting it into multiple instaparsers. I take it insta can handle multi-line input?</span></div><div id="t1467747243000075" t="2016-07-05 19:34:03 aengelberg yeah, just make sure all your strings / regexes handle them. All characters are equal citizens in instaparse input, it&apos;s up to the grammar to handle what it wants to handle. And make sure the grammar handles CRLFs (`\r\n`) which may appear."><a href="#t1467747243000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">19:34:03</span>       aengelberg </span><span>yeah, just make sure all your strings / regexes handle them. All characters are equal citizens in instaparse input, it&apos;s up to the grammar to handle what it wants to handle. And make sure the grammar handles CRLFs (`\r\n`) which may appear.</span></div><div id="t1467757336000076" t="2016-07-05 22:22:16 seylerius @aengelberg: So make sure my regexps are multi-line and whatnot?"><a href="#t1467757336000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">22:22:16</span>        seylerius </span><span>@aengelberg: So make sure my regexps are multi-line and whatnot?</span></div><div id="t1467757647000077" t="2016-07-05 22:27:27 aengelberg yep"><a href="#t1467757647000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">22:27:27</span>       aengelberg </span><span>yep</span></div><div id="t1467757664000078" t="2016-07-05 22:27:44 aengelberg e.g.  .  inside a regex matches any non-newline character"><a href="#t1467757664000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">22:27:44</span>       aengelberg </span><span>e.g. </span><code>.</code><span> inside a regex matches any non-newline character</span></div><div id="t1467758152000079" t="2016-07-05 22:35:52 aengelberg also,  \s  inside a regex handles any kind of whitespace (including newlines)"><a href="#t1467758152000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">22:35:52</span>       aengelberg </span><span>also, </span><code>\s</code><span> inside a regex handles any kind of whitespace (including newlines)</span></div><div id="t1467758454000080" t="2016-07-05 22:40:54 seylerius Good caveats to know, thanks"><a href="#t1467758454000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-05</span> <span class="t" onclick="H(this)">22:40:54</span>        seylerius </span><span>Good caveats to know, thanks</span></div><div id="t1467871526000081" t="2016-07-07 06:05:26 seylerius @aengelberg: Any particular instaparse way to go multi-line, or just specify it in the regexps?"><a href="#t1467871526000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">06:05:26</span>        seylerius </span><span>@aengelberg: Any particular instaparse way to go multi-line, or just specify it in the regexps?</span></div><div id="t1467911408000082" t="2016-07-07 17:10:08 aengelberg @seylerius not sure what exactly you&apos;re confused about, but here are some examples:
imagine you&apos;re parsing the following input:
 aaaa
bbb
cccccc
 
the grammar could look like
 S = A &apos;\n&apos; B &apos;\n&apos; C
A = &apos;a&apos;+
B = &apos;b&apos;+
C = &apos;c&apos;+
"><a href="#t1467911408000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:10:08</span>       aengelberg </span><span>@seylerius not sure what exactly you&apos;re confused about, but here are some examples:
imagine you&apos;re parsing the following input:
</span><pre>aaaa
bbb
cccccc
</pre><span>
the grammar could look like
</span><pre>S = A &apos;\n&apos; B &apos;\n&apos; C
A = &apos;a&apos;+
B = &apos;b&apos;+
C = &apos;c&apos;+
</pre></div><div id="t1467911445000083" t="2016-07-07 17:10:45 aengelberg or
 S = #&apos;a+\n&apos; #&apos;b+\n&apos; #&apos;c+&apos;
"><a href="#t1467911445000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:10:45</span>       aengelberg </span><span>or
</span><pre>S = #&apos;a+\n&apos; #&apos;b+\n&apos; #&apos;c+&apos;
</pre></div><div id="t1467911505000084" t="2016-07-07 17:11:45 aengelberg either  \n  or  \\n  would work if you are inside a Clojure string."><a href="#t1467911505000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:11:45</span>       aengelberg </span><span>either </span><code>\n</code><span> or </span><code>\\n</code><span> would work if you are inside a Clojure string.</span></div><div id="t1467911612000085" t="2016-07-07 17:13:32 aengelberg S = A ows B ows C
A = &apos;a&apos;+
B = &apos;b&apos;+
C = &apos;c&apos;+
(* optional whitespace *)
&lt;ows&gt; = &lt;#&apos;\s*&apos;&gt;
"><a href="#t1467911612000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:13:32</span>       aengelberg </span><pre>S = A ows B ows C
A = &apos;a&apos;+
B = &apos;b&apos;+
C = &apos;c&apos;+
(* optional whitespace *)
&lt;ows&gt; = &lt;#&apos;\s*&apos;&gt;
</pre></div><div id="t1467911637000086" t="2016-07-07 17:13:57 aengelberg For that example, inside a Clojure string you would need to change  \s  to  \\s ."><a href="#t1467911637000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:13:57</span>       aengelberg </span><span>For that example, inside a Clojure string you would need to change </span><code>\s</code><span> to </span><code>\\s</code><span>.</span></div><div id="t1467913334000087" t="2016-07-07 17:42:14 seylerius @aengelberg: Also, how would you modify what would normally be a  .*  to not eat an optional  :[  that follows it? Or would you just post-process that out after?"><a href="#t1467913334000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:42:14</span>        seylerius </span><span>@aengelberg: Also, how would you modify what would normally be a </span><code>.*</code><span> to not eat an optional </span><code>:[</code><span> that follows it? Or would you just post-process that out after?</span></div><div id="t1467913476000088" t="2016-07-07 17:44:36 aengelberg so you&apos;re trying to parse  #&quot;shown-part hidden-part&quot;  but only return  &quot;shown-part&quot;  in the parse result?"><a href="#t1467913476000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:44:36</span>       aengelberg </span><span>so you&apos;re trying to parse </span><code>#&quot;shown-part hidden-part&quot;</code><span> but only return </span><code>&quot;shown-part&quot;</code><span> in the parse result?</span></div><div id="t1467913617000089" t="2016-07-07 17:46:57 aengelberg you could use the regex lookahead to omit it from the result, but then actually parse it (with instaparse&apos;s  &lt;&gt;  hiding feature) in order to properly advance the parser.
 S = #&apos;shown-part(?=hidden-part)&apos; &lt;#&apos;hidden-part&apos;&gt;
"><a href="#t1467913617000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:46:57</span>       aengelberg </span><span>you could use the regex lookahead to omit it from the result, but then actually parse it (with instaparse&apos;s </span><code>&lt;&gt;</code><span> hiding feature) in order to properly advance the parser.
</span><pre>S = #&apos;shown-part(?=hidden-part)&apos; &lt;#&apos;hidden-part&apos;&gt;
</pre></div><div id="t1467913829000090" t="2016-07-07 17:50:29 aengelberg or unhide the second  #&apos;hidden-part&apos;  if you actually do want it in the parse tree, but separate from  #&apos;shown-part&apos; ."><a href="#t1467913829000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">17:50:29</span>       aengelberg </span><span>or unhide the second </span><code>#&apos;hidden-part&apos;</code><span> if you actually do want it in the parse tree, but separate from </span><code>#&apos;shown-part&apos;</code><span>.</span></div><div id="t1467916756000091" t="2016-07-07 18:39:16 seylerius @aengelberg: More like org-mode headlines allow tags at the end in that style. Not hidden so much as separate."><a href="#t1467916756000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-07</span> <span class="t" onclick="H(this)">18:39:16</span>        seylerius </span><span>@aengelberg: More like org-mode headlines allow tags at the end in that style. Not hidden so much as separate.</span></div><div id="t1467952087000092" t="2016-07-08 04:28:07 seylerius @aengelberg: Basically, how would you parse an optional non-hidden token that follows a token that may contain things somewhat similar to the optional non-hidden token?"><a href="#t1467952087000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-08</span> <span class="t" onclick="H(this)">04:28:07</span>        seylerius </span><span>@aengelberg: Basically, how would you parse an optional non-hidden token that follows a token that may contain things somewhat similar to the optional non-hidden token?</span></div><div id="t1468261311000093" t="2016-07-11 18:21:51 seylerius Ah, I see what you&apos;re talking about"><a href="#t1468261311000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-07-11</span> <span class="t" onclick="H(this)">18:21:51</span>        seylerius </span><span>Ah, I see what you&apos;re talking about</span></div><div id="t1471480536000007" t="2016-08-18 00:35:36 uwo Is there anyway to prevent  intsta/parse  from printing to the repl on error?"><a href="#t1471480536000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-18</span> <span class="t" onclick="H(this)">00:35:36</span>              uwo </span><span>Is there anyway to prevent </span><code>intsta/parse</code><span> from printing to the repl on error?</span></div><div id="t1471574879000008" t="2016-08-19 02:47:59 seylerius Hrm. Is there a way to make some tokens higher priority than others? This parser ( http://sprunge.us/hFCU ) eats the entire input file, failing to break out the initial metadata."><a href="#t1471574879000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">02:47:59</span>        seylerius </span><span>Hrm. Is there a way to make some tokens higher priority than others? This parser (</span><a href="http://sprunge.us/hFCU" target="_blank">http://sprunge.us/hFCU</a><span>) eats the entire input file, failing to break out the initial metadata.</span></div><div id="t1471574972000009" t="2016-08-19 02:49:32 seylerius When I try to make the  content  token reluctant (adding a  ?  to the  * ), it fails to match when the content section begins."><a href="#t1471574972000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">02:49:32</span>        seylerius </span><span>When I try to make the </span><code>content</code><span> token reluctant (adding a </span><code>?</code><span> to the </span><code>*</code><span>), it fails to match when the content section begins.</span></div><div id="t1471615915000010" t="2016-08-19 14:11:55 dave @seylerius you could use ordered choice  https://github.com/Engelberg/instaparse#ordered-choice"><a href="#t1471615915000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:11:55</span>             dave </span><span>@seylerius you could use ordered choice </span><a href="https://github.com/Engelberg/instaparse#ordered-choice" target="_blank">https://github.com/Engelberg/instaparse#ordered-choice</a></div><div id="t1471615948000012" t="2016-08-19 14:12:28 dave define a rule that could be one or the other, using  /  instead of  | , and put the one you prefer first"><a href="#t1471615948000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:12:28</span>             dave </span><span>define a rule that could be one or the other, using </span><code>/</code><span> instead of </span><code>|</code><span>, and put the one you prefer first</span></div><div id="t1471616012000013" t="2016-08-19 14:13:32 dave although, it looks like your title rule is probably consuming everything"><a href="#t1471616012000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:13:32</span>             dave </span><span>although, it looks like your title rule is probably consuming everything</span></div><div id="t1471616025000014" t="2016-08-19 14:13:45 dave #&apos;.*&apos;"><a href="#t1471616025000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:13:45</span>             dave </span><code>#&apos;.*&apos;</code></div><div id="t1471616030000015" t="2016-08-19 14:13:50 dave that will consume everything"><a href="#t1471616030000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:13:50</span>             dave </span><span>that will consume everything</span></div><div id="t1471616045000016" t="2016-08-19 14:14:05 seylerius Nope, it&apos;s not eating newlines."><a href="#t1471616045000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:14:05</span>        seylerius </span><span>Nope, it&apos;s not eating newlines.</span></div><div id="t1471616055000017" t="2016-08-19 14:14:15 seylerius This looks like it&apos;s going to do it."><a href="#t1471616055000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:14:15</span>        seylerius </span><span>This looks like it&apos;s going to do it.</span></div><div id="t1471616058000018" t="2016-08-19 14:14:18 dave oh, you&apos;re right!"><a href="#t1471616058000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">14:14:18</span>             dave </span><span>oh, you&apos;re right!</span></div><div id="t1471625134000019" t="2016-08-19 16:45:34 aengelberg @uwo: instaparse doesn&apos;t print anything when a failure occurs. It returns a  instaparse.Failure  object which happens to print in a special way at the REPL"><a href="#t1471625134000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-19</span> <span class="t" onclick="H(this)">16:45:34</span>       aengelberg </span><span>@uwo: instaparse doesn&apos;t print anything when a failure occurs. It returns a </span><code>instaparse.Failure</code><span> object which happens to print in a special way at the REPL</span></div><div id="t1472313305000020" t="2016-08-27 15:55:05 seylerius Okay, I&apos;m producing hiccup-style structures from inataparse. I need help figuring out how to re-parse specific items within the structure."><a href="#t1472313305000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-27</span> <span class="t" onclick="H(this)">15:55:05</span>        seylerius </span><span>Okay, I&apos;m producing hiccup-style structures from inataparse. I need help figuring out how to re-parse specific items within the structure.</span></div><div id="t1472313399000021" t="2016-08-27 15:56:39 seylerius Solo strings (unmatched with a tag) are one of the types I need to re- parse in place"><a href="#t1472313399000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-27</span> <span class="t" onclick="H(this)">15:56:39</span>        seylerius </span><span>Solo strings (unmatched with a tag) are one of the types I need to re- parse in place</span></div><div id="t1472313439000022" t="2016-08-27 15:57:19 seylerius Wait, this would go better in #C03S1KBA2"><a href="#t1472313439000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-27</span> <span class="t" onclick="H(this)">15:57:19</span>        seylerius </span><span>Wait, this would go better in #C03S1KBA2</span></div><div id="t1472313549000023" t="2016-08-27 15:59:09 seylerius Didn&apos;t realize I was still in instaparse"><a href="#t1472313549000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-27</span> <span class="t" onclick="H(this)">15:59:09</span>        seylerius </span><span>Didn&apos;t realize I was still in instaparse</span></div><div id="t1472343669000024" t="2016-08-28 00:21:09 aengelberg @seylerius this is a good place for that."><a href="#t1472343669000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:21:09</span>       aengelberg </span><span>@seylerius this is a good place for that.</span></div><div id="t1472343695000025" t="2016-08-28 00:21:35 aengelberg You could put further &quot;insta/parse&quot;s in the functions inside the &quot;insta/transform&quot; map"><a href="#t1472343695000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:21:35</span>       aengelberg </span><span>You could put further &quot;insta/parse&quot;s in the functions inside the &quot;insta/transform&quot; map</span></div><div id="t1472343708000026" t="2016-08-28 00:21:48 seylerius Wat"><a href="#t1472343708000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:21:48</span>        seylerius </span><span>Wat</span></div><div id="t1472343713000027" t="2016-08-28 00:21:53 seylerius This is awesome."><a href="#t1472343713000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:21:53</span>        seylerius </span><span>This is awesome.</span></div><div id="t1472343785000028" t="2016-08-28 00:23:05 aengelberg (insta/transform {:x (fn [s] (insta/parse otherparser s))} (insta/parse firstparser s)"><a href="#t1472343785000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:23:05</span>       aengelberg </span><code>(insta/transform {:x (fn [s] (insta/parse otherparser s))} (insta/parse firstparser s)</code></div><div id="t1472343792000029" t="2016-08-28 00:23:12 aengelberg Hard to bang out a good example on mobile"><a href="#t1472343792000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:23:12</span>       aengelberg </span><span>Hard to bang out a good example on mobile</span></div><div id="t1472343818000030" t="2016-08-28 00:23:38 seylerius Lolyep."><a href="#t1472343818000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:23:38</span>        seylerius </span><span>Lolyep.</span></div><div id="t1472343826000032" t="2016-08-28 00:23:46 seylerius That looks fascinating."><a href="#t1472343826000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:23:46</span>        seylerius </span><span>That looks fascinating.</span></div><div id="t1472343852000033" t="2016-08-28 00:24:12 aengelberg It would get weird if the nested parser had an error though."><a href="#t1472343852000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:24:12</span>       aengelberg </span><span>It would get weird if the nested parser had an error though.</span></div><div id="t1472343859000034" t="2016-08-28 00:24:19 seylerius Yeah."><a href="#t1472343859000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:24:19</span>        seylerius </span><span>Yeah.</span></div><div id="t1472343929000035" t="2016-08-28 00:25:29 seylerius So how deep does it go looking for  :x ?"><a href="#t1472343929000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:25:29</span>        seylerius </span><span>So how deep does it go looking for </span><code>:x</code><span>?</span></div><div id="t1472343969000036" t="2016-08-28 00:26:09 seylerius And how do you make it check for loose strings?"><a href="#t1472343969000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:26:09</span>        seylerius </span><span>And how do you make it check for loose strings?</span></div><div id="t1472344017000037" t="2016-08-28 00:26:57 aengelberg It does a full traversal of the hiccup / enlive, as long as all structures around the  :x  are valid hiccup / enlive"><a href="#t1472344017000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:26:57</span>       aengelberg </span><span>It does a full traversal of the hiccup / enlive, as long as all structures around the </span><code>:x</code><span> are valid hiccup / enlive</span></div><div id="t1472344025000038" t="2016-08-28 00:27:05 seylerius Nice"><a href="#t1472344025000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:27:05</span>        seylerius </span><span>Nice</span></div><div id="t1472345954000039" t="2016-08-28 00:59:14 seylerius @aengelberg: How do you get solo strings?"><a href="#t1472345954000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">00:59:14</span>        seylerius </span><span>@aengelberg: How do you get solo strings?</span></div><div id="t1472418079000002" t="2016-08-28 21:01:19 seylerius Gah, what&apos;s wrong with this parser?  doc-metadata  works fine, but running  headlines  on the remaining content just returns flat content.  https://github.com/seylerius/organum"><a href="#t1472418079000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:01:19</span>        seylerius </span><span>Gah, what&apos;s wrong with this parser? </span><code>doc-metadata</code><span> works fine, but running </span><code>headlines</code><span> on the remaining content just returns flat content. </span><a href="https://github.com/seylerius/organum" target="_blank">https://github.com/seylerius/organum</a></div><div id="t1472418156000004" t="2016-08-28 21:02:36 seylerius @aengelberg: Got any clues?"><a href="#t1472418156000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:02:36</span>        seylerius </span><span>@aengelberg: Got any clues?</span></div><div id="t1472418237000005" t="2016-08-28 21:03:57 seylerius Simple reproduction:  (headlines (last (doc-metadata (slurp &quot;&quot;)))) "><a href="#t1472418237000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:03:57</span>        seylerius </span><span>Simple reproduction: </span><code>(headlines (last (doc-metadata (slurp &quot;&quot;)))) </code></div><div id="t1472418308000006" t="2016-08-28 21:05:08 seylerius It&apos;s something in the  h  token, because that&apos;s the last thing I changed before it started failing."><a href="#t1472418308000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:05:08</span>        seylerius </span><span>It&apos;s something in the </span><code>h</code><span> token, because that&apos;s the last thing I changed before it started failing.</span></div><div id="t1472418645000007" t="2016-08-28 21:10:45 ska At a first glance, the  #&apos;.+&apos;  looks suspicious to me.  Is greediness biting you here? (Did not try it out, though)"><a href="#t1472418645000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:10:45</span>              ska </span><span>At a first glance, the </span><code>#&apos;.+&apos;</code><span> looks suspicious to me.  Is greediness biting you here? (Did not try it out, though)</span></div><div id="t1472419500000008" t="2016-08-28 21:25:00 aengelberg @seylerius the regex you put for  :content  is probably not what you want. Due to the  (?s)  flag, seems to match everything including newlines, as long as the first character is not a  * ."><a href="#t1472419500000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:25:00</span>       aengelberg </span><span>@seylerius the regex you put for </span><code>:content</code><span> is probably not what you want. Due to the </span><code>(?s)</code><span> flag, seems to match everything including newlines, as long as the first character is not a </span><code>*</code><span>.</span></div><div id="t1472419506000009" t="2016-08-28 21:25:06 aengelberg I&apos;m not sure what your desired behavior is though."><a href="#t1472419506000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:25:06</span>       aengelberg </span><span>I&apos;m not sure what your desired behavior is though.</span></div><div id="t1472419576000010" t="2016-08-28 21:26:16 aengelberg BTW, both the first  ^  and the  ?  in your regex appear redundant, if I understand it correctly."><a href="#t1472419576000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:26:16</span>       aengelberg </span><span>BTW, both the first </span><code>^</code><span> and the </span><code>?</code><span> in your regex appear redundant, if I understand it correctly.</span></div><div id="t1472419589000011" t="2016-08-28 21:26:29 seylerius The content regexp is fine. It&apos;s after I changed a few things to tidy up  :h  and added tag parsing that it started failing."><a href="#t1472419589000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:26:29</span>        seylerius </span><span>The content regexp is fine. It&apos;s after I changed a few things to tidy up </span><code>:h</code><span> and added tag parsing that it started failing.</span></div><div id="t1472419614000012" t="2016-08-28 21:26:54 seylerius Basically, a headline starts with some number of stars. Everything else isn&apos;t a headline."><a href="#t1472419614000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:26:54</span>        seylerius </span><span>Basically, a headline starts with some number of stars. Everything else isn&apos;t a headline.</span></div><div id="t1472419616000013" t="2016-08-28 21:26:56 aengelberg I cloned your project and am looking at that parser. Is there a different version / branch I missed?"><a href="#t1472419616000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:26:56</span>       aengelberg </span><span>I cloned your project and am looking at that parser. Is there a different version / branch I missed?</span></div><div id="t1472419658000014" t="2016-08-28 21:27:38 seylerius Nope, I pushed the latest version just before I spoke up today."><a href="#t1472419658000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:27:38</span>        seylerius </span><span>Nope, I pushed the latest version just before I spoke up today.</span></div><div id="t1472419693000015" t="2016-08-28 21:28:13 aengelberg Sorry I may have been unclear. When I said  :content  I meant the content inside the headlines parser."><a href="#t1472419693000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:28:13</span>       aengelberg </span><span>Sorry I may have been unclear. When I said </span><code>:content</code><span> I meant the content inside the headlines parser.</span></div><div id="t1472419706000016" t="2016-08-28 21:28:26 aengelberg Not the doc-metadata parser"><a href="#t1472419706000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:28:26</span>       aengelberg </span><span>Not the doc-metadata parser</span></div><div id="t1472419745000017" t="2016-08-28 21:29:05 aengelberg As an experiment I removed all the hide-tags from the headlines parser, since I got that behavior you were talking about (flat content). That exposed the headlines&apos;  :content  rule as being greedy."><a href="#t1472419745000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:29:05</span>       aengelberg </span><span>As an experiment I removed all the hide-tags from the headlines parser, since I got that behavior you were talking about (flat content). That exposed the headlines&apos; </span><code>:content</code><span> rule as being greedy.</span></div><div id="t1472419806000018" t="2016-08-28 21:30:06 aengelberg organum.core&gt; (headlines content)
[:S [:token [:content &quot;This is an attempt...
"><a href="#t1472419806000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:30:06</span>       aengelberg </span><pre>organum.core&gt; (headlines content)
[:S [:token [:content &quot;This is an attempt...
</pre></div><div id="t1472419820000019" t="2016-08-28 21:30:20 seylerius Yep. I&apos;ve got an ordered choice making it prefer to define a section (headline then content) if possible, and just content if not. The defining difference between content and headline is whether it starts with stars."><a href="#t1472419820000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:30:20</span>        seylerius </span><span>Yep. I&apos;ve got an ordered choice making it prefer to define a section (headline then content) if possible, and just content if not. The defining difference between content and headline is whether it starts with stars.</span></div><div id="t1472419871000020" t="2016-08-28 21:31:11 seylerius Although, Hmmm. You&apos;ve got a point about the mode there."><a href="#t1472419871000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:31:11</span>        seylerius </span><span>Although, Hmmm. You&apos;ve got a point about the mode there.</span></div><div id="t1472419918000021" t="2016-08-28 21:31:58 aengelberg I think this is what happened:
- The  section  rule failed at the start of the string
- It then fell back to the  content  rule due to ordered choice
- The  content  rule mistakenly parses the whole string (for the reason I mentioned above)
- Parse is done"><a href="#t1472419918000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:31:58</span>       aengelberg </span><span>I think this is what happened:
- The </span><code>section</code><span> rule failed at the start of the string
- It then fell back to the </span><code>content</code><span> rule due to ordered choice
- The </span><code>content</code><span> rule mistakenly parses the whole string (for the reason I mentioned above)
- Parse is done</span></div><div id="t1472420062000023" t="2016-08-28 21:34:22 seylerius Yeah. You&apos;re right. Making the content rule less accepting (not  (?s) ) fixes that part, and now I&apos;m seeing failures to parse the first headline. Joy."><a href="#t1472420062000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:34:22</span>        seylerius </span><span>Yeah. You&apos;re right. Making the content rule less accepting (not </span><code>(?s)</code><span>) fixes that part, and now I&apos;m seeing failures to parse the first headline. Joy.</span></div><div id="t1472420187000024" t="2016-08-28 21:36:27 seylerius How does inataparse play with non-capturing groups?"><a href="#t1472420187000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:36:27</span>        seylerius </span><span>How does inataparse play with non-capturing groups?</span></div><div id="t1472420289000025" t="2016-08-28 21:38:09 aengelberg Not familiar with that term; are you referring to the groups returned by a Java regex match?"><a href="#t1472420289000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:38:09</span>       aengelberg </span><span>Not familiar with that term; are you referring to the groups returned by a Java regex match?</span></div><div id="t1472420404000026" t="2016-08-28 21:40:04 seylerius Non-capturing groups are for saying, &quot;this should be here, but don&apos;t return it in a group&quot;"><a href="#t1472420404000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:40:04</span>        seylerius </span><span>Non-capturing groups are for saying, &quot;this should be here, but don&apos;t return it in a group&quot;</span></div><div id="t1472420439000027" t="2016-08-28 21:40:39 seylerius Okay, new push. Can&apos;t manage to get tags out separate."><a href="#t1472420439000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:40:39</span>        seylerius </span><span>Okay, new push. Can&apos;t manage to get tags out separate.</span></div><div id="t1472420480000028" t="2016-08-28 21:41:20 aengelberg oh, you mean things like regex lookahead and lookbehind?"><a href="#t1472420480000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:41:20</span>       aengelberg </span><span>oh, you mean things like regex lookahead and lookbehind?</span></div><div id="t1472420561000029" t="2016-08-28 21:42:41 seylerius They work if I make them mandatory, but get eaten by the headline body if they&apos;re optional. Would lookahead allow saying &quot;if there&apos;s whitespace followed by a colon, stop here&quot;?"><a href="#t1472420561000029" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:42:41</span>        seylerius </span><span>They work if I make them mandatory, but get eaten by the headline body if they&apos;re optional. Would lookahead allow saying &quot;if there&apos;s whitespace followed by a colon, stop here&quot;?</span></div><div id="t1472420737000030" t="2016-08-28 21:45:37 aengelberg This is the instaparse source code that applies regexes, may shed some light on whether certain constructs would work.  https://github.com/Engelberg/instaparse/blob/master/src/instaparse/gll.clj#L670"><a href="#t1472420737000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:45:37</span>       aengelberg </span><span>This is the instaparse source code that applies regexes, may shed some light on whether certain constructs would work. </span><a href="https://github.com/Engelberg/instaparse/blob/master/src/instaparse/gll.clj#L670" target="_blank">https://github.com/Engelberg/instaparse/blob/master/src/instaparse/gll.clj#L670</a></div><div id="t1472420841000032" t="2016-08-28 21:47:21 aengelberg I would expect regex non matching lookaheads to work, but non-matching lookbehinds to NOT work. Instaparse runs a regex match on the substring of the current index onward, so previous characters are invisible. EDIT: I misunderstood the term &quot;non-matching&quot;"><a href="#t1472420841000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:47:21</span>       aengelberg </span><span>I would expect regex non matching lookaheads to work, but non-matching lookbehinds to NOT work. Instaparse runs a regex match on the substring of the current index onward, so previous characters are invisible. EDIT: I misunderstood the term &quot;non-matching&quot;</span></div><div id="t1472420951000033" t="2016-08-28 21:49:11 aengelberg I see you&apos;re using  (?:)  now. I don&apos;t think &quot;non capturing&quot; is what you want"><a href="#t1472420951000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:49:11</span>       aengelberg </span><span>I see you&apos;re using </span><code>(?:)</code><span> now. I don&apos;t think &quot;non capturing&quot; is what you want</span></div><div id="t1472420962000034" t="2016-08-28 21:49:22 seylerius I think you&apos;re right."><a href="#t1472420962000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:49:22</span>        seylerius </span><span>I think you&apos;re right.</span></div><div id="t1472420987000035" t="2016-08-28 21:49:47 aengelberg organum.core&gt; (re-find #&quot;a&quot; &quot;a&quot;)
&quot;a&quot;
organum.core&gt; (re-find #&quot;(?:a)&quot; &quot;a&quot;)
&quot;a&quot;
"><a href="#t1472420987000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:49:47</span>       aengelberg </span><pre>organum.core&gt; (re-find #&quot;a&quot; &quot;a&quot;)
&quot;a&quot;
organum.core&gt; (re-find #&quot;(?:a)&quot; &quot;a&quot;)
&quot;a&quot;
</pre></div><div id="t1472420996000036" t="2016-08-28 21:49:56 seylerius What&apos;s weird is non-greedy options fail entirely."><a href="#t1472420996000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:49:56</span>        seylerius </span><span>What&apos;s weird is non-greedy options fail entirely.</span></div><div id="t1472421018000037" t="2016-08-28 21:50:18 aengelberg (?:)  basically means, if there are any other groups  ()  inside that block, DON&apos;T return them as an additional output."><a href="#t1472421018000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:50:18</span>       aengelberg </span><code>(?:)</code><span> basically means, if there are any other groups </span><code>()</code><span> inside that block, DON&apos;T return them as an additional output.</span></div><div id="t1472421064000038" t="2016-08-28 21:51:04 seylerius Ah, it looks like negative lookahead is the trick."><a href="#t1472421064000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:51:04</span>        seylerius </span><span>Ah, it looks like negative lookahead is the trick.</span></div><div id="t1472421080000039" t="2016-08-28 21:51:20 aengelberg (?!=) ?"><a href="#t1472421080000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:51:20</span>       aengelberg </span><code>(?!=)</code><span>?</span></div><div id="t1472421103000040" t="2016-08-28 21:51:43 aengelberg the  ?:  flag shouldn&apos;t affect Instaparse&apos;s usage of regexes at all. Instaparse throws away match groups"><a href="#t1472421103000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:51:43</span>       aengelberg </span><span>the </span><code>?:</code><span> flag shouldn&apos;t affect Instaparse&apos;s usage of regexes at all. Instaparse throws away match groups</span></div><div id="t1472421115000041" t="2016-08-28 21:51:55 seylerius (?!\\s+:)"><a href="#t1472421115000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:51:55</span>        seylerius </span><code>(?!\\s+:)</code></div><div id="t1472421141000042" t="2016-08-28 21:52:21 aengelberg seems legit"><a href="#t1472421141000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:52:21</span>       aengelberg </span><span>seems legit</span></div><div id="t1472421165000043" t="2016-08-28 21:52:45 seylerius Nope. Pushing. Still eats the tags."><a href="#t1472421165000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:52:45</span>        seylerius </span><span>Nope. Pushing. Still eats the tags.</span></div><div id="t1472421180000045" t="2016-08-28 21:53:00 aengelberg hmm"><a href="#t1472421180000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:53:00</span>       aengelberg </span><span>hmm</span></div><div id="t1472421196000046" t="2016-08-28 21:53:16 seylerius Pushed"><a href="#t1472421196000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:53:16</span>        seylerius </span><span>Pushed</span></div><div id="t1472421231000047" t="2016-08-28 21:53:51 aengelberg need to run now, can probably help more in an hour or so. I&apos;d say the next step is manually parsing the regexes on the strings."><a href="#t1472421231000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:53:51</span>       aengelberg </span><span>need to run now, can probably help more in an hour or so. I&apos;d say the next step is manually parsing the regexes on the strings.</span></div><div id="t1472421258000048" t="2016-08-28 21:54:18 aengelberg and try gradually taking characters away from the regex to see what the problem is"><a href="#t1472421258000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:54:18</span>       aengelberg </span><span>and try gradually taking characters away from the regex to see what the problem is</span></div><div id="t1472421263000049" t="2016-08-28 21:54:23 seylerius Okay, thanks for the help. Talk with ya when you&apos;ve got time."><a href="#t1472421263000049" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:54:23</span>        seylerius </span><span>Okay, thanks for the help. Talk with ya when you&apos;ve got time.</span></div><div id="t1472421276000050" t="2016-08-28 21:54:36 aengelberg feel free to dump any further findings here"><a href="#t1472421276000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:54:36</span>       aengelberg </span><span>feel free to dump any further findings here</span></div><div id="t1472421297000051" t="2016-08-28 21:54:57 seylerius Will do. Slack has persistence, which is pretty handy"><a href="#t1472421297000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">21:54:57</span>        seylerius </span><span>Will do. Slack has persistence, which is pretty handy</span></div><div id="t1472427283000052" t="2016-08-28 23:34:43 seylerius Okay, trying reluctance means I only get the first character of the headline, and the rest becomes part of the content."><a href="#t1472427283000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:34:43</span>        seylerius </span><span>Okay, trying reluctance means I only get the first character of the headline, and the rest becomes part of the content.</span></div><div id="t1472427299000053" t="2016-08-28 23:34:59 seylerius Trying lookahead seems to just fail."><a href="#t1472427299000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:34:59</span>        seylerius </span><span>Trying lookahead seems to just fail.</span></div><div id="t1472427726000054" t="2016-08-28 23:42:06 seylerius Okay, tags are mostly fixed, but it&apos;s only grabbing the first one."><a href="#t1472427726000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:42:06</span>        seylerius </span><span>Okay, tags are mostly fixed, but it&apos;s only grabbing the first one.</span></div><div id="t1472427731000055" t="2016-08-28 23:42:11 seylerius Pushed."><a href="#t1472427731000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:42:11</span>        seylerius </span><span>Pushed.</span></div><div id="t1472427749000056" t="2016-08-28 23:42:29 seylerius Would appreciate a look when you have time, @aengelberg"><a href="#t1472427749000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:42:29</span>        seylerius </span><span>Would appreciate a look when you have time, @aengelberg</span></div><div id="t1472427810000057" t="2016-08-28 23:43:30 seylerius Ach. It&apos;s also not getting second headlines. They&apos;re turning into content lines due to newline weirdness."><a href="#t1472427810000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:43:30</span>        seylerius </span><span>Ach. It&apos;s also not getting second headlines. They&apos;re turning into content lines due to newline weirdness.</span></div><div id="t1472428009000058" t="2016-08-28 23:46:49 seylerius Pushed again. Fixed newline weirdness"><a href="#t1472428009000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:46:49</span>        seylerius </span><span>Pushed again. Fixed newline weirdness</span></div><div id="t1472428217000059" t="2016-08-28 23:50:17 seylerius Hah, fixed it. Required post-tag newline/whitespace."><a href="#t1472428217000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:50:17</span>        seylerius </span><span>Hah, fixed it. Required post-tag newline/whitespace.</span></div><div id="t1472428239000060" t="2016-08-28 23:50:39 seylerius Gah. Org is a beautiful format, but it&apos;s a bitch to parse."><a href="#t1472428239000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:50:39</span>        seylerius </span><span>Gah. Org is a beautiful format, but it&apos;s a bitch to parse.</span></div><div id="t1472428597000061" t="2016-08-28 23:56:37 aengelberg The parser breaks if I put into the file
 * The First : Section :foo:bar:
"><a href="#t1472428597000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:56:37</span>       aengelberg </span><span>The parser breaks if I put into the file
</span><pre>* The First : Section :foo:bar:
</pre></div><div id="t1472428603000062" t="2016-08-28 23:56:43 aengelberg Not sure if that&apos;s valid org-mode."><a href="#t1472428603000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-28</span> <span class="t" onclick="H(this)">23:56:43</span>       aengelberg </span><span>Not sure if that&apos;s valid org-mode.</span></div><div id="t1472429149000063" t="2016-08-29 00:05:49 aengelberg @seylerius This approach handles a variety of potential characters before the tags, at the expense of speed, since it parses every single character on the header line to get around regex greediness.
 (def headlines
  (insta/parser
   &quot;&lt;S&gt; = token (ows token)*
    &lt;token&gt; = section / content
    section = h (ows content)*
    h = ows stars &lt;#&apos;\\s+&apos;&gt; (todo &lt;#&apos;\\s+&apos;&gt;)? title
    &lt;title&gt; = (#&apos;.&apos;+ ws-line? tags) / #&apos;.+&apos;
    stars = #&apos;^\\*+&apos;
    todo = #&apos;TODO|DONE&apos;
    tags = &lt;&apos;:&apos;&gt; (tag &lt;&apos;:&apos;&gt;)+ ws
    &lt;tag&gt; = #&apos;["><a href="#t1472429149000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">00:05:49</span>       aengelberg </span><span>@seylerius This approach handles a variety of potential characters before the tags, at the expense of speed, since it parses every single character on the header line to get around regex greediness.
</span><pre>(def headlines
  (insta/parser
   &quot;&lt;S&gt; = token (ows token)*
    &lt;token&gt; = section / content
    section = h (ows content)*
    h = ows stars &lt;#&apos;\\s+&apos;&gt; (todo &lt;#&apos;\\s+&apos;&gt;)? title
    &lt;title&gt; = (#&apos;.&apos;+ ws-line? tags) / #&apos;.+&apos;
    stars = #&apos;^\\*+&apos;
    todo = #&apos;TODO|DONE&apos;
    tags = &lt;&apos;:&apos;&gt; (tag &lt;&apos;:&apos;&gt;)+ ws
    &lt;tag&gt; = #&apos;[</pre></div><div id="t1472429327000064" t="2016-08-29 00:08:47 seylerius Probably be an uncommon usage, but technically legal, @aengelberg. Probably ought to do something like this. Hmmm."><a href="#t1472429327000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">00:08:47</span>        seylerius </span><span>Probably be an uncommon usage, but technically legal, @aengelberg. Probably ought to do something like this. Hmmm.</span></div><div id="t1472429660000065" t="2016-08-29 00:14:20 seylerius Yeah, that works. Definitely going to need the follow-up concatenation I was planning on."><a href="#t1472429660000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">00:14:20</span>        seylerius </span><span>Yeah, that works. Definitely going to need the follow-up concatenation I was planning on.</span></div><div id="t1472433574000067" t="2016-08-29 01:19:34 seylerius Okay, another puzzle for ya, @aengelberg. In this latest push, why isn&apos;t priority getting picked up? I&apos;ve cleaned up some of the names and added an overall  parse  function that takes a string, to simplify testing."><a href="#t1472433574000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">01:19:34</span>        seylerius </span><span>Okay, another puzzle for ya, @aengelberg. In this latest push, why isn&apos;t priority getting picked up? I&apos;ve cleaned up some of the names and added an overall </span><code>parse</code><span> function that takes a string, to simplify testing.</span></div><div id="t1472433621000068" t="2016-08-29 01:20:21 seylerius (parse (slurp &quot;&quot;))   should work for testing."><a href="#t1472433621000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">01:20:21</span>        seylerius </span><code>(parse (slurp &quot;&quot;)) </code><span> should work for testing.</span></div><div id="t1472433635000069" t="2016-08-29 01:20:35 seylerius (Thanks a ton for the help, BTW)"><a href="#t1472433635000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">01:20:35</span>        seylerius </span><span>(Thanks a ton for the help, BTW)</span></div><div id="t1472433952000070" t="2016-08-29 01:25:52 seylerius A priority is defined as a letter preceded by a pound sign, in square brackets.  [#A]  or  [#z] , for example."><a href="#t1472433952000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">01:25:52</span>        seylerius </span><span>A priority is defined as a letter preceded by a pound sign, in square brackets. </span><code>[#A]</code><span> or </span><code>[#z]</code><span>, for example.</span></div><div id="t1472434792000071" t="2016-08-29 01:39:52 seylerius Lol, whoops. Reversed my pound sign and bracket"><a href="#t1472434792000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">01:39:52</span>        seylerius </span><span>Lol, whoops. Reversed my pound sign and bracket</span></div><div id="t1472442733000072" t="2016-08-29 03:52:13 seylerius @aengelberg: Can you help me figure out why the parsed sample is not registering as compliant hiccup to  insta/transform ?"><a href="#t1472442733000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">03:52:13</span>        seylerius </span><span>@aengelberg: Can you help me figure out why the parsed sample is not registering as compliant hiccup to </span><code>insta/transform</code><span>?</span></div><div id="t1472444949000073" t="2016-08-29 04:29:09 seylerius Okay, I see that it&apos;s looking for a root node. Tried to unhide the  document  node, but it&apos;s not showing up."><a href="#t1472444949000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:29:09</span>        seylerius </span><span>Okay, I see that it&apos;s looking for a root node. Tried to unhide the </span><code>document</code><span> node, but it&apos;s not showing up.</span></div><div id="t1472444991000074" t="2016-08-29 04:29:51 aengelberg @seylerius lemme take a look"><a href="#t1472444991000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:29:51</span>       aengelberg </span><span>@seylerius lemme take a look</span></div><div id="t1472445011000075" t="2016-08-29 04:30:11 seylerius Thanks."><a href="#t1472445011000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:30:11</span>        seylerius </span><span>Thanks.</span></div><div id="t1472445165000076" t="2016-08-29 04:32:45 aengelberg @seylerius what&apos;s the repro case?"><a href="#t1472445165000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:32:45</span>       aengelberg </span><span>@seylerius what&apos;s the repro case?</span></div><div id="t1472445221000077" t="2016-08-29 04:33:41 seylerius (parse (slurp &quot;&quot;))   returns a seq, not a vector with a root node."><a href="#t1472445221000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:33:41</span>        seylerius </span><code>(parse (slurp &quot;&quot;)) </code><span> returns a seq, not a vector with a root node.</span></div><div id="t1472445253000078" t="2016-08-29 04:34:13 aengelberg looks like function  reducing  doesn&apos;t exist"><a href="#t1472445253000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:34:13</span>       aengelberg </span><span>looks like function </span><code>reducing</code><span> doesn&apos;t exist</span></div><div id="t1472445285000079" t="2016-08-29 04:34:45 aengelberg CompilerException java.lang.RuntimeException: Unable to resolve symbol: reducing in this context"><a href="#t1472445285000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:34:45</span>       aengelberg </span><code>CompilerException java.lang.RuntimeException: Unable to resolve symbol: reducing in this context</code></div><div id="t1472445412000080" t="2016-08-29 04:36:52 seylerius Cleared that up."><a href="#t1472445412000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:36:52</span>        seylerius </span><span>Cleared that up.</span></div><div id="t1472445417000081" t="2016-08-29 04:36:57 seylerius Thanks"><a href="#t1472445417000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:36:57</span>        seylerius </span><span>Thanks</span></div><div id="t1472445477000082" t="2016-08-29 04:37:57 seylerius Still isn&apos;t giving me a root node, though."><a href="#t1472445477000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:37:57</span>        seylerius </span><span>Still isn&apos;t giving me a root node, though.</span></div><div id="t1472445542000083" t="2016-08-29 04:39:02 seylerius ([:author... , rather than  [:document [:author..."><a href="#t1472445542000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:39:02</span>        seylerius </span><code>([:author...</code><span>, rather than </span><code>[:document [:author...</code></div><div id="t1472445664000084" t="2016-08-29 04:41:04 aengelberg interesting. transforming on a sequence should work. I think you may have found a bug in instaparse."><a href="#t1472445664000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:41:04</span>       aengelberg </span><span>interesting. transforming on a sequence should work. I think you may have found a bug in instaparse.</span></div><div id="t1472445692000085" t="2016-08-29 04:41:32 aengelberg The fact that there&apos;s a string in the uppermost level is what&apos;s throwing it off."><a href="#t1472445692000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:41:32</span>       aengelberg </span><span>The fact that there&apos;s a string in the uppermost level is what&apos;s throwing it off.</span></div><div id="t1472445803000086" t="2016-08-29 04:43:23 seylerius Fascinating"><a href="#t1472445803000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:43:23</span>        seylerius </span><span>Fascinating</span></div><div id="t1472445981000087" t="2016-08-29 04:46:21 seylerius @aengelberg: Maybe make strings pass straight through  transform ?"><a href="#t1472445981000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:46:21</span>        seylerius </span><span>@aengelberg: Maybe make strings pass straight through </span><code>transform</code><span>?</span></div><div id="t1472445982000088" t="2016-08-29 04:46:22 aengelberg I can confirm that&apos;s a bug"><a href="#t1472445982000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:46:22</span>       aengelberg </span><span>I can confirm that&apos;s a bug</span></div><div id="t1472445988000090" t="2016-08-29 04:46:28 aengelberg Yeah, that&apos;s what I&apos;m about to do."><a href="#t1472445988000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:46:28</span>       aengelberg </span><span>Yeah, that&apos;s what I&apos;m about to do.</span></div><div id="t1472445992000091" t="2016-08-29 04:46:32 seylerius Awesome"><a href="#t1472445992000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">04:46:32</span>        seylerius </span><span>Awesome</span></div><div id="t1472447495000092" t="2016-08-29 05:11:35 aengelberg @seylerius  https://github.com/Engelberg/instaparse/pull/145"><a href="#t1472447495000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">05:11:35</span>       aengelberg </span><span>@seylerius </span><a href="https://github.com/Engelberg/instaparse/pull/145" target="_blank">https://github.com/Engelberg/instaparse/pull/145</a></div><div id="t1472447995000096" t="2016-08-29 05:19:55 aengelberg oops, didn&apos;t link properly... edited"><a href="#t1472447995000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">05:19:55</span>       aengelberg </span><span>oops, didn&apos;t link properly... edited</span></div><div id="t1472448540000097" t="2016-08-29 05:29:00 seylerius Downloaded, testing."><a href="#t1472448540000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">05:29:00</span>        seylerius </span><span>Downloaded, testing.</span></div><div id="t1472448548000098" t="2016-08-29 05:29:08 seylerius It works! Thanks, @aengelberg!"><a href="#t1472448548000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">05:29:08</span>        seylerius </span><span>It works! Thanks, @aengelberg!</span></div><div id="t1472495406000099" t="2016-08-29 18:30:06 seylerius @aengelberg: Yep, that worked perfectly. What&apos;s the release schedule on that, out of curiosity?"><a href="#t1472495406000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">18:30:06</span>        seylerius </span><span>@aengelberg: Yep, that worked perfectly. What&apos;s the release schedule on that, out of curiosity?</span></div><div id="t1472495587000100" t="2016-08-29 18:33:07 seylerius In the meantime, I&apos;m moving on to adding additional parsers (drawers, blocks, footnotes, lists, tables, to name a few)."><a href="#t1472495587000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">18:33:07</span>        seylerius </span><span>In the meantime, I&apos;m moving on to adding additional parsers (drawers, blocks, footnotes, lists, tables, to name a few).</span></div><div id="t1472496971000101" t="2016-08-29 18:56:11 aengelberg @seylerius For instaparse we prefer to merge fixes, bump version numbers / changelogs, and deploy to clojars all at once. And only my dad has the power to do the last part. So whenever he gets around to doing that is when I&apos;d expect to see the latest version. Should be sometime today."><a href="#t1472496971000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">18:56:11</span>       aengelberg </span><span>@seylerius For instaparse we prefer to merge fixes, bump version numbers / changelogs, and deploy to clojars all at once. And only my dad has the power to do the last part. So whenever he gets around to doing that is when I&apos;d expect to see the latest version. Should be sometime today.</span></div><div id="t1472497731000102" t="2016-08-29 19:08:51 seylerius Shiny. Looking forward to it. Also, shiny that y&apos;all are a father-son team. Be cool if one of my kids coded with me (after I have some)."><a href="#t1472497731000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">19:08:51</span>        seylerius </span><span>Shiny. Looking forward to it. Also, shiny that y&apos;all are a father-son team. Be cool if one of my kids coded with me (after I have some).</span></div><div id="t1472499094000103" t="2016-08-29 19:31:34 aengelberg Thanks. It&apos;s fun! You may enjoy the Clojure/west 2014 instaparse talk, which provides some backstory on the collaboration"><a href="#t1472499094000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">19:31:34</span>       aengelberg </span><span>Thanks. It&apos;s fun! You may enjoy the Clojure/west 2014 instaparse talk, which provides some backstory on the collaboration</span></div><div id="t1472499737000104" t="2016-08-29 19:42:17 seylerius Awesome. I&apos;ll check it out"><a href="#t1472499737000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-29</span> <span class="t" onclick="H(this)">19:42:17</span>        seylerius </span><span>Awesome. I&apos;ll check it out</span></div><div id="t1472588759000108" t="2016-08-30 20:25:59 andrei I am trying to write a simple grammar that parses comments:
 /* some text */ , is there a way in instaparse to say any character?
e.g.
 &quot;comment = ‘/*’ .* ‘*/‘&quot;
"><a href="#t1472588759000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:25:59</span>           andrei </span><span>I am trying to write a simple grammar that parses comments:
</span><code>/* some text */</code><span>, is there a way in instaparse to say any character?
e.g.
</span><pre>&quot;comment = ‘/*’ .* ‘*/‘&quot;
</pre></div><div id="t1472588844000109" t="2016-08-30 20:27:24 aengelberg @andrei Instaparse doesn&apos;t have a special character for that, but you can use regular expressions to cover any character"><a href="#t1472588844000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:27:24</span>       aengelberg </span><span>@andrei Instaparse doesn&apos;t have a special character for that, but you can use regular expressions to cover any character</span></div><div id="t1472588884000110" t="2016-08-30 20:28:04 aengelberg e.g.  comment = &apos;/*&apos; #&apos;[\\s\\S]&apos;* &apos;*/&apos;"><a href="#t1472588884000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:28:04</span>       aengelberg </span><span>e.g. </span><code>comment = &apos;/*&apos; #&apos;[\\s\\S]&apos;* &apos;*/&apos;</code></div><div id="t1472588947000111" t="2016-08-30 20:29:07 aengelberg (`#&quot;[\s\S]&quot;` is my personal favorite way to match any character in a regex)"><a href="#t1472588947000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:29:07</span>       aengelberg </span><span>(`#&quot;[\s\S]&quot;` is my personal favorite way to match any character in a regex)</span></div><div id="t1472589004000112" t="2016-08-30 20:30:04 seylerius @andrei: Yeah, you&apos;ll want something like this:
 &quot;comment = &lt;&apos;/*&apos;&gt; #&apos;.*&apos; &lt;&apos;*/&apos;&gt;&quot;
 
My version hides the comment tokens, though @aengelberg&apos;s regexp might be more appropriate."><a href="#t1472589004000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:30:04</span>        seylerius </span><span>@andrei: Yeah, you&apos;ll want something like this:
</span><pre>&quot;comment = &lt;&apos;/*&apos;&gt; #&apos;.*&apos; &lt;&apos;*/&apos;&gt;&quot;
</pre><span>
My version hides the comment tokens, though @aengelberg&apos;s regexp might be more appropriate.</span></div><div id="t1472589043000113" t="2016-08-30 20:30:43 andrei @aengelberg @seylerius thank you for the suggestions. 
I think I got a bit mislead by the source code, 
 https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L19-L40 
I thought there are some defaults in instaparse"><a href="#t1472589043000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:30:43</span>           andrei </span><span>@aengelberg @seylerius thank you for the suggestions. 
I think I got a bit mislead by the source code, 
</span><a href="https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L19-L40" target="_blank">https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L19-L40</a><span>
I thought there are some defaults in instaparse</span></div><div id="t1472589083000115" t="2016-08-30 20:31:23 andrei but now reading through the doc strings, these are only to parse the grammar itself 
 https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L2"><a href="#t1472589083000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:31:23</span>           andrei </span><span>but now reading through the doc strings, these are only to parse the grammar itself 
</span><a href="https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L2" target="_blank">https://github.com/Engelberg/instaparse/blob/master/src/instaparse/abnf.clj#L2</a></div><div id="t1472589096000117" t="2016-08-30 20:31:36 aengelberg a couple things I see in @seylerius&apos;s solution:
1)  .  in a regex doesn&apos;t include newlines
2)  .*  will greedily match past the  */  and won&apos;t be able to parse the end of a comment"><a href="#t1472589096000117" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:31:36</span>       aengelberg </span><span>a couple things I see in @seylerius&apos;s solution:
1) </span><code>.</code><span> in a regex doesn&apos;t include newlines
2) </span><code>.*</code><span> will greedily match past the </span><code>*/</code><span> and won&apos;t be able to parse the end of a comment</span></div><div id="t1472589127000118" t="2016-08-30 20:32:07 aengelberg @andrei Sorry for the misleading code. Those constants are available but only to the ABNF format."><a href="#t1472589127000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:32:07</span>       aengelberg </span><span>@andrei Sorry for the misleading code. Those constants are available but only to the ABNF format.</span></div><div id="t1472589157000119" t="2016-08-30 20:32:37 aengelberg EBNF is the default"><a href="#t1472589157000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:32:37</span>       aengelberg </span><span>EBNF is the default</span></div><div id="t1472589189000120" t="2016-08-30 20:33:09 andrei are there constants for ebnf? looking at the code I think not"><a href="#t1472589189000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:33:09</span>           andrei </span><span>are there constants for ebnf? looking at the code I think not</span></div><div id="t1472589194000121" t="2016-08-30 20:33:14 seylerius @andrei A point to keep in mind with @aengelberg&apos;s solution is that you&apos;ll need to condense the individual characters of the output."><a href="#t1472589194000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:33:14</span>        seylerius </span><span>@andrei A point to keep in mind with @aengelberg&apos;s solution is that you&apos;ll need to condense the individual characters of the output.</span></div><div id="t1472589267000122" t="2016-08-30 20:34:27 andrei @seylerius @aengelberg is there a way for specifying in instaparse to group matches together, s.t. one doesn’t need to condense the  matches?"><a href="#t1472589267000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:34:27</span>           andrei </span><span>@seylerius @aengelberg is there a way for specifying in instaparse to group matches together, s.t. one doesn’t need to condense the  matches?</span></div><div id="t1472589267000123" t="2016-08-30 20:34:27 aengelberg yeah, thanks for clarifying that @seylerius"><a href="#t1472589267000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:34:27</span>       aengelberg </span><span>yeah, thanks for clarifying that @seylerius</span></div><div id="t1472589296000124" t="2016-08-30 20:34:56 seylerius You&apos;ll get output like  [:comment &quot;f&quot; &quot;o&quot; &quot;o&quot; &quot; &quot; &quot;b&quot; &quot;a&quot; &quot;r&quot;]   from input like  /*foo bar*/"><a href="#t1472589296000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:34:56</span>        seylerius </span><span>You&apos;ll get output like </span><code>[:comment &quot;f&quot; &quot;o&quot; &quot;o&quot; &quot; &quot; &quot;b&quot; &quot;a&quot; &quot;r&quot;] </code><span> from input like </span><code>/*foo bar*/</code></div><div id="t1472589304000125" t="2016-08-30 20:35:04 andrei exactly"><a href="#t1472589304000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:35:04</span>           andrei </span><span>exactly</span></div><div id="t1472589323000126" t="2016-08-30 20:35:23 andrei there are ways to use transform and apply str on it"><a href="#t1472589323000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:35:23</span>           andrei </span><span>there are ways to use transform and apply str on it</span></div><div id="t1472589329000127" t="2016-08-30 20:35:29 seylerius Yep."><a href="#t1472589329000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:35:29</span>        seylerius </span><span>Yep.</span></div><div id="t1472589340000128" t="2016-08-30 20:35:40 aengelberg @andrei The official specification for ABNF is more strict and specific than EBNF, and it dictates that those constants are available. EBNF is more of an ambiguous mashup of a variety of standards we were able to find on the internet"><a href="#t1472589340000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:35:40</span>       aengelberg </span><span>@andrei The official specification for ABNF is more strict and specific than EBNF, and it dictates that those constants are available. EBNF is more of an ambiguous mashup of a variety of standards we were able to find on the internet</span></div><div id="t1472589344000129" t="2016-08-30 20:35:44 andrei it just feels that there should be a grammar direct way"><a href="#t1472589344000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:35:44</span>           andrei </span><span>it just feels that there should be a grammar direct way</span></div><div id="t1472589366000130" t="2016-08-30 20:36:06 aengelberg So there are no constants in EBNF, since none of the EBNF resources we found seemed to indicate such"><a href="#t1472589366000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:36:06</span>       aengelberg </span><span>So there are no constants in EBNF, since none of the EBNF resources we found seemed to indicate such</span></div><div id="t1472589375000131" t="2016-08-30 20:36:15 seylerius And remember to wrap your comment tokens in  &lt;&gt;  like I did, so you don&apos;t save the markup itself."><a href="#t1472589375000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:36:15</span>        seylerius </span><span>And remember to wrap your comment tokens in </span><code>&lt;&gt;</code><span> like I did, so you don&apos;t save the markup itself.</span></div><div id="t1472589391000132" t="2016-08-30 20:36:31 aengelberg Sadly there is no grammar direct way to concat the strings"><a href="#t1472589391000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:36:31</span>       aengelberg </span><span>Sadly there is no grammar direct way to concat the strings</span></div><div id="t1472589409000133" t="2016-08-30 20:36:49 seylerius Transform works pretty well, though."><a href="#t1472589409000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:36:49</span>        seylerius </span><span>Transform works pretty well, though.</span></div><div id="t1472589429000134" t="2016-08-30 20:37:09 andrei hmm, or a more elaborated reg exp"><a href="#t1472589429000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:37:09</span>           andrei </span><span>hmm, or a more elaborated reg exp</span></div><div id="t1472589475000135" t="2016-08-30 20:37:55 andrei I am using smth like this for strings
 &lt;string&gt; = dqoute #&apos;([^&quot;\\]|\\.)*&apos; dqoute
   &lt;dqoute&gt; = &lt;&apos;\&quot;&apos;&gt;
"><a href="#t1472589475000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:37:55</span>           andrei </span><span>I am using smth like this for strings
</span><pre>&lt;string&gt; = dqoute #&apos;([^&quot;\\]|\\.)*&apos; dqoute
   &lt;dqoute&gt; = &lt;&apos;\&quot;&apos;&gt;
</pre></div><div id="t1472589493000136" t="2016-08-30 20:38:13 seylerius (insta/transform {:comment (partial apply str)} (comment-parser input-data)) "><a href="#t1472589493000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:38:13</span>        seylerius </span><code>(insta/transform {:comment (partial apply str)} (comment-parser input-data)) </code></div><div id="t1472589545000137" t="2016-08-30 20:39:05 andrei and probably the performance impact is small if one applies transforms"><a href="#t1472589545000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:39:05</span>           andrei </span><span>and probably the performance impact is small if one applies transforms</span></div><div id="t1472589587000138" t="2016-08-30 20:39:47 seylerius Lolyep. Far as I can tell, inataparse does a good job with efficient transforms."><a href="#t1472589587000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:39:47</span>        seylerius </span><span>Lolyep. Far as I can tell, inataparse does a good job with efficient transforms.</span></div><div id="t1472589600000139" t="2016-08-30 20:40:00 aengelberg it depends on the size of the file. Probably actually creating all those individual strings is going to be the bottleneck rather than concatenating them later"><a href="#t1472589600000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:40:00</span>       aengelberg </span><span>it depends on the size of the file. Probably actually creating all those individual strings is going to be the bottleneck rather than concatenating them later</span></div><div id="t1472589606000140" t="2016-08-30 20:40:06 andrei I must admit I was lead astray by regexps vs transforms which is more efficient - although I think its a very premature optimisation"><a href="#t1472589606000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:40:06</span>           andrei </span><span>I must admit I was lead astray by regexps vs transforms which is more efficient - although I think its a very premature optimisation</span></div><div id="t1472589627000141" t="2016-08-30 20:40:27 aengelberg A regex is a sensible solution if you can get it right  🙂"><a href="#t1472589627000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:40:27</span>       aengelberg </span><span>A regex is a sensible solution if you can get it right </span><b>🙂</b></div><div id="t1472589660000142" t="2016-08-30 20:41:00 aengelberg My first thought is to do a negative lookahead for  */  as part of the regex"><a href="#t1472589660000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:41:00</span>       aengelberg </span><span>My first thought is to do a negative lookahead for </span><code>*/</code><span> as part of the regex</span></div><div id="t1472589778000143" t="2016-08-30 20:42:58 seylerius Trouble is, from what I&apos;ve found, that the  */  will get eaten in the  .*"><a href="#t1472589778000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:42:58</span>        seylerius </span><span>Trouble is, from what I&apos;ve found, that the </span><code>*/</code><span> will get eaten in the </span><code>.*</code></div><div id="t1472589799000144" t="2016-08-30 20:43:19 seylerius And the negative lookahead will pass because the end token was already eaten"><a href="#t1472589799000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:43:19</span>        seylerius </span><span>And the negative lookahead will pass because the end token was already eaten</span></div><div id="t1472589856000145" t="2016-08-30 20:44:16 andrei so more reg exp magic for me to look into.
to give a bit more context I am playing around with parsing localizable strings.
 /* This is a comment */

&quot;hello&quot; = &quot;Hello!&quot;;

/* This is another comment */
&quot;click_button&quot; = &quot;Click&quot;;

/* Title bar, prints the number of selected products (The translation should be short due to the limit of 100 characters for the title of the mobile app) */
&quot;bar_print_$_selected_products&quot; = &quot;You Selected %@ Products”;
"><a href="#t1472589856000145" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:44:16</span>           andrei </span><span>so more reg exp magic for me to look into.
to give a bit more context I am playing around with parsing localizable strings.
</span><pre>/* This is a comment */

&quot;hello&quot; = &quot;Hello!&quot;;

/* This is another comment */
&quot;click_button&quot; = &quot;Click&quot;;

/* Title bar, prints the number of selected products (The translation should be short due to the limit of 100 characters for the title of the mobile app) */
&quot;bar_print_$_selected_products&quot; = &quot;You Selected %@ Products”;
</pre></div><div id="t1472589872000146" t="2016-08-30 20:44:32 andrei just an experiment, nothing production related."><a href="#t1472589872000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:44:32</span>           andrei </span><span>just an experiment, nothing production related.</span></div><div id="t1472590040000147" t="2016-08-30 20:47:20 andrei @aengelberg @seylerius thank you for your help, so far I enjoyed using instaparse.
is cool that I can use some things that I learned in college to do some useful things"><a href="#t1472590040000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:47:20</span>           andrei </span><span>@aengelberg @seylerius thank you for your help, so far I enjoyed using instaparse.
is cool that I can use some things that I learned in college to do some useful things</span></div><div id="t1472590074000148" t="2016-08-30 20:47:54 andrei although I must say that I need to re-learn things about parsers and defining  grammars"><a href="#t1472590074000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:47:54</span>           andrei </span><span>although I must say that I need to re-learn things about parsers and defining  grammars</span></div><div id="t1472590091000149" t="2016-08-30 20:48:11 aengelberg @seylerius I meant a regex negative lookahead, i.e.  #&quot;.*(?!=/\*)&quot;  or something"><a href="#t1472590091000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:48:11</span>       aengelberg </span><span>@seylerius I meant a regex negative lookahead, i.e. </span><code>#&quot;.*(?!=/\*)&quot;</code><span> or something</span></div><div id="t1472590180000150" t="2016-08-30 20:49:40 aengelberg @andrei glad you&apos;re having fun! feel free to ask here if you have any more questions"><a href="#t1472590180000150" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:49:40</span>       aengelberg </span><span>@andrei glad you&apos;re having fun! feel free to ask here if you have any more questions</span></div><div id="t1472590199000151" t="2016-08-30 20:49:59 seylerius @aengelberg: That&apos;s what I thought. It winds up eating the end-token in the  .*  and passes the negative lookahead anyway. I was fighting that with the headline parser in organum over the weekend."><a href="#t1472590199000151" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:49:59</span>        seylerius </span><span>@aengelberg: That&apos;s what I thought. It winds up eating the end-token in the </span><code>.*</code><span> and passes the negative lookahead anyway. I was fighting that with the headline parser in organum over the weekend.</span></div><div id="t1472590217000152" t="2016-08-30 20:50:17 seylerius When I was trying to get it to parse tags."><a href="#t1472590217000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:50:17</span>        seylerius </span><span>When I was trying to get it to parse tags.</span></div><div id="t1472590259000153" t="2016-08-30 20:50:59 aengelberg oh, I guess the regex would pass, saying &quot;here&apos;s a sequence of characters (including  /* ), and look, there is not a  /*  *after* these characters!&quot;"><a href="#t1472590259000153" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:50:59</span>       aengelberg </span><span>oh, I guess the regex would pass, saying &quot;here&apos;s a sequence of characters (including </span><code>/*</code><span>), and look, there is not a </span><code>/*</code><span> *after* these characters!&quot;</span></div><div id="t1472590266000154" t="2016-08-30 20:51:06 seylerius Bingo"><a href="#t1472590266000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:51:06</span>        seylerius </span><span>Bingo</span></div><div id="t1472590293000155" t="2016-08-30 20:51:33 aengelberg so maybe  #&quot;((?!/\*).)*&quot;"><a href="#t1472590293000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:51:33</span>       aengelberg </span><span>so maybe </span><code>#&quot;((?!/\*).)*&quot;</code></div><div id="t1472590304000156" t="2016-08-30 20:51:44 aengelberg that would generate a bunch of match groups though due to the  ()"><a href="#t1472590304000156" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:51:44</span>       aengelberg </span><span>that would generate a bunch of match groups though due to the </span><code>()</code></div><div id="t1472590334000157" t="2016-08-30 20:52:14 seylerius Gah, lemme see what I did for that in the tags in organum."><a href="#t1472590334000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:52:14</span>        seylerius </span><span>Gah, lemme see what I did for that in the tags in organum.</span></div><div id="t1472590434000158" t="2016-08-30 20:53:54 seylerius https://github.com/seylerius/organum/blob/master/src/organum/core.clj"><a href="#t1472590434000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:53:54</span>        seylerius </span><a href="https://github.com/seylerius/organum/blob/master/src/organum/core.clj" target="_blank">https://github.com/seylerius/organum/blob/master/src/organum/core.clj</a></div><div id="t1472590458000160" t="2016-08-30 20:54:18 seylerius Yeah, ordered choice wound up featuring heavily."><a href="#t1472590458000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:54:18</span>        seylerius </span><span>Yeah, ordered choice wound up featuring heavily.</span></div><div id="t1472590556000161" t="2016-08-30 20:55:56 seylerius Maybe  (&lt;&apos;*/&apos;&gt; / #&apos;.&apos;)+ ?"><a href="#t1472590556000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:55:56</span>        seylerius </span><span>Maybe </span><code>(&lt;&apos;*/&apos;&gt; / #&apos;.&apos;)+</code><span>?</span></div><div id="t1472590581000162" t="2016-08-30 20:56:21 seylerius Always prefer to end a comment if possible, otherwise continue eating characters?"><a href="#t1472590581000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:56:21</span>        seylerius </span><span>Always prefer to end a comment if possible, otherwise continue eating characters?</span></div><div id="t1472590588000163" t="2016-08-30 20:56:28 seylerius Wait, not quite"><a href="#t1472590588000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:56:28</span>        seylerius </span><span>Wait, not quite</span></div><div id="t1472590597000164" t="2016-08-30 20:56:37 seylerius That&apos;ll continue past the end."><a href="#t1472590597000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:56:37</span>        seylerius </span><span>That&apos;ll continue past the end.</span></div><div id="t1472590637000165" t="2016-08-30 20:57:17 seylerius Ach. I need to drive back to the store; I&apos;m done with this client. Check in with y&apos;all in about ten."><a href="#t1472590637000165" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">20:57:17</span>        seylerius </span><span>Ach. I need to drive back to the store; I&apos;m done with this client. Check in with y&apos;all in about ten.</span></div><div id="t1472590987000166" t="2016-08-30 21:03:07 andrei I will also catch up with you guys a bit later too or early tomorrow, its getting a bit late here in Berlin."><a href="#t1472590987000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">21:03:07</span>           andrei </span><span>I will also catch up with you guys a bit later too or early tomorrow, its getting a bit late here in Berlin.</span></div><div id="t1472592945000167" t="2016-08-30 21:35:45 seylerius Have a good one."><a href="#t1472592945000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-30</span> <span class="t" onclick="H(this)">21:35:45</span>        seylerius </span><span>Have a good one.</span></div><div id="t1472658509000168" t="2016-08-31 15:48:29 aengelberg @seylerius the bug you encountered a couple days ago is now pushed to Clojars as Instaparse 1.4.3."><a href="#t1472658509000168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:48:29</span>       aengelberg </span><span>@seylerius the bug you encountered a couple days ago is now pushed to Clojars as Instaparse 1.4.3.</span></div><div id="t1472658526000169" t="2016-08-31 15:48:46 aengelberg https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#143"><a href="#t1472658526000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:48:46</span>       aengelberg </span><a href="https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#143" target="_blank">https://github.com/Engelberg/instaparse/blob/master/CHANGES.md#143</a></div><div id="t1472658735000171" t="2016-08-31 15:52:15 seylerius @aengelberg: Shiny! Thanks for the heads up."><a href="#t1472658735000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:52:15</span>        seylerius </span><span>@aengelberg: Shiny! Thanks for the heads up.</span></div><div id="t1472658784000172" t="2016-08-31 15:53:04 aengelberg Or rather, a fix for said bug."><a href="#t1472658784000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:53:04</span>       aengelberg </span><span>Or rather, a fix for said bug.</span></div><div id="t1472658787000173" t="2016-08-31 15:53:07 aengelberg :)"><a href="#t1472658787000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:53:07</span>       aengelberg </span><span>:)</span></div><div id="t1472658799000174" t="2016-08-31 15:53:19 seylerius 😁"><a href="#t1472658799000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-08-31</span> <span class="t" onclick="H(this)">15:53:19</span>        seylerius </span><b>😁</b></div><div id="t1477559218000003" t="2016-10-27 09:06:58 seylerius So,  (map (partial reparse-string is-table) (nth (parse-file &quot;&quot;) 6))  fails, complaining about a lack of either  #&quot;\r\n&quot;  or  #&quot;[\r\n]&quot; . Essentially, it seems to think a  :br  should start the text line in that section."><a href="#t1477559218000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span> <span class="t" onclick="H(this)">09:06:58</span>        seylerius </span><span>So, </span><code>(map (partial reparse-string is-table) (nth (parse-file &quot;&quot;) 6))</code><span> fails, complaining about a lack of either </span><code>#&quot;\r\n&quot;</code><span> or </span><code>#&quot;[\r\n]&quot;</code><span>. Essentially, it seems to think a </span><code>:br</code><span> should start the text line in that section.</span></div><div id="t1477585383000004" t="2016-10-27 16:23:03 aengelberg @seylerius where is the grammar you&apos;re using to parse? apologies if you posted earlier and I missed it."><a href="#t1477585383000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span> <span class="t" onclick="H(this)">16:23:03</span>       aengelberg </span><span>@seylerius where is the grammar you&apos;re using to parse? apologies if you posted earlier and I missed it.</span></div><div id="t1477585392000005" t="2016-10-27 16:23:12 aengelberg and sample file?"><a href="#t1477585392000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span> <span class="t" onclick="H(this)">16:23:12</span>       aengelberg </span><span>and sample file?</span></div><div id="t1477588802000006" t="2016-10-27 17:20:02 seylerius Ach, forgot to link to the repo.  https://github.com/seylerius/organum"><a href="#t1477588802000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-10-27</span> <span class="t" onclick="H(this)">17:20:02</span>        seylerius </span><span>Ach, forgot to link to the repo. </span><a href="https://github.com/seylerius/organum" target="_blank">https://github.com/seylerius/organum</a></div><div id="t1478275091000009" t="2016-11-04 15:58:11 be9 Hi, I need to parse strings like  some text with spaces XXX 12345678 98765 43 222 11 . Here are 3 parts: “some text with spaces”, “XXX 12345678”, and &quot;98765 43 222 11”. While the last part is required, the “XXX 12345678” part is optional and will be considered as text by a naive greedy regex. How could I prevent this with Instaparse?"><a href="#t1478275091000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">15:58:11</span>              be9 </span><span>Hi, I need to parse strings like </span><code>some text with spaces XXX 12345678 98765 43 222 11</code><span>. Here are 3 parts: “some text with spaces”, “XXX 12345678”, and &quot;98765 43 222 11”. While the last part is required, the “XXX 12345678” part is optional and will be considered as text by a naive greedy regex. How could I prevent this with Instaparse?</span></div><div id="t1478275187000010" t="2016-11-04 15:59:47 seylerius @be9 Can you describe the requirements your text needs to meet?"><a href="#t1478275187000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">15:59:47</span>        seylerius </span><span>@be9 Can you describe the requirements your text needs to meet?</span></div><div id="t1478275204000011" t="2016-11-04 16:00:04 seylerius Or give a few more specific examples?"><a href="#t1478275204000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:00:04</span>        seylerius </span><span>Or give a few more specific examples?</span></div><div id="t1478275691000012" t="2016-11-04 16:08:11 be9 @seylerius Ok, let’s simplify even more. Two examples:  John Doe AGE 50 ,  Dohn Joe . An input string contains a name and might contain this age thing. I want to parse those eventually to  {:name “John Doe” :age 50}  and  {:name “Dohn Joe”} ."><a href="#t1478275691000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:08:11</span>              be9 </span><span>@seylerius Ok, let’s simplify even more. Two examples: </span><code>John Doe AGE 50</code><span>, </span><code>Dohn Joe</code><span>. An input string contains a name and might contain this age thing. I want to parse those eventually to </span><code>{:name “John Doe” :age 50}</code><span> and </span><code>{:name “Dohn Joe”}</code><span>.</span></div><div id="t1478275735000014" t="2016-11-04 16:08:55 be9 First one should not be  {:name “John Doe AGE 50”}   🙂"><a href="#t1478275735000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:08:55</span>              be9 </span><span>First one should not be </span><code>{:name “John Doe AGE 50”}</code><span> </span><b>🙂</b></div><div id="t1478275758000015" t="2016-11-04 16:09:18 seylerius Okay. This is a problem I&apos;ve run into before."><a href="#t1478275758000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:09:18</span>        seylerius </span><span>Okay. This is a problem I&apos;ve run into before.</span></div><div id="t1478275772000016" t="2016-11-04 16:09:32 be9 Names can be long and contain digits too"><a href="#t1478275772000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:09:32</span>              be9 </span><span>Names can be long and contain digits too</span></div><div id="t1478275912000017" t="2016-11-04 16:11:52 be9 John Doe AGE 50 AGE 50  would be preferrably parsed as  {:name “John Doe AGE 50” :age 50}"><a href="#t1478275912000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:11:52</span>              be9 </span><code>John Doe AGE 50 AGE 50</code><span> would be preferrably parsed as </span><code>{:name “John Doe AGE 50” :age 50}</code></div><div id="t1478275927000019" t="2016-11-04 16:12:07 seylerius Basically what you need is to have a name token, token, and then a name+age token. You then parse for this:  &quot;name-age / name&quot;"><a href="#t1478275927000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:12:07</span>        seylerius </span><span>Basically what you need is to have a name token, token, and then a name+age token. You then parse for this: </span><code>&quot;name-age / name&quot;</code></div><div id="t1478275950000020" t="2016-11-04 16:12:30 seylerius The slash allows you to express a preference for one over the other."><a href="#t1478275950000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:12:30</span>        seylerius </span><span>The slash allows you to express a preference for one over the other.</span></div><div id="t1478275984000021" t="2016-11-04 16:13:04 seylerius Basically, you&apos;re saying &quot;if this string can match an age too, do that, otherwise it&apos;s just a name&quot;"><a href="#t1478275984000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:13:04</span>        seylerius </span><span>Basically, you&apos;re saying &quot;if this string can match an age too, do that, otherwise it&apos;s just a name&quot;</span></div><div id="t1478276013000022" t="2016-11-04 16:13:33 seylerius I do this a lot in my rebuild of organum, if you want to take a look at the repo."><a href="#t1478276013000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:13:33</span>        seylerius </span><span>I do this a lot in my rebuild of organum, if you want to take a look at the repo.</span></div><div id="t1478276034000023" t="2016-11-04 16:13:54 be9 oh, the slash. I see, thanks!"><a href="#t1478276034000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:13:54</span>              be9 </span><span>oh, the slash. I see, thanks!</span></div><div id="t1478276066000024" t="2016-11-04 16:14:26 seylerius Yep. The slash is for preferential parsing."><a href="#t1478276066000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:14:26</span>        seylerius </span><span>Yep. The slash is for preferential parsing.</span></div><div id="t1478276092000025" t="2016-11-04 16:14:52 be9 :+1:  @seylerius, I guess that’s it  🙂"><a href="#t1478276092000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-04</span> <span class="t" onclick="H(this)">16:14:52</span>              be9 </span><b>:+1:</b><span> @seylerius, I guess that’s it </span><b>🙂</b></div><div id="t1478423184000027" t="2016-11-06 09:06:24 alpi May I ask questions on clojurescript port here?"><a href="#t1478423184000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-06</span> <span class="t" onclick="H(this)">09:06:24</span>             alpi </span><span>May I ask questions on clojurescript port here?</span></div><div id="t1478543398000028" t="2016-11-07 18:29:58 aengelberg @alpi sure"><a href="#t1478543398000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-11-07</span> <span class="t" onclick="H(this)">18:29:58</span>       aengelberg </span><span>@alpi sure</span></div><div id="t1483025116000007" t="2016-12-29 15:25:16 gfredericks I don&apos;t imagine there&apos;s a way to unparse something"><a href="#t1483025116000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">15:25:16</span>      gfredericks </span><span>I don&apos;t imagine there&apos;s a way to unparse something</span></div><div id="t1483039564000008" t="2016-12-29 19:26:04 seylerius In what sense? Reconstruct the input that was parsed?"><a href="#t1483039564000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">19:26:04</span>        seylerius </span><span>In what sense? Reconstruct the input that was parsed?</span></div><div id="t1483039693000009" t="2016-12-29 19:28:13 seylerius @gfredericks What are you trying to accomplish by &quot;unparsing&quot;, and how much control do you have over the parsing?"><a href="#t1483039693000009" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">19:28:13</span>        seylerius </span><span>@gfredericks What are you trying to accomplish by &quot;unparsing&quot;, and how much control do you have over the parsing?</span></div><div id="t1483043170000010" t="2016-12-29 20:26:10 aengelberg @gfredericks: some discussion has happened about this in  https://github.com/Engelberg/instaparse/issues/82"><a href="#t1483043170000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">20:26:10</span>       aengelberg </span><span>@gfredericks: some discussion has happened about this in </span><a href="https://github.com/Engelberg/instaparse/issues/82" target="_blank">https://github.com/Engelberg/instaparse/issues/82</a></div><div id="t1483043235000012" t="2016-12-29 20:27:15 aengelberg which I just noticed you saw and commented on"><a href="#t1483043235000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">20:27:15</span>       aengelberg </span><span>which I just noticed you saw and commented on</span></div><div id="t1483043360000013" t="2016-12-29 20:29:20 aengelberg The fact that &quot;hide tag&quot; (`&lt;&gt;`) is a thing makes it a complex problem to provide unparsing as a general solution"><a href="#t1483043360000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">20:29:20</span>       aengelberg </span><span>The fact that &quot;hide tag&quot; (`&lt;&gt;`) is a thing makes it a complex problem to provide unparsing as a general solution</span></div><div id="t1483043458000014" t="2016-12-29 20:30:58 aengelberg also lookahead / negative lookahead"><a href="#t1483043458000014" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">20:30:58</span>       aengelberg </span><span>also lookahead / negative lookahead</span></div><div id="t1483050188000015" t="2016-12-29 22:23:08 gfredericks I want a canonical printer. Potentially pretty printing...which sounds hard"><a href="#t1483050188000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">22:23:08</span>      gfredericks </span><span>I want a canonical printer. Potentially pretty printing...which sounds hard</span></div><div id="t1483050191000016" t="2016-12-29 22:23:11 gfredericks So no, not reconstructing the original input exactly"><a href="#t1483050191000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">22:23:11</span>      gfredericks </span><span>So no, not reconstructing the original input exactly</span></div><div id="t1483055238000017" t="2016-12-29 23:47:18 seylerius Hmmm."><a href="#t1483055238000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-29</span> <span class="t" onclick="H(this)">23:47:18</span>        seylerius </span><span>Hmmm.</span></div><div id="t1483057515000018" t="2016-12-30 00:25:15 gfredericks pretty printing is complex enough that I&apos;m convinced it would be crazy to try to mix it into a grammar somehow"><a href="#t1483057515000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-30</span> <span class="t" onclick="H(this)">00:25:15</span>      gfredericks </span><span>pretty printing is complex enough that I&apos;m convinced it would be crazy to try to mix it into a grammar somehow</span></div><div id="t1483153227000019" t="2016-12-31 03:00:27 gfredericks instaparse requires keywords for the names of the whatchamacallits?"><a href="#t1483153227000019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">03:00:27</span>      gfredericks </span><span>instaparse requires keywords for the names of the whatchamacallits?</span></div><div id="t1483153255000020" t="2016-12-31 03:00:55 gfredericks I think I might be using instaparse in a weird enough way for that to be a very mild problem"><a href="#t1483153255000020" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">03:00:55</span>      gfredericks </span><span>I think I might be using instaparse in a weird enough way for that to be a very mild problem</span></div><div id="t1483153273000021" t="2016-12-31 03:01:13 gfredericks because I have to gensym the names and so it&apos;s a memory leak"><a href="#t1483153273000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">03:01:13</span>      gfredericks </span><span>because I have to gensym the names and so it&apos;s a memory leak</span></div><div id="t1483159621000022" t="2016-12-31 04:47:01 seylerius @gfredericks It outputs either hiccup or enlive notation, so yes it probably would want keywords in reverse."><a href="#t1483159621000022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">04:47:01</span>        seylerius </span><span>@gfredericks It outputs either hiccup or enlive notation, so yes it probably would want keywords in reverse.</span></div><div id="t1483177948000023" t="2016-12-31 09:52:28 aengelberg @gfredericks:
 (def all-keywords-ever (map keyword (range)))

;; each time you dynamically create a parser
(let [my-syms ...
kws (zipmap my-syms all-keywords-ever)]
...)
"><a href="#t1483177948000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">09:52:28</span>       aengelberg </span><span>@gfredericks:
</span><pre>(def all-keywords-ever (map keyword (range)))

;; each time you dynamically create a parser
(let [my-syms ...
kws (zipmap my-syms all-keywords-ever)]
...)
</pre></div><div id="t1483177960000024" t="2016-12-31 09:52:40 aengelberg That might be a way to conserve on keywords"><a href="#t1483177960000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">09:52:40</span>       aengelberg </span><span>That might be a way to conserve on keywords</span></div><div id="t1483178121000025" t="2016-12-31 09:55:21 aengelberg Or do a string replace in the grammar to substitute non terminals with reusable symbols, then postwalk the resulting tree to convert back"><a href="#t1483178121000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">09:55:21</span>       aengelberg </span><span>Or do a string replace in the grammar to substitute non terminals with reusable symbols, then postwalk the resulting tree to convert back</span></div><div id="t1483194290000026" t="2016-12-31 14:24:50 gfredericks I&apos;m using the combinators, so it shouldn&apos;t be too hard to do something like that if I decide this matters"><a href="#t1483194290000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">14:24:50</span>      gfredericks </span><span>I&apos;m using the combinators, so it shouldn&apos;t be too hard to do something like that if I decide this matters</span></div><div id="t1483213299000027" t="2016-12-31 19:41:39 zmaril @gfredericks @aengelberg if we can actually get generating from grammars going I&apos;d still be really stoked"><a href="#t1483213299000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:41:39</span>           zmaril </span><span>@gfredericks @aengelberg if we can actually get generating from grammars going I&apos;d still be really stoked</span></div><div id="t1483213356000028" t="2016-12-31 19:42:36 zmaril I&apos;ve been working on  https://github.com/zmaril/instaparse-c  the past few weeks and am getting within spitting distance of doing some fun stuff."><a href="#t1483213356000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:42:36</span>           zmaril </span><span>I&apos;ve been working on </span><a href="https://github.com/zmaril/instaparse-c" target="_blank">https://github.com/zmaril/instaparse-c</a><span> the past few weeks and am getting within spitting distance of doing some fun stuff.</span></div><div id="t1483213389000030" t="2016-12-31 19:43:09 zmaril It can basically parse C at this point and I&apos;m working on finishing the macro preprocessor now."><a href="#t1483213389000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:43:09</span>           zmaril </span><span>It can basically parse C at this point and I&apos;m working on finishing the macro preprocessor now.</span></div><div id="t1483213517000032" t="2016-12-31 19:45:17 zmaril The goal is to get the output into datascript and queryable. But a side product of this is that if you have something that can generate strings from grammars then we already have something that can produce c programs (sans macros)."><a href="#t1483213517000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:45:17</span>           zmaril </span><span>The goal is to get the output into datascript and queryable. But a side product of this is that if you have something that can generate strings from grammars then we already have something that can produce c programs (sans macros).</span></div><div id="t1483214310000033" t="2016-12-31 19:58:30 gfredericks @zmaril do you or anybody know if all instaparse grammars are implemented using the combinators?"><a href="#t1483214310000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:58:30</span>      gfredericks </span><span>@zmaril do you or anybody know if all instaparse grammars are implemented using the combinators?</span></div><div id="t1483214319000034" t="2016-12-31 19:58:39 gfredericks s/grammars/parser/"><a href="#t1483214319000034" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:58:39</span>      gfredericks </span><span>s/grammars/parser/</span></div><div id="t1483214335000035" t="2016-12-31 19:58:55 zmaril Yes they should be"><a href="#t1483214335000035" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:58:55</span>           zmaril </span><span>Yes they should be</span></div><div id="t1483214377000036" t="2016-12-31 19:59:37 zmaril My understanding is that the ebnf notation that everybody uses is actually parsed by a parser expressed in the combinators that transforms the output into combinators"><a href="#t1483214377000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">19:59:37</span>           zmaril </span><span>My understanding is that the ebnf notation that everybody uses is actually parsed by a parser expressed in the combinators that transforms the output into combinators</span></div><div id="t1483214411000038" t="2016-12-31 20:00:11 gfredericks I just glanced at the combinator list -- I think only the lookaheads are problematic, but that&apos;s probably a big deal for sophisticated parsers"><a href="#t1483214411000038" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:00:11</span>      gfredericks </span><span>I just glanced at the combinator list -- I think only the lookaheads are problematic, but that&apos;s probably a big deal for sophisticated parsers</span></div><div id="t1483214424000039" t="2016-12-31 20:00:24 zmaril yep"><a href="#t1483214424000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:00:24</span>           zmaril </span><span>yep</span></div><div id="t1483214429000040" t="2016-12-31 20:00:29 gfredericks so...oh well."><a href="#t1483214429000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:00:29</span>      gfredericks </span><span>so...oh well.</span></div><div id="t1483214456000041" t="2016-12-31 20:00:56 zmaril how does one express negation in generators now?"><a href="#t1483214456000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:00:56</span>           zmaril </span><span>how does one express negation in generators now?</span></div><div id="t1483214469000042" t="2016-12-31 20:01:09 gfredericks you could implement them with  gen/such-that  but the generator would fail if the lookahead condition is unlikely to pass by chance"><a href="#t1483214469000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:01:09</span>      gfredericks </span><span>you could implement them with </span><code>gen/such-that</code><span> but the generator would fail if the lookahead condition is unlikely to pass by chance</span></div><div id="t1483214497000043" t="2016-12-31 20:01:37 gfredericks I have no how that would play out IRL"><a href="#t1483214497000043" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:01:37</span>      gfredericks </span><span>I have no how that would play out IRL</span></div><div id="t1483214503000044" t="2016-12-31 20:01:43 zmaril That should be fine then. For the parsers I write lookahead is typically used to implement reserved keywords."><a href="#t1483214503000044" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:01:43</span>           zmaril </span><span>That should be fine then. For the parsers I write lookahead is typically used to implement reserved keywords.</span></div><div id="t1483214523000045" t="2016-12-31 20:02:03 zmaril I&apos;ve never used positive lookahead actually now that I think about it"><a href="#t1483214523000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:02:03</span>           zmaril </span><span>I&apos;ve never used positive lookahead actually now that I think about it</span></div><div id="t1483214538000046" t="2016-12-31 20:02:18 gfredericks when I made the regex→string generator I just decided not to support look[ahead|behind] for the same reason"><a href="#t1483214538000046" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:02:18</span>      gfredericks </span><span>when I made the regex→string generator I just decided not to support look[ahead|behind] for the same reason</span></div><div id="t1483214558000047" t="2016-12-31 20:02:38 zmaril It&apos;s one of those things that is academic to me at this point"><a href="#t1483214558000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:02:38</span>           zmaril </span><span>It&apos;s one of those things that is academic to me at this point</span></div><div id="t1483214585000048" t="2016-12-31 20:03:05 zmaril I&apos;m pretty sure that 99% gen/such-that of the time would be fine"><a href="#t1483214585000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:03:05</span>           zmaril </span><span>I&apos;m pretty sure that 99% gen/such-that of the time would be fine</span></div><div id="t1483214609000050" t="2016-12-31 20:03:29 gfredericks it might not be too hard to throw together a PoC"><a href="#t1483214609000050" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:03:29</span>      gfredericks </span><span>it might not be too hard to throw together a PoC</span></div><div id="t1483214622000051" t="2016-12-31 20:03:42 gfredericks in fact that would potentially be useful for what I&apos;m working on right now"><a href="#t1483214622000051" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:03:42</span>      gfredericks </span><span>in fact that would potentially be useful for what I&apos;m working on right now</span></div><div id="t1483214679000052" t="2016-12-31 20:04:39 zmaril yeah, I think that would fit really well and mirror what spec is doing"><a href="#t1483214679000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:04:39</span>           zmaril </span><span>yeah, I think that would fit really well and mirror what spec is doing</span></div><div id="t1483214692000053" t="2016-12-31 20:04:52 zmaril I&apos;ve been using spec/conform the same way I use instaparse and it works really well"><a href="#t1483214692000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:04:52</span>           zmaril </span><span>I&apos;ve been using spec/conform the same way I use instaparse and it works really well</span></div><div id="t1483214712000054" t="2016-12-31 20:05:12 zmaril So I imagine we could use generators the same way spec does and it would work well (fingers crossed)"><a href="#t1483214712000054" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:05:12</span>           zmaril </span><span>So I imagine we could use generators the same way spec does and it would work well (fingers crossed)</span></div><div id="t1483214852000055" t="2016-12-31 20:07:32 gfredericks 😂  I just realized that it would require using  string-from-regex  from test.chuck to support regexes in the grammars, and  string-from-regex  uses instaparse to parse the regex."><a href="#t1483214852000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:07:32</span>      gfredericks </span><b>😂</b><span> I just realized that it would require using </span><code>string-from-regex</code><span> from test.chuck to support regexes in the grammars, and </span><code>string-from-regex</code><span> uses instaparse to parse the regex.</span></div><div id="t1483214869000056" t="2016-12-31 20:07:49 zmaril turtles"><a href="#t1483214869000056" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:07:49</span>           zmaril </span><span>turtles</span></div><div id="t1483214880000057" t="2016-12-31 20:08:00 gfredericks indeed"><a href="#t1483214880000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:08:00</span>      gfredericks </span><span>indeed</span></div><div id="t1483214890000058" t="2016-12-31 20:08:10 zmaril that was the thing that was holding me up actually"><a href="#t1483214890000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:08:10</span>           zmaril </span><span>that was the thing that was holding me up actually</span></div><div id="t1483214894000059" t="2016-12-31 20:08:14 zmaril was that I didn&apos;t want to mess with regexs"><a href="#t1483214894000059" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:08:14</span>           zmaril </span><span>was that I didn&apos;t want to mess with regexs</span></div><div id="t1483214970000060" t="2016-12-31 20:09:30 aengelberg just catching up"><a href="#t1483214970000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:09:30</span>       aengelberg </span><span>just catching up</span></div><div id="t1483215030000061" t="2016-12-31 20:10:30 aengelberg After I wrote &quot;instagenerate&quot; I realized going the generator route (as opposed to core.logic) would probably be easier, despite the lookahead  such-that  problem"><a href="#t1483215030000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:10:30</span>       aengelberg </span><span>After I wrote &quot;instagenerate&quot; I realized going the generator route (as opposed to core.logic) would probably be easier, despite the lookahead </span><code>such-that</code><span> problem</span></div><div id="t1483215041000062" t="2016-12-31 20:10:41 aengelberg But what do you want to do about hide-tags?"><a href="#t1483215041000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:10:41</span>       aengelberg </span><span>But what do you want to do about hide-tags?</span></div><div id="t1483215070000063" t="2016-12-31 20:11:10 zmaril I think I have an idea, h/o"><a href="#t1483215070000063" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:11:10</span>           zmaril </span><span>I think I have an idea, h/o</span></div><div id="t1483215104000064" t="2016-12-31 20:11:44 zmaril well, hmmm what is the problem you see with hide-tags?"><a href="#t1483215104000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:11:44</span>           zmaril </span><span>well, hmmm what is the problem you see with hide-tags?</span></div><div id="t1483215134000065" t="2016-12-31 20:12:14 aengelberg It depends on what you expect the &quot;input&quot; to the generator to be"><a href="#t1483215134000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:12:14</span>       aengelberg </span><span>It depends on what you expect the &quot;input&quot; to the generator to be</span></div><div id="t1483215144000066" t="2016-12-31 20:12:24 aengelberg a parse tree still?"><a href="#t1483215144000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:12:24</span>       aengelberg </span><span>a parse tree still?</span></div><div id="t1483215154000067" t="2016-12-31 20:12:34 gfredericks it&apos;d be the combinator"><a href="#t1483215154000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:12:34</span>      gfredericks </span><span>it&apos;d be the combinator</span></div><div id="t1483215166000068" t="2016-12-31 20:12:46 gfredericks it would generate totally random parsable things"><a href="#t1483215166000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:12:46</span>      gfredericks </span><span>it would generate totally random parsable things</span></div><div id="t1483215173000069" t="2016-12-31 20:12:53 gfredericks not based on same partial input"><a href="#t1483215173000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:12:53</span>      gfredericks </span><span>not based on same partial input</span></div><div id="t1483215204000070" t="2016-12-31 20:13:24 aengelberg ok, in that case I don&apos;t really have a problem with hide tags despite just waking up"><a href="#t1483215204000070" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:13:24</span>       aengelberg </span><span>ok, in that case I don&apos;t really have a problem with hide tags despite just waking up</span></div><div id="t1483215220000071" t="2016-12-31 20:13:40 zmaril I think if we got something going that just took a grammar and gave back random strings, that would be a good first step"><a href="#t1483215220000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:13:40</span>           zmaril </span><span>I think if we got something going that just took a grammar and gave back random strings, that would be a good first step</span></div><div id="t1483215290000072" t="2016-12-31 20:14:50 aengelberg part of why I did core.logic in instagenerate is @zmaril&apos;s initial request to go from partial input -&gt; parseable strings, so I felt the need to put in the sophistication of logic programming as a general solver for all cases"><a href="#t1483215290000072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:14:50</span>       aengelberg </span><span>part of why I did core.logic in instagenerate is @zmaril&apos;s initial request to go from partial input -&gt; parseable strings, so I felt the need to put in the sophistication of logic programming as a general solver for all cases</span></div><div id="t1483215315000073" t="2016-12-31 20:15:15 zmaril oh, if we want to do partial input, we can provide skeletons with places to start generating from"><a href="#t1483215315000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:15:15</span>           zmaril </span><span>oh, if we want to do partial input, we can provide skeletons with places to start generating from</span></div><div id="t1483215341000074" t="2016-12-31 20:15:41 zmaril then we just walk the skeleton and generate random strings at the indicated places"><a href="#t1483215341000074" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:15:41</span>           zmaril </span><span>then we just walk the skeleton and generate random strings at the indicated places</span></div><div id="t1483215364000075" t="2016-12-31 20:16:04 zmaril still not fully general but better"><a href="#t1483215364000075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:16:04</span>           zmaril </span><span>still not fully general but better</span></div><div id="t1483215439000076" t="2016-12-31 20:17:19 zmaril and then we could restrict the grammar inside the combinator somehow"><a href="#t1483215439000076" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:17:19</span>           zmaril </span><span>and then we could restrict the grammar inside the combinator somehow</span></div><div id="t1483215708000078" t="2016-12-31 20:21:48 aengelberg (def p (insta/parser &quot;
S = A B A | B A B
&lt;A&gt; (&apos;a&apos; &lt;&apos;c&apos;&gt; &apos;b&apos;)+
&lt;B&gt; (&apos;b&apos; &apos;a&apos;)+
&quot;))

(generate p [:S &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot;])
=&gt; (&quot;acbbaacb&quot;)
"><a href="#t1483215708000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:21:48</span>       aengelberg </span><pre>(def p (insta/parser &quot;
S = A B A | B A B
&lt;A&gt; (&apos;a&apos; &lt;&apos;c&apos;&gt; &apos;b&apos;)+
&lt;B&gt; (&apos;b&apos; &apos;a&apos;)+
&quot;))

(generate p [:S &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot;])
=&gt; (&quot;acbbaacb&quot;)
</pre></div><div id="t1483215815000079" t="2016-12-31 20:23:35 aengelberg seems hard to performantly solve generally"><a href="#t1483215815000079" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:23:35</span>       aengelberg </span><span>seems hard to performantly solve generally</span></div><div id="t1483215874000080" t="2016-12-31 20:24:34 zmaril who said anything about performance"><a href="#t1483215874000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:24:34</span>           zmaril </span><span>who said anything about performance</span></div><div id="t1483215879000081" t="2016-12-31 20:24:39 aengelberg 🙂  fair enough"><a href="#t1483215879000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:24:39</span>       aengelberg </span><b>🙂</b><span> fair enough</span></div><div id="t1483215900000082" t="2016-12-31 20:25:00 aengelberg but a generator approach using  such-that  may never complete on a large enough grammar"><a href="#t1483215900000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:25:00</span>       aengelberg </span><span>but a generator approach using </span><code>such-that</code><span> may never complete on a large enough grammar</span></div><div id="t1483215931000083" t="2016-12-31 20:25:31 zmaril cross that bridge when we get there"><a href="#t1483215931000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:25:31</span>           zmaril </span><span>cross that bridge when we get there</span></div><div id="t1483215948000084" t="2016-12-31 20:25:48 zmaril computers are like really fast"><a href="#t1483215948000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:25:48</span>           zmaril </span><span>computers are like really fast</span></div><div id="t1483215980000085" t="2016-12-31 20:26:20 zmaril this is more of a what&apos;s possible idea than a production thing"><a href="#t1483215980000085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:26:20</span>           zmaril </span><span>this is more of a what&apos;s possible idea than a production thing</span></div><div id="t1483216063000086" t="2016-12-31 20:27:43 aengelberg cool"><a href="#t1483216063000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:27:43</span>       aengelberg </span><span>cool</span></div><div id="t1483216080000087" t="2016-12-31 20:28:00 aengelberg let me know if I can help out in whichever path you decide to try out"><a href="#t1483216080000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:28:00</span>       aengelberg </span><span>let me know if I can help out in whichever path you decide to try out</span></div><div id="t1483216108000088" t="2016-12-31 20:28:28 zmaril for sure!"><a href="#t1483216108000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:28:28</span>           zmaril </span><span>for sure!</span></div><div id="t1483216731000089" t="2016-12-31 20:38:51 gfredericks yeah generators aren&apos;t generally for production stuff"><a href="#t1483216731000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:38:51</span>      gfredericks </span><span>yeah generators aren&apos;t generally for production stuff</span></div><div id="t1483217000000090" t="2016-12-31 20:43:20 gfredericks I want a combinator that doesn&apos;t match anything"><a href="#t1483217000000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:43:20</span>      gfredericks </span><span>I want a combinator that doesn&apos;t match anything</span></div><div id="t1483217021000091" t="2016-12-31 20:43:41 gfredericks I thought maybe  (combo/alt)  but that returns ε"><a href="#t1483217021000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:43:41</span>      gfredericks </span><span>I thought maybe </span><code>(combo/alt)</code><span> but that returns ε</span></div><div id="t1483217051000092" t="2016-12-31 20:44:11 zmaril (gen/such-that (constantly false)) or something?"><a href="#t1483217051000092" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:11</span>           zmaril </span><span>(gen/such-that (constantly false)) or something?</span></div><div id="t1483217058000093" t="2016-12-31 20:44:18 gfredericks a combinator, not a generator"><a href="#t1483217058000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:18</span>      gfredericks </span><span>a combinator, not a generator</span></div><div id="t1483217062000094" t="2016-12-31 20:44:22 zmaril oh right sorry"><a href="#t1483217062000094" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:22</span>           zmaril </span><span>oh right sorry</span></div><div id="t1483217078000095" t="2016-12-31 20:44:38 gfredericks I guess I can do negative lookahead with epsilon?"><a href="#t1483217078000095" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:38</span>      gfredericks </span><span>I guess I can do negative lookahead with epsilon?</span></div><div id="t1483217092000096" t="2016-12-31 20:44:52 zmaril or a really unlikely string?"><a href="#t1483217092000096" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:44:52</span>           zmaril </span><span>or a really unlikely string?</span></div><div id="t1483217127000097" t="2016-12-31 20:45:27 zmaril like (string &quot;THISWILLNEVERBEMATCHEDHOPEFULLY&quot;)"><a href="#t1483217127000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:45:27</span>           zmaril </span><span>like (string &quot;THISWILLNEVERBEMATCHEDHOPEFULLY&quot;)</span></div><div id="t1483217172000098" t="2016-12-31 20:46:12 gfredericks 🙂"><a href="#t1483217172000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:46:12</span>      gfredericks </span><b>🙂</b></div><div id="t1483217190000099" t="2016-12-31 20:46:30 zmaril we&apos;re not fancy here"><a href="#t1483217190000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:46:30</span>           zmaril </span><span>we&apos;re not fancy here</span></div><div id="t1483217198000100" t="2016-12-31 20:46:38 gfredericks (string (str (java.util.UUID/randomUUID)))"><a href="#t1483217198000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:46:38</span>      gfredericks </span><code>(string (str (java.util.UUID/randomUUID)))</code></div><div id="t1483217216000101" t="2016-12-31 20:46:56 zmaril that works!"><a href="#t1483217216000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:46:56</span>           zmaril </span><span>that works!</span></div><div id="t1483217304000102" t="2016-12-31 20:48:24 gfredericks I have an alternate thing in my codebase that could be called a parser, but instaparse also has something by that name so I called it a parsifier instead"><a href="#t1483217304000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:48:24</span>      gfredericks </span><span>I have an alternate thing in my codebase that could be called a parser, but instaparse also has something by that name so I called it a parsifier instead</span></div><div id="t1483217312000103" t="2016-12-31 20:48:32 gfredericks and it&apos;s hard to remember that word because it could also have been parsinator"><a href="#t1483217312000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:48:32</span>      gfredericks </span><span>and it&apos;s hard to remember that word because it could also have been parsinator</span></div><div id="t1483217374000104" t="2016-12-31 20:49:34 zmaril hahaha"><a href="#t1483217374000104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:49:34</span>           zmaril </span><span>hahaha</span></div><div id="t1483217417000105" t="2016-12-31 20:50:17 zmaril (defn enlive-output-&gt;datascript-datums [m]
 (if-not (map? m)
    {:type :value :value m}
    (as-&gt; m $
        (assoc $ :meta (meta m))
        (assoc $ :db/id (d/tempid :mcc))
        (transform [:content ALL] enlive-output-&gt;datascript-datums $))))
  This will take enlive output and make it so you can query it from datascript"><a href="#t1483217417000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:50:17</span>           zmaril </span><pre>(defn enlive-output-&gt;datascript-datums [m]
 (if-not (map? m)
    {:type :value :value m}
    (as-&gt; m $
        (assoc $ :meta (meta m))
        (assoc $ :db/id (d/tempid :mcc))
        (transform [:content ALL] enlive-output-&gt;datascript-datums $))))
</pre><span> This will take enlive output and make it so you can query it from datascript</span></div><div id="t1483217604000106" t="2016-12-31 20:53:24 gfredericks does instaparse use its own regex engine?"><a href="#t1483217604000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:53:24</span>      gfredericks </span><span>does instaparse use its own regex engine?</span></div><div id="t1483217617000107" t="2016-12-31 20:53:37 zmaril no"><a href="#t1483217617000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:53:37</span>           zmaril </span><span>no</span></div><div id="t1483217620000108" t="2016-12-31 20:53:40 gfredericks I just got a misparse where the thing matches the regex but instaparse disagrees"><a href="#t1483217620000108" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:53:40</span>      gfredericks </span><span>I just got a misparse where the thing matches the regex but instaparse disagrees</span></div><div id="t1483217622000109" t="2016-12-31 20:53:42 zmaril depends on java if I recall"><a href="#t1483217622000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:53:42</span>           zmaril </span><span>depends on java if I recall</span></div><div id="t1483217632000110" t="2016-12-31 20:53:52 gfredericks and reordering a disjunction in the regex fixes it"><a href="#t1483217632000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:53:52</span>      gfredericks </span><span>and reordering a disjunction in the regex fixes it</span></div><div id="t1483217644000111" t="2016-12-31 20:54:04 zmaril hmm"><a href="#t1483217644000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:54:04</span>           zmaril </span><span>hmm</span></div><div id="t1483217650000112" t="2016-12-31 20:54:10 gfredericks this is the instparse-cljs thing in particular, but still on the jvm"><a href="#t1483217650000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:54:10</span>      gfredericks </span><span>this is the instparse-cljs thing in particular, but still on the jvm</span></div><div id="t1483217656000113" t="2016-12-31 20:54:16 zmaril check if instaparse passes any flags in"><a href="#t1483217656000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:54:16</span>           zmaril </span><span>check if instaparse passes any flags in</span></div><div id="t1483217753000114" t="2016-12-31 20:55:53 gfredericks here&apos;s the failing version:  https://www.refheap.com/124435"><a href="#t1483217753000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:55:53</span>      gfredericks </span><span>here&apos;s the failing version: </span><a href="https://www.refheap.com/124435" target="_blank">https://www.refheap.com/124435</a></div><div id="t1483217891000115" t="2016-12-31 20:58:11 zmaril hmm"><a href="#t1483217891000115" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:58:11</span>           zmaril </span><span>hmm</span></div><div id="t1483217898000116" t="2016-12-31 20:58:18 zmaril &quot;0/2&quot;  parses"><a href="#t1483217898000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:58:18</span>           zmaril </span><code>&quot;0/2&quot;</code><span> parses</span></div><div id="t1483217924000119" t="2016-12-31 20:58:44 zmaril can you add in some parens to the second part to clarify your intent"><a href="#t1483217924000119" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:58:44</span>           zmaril </span><span>can you add in some parens to the second part to clarify your intent</span></div><div id="t1483217999000120" t="2016-12-31 20:59:59 gfredericks &quot;0/2&quot; is not supposed to parse o_O"><a href="#t1483217999000120" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">20:59:59</span>      gfredericks </span><span>&quot;0/2&quot; is not supposed to parse o_O</span></div><div id="t1483218034000121" t="2016-12-31 21:00:34 gfredericks I see that&apos;s my fault though"><a href="#t1483218034000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">21:00:34</span>      gfredericks </span><span>I see that&apos;s my fault though</span></div><div id="t1483218229000122" t="2016-12-31 21:03:49 zmaril ha"><a href="#t1483218229000122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">21:03:49</span>           zmaril </span><span>ha</span></div><div id="t1483221581000123" t="2016-12-31 21:59:41 aengelberg I second  !epsilon  as the &quot;don&apos;t parse&quot;"><a href="#t1483221581000123" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">21:59:41</span>       aengelberg </span><span>I second </span><code>!epsilon</code><span> as the &quot;don&apos;t parse&quot;</span></div><div id="t1483221629000124" t="2016-12-31 22:00:29 aengelberg also instaparse fails on infinite loop grammars, so this might work
 never-succeed = never-succeed
 
(then use  never-succeed  wherever)"><a href="#t1483221629000124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:00:29</span>       aengelberg </span><span>also instaparse fails on infinite loop grammars, so this might work
</span><pre>never-succeed = never-succeed
</pre><span>
(then use </span><code>never-succeed</code><span> wherever)</span></div><div id="t1483221718000125" t="2016-12-31 22:01:58 gfredericks @aengelberg do you think the current behavior of  (combo/alt)  is bad/weird?"><a href="#t1483221718000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:01:58</span>      gfredericks </span><span>@aengelberg do you think the current behavior of </span><code>(combo/alt)</code><span> is bad/weird?</span></div><div id="t1483221764000126" t="2016-12-31 22:02:44 gfredericks my hunch is that According To Math it should either throw or not match anything"><a href="#t1483221764000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:02:44</span>      gfredericks </span><span>my hunch is that According To Math it should either throw or not match anything</span></div><div id="t1483221781000127" t="2016-12-31 22:03:01 aengelberg yeah I agree with your instinct. Not really sure what the thinking was in that design."><a href="#t1483221781000127" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:03:01</span>       aengelberg </span><span>yeah I agree with your instinct. Not really sure what the thinking was in that design.</span></div><div id="t1483221797000128" t="2016-12-31 22:03:17 gfredericks my argument is that because  (combo/alt p)  probably does not match ε, neither should  (combo/alt)"><a href="#t1483221797000128" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:03:17</span>      gfredericks </span><span>my argument is that because </span><code>(combo/alt p)</code><span> probably does not match ε, neither should </span><code>(combo/alt)</code></div><div id="t1483221803000129" t="2016-12-31 22:03:23 aengelberg Maybe since &quot;don&apos;t parse anything&quot; isn&apos;t really a common use case"><a href="#t1483221803000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:03:23</span>       aengelberg </span><span>Maybe since &quot;don&apos;t parse anything&quot; isn&apos;t really a common use case</span></div><div id="t1483221813000130" t="2016-12-31 22:03:33 gfredericks you shouldn&apos;t parse more things by removing an arg from  combo/alt"><a href="#t1483221813000130" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:03:33</span>      gfredericks </span><span>you shouldn&apos;t parse more things by removing an arg from </span><code>combo/alt</code></div><div id="t1483221826000131" t="2016-12-31 22:03:46 aengelberg agreed"><a href="#t1483221826000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:03:46</span>       aengelberg </span><span>agreed</span></div><div id="t1483221843000132" t="2016-12-31 22:04:03 gfredericks yeah I always end up finding the uncommon use cases"><a href="#t1483221843000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:04:03</span>      gfredericks </span><span>yeah I always end up finding the uncommon use cases</span></div><div id="t1483221865000133" t="2016-12-31 22:04:25 gfredericks for a while every time I tried to use CLJS I ended up creating a jira ticket"><a href="#t1483221865000133" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:04:25</span>      gfredericks </span><span>for a while every time I tried to use CLJS I ended up creating a jira ticket</span></div><div id="t1483221895000134" t="2016-12-31 22:04:55 aengelberg #gobigorgohome"><a href="#t1483221895000134" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:04:55</span>       aengelberg </span><span>#gobigorgohome</span></div><div id="t1483221969000135" t="2016-12-31 22:06:09 aengelberg I think I know why your parser is failing"><a href="#t1483221969000135" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:06:09</span>       aengelberg </span><span>I think I know why your parser is failing</span></div><div id="t1483222008000136" t="2016-12-31 22:06:48 aengelberg The regex for the denominator, when given  &quot;25&quot;  as input, may arbitrarily decide to match either  &quot;2&quot;  or  &quot;25&quot;"><a href="#t1483222008000136" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:06:48</span>       aengelberg </span><span>The regex for the denominator, when given </span><code>&quot;25&quot;</code><span> as input, may arbitrarily decide to match either </span><code>&quot;2&quot;</code><span> or </span><code>&quot;25&quot;</code></div><div id="t1483222024000137" t="2016-12-31 22:07:04 aengelberg In instaparse, whatever the regex decides is the one and only possible parse"><a href="#t1483222024000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:07:04</span>       aengelberg </span><span>In instaparse, whatever the regex decides is the one and only possible parse</span></div><div id="t1483222073000138" t="2016-12-31 22:07:53 aengelberg user=&gt; (re-matches #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
&quot;25&quot;
user=&gt; (re-seq #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
(&quot;2&quot; &quot;5&quot;)
user=&gt; (re-find #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
&quot;2&quot;
"><a href="#t1483222073000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:07:53</span>       aengelberg </span><pre>user=&gt; (re-matches #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
&quot;25&quot;
user=&gt; (re-seq #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
(&quot;2&quot; &quot;5&quot;)
user=&gt; (re-find #&quot;[2-9]|[1-9][0-9]+&quot; &quot;25&quot;)
&quot;2&quot;
</pre></div><div id="t1483222113000139" t="2016-12-31 22:08:33 gfredericks oh it&apos;s about  re-matches  vs  re-find ?"><a href="#t1483222113000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:08:33</span>      gfredericks </span><span>oh it&apos;s about </span><code>re-matches</code><span> vs </span><code>re-find</code><span>?</span></div><div id="t1483222119000140" t="2016-12-31 22:08:39 aengelberg https://github.com/engelberg/instaparse#regular-expressions-a-word-of-warning"><a href="#t1483222119000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:08:39</span>       aengelberg </span><a href="https://github.com/engelberg/instaparse#regular-expressions-a-word-of-warning" target="_blank">https://github.com/engelberg/instaparse#regular-expressions-a-word-of-warning</a></div><div id="t1483222127000142" t="2016-12-31 22:08:47 gfredericks oh I think I see"><a href="#t1483222127000142" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:08:47</span>      gfredericks </span><span>oh I think I see</span></div><div id="t1483222144000143" t="2016-12-31 22:09:04 aengelberg you could instead do  #&quot;[2-9]&quot; | #&quot;[1-9][0-9]+&quot;"><a href="#t1483222144000143" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:09:04</span>       aengelberg </span><span>you could instead do </span><code>#&quot;[2-9]&quot; | #&quot;[1-9][0-9]+&quot;</code></div><div id="t1483222162000144" t="2016-12-31 22:09:22 aengelberg If you move logic from regexes into instaparse, you get flexibility at the cost of speed"><a href="#t1483222162000144" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:09:22</span>       aengelberg </span><span>If you move logic from regexes into instaparse, you get flexibility at the cost of speed</span></div><div id="t1483222270000146" t="2016-12-31 22:11:10 gfredericks so the fact that I fixed it by rearranging the regex is sort of an implementation detail I guess?"><a href="#t1483222270000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:11:10</span>      gfredericks </span><span>so the fact that I fixed it by rearranging the regex is sort of an implementation detail I guess?</span></div><div id="t1483222322000147" t="2016-12-31 22:12:02 aengelberg Yes, so I would call rearranging the regex an improper solution"><a href="#t1483222322000147" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:12:02</span>       aengelberg </span><span>Yes, so I would call rearranging the regex an improper solution</span></div><div id="t1483222345000148" t="2016-12-31 22:12:25 aengelberg but  #&quot;[2-9]&quot; | #&quot;[1-9][0-9]+&quot;  is proper"><a href="#t1483222345000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:12:25</span>       aengelberg </span><span>but </span><code>#&quot;[2-9]&quot; | #&quot;[1-9][0-9]+&quot;</code><span> is proper</span></div><div id="t1483222510000149" t="2016-12-31 22:15:10 gfredericks okay fine I&apos;ll switch it  😛"><a href="#t1483222510000149" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2016-12-31</span> <span class="t" onclick="H(this)">22:15:10</span>      gfredericks </span><span>okay fine I&apos;ll switch it </span><b>😛</b></div><div id="t1486976333000154" t="2017-02-13 08:58:53 doddenino Hi! Is there a way to do a step by step debug of a parser?"><a href="#t1486976333000154" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">08:58:53</span>        doddenino </span><span>Hi! Is there a way to do a step by step debug of a parser?</span></div><div id="t1487008255000155" t="2017-02-13 17:50:55 dave @doddenino:  https://github.com/Engelberg/instaparse#total-parse-mode  &lt;-- this is maybe not exactly what you want, but it can be helpful for debugging a parse failure"><a href="#t1487008255000155" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:50:55</span>             dave </span><span>@doddenino: </span><a href="https://github.com/Engelberg/instaparse#total-parse-mode" target="_blank">https://github.com/Engelberg/instaparse#total-parse-mode</a><span> &lt;-- this is maybe not exactly what you want, but it can be helpful for debugging a parse failure</span></div><div id="t1487008288000157" t="2017-02-13 17:51:28 aengelberg @doddenino you&apos;re probably looking for tracing mode.  https://github.com/Engelberg/instaparse/blob/master/docs/Tracing.md"><a href="#t1487008288000157" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:51:28</span>       aengelberg </span><span>@doddenino you&apos;re probably looking for tracing mode. </span><a href="https://github.com/Engelberg/instaparse/blob/master/docs/Tracing.md" target="_blank">https://github.com/Engelberg/instaparse/blob/master/docs/Tracing.md</a></div><div id="t1487008358000159" t="2017-02-13 17:52:38 doddenino Oh that&apos;s great!  🙂  Thanks! I&apos;m having a lot of problems trying to make my parser work correctly  😞"><a href="#t1487008358000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:52:38</span>        doddenino </span><span>Oh that&apos;s great! </span><b>🙂</b><span> Thanks! I&apos;m having a lot of problems trying to make my parser work correctly </span><b>😞</b></div><div id="t1487008417000160" t="2017-02-13 17:53:37 aengelberg Also, calling  insta/parse  with  :start  overridden can also help debug certain small pieces of your parser."><a href="#t1487008417000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:53:37</span>       aengelberg </span><span>Also, calling </span><code>insta/parse</code><span> with </span><code>:start</code><span> overridden can also help debug certain small pieces of your parser.</span></div><div id="t1487008618000161" t="2017-02-13 17:56:58 doddenino @aengelberg I think trace is perfect"><a href="#t1487008618000161" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">17:56:58</span>        doddenino </span><span>@aengelberg I think trace is perfect</span></div><div id="t1487009459000162" t="2017-02-13 18:10:59 doddenino I don&apos;t know how and why, but it&apos;s working correctly now  😅"><a href="#t1487009459000162" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">18:10:59</span>        doddenino </span><span>I don&apos;t know how and why, but it&apos;s working correctly now </span><b>😅</b></div><div id="t1487009571000163" t="2017-02-13 18:12:51 doddenino Celebrating too soon  😞"><a href="#t1487009571000163" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-13</span> <span class="t" onclick="H(this)">18:12:51</span>        doddenino </span><span>Celebrating too soon </span><b>😞</b></div><div id="t1487063633000164" t="2017-02-14 09:13:53 doddenino I&apos;m trying to write a lambda calculus expressions parser, but I&apos;m having a hard time dealing applications being left associative and having higher precedence than abstractions. I can either parse &quot;a b c&quot; or &quot;fn x . x a&quot; correctly, but not both with the same parser  😞"><a href="#t1487063633000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">09:13:53</span>        doddenino </span><span>I&apos;m trying to write a lambda calculus expressions parser, but I&apos;m having a hard time dealing applications being left associative and having higher precedence than abstractions. I can either parse &quot;a b c&quot; or &quot;fn x . x a&quot; correctly, but not both with the same parser </span><b>😞</b></div><div id="t1487098763000166" t="2017-02-14 18:59:23 aengelberg @doddenino: I&apos;m not familiar with the syntax you&apos;re trying to parse, but have you looked at the ordered choice  /  operator?"><a href="#t1487098763000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-14</span> <span class="t" onclick="H(this)">18:59:23</span>       aengelberg </span><span>@doddenino: I&apos;m not familiar with the syntax you&apos;re trying to parse, but have you looked at the ordered choice </span><code>/</code><span> operator?</span></div><div id="t1487153531000167" t="2017-02-15 10:12:11 doddenino Yes, I was using that already. I managed to solve it by enforcing a stricter syntax, dealing better with a specific edge case and randomly moving stuff around until it worked fine  😄"><a href="#t1487153531000167" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-15</span> <span class="t" onclick="H(this)">10:12:11</span>        doddenino </span><span>Yes, I was using that already. I managed to solve it by enforcing a stricter syntax, dealing better with a specific edge case and randomly moving stuff around until it worked fine </span><b>😄</b></div><div id="t1487354066000169" t="2017-02-17 17:54:26 frank I&apos;m having trouble creating a parser using the grammar specified here:  https://developers.google.com/protocol-buffers/docs/reference/proto3-spec"><a href="#t1487354066000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">17:54:26</span>            frank </span><span>I&apos;m having trouble creating a parser using the grammar specified here: </span><a href="https://developers.google.com/protocol-buffers/docs/reference/proto3-spec" target="_blank">https://developers.google.com/protocol-buffers/docs/reference/proto3-spec</a></div><div id="t1487354092000170" t="2017-02-17 17:54:52 frank I&apos;m getting the feeling that there are syntax differences"><a href="#t1487354092000170" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">17:54:52</span>            frank </span><span>I&apos;m getting the feeling that there are syntax differences</span></div><div id="t1487354246000171" t="2017-02-17 17:57:26 frank I&apos;m slurping the grammar out of a separate file, but I feel like escaped quotes still aren&apos;t being handled as I intend (e.g.  quote = &quot;&apos;&quot; | &apos;&quot;&apos; )"><a href="#t1487354246000171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">17:57:26</span>            frank </span><span>I&apos;m slurping the grammar out of a separate file, but I feel like escaped quotes still aren&apos;t being handled as I intend (e.g. </span><code>quote = &quot;&apos;&quot; | &apos;&quot;&apos;</code><span>)</span></div><div id="t1487354629000172" t="2017-02-17 18:03:49 frank does anyone know how quotes ought to be escaped in instaparse ebnf strings?"><a href="#t1487354629000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:03:49</span>            frank </span><span>does anyone know how quotes ought to be escaped in instaparse ebnf strings?</span></div><div id="t1487355201000173" t="2017-02-17 18:13:21 gfredericks the way you have it looks likely to work to me"><a href="#t1487355201000173" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:13:21</span>      gfredericks </span><span>the way you have it looks likely to work to me</span></div><div id="t1487355469000174" t="2017-02-17 18:17:49 frank maybe there&apos;s unmatched quotes somewhere in the grammar that I copied and pasted  😕"><a href="#t1487355469000174" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:17:49</span>            frank </span><span>maybe there&apos;s unmatched quotes somewhere in the grammar that I copied and pasted </span><b>😕</b></div><div id="t1487355578000175" t="2017-02-17 18:19:38 gfredericks try making a trivial grammar that only matches a quote to make sure it works the way you expect"><a href="#t1487355578000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:19:38</span>      gfredericks </span><span>try making a trivial grammar that only matches a quote to make sure it works the way you expect</span></div><div id="t1487355658000177" t="2017-02-17 18:20:58 seylerius ^ This. So much this. When I&apos;m making grammars, I often make little phrases to match a character I haven&apos;t tested before."><a href="#t1487355658000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:20:58</span>        seylerius </span><span>^ This. So much this. When I&apos;m making grammars, I often make little phrases to match a character I haven&apos;t tested before.</span></div><div id="t1487355704000178" t="2017-02-17 18:21:44 frank I&apos;ll try that, thanks"><a href="#t1487355704000178" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:21:44</span>            frank </span><span>I&apos;ll try that, thanks</span></div><div id="t1487356160000180" t="2017-02-17 18:29:20 aengelberg &quot;&apos;&quot; | &apos;&quot;&apos;  looks right, but there are sometimes additional layers of escaping you have to deal with."><a href="#t1487356160000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:29:20</span>       aengelberg </span><code>&quot;&apos;&quot; | &apos;&quot;&apos;</code><span> looks right, but there are sometimes additional layers of escaping you have to deal with.</span></div><div id="t1487356193000181" t="2017-02-17 18:29:53 aengelberg e.g. if you wrote your grammar as a string in a Clojure file, it would probably have to look like
 (def parser (insta/parser &quot;quote \&quot;&apos;\&quot; | &apos;\&quot;&apos;&quot;))
"><a href="#t1487356193000181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:29:53</span>       aengelberg </span><span>e.g. if you wrote your grammar as a string in a Clojure file, it would probably have to look like
</span><pre>(def parser (insta/parser &quot;quote \&quot;&apos;\&quot; | &apos;\&quot;&apos;&quot;))
</pre></div><div id="t1487356271000182" t="2017-02-17 18:31:11 aengelberg I see this in the protobuf spec
 hexEscape = &apos;\&apos;
 
that will probably throw off instaparse, since it thinks you are escaping the second  &apos;"><a href="#t1487356271000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:31:11</span>       aengelberg </span><span>I see this in the protobuf spec
</span><pre>hexEscape = &apos;\&apos;
</pre><span>
that will probably throw off instaparse, since it thinks you are escaping the second </span><code>&apos;</code></div><div id="t1487356285000183" t="2017-02-17 18:31:25 aengelberg so it should really be
 hexEscape = &apos;\\&apos;
"><a href="#t1487356285000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:31:25</span>       aengelberg </span><span>so it should really be
</span><pre>hexEscape = &apos;\\&apos;
</pre></div><div id="t1487356321000185" t="2017-02-17 18:32:01 aengelberg @frank ^"><a href="#t1487356321000185" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:32:01</span>       aengelberg </span><span>@frank ^</span></div><div id="t1487356340000186" t="2017-02-17 18:32:20 aengelberg also,  /[^\0\n\\]/  is not valid EBNF in instaparse (should be  #&quot;[^\0\n\\]&quot; )"><a href="#t1487356340000186" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:32:20</span>       aengelberg </span><span>also, </span><code>/[^\0\n\\]/</code><span> is not valid EBNF in instaparse (should be </span><code>#&quot;[^\0\n\\]&quot;</code><span>)</span></div><div id="t1487356958000189" t="2017-02-17 18:42:38 frank ah, that&apos;s probably it!"><a href="#t1487356958000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:42:38</span>            frank </span><span>ah, that&apos;s probably it!</span></div><div id="t1487357021000190" t="2017-02-17 18:43:41 frank strangely enough,  #&quot;[^\0\n\\]&quot;  isn&apos;t valid clojure regex syntax, so I stole the same regex syntax from  https://github.com/arpagaus/clj-protobuf/blob/master/resources/proto.ebnf"><a href="#t1487357021000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:43:41</span>            frank </span><span>strangely enough, </span><code>#&quot;[^\0\n\\]&quot;</code><span> isn&apos;t valid clojure regex syntax, so I stole the same regex syntax from </span><a href="https://github.com/arpagaus/clj-protobuf/blob/master/resources/proto.ebnf" target="_blank">https://github.com/arpagaus/clj-protobuf/blob/master/resources/proto.ebnf</a></div><div id="t1487357044000192" t="2017-02-17 18:44:04 frank they&apos;ve got a few extra backslashes:  #&quot;[^\\0\\n]&quot;"><a href="#t1487357044000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:44:04</span>            frank </span><span>they&apos;ve got a few extra backslashes: </span><code>#&quot;[^\\0\\n]&quot;</code></div><div id="t1487357185000193" t="2017-02-17 18:46:25 frank @aengelberg what&apos;s the equivalent of the  …  that they&apos;ve got littered all over their grammar?"><a href="#t1487357185000193" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:46:25</span>            frank </span><span>@aengelberg what&apos;s the equivalent of the </span><code>…</code><span> that they&apos;ve got littered all over their grammar?</span></div><div id="t1487357377000194" t="2017-02-17 18:49:37 aengelberg I think they meant that as a shorthand for alternating between all the digits. Sadly instaparse can&apos;t infer the intermediate values, so you would have to  &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;8&quot; | &quot;9&quot;"><a href="#t1487357377000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:49:37</span>       aengelberg </span><span>I think they meant that as a shorthand for alternating between all the digits. Sadly instaparse can&apos;t infer the intermediate values, so you would have to </span><code>&quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;8&quot; | &quot;9&quot;</code></div><div id="t1487357415000195" t="2017-02-17 18:50:15 frank ah, gotcha"><a href="#t1487357415000195" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:50:15</span>            frank </span><span>ah, gotcha</span></div><div id="t1487357757000196" t="2017-02-17 18:55:57 frank alternatively, #&quot;[0-9]&quot; should work too, right?"><a href="#t1487357757000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:55:57</span>            frank </span><span>alternatively, #&quot;[0-9]&quot; should work too, right?</span></div><div id="t1487357774000197" t="2017-02-17 18:56:14 aengelberg correct"><a href="#t1487357774000197" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-17</span> <span class="t" onclick="H(this)">18:56:14</span>       aengelberg </span><span>correct</span></div><div id="t1487476875000200" t="2017-02-19 04:01:15 bherrmann has anyone used instaparse to mottle through oracle sql?"><a href="#t1487476875000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-19</span> <span class="t" onclick="H(this)">04:01:15</span>        bherrmann </span><span>has anyone used instaparse to mottle through oracle sql?</span></div><div id="t1487497182000201" t="2017-02-19 09:39:42 aengelberg I vaguely recall hearing about people using instaparse for SQL, but I unfortunately can&apos;t point to something specific."><a href="#t1487497182000201" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-19</span> <span class="t" onclick="H(this)">09:39:42</span>       aengelberg </span><span>I vaguely recall hearing about people using instaparse for SQL, but I unfortunately can&apos;t point to something specific.</span></div><div id="t1487497208000202" t="2017-02-19 09:40:08 aengelberg Might be something in the instaparse Google group archives"><a href="#t1487497208000202" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-19</span> <span class="t" onclick="H(this)">09:40:08</span>       aengelberg </span><span>Might be something in the instaparse Google group archives</span></div><div id="t1487885189000205" t="2017-02-23 21:26:29 anthony.naddeo @aengelberg I have a parser that I&apos;m not sure how else to improve:  https://github.com/naddeoa/elm-clojurescript-hello-parser/blob/master/src/elm_toolkit/parser.cljs"><a href="#t1487885189000205" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:26:29</span>   anthony.naddeo </span><span>@aengelberg I have a parser that I&apos;m not sure how else to improve: </span><a href="https://github.com/naddeoa/elm-clojurescript-hello-parser/blob/master/src/elm_toolkit/parser.cljs" target="_blank">https://github.com/naddeoa/elm-clojurescript-hello-parser/blob/master/src/elm_toolkit/parser.cljs</a></div><div id="t1487885222000207" t="2017-02-23 21:27:02 anthony.naddeo I&apos;ve eliminated a ton of ambiguity but I&apos;m still seeing that its performance scales poorly with the size of the input, even when there are only 1 or two possible parses"><a href="#t1487885222000207" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:27:02</span>   anthony.naddeo </span><span>I&apos;ve eliminated a ton of ambiguity but I&apos;m still seeing that its performance scales poorly with the size of the input, even when there are only 1 or two possible parses</span></div><div id="t1487885243000208" t="2017-02-23 21:27:23 anthony.naddeo but that same input when fed chunk by chunk adds up to a much more reasonable parse time"><a href="#t1487885243000208" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:27:23</span>   anthony.naddeo </span><span>but that same input when fed chunk by chunk adds up to a much more reasonable parse time</span></div><div id="t1487885302000209" t="2017-02-23 21:28:22 anthony.naddeo I was reading about the  :optimize :memory  option, but that seems to make it worse"><a href="#t1487885302000209" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:28:22</span>   anthony.naddeo </span><span>I was reading about the </span><code>:optimize :memory</code><span> option, but that seems to make it worse</span></div><div id="t1487885321000210" t="2017-02-23 21:28:41 anthony.naddeo I even tried it with Java instead of Node to see if it was just a JS thing and the results were still similar"><a href="#t1487885321000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:28:41</span>   anthony.naddeo </span><span>I even tried it with Java instead of Node to see if it was just a JS thing and the results were still similar</span></div><div id="t1487885367000211" t="2017-02-23 21:29:27 anthony.naddeo My next step was about to be to write a function that breaks the input up into chunks, but to do that I&apos;ll need to know where a chunk starts/stops or impose some sort of convention around the input"><a href="#t1487885367000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">21:29:27</span>   anthony.naddeo </span><span>My next step was about to be to write a function that breaks the input up into chunks, but to do that I&apos;ll need to know where a chunk starts/stops or impose some sort of convention around the input</span></div><div id="t1487889477000212" t="2017-02-23 22:37:57 hiredman have you seen  https://github.com/Engelberg/instaparse/blob/master/docs/Performance.md ? I feel like I have seen splitting input in to chunks recommended for larger inputs to instaparse"><a href="#t1487889477000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:37:57</span>         hiredman </span><span>have you seen </span><a href="https://github.com/Engelberg/instaparse/blob/master/docs/Performance.md" target="_blank">https://github.com/Engelberg/instaparse/blob/master/docs/Performance.md</a><span>? I feel like I have seen splitting input in to chunks recommended for larger inputs to instaparse</span></div><div id="t1487889630000214" t="2017-02-23 22:40:30 anthony.naddeo Yeah that&apos;s where I got it from"><a href="#t1487889630000214" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:40:30</span>   anthony.naddeo </span><span>Yeah that&apos;s where I got it from</span></div><div id="t1487889647000215" t="2017-02-23 22:40:47 anthony.naddeo It just seems like something I shouldn&apos;t have to do"><a href="#t1487889647000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:40:47</span>   anthony.naddeo </span><span>It just seems like something I shouldn&apos;t have to do</span></div><div id="t1487889663000216" t="2017-02-23 22:41:03 anthony.naddeo If only because I need my parser to determine when a readable chunk starts/stops"><a href="#t1487889663000216" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:41:03</span>   anthony.naddeo </span><span>If only because I need my parser to determine when a readable chunk starts/stops</span></div><div id="t1487889670000217" t="2017-02-23 22:41:10 anthony.naddeo it isn&apos;t a line by line thing"><a href="#t1487889670000217" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:41:10</span>   anthony.naddeo </span><span>it isn&apos;t a line by line thing</span></div><div id="t1487889752000218" t="2017-02-23 22:42:32 hiredman I might try and eliminate regexes in the grammar definition, if I recall correctly those can be (or maybe they were?) inefficient"><a href="#t1487889752000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:42:32</span>         hiredman </span><span>I might try and eliminate regexes in the grammar definition, if I recall correctly those can be (or maybe they were?) inefficient</span></div><div id="t1487889959000219" t="2017-02-23 22:45:59 anthony.naddeo Are there any examples you know of large grammars that scale linearly with the size of the input?"><a href="#t1487889959000219" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:45:59</span>   anthony.naddeo </span><span>Are there any examples you know of large grammars that scale linearly with the size of the input?</span></div><div id="t1487889970000220" t="2017-02-23 22:46:10 anthony.naddeo Before I go down a rabbit hole I want to make sure I know what to expect"><a href="#t1487889970000220" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:46:10</span>   anthony.naddeo </span><span>Before I go down a rabbit hole I want to make sure I know what to expect</span></div><div id="t1487890139000221" t="2017-02-23 22:48:59 hiredman no, I don&apos;t"><a href="#t1487890139000221" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:48:59</span>         hiredman </span><span>no, I don&apos;t</span></div><div id="t1487890184000222" t="2017-02-23 22:49:44 hiredman I don&apos;t know of any large grammars, and I have only used smallish grammars on small inputs"><a href="#t1487890184000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:49:44</span>         hiredman </span><span>I don&apos;t know of any large grammars, and I have only used smallish grammars on small inputs</span></div><div id="t1487890248000223" t="2017-02-23 22:50:48 anthony.naddeo I&apos;m just afraid that the performance actually won&apos;t get better as hard as I may try and I want to cut  my losses if I can."><a href="#t1487890248000223" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:50:48</span>   anthony.naddeo </span><span>I&apos;m just afraid that the performance actually won&apos;t get better as hard as I may try and I want to cut  my losses if I can.</span></div><div id="t1487890257000224" t="2017-02-23 22:50:57 anthony.naddeo Or just use this for things that only require parsing snippets"><a href="#t1487890257000224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:50:57</span>   anthony.naddeo </span><span>Or just use this for things that only require parsing snippets</span></div><div id="t1487890267000225" t="2017-02-23 22:51:07 anthony.naddeo Thanks for the advice though @hiredman"><a href="#t1487890267000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:51:07</span>   anthony.naddeo </span><span>Thanks for the advice though @hiredman</span></div><div id="t1487890433000226" t="2017-02-23 22:53:53 hiredman it would be neat if instaparse could emit warnings and suggest fixes if your grammar is not LL(1)"><a href="#t1487890433000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:53:53</span>         hiredman </span><span>it would be neat if instaparse could emit warnings and suggest fixes if your grammar is not LL(1)</span></div><div id="t1487890626000227" t="2017-02-23 22:57:06 anthony.naddeo At this point, it seems like what I really want is a mode where it parses in chunks itself. My grammar is really just a repetition of 4 possible blocks. It seems like it could just parse the first block independent of the second. That is to say, as soon as it matches just consider it a block and move on."><a href="#t1487890626000227" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:57:06</span>   anthony.naddeo </span><span>At this point, it seems like what I really want is a mode where it parses in chunks itself. My grammar is really just a repetition of 4 possible blocks. It seems like it could just parse the first block independent of the second. That is to say, as soon as it matches just consider it a block and move on.</span></div><div id="t1487890645000228" t="2017-02-23 22:57:25 anthony.naddeo Given the right level of ambiguity I would be ok with massaging the results"><a href="#t1487890645000228" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">22:57:25</span>   anthony.naddeo </span><span>Given the right level of ambiguity I would be ok with massaging the results</span></div><div id="t1487890821000229" t="2017-02-23 23:00:21 aengelberg How large are your problematic inputs?"><a href="#t1487890821000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:00:21</span>       aengelberg </span><span>How large are your problematic inputs?</span></div><div id="t1487890950000230" t="2017-02-23 23:02:30 anthony.naddeo Well, it scales poorly. There isn&apos;t a size in specific. It parses the Elm programming langauge. When testing, I start with a single function, then I just keep duplicating that function and observe the performance"><a href="#t1487890950000230" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:02:30</span>   anthony.naddeo </span><span>Well, it scales poorly. There isn&apos;t a size in specific. It parses the Elm programming langauge. When testing, I start with a single function, then I just keep duplicating that function and observe the performance</span></div><div id="t1487890967000231" t="2017-02-23 23:02:47 anthony.naddeo each additional function adds more than its fair share of time"><a href="#t1487890967000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:02:47</span>   anthony.naddeo </span><span>each additional function adds more than its fair share of time</span></div><div id="t1487890975000232" t="2017-02-23 23:02:55 anthony.naddeo I&apos;ll paste a snippet of something that takes too long"><a href="#t1487890975000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:02:55</span>   anthony.naddeo </span><span>I&apos;ll paste a snippet of something that takes too long</span></div><div id="t1487891215000233" t="2017-02-23 23:06:55 anthony.naddeo (def input &quot;nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next


nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

&quot;)
"><a href="#t1487891215000233" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:06:55</span>   anthony.naddeo </span><pre>(def input &quot;nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next


nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
    Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

nextSource : Source a -&gt; Source a
nextSource (Source a next) =
  Source (next a) next

&quot;)
</pre></div><div id="t1487891295000236" t="2017-02-23 23:08:15 anthony.naddeo That one I actually just had to kill"><a href="#t1487891295000236" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:08:15</span>   anthony.naddeo </span><span>That one I actually just had to kill</span></div><div id="t1487891308000237" t="2017-02-23 23:08:28 anthony.naddeo but if you cut it in half it only takes about a second or so to parse"><a href="#t1487891308000237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:08:28</span>   anthony.naddeo </span><span>but if you cut it in half it only takes about a second or so to parse</span></div><div id="t1487891324000238" t="2017-02-23 23:08:44 anthony.naddeo And its a pretty reasonable size for an Elm source file"><a href="#t1487891324000238" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:08:44</span>   anthony.naddeo </span><span>And its a pretty reasonable size for an Elm source file</span></div><div id="t1487891446000239" t="2017-02-23 23:10:46 aengelberg Ouch"><a href="#t1487891446000239" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:10:46</span>       aengelberg </span><span>Ouch</span></div><div id="t1487891474000240" t="2017-02-23 23:11:14 aengelberg I&apos;ll try to take a look soon"><a href="#t1487891474000240" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:11:14</span>       aengelberg </span><span>I&apos;ll try to take a look soon</span></div><div id="t1487891932000241" t="2017-02-23 23:18:52 anthony.naddeo Cool, thanks a lot"><a href="#t1487891932000241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:18:52</span>   anthony.naddeo </span><span>Cool, thanks a lot</span></div><div id="t1487891959000242" t="2017-02-23 23:19:19 anthony.naddeo Also, definitely pretty new to clojure still. If I can make the code more approachable/replable feel free to point that out"><a href="#t1487891959000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:19:19</span>   anthony.naddeo </span><span>Also, definitely pretty new to clojure still. If I can make the code more approachable/replable feel free to point that out</span></div><div id="t1487891964000243" t="2017-02-23 23:19:24 anthony.naddeo I kind of just hacked everything together"><a href="#t1487891964000243" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:19:24</span>   anthony.naddeo </span><span>I kind of just hacked everything together</span></div><div id="t1487893013000244" t="2017-02-23 23:36:53 aengelberg @anthony.naddeo I fixed it

before:
 start = (&lt;ws&gt;* block &lt;ws&gt;*)+
 

after:
 start = (&lt;ws&gt; block &lt;ws&gt;)+
"><a href="#t1487893013000244" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:36:53</span>       aengelberg </span><span>@anthony.naddeo I fixed it

before:
</span><pre>start = (&lt;ws&gt;* block &lt;ws&gt;*)+
</pre><span>

after:
</span><pre>start = (&lt;ws&gt; block &lt;ws&gt;)+
</pre></div><div id="t1487893034000245" t="2017-02-23 23:37:14 anthony.naddeo That? Let me try now"><a href="#t1487893034000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:37:14</span>   anthony.naddeo </span><span>That? Let me try now</span></div><div id="t1487893054000246" t="2017-02-23 23:37:34 aengelberg the large input now takes 100ms on my machine"><a href="#t1487893054000246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:37:34</span>       aengelberg </span><span>the large input now takes 100ms on my machine</span></div><div id="t1487893186000247" t="2017-02-23 23:39:46 anthony.naddeo 100ms? I just tried it and it is WAY better, but I wish I had those numbers"><a href="#t1487893186000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:39:46</span>   anthony.naddeo </span><span>100ms? I just tried it and it is WAY better, but I wish I had those numbers</span></div><div id="t1487893192000248" t="2017-02-23 23:39:52 anthony.naddeo are you just in a node repl?"><a href="#t1487893192000248" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:39:52</span>   anthony.naddeo </span><span>are you just in a node repl?</span></div><div id="t1487893195000249" t="2017-02-23 23:39:55 anthony.naddeo I&apos;m down to 900ms now"><a href="#t1487893195000249" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:39:55</span>   anthony.naddeo </span><span>I&apos;m down to 900ms now</span></div><div id="t1487893198000250" t="2017-02-23 23:39:58 anthony.naddeo which is great"><a href="#t1487893198000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:39:58</span>   anthony.naddeo </span><span>which is great</span></div><div id="t1487893202000251" t="2017-02-23 23:40:02 anthony.naddeo compared to never stopping"><a href="#t1487893202000251" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:40:02</span>   anthony.naddeo </span><span>compared to never stopping</span></div><div id="t1487893214000252" t="2017-02-23 23:40:14 anthony.naddeo I wouldn&apos;t have thought to do that"><a href="#t1487893214000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:40:14</span>   anthony.naddeo </span><span>I wouldn&apos;t have thought to do that</span></div><div id="t1487893226000253" t="2017-02-23 23:40:26 aengelberg sorry I&apos;m in JVM, not JS"><a href="#t1487893226000253" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:40:26</span>       aengelberg </span><span>sorry I&apos;m in JVM, not JS</span></div><div id="t1487893246000254" t="2017-02-23 23:40:46 aengelberg 900ms makes sense for node, instaparse in cljs is known to be ~ 10x slower"><a href="#t1487893246000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:40:46</span>       aengelberg </span><span>900ms makes sense for node, instaparse in cljs is known to be ~ 10x slower</span></div><div id="t1487893310000255" t="2017-02-23 23:41:50 anthony.naddeo oh interesting. Did you use my parser.clj file?"><a href="#t1487893310000255" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:41:50</span>   anthony.naddeo </span><span>oh interesting. Did you use my parser.clj file?</span></div><div id="t1487893330000256" t="2017-02-23 23:42:10 anthony.naddeo yeah this is way better"><a href="#t1487893330000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:42:10</span>   anthony.naddeo </span><span>yeah this is way better</span></div><div id="t1487893337000257" t="2017-02-23 23:42:17 anthony.naddeo Thanks a ton"><a href="#t1487893337000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:42:17</span>   anthony.naddeo </span><span>Thanks a ton</span></div><div id="t1487893387000258" t="2017-02-23 23:43:07 aengelberg I just copied the grammar string from  parser.cljs  into my clojure file since the EBNF syntax is the same on both platforms"><a href="#t1487893387000258" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:43:07</span>       aengelberg </span><span>I just copied the grammar string from </span><code>parser.cljs</code><span> into my clojure file since the EBNF syntax is the same on both platforms</span></div><div id="t1487893397000259" t="2017-02-23 23:43:17 aengelberg np"><a href="#t1487893397000259" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:43:17</span>       aengelberg </span><span>np</span></div><div id="t1487893543000261" t="2017-02-23 23:45:43 anthony.naddeo One odd thing though"><a href="#t1487893543000261" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:45:43</span>   anthony.naddeo </span><span>One odd thing though</span></div><div id="t1487893558000262" t="2017-02-23 23:45:58 anthony.naddeo I would expect that the  *  impacts performance because it adds ambiguity right?"><a href="#t1487893558000262" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:45:58</span>   anthony.naddeo </span><span>I would expect that the </span><code>*</code><span> impacts performance because it adds ambiguity right?</span></div><div id="t1487893589000263" t="2017-02-23 23:46:29 anthony.naddeo If so, shouldn&apos;t there be more than a single parse for it?  (time (count (insta/parses parser/parser input :unhide :all)))  returned 1 unless I did something wrong"><a href="#t1487893589000263" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:46:29</span>   anthony.naddeo </span><span>If so, shouldn&apos;t there be more than a single parse for it? </span><code>(time (count (insta/parses parser/parser input :unhide :all)))</code><span> returned 1 unless I did something wrong</span></div><div id="t1487893811000264" t="2017-02-23 23:50:11 hiredman ambiguity can mean multiple results, but it can also mean a single result that required checking lots of different cases to arrive at"><a href="#t1487893811000264" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:50:11</span>         hiredman </span><span>ambiguity can mean multiple results, but it can also mean a single result that required checking lots of different cases to arrive at</span></div><div id="t1487893842000266" t="2017-02-23 23:50:42 anthony.naddeo What metrics could people use to determine ambiguity if not parse counts?"><a href="#t1487893842000266" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:50:42</span>   anthony.naddeo </span><span>What metrics could people use to determine ambiguity if not parse counts?</span></div><div id="t1487893942000267" t="2017-02-23 23:52:22 hiredman #6 in that peformance doc suggests looking at rules individually to see if you have rules that in isolation can result in multiple parses"><a href="#t1487893942000267" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:52:22</span>         hiredman </span><span>#6 in that peformance doc suggests looking at rules individually to see if you have rules that in isolation can result in multiple parses</span></div><div id="t1487893944000268" t="2017-02-23 23:52:24 aengelberg Instaparse de-duplicates results, so some internal ambiguity can lurk around but still impact the perf"><a href="#t1487893944000268" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:52:24</span>       aengelberg </span><span>Instaparse de-duplicates results, so some internal ambiguity can lurk around but still impact the perf</span></div><div id="t1487893984000269" t="2017-02-23 23:53:04 anthony.naddeo interesting"><a href="#t1487893984000269" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:53:04</span>   anthony.naddeo </span><span>interesting</span></div><div id="t1487893994000270" t="2017-02-23 23:53:14 anthony.naddeo well, I&apos;m glad that was an easy fix, thanks guys"><a href="#t1487893994000270" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:53:14</span>   anthony.naddeo </span><span>well, I&apos;m glad that was an easy fix, thanks guys</span></div><div id="t1487894004000271" t="2017-02-23 23:53:24 anthony.naddeo I don&apos;t think I can go back to other parsers. I would have been heart broken"><a href="#t1487894004000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:53:24</span>   anthony.naddeo </span><span>I don&apos;t think I can go back to other parsers. I would have been heart broken</span></div><div id="t1487894111000274" t="2017-02-23 23:55:11 aengelberg btw @anthony.naddeo, I made the following optimization to your  Name  and  name  which halved the time for me:
 Name = #&apos;(?!\\b(if|then|else|in|let|case|of)\\b)[A-Z][a-zA-Z0-9]*&apos;
    name = #&apos;(?!\\b(if|then|else|in|let|case|of|type)\\b)[a-z][a-zA-Z0-9]*&apos;
"><a href="#t1487894111000274" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:55:11</span>       aengelberg </span><span>btw @anthony.naddeo, I made the following optimization to your </span><code>Name</code><span> and </span><code>name</code><span> which halved the time for me:
</span><pre>Name = #&apos;(?!\\b(if|then|else|in|let|case|of)\\b)[A-Z][a-zA-Z0-9]*&apos;
    name = #&apos;(?!\\b(if|then|else|in|let|case|of|type)\\b)[a-z][a-zA-Z0-9]*&apos;
</pre></div><div id="t1487894199000275" t="2017-02-23 23:56:39 aengelberg Actually the first \b doesn&apos;t really do anything, because the first character of this particular token is the first char in the string from the regex&apos;s perspective"><a href="#t1487894199000275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:56:39</span>       aengelberg </span><span>Actually the first \b doesn&apos;t really do anything, because the first character of this particular token is the first char in the string from the regex&apos;s perspective</span></div><div id="t1487894263000276" t="2017-02-23 23:57:43 aengelberg But my optimization was to shift more responsibility into the regex; that is always ideal"><a href="#t1487894263000276" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-23</span> <span class="t" onclick="H(this)">23:57:43</span>       aengelberg </span><span>But my optimization was to shift more responsibility into the regex; that is always ideal</span></div><div id="t1487894999000277" t="2017-02-24 00:09:59 aengelberg related:
 symbol = #&apos;(?!(-&gt;|=)\\b)[+/*&lt;&gt;:&amp;|=^?%#~!-]+&apos;
"><a href="#t1487894999000277" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:09:59</span>       aengelberg </span><span>related:
</span><pre>symbol = #&apos;(?!(-&gt;|=)\\b)[+/*&lt;&gt;:&amp;|=^?%#~!-]+&apos;
</pre></div><div id="t1487895038000278" t="2017-02-24 00:10:38 anthony.naddeo oh awesome, let me try that now"><a href="#t1487895038000278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:10:38</span>   anthony.naddeo </span><span>oh awesome, let me try that now</span></div><div id="t1487895050000279" t="2017-02-24 00:10:50 anthony.naddeo I had meant to circle back and fix all that stuff on the bottom..."><a href="#t1487895050000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:10:50</span>   anthony.naddeo </span><span>I had meant to circle back and fix all that stuff on the bottom...</span></div><div id="t1487896351000280" t="2017-02-24 00:32:31 anthony.naddeo @aengelberg yeah, that&apos;s pretty awesome. Thanks a ton. I guess I have some work to do"><a href="#t1487896351000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:32:31</span>   anthony.naddeo </span><span>@aengelberg yeah, that&apos;s pretty awesome. Thanks a ton. I guess I have some work to do</span></div><div id="t1487896364000281" t="2017-02-24 00:32:44 anthony.naddeo Its cut nearly in half on JS"><a href="#t1487896364000281" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:32:44</span>   anthony.naddeo </span><span>Its cut nearly in half on JS</span></div><div id="t1487896460000282" t="2017-02-24 00:34:20 aengelberg just curious, does Elm allow newlines pretty much anywhere there can be whitespace? if so, I would recommend making a universal  ws  and  ows  (optional whitespace) that allows whitespace, newlines, and comments, which you can then spam in your grammar anytime you would use  &lt;break&gt; ."><a href="#t1487896460000282" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:34:20</span>       aengelberg </span><span>just curious, does Elm allow newlines pretty much anywhere there can be whitespace? if so, I would recommend making a universal </span><code>ws</code><span> and </span><code>ows</code><span> (optional whitespace) that allows whitespace, newlines, and comments, which you can then spam in your grammar anytime you would use </span><code>&lt;break&gt;</code><span>.</span></div><div id="t1487896499000283" t="2017-02-24 00:34:59 aengelberg whitespace and comments are sometimes the trickiest parts of grammar perf"><a href="#t1487896499000283" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:34:59</span>       aengelberg </span><span>whitespace and comments are sometimes the trickiest parts of grammar perf</span></div><div id="t1487896683000284" t="2017-02-24 00:38:03 anthony.naddeo Its pretty flexible with newlines yeah. It does care about indentation (which I haven&apos;t attempted to model in anyway). Are you saying that  break  performs poorly or that it would be easier to maintain if I just settled on fewer whitespace tokens"><a href="#t1487896683000284" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:38:03</span>   anthony.naddeo </span><span>Its pretty flexible with newlines yeah. It does care about indentation (which I haven&apos;t attempted to model in anyway). Are you saying that </span><code>break</code><span> performs poorly or that it would be easier to maintain if I just settled on fewer whitespace tokens</span></div><div id="t1487896766000285" t="2017-02-24 00:39:26 aengelberg I don&apos;t think anything&apos;s wrong with  break , but you might run into false negatives i.e. valid Elm code that doesn&apos;t parse properly"><a href="#t1487896766000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:39:26</span>       aengelberg </span><span>I don&apos;t think anything&apos;s wrong with </span><code>break</code><span>, but you might run into false negatives i.e. valid Elm code that doesn&apos;t parse properly</span></div><div id="t1487896805000286" t="2017-02-24 00:40:05 aengelberg and making ws easier to reason about makes you less likely to fall into ambiguity traps like two adjacent ws parsers"><a href="#t1487896805000286" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:40:05</span>       aengelberg </span><span>and making ws easier to reason about makes you less likely to fall into ambiguity traps like two adjacent ws parsers</span></div><div id="t1487896818000287" t="2017-02-24 00:40:18 anthony.naddeo yeah that&apos;s a good point"><a href="#t1487896818000287" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:40:18</span>   anthony.naddeo </span><span>yeah that&apos;s a good point</span></div><div id="t1487896852000288" t="2017-02-24 00:40:52 anthony.naddeo break probably can go. It was just the result of trial and error when I first picked up the parser, I shouldn&apos;t feel particularly attached to it if I can just use ws everywhere"><a href="#t1487896852000288" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:40:52</span>   anthony.naddeo </span><span>break probably can go. It was just the result of trial and error when I first picked up the parser, I shouldn&apos;t feel particularly attached to it if I can just use ws everywhere</span></div><div id="t1487896923000289" t="2017-02-24 00:42:03 anthony.naddeo thanks again. This is far more support than I expected"><a href="#t1487896923000289" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:42:03</span>   anthony.naddeo </span><span>thanks again. This is far more support than I expected</span></div><div id="t1487897364000290" t="2017-02-24 00:49:24 aengelberg No problem"><a href="#t1487897364000290" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:49:24</span>       aengelberg </span><span>No problem</span></div><div id="t1487897370000291" t="2017-02-24 00:49:30 anthony.naddeo I think it might also make sense for me to roll comments into a rule similar to that"><a href="#t1487897370000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:49:30</span>   anthony.naddeo </span><span>I think it might also make sense for me to roll comments into a rule similar to that</span></div><div id="t1487897384000292" t="2017-02-24 00:49:44 anthony.naddeo they too can appear anywhere"><a href="#t1487897384000292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:49:44</span>   anthony.naddeo </span><span>they too can appear anywhere</span></div><div id="t1487897418000293" t="2017-02-24 00:50:18 aengelberg Agreed. Your usage of single line comments seemed kind of arbitrary though admittedly I&apos;m not familiar with Elm"><a href="#t1487897418000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:50:18</span>       aengelberg </span><span>Agreed. Your usage of single line comments seemed kind of arbitrary though admittedly I&apos;m not familiar with Elm</span></div><div id="t1487897441000294" t="2017-02-24 00:50:41 anthony.naddeo yeah its totally arbitrary. I&apos;ve punted on all inline comments atm"><a href="#t1487897441000294" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:50:41</span>   anthony.naddeo </span><span>yeah its totally arbitrary. I&apos;ve punted on all inline comments atm</span></div><div id="t1487897497000295" t="2017-02-24 00:51:37 anthony.naddeo the only challenge was modeling them in a meaningful way. I wanted to be able to convert the tree back into code and preserve the comments, or be able to include data about comments in queries against the parse tree"><a href="#t1487897497000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-02-24</span> <span class="t" onclick="H(this)">00:51:37</span>   anthony.naddeo </span><span>the only challenge was modeling them in a meaningful way. I wanted to be able to convert the tree back into code and preserve the comments, or be able to include data about comments in queries against the parse tree</span></div><div id="t1489017485000296" t="2017-03-08 23:58:05 bherrmann how does instaparse compare to ANTLR"><a href="#t1489017485000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-08</span> <span class="t" onclick="H(this)">23:58:05</span>        bherrmann </span><span>how does instaparse compare to ANTLR</span></div><div id="t1489017619000297" t="2017-03-09 00:00:19 aengelberg @bherrmann: in comparison, instaparse is slow and memory-inefficient, but far easier to use and accepts more types of grammars"><a href="#t1489017619000297" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:00:19</span>       aengelberg </span><span>@bherrmann: in comparison, instaparse is slow and memory-inefficient, but far easier to use and accepts more types of grammars</span></div><div id="t1489017644000298" t="2017-03-09 00:00:44 aengelberg I&apos;ve never actually used ANTLR so I&apos;m just guessing on both points"><a href="#t1489017644000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:00:44</span>       aengelberg </span><span>I&apos;ve never actually used ANTLR so I&apos;m just guessing on both points</span></div><div id="t1489017653000299" t="2017-03-09 00:00:53 bherrmann Ha!"><a href="#t1489017653000299" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:00:53</span>        bherrmann </span><span>Ha!</span></div><div id="t1489017702000300" t="2017-03-09 00:01:42 bherrmann We have a large oracle grammar…  in ANTLR  and I’m curious about using instaparse instead"><a href="#t1489017702000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:01:42</span>        bherrmann </span><span>We have a large oracle grammar…  in ANTLR  and I’m curious about using instaparse instead</span></div><div id="t1489017750000301" t="2017-03-09 00:02:30 aengelberg So it&apos;s already working in ANTLR?"><a href="#t1489017750000301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:02:30</span>       aengelberg </span><span>So it&apos;s already working in ANTLR?</span></div><div id="t1489017754000302" t="2017-03-09 00:02:34 aengelberg Why would you want to switch?"><a href="#t1489017754000302" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:02:34</span>       aengelberg </span><span>Why would you want to switch?</span></div><div id="t1489017915000303" t="2017-03-09 00:05:15 aengelberg (genuinely curious)"><a href="#t1489017915000303" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:05:15</span>       aengelberg </span><span>(genuinely curious)</span></div><div id="t1489018092000304" t="2017-03-09 00:08:12 bherrmann well.   This might be the wrong reason"><a href="#t1489018092000304" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:08:12</span>        bherrmann </span><span>well.   This might be the wrong reason</span></div><div id="t1489018116000305" t="2017-03-09 00:08:36 bherrmann by when we make changes to the ANTLR grammar, it generates a java file which is too big to be compiled"><a href="#t1489018116000305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:08:36</span>        bherrmann </span><span>by when we make changes to the ANTLR grammar, it generates a java file which is too big to be compiled</span></div><div id="t1489018142000306" t="2017-03-09 00:09:02 bherrmann so at the moment, we have to giggle the rules to keep the output small enough to be compiled."><a href="#t1489018142000306" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:09:02</span>        bherrmann </span><span>so at the moment, we have to giggle the rules to keep the output small enough to be compiled.</span></div><div id="t1489018150000307" t="2017-03-09 00:09:10 bherrmann It is ANTLR V3"><a href="#t1489018150000307" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:09:10</span>        bherrmann </span><span>It is ANTLR V3</span></div><div id="t1489018208000308" t="2017-03-09 00:10:08 seylerius That sounds... clumsy."><a href="#t1489018208000308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:10:08</span>        seylerius </span><span>That sounds... clumsy.</span></div><div id="t1489018293000310" t="2017-03-09 00:11:33 bherrmann well, it that old song of someone understanding how ANTLR v3 works and them leaving the company...."><a href="#t1489018293000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:11:33</span>        bherrmann </span><span>well, it that old song of someone understanding how ANTLR v3 works and them leaving the company....</span></div><div id="t1489018616000311" t="2017-03-09 00:16:56 bherrmann I’m working with a modified version of this  http://www.antlr3.org/grammar/1209225566284/PLSQL3.g"><a href="#t1489018616000311" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:16:56</span>        bherrmann </span><span>I’m working with a modified version of this </span><a href="http://www.antlr3.org/grammar/1209225566284/PLSQL3.g" target="_blank">http://www.antlr3.org/grammar/1209225566284/PLSQL3.g</a></div><div id="t1489018654000312" t="2017-03-09 00:17:34 bherrmann I should really read this  https://tomassetti.me/antlr-mega-tutorial/"><a href="#t1489018654000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:17:34</span>        bherrmann </span><span>I should really read this </span><a href="https://tomassetti.me/antlr-mega-tutorial/" target="_blank">https://tomassetti.me/antlr-mega-tutorial/</a></div><div id="t1489018690000314" t="2017-03-09 00:18:10 bherrmann although that page is ANTLR V4"><a href="#t1489018690000314" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:18:10</span>        bherrmann </span><span>although that page is ANTLR V4</span></div><div id="t1489018724000315" t="2017-03-09 00:18:44 bherrmann I’m curious if the PLSQL3.g could easily be consumed by Instaparse"><a href="#t1489018724000315" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:18:44</span>        bherrmann </span><span>I’m curious if the PLSQL3.g could easily be consumed by Instaparse</span></div><div id="t1489018845000316" t="2017-03-09 00:20:45 aengelberg The  is_sql  thing actually looks like something unique to ANTLR (not standard BNF)"><a href="#t1489018845000316" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:20:45</span>       aengelberg </span><span>The </span><code>is_sql</code><span> thing actually looks like something unique to ANTLR (not standard BNF)</span></div><div id="t1489018852000317" t="2017-03-09 00:20:52 aengelberg i.e. setting local variables"><a href="#t1489018852000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:20:52</span>       aengelberg </span><span>i.e. setting local variables</span></div><div id="t1489019030000318" t="2017-03-09 00:23:50 bherrmann yea, that is weird"><a href="#t1489019030000318" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:23:50</span>        bherrmann </span><span>yea, that is weird</span></div><div id="t1489019064000319" t="2017-03-09 00:24:24 bherrmann we dont use the is_sql in our copy."><a href="#t1489019064000319" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:24:24</span>        bherrmann </span><span>we dont use the is_sql in our copy.</span></div><div id="t1489019298000320" t="2017-03-09 00:28:18 bherrmann so the grammar has about 1600 lines (ours has around 2k)…   They appear otherwise very similar"><a href="#t1489019298000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-09</span> <span class="t" onclick="H(this)">00:28:18</span>        bherrmann </span><span>so the grammar has about 1600 lines (ours has around 2k)…   They appear otherwise very similar</span></div><div id="t1489531129935683" t="2017-03-14 22:38:49 nathansmutz I&apos;m sure this is asked a lot; but I&apos;m not figuring out how to search it. 
Is there a standard way to get instaparse to pick grammar-fitting things out of a mess of other text? 

In text-mining, I&apos;ve used regular expressions to carve out the bits I want to parse; but that&apos;s pretty redundant.  Starting and ending your grammar with an &lt;anything&gt; pattern  is slow; and, I&apos;m sure, makes instaparser grind away on unnecessary work."><a href="#t1489531129935683" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-14</span> <span class="t" onclick="H(this)">22:38:49</span>      nathansmutz </span><span>I&apos;m sure this is asked a lot; but I&apos;m not figuring out how to search it. 
Is there a standard way to get instaparse to pick grammar-fitting things out of a mess of other text? 

In text-mining, I&apos;ve used regular expressions to carve out the bits I want to parse; but that&apos;s pretty redundant.  Starting and ending your grammar with an &lt;anything&gt; pattern  is slow; and, I&apos;m sure, makes instaparser grind away on unnecessary work.</span></div><div id="t1489599139206363" t="2017-03-15 17:32:19 aengelberg Instaparse only works on &quot;full parses&quot;, so adding  &lt;anything&gt;  is the only way to go."><a href="#t1489599139206363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:32:19</span>       aengelberg </span><span>Instaparse only works on &quot;full parses&quot;, so adding </span><code>&lt;anything&gt;</code><span> is the only way to go.</span></div><div id="t1489599240251176" t="2017-03-15 17:34:00 aengelberg @nathansmutz if adding  &lt;#&apos;[\\s\\S]&apos;+&gt;  (anything) is too slow, you could maybe  (str/replace #&quot;things you definitely don&apos;t want to parse&quot; &quot;&quot;)  beforehand"><a href="#t1489599240251176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:34:00</span>       aengelberg </span><span>@nathansmutz if adding </span><code>&lt;#&apos;[\\s\\S]&apos;+&gt;</code><span> (anything) is too slow, you could maybe </span><code>(str/replace #&quot;things you definitely don&apos;t want to parse&quot; &quot;&quot;)</code><span> beforehand</span></div><div id="t1489599264262420" t="2017-03-15 17:34:24 aengelberg so instaparse isn&apos;t churning through too much garbage"><a href="#t1489599264262420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-15</span> <span class="t" onclick="H(this)">17:34:24</span>       aengelberg </span><span>so instaparse isn&apos;t churning through too much garbage</span></div><div id="t1489768017014507" t="2017-03-17 16:26:57 nathansmutz Thanks @aengelberg. I wonder if my &lt;anything&gt; was more complicated than that when I tried it.  
Hmm,  there may be a useful project in &quot;parsing&quot; instaparse code into regex suitable for grabbing parsable chunks.  I&apos;m pretty sure instaparse is generating regex on the backend; but the capture-groups would need some editing."><a href="#t1489768017014507" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">16:26:57</span>      nathansmutz </span><span>Thanks @aengelberg. I wonder if my &lt;anything&gt; was more complicated than that when I tried it.  
Hmm,  there may be a useful project in &quot;parsing&quot; instaparse code into regex suitable for grabbing parsable chunks.  I&apos;m pretty sure instaparse is generating regex on the backend; but the capture-groups would need some editing.</span></div><div id="t1489768172077518" t="2017-03-17 16:29:32 hiredman that is not correct, instaparse parses context free langauges, which regexes cannot do"><a href="#t1489768172077518" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">16:29:32</span>         hiredman </span><span>that is not correct, instaparse parses context free langauges, which regexes cannot do</span></div><div id="t1489768213094398" t="2017-03-17 16:30:13 hiredman (regular languages are a subset of context free languages)"><a href="#t1489768213094398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">16:30:13</span>         hiredman </span><span>(regular languages are a subset of context free languages)</span></div><div id="t1489770671083726" t="2017-03-17 17:11:11 nathansmutz @hiredman  I think I see what you mean.  The problems I&apos;ve been solving are probably simple enough that regex could define the same patterns.   I suppose, getting into some real recursive stuff, it&apos;d be less easy to go from instaparse-code to regex that says &quot;grab a block of text that looks like this&quot;."><a href="#t1489770671083726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-03-17</span> <span class="t" onclick="H(this)">17:11:11</span>      nathansmutz </span><span>@hiredman  I think I see what you mean.  The problems I&apos;ve been solving are probably simple enough that regex could define the same patterns.   I suppose, getting into some real recursive stuff, it&apos;d be less easy to go from instaparse-code to regex that says &quot;grab a block of text that looks like this&quot;.</span></div><div id="t1491252554936237" t="2017-04-03 20:49:14 wistb @aengelberg , I am trying instaparse against an IETF abnf ( https://tools.ietf.org/html/rfc7950  ). I am getting the error Parse error at line 92, column 44:
                         &lt; URI in RFC 3986 &gt;"><a href="#t1491252554936237" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">20:49:14</span>            wistb </span><span>@aengelberg , I am trying instaparse against an IETF abnf (</span><a href="https://tools.ietf.org/html/rfc7950" target="_blank">https://tools.ietf.org/html/rfc7950</a><span> ). I am getting the error Parse error at line 92, column 44:
                         &lt; URI in RFC 3986 &gt;</span></div><div id="t1491252596950845" t="2017-04-03 20:49:56 wistb and this is what I see at that location"><a href="#t1491252596950845" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">20:49:56</span>            wistb </span><span>and this is what I see at that location</span></div><div id="t1491252597951333" t="2017-04-03 20:49:57 wistb uri-str             = &lt; a string that matches the rule &gt;
                         &lt; URI in RFC 3986 &gt;"><a href="#t1491252597951333" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">20:49:57</span>            wistb </span><span>uri-str             = &lt; a string that matches the rule &gt;
                         &lt; URI in RFC 3986 &gt;</span></div><div id="t1491252637965820" t="2017-04-03 20:50:37 aengelberg &lt; a string that matches the rule &gt;  isn&apos;t valid BNF. In that spec, it is used for prose that can only be understood by humans."><a href="#t1491252637965820" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">20:50:37</span>       aengelberg </span><code>&lt; a string that matches the rule &gt;</code><span> isn&apos;t valid BNF. In that spec, it is used for prose that can only be understood by humans.</span></div><div id="t1491252661974250" t="2017-04-03 20:51:01 aengelberg In Instaparse we use  &lt;abc&gt;  completely differently, used to refer to the &quot;hidden&quot; version of the non-terminal  abc ."><a href="#t1491252661974250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">20:51:01</span>       aengelberg </span><span>In Instaparse we use </span><code>&lt;abc&gt;</code><span> completely differently, used to refer to the &quot;hidden&quot; version of the non-terminal </span><code>abc</code><span>.</span></div><div id="t1491253201169101" t="2017-04-03 21:00:01 wistb thank you @aengelberg . I made a change and the parsing moved forward. Now, I am getting an error (in the last few pages of the grammar file, So, I am hoping the grammar is holding up well so far)"><a href="#t1491253201169101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:00:01</span>            wistb </span><span>thank you @aengelberg . I made a change and the parsing moved forward. Now, I am getting an error (in the last few pages of the grammar file, So, I am hoping the grammar is holding up well so far)</span></div><div id="t1491253203170365" t="2017-04-03 21:00:03 wistb CompilerException java.lang.RuntimeException: Error parsing grammar specification:
Parse error at line 915, column 32:
   action-keyword           = %s&quot;action&quot;"><a href="#t1491253203170365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:00:03</span>            wistb </span><span>CompilerException java.lang.RuntimeException: Error parsing grammar specification:
Parse error at line 915, column 32:
   action-keyword           = %s&quot;action&quot;</span></div><div id="t1491253228180093" t="2017-04-03 21:00:28 wistb I think the ietf doc wants to use &apos;non case sensitive&apos; form."><a href="#t1491253228180093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:00:28</span>            wistb </span><span>I think the ietf doc wants to use &apos;non case sensitive&apos; form.</span></div><div id="t1491254693657771" t="2017-04-03 21:24:53 aengelberg I don&apos;t think  %s  is valid ABNF per the spec, though I see what it&apos;s getting at, and it wouldn&apos;t be too hard to implement."><a href="#t1491254693657771" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:24:53</span>       aengelberg </span><span>I don&apos;t think </span><code>%s</code><span> is valid ABNF per the spec, though I see what it&apos;s getting at, and it wouldn&apos;t be too hard to implement.</span></div><div id="t1491254794689382" t="2017-04-03 21:26:34 aengelberg If you&apos;re ok with case insensitive, you could just do  &quot;action&quot;"><a href="#t1491254794689382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:26:34</span>       aengelberg </span><span>If you&apos;re ok with case insensitive, you could just do </span><code>&quot;action&quot;</code></div><div id="t1491254801691357" t="2017-04-03 21:26:41 wistb @aengelberg for now, I removed %s and moved on. It is getting close to the end of the file, but, I have this error :"><a href="#t1491254801691357" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:26:41</span>            wistb </span><span>@aengelberg for now, I removed %s and moved on. It is getting close to the end of the file, but, I have this error :</span></div><div id="t1491254806692955" t="2017-04-03 21:26:46 aengelberg If you really want case sensitive, you could translate it to decimal or hex and use  %d  /  %x"><a href="#t1491254806692955" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:26:46</span>       aengelberg </span><span>If you really want case sensitive, you could translate it to decimal or hex and use </span><code>%d</code><span> / </span><code>%x</code></div><div id="t1491254818696414" t="2017-04-03 21:26:58 aengelberg You&apos;re going to want  :input-format :abnf  if you haven&apos;t set that already btw"><a href="#t1491254818696414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:26:58</span>       aengelberg </span><span>You&apos;re going to want </span><code>:input-format :abnf</code><span> if you haven&apos;t set that already btw</span></div><div id="t1491254921727778" t="2017-04-03 21:28:41 wistb CompilerException java.lang.RuntimeException: a occurs on the right-hand side of your grammar, but not on the left,"><a href="#t1491254921727778" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:28:41</span>            wistb </span><span>CompilerException java.lang.RuntimeException: a occurs on the right-hand side of your grammar, but not on the left,</span></div><div id="t1491254956738141" t="2017-04-03 21:29:16 wistb I am invoking , like so,"><a href="#t1491254956738141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:29:16</span>            wistb </span><span>I am invoking , like so,</span></div><div id="t1491254957738418" t="2017-04-03 21:29:17 wistb (def my-parser
  (insta/parser ( http://clojure.java.io/resource  &quot;my.abnf&quot;)
                :input-format :abnf :trace true))"><a href="#t1491254957738418" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:29:17</span>            wistb </span><span>(def my-parser
  (insta/parser (</span><a href="http://clojure.java.io/resource" target="_blank">http://clojure.java.io/resource</a><span> &quot;my.abnf&quot;)
                :input-format :abnf :trace true))</span></div><div id="t1491255021758481" t="2017-04-03 21:30:21 wistb But, this time, I don&apos;t know which particular text is the culprit."><a href="#t1491255021758481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:30:21</span>            wistb </span><span>But, this time, I don&apos;t know which particular text is the culprit.</span></div><div id="t1491255320849012" t="2017-04-03 21:35:20 aengelberg hmm."><a href="#t1491255320849012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:35:20</span>       aengelberg </span><span>hmm.</span></div><div id="t1491255332852542" t="2017-04-03 21:35:32 aengelberg Only thing I can think of is there is a loose  a  or  A  somewhere..."><a href="#t1491255332852542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:35:32</span>       aengelberg </span><span>Only thing I can think of is there is a loose </span><code>a</code><span> or </span><code>A</code><span> somewhere...</span></div><div id="t1491255369862964" t="2017-04-03 21:36:09 aengelberg Or it&apos;s one of the  &lt; a string that matches the rule &gt; "><a href="#t1491255369862964" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:36:09</span>       aengelberg </span><span>Or it&apos;s one of the </span><code>&lt; a string that matches the rule &gt; </code></div><div id="t1491255376865435" t="2017-04-03 21:36:16 aengelberg and the  a  is the first of many invalid things in that expression."><a href="#t1491255376865435" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:36:16</span>       aengelberg </span><span>and the </span><code>a</code><span> is the first of many invalid things in that expression.</span></div><div id="t1491255434882067" t="2017-04-03 21:37:14 wistb Let me see. I removed those kind of usages. May be there is still something lurking .."><a href="#t1491255434882067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:37:14</span>            wistb </span><span>Let me see. I removed those kind of usages. May be there is still something lurking ..</span></div><div id="t1491255692956121" t="2017-04-03 21:41:32 wistb @aengelberg .. great . that is the issue. one such usage got left out. I changed it, now, that parsing is completing without error.  Thank you."><a href="#t1491255692956121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:41:32</span>            wistb </span><span>@aengelberg .. great . that is the issue. one such usage got left out. I changed it, now, that parsing is completing without error.  Thank you.</span></div><div id="t1491255700958275" t="2017-04-03 21:41:40 aengelberg sweet"><a href="#t1491255700958275" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:41:40</span>       aengelberg </span><span>sweet</span></div><div id="t1491255702958798" t="2017-04-03 21:41:42 aengelberg np"><a href="#t1491255702958798" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:41:42</span>       aengelberg </span><span>np</span></div><div id="t1491255853000564" t="2017-04-03 21:44:13 wistb I am not sure about the change I made (I dont know much about grammars), though ..

I changed the text from

yang-version-arg-str = &lt; a string that matches the rule &gt;
                       &lt; yang-version-arg &gt;
to

yang-version-arg-str = yang-version-arg
yang-version-arg    = &quot;1.1&quot;"><a href="#t1491255853000564" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:44:13</span>            wistb </span><span>I am not sure about the change I made (I dont know much about grammars), though ..

I changed the text from

yang-version-arg-str = &lt; a string that matches the rule &gt;
                       &lt; yang-version-arg &gt;
to

yang-version-arg-str = yang-version-arg
yang-version-arg    = &quot;1.1&quot;</span></div><div id="t1491255905015379" t="2017-04-03 21:45:05 wistb if that is correct, I wonder why the ietf folks did not do the same. As it is , the ietf abnf is not parseable, right."><a href="#t1491255905015379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:45:05</span>            wistb </span><span>if that is correct, I wonder why the ietf folks did not do the same. As it is , the ietf abnf is not parseable, right.</span></div><div id="t1491256143081736" t="2017-04-03 21:49:03 aengelberg I think some grammars are written with the intention of helping humans to write programs, rather than to be fed to parser generators like Instaparse."><a href="#t1491256143081736" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:49:03</span>       aengelberg </span><span>I think some grammars are written with the intention of helping humans to write programs, rather than to be fed to parser generators like Instaparse.</span></div><div id="t1491256154084877" t="2017-04-03 21:49:14 aengelberg So they don&apos;t feel the need to exactly follow the ABNF spec."><a href="#t1491256154084877" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-03</span> <span class="t" onclick="H(this)">21:49:14</span>       aengelberg </span><span>So they don&apos;t feel the need to exactly follow the ABNF spec.</span></div><div id="t1492212890058558" t="2017-04-14 23:34:50 gmercer Hi - I was trying to use instaparse (clone from github) with lumo (or planck) 
I hit some issues (they are in the lumo channel) 
I am happy to cross-post but I thought it may be polite to not do so initially"><a href="#t1492212890058558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-14</span> <span class="t" onclick="H(this)">23:34:50</span>          gmercer </span><span>Hi - I was trying to use instaparse (clone from github) with lumo (or planck) 
I hit some issues (they are in the lumo channel) 
I am happy to cross-post but I thought it may be polite to not do so initially</span></div><div id="t1492215289391363" t="2017-04-15 00:14:49 aengelberg Instaparse is known to be incompatible with bootstrapped cljs so I&apos;m not surprised :("><a href="#t1492215289391363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:14:49</span>       aengelberg </span><span>Instaparse is known to be incompatible with bootstrapped cljs so I&apos;m not surprised :(</span></div><div id="t1492215314394451" t="2017-04-15 00:15:14 aengelberg Specifically, the cljs version currently uses clj to do macro-time compile steps"><a href="#t1492215314394451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:15:14</span>       aengelberg </span><span>Specifically, the cljs version currently uses clj to do macro-time compile steps</span></div><div id="t1492215364400784" t="2017-04-15 00:16:04 aengelberg In theory, it doesn&apos;t have to do that logic on clj, but I don&apos;t know of an easy way to use reader conditionals, etc to write cross-compatible macros as opposed to functions"><a href="#t1492215364400784" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:16:04</span>       aengelberg </span><span>In theory, it doesn&apos;t have to do that logic on clj, but I don&apos;t know of an easy way to use reader conditionals, etc to write cross-compatible macros as opposed to functions</span></div><div id="t1492215725445022" t="2017-04-15 00:22:05 gmercer cross compatible macros  - thanks, now I have a focus .. soon instaparse will be bootstrapped cljs compatible  😃"><a href="#t1492215725445022" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:22:05</span>          gmercer </span><code>cross compatible macros</code><span> - thanks, now I have a focus .. soon instaparse will be bootstrapped cljs compatible </span><b>😃</b></div><div id="t1492216030481492" t="2017-04-15 00:27:10 gmercer although the earlier issue regarding the reader eagerly compiling the regex would add a little bit of hairiness  😞"><a href="#t1492216030481492" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:27:10</span>          gmercer </span><span>although the earlier issue regarding the reader eagerly compiling the regex would add a little bit of hairiness </span><b>😞</b></div><div id="t1492216108490994" t="2017-04-15 00:28:28 aengelberg Let me know if you need any assistance / explanations for some of the instaparse code"><a href="#t1492216108490994" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:28:28</span>       aengelberg </span><span>Let me know if you need any assistance / explanations for some of the instaparse code</span></div><div id="t1492216118492342" t="2017-04-15 00:28:38 gmercer cheers"><a href="#t1492216118492342" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-04-15</span> <span class="t" onclick="H(this)">00:28:38</span>          gmercer </span><span>cheers</span></div><div id="t1496753188033584" t="2017-06-06 12:46:28 wilkerlucio hello people, I&apos;m stuck with a instaparse rule, maybe someone here can help me out  🙂"><a href="#t1496753188033584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:46:28</span>      wilkerlucio </span><span>hello people, I&apos;m stuck with a instaparse rule, maybe someone here can help me out </span><b>🙂</b></div><div id="t1496753196035452" t="2017-06-06 12:46:36 wilkerlucio I&apos;m writing a parser for Javascript regexes"><a href="#t1496753196035452" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:46:36</span>      wilkerlucio </span><span>I&apos;m writing a parser for Javascript regexes</span></div><div id="t1496753200036584" t="2017-06-06 12:46:40 wilkerlucio this is the current grammar:"><a href="#t1496753200036584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:46:40</span>      wilkerlucio </span><span>this is the current grammar:</span></div><div id="t1496753209038868" t="2017-06-06 12:46:49 wilkerlucio Regex = &lt;&apos;/&apos;&gt; Alternation &lt;&apos;/&apos;&gt; MatchFlag*

Alternation = Concatenation (&lt;&apos;|&apos;&gt; Concatenation)*

Concatenation = SuffixedExpr*

SuffixedExpr = SingleExpr Suffix?
SingleExpr = BaseExpr | ParenthesizedExpr
ParenthesizedExpr = &lt;&apos;(&apos;&gt; GroupFlags? Alternation &lt;&apos;)&apos;&gt;
Suffix = (Optional | Positive | NonNegative | CurlyRepetition) Quantifier?
Optional = &lt;&apos;?&apos;&gt;
Positive = &lt;&apos;+&apos;&gt;
NonNegative = &lt;&apos;*&apos;&gt;
CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; (&lt;&apos;,&apos;&gt; #&quot;\d+&quot; ?) ? &lt;&apos;}&apos;&gt;
Quantifier = &apos;?&apos; | &apos;+&apos;
BaseExpr = CharExpr | LiteralChar | Anchor | BackReference

Anchor = &apos;^&apos; | &apos;$&apos; | &apos;\\&apos; #&quot;[bB]&quot;
LiteralChar = PlainChar | EscapedChar

BackReference = &lt;&apos;\\&apos;&gt; #&quot;[1-9][0-9]*&quot;

PlainChar = #&quot;[^.|\\+*$^\[(){?]&quot;
CharExpr = Dot | LiteralChar | BCC
Dot = &apos;.&apos;

BCC = &lt;&apos;[&apos;&gt; BCCUnionLeft? &lt;&apos;]&apos;&gt;

BCCUnionLeft = BCCNegation? BCCElemBase*

BCCNegation = &apos;^&apos;

BCCElemBase = BCCCharNonRange | SpecialCharClass | BCCRange | BCC
BCCRangeRightable = BCCCharEndRange | SpecialCharClass
BCCRange = BCCChar &lt;&apos;-&apos;&gt; BCCCharEndRange
BCCRangeWithBracket = &lt;&apos;]-&apos;&gt; BCCCharEndRange
BCCCharNonRange = BCCChar !(&apos;-&apos; BCCRangeRightable)
BCCChar = BCCPlainChar | EscapedChar
BCCCharEndRange = BCCPlainChar | EscapedChar
BCCPlainChar = #&quot;[^\]\[\\]&quot; | &apos;\\b&apos;

EscapedChar = SpecialCharClass | NormalSlashedCharacters | ControlChar | HexChar | BasicEscapedChar

HexChar = ShortHexChar | MediumHexChar | LongHexChar | VeryLongHexChar
ShortHexChar = &lt;&apos;\\x&apos;&gt; #&apos;[0-9a-fA-F]{2}&apos;
MediumHexChar = &lt;&apos;\\u&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos;
LongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos; &lt;&apos;}&apos;&gt;
VeryLongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{6}&apos; &lt;&apos;}&apos;&gt;
BasicEscapedChar = &lt;&apos;\\&apos;&gt; #&quot;[\s\S]&quot;
SpecialCharClass = &lt;&apos;\\&apos;&gt; #&quot;[dDwWsSv0]&quot;

NormalSlashedCharacters = #&quot;\\[tnrf]&quot;

ControlChar = &lt;&apos;\\c&apos;&gt; #&quot;[A-Z]&quot;

(** FLAGS **)
GroupFlags = NonCapturingMatchFlags
           | PositiveLookAheadFlag
           | NegativeLookAheadFlag

NonCapturingMatchFlags = &lt;&apos;?&apos;&gt; !&apos;)&apos; &lt;&apos;:&apos;&gt;
PositiveLookAheadFlag = &lt;&apos;?=&apos;&gt;
NegativeLookAheadFlag = &lt;&apos;?!&apos;&gt;

MatchFlag = #&quot;[gimuy]&quot;
"><a href="#t1496753209038868" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:46:49</span>      wilkerlucio </span><pre>Regex = &lt;&apos;/&apos;&gt; Alternation &lt;&apos;/&apos;&gt; MatchFlag*

Alternation = Concatenation (&lt;&apos;|&apos;&gt; Concatenation)*

Concatenation = SuffixedExpr*

SuffixedExpr = SingleExpr Suffix?
SingleExpr = BaseExpr | ParenthesizedExpr
ParenthesizedExpr = &lt;&apos;(&apos;&gt; GroupFlags? Alternation &lt;&apos;)&apos;&gt;
Suffix = (Optional | Positive | NonNegative | CurlyRepetition) Quantifier?
Optional = &lt;&apos;?&apos;&gt;
Positive = &lt;&apos;+&apos;&gt;
NonNegative = &lt;&apos;*&apos;&gt;
CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; (&lt;&apos;,&apos;&gt; #&quot;\d+&quot; ?) ? &lt;&apos;}&apos;&gt;
Quantifier = &apos;?&apos; | &apos;+&apos;
BaseExpr = CharExpr | LiteralChar | Anchor | BackReference

Anchor = &apos;^&apos; | &apos;$&apos; | &apos;\\&apos; #&quot;[bB]&quot;
LiteralChar = PlainChar | EscapedChar

BackReference = &lt;&apos;\\&apos;&gt; #&quot;[1-9][0-9]*&quot;

PlainChar = #&quot;[^.|\\+*$^\[(){?]&quot;
CharExpr = Dot | LiteralChar | BCC
Dot = &apos;.&apos;

BCC = &lt;&apos;[&apos;&gt; BCCUnionLeft? &lt;&apos;]&apos;&gt;

BCCUnionLeft = BCCNegation? BCCElemBase*

BCCNegation = &apos;^&apos;

BCCElemBase = BCCCharNonRange | SpecialCharClass | BCCRange | BCC
BCCRangeRightable = BCCCharEndRange | SpecialCharClass
BCCRange = BCCChar &lt;&apos;-&apos;&gt; BCCCharEndRange
BCCRangeWithBracket = &lt;&apos;]-&apos;&gt; BCCCharEndRange
BCCCharNonRange = BCCChar !(&apos;-&apos; BCCRangeRightable)
BCCChar = BCCPlainChar | EscapedChar
BCCCharEndRange = BCCPlainChar | EscapedChar
BCCPlainChar = #&quot;[^\]\[\\]&quot; | &apos;\\b&apos;

EscapedChar = SpecialCharClass | NormalSlashedCharacters | ControlChar | HexChar | BasicEscapedChar

HexChar = ShortHexChar | MediumHexChar | LongHexChar | VeryLongHexChar
ShortHexChar = &lt;&apos;\\x&apos;&gt; #&apos;[0-9a-fA-F]{2}&apos;
MediumHexChar = &lt;&apos;\\u&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos;
LongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos; &lt;&apos;}&apos;&gt;
VeryLongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{6}&apos; &lt;&apos;}&apos;&gt;
BasicEscapedChar = &lt;&apos;\\&apos;&gt; #&quot;[\s\S]&quot;
SpecialCharClass = &lt;&apos;\\&apos;&gt; #&quot;[dDwWsSv0]&quot;

NormalSlashedCharacters = #&quot;\\[tnrf]&quot;

ControlChar = &lt;&apos;\\c&apos;&gt; #&quot;[A-Z]&quot;

(** FLAGS **)
GroupFlags = NonCapturingMatchFlags
           | PositiveLookAheadFlag
           | NegativeLookAheadFlag

NonCapturingMatchFlags = &lt;&apos;?&apos;&gt; !&apos;)&apos; &lt;&apos;:&apos;&gt;
PositiveLookAheadFlag = &lt;&apos;?=&apos;&gt;
NegativeLookAheadFlag = &lt;&apos;?!&apos;&gt;

MatchFlag = #&quot;[gimuy]&quot;
</pre></div><div id="t1496753319067072" t="2017-06-06 12:48:39 wilkerlucio I would like it to parse  { , as a plain char, currently on the  PlainChar  definition this char is excluded to allow for the  CurlyRepetition"><a href="#t1496753319067072" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:48:39</span>      wilkerlucio </span><span>I would like it to parse </span><code>{</code><span>, as a plain char, currently on the </span><code>PlainChar</code><span> definition this char is excluded to allow for the </span><code>CurlyRepetition</code></div><div id="t1496753327069241" t="2017-06-06 12:48:47 wilkerlucio I&apos;m probably missing something"><a href="#t1496753327069241" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:48:47</span>      wilkerlucio </span><span>I&apos;m probably missing something</span></div><div id="t1496753341072898" t="2017-06-06 12:49:01 wilkerlucio but if I allow the  {  at  PlainChar"><a href="#t1496753341072898" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:49:01</span>      wilkerlucio </span><span>but if I allow the </span><code>{</code><span> at </span><code>PlainChar</code></div><div id="t1496753355076763" t="2017-06-06 12:49:15 wilkerlucio then when I try to do:  a{2}"><a href="#t1496753355076763" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:49:15</span>      wilkerlucio </span><span>then when I try to do: </span><code>a{2}</code></div><div id="t1496753386084308" t="2017-06-06 12:49:46 wilkerlucio I was expect it to go into  SuffixedExpr  and match a  PlainChar  followed by a  Suffix  that would be a  CurlyRepetition"><a href="#t1496753386084308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:49:46</span>      wilkerlucio </span><span>I was expect it to go into </span><code>SuffixedExpr</code><span> and match a </span><code>PlainChar</code><span> followed by a </span><code>Suffix</code><span> that would be a </span><code>CurlyRepetition</code></div><div id="t1496753411090777" t="2017-06-06 12:50:11 wilkerlucio but instead seems like it&apos;s not matching the suffix, and instead matches a series of plain chars"><a href="#t1496753411090777" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:50:11</span>      wilkerlucio </span><span>but instead seems like it&apos;s not matching the suffix, and instead matches a series of plain chars</span></div><div id="t1496753731177168" t="2017-06-06 12:55:31 wilkerlucio sorry the noise, I got a much simplified version now, by this grammar:"><a href="#t1496753731177168" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:55:31</span>      wilkerlucio </span><span>sorry the noise, I got a much simplified version now, by this grammar:</span></div><div id="t1496753734178031" t="2017-06-06 12:55:34 wilkerlucio Concatenation = SuffixedExpr*

SuffixedExpr = LiteralChar CurlyRepetition?

CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; &lt;&apos;}&apos;&gt;

LiteralChar = #&quot;.&quot;
"><a href="#t1496753734178031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:55:34</span>      wilkerlucio </span><pre>Concatenation = SuffixedExpr*

SuffixedExpr = LiteralChar CurlyRepetition?

CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; &lt;&apos;}&apos;&gt;

LiteralChar = #&quot;.&quot;
</pre></div><div id="t1496753782191481" t="2017-06-06 12:56:22 wilkerlucio I expected it to match  &quot;a{2}&quot;  as a  LiteralChar  followed by a  CurlyRepetition , but instead it matches as  [:Concatenation [:SuffixedExpr [:LiteralChar &quot;a&quot;]] [:SuffixedExpr [:LiteralChar &quot;{&quot;]] [:SuffixedExpr [:LiteralChar &quot;2&quot;]] [:SuffixedExpr [:LiteralChar &quot;}&quot;]]]"><a href="#t1496753782191481" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:56:22</span>      wilkerlucio </span><span>I expected it to match </span><code>&quot;a{2}&quot;</code><span> as a </span><code>LiteralChar</code><span> followed by a </span><code>CurlyRepetition</code><span>, but instead it matches as </span><code>[:Concatenation [:SuffixedExpr [:LiteralChar &quot;a&quot;]] [:SuffixedExpr [:LiteralChar &quot;{&quot;]] [:SuffixedExpr [:LiteralChar &quot;2&quot;]] [:SuffixedExpr [:LiteralChar &quot;}&quot;]]]</code></div><div id="t1496753822202234" t="2017-06-06 12:57:02 wilkerlucio how can make it try force match the  CurlyRepetition  before stepping a level up and matching more literal chars?"><a href="#t1496753822202234" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">12:57:02</span>      wilkerlucio </span><span>how can make it try force match the </span><code>CurlyRepetition</code><span> before stepping a level up and matching more literal chars?</span></div><div id="t1496764842435558" t="2017-06-06 16:00:42 aengelberg @wilkerlucio maybe ordered choice  /  in instaparse might help here?"><a href="#t1496764842435558" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">16:00:42</span>       aengelberg </span><span>@wilkerlucio maybe ordered choice </span><code>/</code><span> in instaparse might help here?</span></div><div id="t1496764953481808" t="2017-06-06 16:02:33 aengelberg so you want  a{2  to parse as 3 PlainChars, but  a{2}  to parse as a PlainChar followed by a CurlyRepetition?"><a href="#t1496764953481808" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">16:02:33</span>       aengelberg </span><span>so you want </span><code>a{2</code><span> to parse as 3 PlainChars, but </span><code>a{2}</code><span> to parse as a PlainChar followed by a CurlyRepetition?</span></div><div id="t1496770461513188" t="2017-06-06 17:34:21 wilkerlucio @aengelberg yes, with some help I was able to figure it out, here is a way to handle it:"><a href="#t1496770461513188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:34:21</span>      wilkerlucio </span><span>@aengelberg yes, with some help I was able to figure it out, here is a way to handle it:</span></div><div id="t1496770463513971" t="2017-06-06 17:34:23 wilkerlucio Concatenation = SuffixedExpr*

SuffixedExpr = LiteralChar CurlyRepetition? / AnyLiteralChar

CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; &lt;&apos;}&apos;&gt;

LiteralChar = #&quot;[^{]&quot;
AnyLiteralChar = #&quot;.&quot;"><a href="#t1496770463513971" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:34:23</span>      wilkerlucio </span><pre>Concatenation = SuffixedExpr*

SuffixedExpr = LiteralChar CurlyRepetition? / AnyLiteralChar

CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; &lt;&apos;}&apos;&gt;

LiteralChar = #&quot;[^{]&quot;
AnyLiteralChar = #&quot;.&quot;</pre></div><div id="t1496770489523743" t="2017-06-06 17:34:49 wilkerlucio I had to restrict the first one a little and have a second more permissive rule, now it parses the way I was expecting  🙂"><a href="#t1496770489523743" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:34:49</span>      wilkerlucio </span><span>I had to restrict the first one a little and have a second more permissive rule, now it parses the way I was expecting </span><b>🙂</b></div><div id="t1496770555547653" t="2017-06-06 17:35:55 aengelberg I suggest you take away the  ?  after  CurlyRepetition , to make the grammar unambiguous (improving performance)."><a href="#t1496770555547653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:35:55</span>       aengelberg </span><span>I suggest you take away the </span><code>?</code><span> after </span><code>CurlyRepetition</code><span>, to make the grammar unambiguous (improving performance).</span></div><div id="t1496770610567211" t="2017-06-06 17:36:50 wilkerlucio @aengelberg but it is needed there, because the curlyrepetition is optional"><a href="#t1496770610567211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:36:50</span>      wilkerlucio </span><span>@aengelberg but it is needed there, because the curlyrepetition is optional</span></div><div id="t1496770636576619" t="2017-06-06 17:37:16 wilkerlucio ah, I think I got you said, it would match anyway"><a href="#t1496770636576619" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:37:16</span>      wilkerlucio </span><span>ah, I think I got you said, it would match anyway</span></div><div id="t1496770644579828" t="2017-06-06 17:37:24 wilkerlucio in my real case its a bit more complicated"><a href="#t1496770644579828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:37:24</span>      wilkerlucio </span><span>in my real case its a bit more complicated</span></div><div id="t1496770659584812" t="2017-06-06 17:37:39 wilkerlucio and the latest AnyLiteral actually just matches the  { , otherwise other complications arise"><a href="#t1496770659584812" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:37:39</span>      wilkerlucio </span><span>and the latest AnyLiteral actually just matches the </span><code>{</code><span>, otherwise other complications arise</span></div><div id="t1496770677590912" t="2017-06-06 17:37:57 wilkerlucio parsing regex is pretty annoying to be honest -.-"><a href="#t1496770677590912" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:37:57</span>      wilkerlucio </span><span>parsing regex is pretty annoying to be honest -.-</span></div><div id="t1496770684593433" t="2017-06-06 17:38:04 aengelberg lol yeah"><a href="#t1496770684593433" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:38:04</span>       aengelberg </span><span>lol yeah</span></div><div id="t1496770701599856" t="2017-06-06 17:38:21 aengelberg also, something to watch out for:  .  does not include the newline character"><a href="#t1496770701599856" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:38:21</span>       aengelberg </span><span>also, something to watch out for: </span><code>.</code><span> does not include the newline character</span></div><div id="t1496770713604146" t="2017-06-06 17:38:33 aengelberg but  [^{]  does"><a href="#t1496770713604146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:38:33</span>       aengelberg </span><span>but </span><code>[^{]</code><span> does</span></div><div id="t1496770734611626" t="2017-06-06 17:38:54 wilkerlucio yeah, when I need everything I like to use something like  [\s\S]"><a href="#t1496770734611626" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:38:54</span>      wilkerlucio </span><span>yeah, when I need everything I like to use something like </span><code>[\s\S]</code></div><div id="t1496770737612823" t="2017-06-06 17:38:57 wilkerlucio so it matches everything"><a href="#t1496770737612823" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:38:57</span>      wilkerlucio </span><span>so it matches everything</span></div><div id="t1496770748616498" t="2017-06-06 17:39:08 aengelberg that’s exactly what I was going to suggest"><a href="#t1496770748616498" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:39:08</span>       aengelberg </span><span>that’s exactly what I was going to suggest</span></div><div id="t1496770756619531" t="2017-06-06 17:39:16 wilkerlucio in case you wonder, this is what my current grammar looks like (for parsing JS RegExp):"><a href="#t1496770756619531" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:39:16</span>      wilkerlucio </span><span>in case you wonder, this is what my current grammar looks like (for parsing JS RegExp):</span></div><div id="t1496770760621292" t="2017-06-06 17:39:20 wilkerlucio Regex = &lt;&apos;/&apos;&gt; Alternation &lt;&apos;/&apos;&gt; MatchFlag*

Alternation = Concatenation (&lt;&apos;|&apos;&gt; Concatenation)*

Concatenation = SuffixedExpr*

SuffixedExpr = SingleExpr Suffix? / CurlyRepetition / LiteralSpecialChar
SingleExpr = BaseExpr | ParenthesizedExpr
ParenthesizedExpr = &lt;&apos;(&apos;&gt; GroupFlags? Alternation &lt;&apos;)&apos;&gt;
Suffix = (Optional | Positive | NonNegative | CurlyRepetition) Quantifier?
Optional = &lt;&apos;?&apos;&gt;
Positive = &lt;&apos;+&apos;&gt;
NonNegative = &lt;&apos;*&apos;&gt;
CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; (&lt;&apos;,&apos;&gt; #&quot;\d+&quot; ?) ? &lt;&apos;}&apos;&gt;
Quantifier = &apos;?&apos; | &apos;+&apos;
BaseExpr = CharExpr | LiteralChar | Anchor | BackReference

Anchor = &apos;^&apos; | &apos;$&apos; | &apos;\\&apos; #&quot;[bB]&quot;
LiteralChar = PlainChar | EscapedChar
LiteralSpecialChar = &apos;{&apos;

BackReference = &lt;&apos;\\&apos;&gt; #&quot;[1-9][0-9]*&quot;

PlainChar = #&quot;[^.|\\+*$^\[(){?]&quot;
CharExpr = Dot / LiteralChar / BCCEmpty / BCC
Dot = &apos;.&apos;

BCC = &lt;&apos;[&apos;&gt; BCCUnionLeft? &lt;&apos;]&apos;&gt;
BCCEmpty = &apos;[]&apos;

BCCUnionLeft = BCCNegation? BCCElemBase*

BCCNegation = &apos;^&apos;

BCCElemBase = BCCCharNonRange | SpecialCharClass | BCCRange | BCC
BCCRangeRightable = BCCCharEndRange | SpecialCharClass
BCCRange = BCCChar &lt;&apos;-&apos;&gt; BCCCharEndRange
BCCRangeWithBracket = &lt;&apos;]-&apos;&gt; BCCCharEndRange
BCCCharNonRange = BCCChar !(&apos;-&apos; BCCRangeRightable)
BCCChar = BCCPlainChar | EscapedChar
BCCCharEndRange = BCCPlainChar | EscapedChar
BCCPlainChar = #&quot;[^\]\[\\]&quot; | &apos;\\b&apos;

EscapedChar = SpecialCharClass / NormalSlashedCharacters / ControlChar / HexChar / BasicEscapedChar

HexChar = ShortHexChar | MediumHexChar | LongHexChar | VeryLongHexChar
ShortHexChar = &lt;&apos;\\x&apos;&gt; #&apos;[0-9a-fA-F]{2}&apos;
MediumHexChar = &lt;&apos;\\u&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos;
LongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos; &lt;&apos;}&apos;&gt;
VeryLongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{6}&apos; &lt;&apos;}&apos;&gt;
BasicEscapedChar = &lt;&apos;\\&apos;&gt; #&quot;[\s\S]&quot;
SpecialCharClass = &lt;&apos;\\&apos;&gt; #&quot;[dDwWsSv0]&quot;

NormalSlashedCharacters = #&quot;\\[tnrf]&quot;

ControlChar = &lt;&apos;\\c&apos;&gt; #&quot;[A-Z]&quot;

(** FLAGS **)
GroupFlags = NonCapturingMatchFlags
           | PositiveLookAheadFlag
           | NegativeLookAheadFlag

NonCapturingMatchFlags = &lt;&apos;?&apos;&gt; !&apos;)&apos; &lt;&apos;:&apos;&gt;
PositiveLookAheadFlag = &lt;&apos;?=&apos;&gt;
NegativeLookAheadFlag = &lt;&apos;?!&apos;&gt;

MatchFlag = #&quot;[gimuy]&quot;
"><a href="#t1496770760621292" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:39:20</span>      wilkerlucio </span><pre>Regex = &lt;&apos;/&apos;&gt; Alternation &lt;&apos;/&apos;&gt; MatchFlag*

Alternation = Concatenation (&lt;&apos;|&apos;&gt; Concatenation)*

Concatenation = SuffixedExpr*

SuffixedExpr = SingleExpr Suffix? / CurlyRepetition / LiteralSpecialChar
SingleExpr = BaseExpr | ParenthesizedExpr
ParenthesizedExpr = &lt;&apos;(&apos;&gt; GroupFlags? Alternation &lt;&apos;)&apos;&gt;
Suffix = (Optional | Positive | NonNegative | CurlyRepetition) Quantifier?
Optional = &lt;&apos;?&apos;&gt;
Positive = &lt;&apos;+&apos;&gt;
NonNegative = &lt;&apos;*&apos;&gt;
CurlyRepetition = &lt;&apos;{&apos;&gt; #&quot;\d+&quot; (&lt;&apos;,&apos;&gt; #&quot;\d+&quot; ?) ? &lt;&apos;}&apos;&gt;
Quantifier = &apos;?&apos; | &apos;+&apos;
BaseExpr = CharExpr | LiteralChar | Anchor | BackReference

Anchor = &apos;^&apos; | &apos;$&apos; | &apos;\\&apos; #&quot;[bB]&quot;
LiteralChar = PlainChar | EscapedChar
LiteralSpecialChar = &apos;{&apos;

BackReference = &lt;&apos;\\&apos;&gt; #&quot;[1-9][0-9]*&quot;

PlainChar = #&quot;[^.|\\+*$^\[(){?]&quot;
CharExpr = Dot / LiteralChar / BCCEmpty / BCC
Dot = &apos;.&apos;

BCC = &lt;&apos;[&apos;&gt; BCCUnionLeft? &lt;&apos;]&apos;&gt;
BCCEmpty = &apos;[]&apos;

BCCUnionLeft = BCCNegation? BCCElemBase*

BCCNegation = &apos;^&apos;

BCCElemBase = BCCCharNonRange | SpecialCharClass | BCCRange | BCC
BCCRangeRightable = BCCCharEndRange | SpecialCharClass
BCCRange = BCCChar &lt;&apos;-&apos;&gt; BCCCharEndRange
BCCRangeWithBracket = &lt;&apos;]-&apos;&gt; BCCCharEndRange
BCCCharNonRange = BCCChar !(&apos;-&apos; BCCRangeRightable)
BCCChar = BCCPlainChar | EscapedChar
BCCCharEndRange = BCCPlainChar | EscapedChar
BCCPlainChar = #&quot;[^\]\[\\]&quot; | &apos;\\b&apos;

EscapedChar = SpecialCharClass / NormalSlashedCharacters / ControlChar / HexChar / BasicEscapedChar

HexChar = ShortHexChar | MediumHexChar | LongHexChar | VeryLongHexChar
ShortHexChar = &lt;&apos;\\x&apos;&gt; #&apos;[0-9a-fA-F]{2}&apos;
MediumHexChar = &lt;&apos;\\u&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos;
LongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{4}&apos; &lt;&apos;}&apos;&gt;
VeryLongHexChar = &lt;&apos;\\x{&apos;&gt; #&apos;[0-9a-fA-F]{6}&apos; &lt;&apos;}&apos;&gt;
BasicEscapedChar = &lt;&apos;\\&apos;&gt; #&quot;[\s\S]&quot;
SpecialCharClass = &lt;&apos;\\&apos;&gt; #&quot;[dDwWsSv0]&quot;

NormalSlashedCharacters = #&quot;\\[tnrf]&quot;

ControlChar = &lt;&apos;\\c&apos;&gt; #&quot;[A-Z]&quot;

(** FLAGS **)
GroupFlags = NonCapturingMatchFlags
           | PositiveLookAheadFlag
           | NegativeLookAheadFlag

NonCapturingMatchFlags = &lt;&apos;?&apos;&gt; !&apos;)&apos; &lt;&apos;:&apos;&gt;
PositiveLookAheadFlag = &lt;&apos;?=&apos;&gt;
NegativeLookAheadFlag = &lt;&apos;?!&apos;&gt;

MatchFlag = #&quot;[gimuy]&quot;
</pre></div><div id="t1496770824644587" t="2017-06-06 17:40:24 wilkerlucio it doesn&apos;t need to be perfect, the usage of this is to port the  test.chuck   string-from-regex  to CLJS"><a href="#t1496770824644587" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:40:24</span>      wilkerlucio </span><span>it doesn&apos;t need to be perfect, the usage of this is to port the </span><code>test.chuck</code><span> </span><code>string-from-regex</code><span> to CLJS</span></div><div id="t1496770840650305" t="2017-06-06 17:40:40 aengelberg gfredericks has already done work in  test.chuck  to parse Java regexes in instaparse, which may be useful:  https://github.com/gfredericks/test.chuck/blob/master/resources/com/gfredericks/test/chuck/regex.bnf"><a href="#t1496770840650305" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:40:40</span>       aengelberg </span><span>gfredericks has already done work in </span><code>test.chuck</code><span> to parse Java regexes in instaparse, which may be useful: </span><a href="https://github.com/gfredericks/test.chuck/blob/master/resources/com/gfredericks/test/chuck/regex.bnf" target="_blank">https://github.com/gfredericks/test.chuck/blob/master/resources/com/gfredericks/test/chuck/regex.bnf</a></div><div id="t1496770855655726" t="2017-06-06 17:40:55 wilkerlucio yeah, this is actually based of that"><a href="#t1496770855655726" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:40:55</span>      wilkerlucio </span><span>yeah, this is actually based of that</span></div><div id="t1496770861657789" t="2017-06-06 17:41:01 wilkerlucio I&apos;m trying to port it to CLJS"><a href="#t1496770861657789" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:01</span>      wilkerlucio </span><span>I&apos;m trying to port it to CLJS</span></div><div id="t1496770866659511" t="2017-06-06 17:41:06 aengelberg oh lol, you’re right, I just needed to look closer"><a href="#t1496770866659511" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:06</span>       aengelberg </span><span>oh lol, you’re right, I just needed to look closer</span></div><div id="t1496770875662835" t="2017-06-06 17:41:15 aengelberg you’re porting test.chuck to cljs?"><a href="#t1496770875662835" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:15</span>       aengelberg </span><span>you’re porting test.chuck to cljs?</span></div><div id="t1496770880664624" t="2017-06-06 17:41:20 aengelberg or just the regex generator?"><a href="#t1496770880664624" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:20</span>       aengelberg </span><span>or just the regex generator?</span></div><div id="t1496770893669242" t="2017-06-06 17:41:33 wilkerlucio just the regex generator, the rest is already all  cljc  actually"><a href="#t1496770893669242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:33</span>      wilkerlucio </span><span>just the regex generator, the rest is already all </span><code>cljc</code><span> actually</span></div><div id="t1496770902672534" t="2017-06-06 17:41:42 aengelberg ok this explains a lot  🙂"><a href="#t1496770902672534" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:41:42</span>       aengelberg </span><span>ok this explains a lot </span><b>🙂</b></div><div id="t1496770946688181" t="2017-06-06 17:42:26 aengelberg so then how did you get the grammar into a weird state that behaved improperly with curly repetitions, just by removing certain things not part of the EcmaScript regex spec?"><a href="#t1496770946688181" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:42:26</span>       aengelberg </span><span>so then how did you get the grammar into a weird state that behaved improperly with curly repetitions, just by removing certain things not part of the EcmaScript regex spec?</span></div><div id="t1496770954691019" t="2017-06-06 17:42:34 aengelberg or was it already like that?"><a href="#t1496770954691019" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:42:34</span>       aengelberg </span><span>or was it already like that?</span></div><div id="t1496770984701872" t="2017-06-06 17:43:04 wilkerlucio the Java Regex have many different features compared to JS one"><a href="#t1496770984701872" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:43:04</span>      wilkerlucio </span><span>the Java Regex have many different features compared to JS one</span></div><div id="t1496771002708350" t="2017-06-06 17:43:22 aengelberg hmm I was under the impression that Java had a super-set of features to JS"><a href="#t1496771002708350" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:43:22</span>       aengelberg </span><span>hmm I was under the impression that Java had a super-set of features to JS</span></div><div id="t1496771006709570" t="2017-06-06 17:43:26 aengelberg clearly I was mistaken"><a href="#t1496771006709570" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:43:26</span>       aengelberg </span><span>clearly I was mistaken</span></div><div id="t1496771014712365" t="2017-06-06 17:43:34 wilkerlucio no, JS is more tolerant in some cases"><a href="#t1496771014712365" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:43:34</span>      wilkerlucio </span><span>no, JS is more tolerant in some cases</span></div><div id="t1496771034720002" t="2017-06-06 17:43:54 wilkerlucio for example, those are invalid on JVM, but ok on JS:  /a{/   /a{}/   /[]/"><a href="#t1496771034720002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:43:54</span>      wilkerlucio </span><span>for example, those are invalid on JVM, but ok on JS: </span><code>/a{/</code><span> </span><code>/a{}/</code><span> </span><code>/[]/</code></div><div id="t1496771060729567" t="2017-06-06 17:44:20 wilkerlucio when JS sees an incomplete curly braces, it threats as literals"><a href="#t1496771060729567" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:44:20</span>      wilkerlucio </span><span>when JS sees an incomplete curly braces, it threats as literals</span></div><div id="t1496771067731898" t="2017-06-06 17:44:27 wilkerlucio where JVM throws an exception"><a href="#t1496771067731898" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:44:27</span>      wilkerlucio </span><span>where JVM throws an exception</span></div><div id="t1496771116750124" t="2017-06-06 17:45:16 wilkerlucio but in general the JS is simpler, since it doens&apos;t support character class unions (that feature adds a lot of complexity on the JVM Regex grammar, see:  https://www.regular-expressions.info/charclassintersect.html )"><a href="#t1496771116750124" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:45:16</span>      wilkerlucio </span><span>but in general the JS is simpler, since it doens&apos;t support character class unions (that feature adds a lot of complexity on the JVM Regex grammar, see: </span><a href="https://www.regular-expressions.info/charclassintersect.html" target="_blank">https://www.regular-expressions.info/charclassintersect.html</a><span>)</span></div><div id="t1496771136757593" t="2017-06-06 17:45:36 wilkerlucio so, this is the kind of feature that has a strong dependency on the platform"><a href="#t1496771136757593" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:45:36</span>      wilkerlucio </span><span>so, this is the kind of feature that has a strong dependency on the platform</span></div><div id="t1496771231793075" t="2017-06-06 17:47:11 wilkerlucio Gary did a great job making generative testing to check if the custom parser conforms with the platform regex parser, check this test:  https://github.com/gfredericks/test.chuck/blob/master/test/com/gfredericks/test/chuck/regexes_test.clj#L117-L119"><a href="#t1496771231793075" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:47:11</span>      wilkerlucio </span><span>Gary did a great job making generative testing to check if the custom parser conforms with the platform regex parser, check this test: </span><a href="https://github.com/gfredericks/test.chuck/blob/master/test/com/gfredericks/test/chuck/regexes_test.clj#L117-L119" target="_blank">https://github.com/gfredericks/test.chuck/blob/master/test/com/gfredericks/test/chuck/regexes_test.clj#L117-L119</a></div><div id="t1496771258803432" t="2017-06-06 17:47:38 wilkerlucio it generates random regexs and try to parse it with custom and native regex parsers, and they have to conform (all fail or all pass)"><a href="#t1496771258803432" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:47:38</span>      wilkerlucio </span><span>it generates random regexs and try to parse it with custom and native regex parsers, and they have to conform (all fail or all pass)</span></div><div id="t1496771283812542" t="2017-06-06 17:48:03 wilkerlucio it&apos;s just very hard to get the grammar to work exactly like the native one, with all quirks dealt with"><a href="#t1496771283812542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-06</span> <span class="t" onclick="H(this)">17:48:03</span>      wilkerlucio </span><span>it&apos;s just very hard to get the grammar to work exactly like the native one, with all quirks dealt with</span></div><div id="t1498017749860414" t="2017-06-21 04:02:29 fabrao Hello all, how can I make something like
 (def parser
  (insta/parser &quot;regra = &lt;&apos;filtro&apos;&gt; &lt;ws&gt; elemento+
                elemento = operador &lt;ws&gt; operando
                operador = (&apos;origem&apos;)
                operando = #&apos;[a-zA-Z0-9\\-]([0-9a-zA-Z\\-]*)&apos;
                ws = #&apos;\\s+&apos;&quot;))
(parser &quot;filtro 
        origem 001-ARTICO 
        origem 011-BALDACCI&quot;)

  what´s wrong?"><a href="#t1498017749860414" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-21</span> <span class="t" onclick="H(this)">04:02:29</span>           fabrao </span><span>Hello all, how can I make something like
</span><pre>(def parser
  (insta/parser &quot;regra = &lt;&apos;filtro&apos;&gt; &lt;ws&gt; elemento+
                elemento = operador &lt;ws&gt; operando
                operador = (&apos;origem&apos;)
                operando = #&apos;[a-zA-Z0-9\\-]([0-9a-zA-Z\\-]*)&apos;
                ws = #&apos;\\s+&apos;&quot;))
(parser &quot;filtro 
        origem 001-ARTICO 
        origem 011-BALDACCI&quot;)

</pre><span> what´s wrong?</span></div><div id="t1498043493584876" t="2017-06-21 11:11:33 gfredericks @fabrao looks like the grammar doesn&apos;t allow whitespace in between  elemento s"><a href="#t1498043493584876" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-21</span> <span class="t" onclick="H(this)">11:11:33</span>      gfredericks </span><span>@fabrao looks like the grammar doesn&apos;t allow whitespace in between </span><code>elemento</code><span>s</span></div><div id="t1498077931746659" t="2017-06-21 20:45:31 aengelberg ^"><a href="#t1498077931746659" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-21</span> <span class="t" onclick="H(this)">20:45:31</span>       aengelberg </span><span>^</span></div><div id="t1498264911284184" t="2017-06-24 00:41:51 wistb test"><a href="#t1498264911284184" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:41:51</span>            wistb </span><span>test</span></div><div id="t1498264932285679" t="2017-06-24 00:42:12 wistb hi, beginner question."><a href="#t1498264932285679" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:42:12</span>            wistb </span><span>hi, beginner question.</span></div><div id="t1498264938286171" t="2017-06-24 00:42:18 wistb (def abc-parser
  (insta/parser ( http://clojure.java.io/resource  &quot;grammars/abc.abnf&quot;)
                :input-format :abnf
                :trace true
                :output-format :enlive))
                ;;:auto-whitespace whitespace))"><a href="#t1498264938286171" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:42:18</span>            wistb </span><span>(def abc-parser
  (insta/parser (</span><a href="http://clojure.java.io/resource" target="_blank">http://clojure.java.io/resource</a><span> &quot;grammars/abc.abnf&quot;)
                :input-format :abnf
                :trace true
                :output-format :enlive))
                ;;:auto-whitespace whitespace))</span></div><div id="t1498264977288645" t="2017-06-24 00:42:57 wistb if I enable the whitespace option , I am getting a copile error when I run &apos;lein run&apos;."><a href="#t1498264977288645" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:42:57</span>            wistb </span><span>if I enable the whitespace option , I am getting a copile error when I run &apos;lein run&apos;.</span></div><div id="t1498264997290031" t="2017-06-24 00:43:17 wistb like this :"><a href="#t1498264997290031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:43:17</span>            wistb </span><span>like this :</span></div><div id="t1498264998290122" t="2017-06-24 00:43:18 wistb (def abc-parser
  (insta/parser ( http://clojure.java.io/resource  &quot;grammars/abc.abnf&quot;)
                :input-format :abnf
                :trace true
                :output-format :enlive
                :auto-whitespace whitespace))"><a href="#t1498264998290122" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:43:18</span>            wistb </span><span>(def abc-parser
  (insta/parser (</span><a href="http://clojure.java.io/resource" target="_blank">http://clojure.java.io/resource</a><span> &quot;grammars/abc.abnf&quot;)
                :input-format :abnf
                :trace true
                :output-format :enlive
                :auto-whitespace whitespace))</span></div><div id="t1498265037292647" t="2017-06-24 00:43:57 wistb same problem if I used :auto-whitespace :standard"><a href="#t1498265037292647" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:43:57</span>            wistb </span><span>same problem if I used :auto-whitespace :standard</span></div><div id="t1498265195303653" t="2017-06-24 00:46:35 wistb Caused by: java.lang.IllegalArgumentException: No matching clause: :char
	at instaparse.combinators_source$auto_whitespace_parser.invokeStatic(combinators_source.clj:163)
	at instaparse.combinators_source$auto_whitespace_parser.invoke(combinators_source.clj:162)
	at instaparse.combinators_source$auto_whitespace$iter__426__430$fn__431.invoke(combinators_source.clj:184)"><a href="#t1498265195303653" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-06-24</span> <span class="t" onclick="H(this)">00:46:35</span>            wistb </span><span>Caused by: java.lang.IllegalArgumentException: No matching clause: :char
	at instaparse.combinators_source$auto_whitespace_parser.invokeStatic(combinators_source.clj:163)
	at instaparse.combinators_source$auto_whitespace_parser.invoke(combinators_source.clj:162)
	at instaparse.combinators_source$auto_whitespace$iter__426__430$fn__431.invoke(combinators_source.clj:184)</span></div><div id="t1499247865080389" t="2017-07-05 09:44:25 matan With instaparse, how do you elegantly match any sequence of characters up until a specific sequence of characters?"><a href="#t1499247865080389" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">09:44:25</span>            matan </span><span>With instaparse, how do you elegantly match any sequence of characters up until a specific sequence of characters?</span></div><div id="t1499248474292535" t="2017-07-05 09:54:34 matan Currently I do that in a cumbersome way, given the impedence mismatch between grammars and regular expressions:

 WrappedLabel = UnderscorePair Word UnderscorePair
UnderscorePair = &quot;__&quot;
Word = #&quot;.+(?=__)&quot; (* a valid word is hereby contrained to anything that does not include an UnderScorePair *)
"><a href="#t1499248474292535" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">09:54:34</span>            matan </span><span>Currently I do that in a cumbersome way, given the impedence mismatch between grammars and regular expressions:

</span><pre>WrappedLabel = UnderscorePair Word UnderscorePair
UnderscorePair = &quot;__&quot;
Word = #&quot;.+(?=__)&quot; (* a valid word is hereby contrained to anything that does not include an UnderScorePair *)
</pre></div><div id="t1499248508304396" t="2017-07-05 09:55:08 matan __  appears both as a grammar definition (`UnderscorePair`) as well as serving as a stop expression in the regex"><a href="#t1499248508304396" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">09:55:08</span>            matan </span><code>__</code><span> appears both as a grammar definition (`UnderscorePair`) as well as serving as a stop expression in the regex</span></div><div id="t1499248562323420" t="2017-07-05 09:56:02 matan 🤔  I am curious in case there&apos;s a solution I&apos;ve not thought of"><a href="#t1499248562323420" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">09:56:02</span>            matan </span><b>🤔</b><span> I am curious in case there&apos;s a solution I&apos;ve not thought of</span></div><div id="t1499248626345877" t="2017-07-05 09:57:06 matan The above is supposed to catch and parse anything of the form  __foo__ , so that  foo  can be extracted (as part of a larger parse the details of which are quite plain and uninteresting)"><a href="#t1499248626345877" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">09:57:06</span>            matan </span><span>The above is supposed to catch and parse anything of the form </span><code>__foo__</code><span>, so that </span><code>foo</code><span> can be extracted (as part of a larger parse the details of which are quite plain and uninteresting)</span></div><div id="t1499271211388843" t="2017-07-05 16:13:31 aengelberg @matan that&apos;s how I would do it. I&apos;m not aware of a more elegant or efficient solution, besides making the underscore pairs part of the regex."><a href="#t1499271211388843" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-05</span> <span class="t" onclick="H(this)">16:13:31</span>       aengelberg </span><span>@matan that&apos;s how I would do it. I&apos;m not aware of a more elegant or efficient solution, besides making the underscore pairs part of the regex.</span></div><div id="t1499360473035226" t="2017-07-06 17:01:13 matan @aengelberg many thanks for the confirmation! of course, it stems from the difference between what regular expression language is and what grammars are, not from how instaparse works doesn&apos;t it  🙂  Would you agree to this?"><a href="#t1499360473035226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:01:13</span>            matan </span><span>@aengelberg many thanks for the confirmation! of course, it stems from the difference between what regular expression language is and what grammars are, not from how instaparse works doesn&apos;t it </span><b>🙂</b><span> Would you agree to this?</span></div><div id="t1499360746181443" t="2017-07-06 17:05:46 aengelberg You mean regexes’ greediness? I would say that’s an artifact of regexes’ supported use case not matching what Instaparse needs it to do. If regexes had a way to lazily emit multiple parse results of the same string, we could maybe use that to make regex non-terminals behave more intuitively."><a href="#t1499360746181443" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:05:46</span>       aengelberg </span><span>You mean regexes’ greediness? I would say that’s an artifact of regexes’ supported use case not matching what Instaparse needs it to do. If regexes had a way to lazily emit multiple parse results of the same string, we could maybe use that to make regex non-terminals behave more intuitively.</span></div><div id="t1499360927278085" t="2017-07-06 17:08:47 aengelberg e.g. if I match  #&quot;^a+&quot;  on  &quot;aaa&quot;  I’d like to see  &quot;a&quot;, &quot;aa&quot;, &quot;aaa&quot;"><a href="#t1499360927278085" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:08:47</span>       aengelberg </span><span>e.g. if I match </span><code>#&quot;^a+&quot;</code><span> on </span><code>&quot;aaa&quot;</code><span> I’d like to see </span><code>&quot;a&quot;, &quot;aa&quot;, &quot;aaa&quot;</code></div><div id="t1499361015323480" t="2017-07-06 17:10:15 matan Yes, well, at a higher level, regular expressions and grammars generate disparate automatons, whereas what you mention is one difference in the detail thereof (the most relevant one). This relates to two area I&apos;m lately looking at ― fuzzy parsing and scannerless parsing"><a href="#t1499361015323480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:10:15</span>            matan </span><span>Yes, well, at a higher level, regular expressions and grammars generate disparate automatons, whereas what you mention is one difference in the detail thereof (the most relevant one). This relates to two area I&apos;m lately looking at ― fuzzy parsing and scannerless parsing</span></div><div id="t1499361047340146" t="2017-07-06 17:10:47 matan As to regex, have you ever used something like this?
 https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches"><a href="#t1499361047340146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:10:47</span>            matan </span><span>As to regex, have you ever used something like this?
</span><a href="https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches" target="_blank">https://stackoverflow.com/questions/5616822/python-regex-find-all-overlapping-matches</a></div><div id="t1499361104369659" t="2017-07-06 17:11:44 matan Oh, not really, ignore that last one"><a href="#t1499361104369659" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:11:44</span>            matan </span><span>Oh, not really, ignore that last one</span></div><div id="t1499361137387099" t="2017-07-06 17:12:17 aengelberg That’s returning one match for each of a variety of starting indexes, which is not quite what I want"><a href="#t1499361137387099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:12:17</span>       aengelberg </span><span>That’s returning one match for each of a variety of starting indexes, which is not quite what I want</span></div><div id="t1499361156396673" t="2017-07-06 17:12:36 matan Yes, again, ignore that"><a href="#t1499361156396673" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:12:36</span>            matan </span><span>Yes, again, ignore that</span></div><div id="t1499361188413012" t="2017-07-06 17:13:08 aengelberg You could theoretically do  (for [i (range (count s))] (re-match re (subs s 0 i)))"><a href="#t1499361188413012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:13:08</span>       aengelberg </span><span>You could theoretically do </span><code>(for [i (range (count s))] (re-match re (subs s 0 i)))</code></div><div id="t1499361203421224" t="2017-07-06 17:13:23 aengelberg but that is super slow and might not actually work depending on the regex"><a href="#t1499361203421224" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:13:23</span>       aengelberg </span><span>but that is super slow and might not actually work depending on the regex</span></div><div id="t1499361322483776" t="2017-07-06 17:15:22 aengelberg the automaton structure of regexes is simply not designed to (efficiently) reason about the set of all possible matches for one string, using backtracking and laziness"><a href="#t1499361322483776" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:15:22</span>       aengelberg </span><span>the automaton structure of regexes is simply not designed to (efficiently) reason about the set of all possible matches for one string, using backtracking and laziness</span></div><div id="t1499361353500052" t="2017-07-06 17:15:53 aengelberg actually maybe if you compile a NDFA"><a href="#t1499361353500052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:15:53</span>       aengelberg </span><span>actually maybe if you compile a NDFA</span></div><div id="t1499361362504707" t="2017-07-06 17:16:02 aengelberg then run it through one character at a time"><a href="#t1499361362504707" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:16:02</span>       aengelberg </span><span>then run it through one character at a time</span></div><div id="t1499361416532679" t="2017-07-06 17:16:56 aengelberg and mark every time you are in a success state"><a href="#t1499361416532679" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:16:56</span>       aengelberg </span><span>and mark every time you are in a success state</span></div><div id="t1499361903793104" t="2017-07-06 17:25:03 matan The interaction of a grammar with the need to account for syntactic categories (a.k.a variables, and/or non-terminals) that translate to non-finite sets of productions is very interesting. Right now, we typically &quot;escape&quot; to regular expressions for that. Of course, this goes beyond the scope of my original question with its particular silly use case."><a href="#t1499361903793104" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:25:03</span>            matan </span><span>The interaction of a grammar with the need to account for syntactic categories (a.k.a variables, and/or non-terminals) that translate to non-finite sets of productions is very interesting. Right now, we typically &quot;escape&quot; to regular expressions for that. Of course, this goes beyond the scope of my original question with its particular silly use case.</span></div><div id="t1499362031863939" t="2017-07-06 17:27:11 aengelberg In this case, the set of productions is not infinite; for the current index  i , all I really need to know is, the set of indexes  j \in [0,N)  such that  s[i:j]  is a complete parse according to the regex."><a href="#t1499362031863939" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:27:11</span>       aengelberg </span><span>In this case, the set of productions is not infinite; for the current index </span><code>i</code><span>, all I really need to know is, the set of indexes </span><code>j \in [0,N)</code><span> such that </span><code>s[i:j]</code><span> is a complete parse according to the regex.</span></div><div id="t1499362162938677" t="2017-07-06 17:29:22 matan Right, obviously, when looking at a specific input text (or string)."><a href="#t1499362162938677" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:29:22</span>            matan </span><span>Right, obviously, when looking at a specific input text (or string).</span></div><div id="t1499362333034978" t="2017-07-06 17:32:13 matan But in the general sense, I also meant to say that we use regular expressions for where we want to stipulate a non-finite set, whereas a plain CFG doesn&apos;t provide (IIRC) that kind of support, which is why we use regex along with it. I have to refresh and brush up more on formal languages though, maybe what I just said is totally incorrect, or just sufficiently inaccurate to be incorrect."><a href="#t1499362333034978" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-06</span> <span class="t" onclick="H(this)">17:32:13</span>            matan </span><span>But in the general sense, I also meant to say that we use regular expressions for where we want to stipulate a non-finite set, whereas a plain CFG doesn&apos;t provide (IIRC) that kind of support, which is why we use regex along with it. I have to refresh and brush up more on formal languages though, maybe what I just said is totally incorrect, or just sufficiently inaccurate to be incorrect.</span></div><div id="t1499701941468899" t="2017-07-10 15:52:21 mrchance Hi! In Instaparse, how do I specify operator precedence... I tried ordered choice, but it doesn&apos;t do what I want. Simple example:
 (def tp (insta/parser &quot;
s = expression
&lt;expression&gt; = binop / integer
integer = #&apos;[0-9]+&apos;
&lt;binop&gt; = times / plus
times = expression &lt;&apos;*&apos;&gt; expression
plus = expression &lt;&apos;+&apos;&gt; expression&quot;
                      :auto-whitespace whitespace))

parser&gt; (tp &quot;5 + 3 * 7&quot;)
[:s [:times [:plus [:integer &quot;5&quot;] [:integer &quot;3&quot;]] [:integer &quot;7&quot;]]]
 
I have seen solutions that distinguish between add-expression and mul-expression, but that doesn&apos;t scale very well for more operators"><a href="#t1499701941468899" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">15:52:21</span>         mrchance </span><span>Hi! In Instaparse, how do I specify operator precedence... I tried ordered choice, but it doesn&apos;t do what I want. Simple example:
</span><pre>(def tp (insta/parser &quot;
s = expression
&lt;expression&gt; = binop / integer
integer = #&apos;[0-9]+&apos;
&lt;binop&gt; = times / plus
times = expression &lt;&apos;*&apos;&gt; expression
plus = expression &lt;&apos;+&apos;&gt; expression&quot;
                      :auto-whitespace whitespace))

parser&gt; (tp &quot;5 + 3 * 7&quot;)
[:s [:times [:plus [:integer &quot;5&quot;] [:integer &quot;3&quot;]] [:integer &quot;7&quot;]]]
</pre><span>
I have seen solutions that distinguish between add-expression and mul-expression, but that doesn&apos;t scale very well for more operators</span></div><div id="t1499702062542391" t="2017-07-10 15:54:22 aengelberg Ordered choice only works when considering parses available at a given position, not when ranking this parse here over another parse over there."><a href="#t1499702062542391" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">15:54:22</span>       aengelberg </span><span>Ordered choice only works when considering parses available at a given position, not when ranking this parse here over another parse over there.</span></div><div id="t1499702119577682" t="2017-07-10 15:55:19 aengelberg So in your example, your  binop / integer  was making it try  5 + 3  before  5"><a href="#t1499702119577682" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">15:55:19</span>       aengelberg </span><span>So in your example, your </span><code>binop / integer</code><span> was making it try </span><code>5 + 3</code><span> before </span><code>5</code></div><div id="t1499703994677508" t="2017-07-10 16:26:34 mrchance ah, so I can fix it by making expression unordered? Or what&apos;s the best way?"><a href="#t1499703994677508" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:26:34</span>         mrchance </span><span>ah, so I can fix it by making expression unordered? Or what&apos;s the best way?</span></div><div id="t1499704205794685" t="2017-07-10 16:30:05 aengelberg I don&apos;t think ordered choice is the best tool for &quot;order of operations&quot;... I&apos;ll send you another example in a sec"><a href="#t1499704205794685" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:30:05</span>       aengelberg </span><span>I don&apos;t think ordered choice is the best tool for &quot;order of operations&quot;... I&apos;ll send you another example in a sec</span></div><div id="t1499704344871799" t="2017-07-10 16:32:24 mrchance Thanks!"><a href="#t1499704344871799" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:32:24</span>         mrchance </span><span>Thanks!</span></div><div id="t1499704599009990" t="2017-07-10 16:36:39 aengelberg @mrchance check out the arithmetic expr parser in  https://github.com/engelberg/instaparse#transforming-the-tree"><a href="#t1499704599009990" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:36:39</span>       aengelberg </span><span>@mrchance check out the arithmetic expr parser in </span><a href="https://github.com/engelberg/instaparse#transforming-the-tree" target="_blank">https://github.com/engelberg/instaparse#transforming-the-tree</a></div><div id="t1499704623022937" t="2017-07-10 16:37:03 mrchance Thanks, I&apos;ll check it out"><a href="#t1499704623022937" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:37:03</span>         mrchance </span><span>Thanks, I&apos;ll check it out</span></div><div id="t1499704648036028" t="2017-07-10 16:37:28 aengelberg notice how no ordered choice is necessary, because the grammar is structured so that the order of operations follows naturally"><a href="#t1499704648036028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:37:28</span>       aengelberg </span><span>notice how no ordered choice is necessary, because the grammar is structured so that the order of operations follows naturally</span></div><div id="t1499705696594399" t="2017-07-10 16:54:56 mrchance hm, ok, but my impression is that would get unwieldy when there is more operators. I&apos;ll give it a try though, I don&apos;t have that many  😉"><a href="#t1499705696594399" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:54:56</span>         mrchance </span><span>hm, ok, but my impression is that would get unwieldy when there is more operators. I&apos;ll give it a try though, I don&apos;t have that many </span><b>😉</b></div><div id="t1499705733614828" t="2017-07-10 16:55:33 aengelberg perhaps. not sure."><a href="#t1499705733614828" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:55:33</span>       aengelberg </span><span>perhaps. not sure.</span></div><div id="t1499705875692308" t="2017-07-10 16:57:55 aengelberg Here’s a potentially more elegant way of expressing it (not sure if this actually works):
 expr = add-sub
add-sub = mul-div ((&apos;+&apos; | &apos;-&apos;) mul-div)*
mul-div = term ((&apos;*&apos; | &apos;/&apos;) term)*
term = number | &lt;&apos;(&apos;&gt; add-sub &lt;&apos;)&apos;&gt;
"><a href="#t1499705875692308" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">16:57:55</span>       aengelberg </span><span>Here’s a potentially more elegant way of expressing it (not sure if this actually works):
</span><pre>expr = add-sub
add-sub = mul-div ((&apos;+&apos; | &apos;-&apos;) mul-div)*
mul-div = term ((&apos;*&apos; | &apos;/&apos;) term)*
term = number | &lt;&apos;(&apos;&gt; add-sub &lt;&apos;)&apos;&gt;
</pre></div><div id="t1499707964832246" t="2017-07-10 17:32:44 mrchance hmm, wouldn&apos;t this disallow top level multiplication terms?"><a href="#t1499707964832246" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">17:32:44</span>         mrchance </span><span>hmm, wouldn&apos;t this disallow top level multiplication terms?</span></div><div id="t1499708027867084" t="2017-07-10 17:33:47 mrchance I am already wishing I had given my own language a lisp syntax  😉"><a href="#t1499708027867084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">17:33:47</span>         mrchance </span><span>I am already wishing I had given my own language a lisp syntax </span><b>😉</b></div><div id="t1499714556433864" t="2017-07-10 19:22:36 aengelberg @mrchance no, it would end up as  [:expr [:add-sub [:mul-div &quot;1&quot; &quot;*&quot; &quot;2&quot;]]]"><a href="#t1499714556433864" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">19:22:36</span>       aengelberg </span><span>@mrchance no, it would end up as </span><code>[:expr [:add-sub [:mul-div &quot;1&quot; &quot;*&quot; &quot;2&quot;]]]</code></div><div id="t1499728146226105" t="2017-07-10 23:09:06 mrchance right  🙂  It worked, btw. For the Moment it&apos;s still quite manageable too. Thanks for the fast replies!"><a href="#t1499728146226105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-10</span> <span class="t" onclick="H(this)">23:09:06</span>         mrchance </span><span>right </span><b>🙂</b><span> It worked, btw. For the Moment it&apos;s still quite manageable too. Thanks for the fast replies!</span></div><div id="t1499880387932298" t="2017-07-12 17:26:27 fabrao Hello all, how to I parse any kind of char in this:  Groups: CN=THIAGO VITOR COSTA,OU=REPRESENTANTES,DC=DOM,DC=COM,DC=BR+OU=REPRESENTANTES,DC=DOM,DC=COM,DC=BR+CN=USUÃ¡RIOS DO DOMÃ­NIO,CN=USERS,DC=DOM,DC=COM,DC=BR+CN=GPO_REPRESENTANTES_CN,OU=GRUPOS,DC=DOM,DC=COM,DC=BR+CN=USUÃ¡RIOS,CN=BUILTIN,DC=DOM,DC=COM,DC=BR+CN=GPO_REPRESENTANTES,OU=GRUPOS,DC=DOM,DC=COM,DC=BR ? The Groups: is reserved and the rest is the capture information"><a href="#t1499880387932298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-07-12</span> <span class="t" onclick="H(this)">17:26:27</span>           fabrao </span><span>Hello all, how to I parse any kind of char in this: </span><code>Groups: CN=THIAGO VITOR COSTA,OU=REPRESENTANTES,DC=DOM,DC=COM,DC=BR+OU=REPRESENTANTES,DC=DOM,DC=COM,DC=BR+CN=USUÃ¡RIOS DO DOMÃ­NIO,CN=USERS,DC=DOM,DC=COM,DC=BR+CN=GPO_REPRESENTANTES_CN,OU=GRUPOS,DC=DOM,DC=COM,DC=BR+CN=USUÃ¡RIOS,CN=BUILTIN,DC=DOM,DC=COM,DC=BR+CN=GPO_REPRESENTANTES,OU=GRUPOS,DC=DOM,DC=COM,DC=BR</code><span>? The Groups: is reserved and the rest is the capture information</span></div><div id="t1503031677000131" t="2017-08-18 04:47:57 bbss I&apos;m trying to parse Google&apos;s protobuf with Instaparse, but I can&apos;t find a recent file with it&apos;s EBNF spec."><a href="#t1503031677000131" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">04:47:57</span>             bbss </span><span>I&apos;m trying to parse Google&apos;s protobuf with Instaparse, but I can&apos;t find a recent file with it&apos;s EBNF spec.</span></div><div id="t1503031705000052" t="2017-08-18 04:48:25 bbss https://developers.google.com/protocol-buffers/docs/reference/proto3-spec 
I&apos;ve copied all the bits from this site, but some lines are giving errors when I try to parse them."><a href="#t1503031705000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">04:48:25</span>             bbss </span><a href="https://developers.google.com/protocol-buffers/docs/reference/proto3-spec" target="_blank">https://developers.google.com/protocol-buffers/docs/reference/proto3-spec</a><span>
I&apos;ve copied all the bits from this site, but some lines are giving errors when I try to parse them.</span></div><div id="t1503031751000152" t="2017-08-18 04:49:11 bbss Is instaparse compatible with what they put in there? For example I see they use  =  where other files often seem to have  :: == ."><a href="#t1503031751000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">04:49:11</span>             bbss </span><span>Is instaparse compatible with what they put in there? For example I see they use </span><code>=</code><span> where other files often seem to have </span><code>:: ==</code><span>.</span></div><div id="t1503031919000047" t="2017-08-18 04:51:59 bbss Ah, I just noticed the escape sequence part of the readme, let me look into that."><a href="#t1503031919000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">04:51:59</span>             bbss </span><span>Ah, I just noticed the escape sequence part of the readme, let me look into that.</span></div><div id="t1503038164000183" t="2017-08-18 06:36:04 bbss ah I notice it&apos;s been discussed here before:
 https://clojurians-log.clojureverse.org/instaparse/2017-02-17.html"><a href="#t1503038164000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">06:36:04</span>             bbss </span><span>ah I notice it&apos;s been discussed here before:
</span><a href="https://clojurians-log.clojureverse.org/instaparse/2017-02-17.html" target="_blank">https://clojurians-log.clojureverse.org/instaparse/2017-02-17.html</a></div><div id="t1503038362000030" t="2017-08-18 06:39:22 bbss @frank did you perhaps end up succeeding parsing that spec? Can&apos;t find any more discussion in further dates on the clojureverse.."><a href="#t1503038362000030" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">06:39:22</span>             bbss </span><span>@frank did you perhaps end up succeeding parsing that spec? Can&apos;t find any more discussion in further dates on the clojureverse..</span></div><div id="t1503040888000188" t="2017-08-18 07:21:28 bbss Okay, great I got it to work with the comments there.
For any future visitors: 
 https://gist.github.com/bbss/153e050f44db294cf7af3afc9a2f9a10"><a href="#t1503040888000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">07:21:28</span>             bbss </span><span>Okay, great I got it to work with the comments there.
For any future visitors: 
</span><a href="https://gist.github.com/bbss/153e050f44db294cf7af3afc9a2f9a10" target="_blank">https://gist.github.com/bbss/153e050f44db294cf7af3afc9a2f9a10</a></div><div id="t1503071123000279" t="2017-08-18 15:45:23 frank sorry just seeing this now - I had to make changes to it"><a href="#t1503071123000279" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">15:45:23</span>            frank </span><span>sorry just seeing this now - I had to make changes to it</span></div><div id="t1503071193000121" t="2017-08-18 15:46:33 frank one thing that might need to be done is removing comments before feeding it into the parser (or adjusting the grammar to know about them)"><a href="#t1503071193000121" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-18</span> <span class="t" onclick="H(this)">15:46:33</span>            frank </span><span>one thing that might need to be done is removing comments before feeding it into the parser (or adjusting the grammar to know about them)</span></div><div id="t1503118498000037" t="2017-08-19 04:54:58 bbss @frank no worries, figured it out. I hadn&apos;t really used context free grammar before, but after meddling with those files for a bit I might actually use them more often. It seems like an indispensable tool for a Lisp programmer really  🙂"><a href="#t1503118498000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span> <span class="t" onclick="H(this)">04:54:58</span>             bbss </span><span>@frank no worries, figured it out. I hadn&apos;t really used context free grammar before, but after meddling with those files for a bit I might actually use them more often. It seems like an indispensable tool for a Lisp programmer really </span><b>🙂</b></div><div id="t1503118519000024" t="2017-08-19 04:55:19 bbss and you&apos;re right, I actually wrote a function to remove the comments."><a href="#t1503118519000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-19</span> <span class="t" onclick="H(this)">04:55:19</span>             bbss </span><span>and you&apos;re right, I actually wrote a function to remove the comments.</span></div><div id="t1504124028000077" t="2017-08-30 20:13:48 hlolli In clojurescript with defparser, Im guessing the regexes are read wrongly, with insta/parser I get in my willingly generated token error
 {:tag :regexp,
 :expecting #&quot;^[0-9]+\.?[0-9]*&quot;}
 
in same error via defparse
 {:tag :regexp,
 :expecting #&quot;^\/^[0-9]+\.?[0-9]*\/&quot;}
 
both originating from
 &lt;digit&gt; = #&apos;[0-9]+\\.?[0-9]*&apos;"><a href="#t1504124028000077" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:13:48</span>           hlolli </span><span>In clojurescript with defparser, Im guessing the regexes are read wrongly, with insta/parser I get in my willingly generated token error
</span><pre>{:tag :regexp,
 :expecting #&quot;^[0-9]+\.?[0-9]*&quot;}
</pre><span>
in same error via defparse
</span><pre>{:tag :regexp,
 :expecting #&quot;^\/^[0-9]+\.?[0-9]*\/&quot;}
</pre><span>
both originating from
</span><code>&lt;digit&gt; = #&apos;[0-9]+\\.?[0-9]*&apos;</code></div><div id="t1504124132000271" t="2017-08-30 20:15:32 hlolli my first question should be, does some other clojurescript user experience this, as Im running my forked version of Instaparse 1.4.7 running on lumo."><a href="#t1504124132000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:15:32</span>           hlolli </span><span>my first question should be, does some other clojurescript user experience this, as Im running my forked version of Instaparse 1.4.7 running on lumo.</span></div><div id="t1504124188000137" t="2017-08-30 20:16:28 aengelberg Instaparse is known to have some bugs on Lumo"><a href="#t1504124188000137" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:16:28</span>       aengelberg </span><span>Instaparse is known to have some bugs on Lumo</span></div><div id="t1504124201000073" t="2017-08-30 20:16:41 aengelberg because Lumo behaves weirdly with cljc files"><a href="#t1504124201000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:16:41</span>       aengelberg </span><span>because Lumo behaves weirdly with cljc files</span></div><div id="t1504124250000102" t="2017-08-30 20:17:30 hlolli yes, I know, I&apos;ve fixed those on my fork and it&apos;s effectively working fine, just this one error with regexes, so Im only guessing this is unrelated."><a href="#t1504124250000102" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:17:30</span>           hlolli </span><span>yes, I know, I&apos;ve fixed those on my fork and it&apos;s effectively working fine, just this one error with regexes, so Im only guessing this is unrelated.</span></div><div id="t1504124255000515" t="2017-08-30 20:17:35 aengelberg since  defparse  is evaluated at macro-time, not runtime, my guess is that Lumo trying to execute code on ClojureScript that was meant to be run on Clojure"><a href="#t1504124255000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:17:35</span>       aengelberg </span><span>since </span><code>defparse</code><span> is evaluated at macro-time, not runtime, my guess is that Lumo trying to execute code on ClojureScript that was meant to be run on Clojure</span></div><div id="t1504124306000048" t="2017-08-30 20:18:26 hlolli or related, then in the way you described  🙂"><a href="#t1504124306000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:18:26</span>           hlolli </span><span>or related, then in the way you described </span><b>🙂</b></div><div id="t1504124313000100" t="2017-08-30 20:18:33 aengelberg The  regexp  combinator in particular has special logic when run on ClojureScript  https://github.com/Engelberg/instaparse/blob/master/src/instaparse/combinators_source.cljc#L93"><a href="#t1504124313000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:18:33</span>       aengelberg </span><span>The </span><code>regexp</code><span> combinator in particular has special logic when run on ClojureScript </span><a href="https://github.com/Engelberg/instaparse/blob/master/src/instaparse/combinators_source.cljc#L93" target="_blank">https://github.com/Engelberg/instaparse/blob/master/src/instaparse/combinators_source.cljc#L93</a></div><div id="t1504124318000069" t="2017-08-30 20:18:38 aengelberg which might be why you&apos;re only running into this now"><a href="#t1504124318000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:18:38</span>       aengelberg </span><span>which might be why you&apos;re only running into this now</span></div><div id="t1504124378000183" t="2017-08-30 20:19:38 hlolli hmm, ok, I try removing this constraint to see what happens..."><a href="#t1504124378000183" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:19:38</span>           hlolli </span><span>hmm, ok, I try removing this constraint to see what happens...</span></div><div id="t1504124394000273" t="2017-08-30 20:19:54 aengelberg also maybe try not using  defparser  and see if that fixes it"><a href="#t1504124394000273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:19:54</span>       aengelberg </span><span>also maybe try not using </span><code>defparser</code><span> and see if that fixes it</span></div><div id="t1504124438000250" t="2017-08-30 20:20:38 hlolli yes, that fixes it, I want to use defparser for the performance it brings, Im using the parser to evaluate musical expressions in realtime music application"><a href="#t1504124438000250" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:20:38</span>           hlolli </span><span>yes, that fixes it, I want to use defparser for the performance it brings, Im using the parser to evaluate musical expressions in realtime music application</span></div><div id="t1504124898000398" t="2017-08-30 20:28:18 aengelberg makes sense."><a href="#t1504124898000398" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:28:18</span>       aengelberg </span><span>makes sense.</span></div><div id="t1504124915000515" t="2017-08-30 20:28:35 aengelberg also that sounds cool, is your application similar to  https://github.com/alda-lang/alda  ?"><a href="#t1504124915000515" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:28:35</span>       aengelberg </span><span>also that sounds cool, is your application similar to </span><a href="https://github.com/alda-lang/alda" target="_blank">https://github.com/alda-lang/alda</a><span> ?</span></div><div id="t1504125495000146" t="2017-08-30 20:38:15 gfredericks The Adlaphone: a musical instrument for programmers"><a href="#t1504125495000146" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:38:15</span>      gfredericks </span><span>The Adlaphone: a musical instrument for programmers</span></div><div id="t1504125598000160" t="2017-08-30 20:39:58 hlolli only very partially similar to Alda, the use of parser is very limited, and only an extra feature Im implementing atm."><a href="#t1504125598000160" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:39:58</span>           hlolli </span><span>only very partially similar to Alda, the use of parser is very limited, and only an extra feature Im implementing atm.</span></div><div id="t1504125673000665" t="2017-08-30 20:41:13 hlolli more about native datatypes Im sending to Csound, audio processing language, and make simple repetitive patterns."><a href="#t1504125673000665" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:41:13</span>           hlolli </span><span>more about native datatypes Im sending to Csound, audio processing language, and make simple repetitive patterns.</span></div><div id="t1504126474000055" t="2017-08-30 20:54:34 hlolli loud thinking, I notice that the function regex gets called twice by defparser but once on parse, the second time the input is  &quot;/^[0-9]+\.?[0-9]*/&quot;  and returnes  #&quot;^\/^[0-9]+\.?[0-9]*\/&quot;"><a href="#t1504126474000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:54:34</span>           hlolli </span><span>loud thinking, I notice that the function regex gets called twice by defparser but once on parse, the second time the input is </span><code>&quot;/^[0-9]+\.?[0-9]*/&quot;</code><span> and returnes </span><code>#&quot;^\/^[0-9]+\.?[0-9]*\/&quot;</code></div><div id="t1504126738000586" t="2017-08-30 20:58:58 hlolli ah fixed it  🙂"><a href="#t1504126738000586" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">20:58:58</span>           hlolli </span><span>ah fixed it </span><b>🙂</b></div><div id="t1504126805000018" t="2017-08-30 21:00:05 hlolli in  defparse  macro I commented
 ;; Regexp terminals are handled differently in cljs
 ;; (= :regexp (:tag form))
 ;; `(merge (c/regexp ~(str (:regexp form)))
 ;;         ~(dissoc form :tag :regexp))
 
maybe I should test the standard cljs and see if this is also a problem there."><a href="#t1504126805000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-08-30</span> <span class="t" onclick="H(this)">21:00:05</span>           hlolli </span><span>in </span><code>defparse</code><span> macro I commented
</span><pre>;; Regexp terminals are handled differently in cljs
 ;; (= :regexp (:tag form))
 ;; `(merge (c/regexp ~(str (:regexp form)))
 ;;         ~(dissoc form :tag :regexp))
</pre><span>
maybe I should test the standard cljs and see if this is also a problem there.</span></div><div id="t1509542821000384" t="2017-11-01 13:27:01 Empperi does someone happen to know if there is a ready tool to convert W3C EBNF declarations to format which instaparse understands?"><a href="#t1509542821000384" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-01</span> <span class="t" onclick="H(this)">13:27:01</span>          Empperi </span><span>does someone happen to know if there is a ready tool to convert W3C EBNF declarations to format which instaparse understands?</span></div><div id="t1509542841000008" t="2017-11-01 13:27:21 Empperi specifically I’m looking for SPARQL ebnf declarations which I could feed into instaparse"><a href="#t1509542841000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-01</span> <span class="t" onclick="H(this)">13:27:21</span>          Empperi </span><span>specifically I’m looking for SPARQL ebnf declarations which I could feed into instaparse</span></div><div id="t1509543153000404" t="2017-11-01 13:32:33 Empperi I would also accept an ANTLR -&gt; instaparse converter"><a href="#t1509543153000404" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-01</span> <span class="t" onclick="H(this)">13:32:33</span>          Empperi </span><span>I would also accept an ANTLR -&gt; instaparse converter</span></div><div id="t1509552429000222" t="2017-11-01 16:07:09 novel instaparse understands the SPARQL grammar from w3c. you just have to adapt the production rules for the terminals so that instaparse will detect them as regexes. See for instance  https://github.com/mladvladimir/sparqlom/blob/master/resources/sparql.ebnf"><a href="#t1509552429000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-01</span> <span class="t" onclick="H(this)">16:07:09</span>            novel </span><span>instaparse understands the SPARQL grammar from w3c. you just have to adapt the production rules for the terminals so that instaparse will detect them as regexes. See for instance </span><a href="https://github.com/mladvladimir/sparqlom/blob/master/resources/sparql.ebnf" target="_blank">https://github.com/mladvladimir/sparqlom/blob/master/resources/sparql.ebnf</a></div><div id="t1509623299000118" t="2017-11-02 11:48:19 Empperi yeah, I know it is almost the same. What you just linked looks like actually a ready made file which instaparse should be able to digest"><a href="#t1509623299000118" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">11:48:19</span>          Empperi </span><span>yeah, I know it is almost the same. What you just linked looks like actually a ready made file which instaparse should be able to digest</span></div><div id="t1509623313000093" t="2017-11-02 11:48:33 Empperi looks promising, need to test that out, thanks!  👍"><a href="#t1509623313000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">11:48:33</span>          Empperi </span><span>looks promising, need to test that out, thanks! </span><b>👍</b></div><div id="t1509623580000103" t="2017-11-02 11:53:00 Empperi indeed, instaparse happily consumed that file. My first SPARQL query did not get through the parser though but it is much easier to proceed from here"><a href="#t1509623580000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-02</span> <span class="t" onclick="H(this)">11:53:00</span>          Empperi </span><span>indeed, instaparse happily consumed that file. My first SPARQL query did not get through the parser though but it is much easier to proceed from here</span></div><div id="t1510149424000317" t="2017-11-08 13:57:04 tbrooke I am looking at a project that uses  https://nearley.js.org/  in javascript  which uses Early parsing — I did find an old Clojure repo that mentioned early parsing --- I am somewhat new to parsing and wondered if anyone was up on early parsing or whether I could do the same thing in Clojure with instaparse or another library - I don’t want to use javascript and I would like to rewrite the parser with Clojure Clojurescript"><a href="#t1510149424000317" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-08</span> <span class="t" onclick="H(this)">13:57:04</span>          tbrooke </span><span>I am looking at a project that uses </span><a href="https://nearley.js.org/" target="_blank">https://nearley.js.org/</a><span> in javascript  which uses Early parsing — I did find an old Clojure repo that mentioned early parsing --- I am somewhat new to parsing and wondered if anyone was up on early parsing or whether I could do the same thing in Clojure with instaparse or another library - I don’t want to use javascript and I would like to rewrite the parser with Clojure Clojurescript</span></div><div id="t1511456117000090" t="2017-11-23 16:55:17 jeremys Hey guys, I am playing with instaparse and I have a problem contructucting a grammar."><a href="#t1511456117000090" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">16:55:17</span>          jeremys </span><span>Hey guys, I am playing with instaparse and I have a problem contructucting a grammar.</span></div><div id="t1511456138000016" t="2017-11-23 16:55:38 jeremys Here is what I am going for  (insta/defparser ex7
  &quot;
  doc = (text | tag)*
  text = #&apos;[^@]*&apos;
  tag = &apos;@&apos; #&apos;[a-z]*&apos; inner-text*
  inner-text = &apos;{&apos; #&apos;[^}]*&apos; &apos;}&apos;
  &quot;)

(ex7 &quot;some text @toto{inner text}&quot;)"><a href="#t1511456138000016" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">16:55:38</span>          jeremys </span><span>Here is what I am going for </span><pre>(insta/defparser ex7
  &quot;
  doc = (text | tag)*
  text = #&apos;[^@]*&apos;
  tag = &apos;@&apos; #&apos;[a-z]*&apos; inner-text*
  inner-text = &apos;{&apos; #&apos;[^}]*&apos; &apos;}&apos;
  &quot;)

(ex7 &quot;some text @toto{inner text}&quot;)</pre></div><div id="t1511456314000190" t="2017-11-23 16:58:34 jeremys The problem is the parser when parsing a  tag  rule won’t consider the  inner-text  rule giving me the parse  [:doc [:text &quot;some text &quot;] [:tag &quot;@&quot; &quot;toto&quot;] [:text &quot;{inner text}&quot;]]"><a href="#t1511456314000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">16:58:34</span>          jeremys </span><span>The problem is the parser when parsing a </span><code>tag</code><span> rule won’t consider the </span><code>inner-text</code><span> rule giving me the parse </span><pre>[:doc [:text &quot;some text &quot;] [:tag &quot;@&quot; &quot;toto&quot;] [:text &quot;{inner text}&quot;]]</pre></div><div id="t1511456355000407" t="2017-11-23 16:59:15 jeremys instead of the desired  [:doc [:text &quot;some text &quot;] [:tag &quot;@&quot; &quot;toto&quot; [:inner-text &quot;{&quot; &quot;inner text&quot; &quot;}&quot;]]]"><a href="#t1511456355000407" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">16:59:15</span>          jeremys </span><span>instead of the desired </span><pre>[:doc [:text &quot;some text &quot;] [:tag &quot;@&quot; &quot;toto&quot; [:inner-text &quot;{&quot; &quot;inner text&quot; &quot;}&quot;]]]</pre></div><div id="t1511456512000152" t="2017-11-23 17:01:52 jeremys Any Idea how I can modify the grammar to consider the  inner-text rule  before going back to the  text  one ?"><a href="#t1511456512000152" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">17:01:52</span>          jeremys </span><span>Any Idea how I can modify the grammar to consider the </span><code>inner-text rule</code><span> before going back to the </span><code>text</code><span> one ?</span></div><div id="t1511474837000040" t="2017-11-23 22:07:17 aengelberg @jeremys Maybe change  inner-text*  to  inner-text* !inner-text , to ensure that it parses as many inner-texts as it can."><a href="#t1511474837000040" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">22:07:17</span>       aengelberg </span><span>@jeremys Maybe change </span><code>inner-text*</code><span> to </span><code>inner-text* !inner-text</code><span>, to ensure that it parses as many inner-texts as it can.</span></div><div id="t1511479153000098" t="2017-11-23 23:19:13 jeremys @aengelberg Thx Alex I’ll try to use the lookahead, I haven’t played with that yet."><a href="#t1511479153000098" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-23</span> <span class="t" onclick="H(this)">23:19:13</span>          jeremys </span><span>@aengelberg Thx Alex I’ll try to use the lookahead, I haven’t played with that yet.</span></div><div id="t1511528308000271" t="2017-11-24 12:58:28 jeremys @aengelberg Thx for the help, the negative lookahead work perfectly. I also started a thread on clojureverse with that question. You can find it here  https://clojureverse.org/t/need-a-bit-of-help-with-an-instaparse-grammar/965/4"><a href="#t1511528308000271" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-24</span> <span class="t" onclick="H(this)">12:58:28</span>          jeremys </span><span>@aengelberg Thx for the help, the negative lookahead work perfectly. I also started a thread on clojureverse with that question. You can find it here </span><a href="https://clojureverse.org/t/need-a-bit-of-help-with-an-instaparse-grammar/965/4" target="_blank">https://clojureverse.org/t/need-a-bit-of-help-with-an-instaparse-grammar/965/4</a></div><div id="t1512066231000301" t="2017-11-30 18:23:51 mrchance hi, is there a possibility in instaparse to bind parse results? For example, when looking for a matching closing tag?"><a href="#t1512066231000301" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">18:23:51</span>         mrchance </span><span>hi, is there a possibility in instaparse to bind parse results? For example, when looking for a matching closing tag?</span></div><div id="t1512066858000669" t="2017-11-30 18:34:18 aengelberg @mrchance sadly no. I&apos;d recommend writing your parser so that it accepts any pair of tags (matching or not), and then separately do some validation to make sure the tag pairs are well formed."><a href="#t1512066858000669" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">18:34:18</span>       aengelberg </span><span>@mrchance sadly no. I&apos;d recommend writing your parser so that it accepts any pair of tags (matching or not), and then separately do some validation to make sure the tag pairs are well formed.</span></div><div id="t1512067348000047" t="2017-11-30 18:42:28 mrchance ok, thanks. Should be easy enough to do in the transform step"><a href="#t1512067348000047" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-11-30</span> <span class="t" onclick="H(this)">18:42:28</span>         mrchance </span><span>ok, thanks. Should be easy enough to do in the transform step</span></div><div id="t1513158486000324" t="2017-12-13 09:48:06 Empperi hmm, I have a rather large EBNF that I’m using to initialize an instaparse parser in ClojureScript"><a href="#t1513158486000324" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">09:48:06</span>          Empperi </span><span>hmm, I have a rather large EBNF that I’m using to initialize an instaparse parser in ClojureScript</span></div><div id="t1513158518000291" t="2017-12-13 09:48:38 Empperi It works just fine but the problem is that the parser creation takes a long time and since it’s ClojureScript that causes the UI to freeze while it is being created"><a href="#t1513158518000291" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">09:48:38</span>          Empperi </span><span>It works just fine but the problem is that the parser creation takes a long time and since it’s ClojureScript that causes the UI to freeze while it is being created</span></div><div id="t1513158541000381" t="2017-12-13 09:49:01 Empperi I was wondering if there is any way to do this in a webworker and if anyone has tried to do that before"><a href="#t1513158541000381" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">09:49:01</span>          Empperi </span><span>I was wondering if there is any way to do this in a webworker and if anyone has tried to do that before</span></div><div id="t1513158565000083" t="2017-12-13 09:49:25 Empperi my initial feeling is that “no you cannot use webworkers” since they work with message passing and as such only Strings can be passed"><a href="#t1513158565000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">09:49:25</span>          Empperi </span><span>my initial feeling is that “no you cannot use webworkers” since they work with message passing and as such only Strings can be passed</span></div><div id="t1513158633000112" t="2017-12-13 09:50:33 Empperi ideas?"><a href="#t1513158633000112" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">09:50:33</span>          Empperi </span><span>ideas?</span></div><div id="t1513159528000125" t="2017-12-13 10:05:28 hlolli @niklas.collin are you using the defparser macro?"><a href="#t1513159528000125" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:05:28</span>           hlolli </span><span>@niklas.collin are you using the defparser macro?</span></div><div id="t1513159553000272" t="2017-12-13 10:05:53 Empperi no, I’m using  instaparse.core/parser"><a href="#t1513159553000272" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:05:53</span>          Empperi </span><span>no, I’m using </span><code>instaparse.core/parser</code></div><div id="t1513159584000252" t="2017-12-13 10:06:24 hlolli I wonder if you&apos;d be faster if you&apos;d be using the macro, then it precompiles a bit."><a href="#t1513159584000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:06:24</span>           hlolli </span><span>I wonder if you&apos;d be faster if you&apos;d be using the macro, then it precompiles a bit.</span></div><div id="t1513159594000312" t="2017-12-13 10:06:34 Empperi dunno, maybe"><a href="#t1513159594000312" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:06:34</span>          Empperi </span><span>dunno, maybe</span></div><div id="t1513159601000532" t="2017-12-13 10:06:41 Empperi I could try"><a href="#t1513159601000532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:06:41</span>          Empperi </span><span>I could try</span></div><div id="t1513159672000189" t="2017-12-13 10:07:52 Empperi well, that’s what the  defparser  documentation in instaparse github page says that it should work better"><a href="#t1513159672000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:07:52</span>          Empperi </span><span>well, that’s what the </span><code>defparser</code><span> documentation in instaparse github page says that it should work better</span></div><div id="t1513159677000064" t="2017-12-13 10:07:57 Empperi thanks, will try that"><a href="#t1513159677000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:07:57</span>          Empperi </span><span>thanks, will try that</span></div><div id="t1513160901000320" t="2017-12-13 10:28:21 Empperi yeah, now performance is pretty much instant"><a href="#t1513160901000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:28:21</span>          Empperi </span><span>yeah, now performance is pretty much instant</span></div><div id="t1513160904000496" t="2017-12-13 10:28:24 Empperi cheers  🙂"><a href="#t1513160904000496" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">10:28:24</span>          Empperi </span><span>cheers </span><b>🙂</b></div><div id="t1513184675000169" t="2017-12-13 17:04:35 aengelberg @hlolli yep, that&apos;s exactly what it&apos;s meant for. @niklas.collin I&apos;m glad it served its purpose!"><a href="#t1513184675000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-13</span> <span class="t" onclick="H(this)">17:04:35</span>       aengelberg </span><span>@hlolli yep, that&apos;s exactly what it&apos;s meant for. @niklas.collin I&apos;m glad it served its purpose!</span></div><div id="t1513269088000597" t="2017-12-14 16:31:28 mbjarland I&apos;m playing around with instaparse and for kicks and giggles I wrote a parser to parse some log files I have laying around"><a href="#t1513269088000597" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:31:28</span>        mbjarland </span><span>I&apos;m playing around with instaparse and for kicks and giggles I wrote a parser to parse some log files I have laying around</span></div><div id="t1513269110000334" t="2017-12-14 16:31:50 mbjarland is there a way to define a fixed width &quot;anything goes&quot; string in instaparse"><a href="#t1513269110000334" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:31:50</span>        mbjarland </span><span>is there a way to define a fixed width &quot;anything goes&quot; string in instaparse</span></div><div id="t1513269153000731" t="2017-12-14 16:32:33 mbjarland i.e. if I just want to gobble up a few characters into a tree node and don&apos;t care about the content there, is that possible?"><a href="#t1513269153000731" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:32:33</span>        mbjarland </span><span>i.e. if I just want to gobble up a few characters into a tree node and don&apos;t care about the content there, is that possible?</span></div><div id="t1513269156000605" t="2017-12-14 16:32:36 aengelberg Fixed width? Maybe  #&apos;.{N}&apos; ?"><a href="#t1513269156000605" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:32:36</span>       aengelberg </span><span>Fixed width? Maybe </span><code>#&apos;.{N}&apos;</code><span>?</span></div><div id="t1513269189000338" t="2017-12-14 16:33:09 mbjarland right, yes regex does the job but is probably not very performant for just &quot;take substring of 10 from where you are&quot;"><a href="#t1513269189000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:33:09</span>        mbjarland </span><span>right, yes regex does the job but is probably not very performant for just &quot;take substring of 10 from where you are&quot;</span></div><div id="t1513269270000018" t="2017-12-14 16:34:30 mbjarland ok, so regex is the way to go for this in instaparse?"><a href="#t1513269270000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:34:30</span>        mbjarland </span><span>ok, so regex is the way to go for this in instaparse?</span></div><div id="t1513269301000532" t="2017-12-14 16:35:01 aengelberg I think regex is the most performant way to grab a not-static set of characters"><a href="#t1513269301000532" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:35:01</span>       aengelberg </span><span>I think regex is the most performant way to grab a not-static set of characters</span></div><div id="t1513269428000382" t="2017-12-14 16:37:08 mbjarland : ) well I should probably mention that I think instaparse is excellent and by far the best parser lib I&apos;ve run across....so my intent was not to come here and critique it"><a href="#t1513269428000382" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:37:08</span>        mbjarland </span><span>: ) well I should probably mention that I think instaparse is excellent and by far the best parser lib I&apos;ve run across....so my intent was not to come here and critique it</span></div><div id="t1513269480000011" t="2017-12-14 16:38:00 aengelberg Thanks! And no worries, I was just answering your question from the perspective of what instaparse actually supports"><a href="#t1513269480000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:38:00</span>       aengelberg </span><span>Thanks! And no worries, I was just answering your question from the perspective of what instaparse actually supports</span></div><div id="t1513269503000194" t="2017-12-14 16:38:23 mbjarland that being said...if I parse 2G of log files (without instaparse) and compare the simplest regex match with  (subs line 10 20) , regex performace doesn&apos;t exactly shine"><a href="#t1513269503000194" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:38:23</span>        mbjarland </span><span>that being said...if I parse 2G of log files (without instaparse) and compare the simplest regex match with </span><code>(subs line 10 20)</code><span>, regex performace doesn&apos;t exactly shine</span></div><div id="t1513269512000419" t="2017-12-14 16:38:32 aengelberg But I see your point that if it theoretically supported a dedicated &quot;substring&quot; combinator, that would be faster"><a href="#t1513269512000419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:38:32</span>       aengelberg </span><span>But I see your point that if it theoretically supported a dedicated &quot;substring&quot; combinator, that would be faster</span></div><div id="t1513269599000897" t="2017-12-14 16:39:59 mbjarland anyway, figured I would ask, but regex does indeed do the job and perhaps what I&apos;m doing with this parser is a bit of an edge case"><a href="#t1513269599000897" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:39:59</span>        mbjarland </span><span>anyway, figured I would ask, but regex does indeed do the job and perhaps what I&apos;m doing with this parser is a bit of an edge case</span></div><div id="t1513269625000280" t="2017-12-14 16:40:25 aengelberg Maybe we should support &quot;custom combinators&quot; so people like you with special use cases can write their own more performant specialized versions"><a href="#t1513269625000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:40:25</span>       aengelberg </span><span>Maybe we should support &quot;custom combinators&quot; so people like you with special use cases can write their own more performant specialized versions</span></div><div id="t1513269642000280" t="2017-12-14 16:40:42 mbjarland that would be awesome"><a href="#t1513269642000280" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:40:42</span>        mbjarland </span><span>that would be awesome</span></div><div id="t1513269767000926" t="2017-12-14 16:42:47 mbjarland you would have to add some kind of extension point to the instaparse bnf syntax I guess"><a href="#t1513269767000926" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:42:47</span>        mbjarland </span><span>you would have to add some kind of extension point to the instaparse bnf syntax I guess</span></div><div id="t1513270025000180" t="2017-12-14 16:47:05 aengelberg Maybe, or we don&apos;t allow extensions to the EBNF syntax and just let people make custom combinators for the combinator syntax"><a href="#t1513270025000180" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:47:05</span>       aengelberg </span><span>Maybe, or we don&apos;t allow extensions to the EBNF syntax and just let people make custom combinators for the combinator syntax</span></div><div id="t1513270249000614" t="2017-12-14 16:50:49 mbjarland ah, ok, hadn&apos;t grokked the combinators syntax until now"><a href="#t1513270249000614" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:50:49</span>        mbjarland </span><span>ah, ok, hadn&apos;t grokked the combinators syntax until now</span></div><div id="t1513270583000245" t="2017-12-14 16:56:23 mbjarland right now I&apos;m considering writing my own mini language for this log parsing, I could use instaparse to parse that language and then do custom, optimized parsing based on the format specification tree coming out from instaparse...so still useful"><a href="#t1513270583000245" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">16:56:23</span>        mbjarland </span><span>right now I&apos;m considering writing my own mini language for this log parsing, I could use instaparse to parse that language and then do custom, optimized parsing based on the format specification tree coming out from instaparse...so still useful</span></div><div id="t1513272095000419" t="2017-12-14 17:21:35 mbjarland hmm, how come I need to double escape the not-inclusive rule in the following grammmar: 
 (def my-p 
  (instaparse.core/parser 
    &quot;spec = (field-spec &lt;&apos; &apos;?&gt;)+
     field-spec = &lt;&apos;[&apos;&gt;name &apos; &apos;* &lt;&apos;:&apos;&gt; &apos; &apos;* (width | not-inclusive | not-exclusive | rest)&lt;&apos;]&apos;&gt;
     name = #&apos;[^:]+&apos;
     width = &lt;&apos;{&apos;&gt; #&apos;\\d+&apos; &lt;&apos;}&apos;&gt;
     not-inclusive = &lt;&apos;\\\\&apos;&gt; #&apos;.&apos;
     not-exclusive = &lt;&apos;/&apos;&gt; #&apos;.&apos;
     rest = &apos;*&apos;    
    &quot;))
"><a href="#t1513272095000419" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:21:35</span>        mbjarland </span><span>hmm, how come I need to double escape the not-inclusive rule in the following grammmar: 
</span><pre>(def my-p 
  (instaparse.core/parser 
    &quot;spec = (field-spec &lt;&apos; &apos;?&gt;)+
     field-spec = &lt;&apos;[&apos;&gt;name &apos; &apos;* &lt;&apos;:&apos;&gt; &apos; &apos;* (width | not-inclusive | not-exclusive | rest)&lt;&apos;]&apos;&gt;
     name = #&apos;[^:]+&apos;
     width = &lt;&apos;{&apos;&gt; #&apos;\\d+&apos; &lt;&apos;}&apos;&gt;
     not-inclusive = &lt;&apos;\\\\&apos;&gt; #&apos;.&apos;
     not-exclusive = &lt;&apos;/&apos;&gt; #&apos;.&apos;
     rest = &apos;*&apos;    
    &quot;))
</pre></div><div id="t1513272145000423" t="2017-12-14 17:22:25 aengelberg you mean the  &apos;\\\\&apos; ?"><a href="#t1513272145000423" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:22:25</span>       aengelberg </span><span>you mean the </span><code>&apos;\\\\&apos;</code><span>?</span></div><div id="t1513272147000648" t="2017-12-14 17:22:27 mbjarland yeah"><a href="#t1513272147000648" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:22:27</span>        mbjarland </span><span>yeah</span></div><div id="t1513272161000042" t="2017-12-14 17:22:41 mbjarland shouldn&apos;t two have been enough?"><a href="#t1513272161000042" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:22:41</span>        mbjarland </span><span>shouldn&apos;t two have been enough?</span></div><div id="t1513272189000479" t="2017-12-14 17:23:09 aengelberg because
1) you need to tell Clojure that you aren&apos;t escaping a character within a string
2) you need to tell Instaparse that you aren&apos;t escaping a character within a string combinator"><a href="#t1513272189000479" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:23:09</span>       aengelberg </span><span>because
1) you need to tell Clojure that you aren&apos;t escaping a character within a string
2) you need to tell Instaparse that you aren&apos;t escaping a character within a string combinator</span></div><div id="t1513272214000533" t="2017-12-14 17:23:34 mbjarland ok, missed point 2 there"><a href="#t1513272214000533" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-14</span> <span class="t" onclick="H(this)">17:23:34</span>        mbjarland </span><span>ok, missed point 2 there</span></div><div id="t1513329003000190" t="2017-12-15 09:10:03 Empperi is there some way in instaparse to ask for all possible grammar elements at certain point of the parse tree?"><a href="#t1513329003000190" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:10:03</span>          Empperi </span><span>is there some way in instaparse to ask for all possible grammar elements at certain point of the parse tree?</span></div><div id="t1513329037000187" t="2017-12-15 09:10:37 Empperi meaning, I have parse result, I take a specific point in that parse tree and the would get a list of parse elements that could go there"><a href="#t1513329037000187" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:10:37</span>          Empperi </span><span>meaning, I have parse result, I take a specific point in that parse tree and the would get a list of parse elements that could go there</span></div><div id="t1513329059000451" t="2017-12-15 09:10:59 Empperi I could theoretically write an EBNF analyzer to do just this but don’t feel like it unless I have to"><a href="#t1513329059000451" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:10:59</span>          Empperi </span><span>I could theoretically write an EBNF analyzer to do just this but don’t feel like it unless I have to</span></div><div id="t1513329072000215" t="2017-12-15 09:11:12 Empperi since I think instaparse already does this somewhere under the hood and has the necessary information"><a href="#t1513329072000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:11:12</span>          Empperi </span><span>since I think instaparse already does this somewhere under the hood and has the necessary information</span></div><div id="t1513329594000105" t="2017-12-15 09:19:54 Empperi hmm, there is  instaparse.cfg/ebnf , need look at it and if it would provide the necessary information"><a href="#t1513329594000105" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:19:54</span>          Empperi </span><span>hmm, there is </span><code>instaparse.cfg/ebnf</code><span>, need look at it and if it would provide the necessary information</span></div><div id="t1513329704000088" t="2017-12-15 09:21:44 Empperi actually it looks like it just might"><a href="#t1513329704000088" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">09:21:44</span>          Empperi </span><span>actually it looks like it just might</span></div><div id="t1513357178000066" t="2017-12-15 16:59:38 aengelberg @niklas.collin not sure what you&apos;re asking. what would be an example of using this functionality?"><a href="#t1513357178000066" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">16:59:38</span>       aengelberg </span><span>@niklas.collin not sure what you&apos;re asking. what would be an example of using this functionality?</span></div><div id="t1513357271000107" t="2017-12-15 17:01:11 Empperi Autocomplete suggestions for code editor"><a href="#t1513357271000107" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">17:01:11</span>          Empperi </span><span>Autocomplete suggestions for code editor</span></div><div id="t1513357314000298" t="2017-12-15 17:01:54 Empperi And the result from cfg/ebnf looks ok usable"><a href="#t1513357314000298" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">17:01:54</span>          Empperi </span><span>And the result from cfg/ebnf looks ok usable</span></div><div id="t1513371973000379" t="2017-12-15 21:06:13 aengelberg There have been a few discussions about generating data for a parser, or listing possible inputs to a parser"><a href="#t1513371973000379" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">21:06:13</span>       aengelberg </span><span>There have been a few discussions about generating data for a parser, or listing possible inputs to a parser</span></div><div id="t1513371979000069" t="2017-12-15 21:06:19 aengelberg Not sure the best path to exposing that"><a href="#t1513371979000069" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">21:06:19</span>       aengelberg </span><span>Not sure the best path to exposing that</span></div><div id="t1513372021000480" t="2017-12-15 21:07:01 aengelberg are you sure  ebnf  is what you want? That just creates a combinator based on an EBNF spec, it doesn&apos;t generate a list of things that could go there"><a href="#t1513372021000480" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-15</span> <span class="t" onclick="H(this)">21:07:01</span>       aengelberg </span><span>are you sure </span><code>ebnf</code><span> is what you want? That just creates a combinator based on an EBNF spec, it doesn&apos;t generate a list of things that could go there</span></div><div id="t1513446177000041" t="2017-12-16 17:42:57 borkdude Hello. Why is my InstaParser so slow? 850ms vs 8ms hand-written Clojure:
 https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L119"><a href="#t1513446177000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:42:57</span>         borkdude </span><span>Hello. Why is my InstaParser so slow? 850ms vs 8ms hand-written Clojure:
</span><a href="https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L119" target="_blank">https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L119</a></div><div id="t1513446189000064" t="2017-12-16 17:43:09 borkdude Maybe it’s my grammar, but I don’t see it."><a href="#t1513446189000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:43:09</span>         borkdude </span><span>Maybe it’s my grammar, but I don’t see it.</span></div><div id="t1513446192000109" t="2017-12-16 17:43:12 aengelberg How big is the input?"><a href="#t1513446192000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:43:12</span>       aengelberg </span><span>How big is the input?</span></div><div id="t1513446207000011" t="2017-12-16 17:43:27 borkdude The input is this:  https://github.com/borkdude/aoc2017/blob/master/resources/day16.txt"><a href="#t1513446207000011" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:43:27</span>         borkdude </span><span>The input is this: </span><a href="https://github.com/borkdude/aoc2017/blob/master/resources/day16.txt" target="_blank">https://github.com/borkdude/aoc2017/blob/master/resources/day16.txt</a></div><div id="t1513446275000004" t="2017-12-16 17:44:35 borkdude Here’s the grammar:  https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L17"><a href="#t1513446275000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:44:35</span>         borkdude </span><span>Here’s the grammar: </span><a href="https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L17" target="_blank">https://github.com/borkdude/aoc2017/blob/master/src/day16.clj#L17</a></div><div id="t1513446514000080" t="2017-12-16 17:48:34 aengelberg I mean, you&apos;re basically generating one string per character in a 40kb file. I&apos;m not surprised it&apos;s slow."><a href="#t1513446514000080" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:48:34</span>       aengelberg </span><span>I mean, you&apos;re basically generating one string per character in a 40kb file. I&apos;m not surprised it&apos;s slow.</span></div><div id="t1513446531000067" t="2017-12-16 17:48:51 aengelberg And wrapping with vectors, etc"><a href="#t1513446531000067" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:48:51</span>       aengelberg </span><span>And wrapping with vectors, etc</span></div><div id="t1513446631000086" t="2017-12-16 17:50:31 borkdude That’s fair, but even without wrapping the arguments I get a similar time"><a href="#t1513446631000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:50:31</span>         borkdude </span><span>That’s fair, but even without wrapping the arguments I get a similar time</span></div><div id="t1513446648000041" t="2017-12-16 17:50:48 borkdude I had that before, but I wanted to transform the arguments to ints, that’s why I wrapped them later"><a href="#t1513446648000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:50:48</span>         borkdude </span><span>I had that before, but I wanted to transform the arguments to ints, that’s why I wrapped them later</span></div><div id="t1513446693000068" t="2017-12-16 17:51:33 aengelberg Hmm yeah"><a href="#t1513446693000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:51:33</span>       aengelberg </span><span>Hmm yeah</span></div><div id="t1513446801000093" t="2017-12-16 17:53:21 borkdude I mean, it’s not really a problem, but just curious why or if I made a mistake in my grammar"><a href="#t1513446801000093" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:53:21</span>         borkdude </span><span>I mean, it’s not really a problem, but just curious why or if I made a mistake in my grammar</span></div><div id="t1513446835000100" t="2017-12-16 17:53:55 aengelberg I don&apos;t think you made a mistake like an ambiguity issue or anything"><a href="#t1513446835000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:53:55</span>       aengelberg </span><span>I don&apos;t think you made a mistake like an ambiguity issue or anything</span></div><div id="t1513446863000039" t="2017-12-16 17:54:23 aengelberg It&apos;s just really exercising the parser&apos;s dataflow overhead"><a href="#t1513446863000039" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:54:23</span>       aengelberg </span><span>It&apos;s just really exercising the parser&apos;s dataflow overhead</span></div><div id="t1513446915000048" t="2017-12-16 17:55:15 aengelberg I saw similar issues when trying to perf-tune @dave&apos;s Alda parser a while ago"><a href="#t1513446915000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:55:15</span>       aengelberg </span><span>I saw similar issues when trying to perf-tune @dave&apos;s Alda parser a while ago</span></div><div id="t1513446969000061" t="2017-12-16 17:56:09 aengelberg Because his rules were like &quot;if you see this single character, parse this other single character&quot;"><a href="#t1513446969000061" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:56:09</span>       aengelberg </span><span>Because his rules were like &quot;if you see this single character, parse this other single character&quot;</span></div><div id="t1513447061000023" t="2017-12-16 17:57:41 aengelberg Instaparse does a lot of bookkeeping during a parse to make sure it magically works with weirdly recursive grammars, so for super low level parsers like this it doesn&apos;t exactly shine"><a href="#t1513447061000023" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:57:41</span>       aengelberg </span><span>Instaparse does a lot of bookkeeping during a parse to make sure it magically works with weirdly recursive grammars, so for super low level parsers like this it doesn&apos;t exactly shine</span></div><div id="t1513447077000037" t="2017-12-16 17:57:57 borkdude (def parse2
  (insta/parser
   &quot;&lt;INPUT&gt;       = (INSTRUCTION &lt;&apos;,&apos;&gt;)+ INSTRUCTION 
    &lt;INSTRUCTION&gt; = SPIN | EXCHANGE | PARTNER
    SPIN          = &lt;&apos;s&apos;&gt; POSITION
    EXCHANGE      = &lt;&apos;x&apos;&gt; POSITION &lt;&apos;/&apos;&gt; POSITION
    PARTNER       = &lt;&apos;p&apos;&gt; PROGRAM  &lt;&apos;/&apos;&gt; PROGRAM
    &lt;POSITION&gt;    = #&apos;\\d\\d?&apos;
    &lt;PROGRAM&gt;     = #&apos;[a-p]&apos;&quot;))
 
No nesting of position and program, 800ms"><a href="#t1513447077000037" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:57:57</span>         borkdude </span><pre>(def parse2
  (insta/parser
   &quot;&lt;INPUT&gt;       = (INSTRUCTION &lt;&apos;,&apos;&gt;)+ INSTRUCTION 
    &lt;INSTRUCTION&gt; = SPIN | EXCHANGE | PARTNER
    SPIN          = &lt;&apos;s&apos;&gt; POSITION
    EXCHANGE      = &lt;&apos;x&apos;&gt; POSITION &lt;&apos;/&apos;&gt; POSITION
    PARTNER       = &lt;&apos;p&apos;&gt; PROGRAM  &lt;&apos;/&apos;&gt; PROGRAM
    &lt;POSITION&gt;    = #&apos;\\d\\d?&apos;
    &lt;PROGRAM&gt;     = #&apos;[a-p]&apos;&quot;))
</pre><span>
No nesting of position and program, 800ms</span></div><div id="t1513447095000060" t="2017-12-16 17:58:15 borkdude ok"><a href="#t1513447095000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:58:15</span>         borkdude </span><span>ok</span></div><div id="t1513447193000114" t="2017-12-16 17:59:53 aengelberg Just curious, does anything improve if you change the first rule to  INSTRUCTION (&lt;&apos;,&apos;&gt; INSTRUCTION)* ?"><a href="#t1513447193000114" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">17:59:53</span>       aengelberg </span><span>Just curious, does anything improve if you change the first rule to </span><code>INSTRUCTION (&lt;&apos;,&apos;&gt; INSTRUCTION)*</code><span>?</span></div><div id="t1513447485000106" t="2017-12-16 18:04:45 borkdude I wondered about that rule as well. Quickbenching…"><a href="#t1513447485000106" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">18:04:45</span>         borkdude </span><span>I wondered about that rule as well. Quickbenching…</span></div><div id="t1513447513000060" t="2017-12-16 18:05:13 borkdude Yup, 582ms!"><a href="#t1513447513000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">18:05:13</span>         borkdude </span><span>Yup, 582ms!</span></div><div id="t1513447550000002" t="2017-12-16 18:05:50 borkdude Does the order of rules matter for performance?"><a href="#t1513447550000002" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">18:05:50</span>         borkdude </span><span>Does the order of rules matter for performance?</span></div><div id="t1513447581000007" t="2017-12-16 18:06:21 borkdude I mean, when it’s more likely to encounter EXCHANGE, does it help putting that first?"><a href="#t1513447581000007" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-16</span> <span class="t" onclick="H(this)">18:06:21</span>         borkdude </span><span>I mean, when it’s more likely to encounter EXCHANGE, does it help putting that first?</span></div><div id="t1513483794000010" t="2017-12-17 04:09:54 aengelberg I&apos;m not actually sure why that is faster, just a hunch since I haven&apos;t seen the left-recursive usage a whole lot."><a href="#t1513483794000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-17</span> <span class="t" onclick="H(this)">04:09:54</span>       aengelberg </span><span>I&apos;m not actually sure why that is faster, just a hunch since I haven&apos;t seen the left-recursive usage a whole lot.</span></div><div id="t1513599873000247" t="2017-12-18 12:24:33 Empperi @aengelberg definitely not sure if cfg/ebnf is the correct thing but it looks like it provides the necessary data. Not in the format that would be optimal but I think I can kinda do some kind of functionality based on it. For now, I’m mostly happy if I can find the string literals which can go in and I can ignore regexp literals and other more complex stuff. So, basically I do this recursive algorithm which retrieves elements from the combinatioral tree until it finds  :string"><a href="#t1513599873000247" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">12:24:33</span>          Empperi </span><span>@aengelberg definitely not sure if cfg/ebnf is the correct thing but it looks like it provides the necessary data. Not in the format that would be optimal but I think I can kinda do some kind of functionality based on it. For now, I’m mostly happy if I can find the string literals which can go in and I can ignore regexp literals and other more complex stuff. So, basically I do this recursive algorithm which retrieves elements from the combinatioral tree until it finds </span><code>:string</code></div><div id="t1513599884000285" t="2017-12-18 12:24:44 Empperi best I can come up with as it is now"><a href="#t1513599884000285" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-18</span> <span class="t" onclick="H(this)">12:24:44</span>          Empperi </span><span>best I can come up with as it is now</span></div><div id="t1513763521000293" t="2017-12-20 09:52:01 mbjarland say I have the following grammar: 
 (defn make-layout-parser-internal []
  (insta/parser
    &quot;layout-string = col-delim (col-align col-delim)+
     col-delim    = (col-fill | col-padding)*
     col-fill     = (&apos;F&apos; | &apos;f&apos;)
     col-padding  = #&apos;[^\\[\\]fF]*&apos;
     col-align    = &lt;&apos;[&apos;&gt; (&apos;L&apos; | &apos;l&apos; | &apos;C&apos; | &apos;c&apos; | &apos;R&apos; | &apos;r&apos;) &lt;&apos;]&apos;&gt;&quot;))
 
but I want to make a slight modification to it in a certain context. In essence I have two grammars with just a slight differentce between them and depending on the surrounding (non instaparse related) programming context I would like to parse using either grammar a or grammar b. Would I need to define two distinct grammars as per the above or is there some good way to share most of the grammar and have just a slight modification? In my specific case I would have a difference in the  col-align  value only"><a href="#t1513763521000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-20</span> <span class="t" onclick="H(this)">09:52:01</span>        mbjarland </span><span>say I have the following grammar: 
</span><pre>(defn make-layout-parser-internal []
  (insta/parser
    &quot;layout-string = col-delim (col-align col-delim)+
     col-delim    = (col-fill | col-padding)*
     col-fill     = (&apos;F&apos; | &apos;f&apos;)
     col-padding  = #&apos;[^\\[\\]fF]*&apos;
     col-align    = &lt;&apos;[&apos;&gt; (&apos;L&apos; | &apos;l&apos; | &apos;C&apos; | &apos;c&apos; | &apos;R&apos; | &apos;r&apos;) &lt;&apos;]&apos;&gt;&quot;))
</pre><span>
but I want to make a slight modification to it in a certain context. In essence I have two grammars with just a slight differentce between them and depending on the surrounding (non instaparse related) programming context I would like to parse using either grammar a or grammar b. Would I need to define two distinct grammars as per the above or is there some good way to share most of the grammar and have just a slight modification? In my specific case I would have a difference in the </span><code>col-align</code><span> value only</span></div><div id="t1514356761000139" t="2017-12-27 06:39:21 aengelberg @mbjarland you could use combinators to create separate submaps of common components that get merged together in each use case."><a href="#t1514356761000139" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2017-12-27</span> <span class="t" onclick="H(this)">06:39:21</span>       aengelberg </span><span>@mbjarland you could use combinators to create separate submaps of common components that get merged together in each use case.</span></div><div id="t1515401503000113" t="2018-01-08 08:51:43 mbjarland I have a question about greedy parsing and ambiguous grammars, I have the following grammar: 
 (insta/parser
    &quot;layout   = (align | delim | repeat)+
     repeat   = &lt;&apos;{&apos;&gt; (align | delim)+ &lt;&apos;}&apos;&gt;
     delim    = (fill | padding)+
     fill     = &apos;F&apos;
     padding  = #&apos;[^\\[\\]{}fF]*&apos;
     align    = &lt;&apos;[&apos;&gt; (&apos;L&apos; | &apos;C&apos; | &apos;R&apos; | &apos;V&apos;) &lt;&apos;]&apos;&gt;&quot;
    :string-ci true))
 
where the only relevant pieces are the  layout = (align | delim | repeat)+  and  delim = (fill | padding)+  pieces. Assume we get a ‘fill’ followed by a ‘padding’, the parser can here choose between  [:delim [:fill &quot;F&quot;]] [:delim [:padding &quot;xxx&quot;]]  and  [:delim [:fill &quot;F&quot;] [:padding &quot;xxx&quot;]] . This is not really instaparse specific, but rather to do with bnf’s and disambiguating repeating elements. I would like to force the second interpretation where the  delim = (fill | padding)+  is greedy and collects all contiguous delim elements into a list before proceeding. Any ideas much appreciated"><a href="#t1515401503000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">08:51:43</span>        mbjarland </span><span>I have a question about greedy parsing and ambiguous grammars, I have the following grammar: 
</span><pre>(insta/parser
    &quot;layout   = (align | delim | repeat)+
     repeat   = &lt;&apos;{&apos;&gt; (align | delim)+ &lt;&apos;}&apos;&gt;
     delim    = (fill | padding)+
     fill     = &apos;F&apos;
     padding  = #&apos;[^\\[\\]{}fF]*&apos;
     align    = &lt;&apos;[&apos;&gt; (&apos;L&apos; | &apos;C&apos; | &apos;R&apos; | &apos;V&apos;) &lt;&apos;]&apos;&gt;&quot;
    :string-ci true))
</pre><span>
where the only relevant pieces are the </span><code>layout = (align | delim | repeat)+</code><span> and </span><code>delim = (fill | padding)+</code><span> pieces. Assume we get a ‘fill’ followed by a ‘padding’, the parser can here choose between </span><code>[:delim [:fill &quot;F&quot;]] [:delim [:padding &quot;xxx&quot;]]</code><span> and </span><code>[:delim [:fill &quot;F&quot;] [:padding &quot;xxx&quot;]]</code><span>. This is not really instaparse specific, but rather to do with bnf’s and disambiguating repeating elements. I would like to force the second interpretation where the </span><code>delim = (fill | padding)+</code><span> is greedy and collects all contiguous delim elements into a list before proceeding. Any ideas much appreciated</span></div><div id="t1515402087000210" t="2018-01-08 09:01:27 aengelberg @mbjarland you could change  (align | delim)+  to  delim? (align delim?)* , that would force the parser to alternate between delim and align, effectively making the delim rule greedy"><a href="#t1515402087000210" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:01:27</span>       aengelberg </span><span>@mbjarland you could change </span><code>(align | delim)+</code><span> to </span><code>delim? (align delim?)*</code><span>, that would force the parser to alternate between delim and align, effectively making the delim rule greedy</span></div><div id="t1515402205000310" t="2018-01-08 09:03:25 mbjarland and this is why I love the clojure community, thank you for the fast reply! : ) 
are we talking about the first rule  layout = ... ? In that case I would have to cook up a repeating pattern with 3 elements"><a href="#t1515402205000310" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:03:25</span>        mbjarland </span><span>and this is why I love the clojure community, thank you for the fast reply! : ) 
are we talking about the first rule </span><code>layout = ...</code><span>? In that case I would have to cook up a repeating pattern with 3 elements</span></div><div id="t1515402249000327" t="2018-01-08 09:04:09 mbjarland so what I’m doing here is defining a column layout"><a href="#t1515402249000327" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:04:09</span>        mbjarland </span><span>so what I’m doing here is defining a column layout</span></div><div id="t1515402268000326" t="2018-01-08 09:04:28 aengelberg Actually I was talking about the repeat rule. But you made a good point that we&apos;d also have to apply a similar solution to the layout rule to get a similar effect"><a href="#t1515402268000326" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:04:28</span>       aengelberg </span><span>Actually I was talking about the repeat rule. But you made a good point that we&apos;d also have to apply a similar solution to the layout rule to get a similar effect</span></div><div id="t1515402276000164" t="2018-01-08 09:04:36 mbjarland where the repeat says “if the user comes in with more columns than we have defined, use the repeating group to fill out the layout”"><a href="#t1515402276000164" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:04:36</span>        mbjarland </span><span>where the repeat says “if the user comes in with more columns than we have defined, use the repeating group to fill out the layout”</span></div><div id="t1515402309000138" t="2018-01-08 09:05:09 aengelberg Column layout? Not sure what you mean"><a href="#t1515402309000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:05:09</span>       aengelberg </span><span>Column layout? Not sure what you mean</span></div><div id="t1515402327000109" t="2018-01-08 09:05:27 mbjarland never mind, that is really application related and not related to the grammar"><a href="#t1515402327000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:05:27</span>        mbjarland </span><span>never mind, that is really application related and not related to the grammar</span></div><div id="t1515402367000158" t="2018-01-08 09:06:07 mbjarland thought actually explaining what the thing does might clarify, but I think it just muddles the waters even more : )"><a href="#t1515402367000158" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:06:07</span>        mbjarland </span><span>thought actually explaining what the thing does might clarify, but I think it just muddles the waters even more : )</span></div><div id="t1515402401000257" t="2018-01-08 09:06:41 mbjarland I also thought about the  /  ordered parsing syntax, but I can not really see how to apply that to these repeating patterns"><a href="#t1515402401000257" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:06:41</span>        mbjarland </span><span>I also thought about the </span><code>/</code><span> ordered parsing syntax, but I can not really see how to apply that to these repeating patterns</span></div><div id="t1515402467000169" t="2018-01-08 09:07:47 aengelberg layout = delim? ((align | repeat) delim?)*
repeat = &lt;&apos;{&apos;&gt; delim? (align delim?)* &lt;&apos;}&apos;&gt;
"><a href="#t1515402467000169" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:07:47</span>       aengelberg </span><pre>layout = delim? ((align | repeat) delim?)*
repeat = &lt;&apos;{&apos;&gt; delim? (align delim?)* &lt;&apos;}&apos;&gt;
</pre></div><div id="t1515402530000052" t="2018-01-08 09:08:50 mbjarland : )"><a href="#t1515402530000052" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:08:50</span>        mbjarland </span><span>: )</span></div><div id="t1515402551000254" t="2018-01-08 09:09:11 aengelberg Since  align  and  repeat  both require nonzero characters to be present in order for the rule to succeed, wedging them in the repeat rule enforces some regularity in the repetition and thus unambiguates the parsing"><a href="#t1515402551000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:09:11</span>       aengelberg </span><span>Since </span><code>align</code><span> and </span><code>repeat</code><span> both require nonzero characters to be present in order for the rule to succeed, wedging them in the repeat rule enforces some regularity in the repetition and thus unambiguates the parsing</span></div><div id="t1515402599000175" t="2018-01-08 09:09:59 mbjarland that works, I tried it with  insta/parses  and my standard examples and it comes out with a single interpretation"><a href="#t1515402599000175" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:09:59</span>        mbjarland </span><span>that works, I tried it with </span><code>insta/parses</code><span> and my standard examples and it comes out with a single interpretation</span></div><div id="t1515402610000087" t="2018-01-08 09:10:10 mbjarland I will have to meditate on the exact mechanics"><a href="#t1515402610000087" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:10:10</span>        mbjarland </span><span>I will have to meditate on the exact mechanics</span></div><div id="t1515402628000196" t="2018-01-08 09:10:28 aengelberg Yeah, ordered choice doesn&apos;t really help here unless delim was competing with some other rule and you wanted to establish the priority. But in this case delim is just competing with itself, in a way."><a href="#t1515402628000196" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:10:28</span>       aengelberg </span><span>Yeah, ordered choice doesn&apos;t really help here unless delim was competing with some other rule and you wanted to establish the priority. But in this case delim is just competing with itself, in a way.</span></div><div id="t1515402658000032" t="2018-01-08 09:10:58 mbjarland exactly, just a question on what level in the bnf the repetition happens"><a href="#t1515402658000032" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:10:58</span>        mbjarland </span><span>exactly, just a question on what level in the bnf the repetition happens</span></div><div id="t1515402666000081" t="2018-01-08 09:11:06 aengelberg Yeah"><a href="#t1515402666000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:11:06</span>       aengelberg </span><span>Yeah</span></div><div id="t1515402687000211" t="2018-01-08 09:11:27 aengelberg Fortunately that&apos;s easily solved by restructuring the combinators, no fancy PEG combinators necessary"><a href="#t1515402687000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:11:27</span>       aengelberg </span><span>Fortunately that&apos;s easily solved by restructuring the combinators, no fancy PEG combinators necessary</span></div><div id="t1515402693000048" t="2018-01-08 09:11:33 mbjarland this is actually a higher level pattern, I will make sure to grok this properly for the next time I run into an ambiguous repetition"><a href="#t1515402693000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:11:33</span>        mbjarland </span><span>this is actually a higher level pattern, I will make sure to grok this properly for the next time I run into an ambiguous repetition</span></div><div id="t1515402710000159" t="2018-01-08 09:11:50 mbjarland thanks a ton!"><a href="#t1515402710000159" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:11:50</span>        mbjarland </span><span>thanks a ton!</span></div><div id="t1515402725000211" t="2018-01-08 09:12:05 aengelberg No problem"><a href="#t1515402725000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:12:05</span>       aengelberg </span><span>No problem</span></div><div id="t1515403088000172" t="2018-01-08 09:18:08 aengelberg @mbjarland I just thought of another way you could have solved it: ignore the above changes I proposed and instead change  delim  rule to:

 delim = (fill | padding)+ !delim
"><a href="#t1515403088000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:18:08</span>       aengelberg </span><span>@mbjarland I just thought of another way you could have solved it: ignore the above changes I proposed and instead change </span><code>delim</code><span> rule to:

</span><pre>delim = (fill | padding)+ !delim
</pre></div><div id="t1515403121000229" t="2018-01-08 09:18:41 aengelberg Pretty sure my first solution would be more performant, albeit more complex"><a href="#t1515403121000229" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">09:18:41</span>       aengelberg </span><span>Pretty sure my first solution would be more performant, albeit more complex</span></div><div id="t1515411182000082" t="2018-01-08 11:33:02 mbjarland what does the  !delim  do?"><a href="#t1515411182000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-08</span> <span class="t" onclick="H(this)">11:33:02</span>        mbjarland </span><span>what does the </span><code>!delim</code><span> do?</span></div><div id="t1516591566000116" t="2018-01-22 03:26:06 xiongtx Does the order of rules for Instaparse matter? I seem to recall that rule order didn&apos;t for tools like Lex/JLex...but I could be wrong."><a href="#t1516591566000116" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-22</span> <span class="t" onclick="H(this)">03:26:06</span>          xiongtx </span><span>Does the order of rules for Instaparse matter? I seem to recall that rule order didn&apos;t for tools like Lex/JLex...but I could be wrong.</span></div><div id="t1516591624000206" t="2018-01-22 03:27:04 aengelberg The order of rules in an alternation does not matter, if that&apos;s what you&apos;re asking."><a href="#t1516591624000206" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-22</span> <span class="t" onclick="H(this)">03:27:04</span>       aengelberg </span><span>The order of rules in an alternation does not matter, if that&apos;s what you&apos;re asking.</span></div><div id="t1516592661000083" t="2018-01-22 03:44:21 xiongtx I meant the statements themselves; but funny you should bring that up, b/c I was just wondering about the order of alternations as well."><a href="#t1516592661000083" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-22</span> <span class="t" onclick="H(this)">03:44:21</span>          xiongtx </span><span>I meant the statements themselves; but funny you should bring that up, b/c I was just wondering about the order of alternations as well.</span></div><div id="t1516592760000027" t="2018-01-22 03:46:00 xiongtx For

  type = &apos;int&apos; | &apos;boolean&apos; | className

className = identifier

identifier = #&quot;[A-Za-z_]+[A-Za-z0-9_]*&quot;
 

Is there a way to the order of alternations matter, i.e.  (insta/parse parser &quot;int&quot;)  return  {:type &quot;int&quot;]  instead of (from my observation)  [:type [:className [:identifier &quot;int&quot;]]] ?"><a href="#t1516592760000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-01-22</span> <span class="t" onclick="H(this)">03:46:00</span>          xiongtx </span><span>For

 </span><pre>type = &apos;int&apos; | &apos;boolean&apos; | className

className = identifier

identifier = #&quot;[A-Za-z_]+[A-Za-z0-9_]*&quot;
</pre><span>

Is there a way to the order of alternations matter, i.e. </span><code>(insta/parse parser &quot;int&quot;)</code><span> return </span><code>{:type &quot;int&quot;]</code><span> instead of (from my observation) </span><code>[:type [:className [:identifier &quot;int&quot;]]]</code><span>?</span></div><div id="t1523189051000005" t="2018-04-08 12:04:11 misha greetings! I am having a trouble to match 2 consequent backslashes (clj):
 (insta/parse
  (insta/parser &quot;s = #&apos;\\\\&apos;&quot;)
  &quot;\\\\&quot;)
=&gt; Parse error at line 1, column 1:
\\
^
Expected:
#&quot;\\&quot; (followed by end-of-string)

(insta/parse
  (insta/parser &quot;s = #\&quot;\\\\\&quot;&quot;)
  &quot;\\\\&quot;)
=&gt; Parse error at line 1, column 1:
\\
^
Expected:
#&quot;\\&quot; (followed by end-of-string)
 
at this point I am just brut forcing with no luck"><a href="#t1523189051000005" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-08</span> <span class="t" onclick="H(this)">12:04:11</span>            misha </span><span>greetings! I am having a trouble to match 2 consequent backslashes (clj):
</span><pre>(insta/parse
  (insta/parser &quot;s = #&apos;\\\\&apos;&quot;)
  &quot;\\\\&quot;)
=&gt; Parse error at line 1, column 1:
\\
^
Expected:
#&quot;\\&quot; (followed by end-of-string)

(insta/parse
  (insta/parser &quot;s = #\&quot;\\\\\&quot;&quot;)
  &quot;\\\\&quot;)
=&gt; Parse error at line 1, column 1:
\\
^
Expected:
#&quot;\\&quot; (followed by end-of-string)
</pre><span>
at this point I am just brut forcing with no luck</span></div><div id="t1523239471000026" t="2018-04-09 02:04:31 aengelberg @misha I think you are just under-escaping. Try
 (insta/parse
  (insta/parser &quot;s = #&apos;\\\\\\\\&apos;&quot;)
  &quot;\\\\&quot;)
"><a href="#t1523239471000026" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">02:04:31</span>       aengelberg </span><span>@misha I think you are just under-escaping. Try
</span><pre>(insta/parse
  (insta/parser &quot;s = #&apos;\\\\\\\\&apos;&quot;)
  &quot;\\\\&quot;)
</pre></div><div id="t1523239558000189" t="2018-04-09 02:05:58 aengelberg Since instaparse and Clojure strings both have their own notation of backslash escaping, you unfortunately have to use an obscene amount of backslashes to convey a legitimate backslash character"><a href="#t1523239558000189" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">02:05:58</span>       aengelberg </span><span>Since instaparse and Clojure strings both have their own notation of backslash escaping, you unfortunately have to use an obscene amount of backslashes to convey a legitimate backslash character</span></div><div id="t1523239562000213" t="2018-04-09 02:06:02 aengelberg https://github.com/engelberg/instaparse#escape-characters"><a href="#t1523239562000213" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">02:06:02</span>       aengelberg </span><a href="https://github.com/engelberg/instaparse#escape-characters" target="_blank">https://github.com/engelberg/instaparse#escape-characters</a></div><div id="t1523239630000089" t="2018-04-09 02:07:10 aengelberg As that section in the readme explains, one way to get more predictable escaping behavior is to store your grammar in a separate resource file, and that removes one of the layers of escaping (Clojure strings)"><a href="#t1523239630000089" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">02:07:10</span>       aengelberg </span><span>As that section in the readme explains, one way to get more predictable escaping behavior is to store your grammar in a separate resource file, and that removes one of the layers of escaping (Clojure strings)</span></div><div id="t1523256190000140" t="2018-04-09 06:43:10 misha @aengelberg thank you, that works. I already put grammar and source string into their own files, before asking for help, might have missed something (like ns reload)."><a href="#t1523256190000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">06:43:10</span>            misha </span><span>@aengelberg thank you, that works. I already put grammar and source string into their own files, before asking for help, might have missed something (like ns reload).</span></div><div id="t1523257141000003" t="2018-04-09 06:59:01 misha how can I distinguish between  \n  within a text, and a line end in multiline text? Can I do it without relying on next line&apos;s grammar/content? For example, here I need to extract &quot;  Simple__ communication example\non several lines&quot; as a single value, w/o including &quot;Alice&quot;. Is there a landmark I can use to stop at &quot;visual&quot; line&apos;s end?:
 title __Simple__ communication example\non several lines
Alice -&gt; Bob: Authentication Request
 
I tried  #&apos;(?m)...$&apos;  regex flag, but I doubt it will receive &quot;visual&quot; line as an input."><a href="#t1523257141000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">06:59:01</span>            misha </span><span>how can I distinguish between </span><code>\n</code><span> within a text, and a line end in multiline text? Can I do it without relying on next line&apos;s grammar/content? For example, here I need to extract &quot;</span><span>Simple__ communication example\non several lines&quot; as a single value, w/o including &quot;Alice&quot;. Is there a landmark I can use to stop at &quot;visual&quot; line&apos;s end?:
</span><pre>title __Simple__ communication example\non several lines
Alice -&gt; Bob: Authentication Request
</pre><span>
I tried </span><code>#&apos;(?m)...$&apos;</code><span> regex flag, but I doubt it will receive &quot;visual&quot; line as an input.</span></div><div id="t1523287788000413" t="2018-04-09 15:29:48 aengelberg @misha yeah, from the regex&apos;s perspective it&apos;s matching against the entire rest of the string, so  $  means &quot;end of file&quot;, not &quot;end of line&quot;. You could use regex&apos;s lookahead feature to detect and end of line, like  (?=\r?\n)"><a href="#t1523287788000413" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-09</span> <span class="t" onclick="H(this)">15:29:48</span>       aengelberg </span><span>@misha yeah, from the regex&apos;s perspective it&apos;s matching against the entire rest of the string, so </span><code>$</code><span> means &quot;end of file&quot;, not &quot;end of line&quot;. You could use regex&apos;s lookahead feature to detect and end of line, like </span><code>(?=\r?\n)</code></div><div id="t1524094577000017" t="2018-04-18 23:36:17 gfredericks can instaparse be used to parse significant-whitespace-indentation-things, in the python sense?"><a href="#t1524094577000017" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:36:17</span>      gfredericks </span><span>can instaparse be used to parse significant-whitespace-indentation-things, in the python sense?</span></div><div id="t1524094644000252" t="2018-04-18 23:37:24 aengelberg not really, primarily because of how the &quot;levels&quot; work in said indentation-heavy languages"><a href="#t1524094644000252" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:37:24</span>       aengelberg </span><span>not really, primarily because of how the &quot;levels&quot; work in said indentation-heavy languages</span></div><div id="t1524094723000231" t="2018-04-18 23:38:43 gfredericks @aengelberg can you change your username to ængelberg"><a href="#t1524094723000231" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:38:43</span>      gfredericks </span><span>@aengelberg can you change your username to ængelberg</span></div><div id="t1524094746000347" t="2018-04-18 23:39:06 gfredericks thanks"><a href="#t1524094746000347" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:39:06</span>      gfredericks </span><span>thanks</span></div><div id="t1524094747000148" t="2018-04-18 23:39:07 aengelberg done"><a href="#t1524094747000148" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:39:07</span>       aengelberg </span><span>done</span></div><div id="t1524094800000345" t="2018-04-18 23:40:00 gfredericks okay well that&apos;s disappointing because I&apos;m parsing such a thing and I guess I&apos;ll have to do it tediously by hand

have you seen any general tools that can handle it?"><a href="#t1524094800000345" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:40:00</span>      gfredericks </span><span>okay well that&apos;s disappointing because I&apos;m parsing such a thing and I guess I&apos;ll have to do it tediously by hand

have you seen any general tools that can handle it?</span></div><div id="t1524094860000045" t="2018-04-18 23:41:00 aengelberg if you could somehow pre-tokenize all of the indentation before passing it to instaparse, that might work"><a href="#t1524094860000045" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:41:00</span>       aengelberg </span><span>if you could somehow pre-tokenize all of the indentation before passing it to instaparse, that might work</span></div><div id="t1524094985000078" t="2018-04-18 23:43:05 aengelberg what I mean is that you&apos;d have to convert
 def f(x):
  if x == 1:
    return 2;
  else:
    return 3;
 
into
 def f(x):
→if x == 1:
→return 2;
←else:
→return 3;
←←
"><a href="#t1524094985000078" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:43:05</span>       aengelberg </span><span>what I mean is that you&apos;d have to convert
</span><pre>def f(x):
  if x == 1:
    return 2;
  else:
    return 3;
</pre><span>
into
</span><pre>def f(x):
→if x == 1:
→return 2;
←else:
→return 3;
←←
</pre></div><div id="t1524095012000188" t="2018-04-18 23:43:32 aengelberg if that makes sense"><a href="#t1524095012000188" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:43:32</span>       aengelberg </span><span>if that makes sense</span></div><div id="t1524095022000232" t="2018-04-18 23:43:42 gfredericks and the arrows act like brackets?"><a href="#t1524095022000232" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:43:42</span>      gfredericks </span><span>and the arrows act like brackets?</span></div><div id="t1524095027000053" t="2018-04-18 23:43:47 aengelberg basically"><a href="#t1524095027000053" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:43:47</span>       aengelberg </span><span>basically</span></div><div id="t1524095042000058" t="2018-04-18 23:44:02 aengelberg because instaparse can&apos;t keep state of how far to the right you should be at any given point"><a href="#t1524095042000058" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:44:02</span>       aengelberg </span><span>because instaparse can&apos;t keep state of how far to the right you should be at any given point</span></div><div id="t1524095050000010" t="2018-04-18 23:44:10 aengelberg based on higher-level indentations"><a href="#t1524095050000010" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:44:10</span>       aengelberg </span><span>based on higher-level indentations</span></div><div id="t1524095081000212" t="2018-04-18 23:44:41 gfredericks I think the combination of writing that code and having to write a grammar is probably more tedious than parsing it manually"><a href="#t1524095081000212" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:44:41</span>      gfredericks </span><span>I think the combination of writing that code and having to write a grammar is probably more tedious than parsing it manually</span></div><div id="t1524095097000215" t="2018-04-18 23:44:57 aengelberg perhaps"><a href="#t1524095097000215" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:44:57</span>       aengelberg </span><span>perhaps</span></div><div id="t1524095218000129" t="2018-04-18 23:46:58 aengelberg oh also you could maybe get sneaky with nested parsing"><a href="#t1524095218000129" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:46:58</span>       aengelberg </span><span>oh also you could maybe get sneaky with nested parsing</span></div><div id="t1524095279000008" t="2018-04-18 23:47:59 aengelberg where, say, the top level parser gives you back
 [:def &quot;f(x)&quot;
 [:nested-block
  &quot;if x == 1:&quot;
  &quot;  return 2;&quot;
  &quot;else:&quot;
  &quot;  return 3;&quot;]]
"><a href="#t1524095279000008" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:47:59</span>       aengelberg </span><span>where, say, the top level parser gives you back
</span><pre>[:def &quot;f(x)&quot;
 [:nested-block
  &quot;if x == 1:&quot;
  &quot;  return 2;&quot;
  &quot;else:&quot;
  &quot;  return 3;&quot;]]
</pre></div><div id="t1524095295000242" t="2018-04-18 23:48:15 aengelberg and then you have some code that then takes said nested blocks and re-runs the parser on it"><a href="#t1524095295000242" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:48:15</span>       aengelberg </span><span>and then you have some code that then takes said nested blocks and re-runs the parser on it</span></div><div id="t1524095297000296" t="2018-04-18 23:48:17 aengelberg and so on"><a href="#t1524095297000296" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:48:17</span>       aengelberg </span><span>and so on</span></div><div id="t1524095341000218" t="2018-04-18 23:49:01 gfredericks oh interesting"><a href="#t1524095341000218" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:49:01</span>      gfredericks </span><span>oh interesting</span></div><div id="t1524095362000103" t="2018-04-18 23:49:22 gfredericks if you&apos;re not trampolining your parser, why bother getting up in the morning?"><a href="#t1524095362000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:49:22</span>      gfredericks </span><span>if you&apos;re not trampolining your parser, why bother getting up in the morning?</span></div><div id="t1524095621000048" t="2018-04-18 23:53:41 aengelberg you would have to re-append those nested block lines (with newlines in between)"><a href="#t1524095621000048" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:53:41</span>       aengelberg </span><span>you would have to re-append those nested block lines (with newlines in between)</span></div><div id="t1524095643000295" t="2018-04-18 23:54:03 gfredericks sure"><a href="#t1524095643000295" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:54:03</span>      gfredericks </span><span>sure</span></div><div id="t1524095809000321" t="2018-04-18 23:56:49 aengelberg the grammar would look like
 S = def | if | ...
def = &lt;&apos;def &apos;&gt; thing-you&apos;re-deffing &lt;&apos;:\n&apos;&gt; nested-block
nested-block = (&apos; &apos; #&quot;.*\n?&quot;)*
"><a href="#t1524095809000321" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-18</span> <span class="t" onclick="H(this)">23:56:49</span>       aengelberg </span><span>the grammar would look like
</span><pre>S = def | if | ...
def = &lt;&apos;def &apos;&gt; thing-you&apos;re-deffing &lt;&apos;:\n&apos;&gt; nested-block
nested-block = (&apos; &apos; #&quot;.*\n?&quot;)*
</pre></div><div id="t1524096059000103" t="2018-04-19 00:00:59 gfredericks we&apos;re relying on the greediness of  .*  to definitely eat the  \n  even though it`s got a  ?  on it?"><a href="#t1524096059000103" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:00:59</span>      gfredericks </span><span>we&apos;re relying on the greediness of </span><code>.*</code><span> to definitely eat the </span><code>\n</code><span> even though it`s got a </span><code>?</code><span> on it?</span></div><div id="t1524096101000386" t="2018-04-19 00:01:41 aengelberg well,  .  by default means non-newline chars in regex-land"><a href="#t1524096101000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:01:41</span>       aengelberg </span><span>well, </span><code>.</code><span> by default means non-newline chars in regex-land</span></div><div id="t1524096107000004" t="2018-04-19 00:01:47 gfredericks the  \n?  had me worried that it might parse  [&quot; foo&quot; &quot; bar&quot;]  from  &quot; foo bar&quot;"><a href="#t1524096107000004" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:01:47</span>      gfredericks </span><span>the </span><code>\n?</code><span> had me worried that it might parse </span><code>[&quot; foo&quot; &quot; bar&quot;]</code><span> from </span><code>&quot; foo bar&quot;</code></div><div id="t1524096117000110" t="2018-04-19 00:01:57 aengelberg but yes we are relying on the greediness"><a href="#t1524096117000110" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:01:57</span>       aengelberg </span><span>but yes we are relying on the greediness</span></div><div id="t1524096121000176" t="2018-04-19 00:02:01 gfredericks :+1:"><a href="#t1524096121000176" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:02:01</span>      gfredericks </span><b>:+1:</b></div><div id="t1524096144000057" t="2018-04-19 00:02:24 aengelberg #&quot;.*(\n|$)&quot;  might be safer"><a href="#t1524096144000057" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:02:24</span>       aengelberg </span><code>#&quot;.*(\n|$)&quot;</code><span> might be safer</span></div><div id="t1524096197000033" t="2018-04-19 00:03:17 aengelberg btw I believe @dave has some prior art on nested parsers for Alda"><a href="#t1524096197000033" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:03:17</span>       aengelberg </span><span>btw I believe @dave has some prior art on nested parsers for Alda</span></div><div id="t1524096208000113" t="2018-04-19 00:03:28 aengelberg actually just kidding I think he migrated away from instaparse in more recent versions of Alda"><a href="#t1524096208000113" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">00:03:28</span>       aengelberg </span><span>actually just kidding I think he migrated away from instaparse in more recent versions of Alda</span></div><div id="t1524099922000082" t="2018-04-19 01:05:22 dave indeed, i ended up rolling my own parser, mostly in the hope that someday we can start to asynchronously process parsed expressions/statements as they are parsed -- meaning that a score could start playing before it&apos;s even done being parsed"><a href="#t1524099922000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">01:05:22</span>             dave </span><span>indeed, i ended up rolling my own parser, mostly in the hope that someday we can start to asynchronously process parsed expressions/statements as they are parsed -- meaning that a score could start playing before it&apos;s even done being parsed</span></div><div id="t1524099939000015" t="2018-04-19 01:05:39 dave ...although in doing so, performance got significantly better, to the extent that we might never need to do that  😄"><a href="#t1524099939000015" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">01:05:39</span>             dave </span><span>...although in doing so, performance got significantly better, to the extent that we might never need to do that </span><b>😄</b></div><div id="t1524100148000226" t="2018-04-19 01:09:08 dave before moving away from instaparse, i was doing some pretty complicated stuff with multiple grammars. it was starting to make my head hurt a little, so that may have had something to do with the decision too"><a href="#t1524100148000226" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">01:09:08</span>             dave </span><span>before moving away from instaparse, i was doing some pretty complicated stuff with multiple grammars. it was starting to make my head hurt a little, so that may have had something to do with the decision too</span></div><div id="t1524100193000182" t="2018-04-19 01:09:53 dave the grammars needed to share some rules with each other, so i was defining grammars using bits and pieces strung together"><a href="#t1524100193000182" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">01:09:53</span>             dave </span><span>the grammars needed to share some rules with each other, so i was defining grammars using bits and pieces strung together</span></div><div id="t1524100298000273" t="2018-04-19 01:11:38 dave the reason for that was basically to try and get better perf (without being super knowledgeable about how to improve parser performance otherwise), instead of a big master grammar like i had before, i started parsing out large chunks with more specialized grammars, and do the parsing in multiple passes"><a href="#t1524100298000273" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-04-19</span> <span class="t" onclick="H(this)">01:11:38</span>             dave </span><span>the reason for that was basically to try and get better perf (without being super knowledgeable about how to improve parser performance otherwise), instead of a big master grammar like i had before, i started parsing out large chunks with more specialized grammars, and do the parsing in multiple passes</span></div><div id="t1527000587000256" t="2018-05-22 14:49:47 aengelberg"><a href="#t1527000587000256" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:49:47</span>       aengelberg </span></div><div id="t1527000655000801" t="2018-05-22 14:50:55 aengelberg @sova Once your query has been parsed from a string into data (that&apos;s usually the hard part), you can use whatever strategy you want to actually evaluate it.  insta/transform  is meant to be just one tool in your toolbelt to serve the most common case."><a href="#t1527000655000801" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:50:55</span>       aengelberg </span><span>@sova Once your query has been parsed from a string into data (that&apos;s usually the hard part), you can use whatever strategy you want to actually evaluate it. </span><code>insta/transform</code><span> is meant to be just one tool in your toolbelt to serve the most common case.</span></div><div id="t1527000775000211" t="2018-05-22 14:52:55 aengelberg I think this is the transform example you were referring to:
 =&gt; (-&gt;&gt; (arithmetic &quot;1-2/(3-4)+5*6&quot;)
     (insta/transform
       {:add +, :sub -, :mul *, :div /,
        :number clojure.edn/read-string :expr identity}))
33
"><a href="#t1527000775000211" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:52:55</span>       aengelberg </span><span>I think this is the transform example you were referring to:
</span><pre>=&gt; (-&gt;&gt; (arithmetic &quot;1-2/(3-4)+5*6&quot;)
     (insta/transform
       {:add +, :sub -, :mul *, :div /,
        :number clojure.edn/read-string :expr identity}))
33
</pre></div><div id="t1527000846000222" t="2018-05-22 14:54:06 aengelberg In this case it isn&apos;t replacing  :add  with  + , it&apos;s actually calling  +  on all of the elements that come after  :add . So as the transformer works its way up the tree, it ends up evaluating the whole expression."><a href="#t1527000846000222" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:54:06</span>       aengelberg </span><span>In this case it isn&apos;t replacing </span><code>:add</code><span> with </span><code>+</code><span>, it&apos;s actually calling </span><code>+</code><span> on all of the elements that come after </span><code>:add</code><span>. So as the transformer works its way up the tree, it ends up evaluating the whole expression.</span></div><div id="t1527000977000141" t="2018-05-22 14:56:17 aengelberg Does that explanation help?"><a href="#t1527000977000141" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:56:17</span>       aengelberg </span><span>Does that explanation help?</span></div><div id="t1527001196000676" t="2018-05-22 14:59:56 SoV4 wow!  that is very cool, it&apos;s calling  +  ... this explanation is very helpful, it gives me a really strong starting point,
 but i&apos;m still not sure how i can end up with a thing i can test logicals on.  

since i could replace different nodes with whatever function i see fit, there&apos;s a lot of power there,
but i gotta end up with something that i could pour &quot;lemon juice&quot; through and if the internal 
query expression was (&quot;lemon&quot; | &quot;momo&quot;) &amp; &quot;juice&quot; ... it would work.

do you have any ideas on transforming nodes into logic gates?"><a href="#t1527001196000676" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">14:59:56</span>             SoV4 </span><span>wow!  that is very cool, it&apos;s calling </span><code>+</code><span> ... this explanation is very helpful, it gives me a really strong starting point,
 but i&apos;m still not sure how i can end up with a thing i can test logicals on.  

since i could replace different nodes with whatever function i see fit, there&apos;s a lot of power there,
but i gotta end up with something that i could pour &quot;lemon juice&quot; through and if the internal 
query expression was (&quot;lemon&quot; | &quot;momo&quot;) &amp; &quot;juice&quot; ... it would work.

do you have any ideas on transforming nodes into logic gates?</span></div><div id="t1527001300000132" t="2018-05-22 15:01:40 SoV4 okay, you mention that it works its way up the tree so presumably it starts at the leaves...
so if on matching leaves we write down &quot;true&quot; and non matching leaves we write &quot;false&quot; and then eventually do an eval on the whole thing, it&apos;ll be like getting a truth statement back."><a href="#t1527001300000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">15:01:40</span>             SoV4 </span><span>okay, you mention that it works its way up the tree so presumably it starts at the leaves...
so if on matching leaves we write down &quot;true&quot; and non matching leaves we write &quot;false&quot; and then eventually do an eval on the whole thing, it&apos;ll be like getting a truth statement back.</span></div><div id="t1527001378000598" t="2018-05-22 15:02:58 SoV4 Thanks for taking the time to explain that, by the way."><a href="#t1527001378000598" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">15:02:58</span>             SoV4 </span><span>Thanks for taking the time to explain that, by the way.</span></div><div id="t1527023276000621" t="2018-05-22 21:07:56 akiroz Found this channel in #beginners and I just wanna say: @aengelberg thank you for the great library, it saved me multiple times from DSL hell  😊"><a href="#t1527023276000621" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:07:56</span>           akiroz </span><span>Found this channel in #beginners and I just wanna say: @aengelberg thank you for the great library, it saved me multiple times from DSL hell </span><b>😊</b></div><div id="t1527023365000166" t="2018-05-22 21:09:25 aengelberg thanks @akiroz, glad you are finding it useful"><a href="#t1527023365000166" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:09:25</span>       aengelberg </span><span>thanks @akiroz, glad you are finding it useful</span></div><div id="t1527023544000225" t="2018-05-22 21:12:24 aengelberg @sova yeah your true/false strategy should work.  insta/transform  is a recursive function, and whenever it&apos;s processing a node it transforms all of the children first, hence the &quot;leaves first&quot; approach."><a href="#t1527023544000225" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:12:24</span>       aengelberg </span><span>@sova yeah your true/false strategy should work. </span><code>insta/transform</code><span> is a recursive function, and whenever it&apos;s processing a node it transforms all of the children first, hence the &quot;leaves first&quot; approach.</span></div><div id="t1527023592000445" t="2018-05-22 21:13:12 aengelberg you can take a look at the source code of  insta/transform . It has some boilerplate to make sure it works on instaparse&apos;s various output formats, but at its core it&apos;s a fairly simple depth-first iterator."><a href="#t1527023592000445" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:13:12</span>       aengelberg </span><span>you can take a look at the source code of </span><code>insta/transform</code><span>. It has some boilerplate to make sure it works on instaparse&apos;s various output formats, but at its core it&apos;s a fairly simple depth-first iterator.</span></div><div id="t1527023645000584" t="2018-05-22 21:14:05 aengelberg https://github.com/Engelberg/instaparse/blob/master/src/instaparse/transform.cljc#L33-L46"><a href="#t1527023645000584" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:14:05</span>       aengelberg </span><a href="https://github.com/Engelberg/instaparse/blob/master/src/instaparse/transform.cljc#L33-L46" target="_blank">https://github.com/Engelberg/instaparse/blob/master/src/instaparse/transform.cljc#L33-L46</a></div><div id="t1527023898000028" t="2018-05-22 21:18:18 aengelberg the super-simplified version of the logic looks like this:
 (defn- hiccup-transform
  [transform-map parse-tree]
  (if (not (empty? parse-tree))
    (let [transform (transform-map (first parse-tree))]
      (apply transform (map (partial hiccup-transform transform-map)
                            (next parse-tree))))
    parse-tree))
"><a href="#t1527023898000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:18:18</span>       aengelberg </span><span>the super-simplified version of the logic looks like this:
</span><pre>(defn- hiccup-transform
  [transform-map parse-tree]
  (if (not (empty? parse-tree))
    (let [transform (transform-map (first parse-tree))]
      (apply transform (map (partial hiccup-transform transform-map)
                            (next parse-tree))))
    parse-tree))
</pre></div><div id="t1527024773000138" t="2018-05-22 21:32:53 SoV4 Cool!  Thanks very much for providing source and also zooming in on the vital part."><a href="#t1527024773000138" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:32:53</span>             SoV4 </span><span>Cool!  Thanks very much for providing source and also zooming in on the vital part.</span></div><div id="t1527024879000561" t="2018-05-22 21:34:39 SoV4 So the (partial ..) function ... could you tell me more about how that comes into play?"><a href="#t1527024879000561" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:34:39</span>             SoV4 </span><span>So the (partial ..) function ... could you tell me more about how that comes into play?</span></div><div id="t1527025532000616" t="2018-05-22 21:45:32 aengelberg partial  is a function built-in to Clojure that helps curry arguments in anonymous functions  http://clojuredocs.org/clojure.core/partial"><a href="#t1527025532000616" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-22</span> <span class="t" onclick="H(this)">21:45:32</span>       aengelberg </span><code>partial</code><span> is a function built-in to Clojure that helps curry arguments in anonymous functions </span><a href="http://clojuredocs.org/clojure.core/partial" target="_blank">http://clojuredocs.org/clojure.core/partial</a></div><div id="t1527190559000517" t="2018-05-24 19:35:59 SoV4 Hello again.  I stumbled onto  http://instaparse-live.matt.is/   and it&apos;s really awesome, I&apos;ve been tinkering with it and with a repl-like feedback loop it&apos;s been pretty painless finding something that can parse logic like i need"><a href="#t1527190559000517" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:35:59</span>             SoV4 </span><span>Hello again.  I stumbled onto </span><a href="http://instaparse-live.matt.is/" target="_blank">http://instaparse-live.matt.is/</a><span>  and it&apos;s really awesome, I&apos;ve been tinkering with it and with a repl-like feedback loop it&apos;s been pretty painless finding something that can parse logic like i need</span></div><div id="t1527190578000278" t="2018-05-24 19:36:18 SoV4 But one thing I have noticed is that if there are parse variations, there may be multiple result parses"><a href="#t1527190578000278" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:36:18</span>             SoV4 </span><span>But one thing I have noticed is that if there are parse variations, there may be multiple result parses</span></div><div id="t1527190898000378" t="2018-05-24 19:41:38 SoV4 That pretty much encapsulates the nodes as I want to store them... i wonder if there is a cleaner or clearer representation for just &amp; and  |  logic w/ parens"><a href="#t1527190898000378" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:41:38</span>             SoV4 </span><span>That pretty much encapsulates the nodes as I want to store them... i wonder if there is a cleaner or clearer representation for just &amp; and  |  logic w/ parens</span></div><div id="t1527190998000610" t="2018-05-24 19:43:18 SoV4 Sometimes, there are multiple valid interpretations, for example: (pardon the zoom level)..."><a href="#t1527190998000610" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:43:18</span>             SoV4 </span><span>Sometimes, there are multiple valid interpretations, for example: (pardon the zoom level)...</span></div><div id="t1527191176000437" t="2018-05-24 19:46:16 SoV4 It seems as though they are both perfectly valid so, maybe I can just use the first one of the result set"><a href="#t1527191176000437" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:46:16</span>             SoV4 </span><span>It seems as though they are both perfectly valid so, maybe I can just use the first one of the result set</span></div><div id="t1527191822000071" t="2018-05-24 19:57:02 SoV4 better example.."><a href="#t1527191822000071" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">19:57:02</span>             SoV4 </span><span>better example..</span></div><div id="t1527192505000733" t="2018-05-24 20:08:25 dave wow, i haven&apos;t seen this before. so cool!"><a href="#t1527192505000733" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-24</span> <span class="t" onclick="H(this)">20:08:25</span>             dave </span><span>wow, i haven&apos;t seen this before. so cool!</span></div><div id="t1527265957000550" t="2018-05-25 16:32:37 SoV4 yeah, LISP is insanely cool, instaparse is amazing, and context free grammars absolutely rock.  seeing how easy it actually is to get tokens out of arbitrary syntax i&apos;m really inspired to work on some NLP stuff!"><a href="#t1527265957000550" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-25</span> <span class="t" onclick="H(this)">16:32:37</span>             SoV4 </span><span>yeah, LISP is insanely cool, instaparse is amazing, and context free grammars absolutely rock.  seeing how easy it actually is to get tokens out of arbitrary syntax i&apos;m really inspired to work on some NLP stuff!</span></div><div id="t1527447050000111" t="2018-05-27 18:50:50 Logan Powell 👋  Hi everyone!"><a href="#t1527447050000111" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">18:50:50</span>     Logan Powell </span><b>👋</b><span> Hi everyone!</span></div><div id="t1527447713000073" t="2018-05-27 19:01:53 Logan Powell btw,  http://instaparse-live.matt.is/  is awesome"><a href="#t1527447713000073" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:01:53</span>     Logan Powell </span><span>btw, </span><a href="http://instaparse-live.matt.is/" target="_blank">http://instaparse-live.matt.is/</a><span> is awesome</span></div><div id="t1527448127000036" t="2018-05-27 19:08:47 akiroz @loganpowell Why not just read the clojure code as data? I mean lisp code IS data, there&apos;s no need to deal with string parsing"><a href="#t1527448127000036" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:08:47</span>           akiroz </span><span>@loganpowell Why not just read the clojure code as data? I mean lisp code IS data, there&apos;s no need to deal with string parsing</span></div><div id="t1527448171000006" t="2018-05-27 19:09:31 Logan Powell how would I pull out the pieces of the function definitions as strings?"><a href="#t1527448171000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:09:31</span>     Logan Powell </span><span>how would I pull out the pieces of the function definitions as strings?</span></div><div id="t1527448191000097" t="2018-05-27 19:09:51 Logan Powell I&apos;m converting it to markdown"><a href="#t1527448191000097" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:09:51</span>     Logan Powell </span><span>I&apos;m converting it to markdown</span></div><div id="t1527448207000140" t="2018-05-27 19:10:07 akiroz just print it to string"><a href="#t1527448207000140" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:10:07</span>           akiroz </span><span>just print it to string</span></div><div id="t1527448226000065" t="2018-05-27 19:10:26 Logan Powell haha, I&apos;m very stupid. That&apos;s a great idea"><a href="#t1527448226000065" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:10:26</span>     Logan Powell </span><span>haha, I&apos;m very stupid. That&apos;s a great idea</span></div><div id="t1527448252000025" t="2018-05-27 19:10:52 akiroz you might want  pprint  actually, since it&apos;s for docs"><a href="#t1527448252000025" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:10:52</span>           akiroz </span><span>you might want </span><code>pprint</code><span> actually, since it&apos;s for docs</span></div><div id="t1527448267000082" t="2018-05-27 19:11:07 Logan Powell ok, so I get the string that way, then how do I pull out the specific parts of that string that I need?"><a href="#t1527448267000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:11:07</span>     Logan Powell </span><span>ok, so I get the string that way, then how do I pull out the specific parts of that string that I need?</span></div><div id="t1527448295000064" t="2018-05-27 19:11:35 akiroz well first parse the whole thing into data with the built-in  read  function"><a href="#t1527448295000064" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:11:35</span>           akiroz </span><span>well first parse the whole thing into data with the built-in </span><code>read</code><span> function</span></div><div id="t1527448330000028" t="2018-05-27 19:12:10 akiroz manipulate the data as much as you want then print it"><a href="#t1527448330000028" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:12:10</span>           akiroz </span><span>manipulate the data as much as you want then print it</span></div><div id="t1527448345000062" t="2018-05-27 19:12:25 Logan Powell hmm... let me give that a shot!"><a href="#t1527448345000062" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:12:25</span>     Logan Powell </span><span>hmm... let me give that a shot!</span></div><div id="t1527448407000099" t="2018-05-27 19:13:27 akiroz @loganpowell if you need more advanced code analysis, check out  tools.analyzer"><a href="#t1527448407000099" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:13:27</span>           akiroz </span><span>@loganpowell if you need more advanced code analysis, check out </span><code>tools.analyzer</code></div><div id="t1527448418000001" t="2018-05-27 19:13:38 akiroz https://github.com/clojure/tools.analyzer"><a href="#t1527448418000001" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:13:38</span>           akiroz </span><a href="https://github.com/clojure/tools.analyzer" target="_blank">https://github.com/clojure/tools.analyzer</a></div><div id="t1527448443000109" t="2018-05-27 19:14:03 Logan Powell I&apos;m using cljs, works the same?"><a href="#t1527448443000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:14:03</span>     Logan Powell </span><span>I&apos;m using cljs, works the same?</span></div><div id="t1527448474000084" t="2018-05-27 19:14:34 akiroz you mean the  read  part or analyser?"><a href="#t1527448474000084" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:14:34</span>           akiroz </span><span>you mean the </span><code>read</code><span> part or analyser?</span></div><div id="t1527448485000027" t="2018-05-27 19:14:45 Logan Powell both"><a href="#t1527448485000027" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:14:45</span>     Logan Powell </span><span>both</span></div><div id="t1527448498000013" t="2018-05-27 19:14:58 akiroz former is called  cljs.reader/read-string  in cljs"><a href="#t1527448498000013" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:14:58</span>           akiroz </span><span>former is called </span><code>cljs.reader/read-string</code><span> in cljs</span></div><div id="t1527448507000060" t="2018-05-27 19:15:07 akiroz latter I have no idea if it works in cljs (I&apos;m gonna guess no)"><a href="#t1527448507000060" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:15:07</span>           akiroz </span><span>latter I have no idea if it works in cljs (I&apos;m gonna guess no)</span></div><div id="t1527448592000006" t="2018-05-27 19:16:32 Logan Powell is  reader  a part of core or do I need to add it as a :dependency?"><a href="#t1527448592000006" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:16:32</span>     Logan Powell </span><span>is </span><code>reader</code><span> a part of core or do I need to add it as a :dependency?</span></div><div id="t1527448609000024" t="2018-05-27 19:16:49 akiroz it&apos;s built-in"><a href="#t1527448609000024" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:16:49</span>           akiroz </span><span>it&apos;s built-in</span></div><div id="t1527448615000101" t="2018-05-27 19:16:55 Logan Powell cool"><a href="#t1527448615000101" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:16:55</span>     Logan Powell </span><span>cool</span></div><div id="t1527448687000055" t="2018-05-27 19:18:07 Logan Powell it&apos;s working  🙂  I was getting all excited about instaparse... now I have to calm down my curiosity and get to work  😄"><a href="#t1527448687000055" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:18:07</span>     Logan Powell </span><span>it&apos;s working </span><b>🙂</b><span> I was getting all excited about instaparse... now I have to calm down my curiosity and get to work </span><b>😄</b></div><div id="t1527448741000012" t="2018-05-27 19:19:01 Logan Powell do I use  core.match  with this?"><a href="#t1527448741000012" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:19:01</span>     Logan Powell </span><span>do I use </span><code>core.match</code><span> with this?</span></div><div id="t1527448795000081" t="2018-05-27 19:19:55 akiroz Haha, I suppose building a parser yourself would be a great learning exercise too.... but code grammar is a bit complex."><a href="#t1527448795000081" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:19:55</span>           akiroz </span><span>Haha, I suppose building a parser yourself would be a great learning exercise too.... but code grammar is a bit complex.</span></div><div id="t1527448833000003" t="2018-05-27 19:20:33 Logan Powell it looks as so, you&apos;re right"><a href="#t1527448833000003" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:20:33</span>     Logan Powell </span><span>it looks as so, you&apos;re right</span></div><div id="t1527448833000041" t="2018-05-27 19:20:33 akiroz You can use whatever tools you want to process the data, it&apos;s just a list"><a href="#t1527448833000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:20:33</span>           akiroz </span><span>You can use whatever tools you want to process the data, it&apos;s just a list</span></div><div id="t1527448843000126" t="2018-05-27 19:20:43 Logan Powell ok, let me give it a go"><a href="#t1527448843000126" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">19:20:43</span>     Logan Powell </span><span>ok, let me give it a go</span></div><div id="t1527453897000068" t="2018-05-27 20:44:57 aengelberg yeah, Instaparse only aims to help turn strings into data, so if you already have a way to do that (`read-string`) then instaparse won&apos;t be much help"><a href="#t1527453897000068" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">20:44:57</span>       aengelberg </span><span>yeah, Instaparse only aims to help turn strings into data, so if you already have a way to do that (`read-string`) then instaparse won&apos;t be much help</span></div><div id="t1527453921000031" t="2018-05-27 20:45:21 aengelberg the &quot;analysis&quot; of your resulting data is always left as an exercise to the reader anyway  🙂"><a href="#t1527453921000031" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-27</span> <span class="t" onclick="H(this)">20:45:21</span>       aengelberg </span><span>the &quot;analysis&quot; of your resulting data is always left as an exercise to the reader anyway </span><b>🙂</b></div><div id="t1527482666000244" t="2018-05-28 04:44:26 SoV4 does it make sense to use instaparse on the input to (read-line)  (e.g. getting input from std in?)"><a href="#t1527482666000244" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-28</span> <span class="t" onclick="H(this)">04:44:26</span>             SoV4 </span><span>does it make sense to use instaparse on the input to (read-line)  (e.g. getting input from std in?)</span></div><div id="t1527491342000320" t="2018-05-28 07:09:02 SoV4 because I want to parse numbers and strings.  integers"><a href="#t1527491342000320" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-28</span> <span class="t" onclick="H(this)">07:09:02</span>             SoV4 </span><span>because I want to parse numbers and strings.  integers</span></div><div id="t1527548083000132" t="2018-05-28 22:54:43 aengelberg not sure what you mean @sova; instaparse parsers can be run on any string"><a href="#t1527548083000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-28</span> <span class="t" onclick="H(this)">22:54:43</span>       aengelberg </span><span>not sure what you mean @sova; instaparse parsers can be run on any string</span></div><div id="t1527552238000192" t="2018-05-29 00:03:58 SoV4 Yeah, I had a hard time forming my question, i&apos;m getting input from stdin, i have resorted to using edn/read-string which gives a vector of strings,"><a href="#t1527552238000192" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-29</span> <span class="t" onclick="H(this)">00:03:58</span>             SoV4 </span><span>Yeah, I had a hard time forming my question, i&apos;m getting input from stdin, i have resorted to using edn/read-string which gives a vector of strings,</span></div><div id="t1527653207000021" t="2018-05-30 04:06:47 fabrao Hello all, I´m doing parser for fixed width with instaparse and the code is 
 (-&gt;&gt;
   ((insta/parser
     &quot;VALOR = CODIGO BARRAS
CODIGO = 2DIGIT
BARRAS = 3DIGIT
&quot; :input-format :abnf) &quot;12334&quot;)
   (insta/transform {:DIGIT (comp str)}))  
How do I concat the &quot;DIGITs&quot; and keep CODIGO and BARRAS?"><a href="#t1527653207000021" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">04:06:47</span>           fabrao </span><span>Hello all, I´m doing parser for fixed width with instaparse and the code is 
</span><pre>(-&gt;&gt;
   ((insta/parser
     &quot;VALOR = CODIGO BARRAS
CODIGO = 2DIGIT
BARRAS = 3DIGIT
&quot; :input-format :abnf) &quot;12334&quot;)
   (insta/transform {:DIGIT (comp str)}))</pre><span> 
How do I concat the &quot;DIGITs&quot; and keep CODIGO and BARRAS?</span></div><div id="t1527661282000018" t="2018-05-30 06:21:22 aengelberg @fabrao try adding transform entries for  :CODIGO (partial apply str) :BARRAS (partial apply str)"><a href="#t1527661282000018" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">06:21:22</span>       aengelberg </span><span>@fabrao try adding transform entries for </span><code>:CODIGO (partial apply str) :BARRAS (partial apply str)</code></div><div id="t1527683382000132" t="2018-05-30 12:29:42 fabrao @aengelberg it did not work, this keep showing  [:VALOR [:DIGIT &quot;1&quot;]:DIGIT2 [:DIGIT &quot;3&quot;][:DIGIT &quot;3&quot;]:DIGIT4]"><a href="#t1527683382000132" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">12:29:42</span>           fabrao </span><span>@aengelberg it did not work, this keep showing </span><code>[:VALOR [:DIGIT &quot;1&quot;]:DIGIT2 [:DIGIT &quot;3&quot;][:DIGIT &quot;3&quot;]:DIGIT4]</code></div><div id="t1527683473000203" t="2018-05-30 12:31:13 fabrao I had to change to 
 ((insta/parser
     &quot;VALOR = CODIGO BARRAS
CODIGO = #&apos;.{3}&apos;
BARRAS = #&apos;.{2}&apos;
&quot;) &quot;12334&quot;)"><a href="#t1527683473000203" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-30</span> <span class="t" onclick="H(this)">12:31:13</span>           fabrao </span><span>I had to change to 
</span><pre>((insta/parser
     &quot;VALOR = CODIGO BARRAS
CODIGO = #&apos;.{3}&apos;
BARRAS = #&apos;.{2}&apos;
&quot;) &quot;12334&quot;)</pre></div><div id="t1527781068000091" t="2018-05-31 15:37:48 SoV4 hey @aengelberg, how does instaparse work?  i was looking at the source and it looks like it makes multiple passes until it&apos;s successfully consumed the whole input string, correct?  and if a parse doesn&apos;t work, an &quot;error node is embedded in the tree&quot; so it knows not to try that parse again?"><a href="#t1527781068000091" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">15:37:48</span>             SoV4 </span><span>hey @aengelberg, how does instaparse work?  i was looking at the source and it looks like it makes multiple passes until it&apos;s successfully consumed the whole input string, correct?  and if a parse doesn&apos;t work, an &quot;error node is embedded in the tree&quot; so it knows not to try that parse again?</span></div><div id="t1527784069000811" t="2018-05-31 16:27:49 aengelberg @sova this talk explains the internals pretty well  https://www.youtube.com/watch?v=b2AUW6psVcE"><a href="#t1527784069000811" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:27:49</span>       aengelberg </span><span>@sova this talk explains the internals pretty well </span><a href="https://www.youtube.com/watch?v=b2AUW6psVcE" target="_blank">https://www.youtube.com/watch?v=b2AUW6psVcE</a></div><div id="t1527784124000569" t="2018-05-31 16:28:44 SoV4 oh nice.  thank you!  i was very curious because it&apos;s very powerful and very fast and i don&apos;t remember things being so fast in compilers class  😄"><a href="#t1527784124000569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:28:44</span>             SoV4 </span><span>oh nice.  thank you!  i was very curious because it&apos;s very powerful and very fast and i don&apos;t remember things being so fast in compilers class </span><b>😄</b></div><div id="t1527784161000482" t="2018-05-31 16:29:21 aengelberg glad to hear it&apos;s fast! Although what makes Instaparse really unique is that it works well with left-recursive and ambiguous grammars"><a href="#t1527784161000482" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:29:21</span>       aengelberg </span><span>glad to hear it&apos;s fast! Although what makes Instaparse really unique is that it works well with left-recursive and ambiguous grammars</span></div><div id="t1527784192000086" t="2018-05-31 16:29:52 aengelberg something like
 S = &apos;a&apos; | S &apos;a&apos;
 
usually doesn&apos;t work in normal parsers"><a href="#t1527784192000086" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:29:52</span>       aengelberg </span><span>something like
</span><pre>S = &apos;a&apos; | S &apos;a&apos;
</pre><span>
usually doesn&apos;t work in normal parsers</span></div><div id="t1527784221000109" t="2018-05-31 16:30:21 SoV4 leftwards-building strings... I see  that is cool"><a href="#t1527784221000109" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:30:21</span>             SoV4 </span><span>leftwards-building strings... I see  that is cool</span></div><div id="t1527784480000694" t="2018-05-31 16:34:40 SoV4 I want to do some language processing stuff -- eventually reduce articles people write to synopses and relevant tags.  i feel like that&apos;s very possible but i gotta think a bit more on the approach.  like checking words against a dictionary to try and focus on nouns and verbs"><a href="#t1527784480000694" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:34:40</span>             SoV4 </span><span>I want to do some language processing stuff -- eventually reduce articles people write to synopses and relevant tags.  i feel like that&apos;s very possible but i gotta think a bit more on the approach.  like checking words against a dictionary to try and focus on nouns and verbs</span></div><div id="t1527785749000542" t="2018-05-31 16:55:49 SoV4 aha, now i know why the file is called .gll  😄"><a href="#t1527785749000542" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">16:55:49</span>             SoV4 </span><span>aha, now i know why the file is called .gll </span><b>😄</b></div><div id="t1527787286000569" t="2018-05-31 17:21:26 SoV4 &quot;send me all your old magazine subscriptions before any new ones&quot; is a good way to explain how it works briefly."><a href="#t1527787286000569" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-05-31</span> <span class="t" onclick="H(this)">17:21:26</span>             SoV4 </span><span>&quot;send me all your old magazine subscriptions before any new ones&quot; is a good way to explain how it works briefly.</span></div><div id="t1533233430000427" t="2018-08-02 18:10:30 mlimotte Can I get some help with a (hopefully) a simple grammar?  I haven’t done much with CFGs so I could be totally off base.
I want to find variable expressions in a string.  
For example:   hello, {{name}}. 
This is similar to the Mustache variety of interpolation, but I need to pre-parse it to do something slightly different.

I can recognize the pattern above pretty easily.  My problem is having it ignore single brackets.
For example:  hello, {{name}}.  Please choose {Yes, No}. 
The last part is not a double bracket expression and should just be treated like the other uninteresting text.

So, my grammar looks like this (I’ve tried a bunch of other variations, this is the closest I’ve come):

 (def p 
  (insta/parser
    &quot;&lt;S&gt; = (block | TXT)*
     block = &lt;&apos;{{&apos;&gt; TXT &lt;&apos;}}&apos;&gt;
     &lt;TXT&gt; = (OPEN | CLOSE | A | block)*
     &lt;OPEN&gt; = !&apos;{&apos; &apos;{&apos;
     &lt;CLOSE&gt; = !&apos;}&apos; &apos;}&apos;
     &lt;A&gt; = #&apos;[^{}]*&apos;&quot;))
"><a href="#t1533233430000427" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:10:30</span>         mlimotte </span><span>Can I get some help with a (hopefully) a simple grammar?  I haven’t done much with CFGs so I could be totally off base.
I want to find variable expressions in a string.  
For example:  </span><code>hello, {{name}}.</code><span>
This is similar to the Mustache variety of interpolation, but I need to pre-parse it to do something slightly different.

I can recognize the pattern above pretty easily.  My problem is having it ignore single brackets.
For example: </span><code>hello, {{name}}.  Please choose {Yes, No}.</code><span>
The last part is not a double bracket expression and should just be treated like the other uninteresting text.

So, my grammar looks like this (I’ve tried a bunch of other variations, this is the closest I’ve come):

</span><pre>(def p 
  (insta/parser
    &quot;&lt;S&gt; = (block | TXT)*
     block = &lt;&apos;{{&apos;&gt; TXT &lt;&apos;}}&apos;&gt;
     &lt;TXT&gt; = (OPEN | CLOSE | A | block)*
     &lt;OPEN&gt; = !&apos;{&apos; &apos;{&apos;
     &lt;CLOSE&gt; = !&apos;}&apos; &apos;}&apos;
     &lt;A&gt; = #&apos;[^{}]*&apos;&quot;))
</pre></div><div id="t1533233523000393" t="2018-08-02 18:12:03 mlimotte A call  (p &quot;x{a}&quot;)  yields:
 =&gt; Parse error at line 1, column 2:
x{a}
 ^
Expected one of:
&quot;{{&quot;
&quot;}&quot;
NOT &quot;{&quot;
"><a href="#t1533233523000393" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:12:03</span>         mlimotte </span><span>A call </span><code>(p &quot;x{a}&quot;)</code><span> yields:
</span><pre>=&gt; Parse error at line 1, column 2:
x{a}
 ^
Expected one of:
&quot;{{&quot;
&quot;}&quot;
NOT &quot;{&quot;
</pre></div><div id="t1533233574000338" t="2018-08-02 18:12:54 mlimotte Seems like the  x  got picked up by &lt;A&gt;.  I would have liked it to match !‘{’, so that the next char could match in &lt;OPEN&gt;"><a href="#t1533233574000338" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:12:54</span>         mlimotte </span><span>Seems like the </span><code>x</code><span> got picked up by &lt;A&gt;.  I would have liked it to match !‘{’, so that the next char could match in &lt;OPEN&gt;</span></div><div id="t1533233587000172" t="2018-08-02 18:13:07 aengelberg try changing the  OPEN  and  CLOSE  rules to
 &lt;OPEN&gt; = &apos;{&apos; !&apos;{&apos;
&lt;CLOSE&gt; = &apos;}&apos; !&apos;}&apos;
"><a href="#t1533233587000172" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:13:07</span>       aengelberg </span><span>try changing the </span><code>OPEN</code><span> and </span><code>CLOSE</code><span> rules to
</span><pre>&lt;OPEN&gt; = &apos;{&apos; !&apos;{&apos;
&lt;CLOSE&gt; = &apos;}&apos; !&apos;}&apos;
</pre></div><div id="t1533233674000506" t="2018-08-02 18:14:34 mlimotte 😄"><a href="#t1533233674000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:14:34</span>         mlimotte </span><b>😄</b></div><div id="t1533233678000449" t="2018-08-02 18:14:38 mlimotte That seems to work."><a href="#t1533233678000449" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:14:38</span>         mlimotte </span><span>That seems to work.</span></div><div id="t1533233710000293" t="2018-08-02 18:15:10 aengelberg The problem in the original grammar was that the negative lookahead was conflicting with the token itself. It was basically saying &quot;If there isn&apos;t an open bracket, please parse an open bracket&quot;"><a href="#t1533233710000293" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:15:10</span>       aengelberg </span><span>The problem in the original grammar was that the negative lookahead was conflicting with the token itself. It was basically saying &quot;If there isn&apos;t an open bracket, please parse an open bracket&quot;</span></div><div id="t1533233726000439" t="2018-08-02 18:15:26 aengelberg Whereas what you really want is &quot;Please parse an open bracket but only if there isn&apos;t another open bracket right after&quot;"><a href="#t1533233726000439" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:15:26</span>       aengelberg </span><span>Whereas what you really want is &quot;Please parse an open bracket but only if there isn&apos;t another open bracket right after&quot;</span></div><div id="t1533233753000503" t="2018-08-02 18:15:53 mlimotte hmm..  ok, i think that makes sense to me."><a href="#t1533233753000503" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:15:53</span>         mlimotte </span><span>hmm..  ok, i think that makes sense to me.</span></div><div id="t1533233766000513" t="2018-08-02 18:16:06 mlimotte Very cool.  Thanks for the quick help!"><a href="#t1533233766000513" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:16:06</span>         mlimotte </span><span>Very cool.  Thanks for the quick help!</span></div><div id="t1533233772000082" t="2018-08-02 18:16:12 aengelberg no problem"><a href="#t1533233772000082" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:16:12</span>       aengelberg </span><span>no problem</span></div><div id="t1533233938000506" t="2018-08-02 18:18:58 mlimotte Here’s an edge case that still fails.  But it’s a bit contrived, so if it’s not a trivial fix, I don’t need to worry about it.  
 (p &quot;{{y}&quot;)"><a href="#t1533233938000506" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:18:58</span>         mlimotte </span><span>Here’s an edge case that still fails.  But it’s a bit contrived, so if it’s not a trivial fix, I don’t need to worry about it.  
</span><code>(p &quot;{{y}&quot;)</code></div><div id="t1533233951000332" t="2018-08-02 18:19:11 aengelberg do you want that to parse as normal text?"><a href="#t1533233951000332" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:19:11</span>       aengelberg </span><span>do you want that to parse as normal text?</span></div><div id="t1533233961000488" t="2018-08-02 18:19:21 mlimotte yep"><a href="#t1533233961000488" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:19:21</span>         mlimotte </span><span>yep</span></div><div id="t1533233983000336" t="2018-08-02 18:19:43 mlimotte not a  block"><a href="#t1533233983000336" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:19:43</span>         mlimotte </span><span>not a </span><code>block</code></div><div id="t1533234098000386" t="2018-08-02 18:21:38 aengelberg maybe something like
 &lt;S&gt; = TXT*
block = &lt;&apos;{{&apos;&gt; TXT &lt;&apos;}}&apos;&gt;
&lt;TXT&gt; = (block / A)*
&lt;A&gt; = #&apos;[^{}]*&apos; | &apos;{&apos; | &apos;}&apos;
"><a href="#t1533234098000386" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:21:38</span>       aengelberg </span><span>maybe something like
</span><pre>&lt;S&gt; = TXT*
block = &lt;&apos;{{&apos;&gt; TXT &lt;&apos;}}&apos;&gt;
&lt;TXT&gt; = (block / A)*
&lt;A&gt; = #&apos;[^{}]*&apos; | &apos;{&apos; | &apos;}&apos;
</pre></div><div id="t1533234147000444" t="2018-08-02 18:22:27 aengelberg here I&apos;m changing the  A  rule to match any text (including brackets and double brackets) but then using the ordered choice (`/`) to prefer parsing complete blocks when possible."><a href="#t1533234147000444" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:22:27</span>       aengelberg </span><span>here I&apos;m changing the </span><code>A</code><span> rule to match any text (including brackets and double brackets) but then using the ordered choice (`/`) to prefer parsing complete blocks when possible.</span></div><div id="t1533234281000041" t="2018-08-02 18:24:41 mlimotte oh.. that’s great.  I had tried an approach like that previously, but didn’t know how to prefer one parse over another … that  /  operator is new to me."><a href="#t1533234281000041" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:24:41</span>         mlimotte </span><span>oh.. that’s great.  I had tried an approach like that previously, but didn’t know how to prefer one parse over another … that </span><code>/</code><span> operator is new to me.</span></div><div id="t1533234297000363" t="2018-08-02 18:24:57 aengelberg :+1:"><a href="#t1533234297000363" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:24:57</span>       aengelberg </span><b>:+1:</b></div><div id="t1533234328000254" t="2018-08-02 18:25:28 mlimotte thanks for your help, again"><a href="#t1533234328000254" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:25:28</span>         mlimotte </span><span>thanks for your help, again</span></div><div id="t1533234333000177" t="2018-08-02 18:25:33 aengelberg np"><a href="#t1533234333000177" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-02</span> <span class="t" onclick="H(this)">18:25:33</span>       aengelberg </span><span>np</span></div><div id="t1535126314000100" t="2018-08-24 15:58:34 aengelberg"><a href="#t1535126314000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">15:58:34</span>       aengelberg </span></div><div id="t1535126339000100" t="2018-08-24 15:58:59 aengelberg @jeroenvandijk that grammar doesn&apos;t appear to be valid BNF; many of the string tokens are not properly quoted"><a href="#t1535126339000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">15:58:59</span>       aengelberg </span><span>@jeroenvandijk that grammar doesn&apos;t appear to be valid BNF; many of the string tokens are not properly quoted</span></div><div id="t1535126419000100" t="2018-08-24 16:00:19 aengelberg Also, instaparse has adopted the angle brackets  &lt;&gt;  to mean &quot;hiding tags&quot; (not an EBNF standard) but this AWS grammar uses them in all of the rule names, which might result in weird behavior"><a href="#t1535126419000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">16:00:19</span>       aengelberg </span><span>Also, instaparse has adopted the angle brackets </span><code>&lt;&gt;</code><span> to mean &quot;hiding tags&quot; (not an EBNF standard) but this AWS grammar uses them in all of the rule names, which might result in weird behavior</span></div><div id="t1535126441000100" t="2018-08-24 16:00:41 aengelberg for example
 &lt;condition_block&gt; = &quot;Condition&quot; : { &lt;condition_map&gt; }
 
should be
 condition_block = &quot;Condition&quot; &quot;:&quot; &quot;{&quot; condition_map &quot;}&quot;
"><a href="#t1535126441000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">16:00:41</span>       aengelberg </span><span>for example
</span><pre>&lt;condition_block&gt; = &quot;Condition&quot; : { &lt;condition_map&gt; }
</pre><span>
should be
</span><pre>condition_block = &quot;Condition&quot; &quot;:&quot; &quot;{&quot; condition_map &quot;}&quot;
</pre></div><div id="t1535127732000100" t="2018-08-24 16:22:12 hiredman my experience with instaparse, and other parsers for that matter, and external grammars, is pretty much no one provides complete grammars that are machine parseable."><a href="#t1535127732000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">16:22:12</span>         hiredman </span><span>my experience with instaparse, and other parsers for that matter, and external grammars, is pretty much no one provides complete grammars that are machine parseable.</span></div><div id="t1535127896000100" t="2018-08-24 16:24:56 hiredman it is incredibly frustrating to find out that, for example, the only grammar for the version 3 of the protobuf type description language available is incomplete and only published as fragments in &lt;pre&gt; blocks on the protobuf website"><a href="#t1535127896000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-24</span> <span class="t" onclick="H(this)">16:24:56</span>         hiredman </span><span>it is incredibly frustrating to find out that, for example, the only grammar for the version 3 of the protobuf type description language available is incomplete and only published as fragments in &lt;pre&gt; blocks on the protobuf website</span></div><div id="t1535356272000100" t="2018-08-27 07:51:12 jeroenvandijk @aengelberg @hiredman interesting. I was hoping it to have a parser one copy paste away  🙂"><a href="#t1535356272000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-27</span> <span class="t" onclick="H(this)">07:51:12</span>    jeroenvandijk </span><span>@aengelberg @hiredman interesting. I was hoping it to have a parser one copy paste away </span><b>🙂</b></div><div id="t1535356351000200" t="2018-08-27 07:52:31 jeroenvandijk When I remove the &apos;&lt;&gt;&apos;, instaparse is complaining over the use of  : ,  ...  and it is missing  condition_map . I think I have to do a proper investigation where this parser is being used to understand how it should work"><a href="#t1535356351000200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-27</span> <span class="t" onclick="H(this)">07:52:31</span>    jeroenvandijk </span><span>When I remove the &apos;&lt;&gt;&apos;, instaparse is complaining over the use of </span><code>:</code><span>, </span><code>...</code><span> and it is missing </span><code>condition_map</code><span>. I think I have to do a proper investigation where this parser is being used to understand how it should work</span></div><div id="t1535356364000100" t="2018-08-27 07:52:44 jeroenvandijk Thanks for your feedback"><a href="#t1535356364000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-27</span> <span class="t" onclick="H(this)">07:52:44</span>    jeroenvandijk </span><span>Thanks for your feedback</span></div><div id="t1535382432000100" t="2018-08-27 15:07:12 aengelberg no problem"><a href="#t1535382432000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-08-27</span> <span class="t" onclick="H(this)">15:07:12</span>       aengelberg </span><span>no problem</span></div><div id="t1536666918000100" t="2018-09-11 11:55:18 souenzzo There is some repo with a colaborative collection of useful/example grammars?"><a href="#t1536666918000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-11</span> <span class="t" onclick="H(this)">11:55:18</span>         souenzzo </span><span>There is some repo with a colaborative collection of useful/example grammars?</span></div><div id="t1537376729000100" t="2018-09-19 17:05:29 aengelberg hmm not that I know of"><a href="#t1537376729000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-19</span> <span class="t" onclick="H(this)">17:05:29</span>       aengelberg </span><span>hmm not that I know of</span></div><div id="t1537471332000100" t="2018-09-20 19:22:12 drone anyone know of an instaparse grammar for C? I’m checking out mcc ( https://github.com/zmaril/mcc ), but looks like it may be incomplete and bit-rotted"><a href="#t1537471332000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">19:22:12</span>            drone </span><span>anyone know of an instaparse grammar for C? I’m checking out mcc (</span><a href="https://github.com/zmaril/mcc" target="_blank">https://github.com/zmaril/mcc</a><span>), but looks like it may be incomplete and bit-rotted</span></div><div id="t1537471366000100" t="2018-09-20 19:22:46 aengelberg not that I&apos;m aware of"><a href="#t1537471366000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">19:22:46</span>       aengelberg </span><span>not that I&apos;m aware of</span></div><div id="t1537471394000100" t="2018-09-20 19:23:14 drone thanks"><a href="#t1537471394000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-09-20</span> <span class="t" onclick="H(this)">19:23:14</span>            drone </span><span>thanks</span></div><div id="t1540501436000100" t="2018-10-25 21:03:56 schmee hey folks! I’m trying to write my first parser for a very simple file format. I’ve made it work, but my solution uses negative lookahead. Is there any way to write a grammar that produces the same output without negative lookahead? here a REPL example:"><a href="#t1540501436000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-25</span> <span class="t" onclick="H(this)">21:03:56</span>           schmee </span><span>hey folks! I’m trying to write my first parser for a very simple file format. I’ve made it work, but my solution uses negative lookahead. Is there any way to write a grammar that produces the same output without negative lookahead? here a REPL example:</span></div><div id="t1540501440000100" t="2018-10-25 21:04:00 schmee user=&gt; (def s
   #_=&gt;   &quot;NAME=Thing 1
   #_=&gt; ACTIVE=120201-171231
   #_=&gt;
   #_=&gt; NAME=Thing 2
   #_=&gt; ACTIVE=120201-171231&quot;)
   #_=&gt;
#&apos;user/s

user=&gt; (def grammar
   #_=&gt;   (insta/parser
   #_=&gt;     &quot;top = (block &lt;newline?&gt;)+
   #_=&gt;      block = line+ !line
   #_=&gt;      line = key &lt;&apos;=&apos;&gt; value &lt;newline?&gt;
   #_=&gt;      key = #&apos;[A-Z]+&apos;
   #_=&gt;      value = #&apos;[^\n]*&apos;
   #_=&gt;      newline = &apos;\n&apos;&quot;))
   #_=&gt;
#&apos;user/grammar

user=&gt; (clojure.pprint/pprint (insta/parse grammar s))
[:top
 [:block
  [:line [:key &quot;NAME&quot;] [:value &quot;Thing 1&quot;]]
  [:line [:key &quot;ACTIVE&quot;] [:value &quot;120201-171231&quot;]]]
 [:block
  [:line [:key &quot;NAME&quot;] [:value &quot;Thing 2&quot;]]
  [:line [:key &quot;ACTIVE&quot;] [:value &quot;120201-171231&quot;]]]]
nil
"><a href="#t1540501440000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-25</span> <span class="t" onclick="H(this)">21:04:00</span>           schmee </span><pre>user=&gt; (def s
   #_=&gt;   &quot;NAME=Thing 1
   #_=&gt; ACTIVE=120201-171231
   #_=&gt;
   #_=&gt; NAME=Thing 2
   #_=&gt; ACTIVE=120201-171231&quot;)
   #_=&gt;
#&apos;user/s

user=&gt; (def grammar
   #_=&gt;   (insta/parser
   #_=&gt;     &quot;top = (block &lt;newline?&gt;)+
   #_=&gt;      block = line+ !line
   #_=&gt;      line = key &lt;&apos;=&apos;&gt; value &lt;newline?&gt;
   #_=&gt;      key = #&apos;[A-Z]+&apos;
   #_=&gt;      value = #&apos;[^\n]*&apos;
   #_=&gt;      newline = &apos;\n&apos;&quot;))
   #_=&gt;
#&apos;user/grammar

user=&gt; (clojure.pprint/pprint (insta/parse grammar s))
[:top
 [:block
  [:line [:key &quot;NAME&quot;] [:value &quot;Thing 1&quot;]]
  [:line [:key &quot;ACTIVE&quot;] [:value &quot;120201-171231&quot;]]]
 [:block
  [:line [:key &quot;NAME&quot;] [:value &quot;Thing 2&quot;]]
  [:line [:key &quot;ACTIVE&quot;] [:value &quot;120201-171231&quot;]]]]
nil
</pre></div><div id="t1540501699000100" t="2018-10-25 21:08:19 schmee if there’s any other way to simplify it I’d love to hear about it  🙂"><a href="#t1540501699000100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-10-25</span> <span class="t" onclick="H(this)">21:08:19</span>           schmee </span><span>if there’s any other way to simplify it I’d love to hear about it </span><b>🙂</b></div><div id="t1541074394000300" t="2018-11-01 12:13:14 socksy I don&apos;t have a repl to hand, but couldn&apos;t you use a newline as a character separator rather than a negative look ahead for another line? "><a href="#t1541074394000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-01</span> <span class="t" onclick="H(this)">12:13:14</span>                socksy </span><span>I don&apos;t have a repl to hand, but couldn&apos;t you use a newline as a character separator rather than a negative look ahead for another line? </span></div><div id="t1542637203001900" t="2018-11-19 14:20:03 Vincent Cantin Hello. I am starting to use instaparse, and I am matching the end of a multi-line string using  #&apos;\\Z&apos; . While it seems to work, is it the correct way to match it?"><a href="#t1542637203001900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-19</span> <span class="t" onclick="H(this)">14:20:03</span>   Vincent Cantin </span><span>Hello. I am starting to use instaparse, and I am matching the end of a multi-line string using </span><code>#&apos;\\Z&apos;</code><span>. While it seems to work, is it the correct way to match it?</span></div><div id="t1542646403003500" t="2018-11-19 16:53:23 aengelberg @vincent.cantin that seems like a legit approach to me; I&apos;d have to know more about your broader use case to know whether there&apos;s a more elegant overall approach."><a href="#t1542646403003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-19</span> <span class="t" onclick="H(this)">16:53:23</span>       aengelberg </span><span>@vincent.cantin that seems like a legit approach to me; I&apos;d have to know more about your broader use case to know whether there&apos;s a more elegant overall approach.</span></div><div id="t1542646833004100" t="2018-11-19 17:00:33 aengelberg for example, you could use the instaparse negative lookahead feature (`!`) to determine whether there are no more tokens to match"><a href="#t1542646833004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-19</span> <span class="t" onclick="H(this)">17:00:33</span>       aengelberg </span><span>for example, you could use the instaparse negative lookahead feature (`!`) to determine whether there are no more tokens to match</span></div><div id="t1542706229006000" t="2018-11-20 09:30:29 Vincent Cantin @aengelberg The context is: I am parsing a markdown document and I need to detect a line separator as either something based on \n and \r, or either the end of the document."><a href="#t1542706229006000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-20</span> <span class="t" onclick="H(this)">09:30:29</span>   Vincent Cantin </span><span>@aengelberg The context is: I am parsing a markdown document and I need to detect a line separator as either something based on \n and \r, or either the end of the document.</span></div><div id="t1542706310007400" t="2018-11-20 09:31:50 Vincent Cantin Thank you for the negative lookahead hint, I will try it."><a href="#t1542706310007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-20</span> <span class="t" onclick="H(this)">09:31:50</span>   Vincent Cantin </span><span>Thank you for the negative lookahead hint, I will try it.</span></div><div id="t1542733918008300" t="2018-11-20 17:11:58 aengelberg @vincent.cantin you could maybe structure the parser as
 S = line (separator line)*
separator = &apos;\n&apos; | &apos;\r&apos;
 
then you don&apos;t have to explicitly check whether it reaches the end of the file."><a href="#t1542733918008300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-20</span> <span class="t" onclick="H(this)">17:11:58</span>       aengelberg </span><span>@vincent.cantin you could maybe structure the parser as
</span><pre>S = line (separator line)*
separator = &apos;\n&apos; | &apos;\r&apos;
</pre><span>
then you don&apos;t have to explicitly check whether it reaches the end of the file.</span></div><div id="t1542868881014700" t="2018-11-22 06:41:21 Vincent Cantin That would be doable, but it requires to adapt the full grammar for that."><a href="#t1542868881014700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">06:41:21</span>        Vincent Cantin </span><span>That would be doable, but it requires to adapt the full grammar for that.</span></div><div id="t1542799378011400" t="2018-11-21 11:22:58 Vincent Cantin I am currently reading the CommonMark specification for parsing markdown format. Do you know if anybody already wrote such a parser with instaparse?"><a href="#t1542799378011400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-21</span> <span class="t" onclick="H(this)">11:22:58</span>   Vincent Cantin </span><span>I am currently reading the CommonMark specification for parsing markdown format. Do you know if anybody already wrote such a parser with instaparse?</span></div><div id="t1542799775011900" t="2018-11-21 11:29:35 Vincent Cantin I found this project but it is a simple version, not the full spec.  https://github.com/chameco/Hitman/blob/master/src/hitman/core.clj"><a href="#t1542799775011900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-21</span> <span class="t" onclick="H(this)">11:29:35</span>   Vincent Cantin </span><span>I found this project but it is a simple version, not the full spec. </span><a href="https://github.com/chameco/Hitman/blob/master/src/hitman/core.clj" target="_blank">https://github.com/chameco/Hitman/blob/master/src/hitman/core.clj</a></div><div id="t1542809623012400" t="2018-11-21 14:13:43 Vincent Cantin The reason I ask is that I am implementing one using instaparse. I just started recently, it’s called hiccdown."><a href="#t1542809623012400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-21</span> <span class="t" onclick="H(this)">14:13:43</span>   Vincent Cantin </span><span>The reason I ask is that I am implementing one using instaparse. I just started recently, it’s called hiccdown.</span></div><div id="t1542868512013800" t="2018-11-22 06:35:12 Vincent Cantin I found a strange behavior with  #&apos;\\Z&apos; , I wonder if it is a bug or if it is normal.

 ((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = #&apos;\\Z&apos;&quot;)
 &quot;abc\ndef\n&quot;)

=&gt; 
[:Paragraph
 [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
 [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL [:EOF &quot;&quot;]]]
 [:BlankLine [:EOL &quot;\n&quot;]]]
"><a href="#t1542868512013800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">06:35:12</span>   Vincent Cantin </span><span>I found a strange behavior with </span><code>#&apos;\\Z&apos;</code><span>, I wonder if it is a bug or if it is normal.

</span><pre>((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = #&apos;\\Z&apos;&quot;)
 &quot;abc\ndef\n&quot;)

=&gt; 
[:Paragraph
 [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
 [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL [:EOF &quot;&quot;]]]
 [:BlankLine [:EOL &quot;\n&quot;]]]
</pre></div><div id="t1542868623014500" t="2018-11-22 06:37:03 Vincent Cantin EOF appears before  &quot;\n&quot;  in the parsed result."><a href="#t1542868623014500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">06:37:03</span>   Vincent Cantin </span><span>EOF appears before </span><code>&quot;\n&quot;</code><span> in the parsed result.</span></div><div id="t1542869183016600" t="2018-11-22 06:46:23 Vincent Cantin This other approach which uses the negative lookahead does put the  &quot;\n&quot;  in the right place in the result, but there is another problem: The  BlankLine  is missing in the result. That may be a bug of instaparse. I am using the version  1.4.9 .

 ((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = !#&apos;.&apos;&quot;)
 &quot;abc\ndef\n&quot;)
=&gt;
[:Paragraph [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
            [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL &quot;\n&quot;]]]
"><a href="#t1542869183016600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">06:46:23</span>   Vincent Cantin </span><span>This other approach which uses the negative lookahead does put the </span><code>&quot;\n&quot;</code><span> in the right place in the result, but there is another problem: The </span><code>BlankLine</code><span> is missing in the result. That may be a bug of instaparse. I am using the version </span><code>1.4.9</code><span>.

</span><pre>((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = !#&apos;.&apos;&quot;)
 &quot;abc\ndef\n&quot;)
=&gt;
[:Paragraph [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
            [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL &quot;\n&quot;]]]
</pre></div><div id="t1542870534018300" t="2018-11-22 07:08:54 Vincent Cantin I am going to use this workaround for now: append “EOF” at the end of the input and parse it. It works very well  🙂 
 ((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = &apos;EOF&apos; #&apos;\\Z&apos;&quot;) ; works as well with !#&apos;.&apos;
 &quot;abc\ndef\nEOF&quot;)
=&gt;
[:Paragraph
 [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
 [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL &quot;\n&quot;]]
 [:BlankLine [:EOL [:EOF &quot;EOF&quot; &quot;&quot;]]]]
"><a href="#t1542870534018300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">07:08:54</span>   Vincent Cantin </span><span>I am going to use this workaround for now: append “EOF” at the end of the input and parse it. It works very well </span><b>🙂</b><span>
</span><pre>((insta/parser
   &quot;Paragraph = NonBlankLine+ BlankLine+
    BlankLine = #&apos;[ \\t]&apos;* EOL
    NonBlankLine = #&apos;\\S&apos;+ EOL
    EOL = (#&apos;\\n&apos; | EOF)
    EOF = &apos;EOF&apos; #&apos;\\Z&apos;&quot;) ; works as well with !#&apos;.&apos;
 &quot;abc\ndef\nEOF&quot;)
=&gt;
[:Paragraph
 [:NonBlankLine &quot;a&quot; &quot;b&quot; &quot;c&quot; [:EOL &quot;\n&quot;]]
 [:NonBlankLine &quot;d&quot; &quot;e&quot; &quot;f&quot; [:EOL &quot;\n&quot;]]
 [:BlankLine [:EOL [:EOF &quot;EOF&quot; &quot;&quot;]]]]
</pre></div><div id="t1542899976018900" t="2018-11-22 15:19:36 SoV4 love instaparse"><a href="#t1542899976018900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2018-11-22</span> <span class="t" onclick="H(this)">15:19:36</span>             SoV4 </span><span>love instaparse</span></div><div id="t1549309937001300" t="2019-02-04 19:52:17 mattly is there a way to get line/column numbers associated with the tokens generated from instaparse?"><a href="#t1549309937001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">19:52:17</span>           mattly </span><span>is there a way to get line/column numbers associated with the tokens generated from instaparse?</span></div><div id="t1549310021002100" t="2019-02-04 19:53:41 aengelberg Yeah, check out  instaparse.line-col"><a href="#t1549310021002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">19:53:41</span>       aengelberg </span><span>Yeah, check out </span><code>instaparse.line-col</code></div><div id="t1549310169002300" t="2019-02-04 19:56:09 mattly yay!"><a href="#t1549310169002300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">19:56:09</span>           mattly </span><span>yay!</span></div><div id="t1549310171002500" t="2019-02-04 19:56:11 mattly thanks"><a href="#t1549310171002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">19:56:11</span>           mattly </span><span>thanks</span></div><div id="t1549318658002800" t="2019-02-04 22:17:38 souenzzo it&apos;s just DATA"><a href="#t1549318658002800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">22:17:38</span>         souenzzo </span><span>it&apos;s just DATA</span></div><div id="t1549318691003000" t="2019-02-04 22:18:11 aengelberg it&apos;s not code, it&apos;s DATA"><a href="#t1549318691003000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-02-04</span> <span class="t" onclick="H(this)">22:18:11</span>       aengelberg </span><span>it&apos;s not code, it&apos;s DATA</span></div><div id="t1558489406000800" t="2019-05-22 01:43:26 souenzzo is possible to write a grammar for clojure?
including things like  ^metadata  and  ;; comments"><a href="#t1558489406000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-22</span> <span class="t" onclick="H(this)">01:43:26</span>         souenzzo </span><span>is possible to write a grammar for clojure?
including things like </span><code>^metadata</code><span> and </span><code>;; comments</code></div><div id="t1558987821000300" t="2019-05-27 20:10:21 aengelberg It should be possible, yes"><a href="#t1558987821000300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span> <span class="t" onclick="H(this)">20:10:21</span>       aengelberg </span><span>It should be possible, yes</span></div><div id="t1558987829000500" t="2019-05-27 20:10:29 aengelberg I&apos;m not aware of any prior art"><a href="#t1558987829000500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-05-27</span> <span class="t" onclick="H(this)">20:10:29</span>       aengelberg </span><span>I&apos;m not aware of any prior art</span></div><div id="t1565990285001700" t="2019-08-16 21:18:05 aengelberg not to my knowledge, unless you count ClojureScript"><a href="#t1565990285001700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:18:05</span>       aengelberg </span><span>not to my knowledge, unless you count ClojureScript</span></div><div id="t1565990321002200" t="2019-08-16 21:18:41 aengelberg the underlying engine is actually based on an existing algorithm called GLL, which was originally implemented in Racket  https://github.com/epsil/gll"><a href="#t1565990321002200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:18:41</span>       aengelberg </span><span>the underlying engine is actually based on an existing algorithm called GLL, which was originally implemented in Racket </span><a href="https://github.com/epsil/gll" target="_blank">https://github.com/epsil/gll</a></div><div id="t1565990408003900" t="2019-08-16 21:20:08 aengelberg but being able to create parsers based on arbitrary EBNF specifications (rather than a language-specific DSL of combinators) I think is unique to instaparse"><a href="#t1565990408003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:20:08</span>       aengelberg </span><span>but being able to create parsers based on arbitrary EBNF specifications (rather than a language-specific DSL of combinators) I think is unique to instaparse</span></div><div id="t1565990453004400" t="2019-08-16 21:20:53 pepas yeah, I was so surprised when I started getting into parsers and no one seemed to take BNF as input"><a href="#t1565990453004400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:20:53</span>            pepas </span><span>yeah, I was so surprised when I started getting into parsers and no one seemed to take BNF as input</span></div><div id="t1565990462004700" t="2019-08-16 21:21:02 pepas Huge kudos to you and your old man!"><a href="#t1565990462004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:21:02</span>            pepas </span><span>Huge kudos to you and your old man!</span></div><div id="t1565990467004900" t="2019-08-16 21:21:07 aengelberg thanks!"><a href="#t1565990467004900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-16</span> <span class="t" onclick="H(this)">21:21:07</span>       aengelberg </span><span>thanks!</span></div><div id="t1566531802006200" t="2019-08-23 03:43:22 hiredman is there I recommended way for dealing with C style comments like / ... / instagram parsers? I vaguely recall maybe trying to handle them with a custom whitespace rule, but it has been a long time"><a href="#t1566531802006200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-08-23</span> <span class="t" onclick="H(this)">03:43:22</span>         hiredman </span><span>is there I recommended way for dealing with C style comments like / ... / instagram parsers? I vaguely recall maybe trying to handle them with a custom whitespace rule, but it has been a long time</span></div><div id="t1570984898001200" t="2019-10-13 16:41:38 skelter I have a combination of a parser and a particular data file that causes the parser to consume CPU and memory until out of memory exception."><a href="#t1570984898001200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-13</span> <span class="t" onclick="H(this)">16:41:38</span>          skelter </span><span>I have a combination of a parser and a particular data file that causes the parser to consume CPU and memory until out of memory exception.</span></div><div id="t1571089622001400" t="2019-10-14 21:47:02 aengelberg that&apos;s not good"><a href="#t1571089622001400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-14</span> <span class="t" onclick="H(this)">21:47:02</span>       aengelberg </span><span>that&apos;s not good</span></div><div id="t1571192275002100" t="2019-10-16 02:17:55 skelter I think I now have it isolated to its own project, if you’d like a captured specimen."><a href="#t1571192275002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-16</span> <span class="t" onclick="H(this)">02:17:55</span>          skelter </span><span>I think I now have it isolated to its own project, if you’d like a captured specimen.</span></div><div id="t1571192294002300" t="2019-10-16 02:18:14 aengelberg that would be great"><a href="#t1571192294002300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-16</span> <span class="t" onclick="H(this)">02:18:14</span>       aengelberg </span><span>that would be great</span></div><div id="t1571192301002500" t="2019-10-16 02:18:21 aengelberg github tickets also welcome"><a href="#t1571192301002500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-16</span> <span class="t" onclick="H(this)">02:18:21</span>       aengelberg </span><span>github tickets also welcome</span></div><div id="t1571275889003500" t="2019-10-17 01:31:29 skelter Not sure I want this particular specimen in the public pipeline.  Maybe if I can reduce it to something more comfortable."><a href="#t1571275889003500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-17</span> <span class="t" onclick="H(this)">01:31:29</span>          skelter </span><span>Not sure I want this particular specimen in the public pipeline.  Maybe if I can reduce it to something more comfortable.</span></div><div id="t1571276492004100" t="2019-10-17 01:41:32 skelter regarding the channel description line, what is a good example of trampolining a parser?"><a href="#t1571276492004100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-17</span> <span class="t" onclick="H(this)">01:41:32</span>          skelter </span><span>regarding the channel description line, what is a good example of trampolining a parser?</span></div><div id="t1571290567006600" t="2019-10-17 05:36:07 hiredman I suspect it is tongue in cheek, the internals of instaparse(and many gll parsers) use what you could call a trampoline to drive parsing"><a href="#t1571290567006600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-17</span> <span class="t" onclick="H(this)">05:36:07</span>         hiredman </span><span>I suspect it is tongue in cheek, the internals of instaparse(and many gll parsers) use what you could call a trampoline to drive parsing</span></div><div id="t1571295174007400" t="2019-10-17 06:52:54 aengelberg yeah, I think that came from a conversation with @gfredericks in which we discussed parsers generating parsers or some other unusual use case"><a href="#t1571295174007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-17</span> <span class="t" onclick="H(this)">06:52:54</span>       aengelberg </span><span>yeah, I think that came from a conversation with @gfredericks in which we discussed parsers generating parsers or some other unusual use case</span></div><div id="t1571438354011000" t="2019-10-18 22:39:14 gfredericks Slander. I don&apos;t recall any such thing."><a href="#t1571438354011000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-18</span> <span class="t" onclick="H(this)">22:39:14</span>      gfredericks </span><span>Slander. I don&apos;t recall any such thing.</span></div><div id="t1572354437012000" t="2019-10-29 13:07:17 Daniel Hines Does there happen to exist a tool for taking an instaparse grammar and generating random strings with it?"><a href="#t1572354437012000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-29</span> <span class="t" onclick="H(this)">13:07:17</span>     Daniel Hines </span><span>Does there happen to exist a tool for taking an instaparse grammar and generating random strings with it?</span></div><div id="t1572414114012900" t="2019-10-30 05:41:54 aengelberg @d4hines the idea has been tossed around a couple times, but the only implementation I&apos;m aware of is my experiment  https://github.com/aengelberg/instagenerate  which isn&apos;t super useable in practice."><a href="#t1572414114012900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">05:41:54</span>       aengelberg </span><span>@d4hines the idea has been tossed around a couple times, but the only implementation I&apos;m aware of is my experiment </span><a href="https://github.com/aengelberg/instagenerate" target="_blank">https://github.com/aengelberg/instagenerate</a><span> which isn&apos;t super useable in practice.</span></div><div id="t1572414386016200" t="2019-10-30 05:46:26 aengelberg My usage of core.logic was primarily motivated by a challenge to reverse-engineer output parse trees or fill in partial outputs. But if the main goal is to simply generate random inputs to a grammar (which most people really want), I think the implementation could be a lot cleaner, and leverage test.check."><a href="#t1572414386016200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">05:46:26</span>       aengelberg </span><span>My usage of core.logic was primarily motivated by a challenge to reverse-engineer output parse trees or fill in partial outputs. But if the main goal is to simply generate random inputs to a grammar (which most people really want), I think the implementation could be a lot cleaner, and leverage test.check.</span></div><div id="t1572414440016900" t="2019-10-30 05:47:20 aengelberg The hardest part I think would be coming up with a good solution to lookahead and negative lookahead, while guaranteeing terminable generation..."><a href="#t1572414440016900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">05:47:20</span>       aengelberg </span><span>The hardest part I think would be coming up with a good solution to lookahead and negative lookahead, while guaranteeing terminable generation...</span></div><div id="t1572443134022400" t="2019-10-30 13:45:34 Daniel Hines I&apos;m a noob when it comes to this stuff. Do you need lookahead for an EBNF grammar?"><a href="#t1572443134022400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">13:45:34</span>          Daniel Hines </span><span>I&apos;m a noob when it comes to this stuff. Do you need lookahead for an EBNF grammar?</span></div><div id="t1572622180024900" t="2019-11-01 15:29:40 aengelberg I don’t think so, it’s just a nice feature that sometimes people take advantage of"><a href="#t1572622180024900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-01</span> <span class="t" onclick="H(this)">15:29:40</span>            aengelberg </span><span>I don’t think so, it’s just a nice feature that sometimes people take advantage of</span></div><div id="t1572439743019500" t="2019-10-30 12:49:03 Daniel Hines That&apos;s really cool!"><a href="#t1572439743019500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">12:49:03</span>     Daniel Hines </span><span>That&apos;s really cool!</span></div><div id="t1572440593020700" t="2019-10-30 13:03:13 jeroenvandijk Maybe this project is relevant  https://github.com/cs-au-dk/dk.brics.automaton  ? We used it to generate data, also from regexps"><a href="#t1572440593020700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">13:03:13</span>    jeroenvandijk </span><span>Maybe this project is relevant </span><a href="https://github.com/cs-au-dk/dk.brics.automaton" target="_blank">https://github.com/cs-au-dk/dk.brics.automaton</a><span> ? We used it to generate data, also from regexps</span></div><div id="t1572445657023600" t="2019-10-30 14:27:37 gfredericks When I wrote a generator for regexes I intentionally didn&apos;t try to support lookaheadbehinds"><a href="#t1572445657023600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">14:27:37</span>      gfredericks </span><span>When I wrote a generator for regexes I intentionally didn&apos;t try to support lookaheadbehinds</span></div><div id="t1572445692024300" t="2019-10-30 14:28:12 gfredericks But it seems like something you could support with the same caveats as such-that"><a href="#t1572445692024300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">14:28:12</span>      gfredericks </span><span>But it seems like something you could support with the same caveats as such-that</span></div><div id="t1572445713024800" t="2019-10-30 14:28:33 gfredericks (And have it fail the same way, rather than infinite loop)"><a href="#t1572445713024800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-10-30</span> <span class="t" onclick="H(this)">14:28:33</span>      gfredericks </span><span>(And have it fail the same way, rather than infinite loop)</span></div><div id="t1574769155027700" t="2019-11-26 11:52:35 Ahmad Nazir Raja Hi,
This is related to greedy behavior of instaparse. I have the following grammar:


 X := Y* Z*

Y := CHAR
Z := CHAR

CHAR := (&apos;a&apos; | &apos;b&apos; | &apos;c&apos;) 

With input  aaa  I get the output shown below. I expect greedy behavior and that Y should be matched instead of Z. Does anyone have an idea to why this happens or how to enforce greedy behavior?"><a href="#t1574769155027700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-11-26</span> <span class="t" onclick="H(this)">11:52:35</span> Ahmad Nazir Raja </span><span>Hi,
This is related to greedy behavior of instaparse. I have the following grammar:


</span><pre>X := Y* Z*

Y := CHAR
Z := CHAR

CHAR := (&apos;a&apos; | &apos;b&apos; | &apos;c&apos;)</pre><span>

With input </span><code>aaa</code><span> I get the output shown below. I expect greedy behavior and that Y should be matched instead of Z. Does anyone have an idea to why this happens or how to enforce greedy behavior?</span></div><div id="t1575398126029300" t="2019-12-03 18:35:26 aengelberg @U82LVQ5NX sorry for the late reply, but instaparse doesn’t guarantee greediness or non-greediness; in fact, if you call  insta/parses  you will get every version of the parse including ones where  Y  is parsing some or all of the chars."><a href="#t1575398126029300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:35:26</span>            aengelberg </span><span>@U82LVQ5NX sorry for the late reply, but instaparse doesn’t guarantee greediness or non-greediness; in fact, if you call </span><code>insta/parses</code><span> you will get every version of the parse including ones where </span><code>Y</code><span> is parsing some or all of the chars.</span></div><div id="t1575398280029500" t="2019-12-03 18:38:00 Ahmad Nazir Raja Yes, I tried  parses  and I could see all versions. For some reason I thought there would be a way to prefer one version over the other. Anyway, thanks for the response."><a href="#t1575398280029500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:38:00</span>      Ahmad Nazir Raja </span><span>Yes, I tried </span><code>parses</code><span> and I could see all versions. For some reason I thought there would be a way to prefer one version over the other. Anyway, thanks for the response.</span></div><div id="t1575398282029700" t="2019-12-03 18:38:02 aengelberg You can achieve greediness by using negative lookahead:
 X := Y* !Y Z*"><a href="#t1575398282029700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:38:02</span>            aengelberg </span><span>You can achieve greediness by using negative lookahead:
</span><pre>X := Y* !Y Z*</pre></div><div id="t1575398307029900" t="2019-12-03 18:38:27 aengelberg this ensures that it won’t start parsing Z until it can’t parse Y anymore."><a href="#t1575398307029900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:38:27</span>            aengelberg </span><span>this ensures that it won’t start parsing Z until it can’t parse Y anymore.</span></div><div id="t1575397996028300" t="2019-12-03 18:33:16 Daniel Hines How do I read this?"><a href="#t1575397996028300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:33:16</span>     Daniel Hines </span><span>How do I read this?</span></div><div id="t1575398035028800" t="2019-12-03 18:33:55 Daniel Hines"><a href="#t1575398035028800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:33:55</span>     Daniel Hines </span></div><div id="t1575398422030200" t="2019-12-03 18:40:22 aengelberg I think the instaparse equivalent of this would be:
 remainder_sort_names := &apos;&apos; | &apos;,&apos; sort_name remainder_sorts"><a href="#t1575398422030200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:40:22</span>            aengelberg </span><span>I think the instaparse equivalent of this would be:
</span><pre>remainder_sort_names := &apos;&apos; | &apos;,&apos; sort_name remainder_sorts</pre></div><div id="t1575398446030400" t="2019-12-03 18:40:46 Daniel Hines Oh! Duh! Epsilon!"><a href="#t1575398446030400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:40:46</span>          Daniel Hines </span><span>Oh! Duh! Epsilon!</span></div><div id="t1575398450030600" t="2019-12-03 18:40:50 aengelberg although instaparse also supports  ε  as an alias for  &apos;&apos;"><a href="#t1575398450030600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:40:50</span>            aengelberg </span><span>although instaparse also supports </span><code>ε</code><span> as an alias for </span><code>&apos;&apos;</code></div><div id="t1575398480030800" t="2019-12-03 18:41:20 Daniel Hines Noob fail. Thanks a bunch!"><a href="#t1575398480030800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2019-12-03</span> <span class="t" onclick="H(this)">18:41:20</span>          Daniel Hines </span><span>Noob fail. Thanks a bunch!</span></div><div id="t1578168105000600" t="2020-01-04 20:01:45 SoV4 Hi!  Why is it called a &quot;Context-Free&quot; Grammar?"><a href="#t1578168105000600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span> <span class="t" onclick="H(this)">20:01:45</span>             SoV4 </span><span>Hi!  Why is it called a &quot;Context-Free&quot; Grammar?</span></div><div id="t1578168111000800" t="2020-01-04 20:01:51 SoV4 Isn&apos;t it nothing BUT context?"><a href="#t1578168111000800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span> <span class="t" onclick="H(this)">20:01:51</span>             SoV4 </span><span>Isn&apos;t it nothing BUT context?</span></div><div id="t1578168138001000" t="2020-01-04 20:02:18 SoV4 😃"><a href="#t1578168138001000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span> <span class="t" onclick="H(this)">20:02:18</span>             SoV4 </span><b>😃</b></div><div id="t1578169011001300" t="2020-01-04 20:16:51 gfredericks wikipedia says rules in a context-sensitive grammar take the form

α_A_β → αγβ"><a href="#t1578169011001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-04</span> <span class="t" onclick="H(this)">20:16:51</span>      gfredericks </span><span>wikipedia says rules in a context-sensitive grammar take the form

α_A_β → αγβ</span></div><div id="t1578191828001800" t="2020-01-05 02:37:08 SoV4 Hmmm I seeeee.  Thank you @gfredericks"><a href="#t1578191828001800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-05</span> <span class="t" onclick="H(this)">02:37:08</span>             SoV4 </span><span>Hmmm I seeeee.  Thank you @gfredericks</span></div><div id="t1578344123007100" t="2020-01-06 20:55:23 hiredman I believe the terminology(and concepts) comes out of linguistics first (not cs) and was first used as a way to construct (or produce) all the strings in a language (a constructive definition of all the strings in a language). So context free comes from the fact that when you are using the grammar to construct strings you can apply the production rules anywhere they match without other restrictions"><a href="#t1578344123007100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-06</span> <span class="t" onclick="H(this)">20:55:23</span>         hiredman </span><span>I believe the terminology(and concepts) comes out of linguistics first (not cs) and was first used as a way to construct (or produce) all the strings in a language (a constructive definition of all the strings in a language). So context free comes from the fact that when you are using the grammar to construct strings you can apply the production rules anywhere they match without other restrictions</span></div><div id="t1578344311007200" t="2020-01-06 20:58:31 hiredman https://en.m.wikipedia.org/wiki/Generative_grammar"><a href="#t1578344311007200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-06</span> <span class="t" onclick="H(this)">20:58:31</span>         hiredman </span><a href="https://en.m.wikipedia.org/wiki/Generative_grammar" target="_blank">https://en.m.wikipedia.org/wiki/Generative_grammar</a></div><div id="t1579966059000700" t="2020-01-25 15:27:39 Adrian Smith https://i.imgur.com/G1xdp1F.png  In this example how do I make it so the identifiers rule matches anything until the next rule along is valid?"><a href="#t1579966059000700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-25</span> <span class="t" onclick="H(this)">15:27:39</span>     Adrian Smith </span><a href="https://i.imgur.com/G1xdp1F.png" target="_blank">https://i.imgur.com/G1xdp1F.png</a><span> In this example how do I make it so the identifiers rule matches anything until the next rule along is valid?</span></div><div id="t1579966289001300" t="2020-01-25 15:31:29 Adrian Smith ah I see it kind of explains this in  https://github.com/Engelberg/instaparse#regular-expressions-a-word-of-warning"><a href="#t1579966289001300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-25</span> <span class="t" onclick="H(this)">15:31:29</span>     Adrian Smith </span><span>ah I see it kind of explains this in </span><a href="https://github.com/Engelberg/instaparse#regular-expressions-a-word-of-warning" target="_blank">https://github.com/Engelberg/instaparse#regular-expressions-a-word-of-warning</a></div><div id="t1580043765002100" t="2020-01-26 13:02:45 Adrian Smith how would you go about writing a grammer for SQL columns? where commas must appear between elements"><a href="#t1580043765002100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-01-26</span> <span class="t" onclick="H(this)">13:02:45</span>     Adrian Smith </span><span>how would you go about writing a grammer for SQL columns? where commas must appear between elements</span></div><div id="t1582276769007900" t="2020-02-21 09:19:29 mmeix New to Instaparse and wrapping my head around grammars: how would I write a grammar that can do nested tag pairs like in xml:  &quot;&lt;p&gt;&lt;span&gt;text&lt;/span&gt;&lt;/p&gt;&quot; =&gt; [:p [:span text]]  ?"><a href="#t1582276769007900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-21</span> <span class="t" onclick="H(this)">09:19:29</span>            mmeix </span><span>New to Instaparse and wrapping my head around grammars: how would I write a grammar that can do nested tag pairs like in xml: </span><code>&quot;&lt;p&gt;&lt;span&gt;text&lt;/span&gt;&lt;/p&gt;&quot; =&gt; [:p [:span text]]</code><span> ?</span></div><div id="t1582763876005000" t="2020-02-27 00:37:56 aengelberg it’s possible to parse XML hierarchies into Clojure data, however I don’t think you can enforce that the tags must be matching."><a href="#t1582763876005000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">00:37:56</span>            aengelberg </span><span>it’s possible to parse XML hierarchies into Clojure data, however I don’t think you can enforce that the tags must be matching.</span></div><div id="t1582763916005300" t="2020-02-27 00:38:36 aengelberg You can enforce that manually with your own custom logic after the fact, just not as part of the parser."><a href="#t1582763916005300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">00:38:36</span>            aengelberg </span><span>You can enforce that manually with your own custom logic after the fact, just not as part of the parser.</span></div><div id="t1582822980014000" t="2020-02-27 17:03:00 mmeix So I would just trust, that tags are properly matched/paired/nested."><a href="#t1582822980014000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">17:03:00</span>                 mmeix </span><span>So I would just trust, that tags are properly matched/paired/nested.</span></div><div id="t1582823026014200" t="2020-02-27 17:03:46 mmeix and take each closing tag as the next needed"><a href="#t1582823026014200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">17:03:46</span>                 mmeix </span><span>and take each closing tag as the next needed</span></div><div id="t1582288244011400" t="2020-02-21 12:30:44 manutter51 caveat: I haven’t had my coffee yet, but the basic idea is that you say something like “a BLOCK element is a P or a DIV or a TABLE (etc), an INLINE element is a SPAN or a B or TEXT (etc),” and then say “a P element is the literal string ‘&lt;P&gt;’ or ‘&lt;p&gt;’ followed by zero or more INLINE elements, followed by the literal string ‘&lt;/P&gt;’ or ‘&lt;/p&gt;’.” And similarly with SPAN."><a href="#t1582288244011400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-21</span> <span class="t" onclick="H(this)">12:30:44</span>       manutter51 </span><span>caveat: I haven’t had my coffee yet, but the basic idea is that you say something like “a BLOCK element is a P or a DIV or a TABLE (etc), an INLINE element is a SPAN or a B or TEXT (etc),” and then say “a P element is the literal string ‘&lt;P&gt;’ or ‘&lt;p&gt;’ followed by zero or more INLINE elements, followed by the literal string ‘&lt;/P&gt;’ or ‘&lt;/p&gt;’.” And similarly with SPAN.</span></div><div id="t1582290696012100" t="2020-02-21 13:11:36 mmeix ah! thanks ... that should start it"><a href="#t1582290696012100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-21</span> <span class="t" onclick="H(this)">13:11:36</span>            mmeix </span><span>ah! thanks ... that should start it</span></div><div id="t1582290832012700" t="2020-02-21 13:13:52 manutter51 The other caveat is that Instaparse is incredibly fun to work with and may be addictive.  😉"><a href="#t1582290832012700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-21</span> <span class="t" onclick="H(this)">13:13:52</span>       manutter51 </span><span>The other caveat is that Instaparse is incredibly fun to work with and may be addictive. </span><b>😉</b></div><div id="t1582295549013100" t="2020-02-21 14:32:29 mmeix Confirmed!  😁"><a href="#t1582295549013100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-21</span> <span class="t" onclick="H(this)">14:32:29</span>            mmeix </span><span>Confirmed! </span><b>😁</b></div><div id="t1582820543006500" t="2020-02-27 16:22:23 SoV4 @mmeix it looks to me at first glance that you could make some rules
span = &lt;span&gt; val &lt;/span&gt;
paragraph = &lt;p&gt; val &lt;/p&gt;
val = paragraph* | span* | val
[editS: added stars to p and span in val]"><a href="#t1582820543006500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:22:23</span>             SoV4 </span><span>@mmeix it looks to me at first glance that you could make some rules
span = &lt;span&gt; val &lt;/span&gt;
paragraph = &lt;p&gt; val &lt;/p&gt;
val = paragraph* | span* | val
[editS: added stars to p and span in val]</span></div><div id="t1582820559006900" t="2020-02-27 16:22:39 SoV4 the last rule allows recursion, which can infinitely nest spans or p&apos;s"><a href="#t1582820559006900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:22:39</span>             SoV4 </span><span>the last rule allows recursion, which can infinitely nest spans or p&apos;s</span></div><div id="t1582820579007400" t="2020-02-27 16:22:59 SoV4 notice how i defined the rigid components of the grammar on the right-hand side, with my variable, and how i use variable names only on the left-hand side."><a href="#t1582820579007400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:22:59</span>             SoV4 </span><span>notice how i defined the rigid components of the grammar on the right-hand side, with my variable, and how i use variable names only on the left-hand side.</span></div><div id="t1582820850007700" t="2020-02-27 16:27:30 mmeix That looks like a good recipe. Thanks!"><a href="#t1582820850007700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:27:30</span>            mmeix </span><span>That looks like a good recipe. Thanks!</span></div><div id="t1582820991008400" t="2020-02-27 16:29:51 SoV4 @mmeix  http://instaparse-live.matt.is/#/-M16TrdGzPQ0FFLRyCyd/v1"><a href="#t1582820991008400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:29:51</span>             SoV4 </span><span>@mmeix </span><a href="http://instaparse-live.matt.is/#/-M16TrdGzPQ0FFLRyCyd/v1" target="_blank">http://instaparse-live.matt.is/#/-M16TrdGzPQ0FFLRyCyd/v1</a></div><div id="t1582821007008800" t="2020-02-27 16:30:07 SoV4 i had to make sure it works before setting you out"><a href="#t1582821007008800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:30:07</span>             SoV4 </span><span>i had to make sure it works before setting you out</span></div><div id="t1582821033009300" t="2020-02-27 16:30:33 SoV4 notice how there can be multiple valid parses with the recursion now."><a href="#t1582821033009300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:30:33</span>             SoV4 </span><span>notice how there can be multiple valid parses with the recursion now.</span></div><div id="t1582821167010400" t="2020-02-27 16:32:47 SoV4 you&apos;ll probably need to be creative with the output to get rid of tags you don&apos;t need  😃   i forget exactly how we would delete unnecessary strings in the grammar itself, there&apos;s a way with rules i think, it might just be mathematical though lol"><a href="#t1582821167010400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:32:47</span>             SoV4 </span><span>you&apos;ll probably need to be creative with the output to get rid of tags you don&apos;t need </span><b>😃</b><span>  i forget exactly how we would delete unnecessary strings in the grammar itself, there&apos;s a way with rules i think, it might just be mathematical though lol</span></div><div id="t1582822160011100" t="2020-02-27 16:49:20 mmeix Getting rid of tags is done by enclosing them with &lt;…&gt;"><a href="#t1582822160011100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:49:20</span>            mmeix </span><span>Getting rid of tags is done by enclosing them with &lt;…&gt;</span></div><div id="t1582822178011500" t="2020-02-27 16:49:38 mmeix Thanks for the gist!"><a href="#t1582822178011500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:49:38</span>            mmeix </span><span>Thanks for the gist!</span></div><div id="t1582822312013400" t="2020-02-27 16:51:52 mmeix Now I’m thinking, if it would be possible to get a general solution without enumerating all possible tags (span, p , …). It would need to somehow remember the tag name until its closing cousin arrives"><a href="#t1582822312013400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:51:52</span>            mmeix </span><span>Now I’m thinking, if it would be possible to get a general solution without enumerating all possible tags (span, p , …). It would need to somehow remember the tag name until its closing cousin arrives</span></div><div id="t1582822396013800" t="2020-02-27 16:53:16 mmeix Didn’t know  http://instaparse-live.matt.is  ! Great tool!"><a href="#t1582822396013800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-27</span> <span class="t" onclick="H(this)">16:53:16</span>            mmeix </span><span>Didn’t know </span><a href="http://instaparse-live.matt.is" target="_blank">http://instaparse-live.matt.is</a><span> ! Great tool!</span></div><div id="t1582909209018900" t="2020-02-28 17:00:09 SoV4 @mmeix i think you probably want to parse this into a tree and go over it tree-style if you need opening/closing tag harmony.  using a CFG to do that might be possible but it&apos;s more for orientable sequences.

in reality if you wanted to you could just run over that thing wit a regex and make opening tags [: and closing tags ], throwing away &lt;/span&gt; and &lt;/p&gt; in favor of ]

i would definitely write some sample input, some sample output, and then see what tool is best for the job.  instaparse is indeed powerful, i used it to create an EBNF grammar representation of Japanese.
 https://learn-japanese.org/2020/01/04/japanese-grammar-in-ebnf-notation/"><a href="#t1582909209018900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-02-28</span> <span class="t" onclick="H(this)">17:00:09</span>             SoV4 </span><span>@mmeix i think you probably want to parse this into a tree and go over it tree-style if you need opening/closing tag harmony.  using a CFG to do that might be possible but it&apos;s more for orientable sequences.

in reality if you wanted to you could just run over that thing wit a regex and make opening tags [: and closing tags ], throwing away &lt;/span&gt; and &lt;/p&gt; in favor of ]

i would definitely write some sample input, some sample output, and then see what tool is best for the job.  instaparse is indeed powerful, i used it to create an EBNF grammar representation of Japanese.
</span><a href="https://learn-japanese.org/2020/01/04/japanese-grammar-in-ebnf-notation/" target="_blank">https://learn-japanese.org/2020/01/04/japanese-grammar-in-ebnf-notation/</a></div><div id="t1583380381020000" t="2020-03-05 03:53:01 bmaddy I have a question about how to do something in Instaparse. Imagine a string like this:
 3 1 John 0 2 Jane 2 1 3 3 Bob 0 
The first number is the number of people. Then, for each person, an id, name, number of people they supervise, and list of ids for the people they supervise. So in that example string there are 3 people. Jane (id = 2) supervises John (id = 1) and Bob (id = 3). Can I use Instaparse to parse stuff like that? Specifically, I&apos;m wondering how to read a number n and parse exactly n items after that."><a href="#t1583380381020000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">03:53:01</span>           bmaddy </span><span>I have a question about how to do something in Instaparse. Imagine a string like this:
</span><pre>3 1 John 0 2 Jane 2 1 3 3 Bob 0</pre><span>
The first number is the number of people. Then, for each person, an id, name, number of people they supervise, and list of ids for the people they supervise. So in that example string there are 3 people. Jane (id = 2) supervises John (id = 1) and Bob (id = 3). Can I use Instaparse to parse stuff like that? Specifically, I&apos;m wondering how to read a number n and parse exactly n items after that.</span></div><div id="t1583382587021000" t="2020-03-05 04:29:47 aengelberg sadly Instaparse isn&apos;t well suited for situations where you parse a thing and then use that as an input to some later part of the same parser."><a href="#t1583382587021000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">04:29:47</span>       aengelberg </span><span>sadly Instaparse isn&apos;t well suited for situations where you parse a thing and then use that as an input to some later part of the same parser.</span></div><div id="t1583382642021300" t="2020-03-05 04:30:42 bmaddy Sounds good. Thank you!"><a href="#t1583382642021300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">04:30:42</span>           bmaddy </span><span>Sounds good. Thank you!</span></div><div id="t1583429333021600" t="2020-03-05 17:28:53 zane Out of curiosity, what would be better suited for situations like that?"><a href="#t1583429333021600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">17:28:53</span>             zane </span><span>Out of curiosity, what would be better suited for situations like that?</span></div><div id="t1583444600022100" t="2020-03-05 21:43:20 thom https://github.com/youngnh/parsatron  might be a better fit"><a href="#t1583444600022100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">21:43:20</span>             thom </span><a href="https://github.com/youngnh/parsatron" target="_blank">https://github.com/youngnh/parsatron</a><span> might be a better fit</span></div><div id="t1583444647022600" t="2020-03-05 21:44:07 thom if you have a look at the way  let-&gt;&gt;  can be used in  https://github.com/youngnh/parsatron/blob/master/doc/guide.markdown"><a href="#t1583444647022600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-03-05</span> <span class="t" onclick="H(this)">21:44:07</span>             thom </span><span>if you have a look at the way </span><code>let-&gt;&gt;</code><span> can be used in </span><a href="https://github.com/youngnh/parsatron/blob/master/doc/guide.markdown" target="_blank">https://github.com/youngnh/parsatron/blob/master/doc/guide.markdown</a></div><div id="t1586607236012200" t="2020-04-11 12:13:56 SoV4 does one have to do anything special to use instaparse on the clientside (cljs) ?"><a href="#t1586607236012200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span> <span class="t" onclick="H(this)">12:13:56</span>             SoV4 </span><span>does one have to do anything special to use instaparse on the clientside (cljs) ?</span></div><div id="t1586617312012900" t="2020-04-11 15:01:52 gfredericks I used it in  https://gfredericks.com/things/bespoke-primes 

I don&apos;t remember doing anything special but that doesn&apos;t mean very much"><a href="#t1586617312012900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span> <span class="t" onclick="H(this)">15:01:52</span>      gfredericks </span><span>I used it in </span><a href="https://gfredericks.com/things/bespoke-primes" target="_blank">https://gfredericks.com/things/bespoke-primes</a><span>

I don&apos;t remember doing anything special but that doesn&apos;t mean very much</span></div><div id="t1586644286013200" t="2020-04-11 22:31:26 SoV4 sweetness.  looks like it should work outta da box!"><a href="#t1586644286013200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-11</span> <span class="t" onclick="H(this)">22:31:26</span>             SoV4 </span><span>sweetness.  looks like it should work outta da box!</span></div><div id="t1586826485014000" t="2020-04-14 01:08:05 zane Can confirm, does work outta da box.  :+1: :skin-tone-2:"><a href="#t1586826485014000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-14</span> <span class="t" onclick="H(this)">01:08:05</span>             zane </span><span>Can confirm, does work outta da box. </span><b>:+1:</b><b>:skin-tone-2:</b></div><div id="t1586888373014900" t="2020-04-14 18:19:33 zane I&apos;m curious how often folks wind up using records (vs other alternatives) when writing polymorphic transformation functions for their instaparse parse trees."><a href="#t1586888373014900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-14</span> <span class="t" onclick="H(this)">18:19:33</span>             zane </span><span>I&apos;m curious how often folks wind up using records (vs other alternatives) when writing polymorphic transformation functions for their instaparse parse trees.</span></div><div id="t1587066989015100" t="2020-04-16 19:56:29 zane Judging from the  README  there doesn&apos;t appear to be a (public) function to get a data representation of an Instaparse grammar, but could someone confirm?"><a href="#t1587066989015100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span> <span class="t" onclick="H(this)">19:56:29</span>             zane </span><span>Judging from the </span><code>README</code><span> there doesn&apos;t appear to be a (public) function to get a data representation of an Instaparse grammar, but could someone confirm?</span></div><div id="t1587079469015500" t="2020-04-16 23:24:29 gfredericks I was wanting that recently but I can&apos;t remember if it was for a good reason"><a href="#t1587079469015500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-16</span> <span class="t" onclick="H(this)">23:24:29</span>      gfredericks </span><span>I was wanting that recently but I can&apos;t remember if it was for a good reason</span></div><div id="t1587147502015800" t="2020-04-17 18:18:22 zane I&apos;m wanting to generate documentation, but perhaps there&apos;s a better way to go about that."><a href="#t1587147502015800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-04-17</span> <span class="t" onclick="H(this)">18:18:22</span>             zane </span><span>I&apos;m wanting to generate documentation, but perhaps there&apos;s a better way to go about that.</span></div><div id="t1590602735017800" t="2020-05-27 18:05:35 SoV4 Hi everyone, I&apos;m interesting in dynamically defining grammar components.  I have a big list of nouns, I&apos;d like to incorporate them into my grammar without too much crazy.  Is there some way I can add in a dynamic rule with something like nouns = coll?"><a href="#t1590602735017800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:05:35</span>             SoV4 </span><span>Hi everyone, I&apos;m interesting in dynamically defining grammar components.  I have a big list of nouns, I&apos;d like to incorporate them into my grammar without too much crazy.  Is there some way I can add in a dynamic rule with something like nouns = coll?</span></div><div id="t1590602753018100" t="2020-05-27 18:05:53 aengelberg You probably want  instaparse.combinators"><a href="#t1590602753018100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:05:53</span>       aengelberg </span><span>You probably want </span><code>instaparse.combinators</code></div><div id="t1590602799018400" t="2020-05-27 18:06:39 SoV4 thanks!"><a href="#t1590602799018400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:06:39</span>             SoV4 </span><span>thanks!</span></div><div id="t1590602812018600" t="2020-05-27 18:06:52 SoV4 i shall take a gander"><a href="#t1590602812018600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:06:52</span>             SoV4 </span><span>i shall take a gander</span></div><div id="t1590602834018800" t="2020-05-27 18:07:14 aengelberg https://github.com/engelberg/instaparse#combinators"><a href="#t1590602834018800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:07:14</span>       aengelberg </span><a href="https://github.com/engelberg/instaparse#combinators" target="_blank">https://github.com/engelberg/instaparse#combinators</a></div><div id="t1590602864019300" t="2020-05-27 18:07:44 SoV4 Would it be ok to do something like  (str/join &quot;|&quot; nouns-seq)   in the grammar def"><a href="#t1590602864019300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:07:44</span>             SoV4 </span><span>Would it be ok to do something like </span><code>(str/join &quot;|&quot; nouns-seq) </code><span> in the grammar def</span></div><div id="t1590602905019800" t="2020-05-27 18:08:25 aengelberg that might be more error-prone and hard to read, but it wouldn’t be more or less efficient than the combinator version"><a href="#t1590602905019800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:08:25</span>       aengelberg </span><span>that might be more error-prone and hard to read, but it wouldn’t be more or less efficient than the combinator version</span></div><div id="t1590602942020600" t="2020-05-27 18:09:02 SoV4 Okay cool"><a href="#t1590602942020600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:09:02</span>             SoV4 </span><span>Okay cool</span></div><div id="t1590602966021300" t="2020-05-27 18:09:26 aengelberg How many nouns are we talking? I’d be wary of putting too many into a parser rule"><a href="#t1590602966021300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:09:26</span>       aengelberg </span><span>How many nouns are we talking? I’d be wary of putting too many into a parser rule</span></div><div id="t1590603011022000" t="2020-05-27 18:10:11 aengelberg Because to parse text that satisfies the rule, it ultimately has to iterate through every option at every point in your text that could potentially be a noun"><a href="#t1590603011022000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:10:11</span>       aengelberg </span><span>Because to parse text that satisfies the rule, it ultimately has to iterate through every option at every point in your text that could potentially be a noun</span></div><div id="t1590603079022400" t="2020-05-27 18:11:19 aengelberg And if you pass a string to the parser that doesn’t successfully parse, the “failure” message will be really long"><a href="#t1590603079022400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:11:19</span>       aengelberg </span><span>And if you pass a string to the parser that doesn’t successfully parse, the “failure” message will be really long</span></div><div id="t1590603132022900" t="2020-05-27 18:12:12 SoV4 I&apos;m using about 5-20 nouns"><a href="#t1590603132022900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:12:12</span>             SoV4 </span><span>I&apos;m using about 5-20 nouns</span></div><div id="t1590603144023200" t="2020-05-27 18:12:24 aengelberg ah ok, that’s definitely manageable"><a href="#t1590603144023200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:12:24</span>       aengelberg </span><span>ah ok, that’s definitely manageable</span></div><div id="t1590603181023900" t="2020-05-27 18:13:01 SoV4 I&apos;m trying to just do string join on the nouns list I have, but they lose their quotes"><a href="#t1590603181023900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:13:01</span>             SoV4 </span><span>I&apos;m trying to just do string join on the nouns list I have, but they lose their quotes</span></div><div id="t1590603212024400" t="2020-05-27 18:13:32 aengelberg maybe  (apply str/join &quot;|&quot; (map #(str &quot;&apos;&quot; % &quot;&apos;&quot;) nouns-seq))"><a href="#t1590603212024400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:13:32</span>       aengelberg </span><span>maybe </span><code>(apply str/join &quot;|&quot; (map #(str &quot;&apos;&quot; % &quot;&apos;&quot;) nouns-seq))</code></div><div id="t1590603243024600" t="2020-05-27 18:14:03 SoV4 ah beautiful"><a href="#t1590603243024600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:14:03</span>             SoV4 </span><span>ah beautiful</span></div><div id="t1590603245024800" t="2020-05-27 18:14:05 SoV4 thank you very much"><a href="#t1590603245024800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:14:05</span>             SoV4 </span><span>thank you very much</span></div><div id="t1590603570025700" t="2020-05-27 18:19:30 SoV4 almost perfect, it gives me a (&apos;list&apos; &apos;of&apos; &apos;nouns&apos;) .. not sure how to make it digestible for the parser"><a href="#t1590603570025700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:19:30</span>             SoV4 </span><span>almost perfect, it gives me a (&apos;list&apos; &apos;of&apos; &apos;nouns&apos;) .. not sure how to make it digestible for the parser</span></div><div id="t1590603587026000" t="2020-05-27 18:19:47 aengelberg I think that’s where the  apply str/join  comes in"><a href="#t1590603587026000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:19:47</span>       aengelberg </span><span>I think that’s where the </span><code>apply str/join</code><span> comes in</span></div><div id="t1590603617026200" t="2020-05-27 18:20:17 aengelberg oops, I was wrong, you don’t need  apply"><a href="#t1590603617026200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:20:17</span>       aengelberg </span><span>oops, I was wrong, you don’t need </span><code>apply</code></div><div id="t1590603629026600" t="2020-05-27 18:20:29 aengelberg just  (str/join &quot;|&quot; …)"><a href="#t1590603629026600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:20:29</span>       aengelberg </span><span>just </span><code>(str/join &quot;|&quot; …)</code></div><div id="t1590603733026800" t="2020-05-27 18:22:13 SoV4 Excellent!  Thank you."><a href="#t1590603733026800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:22:13</span>             SoV4 </span><span>Excellent!  Thank you.</span></div><div id="t1590603748027100" t="2020-05-27 18:22:28 SoV4 I&apos;m looking forward to showing you guys what I&apos;ve come up with, once it&apos;s done!  😃"><a href="#t1590603748027100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:22:28</span>             SoV4 </span><span>I&apos;m looking forward to showing you guys what I&apos;ve come up with, once it&apos;s done! </span><b>😃</b></div><div id="t1590603757027400" t="2020-05-27 18:22:37 aengelberg can’t wait to see!"><a href="#t1590603757027400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:22:37</span>       aengelberg </span><span>can’t wait to see!</span></div><div id="t1590603812028100" t="2020-05-27 18:23:32 SoV4 it&apos;s a great wonder to have the power of magic at your fingertips!  😄"><a href="#t1590603812028100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">18:23:32</span>             SoV4 </span><span>it&apos;s a great wonder to have the power of magic at your fingertips! </span><b>😄</b></div><div id="t1590606125028600" t="2020-05-27 19:02:05 SoV4 I keep ending up with a vector although I would like to use a map... I don&apos;t know if it&apos;s clojurescript"><a href="#t1590606125028600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:02:05</span>             SoV4 </span><span>I keep ending up with a vector although I would like to use a map... I don&apos;t know if it&apos;s clojurescript</span></div><div id="t1590606151029000" t="2020-05-27 19:02:31 aengelberg you mean for the input or the output?"><a href="#t1590606151029000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:02:31</span>       aengelberg </span><span>you mean for the input or the output?</span></div><div id="t1590606209029400" t="2020-05-27 19:03:29 SoV4 the output of insta/parse"><a href="#t1590606209029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:03:29</span>             SoV4 </span><span>the output of insta/parse</span></div><div id="t1590606217029600" t="2020-05-27 19:03:37 aengelberg you can set  :output-format :enlive  to get a map out of the parser"><a href="#t1590606217029600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:03:37</span>       aengelberg </span><span>you can set </span><code>:output-format :enlive</code><span> to get a map out of the parser</span></div><div id="t1590606243029800" t="2020-05-27 19:04:03 SoV4 wizardry"><a href="#t1590606243029800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:04:03</span>             SoV4 </span><span>wizardry</span></div><div id="t1590606491030400" t="2020-05-27 19:08:11 SoV4 Hmm, not bad, but it has :tag and :content, I could do with simply swapping  [] with {}"><a href="#t1590606491030400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:08:11</span>             SoV4 </span><span>Hmm, not bad, but it has :tag and :content, I could do with simply swapping  [] with {}</span></div><div id="t1590606717030700" t="2020-05-27 19:11:57 SoV4 Thanks for all the help, I&apos;ll scratch around"><a href="#t1590606717030700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">19:11:57</span>             SoV4 </span><span>Thanks for all the help, I&apos;ll scratch around</span></div><div id="t1590621357031500" t="2020-05-27 23:15:57 SoV4 Can instaparse flatten a recursive structure with a rule?"><a href="#t1590621357031500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-27</span> <span class="t" onclick="H(this)">23:15:57</span>             SoV4 </span><span>Can instaparse flatten a recursive structure with a rule?</span></div><div id="t1590685025031800" t="2020-05-28 16:57:05 SoV4 Hi.  I finished what I was working on.  Phase one, anyway."><a href="#t1590685025031800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-28</span> <span class="t" onclick="H(this)">16:57:05</span>             SoV4 </span><span>Hi.  I finished what I was working on.  Phase one, anyway.</span></div><div id="t1590685194034300" t="2020-05-28 16:59:54 SoV4 A few months ago we created a tool that lets people input Japanese by clicking on boxes.  Nouns, verbs, particles (grammar words in Japanese that mark grammatical role of a term).
It&apos;s a useful teaching and learning tool.  Students can create a native-Japanese composition with a tool that respects the basic grammar rules.
I thought it might be possible to generate an English translation in real-time of the Japanese a student was generating.  Turns out, it is!  Turns out, Instaparse is super powerful and I was able to use some grammar and EBNF insights from January to work it into a real-time translation tool.
Here&apos;s a brief gif, you can see it in Action."><a href="#t1590685194034300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-28</span> <span class="t" onclick="H(this)">16:59:54</span>             SoV4 </span><span>A few months ago we created a tool that lets people input Japanese by clicking on boxes.  Nouns, verbs, particles (grammar words in Japanese that mark grammatical role of a term).
It&apos;s a useful teaching and learning tool.  Students can create a native-Japanese composition with a tool that respects the basic grammar rules.
I thought it might be possible to generate an English translation in real-time of the Japanese a student was generating.  Turns out, it is!  Turns out, Instaparse is super powerful and I was able to use some grammar and EBNF insights from January to work it into a real-time translation tool.
Here&apos;s a brief gif, you can see it in Action.</span></div><div id="t1590685271035500" t="2020-05-28 17:01:11 SoV4 And here are some still shots to help show what&apos;s happening:  A generated Japanese phrase is parsed, smushed, and sequenced into Plain &apos;Ainglish.  This composition was made by a student! =)"><a href="#t1590685271035500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-28</span> <span class="t" onclick="H(this)">17:01:11</span>             SoV4 </span><span>And here are some still shots to help show what&apos;s happening:  A generated Japanese phrase is parsed, smushed, and sequenced into Plain &apos;Ainglish.  This composition was made by a student! =)</span></div><div id="t1590685426036300" t="2020-05-28 17:03:46 SoV4 Thanks a lot for Instaparse!  😄  You can do magical things indistinguishable from magic."><a href="#t1590685426036300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-05-28</span> <span class="t" onclick="H(this)">17:03:46</span>             SoV4 </span><span>Thanks a lot for Instaparse! </span><b>😄</b><span> You can do magical things indistinguishable from magic.</span></div><div id="t1594852166037600" t="2020-07-15 22:29:26 mrchance Hi! If instaparse parses a string in Clojure but fails to do the same in cljs with an identical grammar, what&apos;s a good place to start debugging?"><a href="#t1594852166037600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span> <span class="t" onclick="H(this)">22:29:26</span>         mrchance </span><span>Hi! If instaparse parses a string in Clojure but fails to do the same in cljs with an identical grammar, what&apos;s a good place to start debugging?</span></div><div id="t1594852223038600" t="2020-07-15 22:30:23 aengelberg instaparse defers to the host language when it comes to regex syntax, so if you have a  #&quot;…&quot;  in your grammar that might be a good place to start"><a href="#t1594852223038600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span> <span class="t" onclick="H(this)">22:30:23</span>       aengelberg </span><span>instaparse defers to the host language when it comes to regex syntax, so if you have a </span><code>#&quot;…&quot;</code><span> in your grammar that might be a good place to start</span></div><div id="t1594852262039000" t="2020-07-15 22:31:02 mrchance Aha! I do, will check that, thanks"><a href="#t1594852262039000" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span> <span class="t" onclick="H(this)">22:31:02</span>         mrchance </span><span>Aha! I do, will check that, thanks</span></div><div id="t1594852920040100" t="2020-07-15 22:42:00 mrchance Got it, it was Javas  [^]+]  vs. JS&apos;  [^\]+]  , thanks again  🙂 
Writing the parser was a breeze btw!"><a href="#t1594852920040100" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span> <span class="t" onclick="H(this)">22:42:00</span>         mrchance </span><span>Got it, it was Javas </span><code>[^]+]</code><span> vs. JS&apos; </span><code>[^\]+]</code><span> , thanks again </span><b>🙂</b><span>
Writing the parser was a breeze btw!</span></div><div id="t1594852942040600" t="2020-07-15 22:42:22 aengelberg nice! cool to hear that, thx"><a href="#t1594852942040600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-07-15</span> <span class="t" onclick="H(this)">22:42:22</span>       aengelberg </span><span>nice! cool to hear that, thx</span></div><div id="t1597373020003900" t="2020-08-14 02:43:40 scarrucciu Hello all, is there a way to match on a value, but still use that value for a downstream rule? For example have a string that looks like  &quot;ABC*123~EFG*456~HIJ*789&quot;   and I would want to nest down a level when I see ABC and HIJ, but I also want to parse the ABC and HIJ are part of the regular segment structure that is using the ~ as the delim"><a href="#t1597373020003900" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-14</span> <span class="t" onclick="H(this)">02:43:40</span>       scarrucciu </span><span>Hello all, is there a way to match on a value, but still use that value for a downstream rule? For example have a string that looks like </span><code>&quot;ABC*123~EFG*456~HIJ*789&quot;</code><span>  and I would want to nest down a level when I see ABC and HIJ, but I also want to parse the ABC and HIJ are part of the regular segment structure that is using the ~ as the delim</span></div><div id="t1597373091004300" t="2020-08-14 02:44:51 aengelberg Would the lookahead feature help?"><a href="#t1597373091004300" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-14</span> <span class="t" onclick="H(this)">02:44:51</span>            aengelberg </span><span>Would the lookahead feature help?</span></div><div id="t1597373143004500" t="2020-08-14 02:45:43 scarrucciu was thinking that, would that allow me to essentially parse prospectively without actually pulling the value? Will try it now"><a href="#t1597373143004500" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-14</span> <span class="t" onclick="H(this)">02:45:43</span>            scarrucciu </span><span>was thinking that, would that allow me to essentially parse prospectively without actually pulling the value? Will try it now</span></div><div id="t1597373216004700" t="2020-08-14 02:46:56 scarrucciu that worked! and was way to simple. Thanks for the quick reply"><a href="#t1597373216004700" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-08-14</span> <span class="t" onclick="H(this)">02:46:56</span>            scarrucciu </span><span>that worked! and was way to simple. Thanks for the quick reply</span></div><div id="t1601558015001600" t="2020-10-01 13:13:35 jeremys Hi, I was wondering, is there a way to force instaparse to throw an error instead of backtracking and exploring another parse solution ?"><a href="#t1601558015001600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-01</span> <span class="t" onclick="H(this)">13:13:35</span>          jeremys </span><span>Hi, I was wondering, is there a way to force instaparse to throw an error instead of backtracking and exploring another parse solution ?</span></div><div id="t1601569390002600" t="2020-10-01 16:23:10 hiredman If your grammar can be expressed without alternatives then you don&apos;t need a parsing library"><a href="#t1601569390002600" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-01</span> <span class="t" onclick="H(this)">16:23:10</span>         hiredman </span><span>If your grammar can be expressed without alternatives then you don&apos;t need a parsing library</span></div><div id="t1601645859014400" t="2020-10-02 13:37:39 jeremys @hiredman Hi, I don&apos;t know what to make of your answer. I could also say that even with a grammar that offer alternatives I could still make the choice not to use a parsing library and write a reader by hand. I am using instaparse because it makes it much easier to build a parser with it than without it. It also makes it easier to evolve the grammar. Maybe the answer to my question is that my grammar can be expressed another way instead of wanting to tell the parser not to backtrack. Still if the functionality existed I&apos;d like to know about it!  Cheers."><a href="#t1601645859014400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-02</span> <span class="t" onclick="H(this)">13:37:39</span>          jeremys </span><span>@hiredman Hi, I don&apos;t know what to make of your answer. I could also say that even with a grammar that offer alternatives I could still make the choice not to use a parsing library and write a reader by hand. I am using instaparse because it makes it much easier to build a parser with it than without it. It also makes it easier to evolve the grammar. Maybe the answer to my question is that my grammar can be expressed another way instead of wanting to tell the parser not to backtrack. Still if the functionality existed I&apos;d like to know about it!  Cheers.</span></div><div id="t1601646070016200" t="2020-10-02 13:41:10 manutter51 What was your reason for wanting to error out instead of backtracking? Are you trying to raise an alert about invalid expressions in what you’re parsing, or are you trying to debug your grammar?"><a href="#t1601646070016200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-02</span> <span class="t" onclick="H(this)">13:41:10</span>       manutter51 </span><span>What was your reason for wanting to error out instead of backtracking? Are you trying to raise an alert about invalid expressions in what you’re parsing, or are you trying to debug your grammar?</span></div><div id="t1601655410029400" t="2020-10-02 16:16:50 jeremys @manutter51 hi! I want to raise an alert about invalid code. I am working on something like  https://docs.racket-lang.org/pollen/  that allows to write code in the middle of text. My problem arises in particular situations.
For instance, the entry rule of my grammar looks like this:
 doc = (plain-text | embedded)* 
If I write a pollen expression like this:
 plain-text ◊str[&quot;some string&quot;] plain-text 
it is parsed as:
 [:doc 
 &quot;plain-text &quot; 
 [:tag 
  [:tag-name &quot;str&quot;] 
  [:tag-clj-arg &quot;[&quot; &quot; &quot; &quot;\&quot;aaa\&quot;&quot; &quot;]&quot;]] 
 &quot; plain-text&quot;] 
Now if i make a mistake balancing the quotes:
 plain-text ◊str[&quot;some string&quot;&quot;] plain-text 
the way my grammar works I get:
 [:doc 
 &quot;plain-text &quot; 
 [:tag 
  [:tag-name &quot;str&quot;]] 
 &quot;[ \&quot;some string\&quot;\&quot;]  plain-text&quot;] 
From the point of view of the parser there is no error here. The  [&quot;some string&quot;&quot;]   expression, which serves as arguments to the  str  function, couldn&apos;t be parsed as correct clojure code. However the parser can fall back to the  plain-text  grammatical rule and did just that. In this case I&apos;d rather it didn&apos;t."><a href="#t1601655410029400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-02</span> <span class="t" onclick="H(this)">16:16:50</span>          jeremys </span><span>@manutter51 hi! I want to raise an alert about invalid code. I am working on something like </span><a href="https://docs.racket-lang.org/pollen/" target="_blank">https://docs.racket-lang.org/pollen/</a><span> that allows to write code in the middle of text. My problem arises in particular situations.
For instance, the entry rule of my grammar looks like this:
</span><pre>doc = (plain-text | embedded)*</pre><span>
If I write a pollen expression like this:
</span><pre>plain-text ◊str[&quot;some string&quot;] plain-text</pre><span>
it is parsed as:
</span><pre>[:doc 
 &quot;plain-text &quot; 
 [:tag 
  [:tag-name &quot;str&quot;] 
  [:tag-clj-arg &quot;[&quot; &quot; &quot; &quot;\&quot;aaa\&quot;&quot; &quot;]&quot;]] 
 &quot; plain-text&quot;]</pre><span>
Now if i make a mistake balancing the quotes:
</span><pre>plain-text ◊str[&quot;some string&quot;&quot;] plain-text</pre><span>
the way my grammar works I get:
</span><pre>[:doc 
 &quot;plain-text &quot; 
 [:tag 
  [:tag-name &quot;str&quot;]] 
 &quot;[ \&quot;some string\&quot;\&quot;]  plain-text&quot;]</pre><span>
From the point of view of the parser there is no error here. The </span><code>[&quot;some string&quot;&quot;]</code><span>  expression, which serves as arguments to the </span><code>str</code><span> function, couldn&apos;t be parsed as correct clojure code. However the parser can fall back to the </span><code>plain-text</code><span> grammatical rule and did just that. In this case I&apos;d rather it didn&apos;t.</span></div><div id="t1601656003030200" t="2020-10-02 16:26:43 manutter51 Perhaps you could define  plain-text  so that it’s not allowed to contain an unescaped  ◊  character?"><a href="#t1601656003030200" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-02</span> <span class="t" onclick="H(this)">16:26:43</span>       manutter51 </span><span>Perhaps you could define </span><code>plain-text</code><span> so that it’s not allowed to contain an unescaped </span><code>◊</code><span> character?</span></div><div id="t1601656913036800" t="2020-10-02 16:41:53 jeremys It is actually  🙂  That&apos;s how the grammar recognizes that there is a &quot;tag-fn&quot; there (in pollen&apos;s jargon) or embedded code in general. And so we rightly get the  [:tag [:tag-name &quot;str&quot;]]  part. What happens is that the arguments to the function are optional. Thus if the text that follows the function&apos;s name is malformed args, the parser can fall back to plain text. It may be be that the parser can&apos;t be made to throw in that case or that I can&apos;t gerrymander my grammar into doing what I want. It would would be cool if I could though."><a href="#t1601656913036800" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-10-02</span> <span class="t" onclick="H(this)">16:41:53</span>          jeremys </span><span>It is actually </span><b>🙂</b><span> That&apos;s how the grammar recognizes that there is a &quot;tag-fn&quot; there (in pollen&apos;s jargon) or embedded code in general. And so we rightly get the </span><code>[:tag [:tag-name &quot;str&quot;]]</code><span> part. What happens is that the arguments to the function are optional. Thus if the text that follows the function&apos;s name is malformed args, the parser can fall back to plain text. It may be be that the parser can&apos;t be made to throw in that case or that I can&apos;t gerrymander my grammar into doing what I want. It would would be cool if I could though.</span></div><div id="t1605533518042400" t="2020-11-16 13:31:58 misha greetings!
is there a way to specify &quot;greedy&quot; matches in the grammar (instead of the tree transforming) other than using inline regex-es?

(insta/parse (insta/parser &quot;S = &apos;a&apos;+&quot;) &quot;aaaa&quot;)
to get
=&gt; [:S &quot;aaaa&quot;]
instead of:
=&gt; [:S &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot;]

my actual use case is: I have a bunch of rules wrapped in &lt;&gt; (for &quot;documentation&quot;), so the tags will not show up in output tree, so I&apos;d line to have a single match string in the output (like &quot;aaaaa&quot;).
I&apos;d like to avoid tree transforming, because grammar is &quot;up for extension&quot; for someone else, and making sure they update transformers as well add a line to grammar - is extra point of potential failure"><a href="#t1605533518042400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-11-16</span> <span class="t" onclick="H(this)">13:31:58</span>            misha </span><span>greetings!
is there a way to specify &quot;greedy&quot; matches in the grammar (instead of the tree transforming) other than using inline regex-es?

(insta/parse (insta/parser &quot;S = &apos;a&apos;+&quot;) &quot;aaaa&quot;)
to get
=&gt; [:S &quot;aaaa&quot;]
instead of:
=&gt; [:S &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;a&quot;]

my actual use case is: I have a bunch of rules wrapped in &lt;&gt; (for &quot;documentation&quot;), so the tags will not show up in output tree, so I&apos;d line to have a single match string in the output (like &quot;aaaaa&quot;).
I&apos;d like to avoid tree transforming, because grammar is &quot;up for extension&quot; for someone else, and making sure they update transformers as well add a line to grammar - is extra point of potential failure</span></div><div id="t1605533959043400" t="2020-11-16 13:39:19 misha and inline regexes do not compose  [:attrs nil]  at all:
 &lt;phrase&gt; =    #&apos;\w+(\s+\w+)*&apos;
text     = #&apos;\s*\w+(\s+\w+)*\s*&apos; 
instead of
 &lt;space&gt;  = #&apos;\s+&apos;
&lt;word&gt;   = #&apos;\w+&apos;
&lt;phrase&gt; = word (space word)*
text     = space? phrase space?"><a href="#t1605533959043400" onclick="S(this)">#</a><span class="u"><span class="t" onclick="D(this)">2020-11-16</span> <span class="t" onclick="H(this)">13:39:19</span>            misha </span><span>and inline regexes do not compose </span><del>well</del><span> at all:
</span><pre>&lt;phrase&gt; =    #&apos;\w+(\s+\w+)*&apos;
text     = #&apos;\s*\w+(\s+\w+)*\s*&apos;</pre><span>
instead of
</span><pre>&lt;space&gt;  = #&apos;\s+&apos;
&lt;word&gt;   = #&apos;\w+&apos;
&lt;phrase&gt; = word (space word)*
text     = space? phrase space?</pre></div></div></body>